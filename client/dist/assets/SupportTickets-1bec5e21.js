import { c as z, u as G, b as J, r as l, j as e, X as Y, A as F, m as L, d as O, a as A, e as D, h as Q } from "./index-a367903a.js"; import { C as E, f as N, U, S as V } from "./dateUtils-0cf2816c.js"; import { M as K, C as Z, a as ee } from "./menu-52d4f898.js"; import { M as te } from "./mail-7147b856.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re = [["path", { d: "M8 3 4 7l4 4", key: "9rb6wj" }], ["path", { d: "M4 7h16", key: "6tx8e3" }], ["path", { d: "m16 21 4-4-4-4", key: "siv7j2" }], ["path", { d: "M20 17H4", key: "h6l3hr" }]], se = z("arrow-left-right", re);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie = [["path", { d: "m21 16-4 4-4-4", key: "f6ql7i" }], ["path", { d: "M17 20V4", key: "1ejh1v" }], ["path", { d: "m3 8 4-4 4 4", key: "11wl7u" }], ["path", { d: "M7 4v16", key: "1glfcx" }]], oe = z("arrow-up-down", ie);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne = [["path", { d: "M10.268 21a2 2 0 0 0 3.464 0", key: "vwvbt9" }], ["path", { d: "M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326", key: "11g9vi" }]], H = z("bell", ne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae = [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]], le = z("chevron-down", ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de = [["path", { d: "M12 6v6l4 2", key: "mmk7yg" }], ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]], ce = z("clock", de);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe = [["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }], ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }], ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }], ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]], Ne = z("layout-dashboard", pe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe = [["path", { d: "m16 17 5-5-5-5", key: "1bji2h" }], ["path", { d: "M21 12H9", key: "dn1m92" }], ["path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4", key: "1uf3rs" }]], fe = z("log-out", xe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge = [["path", { d: "M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z", key: "18887p" }]], he = z("message-square", ge);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me = [["path", { d: "M13 21h8", key: "1jsn5i" }], ["path", { d: "M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z", key: "1a8usu" }]], Le = z("pen-line", me);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue = [["path", { d: "M5 12h14", key: "1ays0h" }], ["path", { d: "M12 5v14", key: "s699le" }]], be = z("plus", ue);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye = [["path", { d: "M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z", key: "1ffxy3" }], ["path", { d: "m21.854 2.147-10.94 10.939", key: "12cjpa" }]], je = z("send", ye);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve = [["path", { d: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915", key: "1i5ecw" }], ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]], ke = z("settings", ve);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se = [["path", { d: "M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z", key: "vktsd0" }], ["circle", { cx: "7.5", cy: "7.5", r: ".5", fill: "currentColor", key: "kqv944" }]], we = z("tag", Se);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze = [["path", { d: "M12 3v12", key: "1x0j5s" }], ["path", { d: "m17 8-5-5-5 5", key: "7q97r8" }], ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }]], $e = z("upload", ze);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce = [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["path", { d: "M16 3.128a4 4 0 0 1 0 7.744", key: "16gr8j" }], ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]], De = z("users", Ce), Pe = ({ user: t, title: j, onLogout: y, onSidebarToggle: d, onProfileClick: g, onSettingsClick: n, sidebarOpen: T, isMobile: p, notifications: v = [], onNotificationRead: c }) => { var i; const f = G(), s = J(), [w, R] = l.useState(new Date), [m, W] = l.useState(!1), [k, x] = l.useState(!1); l.useEffect(() => { const r = setInterval(() => R(new Date), 1e3); return () => clearInterval(r) }, []); const S = s.pathname.startsWith("/probate"), u = s.pathname.startsWith("/oadr"), B = S || u, C = () => { f(S ? "/oadr" : "/probate") }; return e.jsxs("header", { style: { minHeight: "80px", background: "white", display: "flex", alignItems: "center", justifyContent: "space-between", padding: "0 1.5rem", boxShadow: "0 2px 10px rgba(0,0,0,0.03)", position: "sticky", top: 0, zIndex: 30, borderBottom: "1px solid #f1f5f9" }, children: [e.jsxs("div", { style: { display: "flex", gap: "1.5rem", alignItems: "center" }, children: [d && e.jsx("button", { onClick: d, style: { background: "#f1f5f9", border: "none", padding: "0.6rem", borderRadius: "10px", cursor: "pointer", display: "flex", alignItems: "center", color: "#778eaeff" }, children: T ? e.jsx(Y, { size: 20 }) : e.jsx(K, { size: 20 }) }), e.jsxs("div", { style: { display: "flex", flexDirection: "column" }, children: [e.jsx("h1", { style: { margin: 0, fontSize: p ? "1.1rem" : "1.4rem", color: "rgb\(18 37 74\)", fontWeight: "700" }, children: j }), !p && e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "2px" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", color: "#94a3b8", fontSize: "11px" }, children: [e.jsx(E, { size: 12 }), e.jsx("span", { children: N(w).split(" ")[0] })] }), e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", color: "#94a3b8", fontSize: "11px" }, children: [e.jsx(ce, { size: 12 }), e.jsx("span", { children: N(w).split(" ")[1] })] })] })] })] }), e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [!p && (t == null ? void 0 : t.email) && e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.6rem", padding: "0.5rem 1.25rem", background: "#f8fafc", borderRadius: "30px", border: "1px solid #f1f5f9" }, children: [e.jsx(te, { size: 14, color: "#3b82f6" }), e.jsx("span", { style: { fontSize: "13px", color: "#778eaeff", fontWeight: "600" }, children: t.email })] }), B && e.jsxs("button", { onClick: C, style: { display: "flex", alignItems: "center", gap: "0.6rem", padding: "0.5rem 1rem", background: S ? "linear-gradient(135deg, #10b981 0%, #059669 100%)" : "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", color: "white", borderRadius: "10px", border: "none", cursor: "pointer", fontSize: "13px", fontWeight: "600", boxShadow: "0 4px 6px -1px rgba(0, 0, 0, 0.1)", transition: "all 0.2s" }, onMouseOver: r => r.currentTarget.style.transform = "translateY(-1px)", onMouseOut: r => r.currentTarget.style.transform = "translateY(0)", children: [e.jsx(se, { size: 14 }), !p && (S ? "Switch to OADR Portal" : "Switch to Probate Portal")] }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsxs("div", { onClick: () => W(!m), style: { position: "relative", cursor: "pointer", padding: "0.6rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #f1f5f9" }, children: [e.jsx(H, { size: 20, color: "#778eaeff" }), v.filter(r => !r.is_read).length > 0 && e.jsx("span", { style: { position: "absolute", top: "-4px", right: "-4px", background: "#ef4444", color: "white", fontSize: "10px", padding: "2px 5px", borderRadius: "10px", border: "2px solid white", minWidth: "18px", textAlign: "center" }, children: v.filter(r => !r.is_read).length })] }), e.jsx(F, { children: m && e.jsxs(L.div, { initial: { opacity: 0, y: 10, scale: .95 }, animate: { opacity: 1, y: 0, scale: 1 }, exit: { opacity: 0, y: 10, scale: .95 }, style: { position: "absolute", top: "100%", right: 0, marginTop: "0.75rem", width: "320px", background: "white", borderRadius: "16px", boxShadow: "0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)", border: "1px solid #f1f5f9", overflow: "hidden", zIndex: 60 }, children: [e.jsxs("div", { style: { padding: "1rem", fontWeight: "700", borderBottom: "1px solid #f1f5f9", display: "flex", justifyContent: "space-between", alignItems: "center", background: "#f8fafc" }, children: [e.jsx("span", { style: { color: "rgb\(18 37 74\)" }, children: "Notifications" }), e.jsx("span", { onClick: () => v.forEach(r => !r.is_read && c && c(r.id)), style: { color: "#3b82f6", fontSize: "12px", cursor: "pointer", fontWeight: "600" }, children: "Mark all read" })] }), e.jsx("div", { style: { maxHeight: "350px", overflowY: "auto" }, children: v.length > 0 ? v.map(r => e.jsxs("div", { onClick: () => { !r.is_read && c && c(r.id) }, style: { padding: "1rem", borderBottom: "1px solid #f8fafc", cursor: "pointer", background: r.is_read ? "transparent" : "#f0f7ff", position: "relative" }, onMouseOver: _ => _.currentTarget.style.background = r.is_read ? "#f8fafc" : "#e6f2ff", onMouseOut: _ => _.currentTarget.style.background = r.is_read ? "transparent" : "#f0f7ff", children: [!r.is_read && e.jsx("div", { style: { position: "absolute", top: "16px", right: "16px", width: "8px", height: "8px", borderRadius: "50%", background: "#3b82f6" } }), e.jsx("p", { style: { margin: 0, fontSize: "14px", color: "rgb\(18 37 74\)", fontWeight: "600", paddingRight: "15px" }, children: r.title }), e.jsx("p", { style: { margin: "4px 0 0", fontSize: "13px", color: "#778eaeff", lineHeight: "1.4" }, children: r.message }), e.jsx("p", { style: { margin: "6px 0 0", fontSize: "11px", color: "#94a3b8" }, children: new Date(r.created_at).toLocaleString([], { month: "short", day: "numeric", hour: "2-digit", minute: "2-digit" }) })] }, r.id)) : e.jsxs("div", { style: { padding: "2rem", textAlign: "center", color: "#94a3b8" }, children: [e.jsx(H, { size: 32, style: { margin: "0 auto 1rem", opacity: .3 } }), e.jsx("p", { style: { margin: 0, fontSize: "14px" }, children: "No new notifications" })] }) }), v.length > 0 && e.jsx("div", { style: { padding: "0.8rem", textAlign: "center", fontSize: "13px", color: "#3b82f6", cursor: "pointer", borderTop: "1px solid #f1f5f9", fontWeight: "600", background: "#f8fafc" }, children: "Check all updates" })] }) })] }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsxs("div", { onClick: () => x(!k), style: { display: "flex", alignItems: "center", gap: "0.75rem", padding: "0.4rem 0.6rem", background: "#f1f5f9", borderRadius: "35px", cursor: "pointer", border: "1px solid #e2e8f0", transition: "all 0.2s" }, children: [e.jsx("div", { style: { width: "32px", height: "32px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", borderRadius: "50%", color: "white", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: "bold", fontSize: "13px", boxShadow: "0 2px 4px rgba(37, 99, 235, 0.2)", overflow: "hidden" }, children: t != null && t.profile_pic ? e.jsx("img", { src: t.profile_pic, alt: "Profile", style: { width: "100%", height: "100%", objectFit: "cover" }, onError: r => { r.target.style.display = "none", r.target.parentElement.innerText = ((t == null ? void 0 : t.firstName) || (t == null ? void 0 : t.first_name) || (t == null ? void 0 : t.name) || "?").charAt(0).toUpperCase() } }) : ((t == null ? void 0 : t.firstName) || (t == null ? void 0 : t.first_name) || (t == null ? void 0 : t.name) || "?").charAt(0).toUpperCase() }), !p && e.jsx("span", { style: { fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: (t == null ? void 0 : t.firstName) || (t == null ? void 0 : t.first_name) || (t == null ? void 0 : t.name) }), e.jsx(le, { size: 14, color: "#778eaeff", style: { transform: k ? "rotate(180deg)" : "rotate(0deg)", transition: "transform 0.2s" } })] }), e.jsx(F, { children: k && e.jsxs(L.div, { initial: { opacity: 0, y: 10, scale: .95 }, animate: { opacity: 1, y: 0, scale: 1 }, exit: { opacity: 0, y: 10, scale: .95 }, style: { position: "absolute", top: "100%", right: 0, marginTop: "0.75rem", width: "220px", background: "white", borderRadius: "16px", boxShadow: "0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)", border: "1px solid #f1f5f9", padding: "0.5rem", zIndex: 60 }, children: [e.jsxs("div", { style: { padding: "0.75rem", borderBottom: "1px solid #f1f5f9", marginBottom: "0.5rem" }, children: [e.jsxs("p", { style: { margin: 0, fontWeight: "700", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: [(t == null ? void 0 : t.firstName) || (t == null ? void 0 : t.first_name), " ", (t == null ? void 0 : t.surname) || (t == null ? void 0 : t.name)] }), e.jsx("p", { style: { margin: "2px 0 0", fontSize: "12px", color: "#94a3b8", wordBreak: "break-all" }, children: (t == null ? void 0 : t.role_display_name) || ((i = t == null ? void 0 : t.role) == null ? void 0 : i.toUpperCase()) || "PUBLIC USER" })] }), e.jsx(q, { icon: e.jsx(U, { size: 18 }), label: "My Profile", onClick: () => { g && g(), x(!1) } }), e.jsx(q, { icon: e.jsx(ke, { size: 18 }), label: "Settings", onClick: () => { n && n(), x(!1) } }), e.jsx("div", { style: { borderTop: "1px solid #f1f5f9", margin: "0.5rem 0" } }), e.jsxs("div", { onClick: y, style: { display: "flex", alignItems: "center", gap: "0.75rem", padding: "0.75rem", borderRadius: "10px", cursor: "pointer", fontSize: "14px", color: "#ef4444", fontWeight: "600" }, onMouseOver: r => r.currentTarget.style.background = "#fef2f2", onMouseOut: r => r.currentTarget.style.background = "transparent", children: [e.jsx(fe, { size: 18 }), e.jsx("span", { children: "Logout System" })] })] }) })] })] })] }) }, q = ({ icon: t, label: j, onClick: y }) => e.jsxs("div", { onClick: y, style: { display: "flex", alignItems: "center", gap: "0.75rem", padding: "0.75rem", borderRadius: "10px", cursor: "pointer", fontSize: "14px", color: "#475569", fontWeight: "500" }, onMouseOver: d => d.currentTarget.style.background = "#f8fafc", onMouseOut: d => d.currentTarget.style.background = "transparent", children: [t, e.jsx("span", { children: j })] }), Fe = ({ columns: t, data: j, loading: y, onRowClick: d, actions: g, searchPlaceholder: n = "Search records...", isMobile: T, dark: p = !1 }) => {
    const [v, c] = l.useState(window.innerWidth <= 1024), f = T !== void 0 ? T : v, s = { background: p ? "rgb\(18 37 74\)" : "#ffffff", border: p ? "#334155" : "#f1f5f9", headerBg: p ? "#0f172a" : "#f8fafc", text: p ? "#f1f5f9" : "rgb\(18 37 74\)", mutedText: p ? "#94a3b8" : "#778eaeff", inputBg: p ? "#0f172a" : "#ffffff", inputBorder: p ? "#334155" : "#e2e8f0" }; l.useEffect(() => { const o = () => c(window.innerWidth <= 1024); return window.addEventListener("resize", o), () => window.removeEventListener("resize", o) }, []); const [w, R] = l.useState(""), [m, W] = l.useState(1), [k] = l.useState(10), [x, S] = l.useState({ key: null, direction: "asc" }), [u, B] = l.useState({ start: "", end: "" }), C = l.useMemo(() => f ? t.filter(o => !o.hiddenMobile) : t, [t, f]), i = o => { let b = "asc"; x.key === o && x.direction === "asc" && (b = "desc"), S({ key: o, direction: b }) }, r = l.useMemo(() => { let o = [...j]; return w && (o = o.filter(b => Object.values(b).some(h => String(h).toLowerCase().includes(w.toLowerCase())))), (u.start || u.end) && (o = o.filter(b => { const h = new Date(b.created_at || b.date), M = u.start ? new Date(u.start) : null, $ = u.end ? new Date(u.end) : null; return !(M && h < M || $ && h > $) })), x.key && o.sort((b, h) => b[x.key] < h[x.key] ? x.direction === "asc" ? -1 : 1 : b[x.key] > h[x.key] ? x.direction === "asc" ? 1 : -1 : 0), o }, [j, w, x, u]), _ = Math.ceil(r.length / k), I = r.slice((m - 1) * k, m * k); return e.jsxs("div", {
        className: "glass-card", style: { padding: f ? "1rem" : "1.5rem", background: s.background, border: `1px solid ${s.border}`, boxShadow: p ? "0 10px 15px -3px rgba(0,0,0,0.3)" : "0 4px 6px -1px rgba(0,0,0,0.05)", color: s.text }, children: [e.jsxs("div", { style: { display: "flex", flexDirection: f ? "column" : "row", justifyContent: "space-between", alignItems: "center", gap: "1rem", marginBottom: "1.5rem" }, children: [e.jsxs("div", { style: { position: "relative", width: f ? "100%" : "300px" }, children: [e.jsx(V, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#94a3b8" } }), e.jsx("input", { type: "text", placeholder: n, value: w, onChange: o => R(o.target.value), style: { width: "100%", padding: "0.6rem 1rem 0.6rem 2.5rem", borderRadius: "10px", border: `1px solid ${s.inputBorder}`, background: s.inputBg, color: s.text, fontSize: "14px", outline: "none", transition: "border-color 0.2s" } })] }), e.jsx("div", { style: { display: "flex", gap: "0.75rem", width: f ? "100%" : "auto", overflowX: "auto", paddingBottom: f ? "0.5rem" : "0" }, children: e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem", background: s.headerBg, padding: "0.5rem 1rem", borderRadius: "10px", border: `1px solid ${s.border}`, whiteSpace: "nowrap" }, children: [e.jsx(E, { size: 16, color: s.mutedText }), e.jsx("input", { type: "date", value: u.start, onChange: o => B({ ...u, start: o.target.value }), style: { background: "transparent", border: "none", fontSize: "13px", color: s.mutedText, outline: "none" } }), e.jsx("span", { style: { color: s.border }, children: "-" }), e.jsx("input", { type: "date", value: u.end, onChange: o => B({ ...u, end: o.target.value }), style: { background: "transparent", border: "none", fontSize: "13px", color: s.mutedText, outline: "none" } })] }) })] }), e.jsx("div", { style: { overflowX: "auto", borderRadius: "12px", border: `1px solid ${s.border}` }, children: e.jsxs("table", { style: { width: "100%", borderCollapse: "collapse", textAlign: "left" }, children: [e.jsx("thead", { children: e.jsxs("tr", { style: { background: s.headerBg, borderBottom: `1px solid ${s.border}` }, children: [C.map(o => e.jsx("th", { onClick: () => o.sortable && i(o.key), style: { padding: "1rem", fontSize: "13px", fontWeight: "700", color: s.mutedText, cursor: o.sortable ? "pointer" : "default", whiteSpace: "nowrap" }, children: e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [o.label, o.sortable && e.jsx(oe, { size: 14, opacity: .5 })] }) }, o.key)), g && e.jsx("th", { style: { padding: "1rem" } })] }) }), e.jsx("tbody", { children: e.jsx(F, { mode: "wait", children: y ? Array(5).fill(0).map((o, b) => e.jsxs("tr", { style: { borderBottom: "1px solid #f1f5f9" }, children: [C.map((h, M) => e.jsx("td", { style: { padding: "1rem" }, children: e.jsx("div", { style: { height: "1.25rem", background: "#f1f5f9", borderRadius: "4px", animation: "pulse 1.5s infinite" } }) }, M)), g && e.jsx("td", { style: { padding: "1rem" }, children: e.jsx("div", { style: { height: "1.25rem", width: "20px", background: "#f1f5f9", borderRadius: "4px", animation: "pulse 1.5s infinite" } }) })] }, b)) : I.length > 0 ? I.map((o, b) => e.jsxs(L.tr, { initial: { opacity: 0, y: 5 }, animate: { opacity: 1, y: 0 }, transition: { delay: b * .05 }, onClick: () => d && d(o), style: { borderBottom: `1px solid ${s.border}`, cursor: d ? "pointer" : "default", transition: "background 0.2s", color: s.text }, onMouseOver: h => h.currentTarget.style.background = s.headerBg, onMouseOut: h => h.currentTarget.style.background = "transparent", children: [C.map(h => e.jsx("td", { style: { padding: f ? "0.75rem" : "1rem", fontSize: f ? "12px" : "14px", color: "inherit" }, children: h.render ? h.render(o[h.key], o) : o[h.key] }, h.key)), g && e.jsx("td", { style: { padding: "1rem", textAlign: "right" }, children: g(o) })] }, o.id || b)) : e.jsx("tr", { children: e.jsx("td", { colSpan: t.length + (g ? 1 : 0), style: { padding: "4rem", textAlign: "center", color: "#94a3b8" }, children: "No records found." }) }) }) })] }) }), !y && r.length > k && e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginTop: "1.5rem", paddingTop: "1rem", borderTop: `1px solid ${s.border}` }, children: [e.jsxs("span", { style: { fontSize: "13px", color: s.mutedText }, children: ["Showing ", (m - 1) * k + 1, " to ", Math.min(m * k, r.length), " of ", r.length, " records"] }), e.jsxs("div", { style: { display: "flex", gap: "0.5rem" }, children: [e.jsx("button", { disabled: m === 1, onClick: () => W(o => o - 1), style: { padding: "0.5rem", borderRadius: "8px", border: `1px solid ${s.inputBorder}`, background: m === 1 ? s.headerBg : s.inputBg, color: m === 1 ? p ? "#334155" : "#cbd5e1" : s.mutedText, cursor: m === 1 ? "not-allowed" : "pointer" }, children: e.jsx(Z, { size: 18 }) }), e.jsx("button", { disabled: m === _, onClick: () => W(o => o + 1), style: { padding: "0.5rem", borderRadius: "8px", border: `1px solid ${s.inputBorder}`, background: m === _ ? s.headerBg : s.inputBg, color: m === _ ? p ? "#334155" : "#cbd5e1" : s.mutedText, cursor: m === _ ? "not-allowed" : "pointer" }, children: e.jsx(ee, { size: 18 }) })] })] }), e.jsx("style", {
            children: `
                @keyframes pulse {
                    0% { opacity: 1; }
                    50% { opacity: 0.5; }
                    100% { opacity: 1; }
                }
            `})]
    })
}, Oe = ({ user: t, isMobile: j, isStaff: y = !1 }) => { const [d, g] = l.useState([]), [n, T] = l.useState(!0), [p, v] = l.useState(null), [c, f] = l.useState(!1), [s, w] = l.useState(""), [R, m] = l.useState(""), [W, k] = l.useState(""), { showModal: x } = O(); l.useEffect(() => { S() }, [s, R]); const S = async () => { T(!0); try { const i = new URLSearchParams; s && i.append("status", s), R && i.append("category", R); const r = await A.get(`/support/tickets?${i.toString()}`); g(r.data) } catch (i) { console.error("Failed to fetch tickets:", i), x({ type: "error", title: "Error", message: "Failed to load support tickets" }) } finally { T(!1) } }, u = i => { switch (i) { case "open": return { bg: "#fef3c7", text: "#92400e", border: "#fbbf24" }; case "in_progress": return { bg: "#dbeafe", text: "#1e40af", border: "#3b82f6" }; case "resolved": return { bg: "#d1fae5", text: "#065f46", border: "#10b981" }; case "closed": return { bg: "#f3f4f6", text: "#374151", border: "#9ca3af" }; default: return { bg: "#f3f4f6", text: "#6b7280", border: "#d1d5db" } } }, B = i => { switch (i) { case "urgent": return { bg: "#fee2e2", text: "#991b1b" }; case "high": return { bg: "#fed7aa", text: "#9a3412" }; case "medium": return { bg: "#fef3c7", text: "#92400e" }; case "low": return { bg: "#e0e7ff", text: "#3730a3" }; default: return { bg: "#f3f4f6", text: "#6b7280" } } }, C = d.filter(i => i.subject.toLowerCase().includes(W.toLowerCase()) || i.ticket_number.toLowerCase().includes(W.toLowerCase())); return p ? e.jsx(Te, { ticketId: p, onBack: () => { v(null), S() }, isStaff: y, user: t, isMobile: j }) : c ? e.jsx(_e, { onClose: () => f(!1), onSuccess: () => { f(!1), S() }, isMobile: j }) : e.jsxs("div", { style: { padding: j ? "1rem" : "2rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem", flexWrap: "wrap", gap: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { fontSize: j ? "1.5rem" : "2rem", margin: 0, color: "rgb\(18 37 74\)" }, children: "Support Tickets" }), e.jsx("p", { style: { color: "#778eaeff", fontSize: "14px", margin: "0.5rem 0 0" }, children: "Get help with affidavits, probate, and more" })] }), e.jsxs("button", { onClick: () => f(!0), style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "0.75rem 1.5rem", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", color: "white", border: "none", borderRadius: "10px", fontSize: "14px", fontWeight: "600", cursor: "pointer", boxShadow: "0 4px 6px -1px rgba(59, 130, 246, 0.3)" }, children: [e.jsx(be, { size: 18 }), " New Ticket"] })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem", marginBottom: "1.5rem", flexWrap: "wrap" }, children: [e.jsxs("div", { style: { flex: 1, minWidth: "200px", position: "relative" }, children: [e.jsx(V, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#94a3b8" } }), e.jsx("input", { type: "text", placeholder: "Search tickets...", value: W, onChange: i => k(i.target.value), style: { width: "100%", padding: "0.75rem 0.75rem 0.75rem 2.5rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px" } })] }), e.jsxs("select", { value: s, onChange: i => w(i.target.value), style: { padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px", minWidth: "150px" }, children: [e.jsx("option", { value: "", children: "All Status" }), e.jsx("option", { value: "open", children: "Open" }), e.jsx("option", { value: "in_progress", children: "In Progress" }), e.jsx("option", { value: "resolved", children: "Resolved" }), e.jsx("option", { value: "closed", children: "Closed" })] }), e.jsxs("select", { value: R, onChange: i => m(i.target.value), style: { padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px", minWidth: "150px" }, children: [e.jsx("option", { value: "", children: "All Categories" }), e.jsx("option", { value: "affidavit", children: "Affidavit" }), e.jsx("option", { value: "probate", children: "Probate" }), e.jsx("option", { value: "payment", children: "Payment" }), e.jsx("option", { value: "technical", children: "Technical" }), e.jsx("option", { value: "other", children: "Other" })] })] }), n ? e.jsxs("div", { style: { textAlign: "center", padding: "3rem" }, children: [e.jsx(D, { className: "animate-spin", size: 48, color: "#3b82f6", style: { margin: "0 auto" } }), e.jsx("p", { style: { color: "#778eaeff", marginTop: "1rem" }, children: "Loading tickets..." })] }) : C.length === 0 ? e.jsxs("div", { style: { textAlign: "center", padding: "3rem", background: "#f8fafc", borderRadius: "12px" }, children: [e.jsx(he, { size: 48, style: { margin: "0 auto", color: "#cbd5e1" } }), e.jsx("p", { style: { color: "#778eaeff", marginTop: "1rem" }, children: "No support tickets found" })] }) : e.jsx("div", { style: { display: "grid", gap: "1rem" }, children: C.map(i => { const r = u(i.status), _ = B(i.priority); return e.jsxs(L.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, onClick: () => v(i.id), style: { padding: "1.5rem", background: "white", border: "1px solid #e2e8f0", borderRadius: "12px", cursor: "pointer", transition: "all 0.2s" }, whileHover: { boxShadow: "0 4px 6px -1px rgba(0,0,0,0.1)" }, children: [e.jsx("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: "1rem", flexWrap: "wrap", gap: "0.5rem" }, children: e.jsxs("div", { style: { flex: 1 }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem", marginBottom: "0.5rem", flexWrap: "wrap" }, children: [e.jsx("span", { style: { fontWeight: "bold", color: "#3b82f6", fontSize: "13px" }, children: i.ticket_number }), e.jsx("span", { style: { padding: "2px 8px", borderRadius: "12px", fontSize: "10px", fontWeight: "600", textTransform: "uppercase", background: r.bg, color: r.text, border: `1px solid ${r.border}` }, children: i.status.replace("_", " ") }), e.jsx("span", { style: { padding: "2px 8px", borderRadius: "12px", fontSize: "10px", fontWeight: "600", textTransform: "uppercase", background: _.bg, color: _.text }, children: i.priority })] }), e.jsx("h3", { style: { margin: "0 0 0.5rem", fontSize: "1.1rem", color: "rgb\(18 37 74\)" }, children: i.subject }), e.jsxs("p", { style: { margin: 0, color: "#778eaeff", fontSize: "13px", lineHeight: "1.5" }, children: [i.description.substring(0, 150), i.description.length > 150 ? "..." : ""] })] }) }), e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", fontSize: "12px", color: "#94a3b8", flexWrap: "wrap", gap: "0.5rem" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [e.jsxs("span", { style: { display: "flex", alignItems: "center", gap: "0.25rem" }, children: [e.jsx(we, { size: 14 }), " ", i.category] }), e.jsxs("span", { style: { display: "flex", alignItems: "center", gap: "0.25rem" }, children: [e.jsx(E, { size: 14 }), " ", N(i.created_at)] })] }), i.assigned_name && e.jsxs("span", { style: { display: "flex", alignItems: "center", gap: "0.25rem", color: "#3b82f6" }, children: [e.jsx(U, { size: 14 }), " Assigned to: ", i.assigned_name] })] })] }, i.id) }) })] }) }, _e = ({ onClose: t, onSuccess: j, isMobile: y }) => { const [d, g] = l.useState({ subject: "", category: "technical", priority: "medium", description: "" }), [n, T] = l.useState(!1), { showModal: p } = O(), v = async c => { var f, s; c.preventDefault(), T(!0); try { await A.post("/support/tickets", d), p({ type: "success", title: "Success", message: "Support ticket created successfully" }), j() } catch (w) { console.error("Failed to create ticket:", w), p({ type: "error", title: "Error", message: ((s = (f = w.response) == null ? void 0 : f.data) == null ? void 0 : s.error) || "Failed to create ticket" }) } finally { T(!1) } }; return e.jsxs(L.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, style: { padding: y ? "1rem" : "2rem", maxWidth: "800px", margin: "0 auto" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [e.jsx("h2", { style: { fontSize: y ? "1.5rem" : "2rem", margin: 0, color: "rgb\(18 37 74\)" }, children: "New Support Ticket" }), e.jsx("button", { onClick: t, style: { padding: "0.5rem", background: "#f1f5f9", border: "none", borderRadius: "8px", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center" }, children: e.jsx(Y, { size: 20 }) })] }), e.jsxs("form", { onSubmit: v, style: { background: "white", padding: y ? "1.5rem" : "2rem", borderRadius: "12px", border: "1px solid #e2e8f0" }, children: [e.jsxs("div", { style: { marginBottom: "1.5rem" }, children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: "Subject *" }), e.jsx("input", { type: "text", required: !0, value: d.subject, onChange: c => g({ ...d, subject: c.target.value }), placeholder: "Brief description of your issue", style: { width: "100%", padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px" } })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: y ? "1fr" : "1fr 1fr", gap: "1.5rem", marginBottom: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: "Category *" }), e.jsxs("select", { required: !0, value: d.category, onChange: c => g({ ...d, category: c.target.value }), style: { width: "100%", padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px" }, children: [e.jsx("option", { value: "affidavit", children: "Affidavit" }), e.jsx("option", { value: "probate", children: "Probate" }), e.jsx("option", { value: "payment", children: "Payment" }), e.jsx("option", { value: "technical", children: "Technical" }), e.jsx("option", { value: "other", children: "Other" })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: "Priority" }), e.jsxs("select", { value: d.priority, onChange: c => g({ ...d, priority: c.target.value }), style: { width: "100%", padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px" }, children: [e.jsx("option", { value: "low", children: "Low" }), e.jsx("option", { value: "medium", children: "Medium" }), e.jsx("option", { value: "high", children: "High" }), e.jsx("option", { value: "urgent", children: "Urgent" })] })] })] }), e.jsxs("div", { style: { marginBottom: "2rem" }, children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: "Description *" }), e.jsx("textarea", { required: !0, value: d.description, onChange: c => g({ ...d, description: c.target.value }), placeholder: "Provide detailed information about your issue...", rows: 6, style: { width: "100%", padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px", fontFamily: "inherit", resize: "vertical" } })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem", justifyContent: "flex-end" }, children: [e.jsx("button", { type: "button", onClick: t, style: { padding: "0.75rem 1.5rem", background: "#f1f5f9", border: "none", borderRadius: "8px", fontSize: "14px", fontWeight: "600", cursor: "pointer", color: "#778eaeff" }, children: "Cancel" }), e.jsxs("button", { type: "submit", disabled: n, style: { padding: "0.75rem 1.5rem", background: n ? "#94a3b8" : "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", color: "white", border: "none", borderRadius: "8px", fontSize: "14px", fontWeight: "600", cursor: n ? "not-allowed" : "pointer", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [n ? e.jsx(D, { className: "animate-spin", size: 16 }) : null, n ? "Creating..." : "Create Ticket"] })] })] })] }) }, Te = ({ ticketId: t, onBack: j, isStaff: y, user: d, isMobile: g }) => { const [n, T] = l.useState(null), [p, v] = l.useState(!0), [c, f] = l.useState(""), [s, w] = l.useState(!1), [R, m] = l.useState([]), [W, k] = l.useState(!1), [x, S] = l.useState(""), [u, B] = l.useState("all"), [C, i] = l.useState(!1), { showModal: r } = O(); l.useEffect(() => { I(), y && _() }, [t, y]); const _ = async () => { try { const a = await A.get("/support/staff-list"); m(a.data) } catch (a) { console.error("Failed to fetch staff list:", a) } }, I = async () => { v(!0); try { const a = await A.get(`/support/tickets/${t}`); T(a.data) } catch (a) { console.error("Failed to fetch ticket details:", a), r({ type: "error", title: "Error", message: "Failed to load ticket details" }) } finally { v(!1) } }, o = async a => { if (a.preventDefault(), !!c.trim()) { w(!0); try { await A.post(`/support/tickets/${t}/messages`, { message: c }), f(""), I() } catch (P) { console.error("Failed to send message:", P), r({ type: "error", title: "Error", message: "Failed to send message" }) } finally { w(!1) } } }, b = async (a, P = "") => { try { await A.put(`/support/tickets/${t}/status`, { status: a, resolution: P }), r({ type: "success", title: "Success", message: "Ticket status updated" }), I() } catch (X) { console.error("Failed to update status:", X), r({ type: "error", title: "Error", message: "Failed to update ticket status" }) } }, h = async () => { if (!x) { r({ type: "error", title: "Error", message: "Please select a staff member" }); return } i(!0); try { await A.put(`/support/tickets/${t}/status`, { status: n.status, assignedTo: x === "unassign" ? null : parseInt(x) }), r({ type: "success", title: "Success", message: "Ticket assigned successfully" }), k(!1), S(""), I() } catch (a) { console.error("Failed to assign ticket:", a), r({ type: "error", title: "Error", message: "Failed to assign ticket" }) } finally { i(!1) } }; if (p) return e.jsxs("div", { style: { textAlign: "center", padding: "3rem" }, children: [e.jsx(D, { className: "animate-spin", size: 48, color: "#3b82f6", style: { margin: "0 auto" } }), e.jsx("p", { style: { color: "#778eaeff", marginTop: "1rem" }, children: "Loading ticket details..." })] }); if (!n) return e.jsxs("div", { style: { textAlign: "center", padding: "3rem" }, children: [e.jsx(Q, { size: 48, color: "#ef4444", style: { margin: "0 auto" } }), e.jsx("p", { style: { color: "#778eaeff", marginTop: "1rem" }, children: "Ticket not found" }), e.jsx("button", { onClick: j, style: { marginTop: "1rem", padding: "0.75rem 1.5rem", background: "#3b82f6", color: "white", border: "none", borderRadius: "8px", cursor: "pointer" }, children: "Go Back" })] }); const M = Re(n.status), $ = We(n.priority); return e.jsxs("div", { style: { padding: g ? "1rem" : "2rem", maxWidth: "1200px", margin: "0 auto" }, children: [e.jsx("button", { onClick: j, style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "0.5rem 1rem", background: "#f1f5f9", border: "none", borderRadius: "8px", cursor: "pointer", marginBottom: "1.5rem", fontSize: "14px", fontWeight: "600", color: "#778eaeff" }, children: "← Back to Tickets" }), e.jsxs("div", { style: { background: "white", padding: g ? "1.5rem" : "2rem", borderRadius: "12px", border: "1px solid #e2e8f0", marginBottom: "1.5rem" }, children: [e.jsx("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: "1.5rem", flexWrap: "wrap", gap: "1rem" }, children: e.jsxs("div", { style: { flex: 1 }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem", marginBottom: "0.75rem", flexWrap: "wrap" }, children: [e.jsx("span", { style: { fontWeight: "bold", color: "#3b82f6", fontSize: "14px" }, children: n.ticket_number }), e.jsx("span", { style: { padding: "4px 12px", borderRadius: "12px", fontSize: "11px", fontWeight: "600", textTransform: "uppercase", background: M.bg, color: M.text, border: `1px solid ${M.border}` }, children: n.status.replace("_", " ") }), e.jsx("span", { style: { padding: "4px 12px", borderRadius: "12px", fontSize: "11px", fontWeight: "600", textTransform: "uppercase", background: $.bg, color: $.text }, children: n.priority }), e.jsx("span", { style: { padding: "4px 12px", borderRadius: "12px", fontSize: "11px", fontWeight: "600", background: "#f1f5f9", color: "#778eaeff" }, children: n.category })] }), e.jsx("h2", { style: { margin: "0 0 1rem", fontSize: g ? "1.25rem" : "1.5rem", color: "rgb\(18 37 74\)" }, children: n.subject }), e.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "14px", lineHeight: "1.6" }, children: n.description })] }) }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: g ? "1fr" : "repeat(3, 1fr)", gap: "1rem", padding: "1rem", background: "#f8fafc", borderRadius: "8px", fontSize: "13px" }, children: [e.jsxs("div", { children: [e.jsx("span", { style: { color: "#94a3b8", display: "block", marginBottom: "0.25rem" }, children: "Created" }), e.jsx("span", { style: { color: "rgb\(18 37 74\)", fontWeight: "600" }, children: N(n.created_at) })] }), e.jsxs("div", { children: [e.jsx("span", { style: { color: "#94a3b8", display: "block", marginBottom: "0.25rem" }, children: "Last Updated" }), e.jsx("span", { style: { color: "rgb\(18 37 74\)", fontWeight: "600" }, children: N(n.updated_at) })] }), n.assigned_name && e.jsxs("div", { children: [e.jsx("span", { style: { color: "#94a3b8", display: "block", marginBottom: "0.25rem" }, children: "Assigned To" }), e.jsx("span", { style: { color: "rgb\(18 37 74\)", fontWeight: "600" }, children: n.assigned_name })] })] }), y && n.status !== "closed" && e.jsxs("div", { style: { marginTop: "1.5rem", display: "flex", gap: "0.75rem", flexWrap: "wrap" }, children: [n.status === "open" && e.jsx("button", { onClick: () => b("in_progress"), style: { padding: "0.5rem 1rem", background: "#3b82f6", color: "white", border: "none", borderRadius: "6px", fontSize: "13px", fontWeight: "600", cursor: "pointer" }, children: "Mark as In Progress" }), (n.status === "open" || n.status === "in_progress") && e.jsx("button", { onClick: () => { const a = prompt("Enter resolution notes:"); a && b("resolved", a) }, style: { padding: "0.5rem 1rem", background: "#10b981", color: "white", border: "none", borderRadius: "6px", fontSize: "13px", fontWeight: "600", cursor: "pointer" }, children: "Mark as Resolved" }), n.status === "resolved" && e.jsx("button", { onClick: () => b("closed"), style: { padding: "0.5rem 1rem", background: "#6b7280", color: "white", border: "none", borderRadius: "6px", fontSize: "13px", fontWeight: "600", cursor: "pointer" }, children: "Close Ticket" }), y && (d == null ? void 0 : d.role) === "admin" && e.jsxs("button", { onClick: () => { S(n.assigned_to || ""), k(!0) }, style: { padding: "0.5rem 1rem", background: "#8b5cf6", color: "white", border: "none", borderRadius: "6px", fontSize: "13px", fontWeight: "600", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.4rem" }, children: [e.jsx(U, { size: 14 }), n.assigned_to ? "Change Assignee" : "Assign to Staff"] })] })] }), W && e.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9999 }, children: e.jsxs(L.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "400px", width: "90%", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1)" }, children: [e.jsx("h3", { style: { margin: "0 0 1rem", fontSize: "1.25rem", color: "rgb\(18 37 74\)" }, children: n.assigned_to ? "Reassign Ticket" : "Assign Ticket" }), e.jsx("p", { style: { color: "#778eaeff", marginBottom: "1.5rem", fontSize: "14px" }, children: "Override system auto-assignment or select a specific role:" }), e.jsxs("div", { style: { marginBottom: "1rem" }, children: [e.jsx("label", { style: { display: "block", fontSize: "12px", fontWeight: "bold", color: "#778eaeff", marginBottom: "0.4rem" }, children: "Filter by Role:" }), e.jsxs("select", { value: u, onChange: a => { B(a.target.value), S("") }, style: { width: "100%", padding: "0.6rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "13px" }, children: [e.jsx("option", { value: "all", children: "All Active Staff" }), e.jsx("option", { value: "admin", children: "Administrator" }), e.jsx("option", { value: "jurat", children: "Jurat Officer" }), e.jsx("option", { value: "pr", children: "Probate Registrar" }), e.jsx("option", { value: "cr", children: "Chief Registrar" }), e.jsx("option", { value: "cfo", children: "Commissioner for Oaths" })] })] }), e.jsxs("div", { style: { marginBottom: "1.5rem" }, children: [e.jsx("label", { style: { display: "block", fontSize: "12px", fontWeight: "bold", color: "#778eaeff", marginBottom: "0.4rem" }, children: "Select Staff Member:" }), e.jsxs("select", { value: x, onChange: a => S(a.target.value), style: { width: "100%", padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px" }, children: [e.jsx("option", { value: "", children: "-- Choose Staff Member --" }), R.filter(a => u === "all" || a.role === u).map(a => e.jsxs("option", { value: a.id, children: [a.name, " (", a.role.toUpperCase(), ")"] }, a.id)), n.assigned_to && e.jsx("optgroup", { label: "Actions", children: e.jsx("option", { value: "unassign", children: "❌ Unassign / Return to Queue" }) })] })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [e.jsx("button", { onClick: () => { k(!1), S("") }, style: { flex: 1, padding: "0.75rem", background: "#f1f5f9", color: "#475569", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600" }, children: "Cancel" }), e.jsxs("button", { onClick: h, disabled: C || !x, style: { flex: 1, padding: "0.75rem", background: C || !x ? "#94a3b8" : "#8b5cf6", color: "white", border: "none", borderRadius: "8px", cursor: C || !x ? "not-allowed" : "pointer", fontWeight: "600", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [C && e.jsx(D, { className: "animate-spin", size: 16 }), C ? "Assigning..." : "Assign"] })] })] }) }), e.jsxs("div", { style: { background: "white", padding: g ? "1.5rem" : "2rem", borderRadius: "12px", border: "1px solid #e2e8f0" }, children: [e.jsx("h3", { style: { margin: "0 0 1.5rem", fontSize: "1.1rem", color: "rgb\(18 37 74\)" }, children: "Conversation" }), e.jsx("div", { style: { maxHeight: "500px", overflowY: "auto", marginBottom: "1.5rem" }, children: n.messages && n.messages.length > 0 ? n.messages.map((a, P) => e.jsxs("div", { style: { marginBottom: "1rem", padding: "1rem", background: a.sender_type === "staff" ? "#eff6ff" : "#f8fafc", borderRadius: "8px", borderLeft: `3px solid ${a.sender_type === "staff" ? "#3b82f6" : "#94a3b8"}` }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "0.5rem", fontSize: "12px" }, children: [e.jsxs("span", { style: { fontWeight: "600", color: "rgb\(18 37 74\)" }, children: [a.sender_name, " ", a.sender_type === "staff" && e.jsx("span", { style: { color: "#3b82f6" }, children: "(Staff)" })] }), e.jsx("span", { style: { color: "#94a3b8" }, children: N(a.created_at) })] }), e.jsx("p", { style: { margin: 0, color: "#475569", fontSize: "14px", lineHeight: "1.6" }, children: a.message })] }, a.id)) : e.jsx("p", { style: { textAlign: "center", color: "#94a3b8", padding: "2rem" }, children: "No messages yet" }) }), n.status !== "closed" && e.jsx("form", { onSubmit: o, children: e.jsxs("div", { style: { display: "flex", gap: "0.75rem" }, children: [e.jsx("textarea", { value: c, onChange: a => f(a.target.value), placeholder: "Type your message...", rows: 3, style: { flex: 1, padding: "0.75rem", border: "1px solid #e2e8f0", borderRadius: "8px", fontSize: "14px", fontFamily: "inherit", resize: "vertical" } }), e.jsxs("button", { type: "submit", disabled: s || !c.trim(), style: { padding: "0.75rem 1.5rem", background: s || !c.trim() ? "#94a3b8" : "#3b82f6", color: "white", border: "none", borderRadius: "8px", cursor: s || !c.trim() ? "not-allowed" : "pointer", display: "flex", alignItems: "center", gap: "0.5rem", fontSize: "14px", fontWeight: "600" }, children: [s ? e.jsx(D, { className: "animate-spin", size: 16 }) : e.jsx(je, { size: 16 }), "Send"] })] }) })] })] }) }, Re = t => { switch (t) { case "open": return { bg: "#fef3c7", text: "#92400e", border: "#fbbf24" }; case "in_progress": return { bg: "#dbeafe", text: "#1e40af", border: "#3b82f6" }; case "resolved": return { bg: "#d1fae5", text: "#065f46", border: "#10b981" }; case "closed": return { bg: "#f3f4f6", text: "#374151", border: "#9ca3af" }; default: return { bg: "#f3f4f6", text: "#6b7280", border: "#d1d5db" } } }, We = t => { switch (t) { case "urgent": return { bg: "#fee2e2", text: "#991b1b" }; case "high": return { bg: "#fed7aa", text: "#9a3412" }; case "medium": return { bg: "#fef3c7", text: "#92400e" }; case "low": return { bg: "#e0e7ff", text: "#3730a3" }; default: return { bg: "#f3f4f6", text: "#6b7280" } } }; export { ce as C, Fe as D, Pe as H, fe as L, he as M, Le as P, je as S, $e as U, De as a, ke as b, Oe as c, Ne as d, be as e };
