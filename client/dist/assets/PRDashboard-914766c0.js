import { r as l, d as L, a as g, j as e, e as T, h as F, m as M } from "./index-a367903a.js"; import { D as $, a as E, L as O, H as U, c as V, d as H, M as Y } from "./SupportTickets-1bec5e21.js"; import { S as G } from "./StaffProfile-a6896eb8.js"; import { a as A, C, R as q, b as J } from "./RegistryAnalytics-787f1da5.js"; import { U as _, f as R } from "./dateUtils-0cf2816c.js"; import { A as K } from "./arrow-left-87f00f60.js"; import { B as Q } from "./briefcase-8ab53315.js"; import { F as z } from "./file-text-05ff1bfe.js"; import { a as X } from "./menu-52d4f898.js"; import { E as Z } from "./eye-7d150dac.js"; import "./mail-7147b856.js"; import "./shield-1033dda0.js"; import "./lock-2d4848cc.js"; import "./list-1b284b06.js"; import "./video-c62c1d23.js"; import "./refresh-cw-24e393f6.js"; const ee = ({ surety: d, onClose: a, onSuccess: j }) => { const [c, u] = l.useState("accepted"), [r, h] = l.useState(""), [n, b] = l.useState(!1), { showModal: x } = L(), y = async () => { b(!0); try { await g.put(`/staff/probate/surety/${d.id}/review`, { status: c, remark: r }), x({ type: "success", title: "Surety Reviewed", message: "Surety status updated successfully." }), j(), a() } catch (m) { console.error("Failed to update surety:", m), x({ type: "error", title: "Error", message: "Failed to update surety status." }) } finally { b(!1) } }; return e.jsx("div", { style: { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1e3 }, children: e.jsxs("div", { style: { background: "white", padding: "2rem", borderRadius: "12px", width: "400px", maxWidth: "90%" }, children: [e.jsxs("h3", { style: { marginBottom: "1rem" }, children: ["Review Surety: ", d.name] }), e.jsxs("div", { style: { marginBottom: "1rem" }, children: [e.jsx("label", { style: { display: "block", fontSize: "13px", color: "#778eaeff", marginBottom: "0.5rem" }, children: "Status" }), e.jsxs("select", { value: c, onChange: m => u(m.target.value), style: { width: "100%", padding: "0.5rem", borderRadius: "6px", border: "1px solid #e2e8f0" }, children: [e.jsx("option", { value: "accepted", children: "Accept" }), e.jsx("option", { value: "rejected", children: "Reject" })] })] }), e.jsxs("div", { style: { marginBottom: "1.5rem" }, children: [e.jsx("label", { style: { display: "block", fontSize: "13px", color: "#778eaeff", marginBottom: "0.5rem" }, children: "Remark" }), e.jsx("textarea", { value: r, onChange: m => h(m.target.value), placeholder: "Add acceptance/rejection remark...", style: { width: "100%", minHeight: "80px", padding: "0.5rem", borderRadius: "6px", border: "1px solid #e2e8f0" } })] }), e.jsxs("div", { style: { display: "flex", justifyContent: "flex-end", gap: "0.5rem" }, children: [e.jsx("button", { onClick: a, className: "btn-secondary", style: { padding: "0.5rem 1rem" }, children: "Cancel" }), e.jsx("button", { onClick: y, disabled: n, className: "btn-primary", style: { padding: "0.5rem 1rem" }, children: n ? "Saving..." : "Save Review" })] })] }) }) }, te = ({ appId: d, onBack: a, onSuccess: j }) => { var S, I, B, N, W; const [c, u] = l.useState(!0), [r, h] = l.useState(null), [n, b] = l.useState(""), [x, y] = l.useState(!1), [m, v] = l.useState(null), { showModal: i } = L(); l.useEffect(() => { p() }, [d]); const p = async () => { u(!0); try { const t = await g.get(`/staff/probate/${d}`); h(t.data) } catch (t) { console.error("Failed to fetch probate details:", t), i({ type: "error", title: "Error", message: "Failed to load application details." }) } finally { u(!1) } }, w = async () => { y(!0); try { await g.put(`/staff/probate/${d}/review`, { remarks: n }), i({ type: "success", title: "Application Reviewed", message: "Probate application has been moved to CR Pending Review." }), j() } catch (t) { console.error("Failed to update status:", t), i({ type: "error", title: "Action Failed", message: "Failed to update application status." }) } finally { y(!1) } }; if (c) return e.jsx("div", { style: { display: "flex", justifyContent: "center", padding: "5rem" }, children: e.jsx(T, { className: "animate-spin", size: 48, color: "#3b82f6" }) }); if (!r) return e.jsxs("div", { style: { textAlign: "center", padding: "5rem", color: "#94a3b8" }, children: [e.jsx(F, { size: 48, style: { marginBottom: "1rem" } }), e.jsx("p", { children: "Application details not found." }), e.jsx("button", { onClick: a, className: "btn btn-secondary", style: { marginTop: "1rem" }, children: "Go Back" })] }); const s = ({ title: t, icon: f, children: k, fullWidth: D = !1 }) => e.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", marginBottom: "1.5rem", padding: "1.5rem", gridColumn: D ? "1 / -1" : "span 1", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem", marginBottom: "1.25rem", paddingBottom: "0.75rem", borderBottom: "1px solid #f1f5f9" }, children: [e.jsx("div", { style: { background: "rgba(59, 130, 246, 0.1)", padding: "8px", borderRadius: "8px", color: "#3b82f6" }, children: f }), e.jsx("h3", { style: { margin: 0, fontSize: "1.1rem", color: "rgb\(18 37 74\)" }, children: t })] }), k] }), o = ({ label: t, value: f }) => e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", padding: "0.5rem 0", fontSize: "14px", borderBottom: "1px solid #f8fafc" }, children: [e.jsx("span", { style: { color: "#778eaeff" }, children: t }), e.jsx("span", { style: { color: "rgb\(18 37 74\)", fontWeight: "500", textAlign: "right" }, children: f || "N/A" })] }); return e.jsxs(M.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, children: [m && e.jsx(ee, { surety: m, onClose: () => v(null), onSuccess: p }), e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [e.jsxs("button", { onClick: a, style: { display: "flex", alignItems: "center", gap: "0.5rem", background: "transparent", border: "none", color: "#778eaeff", cursor: "pointer", fontWeight: "bold" }, children: [e.jsx(K, { size: 18 }), " Back to List"] }), e.jsxs("div", { style: { textAlign: "right" }, children: [e.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", textTransform: "uppercase", background: r.status === "approved" || r.status === "completed" ? "#dcfce7" : r.status === "under_processing" ? "#dbeafe" : r.status === "cr_pending" ? "#fef9c3" : r.status === "pending_registrar" ? "#e0f2fe" : r.status === "rejected" ? "#fee2e2" : "#f1f5f9", color: r.status === "approved" || r.status === "completed" ? "#15803d" : r.status === "under_processing" ? "#1e40af" : r.status === "cr_pending" ? "#854d0e" : r.status === "pending_registrar" ? "#0369a1" : r.status === "rejected" ? "#b91c1c" : "#778eaeff", border: "1px solid currentColor", opacity: .9 }, children: (r.status || "pending").replace("_", " ") }), e.jsxs("p", { style: { margin: "4px 0 0", color: "#94a3b8", fontSize: "12px" }, children: ["ID: PRB-", r.id] })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fit, minmax(400px, 1fr))", gap: "1.5rem" }, children: [e.jsxs(s, { title: "Deceased Information", icon: e.jsx(_, { size: 20 }), children: [e.jsx(o, { label: "Full Name", value: r.deceased_name }), e.jsx(o, { label: "Date of Death", value: R(r.date_of_death) }), e.jsx(o, { label: "Home Address", value: r.home_address }), e.jsx(o, { label: "Death Location", value: r.death_location_address }), e.jsx(o, { label: "Occupation", value: r.occupation }), e.jsx(o, { label: "Employer", value: r.employer_name }), e.jsx(o, { label: "Employer Address", value: r.employer_address })] }), e.jsxs(s, { title: "Applicant/Next of Kin", icon: e.jsx(E, { size: 20 }), children: [e.jsxs("div", { style: { display: "flex", gap: "1.5rem", marginBottom: "1rem", alignItems: "flex-start" }, children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "12px", overflow: "hidden", background: "#f1f5f9", border: "1px solid #e2e8f0", flexShrink: 0 }, children: r.profile_pic ? e.jsx("img", { src: r.profile_pic.startsWith("http") ? r.profile_pic : `${g.defaults.baseURL.replace("/api", "")}${r.profile_pic}`, alt: "Applicant", style: { width: "100%", height: "100%", objectFit: "cover" } }) : e.jsx("div", { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", color: "#94a3b8" }, children: e.jsx(_, { size: 32 }) }) }), e.jsxs("div", { style: { flex: 1 }, children: [e.jsx(o, { label: "Full Name", value: `${r.first_name} ${r.surname}` }), e.jsx(o, { label: "Email", value: r.email }), e.jsx(o, { label: "Phone", value: r.phone })] })] }), e.jsx(o, { label: "Relationship", value: r.relationship_to_nok }), e.jsx(o, { label: "Address", value: r.address })] }), e.jsx(s, { title: "Beneficiaries", icon: e.jsx(E, { size: 20 }), fullWidth: !0, children: ((S = r.beneficiaries) == null ? void 0 : S.length) > 0 ? e.jsx("div", { style: { overflowX: "auto" }, children: e.jsxs("table", { style: { width: "100%", borderCollapse: "collapse", fontSize: "13px" }, children: [e.jsx("thead", { children: e.jsxs("tr", { style: { textAlign: "left", borderBottom: "2px solid #f1f5f9" }, children: [e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Name" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Relationship" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Age/Gender" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Contact" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Address" })] }) }), e.jsx("tbody", { children: r.beneficiaries.map((t, f) => e.jsxs("tr", { style: { borderBottom: "1px solid #f8fafc" }, children: [e.jsx("td", { style: { padding: "12px", fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: t.name }), e.jsx("td", { style: { padding: "12px", color: "rgb\(18 37 74\)" }, children: t.relationship }), e.jsxs("td", { style: { padding: "12px", color: "rgb\(18 37 74\)" }, children: [t.age, "Y / ", t.gender] }), e.jsx("td", { style: { padding: "12px", color: "rgb\(18 37 74\)" }, children: t.phone || "N/A" }), e.jsx("td", { style: { padding: "12px", color: "#778eaeff" }, children: t.address || "N/A" })] }, f)) })] }) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No beneficiaries listed" }) }), e.jsx(s, { title: "Estate Assets", icon: e.jsx(Q, { size: 20 }), fullWidth: !0, children: ((I = r.assets) == null ? void 0 : I.length) > 0 ? e.jsx("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(350px, 1fr))", gap: "1rem" }, children: r.assets.map((t, f) => e.jsxs("div", { style: { padding: "1.25rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #f1f5f9" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("span", { style: { fontSize: "10px", fontWeight: "bold", color: "#3b82f6", textTransform: "uppercase", background: "rgba(59, 130, 246, 0.1)", padding: "2px 8px", borderRadius: "4px" }, children: t.estate_type || t.asset_type || "Asset" }), e.jsx("h4", { style: { margin: "8px 0 0", color: "rgb\(18 37 74\)" }, children: t.property_name || t.bank_name || t.broker_name || "Asset Entry" })] }), e.jsxs("div", { style: { color: "#10b981", fontWeight: "bold", fontSize: "1.1rem" }, children: ["₦", (t.property_value || t.bank_balance || t.share_value || t.estimated_value || 0).toLocaleString()] })] }), e.jsxs("div", { style: { fontSize: "12px", color: "#778eaeff", display: "grid", gap: "4px" }, children: [t.property_address && e.jsxs("div", { children: [e.jsx("strong", { children: "Address:" }), " ", t.property_address] }), t.bank_account && e.jsxs("div", { children: [e.jsx("strong", { children: "Account:" }), " ", t.bank_account, " (", t.bank_account_name, ")"] }), t.broker_account && e.jsxs("div", { children: [e.jsx("strong", { children: "Broker A/C:" }), " ", t.broker_account, " (", t.broker_account_name, ")"] }), t.remark && e.jsxs("div", { style: { marginTop: "8px", fontStyle: "italic" }, children: ['"', t.remark, '"'] })] })] }, f)) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No estate assets listed" }) }), e.jsx(s, { title: "Sureties", icon: e.jsx(re, { size: 20 }), children: ((B = r.sureties) == null ? void 0 : B.length) > 0 ? e.jsx("div", { style: { display: "grid", gap: "1rem" }, children: r.sureties.map((t, f) => { var k; return e.jsxs("div", { style: { padding: "1rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #f1f5f9", display: "flex", gap: "1rem", alignItems: "center" }, children: [e.jsx("div", { style: { width: "60px", height: "60px", borderRadius: "8px", overflow: "hidden", background: "#e2e8f0", flexShrink: 0 }, children: t.picture_path ? e.jsx("img", { src: t.picture_path.startsWith("http") ? t.picture_path : `${g.defaults.baseURL.replace("/api", "")}${t.picture_path}`, alt: t.name, style: { width: "100%", height: "100%", objectFit: "cover" } }) : e.jsx("div", { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", color: "#94a3b8" }, children: e.jsx(_, { size: 24 }) }) }), e.jsxs("div", { style: { flex: 1 }, children: [e.jsx("div", { style: { color: "rgb\(18 37 74\)", fontWeight: "bold", marginBottom: "2px" }, children: t.name }), e.jsxs("div", { style: { color: "#778eaeff", fontSize: "12px" }, children: [t.occupation || "N/A", " • ", t.phone || "No phone"] }), e.jsxs("div", { style: { color: "#10b981", fontSize: "11px", fontWeight: "600", marginTop: "2px" }, children: ["Net Worth: ₦", ((k = t.networth) == null ? void 0 : k.toLocaleString()) || 0] }), e.jsxs("div", { style: { marginTop: "8px", fontSize: "12px" }, children: [e.jsx("span", { style: { padding: "2px 6px", borderRadius: "4px", fontSize: "10px", textTransform: "uppercase", fontWeight: "bold", background: t.acceptance === "accepted" ? "#dcfce7" : t.acceptance === "rejected" ? "#fee2e2" : "#f1f5f9", color: t.acceptance === "accepted" ? "#15803d" : t.acceptance === "rejected" ? "#b91c1c" : "#778eaeff" }, children: t.acceptance || "Pending" }), t.remark && e.jsxs("div", { style: { marginTop: "4px", color: "#778eaeff", fontStyle: "italic", fontSize: "11px" }, children: ['"', t.remark, '"'] })] })] }), !["under_processing", "approved", "completed", "rejected"].includes(r.status) && e.jsx("button", { onClick: () => v(t), style: { padding: "6px 12px", fontSize: "12px", background: "white", border: "1px solid #e2e8f0", borderRadius: "6px", cursor: "pointer", color: "#3b82f6", fontWeight: "500" }, children: "Review" })] }, f) }) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No sureties provided" }) }), e.jsxs("div", { style: { display: "grid", gap: "1.5rem" }, children: [e.jsx(s, { title: "Payment Details", icon: e.jsx(A, { size: 20 }), children: ((N = r.payments) == null ? void 0 : N.length) > 0 ? r.payments.map((t, f) => { var k; return e.jsxs("div", { style: { padding: "1rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #f1f5f9", marginBottom: "0.5rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "0.5rem" }, children: [e.jsx("span", { style: { fontSize: "12px", fontWeight: "bold", color: "#778eaeff" }, children: t.item_paid || "Probate Fee" }), e.jsxs("span", { style: { color: "#10b981", fontWeight: "bold" }, children: ["₦", (k = t.amount) == null ? void 0 : k.toLocaleString()] })] }), e.jsxs("div", { style: { fontSize: "11px", color: "#94a3b8" }, children: [e.jsxs("div", { children: ["Ref: ", t.transaction_id || "N/A"] }), e.jsxs("div", { children: ["Date: ", R(t.payment_date || t.created_at)] }), e.jsxs("div", { style: { marginTop: "4px", color: t.payment_status === "paid" ? "#10b981" : "#f59e0b", fontWeight: "bold", textTransform: "uppercase" }, children: ["Status: ", t.payment_status || "Pending"] })] })] }, f) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No payment records found." }) }), e.jsx(s, { title: "Attached Documents", icon: e.jsx(z, { size: 20 }), children: ((W = r.documents) == null ? void 0 : W.length) > 0 ? e.jsx("div", { style: { display: "grid", gap: "0.75rem" }, children: r.documents.map((t, f) => e.jsxs("a", { href: (t.document_path || t.file_path || "#").startsWith("http") ? t.document_path || t.file_path : `${g.defaults.baseURL.replace("/api", "")}${t.document_path || t.file_path}`, target: "_blank", rel: "noreferrer", style: { padding: "0.75rem", background: "#f8fafc", borderRadius: "8px", fontSize: "13px", display: "flex", justifyContent: "space-between", alignItems: "center", color: "#3b82f6", textDecoration: "none", border: "1px solid #f1f5f9" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx(z, { size: 16 }), e.jsx("span", { children: t.document_name || t.document_type })] }), e.jsx(X, { size: 16 })] }, f)) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No documents uploaded" }) })] })] }), r.registrar_remarks && e.jsx(s, { title: "Your Remarks (Registrar)", icon: e.jsx(C, { size: 20 }), fullWidth: !0, children: e.jsxs("div", { style: { padding: "1rem", background: "#f8fafc", borderRadius: "8px", border: "1px solid #e2e8f0", color: "#334155", fontStyle: "italic" }, children: ['"', r.registrar_remarks, '"'] }) }), r.cr_remarks && e.jsx(s, { title: "Chief Registrar's Remarks", icon: e.jsx(C, { size: 20 }), fullWidth: !0, children: e.jsxs("div", { style: { padding: "1rem", background: "#f8fafc", borderRadius: "8px", border: "1px solid #e2e8f0", color: "#334155", fontStyle: "italic" }, children: ['"', r.cr_remarks, '"'] }) }), ["under_processing", "approved", "completed"].includes(r.status) ? e.jsxs("div", { className: "glass-card", style: { background: "#f8fafc", border: "1px solid #e2e8f0", marginTop: "2rem", padding: "2rem", textAlign: "center" }, children: [e.jsx(A, { size: 48, color: "#10b981", style: { margin: "0 auto 1rem" } }), e.jsxs("h3", { style: { color: "rgb\(18 37 74\)", marginBottom: "0.5rem" }, children: ["Application ", r.status.replace("_", " ").toUpperCase()] }), e.jsxs("p", { style: { color: "#778eaeff", fontSize: "14px", marginBottom: "1.5rem" }, children: ["This application is currently ", e.jsx("strong", { children: r.status.replace("_", " ") }), " and no longer requires registrar review."] }), e.jsx("button", { onClick: a, className: "btn-secondary", style: { padding: "0.8rem 2rem", borderRadius: "8px" }, children: "Back to List" })] }) : e.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", marginTop: "2rem", padding: "2rem", boxShadow: "0 10px 15px -3px rgba(0,0,0,0.1)" }, children: [e.jsxs("h3", { style: { color: "rgb\(18 37 74\)", marginBottom: "1rem", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx(C, { size: 20, color: "#10b981" }), "Review Application"] }), e.jsx("p", { style: { color: "#778eaeff", fontSize: "14px", marginBottom: "1.5rem" }, children: "After reviewing all sections, add your remarks below and approve the application to move it to the Chief Registrar for final approval." }), e.jsx("textarea", { value: n, onChange: t => b(t.target.value), placeholder: "Add your review remarks here...", style: { width: "100%", minHeight: "120px", padding: "1rem", background: "#f8fafc", border: "1px solid #e2e8f0", borderRadius: "12px", color: "rgb\(18 37 74\)", outline: "none", fontSize: "14px", marginBottom: "1.5rem" } }), e.jsxs("div", { style: { display: "flex", justifyContent: "flex-end", gap: "1rem" }, children: [e.jsx("button", { onClick: a, disabled: x, className: "btn-secondary", style: { padding: "0.8rem 2rem", borderRadius: "8px" }, children: "Cancel" }), e.jsxs("button", { onClick: w, disabled: x || !n.trim(), className: "btn btn-primary", style: { padding: "0.8rem 3rem", borderRadius: "8px", background: "#10b981", color: "white", border: "none", display: "flex", alignItems: "center", gap: "0.5rem", cursor: x || !n.trim() ? "not-allowed" : "pointer" }, children: [x ? e.jsx(T, { className: "animate-spin", size: 18 }) : e.jsx(A, { size: 18 }), r.status === "rejected" ? "Resubmit to CR" : "Approve to CR"] })] })] })] }) }, P = ({ isMobile: d, mode: a = "review", title: j }) => { const [c, u] = l.useState([]), [r, h] = l.useState(!0), [n, b] = l.useState(null), { showModal: x } = L(); l.useEffect(() => { y() }, [a]); const y = async () => { h(!0); try { const i = a === "all" ? "/staff/probate/all" : a === "letters" ? "/staff/probate/letters" : "/staff/probate/pending-review", p = await g.get(i); u(p.data) } catch (i) { console.error("Failed to fetch probate apps:", i), x({ type: "error", title: "Error", message: "Failed to load applications." }) } finally { h(!1) } }; if (n) return e.jsx(te, { appId: n, onBack: () => b(null), onSuccess: () => { b(null), y() } }); const m = [{ key: "id", label: "APP ID", sortable: !0, render: i => e.jsxs("span", { style: { fontWeight: "bold" }, children: ["PRB-", i] }) }, { key: "deceased_name", label: "DECEASED NAME", sortable: !0, render: i => e.jsx("span", { style: { fontWeight: "500" }, children: i }) }, { key: "first_name", label: "FILED BY", sortable: !0, render: (i, p) => e.jsxs("div", { children: [e.jsxs("div", { style: { fontWeight: "500" }, children: [i, " ", p.surname] }), e.jsx("div", { style: { color: "#94a3b8", fontSize: "12px" }, children: p.email })] }) }, { key: "created_at", label: "DATE FILED", sortable: !0, render: i => R(i) }, { key: "remarks", label: "REMARK", render: i => e.jsx("div", { style: { maxWidth: "150px", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap", fontSize: "12px", color: "#778eaeff" }, title: i || "No remarks", children: i || "---" }) }, { key: "approval", label: "APPROVAL", sortable: !0, render: (i, p) => e.jsxs("div", { style: { fontSize: "12px" }, children: [e.jsx("div", { style: { fontWeight: "500", color: i ? "#10b981" : "#778eaeff" }, children: i || "Pending" }), p.approval_date && e.jsx("div", { style: { fontSize: "10px", opacity: .7 }, children: R(p.approval_date) })] }) }, { key: "status", label: "STATUS", sortable: !0, render: i => e.jsx("span", { style: { padding: "4px 10px", borderRadius: "20px", fontSize: "11px", fontWeight: "600", textTransform: "uppercase", background: i === "approved" || i === "completed" ? "#dcfce7" : i === "under_processing" ? "#dbeafe" : i === "cr_pending" ? "#fef9c3" : i === "pending_registrar" ? "#e0f2fe" : i === "rejected" ? "#fee2e2" : "#f1f5f9", color: i === "approved" || i === "completed" ? "#15803d" : i === "under_processing" ? "#1e40af" : i === "cr_pending" ? "#854d0e" : i === "pending_registrar" ? "#0369a1" : i === "rejected" ? "#b91c1c" : "#778eaeff", border: "1px solid currentColor", opacity: .9 }, children: (i || "pending").replace("_", " ") }) }], v = i => e.jsxs("div", { style: { display: "flex", gap: "8px" }, children: [e.jsxs("button", { onClick: () => b(i.id), className: "btn btn-primary", style: { padding: "8px 16px", fontSize: "13px", display: "flex", alignItems: "center", gap: "8px" }, children: [e.jsx(Z, { size: 16 }), " ", ["under_processing", "approved", "completed"].includes(i.status) ? "View" : "Review"] }), i.status === "completed" && e.jsxs("button", { onClick: p => { p.stopPropagation(), (async () => { try { const s = await g.get(`/staff/probate/${i.id}/letter-pdf`); s.data.path && window.open(`${g.defaults.baseURL.replace("/api", "")}${s.data.path}`, "_blank") } catch (s) { console.error("Failed to load letter:", s), x({ type: "error", title: "Error", message: "Failed to load Letter of Administration." }) } })() }, className: "btn btn-secondary", title: "View Letter of Administration", style: { padding: "8px 16px", fontSize: "13px", display: "flex", alignItems: "center", gap: "8px", background: "#f1f5f9", color: "rgb\(18 37 74\)", border: "1px solid #e2e8f0", cursor: "pointer" }, children: [e.jsx(z, { size: 16 }), " Letter"] })] }); return e.jsxs("div", { style: { padding: d ? "0" : "1rem" }, children: [e.jsxs("div", { style: { marginBottom: "2rem" }, children: [e.jsx("h2", { style: { color: "rgb\(18 37 74\)", margin: 0 }, children: j || "Probate Applications" }), e.jsx("p", { style: { color: "#778eaeff", fontSize: "14px" }, children: a === "letters" ? "View approved letters of administration" : "Manage and review probate filings" })] }), e.jsx($, { columns: m, data: c, loading: r, actions: v, isMobile: d, searchPlaceholder: "Search by ID or name..." })] }) }, re = ({ size: d, color: a = "currentColor" }) => e.jsx("svg", { width: d, height: d, viewBox: "0 0 24 24", fill: "none", stroke: a, strokeWidth: "2", strokeLinecap: "round", strokeLinejoin: "round", children: e.jsx("path", { d: "M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" }) }), ye = ({ staff: d }) => { var w; const [a, j] = l.useState(d), [c, u] = l.useState("dashboard"), [r, h] = l.useState(window.innerWidth > 1024), [n, b] = l.useState(window.innerWidth <= 1024); l.useEffect(() => { const s = () => { const o = window.innerWidth <= 1024; b(o), h(!o) }; return window.addEventListener("resize", s), () => window.removeEventListener("resize", s) }, []), l.useEffect(() => { const s = async () => { try { const o = await g.get("/staff/profile"); j(o.data), localStorage.setItem("staff", JSON.stringify(o.data)) } catch (o) { console.error("Failed to refresh staff info:", o) } }; d != null && d.id && s() }, [d == null ? void 0 : d.id]); const x = () => { localStorage.removeItem("staffToken"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, y = [{ icon: e.jsx(H, { size: 20 }), label: "Overview", id: "dashboard" }, { icon: e.jsx(J, { size: 20 }), label: "All Probate Applications", id: "review" }, { icon: e.jsx(z, { size: 20 }), label: "Letter of Administration", id: "letters" }, { icon: e.jsx(Y, { size: 20 }), label: "Support", id: "support" }, { icon: e.jsx(_, { size: 20 }), label: "My Profile", id: "profile" }], [m, v] = l.useState([]), i = async () => { try { const s = await g.get("/notifications/staff"); v(s.data) } catch (s) { console.error("Failed to fetch notifications:", s) } }, p = async s => { try { await g.put(`/notifications/staff/${s}/read`), v(o => o.map(S => S.id === s ? { ...S, is_read: 1 } : S)) } catch (o) { console.error("Error marking read:", o) } }; return l.useEffect(() => { if (a != null && a.id) { i(); const s = setInterval(i, 3e4); return () => clearInterval(s) } }, [a == null ? void 0 : a.id]), a ? e.jsxs("div", { style: { display: "flex", height: "100vh", overflow: "hidden", background: "#f8fafc", color: "#3d2b1f", position: "relative" }, children: [n && r && e.jsx("div", { onClick: () => h(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), e.jsxs("aside", { style: { width: n ? r ? "260px" : "0" : "260px", background: "#3d2b1f", padding: "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: n ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: n && r ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [e.jsxs("div", { style: { padding: "2rem", marginBottom: "1rem", display: "flex", alignItems: "center", justifyContent: r ? "flex-start" : "center", gap: "1rem" }, children: [e.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%", flexShrink: 0 } }), r && e.jsxs("div", { style: { whiteSpace: "nowrap", animation: "fadeIn 0.2s" }, children: [e.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS Probate" }), e.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), e.jsx("nav", { style: { flex: 1, overflowY: "auto", padding: "0 1rem" }, children: y.map(s => e.jsxs("div", { onClick: () => { u(s.id), n && h(!1) }, title: r ? "" : s.label, style: { display: "flex", alignItems: "center", justifyContent: r ? "flex-start" : "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: c === s.id ? "#5d4037" : "transparent", color: c === s.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [s.icon, r && e.jsx("span", { style: { animation: "fadeIn 0.2s" }, children: s.label })] }, s.id)) }), e.jsx("div", { style: { padding: "1rem" }, children: e.jsxs("button", { onClick: x, title: r ? "" : "Logout", style: { width: "100%", display: "flex", alignItems: "center", justifyContent: r ? "flex-start" : "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", borderRadius: "12px", transition: "background 0.2s" }, onMouseOver: s => s.currentTarget.style.background = "rgba(239, 68, 68, 0.05)", onMouseOut: s => s.currentTarget.style.background = "transparent", children: [e.jsx(O, { size: 20 }), r && e.jsx("span", { style: { animation: "fadeIn 0.2s" }, children: "Logout" })] }) })] }), e.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", height: "100vh", overflow: "hidden", background: "#f8fafc" }, children: [e.jsx(U, { user: a, title: ((w = y.find(s => s.id === c)) == null ? void 0 : w.label) || "Probate Portal", onLogout: x, onSidebarToggle: () => h(!r), onProfileClick: () => u("profile"), onSettingsClick: () => u("profile"), sidebarOpen: r, notifications: m, onNotificationRead: p, isMobile: n }), e.jsx("div", { style: { padding: n ? "1rem" : "2.5rem", flex: 1, overflowY: "auto" }, children: c === "dashboard" ? e.jsx(q, { isMobile: n, role: "pr", onViewQueue: () => u("review") }) : c === "review" ? e.jsx(P, { isMobile: n, mode: "all", title: "All Probate Applications" }) : c === "letters" ? e.jsx(P, { isMobile: n, mode: "letters", title: "Letter of Administration" }) : c === "support" ? e.jsx(V, { user: a, isMobile: n, isStaff: !0 }) : c === "profile" ? e.jsx(G, { staff: a, isMobile: n, onUpdate: s => { j(s), localStorage.setItem("staff", JSON.stringify(s)) } }) : null })] })] }) : e.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading Registrar session..." }) }; export { ye as default };
