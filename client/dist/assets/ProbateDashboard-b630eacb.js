import{r as n,j as e,a as h}from"./index-a367903a.js";import{P as S,a as P,b as v}from"./ProbateApplicationDetails-2d4ae9c5.js";import{H as A,c as k,d as z,M as I}from"./SupportTickets-1bec5e21.js";import{P as L,a as R}from"./PublicAnalytics-f4f515fa.js";import{P as C}from"./PublicProfile-eb207c97.js";import{F as m}from"./file-text-05ff1bfe.js";import{C as O}from"./credit-card-7df9ba98.js";import{U as E}from"./dateUtils-0cf2816c.js";import"./ImageCapture-db49fbfc.js";import"./html2canvas.esm-7584f2e8.js";import"./refresh-cw-24e393f6.js";import"./menu-52d4f898.js";import"./arrow-left-87f00f60.js";import"./briefcase-8ab53315.js";import"./trash-2-9ff1ad5f.js";import"./shield-1033dda0.js";import"./download-8bb8051d.js";import"./mail-7147b856.js";import"./activity-566acbed.js";import"./phone-a42f05a3.js";import"./lock-2d4848cc.js";const ie=({user:o})=>{const[s,d]=n.useState("overview"),[f,c]=n.useState(null),[r,l]=n.useState(window.innerWidth>1024),[t,b]=n.useState(window.innerWidth<=1024),[y,x]=n.useState([]),g=async()=>{try{const i=await h.get("/notifications/public");x(i.data)}catch(i){console.error("Failed to fetch notifications:",i)}},j=async i=>{try{await h.put(`/notifications/public/${i}/read`),x(a=>a.map(p=>p.id===i?{...p,is_read:1}:p))}catch(a){console.error("Failed to mark as read:",a)}};n.useEffect(()=>{const i=()=>{const a=window.innerWidth<=1024;b(a),l(!a)};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),n.useEffect(()=>{if(o!=null&&o.id){g();const i=setInterval(g,3e4);return()=>clearInterval(i)}},[o==null?void 0:o.id]);const w=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"},u=[{icon:e.jsx(z,{size:20}),label:"Overview",id:"overview"},{icon:e.jsx(m,{size:20}),label:"New Application",id:"new"},{icon:e.jsx(m,{size:20}),label:"My Applications",id:"applications"},{icon:e.jsx(m,{size:20}),label:"Letter of Administration",id:"letters"},{icon:e.jsx(O,{size:20}),label:"Payments",id:"payments"},{icon:e.jsx(I,{size:20}),label:"Support",id:"support"},{icon:e.jsx(E,{size:20}),label:"My Profile",id:"profile"}];return o?e.jsxs("div",{style:{display:"flex",minHeight:"100vh",background:"#f8fafc",position:"relative"},children:[t&&r&&e.jsx("div",{onClick:()=>l(!1),style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",zIndex:40}}),e.jsxs("aside",{style:{width:r?"260px":t?"0":"80px",background:"#3d2b1f",color:"white",transition:"all 0.3s ease",display:"flex",flexDirection:"column",position:t?"fixed":"relative",height:"100vh",zIndex:50,overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"2rem",display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[e.jsx("img",{src:"/assets/logo.png",alt:"Logo",style:{width:"60px",height:"60px",borderRadius:"50%"}}),(r||t&&r)&&e.jsxs("div",{style:{textAlign:"center",overflow:"hidden"},children:[e.jsx("h2",{style:{fontSize:"1.2rem",margin:0},children:"Probate"}),e.jsx("p",{style:{margin:0,fontSize:"9px",color:"#8d6e63",fontWeight:"bold"},children:"BORNO STATE HIGH COURT"})]})]}),e.jsx("nav",{style:{flex:1,padding:"1rem"},children:u.map(i=>e.jsxs("div",{onClick:()=>{d(i.id),c(null),t&&l(!1)},style:{display:"flex",alignItems:"center",padding:"1rem",cursor:"pointer",borderRadius:"8px",gap:"1rem",marginBottom:"0.5rem",transition:"background 0.2s",backgroundColor:s===i.id?"#5d4037":"transparent",color:s===i.id?"#2ecc71":"#8d6e63",justifyContent:r?"flex-start":"center"},children:[i.icon,r&&e.jsx("span",{children:i.label})]},i.id))})]}),e.jsxs("main",{style:{flex:1,display:"flex",flexDirection:"column",height:"100vh",overflowY:"auto"},children:[e.jsx(A,{user:o,title:s==="overview"?"Probate Overview":"Probate Registry",onLogout:w,onSidebarToggle:()=>l(!r),onProfileClick:()=>d("profile"),onSettingsClick:()=>d("profile"),sidebarOpen:r,isMobile:t,notifications:y,onNotificationRead:j}),e.jsxs("div",{style:{padding:t?"1rem":"2rem"},children:[e.jsx("h1",{style:{marginBottom:"2rem",fontSize:t?"1.5rem":"2rem"},children:s==="overview"?"Probate Overview":s==="letters"?"Letter of Administration":"Probate Registry"}),f?e.jsx(S,{applicationId:f,onBack:()=>c(null),isMobile:t,user:o}):s==="overview"?e.jsx(L,{isMobile:t,setView:d,module:"probate"}):s==="new"?e.jsx(P,{user:o,isMobile:t}):s==="applications"?e.jsx(v,{user:o,isMobile:t,onSelect:i=>c(i)}):s==="letters"?e.jsx(v,{user:o,isMobile:t,onSelect:i=>c(i),filterStatus:"approved",title:"Approved Letters of Administration"}):s==="payments"?e.jsx(R,{user:o,isMobile:t}):s==="support"?e.jsx(k,{user:o,isMobile:t,isStaff:!1}):s==="profile"?e.jsx(C,{user:o,isMobile:t,onUpdate:i=>{localStorage.setItem("user",JSON.stringify(i))}}):e.jsxs("div",{className:"glass-card",style:{background:"white",padding:t?"1.5rem":"2rem"},children:["Module Section: ",s," Under construction"]})]})]})]}):e.jsx("div",{style:{padding:"2rem",textAlign:"center"},children:"Loading session..."})};export{ie as default};
