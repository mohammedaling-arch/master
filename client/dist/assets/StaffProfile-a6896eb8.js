import { c as B, d as D, r as t, j as e, a as u, e as P, C as k } from "./index-a367903a.js"; import { P as U, U as N } from "./SupportTickets-1bec5e21.js"; import { U as T } from "./dateUtils-0cf2816c.js"; import { M } from "./mail-7147b856.js"; import { S as L } from "./shield-1033dda0.js"; import { L as W } from "./lock-2d4848cc.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E = [["path", { d: "M10 12h4", key: "a56b0p" }], ["path", { d: "M10 8h4", key: "1sr2af" }], ["path", { d: "M14 21v-3a2 2 0 0 0-4 0v3", key: "1rgiei" }], ["path", { d: "M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2", key: "secmi2" }], ["path", { d: "M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16", key: "16ra0t" }]], _ = B("building-2", E), G = ({ staff: z, isMobile: g, onUpdate: b }) => { var v; const { showModal: o } = D(), [r, C] = t.useState(z), [p, m] = t.useState(!1), [n, R] = t.useState({ name: (r == null ? void 0 : r.name) || "", division: (r == null ? void 0 : r.division) || "", email: (r == null ? void 0 : r.email) || "" }), [c, h] = t.useState(null), [i, x] = t.useState({ currentPassword: "", newPassword: "", confirmPassword: "" }), [y, f] = t.useState(!1), [j, w] = t.useState(!1), F = async s => { var l, d; s.preventDefault(), f(!0); try { const a = new FormData; a.append("name", n.name), a.append("division", n.division), c && a.append("signature", c); const S = (await u.put("/staff/profile", a, { headers: { "Content-Type": "multipart/form-data" } })).data.user; C(S), b && b(S), m(!1), o({ type: "success", title: "Profile Updated", message: "Your profile information has been updated." }) } catch (a) { o({ type: "error", title: "Update Failed", message: ((d = (l = a.response) == null ? void 0 : l.data) == null ? void 0 : d.error) || "Failed to update profile." }) } finally { f(!1) } }, I = async s => { var l, d; if (s.preventDefault(), i.newPassword !== i.confirmPassword) return o({ type: "error", title: "Error", message: "New passwords do not match" }); w(!0); try { await u.put("/staff/change-password", { currentPassword: i.currentPassword, newPassword: i.newPassword }), o({ type: "success", title: "Success", message: "Password changed successfully" }), x({ currentPassword: "", newPassword: "", confirmPassword: "" }) } catch (a) { o({ type: "error", title: "Failed", message: ((d = (l = a.response) == null ? void 0 : l.data) == null ? void 0 : d.error) || "Failed to change password" }) } finally { w(!1) } }; return e.jsxs("div", { style: { color: "rgb\(18 37 74\)" }, children: [e.jsxs("div", { style: { marginBottom: "2.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0" }, children: "Security & Profile" }), e.jsx("p", { style: { color: "#94a3b8" }, children: "Manage your account settings and personal information" })] }), !p && e.jsxs("button", { onClick: () => m(!0), style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "10px 20px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "1px solid #3b82f6", borderRadius: "10px", cursor: "pointer", fontWeight: "600" }, children: [e.jsx(U, { size: 18 }), " Edit Profile"] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: g ? "1fr" : "1.2fr 1fr", gap: "2.5rem" }, children: [e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px", color: "white" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "2rem", marginBottom: "2.5rem" }, children: [e.jsx("div", { style: { width: "100px", height: "100px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", borderRadius: "24px", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "2.5rem", fontWeight: "bold", boxShadow: "0 10px 15px -3px rgba(59, 130, 246, 0.3)" }, children: (v = r == null ? void 0 : r.name) == null ? void 0 : v[0] }), e.jsxs("div", { children: [e.jsx("h3", { style: { margin: 0, fontSize: "1.8rem" }, children: r == null ? void 0 : r.name }), e.jsx("div", { style: { display: "inline-block", padding: "6px 16px", background: "rgba(16, 185, 129, 0.1)", color: "#10b981", borderRadius: "20px", fontSize: "13px", fontWeight: "700", marginTop: "0.75rem", textTransform: "uppercase", letterSpacing: "0.05em" }, children: (r == null ? void 0 : r.role_display_name) || (r == null ? void 0 : r.role) })] })] }), e.jsx("form", { onSubmit: F, children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.75rem" }, children: [e.jsxs("div", { style: { display: "grid", gridTemplateColumns: g ? "1fr" : "1fr 1fr", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Full Name" }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsx(T, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), e.jsx("input", { type: "text", readOnly: !0, value: n.name, style: { width: "100%", padding: "12px 12px 12px 40px", background: "transparent", border: "1px solid transparent", borderRadius: "10px", color: "#778eaeff", outline: "none" } })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Division / Office" }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsx(_, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), e.jsx("input", { type: "text", readOnly: !0, value: n.division, placeholder: "Not specified", style: { width: "100%", padding: "12px 12px 12px 40px", background: "transparent", border: "1px solid transparent", borderRadius: "10px", color: "#778eaeff", outline: "none" } })] })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Email Address" }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsx(M, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), e.jsx("input", { type: "email", readOnly: !0, value: n.email, style: { width: "100%", padding: "12px 12px 12px 40px", background: "transparent", border: "1px solid transparent", borderRadius: "10px", color: "#778eaeff", outline: "none" } })] })] }), e.jsxs("div", { style: { borderTop: "1px solid #334155", paddingTop: "2rem" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "1rem" }, children: "Digital Signature" }), e.jsxs("div", { style: { border: "2px dashed #334155", padding: "1.5rem", borderRadius: "16px", background: p ? "rgba(30, 41, 59, 0.5)" : "#0f172a", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem", position: "relative" }, children: [c ? e.jsx("img", { src: URL.createObjectURL(c), style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Preview" }) : r != null && r.signature_path ? e.jsx("img", { src: `${u.defaults.baseURL.replace("/api", "")}${r.signature_path}`, style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Signature" }) : e.jsx(L, { size: 40, color: "#334155" }), p && e.jsxs(e.Fragment, { children: [e.jsx("input", { type: "file", id: "sig-upload", style: { display: "none" }, accept: "image/*", onChange: s => h(s.target.files[0]) }), e.jsxs("label", { htmlFor: "sig-upload", style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "8px 16px", background: "#334155", borderRadius: "8px", cursor: "pointer", fontSize: "13px", color: "white" }, children: [e.jsx(N, { size: 16 }), " Choose Signature Image"] })] })] })] }), p && e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [e.jsx("button", { type: "button", onClick: () => { m(!1), R({ name: r.name, division: r.division || "", email: r.email }), h(null) }, style: { flex: 1, padding: "12px", background: "transparent", border: "1px solid #ef4444", color: "#ef4444", borderRadius: "10px", cursor: "pointer", fontWeight: "bold" }, children: "Cancel" }), e.jsxs("button", { type: "submit", disabled: y, style: { flex: 1, padding: "12px", background: "linear-gradient(135deg, #10b981 0%, #059669 100%)", border: "none", color: "white", borderRadius: "10px", cursor: "pointer", fontWeight: "bold", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [y ? e.jsx(P, { className: "animate-spin", size: 20 }) : e.jsx(k, { size: 20 }), " Save Changes"] })] })] }) })] }), e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px", color: "white" }, children: [e.jsxs("h3", { style: { margin: "0 0 2rem 0", display: "flex", alignItems: "center", gap: "0.75rem", fontSize: "1.4rem" }, children: [e.jsx(W, { size: 22, color: "#f59e0b" }), " Security & Password"] }), e.jsx("form", { onSubmit: I, children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Current Password" }), e.jsx("input", { type: "password", required: !0, value: i.currentPassword, onChange: s => x({ ...i, currentPassword: s.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "New Password" }), e.jsx("input", { type: "password", required: !0, value: i.newPassword, onChange: s => x({ ...i, newPassword: s.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Confirm New Password" }), e.jsx("input", { type: "password", required: !0, value: i.confirmPassword, onChange: s => x({ ...i, confirmPassword: s.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), e.jsx("div", { style: { marginTop: "1rem", padding: "1rem", background: "rgba(245, 158, 11, 0.05)", border: "1px solid rgba(245, 158, 11, 0.2)", borderRadius: "12px" }, children: e.jsxs("p", { style: { margin: 0, fontSize: "12px", color: "#94a3b8", lineHeight: "1.5" }, children: [e.jsx("strong", { style: { color: "#f59e0b" }, children: "Security Tip:" }), " Use a combination of letters, numbers, and symbols to create a strong password. Avoid using easily guessable information."] }) }), e.jsxs("button", { type: "submit", disabled: j, style: { padding: "16px", borderRadius: "12px", background: "linear-gradient(135deg, #f59e0b 0%, #d97706 100%)", border: "none", color: "white", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.75rem", boxShadow: "0 10px 15px -3px rgba(245, 158, 11, 0.3)" }, children: [j ? e.jsx(P, { className: "animate-spin", size: 20 }) : e.jsx(k, { size: 20 }), "Update Password Settings"] })] }) })] })] })] }) }; export { G as S };
