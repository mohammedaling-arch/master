import { f as S, r, u as k, R, j as e, h as z, m as f, C, e as P, a as L } from "./index-a367903a.js"; import { L as W } from "./lock-2d4848cc.js"; const E = () => { const [m] = S(), a = m.get("token"), [i, b] = r.useState(""), [d, y] = r.useState(""), [l, c] = r.useState(!1), [p, o] = r.useState("idle"), [x, n] = r.useState(""), g = k(), [w, j] = r.useState(window.innerWidth <= 768); R.useEffect(() => { const t = () => j(window.innerWidth <= 768); return window.addEventListener("resize", t), () => window.removeEventListener("resize", t) }, []); const v = async t => { var h, u; if (t.preventDefault(), i !== d) { o("error"), n("Passwords do not match"); return } c(!0); try { const s = await L.post("/auth/reset-password", { token: a, password: i }); o("success"), n(s.data.message), setTimeout(() => g("/login"), 3e3) } catch (s) { console.error("Reset password error:", s), o("error"), n(((u = (h = s.response) == null ? void 0 : h.data) == null ? void 0 : u.error) || "Failed to reset password") } finally { c(!1) } }; return a ? e.jsxs("div", { style: { display: "flex", justifyContent: "center", alignItems: "center", minHeight: "100vh", background: "linear-gradient(135deg, rgb\(18 37 74\) 0%, #080c14 100%)", padding: "1.5rem", position: "relative", overflow: "hidden", perspective: "1200px" }, children: [e.jsx("div", { style: { position: "absolute", top: "-10%", left: "-5%", width: "40%", height: "40%", background: "radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)", borderRadius: "50%" } }), e.jsx("div", { style: { position: "absolute", bottom: "-10%", right: "-5%", width: "35%", height: "35%", background: "radial-gradient(circle, rgba(96, 165, 250, 0.1) 0%, transparent 70%)", borderRadius: "50%" } }), e.jsx(f.div, { initial: { opacity: 0, rotateY: -45, x: 30 }, animate: { opacity: 1, rotateY: 0, x: 0 }, transition: { duration: .5 }, style: { width: "100%", maxWidth: "500px", background: "white", borderRadius: "40px", padding: w ? "2.5rem 1.5rem" : "4rem", boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)", zIndex: 10, textAlign: "center" }, children: p === "success" ? e.jsxs(f.div, { initial: { opacity: 0, scale: .9 }, animate: { opacity: 1, scale: 1 }, children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#f0fdf4", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem" }, children: e.jsx(C, { size: 40, color: "#10b981" }) }), e.jsx("h1", { style: { color: "rgb\(18 37 74\)", fontSize: "1.75rem", marginBottom: "1rem", fontWeight: "800" }, children: "Success!" }), e.jsx("p", { style: { color: "#778eaeff", lineHeight: 1.6, marginBottom: "2rem" }, children: x }), e.jsx("p", { style: { fontSize: "14px", color: "#94a3b8" }, children: "Redirecting to login..." })] }) : e.jsxs(e.Fragment, { children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#f8fafc", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem" }, children: e.jsx(W, { size: 40, color: "#3b82f6" }) }), e.jsx("h1", { style: { color: "rgb\(18 37 74\)", fontSize: "1.75rem", marginBottom: "0.4rem", fontWeight: "800" }, children: "Set new password" }), e.jsx("p", { style: { color: "#778eaeff", marginBottom: "2.5rem", fontSize: "14px" }, children: "Please choose a strong password for your account." }), p === "error" && e.jsx("div", { style: { background: "#fef2f2", border: "1px solid #fee2e2", color: "#b91c1c", padding: "12px", borderRadius: "12px", fontSize: "13px", marginBottom: "1.5rem" }, children: x }), e.jsxs("form", { onSubmit: v, style: { display: "flex", flexDirection: "column", gap: "1.5rem", textAlign: "left" }, children: [e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "8px" }, children: [e.jsx("label", { style: { fontSize: "13px", fontWeight: "600", color: "#475569" }, children: "New Password" }), e.jsx("input", { type: "password", placeholder: "••••••••", style: { width: "100%", padding: "14px 20px", borderRadius: "30px", background: "#f8fafc", border: "1px solid #e2e8f0", fontSize: "14px", outline: "none" }, value: i, onChange: t => b(t.target.value), required: !0 })] }), e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "8px" }, children: [e.jsx("label", { style: { fontSize: "13px", fontWeight: "600", color: "#475569" }, children: "Confirm Password" }), e.jsx("input", { type: "password", placeholder: "••••••••", style: { width: "100%", padding: "14px 20px", borderRadius: "30px", background: "#f8fafc", border: "1px solid #e2e8f0", fontSize: "14px", outline: "none" }, value: d, onChange: t => y(t.target.value), required: !0 })] }), e.jsx("button", { type: "submit", style: { height: "54px", borderRadius: "30px", background: "linear-gradient(to right, #3b82f6, #2563eb)", color: "white", fontWeight: "700", border: "none", cursor: "pointer", fontSize: "15px", boxShadow: "0 8px 16px -4px rgba(59, 130, 246, 0.4)", transition: "all 0.2s", marginTop: "1rem" }, disabled: l, children: l ? e.jsx(P, { className: "animate-spin", style: { margin: "0 auto" } }) : "Change Password" })] })] }) })] }) : e.jsx("div", { style: { display: "flex", justifyContent: "center", alignItems: "center", minHeight: "100vh", background: "#0f172a", color: "white" }, children: e.jsxs("div", { style: { textAlign: "center" }, children: [e.jsx(z, { size: 64, color: "#ef4444", style: { marginBottom: "1rem" } }), e.jsx("h1", { children: "Invalid Link" }), e.jsx("p", { children: "This password reset link is invalid or has expired." }), e.jsx("button", { onClick: () => g("/login"), style: { marginTop: "2rem", padding: "12px 24px", background: "#3b82f6", border: "none", borderRadius: "8px", color: "white", cursor: "pointer" }, children: "Return to Login" })] }) }) }; export { E as default };
