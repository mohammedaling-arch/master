import { c as U, r as c, d as B, a as y, j as e, A as J, m as N, X as L, e as q, C as te } from "./index-a367903a.js"; import { D as P, e as M, a as X, C as ge, b as se, L as he, H as ye, c as fe, d as be, M as je } from "./SupportTickets-1bec5e21.js"; import { U as ve, P as H } from "./user-plus-bcd5904a.js"; import { E as re } from "./eye-off-2962c434.js"; import { E as ae } from "./eye-7d150dac.js"; import { T as A } from "./trash-2-9ff1ad5f.js"; import { S as W } from "./shield-1033dda0.js"; import { S as ke, f as ie, U as ne } from "./dateUtils-0cf2816c.js"; import { D as we } from "./download-8bb8051d.js"; import { R as Se } from "./RichTextEditor-afbee9ff.js"; import { S as Q } from "./save-96d3a65b.js"; import { F as $ } from "./file-text-05ff1bfe.js"; import { S as Ce } from "./StaffProfile-a6896eb8.js"; import { A as V } from "./activity-566acbed.js"; import { I as le } from "./image-fb628d93.js"; import { R as Z } from "./refresh-cw-24e393f6.js"; import { M as _e } from "./mail-7147b856.js"; import { L as ze } from "./lock-2d4848cc.js"; import { C as K } from "./credit-card-7df9ba98.js"; import { L as Re } from "./list-1b284b06.js"; import "./menu-52d4f898.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie = [["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }], ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }], ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]], ee = U("database", Ie);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De = [["path", { d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z", key: "sc7q7i" }]], Te = U("funnel", De);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20", key: "13o1zl" }], ["path", { d: "M2 12h20", key: "9i4pu4" }]], Ee = U("globe", Ne);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae = [["path", { d: "M12 2v10", key: "mnfbl" }], ["path", { d: "M18.4 6.6a9 9 0 1 1-12.77.04", key: "obofu9" }]], oe = U("power", Ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe = [["path", { d: "M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7", key: "1m0v6g" }], ["path", { d: "M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z", key: "ohrbg2" }]], Be = U("square-pen", Fe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We = [["path", { d: "m16 11 2 2 4-4", key: "9rsbq5" }], ["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]], Ue = U("user-check", We), Le = ({ isMobile: p }) => { const [x, d] = c.useState([]), [l, S] = c.useState([]), [h, b] = c.useState(!0), [r, g] = c.useState(!1), [s, j] = c.useState(!1), [m, a] = c.useState({ id: null, name: "", email: "", password: "", role_id: "", division: "", status: "active" }), [u, w] = c.useState(!1), [v, t] = c.useState(!1), [o, f] = c.useState(null), { showModal: k } = B(); c.useEffect(() => { i(), z() }, []); const i = async () => { var n, C, R, I; try { b(!0); const T = await y.get("/staff"); d(T.data) } catch (T) { console.error("Error fetching staff:", T); const ue = ((C = (n = T.response) == null ? void 0 : n.data) == null ? void 0 : C.error) || ((I = (R = T.response) == null ? void 0 : R.data) == null ? void 0 : I.message) || T.message; k({ type: "error", title: "Error Loading Staff", message: `Could not load staff users: ${ue}` }) } finally { b(!1) } }, z = async () => { try { const n = await y.get("/roles"); S(n.data) } catch (n) { console.error("Error fetching roles:", n), k({ type: "error", title: "Error Loading Roles", message: "Could not load roles. Using defaults." }) } }, _ = () => { a({ id: null, name: "", email: "", password: "", role_id: l.length > 0 ? l[0].id : "", division: "", status: "active" }), j(!1), g(!1), w(!1) }, F = n => { a({ id: n.id, name: n.name, email: n.email, password: "", role_id: n.role_id || "", division: n.division || "", status: n.status }), j(!0), g(!0) }, de = async n => { var C, R; n.preventDefault(), t(!0); try { if (s) { const I = { ...m }; I.password || delete I.password, await y.put(`/staff/${m.id}`, I), k({ type: "success", title: "Staff Updated", message: `${m.name} has been updated successfully.` }) } else await y.post("/staff", m), k({ type: "success", title: "Staff Created", message: `${m.name} has been added successfully.` }); _(), i() } catch (I) { console.error("Error saving staff:", I), k({ type: "error", title: s ? "Update Failed" : "Creation Failed", message: ((R = (C = I.response) == null ? void 0 : C.data) == null ? void 0 : R.error) || "An error occurred. Please try again." }) } finally { t(!1) } }, ce = n => { k({ type: "warning", title: "Delete Staff User", message: `Are you sure you want to delete ${n.name}? This action cannot be undone.`, confirmText: "Delete", cancelText: "Cancel", showCancel: !0, onConfirm: async () => { var C, R; try { await y.delete(`/staff/${n.id}`), k({ type: "success", title: "Staff Deleted", message: `${n.name} has been removed successfully.` }), i() } catch (I) { k({ type: "error", title: "Deletion Failed", message: ((R = (C = I.response) == null ? void 0 : C.data) == null ? void 0 : R.error) || "Failed to delete staff user." }) } } }) }, pe = async n => { const C = n.status === "active" ? "inactive" : "active"; try { await y.put(`/staff/${n.id}`, { ...n, status: C }), k({ type: "success", title: "Status Updated", message: `${n.name} is now ${C}.` }), i() } catch { k({ type: "error", title: "Update Failed", message: "Failed to update staff status." }) } }, xe = async (n, C) => { var R, I; if (C) { if (!C.type.startsWith("image/")) { k({ type: "error", title: "Invalid File", message: "Please upload an image file (PNG, JPG, etc.)" }); return } if (C.size > 2 * 1024 * 1024) { k({ type: "error", title: "File Too Large", message: "Signature image must be less than 2MB" }); return } f(n); try { const T = new FormData; T.append("signature", C), await y.post(`/staff/${n}/signature`, T, { headers: { "Content-Type": "multipart/form-data" } }), k({ type: "success", title: "Signature Uploaded", message: "Signature has been uploaded successfully." }), i() } catch (T) { k({ type: "error", title: "Upload Failed", message: ((I = (R = T.response) == null ? void 0 : R.data) == null ? void 0 : I.error) || "Failed to upload signature." }) } finally { f(null) } } }, me = n => ({ admin: "#ef4444", cr: "#8b5cf6", registrar: "#3b82f6", pr: "#3b82f6", cfo: "#f59e0b", jurat: "#10b981" })[n] || "#778eaeff"; return e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", padding: p ? "1rem" : "2rem" }, children: [e.jsxs("div", { style: { display: "flex", flexDirection: p ? "column" : "row", justifyContent: "space-between", alignItems: p ? "flex-start" : "center", marginBottom: "2rem", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { margin: "0 0 0.5rem 0", fontSize: p ? "1.5rem" : "1.8rem" }, children: "Staff Management" }), e.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "14px" }, children: "Manage staff accounts and permissions" })] }), e.jsxs("button", { className: "btn btn-primary", onClick: () => { _(), g(!0) }, style: { display: "flex", alignItems: "center", gap: "0.5rem", width: p ? "100%" : "auto", justifyContent: "center" }, children: [e.jsx(ve, { size: 18 }), " Add Staff"] })] }), e.jsx(J, { children: r && e.jsx(N.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, background: "rgba(0, 0, 0, 0.8)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1e3, padding: "1rem" }, onClick: () => !v && _(), children: e.jsxs(N.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, exit: { scale: .9, opacity: 0 }, onClick: n => n.stopPropagation(), style: { background: "rgb\(18 37 74\)", borderRadius: "16px", padding: p ? "1.5rem" : "2.5rem", maxWidth: "600px", width: "100%", maxHeight: "95vh", overflowY: "auto", border: "1px solid #334155", boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: [e.jsx("h3", { style: { margin: 0 }, children: s ? "Edit Staff User" : "Add New Staff User" }), e.jsx("button", { onClick: _, disabled: v, style: { background: "transparent", border: "none", color: "#94a3b8", cursor: v ? "not-allowed" : "pointer", padding: "0.5rem" }, children: e.jsx(L, { size: 20 }) })] }), e.jsx("form", { onSubmit: de, children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Full Name *" }), e.jsx("input", { type: "text", required: !0, value: m.name, onChange: n => a({ ...m, name: n.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: "Enter full name" })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Email Address *" }), e.jsx("input", { type: "email", required: !0, value: m.email, onChange: n => a({ ...m, email: n.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: "staff@example.com" })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Division / Unit" }), e.jsx("input", { type: "text", value: m.division, onChange: n => a({ ...m, division: n.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: "e.g. Accounts, Registry" })] }), e.jsxs("div", { children: [e.jsxs("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: ["Password ", s && "(leave blank to keep current)"] }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsx("input", { type: u ? "text" : "password", required: !s, value: m.password, onChange: n => a({ ...m, password: n.target.value }), style: { width: "100%", padding: "12px", paddingRight: "45px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: s ? "Leave blank to keep current" : "Enter password" }), e.jsx("button", { type: "button", onClick: () => w(!u), style: { position: "absolute", right: "12px", top: "50%", transform: "translateY(-50%)", background: "transparent", border: "none", color: "#94a3b8", cursor: "pointer" }, children: u ? e.jsx(re, { size: 18 }) : e.jsx(ae, { size: 18 }) })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Role *" }), e.jsxs("select", { required: !0, value: m.role_id, onChange: n => a({ ...m, role_id: n.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, children: [e.jsx("option", { value: "", children: "Select a role..." }), l.map(n => e.jsx("option", { value: n.id, children: n.display_name }, n.id))] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Status *" }), e.jsxs("select", { required: !0, value: m.status, onChange: n => a({ ...m, status: n.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, children: [e.jsx("option", { value: "active", children: "Active" }), e.jsx("option", { value: "inactive", children: "Inactive" })] })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [e.jsx("button", { type: "button", onClick: _, disabled: v, style: { flex: 1, padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "transparent", color: "#94a3b8", cursor: v ? "not-allowed" : "pointer" }, children: "Cancel" }), e.jsx("button", { type: "submit", disabled: v, className: "btn btn-primary", style: { flex: 1, display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem", opacity: v ? .6 : 1, cursor: v ? "not-allowed" : "pointer" }, children: v ? e.jsxs(e.Fragment, { children: [e.jsx(q, { size: 18, className: "animate-spin" }), "Saving..."] }) : e.jsxs(e.Fragment, { children: [e.jsx(te, { size: 18 }), s ? "Update Staff" : "Create Staff"] }) })] })] }) })] }) }) }), e.jsx(P, { dark: !0, columns: [{ key: "name", label: "Staff Member", sortable: !0, render: (n, C) => e.jsxs("div", { children: [e.jsx("div", { style: { fontWeight: "600" }, children: n }), e.jsx("div", { style: { fontSize: "12px", color: "#778eaeff" }, children: C.email })] }) }, { key: "division", label: "Division", render: n => n || e.jsx("span", { style: { color: "#778eaeff", fontStyle: "italic" }, children: "-" }) }, { key: "role_display_name", label: "Role", sortable: !0, render: (n, C) => e.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "600", background: me(C.role), color: "white", textTransform: "uppercase" }, children: n || C.role }) }, { key: "status", label: "Status", sortable: !0, render: n => e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem" }, children: [e.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: n === "active" ? "#10b981" : "#ef4444" } }), e.jsx("span", { style: { color: n === "active" ? "#10b981" : "#ef4444", fontSize: "14px", textTransform: "capitalize" }, children: n })] }) }, { key: "signature_path", label: "Signature", render: (n, C) => e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [n ? e.jsx("img", { src: n.startsWith("http") ? n : `${y.defaults.baseURL.replace("/api", "")}${n}`, alt: "Sig", style: { height: "30px", background: "white", padding: "2px", borderRadius: "4px" } }) : e.jsx("span", { style: { color: "#94a3b8", fontSize: "12px" }, children: "No Signature" }), e.jsxs("label", { style: { color: "#3b82f6", fontSize: "12px", cursor: "pointer" }, children: [o === C.id ? "..." : "Upload", e.jsx("input", { type: "file", accept: "image/*", style: { display: "none" }, onChange: R => xe(C.id, R.target.files[0]) })] })] }) }], data: x, loading: h, searchPlaceholder: "Search staff by name, email or role...", actions: n => e.jsxs("div", { style: { display: "flex", gap: "0.25rem", justifyContent: "flex-end" }, children: [e.jsx("button", { onClick: () => F(n), style: { padding: "0.5rem", background: "transparent", border: "none", color: "#3b82f6", cursor: "pointer" }, children: e.jsx(H, { size: 18 }) }), e.jsx("button", { onClick: () => pe(n), style: { padding: "0.5rem", background: "transparent", border: "none", color: n.status === "active" ? "#f59e0b" : "#10b981", cursor: "pointer" }, children: e.jsx(oe, { size: 18 }) }), e.jsx("button", { onClick: () => ce(n), style: { padding: "0.5rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer" }, children: e.jsx(A, { size: 18 }) })] }) })] }) }, Pe = ({ isMobile: p = !1 }) => { const [x, d] = c.useState([]), [l, S] = c.useState(!0), [h, b] = c.useState(!1), [r, g] = c.useState(null), [s, j] = c.useState({ name: "", display_name: "", description: "" }), { showModal: m } = B(); c.useEffect(() => { a() }, []); const a = async () => { var o, f; try { S(!0); const k = await y.get("/roles"); d(k.data) } catch (k) { m({ type: "error", title: "Error", message: "Failed to load roles: " + (((f = (o = k.response) == null ? void 0 : o.data) == null ? void 0 : f.error) || k.message) }) } finally { S(!1) } }, u = async o => { var f, k; o.preventDefault(); try { r ? (await y.put(`/roles/${r.id}`, { display_name: s.display_name, description: s.description }), m({ type: "success", title: "Success", message: "Role updated successfully" })) : (await y.post("/roles", s), m({ type: "success", title: "Success", message: "Role created successfully" })), a(), t() } catch (i) { m({ type: "error", title: "Error", message: ((k = (f = i.response) == null ? void 0 : f.data) == null ? void 0 : k.error) || "Failed to save role" }) } }, w = async o => { m({ type: "confirm", title: "Delete Role", message: `Are you sure you want to delete the role "${o.display_name}"? This action cannot be undone.`, onConfirm: async () => { var f, k; try { await y.delete(`/roles/${o.id}`), m({ type: "success", title: "Success", message: "Role deleted successfully" }), a() } catch (i) { m({ type: "error", title: "Error", message: ((k = (f = i.response) == null ? void 0 : f.data) == null ? void 0 : k.error) || "Failed to delete role" }) } } }) }, v = o => { g(o), j({ name: o.name, display_name: o.display_name, description: o.description || "" }), b(!0) }, t = () => { b(!1), g(null), j({ name: "", display_name: "", description: "" }) }; return l ? e.jsx("div", { style: { textAlign: "center", padding: "3rem", color: "#778eaeff" }, children: e.jsx("div", { className: "animate-pulse", children: "Loading roles..." }) }) : e.jsxs("div", { style: { maxWidth: "1200px", margin: "0 auto" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem", flexWrap: "wrap", gap: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { fontSize: p ? "1.5rem" : "2rem", fontWeight: "bold", color: "rgb\(18 37 74\)", marginBottom: "0.5rem" }, children: "Role Management" }), e.jsx("p", { style: { color: "#778eaeff", fontSize: "0.9rem" }, children: "Create and manage staff roles" })] }), e.jsxs("button", { onClick: () => b(!0), className: "btn btn-primary", style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "0.75rem 1.5rem" }, children: [e.jsx(M, { size: 20 }), e.jsx("span", { children: "Add Role" })] })] }), e.jsx("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "repeat(auto-fill, minmax(350px, 1fr))", gap: "1.5rem", marginBottom: "2rem" }, children: x.map(o => e.jsxs(N.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "glass-card", style: { background: "white", border: "1px solid #e2e8f0", padding: "1.5rem", borderRadius: "12px", position: "relative", transition: "all 0.2s" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "flex-start", justifyContent: "space-between", marginBottom: "1rem" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [e.jsx("div", { style: { width: "40px", height: "40px", borderRadius: "10px", background: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)", display: "flex", alignItems: "center", justifyContent: "center" }, children: e.jsx(W, { size: 20, color: "white" }) }), e.jsxs("div", { children: [e.jsx("h3", { style: { fontSize: "1.1rem", fontWeight: "bold", color: "rgb\(18 37 74\)", margin: 0 }, children: o.display_name }), e.jsx("span", { style: { fontSize: "0.75rem", color: "#778eaeff", background: "#f1f5f9", padding: "2px 8px", borderRadius: "4px", display: "inline-block", marginTop: "4px" }, children: o.name })] })] }), e.jsxs("div", { style: { display: "flex", gap: "0.5rem" }, children: [e.jsx("button", { onClick: () => v(o), style: { background: "#3b82f6", border: "none", borderRadius: "6px", padding: "0.5rem", cursor: "pointer", color: "white", display: "flex", alignItems: "center" }, children: e.jsx(Be, { size: 16 }) }), e.jsx("button", { onClick: () => w(o), style: { background: "#ef4444", border: "none", borderRadius: "6px", padding: "0.5rem", cursor: "pointer", color: "white", display: "flex", alignItems: "center" }, children: e.jsx(A, { size: 16 }) })] })] }), e.jsx("p", { style: { color: "#778eaeff", fontSize: "0.9rem", margin: 0, lineHeight: "1.5" }, children: o.description || "No description provided" })] }, o.id)) }), e.jsx(J, { children: h && e.jsx(N.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1e3, padding: "1rem" }, onClick: t, children: e.jsxs(N.div, { initial: { scale: .9, y: 20 }, animate: { scale: 1, y: 0 }, exit: { scale: .9, y: 20 }, onClick: o => o.stopPropagation(), style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "500px", width: "100%", boxShadow: "0 20px 60px rgba(0,0,0,0.3)" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: [e.jsx("h3", { style: { fontSize: "1.5rem", fontWeight: "bold", color: "rgb\(18 37 74\)", margin: 0 }, children: r ? "Edit Role" : "Create New Role" }), e.jsx("button", { onClick: t, style: { background: "none", border: "none", cursor: "pointer", color: "#778eaeff" }, children: e.jsx(L, { size: 24 }) })] }), e.jsxs("form", { onSubmit: u, style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [!r && e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#475569", fontWeight: "500" }, children: "Role Name (Identifier)*" }), e.jsx("input", { type: "text", value: s.name, onChange: o => j({ ...s, name: o.target.value.toLowerCase().replace(/\s+/g, "_") }), placeholder: "e.g., manager, clerk", required: !0, style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #cbd5e1", fontSize: "1rem" } }), e.jsx("small", { style: { color: "#778eaeff", fontSize: "0.85rem", marginTop: "0.25rem", display: "block" }, children: "Lowercase, no spaces (use underscores)" })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#475569", fontWeight: "500" }, children: "Display Name*" }), e.jsx("input", { type: "text", value: s.display_name, onChange: o => j({ ...s, display_name: o.target.value }), placeholder: "e.g., Manager, Clerk", required: !0, style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #cbd5e1", fontSize: "1rem" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#475569", fontWeight: "500" }, children: "Description" }), e.jsx("textarea", { value: s.description, onChange: o => j({ ...s, description: o.target.value }), placeholder: "Describe the role responsibilities...", rows: 3, style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #cbd5e1", fontSize: "1rem", resize: "vertical" } })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [e.jsx("button", { type: "button", onClick: t, style: { flex: 1, padding: "0.75rem", borderRadius: "8px", border: "1px solid #cbd5e1", background: "white", color: "#475569", cursor: "pointer", fontWeight: "500" }, children: "Cancel" }), e.jsx("button", { type: "submit", className: "btn btn-primary", style: { flex: 1, padding: "0.75rem", borderRadius: "8px", fontWeight: "500" }, children: r ? "Update Role" : "Create Role" })] })] })] }) }) })] }) }, $e = ({ isMobile: p }) => { const [x, d] = c.useState([]), [l, S] = c.useState(!0), [h, b] = c.useState(""), [r, g] = c.useState(!1), [s, j] = c.useState(null), [m, a] = c.useState(!1), { showModal: u } = B(); c.useEffect(() => { w() }, []); const w = async () => { var i, z; try { S(!0); const _ = await y.get("/admin/users"); d(_.data) } catch (_) { console.error("Error fetching users:", _); const F = ((z = (i = _.response) == null ? void 0 : i.data) == null ? void 0 : z.error) || _.message || "Failed to load public users"; u({ type: "error", title: "Error Loading Users", message: `${F}. Please refresh the page.` }) } finally { S(!1) } }, v = i => { j({ ...i }), g(!0) }, t = async i => { var z, _; i.preventDefault(), a(!0); try { await y.put(`/admin/users/${s.id}`, s), u({ type: "success", title: "User Updated", message: `${s.first_name} ${s.surname} has been updated successfully.` }), g(!1), w() } catch (F) { u({ type: "error", title: "Update Failed", message: ((_ = (z = F.response) == null ? void 0 : z.data) == null ? void 0 : _.error) || "Failed to update user." }) } finally { a(!1) } }, o = async i => { const z = i.status === "active" ? "inactive" : "active"; try { await y.put(`/admin/users/${i.id}`, { ...i, status: z }), u({ type: "success", title: "Status Updated", message: `${i.first_name}'s account is now ${z}.` }), w() } catch { u({ type: "error", title: "Status Update Failed", message: "Failed to update user status." }) } }, f = i => { u({ type: "warning", title: "Delete User Account", message: `Are you sure you want to permanently delete the account for ${i.first_name} ${i.surname}? This action cannot be undone.`, confirmText: "Delete Permanently", cancelText: "Cancel", showCancel: !0, onConfirm: async () => { try { await y.delete(`/admin/users/${i.id}`), u({ type: "success", title: "User Deleted", message: "The user account has been removed." }), w() } catch { u({ type: "error", title: "Deletion Failed", message: "Failed to delete user account." }) } } }) }, k = x.filter(i => { const z = `${i.first_name || ""} ${i.surname || ""}`.toLowerCase(), _ = (i.email || "").toLowerCase(), F = h.toLowerCase(); return z.includes(F) || _.includes(F) || i.phone && i.phone.includes(h) }); return e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", overflow: "hidden" }, children: [e.jsxs("div", { style: { padding: p ? "1.5rem" : "2rem", borderBottom: "1px solid #334155", background: "rgba(30, 41, 59, 0.5)" }, children: [e.jsx("div", { style: { display: "flex", flexDirection: p ? "column" : "row", justifyContent: "space-between", alignItems: p ? "flex-start" : "center", marginBottom: "2rem", gap: "1rem" }, children: e.jsxs("div", { children: [e.jsxs("h2", { style: { margin: "0 0 0.5rem 0", display: "flex", alignItems: "center", gap: "0.75rem", fontSize: p ? "1.4rem" : "1.8rem" }, children: [e.jsx(X, { size: p ? 24 : 28, color: "#3b82f6" }), " User Management"] }), e.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "14px" }, children: "Comprehensive list of all registered portal users" })] }) }), e.jsxs("div", { style: { display: "flex", gap: "1rem", flexDirection: p ? "column" : "row" }, children: [e.jsxs("div", { style: { flex: 1, position: "relative" }, children: [e.jsx(ke, { style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" }, size: 18 }), e.jsx("input", { type: "text", placeholder: "Search by name, email or phone...", value: h, onChange: i => b(i.target.value), style: { width: "100%", padding: "12px 12px 12px 40px", background: "#0f172a", border: "1px solid #334155", borderRadius: "10px", color: "white", outline: "none", transition: "all 0.3s" } })] }), e.jsxs("div", { style: { display: "flex", gap: "0.75rem", width: p ? "100%" : "auto" }, children: [e.jsxs("button", { className: "btn", style: { flex: 1, background: "#334155", color: "white", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [e.jsx(Te, { size: 18 }), " ", p ? "Filter" : "Filter Status"] }), e.jsxs("button", { className: "btn", style: { flex: 1, background: "#334155", color: "white", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [e.jsx(we, { size: 18 }), " ", p ? "Export" : "Export CSV"] })] })] })] }), e.jsx("div", { style: { padding: "1.5rem" }, children: e.jsx(P, { dark: !0, columns: [{ key: "first_name", label: "Deponent", sortable: !0, render: (i, z) => { var _; return e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [e.jsxs("div", { style: { width: "40px", height: "40px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", borderRadius: "10px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: "bold" }, children: [i == null ? void 0 : i[0], (_ = z.surname) == null ? void 0 : _[0]] }), e.jsxs("div", { children: [e.jsxs("div", { style: { fontWeight: "600", color: "#f1f5f9" }, children: [i, " ", z.surname] }), e.jsx("div", { style: { fontSize: "12px", color: "#94a3b8" }, children: z.email })] })] }) } }, { key: "phone", label: "Contact", render: (i, z) => e.jsxs("div", { style: { fontSize: "13px" }, children: [e.jsx("div", { children: i || "N/A" }), e.jsxs("div", { style: { color: "#778eaeff", fontSize: "11px" }, children: ["NIN: ", z.nin || "Not Provided"] })] }) }, { key: "status", label: "Status", sortable: !0, render: i => e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: i === "active" ? "#10b981" : "#ef4444" } }), e.jsx("span", { style: { color: i === "active" ? "#10b981" : "#ef4444", fontSize: "13px", fontWeight: "bold", textTransform: "uppercase" }, children: i })] }) }, { key: "created_at", label: "Joined", sortable: !0, render: i => ie(i) }], data: k, loading: l, searchPlaceholder: "Search deponents by name, email or phone...", actions: i => e.jsxs("div", { style: { display: "flex", gap: "0.5rem", justifyContent: "flex-end" }, children: [e.jsx("button", { onClick: () => v(i), style: { padding: "8px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "none", borderRadius: "8px", cursor: "pointer" }, children: e.jsx(H, { size: 18 }) }), e.jsx("button", { onClick: () => o(i), style: { padding: "8px", background: i.status === "active" ? "rgba(245, 158, 11, 0.1)" : "rgba(16, 185, 129, 0.1)", color: i.status === "active" ? "#f59e0b" : "#10b981", border: "none", borderRadius: "8px", cursor: "pointer" }, children: e.jsx(oe, { size: 18 }) }), e.jsx("button", { onClick: () => f(i), style: { padding: "8px", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", border: "none", borderRadius: "8px", cursor: "pointer" }, children: e.jsx(A, { size: 18 }) })] }) }) }), e.jsx(J, { children: r && e.jsx(N.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, background: "rgba(0, 0, 0, 0.8)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 2e3, padding: "1rem" }, onClick: () => !m && g(!1), children: e.jsxs(N.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, exit: { scale: .9, opacity: 0 }, onClick: i => i.stopPropagation(), style: { background: "rgb\(18 37 74\)", borderRadius: "20px", padding: p ? "1.5rem" : "2.5rem", maxWidth: "700px", width: "100%", border: "1px solid #334155", boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)", maxHeight: "95vh", overflowY: "auto" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [e.jsx("h3", { style: { margin: 0, fontSize: "1.5rem" }, children: "Edit User Profile" }), e.jsx("button", { onClick: () => g(!1), style: { background: "transparent", border: "none", color: "#778eaeff", cursor: "pointer" }, children: e.jsx(L, { size: 24 }) })] }), e.jsxs("form", { onSubmit: t, children: [e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr", gap: p ? "1rem" : "1.5rem" }, children: [e.jsxs("div", { style: { gridColumn: "span 1" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "First Name" }), e.jsx("input", { type: "text", value: s.first_name, onChange: i => j({ ...s, first_name: i.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), e.jsxs("div", { style: { gridColumn: "span 1" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Surname" }), e.jsx("input", { type: "text", value: s.surname, onChange: i => j({ ...s, surname: i.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), e.jsxs("div", { style: { gridColumn: p ? "span 1" : "span 2" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Email Address" }), e.jsx("input", { type: "email", value: s.email, onChange: i => j({ ...s, email: i.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), e.jsxs("div", { style: { gridColumn: "span 1" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Phone Number" }), e.jsx("input", { type: "text", value: s.phone, onChange: i => j({ ...s, phone: i.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), e.jsxs("div", { style: { gridColumn: "span 1" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Status" }), e.jsxs("select", { value: s.status, onChange: i => j({ ...s, status: i.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" }, children: [e.jsx("option", { value: "active", children: "Active" }), e.jsx("option", { value: "inactive", children: "Inactive" })] })] }), e.jsxs("div", { style: { gridColumn: p ? "span 1" : "span 2" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Home Address" }), e.jsx("textarea", { value: s.address, onChange: i => j({ ...s, address: i.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white", minHeight: "80px", resize: "vertical" } })] }), e.jsxs("div", { style: { gridColumn: p ? "span 1" : "span 2" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Identity / NIN" }), e.jsx("input", { type: "text", value: s.nin, onChange: i => j({ ...s, nin: i.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "2.5rem" }, children: [e.jsx("button", { type: "button", onClick: () => g(!1), style: { flex: 1, padding: "14px", borderRadius: "10px", background: "transparent", border: "1px solid #334155", color: "#cbd5e1", cursor: "pointer", fontWeight: "bold" }, children: "Cancel" }), e.jsxs("button", { type: "submit", disabled: m, className: "btn btn-primary", style: { flex: 1, padding: "14px", borderRadius: "10px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", border: "none", color: "white", cursor: "pointer", fontWeight: "bold", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [m ? e.jsx(q, { className: "animate-spin", size: 20 }) : e.jsx(te, { size: 20 }), "Save Changes"] })] })] })] }) }) })] }) }, qe = ({ isMobile: p }) => { const [x, d] = c.useState([]), [l, S] = c.useState({ image_url: "", title: "", description: "" }), { showModal: h } = B(), b = async () => { try { const s = await y.get("/banners"); d(s.data) } catch { console.error("Failed to fetch banners") } }; c.useEffect(() => { b() }, []); const r = async s => { s.preventDefault(); try { await y.post("/banners", l), S({ image_url: "", title: "", description: "" }), b(), h({ type: "success", title: "Success", message: "Banner added successfully" }) } catch { h({ type: "error", title: "Failed", message: "Failed to add banner. Please try again." }) } }, g = async s => { h({ type: "warning", title: "Delete Banner?", message: "Are you sure you want to delete this banner?", showCancel: !0, confirmText: "Yes, Delete", onConfirm: async () => { try { await y.delete(`/banners/${s}`), b(), h({ type: "success", title: "Deleted", message: "Banner deleted successfully" }) } catch { h({ type: "error", title: "Failed", message: "Failed to delete banner" }) } } }) }; return e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr", gap: "2rem" }, children: [e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none" }, children: [e.jsx("h3", { style: { marginBottom: "1.5rem", color: "#2ecc71" }, children: "Add New Banner" }), e.jsxs("form", { onSubmit: r, style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [e.jsx("input", { type: "text", placeholder: "Image URL", value: l.image_url, style: O, onChange: s => S({ ...l, image_url: s.target.value }), required: !0 }), e.jsx("input", { type: "text", placeholder: "Title", value: l.title, style: O, onChange: s => S({ ...l, title: s.target.value }), required: !0 }), e.jsx("textarea", { placeholder: "Description", value: l.description, style: { ...O, minHeight: "100px" }, onChange: s => S({ ...l, description: s.target.value }), required: !0 }), e.jsxs("button", { className: "btn btn-primary", style: { display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [e.jsx(M, { size: 18 }), " Add Banner"] })] })] }), e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none" }, children: [e.jsx("h3", { style: { marginBottom: "1.5rem", color: "#2ecc71" }, children: "Existing Banners" }), e.jsx("div", { style: { display: "grid", gap: "1rem" }, children: x.map(s => e.jsxs("div", { style: { padding: "1rem", background: "#0f172a", borderRadius: "12px", display: "flex", gap: "1rem", alignItems: "center" }, children: [e.jsx("img", { src: s.image_url, style: { width: "80px", height: "60px", objectFit: "cover", borderRadius: "8px" }, alt: "" }), e.jsxs("div", { style: { flex: 1 }, children: [e.jsx("div", { style: { fontWeight: "bold", color: "white" }, children: s.title }), e.jsx("div", { style: { fontSize: "12px", color: "#94a3b8" }, children: s.description })] }), e.jsx("button", { onClick: () => g(s.id), style: { padding: "10px", color: "#ef4444", background: "transparent", border: "none", cursor: "pointer" }, children: e.jsx(A, { size: 20 }) })] }, s.id)) })] })] }) }, O = { padding: "12px", borderRadius: "8px", background: "#0f172a", border: "1px solid #334155", color: "white", width: "100%" }, Me = ({ isMobile: p }) => { const [x, d] = c.useState([]), [l, S] = c.useState(!0), [h, b] = c.useState(!1), [r, g] = c.useState({ title: "", content: "", amount: 2e3, status: "active" }), { showModal: s } = B(); c.useEffect(() => { j() }, []); const j = async () => { try { const t = await y.get("/affidavits/templates"); d(t.data) } catch (t) { console.error("Error fetching templates:", t) } finally { S(!1) } }, [m, a] = c.useState(!1), u = async () => { var t, o; if (!r.title || !r.content) { s({ type: "warning", title: "Missing Fields", message: "Title and Content are required to save a template." }); return } a(!0); try { const f = { ...r, amount: parseFloat(r.amount) || 0 }; r.id ? await y.put(`/affidavits/templates/${r.id}`, f) : await y.post("/affidavits/templates", f), s({ type: "success", title: "Success", message: "Template saved successfully!" }), b(!1), j(), g({ title: "", content: "", amount: 2e3, status: "active" }) } catch (f) { console.error("Error saving template:", f); const k = ((o = (t = f.response) == null ? void 0 : t.data) == null ? void 0 : o.error) || f.message; s({ type: "error", title: "Save Failed", message: `Failed to save template: ${k}. If you included large images, they might exceed server limits.` }) } finally { a(!1) } }, w = async t => { const o = t.status === "active" ? "draft" : "active"; try { await y.put(`/affidavits/templates/${t.id}`, { ...t, status: o }), d(f => f.map(k => k.id === t.id ? { ...k, status: o } : k)) } catch (f) { console.error("Failed to toggle status", f), s({ type: "error", title: "Error", message: "Failed to update status" }) } }, v = async t => { s({ type: "warning", title: "Delete Template?", message: "Are you sure you want to delete this template? This action cannot be undone.", showCancel: !0, confirmText: "Yes, Delete", onConfirm: async () => { try { await y.delete(`/affidavits/templates/${t}`), j(), s({ type: "success", title: "Deleted", message: "Template deleted successfully." }) } catch (o) { console.error("Error deleting template:", o), s({ type: "error", title: "Action Failed", message: "Failed to delete template." }) } } }) }; return h ? e.jsxs("div", { className: "glass-card", style: { background: "white", padding: p ? "1rem" : "2rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2rem" }, children: [e.jsx("h2", { children: r.id ? "Edit Template" : "Create New Template" }), e.jsxs("button", { onClick: () => b(!1), className: "btn btn-secondary", children: [e.jsx(L, { size: 20 }), " Cancel"] })] }), e.jsxs("div", { style: { display: "grid", gap: "1.5rem" }, children: [e.jsxs("div", { style: { display: "grid", gridTemplateColumns: "2fr 1fr", gap: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Template Title" }), e.jsx("input", { type: "text", value: r.title, onChange: t => g({ ...r, title: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" }, placeholder: "e.g. Affidavit of Good Conduct" })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Status" }), e.jsxs("select", { value: r.status || "draft", onChange: t => g({ ...r, status: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" }, children: [e.jsx("option", { value: "draft", children: "Draft (Hidden)" }), e.jsx("option", { value: "active", children: "Active (Public)" }), e.jsx("option", { value: "archived", children: "Archived" })] })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Amount (₦)" }), e.jsx("input", { type: "number", value: r.amount, onChange: t => g({ ...r, amount: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Template Content" }), e.jsx(Se, { value: r.content, onChange: t => g({ ...r, content: t }), placeholder: "Design your template here..." })] }), e.jsx("button", { onClick: u, disabled: m, className: "btn btn-primary", style: { padding: "1rem", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem", opacity: m ? .7 : 1 }, children: m ? e.jsxs(e.Fragment, { children: [e.jsx(q, { size: 20, className: "animate-spin" }), " Saving Template..."] }) : e.jsxs(e.Fragment, { children: [e.jsx(Q, { size: 20 }), " Save Template"] }) })] })] }) : e.jsxs("div", { className: "glass-card", style: { background: "white", padding: p ? "1rem" : "2rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2rem", alignItems: "center" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { margin: 0 }, children: "Affidavit Template Management" }), e.jsx("p", { style: { color: "#778eaeff", margin: "0.5rem 0 0" }, children: "Pre-load and manage official court templates" })] }), e.jsxs("button", { onClick: () => { g({ title: "", content: "", amount: 2e3, status: "active" }), b(!0) }, className: "btn btn-primary", style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx(M, { size: 20 }), " New Template"] })] }), !h && e.jsx(P, { columns: [{ key: "title", label: "Affidavit Title", sortable: !0, render: t => e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [e.jsx("div", { style: { padding: "8px", background: "#f8fafc", borderRadius: "8px", color: "#3b82f6" }, children: e.jsx($, { size: 20 }) }), e.jsx("span", { style: { fontWeight: "600", color: "rgb\(18 37 74\)" }, children: t })] }) }, { key: "status", label: "Status", sortable: !0, render: t => { const o = { active: { color: "#10b981", bg: "#ecfdf5", label: "Active" }, draft: { color: "#f59e0b", bg: "#fffbeb", label: "Draft" }, archived: { color: "#778eaeff", bg: "#f1f5f9", label: "Archived" } }, f = o[t] || o.draft; return e.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", color: f.color, background: f.bg }, children: f.label.toUpperCase() }) } }, { key: "amount", label: "Fee (₦)", sortable: !0, render: t => e.jsxs("span", { style: { fontWeight: "bold", color: "#10b981" }, children: ["₦", Number(t).toLocaleString()] }) }], data: x, loading: l, searchPlaceholder: "Search templates by title...", actions: t => e.jsxs("div", { style: { display: "flex", gap: "0.5rem", justifyContent: "flex-end" }, children: [e.jsx("button", { onClick: () => w(t), style: { padding: "8px", background: t.status === "active" ? "#fffbeb" : "#ecfdf5", color: t.status === "active" ? "#f59e0b" : "#10b981", border: "none", borderRadius: "8px", cursor: "pointer" }, title: t.status === "active" ? "Unpublish (Draft)" : "Publish (Active)", children: t.status === "active" ? e.jsx(re, { size: 18 }) : e.jsx(ae, { size: 18 }) }), e.jsx("button", { onClick: () => { g(t), b(!0) }, style: { padding: "8px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "none", borderRadius: "8px", cursor: "pointer" }, title: "Edit Template", children: e.jsx(H, { size: 18 }) }), e.jsx("button", { onClick: () => v(t.id), style: { padding: "8px", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", border: "none", borderRadius: "8px", cursor: "pointer" }, title: "Delete Template", children: e.jsx(A, { size: 18 }) })] }) })] }) }, He = ({ isMobile: p }) => {
    const [x, d] = c.useState([]), [l, S] = c.useState(!0), [h, b] = c.useState(!1), [r, g] = c.useState({ document_name: "", document_fee: 0, publish_status: "active", is_required: !1, type: "upload" }), { showModal: s } = B(); c.useEffect(() => { j() }, []); const j = async () => { try { const t = await y.get("/admin/probate-documents"); console.log(t.data), d(t.data) } catch (t) { console.error("Error fetching documents:", t) } finally { S(!1) } }, [m, a] = c.useState(!1), u = async () => { var t, o; if (!r.document_name) { s({ type: "warning", title: "Missing Name", message: "Document Name is required." }); return } a(!0); try { const f = { ...r, is_required: r.is_required ? 1 : 0 }; r.id ? await y.put(`/admin/probate-documents/${r.id}`, f) : await y.post("/admin/probate-documents", f), s({ type: "success", title: "Success", message: "Config saved successfully!" }), b(!1), j(), v() } catch (f) { console.error("Error saving config:", f), s({ type: "error", title: "Save Failed", message: ((o = (t = f.response) == null ? void 0 : t.data) == null ? void 0 : o.error) || "Failed to save." }) } finally { a(!1) } }, w = async t => { s({ type: "warning", title: "Delete Config?", message: "Are you sure? This will remove this document type from future applications.", showCancel: !0, confirmText: "Delete", onConfirm: async () => { try { await y.delete(`/admin/probate-documents/${t}`), j() } catch { s({ type: "error", title: "Failed", message: "Could not delete." }) } } }) }, v = () => { g({ document_name: "", document_fee: 0, publish_status: "active", is_required: !1, type: "upload", description: "" }) }; return h ? e.jsxs("div", { className: "glass-card", style: { background: "white", padding: p ? "1rem" : "2rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2rem" }, children: [e.jsx("h2", { children: r.id ? "Edit Configuration" : "Add New Configuration" }), e.jsxs("button", { onClick: () => b(!1), className: "btn btn-secondary", children: [e.jsx(L, { size: 20 }), " Cancel"] })] }), e.jsxs("div", { style: { display: "grid", gap: "1.5rem" }, children: [e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "2fr 1fr", gap: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Name *" }), e.jsx("input", { type: "text", value: r.document_name, onChange: t => g({ ...r, document_name: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" }, placeholder: "e.g. Death Certificate" })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Type" }), e.jsxs("select", { value: r.type || "upload", onChange: t => g({ ...r, type: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" }, children: [e.jsx("option", { value: "upload", children: "Document Upload" }), e.jsx("option", { value: "item", children: "Payment Item (Service)" })] })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr", gap: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Fee Amount (₦)" }), e.jsx("input", { type: "number", value: r.document_fee, onChange: t => g({ ...r, document_fee: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Publish Status" }), e.jsxs("select", { value: r.publish_status, onChange: t => g({ ...r, publish_status: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" }, children: [e.jsx("option", { value: "active", children: "Active" }), e.jsx("option", { value: "inactive", children: "Inactive" })] })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Description / Context" }), e.jsx("textarea", { value: r.description || "", onChange: t => g({ ...r, description: t.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0", minHeight: "80px" }, placeholder: "Optional explanation visible to user..." })] }), e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx("input", { type: "checkbox", id: "reqCheck", checked: r.is_required, onChange: t => g({ ...r, is_required: t.target.checked }), style: { width: "20px", height: "20px" } }), e.jsx("label", { htmlFor: "reqCheck", style: { fontWeight: "bold", cursor: "pointer" }, children: "Is Required?" })] }), e.jsxs("button", { onClick: u, disabled: m, className: "btn btn-primary", style: { padding: "1rem", display: "flex", justifyContent: "center", alignItems: "center", gap: "0.5rem", opacity: m ? .7 : 1 }, children: [m ? e.jsx(q, { className: "animate-spin" }) : e.jsx(Q, {}), " Save Configuration"] })] })] }) : e.jsxs("div", {
        className: "glass-card", style: { background: "white", padding: p ? "1rem" : "2rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2rem", alignItems: "center" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { margin: 0 }, children: "Probate Configuration" }), e.jsx("p", { style: { color: "#778eaeff", margin: "0.5rem 0 0" }, children: "Manage required documents and fees for Probate applications." })] }), e.jsxs("button", { onClick: () => { v(), b(!0) }, className: "btn btn-primary", style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx(M, { size: 20 }), " Add Config"] })] }), e.jsx(P, { columns: [{ key: "document_name", label: "Name", sortable: !0 }, { key: "type", label: "Type", render: t => t === "item" ? e.jsx("span", { style: { color: "#8b5cf6", fontWeight: "bold" }, children: "SERVICE / FEE" }) : e.jsx("span", { style: { color: "#3b82f6", fontWeight: "bold" }, children: "DOCUMENT" }) }, { key: "is_required", label: "Required", render: t => t ? e.jsx("span", { style: { color: "#ef4444", fontWeight: "bold" }, children: "YES" }) : "No" }, { key: "document_fee", label: "Fee", render: t => `₦${Number(t).toLocaleString()}` }, { key: "publish_status", label: "Status", render: t => e.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", color: t === "active" ? "#10b981" : "#778eaeff", background: t === "active" ? "#ecfdf5" : "#f1f5f9" }, children: t.toUpperCase() }) }], data: x, loading: l, searchPlaceholder: "Search config...", actions: t => e.jsxs("div", { style: { display: "flex", gap: "0.5rem", justifyContent: "flex-end" }, children: [e.jsx("button", { onClick: () => { g({ ...t, is_required: !!t.is_required }), b(!0) }, className: "action-btn-edit", title: "Edit", children: e.jsx(H, { size: 18 }) }), e.jsx("button", { onClick: () => w(t.id), className: "action-btn-delete", title: "Delete", children: e.jsx(A, { size: 18 }) })] }) }), e.jsx("style", {
            children: `
                .action-btn-edit { padding: 8px; background: rgba(59, 130, 246, 0.1); color: #3b82f6; border: none; border-radius: 8px; cursor: pointer; }
                .action-btn-delete { padding: 8px; background: rgba(239, 68, 68, 0.1); color: #ef4444; border: none; border-radius: 8px; cursor: pointer; }
            `})]
    })
}, Oe = ({ isMobile: p }) => { const [x, d] = c.useState(null), [l, S] = c.useState(!0), [h, b] = c.useState(null), r = async () => { var s, j, m; try { S(!0), b(null); try { const u = await y.get("/public-test/stats"); console.log("Connectivity check:", u.data) } catch (u) { console.warn("Connectivity check failed:", u.message) } console.log("Fetching admin stats from /admin/system/stats..."); const a = await y.get("/admin/system/stats"); d(a.data) } catch (a) { console.error("Failed to fetch admin stats:", a); const u = (s = a.response) == null ? void 0 : s.status; let w = ((m = (j = a.response) == null ? void 0 : j.data) == null ? void 0 : m.error) || a.message; try { const v = await y.get("../debug/routes"); console.log("Registered Server Routes:", v.data), v.data.includes("GET /api/admin/system/stats") || console.error("Missing expected route: /api/admin/system/stats. Server might need a restart.") } catch (v) { console.warn("Could not fetch debug routes:", v.message) } b(u ? `${u}: ${w}` : `Sync Error: ${w}`) } finally { S(!1) } }; if (c.useEffect(() => { r() }, []), l) return e.jsxs("div", { style: { display: "flex", flexDirection: "column", alignItems: "center", padding: "5rem" }, children: [e.jsx("div", { className: "animate-spin", style: { width: "40px", height: "40px", border: "4px solid #3b82f6", borderTopColor: "transparent", borderRadius: "50%", marginBottom: "1rem" } }), e.jsx("p", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Fetching System Metrics..." })] }); if (h) return e.jsxs("div", { style: { padding: "3rem", textAlign: "center", background: "#fff1f2", borderRadius: "24px", border: "1px solid #fecaca" }, children: [e.jsx(V, { size: 48, color: "#ef4444", style: { marginBottom: "1rem" } }), e.jsx("h3", { style: { color: "#991b1b", margin: "0 0 0.5rem" }, children: "Data Sync Failed" }), e.jsx("p", { style: { color: "#b91c1c", margin: "0 0 1.5rem" }, children: h }), e.jsx("button", { onClick: r, style: { padding: "10px 24px", background: "#ef4444", color: "white", border: "none", borderRadius: "12px", fontWeight: "bold", cursor: "pointer" }, children: "Retry Connection" })] }); const g = [{ title: "Public Users", value: (x == null ? void 0 : x.total_users) ?? 0, icon: e.jsx(X, { color: "#3b82f6" }), color: "#3b82f6" }, { title: "Staff Members", value: (x == null ? void 0 : x.total_staff) ?? 0, icon: e.jsx(W, { color: "#10b981" }), color: "#10b981" }, { title: "Legal Templates", value: (x == null ? void 0 : x.total_templates) ?? 0, icon: e.jsx($, { color: "#8b5cf6" }), color: "#8b5cf6" }, { title: "Active Banners", value: (x == null ? void 0 : x.total_banners) ?? 0, icon: e.jsx(le, { color: "#f59e0b" }), color: "#f59e0b" }]; return e.jsxs("div", { style: { color: "rgb\(18 37 74\)" }, children: [e.jsxs("div", { style: { marginBottom: "2.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { fontSize: "2rem", margin: "0 0 0.5rem 0", fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: "System Overview" }), e.jsx("p", { style: { color: "#778eaeff" }, children: "Real-time performance metrics and infrastructure status." })] }), e.jsx("button", { onClick: r, style: { padding: "10px", borderRadius: "12px", background: "white", border: "1px solid #e2e8f0", color: "#778eaeff", cursor: "pointer" }, title: "Refresh Data", children: e.jsx(Z, { size: 18 }) })] }), e.jsx("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "repeat(4, 1fr)", gap: "1.5rem", marginBottom: "3rem" }, children: g.map((s, j) => e.jsxs(N.div, { whileHover: { y: -5 }, style: { background: "white", padding: "1.75rem", borderRadius: "24px", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)", display: "flex", flexDirection: "column", gap: "1.25rem" }, children: [e.jsx("div", { style: { padding: "12px", borderRadius: "16px", background: `${s.color}15`, width: "fit-content" }, children: s.icon }), e.jsxs("div", { children: [e.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "13px", fontWeight: "bold", textTransform: "uppercase", letterSpacing: "0.5px" }, children: s.title }), e.jsx("h3", { style: { margin: "0.4rem 0 0", fontSize: "1.75rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: s.value })] })] }, j)) }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr", gap: "2rem" }, children: [e.jsxs("div", { style: { background: "white", padding: "2.5rem", borderRadius: "32px", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [e.jsxs("h3", { style: { margin: "0 0 2rem 0", display: "flex", alignItems: "center", gap: "1rem", fontSize: "1.25rem", color: "rgb\(18 37 74\)" }, children: [e.jsx(V, { size: 24, color: "#f59e0b" }), " Operations Activity"] }), e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2rem" }, children: [e.jsxs("div", { children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "10px" }, children: [e.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Recent Activity (24h)" }), e.jsxs("span", { style: { fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: [(x == null ? void 0 : x.recent_activities) || 0, " Events"] })] }), e.jsx("div", { style: { height: "10px", background: "#f1f5f9", borderRadius: "5px" }, children: e.jsx(N.div, { initial: { width: 0 }, animate: { width: x != null && x.total_activities ? `${Math.min(x.recent_activities / x.total_activities * 100, 100)}%` : "0%" }, style: { height: "100%", background: "#f59e0b", borderRadius: "5px" } }) })] }), e.jsxs("div", { style: { display: "flex", gap: "1.5rem" }, children: [e.jsxs("div", { style: { flex: 1, padding: "1.25rem", background: "#f8fafc", borderRadius: "20px", textAlign: "center", border: "1px solid #f1f5f9" }, children: [e.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "11px", fontWeight: "bold", textTransform: "uppercase" }, children: "Lifetime Logs" }), e.jsx("p", { style: { margin: "5px 0 0", fontWeight: "800", fontSize: "1.4rem", color: "rgb\(18 37 74\)" }, children: (x == null ? void 0 : x.total_activities) || 0 })] }), e.jsxs("div", { style: { flex: 1, padding: "1.25rem", background: "#f8fafc", borderRadius: "20px", textAlign: "center", border: "1px solid #f1f5f9" }, children: [e.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "11px", fontWeight: "bold", textTransform: "uppercase" }, children: "Last Heartbeat" }), e.jsx("p", { style: { margin: "5px 0 0", fontWeight: "800", fontSize: "1.2rem", color: "#10b981" }, children: x != null && x.last_activity ? new Date(x.last_activity).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }) : "None" })] })] })] })] }), e.jsxs("div", { style: { background: "linear-gradient(135deg, rgb\(18 37 74\) 0%, #0f172a 100%)", padding: "2.5rem", borderRadius: "32px", display: "flex", flexDirection: "column", justifyContent: "center", position: "relative", overflow: "hidden" }, children: [e.jsx(W, { size: 120, style: { position: "absolute", right: "-20px", bottom: "-20px", opacity: .05, color: "white" } }), e.jsx("h3", { style: { fontSize: "1.5rem", margin: "0 0 1rem", position: "relative", color: "#4ade80", fontWeight: "bold" }, children: "Core Health" }), e.jsx("p", { style: { color: "rgba(255,255,255,0.7)", lineHeight: "1.6", fontSize: "0.95rem", marginBottom: "2rem", position: "relative" }, children: "Platform services are operating at peak efficiency. Data integrity checks and security encryption layers are all fully active." }), e.jsxs("div", { style: { display: "flex", gap: "1rem", position: "relative" }, children: [e.jsxs("div", { style: { padding: "0.75rem", background: "rgba(74, 222, 128, 0.1)", borderRadius: "12px", flex: 1, textAlign: "center", border: "1px solid rgba(74, 222, 128, 0.2)" }, children: [e.jsx("span", { style: { display: "block", fontSize: "0.8rem", opacity: .8, color: "#4ade80", fontWeight: "bold" }, children: "SYSTEM" }), e.jsx("span", { style: { fontWeight: "bold", color: "#4ade80" }, children: "ACTIVE" })] }), e.jsxs("div", { style: { padding: "0.75rem", background: "rgba(255,255,255,0.05)", borderRadius: "12px", flex: 1, textAlign: "center" }, children: [e.jsx("span", { style: { display: "block", fontSize: "0.8rem", opacity: .8, color: "#94a3b8" }, children: "DATABASE" }), e.jsx("span", { style: { fontWeight: "bold", color: "white" }, children: "ONLINE" })] })] })] })] })] }) }, Ge = ({ isMobile: p }) => { const [x, d] = c.useState([]), [l, S] = c.useState(!0), h = async () => { try { S(!0); const r = await y.get("/staff/admin/logs"); d(r.data) } catch (r) { console.error("Failed to fetch logs:", r) } finally { S(!1) } }; c.useEffect(() => { h() }, []); const b = [{ key: "timestamp", label: "Time", render: r => e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px", color: "#778eaeff" }, children: [e.jsx(ge, { size: 14 }), ie(r)] }) }, { key: "user_name", label: "User", render: (r, g) => { var s; return e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px" }, children: [e.jsx(ne, { size: 14, color: g.user_type === "staff" ? "#8b5cf6" : "#3b82f6" }), e.jsx("span", { style: { fontWeight: "500" }, children: r }), e.jsx("span", { style: { fontSize: "10px", padding: "2px 6px", borderRadius: "10px", background: g.user_type === "staff" ? "#f3e8ff" : "#dbeafe", color: g.user_type === "staff" ? "#7c3aed" : "#2563eb" }, children: (s = g.user_type) == null ? void 0 : s.toUpperCase() })] }) } }, { key: "action", label: "Action", render: r => e.jsx("code", { style: { background: "#f1f5f9", padding: "4px 8px", borderRadius: "4px", fontSize: "12px", color: "rgb\(18 37 74\)" }, children: r }) }, { key: "ip_address", label: "IP Address", render: r => e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "6px", color: "#94a3b8", fontSize: "12px" }, children: [e.jsx(Ee, { size: 12 }), " ", r] }), hiddenMobile: !0 }]; return e.jsxs(N.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, className: "glass-card", style: { background: "white", padding: p ? "1rem" : "1.5rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: [e.jsxs("h3", { style: { margin: 0, display: "flex", alignItems: "center", gap: "10px" }, children: [e.jsx(V, { size: 22, color: "#f59e0b" }), " System Audit Logs"] }), e.jsxs("button", { onClick: h, style: { padding: "8px 16px", borderRadius: "8px", border: "1px solid #e2e8f0", background: "white", cursor: "pointer", display: "flex", alignItems: "center", gap: "8px", fontSize: "13px" }, children: [e.jsx(Z, { size: 14, className: l ? "animate-spin" : "" }), " Refresh"] })] }), e.jsx(P, { columns: b, data: x, loading: l, searchPlaceholder: "Search audit trails...", isMobile: p })] }) }, Ye = ({ isMobile: p }) => { const { showModal: x } = B(), [d, l] = c.useState({ maintenance_mode: "0", allow_new_registrations: "1", notification_email: "", backup_frequency: "daily", captcha_enabled: "0", captcha_site_key: "", captcha_secret_key: "", paystack_enabled: "0", paystack_public_key: "", paystack_secret_key: "", remita_enabled: "0", remita_merchant_id: "", remita_service_type_id: "", remita_api_key: "", court_stamp_path: "", oadr_stamp: "", probate_stamp: "" }), [S, h] = c.useState(!0), [b, r] = c.useState(!1); c.useEffect(() => { (async () => { try { const u = await y.get("/settings"); l(w => ({ ...w, ...u.data })) } catch { console.error("Failed to fetch settings") } finally { h(!1) } })() }, []); const g = async (a, u) => { const w = a.target.files[0]; if (!w) return; const v = new FormData; v.append("stamp", w), v.append("type", u); try { const t = await y.post("/settings/stamp", v, { headers: { "Content-Type": "multipart/form-data" } }); l(o => ({ ...o, [t.data.key]: t.data.path })), x({ type: "success", title: "Stamp Uploaded", message: `The ${u.toUpperCase()} stamp has been updated.` }) } catch (t) { console.error("Stamp Upload Error:", t), x({ type: "error", title: "Upload Failed", message: "Failed to upload stamp image." }) } }, s = async a => { try { await y.delete(`/settings/stamp/${a}`); let u = "court_stamp_path"; a === "oadr" ? u = "oadr_stamp" : a === "probate" && (u = "probate_stamp"), l(w => ({ ...w, [u]: "" })), x({ type: "success", title: "Stamp Removed", message: "The stamp has been removed from the system." }) } catch (u) { console.error("Stamp Delete Error:", u), x({ type: "error", title: "Delete Failed", message: "Failed to remove stamp." }) } }, j = async a => { var u, w; a.preventDefault(), r(!0); try { await y.put("/settings/bulk", { settings: d }), x({ type: "success", title: "Settings Saved", message: "System configuration has been updated successfully." }) } catch (v) { console.error("Error saving settings:", v), x({ type: "error", title: "Save Failed", message: ((w = (u = v.response) == null ? void 0 : u.data) == null ? void 0 : w.message) || "Failed to update system settings." }) } finally { r(!1) } }; if (S) return e.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading Configuration..." }); const m = ({ icon: a, title: u, children: w }) => e.jsxs(N.div, { initial: { opacity: 0, y: 20 }, whileInView: { opacity: 1, y: 0 }, viewport: { once: !0 }, className: "glass-card", style: { background: "white", marginBottom: "2rem", overflow: "hidden" }, children: [e.jsxs("div", { style: { padding: "1.2rem 1.5rem", borderBottom: "1px solid #f1f5f9", display: "flex", alignItems: "center", gap: "10px", background: "#f8fafc" }, children: [a, e.jsx("h3", { style: { margin: 0, fontSize: "1.1rem", color: "rgb\(18 37 74\)" }, children: u })] }), e.jsx("div", { style: { padding: "1.5rem" }, children: w })] }); return e.jsxs("form", { onSubmit: j, style: { maxWidth: "1000px", margin: "0 auto", paddingBottom: "5rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [e.jsxs("h2", { style: { margin: 0, color: "rgb\(18 37 74\)", display: "flex", alignItems: "center", gap: "12px" }, children: [e.jsx(se, { color: "#3b82f6" }), " System Configuration"] }), e.jsxs("button", { type: "submit", disabled: b, style: { padding: "12px 24px", borderRadius: "12px", background: "#3b82f6", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", gap: "8px", boxShadow: "0 4px 6px -1px rgba(59, 130, 246, 0.4)" }, children: [b ? e.jsx(Z, { size: 18, className: "animate-spin" }) : e.jsx(Q, { size: 18 }), "Save All Changes"] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr", gap: "1.5rem" }, children: [e.jsx(m, { icon: e.jsx(W, { size: 20, color: "#778eaeff" }), title: "Security & General", children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [e.jsxs("div", { style: G, children: [e.jsxs("div", { style: { flex: 1 }, children: [e.jsx("h4", { style: D, children: "Maintenance Mode" }), e.jsx("p", { style: Y, children: "Globally disable access for public users." })] }), e.jsxs("label", { className: "switch", children: [e.jsx("input", { type: "checkbox", checked: d.maintenance_mode === "1", onChange: a => l({ ...d, maintenance_mode: a.target.checked ? "1" : "0" }) }), e.jsx("span", { className: "slider round" })] })] }), e.jsxs("div", { style: G, children: [e.jsxs("div", { style: { flex: 1 }, children: [e.jsx("h4", { style: D, children: "New User Registration" }), e.jsx("p", { style: Y, children: "Allow public accounts to be created." })] }), e.jsxs("label", { className: "switch", children: [e.jsx("input", { type: "checkbox", checked: d.allow_new_registrations === "1", onChange: a => l({ ...d, allow_new_registrations: a.target.checked ? "1" : "0" }) }), e.jsx("span", { className: "slider round" })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsxs("label", { style: D, children: [e.jsx(_e, { size: 16 }), " Notification Email"] }), e.jsx("input", { type: "email", value: d.notification_email, onChange: a => l({ ...d, notification_email: a.target.value }), style: E, placeholder: "system@court.gov.ng" })] }), e.jsxs("div", { children: [e.jsxs("label", { style: D, children: [e.jsx(ee, { size: 16 }), " Backup Frequency"] }), e.jsxs("select", { value: d.backup_frequency, onChange: a => l({ ...d, backup_frequency: a.target.value }), style: E, children: [e.jsx("option", { value: "hourly", children: "Every Hour" }), e.jsx("option", { value: "daily", children: "Daily (3 AM)" }), e.jsx("option", { value: "weekly", children: "Weekly" })] })] })] })] }) }), e.jsx(m, { icon: e.jsx(ze, { size: 20, color: "#ef4444" }), title: "Google reCAPTCHA", children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [e.jsxs("div", { style: G, children: [e.jsxs("div", { style: { flex: 1 }, children: [e.jsx("h4", { style: D, children: "Enable reCAPTCHA" }), e.jsx("p", { style: Y, children: "Protect public login from automated attacks." })] }), e.jsxs("label", { className: "switch", children: [e.jsx("input", { type: "checkbox", checked: d.captcha_enabled === "1", onChange: a => l({ ...d, captcha_enabled: a.target.checked ? "1" : "0" }) }), e.jsx("span", { className: "slider round" })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: D, children: "Site Key" }), e.jsx("input", { type: "text", value: d.captcha_site_key, onChange: a => l({ ...d, captcha_site_key: a.target.value }), style: E, placeholder: "6L..." })] }), e.jsxs("div", { children: [e.jsx("label", { style: D, children: "Secret Key" }), e.jsx("input", { type: "password", value: d.captcha_secret_key, onChange: a => l({ ...d, captcha_secret_key: a.target.value }), style: E, placeholder: "Verification Secret" })] })] })] }) }), e.jsx(m, { icon: e.jsx(K, { size: 20, color: "#10b981" }), title: "Payment Gateways", children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2rem" }, children: [e.jsxs("div", { style: { padding: "1.5rem", border: "1px solid #e2e8f0", borderRadius: "12px", background: "#f8fafc" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1rem" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px" }, children: [e.jsx("img", { src: "https://paystack.com/favicon.png", alt: "Paystack", style: { width: "20px" } }), e.jsx("h4", { style: { margin: 0, fontSize: "16px" }, children: "Paystack Integration" })] }), e.jsxs("label", { className: "switch", children: [e.jsx("input", { type: "checkbox", checked: d.paystack_enabled === "1", onChange: a => l({ ...d, paystack_enabled: a.target.checked ? "1" : "0" }) }), e.jsx("span", { className: "slider round" })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr", gap: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: D, children: "Public Key" }), e.jsx("input", { type: "text", value: d.paystack_public_key, onChange: a => l({ ...d, paystack_public_key: a.target.value }), style: E, placeholder: "pk_test_..." })] }), e.jsxs("div", { children: [e.jsx("label", { style: D, children: "Secret Key" }), e.jsx("input", { type: "password", value: d.paystack_secret_key, onChange: a => l({ ...d, paystack_secret_key: a.target.value }), style: E, placeholder: "sk_test_..." })] })] })] }), e.jsxs("div", { style: { padding: "1.5rem", border: "1px solid #e2e8f0", borderRadius: "12px", background: "#f8fafc" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1rem" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px" }, children: [e.jsx(K, { size: 18, color: "#e11d48" }), e.jsx("h4", { style: { margin: 0, fontSize: "16px" }, children: "Remita (RRR) Integration" })] }), e.jsxs("label", { className: "switch", children: [e.jsx("input", { type: "checkbox", checked: d.remita_enabled === "1", onChange: a => l({ ...d, remita_enabled: a.target.checked ? "1" : "0" }) }), e.jsx("span", { className: "slider round" })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr 1fr", gap: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: D, children: "Merchant ID" }), e.jsx("input", { type: "text", value: d.remita_merchant_id, onChange: a => l({ ...d, remita_merchant_id: a.target.value }), style: E })] }), e.jsxs("div", { children: [e.jsx("label", { style: D, children: "Service Type ID" }), e.jsx("input", { type: "text", value: d.remita_service_type_id, onChange: a => l({ ...d, remita_service_type_id: a.target.value }), style: E })] }), e.jsxs("div", { children: [e.jsx("label", { style: D, children: "API Key / Hash" }), e.jsx("input", { type: "password", value: d.remita_api_key, onChange: a => l({ ...d, remita_api_key: a.target.value }), style: E })] })] })] })] }) }), e.jsx(m, { icon: e.jsxs("div", { style: { display: "flex", gap: "5px" }, children: [e.jsx(W, { size: 20, color: "#6366f1" }), e.jsx(ee, { size: 20, color: "#8b5cf6" })] }), title: "Official System Stamps", children: e.jsxs("div", { style: { display: "grid", gridTemplateColumns: p ? "1fr" : "1fr 1fr 1fr", gap: "1.5rem" }, children: [e.jsxs("div", { style: { padding: "1.5rem", border: "1px solid #e2e8f0", borderRadius: "12px", background: "#f8fafc", display: "flex", flexDirection: "column", alignItems: "center" }, children: [e.jsx("h4", { style: { margin: "0 0 1rem", fontSize: "14px", color: "rgb\(18 37 74\)" }, children: "Court General Stamp" }), e.jsx("div", { style: { width: "120px", height: "120px", borderRadius: "12px", border: "2px dashed #cbd5e1", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden", marginBottom: "1rem", background: "white" }, children: d.court_stamp_path ? e.jsx("img", { src: d.court_stamp_path, alt: "Court Stamp", style: { width: "100%", height: "100%", objectFit: "contain" } }) : e.jsx("span", { style: { fontSize: "11px", color: "#94a3b8" }, children: "No Stamp" }) }), e.jsxs("div", { style: { display: "flex", gap: "0.5rem", width: "100%" }, children: [e.jsxs("label", { style: { flex: 1, cursor: "pointer", background: "#3b82f6", color: "white", padding: "8px", borderRadius: "8px", textAlign: "center", fontSize: "12px", fontWeight: "bold" }, children: ["Upload", e.jsx("input", { type: "file", accept: "image/*", hidden: !0, onChange: a => g(a, "court") })] }), d.court_stamp_path && e.jsx("button", { type: "button", onClick: () => s("court"), style: { background: "#ef4444", color: "white", border: "none", borderRadius: "8px", padding: "8px", cursor: "pointer" }, children: e.jsx("div", { style: { width: "16px" }, children: e.jsx(A, { size: 16 }) }) })] })] }), e.jsxs("div", { style: { padding: "1.5rem", border: "1px solid #e2e8f0", borderRadius: "12px", background: "#f8fafc", display: "flex", flexDirection: "column", alignItems: "center" }, children: [e.jsx("h4", { style: { margin: "0 0 1rem", fontSize: "14px", color: "rgb\(18 37 74\)" }, children: "OADR / Oath Stamp" }), e.jsx("div", { style: { width: "120px", height: "120px", borderRadius: "12px", border: "2px dashed #cbd5e1", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden", marginBottom: "1rem", background: "white" }, children: d.oadr_stamp ? e.jsx("img", { src: d.oadr_stamp, alt: "OADR Stamp", style: { width: "100%", height: "100%", objectFit: "contain" } }) : e.jsx("span", { style: { fontSize: "11px", color: "#94a3b8" }, children: "No Stamp" }) }), e.jsxs("div", { style: { display: "flex", gap: "0.5rem", width: "100%" }, children: [e.jsxs("label", { style: { flex: 1, cursor: "pointer", background: "#6366f1", color: "white", padding: "8px", borderRadius: "8px", textAlign: "center", fontSize: "12px", fontWeight: "bold" }, children: ["Upload", e.jsx("input", { type: "file", accept: "image/*", hidden: !0, onChange: a => g(a, "oadr") })] }), d.oadr_stamp && e.jsx("button", { type: "button", onClick: () => s("oadr"), style: { background: "#ef4444", color: "white", border: "none", borderRadius: "8px", padding: "8px", cursor: "pointer" }, children: e.jsx("div", { style: { width: "16px" }, children: e.jsx(A, { size: 16 }) }) })] })] }), e.jsxs("div", { style: { padding: "1.5rem", border: "1px solid #e2e8f0", borderRadius: "12px", background: "#f8fafc", display: "flex", flexDirection: "column", alignItems: "center" }, children: [e.jsx("h4", { style: { margin: "0 0 1rem", fontSize: "14px", color: "rgb\(18 37 74\)" }, children: "Probate / Registry Stamp" }), e.jsx("div", { style: { width: "120px", height: "120px", borderRadius: "12px", border: "2px dashed #cbd5e1", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden", marginBottom: "1rem", background: "white" }, children: d.probate_stamp ? e.jsx("img", { src: d.probate_stamp, alt: "Probate Stamp", style: { width: "100%", height: "100%", objectFit: "contain" } }) : e.jsx("span", { style: { fontSize: "11px", color: "#94a3b8" }, children: "No Stamp" }) }), e.jsxs("div", { style: { display: "flex", gap: "0.5rem", width: "100%" }, children: [e.jsxs("label", { style: { flex: 1, cursor: "pointer", background: "#8b5cf6", color: "white", padding: "8px", borderRadius: "8px", textAlign: "center", fontSize: "12px", fontWeight: "bold" }, children: ["Upload", e.jsx("input", { type: "file", accept: "image/*", hidden: !0, onChange: a => g(a, "probate") })] }), d.probate_stamp && e.jsx("button", { type: "button", onClick: () => s("probate"), style: { background: "#ef4444", color: "white", border: "none", borderRadius: "8px", padding: "8px", cursor: "pointer" }, children: e.jsx("div", { style: { width: "16px" }, children: e.jsx(A, { size: 16 }) }) })] })] })] }) })] })] }) }, G = { display: "flex", justifyContent: "space-between", alignItems: "center", padding: "1.25rem", background: "#f8fafc", borderRadius: "16px", gap: "1rem" }, D = { margin: "0 0 5px 0", fontSize: "14px", fontWeight: "700", color: "rgb\(18 37 74\)", display: "flex", alignItems: "center", gap: "8px" }, Y = { margin: 0, fontSize: "12.5px", color: "#778eaeff" }, E = { width: "100%", padding: "10px 12px", borderRadius: "8px", border: "1px solid #e2e8f0", marginTop: "5px", fontSize: "13.5px", background: "white" }, gt = ({ staff: p }) => { var v; const [x, d] = c.useState(p), [l, S] = c.useState("dashboard"), [h, b] = c.useState(window.innerWidth > 1024), [r, g] = c.useState(window.innerWidth <= 1024); c.useEffect(() => { const t = () => { const o = window.innerWidth <= 1024; g(o), b(!o) }; return window.addEventListener("resize", t), () => window.removeEventListener("resize", t) }, []), c.useEffect(() => { const t = async () => { try { const o = await y.get("/staff/profile"); d(o.data), localStorage.setItem("staff", JSON.stringify(o.data)) } catch (o) { console.error("Failed to refresh staff info:", o) } }; p != null && p.id && t() }, [p == null ? void 0 : p.id]); const s = () => { localStorage.removeItem("staffToken"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, j = [{ icon: e.jsx(be, { size: 20 }), label: "Dashboard", id: "dashboard" }, { icon: e.jsx(W, { size: 20 }), label: "Staff Management", id: "staff" }, { icon: e.jsx(Ue, { size: 20 }), label: "Role Management", id: "roles" }, { icon: e.jsx(X, { size: 20 }), label: "User Management", id: "users" }, { icon: e.jsx($, { size: 20 }), label: "Template Management", id: "templates" }, { icon: e.jsx($, { size: 20 }), label: "Probate Documents", id: "probate_docs" }, { icon: e.jsx(se, { size: 20 }), label: "System Settings", id: "settings" }, { icon: e.jsx(Re, { size: 20 }), label: "Activity Logs", id: "logs" }, { icon: e.jsx(K, { size: 20 }), label: "Payment Gateway", id: "payments" }, { icon: e.jsx(le, { size: 20 }), label: "Banner Management", id: "banners" }, { icon: e.jsx(je, { size: 20 }), label: "Support Tickets", id: "support" }, { icon: e.jsx(ne, { size: 20 }), label: "My Profile", id: "profile" }], [m, a] = c.useState([]), u = async () => { try { const t = await y.get("/notifications/staff"); a(t.data) } catch (t) { console.error("Failed to fetch notifications:", t) } }; c.useEffect(() => { u(); const t = setInterval(u, 6e4); return () => clearInterval(t) }, []); const w = async t => { try { await y.put(`/notifications/staff/${t}/read`), a(o => o.map(f => f.id === t ? { ...f, is_read: 1 } : f)) } catch (o) { console.error("Failed to mark notification as read:", o) } }; return x ? e.jsxs("div", { style: { display: "flex", height: "100vh", overflow: "hidden", background: "#f8fafc", color: "#3d2b1f" }, children: [r && h && e.jsx("div", { onClick: () => b(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), e.jsxs("aside", { style: { width: h ? "260px" : r ? "0" : "80px", background: "#3d2b1f", padding: "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: r ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: r && h ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [e.jsxs("div", { style: { padding: "2rem", marginBottom: "1rem", display: "flex", alignItems: "center", justifyContent: h ? "space-between" : "center", gap: "1rem" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [e.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%", flexShrink: 0 } }), h && e.jsxs("div", { style: { whiteSpace: "nowrap", animation: "fadeIn 0.2s" }, children: [e.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS Admin" }), e.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), r && h && e.jsx("button", { onClick: () => b(!1), style: { background: "transparent", border: "none", color: "white", cursor: "pointer" }, children: e.jsx(L, { size: 24 }) })] }), e.jsx("nav", { style: { flex: 1, padding: "0 1rem", overflowY: "auto" }, children: j.map(t => e.jsxs("div", { onClick: () => { S(t.id), r && b(!1) }, title: h ? "" : t.label, style: { display: "flex", alignItems: "center", justifyContent: h ? "flex-start" : "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: l === t.id ? "#5d4037" : "transparent", color: l === t.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [t.icon, h && e.jsx("span", { style: { animation: "fadeIn 0.2s" }, children: t.label })] }, t.id)) }), e.jsx("div", { style: { padding: "1rem" }, children: e.jsxs("button", { onClick: s, title: h ? "" : "Logout", style: { width: "100%", display: "flex", alignItems: "center", justifyContent: h ? "flex-start" : "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", borderRadius: "12px", transition: "background 0.2s" }, onMouseOver: t => t.currentTarget.style.background = "rgba(239, 68, 68, 0.1)", onMouseOut: t => t.currentTarget.style.background = "transparent", children: [e.jsx(he, { size: 20 }), h && e.jsx("span", { style: { animation: "fadeIn 0.2s" }, children: "Logout" })] }) })] }), e.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", height: "100vh", overflowY: "auto", width: "100%" }, children: [e.jsx(ye, { user: x, title: ((v = j.find(t => t.id === l)) == null ? void 0 : v.label) || "Admin Overview", onLogout: s, onSidebarToggle: () => b(!h), onProfileClick: () => S("profile"), onSettingsClick: () => S("settings"), sidebarOpen: h, isMobile: r, notifications: m, onNotificationRead: w }), e.jsx("div", { style: { padding: r ? "1rem" : "2.5rem" }, children: l === "dashboard" ? e.jsx(Oe, { isMobile: r }) : l === "staff" ? e.jsx("div", { style: { maxWidth: "1400px", margin: "0 auto" }, children: e.jsx(Le, { isMobile: r }) }) : l === "roles" ? e.jsx("div", { style: { maxWidth: "1400px", margin: "0 auto" }, children: e.jsx(Pe, { isMobile: r }) }) : l === "users" ? e.jsx($e, { isMobile: r }) : l === "templates" ? e.jsx(Me, { isMobile: r }) : l === "probate_docs" ? e.jsx(He, { isMobile: r }) : l === "banners" ? e.jsx(qe, { isMobile: r }) : l === "profile" ? e.jsx(Ce, { staff: x, isMobile: r, onUpdate: t => { d(t), localStorage.setItem("staff", JSON.stringify(t)) } }) : l === "logs" ? e.jsx(Ge, { isMobile: r }) : l === "settings" ? e.jsx(Ye, { isMobile: r }) : l === "support" ? e.jsx(fe, { user: x, isMobile: r, isStaff: !0 }) : e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", padding: "2rem" }, children: [e.jsx("h2", { style: { marginBottom: "1rem" }, children: l.charAt(0).toUpperCase() + l.slice(1) }), e.jsxs("p", { style: { color: "#94a3b8" }, children: ['Module view for "', l, '" is currently being implemented.'] })] }) })] })] }) : e.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading admin session..." }) }; export { gt as default };
