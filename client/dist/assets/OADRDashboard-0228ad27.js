import { c as ae, r as i, d as ce, a as g, j as e, e as Q, m as P, h as le, A as pe, X as se, u as fe, i as re, C as ue } from "./index-a367903a.js"; import { f as he, U as xe } from "./dateUtils-0cf2816c.js"; import "./html2canvas.esm-7584f2e8.js"; import { R as me } from "./RichTextEditor-afbee9ff.js"; import { P as ge, C as ee, g as ye } from "./ImageCapture-db49fbfc.js"; import { U as be, C as je, a as ve, L as we, H as Se, D as ke, S as Ce, b as ne, c as Re, d as Ie, M as ze } from "./SupportTickets-1bec5e21.js"; import { F as te } from "./file-text-05ff1bfe.js"; import { C as ie } from "./credit-card-7df9ba98.js"; import { D as de } from "./download-8bb8051d.js"; import { c as Ae, M as De, a as Ee, V as Pe, g as Fe, Z as Ne } from "./api-e39129c6.js"; import { V as K } from "./video-c62c1d23.js"; import { P as Te } from "./phone-a42f05a3.js"; import { P as We, a as Be } from "./PublicAnalytics-f4f515fa.js"; import { P as _e } from "./PublicProfile-eb207c97.js"; import { a as Me } from "./menu-52d4f898.js"; import { H as Le } from "./history-5f7ad8ed.js"; import "./list-1b284b06.js"; import "./image-fb628d93.js"; import "./refresh-cw-24e393f6.js"; import "./mail-7147b856.js"; import "./activity-566acbed.js"; import "./shield-1033dda0.js"; import "./lock-2d4848cc.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe = [["path", { d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z", key: "1oefj6" }], ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }], ["path", { d: "M9 15h6", key: "cctwl0" }], ["path", { d: "M12 18v-6", key: "17g6i2" }]], Ue = ae("file-plus", Oe);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve = [["path", { d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z", key: "oel41y" }], ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]], $e = ae("shield-check", Ve), oe = ({ user: d, editMode: h = !1, affidavit: n = null, onComplete: u = null, onNavigateToOath: c, isMobile: F = !1 }) => { const [o, y] = i.useState(h ? 2 : 1), [R, w] = i.useState([]), [r, k] = i.useState(null), [_, I] = i.useState(""), [p, S] = i.useState(null), [x, N] = i.useState(null), [T, C] = i.useState("submitted"), [m, W] = i.useState(!1), [Z, G] = i.useState(0), [L, V] = i.useState(!0), { showModal: l } = ce(), [b, $] = i.useState("idle"), [j, O] = i.useState(!1), q = async () => { var a, A, U, D; if (!navigator.onLine) { l({ type: "error", title: "No Internet Connection", message: "You appear to be offline. Please check your internet connection to proceed to the live session." }); return } if (!x) { console.error("handleProceedToLiveOath: Missing applicationId"), l({ type: "error", title: "System Error", message: "Application ID was not found. Please try refreshing the page." }); return } if (!localStorage.getItem("token")) { l({ type: "error", title: "Session Expired", message: "Your session has expired. Please log in again." }); return } try { console.log("Verifying server connection and ensuring user is live..."), await g.get("/banners"), console.log(`Sending virtual oath request for affidavit ${x}...`), await g.put(`/affidavits/${x}/virtual-oath`, { status: "requested" }), l({ type: "success", title: "Request Sent", message: "You are being redirected to the Virtual Oath waiting room.", confirmText: "Proceed", onConfirm: () => { c && c() } }) } catch (E) { console.error("Failed to set oath request:", E); let X = "An unexpected error occurred."; E.code === "ERR_NETWORK" ? X = "Server is unreachable. Please try again later." : X = ((A = (a = E.response) == null ? void 0 : a.data) == null ? void 0 : A.error) || ((D = (U = E.response) == null ? void 0 : U.data) == null ? void 0 : D.message) || "Unknown server error", l({ type: "error", title: "Request Failed", message: `Failed to initiate virtual oath request: ${X}` }) } }; i.useEffect(() => { J() }, []), i.useEffect(() => { h && n && (console.log("FileNewAffidavit: Syncing with affidavit prop", n), N(n.id), I(n.content || ""), o === 1 && y(2)) }, [h, n]), i.useEffect(() => { if (h && n && R.length > 0 && !r) { const s = R.find(a => a.id === n.template_id) || R.find(a => a.title === n.type); s && k(s) } }, [h, n, R, r]); const J = async () => { try { const s = await g.get("/public/templates"); w(s.data) } catch (s) { console.error("Error fetching templates:", s), l({ type: "error", title: "Error Loading Templates", message: "Failed to load affidavit templates. Please refresh the page." }) } finally { V(!1) } }, B = () => y(o + 1), H = () => y(o - 1), z = () => r ? parseFloat(r.amount) : 0, Y = async s => { $("processing"), O(!1); try { const a = new FormData; a.append("userId", (d == null ? void 0 : d.id) || 1), a.append("type", (r == null ? void 0 : r.title) || "Custom Affidavit"), a.append("amount", z()), a.append("payment_id", s.reference), (r == null ? void 0 : r.template_type) === "upload" && p ? (a.append("file", p), a.append("content", `Uploaded File: ${p.name}`)) : a.append("content", _); const A = await g.post("/affidavits", a, { headers: { "Content-Type": "multipart/form-data" } }); N(A.data.id), await g.post("/payments", { user_id: d.id, applicant_id: null, affidavit_id: A.data.id, item_paid: (r == null ? void 0 : r.title) || "Custom Affidavit", amount: z() * 1.075, transaction_id: s.reference, payment_status: "completed" }), $("idle"), l({ type: "success", title: "Payment Successful", message: `Payment of ₦${(z() * 1.075).toLocaleString()} received via ${s.gateway.toUpperCase()}.`, confirmText: "Review Submission", onConfirm: B }) } catch (a) { console.error("API Error:", a), $("idle"), l({ type: "error", title: "System Error", message: "Payment was successful but we failed to record it. Please contact support with reference: " + s.reference }) } }, M = async () => { try { await g.put(`/affidavits/${x}/virtual-oath`, { status: "requested" }) } catch (A) { console.error("Failed to set oath request status:", A) } W(!0); let s = 0; const a = setInterval(() => { s += 5, G(s), s >= 100 && (clearInterval(a), t()) }, 150) }, t = async () => { try { await g.put(`/affidavits/${x}/status`, { status: "submitted", captured_image: "liveness_verified_dummy_path" }), W(!1), l({ type: "success", title: "Biometric Verified", message: "Internal AI check complete. Your application is now prioritized for Registry Review.", confirmText: "Finish", onConfirm: B }) } catch (s) { console.error("Update Error:", s), W(!1), B() } }, f = async () => { var s, a, A, U; try { const D = x || (n == null ? void 0 : n.id); if (!D) throw console.error("FileNewAffidavit: Missing ID", { applicationId: x, affidavit: n }), new Error("Could not identify the affidavit to update (Missing ID)."); const E = new FormData; E.append("type", (r == null ? void 0 : r.title) || (n == null ? void 0 : n.type) || "Custom Affidavit"), E.append("content", _), E.append("status", "submitted"), (r == null ? void 0 : r.template_type) === "upload" && p && E.append("file", p), console.log(`[FileNewAffidavit] Resubmitting affidavit ${D} via FormData...`); const X = await g.put(`/affidavits/${D}`, E); console.log("[FileNewAffidavit] Server response:", X.data), l({ type: "success", title: "Resubmitted Successfully", message: `Affidavit CRMS-${D} has been resubmitted for review.`, confirmText: "Back to History", onConfirm: () => { u && u() } }) } catch (D) { console.error("[FileNewAffidavit] Update Error:", D); const E = ((a = (s = D.response) == null ? void 0 : s.data) == null ? void 0 : a.error) || ((U = (A = D.response) == null ? void 0 : A.data) == null ? void 0 : U.message) || D.message || "An unexpected error occurred while saving changes."; l({ type: "error", title: "Update Failed", message: E }) } }, v = async () => { await ye({ user: d, applicationId: x, templateTitle: r == null ? void 0 : r.title, content: _, file: p, showModal: l, language: n == null ? void 0 : n.language, juratName: n == null ? void 0 : n.filed_by_name, division: n == null ? void 0 : n.division }) }; return e.jsxs("div", { className: "glass-card", style: { background: "white", padding: F ? "1rem" : "2rem", minHeight: "500px" }, children: [e.jsx("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2.5rem", overflowX: F ? "auto" : "visible", paddingBottom: "0.5rem", gap: "0.5rem" }, children: ["Select", "Review", "Pay", "Sub", "Verify", "Done"].map((s, a) => e.jsxs("div", { style: { flex: F ? "0 0 60px" : 1, textAlign: "center", paddingBottom: "0.8rem", borderBottom: o === a + 1 ? "3px solid #3498db" : "3px solid #f1f5f9", color: o === a + 1 ? "#3498db" : "#94a3b8", fontWeight: o === a + 1 ? "700" : "500", fontSize: "11px", transition: "all 0.3s" }, children: [a + 1, ". ", s] }, a)) }), o === 1 && e.jsxs("div", { style: { maxWidth: "500px", margin: "0 auto" }, children: [e.jsx("h3", { style: { marginBottom: "1.5rem", textAlign: "center" }, children: "Choose Affidavit Template" }), e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#778eaeff", fontSize: "14px" }, children: "Template Category" }), L ? e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "12px" }, children: [e.jsx(Q, { size: 20, className: "animate-spin" }), e.jsx("span", { children: "Loading templates..." })] }) : e.jsxs("select", { style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #ddd", outline: "none" }, value: (r == null ? void 0 : r.id) || "", onChange: s => { const a = s.target.value; if (a === "") k(null); else { const A = R.find(U => U.id === parseInt(a)); k(A) } }, children: [e.jsx("option", { value: "", children: "-- Select Template --" }), R.map(s => e.jsxs("option", { value: s.id, children: [s.title, " - ₦", parseFloat(s.amount).toLocaleString()] }, s.id))] })] }), r && r.template_type === "upload" && e.jsxs(P.div, { initial: { opacity: 0, scale: .98 }, animate: { opacity: 1, scale: 1 }, style: { padding: "2rem", border: "2px dashed #cbd5e1", borderRadius: "12px", textAlign: "center", background: "#f8fafc" }, children: [e.jsx(be, { size: 40, color: "#94a3b8", style: { marginBottom: "1rem" } }), e.jsx("h4", { style: { margin: "0 0 0.5rem" }, children: "Upload your Affidavit" }), e.jsx("p", { style: { fontSize: "12px", color: "#778eaeff", marginBottom: "1.5rem" }, children: "Only PDF files are accepted (Max 5MB)" }), e.jsx("input", { type: "file", accept: ".pdf", onChange: s => S(s.target.files[0]), style: { display: "none" }, id: "file-upload" }), e.jsx("label", { htmlFor: "file-upload", className: "btn", style: { background: "#3b82f6", color: "white", padding: "0.6rem 1.5rem", cursor: "pointer", display: "inline-block" }, children: "Select File" }), p && e.jsxs("p", { style: { marginTop: "1rem", color: "#10b981", fontSize: "13px", fontWeight: "500" }, children: ["✓ ", p.name] })] }), e.jsx("button", { disabled: !r || r.template_type === "upload" && !p, onClick: () => { r && r.template_type !== "upload" && I(r.content), B() }, className: "btn btn-primary", style: { padding: "12px" }, children: "Next: Review Content" })] })] }), o === 2 && e.jsxs(P.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, children: [(r == null ? void 0 : r.template_type) === "upload" ? e.jsxs("div", { style: { textAlign: "center", padding: "3rem 0" }, children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#ecfdf5", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: e.jsx(te, { size: 40, color: "#10b981" }) }), e.jsx("h3", { children: "File Review" }), e.jsx("p", { style: { color: "#778eaeff" }, children: "Your document is ready for processing." }), e.jsxs("div", { style: { margin: "1.5rem auto", padding: "1rem", background: "#f8fafc", borderRadius: "8px", border: "1px solid #e2e8f0", maxWidth: "400px" }, children: [e.jsx("p", { style: { margin: 0, fontSize: "14px", fontWeight: "600" }, children: p == null ? void 0 : p.name }), e.jsxs("p", { style: { margin: "4px 0 0", fontSize: "12px", color: "#94a3b8" }, children: [((p == null ? void 0 : p.size) / 1024 / 1024).toFixed(2), " MB • PDF Document"] })] })] }) : e.jsxs(e.Fragment, { children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1rem" }, children: [e.jsx("h3", { children: "Edit Affidavit Content" }), e.jsx("span", { style: { fontSize: "12px", background: "#3b82f6", color: "white", padding: "4px 10px", borderRadius: "20px" }, children: "Smart Editor" })] }), e.jsx(me, { value: _, onChange: I, placeholder: "Start typing your affidavit content here..." }), h && e.jsx("input", { type: "hidden", name: "status", value: T })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "2.5rem" }, children: [e.jsx("button", { onClick: h ? u : H, className: "btn", style: { background: "#f1f5f9", color: "#475569", flex: 1, padding: "12px" }, children: h ? "Cancel Edit" : "Previous Step" }), e.jsx("button", { onClick: h ? f : B, className: "btn btn-primary", style: { flex: 1, padding: "12px" }, children: h ? "Update & Resubmit" : "Next: Proceed to Payment" })] })] }), o === 3 && e.jsx(P.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, style: { textAlign: "center", maxWidth: "500px", margin: "0 auto" }, children: j ? e.jsx("div", { style: { marginTop: "2rem" }, children: e.jsx(ge, { amount: z() * 1.075, user: d, itemDescription: (r == null ? void 0 : r.title) || "Affidavit Filing", onSuccess: Y, onCancel: () => O(!1) }) }) : e.jsxs(e.Fragment, { children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#eff6ff", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: e.jsx(ie, { size: 40, color: "#3b82f6" }) }), e.jsx("h3", { children: "Secure Processing Fee" }), e.jsx("p", { style: { color: "#778eaeff" }, children: "Please settle the administrative fee to activate video verification." }), e.jsxs("div", { style: { margin: "2rem 0", padding: "1.5rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #e2e8f0" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "0.5rem" }, children: [e.jsx("span", { style: { color: "#778eaeff" }, children: "Service Fee" }), e.jsxs("span", { style: { fontWeight: "600" }, children: ["₦", z().toLocaleString()] })] }), e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "1rem", paddingBottom: "1rem", borderBottom: "1px solid #e2e8f0" }, children: [e.jsx("span", { style: { color: "#778eaeff" }, children: "VAT (7.5%)" }), e.jsxs("span", { style: { fontWeight: "600" }, children: ["₦", (z() * .075).toLocaleString()] })] }), e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", fontSize: "1.2rem" }, children: [e.jsx("span", { style: { fontWeight: "700" }, children: "Total Amount" }), e.jsxs("span", { style: { fontWeight: "800", color: "#10b981" }, children: ["₦", (z() * 1.075).toLocaleString()] })] })] }), e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [e.jsxs("button", { onClick: () => O(!0), className: "btn btn-primary", style: { padding: "1.2rem", fontSize: "16px", fontWeight: "bold", borderRadius: "16px", display: "flex", alignItems: "center", justifyContent: "center", gap: "10px" }, children: [e.jsx(ie, { size: 20 }), "Proceed to Secure Payment"] }), e.jsx("button", { onClick: H, className: "btn", style: { background: "#f1f5f9", color: "#475569", padding: "1rem" }, children: "Back to Review" })] })] }) }), o === 4 && e.jsxs(P.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, style: { textAlign: "center", maxWidth: "550px", margin: "0 auto" }, children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#fef3c7", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: e.jsx(le, { size: 40, color: "#d97706" }) }), e.jsx("h3", { style: { fontSize: "1.5rem", marginBottom: "1rem" }, children: "Application Submitted" }), e.jsxs("p", { style: { color: "#778eaeff", fontSize: "1.1rem", marginBottom: "2rem" }, children: ["Your payment was successful and your application has been received. Your current status is ", e.jsx("strong", { style: { color: "#d97706" }, children: "UNDER REVIEW" }), "."] }), e.jsxs("div", { style: { background: "#f8fafc", padding: "1.5rem", borderRadius: "12px", textAlign: "left", border: "1px solid #e2e8f0", marginBottom: "2.5rem" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "0.8rem" }, children: [e.jsx("span", { style: { color: "#778eaeff" }, children: "Application ID:" }), e.jsxs("span", { style: { fontWeight: "700" }, children: ["CRMS-", x] })] }), e.jsxs("div", { style: { display: "flex", justifyContent: "space-between" }, children: [e.jsx("span", { style: { color: "#778eaeff" }, children: "Current Status:" }), e.jsx("span", { style: { color: "#d97706", fontWeight: "bold" }, children: "UNDER REVIEW" })] })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [e.jsx("button", { onClick: () => window.location.reload(), className: "btn", style: { flex: 1, background: "#f1f5f9", color: "#475569" }, children: "Back to Dashboard" }), e.jsxs("button", { onClick: q, className: "btn btn-primary", style: { flex: 1, background: "#3b82f6", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: ["Continue to Live Verify ", e.jsx(ee, { size: 18 })] })] })] }), o === 5 && e.jsxs(P.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, children: [e.jsxs("div", { style: { textAlign: "center", marginBottom: "2rem" }, children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#fff1f2", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: e.jsx(ee, { size: 40, color: "#f43f5e" }) }), e.jsx("h3", { children: "Video Verification Session" }), e.jsx("p", { style: { color: "#778eaeff" }, children: "Connect with a judicial officer to finalize your oath in real-time." })] }), e.jsxs("div", { style: { padding: "4rem 1rem", background: "#0f172a", borderRadius: "16px", textAlign: "center", margin: "1rem 0", position: "relative", overflow: "hidden", minHeight: "350px", display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center", border: "4px solid rgb\(18 37 74\)" }, children: [e.jsx(pe, { mode: "wait", children: m ? e.jsxs(P.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { textAlign: "center" }, children: [e.jsx(Q, { size: 48, className: "animate-spin", color: "#3b82f6", style: { marginBottom: "1.5rem" } }), e.jsx("h4", { style: { color: "white" }, children: "Performing Liveness Check..." }), e.jsx("p", { style: { color: "#94a3b8" }, children: "Please look directly into the camera" }), e.jsx("div", { style: { width: "200px", height: "8px", background: "rgb\(18 37 74\)", borderRadius: "4px", margin: "1.5rem auto", overflow: "hidden" }, children: e.jsx(P.div, { initial: { width: 0 }, animate: { width: `${Z}%` }, style: { height: "100%", background: "#3b82f6" } }) }), e.jsxs("span", { style: { color: "#3b82f6", fontWeight: "bold" }, children: [Z, "%"] })] }, "verifying") : e.jsxs(P.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { color: "#94a3b8", textAlign: "center" }, children: [e.jsx(ee, { size: 64, style: { marginBottom: "1.5rem", opacity: .5 } }), e.jsx("h4", { style: { color: "white", margin: "0 0 0.5rem" }, children: "Camera Ready" }), e.jsx("p", { style: { fontSize: "14px" }, children: "Please ensure your face is well-lit and clearly visible." })] }, "waiting") }), e.jsxs("div", { style: { position: "absolute", top: "20px", left: "20px", display: "flex", alignItems: "center", gap: "0.5rem", background: "rgba(0,0,0,0.5)", padding: "4px 12px", borderRadius: "20px", border: "1px solid rgba(255,255,255,0.1)" }, children: [e.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: "#ef4444" } }), e.jsx("span", { style: { color: "white", fontSize: "10px", fontWeight: "bold" }, children: "LIVE PREVIEW" })] })] }), e.jsx("button", { onClick: M, disabled: m, className: "btn", style: { width: "100%", background: m ? "rgb\(18 37 74\)" : "#10b981", color: "white", padding: "1.2rem", fontWeight: "bold", fontSize: "16px", borderRadius: "12px", boxShadow: "0 4px 6px -1px rgba(16, 185, 129, 0.2)", cursor: m ? "not-allowed" : "pointer", marginTop: "2rem" }, children: m ? "Verifying Identity..." : "Start Liveness Check" }), e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1.5rem" }, children: [e.jsx("button", { onClick: H, disabled: m, className: "btn", style: { background: "#f1f5f9", color: "#475569", flex: 1, opacity: m ? .5 : 1 }, children: "Back to Submission" }), e.jsx("button", { className: "btn", disabled: m, style: { background: "#f1f5f9", color: "#475569", flex: 1, opacity: m ? .5 : 1 }, children: "Schedule for Later" })] })] }), o === 6 && e.jsxs(P.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, className: "text-center", children: [e.jsxs("div", { style: { marginBottom: "2rem" }, children: [e.jsx("div", { style: { background: "#f0fdf4", width: "80px", height: "80px", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem", border: "2px solid #10b981" }, children: e.jsx(je, { size: 40, color: "#10b981" }) }), e.jsx("h1", { style: { fontSize: "2.5rem", fontWeight: "800", color: "rgb\(18 37 74\)", marginBottom: "1rem" }, children: "Application Submitted" }), e.jsxs("p", { style: { color: "#778eaeff", fontSize: "1.1rem", maxWidth: "600px", margin: "0 auto" }, children: ["Your affidavit has been submitted to the ", e.jsx("strong", { children: "OADR Registry" }), " for formal review."] })] }), e.jsxs("div", { style: { background: "linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)", padding: "2.5rem", borderRadius: "24px", border: "1px solid #e2e8f0", marginBottom: "3rem", position: "relative", overflow: "hidden", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.05)", maxWidth: "500px", margin: "0 auto 3rem" }, children: [e.jsx("div", { style: { position: "absolute", top: 0, right: 0, width: "150px", height: "150px", background: "radial-gradient(circle, rgba(16, 185, 129, 0.05) 0%, transparent 70%)", zIndex: 0 } }), e.jsxs("div", { style: { position: "relative", zIndex: 1 }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", paddingBottom: "1rem", borderBottom: "1px solid #f1f5f9", marginBottom: "1rem" }, children: [e.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Reference ID" }), e.jsxs("span", { style: { fontWeight: "800", color: "rgb\(18 37 74\)", fontFamily: "monospace", fontSize: "1.1rem" }, children: ["CRMS-", x] })] }), e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", paddingBottom: "1rem", borderBottom: "1px solid #f1f5f9", marginBottom: "1rem" }, children: [e.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Current Status" }), e.jsxs("span", { style: { color: "#3b82f6", fontWeight: "800", display: "flex", alignItems: "center", gap: "6px" }, children: [e.jsx(Q, { size: 18, className: "animate-spin" }), " SUBMITTED"] })] }), e.jsxs("div", { style: { display: "flex", justifyContent: "space-between" }, children: [e.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Identity Check" }), e.jsxs("span", { style: { fontWeight: "700", color: "#10b981", display: "flex", alignItems: "center", gap: "6px" }, children: [e.jsx($e, { size: 18 }), " AI SECURED"] })] })] })] }), e.jsxs("div", { style: { display: "flex", gap: "1.5rem", justifyContent: "center" }, children: [e.jsxs("button", { onClick: v, className: "btn", style: { background: "#fff", border: "2px solid #e2e8f0", padding: "1rem 2rem", display: "flex", alignItems: "center", gap: "0.75rem", borderRadius: "14px", fontWeight: "600" }, children: [e.jsx(de, { size: 20 }), " Preview Draft"] }), e.jsx("button", { onClick: () => window.location.reload(), className: "btn", style: { background: "rgb\(18 37 74\)", color: "white", padding: "1rem 2rem", borderRadius: "14px", fontWeight: "600" }, children: "Go to Dashboard" })] })] })] }) }, qe = ({ stream: d }) => { const h = i.useRef(null); return i.useEffect(() => { h.current && d.mediaStream && (h.current.srcObject = d.mediaStream) }, [d]), e.jsxs("div", { style: { position: "relative", width: "100%", height: "100%", background: "rgb\(18 37 74\)", borderRadius: "8px", overflow: "hidden" }, children: [e.jsx("video", { ref: h, autoPlay: !0, playsInline: !0, style: { width: "100%", height: "100%", objectFit: "cover" } }), e.jsx("div", { style: { position: "absolute", bottom: "10px", left: "10px", background: "rgba(0,0,0,0.6)", padding: "4px 8px", borderRadius: "4px", color: "white", fontSize: "12px" }, children: d.user.userName || "Officer" })] }) }, He = ({ leaveMeeting: d, toggleMic: h, toggleWebcam: n, micOn: u, webcamOn: c }) => e.jsxs("div", { style: { display: "flex", gap: "1rem", justifyContent: "center", padding: "1rem", background: "rgb\(18 37 74\)" }, children: [e.jsx("button", { onClick: () => h(), style: { width: "50px", height: "50px", borderRadius: "50%", border: "none", background: u ? "#334155" : "#ef4444", color: "white", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center" }, children: u ? e.jsx(De, { size: 20 }) : e.jsx(Ee, { size: 20 }) }), e.jsx("button", { onClick: () => n(), style: { width: "50px", height: "50px", borderRadius: "50%", border: "none", background: c ? "#334155" : "#ef4444", color: "white", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center" }, children: c ? e.jsx(K, { size: 20 }) : e.jsx(Pe, { size: 20 }) }), e.jsx("button", { onClick: () => d(), style: { width: "50px", height: "50px", borderRadius: "50%", border: "none", background: "#ef4444", color: "white", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center" }, children: e.jsx(Te, { size: 20, style: { transform: "rotate(135deg)" } }) })] }), Ye = ({ onLeave: d, isMobile: h, affidavits: n = [], meetingId: u }) => { const [c, F] = i.useState(window.innerWidth <= 1024), o = h !== void 0 ? h : c, [y, R] = i.useState(null), [w, r] = i.useState(null), [k, _] = i.useState([]), [I, p] = i.useState(!0), [S, x] = i.useState(!0), [N, T] = i.useState(!o), C = i.useRef(null), m = i.useRef("public_" + Math.round(Math.random() * 1e5)), W = i.useRef(null); i.useEffect(() => { const l = () => F(window.innerWidth <= 1024); return window.addEventListener("resize", l), o && T(!1), () => window.removeEventListener("resize", l) }, [o]), i.useEffect(() => { C.current && w && (C.current.srcObject = w) }, [w]), i.useEffect(() => { let l = !0, b = null; return u && (async () => { if (u) try { const j = await Fe(u, m.current); if (!l || !(j != null && j.token) || !(j != null && j.appID)) { console.error("Zego token initialization failed"); return } const { token: O, appID: q } = j, J = `wss://webliveroom${q}-api.zegocloud.com/ws`; b = new Ne.ZegoExpressEngine(q, J), R(b), b.on("roomStreamUpdate", async (H, z, Y) => { if (z === "ADD") { const M = []; for (const t of Y) try { const f = await b.startPlayingStream(t.streamID); M.push({ ...t, mediaStream: f }) } catch (f) { console.error(f) } _(t => [...t, ...M]) } else if (z === "DELETE") { const M = Y.map(t => t.streamID); _(t => t.filter(f => !M.includes(f.streamID))) } }), await b.loginRoom(u, O, { userID: m.current, userName: "Deponent" }, { userUpdate: !0 }); const B = await b.createStream({ camera: { video: !0, audio: !0 } }); l && (r(B), W.current = B, b.startPublishingStream(m.current + "_stream", B)) } catch (j) { console.error("Zego Init Failed:", j) } })(), () => { l = !1, W.current && W.current.getTracks().forEach(j => j.stop()), b && (W.current && b.destroyStream(W.current), b.logoutRoom(u)) } }, [u]); const Z = () => { if (w) { const l = w.getAudioTracks()[0]; l && (l.enabled = !I, p(!I)) } }, G = () => { if (w) { const l = w.getVideoTracks()[0]; l && (l.enabled = !S, x(!S)) } }, L = () => { w && (w.getTracks().forEach(l => l.stop()), y && y.destroyStream(w)), y && y.logoutRoom(u), d() }, V = k.length > 0 ? k[0] : null; return e.jsxs("div", { style: { display: "flex", height: "100%", width: "100%", background: "#020617", position: "relative", overflow: "hidden" }, children: [e.jsxs("div", { style: { flex: 1, display: "flex", flexDirection: "column", position: "relative", height: "100%", overflow: "hidden" }, children: [e.jsxs("div", { style: { flex: 1, position: "relative", background: "#000", overflow: "hidden", display: "flex", flexDirection: "column" }, children: [V ? e.jsx("div", { style: { flex: 1, position: "relative" }, children: e.jsx(qe, { stream: V }) }) : e.jsxs("div", { style: { flex: 1, display: "flex", alignItems: "center", justifyContent: "center", color: "#94a3b8", flexDirection: "column", background: "#020617" }, children: [e.jsx("div", { className: "animate-pulse", style: { width: "100px", height: "100px", background: "rgba(255,255,255,0.05)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", marginBottom: "1rem" }, children: e.jsx(ve, { size: 40 }) }), e.jsx("h3", { children: "Connecting to Officer..." }), e.jsx("p", { style: { fontSize: "12px", color: "#778eaeff" }, children: "Waiting for video stream..." })] }), e.jsxs("div", { style: { position: "absolute", bottom: "20px", left: "20px", width: o ? "100px" : "200px", height: o ? "75px" : "150px", borderRadius: "12px", overflow: "hidden", border: "2px solid rgba(255,255,255,0.2)", boxShadow: "0 8px 32px rgba(0,0,0,0.5)", zIndex: 10, background: "rgb\(18 37 74\)" }, children: [e.jsx("video", { ref: C, autoPlay: !0, playsInline: !0, muted: !0, style: { width: "100%", height: "100%", objectFit: "cover" } }), e.jsx("div", { style: { position: "absolute", top: "10px", right: "10px", background: "#3b82f6", color: "white", padding: "2px 6px", borderRadius: "4px", fontSize: "10px" }, children: "YOU" }), !S && e.jsx("div", { style: { position: "absolute", inset: 0, display: "flex", alignItems: "center", justifyContent: "center", background: "#333" }, children: "Camera Off" })] }), e.jsx("button", { onClick: () => T(!N), style: { position: "absolute", top: "1rem", right: "1rem", zIndex: 20, padding: "0.8rem", borderRadius: "50%", background: "rgba(0,0,0,0.6)", border: "1px solid rgba(255,255,255,0.1)", color: "white", cursor: "pointer", backdropFilter: "blur(4px)" }, children: N ? e.jsx(se, { size: 20 }) : e.jsx(te, { size: 20 }) })] }), e.jsx(He, { leaveMeeting: L, toggleMic: Z, toggleWebcam: G, micOn: I, webcamOn: S })] }), N && e.jsxs("div", { style: { width: o ? "100%" : "300px", position: o ? "absolute" : "relative", inset: o ? "0 0 0 0" : "auto", zIndex: o ? 30 : 1, background: "#0f172a", borderLeft: "1px solid #334155", display: "flex", flexDirection: "column", transition: "all 0.3s ease" }, children: [e.jsxs("div", { style: { padding: "1.5rem", borderBottom: "1px solid #334155", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [e.jsxs("div", { children: [e.jsxs("h3", { style: { margin: 0, fontSize: "16px", color: "white", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx(te, { size: 18, color: "#3b82f6" }), "Session Details"] }), u && e.jsxs("div", { style: { fontSize: "11px", color: "#778eaeff", marginTop: "4px", fontFamily: "monospace" }, children: ["ID: ", u] })] }), o && e.jsx("button", { onClick: () => T(!1), style: { background: "transparent", border: "none", color: "#94a3b8" }, children: e.jsx(se, { size: 20 }) })] }), e.jsxs("div", { style: { flex: 1, overflowY: "auto", padding: "1rem" }, children: [n.map(l => e.jsxs("div", { style: { background: "rgb\(18 37 74\)", borderRadius: "12px", padding: "1rem", border: "1px solid #334155", marginBottom: "1rem" }, children: [e.jsx("div", { style: { color: "white", fontWeight: "bold", fontSize: "14px" }, children: l.type }), e.jsxs("div", { style: { color: "#94a3b8", fontSize: "12px" }, children: ["ID: ", l.id] })] }, l.id)), n.length === 0 && e.jsx("div", { style: { color: "#778eaeff" }, children: "No details available." })] })] })] }) }, Ze = ({ isMobile: d = !1 }) => { const [h, n] = i.useState(null), [u, c] = i.useState("initializing"), [F, o] = i.useState(null), [y, R] = i.useState([]), [w, r] = i.useState(!1); i.useEffect(() => { const p = async () => { try { const x = JSON.parse(localStorage.getItem("user")); if (!(x != null && x.id)) return; const T = (await g.get(`/affidavits/user/${x.id}`)).data.filter(m => m.status === "submitted"); R(T); const C = T.find(m => m.virtual_oath_taken === "requested" || m.virtual_oath_taken === "completed" || m.status === "submitted"); if (C) { if (o(C), u === "joined") return; C.meeting_id ? (n(C.meeting_id), u !== "joined" && c("ready")) : (C.virtual_oath_taken, c("checking_in")) } else u !== "joined" && c("no_request") } catch (x) { console.error(x), c("no_request") } }; p(); const S = setInterval(p, 1e4); return () => clearInterval(S) }, [u]), i.useEffect(() => { const p = () => { localStorage.getItem("user") && g.post("/user/heartbeat").catch(() => { }) }; p(); const S = setInterval(p, 1e4); return () => clearInterval(S) }, []); const k = async () => { if (F) try { const { meetingId: p, err: S } = await Ae(); if (!p) throw new Error("ID Gen failed"); await g.put("/user/meeting", { meetingId: p }), await g.put(`/affidavits/${F.id}/virtual-oath`, { status: "requested", meetingId: p }), await g.post("/oath/sessions/start", { affidavitId: F.id, meetingId: p }), n(p), r(!0), c("joined") } catch (p) { console.error(p), alert("Failed to start session") } }, _ = () => { r(!0), c("joined") }, I = () => { h && g.post("/oath/sessions/end", { meetingId: h }).catch(() => { }), n(null), r(!1), c("waiting") }; return u === "initializing" ? e.jsx("div", { className: "glass-card", style: { padding: "3rem", color: "white", textAlign: "center" }, children: "Loading..." }) : u === "joined" && h ? e.jsx("div", { style: { height: "100vh", width: "100%", overflow: "hidden" }, children: e.jsx(Ye, { onLeave: I, isMobile: d, affidavits: y, meetingId: h }) }) : u === "checking_in" ? e.jsxs("div", { className: "glass-card", style: { padding: "3rem", textAlign: "center", color: "white", background: "#0f172a", height: "100%", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center" }, children: [e.jsx(K, { size: 48, color: "#3b82f6", style: { marginBottom: "1rem" } }), e.jsx("h3", { children: "Initiate Virtual Oath" }), e.jsx("button", { onClick: k, className: "btn btn-primary", style: { marginTop: "1rem", padding: "1rem", background: "#3b82f6", color: "white", border: "none", borderRadius: "8px", cursor: "pointer" }, children: "Create & Join Meeting" })] }) : u === "ready" ? e.jsxs("div", { className: "glass-card", style: { padding: "3rem", textAlign: "center", color: "white", background: "#0f172a", height: "100%", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center" }, children: [e.jsx("h3", { children: "Session Ready" }), e.jsx("button", { onClick: _, className: "btn btn-primary", style: { marginTop: "1rem", padding: "1rem", background: "#10b981", color: "white", border: "none", borderRadius: "8px", cursor: "pointer" }, children: "Join Video Call" })] }) : e.jsx("div", { className: "glass-card", style: { padding: "3rem", textAlign: "center", color: "white", background: "#0f172a", height: "100%", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center" }, children: e.jsx("h3", { children: "Waiting..." }) }) }, yt = ({ user: d }) => { var M; const h = fe(), [n, u] = i.useState(window.innerWidth > 1024), [c, F] = i.useState(window.innerWidth <= 1024), [o, y] = i.useState("dash"), [R, w] = i.useState([]), [r, k] = i.useState(!0), [_, I] = i.useState(null), [p, S] = i.useState({ open: !1, affidavitId: null }), [x, N] = i.useState({ open: !1, affidavit: null }), [T, C] = i.useState(null), [m, W] = i.useState([]), [Z, G] = i.useState(0), L = async () => { try { const t = await g.get("/notifications/public"); W(t.data), G(t.data.filter(f => !f.is_read).length) } catch (t) { console.error("Failed to fetch notifications:", t) } }, V = async t => { try { await g.put(`/notifications/public/${t}/read`), L() } catch (f) { console.error("Error marking read:", f) } }; i.useEffect(() => { const t = () => { const f = window.innerWidth <= 1024; F(f), u(!f) }; if (window.addEventListener("resize", t), d != null && d.id) { l(), L(); const f = setInterval(L, 3e4); return () => { window.removeEventListener("resize", t), clearInterval(f) } } return () => { window.removeEventListener("resize", t) } }, [d == null ? void 0 : d.id]); const l = async () => { var t, f; if (!(d != null && d.id)) { console.warn("Cannot fetch affidavits: No User ID found in session"); return } k(!0), I(null); try { const v = localStorage.getItem("token"), s = await g.get(`/affidavits/user/${d.id}?t=${Date.now()}`); console.log(`[OADRDashboard] Fetched ${s.data.length} affidavits:`, s.data.map(a => ({ id: a.id, status: a.status }))), w(s.data) } catch (v) { if (console.error("Error fetching affidavits:", v), v.response && (v.response.status === 401 || v.response.status === 403)) { j(); return } const s = ((f = (t = v.response) == null ? void 0 : t.data) == null ? void 0 : f.error) || v.message; I(`Failed to load affidavits (${s}). Please ensure the server is running.`) } finally { k(!1) } }, [b, $] = i.useState({ open: !1, title: "", message: "" }), j = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), h("/login"), window.location.reload() }, O = async t => { try { const f = await g.get(`/affidavits/${t.id}/download`, { responseType: "blob" }), v = window.URL.createObjectURL(new Blob([f.data])), s = document.createElement("a"); s.href = v; const a = t.affidavit_path ? `Affidavit_${t.id}_Certified.pdf` : `Affidavit_${t.id}_Draft.pdf`; s.setAttribute("download", a), document.body.appendChild(s), s.click(), s.remove(), window.URL.revokeObjectURL(v) } catch (f) { console.error("Download failed:", f), alert("Failed to download PDF. Please try again.") } }, q = t => { C(t), y("edit") }, J = async () => { try { await g.delete(`/affidavits/${p.affidavitId}`), S({ open: !1, affidavitId: null }), l() } catch (t) { console.error("Error deleting affidavit:", t), alert("Failed to delete affidavit. Please try again.") } }, B = t => { N({ open: !0, affidavit: t }) }, H = async t => { var f, v; if (window.confirm("Are you sure you want to resubmit this affidavit for review? This will clear previous rejection remarks.")) try { k(!0), await g.put(`/resubmit-affidavit/${t.id}`), await l() } catch (s) { console.error("Error resubmitting affidavit:", s), alert("Failed to resubmit: " + (((v = (f = s.response) == null ? void 0 : f.data) == null ? void 0 : v.error) || s.message)) } finally { k(!1) } }, z = async () => { const { affidavit: t } = x; if (t) try { await g.put(`/affidavits/${t.id}/virtual-oath`, { status: "requested" }), N({ open: !1, affidavit: null }), y("oath") } catch (f) { console.error("Error requesting oath:", f), alert("Failed to request virtual oath. Please try again.") } }, Y = [{ icon: e.jsx(Ie, { size: 20 }), label: "Dashboard", id: "dash" }, { icon: e.jsx(Ue, { size: 20 }), label: "File New Affidavit", id: "new" }, { icon: e.jsx(K, { size: 20 }), label: "Virtual Oath", id: "oath" }, { icon: e.jsx(Le, { size: 20 }), label: "Previous Filings", id: "history" }, { icon: e.jsx(ie, { size: 20 }), label: "Payment Receipt", id: "payments" }, { icon: e.jsx(ze, { size: 20 }), label: "Support", id: "support" }, { icon: e.jsx(xe, { size: 20 }), label: "My Profile", id: "profile" }]; return d ? e.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", position: "relative" }, children: [c && n && e.jsx("div", { onClick: () => u(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40 } }), e.jsxs("aside", { style: { width: n ? "260px" : c ? "0" : "80px", background: "#3d2b1f", color: "white", transition: "all 0.3s ease", display: "flex", flexDirection: "column", position: c ? "fixed" : "relative", height: "100vh", zIndex: 50, overflow: "hidden" }, children: [e.jsxs("div", { style: { padding: "2rem", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem" }, children: [e.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "60px", height: "60px", borderRadius: "50%" } }), (n || c && n) && e.jsxs("div", { style: { textAlign: "center", overflow: "hidden" }, children: [e.jsx("h2", { style: { fontSize: "1.2rem", margin: 0 }, children: "CRMS" }), e.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), e.jsx("nav", { style: { flex: 1, padding: "1rem" }, children: Y.map(t => e.jsxs("div", { onClick: () => { y(t.id), (t.id === "history" || t.id === "dash") && l(), c && u(!1) }, style: { display: "flex", alignItems: "center", padding: "1rem", cursor: "pointer", borderRadius: "8px", gap: "1rem", marginBottom: "0.5rem", transition: "background 0.2s", backgroundColor: o === t.id ? "#5d4037" : "transparent", color: o === t.id ? "#28a745" : "#8d6e63", justifyContent: n ? "flex-start" : "center" }, children: [t.icon, n && e.jsx("span", { children: t.label })] }, t.id)) }), n && e.jsx("div", { style: { padding: "1rem", borderTop: "1px solid #5d4037" }, children: e.jsxs("button", { onClick: j, style: { width: "100%", display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#8d6e63", cursor: "pointer", borderRadius: "8px" }, onMouseOver: t => t.currentTarget.style.background = "#5d4037", onMouseOut: t => t.currentTarget.style.background = "transparent", children: [e.jsx(we, { size: 20 }), e.jsx("span", { children: "Logout" })] }) })] }), e.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", height: "100vh", overflowY: "auto" }, children: [e.jsx(Se, { user: d, title: o === "dash" ? "OADR Dashboard" : o === "new" ? "File New Affidavit" : o === "history" ? "Previous Filings" : "My Profile", onLogout: j, onSidebarToggle: () => u(!n), onProfileClick: () => y("profile"), onSettingsClick: () => y("profile"), sidebarOpen: n, isMobile: c, notifications: m, onNotificationRead: V }), e.jsx("div", { style: { padding: c ? "1rem" : "1.5rem", maxWidth: "1200px", margin: "0 auto", width: "100%" }, children: o === "dash" ? e.jsx(We, { isMobile: c, setView: y, module: "affidavit" }) : o === "new" ? e.jsx(oe, { user: d, isMobile: c, onNavigateToOath: () => y("oath") }) : o === "oath" ? e.jsx(Ze, { isMobile: c }) : o === "history" ? e.jsxs("div", { className: "glass-card", style: { background: "white", padding: c ? "1rem" : "1.5rem" }, children: [e.jsx("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: e.jsx("h3", { style: { margin: 0, fontSize: c ? "1.1rem" : "1.25rem" }, children: "Filing History" }) }), e.jsx(ke, { columns: [{ key: "created_at", label: "Date", sortable: !0, render: t => he(t) }, { key: "type", label: "Affidavit Title", sortable: !0 }, { key: "id", label: "Application ID", render: t => `CRMS-${t}` }, { key: "status", label: "Status", sortable: !0, render: (t, f) => e.jsx("span", { title: t === "rejected" ? `Reason: ${f.remarks || "No reason provided"}` : "", style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", background: t === "completed" ? "#ecfdf5" : t === "rejected" ? "#fef2f2" : "#fffbeb", color: t === "completed" ? "#10b981" : t === "rejected" ? "#ef4444" : "#f59e0b", cursor: t === "rejected" ? "help" : "default", border: t === "rejected" ? "1px dashed #ef4444" : "none" }, children: t.toUpperCase() }), hiddenMobile: !0 }, { key: "remarks", label: "Reason/Feedback", render: t => t ? e.jsx("div", { style: { fontSize: "11px", color: "#ef4444", fontStyle: "italic", maxWidth: "150px", overflow: "hidden", textOverflow: "ellipsis", whiteSpace: "nowrap" }, title: t, children: t }) : "-" }, { key: "virtual_oath_taken", label: "Virtual Oath Status", render: (t, f) => { const v = f.status || ""; if (!["submitted", "rejected", "pending"].includes(v)) return "-"; const a = t === "requested" || t === 1 || t === "completed" || t === 2 || t === "verified"; return e.jsxs("span", { style: { fontSize: "11px", fontWeight: "bold", color: a ? "#10b981" : "#778eaeff", display: "flex", alignItems: "center", gap: "4px" }, children: [e.jsx("div", { style: { width: "6px", height: "6px", borderRadius: "50%", background: a ? "#10b981" : "#778eaeff" } }), a ? "PROCEEDED" : "PENDING"] }) } }], data: R, loading: r, searchPlaceholder: "Search previous filings...", isMobile: c, actions: t => e.jsx("div", { style: { display: "flex", gap: "0.5rem" }, children: t.status === "completed" ? e.jsx("button", { onClick: () => O(t), title: "Download PDF", style: { background: "#3b82f6", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: e.jsx(de, { size: 16 }) }) : e.jsxs(e.Fragment, { children: [t.status === "submitted" && e.jsx("button", { onClick: () => B(t), title: "Request Virtual Oath", style: { background: "#10b981", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: e.jsx(K, { size: 16 }) }), t.status === "rejected" && e.jsx("button", { onClick: () => H(t), title: "Resubmit for Review", style: { background: "#10b981", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: e.jsx(Ce, { size: 16 }) }), (t.status === "submitted" || t.status === "rejected" || t.status === "pending") && e.jsx("button", { onClick: () => q(t), title: "Edit Affidavit", style: { background: "#f59e0b", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: e.jsx(ne, { size: 16 }) }), !c && (t.status === "submitted" || t.status === "rejected" || t.status === "pending") && e.jsx("button", { onClick: () => S({ open: !0, affidavitId: t.id }), title: "Delete Affidavit", style: { background: "#ef4444", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: e.jsx(re, { size: 16 }) })] }) }) })] }) : o === "edit" && T ? e.jsx(oe, { user: d, isMobile: c, editMode: !0, affidavit: T, onComplete: () => { y("history"), C(null), setTimeout(() => l(), 500) } }) : o === "payments" ? e.jsx(Be, { user: d, isMobile: c }) : o === "support" ? e.jsx(Re, { user: d, isMobile: c, isStaff: !1 }) : o === "profile" ? e.jsx(_e, { user: d, isMobile: c, onUpdate: t => { localStorage.setItem("user", JSON.stringify(t)) } }) : e.jsxs("div", { className: "glass-card", style: { background: "white", textAlign: "center", padding: "4rem 2rem" }, children: [e.jsx(ne, { size: 64, style: { marginBottom: "1rem", color: "#cbd5e1" }, className: "animate-spin" }), e.jsxs("h2", { children: [o.charAt(0).toUpperCase() + o.slice(1), " Section"] }), e.jsx("p", { style: { color: "#778eaeff" }, children: "This module is currently being optimized for the best experience." }), e.jsx("button", { onClick: () => y("dash"), className: "btn btn-primary", children: "Return to Dashboard" })] }) }), p.open && e.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9999 }, children: e.jsxs(P.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "400px", width: "90%", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1)" }, children: [e.jsxs("div", { style: { textAlign: "center", marginBottom: "1.5rem" }, children: [e.jsx("div", { style: { width: "64px", height: "64px", borderRadius: "50%", background: "#fef2f2", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1rem" }, children: e.jsx(le, { size: 32, color: "#ef4444" }) }), e.jsx("h3", { style: { margin: "0 0 0.5rem", fontSize: "1.25rem" }, children: "Delete Affidavit?" }), e.jsx("p", { style: { color: "#778eaeff", margin: 0 }, children: "This action cannot be undone. The affidavit will be permanently removed from your records." })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [e.jsx("button", { onClick: () => S({ open: !1, affidavitId: null }), style: { flex: 1, padding: "0.75rem", background: "#f1f5f9", color: "#475569", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600" }, children: "Cancel" }), e.jsx("button", { onClick: J, style: { flex: 1, padding: "0.75rem", background: "#ef4444", color: "white", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600" }, children: "Delete" })] })] }) }), x.open && e.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9999 }, children: e.jsxs(P.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "450px", width: "90%", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1)" }, children: [e.jsxs("div", { style: { textAlign: "center", marginBottom: "1.5rem" }, children: [e.jsx("div", { style: { width: "64px", height: "64px", borderRadius: "50%", background: "#f0fdf4", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1rem" }, children: e.jsx(K, { size: 32, color: "#10b981" }) }), e.jsx("h3", { style: { margin: "0 0 0.5rem", fontSize: "1.25rem" }, children: "Start Live Verification?" }), e.jsxs("p", { style: { color: "#778eaeff", margin: 0 }, children: ["You are about to request a virtual oath session for ", e.jsx("strong", { children: (M = x.affidavit) == null ? void 0 : M.type }), ". A judicial officer will be notified of your request."] })] }), e.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [e.jsx("button", { onClick: () => N({ open: !1, affidavit: null }), style: { flex: 1, padding: "0.75rem", background: "#f1f5f9", color: "#475569", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600" }, children: "Cancel" }), e.jsxs("button", { onClick: z, style: { flex: 1, padding: "0.75rem", background: "#10b981", color: "white", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: ["Proceed ", e.jsx(Me, { size: 18 })] })] })] }) }), b.open && e.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9999 }, children: e.jsxs(P.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "400px", width: "90%", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1)", textAlign: "center" }, children: [e.jsx("div", { style: { width: "64px", height: "64px", borderRadius: "50%", background: b.title === "Update Failed" ? "#fef2f2" : "#ecfdf5", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: b.title === "Update Failed" ? e.jsx(re, { size: 32, color: "#ef4444" }) : e.jsx(ue, { size: 32, color: "#10b981" }) }), e.jsx("h3", { style: { margin: "0 0 0.5rem", fontSize: "1.25rem", fontWeight: "bold" }, children: b.title }), e.jsx("p", { style: { color: "#778eaeff", margin: "0 0 1.5rem" }, children: b.message }), e.jsx("button", { onClick: () => $({ open: !1, title: "", message: "" }), style: { width: "100%", padding: "0.75rem", background: b.title === "Update Failed" ? "#ef4444" : "#10b981", color: "white", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "bold" }, children: "Close" })] }) })] })] }) : e.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading user session..." }) }; export { yt as default };
