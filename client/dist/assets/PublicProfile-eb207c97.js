import { c as B, d as D, r as l, j as e, e as C, C as k, a as z } from "./index-a367903a.js"; import { C as T, I as L } from "./ImageCapture-db49fbfc.js"; import { P as R, U as O } from "./SupportTickets-1bec5e21.js"; import { U as E } from "./dateUtils-0cf2816c.js"; import { P as W } from "./phone-a42f05a3.js"; import { S as A } from "./shield-1033dda0.js"; import { L as q } from "./lock-2d4848cc.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y = [["path", { d: "M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0", key: "1r0f0z" }], ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]], M = B("map-pin", Y), $ = ({ user: _, isMobile: u, onUpdate: f }) => { const { showModal: p } = D(), [r, I] = l.useState(_), [t, b] = l.useState(!1), [s, d] = l.useState({ first_name: (r == null ? void 0 : r.first_name) || (r == null ? void 0 : r.firstName) || "", middle_name: (r == null ? void 0 : r.middle_name) || (r == null ? void 0 : r.middleName) || "", surname: (r == null ? void 0 : r.surname) || "", phone: (r == null ? void 0 : r.phone) || "", address: (r == null ? void 0 : r.address) || "", nin: (r == null ? void 0 : r.nin) || "" }), [i, m] = l.useState({ avatar: null, signature: null }), [o, g] = l.useState({ currentPassword: "", newPassword: "", confirmPassword: "" }), [h, y] = l.useState(!1), [j, w] = l.useState(!1), [N, v] = l.useState(!1), U = async a => { var c, x; a.preventDefault(), y(!0); try { const n = new FormData; Object.keys(s).forEach(S => { n.append(S, s[S] || "") }), i.avatar && n.append("avatar", i.avatar), i.signature && n.append("signature", i.signature); const P = (await z.put("/public/profile", n, { headers: { "Content-Type": "multipart/form-data" } })).data.user; I(P), f && f(P), b(!1), m({ avatar: null, signature: null }), p({ type: "success", title: "Profile Updated", message: "Your profile information has been updated successfully." }) } catch (n) { p({ type: "error", title: "Update Failed", message: ((x = (c = n.response) == null ? void 0 : c.data) == null ? void 0 : x.error) || "Failed to update profile." }) } finally { y(!1) } }, F = async a => { var c, x; if (a.preventDefault(), o.newPassword !== o.confirmPassword) return p({ type: "error", title: "Error", message: "New passwords do not match" }); w(!0); try { await z.put("/public/change-password", { currentPassword: o.currentPassword, newPassword: o.newPassword }), p({ type: "success", title: "Success", message: "Password changed successfully" }), g({ currentPassword: "", newPassword: "", confirmPassword: "" }) } catch (n) { p({ type: "error", title: "Failed", message: ((x = (c = n.response) == null ? void 0 : c.data) == null ? void 0 : x.error) || "Failed to change password" }) } finally { w(!1) } }; return e.jsxs("div", { style: { color: "primary" }, children: [e.jsxs("div", { style: { marginBottom: "2.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [e.jsxs("div", { children: [e.jsx("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0" }, children: "Account Settings" }), e.jsx("p", { style: { color: "#94a3b8" }, children: "Update your personal details and manage security" })] }), !t && e.jsxs("button", { onClick: () => b(!0), style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "10px 20px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "1px solid #3b82f6", borderRadius: "10px", cursor: "pointer", fontWeight: "600" }, children: [e.jsx(R, { size: 18 }), " Edit Profile"] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: u ? "1fr" : "1.5fr 1fr", gap: "2.5rem" }, children: [e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "2rem", marginBottom: "2.5rem" }, children: [e.jsxs("div", { style: { position: "relative" }, children: [e.jsx("div", { style: { width: "100px", height: "100px", background: "#334155", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden", border: "4px solid rgb\(18 37 74\)", boxShadow: "0 0 0 2px #3b82f6" }, children: i.avatar ? e.jsx("img", { src: URL.createObjectURL(i.avatar), style: { width: "100%", height: "100%", objectFit: "cover" }, alt: "Avatar Preview" }) : r != null && r.profile_pic ? e.jsx("img", { src: r.profile_pic, style: { width: "100%", height: "100%", objectFit: "cover" }, alt: "Profile" }) : e.jsx(E, { size: 50, color: "#778eaeff" }) }), t && e.jsx("button", { type: "button", onClick: () => v(!0), style: { position: "absolute", bottom: 0, right: 0, padding: "8px", background: "#3b82f6", borderRadius: "50%", border: "none", cursor: "pointer", color: "white", display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 4px 6px rgba(0,0,0,0.3)" }, children: e.jsx(T, { size: 16 }) }), N && e.jsx(L, { onClose: () => v(!1), onImageCaptured: a => m({ ...i, avatar: a }), title: "Update Profile Picture" })] }), e.jsxs("div", { children: [e.jsxs("h3", { style: { margin: 0, color: "#94a3b8", fontSize: "1.8rem" }, children: [(r == null ? void 0 : r.first_name) || (r == null ? void 0 : r.firstName), " ", (r == null ? void 0 : r.surname) || (r == null ? void 0 : r.surname)] }), e.jsx("p", { style: { margin: "0.25rem 0 0 0", color: "#94a3b8" }, children: r == null ? void 0 : r.email }), e.jsx("div", { style: { display: "inline-block", padding: "4px 12px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", borderRadius: "20px", fontSize: "11px", fontWeight: "700", marginTop: "0.75rem", textTransform: "uppercase", letterSpacing: "0.05em" }, children: "Applicant/Deponent" })] })] }), e.jsx("form", { onSubmit: U, children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.75rem" }, children: [e.jsxs("div", { style: { display: "grid", gridTemplateColumns: u ? "1fr" : "1fr 1fr 1fr", gap: "1.25rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "First Name" }), e.jsx("input", { type: "text", readOnly: !t, value: s.first_name, onChange: a => d({ ...s, first_name: a.target.value }), style: { width: "100%", padding: "12px", background: t ? "#0f172a" : "transparent", border: t ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Middle Name" }), e.jsx("input", { type: "text", readOnly: !t, value: s.middle_name, onChange: a => d({ ...s, middle_name: a.target.value }), style: { width: "100%", padding: "12px", background: t ? "#0f172a" : "transparent", border: t ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Surname" }), e.jsx("input", { type: "text", readOnly: !t, value: s.surname, onChange: a => d({ ...s, surname: a.target.value }), style: { width: "100%", padding: "12px", background: t ? "#0f172a" : "transparent", border: t ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: u ? "1fr" : "1fr 1fr", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Phone Number" }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsx(W, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), e.jsx("input", { type: "text", readOnly: !t, value: s.phone, onChange: a => d({ ...s, phone: a.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: t ? "#0f172a" : "transparent", border: t ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "NIN Number" }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsx(A, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), e.jsx("input", { type: "text", readOnly: !t, value: s.nin, onChange: a => d({ ...s, nin: a.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: t ? "#0f172a" : "transparent", border: t ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Residential Address" }), e.jsxs("div", { style: { position: "relative" }, children: [e.jsx(M, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), e.jsx("textarea", { readOnly: !t, value: s.address, rows: 2, onChange: a => d({ ...s, address: a.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: t ? "#0f172a" : "transparent", border: t ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none", resize: "none" } })] })] }), e.jsxs("div", { style: { borderTop: "1px solid #334155", paddingTop: "2rem" }, children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "1rem" }, children: "Digital Signature (for auto-filling)" }), e.jsxs("div", { style: { border: "2px dashed #334155", padding: "1.5rem", borderRadius: "16px", background: t ? "rgba(30, 41, 59, 0.5)" : "#0f172a", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem", position: "relative" }, children: [i.signature ? e.jsx("img", { src: URL.createObjectURL(i.signature), style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Preview" }) : r != null && r.signature_path ? e.jsx("img", { src: r.signature_path, style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Signature" }) : e.jsx(R, { size: 40, color: "#334155" }), t && e.jsxs(e.Fragment, { children: [e.jsx("input", { type: "file", id: "sig-upload", style: { display: "none" }, accept: "image/*", onChange: a => m({ ...i, signature: a.target.files[0] }) }), e.jsxs("label", { htmlFor: "sig-upload", style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "8px 16px", background: "#334155", borderRadius: "8px", cursor: "pointer", fontSize: "13px", color: "white" }, children: [e.jsx(O, { size: 16 }), " Choose Signature Image"] })] })] })] }), t && e.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [e.jsx("button", { type: "button", onClick: () => { b(!1), d({ first_name: r.first_name, middle_name: r.middle_name, surname: r.surname, phone: r.phone || "", address: r.address || "", nin: r.nin || "" }), m({ avatar: null, signature: null }) }, style: { flex: 1, padding: "12px", background: "transparent", border: "1px solid #ef4444", color: "#ef4444", borderRadius: "10px", cursor: "pointer", fontWeight: "bold" }, children: "Cancel" }), e.jsxs("button", { type: "submit", disabled: h, style: { flex: 1, padding: "12px", background: "linear-gradient(135deg, #10b981 0%, #059669 100%)", border: "none", color: "white", borderRadius: "10px", cursor: "pointer", fontWeight: "bold", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [h ? e.jsx(C, { className: "animate-spin", size: 20 }) : e.jsx(k, { size: 20 }), " Save Profile"] })] })] }) })] }), e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px" }, children: [e.jsxs("h3", { style: { margin: "0 0 2rem 0", color: "#94a3b8", display: "flex", alignItems: "center", gap: "0.75rem", fontSize: "1.4rem" }, children: [e.jsx(q, { size: 22, color: "#f59e0b" }), " Change Password"] }), e.jsx("form", { onSubmit: F, children: e.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Current Password" }), e.jsx("input", { type: "password", required: !0, value: o.currentPassword, onChange: a => g({ ...o, currentPassword: a.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "New Password" }), e.jsx("input", { type: "password", required: !0, value: o.newPassword, onChange: a => g({ ...o, newPassword: a.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), e.jsxs("div", { children: [e.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Confirm New Password" }), e.jsx("input", { type: "password", required: !0, value: o.confirmPassword, onChange: a => g({ ...o, confirmPassword: a.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), e.jsxs("button", { type: "submit", disabled: j, style: { padding: "16px", borderRadius: "12px", background: "linear-gradient(135deg, #f59e0b 0%, #d97706 100%)", border: "none", color: "white", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.75rem", marginTop: "1rem", boxShadow: "0 10px 15px -3px rgba(245, 158, 11, 0.3)" }, children: [j ? e.jsx(C, { className: "animate-spin", size: 20 }) : e.jsx(k, { size: 20 }), "Update Password"] })] }) })] })] })] }) }; export { $ as P };
