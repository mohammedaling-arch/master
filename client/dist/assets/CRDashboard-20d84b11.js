import { r as l, d as B, a as f, j as e, e as z, h as W, m as D, X as F } from "./index-a367903a.js"; import { U as w, f as C } from "./dateUtils-0cf2816c.js"; import { D as O, a as T, L as $, H as U, c as M, d as V, M as H } from "./SupportTickets-1bec5e21.js"; import { A as G } from "./arrow-left-87f00f60.js"; import { B as q } from "./briefcase-8ab53315.js"; import { S as Y } from "./shield-1033dda0.js"; import { F as _ } from "./file-text-05ff1bfe.js"; import { a as J } from "./menu-52d4f898.js"; import { C as X, a as R, R as K, b as Q } from "./RegistryAnalytics-787f1da5.js"; import { E as Z } from "./eye-7d150dac.js"; import { S as ee } from "./StaffProfile-a6896eb8.js"; import "./mail-7147b856.js"; import "./list-1b284b06.js"; import "./video-c62c1d23.js"; import "./refresh-cw-24e393f6.js"; import "./lock-2d4848cc.js"; const te = ({ appId: d, onBack: a, onSuccess: j }) => { var x, N, L, I, P; const [c, y] = l.useState(!0), [r, g] = l.useState(null), [o, v] = l.useState(""), [p, b] = l.useState(!1), { showModal: u } = B(); l.useEffect(() => { A() }, [d]); const A = async () => { y(!0); try { const t = await f.get(`/staff/probate/${d}`); g(t.data) } catch (t) { console.error("Failed to fetch probate details:", t), u({ type: "error", title: "Error", message: "Failed to load application details." }) } finally { y(!1) } }, i = async () => { b(!0); try { await f.put(`/staff/probate/${d}/approve`, { remarks: o }), u({ type: "success", title: "Application Approved", message: "Probate application has been approved. Letter of Administration is now under processing." }), j() } catch (t) { console.error("Failed to approve application:", t), u({ type: "error", title: "Action Failed", message: "Failed to approve application." }) } finally { b(!1) } }, n = async () => { if (!o) { u({ type: "warning", title: "Remarks Required", message: "Please provide a reason for rejection in the remarks field." }); return } b(!0); try { await f.put(`/staff/probate/${d}/reject`, { remarks: o }), u({ type: "error", title: "Application Rejected", message: "Probate application has been rejected and the applicant has been notified." }), j() } catch (t) { console.error("Failed to reject application:", t), u({ type: "error", title: "Action Failed", message: "Failed to reject application." }) } finally { b(!1) } }; if (c) return e.jsx("div", { style: { display: "flex", justifyContent: "center", padding: "5rem" }, children: e.jsx(z, { className: "animate-spin", size: 48, color: "#3b82f6" }) }); if (!r) return e.jsxs("div", { style: { textAlign: "center", padding: "5rem", color: "#94a3b8" }, children: [e.jsx(W, { size: 48, style: { marginBottom: "1rem" } }), e.jsx("p", { children: "Application details not found." }), e.jsx("button", { onClick: a, className: "btn btn-secondary", style: { marginTop: "1rem" }, children: "Go Back" })] }); const h = ({ title: t, icon: m, children: k, fullWidth: S = !1 }) => e.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", marginBottom: "1.5rem", padding: "1.5rem", gridColumn: S ? "1 / -1" : "span 1", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem", marginBottom: "1.25rem", paddingBottom: "0.75rem", borderBottom: "1px solid #f1f5f9" }, children: [e.jsx("div", { style: { background: "rgba(59, 130, 246, 0.1)", padding: "8px", borderRadius: "8px", color: "#3b82f6" }, children: m }), e.jsx("h3", { style: { margin: 0, fontSize: "1.1rem", color: "rgb\(18 37 74\)" }, children: t })] }), k] }), s = ({ label: t, value: m }) => e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", padding: "0.5rem 0", fontSize: "14px", borderBottom: "1px solid #f8fafc" }, children: [e.jsx("span", { style: { color: "#778eaeff" }, children: t }), e.jsx("span", { style: { color: "rgb\(18 37 74\)", fontWeight: "500", textAlign: "right" }, children: m || "N/A" })] }); return e.jsxs(D.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [e.jsxs("button", { onClick: a, style: { display: "flex", alignItems: "center", gap: "0.5rem", background: "transparent", border: "none", color: "#778eaeff", cursor: "pointer", fontWeight: "bold" }, children: [e.jsx(G, { size: 18 }), " Back to List"] }), e.jsxs("div", { style: { textAlign: "right" }, children: [e.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", background: r.status === "under_processing" ? "rgba(16, 185, 129, 0.1)" : "rgba(133, 77, 14, 0.1)", color: r.status === "under_processing" ? "#059669" : "#854d0e", fontSize: "11px", fontWeight: "bold", border: `1px solid ${r.status === "under_processing" ? "rgba(16, 185, 129, 0.2)" : "rgba(133, 77, 14, 0.2)"}` }, children: r.status === "under_processing" ? "APPROVED / PROCESSING" : "PENDING CR APPROVAL" }), e.jsxs("p", { style: { margin: "4px 0 0", color: "#94a3b8", fontSize: "12px" }, children: ["ID: PRB-", r.id] })] })] }), e.jsxs("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fit, minmax(400px, 1fr))", gap: "1.5rem" }, children: [e.jsxs(h, { title: "Deceased Information", icon: e.jsx(w, { size: 20 }), children: [e.jsx(s, { label: "Full Name", value: r.deceased_name }), e.jsx(s, { label: "Date of Death", value: C(r.date_of_death) }), e.jsx(s, { label: "Home Address", value: r.home_address }), e.jsx(s, { label: "Death Location", value: r.death_location_address }), e.jsx(s, { label: "Occupation", value: r.occupation }), e.jsx(s, { label: "Employer", value: r.employer_name }), e.jsx(s, { label: "Employer Address", value: r.employer_address })] }), e.jsxs(h, { title: "Applicant/Next of Kin", icon: e.jsx(T, { size: 20 }), children: [e.jsxs("div", { style: { display: "flex", gap: "1.5rem", marginBottom: "1rem", alignItems: "flex-start" }, children: [e.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "12px", overflow: "hidden", background: "#f1f5f9", border: "1px solid #e2e8f0", flexShrink: 0 }, children: r.profile_pic ? e.jsx("img", { src: r.profile_pic.startsWith("http") ? r.profile_pic : `${((x = f.defaults.baseURL) == null ? void 0 : x.replace("/api", "")) || ""}${r.profile_pic}`, alt: "Applicant", style: { width: "100%", height: "100%", objectFit: "cover" } }) : e.jsx("div", { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", color: "#94a3b8" }, children: e.jsx(w, { size: 32 }) }) }), e.jsxs("div", { style: { flex: 1 }, children: [e.jsx(s, { label: "Full Name", value: `${r.first_name} ${r.surname}` }), e.jsx(s, { label: "Email", value: r.email }), e.jsx(s, { label: "Phone", value: r.phone })] })] }), e.jsx(s, { label: "Relationship", value: r.relationship_to_nok }), e.jsx(s, { label: "Address", value: r.address })] }), e.jsx(h, { title: "Beneficiaries", icon: e.jsx(T, { size: 20 }), fullWidth: !0, children: ((N = r.beneficiaries) == null ? void 0 : N.length) > 0 ? e.jsx("div", { style: { overflowX: "auto" }, children: e.jsxs("table", { style: { width: "100%", borderCollapse: "collapse", fontSize: "13px" }, children: [e.jsx("thead", { children: e.jsxs("tr", { style: { textAlign: "left", borderBottom: "2px solid #f1f5f9" }, children: [e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Name" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Relationship" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Age/Gender" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Contact" }), e.jsx("th", { style: { padding: "12px", color: "#778eaeff" }, children: "Address" })] }) }), e.jsx("tbody", { children: r.beneficiaries.map((t, m) => e.jsxs("tr", { style: { borderBottom: "1px solid #f8fafc" }, children: [e.jsx("td", { style: { padding: "12px", fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: t.name }), e.jsx("td", { style: { padding: "12px", color: "rgb\(18 37 74\)" }, children: t.relationship }), e.jsxs("td", { style: { padding: "12px", color: "rgb\(18 37 74\)" }, children: [t.age, "Y / ", t.gender] }), e.jsx("td", { style: { padding: "12px", color: "rgb\(18 37 74\)" }, children: t.phone || "N/A" }), e.jsx("td", { style: { padding: "12px", color: "#778eaeff" }, children: t.address || "N/A" })] }, m)) })] }) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No beneficiaries listed" }) }), e.jsx(h, { title: "Estate Assets", icon: e.jsx(q, { size: 20 }), fullWidth: !0, children: ((L = r.assets) == null ? void 0 : L.length) > 0 ? e.jsx("div", { style: { display: "grid", gridTemplateColumns: "repeat(auto-fill, minmax(350px, 1fr))", gap: "1rem" }, children: r.assets.map((t, m) => e.jsxs("div", { style: { padding: "1.25rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #f1f5f9" }, children: [e.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start", marginBottom: "1rem" }, children: [e.jsxs("div", { children: [e.jsx("span", { style: { fontSize: "10px", fontWeight: "bold", color: "#3b82f6", textTransform: "uppercase", background: "rgba(59, 130, 246, 0.1)", padding: "2px 8px", borderRadius: "4px" }, children: t.estate_type || t.asset_type || "Asset" }), e.jsx("h4", { style: { margin: "8px 0 0", color: "rgb\(18 37 74\)" }, children: t.property_name || t.bank_name || t.broker_name || "Asset Entry" })] }), e.jsxs("div", { style: { color: "#10b981", fontWeight: "bold", fontSize: "1.1rem" }, children: ["₦", (t.property_value || t.bank_balance || t.share_value || t.estimated_value || 0).toLocaleString()] })] }), e.jsxs("div", { style: { fontSize: "12px", color: "#778eaeff", display: "grid", gap: "4px" }, children: [t.property_address && e.jsxs("div", { children: [e.jsx("strong", { children: "Address:" }), " ", t.property_address] }), t.bank_account && e.jsxs("div", { children: [e.jsx("strong", { children: "Account:" }), " ", t.bank_account, " (", t.bank_account_name, ")"] }), t.broker_account && e.jsxs("div", { children: [e.jsx("strong", { children: "Broker A/C:" }), " ", t.broker_account, " (", t.broker_account_name, ")"] }), t.remark && e.jsxs("div", { style: { marginTop: "8px", fontStyle: "italic" }, children: ['"', t.remark, '"'] })] })] }, m)) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No estate assets listed" }) }), e.jsx(h, { title: "Sureties", icon: e.jsx(Y, { size: 20 }), children: ((I = r.sureties) == null ? void 0 : I.length) > 0 ? e.jsx("div", { style: { display: "grid", gap: "1rem" }, children: r.sureties.map((t, m) => { var k, S; return e.jsxs("div", { style: { padding: "1rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #f1f5f9", display: "flex", gap: "1rem", alignItems: "center" }, children: [e.jsx("div", { style: { width: "60px", height: "60px", borderRadius: "8px", overflow: "hidden", background: "#e2e8f0", flexShrink: 0 }, children: t.picture_path ? e.jsx("img", { src: t.picture_path.startsWith("http") ? t.picture_path : `${((k = f.defaults.baseURL) == null ? void 0 : k.replace("/api", "")) || ""}${t.picture_path}`, alt: t.name, style: { width: "100%", height: "100%", objectFit: "cover" } }) : e.jsx("div", { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", color: "#94a3b8" }, children: e.jsx(w, { size: 24 }) }) }), e.jsxs("div", { style: { flex: 1 }, children: [e.jsx("div", { style: { color: "rgb\(18 37 74\)", fontWeight: "bold", marginBottom: "2px" }, children: t.name }), e.jsxs("div", { style: { color: "#778eaeff", fontSize: "12px" }, children: [t.occupation || "N/A", " • ", t.phone || "No phone"] }), e.jsxs("div", { style: { color: "#10b981", fontSize: "11px", fontWeight: "600", marginTop: "2px" }, children: ["Net Worth: ₦", ((S = t.networth) == null ? void 0 : S.toLocaleString()) || 0] }), e.jsx("div", { style: { marginTop: "8px", fontSize: "12px" }, children: e.jsx("span", { style: { padding: "2px 6px", borderRadius: "4px", fontSize: "10px", textTransform: "uppercase", fontWeight: "bold", background: t.acceptance === "accepted" ? "#dcfce7" : "#f1f5f9", color: t.acceptance === "accepted" ? "#15803d" : "#778eaeff" }, children: t.acceptance || "Pending" }) })] })] }, m) }) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No sureties provided" }) }), e.jsx(h, { title: "Attached Documents", icon: e.jsx(_, { size: 20 }), children: ((P = r.documents) == null ? void 0 : P.length) > 0 ? e.jsx("div", { style: { display: "grid", gap: "0.75rem" }, children: r.documents.map((t, m) => { var k; return e.jsxs("a", { href: (t.document_path || t.file_path || "#").startsWith("http") ? t.document_path || t.file_path : `${((k = f.defaults.baseURL) == null ? void 0 : k.replace("/api", "")) || ""}${t.document_path || t.file_path}`, target: "_blank", rel: "noreferrer", style: { padding: "0.75rem", background: "#f8fafc", borderRadius: "8px", fontSize: "13px", display: "flex", justifyContent: "space-between", alignItems: "center", color: "#3b82f6", textDecoration: "none", border: "1px solid #f1f5f9" }, children: [e.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx(_, { size: 16 }), e.jsx("span", { children: t.document_name || t.document_type })] }), e.jsx(J, { size: 16 })] }, m) }) }) : e.jsx("p", { style: { color: "#778eaeff", fontSize: "13px" }, children: "No documents uploaded" }) })] }), e.jsx(h, { title: "Registrar's Remarks", icon: e.jsx(X, { size: 20 }), fullWidth: !0, children: e.jsxs("div", { style: { padding: "1rem", background: "#f8fafc", borderRadius: "8px", border: "1px solid #e2e8f0", color: "#334155", fontStyle: "italic" }, children: ['"', r.registrar_remarks || "No remarks from Registrar.", '"'] }) }), r.status !== "under_processing" && r.status !== "completed" && r.status !== "rejected" ? e.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", marginTop: "2rem", padding: "2rem", boxShadow: "0 10px 15px -3px rgba(0,0,0,0.1)" }, children: [e.jsxs("h3", { style: { color: "rgb\(18 37 74\)", marginBottom: "1rem", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [e.jsx(R, { size: 20, color: "#10b981" }), "Final Approval"] }), e.jsx("p", { style: { color: "#778eaeff", fontSize: "14px", marginBottom: "1.5rem" }, children: "Add any remarks and approve the application. This will initiate the processing of the Letter of Administration for the applicant." }), e.jsx("textarea", { value: o, onChange: t => v(t.target.value), placeholder: "Add final approval remarks (optional)...", style: { width: "100%", minHeight: "120px", padding: "1rem", background: "#f8fafc", border: "1px solid #e2e8f0", borderRadius: "12px", color: "rgb\(18 37 74\)", outline: "none", fontSize: "14px", marginBottom: "1.5rem" } }), e.jsxs("div", { style: { display: "flex", justifyContent: "flex-end", gap: "1rem" }, children: [e.jsx("button", { onClick: a, disabled: p, className: "btn-secondary", style: { padding: "0.8rem 2rem", borderRadius: "8px" }, children: "Cancel" }), e.jsxs("button", { onClick: n, disabled: p, className: "btn", style: { padding: "0.8rem 2rem", borderRadius: "8px", background: "#fee2e2", color: "#b91c1c", border: "1px solid #fecaca", display: "flex", alignItems: "center", gap: "0.5rem", cursor: p ? "not-allowed" : "pointer", fontWeight: "bold" }, children: [p ? e.jsx(z, { className: "animate-spin", size: 18 }) : e.jsx(F, { size: 18 }), "Return for Correction"] }), e.jsxs("button", { onClick: i, disabled: p, className: "btn btn-primary", style: { padding: "0.8rem 3rem", borderRadius: "8px", background: "#10b981", color: "white", border: "none", display: "flex", alignItems: "center", gap: "0.5rem", cursor: p ? "not-allowed" : "pointer" }, children: [p ? e.jsx(z, { className: "animate-spin", size: 18 }) : e.jsx(R, { size: 18 }), "Approve & Sign"] })] })] }) : e.jsxs("div", { className: "glass-card", style: { background: "#f8fafc", border: "1px solid #e2e8f0", marginTop: "2rem", padding: "2rem", textAlign: "center" }, children: [e.jsx(R, { size: 48, color: "#10b981", style: { margin: "0 auto 1rem" } }), e.jsxs("h3", { style: { color: "rgb\(18 37 74\)", marginBottom: "0.5rem" }, children: ["Application Already ", r.status.replace("_", " ").toUpperCase()] }), e.jsxs("p", { style: { color: "#778eaeff", fontSize: "14px", marginBottom: "1.5rem" }, children: ["This application has already been processed and is currently marked as ", e.jsx("strong", { children: r.status.replace("_", " ") }), "."] }), e.jsx("button", { onClick: a, className: "btn-secondary", style: { padding: "0.8rem 2rem", borderRadius: "8px" }, children: "Back to List" })] })] }) }, E = ({ isMobile: d, mode: a = "cr_pending", title: j }) => { const [c, y] = l.useState([]), [r, g] = l.useState(!0), [o, v] = l.useState(null), { showModal: p } = B(); l.useEffect(() => { b() }, [a]); const b = async () => { g(!0); try { let i = "/staff/probate/cr-pending"; a === "history" ? i = "/staff/probate/letters" : a === "all" && (i = "/staff/probate/all"); const n = await f.get(i); y(Array.isArray(n.data) ? n.data : []) } catch (i) { console.error("Failed to fetch probate apps:", i), p({ type: "error", title: "Error", message: "Failed to load applications." }) } finally { g(!1) } }; if (o) return e.jsx(te, { appId: o, onBack: () => v(null), onSuccess: () => { v(null), b() } }); const u = [{ key: "id", label: "APP ID", sortable: !0, render: i => e.jsxs("span", { style: { fontWeight: "bold" }, children: ["PRB-", i] }) }, { key: "deceased_name", label: "DECEASED NAME", sortable: !0, render: i => e.jsx("span", { style: { fontWeight: "500" }, children: i }) }, { key: "first_name", label: "APPLICANT", sortable: !0, render: (i, n) => e.jsxs("div", { children: [e.jsxs("div", { style: { fontWeight: "500" }, children: [i, " ", n.surname] }), e.jsx("div", { style: { color: "#94a3b8", fontSize: "11px" }, children: C(n.created_at) })] }) }, { key: "status", label: "STATUS", sortable: !0, render: i => e.jsx("span", { style: { padding: "4px 10px", borderRadius: "20px", fontSize: "11px", fontWeight: "600", textTransform: "uppercase", background: i === "approved" || i === "completed" ? "#dcfce7" : i === "under_processing" ? "#dbeafe" : "#fef9c3", color: i === "approved" || i === "completed" ? "#15803d" : i === "under_processing" ? "#1e40af" : "#854d0e", border: "1px solid currentColor" }, children: (i || "pending").replace("_", " ") }) }, { key: "approval", label: "APPROVAL", sortable: !0, render: (i, n) => e.jsx("div", { style: { fontWeight: "500", color: i === "approved" ? "#10b981" : "#778eaeff" }, children: i ? i.charAt(0).toUpperCase() + i.slice(1) : n.status === "approved" || n.status === "completed" || n.status === "under_processing" ? "Approved" : "Pending" }) }, { key: "approval_date", label: "APPROVAL DATE", sortable: !0, render: (i, n) => i || n.status === "approved" && n.updated_at ? e.jsx("div", { style: { fontSize: "12px" }, children: C(i || n.updated_at) }) : "---" }], A = i => e.jsxs("div", { style: { display: "flex", gap: "8px" }, children: [e.jsxs("button", { onClick: () => v(i.id), className: "btn btn-primary", style: { padding: "8px 16px", fontSize: "13px", display: "flex", alignItems: "center", gap: "8px" }, children: [e.jsx(Z, { size: 16 }), " View"] }), i.status === "completed" && e.jsxs("button", { onClick: n => { n.stopPropagation(), (async () => { try { const s = await f.get(`/staff/probate/${i.id}/letter-pdf`); s.data.path && window.open(`${f.defaults.baseURL.replace("/api", "")}${s.data.path}`, "_blank") } catch (s) { console.error("Failed to load letter:", s), p({ type: "error", title: "Error", message: "Failed to load Letter of Administration." }) } })() }, className: "btn btn-secondary", title: "View Letter of Administration", style: { padding: "8px 16px", fontSize: "13px", display: "flex", alignItems: "center", gap: "8px", background: "#f1f5f9", color: "rgb\(18 37 74\)", border: "1px solid #e2e8f0", cursor: "pointer" }, children: [e.jsx(_, { size: 16 }), " Letter"] })] }); return e.jsxs("div", { style: { padding: d ? "0" : "1rem" }, children: [e.jsxs("div", { style: { marginBottom: "2rem" }, children: [e.jsx("h2", { style: { color: "rgb\(18 37 74\)", margin: 0 }, children: j || "Probate Approvals" }), e.jsx("p", { style: { color: "#778eaeff", fontSize: "14px" }, children: a === "history" ? "View approved letters of administration" : "Review and give final approval for probate applications" })] }), e.jsx(O, { columns: u, data: c, loading: r, actions: A, isMobile: d, searchPlaceholder: "Search by ID or name..." })] }) }, ue = ({ staff: d }) => { var h; const [a, j] = l.useState(d), [c, y] = l.useState("dashboard"), [r, g] = l.useState(window.innerWidth > 1024), [o, v] = l.useState(window.innerWidth <= 1024); l.useEffect(() => { const s = () => { const x = window.innerWidth <= 1024; v(x), g(!x) }; return window.addEventListener("resize", s), () => window.removeEventListener("resize", s) }, []), l.useEffect(() => { const s = async () => { try { const x = await f.get("/staff/profile"); j(x.data), localStorage.setItem("staff", JSON.stringify(x.data)) } catch (x) { console.error("Failed to refresh staff info:", x) } }; d != null && d.id && s() }, [d == null ? void 0 : d.id]); const p = () => { localStorage.removeItem("staffToken"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, b = [{ icon: e.jsx(V, { size: 20 }), label: "Overview", id: "dashboard" }, { icon: e.jsx(Q, { size: 20 }), label: "All Probate Applications", id: "review" }, { icon: e.jsx(_, { size: 20 }), label: "Letter of Administration", id: "letters" }, { icon: e.jsx(H, { size: 20 }), label: "Support", id: "support" }, { icon: e.jsx(w, { size: 20 }), label: "My Profile", id: "profile" }], [u, A] = l.useState([]), i = async () => { try { const s = await f.get("/notifications/staff"); A(s.data) } catch (s) { console.error("Failed to fetch notifications:", s) } }, n = async s => { try { await f.put(`/notifications/staff/${s}/read`), i() } catch (x) { console.error("Error marking read:", x) } }; return l.useEffect(() => { if (a != null && a.id) { i(); const s = setInterval(i, 3e4); return () => clearInterval(s) } }, [a == null ? void 0 : a.id]), a ? e.jsxs("div", { style: { display: "flex", height: "100vh", overflow: "hidden", background: "#f8fafc", color: "#3d2b1f", position: "relative" }, children: [o && r && e.jsx("div", { onClick: () => g(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), e.jsxs("aside", { style: { width: r ? "260px" : o ? "0" : "80px", background: "#3d2b1f", padding: "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: o ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: o && r ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [e.jsxs("div", { style: { padding: "2rem", marginBottom: "1rem", display: "flex", alignItems: "center", justifyContent: r ? "flex-start" : "center", gap: "1rem" }, children: [e.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%", flexShrink: 0 } }), r && e.jsxs("div", { style: { whiteSpace: "nowrap", animation: "fadeIn 0.2s" }, children: [e.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS CR" }), e.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), e.jsx("nav", { style: { flex: 1, overflowY: "auto", padding: "0 1rem" }, children: b.map(s => e.jsxs("div", { onClick: () => { y(s.id), o && g(!1) }, title: r ? "" : s.label, style: { display: "flex", alignItems: "center", justifyContent: r ? "flex-start" : "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: c === s.id ? "#5d4037" : "transparent", color: c === s.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [s.icon, r && e.jsx("span", { style: { animation: "fadeIn 0.2s" }, children: s.label })] }, s.id)) }), e.jsx("div", { style: { padding: "1rem" }, children: e.jsxs("button", { onClick: p, title: r ? "" : "Logout", style: { width: "100%", display: "flex", alignItems: "center", justifyContent: r ? "flex-start" : "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", borderRadius: "12px", transition: "background 0.2s" }, onMouseOver: s => s.currentTarget.style.background = "rgba(239, 68, 68, 0.1)", onMouseOut: s => s.currentTarget.style.background = "transparent", children: [e.jsx($, { size: 20 }), r && e.jsx("span", { style: { animation: "fadeIn 0.2s" }, children: "Logout" })] }) })] }), e.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", height: "100vh", overflowY: "auto", width: "100%" }, children: [e.jsx(U, { user: a, title: ((h = b.find(s => s.id === c)) == null ? void 0 : h.label) || "CR Overview", onLogout: p, onSidebarToggle: () => g(!r), onProfileClick: () => y("profile"), onSettingsClick: () => y("profile"), sidebarOpen: r, notifications: u, onNotificationRead: n, isMobile: o }), e.jsx("div", { style: { padding: o ? "1rem" : "2.5rem", flex: 1 }, children: c === "dashboard" ? e.jsx(K, { isMobile: o, role: "cr", onViewQueue: () => y("review") }) : c === "review" ? e.jsx(E, { isMobile: o, mode: "cr_pending", title: "Probate Approval Requests" }) : c === "letters" ? e.jsx(E, { isMobile: o, mode: "history", title: "Letter of Administration" }) : c === "support" ? e.jsx(M, { user: a, isMobile: o, isStaff: !0 }) : c === "profile" ? e.jsx(ee, { staff: a, isMobile: o, onUpdate: s => { j(s), localStorage.setItem("staff", JSON.stringify(s)) } }) : e.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white" }, children: [e.jsx("h2", { children: c.charAt(0).toUpperCase() + c.slice(1) }), e.jsxs("p", { style: { color: "#94a3b8", marginTop: "1rem" }, children: ['Module view for "', c, '" is currently being implemented.'] })] }) })] })] }) : e.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading CR session..." }) }; export { ue as default };
