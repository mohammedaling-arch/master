var G2 = Object.defineProperty; var K2 = (e, t, r) => t in e ? G2(e, t, { enumerable: !0, configurable: !0, writable: !0, value: r }) : e[t] = r; var ve = (e, t, r) => (K2(e, typeof t != "symbol" ? t + "" : t, r), r), vb = (e, t, r) => { if (!t.has(e)) throw TypeError("Cannot " + r) }; var kr = (e, t, r) => (vb(e, t, "read from private field"), r ? r.call(e) : t.get(e)), Li = (e, t, r) => { if (t.has(e)) throw TypeError("Cannot add the same private member more than once"); t instanceof WeakSet ? t.add(e) : t.set(e, r) }, Ln = (e, t, r, n) => (vb(e, t, "write to private field"), n ? n.call(e, r) : t.set(e, r), r); (function () { const t = document.createElement("link").relList; if (t && t.supports && t.supports("modulepreload")) return; for (const s of document.querySelectorAll('link[rel="modulepreload"]')) n(s); new MutationObserver(s => { for (const o of s) if (o.type === "childList") for (const a of o.addedNodes) a.tagName === "LINK" && a.rel === "modulepreload" && n(a) }).observe(document, { childList: !0, subtree: !0 }); function r(s) { const o = {}; return s.integrity && (o.integrity = s.integrity), s.referrerPolicy && (o.referrerPolicy = s.referrerPolicy), s.crossOrigin === "use-credentials" ? o.credentials = "include" : s.crossOrigin === "anonymous" ? o.credentials = "omit" : o.credentials = "same-origin", o } function n(s) { if (s.ep) return; s.ep = !0; const o = r(s); fetch(s.href, o) } })(); function C_(e) { return e && e.__esModule && Object.prototype.hasOwnProperty.call(e, "default") ? e.default : e } var R_ = { exports: {} }, Gf = {}, k_ = { exports: {} }, zr = {};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp = Symbol.for("react.element"), Y2 = Symbol.for("react.portal"), Q2 = Symbol.for("react.fragment"), J2 = Symbol.for("react.strict_mode"), X2 = Symbol.for("react.profiler"), Z2 = Symbol.for("react.provider"), eR = Symbol.for("react.context"), tR = Symbol.for("react.forward_ref"), rR = Symbol.for("react.suspense"), nR = Symbol.for("react.memo"), iR = Symbol.for("react.lazy"), yb = Symbol.iterator; function sR(e) { return e === null || typeof e != "object" ? null : (e = yb && e[yb] || e["@@iterator"], typeof e == "function" ? e : null) } var T_ = { isMounted: function () { return !1 }, enqueueForceUpdate: function () { }, enqueueReplaceState: function () { }, enqueueSetState: function () { } }, A_ = Object.assign, P_ = {}; function zd(e, t, r) { this.props = e, this.context = t, this.refs = P_, this.updater = r || T_ } zd.prototype.isReactComponent = {}; zd.prototype.setState = function (e, t) { if (typeof e != "object" && typeof e != "function" && e != null) throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables."); this.updater.enqueueSetState(this, e, t, "setState") }; zd.prototype.forceUpdate = function (e) { this.updater.enqueueForceUpdate(this, e, "forceUpdate") }; function D_() { } D_.prototype = zd.prototype; function cv(e, t, r) { this.props = e, this.context = t, this.refs = P_, this.updater = r || T_ } var dv = cv.prototype = new D_; dv.constructor = cv; A_(dv, zd.prototype); dv.isPureReactComponent = !0; var bb = Array.isArray, I_ = Object.prototype.hasOwnProperty, uv = { current: null }, j_ = { key: !0, ref: !0, __self: !0, __source: !0 }; function O_(e, t, r) { var n, s = {}, o = null, a = null; if (t != null) for (n in t.ref !== void 0 && (a = t.ref), t.key !== void 0 && (o = "" + t.key), t) I_.call(t, n) && !j_.hasOwnProperty(n) && (s[n] = t[n]); var c = arguments.length - 2; if (c === 1) s.children = r; else if (1 < c) { for (var l = Array(c), p = 0; p < c; p++)l[p] = arguments[p + 2]; s.children = l } if (e && e.defaultProps) for (n in c = e.defaultProps, c) s[n] === void 0 && (s[n] = c[n]); return { $$typeof: Pp, type: e, key: o, ref: a, props: s, _owner: uv.current } } function aR(e, t) { return { $$typeof: Pp, type: e.type, key: t, ref: e.ref, props: e.props, _owner: e._owner } } function pv(e) { return typeof e == "object" && e !== null && e.$$typeof === Pp } function oR(e) { var t = { "=": "=0", ":": "=2" }; return "$" + e.replace(/[=:]/g, function (r) { return t[r] }) } var xb = /\/+/g; function Hm(e, t) { return typeof e == "object" && e !== null && e.key != null ? oR("" + e.key) : t.toString(36) } function Bh(e, t, r, n, s) { var o = typeof e; (o === "undefined" || o === "boolean") && (e = null); var a = !1; if (e === null) a = !0; else switch (o) { case "string": case "number": a = !0; break; case "object": switch (e.$$typeof) { case Pp: case Y2: a = !0 } }if (a) return a = e, s = s(a), e = n === "" ? "." + Hm(a, 0) : n, bb(s) ? (r = "", e != null && (r = e.replace(xb, "$&/") + "/"), Bh(s, t, r, "", function (p) { return p })) : s != null && (pv(s) && (s = aR(s, r + (!s.key || a && a.key === s.key ? "" : ("" + s.key).replace(xb, "$&/") + "/") + e)), t.push(s)), 1; if (a = 0, n = n === "" ? "." : n + ":", bb(e)) for (var c = 0; c < e.length; c++) { o = e[c]; var l = n + Hm(o, c); a += Bh(o, t, r, l, s) } else if (l = sR(e), typeof l == "function") for (e = l.call(e), c = 0; !(o = e.next()).done;)o = o.value, l = n + Hm(o, c++), a += Bh(o, t, r, l, s); else if (o === "object") throw t = String(e), Error("Objects are not valid as a React child (found: " + (t === "[object Object]" ? "object with keys {" + Object.keys(e).join(", ") + "}" : t) + "). If you meant to render a collection of children, use an array instead."); return a } function hh(e, t, r) { if (e == null) return e; var n = [], s = 0; return Bh(e, n, "", "", function (o) { return t.call(r, o, s++) }), n } function lR(e) { if (e._status === -1) { var t = e._result; t = t(), t.then(function (r) { (e._status === 0 || e._status === -1) && (e._status = 1, e._result = r) }, function (r) { (e._status === 0 || e._status === -1) && (e._status = 2, e._result = r) }), e._status === -1 && (e._status = 0, e._result = t) } if (e._status === 1) return e._result.default; throw e._result } var hs = { current: null }, Fh = { transition: null }, cR = { ReactCurrentDispatcher: hs, ReactCurrentBatchConfig: Fh, ReactCurrentOwner: uv }; function M_() { throw Error("act(...) is not supported in production builds of React.") } zr.Children = { map: hh, forEach: function (e, t, r) { hh(e, function () { t.apply(this, arguments) }, r) }, count: function (e) { var t = 0; return hh(e, function () { t++ }), t }, toArray: function (e) { return hh(e, function (t) { return t }) || [] }, only: function (e) { if (!pv(e)) throw Error("React.Children.only expected to receive a single React element child."); return e } }; zr.Component = zd; zr.Fragment = Q2; zr.Profiler = X2; zr.PureComponent = cv; zr.StrictMode = J2; zr.Suspense = rR; zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = cR; zr.act = M_; zr.cloneElement = function (e, t, r) { if (e == null) throw Error("React.cloneElement(...): The argument must be a React element, but you passed " + e + "."); var n = A_({}, e.props), s = e.key, o = e.ref, a = e._owner; if (t != null) { if (t.ref !== void 0 && (o = t.ref, a = uv.current), t.key !== void 0 && (s = "" + t.key), e.type && e.type.defaultProps) var c = e.type.defaultProps; for (l in t) I_.call(t, l) && !j_.hasOwnProperty(l) && (n[l] = t[l] === void 0 && c !== void 0 ? c[l] : t[l]) } var l = arguments.length - 2; if (l === 1) n.children = r; else if (1 < l) { c = Array(l); for (var p = 0; p < l; p++)c[p] = arguments[p + 2]; n.children = c } return { $$typeof: Pp, type: e.type, key: s, ref: o, props: n, _owner: a } }; zr.createContext = function (e) { return e = { $$typeof: eR, _currentValue: e, _currentValue2: e, _threadCount: 0, Provider: null, Consumer: null, _defaultValue: null, _globalName: null }, e.Provider = { $$typeof: Z2, _context: e }, e.Consumer = e }; zr.createElement = O_; zr.createFactory = function (e) { var t = O_.bind(null, e); return t.type = e, t }; zr.createRef = function () { return { current: null } }; zr.forwardRef = function (e) { return { $$typeof: tR, render: e } }; zr.isValidElement = pv; zr.lazy = function (e) { return { $$typeof: iR, _payload: { _status: -1, _result: e }, _init: lR } }; zr.memo = function (e, t) { return { $$typeof: nR, type: e, compare: t === void 0 ? null : t } }; zr.startTransition = function (e) { var t = Fh.transition; Fh.transition = {}; try { e() } finally { Fh.transition = t } }; zr.unstable_act = M_; zr.useCallback = function (e, t) { return hs.current.useCallback(e, t) }; zr.useContext = function (e) { return hs.current.useContext(e) }; zr.useDebugValue = function () { }; zr.useDeferredValue = function (e) { return hs.current.useDeferredValue(e) }; zr.useEffect = function (e, t) { return hs.current.useEffect(e, t) }; zr.useId = function () { return hs.current.useId() }; zr.useImperativeHandle = function (e, t, r) { return hs.current.useImperativeHandle(e, t, r) }; zr.useInsertionEffect = function (e, t) { return hs.current.useInsertionEffect(e, t) }; zr.useLayoutEffect = function (e, t) { return hs.current.useLayoutEffect(e, t) }; zr.useMemo = function (e, t) { return hs.current.useMemo(e, t) }; zr.useReducer = function (e, t, r) { return hs.current.useReducer(e, t, r) }; zr.useRef = function (e) { return hs.current.useRef(e) }; zr.useState = function (e) { return hs.current.useState(e) }; zr.useSyncExternalStore = function (e, t, r) { return hs.current.useSyncExternalStore(e, t, r) }; zr.useTransition = function () { return hs.current.useTransition() }; zr.version = "18.3.1"; k_.exports = zr; var J = k_.exports; const us = C_(J);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR = J, uR = Symbol.for("react.element"), pR = Symbol.for("react.fragment"), hR = Object.prototype.hasOwnProperty, fR = dR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, mR = { key: !0, ref: !0, __self: !0, __source: !0 }; function L_(e, t, r) { var n, s = {}, o = null, a = null; r !== void 0 && (o = "" + r), t.key !== void 0 && (o = "" + t.key), t.ref !== void 0 && (a = t.ref); for (n in t) hR.call(t, n) && !mR.hasOwnProperty(n) && (s[n] = t[n]); if (e && e.defaultProps) for (n in t = e.defaultProps, t) s[n] === void 0 && (s[n] = t[n]); return { $$typeof: uR, type: e, key: o, ref: a, props: s, _owner: fR.current } } Gf.Fragment = pR; Gf.jsx = L_; Gf.jsxs = L_; R_.exports = Gf; var i = R_.exports, $0 = {}, N_ = { exports: {} }, Vs = {}, B_ = { exports: {} }, F_ = {};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function (e) { function t(B, Q) { var Z = B.length; B.push(Q); e: for (; 0 < Z;) { var le = Z - 1 >>> 1, X = B[le]; if (0 < s(X, Q)) B[le] = Q, B[Z] = X, Z = le; else break e } } function r(B) { return B.length === 0 ? null : B[0] } function n(B) { if (B.length === 0) return null; var Q = B[0], Z = B.pop(); if (Z !== Q) { B[0] = Z; e: for (var le = 0, X = B.length, ce = X >>> 1; le < ce;) { var he = 2 * (le + 1) - 1, ue = B[he], ye = he + 1, se = B[ye]; if (0 > s(ue, Z)) ye < X && 0 > s(se, ue) ? (B[le] = se, B[ye] = Z, le = ye) : (B[le] = ue, B[he] = Z, le = he); else if (ye < X && 0 > s(se, Z)) B[le] = se, B[ye] = Z, le = ye; else break e } } return Q } function s(B, Q) { var Z = B.sortIndex - Q.sortIndex; return Z !== 0 ? Z : B.id - Q.id } if (typeof performance == "object" && typeof performance.now == "function") { var o = performance; e.unstable_now = function () { return o.now() } } else { var a = Date, c = a.now(); e.unstable_now = function () { return a.now() - c } } var l = [], p = [], d = 1, f = null, h = 3, P = !1, b = !1, u = !1, g = typeof setTimeout == "function" ? setTimeout : null, S = typeof clearTimeout == "function" ? clearTimeout : null, R = typeof setImmediate < "u" ? setImmediate : null; typeof navigator < "u" && navigator.scheduling !== void 0 && navigator.scheduling.isInputPending !== void 0 && navigator.scheduling.isInputPending.bind(navigator.scheduling); function y(B) { for (var Q = r(p); Q !== null;) { if (Q.callback === null) n(p); else if (Q.startTime <= B) n(p), Q.sortIndex = Q.expirationTime, t(l, Q); else break; Q = r(p) } } function v(B) { if (u = !1, y(B), !b) if (r(l) !== null) b = !0, K(D); else { var Q = r(p); Q !== null && N(v, Q.startTime - B) } } function D(B, Q) { b = !1, u && (u = !1, S(I), I = -1), P = !0; var Z = h; try { for (y(Q), f = r(l); f !== null && (!(f.expirationTime > Q) || B && !k());) { var le = f.callback; if (typeof le == "function") { f.callback = null, h = f.priorityLevel; var X = le(f.expirationTime <= Q); Q = e.unstable_now(), typeof X == "function" ? f.callback = X : f === r(l) && n(l), y(Q) } else n(l); f = r(l) } if (f !== null) var ce = !0; else { var he = r(p); he !== null && N(v, he.startTime - Q), ce = !1 } return ce } finally { f = null, h = Z, P = !1 } } var M = !1, W = null, I = -1, E = 5, _ = -1; function k() { return !(e.unstable_now() - _ < E) } function L() { if (W !== null) { var B = e.unstable_now(); _ = B; var Q = !0; try { Q = W(!0, B) } finally { Q ? H() : (M = !1, W = null) } } else M = !1 } var H; if (typeof R == "function") H = function () { R(L) }; else if (typeof MessageChannel < "u") { var V = new MessageChannel, ee = V.port2; V.port1.onmessage = L, H = function () { ee.postMessage(null) } } else H = function () { g(L, 0) }; function K(B) { W = B, M || (M = !0, H()) } function N(B, Q) { I = g(function () { B(e.unstable_now()) }, Q) } e.unstable_IdlePriority = 5, e.unstable_ImmediatePriority = 1, e.unstable_LowPriority = 4, e.unstable_NormalPriority = 3, e.unstable_Profiling = null, e.unstable_UserBlockingPriority = 2, e.unstable_cancelCallback = function (B) { B.callback = null }, e.unstable_continueExecution = function () { b || P || (b = !0, K(D)) }, e.unstable_forceFrameRate = function (B) { 0 > B || 125 < B ? console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported") : E = 0 < B ? Math.floor(1e3 / B) : 5 }, e.unstable_getCurrentPriorityLevel = function () { return h }, e.unstable_getFirstCallbackNode = function () { return r(l) }, e.unstable_next = function (B) { switch (h) { case 1: case 2: case 3: var Q = 3; break; default: Q = h }var Z = h; h = Q; try { return B() } finally { h = Z } }, e.unstable_pauseExecution = function () { }, e.unstable_requestPaint = function () { }, e.unstable_runWithPriority = function (B, Q) { switch (B) { case 1: case 2: case 3: case 4: case 5: break; default: B = 3 }var Z = h; h = B; try { return Q() } finally { h = Z } }, e.unstable_scheduleCallback = function (B, Q, Z) { var le = e.unstable_now(); switch (typeof Z == "object" && Z !== null ? (Z = Z.delay, Z = typeof Z == "number" && 0 < Z ? le + Z : le) : Z = le, B) { case 1: var X = -1; break; case 2: X = 250; break; case 5: X = 1073741823; break; case 4: X = 1e4; break; default: X = 5e3 }return X = Z + X, B = { id: d++, callback: Q, priorityLevel: B, startTime: Z, expirationTime: X, sortIndex: -1 }, Z > le ? (B.sortIndex = Z, t(p, B), r(l) === null && B === r(p) && (u ? (S(I), I = -1) : u = !0, N(v, Z - le))) : (B.sortIndex = X, t(l, B), b || P || (b = !0, K(D))), B }, e.unstable_shouldYield = k, e.unstable_wrapCallback = function (B) { var Q = h; return function () { var Z = h; h = Q; try { return B.apply(this, arguments) } finally { h = Z } } } })(F_); B_.exports = F_; var gR = B_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vR = J, Us = gR; function at(e) { for (var t = "https://reactjs.org/docs/error-decoder.html?invariant=" + e, r = 1; r < arguments.length; r++)t += "&args[]=" + encodeURIComponent(arguments[r]); return "Minified React error #" + e + "; visit " + t + " for the full message or use the non-minified dev environment for full errors and additional helpful warnings." } var z_ = new Set, op = {}; function kc(e, t) { Td(e, t), Td(e + "Capture", t) } function Td(e, t) { for (op[e] = t, e = 0; e < t.length; e++)z_.add(t[e]) } var Ao = !(typeof window > "u" || typeof window.document > "u" || typeof window.document.createElement > "u"), U0 = Object.prototype.hasOwnProperty, yR = /^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/, _b = {}, wb = {}; function bR(e) { return U0.call(wb, e) ? !0 : U0.call(_b, e) ? !1 : yR.test(e) ? wb[e] = !0 : (_b[e] = !0, !1) } function xR(e, t, r, n) { if (r !== null && r.type === 0) return !1; switch (typeof t) { case "function": case "symbol": return !0; case "boolean": return n ? !1 : r !== null ? !r.acceptsBooleans : (e = e.toLowerCase().slice(0, 5), e !== "data-" && e !== "aria-"); default: return !1 } } function _R(e, t, r, n) { if (t === null || typeof t > "u" || xR(e, t, r, n)) return !0; if (n) return !1; if (r !== null) switch (r.type) { case 3: return !t; case 4: return t === !1; case 5: return isNaN(t); case 6: return isNaN(t) || 1 > t }return !1 } function fs(e, t, r, n, s, o, a) { this.acceptsBooleans = t === 2 || t === 3 || t === 4, this.attributeName = n, this.attributeNamespace = s, this.mustUseProperty = r, this.propertyName = e, this.type = t, this.sanitizeURL = o, this.removeEmptyString = a } var zi = {}; "children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function (e) { zi[e] = new fs(e, 0, !1, e, null, !1, !1) });[["acceptCharset", "accept-charset"], ["className", "class"], ["htmlFor", "for"], ["httpEquiv", "http-equiv"]].forEach(function (e) { var t = e[0]; zi[t] = new fs(t, 1, !1, e[1], null, !1, !1) });["contentEditable", "draggable", "spellCheck", "value"].forEach(function (e) { zi[e] = new fs(e, 2, !1, e.toLowerCase(), null, !1, !1) });["autoReverse", "externalResourcesRequired", "focusable", "preserveAlpha"].forEach(function (e) { zi[e] = new fs(e, 2, !1, e, null, !1, !1) }); "allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function (e) { zi[e] = new fs(e, 3, !1, e.toLowerCase(), null, !1, !1) });["checked", "multiple", "muted", "selected"].forEach(function (e) { zi[e] = new fs(e, 3, !0, e, null, !1, !1) });["capture", "download"].forEach(function (e) { zi[e] = new fs(e, 4, !1, e, null, !1, !1) });["cols", "rows", "size", "span"].forEach(function (e) { zi[e] = new fs(e, 6, !1, e, null, !1, !1) });["rowSpan", "start"].forEach(function (e) { zi[e] = new fs(e, 5, !1, e.toLowerCase(), null, !1, !1) }); var hv = /[\-:]([a-z])/g; function fv(e) { return e[1].toUpperCase() } "accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function (e) { var t = e.replace(hv, fv); zi[t] = new fs(t, 1, !1, e, null, !1, !1) }); "xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function (e) { var t = e.replace(hv, fv); zi[t] = new fs(t, 1, !1, e, "http://www.w3.org/1999/xlink", !1, !1) });["xml:base", "xml:lang", "xml:space"].forEach(function (e) { var t = e.replace(hv, fv); zi[t] = new fs(t, 1, !1, e, "http://www.w3.org/XML/1998/namespace", !1, !1) });["tabIndex", "crossOrigin"].forEach(function (e) { zi[e] = new fs(e, 1, !1, e.toLowerCase(), null, !1, !1) }); zi.xlinkHref = new fs("xlinkHref", 1, !1, "xlink:href", "http://www.w3.org/1999/xlink", !0, !1);["src", "href", "action", "formAction"].forEach(function (e) { zi[e] = new fs(e, 1, !1, e.toLowerCase(), null, !0, !0) }); function mv(e, t, r, n) { var s = zi.hasOwnProperty(t) ? zi[t] : null; (s !== null ? s.type !== 0 : n || !(2 < t.length) || t[0] !== "o" && t[0] !== "O" || t[1] !== "n" && t[1] !== "N") && (_R(t, r, s, n) && (r = null), n || s === null ? bR(t) && (r === null ? e.removeAttribute(t) : e.setAttribute(t, "" + r)) : s.mustUseProperty ? e[s.propertyName] = r === null ? s.type === 3 ? !1 : "" : r : (t = s.attributeName, n = s.attributeNamespace, r === null ? e.removeAttribute(t) : (s = s.type, r = s === 3 || s === 4 && r === !0 ? "" : "" + r, n ? e.setAttributeNS(n, t, r) : e.setAttribute(t, r)))) } var Lo = vR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED, fh = Symbol.for("react.element"), rd = Symbol.for("react.portal"), nd = Symbol.for("react.fragment"), gv = Symbol.for("react.strict_mode"), V0 = Symbol.for("react.profiler"), $_ = Symbol.for("react.provider"), U_ = Symbol.for("react.context"), vv = Symbol.for("react.forward_ref"), W0 = Symbol.for("react.suspense"), H0 = Symbol.for("react.suspense_list"), yv = Symbol.for("react.memo"), il = Symbol.for("react.lazy"), V_ = Symbol.for("react.offscreen"), Sb = Symbol.iterator; function Au(e) { return e === null || typeof e != "object" ? null : (e = Sb && e[Sb] || e["@@iterator"], typeof e == "function" ? e : null) } var Zn = Object.assign, qm; function Uu(e) {
    if (qm === void 0) try { throw Error() } catch (r) { var t = r.stack.trim().match(/\n( *(at )?)/); qm = t && t[1] || "" } return `
`+ qm + e
} var Gm = !1; function Km(e, t) {
    if (!e || Gm) return ""; Gm = !0; var r = Error.prepareStackTrace; Error.prepareStackTrace = void 0; try { if (t) if (t = function () { throw Error() }, Object.defineProperty(t.prototype, "props", { set: function () { throw Error() } }), typeof Reflect == "object" && Reflect.construct) { try { Reflect.construct(t, []) } catch (p) { var n = p } Reflect.construct(e, [], t) } else { try { t.call() } catch (p) { n = p } e.call(t.prototype) } else { try { throw Error() } catch (p) { n = p } e() } } catch (p) {
        if (p && n && typeof p.stack == "string") {
            for (var s = p.stack.split(`
`), o = n.stack.split(`
`), a = s.length - 1, c = o.length - 1; 1 <= a && 0 <= c && s[a] !== o[c];)c--; for (; 1 <= a && 0 <= c; a--, c--)if (s[a] !== o[c]) {
                if (a !== 1 || c !== 1) do if (a--, c--, 0 > c || s[a] !== o[c]) {
                    var l = `
`+ s[a].replace(" at new ", " at "); return e.displayName && l.includes("<anonymous>") && (l = l.replace("<anonymous>", e.displayName)), l
                } while (1 <= a && 0 <= c); break
            }
        }
    } finally { Gm = !1, Error.prepareStackTrace = r } return (e = e ? e.displayName || e.name : "") ? Uu(e) : ""
} function wR(e) { switch (e.tag) { case 5: return Uu(e.type); case 16: return Uu("Lazy"); case 13: return Uu("Suspense"); case 19: return Uu("SuspenseList"); case 0: case 2: case 15: return e = Km(e.type, !1), e; case 11: return e = Km(e.type.render, !1), e; case 1: return e = Km(e.type, !0), e; default: return "" } } function q0(e) { if (e == null) return null; if (typeof e == "function") return e.displayName || e.name || null; if (typeof e == "string") return e; switch (e) { case nd: return "Fragment"; case rd: return "Portal"; case V0: return "Profiler"; case gv: return "StrictMode"; case W0: return "Suspense"; case H0: return "SuspenseList" }if (typeof e == "object") switch (e.$$typeof) { case U_: return (e.displayName || "Context") + ".Consumer"; case $_: return (e._context.displayName || "Context") + ".Provider"; case vv: var t = e.render; return e = e.displayName, e || (e = t.displayName || t.name || "", e = e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef"), e; case yv: return t = e.displayName || null, t !== null ? t : q0(e.type) || "Memo"; case il: t = e._payload, e = e._init; try { return q0(e(t)) } catch { } }return null } function SR(e) { var t = e.type; switch (e.tag) { case 24: return "Cache"; case 9: return (t.displayName || "Context") + ".Consumer"; case 10: return (t._context.displayName || "Context") + ".Provider"; case 18: return "DehydratedFragment"; case 11: return e = t.render, e = e.displayName || e.name || "", t.displayName || (e !== "" ? "ForwardRef(" + e + ")" : "ForwardRef"); case 7: return "Fragment"; case 5: return t; case 4: return "Portal"; case 3: return "Root"; case 6: return "Text"; case 16: return q0(t); case 8: return t === gv ? "StrictMode" : "Mode"; case 22: return "Offscreen"; case 12: return "Profiler"; case 21: return "Scope"; case 13: return "Suspense"; case 19: return "SuspenseList"; case 25: return "TracingMarker"; case 1: case 0: case 17: case 2: case 14: case 15: if (typeof t == "function") return t.displayName || t.name || null; if (typeof t == "string") return t }return null } function bl(e) { switch (typeof e) { case "boolean": case "number": case "string": case "undefined": return e; case "object": return e; default: return "" } } function W_(e) { var t = e.type; return (e = e.nodeName) && e.toLowerCase() === "input" && (t === "checkbox" || t === "radio") } function ER(e) { var t = W_(e) ? "checked" : "value", r = Object.getOwnPropertyDescriptor(e.constructor.prototype, t), n = "" + e[t]; if (!e.hasOwnProperty(t) && typeof r < "u" && typeof r.get == "function" && typeof r.set == "function") { var s = r.get, o = r.set; return Object.defineProperty(e, t, { configurable: !0, get: function () { return s.call(this) }, set: function (a) { n = "" + a, o.call(this, a) } }), Object.defineProperty(e, t, { enumerable: r.enumerable }), { getValue: function () { return n }, setValue: function (a) { n = "" + a }, stopTracking: function () { e._valueTracker = null, delete e[t] } } } } function mh(e) { e._valueTracker || (e._valueTracker = ER(e)) } function H_(e) { if (!e) return !1; var t = e._valueTracker; if (!t) return !0; var r = t.getValue(), n = ""; return e && (n = W_(e) ? e.checked ? "true" : "false" : e.value), e = n, e !== r ? (t.setValue(e), !0) : !1 } function cf(e) { if (e = e || (typeof document < "u" ? document : void 0), typeof e > "u") return null; try { return e.activeElement || e.body } catch { return e.body } } function G0(e, t) { var r = t.checked; return Zn({}, t, { defaultChecked: void 0, defaultValue: void 0, value: void 0, checked: r ?? e._wrapperState.initialChecked }) } function Eb(e, t) { var r = t.defaultValue == null ? "" : t.defaultValue, n = t.checked != null ? t.checked : t.defaultChecked; r = bl(t.value != null ? t.value : r), e._wrapperState = { initialChecked: n, initialValue: r, controlled: t.type === "checkbox" || t.type === "radio" ? t.checked != null : t.value != null } } function q_(e, t) { t = t.checked, t != null && mv(e, "checked", t, !1) } function K0(e, t) { q_(e, t); var r = bl(t.value), n = t.type; if (r != null) n === "number" ? (r === 0 && e.value === "" || e.value != r) && (e.value = "" + r) : e.value !== "" + r && (e.value = "" + r); else if (n === "submit" || n === "reset") { e.removeAttribute("value"); return } t.hasOwnProperty("value") ? Y0(e, t.type, r) : t.hasOwnProperty("defaultValue") && Y0(e, t.type, bl(t.defaultValue)), t.checked == null && t.defaultChecked != null && (e.defaultChecked = !!t.defaultChecked) } function Cb(e, t, r) { if (t.hasOwnProperty("value") || t.hasOwnProperty("defaultValue")) { var n = t.type; if (!(n !== "submit" && n !== "reset" || t.value !== void 0 && t.value !== null)) return; t = "" + e._wrapperState.initialValue, r || t === e.value || (e.value = t), e.defaultValue = t } r = e.name, r !== "" && (e.name = ""), e.defaultChecked = !!e._wrapperState.initialChecked, r !== "" && (e.name = r) } function Y0(e, t, r) { (t !== "number" || cf(e.ownerDocument) !== e) && (r == null ? e.defaultValue = "" + e._wrapperState.initialValue : e.defaultValue !== "" + r && (e.defaultValue = "" + r)) } var Vu = Array.isArray; function yd(e, t, r, n) { if (e = e.options, t) { t = {}; for (var s = 0; s < r.length; s++)t["$" + r[s]] = !0; for (r = 0; r < e.length; r++)s = t.hasOwnProperty("$" + e[r].value), e[r].selected !== s && (e[r].selected = s), s && n && (e[r].defaultSelected = !0) } else { for (r = "" + bl(r), t = null, s = 0; s < e.length; s++) { if (e[s].value === r) { e[s].selected = !0, n && (e[s].defaultSelected = !0); return } t !== null || e[s].disabled || (t = e[s]) } t !== null && (t.selected = !0) } } function Q0(e, t) { if (t.dangerouslySetInnerHTML != null) throw Error(at(91)); return Zn({}, t, { value: void 0, defaultValue: void 0, children: "" + e._wrapperState.initialValue }) } function Rb(e, t) { var r = t.value; if (r == null) { if (r = t.children, t = t.defaultValue, r != null) { if (t != null) throw Error(at(92)); if (Vu(r)) { if (1 < r.length) throw Error(at(93)); r = r[0] } t = r } t == null && (t = ""), r = t } e._wrapperState = { initialValue: bl(r) } } function G_(e, t) { var r = bl(t.value), n = bl(t.defaultValue); r != null && (r = "" + r, r !== e.value && (e.value = r), t.defaultValue == null && e.defaultValue !== r && (e.defaultValue = r)), n != null && (e.defaultValue = "" + n) } function kb(e) { var t = e.textContent; t === e._wrapperState.initialValue && t !== "" && t !== null && (e.value = t) } function K_(e) { switch (e) { case "svg": return "http://www.w3.org/2000/svg"; case "math": return "http://www.w3.org/1998/Math/MathML"; default: return "http://www.w3.org/1999/xhtml" } } function J0(e, t) { return e == null || e === "http://www.w3.org/1999/xhtml" ? K_(t) : e === "http://www.w3.org/2000/svg" && t === "foreignObject" ? "http://www.w3.org/1999/xhtml" : e } var gh, Y_ = function (e) { return typeof MSApp < "u" && MSApp.execUnsafeLocalFunction ? function (t, r, n, s) { MSApp.execUnsafeLocalFunction(function () { return e(t, r, n, s) }) } : e }(function (e, t) { if (e.namespaceURI !== "http://www.w3.org/2000/svg" || "innerHTML" in e) e.innerHTML = t; else { for (gh = gh || document.createElement("div"), gh.innerHTML = "<svg>" + t.valueOf().toString() + "</svg>", t = gh.firstChild; e.firstChild;)e.removeChild(e.firstChild); for (; t.firstChild;)e.appendChild(t.firstChild) } }); function lp(e, t) { if (t) { var r = e.firstChild; if (r && r === e.lastChild && r.nodeType === 3) { r.nodeValue = t; return } } e.textContent = t } var Ku = { animationIterationCount: !0, aspectRatio: !0, borderImageOutset: !0, borderImageSlice: !0, borderImageWidth: !0, boxFlex: !0, boxFlexGroup: !0, boxOrdinalGroup: !0, columnCount: !0, columns: !0, flex: !0, flexGrow: !0, flexPositive: !0, flexShrink: !0, flexNegative: !0, flexOrder: !0, gridArea: !0, gridRow: !0, gridRowEnd: !0, gridRowSpan: !0, gridRowStart: !0, gridColumn: !0, gridColumnEnd: !0, gridColumnSpan: !0, gridColumnStart: !0, fontWeight: !0, lineClamp: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, tabSize: !0, widows: !0, zIndex: !0, zoom: !0, fillOpacity: !0, floodOpacity: !0, stopOpacity: !0, strokeDasharray: !0, strokeDashoffset: !0, strokeMiterlimit: !0, strokeOpacity: !0, strokeWidth: !0 }, CR = ["Webkit", "ms", "Moz", "O"]; Object.keys(Ku).forEach(function (e) { CR.forEach(function (t) { t = t + e.charAt(0).toUpperCase() + e.substring(1), Ku[t] = Ku[e] }) }); function Q_(e, t, r) { return t == null || typeof t == "boolean" || t === "" ? "" : r || typeof t != "number" || t === 0 || Ku.hasOwnProperty(e) && Ku[e] ? ("" + t).trim() : t + "px" } function J_(e, t) { e = e.style; for (var r in t) if (t.hasOwnProperty(r)) { var n = r.indexOf("--") === 0, s = Q_(r, t[r], n); r === "float" && (r = "cssFloat"), n ? e.setProperty(r, s) : e[r] = s } } var RR = Zn({ menuitem: !0 }, { area: !0, base: !0, br: !0, col: !0, embed: !0, hr: !0, img: !0, input: !0, keygen: !0, link: !0, meta: !0, param: !0, source: !0, track: !0, wbr: !0 }); function X0(e, t) { if (t) { if (RR[e] && (t.children != null || t.dangerouslySetInnerHTML != null)) throw Error(at(137, e)); if (t.dangerouslySetInnerHTML != null) { if (t.children != null) throw Error(at(60)); if (typeof t.dangerouslySetInnerHTML != "object" || !("__html" in t.dangerouslySetInnerHTML)) throw Error(at(61)) } if (t.style != null && typeof t.style != "object") throw Error(at(62)) } } function Z0(e, t) { if (e.indexOf("-") === -1) return typeof t.is == "string"; switch (e) { case "annotation-xml": case "color-profile": case "font-face": case "font-face-src": case "font-face-uri": case "font-face-format": case "font-face-name": case "missing-glyph": return !1; default: return !0 } } var eg = null; function bv(e) { return e = e.target || e.srcElement || window, e.correspondingUseElement && (e = e.correspondingUseElement), e.nodeType === 3 ? e.parentNode : e } var tg = null, bd = null, xd = null; function Tb(e) { if (e = jp(e)) { if (typeof tg != "function") throw Error(at(280)); var t = e.stateNode; t && (t = Xf(t), tg(e.stateNode, e.type, t)) } } function X_(e) { bd ? xd ? xd.push(e) : xd = [e] : bd = e } function Z_() { if (bd) { var e = bd, t = xd; if (xd = bd = null, Tb(e), t) for (e = 0; e < t.length; e++)Tb(t[e]) } } function ew(e, t) { return e(t) } function tw() { } var Ym = !1; function rw(e, t, r) { if (Ym) return e(t, r); Ym = !0; try { return ew(e, t, r) } finally { Ym = !1, (bd !== null || xd !== null) && (tw(), Z_()) } } function cp(e, t) { var r = e.stateNode; if (r === null) return null; var n = Xf(r); if (n === null) return null; r = n[t]; e: switch (t) { case "onClick": case "onClickCapture": case "onDoubleClick": case "onDoubleClickCapture": case "onMouseDown": case "onMouseDownCapture": case "onMouseMove": case "onMouseMoveCapture": case "onMouseUp": case "onMouseUpCapture": case "onMouseEnter": (n = !n.disabled) || (e = e.type, n = !(e === "button" || e === "input" || e === "select" || e === "textarea")), e = !n; break e; default: e = !1 }if (e) return null; if (r && typeof r != "function") throw Error(at(231, t, typeof r)); return r } var rg = !1; if (Ao) try { var Pu = {}; Object.defineProperty(Pu, "passive", { get: function () { rg = !0 } }), window.addEventListener("test", Pu, Pu), window.removeEventListener("test", Pu, Pu) } catch { rg = !1 } function kR(e, t, r, n, s, o, a, c, l) { var p = Array.prototype.slice.call(arguments, 3); try { t.apply(r, p) } catch (d) { this.onError(d) } } var Yu = !1, df = null, uf = !1, ng = null, TR = { onError: function (e) { Yu = !0, df = e } }; function AR(e, t, r, n, s, o, a, c, l) { Yu = !1, df = null, kR.apply(TR, arguments) } function PR(e, t, r, n, s, o, a, c, l) { if (AR.apply(this, arguments), Yu) { if (Yu) { var p = df; Yu = !1, df = null } else throw Error(at(198)); uf || (uf = !0, ng = p) } } function Tc(e) { var t = e, r = e; if (e.alternate) for (; t.return;)t = t.return; else { e = t; do t = e, t.flags & 4098 && (r = t.return), e = t.return; while (e) } return t.tag === 3 ? r : null } function nw(e) { if (e.tag === 13) { var t = e.memoizedState; if (t === null && (e = e.alternate, e !== null && (t = e.memoizedState)), t !== null) return t.dehydrated } return null } function Ab(e) { if (Tc(e) !== e) throw Error(at(188)) } function DR(e) { var t = e.alternate; if (!t) { if (t = Tc(e), t === null) throw Error(at(188)); return t !== e ? null : e } for (var r = e, n = t; ;) { var s = r.return; if (s === null) break; var o = s.alternate; if (o === null) { if (n = s.return, n !== null) { r = n; continue } break } if (s.child === o.child) { for (o = s.child; o;) { if (o === r) return Ab(s), e; if (o === n) return Ab(s), t; o = o.sibling } throw Error(at(188)) } if (r.return !== n.return) r = s, n = o; else { for (var a = !1, c = s.child; c;) { if (c === r) { a = !0, r = s, n = o; break } if (c === n) { a = !0, n = s, r = o; break } c = c.sibling } if (!a) { for (c = o.child; c;) { if (c === r) { a = !0, r = o, n = s; break } if (c === n) { a = !0, n = o, r = s; break } c = c.sibling } if (!a) throw Error(at(189)) } } if (r.alternate !== n) throw Error(at(190)) } if (r.tag !== 3) throw Error(at(188)); return r.stateNode.current === r ? e : t } function iw(e) { return e = DR(e), e !== null ? sw(e) : null } function sw(e) { if (e.tag === 5 || e.tag === 6) return e; for (e = e.child; e !== null;) { var t = sw(e); if (t !== null) return t; e = e.sibling } return null } var aw = Us.unstable_scheduleCallback, Pb = Us.unstable_cancelCallback, IR = Us.unstable_shouldYield, jR = Us.unstable_requestPaint, pi = Us.unstable_now, OR = Us.unstable_getCurrentPriorityLevel, xv = Us.unstable_ImmediatePriority, ow = Us.unstable_UserBlockingPriority, pf = Us.unstable_NormalPriority, MR = Us.unstable_LowPriority, lw = Us.unstable_IdlePriority, Kf = null, no = null; function LR(e) { if (no && typeof no.onCommitFiberRoot == "function") try { no.onCommitFiberRoot(Kf, e, void 0, (e.current.flags & 128) === 128) } catch { } } var La = Math.clz32 ? Math.clz32 : FR, NR = Math.log, BR = Math.LN2; function FR(e) { return e >>>= 0, e === 0 ? 32 : 31 - (NR(e) / BR | 0) | 0 } var vh = 64, yh = 4194304; function Wu(e) { switch (e & -e) { case 1: return 1; case 2: return 2; case 4: return 4; case 8: return 8; case 16: return 16; case 32: return 32; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return e & 4194240; case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: return e & 130023424; case 134217728: return 134217728; case 268435456: return 268435456; case 536870912: return 536870912; case 1073741824: return 1073741824; default: return e } } function hf(e, t) { var r = e.pendingLanes; if (r === 0) return 0; var n = 0, s = e.suspendedLanes, o = e.pingedLanes, a = r & 268435455; if (a !== 0) { var c = a & ~s; c !== 0 ? n = Wu(c) : (o &= a, o !== 0 && (n = Wu(o))) } else a = r & ~s, a !== 0 ? n = Wu(a) : o !== 0 && (n = Wu(o)); if (n === 0) return 0; if (t !== 0 && t !== n && !(t & s) && (s = n & -n, o = t & -t, s >= o || s === 16 && (o & 4194240) !== 0)) return t; if (n & 4 && (n |= r & 16), t = e.entangledLanes, t !== 0) for (e = e.entanglements, t &= n; 0 < t;)r = 31 - La(t), s = 1 << r, n |= e[r], t &= ~s; return n } function zR(e, t) { switch (e) { case 1: case 2: case 4: return t + 250; case 8: case 16: case 32: case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: return t + 5e3; case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: return -1; case 134217728: case 268435456: case 536870912: case 1073741824: return -1; default: return -1 } } function $R(e, t) { for (var r = e.suspendedLanes, n = e.pingedLanes, s = e.expirationTimes, o = e.pendingLanes; 0 < o;) { var a = 31 - La(o), c = 1 << a, l = s[a]; l === -1 ? (!(c & r) || c & n) && (s[a] = zR(c, t)) : l <= t && (e.expiredLanes |= c), o &= ~c } } function ig(e) { return e = e.pendingLanes & -1073741825, e !== 0 ? e : e & 1073741824 ? 1073741824 : 0 } function cw() { var e = vh; return vh <<= 1, !(vh & 4194240) && (vh = 64), e } function Qm(e) { for (var t = [], r = 0; 31 > r; r++)t.push(e); return t } function Dp(e, t, r) { e.pendingLanes |= t, t !== 536870912 && (e.suspendedLanes = 0, e.pingedLanes = 0), e = e.eventTimes, t = 31 - La(t), e[t] = r } function UR(e, t) { var r = e.pendingLanes & ~t; e.pendingLanes = t, e.suspendedLanes = 0, e.pingedLanes = 0, e.expiredLanes &= t, e.mutableReadLanes &= t, e.entangledLanes &= t, t = e.entanglements; var n = e.eventTimes; for (e = e.expirationTimes; 0 < r;) { var s = 31 - La(r), o = 1 << s; t[s] = 0, n[s] = -1, e[s] = -1, r &= ~o } } function _v(e, t) { var r = e.entangledLanes |= t; for (e = e.entanglements; r;) { var n = 31 - La(r), s = 1 << n; s & t | e[n] & t && (e[n] |= t), r &= ~s } } var _n = 0; function dw(e) { return e &= -e, 1 < e ? 4 < e ? e & 268435455 ? 16 : 536870912 : 4 : 1 } var uw, wv, pw, hw, fw, sg = !1, bh = [], ul = null, pl = null, hl = null, dp = new Map, up = new Map, al = [], VR = "mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "); function Db(e, t) { switch (e) { case "focusin": case "focusout": ul = null; break; case "dragenter": case "dragleave": pl = null; break; case "mouseover": case "mouseout": hl = null; break; case "pointerover": case "pointerout": dp.delete(t.pointerId); break; case "gotpointercapture": case "lostpointercapture": up.delete(t.pointerId) } } function Du(e, t, r, n, s, o) { return e === null || e.nativeEvent !== o ? (e = { blockedOn: t, domEventName: r, eventSystemFlags: n, nativeEvent: o, targetContainers: [s] }, t !== null && (t = jp(t), t !== null && wv(t)), e) : (e.eventSystemFlags |= n, t = e.targetContainers, s !== null && t.indexOf(s) === -1 && t.push(s), e) } function WR(e, t, r, n, s) { switch (t) { case "focusin": return ul = Du(ul, e, t, r, n, s), !0; case "dragenter": return pl = Du(pl, e, t, r, n, s), !0; case "mouseover": return hl = Du(hl, e, t, r, n, s), !0; case "pointerover": var o = s.pointerId; return dp.set(o, Du(dp.get(o) || null, e, t, r, n, s)), !0; case "gotpointercapture": return o = s.pointerId, up.set(o, Du(up.get(o) || null, e, t, r, n, s)), !0 }return !1 } function mw(e) { var t = dc(e.target); if (t !== null) { var r = Tc(t); if (r !== null) { if (t = r.tag, t === 13) { if (t = nw(r), t !== null) { e.blockedOn = t, fw(e.priority, function () { pw(r) }); return } } else if (t === 3 && r.stateNode.current.memoizedState.isDehydrated) { e.blockedOn = r.tag === 3 ? r.stateNode.containerInfo : null; return } } } e.blockedOn = null } function zh(e) { if (e.blockedOn !== null) return !1; for (var t = e.targetContainers; 0 < t.length;) { var r = ag(e.domEventName, e.eventSystemFlags, t[0], e.nativeEvent); if (r === null) { r = e.nativeEvent; var n = new r.constructor(r.type, r); eg = n, r.target.dispatchEvent(n), eg = null } else return t = jp(r), t !== null && wv(t), e.blockedOn = r, !1; t.shift() } return !0 } function Ib(e, t, r) { zh(e) && r.delete(t) } function HR() { sg = !1, ul !== null && zh(ul) && (ul = null), pl !== null && zh(pl) && (pl = null), hl !== null && zh(hl) && (hl = null), dp.forEach(Ib), up.forEach(Ib) } function Iu(e, t) { e.blockedOn === t && (e.blockedOn = null, sg || (sg = !0, Us.unstable_scheduleCallback(Us.unstable_NormalPriority, HR))) } function pp(e) { function t(s) { return Iu(s, e) } if (0 < bh.length) { Iu(bh[0], e); for (var r = 1; r < bh.length; r++) { var n = bh[r]; n.blockedOn === e && (n.blockedOn = null) } } for (ul !== null && Iu(ul, e), pl !== null && Iu(pl, e), hl !== null && Iu(hl, e), dp.forEach(t), up.forEach(t), r = 0; r < al.length; r++)n = al[r], n.blockedOn === e && (n.blockedOn = null); for (; 0 < al.length && (r = al[0], r.blockedOn === null);)mw(r), r.blockedOn === null && al.shift() } var _d = Lo.ReactCurrentBatchConfig, ff = !0; function qR(e, t, r, n) { var s = _n, o = _d.transition; _d.transition = null; try { _n = 1, Sv(e, t, r, n) } finally { _n = s, _d.transition = o } } function GR(e, t, r, n) { var s = _n, o = _d.transition; _d.transition = null; try { _n = 4, Sv(e, t, r, n) } finally { _n = s, _d.transition = o } } function Sv(e, t, r, n) { if (ff) { var s = ag(e, t, r, n); if (s === null) a0(e, t, n, mf, r), Db(e, n); else if (WR(s, e, t, r, n)) n.stopPropagation(); else if (Db(e, n), t & 4 && -1 < VR.indexOf(e)) { for (; s !== null;) { var o = jp(s); if (o !== null && uw(o), o = ag(e, t, r, n), o === null && a0(e, t, n, mf, r), o === s) break; s = o } s !== null && n.stopPropagation() } else a0(e, t, n, null, r) } } var mf = null; function ag(e, t, r, n) { if (mf = null, e = bv(n), e = dc(e), e !== null) if (t = Tc(e), t === null) e = null; else if (r = t.tag, r === 13) { if (e = nw(t), e !== null) return e; e = null } else if (r === 3) { if (t.stateNode.current.memoizedState.isDehydrated) return t.tag === 3 ? t.stateNode.containerInfo : null; e = null } else t !== e && (e = null); return mf = e, null } function gw(e) { switch (e) { case "cancel": case "click": case "close": case "contextmenu": case "copy": case "cut": case "auxclick": case "dblclick": case "dragend": case "dragstart": case "drop": case "focusin": case "focusout": case "input": case "invalid": case "keydown": case "keypress": case "keyup": case "mousedown": case "mouseup": case "paste": case "pause": case "play": case "pointercancel": case "pointerdown": case "pointerup": case "ratechange": case "reset": case "resize": case "seeked": case "submit": case "touchcancel": case "touchend": case "touchstart": case "volumechange": case "change": case "selectionchange": case "textInput": case "compositionstart": case "compositionend": case "compositionupdate": case "beforeblur": case "afterblur": case "beforeinput": case "blur": case "fullscreenchange": case "focus": case "hashchange": case "popstate": case "select": case "selectstart": return 1; case "drag": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "mousemove": case "mouseout": case "mouseover": case "pointermove": case "pointerout": case "pointerover": case "scroll": case "toggle": case "touchmove": case "wheel": case "mouseenter": case "mouseleave": case "pointerenter": case "pointerleave": return 4; case "message": switch (OR()) { case xv: return 1; case ow: return 4; case pf: case MR: return 16; case lw: return 536870912; default: return 16 }default: return 16 } } var ll = null, Ev = null, $h = null; function vw() { if ($h) return $h; var e, t = Ev, r = t.length, n, s = "value" in ll ? ll.value : ll.textContent, o = s.length; for (e = 0; e < r && t[e] === s[e]; e++); var a = r - e; for (n = 1; n <= a && t[r - n] === s[o - n]; n++); return $h = s.slice(e, 1 < n ? 1 - n : void 0) } function Uh(e) { var t = e.keyCode; return "charCode" in e ? (e = e.charCode, e === 0 && t === 13 && (e = 13)) : e = t, e === 10 && (e = 13), 32 <= e || e === 13 ? e : 0 } function xh() { return !0 } function jb() { return !1 } function Ws(e) { function t(r, n, s, o, a) { this._reactName = r, this._targetInst = s, this.type = n, this.nativeEvent = o, this.target = a, this.currentTarget = null; for (var c in e) e.hasOwnProperty(c) && (r = e[c], this[c] = r ? r(o) : o[c]); return this.isDefaultPrevented = (o.defaultPrevented != null ? o.defaultPrevented : o.returnValue === !1) ? xh : jb, this.isPropagationStopped = jb, this } return Zn(t.prototype, { preventDefault: function () { this.defaultPrevented = !0; var r = this.nativeEvent; r && (r.preventDefault ? r.preventDefault() : typeof r.returnValue != "unknown" && (r.returnValue = !1), this.isDefaultPrevented = xh) }, stopPropagation: function () { var r = this.nativeEvent; r && (r.stopPropagation ? r.stopPropagation() : typeof r.cancelBubble != "unknown" && (r.cancelBubble = !0), this.isPropagationStopped = xh) }, persist: function () { }, isPersistent: xh }), t } var $d = { eventPhase: 0, bubbles: 0, cancelable: 0, timeStamp: function (e) { return e.timeStamp || Date.now() }, defaultPrevented: 0, isTrusted: 0 }, Cv = Ws($d), Ip = Zn({}, $d, { view: 0, detail: 0 }), KR = Ws(Ip), Jm, Xm, ju, Yf = Zn({}, Ip, { screenX: 0, screenY: 0, clientX: 0, clientY: 0, pageX: 0, pageY: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, getModifierState: Rv, button: 0, buttons: 0, relatedTarget: function (e) { return e.relatedTarget === void 0 ? e.fromElement === e.srcElement ? e.toElement : e.fromElement : e.relatedTarget }, movementX: function (e) { return "movementX" in e ? e.movementX : (e !== ju && (ju && e.type === "mousemove" ? (Jm = e.screenX - ju.screenX, Xm = e.screenY - ju.screenY) : Xm = Jm = 0, ju = e), Jm) }, movementY: function (e) { return "movementY" in e ? e.movementY : Xm } }), Ob = Ws(Yf), YR = Zn({}, Yf, { dataTransfer: 0 }), QR = Ws(YR), JR = Zn({}, Ip, { relatedTarget: 0 }), Zm = Ws(JR), XR = Zn({}, $d, { animationName: 0, elapsedTime: 0, pseudoElement: 0 }), ZR = Ws(XR), ek = Zn({}, $d, { clipboardData: function (e) { return "clipboardData" in e ? e.clipboardData : window.clipboardData } }), tk = Ws(ek), rk = Zn({}, $d, { data: 0 }), Mb = Ws(rk), nk = { Esc: "Escape", Spacebar: " ", Left: "ArrowLeft", Up: "ArrowUp", Right: "ArrowRight", Down: "ArrowDown", Del: "Delete", Win: "OS", Menu: "ContextMenu", Apps: "ContextMenu", Scroll: "ScrollLock", MozPrintableKey: "Unidentified" }, ik = { 8: "Backspace", 9: "Tab", 12: "Clear", 13: "Enter", 16: "Shift", 17: "Control", 18: "Alt", 19: "Pause", 20: "CapsLock", 27: "Escape", 32: " ", 33: "PageUp", 34: "PageDown", 35: "End", 36: "Home", 37: "ArrowLeft", 38: "ArrowUp", 39: "ArrowRight", 40: "ArrowDown", 45: "Insert", 46: "Delete", 112: "F1", 113: "F2", 114: "F3", 115: "F4", 116: "F5", 117: "F6", 118: "F7", 119: "F8", 120: "F9", 121: "F10", 122: "F11", 123: "F12", 144: "NumLock", 145: "ScrollLock", 224: "Meta" }, sk = { Alt: "altKey", Control: "ctrlKey", Meta: "metaKey", Shift: "shiftKey" }; function ak(e) { var t = this.nativeEvent; return t.getModifierState ? t.getModifierState(e) : (e = sk[e]) ? !!t[e] : !1 } function Rv() { return ak } var ok = Zn({}, Ip, { key: function (e) { if (e.key) { var t = nk[e.key] || e.key; if (t !== "Unidentified") return t } return e.type === "keypress" ? (e = Uh(e), e === 13 ? "Enter" : String.fromCharCode(e)) : e.type === "keydown" || e.type === "keyup" ? ik[e.keyCode] || "Unidentified" : "" }, code: 0, location: 0, ctrlKey: 0, shiftKey: 0, altKey: 0, metaKey: 0, repeat: 0, locale: 0, getModifierState: Rv, charCode: function (e) { return e.type === "keypress" ? Uh(e) : 0 }, keyCode: function (e) { return e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0 }, which: function (e) { return e.type === "keypress" ? Uh(e) : e.type === "keydown" || e.type === "keyup" ? e.keyCode : 0 } }), lk = Ws(ok), ck = Zn({}, Yf, { pointerId: 0, width: 0, height: 0, pressure: 0, tangentialPressure: 0, tiltX: 0, tiltY: 0, twist: 0, pointerType: 0, isPrimary: 0 }), Lb = Ws(ck), dk = Zn({}, Ip, { touches: 0, targetTouches: 0, changedTouches: 0, altKey: 0, metaKey: 0, ctrlKey: 0, shiftKey: 0, getModifierState: Rv }), uk = Ws(dk), pk = Zn({}, $d, { propertyName: 0, elapsedTime: 0, pseudoElement: 0 }), hk = Ws(pk), fk = Zn({}, Yf, { deltaX: function (e) { return "deltaX" in e ? e.deltaX : "wheelDeltaX" in e ? -e.wheelDeltaX : 0 }, deltaY: function (e) { return "deltaY" in e ? e.deltaY : "wheelDeltaY" in e ? -e.wheelDeltaY : "wheelDelta" in e ? -e.wheelDelta : 0 }, deltaZ: 0, deltaMode: 0 }), mk = Ws(fk), gk = [9, 13, 27, 32], kv = Ao && "CompositionEvent" in window, Qu = null; Ao && "documentMode" in document && (Qu = document.documentMode); var vk = Ao && "TextEvent" in window && !Qu, yw = Ao && (!kv || Qu && 8 < Qu && 11 >= Qu), Nb = String.fromCharCode(32), Bb = !1; function bw(e, t) { switch (e) { case "keyup": return gk.indexOf(t.keyCode) !== -1; case "keydown": return t.keyCode !== 229; case "keypress": case "mousedown": case "focusout": return !0; default: return !1 } } function xw(e) { return e = e.detail, typeof e == "object" && "data" in e ? e.data : null } var id = !1; function yk(e, t) { switch (e) { case "compositionend": return xw(t); case "keypress": return t.which !== 32 ? null : (Bb = !0, Nb); case "textInput": return e = t.data, e === Nb && Bb ? null : e; default: return null } } function bk(e, t) { if (id) return e === "compositionend" || !kv && bw(e, t) ? (e = vw(), $h = Ev = ll = null, id = !1, e) : null; switch (e) { case "paste": return null; case "keypress": if (!(t.ctrlKey || t.altKey || t.metaKey) || t.ctrlKey && t.altKey) { if (t.char && 1 < t.char.length) return t.char; if (t.which) return String.fromCharCode(t.which) } return null; case "compositionend": return yw && t.locale !== "ko" ? null : t.data; default: return null } } var xk = { color: !0, date: !0, datetime: !0, "datetime-local": !0, email: !0, month: !0, number: !0, password: !0, range: !0, search: !0, tel: !0, text: !0, time: !0, url: !0, week: !0 }; function Fb(e) { var t = e && e.nodeName && e.nodeName.toLowerCase(); return t === "input" ? !!xk[e.type] : t === "textarea" } function _w(e, t, r, n) { X_(n), t = gf(t, "onChange"), 0 < t.length && (r = new Cv("onChange", "change", null, r, n), e.push({ event: r, listeners: t })) } var Ju = null, hp = null; function _k(e) { Iw(e, 0) } function Qf(e) { var t = od(e); if (H_(t)) return e } function wk(e, t) { if (e === "change") return t } var ww = !1; if (Ao) { var e0; if (Ao) { var t0 = "oninput" in document; if (!t0) { var zb = document.createElement("div"); zb.setAttribute("oninput", "return;"), t0 = typeof zb.oninput == "function" } e0 = t0 } else e0 = !1; ww = e0 && (!document.documentMode || 9 < document.documentMode) } function $b() { Ju && (Ju.detachEvent("onpropertychange", Sw), hp = Ju = null) } function Sw(e) { if (e.propertyName === "value" && Qf(hp)) { var t = []; _w(t, hp, e, bv(e)), rw(_k, t) } } function Sk(e, t, r) { e === "focusin" ? ($b(), Ju = t, hp = r, Ju.attachEvent("onpropertychange", Sw)) : e === "focusout" && $b() } function Ek(e) { if (e === "selectionchange" || e === "keyup" || e === "keydown") return Qf(hp) } function Ck(e, t) { if (e === "click") return Qf(t) } function Rk(e, t) { if (e === "input" || e === "change") return Qf(t) } function kk(e, t) { return e === t && (e !== 0 || 1 / e === 1 / t) || e !== e && t !== t } var Fa = typeof Object.is == "function" ? Object.is : kk; function fp(e, t) { if (Fa(e, t)) return !0; if (typeof e != "object" || e === null || typeof t != "object" || t === null) return !1; var r = Object.keys(e), n = Object.keys(t); if (r.length !== n.length) return !1; for (n = 0; n < r.length; n++) { var s = r[n]; if (!U0.call(t, s) || !Fa(e[s], t[s])) return !1 } return !0 } function Ub(e) { for (; e && e.firstChild;)e = e.firstChild; return e } function Vb(e, t) { var r = Ub(e); e = 0; for (var n; r;) { if (r.nodeType === 3) { if (n = e + r.textContent.length, e <= t && n >= t) return { node: r, offset: t - e }; e = n } e: { for (; r;) { if (r.nextSibling) { r = r.nextSibling; break e } r = r.parentNode } r = void 0 } r = Ub(r) } } function Ew(e, t) { return e && t ? e === t ? !0 : e && e.nodeType === 3 ? !1 : t && t.nodeType === 3 ? Ew(e, t.parentNode) : "contains" in e ? e.contains(t) : e.compareDocumentPosition ? !!(e.compareDocumentPosition(t) & 16) : !1 : !1 } function Cw() { for (var e = window, t = cf(); t instanceof e.HTMLIFrameElement;) { try { var r = typeof t.contentWindow.location.href == "string" } catch { r = !1 } if (r) e = t.contentWindow; else break; t = cf(e.document) } return t } function Tv(e) { var t = e && e.nodeName && e.nodeName.toLowerCase(); return t && (t === "input" && (e.type === "text" || e.type === "search" || e.type === "tel" || e.type === "url" || e.type === "password") || t === "textarea" || e.contentEditable === "true") } function Tk(e) { var t = Cw(), r = e.focusedElem, n = e.selectionRange; if (t !== r && r && r.ownerDocument && Ew(r.ownerDocument.documentElement, r)) { if (n !== null && Tv(r)) { if (t = n.start, e = n.end, e === void 0 && (e = t), "selectionStart" in r) r.selectionStart = t, r.selectionEnd = Math.min(e, r.value.length); else if (e = (t = r.ownerDocument || document) && t.defaultView || window, e.getSelection) { e = e.getSelection(); var s = r.textContent.length, o = Math.min(n.start, s); n = n.end === void 0 ? o : Math.min(n.end, s), !e.extend && o > n && (s = n, n = o, o = s), s = Vb(r, o); var a = Vb(r, n); s && a && (e.rangeCount !== 1 || e.anchorNode !== s.node || e.anchorOffset !== s.offset || e.focusNode !== a.node || e.focusOffset !== a.offset) && (t = t.createRange(), t.setStart(s.node, s.offset), e.removeAllRanges(), o > n ? (e.addRange(t), e.extend(a.node, a.offset)) : (t.setEnd(a.node, a.offset), e.addRange(t))) } } for (t = [], e = r; e = e.parentNode;)e.nodeType === 1 && t.push({ element: e, left: e.scrollLeft, top: e.scrollTop }); for (typeof r.focus == "function" && r.focus(), r = 0; r < t.length; r++)e = t[r], e.element.scrollLeft = e.left, e.element.scrollTop = e.top } } var Ak = Ao && "documentMode" in document && 11 >= document.documentMode, sd = null, og = null, Xu = null, lg = !1; function Wb(e, t, r) { var n = r.window === r ? r.document : r.nodeType === 9 ? r : r.ownerDocument; lg || sd == null || sd !== cf(n) || (n = sd, "selectionStart" in n && Tv(n) ? n = { start: n.selectionStart, end: n.selectionEnd } : (n = (n.ownerDocument && n.ownerDocument.defaultView || window).getSelection(), n = { anchorNode: n.anchorNode, anchorOffset: n.anchorOffset, focusNode: n.focusNode, focusOffset: n.focusOffset }), Xu && fp(Xu, n) || (Xu = n, n = gf(og, "onSelect"), 0 < n.length && (t = new Cv("onSelect", "select", null, t, r), e.push({ event: t, listeners: n }), t.target = sd))) } function _h(e, t) { var r = {}; return r[e.toLowerCase()] = t.toLowerCase(), r["Webkit" + e] = "webkit" + t, r["Moz" + e] = "moz" + t, r } var ad = { animationend: _h("Animation", "AnimationEnd"), animationiteration: _h("Animation", "AnimationIteration"), animationstart: _h("Animation", "AnimationStart"), transitionend: _h("Transition", "TransitionEnd") }, r0 = {}, Rw = {}; Ao && (Rw = document.createElement("div").style, "AnimationEvent" in window || (delete ad.animationend.animation, delete ad.animationiteration.animation, delete ad.animationstart.animation), "TransitionEvent" in window || delete ad.transitionend.transition); function Jf(e) { if (r0[e]) return r0[e]; if (!ad[e]) return e; var t = ad[e], r; for (r in t) if (t.hasOwnProperty(r) && r in Rw) return r0[e] = t[r]; return e } var kw = Jf("animationend"), Tw = Jf("animationiteration"), Aw = Jf("animationstart"), Pw = Jf("transitionend"), Dw = new Map, Hb = "abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" "); function Sl(e, t) { Dw.set(e, t), kc(t, [e]) } for (var n0 = 0; n0 < Hb.length; n0++) { var i0 = Hb[n0], Pk = i0.toLowerCase(), Dk = i0[0].toUpperCase() + i0.slice(1); Sl(Pk, "on" + Dk) } Sl(kw, "onAnimationEnd"); Sl(Tw, "onAnimationIteration"); Sl(Aw, "onAnimationStart"); Sl("dblclick", "onDoubleClick"); Sl("focusin", "onFocus"); Sl("focusout", "onBlur"); Sl(Pw, "onTransitionEnd"); Td("onMouseEnter", ["mouseout", "mouseover"]); Td("onMouseLeave", ["mouseout", "mouseover"]); Td("onPointerEnter", ["pointerout", "pointerover"]); Td("onPointerLeave", ["pointerout", "pointerover"]); kc("onChange", "change click focusin focusout input keydown keyup selectionchange".split(" ")); kc("onSelect", "focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")); kc("onBeforeInput", ["compositionend", "keypress", "textInput", "paste"]); kc("onCompositionEnd", "compositionend focusout keydown keypress keyup mousedown".split(" ")); kc("onCompositionStart", "compositionstart focusout keydown keypress keyup mousedown".split(" ")); kc("onCompositionUpdate", "compositionupdate focusout keydown keypress keyup mousedown".split(" ")); var Hu = "abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "), Ik = new Set("cancel close invalid load scroll toggle".split(" ").concat(Hu)); function qb(e, t, r) { var n = e.type || "unknown-event"; e.currentTarget = r, PR(n, t, void 0, e), e.currentTarget = null } function Iw(e, t) { t = (t & 4) !== 0; for (var r = 0; r < e.length; r++) { var n = e[r], s = n.event; n = n.listeners; e: { var o = void 0; if (t) for (var a = n.length - 1; 0 <= a; a--) { var c = n[a], l = c.instance, p = c.currentTarget; if (c = c.listener, l !== o && s.isPropagationStopped()) break e; qb(s, c, p), o = l } else for (a = 0; a < n.length; a++) { if (c = n[a], l = c.instance, p = c.currentTarget, c = c.listener, l !== o && s.isPropagationStopped()) break e; qb(s, c, p), o = l } } } if (uf) throw e = ng, uf = !1, ng = null, e } function Nn(e, t) { var r = t[hg]; r === void 0 && (r = t[hg] = new Set); var n = e + "__bubble"; r.has(n) || (jw(t, e, 2, !1), r.add(n)) } function s0(e, t, r) { var n = 0; t && (n |= 4), jw(r, e, n, t) } var wh = "_reactListening" + Math.random().toString(36).slice(2); function mp(e) { if (!e[wh]) { e[wh] = !0, z_.forEach(function (r) { r !== "selectionchange" && (Ik.has(r) || s0(r, !1, e), s0(r, !0, e)) }); var t = e.nodeType === 9 ? e : e.ownerDocument; t === null || t[wh] || (t[wh] = !0, s0("selectionchange", !1, t)) } } function jw(e, t, r, n) { switch (gw(t)) { case 1: var s = qR; break; case 4: s = GR; break; default: s = Sv }r = s.bind(null, t, r, e), s = void 0, !rg || t !== "touchstart" && t !== "touchmove" && t !== "wheel" || (s = !0), n ? s !== void 0 ? e.addEventListener(t, r, { capture: !0, passive: s }) : e.addEventListener(t, r, !0) : s !== void 0 ? e.addEventListener(t, r, { passive: s }) : e.addEventListener(t, r, !1) } function a0(e, t, r, n, s) { var o = n; if (!(t & 1) && !(t & 2) && n !== null) e: for (; ;) { if (n === null) return; var a = n.tag; if (a === 3 || a === 4) { var c = n.stateNode.containerInfo; if (c === s || c.nodeType === 8 && c.parentNode === s) break; if (a === 4) for (a = n.return; a !== null;) { var l = a.tag; if ((l === 3 || l === 4) && (l = a.stateNode.containerInfo, l === s || l.nodeType === 8 && l.parentNode === s)) return; a = a.return } for (; c !== null;) { if (a = dc(c), a === null) return; if (l = a.tag, l === 5 || l === 6) { n = o = a; continue e } c = c.parentNode } } n = n.return } rw(function () { var p = o, d = bv(r), f = []; e: { var h = Dw.get(e); if (h !== void 0) { var P = Cv, b = e; switch (e) { case "keypress": if (Uh(r) === 0) break e; case "keydown": case "keyup": P = lk; break; case "focusin": b = "focus", P = Zm; break; case "focusout": b = "blur", P = Zm; break; case "beforeblur": case "afterblur": P = Zm; break; case "click": if (r.button === 2) break e; case "auxclick": case "dblclick": case "mousedown": case "mousemove": case "mouseup": case "mouseout": case "mouseover": case "contextmenu": P = Ob; break; case "drag": case "dragend": case "dragenter": case "dragexit": case "dragleave": case "dragover": case "dragstart": case "drop": P = QR; break; case "touchcancel": case "touchend": case "touchmove": case "touchstart": P = uk; break; case kw: case Tw: case Aw: P = ZR; break; case Pw: P = hk; break; case "scroll": P = KR; break; case "wheel": P = mk; break; case "copy": case "cut": case "paste": P = tk; break; case "gotpointercapture": case "lostpointercapture": case "pointercancel": case "pointerdown": case "pointermove": case "pointerout": case "pointerover": case "pointerup": P = Lb }var u = (t & 4) !== 0, g = !u && e === "scroll", S = u ? h !== null ? h + "Capture" : null : h; u = []; for (var R = p, y; R !== null;) { y = R; var v = y.stateNode; if (y.tag === 5 && v !== null && (y = v, S !== null && (v = cp(R, S), v != null && u.push(gp(R, v, y)))), g) break; R = R.return } 0 < u.length && (h = new P(h, b, null, r, d), f.push({ event: h, listeners: u })) } } if (!(t & 7)) { e: { if (h = e === "mouseover" || e === "pointerover", P = e === "mouseout" || e === "pointerout", h && r !== eg && (b = r.relatedTarget || r.fromElement) && (dc(b) || b[Po])) break e; if ((P || h) && (h = d.window === d ? d : (h = d.ownerDocument) ? h.defaultView || h.parentWindow : window, P ? (b = r.relatedTarget || r.toElement, P = p, b = b ? dc(b) : null, b !== null && (g = Tc(b), b !== g || b.tag !== 5 && b.tag !== 6) && (b = null)) : (P = null, b = p), P !== b)) { if (u = Ob, v = "onMouseLeave", S = "onMouseEnter", R = "mouse", (e === "pointerout" || e === "pointerover") && (u = Lb, v = "onPointerLeave", S = "onPointerEnter", R = "pointer"), g = P == null ? h : od(P), y = b == null ? h : od(b), h = new u(v, R + "leave", P, r, d), h.target = g, h.relatedTarget = y, v = null, dc(d) === p && (u = new u(S, R + "enter", b, r, d), u.target = y, u.relatedTarget = g, v = u), g = v, P && b) t: { for (u = P, S = b, R = 0, y = u; y; y = ed(y))R++; for (y = 0, v = S; v; v = ed(v))y++; for (; 0 < R - y;)u = ed(u), R--; for (; 0 < y - R;)S = ed(S), y--; for (; R--;) { if (u === S || S !== null && u === S.alternate) break t; u = ed(u), S = ed(S) } u = null } else u = null; P !== null && Gb(f, h, P, u, !1), b !== null && g !== null && Gb(f, g, b, u, !0) } } e: { if (h = p ? od(p) : window, P = h.nodeName && h.nodeName.toLowerCase(), P === "select" || P === "input" && h.type === "file") var D = wk; else if (Fb(h)) if (ww) D = Rk; else { D = Ek; var M = Sk } else (P = h.nodeName) && P.toLowerCase() === "input" && (h.type === "checkbox" || h.type === "radio") && (D = Ck); if (D && (D = D(e, p))) { _w(f, D, r, d); break e } M && M(e, h, p), e === "focusout" && (M = h._wrapperState) && M.controlled && h.type === "number" && Y0(h, "number", h.value) } switch (M = p ? od(p) : window, e) { case "focusin": (Fb(M) || M.contentEditable === "true") && (sd = M, og = p, Xu = null); break; case "focusout": Xu = og = sd = null; break; case "mousedown": lg = !0; break; case "contextmenu": case "mouseup": case "dragend": lg = !1, Wb(f, r, d); break; case "selectionchange": if (Ak) break; case "keydown": case "keyup": Wb(f, r, d) }var W; if (kv) e: { switch (e) { case "compositionstart": var I = "onCompositionStart"; break e; case "compositionend": I = "onCompositionEnd"; break e; case "compositionupdate": I = "onCompositionUpdate"; break e }I = void 0 } else id ? bw(e, r) && (I = "onCompositionEnd") : e === "keydown" && r.keyCode === 229 && (I = "onCompositionStart"); I && (yw && r.locale !== "ko" && (id || I !== "onCompositionStart" ? I === "onCompositionEnd" && id && (W = vw()) : (ll = d, Ev = "value" in ll ? ll.value : ll.textContent, id = !0)), M = gf(p, I), 0 < M.length && (I = new Mb(I, e, null, r, d), f.push({ event: I, listeners: M }), W ? I.data = W : (W = xw(r), W !== null && (I.data = W)))), (W = vk ? yk(e, r) : bk(e, r)) && (p = gf(p, "onBeforeInput"), 0 < p.length && (d = new Mb("onBeforeInput", "beforeinput", null, r, d), f.push({ event: d, listeners: p }), d.data = W)) } Iw(f, t) }) } function gp(e, t, r) { return { instance: e, listener: t, currentTarget: r } } function gf(e, t) { for (var r = t + "Capture", n = []; e !== null;) { var s = e, o = s.stateNode; s.tag === 5 && o !== null && (s = o, o = cp(e, r), o != null && n.unshift(gp(e, o, s)), o = cp(e, t), o != null && n.push(gp(e, o, s))), e = e.return } return n } function ed(e) { if (e === null) return null; do e = e.return; while (e && e.tag !== 5); return e || null } function Gb(e, t, r, n, s) { for (var o = t._reactName, a = []; r !== null && r !== n;) { var c = r, l = c.alternate, p = c.stateNode; if (l !== null && l === n) break; c.tag === 5 && p !== null && (c = p, s ? (l = cp(r, o), l != null && a.unshift(gp(r, l, c))) : s || (l = cp(r, o), l != null && a.push(gp(r, l, c)))), r = r.return } a.length !== 0 && e.push({ event: t, listeners: a }) } var jk = /\r\n?/g, Ok = /\u0000|\uFFFD/g; function Kb(e) {
    return (typeof e == "string" ? e : "" + e).replace(jk, `
`).replace(Ok, "")
} function Sh(e, t, r) { if (t = Kb(t), Kb(e) !== t && r) throw Error(at(425)) } function vf() { } var cg = null, dg = null; function ug(e, t) { return e === "textarea" || e === "noscript" || typeof t.children == "string" || typeof t.children == "number" || typeof t.dangerouslySetInnerHTML == "object" && t.dangerouslySetInnerHTML !== null && t.dangerouslySetInnerHTML.__html != null } var pg = typeof setTimeout == "function" ? setTimeout : void 0, Mk = typeof clearTimeout == "function" ? clearTimeout : void 0, Yb = typeof Promise == "function" ? Promise : void 0, Lk = typeof queueMicrotask == "function" ? queueMicrotask : typeof Yb < "u" ? function (e) { return Yb.resolve(null).then(e).catch(Nk) } : pg; function Nk(e) { setTimeout(function () { throw e }) } function o0(e, t) { var r = t, n = 0; do { var s = r.nextSibling; if (e.removeChild(r), s && s.nodeType === 8) if (r = s.data, r === "/$") { if (n === 0) { e.removeChild(s), pp(t); return } n-- } else r !== "$" && r !== "$?" && r !== "$!" || n++; r = s } while (r); pp(t) } function fl(e) { for (; e != null; e = e.nextSibling) { var t = e.nodeType; if (t === 1 || t === 3) break; if (t === 8) { if (t = e.data, t === "$" || t === "$!" || t === "$?") break; if (t === "/$") return null } } return e } function Qb(e) { e = e.previousSibling; for (var t = 0; e;) { if (e.nodeType === 8) { var r = e.data; if (r === "$" || r === "$!" || r === "$?") { if (t === 0) return e; t-- } else r === "/$" && t++ } e = e.previousSibling } return null } var Ud = Math.random().toString(36).slice(2), ro = "__reactFiber$" + Ud, vp = "__reactProps$" + Ud, Po = "__reactContainer$" + Ud, hg = "__reactEvents$" + Ud, Bk = "__reactListeners$" + Ud, Fk = "__reactHandles$" + Ud; function dc(e) { var t = e[ro]; if (t) return t; for (var r = e.parentNode; r;) { if (t = r[Po] || r[ro]) { if (r = t.alternate, t.child !== null || r !== null && r.child !== null) for (e = Qb(e); e !== null;) { if (r = e[ro]) return r; e = Qb(e) } return t } e = r, r = e.parentNode } return null } function jp(e) { return e = e[ro] || e[Po], !e || e.tag !== 5 && e.tag !== 6 && e.tag !== 13 && e.tag !== 3 ? null : e } function od(e) { if (e.tag === 5 || e.tag === 6) return e.stateNode; throw Error(at(33)) } function Xf(e) { return e[vp] || null } var fg = [], ld = -1; function El(e) { return { current: e } } function Bn(e) { 0 > ld || (e.current = fg[ld], fg[ld] = null, ld--) } function On(e, t) { ld++, fg[ld] = e.current, e.current = t } var xl = {}, ts = El(xl), ks = El(!1), bc = xl; function Ad(e, t) { var r = e.type.contextTypes; if (!r) return xl; var n = e.stateNode; if (n && n.__reactInternalMemoizedUnmaskedChildContext === t) return n.__reactInternalMemoizedMaskedChildContext; var s = {}, o; for (o in r) s[o] = t[o]; return n && (e = e.stateNode, e.__reactInternalMemoizedUnmaskedChildContext = t, e.__reactInternalMemoizedMaskedChildContext = s), s } function Ts(e) { return e = e.childContextTypes, e != null } function yf() { Bn(ks), Bn(ts) } function Jb(e, t, r) { if (ts.current !== xl) throw Error(at(168)); On(ts, t), On(ks, r) } function Ow(e, t, r) { var n = e.stateNode; if (t = t.childContextTypes, typeof n.getChildContext != "function") return r; n = n.getChildContext(); for (var s in n) if (!(s in t)) throw Error(at(108, SR(e) || "Unknown", s)); return Zn({}, r, n) } function bf(e) { return e = (e = e.stateNode) && e.__reactInternalMemoizedMergedChildContext || xl, bc = ts.current, On(ts, e), On(ks, ks.current), !0 } function Xb(e, t, r) { var n = e.stateNode; if (!n) throw Error(at(169)); r ? (e = Ow(e, t, bc), n.__reactInternalMemoizedMergedChildContext = e, Bn(ks), Bn(ts), On(ts, e)) : Bn(ks), On(ks, r) } var Eo = null, Zf = !1, l0 = !1; function Mw(e) { Eo === null ? Eo = [e] : Eo.push(e) } function zk(e) { Zf = !0, Mw(e) } function Cl() { if (!l0 && Eo !== null) { l0 = !0; var e = 0, t = _n; try { var r = Eo; for (_n = 1; e < r.length; e++) { var n = r[e]; do n = n(!0); while (n !== null) } Eo = null, Zf = !1 } catch (s) { throw Eo !== null && (Eo = Eo.slice(e + 1)), aw(xv, Cl), s } finally { _n = t, l0 = !1 } } return null } var cd = [], dd = 0, xf = null, _f = 0, sa = [], aa = 0, xc = null, Co = 1, Ro = ""; function ac(e, t) { cd[dd++] = _f, cd[dd++] = xf, xf = e, _f = t } function Lw(e, t, r) { sa[aa++] = Co, sa[aa++] = Ro, sa[aa++] = xc, xc = e; var n = Co; e = Ro; var s = 32 - La(n) - 1; n &= ~(1 << s), r += 1; var o = 32 - La(t) + s; if (30 < o) { var a = s - s % 5; o = (n & (1 << a) - 1).toString(32), n >>= a, s -= a, Co = 1 << 32 - La(t) + s | r << s | n, Ro = o + e } else Co = 1 << o | r << s | n, Ro = e } function Av(e) { e.return !== null && (ac(e, 1), Lw(e, 1, 0)) } function Pv(e) { for (; e === xf;)xf = cd[--dd], cd[dd] = null, _f = cd[--dd], cd[dd] = null; for (; e === xc;)xc = sa[--aa], sa[aa] = null, Ro = sa[--aa], sa[aa] = null, Co = sa[--aa], sa[aa] = null } var $s = null, zs = null, $n = !1, Ma = null; function Nw(e, t) { var r = oa(5, null, null, 0); r.elementType = "DELETED", r.stateNode = t, r.return = e, t = e.deletions, t === null ? (e.deletions = [r], e.flags |= 16) : t.push(r) } function Zb(e, t) { switch (e.tag) { case 5: var r = e.type; return t = t.nodeType !== 1 || r.toLowerCase() !== t.nodeName.toLowerCase() ? null : t, t !== null ? (e.stateNode = t, $s = e, zs = fl(t.firstChild), !0) : !1; case 6: return t = e.pendingProps === "" || t.nodeType !== 3 ? null : t, t !== null ? (e.stateNode = t, $s = e, zs = null, !0) : !1; case 13: return t = t.nodeType !== 8 ? null : t, t !== null ? (r = xc !== null ? { id: Co, overflow: Ro } : null, e.memoizedState = { dehydrated: t, treeContext: r, retryLane: 1073741824 }, r = oa(18, null, null, 0), r.stateNode = t, r.return = e, e.child = r, $s = e, zs = null, !0) : !1; default: return !1 } } function mg(e) { return (e.mode & 1) !== 0 && (e.flags & 128) === 0 } function gg(e) { if ($n) { var t = zs; if (t) { var r = t; if (!Zb(e, t)) { if (mg(e)) throw Error(at(418)); t = fl(r.nextSibling); var n = $s; t && Zb(e, t) ? Nw(n, r) : (e.flags = e.flags & -4097 | 2, $n = !1, $s = e) } } else { if (mg(e)) throw Error(at(418)); e.flags = e.flags & -4097 | 2, $n = !1, $s = e } } } function e1(e) { for (e = e.return; e !== null && e.tag !== 5 && e.tag !== 3 && e.tag !== 13;)e = e.return; $s = e } function Eh(e) { if (e !== $s) return !1; if (!$n) return e1(e), $n = !0, !1; var t; if ((t = e.tag !== 3) && !(t = e.tag !== 5) && (t = e.type, t = t !== "head" && t !== "body" && !ug(e.type, e.memoizedProps)), t && (t = zs)) { if (mg(e)) throw Bw(), Error(at(418)); for (; t;)Nw(e, t), t = fl(t.nextSibling) } if (e1(e), e.tag === 13) { if (e = e.memoizedState, e = e !== null ? e.dehydrated : null, !e) throw Error(at(317)); e: { for (e = e.nextSibling, t = 0; e;) { if (e.nodeType === 8) { var r = e.data; if (r === "/$") { if (t === 0) { zs = fl(e.nextSibling); break e } t-- } else r !== "$" && r !== "$!" && r !== "$?" || t++ } e = e.nextSibling } zs = null } } else zs = $s ? fl(e.stateNode.nextSibling) : null; return !0 } function Bw() { for (var e = zs; e;)e = fl(e.nextSibling) } function Pd() { zs = $s = null, $n = !1 } function Dv(e) { Ma === null ? Ma = [e] : Ma.push(e) } var $k = Lo.ReactCurrentBatchConfig; function Ou(e, t, r) { if (e = r.ref, e !== null && typeof e != "function" && typeof e != "object") { if (r._owner) { if (r = r._owner, r) { if (r.tag !== 1) throw Error(at(309)); var n = r.stateNode } if (!n) throw Error(at(147, e)); var s = n, o = "" + e; return t !== null && t.ref !== null && typeof t.ref == "function" && t.ref._stringRef === o ? t.ref : (t = function (a) { var c = s.refs; a === null ? delete c[o] : c[o] = a }, t._stringRef = o, t) } if (typeof e != "string") throw Error(at(284)); if (!r._owner) throw Error(at(290, e)) } return e } function Ch(e, t) { throw e = Object.prototype.toString.call(t), Error(at(31, e === "[object Object]" ? "object with keys {" + Object.keys(t).join(", ") + "}" : e)) } function t1(e) { var t = e._init; return t(e._payload) } function Fw(e) { function t(S, R) { if (e) { var y = S.deletions; y === null ? (S.deletions = [R], S.flags |= 16) : y.push(R) } } function r(S, R) { if (!e) return null; for (; R !== null;)t(S, R), R = R.sibling; return null } function n(S, R) { for (S = new Map; R !== null;)R.key !== null ? S.set(R.key, R) : S.set(R.index, R), R = R.sibling; return S } function s(S, R) { return S = yl(S, R), S.index = 0, S.sibling = null, S } function o(S, R, y) { return S.index = y, e ? (y = S.alternate, y !== null ? (y = y.index, y < R ? (S.flags |= 2, R) : y) : (S.flags |= 2, R)) : (S.flags |= 1048576, R) } function a(S) { return e && S.alternate === null && (S.flags |= 2), S } function c(S, R, y, v) { return R === null || R.tag !== 6 ? (R = m0(y, S.mode, v), R.return = S, R) : (R = s(R, y), R.return = S, R) } function l(S, R, y, v) { var D = y.type; return D === nd ? d(S, R, y.props.children, v, y.key) : R !== null && (R.elementType === D || typeof D == "object" && D !== null && D.$$typeof === il && t1(D) === R.type) ? (v = s(R, y.props), v.ref = Ou(S, R, y), v.return = S, v) : (v = Yh(y.type, y.key, y.props, null, S.mode, v), v.ref = Ou(S, R, y), v.return = S, v) } function p(S, R, y, v) { return R === null || R.tag !== 4 || R.stateNode.containerInfo !== y.containerInfo || R.stateNode.implementation !== y.implementation ? (R = g0(y, S.mode, v), R.return = S, R) : (R = s(R, y.children || []), R.return = S, R) } function d(S, R, y, v, D) { return R === null || R.tag !== 7 ? (R = vc(y, S.mode, v, D), R.return = S, R) : (R = s(R, y), R.return = S, R) } function f(S, R, y) { if (typeof R == "string" && R !== "" || typeof R == "number") return R = m0("" + R, S.mode, y), R.return = S, R; if (typeof R == "object" && R !== null) { switch (R.$$typeof) { case fh: return y = Yh(R.type, R.key, R.props, null, S.mode, y), y.ref = Ou(S, null, R), y.return = S, y; case rd: return R = g0(R, S.mode, y), R.return = S, R; case il: var v = R._init; return f(S, v(R._payload), y) }if (Vu(R) || Au(R)) return R = vc(R, S.mode, y, null), R.return = S, R; Ch(S, R) } return null } function h(S, R, y, v) { var D = R !== null ? R.key : null; if (typeof y == "string" && y !== "" || typeof y == "number") return D !== null ? null : c(S, R, "" + y, v); if (typeof y == "object" && y !== null) { switch (y.$$typeof) { case fh: return y.key === D ? l(S, R, y, v) : null; case rd: return y.key === D ? p(S, R, y, v) : null; case il: return D = y._init, h(S, R, D(y._payload), v) }if (Vu(y) || Au(y)) return D !== null ? null : d(S, R, y, v, null); Ch(S, y) } return null } function P(S, R, y, v, D) { if (typeof v == "string" && v !== "" || typeof v == "number") return S = S.get(y) || null, c(R, S, "" + v, D); if (typeof v == "object" && v !== null) { switch (v.$$typeof) { case fh: return S = S.get(v.key === null ? y : v.key) || null, l(R, S, v, D); case rd: return S = S.get(v.key === null ? y : v.key) || null, p(R, S, v, D); case il: var M = v._init; return P(S, R, y, M(v._payload), D) }if (Vu(v) || Au(v)) return S = S.get(y) || null, d(R, S, v, D, null); Ch(R, v) } return null } function b(S, R, y, v) { for (var D = null, M = null, W = R, I = R = 0, E = null; W !== null && I < y.length; I++) { W.index > I ? (E = W, W = null) : E = W.sibling; var _ = h(S, W, y[I], v); if (_ === null) { W === null && (W = E); break } e && W && _.alternate === null && t(S, W), R = o(_, R, I), M === null ? D = _ : M.sibling = _, M = _, W = E } if (I === y.length) return r(S, W), $n && ac(S, I), D; if (W === null) { for (; I < y.length; I++)W = f(S, y[I], v), W !== null && (R = o(W, R, I), M === null ? D = W : M.sibling = W, M = W); return $n && ac(S, I), D } for (W = n(S, W); I < y.length; I++)E = P(W, S, I, y[I], v), E !== null && (e && E.alternate !== null && W.delete(E.key === null ? I : E.key), R = o(E, R, I), M === null ? D = E : M.sibling = E, M = E); return e && W.forEach(function (k) { return t(S, k) }), $n && ac(S, I), D } function u(S, R, y, v) { var D = Au(y); if (typeof D != "function") throw Error(at(150)); if (y = D.call(y), y == null) throw Error(at(151)); for (var M = D = null, W = R, I = R = 0, E = null, _ = y.next(); W !== null && !_.done; I++, _ = y.next()) { W.index > I ? (E = W, W = null) : E = W.sibling; var k = h(S, W, _.value, v); if (k === null) { W === null && (W = E); break } e && W && k.alternate === null && t(S, W), R = o(k, R, I), M === null ? D = k : M.sibling = k, M = k, W = E } if (_.done) return r(S, W), $n && ac(S, I), D; if (W === null) { for (; !_.done; I++, _ = y.next())_ = f(S, _.value, v), _ !== null && (R = o(_, R, I), M === null ? D = _ : M.sibling = _, M = _); return $n && ac(S, I), D } for (W = n(S, W); !_.done; I++, _ = y.next())_ = P(W, S, I, _.value, v), _ !== null && (e && _.alternate !== null && W.delete(_.key === null ? I : _.key), R = o(_, R, I), M === null ? D = _ : M.sibling = _, M = _); return e && W.forEach(function (L) { return t(S, L) }), $n && ac(S, I), D } function g(S, R, y, v) { if (typeof y == "object" && y !== null && y.type === nd && y.key === null && (y = y.props.children), typeof y == "object" && y !== null) { switch (y.$$typeof) { case fh: e: { for (var D = y.key, M = R; M !== null;) { if (M.key === D) { if (D = y.type, D === nd) { if (M.tag === 7) { r(S, M.sibling), R = s(M, y.props.children), R.return = S, S = R; break e } } else if (M.elementType === D || typeof D == "object" && D !== null && D.$$typeof === il && t1(D) === M.type) { r(S, M.sibling), R = s(M, y.props), R.ref = Ou(S, M, y), R.return = S, S = R; break e } r(S, M); break } else t(S, M); M = M.sibling } y.type === nd ? (R = vc(y.props.children, S.mode, v, y.key), R.return = S, S = R) : (v = Yh(y.type, y.key, y.props, null, S.mode, v), v.ref = Ou(S, R, y), v.return = S, S = v) } return a(S); case rd: e: { for (M = y.key; R !== null;) { if (R.key === M) if (R.tag === 4 && R.stateNode.containerInfo === y.containerInfo && R.stateNode.implementation === y.implementation) { r(S, R.sibling), R = s(R, y.children || []), R.return = S, S = R; break e } else { r(S, R); break } else t(S, R); R = R.sibling } R = g0(y, S.mode, v), R.return = S, S = R } return a(S); case il: return M = y._init, g(S, R, M(y._payload), v) }if (Vu(y)) return b(S, R, y, v); if (Au(y)) return u(S, R, y, v); Ch(S, y) } return typeof y == "string" && y !== "" || typeof y == "number" ? (y = "" + y, R !== null && R.tag === 6 ? (r(S, R.sibling), R = s(R, y), R.return = S, S = R) : (r(S, R), R = m0(y, S.mode, v), R.return = S, S = R), a(S)) : r(S, R) } return g } var Dd = Fw(!0), zw = Fw(!1), wf = El(null), Sf = null, ud = null, Iv = null; function jv() { Iv = ud = Sf = null } function Ov(e) { var t = wf.current; Bn(wf), e._currentValue = t } function vg(e, t, r) { for (; e !== null;) { var n = e.alternate; if ((e.childLanes & t) !== t ? (e.childLanes |= t, n !== null && (n.childLanes |= t)) : n !== null && (n.childLanes & t) !== t && (n.childLanes |= t), e === r) break; e = e.return } } function wd(e, t) { Sf = e, Iv = ud = null, e = e.dependencies, e !== null && e.firstContext !== null && (e.lanes & t && (Rs = !0), e.firstContext = null) } function pa(e) { var t = e._currentValue; if (Iv !== e) if (e = { context: e, memoizedValue: t, next: null }, ud === null) { if (Sf === null) throw Error(at(308)); ud = e, Sf.dependencies = { lanes: 0, firstContext: e } } else ud = ud.next = e; return t } var uc = null; function Mv(e) { uc === null ? uc = [e] : uc.push(e) } function $w(e, t, r, n) { var s = t.interleaved; return s === null ? (r.next = r, Mv(t)) : (r.next = s.next, s.next = r), t.interleaved = r, Do(e, n) } function Do(e, t) { e.lanes |= t; var r = e.alternate; for (r !== null && (r.lanes |= t), r = e, e = e.return; e !== null;)e.childLanes |= t, r = e.alternate, r !== null && (r.childLanes |= t), r = e, e = e.return; return r.tag === 3 ? r.stateNode : null } var sl = !1; function Lv(e) { e.updateQueue = { baseState: e.memoizedState, firstBaseUpdate: null, lastBaseUpdate: null, shared: { pending: null, interleaved: null, lanes: 0 }, effects: null } } function Uw(e, t) { e = e.updateQueue, t.updateQueue === e && (t.updateQueue = { baseState: e.baseState, firstBaseUpdate: e.firstBaseUpdate, lastBaseUpdate: e.lastBaseUpdate, shared: e.shared, effects: e.effects }) } function ko(e, t) { return { eventTime: e, lane: t, tag: 0, payload: null, callback: null, next: null } } function ml(e, t, r) { var n = e.updateQueue; if (n === null) return null; if (n = n.shared, an & 2) { var s = n.pending; return s === null ? t.next = t : (t.next = s.next, s.next = t), n.pending = t, Do(e, r) } return s = n.interleaved, s === null ? (t.next = t, Mv(n)) : (t.next = s.next, s.next = t), n.interleaved = t, Do(e, r) } function Vh(e, t, r) { if (t = t.updateQueue, t !== null && (t = t.shared, (r & 4194240) !== 0)) { var n = t.lanes; n &= e.pendingLanes, r |= n, t.lanes = r, _v(e, r) } } function r1(e, t) { var r = e.updateQueue, n = e.alternate; if (n !== null && (n = n.updateQueue, r === n)) { var s = null, o = null; if (r = r.firstBaseUpdate, r !== null) { do { var a = { eventTime: r.eventTime, lane: r.lane, tag: r.tag, payload: r.payload, callback: r.callback, next: null }; o === null ? s = o = a : o = o.next = a, r = r.next } while (r !== null); o === null ? s = o = t : o = o.next = t } else s = o = t; r = { baseState: n.baseState, firstBaseUpdate: s, lastBaseUpdate: o, shared: n.shared, effects: n.effects }, e.updateQueue = r; return } e = r.lastBaseUpdate, e === null ? r.firstBaseUpdate = t : e.next = t, r.lastBaseUpdate = t } function Ef(e, t, r, n) { var s = e.updateQueue; sl = !1; var o = s.firstBaseUpdate, a = s.lastBaseUpdate, c = s.shared.pending; if (c !== null) { s.shared.pending = null; var l = c, p = l.next; l.next = null, a === null ? o = p : a.next = p, a = l; var d = e.alternate; d !== null && (d = d.updateQueue, c = d.lastBaseUpdate, c !== a && (c === null ? d.firstBaseUpdate = p : c.next = p, d.lastBaseUpdate = l)) } if (o !== null) { var f = s.baseState; a = 0, d = p = l = null, c = o; do { var h = c.lane, P = c.eventTime; if ((n & h) === h) { d !== null && (d = d.next = { eventTime: P, lane: 0, tag: c.tag, payload: c.payload, callback: c.callback, next: null }); e: { var b = e, u = c; switch (h = t, P = r, u.tag) { case 1: if (b = u.payload, typeof b == "function") { f = b.call(P, f, h); break e } f = b; break e; case 3: b.flags = b.flags & -65537 | 128; case 0: if (b = u.payload, h = typeof b == "function" ? b.call(P, f, h) : b, h == null) break e; f = Zn({}, f, h); break e; case 2: sl = !0 } } c.callback !== null && c.lane !== 0 && (e.flags |= 64, h = s.effects, h === null ? s.effects = [c] : h.push(c)) } else P = { eventTime: P, lane: h, tag: c.tag, payload: c.payload, callback: c.callback, next: null }, d === null ? (p = d = P, l = f) : d = d.next = P, a |= h; if (c = c.next, c === null) { if (c = s.shared.pending, c === null) break; h = c, c = h.next, h.next = null, s.lastBaseUpdate = h, s.shared.pending = null } } while (1); if (d === null && (l = f), s.baseState = l, s.firstBaseUpdate = p, s.lastBaseUpdate = d, t = s.shared.interleaved, t !== null) { s = t; do a |= s.lane, s = s.next; while (s !== t) } else o === null && (s.shared.lanes = 0); wc |= a, e.lanes = a, e.memoizedState = f } } function n1(e, t, r) { if (e = t.effects, t.effects = null, e !== null) for (t = 0; t < e.length; t++) { var n = e[t], s = n.callback; if (s !== null) { if (n.callback = null, n = r, typeof s != "function") throw Error(at(191, s)); s.call(n) } } } var Op = {}, io = El(Op), yp = El(Op), bp = El(Op); function pc(e) { if (e === Op) throw Error(at(174)); return e } function Nv(e, t) { switch (On(bp, t), On(yp, e), On(io, Op), e = t.nodeType, e) { case 9: case 11: t = (t = t.documentElement) ? t.namespaceURI : J0(null, ""); break; default: e = e === 8 ? t.parentNode : t, t = e.namespaceURI || null, e = e.tagName, t = J0(t, e) }Bn(io), On(io, t) } function Id() { Bn(io), Bn(yp), Bn(bp) } function Vw(e) { pc(bp.current); var t = pc(io.current), r = J0(t, e.type); t !== r && (On(yp, e), On(io, r)) } function Bv(e) { yp.current === e && (Bn(io), Bn(yp)) } var Yn = El(0); function Cf(e) { for (var t = e; t !== null;) { if (t.tag === 13) { var r = t.memoizedState; if (r !== null && (r = r.dehydrated, r === null || r.data === "$?" || r.data === "$!")) return t } else if (t.tag === 19 && t.memoizedProps.revealOrder !== void 0) { if (t.flags & 128) return t } else if (t.child !== null) { t.child.return = t, t = t.child; continue } if (t === e) break; for (; t.sibling === null;) { if (t.return === null || t.return === e) return null; t = t.return } t.sibling.return = t.return, t = t.sibling } return null } var c0 = []; function Fv() { for (var e = 0; e < c0.length; e++)c0[e]._workInProgressVersionPrimary = null; c0.length = 0 } var Wh = Lo.ReactCurrentDispatcher, d0 = Lo.ReactCurrentBatchConfig, _c = 0, Xn = null, Si = null, Ti = null, Rf = !1, Zu = !1, xp = 0, Uk = 0; function Qi() { throw Error(at(321)) } function zv(e, t) { if (t === null) return !1; for (var r = 0; r < t.length && r < e.length; r++)if (!Fa(e[r], t[r])) return !1; return !0 } function $v(e, t, r, n, s, o) { if (_c = o, Xn = t, t.memoizedState = null, t.updateQueue = null, t.lanes = 0, Wh.current = e === null || e.memoizedState === null ? qk : Gk, e = r(n, s), Zu) { o = 0; do { if (Zu = !1, xp = 0, 25 <= o) throw Error(at(301)); o += 1, Ti = Si = null, t.updateQueue = null, Wh.current = Kk, e = r(n, s) } while (Zu) } if (Wh.current = kf, t = Si !== null && Si.next !== null, _c = 0, Ti = Si = Xn = null, Rf = !1, t) throw Error(at(300)); return e } function Uv() { var e = xp !== 0; return xp = 0, e } function to() { var e = { memoizedState: null, baseState: null, baseQueue: null, queue: null, next: null }; return Ti === null ? Xn.memoizedState = Ti = e : Ti = Ti.next = e, Ti } function ha() { if (Si === null) { var e = Xn.alternate; e = e !== null ? e.memoizedState : null } else e = Si.next; var t = Ti === null ? Xn.memoizedState : Ti.next; if (t !== null) Ti = t, Si = e; else { if (e === null) throw Error(at(310)); Si = e, e = { memoizedState: Si.memoizedState, baseState: Si.baseState, baseQueue: Si.baseQueue, queue: Si.queue, next: null }, Ti === null ? Xn.memoizedState = Ti = e : Ti = Ti.next = e } return Ti } function _p(e, t) { return typeof t == "function" ? t(e) : t } function u0(e) { var t = ha(), r = t.queue; if (r === null) throw Error(at(311)); r.lastRenderedReducer = e; var n = Si, s = n.baseQueue, o = r.pending; if (o !== null) { if (s !== null) { var a = s.next; s.next = o.next, o.next = a } n.baseQueue = s = o, r.pending = null } if (s !== null) { o = s.next, n = n.baseState; var c = a = null, l = null, p = o; do { var d = p.lane; if ((_c & d) === d) l !== null && (l = l.next = { lane: 0, action: p.action, hasEagerState: p.hasEagerState, eagerState: p.eagerState, next: null }), n = p.hasEagerState ? p.eagerState : e(n, p.action); else { var f = { lane: d, action: p.action, hasEagerState: p.hasEagerState, eagerState: p.eagerState, next: null }; l === null ? (c = l = f, a = n) : l = l.next = f, Xn.lanes |= d, wc |= d } p = p.next } while (p !== null && p !== o); l === null ? a = n : l.next = c, Fa(n, t.memoizedState) || (Rs = !0), t.memoizedState = n, t.baseState = a, t.baseQueue = l, r.lastRenderedState = n } if (e = r.interleaved, e !== null) { s = e; do o = s.lane, Xn.lanes |= o, wc |= o, s = s.next; while (s !== e) } else s === null && (r.lanes = 0); return [t.memoizedState, r.dispatch] } function p0(e) { var t = ha(), r = t.queue; if (r === null) throw Error(at(311)); r.lastRenderedReducer = e; var n = r.dispatch, s = r.pending, o = t.memoizedState; if (s !== null) { r.pending = null; var a = s = s.next; do o = e(o, a.action), a = a.next; while (a !== s); Fa(o, t.memoizedState) || (Rs = !0), t.memoizedState = o, t.baseQueue === null && (t.baseState = o), r.lastRenderedState = o } return [o, n] } function Ww() { } function Hw(e, t) { var r = Xn, n = ha(), s = t(), o = !Fa(n.memoizedState, s); if (o && (n.memoizedState = s, Rs = !0), n = n.queue, Vv(Kw.bind(null, r, n, e), [e]), n.getSnapshot !== t || o || Ti !== null && Ti.memoizedState.tag & 1) { if (r.flags |= 2048, wp(9, Gw.bind(null, r, n, s, t), void 0, null), Ai === null) throw Error(at(349)); _c & 30 || qw(r, t, s) } return s } function qw(e, t, r) { e.flags |= 16384, e = { getSnapshot: t, value: r }, t = Xn.updateQueue, t === null ? (t = { lastEffect: null, stores: null }, Xn.updateQueue = t, t.stores = [e]) : (r = t.stores, r === null ? t.stores = [e] : r.push(e)) } function Gw(e, t, r, n) { t.value = r, t.getSnapshot = n, Yw(t) && Qw(e) } function Kw(e, t, r) { return r(function () { Yw(t) && Qw(e) }) } function Yw(e) { var t = e.getSnapshot; e = e.value; try { var r = t(); return !Fa(e, r) } catch { return !0 } } function Qw(e) { var t = Do(e, 1); t !== null && Na(t, e, 1, -1) } function i1(e) { var t = to(); return typeof e == "function" && (e = e()), t.memoizedState = t.baseState = e, e = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: _p, lastRenderedState: e }, t.queue = e, e = e.dispatch = Hk.bind(null, Xn, e), [t.memoizedState, e] } function wp(e, t, r, n) { return e = { tag: e, create: t, destroy: r, deps: n, next: null }, t = Xn.updateQueue, t === null ? (t = { lastEffect: null, stores: null }, Xn.updateQueue = t, t.lastEffect = e.next = e) : (r = t.lastEffect, r === null ? t.lastEffect = e.next = e : (n = r.next, r.next = e, e.next = n, t.lastEffect = e)), e } function Jw() { return ha().memoizedState } function Hh(e, t, r, n) { var s = to(); Xn.flags |= e, s.memoizedState = wp(1 | t, r, void 0, n === void 0 ? null : n) } function em(e, t, r, n) { var s = ha(); n = n === void 0 ? null : n; var o = void 0; if (Si !== null) { var a = Si.memoizedState; if (o = a.destroy, n !== null && zv(n, a.deps)) { s.memoizedState = wp(t, r, o, n); return } } Xn.flags |= e, s.memoizedState = wp(1 | t, r, o, n) } function s1(e, t) { return Hh(8390656, 8, e, t) } function Vv(e, t) { return em(2048, 8, e, t) } function Xw(e, t) { return em(4, 2, e, t) } function Zw(e, t) { return em(4, 4, e, t) } function eS(e, t) { if (typeof t == "function") return e = e(), t(e), function () { t(null) }; if (t != null) return e = e(), t.current = e, function () { t.current = null } } function tS(e, t, r) { return r = r != null ? r.concat([e]) : null, em(4, 4, eS.bind(null, t, e), r) } function Wv() { } function rS(e, t) { var r = ha(); t = t === void 0 ? null : t; var n = r.memoizedState; return n !== null && t !== null && zv(t, n[1]) ? n[0] : (r.memoizedState = [e, t], e) } function nS(e, t) { var r = ha(); t = t === void 0 ? null : t; var n = r.memoizedState; return n !== null && t !== null && zv(t, n[1]) ? n[0] : (e = e(), r.memoizedState = [e, t], e) } function iS(e, t, r) { return _c & 21 ? (Fa(r, t) || (r = cw(), Xn.lanes |= r, wc |= r, e.baseState = !0), t) : (e.baseState && (e.baseState = !1, Rs = !0), e.memoizedState = r) } function Vk(e, t) { var r = _n; _n = r !== 0 && 4 > r ? r : 4, e(!0); var n = d0.transition; d0.transition = {}; try { e(!1), t() } finally { _n = r, d0.transition = n } } function sS() { return ha().memoizedState } function Wk(e, t, r) { var n = vl(e); if (r = { lane: n, action: r, hasEagerState: !1, eagerState: null, next: null }, aS(e)) oS(t, r); else if (r = $w(e, t, r, n), r !== null) { var s = ps(); Na(r, e, n, s), lS(r, t, n) } } function Hk(e, t, r) { var n = vl(e), s = { lane: n, action: r, hasEagerState: !1, eagerState: null, next: null }; if (aS(e)) oS(t, s); else { var o = e.alternate; if (e.lanes === 0 && (o === null || o.lanes === 0) && (o = t.lastRenderedReducer, o !== null)) try { var a = t.lastRenderedState, c = o(a, r); if (s.hasEagerState = !0, s.eagerState = c, Fa(c, a)) { var l = t.interleaved; l === null ? (s.next = s, Mv(t)) : (s.next = l.next, l.next = s), t.interleaved = s; return } } catch { } finally { } r = $w(e, t, s, n), r !== null && (s = ps(), Na(r, e, n, s), lS(r, t, n)) } } function aS(e) { var t = e.alternate; return e === Xn || t !== null && t === Xn } function oS(e, t) { Zu = Rf = !0; var r = e.pending; r === null ? t.next = t : (t.next = r.next, r.next = t), e.pending = t } function lS(e, t, r) { if (r & 4194240) { var n = t.lanes; n &= e.pendingLanes, r |= n, t.lanes = r, _v(e, r) } } var kf = { readContext: pa, useCallback: Qi, useContext: Qi, useEffect: Qi, useImperativeHandle: Qi, useInsertionEffect: Qi, useLayoutEffect: Qi, useMemo: Qi, useReducer: Qi, useRef: Qi, useState: Qi, useDebugValue: Qi, useDeferredValue: Qi, useTransition: Qi, useMutableSource: Qi, useSyncExternalStore: Qi, useId: Qi, unstable_isNewReconciler: !1 }, qk = { readContext: pa, useCallback: function (e, t) { return to().memoizedState = [e, t === void 0 ? null : t], e }, useContext: pa, useEffect: s1, useImperativeHandle: function (e, t, r) { return r = r != null ? r.concat([e]) : null, Hh(4194308, 4, eS.bind(null, t, e), r) }, useLayoutEffect: function (e, t) { return Hh(4194308, 4, e, t) }, useInsertionEffect: function (e, t) { return Hh(4, 2, e, t) }, useMemo: function (e, t) { var r = to(); return t = t === void 0 ? null : t, e = e(), r.memoizedState = [e, t], e }, useReducer: function (e, t, r) { var n = to(); return t = r !== void 0 ? r(t) : t, n.memoizedState = n.baseState = t, e = { pending: null, interleaved: null, lanes: 0, dispatch: null, lastRenderedReducer: e, lastRenderedState: t }, n.queue = e, e = e.dispatch = Wk.bind(null, Xn, e), [n.memoizedState, e] }, useRef: function (e) { var t = to(); return e = { current: e }, t.memoizedState = e }, useState: i1, useDebugValue: Wv, useDeferredValue: function (e) { return to().memoizedState = e }, useTransition: function () { var e = i1(!1), t = e[0]; return e = Vk.bind(null, e[1]), to().memoizedState = e, [t, e] }, useMutableSource: function () { }, useSyncExternalStore: function (e, t, r) { var n = Xn, s = to(); if ($n) { if (r === void 0) throw Error(at(407)); r = r() } else { if (r = t(), Ai === null) throw Error(at(349)); _c & 30 || qw(n, t, r) } s.memoizedState = r; var o = { value: r, getSnapshot: t }; return s.queue = o, s1(Kw.bind(null, n, o, e), [e]), n.flags |= 2048, wp(9, Gw.bind(null, n, o, r, t), void 0, null), r }, useId: function () { var e = to(), t = Ai.identifierPrefix; if ($n) { var r = Ro, n = Co; r = (n & ~(1 << 32 - La(n) - 1)).toString(32) + r, t = ":" + t + "R" + r, r = xp++, 0 < r && (t += "H" + r.toString(32)), t += ":" } else r = Uk++, t = ":" + t + "r" + r.toString(32) + ":"; return e.memoizedState = t }, unstable_isNewReconciler: !1 }, Gk = { readContext: pa, useCallback: rS, useContext: pa, useEffect: Vv, useImperativeHandle: tS, useInsertionEffect: Xw, useLayoutEffect: Zw, useMemo: nS, useReducer: u0, useRef: Jw, useState: function () { return u0(_p) }, useDebugValue: Wv, useDeferredValue: function (e) { var t = ha(); return iS(t, Si.memoizedState, e) }, useTransition: function () { var e = u0(_p)[0], t = ha().memoizedState; return [e, t] }, useMutableSource: Ww, useSyncExternalStore: Hw, useId: sS, unstable_isNewReconciler: !1 }, Kk = { readContext: pa, useCallback: rS, useContext: pa, useEffect: Vv, useImperativeHandle: tS, useInsertionEffect: Xw, useLayoutEffect: Zw, useMemo: nS, useReducer: p0, useRef: Jw, useState: function () { return p0(_p) }, useDebugValue: Wv, useDeferredValue: function (e) { var t = ha(); return Si === null ? t.memoizedState = e : iS(t, Si.memoizedState, e) }, useTransition: function () { var e = p0(_p)[0], t = ha().memoizedState; return [e, t] }, useMutableSource: Ww, useSyncExternalStore: Hw, useId: sS, unstable_isNewReconciler: !1 }; function ja(e, t) { if (e && e.defaultProps) { t = Zn({}, t), e = e.defaultProps; for (var r in e) t[r] === void 0 && (t[r] = e[r]); return t } return t } function yg(e, t, r, n) { t = e.memoizedState, r = r(n, t), r = r == null ? t : Zn({}, t, r), e.memoizedState = r, e.lanes === 0 && (e.updateQueue.baseState = r) } var tm = { isMounted: function (e) { return (e = e._reactInternals) ? Tc(e) === e : !1 }, enqueueSetState: function (e, t, r) { e = e._reactInternals; var n = ps(), s = vl(e), o = ko(n, s); o.payload = t, r != null && (o.callback = r), t = ml(e, o, s), t !== null && (Na(t, e, s, n), Vh(t, e, s)) }, enqueueReplaceState: function (e, t, r) { e = e._reactInternals; var n = ps(), s = vl(e), o = ko(n, s); o.tag = 1, o.payload = t, r != null && (o.callback = r), t = ml(e, o, s), t !== null && (Na(t, e, s, n), Vh(t, e, s)) }, enqueueForceUpdate: function (e, t) { e = e._reactInternals; var r = ps(), n = vl(e), s = ko(r, n); s.tag = 2, t != null && (s.callback = t), t = ml(e, s, n), t !== null && (Na(t, e, n, r), Vh(t, e, n)) } }; function a1(e, t, r, n, s, o, a) { return e = e.stateNode, typeof e.shouldComponentUpdate == "function" ? e.shouldComponentUpdate(n, o, a) : t.prototype && t.prototype.isPureReactComponent ? !fp(r, n) || !fp(s, o) : !0 } function cS(e, t, r) { var n = !1, s = xl, o = t.contextType; return typeof o == "object" && o !== null ? o = pa(o) : (s = Ts(t) ? bc : ts.current, n = t.contextTypes, o = (n = n != null) ? Ad(e, s) : xl), t = new t(r, o), e.memoizedState = t.state !== null && t.state !== void 0 ? t.state : null, t.updater = tm, e.stateNode = t, t._reactInternals = e, n && (e = e.stateNode, e.__reactInternalMemoizedUnmaskedChildContext = s, e.__reactInternalMemoizedMaskedChildContext = o), t } function o1(e, t, r, n) { e = t.state, typeof t.componentWillReceiveProps == "function" && t.componentWillReceiveProps(r, n), typeof t.UNSAFE_componentWillReceiveProps == "function" && t.UNSAFE_componentWillReceiveProps(r, n), t.state !== e && tm.enqueueReplaceState(t, t.state, null) } function bg(e, t, r, n) { var s = e.stateNode; s.props = r, s.state = e.memoizedState, s.refs = {}, Lv(e); var o = t.contextType; typeof o == "object" && o !== null ? s.context = pa(o) : (o = Ts(t) ? bc : ts.current, s.context = Ad(e, o)), s.state = e.memoizedState, o = t.getDerivedStateFromProps, typeof o == "function" && (yg(e, t, o, r), s.state = e.memoizedState), typeof t.getDerivedStateFromProps == "function" || typeof s.getSnapshotBeforeUpdate == "function" || typeof s.UNSAFE_componentWillMount != "function" && typeof s.componentWillMount != "function" || (t = s.state, typeof s.componentWillMount == "function" && s.componentWillMount(), typeof s.UNSAFE_componentWillMount == "function" && s.UNSAFE_componentWillMount(), t !== s.state && tm.enqueueReplaceState(s, s.state, null), Ef(e, r, s, n), s.state = e.memoizedState), typeof s.componentDidMount == "function" && (e.flags |= 4194308) } function jd(e, t) {
    try { var r = "", n = t; do r += wR(n), n = n.return; while (n); var s = r } catch (o) {
        s = `
Error generating stack: `+ o.message + `
`+ o.stack
    } return { value: e, source: t, stack: s, digest: null }
} function h0(e, t, r) { return { value: e, source: null, stack: r ?? null, digest: t ?? null } } function xg(e, t) { try { console.error(t.value) } catch (r) { setTimeout(function () { throw r }) } } var Yk = typeof WeakMap == "function" ? WeakMap : Map; function dS(e, t, r) { r = ko(-1, r), r.tag = 3, r.payload = { element: null }; var n = t.value; return r.callback = function () { Af || (Af = !0, Pg = n), xg(e, t) }, r } function uS(e, t, r) { r = ko(-1, r), r.tag = 3; var n = e.type.getDerivedStateFromError; if (typeof n == "function") { var s = t.value; r.payload = function () { return n(s) }, r.callback = function () { xg(e, t) } } var o = e.stateNode; return o !== null && typeof o.componentDidCatch == "function" && (r.callback = function () { xg(e, t), typeof n != "function" && (gl === null ? gl = new Set([this]) : gl.add(this)); var a = t.stack; this.componentDidCatch(t.value, { componentStack: a !== null ? a : "" }) }), r } function l1(e, t, r) { var n = e.pingCache; if (n === null) { n = e.pingCache = new Yk; var s = new Set; n.set(t, s) } else s = n.get(t), s === void 0 && (s = new Set, n.set(t, s)); s.has(r) || (s.add(r), e = cT.bind(null, e, t, r), t.then(e, e)) } function c1(e) { do { var t; if ((t = e.tag === 13) && (t = e.memoizedState, t = t !== null ? t.dehydrated !== null : !0), t) return e; e = e.return } while (e !== null); return null } function d1(e, t, r, n, s) { return e.mode & 1 ? (e.flags |= 65536, e.lanes = s, e) : (e === t ? e.flags |= 65536 : (e.flags |= 128, r.flags |= 131072, r.flags &= -52805, r.tag === 1 && (r.alternate === null ? r.tag = 17 : (t = ko(-1, 1), t.tag = 2, ml(r, t, 1))), r.lanes |= 1), e) } var Qk = Lo.ReactCurrentOwner, Rs = !1; function ls(e, t, r, n) { t.child = e === null ? zw(t, null, r, n) : Dd(t, e.child, r, n) } function u1(e, t, r, n, s) { r = r.render; var o = t.ref; return wd(t, s), n = $v(e, t, r, n, o, s), r = Uv(), e !== null && !Rs ? (t.updateQueue = e.updateQueue, t.flags &= -2053, e.lanes &= ~s, Io(e, t, s)) : ($n && r && Av(t), t.flags |= 1, ls(e, t, n, s), t.child) } function p1(e, t, r, n, s) { if (e === null) { var o = r.type; return typeof o == "function" && !Xv(o) && o.defaultProps === void 0 && r.compare === null && r.defaultProps === void 0 ? (t.tag = 15, t.type = o, pS(e, t, o, n, s)) : (e = Yh(r.type, null, n, t, t.mode, s), e.ref = t.ref, e.return = t, t.child = e) } if (o = e.child, !(e.lanes & s)) { var a = o.memoizedProps; if (r = r.compare, r = r !== null ? r : fp, r(a, n) && e.ref === t.ref) return Io(e, t, s) } return t.flags |= 1, e = yl(o, n), e.ref = t.ref, e.return = t, t.child = e } function pS(e, t, r, n, s) { if (e !== null) { var o = e.memoizedProps; if (fp(o, n) && e.ref === t.ref) if (Rs = !1, t.pendingProps = n = o, (e.lanes & s) !== 0) e.flags & 131072 && (Rs = !0); else return t.lanes = e.lanes, Io(e, t, s) } return _g(e, t, r, n, s) } function hS(e, t, r) { var n = t.pendingProps, s = n.children, o = e !== null ? e.memoizedState : null; if (n.mode === "hidden") if (!(t.mode & 1)) t.memoizedState = { baseLanes: 0, cachePool: null, transitions: null }, On(hd, Fs), Fs |= r; else { if (!(r & 1073741824)) return e = o !== null ? o.baseLanes | r : r, t.lanes = t.childLanes = 1073741824, t.memoizedState = { baseLanes: e, cachePool: null, transitions: null }, t.updateQueue = null, On(hd, Fs), Fs |= e, null; t.memoizedState = { baseLanes: 0, cachePool: null, transitions: null }, n = o !== null ? o.baseLanes : r, On(hd, Fs), Fs |= n } else o !== null ? (n = o.baseLanes | r, t.memoizedState = null) : n = r, On(hd, Fs), Fs |= n; return ls(e, t, s, r), t.child } function fS(e, t) { var r = t.ref; (e === null && r !== null || e !== null && e.ref !== r) && (t.flags |= 512, t.flags |= 2097152) } function _g(e, t, r, n, s) { var o = Ts(r) ? bc : ts.current; return o = Ad(t, o), wd(t, s), r = $v(e, t, r, n, o, s), n = Uv(), e !== null && !Rs ? (t.updateQueue = e.updateQueue, t.flags &= -2053, e.lanes &= ~s, Io(e, t, s)) : ($n && n && Av(t), t.flags |= 1, ls(e, t, r, s), t.child) } function h1(e, t, r, n, s) { if (Ts(r)) { var o = !0; bf(t) } else o = !1; if (wd(t, s), t.stateNode === null) qh(e, t), cS(t, r, n), bg(t, r, n, s), n = !0; else if (e === null) { var a = t.stateNode, c = t.memoizedProps; a.props = c; var l = a.context, p = r.contextType; typeof p == "object" && p !== null ? p = pa(p) : (p = Ts(r) ? bc : ts.current, p = Ad(t, p)); var d = r.getDerivedStateFromProps, f = typeof d == "function" || typeof a.getSnapshotBeforeUpdate == "function"; f || typeof a.UNSAFE_componentWillReceiveProps != "function" && typeof a.componentWillReceiveProps != "function" || (c !== n || l !== p) && o1(t, a, n, p), sl = !1; var h = t.memoizedState; a.state = h, Ef(t, n, a, s), l = t.memoizedState, c !== n || h !== l || ks.current || sl ? (typeof d == "function" && (yg(t, r, d, n), l = t.memoizedState), (c = sl || a1(t, r, c, n, h, l, p)) ? (f || typeof a.UNSAFE_componentWillMount != "function" && typeof a.componentWillMount != "function" || (typeof a.componentWillMount == "function" && a.componentWillMount(), typeof a.UNSAFE_componentWillMount == "function" && a.UNSAFE_componentWillMount()), typeof a.componentDidMount == "function" && (t.flags |= 4194308)) : (typeof a.componentDidMount == "function" && (t.flags |= 4194308), t.memoizedProps = n, t.memoizedState = l), a.props = n, a.state = l, a.context = p, n = c) : (typeof a.componentDidMount == "function" && (t.flags |= 4194308), n = !1) } else { a = t.stateNode, Uw(e, t), c = t.memoizedProps, p = t.type === t.elementType ? c : ja(t.type, c), a.props = p, f = t.pendingProps, h = a.context, l = r.contextType, typeof l == "object" && l !== null ? l = pa(l) : (l = Ts(r) ? bc : ts.current, l = Ad(t, l)); var P = r.getDerivedStateFromProps; (d = typeof P == "function" || typeof a.getSnapshotBeforeUpdate == "function") || typeof a.UNSAFE_componentWillReceiveProps != "function" && typeof a.componentWillReceiveProps != "function" || (c !== f || h !== l) && o1(t, a, n, l), sl = !1, h = t.memoizedState, a.state = h, Ef(t, n, a, s); var b = t.memoizedState; c !== f || h !== b || ks.current || sl ? (typeof P == "function" && (yg(t, r, P, n), b = t.memoizedState), (p = sl || a1(t, r, p, n, h, b, l) || !1) ? (d || typeof a.UNSAFE_componentWillUpdate != "function" && typeof a.componentWillUpdate != "function" || (typeof a.componentWillUpdate == "function" && a.componentWillUpdate(n, b, l), typeof a.UNSAFE_componentWillUpdate == "function" && a.UNSAFE_componentWillUpdate(n, b, l)), typeof a.componentDidUpdate == "function" && (t.flags |= 4), typeof a.getSnapshotBeforeUpdate == "function" && (t.flags |= 1024)) : (typeof a.componentDidUpdate != "function" || c === e.memoizedProps && h === e.memoizedState || (t.flags |= 4), typeof a.getSnapshotBeforeUpdate != "function" || c === e.memoizedProps && h === e.memoizedState || (t.flags |= 1024), t.memoizedProps = n, t.memoizedState = b), a.props = n, a.state = b, a.context = l, n = p) : (typeof a.componentDidUpdate != "function" || c === e.memoizedProps && h === e.memoizedState || (t.flags |= 4), typeof a.getSnapshotBeforeUpdate != "function" || c === e.memoizedProps && h === e.memoizedState || (t.flags |= 1024), n = !1) } return wg(e, t, r, n, o, s) } function wg(e, t, r, n, s, o) { fS(e, t); var a = (t.flags & 128) !== 0; if (!n && !a) return s && Xb(t, r, !1), Io(e, t, o); n = t.stateNode, Qk.current = t; var c = a && typeof r.getDerivedStateFromError != "function" ? null : n.render(); return t.flags |= 1, e !== null && a ? (t.child = Dd(t, e.child, null, o), t.child = Dd(t, null, c, o)) : ls(e, t, c, o), t.memoizedState = n.state, s && Xb(t, r, !0), t.child } function mS(e) { var t = e.stateNode; t.pendingContext ? Jb(e, t.pendingContext, t.pendingContext !== t.context) : t.context && Jb(e, t.context, !1), Nv(e, t.containerInfo) } function f1(e, t, r, n, s) { return Pd(), Dv(s), t.flags |= 256, ls(e, t, r, n), t.child } var Sg = { dehydrated: null, treeContext: null, retryLane: 0 }; function Eg(e) { return { baseLanes: e, cachePool: null, transitions: null } } function gS(e, t, r) { var n = t.pendingProps, s = Yn.current, o = !1, a = (t.flags & 128) !== 0, c; if ((c = a) || (c = e !== null && e.memoizedState === null ? !1 : (s & 2) !== 0), c ? (o = !0, t.flags &= -129) : (e === null || e.memoizedState !== null) && (s |= 1), On(Yn, s & 1), e === null) return gg(t), e = t.memoizedState, e !== null && (e = e.dehydrated, e !== null) ? (t.mode & 1 ? e.data === "$!" ? t.lanes = 8 : t.lanes = 1073741824 : t.lanes = 1, null) : (a = n.children, e = n.fallback, o ? (n = t.mode, o = t.child, a = { mode: "hidden", children: a }, !(n & 1) && o !== null ? (o.childLanes = 0, o.pendingProps = a) : o = im(a, n, 0, null), e = vc(e, n, r, null), o.return = t, e.return = t, o.sibling = e, t.child = o, t.child.memoizedState = Eg(r), t.memoizedState = Sg, e) : Hv(t, a)); if (s = e.memoizedState, s !== null && (c = s.dehydrated, c !== null)) return Jk(e, t, a, n, c, s, r); if (o) { o = n.fallback, a = t.mode, s = e.child, c = s.sibling; var l = { mode: "hidden", children: n.children }; return !(a & 1) && t.child !== s ? (n = t.child, n.childLanes = 0, n.pendingProps = l, t.deletions = null) : (n = yl(s, l), n.subtreeFlags = s.subtreeFlags & 14680064), c !== null ? o = yl(c, o) : (o = vc(o, a, r, null), o.flags |= 2), o.return = t, n.return = t, n.sibling = o, t.child = n, n = o, o = t.child, a = e.child.memoizedState, a = a === null ? Eg(r) : { baseLanes: a.baseLanes | r, cachePool: null, transitions: a.transitions }, o.memoizedState = a, o.childLanes = e.childLanes & ~r, t.memoizedState = Sg, n } return o = e.child, e = o.sibling, n = yl(o, { mode: "visible", children: n.children }), !(t.mode & 1) && (n.lanes = r), n.return = t, n.sibling = null, e !== null && (r = t.deletions, r === null ? (t.deletions = [e], t.flags |= 16) : r.push(e)), t.child = n, t.memoizedState = null, n } function Hv(e, t) { return t = im({ mode: "visible", children: t }, e.mode, 0, null), t.return = e, e.child = t } function Rh(e, t, r, n) { return n !== null && Dv(n), Dd(t, e.child, null, r), e = Hv(t, t.pendingProps.children), e.flags |= 2, t.memoizedState = null, e } function Jk(e, t, r, n, s, o, a) { if (r) return t.flags & 256 ? (t.flags &= -257, n = h0(Error(at(422))), Rh(e, t, a, n)) : t.memoizedState !== null ? (t.child = e.child, t.flags |= 128, null) : (o = n.fallback, s = t.mode, n = im({ mode: "visible", children: n.children }, s, 0, null), o = vc(o, s, a, null), o.flags |= 2, n.return = t, o.return = t, n.sibling = o, t.child = n, t.mode & 1 && Dd(t, e.child, null, a), t.child.memoizedState = Eg(a), t.memoizedState = Sg, o); if (!(t.mode & 1)) return Rh(e, t, a, null); if (s.data === "$!") { if (n = s.nextSibling && s.nextSibling.dataset, n) var c = n.dgst; return n = c, o = Error(at(419)), n = h0(o, n, void 0), Rh(e, t, a, n) } if (c = (a & e.childLanes) !== 0, Rs || c) { if (n = Ai, n !== null) { switch (a & -a) { case 4: s = 2; break; case 16: s = 8; break; case 64: case 128: case 256: case 512: case 1024: case 2048: case 4096: case 8192: case 16384: case 32768: case 65536: case 131072: case 262144: case 524288: case 1048576: case 2097152: case 4194304: case 8388608: case 16777216: case 33554432: case 67108864: s = 32; break; case 536870912: s = 268435456; break; default: s = 0 }s = s & (n.suspendedLanes | a) ? 0 : s, s !== 0 && s !== o.retryLane && (o.retryLane = s, Do(e, s), Na(n, e, s, -1)) } return Jv(), n = h0(Error(at(421))), Rh(e, t, a, n) } return s.data === "$?" ? (t.flags |= 128, t.child = e.child, t = dT.bind(null, e), s._reactRetry = t, null) : (e = o.treeContext, zs = fl(s.nextSibling), $s = t, $n = !0, Ma = null, e !== null && (sa[aa++] = Co, sa[aa++] = Ro, sa[aa++] = xc, Co = e.id, Ro = e.overflow, xc = t), t = Hv(t, n.children), t.flags |= 4096, t) } function m1(e, t, r) { e.lanes |= t; var n = e.alternate; n !== null && (n.lanes |= t), vg(e.return, t, r) } function f0(e, t, r, n, s) { var o = e.memoizedState; o === null ? e.memoizedState = { isBackwards: t, rendering: null, renderingStartTime: 0, last: n, tail: r, tailMode: s } : (o.isBackwards = t, o.rendering = null, o.renderingStartTime = 0, o.last = n, o.tail = r, o.tailMode = s) } function vS(e, t, r) { var n = t.pendingProps, s = n.revealOrder, o = n.tail; if (ls(e, t, n.children, r), n = Yn.current, n & 2) n = n & 1 | 2, t.flags |= 128; else { if (e !== null && e.flags & 128) e: for (e = t.child; e !== null;) { if (e.tag === 13) e.memoizedState !== null && m1(e, r, t); else if (e.tag === 19) m1(e, r, t); else if (e.child !== null) { e.child.return = e, e = e.child; continue } if (e === t) break e; for (; e.sibling === null;) { if (e.return === null || e.return === t) break e; e = e.return } e.sibling.return = e.return, e = e.sibling } n &= 1 } if (On(Yn, n), !(t.mode & 1)) t.memoizedState = null; else switch (s) { case "forwards": for (r = t.child, s = null; r !== null;)e = r.alternate, e !== null && Cf(e) === null && (s = r), r = r.sibling; r = s, r === null ? (s = t.child, t.child = null) : (s = r.sibling, r.sibling = null), f0(t, !1, s, r, o); break; case "backwards": for (r = null, s = t.child, t.child = null; s !== null;) { if (e = s.alternate, e !== null && Cf(e) === null) { t.child = s; break } e = s.sibling, s.sibling = r, r = s, s = e } f0(t, !0, r, null, o); break; case "together": f0(t, !1, null, null, void 0); break; default: t.memoizedState = null }return t.child } function qh(e, t) { !(t.mode & 1) && e !== null && (e.alternate = null, t.alternate = null, t.flags |= 2) } function Io(e, t, r) { if (e !== null && (t.dependencies = e.dependencies), wc |= t.lanes, !(r & t.childLanes)) return null; if (e !== null && t.child !== e.child) throw Error(at(153)); if (t.child !== null) { for (e = t.child, r = yl(e, e.pendingProps), t.child = r, r.return = t; e.sibling !== null;)e = e.sibling, r = r.sibling = yl(e, e.pendingProps), r.return = t; r.sibling = null } return t.child } function Xk(e, t, r) { switch (t.tag) { case 3: mS(t), Pd(); break; case 5: Vw(t); break; case 1: Ts(t.type) && bf(t); break; case 4: Nv(t, t.stateNode.containerInfo); break; case 10: var n = t.type._context, s = t.memoizedProps.value; On(wf, n._currentValue), n._currentValue = s; break; case 13: if (n = t.memoizedState, n !== null) return n.dehydrated !== null ? (On(Yn, Yn.current & 1), t.flags |= 128, null) : r & t.child.childLanes ? gS(e, t, r) : (On(Yn, Yn.current & 1), e = Io(e, t, r), e !== null ? e.sibling : null); On(Yn, Yn.current & 1); break; case 19: if (n = (r & t.childLanes) !== 0, e.flags & 128) { if (n) return vS(e, t, r); t.flags |= 128 } if (s = t.memoizedState, s !== null && (s.rendering = null, s.tail = null, s.lastEffect = null), On(Yn, Yn.current), n) break; return null; case 22: case 23: return t.lanes = 0, hS(e, t, r) }return Io(e, t, r) } var yS, Cg, bS, xS; yS = function (e, t) { for (var r = t.child; r !== null;) { if (r.tag === 5 || r.tag === 6) e.appendChild(r.stateNode); else if (r.tag !== 4 && r.child !== null) { r.child.return = r, r = r.child; continue } if (r === t) break; for (; r.sibling === null;) { if (r.return === null || r.return === t) return; r = r.return } r.sibling.return = r.return, r = r.sibling } }; Cg = function () { }; bS = function (e, t, r, n) { var s = e.memoizedProps; if (s !== n) { e = t.stateNode, pc(io.current); var o = null; switch (r) { case "input": s = G0(e, s), n = G0(e, n), o = []; break; case "select": s = Zn({}, s, { value: void 0 }), n = Zn({}, n, { value: void 0 }), o = []; break; case "textarea": s = Q0(e, s), n = Q0(e, n), o = []; break; default: typeof s.onClick != "function" && typeof n.onClick == "function" && (e.onclick = vf) }X0(r, n); var a; r = null; for (p in s) if (!n.hasOwnProperty(p) && s.hasOwnProperty(p) && s[p] != null) if (p === "style") { var c = s[p]; for (a in c) c.hasOwnProperty(a) && (r || (r = {}), r[a] = "") } else p !== "dangerouslySetInnerHTML" && p !== "children" && p !== "suppressContentEditableWarning" && p !== "suppressHydrationWarning" && p !== "autoFocus" && (op.hasOwnProperty(p) ? o || (o = []) : (o = o || []).push(p, null)); for (p in n) { var l = n[p]; if (c = s != null ? s[p] : void 0, n.hasOwnProperty(p) && l !== c && (l != null || c != null)) if (p === "style") if (c) { for (a in c) !c.hasOwnProperty(a) || l && l.hasOwnProperty(a) || (r || (r = {}), r[a] = ""); for (a in l) l.hasOwnProperty(a) && c[a] !== l[a] && (r || (r = {}), r[a] = l[a]) } else r || (o || (o = []), o.push(p, r)), r = l; else p === "dangerouslySetInnerHTML" ? (l = l ? l.__html : void 0, c = c ? c.__html : void 0, l != null && c !== l && (o = o || []).push(p, l)) : p === "children" ? typeof l != "string" && typeof l != "number" || (o = o || []).push(p, "" + l) : p !== "suppressContentEditableWarning" && p !== "suppressHydrationWarning" && (op.hasOwnProperty(p) ? (l != null && p === "onScroll" && Nn("scroll", e), o || c === l || (o = [])) : (o = o || []).push(p, l)) } r && (o = o || []).push("style", r); var p = o; (t.updateQueue = p) && (t.flags |= 4) } }; xS = function (e, t, r, n) { r !== n && (t.flags |= 4) }; function Mu(e, t) { if (!$n) switch (e.tailMode) { case "hidden": t = e.tail; for (var r = null; t !== null;)t.alternate !== null && (r = t), t = t.sibling; r === null ? e.tail = null : r.sibling = null; break; case "collapsed": r = e.tail; for (var n = null; r !== null;)r.alternate !== null && (n = r), r = r.sibling; n === null ? t || e.tail === null ? e.tail = null : e.tail.sibling = null : n.sibling = null } } function Ji(e) { var t = e.alternate !== null && e.alternate.child === e.child, r = 0, n = 0; if (t) for (var s = e.child; s !== null;)r |= s.lanes | s.childLanes, n |= s.subtreeFlags & 14680064, n |= s.flags & 14680064, s.return = e, s = s.sibling; else for (s = e.child; s !== null;)r |= s.lanes | s.childLanes, n |= s.subtreeFlags, n |= s.flags, s.return = e, s = s.sibling; return e.subtreeFlags |= n, e.childLanes = r, t } function Zk(e, t, r) { var n = t.pendingProps; switch (Pv(t), t.tag) { case 2: case 16: case 15: case 0: case 11: case 7: case 8: case 12: case 9: case 14: return Ji(t), null; case 1: return Ts(t.type) && yf(), Ji(t), null; case 3: return n = t.stateNode, Id(), Bn(ks), Bn(ts), Fv(), n.pendingContext && (n.context = n.pendingContext, n.pendingContext = null), (e === null || e.child === null) && (Eh(t) ? t.flags |= 4 : e === null || e.memoizedState.isDehydrated && !(t.flags & 256) || (t.flags |= 1024, Ma !== null && (jg(Ma), Ma = null))), Cg(e, t), Ji(t), null; case 5: Bv(t); var s = pc(bp.current); if (r = t.type, e !== null && t.stateNode != null) bS(e, t, r, n, s), e.ref !== t.ref && (t.flags |= 512, t.flags |= 2097152); else { if (!n) { if (t.stateNode === null) throw Error(at(166)); return Ji(t), null } if (e = pc(io.current), Eh(t)) { n = t.stateNode, r = t.type; var o = t.memoizedProps; switch (n[ro] = t, n[vp] = o, e = (t.mode & 1) !== 0, r) { case "dialog": Nn("cancel", n), Nn("close", n); break; case "iframe": case "object": case "embed": Nn("load", n); break; case "video": case "audio": for (s = 0; s < Hu.length; s++)Nn(Hu[s], n); break; case "source": Nn("error", n); break; case "img": case "image": case "link": Nn("error", n), Nn("load", n); break; case "details": Nn("toggle", n); break; case "input": Eb(n, o), Nn("invalid", n); break; case "select": n._wrapperState = { wasMultiple: !!o.multiple }, Nn("invalid", n); break; case "textarea": Rb(n, o), Nn("invalid", n) }X0(r, o), s = null; for (var a in o) if (o.hasOwnProperty(a)) { var c = o[a]; a === "children" ? typeof c == "string" ? n.textContent !== c && (o.suppressHydrationWarning !== !0 && Sh(n.textContent, c, e), s = ["children", c]) : typeof c == "number" && n.textContent !== "" + c && (o.suppressHydrationWarning !== !0 && Sh(n.textContent, c, e), s = ["children", "" + c]) : op.hasOwnProperty(a) && c != null && a === "onScroll" && Nn("scroll", n) } switch (r) { case "input": mh(n), Cb(n, o, !0); break; case "textarea": mh(n), kb(n); break; case "select": case "option": break; default: typeof o.onClick == "function" && (n.onclick = vf) }n = s, t.updateQueue = n, n !== null && (t.flags |= 4) } else { a = s.nodeType === 9 ? s : s.ownerDocument, e === "http://www.w3.org/1999/xhtml" && (e = K_(r)), e === "http://www.w3.org/1999/xhtml" ? r === "script" ? (e = a.createElement("div"), e.innerHTML = "<script><\/script>", e = e.removeChild(e.firstChild)) : typeof n.is == "string" ? e = a.createElement(r, { is: n.is }) : (e = a.createElement(r), r === "select" && (a = e, n.multiple ? a.multiple = !0 : n.size && (a.size = n.size))) : e = a.createElementNS(e, r), e[ro] = t, e[vp] = n, yS(e, t, !1, !1), t.stateNode = e; e: { switch (a = Z0(r, n), r) { case "dialog": Nn("cancel", e), Nn("close", e), s = n; break; case "iframe": case "object": case "embed": Nn("load", e), s = n; break; case "video": case "audio": for (s = 0; s < Hu.length; s++)Nn(Hu[s], e); s = n; break; case "source": Nn("error", e), s = n; break; case "img": case "image": case "link": Nn("error", e), Nn("load", e), s = n; break; case "details": Nn("toggle", e), s = n; break; case "input": Eb(e, n), s = G0(e, n), Nn("invalid", e); break; case "option": s = n; break; case "select": e._wrapperState = { wasMultiple: !!n.multiple }, s = Zn({}, n, { value: void 0 }), Nn("invalid", e); break; case "textarea": Rb(e, n), s = Q0(e, n), Nn("invalid", e); break; default: s = n }X0(r, s), c = s; for (o in c) if (c.hasOwnProperty(o)) { var l = c[o]; o === "style" ? J_(e, l) : o === "dangerouslySetInnerHTML" ? (l = l ? l.__html : void 0, l != null && Y_(e, l)) : o === "children" ? typeof l == "string" ? (r !== "textarea" || l !== "") && lp(e, l) : typeof l == "number" && lp(e, "" + l) : o !== "suppressContentEditableWarning" && o !== "suppressHydrationWarning" && o !== "autoFocus" && (op.hasOwnProperty(o) ? l != null && o === "onScroll" && Nn("scroll", e) : l != null && mv(e, o, l, a)) } switch (r) { case "input": mh(e), Cb(e, n, !1); break; case "textarea": mh(e), kb(e); break; case "option": n.value != null && e.setAttribute("value", "" + bl(n.value)); break; case "select": e.multiple = !!n.multiple, o = n.value, o != null ? yd(e, !!n.multiple, o, !1) : n.defaultValue != null && yd(e, !!n.multiple, n.defaultValue, !0); break; default: typeof s.onClick == "function" && (e.onclick = vf) }switch (r) { case "button": case "input": case "select": case "textarea": n = !!n.autoFocus; break e; case "img": n = !0; break e; default: n = !1 } } n && (t.flags |= 4) } t.ref !== null && (t.flags |= 512, t.flags |= 2097152) } return Ji(t), null; case 6: if (e && t.stateNode != null) xS(e, t, e.memoizedProps, n); else { if (typeof n != "string" && t.stateNode === null) throw Error(at(166)); if (r = pc(bp.current), pc(io.current), Eh(t)) { if (n = t.stateNode, r = t.memoizedProps, n[ro] = t, (o = n.nodeValue !== r) && (e = $s, e !== null)) switch (e.tag) { case 3: Sh(n.nodeValue, r, (e.mode & 1) !== 0); break; case 5: e.memoizedProps.suppressHydrationWarning !== !0 && Sh(n.nodeValue, r, (e.mode & 1) !== 0) }o && (t.flags |= 4) } else n = (r.nodeType === 9 ? r : r.ownerDocument).createTextNode(n), n[ro] = t, t.stateNode = n } return Ji(t), null; case 13: if (Bn(Yn), n = t.memoizedState, e === null || e.memoizedState !== null && e.memoizedState.dehydrated !== null) { if ($n && zs !== null && t.mode & 1 && !(t.flags & 128)) Bw(), Pd(), t.flags |= 98560, o = !1; else if (o = Eh(t), n !== null && n.dehydrated !== null) { if (e === null) { if (!o) throw Error(at(318)); if (o = t.memoizedState, o = o !== null ? o.dehydrated : null, !o) throw Error(at(317)); o[ro] = t } else Pd(), !(t.flags & 128) && (t.memoizedState = null), t.flags |= 4; Ji(t), o = !1 } else Ma !== null && (jg(Ma), Ma = null), o = !0; if (!o) return t.flags & 65536 ? t : null } return t.flags & 128 ? (t.lanes = r, t) : (n = n !== null, n !== (e !== null && e.memoizedState !== null) && n && (t.child.flags |= 8192, t.mode & 1 && (e === null || Yn.current & 1 ? Ei === 0 && (Ei = 3) : Jv())), t.updateQueue !== null && (t.flags |= 4), Ji(t), null); case 4: return Id(), Cg(e, t), e === null && mp(t.stateNode.containerInfo), Ji(t), null; case 10: return Ov(t.type._context), Ji(t), null; case 17: return Ts(t.type) && yf(), Ji(t), null; case 19: if (Bn(Yn), o = t.memoizedState, o === null) return Ji(t), null; if (n = (t.flags & 128) !== 0, a = o.rendering, a === null) if (n) Mu(o, !1); else { if (Ei !== 0 || e !== null && e.flags & 128) for (e = t.child; e !== null;) { if (a = Cf(e), a !== null) { for (t.flags |= 128, Mu(o, !1), n = a.updateQueue, n !== null && (t.updateQueue = n, t.flags |= 4), t.subtreeFlags = 0, n = r, r = t.child; r !== null;)o = r, e = n, o.flags &= 14680066, a = o.alternate, a === null ? (o.childLanes = 0, o.lanes = e, o.child = null, o.subtreeFlags = 0, o.memoizedProps = null, o.memoizedState = null, o.updateQueue = null, o.dependencies = null, o.stateNode = null) : (o.childLanes = a.childLanes, o.lanes = a.lanes, o.child = a.child, o.subtreeFlags = 0, o.deletions = null, o.memoizedProps = a.memoizedProps, o.memoizedState = a.memoizedState, o.updateQueue = a.updateQueue, o.type = a.type, e = a.dependencies, o.dependencies = e === null ? null : { lanes: e.lanes, firstContext: e.firstContext }), r = r.sibling; return On(Yn, Yn.current & 1 | 2), t.child } e = e.sibling } o.tail !== null && pi() > Od && (t.flags |= 128, n = !0, Mu(o, !1), t.lanes = 4194304) } else { if (!n) if (e = Cf(a), e !== null) { if (t.flags |= 128, n = !0, r = e.updateQueue, r !== null && (t.updateQueue = r, t.flags |= 4), Mu(o, !0), o.tail === null && o.tailMode === "hidden" && !a.alternate && !$n) return Ji(t), null } else 2 * pi() - o.renderingStartTime > Od && r !== 1073741824 && (t.flags |= 128, n = !0, Mu(o, !1), t.lanes = 4194304); o.isBackwards ? (a.sibling = t.child, t.child = a) : (r = o.last, r !== null ? r.sibling = a : t.child = a, o.last = a) } return o.tail !== null ? (t = o.tail, o.rendering = t, o.tail = t.sibling, o.renderingStartTime = pi(), t.sibling = null, r = Yn.current, On(Yn, n ? r & 1 | 2 : r & 1), t) : (Ji(t), null); case 22: case 23: return Qv(), n = t.memoizedState !== null, e !== null && e.memoizedState !== null !== n && (t.flags |= 8192), n && t.mode & 1 ? Fs & 1073741824 && (Ji(t), t.subtreeFlags & 6 && (t.flags |= 8192)) : Ji(t), null; case 24: return null; case 25: return null }throw Error(at(156, t.tag)) } function eT(e, t) { switch (Pv(t), t.tag) { case 1: return Ts(t.type) && yf(), e = t.flags, e & 65536 ? (t.flags = e & -65537 | 128, t) : null; case 3: return Id(), Bn(ks), Bn(ts), Fv(), e = t.flags, e & 65536 && !(e & 128) ? (t.flags = e & -65537 | 128, t) : null; case 5: return Bv(t), null; case 13: if (Bn(Yn), e = t.memoizedState, e !== null && e.dehydrated !== null) { if (t.alternate === null) throw Error(at(340)); Pd() } return e = t.flags, e & 65536 ? (t.flags = e & -65537 | 128, t) : null; case 19: return Bn(Yn), null; case 4: return Id(), null; case 10: return Ov(t.type._context), null; case 22: case 23: return Qv(), null; case 24: return null; default: return null } } var kh = !1, Xi = !1, tT = typeof WeakSet == "function" ? WeakSet : Set, Ht = null; function pd(e, t) { var r = e.ref; if (r !== null) if (typeof r == "function") try { r(null) } catch (n) { oi(e, t, n) } else r.current = null } function Rg(e, t, r) { try { r() } catch (n) { oi(e, t, n) } } var g1 = !1; function rT(e, t) { if (cg = ff, e = Cw(), Tv(e)) { if ("selectionStart" in e) var r = { start: e.selectionStart, end: e.selectionEnd }; else e: { r = (r = e.ownerDocument) && r.defaultView || window; var n = r.getSelection && r.getSelection(); if (n && n.rangeCount !== 0) { r = n.anchorNode; var s = n.anchorOffset, o = n.focusNode; n = n.focusOffset; try { r.nodeType, o.nodeType } catch { r = null; break e } var a = 0, c = -1, l = -1, p = 0, d = 0, f = e, h = null; t: for (; ;) { for (var P; f !== r || s !== 0 && f.nodeType !== 3 || (c = a + s), f !== o || n !== 0 && f.nodeType !== 3 || (l = a + n), f.nodeType === 3 && (a += f.nodeValue.length), (P = f.firstChild) !== null;)h = f, f = P; for (; ;) { if (f === e) break t; if (h === r && ++p === s && (c = a), h === o && ++d === n && (l = a), (P = f.nextSibling) !== null) break; f = h, h = f.parentNode } f = P } r = c === -1 || l === -1 ? null : { start: c, end: l } } else r = null } r = r || { start: 0, end: 0 } } else r = null; for (dg = { focusedElem: e, selectionRange: r }, ff = !1, Ht = t; Ht !== null;)if (t = Ht, e = t.child, (t.subtreeFlags & 1028) !== 0 && e !== null) e.return = t, Ht = e; else for (; Ht !== null;) { t = Ht; try { var b = t.alternate; if (t.flags & 1024) switch (t.tag) { case 0: case 11: case 15: break; case 1: if (b !== null) { var u = b.memoizedProps, g = b.memoizedState, S = t.stateNode, R = S.getSnapshotBeforeUpdate(t.elementType === t.type ? u : ja(t.type, u), g); S.__reactInternalSnapshotBeforeUpdate = R } break; case 3: var y = t.stateNode.containerInfo; y.nodeType === 1 ? y.textContent = "" : y.nodeType === 9 && y.documentElement && y.removeChild(y.documentElement); break; case 5: case 6: case 4: case 17: break; default: throw Error(at(163)) } } catch (v) { oi(t, t.return, v) } if (e = t.sibling, e !== null) { e.return = t.return, Ht = e; break } Ht = t.return } return b = g1, g1 = !1, b } function ep(e, t, r) { var n = t.updateQueue; if (n = n !== null ? n.lastEffect : null, n !== null) { var s = n = n.next; do { if ((s.tag & e) === e) { var o = s.destroy; s.destroy = void 0, o !== void 0 && Rg(t, r, o) } s = s.next } while (s !== n) } } function rm(e, t) { if (t = t.updateQueue, t = t !== null ? t.lastEffect : null, t !== null) { var r = t = t.next; do { if ((r.tag & e) === e) { var n = r.create; r.destroy = n() } r = r.next } while (r !== t) } } function kg(e) { var t = e.ref; if (t !== null) { var r = e.stateNode; switch (e.tag) { case 5: e = r; break; default: e = r }typeof t == "function" ? t(e) : t.current = e } } function _S(e) { var t = e.alternate; t !== null && (e.alternate = null, _S(t)), e.child = null, e.deletions = null, e.sibling = null, e.tag === 5 && (t = e.stateNode, t !== null && (delete t[ro], delete t[vp], delete t[hg], delete t[Bk], delete t[Fk])), e.stateNode = null, e.return = null, e.dependencies = null, e.memoizedProps = null, e.memoizedState = null, e.pendingProps = null, e.stateNode = null, e.updateQueue = null } function wS(e) { return e.tag === 5 || e.tag === 3 || e.tag === 4 } function v1(e) { e: for (; ;) { for (; e.sibling === null;) { if (e.return === null || wS(e.return)) return null; e = e.return } for (e.sibling.return = e.return, e = e.sibling; e.tag !== 5 && e.tag !== 6 && e.tag !== 18;) { if (e.flags & 2 || e.child === null || e.tag === 4) continue e; e.child.return = e, e = e.child } if (!(e.flags & 2)) return e.stateNode } } function Tg(e, t, r) { var n = e.tag; if (n === 5 || n === 6) e = e.stateNode, t ? r.nodeType === 8 ? r.parentNode.insertBefore(e, t) : r.insertBefore(e, t) : (r.nodeType === 8 ? (t = r.parentNode, t.insertBefore(e, r)) : (t = r, t.appendChild(e)), r = r._reactRootContainer, r != null || t.onclick !== null || (t.onclick = vf)); else if (n !== 4 && (e = e.child, e !== null)) for (Tg(e, t, r), e = e.sibling; e !== null;)Tg(e, t, r), e = e.sibling } function Ag(e, t, r) { var n = e.tag; if (n === 5 || n === 6) e = e.stateNode, t ? r.insertBefore(e, t) : r.appendChild(e); else if (n !== 4 && (e = e.child, e !== null)) for (Ag(e, t, r), e = e.sibling; e !== null;)Ag(e, t, r), e = e.sibling } var Ni = null, Oa = !1; function rl(e, t, r) { for (r = r.child; r !== null;)SS(e, t, r), r = r.sibling } function SS(e, t, r) { if (no && typeof no.onCommitFiberUnmount == "function") try { no.onCommitFiberUnmount(Kf, r) } catch { } switch (r.tag) { case 5: Xi || pd(r, t); case 6: var n = Ni, s = Oa; Ni = null, rl(e, t, r), Ni = n, Oa = s, Ni !== null && (Oa ? (e = Ni, r = r.stateNode, e.nodeType === 8 ? e.parentNode.removeChild(r) : e.removeChild(r)) : Ni.removeChild(r.stateNode)); break; case 18: Ni !== null && (Oa ? (e = Ni, r = r.stateNode, e.nodeType === 8 ? o0(e.parentNode, r) : e.nodeType === 1 && o0(e, r), pp(e)) : o0(Ni, r.stateNode)); break; case 4: n = Ni, s = Oa, Ni = r.stateNode.containerInfo, Oa = !0, rl(e, t, r), Ni = n, Oa = s; break; case 0: case 11: case 14: case 15: if (!Xi && (n = r.updateQueue, n !== null && (n = n.lastEffect, n !== null))) { s = n = n.next; do { var o = s, a = o.destroy; o = o.tag, a !== void 0 && (o & 2 || o & 4) && Rg(r, t, a), s = s.next } while (s !== n) } rl(e, t, r); break; case 1: if (!Xi && (pd(r, t), n = r.stateNode, typeof n.componentWillUnmount == "function")) try { n.props = r.memoizedProps, n.state = r.memoizedState, n.componentWillUnmount() } catch (c) { oi(r, t, c) } rl(e, t, r); break; case 21: rl(e, t, r); break; case 22: r.mode & 1 ? (Xi = (n = Xi) || r.memoizedState !== null, rl(e, t, r), Xi = n) : rl(e, t, r); break; default: rl(e, t, r) } } function y1(e) { var t = e.updateQueue; if (t !== null) { e.updateQueue = null; var r = e.stateNode; r === null && (r = e.stateNode = new tT), t.forEach(function (n) { var s = uT.bind(null, e, n); r.has(n) || (r.add(n), n.then(s, s)) }) } } function Ta(e, t) { var r = t.deletions; if (r !== null) for (var n = 0; n < r.length; n++) { var s = r[n]; try { var o = e, a = t, c = a; e: for (; c !== null;) { switch (c.tag) { case 5: Ni = c.stateNode, Oa = !1; break e; case 3: Ni = c.stateNode.containerInfo, Oa = !0; break e; case 4: Ni = c.stateNode.containerInfo, Oa = !0; break e }c = c.return } if (Ni === null) throw Error(at(160)); SS(o, a, s), Ni = null, Oa = !1; var l = s.alternate; l !== null && (l.return = null), s.return = null } catch (p) { oi(s, t, p) } } if (t.subtreeFlags & 12854) for (t = t.child; t !== null;)ES(t, e), t = t.sibling } function ES(e, t) { var r = e.alternate, n = e.flags; switch (e.tag) { case 0: case 11: case 14: case 15: if (Ta(t, e), Xa(e), n & 4) { try { ep(3, e, e.return), rm(3, e) } catch (u) { oi(e, e.return, u) } try { ep(5, e, e.return) } catch (u) { oi(e, e.return, u) } } break; case 1: Ta(t, e), Xa(e), n & 512 && r !== null && pd(r, r.return); break; case 5: if (Ta(t, e), Xa(e), n & 512 && r !== null && pd(r, r.return), e.flags & 32) { var s = e.stateNode; try { lp(s, "") } catch (u) { oi(e, e.return, u) } } if (n & 4 && (s = e.stateNode, s != null)) { var o = e.memoizedProps, a = r !== null ? r.memoizedProps : o, c = e.type, l = e.updateQueue; if (e.updateQueue = null, l !== null) try { c === "input" && o.type === "radio" && o.name != null && q_(s, o), Z0(c, a); var p = Z0(c, o); for (a = 0; a < l.length; a += 2) { var d = l[a], f = l[a + 1]; d === "style" ? J_(s, f) : d === "dangerouslySetInnerHTML" ? Y_(s, f) : d === "children" ? lp(s, f) : mv(s, d, f, p) } switch (c) { case "input": K0(s, o); break; case "textarea": G_(s, o); break; case "select": var h = s._wrapperState.wasMultiple; s._wrapperState.wasMultiple = !!o.multiple; var P = o.value; P != null ? yd(s, !!o.multiple, P, !1) : h !== !!o.multiple && (o.defaultValue != null ? yd(s, !!o.multiple, o.defaultValue, !0) : yd(s, !!o.multiple, o.multiple ? [] : "", !1)) }s[vp] = o } catch (u) { oi(e, e.return, u) } } break; case 6: if (Ta(t, e), Xa(e), n & 4) { if (e.stateNode === null) throw Error(at(162)); s = e.stateNode, o = e.memoizedProps; try { s.nodeValue = o } catch (u) { oi(e, e.return, u) } } break; case 3: if (Ta(t, e), Xa(e), n & 4 && r !== null && r.memoizedState.isDehydrated) try { pp(t.containerInfo) } catch (u) { oi(e, e.return, u) } break; case 4: Ta(t, e), Xa(e); break; case 13: Ta(t, e), Xa(e), s = e.child, s.flags & 8192 && (o = s.memoizedState !== null, s.stateNode.isHidden = o, !o || s.alternate !== null && s.alternate.memoizedState !== null || (Kv = pi())), n & 4 && y1(e); break; case 22: if (d = r !== null && r.memoizedState !== null, e.mode & 1 ? (Xi = (p = Xi) || d, Ta(t, e), Xi = p) : Ta(t, e), Xa(e), n & 8192) { if (p = e.memoizedState !== null, (e.stateNode.isHidden = p) && !d && e.mode & 1) for (Ht = e, d = e.child; d !== null;) { for (f = Ht = d; Ht !== null;) { switch (h = Ht, P = h.child, h.tag) { case 0: case 11: case 14: case 15: ep(4, h, h.return); break; case 1: pd(h, h.return); var b = h.stateNode; if (typeof b.componentWillUnmount == "function") { n = h, r = h.return; try { t = n, b.props = t.memoizedProps, b.state = t.memoizedState, b.componentWillUnmount() } catch (u) { oi(n, r, u) } } break; case 5: pd(h, h.return); break; case 22: if (h.memoizedState !== null) { x1(f); continue } }P !== null ? (P.return = h, Ht = P) : x1(f) } d = d.sibling } e: for (d = null, f = e; ;) { if (f.tag === 5) { if (d === null) { d = f; try { s = f.stateNode, p ? (o = s.style, typeof o.setProperty == "function" ? o.setProperty("display", "none", "important") : o.display = "none") : (c = f.stateNode, l = f.memoizedProps.style, a = l != null && l.hasOwnProperty("display") ? l.display : null, c.style.display = Q_("display", a)) } catch (u) { oi(e, e.return, u) } } } else if (f.tag === 6) { if (d === null) try { f.stateNode.nodeValue = p ? "" : f.memoizedProps } catch (u) { oi(e, e.return, u) } } else if ((f.tag !== 22 && f.tag !== 23 || f.memoizedState === null || f === e) && f.child !== null) { f.child.return = f, f = f.child; continue } if (f === e) break e; for (; f.sibling === null;) { if (f.return === null || f.return === e) break e; d === f && (d = null), f = f.return } d === f && (d = null), f.sibling.return = f.return, f = f.sibling } } break; case 19: Ta(t, e), Xa(e), n & 4 && y1(e); break; case 21: break; default: Ta(t, e), Xa(e) } } function Xa(e) { var t = e.flags; if (t & 2) { try { e: { for (var r = e.return; r !== null;) { if (wS(r)) { var n = r; break e } r = r.return } throw Error(at(160)) } switch (n.tag) { case 5: var s = n.stateNode; n.flags & 32 && (lp(s, ""), n.flags &= -33); var o = v1(e); Ag(e, o, s); break; case 3: case 4: var a = n.stateNode.containerInfo, c = v1(e); Tg(e, c, a); break; default: throw Error(at(161)) } } catch (l) { oi(e, e.return, l) } e.flags &= -3 } t & 4096 && (e.flags &= -4097) } function nT(e, t, r) { Ht = e, CS(e) } function CS(e, t, r) { for (var n = (e.mode & 1) !== 0; Ht !== null;) { var s = Ht, o = s.child; if (s.tag === 22 && n) { var a = s.memoizedState !== null || kh; if (!a) { var c = s.alternate, l = c !== null && c.memoizedState !== null || Xi; c = kh; var p = Xi; if (kh = a, (Xi = l) && !p) for (Ht = s; Ht !== null;)a = Ht, l = a.child, a.tag === 22 && a.memoizedState !== null ? _1(s) : l !== null ? (l.return = a, Ht = l) : _1(s); for (; o !== null;)Ht = o, CS(o), o = o.sibling; Ht = s, kh = c, Xi = p } b1(e) } else s.subtreeFlags & 8772 && o !== null ? (o.return = s, Ht = o) : b1(e) } } function b1(e) { for (; Ht !== null;) { var t = Ht; if (t.flags & 8772) { var r = t.alternate; try { if (t.flags & 8772) switch (t.tag) { case 0: case 11: case 15: Xi || rm(5, t); break; case 1: var n = t.stateNode; if (t.flags & 4 && !Xi) if (r === null) n.componentDidMount(); else { var s = t.elementType === t.type ? r.memoizedProps : ja(t.type, r.memoizedProps); n.componentDidUpdate(s, r.memoizedState, n.__reactInternalSnapshotBeforeUpdate) } var o = t.updateQueue; o !== null && n1(t, o, n); break; case 3: var a = t.updateQueue; if (a !== null) { if (r = null, t.child !== null) switch (t.child.tag) { case 5: r = t.child.stateNode; break; case 1: r = t.child.stateNode }n1(t, a, r) } break; case 5: var c = t.stateNode; if (r === null && t.flags & 4) { r = c; var l = t.memoizedProps; switch (t.type) { case "button": case "input": case "select": case "textarea": l.autoFocus && r.focus(); break; case "img": l.src && (r.src = l.src) } } break; case 6: break; case 4: break; case 12: break; case 13: if (t.memoizedState === null) { var p = t.alternate; if (p !== null) { var d = p.memoizedState; if (d !== null) { var f = d.dehydrated; f !== null && pp(f) } } } break; case 19: case 17: case 21: case 22: case 23: case 25: break; default: throw Error(at(163)) }Xi || t.flags & 512 && kg(t) } catch (h) { oi(t, t.return, h) } } if (t === e) { Ht = null; break } if (r = t.sibling, r !== null) { r.return = t.return, Ht = r; break } Ht = t.return } } function x1(e) { for (; Ht !== null;) { var t = Ht; if (t === e) { Ht = null; break } var r = t.sibling; if (r !== null) { r.return = t.return, Ht = r; break } Ht = t.return } } function _1(e) { for (; Ht !== null;) { var t = Ht; try { switch (t.tag) { case 0: case 11: case 15: var r = t.return; try { rm(4, t) } catch (l) { oi(t, r, l) } break; case 1: var n = t.stateNode; if (typeof n.componentDidMount == "function") { var s = t.return; try { n.componentDidMount() } catch (l) { oi(t, s, l) } } var o = t.return; try { kg(t) } catch (l) { oi(t, o, l) } break; case 5: var a = t.return; try { kg(t) } catch (l) { oi(t, a, l) } } } catch (l) { oi(t, t.return, l) } if (t === e) { Ht = null; break } var c = t.sibling; if (c !== null) { c.return = t.return, Ht = c; break } Ht = t.return } } var iT = Math.ceil, Tf = Lo.ReactCurrentDispatcher, qv = Lo.ReactCurrentOwner, ca = Lo.ReactCurrentBatchConfig, an = 0, Ai = null, yi = null, Fi = 0, Fs = 0, hd = El(0), Ei = 0, Sp = null, wc = 0, nm = 0, Gv = 0, tp = null, Cs = null, Kv = 0, Od = 1 / 0, So = null, Af = !1, Pg = null, gl = null, Th = !1, cl = null, Pf = 0, rp = 0, Dg = null, Gh = -1, Kh = 0; function ps() { return an & 6 ? pi() : Gh !== -1 ? Gh : Gh = pi() } function vl(e) { return e.mode & 1 ? an & 2 && Fi !== 0 ? Fi & -Fi : $k.transition !== null ? (Kh === 0 && (Kh = cw()), Kh) : (e = _n, e !== 0 || (e = window.event, e = e === void 0 ? 16 : gw(e.type)), e) : 1 } function Na(e, t, r, n) { if (50 < rp) throw rp = 0, Dg = null, Error(at(185)); Dp(e, r, n), (!(an & 2) || e !== Ai) && (e === Ai && (!(an & 2) && (nm |= r), Ei === 4 && ol(e, Fi)), As(e, n), r === 1 && an === 0 && !(t.mode & 1) && (Od = pi() + 500, Zf && Cl())) } function As(e, t) { var r = e.callbackNode; $R(e, t); var n = hf(e, e === Ai ? Fi : 0); if (n === 0) r !== null && Pb(r), e.callbackNode = null, e.callbackPriority = 0; else if (t = n & -n, e.callbackPriority !== t) { if (r != null && Pb(r), t === 1) e.tag === 0 ? zk(w1.bind(null, e)) : Mw(w1.bind(null, e)), Lk(function () { !(an & 6) && Cl() }), r = null; else { switch (dw(n)) { case 1: r = xv; break; case 4: r = ow; break; case 16: r = pf; break; case 536870912: r = lw; break; default: r = pf }r = jS(r, RS.bind(null, e)) } e.callbackPriority = t, e.callbackNode = r } } function RS(e, t) { if (Gh = -1, Kh = 0, an & 6) throw Error(at(327)); var r = e.callbackNode; if (Sd() && e.callbackNode !== r) return null; var n = hf(e, e === Ai ? Fi : 0); if (n === 0) return null; if (n & 30 || n & e.expiredLanes || t) t = Df(e, n); else { t = n; var s = an; an |= 2; var o = TS(); (Ai !== e || Fi !== t) && (So = null, Od = pi() + 500, gc(e, t)); do try { oT(); break } catch (c) { kS(e, c) } while (1); jv(), Tf.current = o, an = s, yi !== null ? t = 0 : (Ai = null, Fi = 0, t = Ei) } if (t !== 0) { if (t === 2 && (s = ig(e), s !== 0 && (n = s, t = Ig(e, s))), t === 1) throw r = Sp, gc(e, 0), ol(e, n), As(e, pi()), r; if (t === 6) ol(e, n); else { if (s = e.current.alternate, !(n & 30) && !sT(s) && (t = Df(e, n), t === 2 && (o = ig(e), o !== 0 && (n = o, t = Ig(e, o))), t === 1)) throw r = Sp, gc(e, 0), ol(e, n), As(e, pi()), r; switch (e.finishedWork = s, e.finishedLanes = n, t) { case 0: case 1: throw Error(at(345)); case 2: oc(e, Cs, So); break; case 3: if (ol(e, n), (n & 130023424) === n && (t = Kv + 500 - pi(), 10 < t)) { if (hf(e, 0) !== 0) break; if (s = e.suspendedLanes, (s & n) !== n) { ps(), e.pingedLanes |= e.suspendedLanes & s; break } e.timeoutHandle = pg(oc.bind(null, e, Cs, So), t); break } oc(e, Cs, So); break; case 4: if (ol(e, n), (n & 4194240) === n) break; for (t = e.eventTimes, s = -1; 0 < n;) { var a = 31 - La(n); o = 1 << a, a = t[a], a > s && (s = a), n &= ~o } if (n = s, n = pi() - n, n = (120 > n ? 120 : 480 > n ? 480 : 1080 > n ? 1080 : 1920 > n ? 1920 : 3e3 > n ? 3e3 : 4320 > n ? 4320 : 1960 * iT(n / 1960)) - n, 10 < n) { e.timeoutHandle = pg(oc.bind(null, e, Cs, So), n); break } oc(e, Cs, So); break; case 5: oc(e, Cs, So); break; default: throw Error(at(329)) } } } return As(e, pi()), e.callbackNode === r ? RS.bind(null, e) : null } function Ig(e, t) { var r = tp; return e.current.memoizedState.isDehydrated && (gc(e, t).flags |= 256), e = Df(e, t), e !== 2 && (t = Cs, Cs = r, t !== null && jg(t)), e } function jg(e) { Cs === null ? Cs = e : Cs.push.apply(Cs, e) } function sT(e) { for (var t = e; ;) { if (t.flags & 16384) { var r = t.updateQueue; if (r !== null && (r = r.stores, r !== null)) for (var n = 0; n < r.length; n++) { var s = r[n], o = s.getSnapshot; s = s.value; try { if (!Fa(o(), s)) return !1 } catch { return !1 } } } if (r = t.child, t.subtreeFlags & 16384 && r !== null) r.return = t, t = r; else { if (t === e) break; for (; t.sibling === null;) { if (t.return === null || t.return === e) return !0; t = t.return } t.sibling.return = t.return, t = t.sibling } } return !0 } function ol(e, t) { for (t &= ~Gv, t &= ~nm, e.suspendedLanes |= t, e.pingedLanes &= ~t, e = e.expirationTimes; 0 < t;) { var r = 31 - La(t), n = 1 << r; e[r] = -1, t &= ~n } } function w1(e) { if (an & 6) throw Error(at(327)); Sd(); var t = hf(e, 0); if (!(t & 1)) return As(e, pi()), null; var r = Df(e, t); if (e.tag !== 0 && r === 2) { var n = ig(e); n !== 0 && (t = n, r = Ig(e, n)) } if (r === 1) throw r = Sp, gc(e, 0), ol(e, t), As(e, pi()), r; if (r === 6) throw Error(at(345)); return e.finishedWork = e.current.alternate, e.finishedLanes = t, oc(e, Cs, So), As(e, pi()), null } function Yv(e, t) { var r = an; an |= 1; try { return e(t) } finally { an = r, an === 0 && (Od = pi() + 500, Zf && Cl()) } } function Sc(e) { cl !== null && cl.tag === 0 && !(an & 6) && Sd(); var t = an; an |= 1; var r = ca.transition, n = _n; try { if (ca.transition = null, _n = 1, e) return e() } finally { _n = n, ca.transition = r, an = t, !(an & 6) && Cl() } } function Qv() { Fs = hd.current, Bn(hd) } function gc(e, t) { e.finishedWork = null, e.finishedLanes = 0; var r = e.timeoutHandle; if (r !== -1 && (e.timeoutHandle = -1, Mk(r)), yi !== null) for (r = yi.return; r !== null;) { var n = r; switch (Pv(n), n.tag) { case 1: n = n.type.childContextTypes, n != null && yf(); break; case 3: Id(), Bn(ks), Bn(ts), Fv(); break; case 5: Bv(n); break; case 4: Id(); break; case 13: Bn(Yn); break; case 19: Bn(Yn); break; case 10: Ov(n.type._context); break; case 22: case 23: Qv() }r = r.return } if (Ai = e, yi = e = yl(e.current, null), Fi = Fs = t, Ei = 0, Sp = null, Gv = nm = wc = 0, Cs = tp = null, uc !== null) { for (t = 0; t < uc.length; t++)if (r = uc[t], n = r.interleaved, n !== null) { r.interleaved = null; var s = n.next, o = r.pending; if (o !== null) { var a = o.next; o.next = s, n.next = a } r.pending = n } uc = null } return e } function kS(e, t) { do { var r = yi; try { if (jv(), Wh.current = kf, Rf) { for (var n = Xn.memoizedState; n !== null;) { var s = n.queue; s !== null && (s.pending = null), n = n.next } Rf = !1 } if (_c = 0, Ti = Si = Xn = null, Zu = !1, xp = 0, qv.current = null, r === null || r.return === null) { Ei = 1, Sp = t, yi = null; break } e: { var o = e, a = r.return, c = r, l = t; if (t = Fi, c.flags |= 32768, l !== null && typeof l == "object" && typeof l.then == "function") { var p = l, d = c, f = d.tag; if (!(d.mode & 1) && (f === 0 || f === 11 || f === 15)) { var h = d.alternate; h ? (d.updateQueue = h.updateQueue, d.memoizedState = h.memoizedState, d.lanes = h.lanes) : (d.updateQueue = null, d.memoizedState = null) } var P = c1(a); if (P !== null) { P.flags &= -257, d1(P, a, c, o, t), P.mode & 1 && l1(o, p, t), t = P, l = p; var b = t.updateQueue; if (b === null) { var u = new Set; u.add(l), t.updateQueue = u } else b.add(l); break e } else { if (!(t & 1)) { l1(o, p, t), Jv(); break e } l = Error(at(426)) } } else if ($n && c.mode & 1) { var g = c1(a); if (g !== null) { !(g.flags & 65536) && (g.flags |= 256), d1(g, a, c, o, t), Dv(jd(l, c)); break e } } o = l = jd(l, c), Ei !== 4 && (Ei = 2), tp === null ? tp = [o] : tp.push(o), o = a; do { switch (o.tag) { case 3: o.flags |= 65536, t &= -t, o.lanes |= t; var S = dS(o, l, t); r1(o, S); break e; case 1: c = l; var R = o.type, y = o.stateNode; if (!(o.flags & 128) && (typeof R.getDerivedStateFromError == "function" || y !== null && typeof y.componentDidCatch == "function" && (gl === null || !gl.has(y)))) { o.flags |= 65536, t &= -t, o.lanes |= t; var v = uS(o, c, t); r1(o, v); break e } }o = o.return } while (o !== null) } PS(r) } catch (D) { t = D, yi === r && r !== null && (yi = r = r.return); continue } break } while (1) } function TS() { var e = Tf.current; return Tf.current = kf, e === null ? kf : e } function Jv() { (Ei === 0 || Ei === 3 || Ei === 2) && (Ei = 4), Ai === null || !(wc & 268435455) && !(nm & 268435455) || ol(Ai, Fi) } function Df(e, t) { var r = an; an |= 2; var n = TS(); (Ai !== e || Fi !== t) && (So = null, gc(e, t)); do try { aT(); break } catch (s) { kS(e, s) } while (1); if (jv(), an = r, Tf.current = n, yi !== null) throw Error(at(261)); return Ai = null, Fi = 0, Ei } function aT() { for (; yi !== null;)AS(yi) } function oT() { for (; yi !== null && !IR();)AS(yi) } function AS(e) { var t = IS(e.alternate, e, Fs); e.memoizedProps = e.pendingProps, t === null ? PS(e) : yi = t, qv.current = null } function PS(e) { var t = e; do { var r = t.alternate; if (e = t.return, t.flags & 32768) { if (r = eT(r, t), r !== null) { r.flags &= 32767, yi = r; return } if (e !== null) e.flags |= 32768, e.subtreeFlags = 0, e.deletions = null; else { Ei = 6, yi = null; return } } else if (r = Zk(r, t, Fs), r !== null) { yi = r; return } if (t = t.sibling, t !== null) { yi = t; return } yi = t = e } while (t !== null); Ei === 0 && (Ei = 5) } function oc(e, t, r) { var n = _n, s = ca.transition; try { ca.transition = null, _n = 1, lT(e, t, r, n) } finally { ca.transition = s, _n = n } return null } function lT(e, t, r, n) { do Sd(); while (cl !== null); if (an & 6) throw Error(at(327)); r = e.finishedWork; var s = e.finishedLanes; if (r === null) return null; if (e.finishedWork = null, e.finishedLanes = 0, r === e.current) throw Error(at(177)); e.callbackNode = null, e.callbackPriority = 0; var o = r.lanes | r.childLanes; if (UR(e, o), e === Ai && (yi = Ai = null, Fi = 0), !(r.subtreeFlags & 2064) && !(r.flags & 2064) || Th || (Th = !0, jS(pf, function () { return Sd(), null })), o = (r.flags & 15990) !== 0, r.subtreeFlags & 15990 || o) { o = ca.transition, ca.transition = null; var a = _n; _n = 1; var c = an; an |= 4, qv.current = null, rT(e, r), ES(r, e), Tk(dg), ff = !!cg, dg = cg = null, e.current = r, nT(r), jR(), an = c, _n = a, ca.transition = o } else e.current = r; if (Th && (Th = !1, cl = e, Pf = s), o = e.pendingLanes, o === 0 && (gl = null), LR(r.stateNode), As(e, pi()), t !== null) for (n = e.onRecoverableError, r = 0; r < t.length; r++)s = t[r], n(s.value, { componentStack: s.stack, digest: s.digest }); if (Af) throw Af = !1, e = Pg, Pg = null, e; return Pf & 1 && e.tag !== 0 && Sd(), o = e.pendingLanes, o & 1 ? e === Dg ? rp++ : (rp = 0, Dg = e) : rp = 0, Cl(), null } function Sd() { if (cl !== null) { var e = dw(Pf), t = ca.transition, r = _n; try { if (ca.transition = null, _n = 16 > e ? 16 : e, cl === null) var n = !1; else { if (e = cl, cl = null, Pf = 0, an & 6) throw Error(at(331)); var s = an; for (an |= 4, Ht = e.current; Ht !== null;) { var o = Ht, a = o.child; if (Ht.flags & 16) { var c = o.deletions; if (c !== null) { for (var l = 0; l < c.length; l++) { var p = c[l]; for (Ht = p; Ht !== null;) { var d = Ht; switch (d.tag) { case 0: case 11: case 15: ep(8, d, o) }var f = d.child; if (f !== null) f.return = d, Ht = f; else for (; Ht !== null;) { d = Ht; var h = d.sibling, P = d.return; if (_S(d), d === p) { Ht = null; break } if (h !== null) { h.return = P, Ht = h; break } Ht = P } } } var b = o.alternate; if (b !== null) { var u = b.child; if (u !== null) { b.child = null; do { var g = u.sibling; u.sibling = null, u = g } while (u !== null) } } Ht = o } } if (o.subtreeFlags & 2064 && a !== null) a.return = o, Ht = a; else e: for (; Ht !== null;) { if (o = Ht, o.flags & 2048) switch (o.tag) { case 0: case 11: case 15: ep(9, o, o.return) }var S = o.sibling; if (S !== null) { S.return = o.return, Ht = S; break e } Ht = o.return } } var R = e.current; for (Ht = R; Ht !== null;) { a = Ht; var y = a.child; if (a.subtreeFlags & 2064 && y !== null) y.return = a, Ht = y; else e: for (a = R; Ht !== null;) { if (c = Ht, c.flags & 2048) try { switch (c.tag) { case 0: case 11: case 15: rm(9, c) } } catch (D) { oi(c, c.return, D) } if (c === a) { Ht = null; break e } var v = c.sibling; if (v !== null) { v.return = c.return, Ht = v; break e } Ht = c.return } } if (an = s, Cl(), no && typeof no.onPostCommitFiberRoot == "function") try { no.onPostCommitFiberRoot(Kf, e) } catch { } n = !0 } return n } finally { _n = r, ca.transition = t } } return !1 } function S1(e, t, r) { t = jd(r, t), t = dS(e, t, 1), e = ml(e, t, 1), t = ps(), e !== null && (Dp(e, 1, t), As(e, t)) } function oi(e, t, r) { if (e.tag === 3) S1(e, e, r); else for (; t !== null;) { if (t.tag === 3) { S1(t, e, r); break } else if (t.tag === 1) { var n = t.stateNode; if (typeof t.type.getDerivedStateFromError == "function" || typeof n.componentDidCatch == "function" && (gl === null || !gl.has(n))) { e = jd(r, e), e = uS(t, e, 1), t = ml(t, e, 1), e = ps(), t !== null && (Dp(t, 1, e), As(t, e)); break } } t = t.return } } function cT(e, t, r) { var n = e.pingCache; n !== null && n.delete(t), t = ps(), e.pingedLanes |= e.suspendedLanes & r, Ai === e && (Fi & r) === r && (Ei === 4 || Ei === 3 && (Fi & 130023424) === Fi && 500 > pi() - Kv ? gc(e, 0) : Gv |= r), As(e, t) } function DS(e, t) { t === 0 && (e.mode & 1 ? (t = yh, yh <<= 1, !(yh & 130023424) && (yh = 4194304)) : t = 1); var r = ps(); e = Do(e, t), e !== null && (Dp(e, t, r), As(e, r)) } function dT(e) { var t = e.memoizedState, r = 0; t !== null && (r = t.retryLane), DS(e, r) } function uT(e, t) { var r = 0; switch (e.tag) { case 13: var n = e.stateNode, s = e.memoizedState; s !== null && (r = s.retryLane); break; case 19: n = e.stateNode; break; default: throw Error(at(314)) }n !== null && n.delete(t), DS(e, r) } var IS; IS = function (e, t, r) { if (e !== null) if (e.memoizedProps !== t.pendingProps || ks.current) Rs = !0; else { if (!(e.lanes & r) && !(t.flags & 128)) return Rs = !1, Xk(e, t, r); Rs = !!(e.flags & 131072) } else Rs = !1, $n && t.flags & 1048576 && Lw(t, _f, t.index); switch (t.lanes = 0, t.tag) { case 2: var n = t.type; qh(e, t), e = t.pendingProps; var s = Ad(t, ts.current); wd(t, r), s = $v(null, t, n, e, s, r); var o = Uv(); return t.flags |= 1, typeof s == "object" && s !== null && typeof s.render == "function" && s.$$typeof === void 0 ? (t.tag = 1, t.memoizedState = null, t.updateQueue = null, Ts(n) ? (o = !0, bf(t)) : o = !1, t.memoizedState = s.state !== null && s.state !== void 0 ? s.state : null, Lv(t), s.updater = tm, t.stateNode = s, s._reactInternals = t, bg(t, n, e, r), t = wg(null, t, n, !0, o, r)) : (t.tag = 0, $n && o && Av(t), ls(null, t, s, r), t = t.child), t; case 16: n = t.elementType; e: { switch (qh(e, t), e = t.pendingProps, s = n._init, n = s(n._payload), t.type = n, s = t.tag = hT(n), e = ja(n, e), s) { case 0: t = _g(null, t, n, e, r); break e; case 1: t = h1(null, t, n, e, r); break e; case 11: t = u1(null, t, n, e, r); break e; case 14: t = p1(null, t, n, ja(n.type, e), r); break e }throw Error(at(306, n, "")) } return t; case 0: return n = t.type, s = t.pendingProps, s = t.elementType === n ? s : ja(n, s), _g(e, t, n, s, r); case 1: return n = t.type, s = t.pendingProps, s = t.elementType === n ? s : ja(n, s), h1(e, t, n, s, r); case 3: e: { if (mS(t), e === null) throw Error(at(387)); n = t.pendingProps, o = t.memoizedState, s = o.element, Uw(e, t), Ef(t, n, null, r); var a = t.memoizedState; if (n = a.element, o.isDehydrated) if (o = { element: n, isDehydrated: !1, cache: a.cache, pendingSuspenseBoundaries: a.pendingSuspenseBoundaries, transitions: a.transitions }, t.updateQueue.baseState = o, t.memoizedState = o, t.flags & 256) { s = jd(Error(at(423)), t), t = f1(e, t, n, r, s); break e } else if (n !== s) { s = jd(Error(at(424)), t), t = f1(e, t, n, r, s); break e } else for (zs = fl(t.stateNode.containerInfo.firstChild), $s = t, $n = !0, Ma = null, r = zw(t, null, n, r), t.child = r; r;)r.flags = r.flags & -3 | 4096, r = r.sibling; else { if (Pd(), n === s) { t = Io(e, t, r); break e } ls(e, t, n, r) } t = t.child } return t; case 5: return Vw(t), e === null && gg(t), n = t.type, s = t.pendingProps, o = e !== null ? e.memoizedProps : null, a = s.children, ug(n, s) ? a = null : o !== null && ug(n, o) && (t.flags |= 32), fS(e, t), ls(e, t, a, r), t.child; case 6: return e === null && gg(t), null; case 13: return gS(e, t, r); case 4: return Nv(t, t.stateNode.containerInfo), n = t.pendingProps, e === null ? t.child = Dd(t, null, n, r) : ls(e, t, n, r), t.child; case 11: return n = t.type, s = t.pendingProps, s = t.elementType === n ? s : ja(n, s), u1(e, t, n, s, r); case 7: return ls(e, t, t.pendingProps, r), t.child; case 8: return ls(e, t, t.pendingProps.children, r), t.child; case 12: return ls(e, t, t.pendingProps.children, r), t.child; case 10: e: { if (n = t.type._context, s = t.pendingProps, o = t.memoizedProps, a = s.value, On(wf, n._currentValue), n._currentValue = a, o !== null) if (Fa(o.value, a)) { if (o.children === s.children && !ks.current) { t = Io(e, t, r); break e } } else for (o = t.child, o !== null && (o.return = t); o !== null;) { var c = o.dependencies; if (c !== null) { a = o.child; for (var l = c.firstContext; l !== null;) { if (l.context === n) { if (o.tag === 1) { l = ko(-1, r & -r), l.tag = 2; var p = o.updateQueue; if (p !== null) { p = p.shared; var d = p.pending; d === null ? l.next = l : (l.next = d.next, d.next = l), p.pending = l } } o.lanes |= r, l = o.alternate, l !== null && (l.lanes |= r), vg(o.return, r, t), c.lanes |= r; break } l = l.next } } else if (o.tag === 10) a = o.type === t.type ? null : o.child; else if (o.tag === 18) { if (a = o.return, a === null) throw Error(at(341)); a.lanes |= r, c = a.alternate, c !== null && (c.lanes |= r), vg(a, r, t), a = o.sibling } else a = o.child; if (a !== null) a.return = o; else for (a = o; a !== null;) { if (a === t) { a = null; break } if (o = a.sibling, o !== null) { o.return = a.return, a = o; break } a = a.return } o = a } ls(e, t, s.children, r), t = t.child } return t; case 9: return s = t.type, n = t.pendingProps.children, wd(t, r), s = pa(s), n = n(s), t.flags |= 1, ls(e, t, n, r), t.child; case 14: return n = t.type, s = ja(n, t.pendingProps), s = ja(n.type, s), p1(e, t, n, s, r); case 15: return pS(e, t, t.type, t.pendingProps, r); case 17: return n = t.type, s = t.pendingProps, s = t.elementType === n ? s : ja(n, s), qh(e, t), t.tag = 1, Ts(n) ? (e = !0, bf(t)) : e = !1, wd(t, r), cS(t, n, s), bg(t, n, s, r), wg(null, t, n, !0, e, r); case 19: return vS(e, t, r); case 22: return hS(e, t, r) }throw Error(at(156, t.tag)) }; function jS(e, t) { return aw(e, t) } function pT(e, t, r, n) { this.tag = e, this.key = r, this.sibling = this.child = this.return = this.stateNode = this.type = this.elementType = null, this.index = 0, this.ref = null, this.pendingProps = t, this.dependencies = this.memoizedState = this.updateQueue = this.memoizedProps = null, this.mode = n, this.subtreeFlags = this.flags = 0, this.deletions = null, this.childLanes = this.lanes = 0, this.alternate = null } function oa(e, t, r, n) { return new pT(e, t, r, n) } function Xv(e) { return e = e.prototype, !(!e || !e.isReactComponent) } function hT(e) { if (typeof e == "function") return Xv(e) ? 1 : 0; if (e != null) { if (e = e.$$typeof, e === vv) return 11; if (e === yv) return 14 } return 2 } function yl(e, t) { var r = e.alternate; return r === null ? (r = oa(e.tag, t, e.key, e.mode), r.elementType = e.elementType, r.type = e.type, r.stateNode = e.stateNode, r.alternate = e, e.alternate = r) : (r.pendingProps = t, r.type = e.type, r.flags = 0, r.subtreeFlags = 0, r.deletions = null), r.flags = e.flags & 14680064, r.childLanes = e.childLanes, r.lanes = e.lanes, r.child = e.child, r.memoizedProps = e.memoizedProps, r.memoizedState = e.memoizedState, r.updateQueue = e.updateQueue, t = e.dependencies, r.dependencies = t === null ? null : { lanes: t.lanes, firstContext: t.firstContext }, r.sibling = e.sibling, r.index = e.index, r.ref = e.ref, r } function Yh(e, t, r, n, s, o) { var a = 2; if (n = e, typeof e == "function") Xv(e) && (a = 1); else if (typeof e == "string") a = 5; else e: switch (e) { case nd: return vc(r.children, s, o, t); case gv: a = 8, s |= 8; break; case V0: return e = oa(12, r, t, s | 2), e.elementType = V0, e.lanes = o, e; case W0: return e = oa(13, r, t, s), e.elementType = W0, e.lanes = o, e; case H0: return e = oa(19, r, t, s), e.elementType = H0, e.lanes = o, e; case V_: return im(r, s, o, t); default: if (typeof e == "object" && e !== null) switch (e.$$typeof) { case $_: a = 10; break e; case U_: a = 9; break e; case vv: a = 11; break e; case yv: a = 14; break e; case il: a = 16, n = null; break e }throw Error(at(130, e == null ? e : typeof e, "")) }return t = oa(a, r, t, s), t.elementType = e, t.type = n, t.lanes = o, t } function vc(e, t, r, n) { return e = oa(7, e, n, t), e.lanes = r, e } function im(e, t, r, n) { return e = oa(22, e, n, t), e.elementType = V_, e.lanes = r, e.stateNode = { isHidden: !1 }, e } function m0(e, t, r) { return e = oa(6, e, null, t), e.lanes = r, e } function g0(e, t, r) { return t = oa(4, e.children !== null ? e.children : [], e.key, t), t.lanes = r, t.stateNode = { containerInfo: e.containerInfo, pendingChildren: null, implementation: e.implementation }, t } function fT(e, t, r, n, s) { this.tag = t, this.containerInfo = e, this.finishedWork = this.pingCache = this.current = this.pendingChildren = null, this.timeoutHandle = -1, this.callbackNode = this.pendingContext = this.context = null, this.callbackPriority = 0, this.eventTimes = Qm(0), this.expirationTimes = Qm(-1), this.entangledLanes = this.finishedLanes = this.mutableReadLanes = this.expiredLanes = this.pingedLanes = this.suspendedLanes = this.pendingLanes = 0, this.entanglements = Qm(0), this.identifierPrefix = n, this.onRecoverableError = s, this.mutableSourceEagerHydrationData = null } function Zv(e, t, r, n, s, o, a, c, l) { return e = new fT(e, t, r, c, l), t === 1 ? (t = 1, o === !0 && (t |= 8)) : t = 0, o = oa(3, null, null, t), e.current = o, o.stateNode = e, o.memoizedState = { element: n, isDehydrated: r, cache: null, transitions: null, pendingSuspenseBoundaries: null }, Lv(o), e } function mT(e, t, r) { var n = 3 < arguments.length && arguments[3] !== void 0 ? arguments[3] : null; return { $$typeof: rd, key: n == null ? null : "" + n, children: e, containerInfo: t, implementation: r } } function OS(e) { if (!e) return xl; e = e._reactInternals; e: { if (Tc(e) !== e || e.tag !== 1) throw Error(at(170)); var t = e; do { switch (t.tag) { case 3: t = t.stateNode.context; break e; case 1: if (Ts(t.type)) { t = t.stateNode.__reactInternalMemoizedMergedChildContext; break e } }t = t.return } while (t !== null); throw Error(at(171)) } if (e.tag === 1) { var r = e.type; if (Ts(r)) return Ow(e, r, t) } return t } function MS(e, t, r, n, s, o, a, c, l) { return e = Zv(r, n, !0, e, s, o, a, c, l), e.context = OS(null), r = e.current, n = ps(), s = vl(r), o = ko(n, s), o.callback = t ?? null, ml(r, o, s), e.current.lanes = s, Dp(e, s, n), As(e, n), e } function sm(e, t, r, n) { var s = t.current, o = ps(), a = vl(s); return r = OS(r), t.context === null ? t.context = r : t.pendingContext = r, t = ko(o, a), t.payload = { element: e }, n = n === void 0 ? null : n, n !== null && (t.callback = n), e = ml(s, t, a), e !== null && (Na(e, s, a, o), Vh(e, s, a)), a } function If(e) { if (e = e.current, !e.child) return null; switch (e.child.tag) { case 5: return e.child.stateNode; default: return e.child.stateNode } } function E1(e, t) { if (e = e.memoizedState, e !== null && e.dehydrated !== null) { var r = e.retryLane; e.retryLane = r !== 0 && r < t ? r : t } } function ey(e, t) { E1(e, t), (e = e.alternate) && E1(e, t) } function gT() { return null } var LS = typeof reportError == "function" ? reportError : function (e) { console.error(e) }; function ty(e) { this._internalRoot = e } am.prototype.render = ty.prototype.render = function (e) { var t = this._internalRoot; if (t === null) throw Error(at(409)); sm(e, t, null, null) }; am.prototype.unmount = ty.prototype.unmount = function () { var e = this._internalRoot; if (e !== null) { this._internalRoot = null; var t = e.containerInfo; Sc(function () { sm(null, e, null, null) }), t[Po] = null } }; function am(e) { this._internalRoot = e } am.prototype.unstable_scheduleHydration = function (e) { if (e) { var t = hw(); e = { blockedOn: null, target: e, priority: t }; for (var r = 0; r < al.length && t !== 0 && t < al[r].priority; r++); al.splice(r, 0, e), r === 0 && mw(e) } }; function ry(e) { return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11) } function om(e) { return !(!e || e.nodeType !== 1 && e.nodeType !== 9 && e.nodeType !== 11 && (e.nodeType !== 8 || e.nodeValue !== " react-mount-point-unstable ")) } function C1() { } function vT(e, t, r, n, s) { if (s) { if (typeof n == "function") { var o = n; n = function () { var p = If(a); o.call(p) } } var a = MS(t, n, e, 0, null, !1, !1, "", C1); return e._reactRootContainer = a, e[Po] = a.current, mp(e.nodeType === 8 ? e.parentNode : e), Sc(), a } for (; s = e.lastChild;)e.removeChild(s); if (typeof n == "function") { var c = n; n = function () { var p = If(l); c.call(p) } } var l = Zv(e, 0, !1, null, null, !1, !1, "", C1); return e._reactRootContainer = l, e[Po] = l.current, mp(e.nodeType === 8 ? e.parentNode : e), Sc(function () { sm(t, l, r, n) }), l } function lm(e, t, r, n, s) { var o = r._reactRootContainer; if (o) { var a = o; if (typeof s == "function") { var c = s; s = function () { var l = If(a); c.call(l) } } sm(t, a, e, s) } else a = vT(r, t, e, s, n); return If(a) } uw = function (e) { switch (e.tag) { case 3: var t = e.stateNode; if (t.current.memoizedState.isDehydrated) { var r = Wu(t.pendingLanes); r !== 0 && (_v(t, r | 1), As(t, pi()), !(an & 6) && (Od = pi() + 500, Cl())) } break; case 13: Sc(function () { var n = Do(e, 1); if (n !== null) { var s = ps(); Na(n, e, 1, s) } }), ey(e, 1) } }; wv = function (e) { if (e.tag === 13) { var t = Do(e, 134217728); if (t !== null) { var r = ps(); Na(t, e, 134217728, r) } ey(e, 134217728) } }; pw = function (e) { if (e.tag === 13) { var t = vl(e), r = Do(e, t); if (r !== null) { var n = ps(); Na(r, e, t, n) } ey(e, t) } }; hw = function () { return _n }; fw = function (e, t) { var r = _n; try { return _n = e, t() } finally { _n = r } }; tg = function (e, t, r) { switch (t) { case "input": if (K0(e, r), t = r.name, r.type === "radio" && t != null) { for (r = e; r.parentNode;)r = r.parentNode; for (r = r.querySelectorAll("input[name=" + JSON.stringify("" + t) + '][type="radio"]'), t = 0; t < r.length; t++) { var n = r[t]; if (n !== e && n.form === e.form) { var s = Xf(n); if (!s) throw Error(at(90)); H_(n), K0(n, s) } } } break; case "textarea": G_(e, r); break; case "select": t = r.value, t != null && yd(e, !!r.multiple, t, !1) } }; ew = Yv; tw = Sc; var yT = { usingClientEntryPoint: !1, Events: [jp, od, Xf, X_, Z_, Yv] }, Lu = { findFiberByHostInstance: dc, bundleType: 0, version: "18.3.1", rendererPackageName: "react-dom" }, bT = { bundleType: Lu.bundleType, version: Lu.version, rendererPackageName: Lu.rendererPackageName, rendererConfig: Lu.rendererConfig, overrideHookState: null, overrideHookStateDeletePath: null, overrideHookStateRenamePath: null, overrideProps: null, overridePropsDeletePath: null, overridePropsRenamePath: null, setErrorHandler: null, setSuspenseHandler: null, scheduleUpdate: null, currentDispatcherRef: Lo.ReactCurrentDispatcher, findHostInstanceByFiber: function (e) { return e = iw(e), e === null ? null : e.stateNode }, findFiberByHostInstance: Lu.findFiberByHostInstance || gT, findHostInstancesForRefresh: null, scheduleRefresh: null, scheduleRoot: null, setRefreshHandler: null, getCurrentFiber: null, reconcilerVersion: "18.3.1-next-f1338f8080-20240426" }; if (typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ < "u") { var Ah = __REACT_DEVTOOLS_GLOBAL_HOOK__; if (!Ah.isDisabled && Ah.supportsFiber) try { Kf = Ah.inject(bT), no = Ah } catch { } } Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = yT; Vs.createPortal = function (e, t) { var r = 2 < arguments.length && arguments[2] !== void 0 ? arguments[2] : null; if (!ry(t)) throw Error(at(200)); return mT(e, t, null, r) }; Vs.createRoot = function (e, t) { if (!ry(e)) throw Error(at(299)); var r = !1, n = "", s = LS; return t != null && (t.unstable_strictMode === !0 && (r = !0), t.identifierPrefix !== void 0 && (n = t.identifierPrefix), t.onRecoverableError !== void 0 && (s = t.onRecoverableError)), t = Zv(e, 1, !1, null, null, r, !1, n, s), e[Po] = t.current, mp(e.nodeType === 8 ? e.parentNode : e), new ty(t) }; Vs.findDOMNode = function (e) { if (e == null) return null; if (e.nodeType === 1) return e; var t = e._reactInternals; if (t === void 0) throw typeof e.render == "function" ? Error(at(188)) : (e = Object.keys(e).join(","), Error(at(268, e))); return e = iw(t), e = e === null ? null : e.stateNode, e }; Vs.flushSync = function (e) { return Sc(e) }; Vs.hydrate = function (e, t, r) { if (!om(t)) throw Error(at(200)); return lm(null, e, t, !0, r) }; Vs.hydrateRoot = function (e, t, r) { if (!ry(e)) throw Error(at(405)); var n = r != null && r.hydratedSources || null, s = !1, o = "", a = LS; if (r != null && (r.unstable_strictMode === !0 && (s = !0), r.identifierPrefix !== void 0 && (o = r.identifierPrefix), r.onRecoverableError !== void 0 && (a = r.onRecoverableError)), t = MS(t, null, e, 1, r ?? null, s, !1, o, a), e[Po] = t.current, mp(e), n) for (e = 0; e < n.length; e++)r = n[e], s = r._getVersion, s = s(r._source), t.mutableSourceEagerHydrationData == null ? t.mutableSourceEagerHydrationData = [r, s] : t.mutableSourceEagerHydrationData.push(r, s); return new am(t) }; Vs.render = function (e, t, r) { if (!om(t)) throw Error(at(200)); return lm(null, e, t, !1, r) }; Vs.unmountComponentAtNode = function (e) { if (!om(e)) throw Error(at(40)); return e._reactRootContainer ? (Sc(function () { lm(null, null, e, !1, function () { e._reactRootContainer = null, e[Po] = null }) }), !0) : !1 }; Vs.unstable_batchedUpdates = Yv; Vs.unstable_renderSubtreeIntoContainer = function (e, t, r, n) { if (!om(r)) throw Error(at(200)); if (e == null || e._reactInternals === void 0) throw Error(at(38)); return lm(e, t, r, !1, n) }; Vs.version = "18.3.1-next-f1338f8080-20240426"; function NS() { if (!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__ > "u" || typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE != "function")) try { __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NS) } catch (e) { console.error(e) } } NS(), N_.exports = Vs; var xT = N_.exports, R1 = xT; $0.createRoot = R1.createRoot, $0.hydrateRoot = R1.hydrateRoot; const _T = "modulepreload", wT = function (e) { return "/" + e }, k1 = {}, ny = function (t, r, n) { if (!r || r.length === 0) return t(); const s = document.getElementsByTagName("link"); return Promise.all(r.map(o => { if (o = wT(o), o in k1) return; k1[o] = !0; const a = o.endsWith(".css"), c = a ? '[rel="stylesheet"]' : ""; if (!!n) for (let d = s.length - 1; d >= 0; d--) { const f = s[d]; if (f.href === o && (!a || f.rel === "stylesheet")) return } else if (document.querySelector(`link[href="${o}"]${c}`)) return; const p = document.createElement("link"); if (p.rel = a ? "stylesheet" : _T, a || (p.as = "script", p.crossOrigin = ""), p.href = o, document.head.appendChild(p), a) return new Promise((d, f) => { p.addEventListener("load", d), p.addEventListener("error", () => f(new Error(`Unable to preload CSS for ${o}`))) }) })).then(() => t()).catch(o => { const a = new Event("vite:preloadError", { cancelable: !0 }); if (a.payload = o, window.dispatchEvent(a), !a.defaultPrevented) throw o }) }; var T1 = "popstate"; function ST(e = {}) { function t(n, s) { let { pathname: o, search: a, hash: c } = n.location; return Og("", { pathname: o, search: a, hash: c }, s.state && s.state.usr || null, s.state && s.state.key || "default") } function r(n, s) { return typeof s == "string" ? s : Ep(s) } return CT(t, r, null, e) } function Un(e, t) { if (e === !1 || e === null || typeof e > "u") throw new Error(t) } function fa(e, t) { if (!e) { typeof console < "u" && console.warn(t); try { throw new Error(t) } catch { } } } function ET() { return Math.random().toString(36).substring(2, 10) } function A1(e, t) { return { usr: e.state, key: e.key, idx: t } } function Og(e, t, r = null, n) { return { pathname: typeof e == "string" ? e : e.pathname, search: "", hash: "", ...typeof t == "string" ? Vd(t) : t, state: r, key: t && t.key || n || ET() } } function Ep({ pathname: e = "/", search: t = "", hash: r = "" }) { return t && t !== "?" && (e += t.charAt(0) === "?" ? t : "?" + t), r && r !== "#" && (e += r.charAt(0) === "#" ? r : "#" + r), e } function Vd(e) { let t = {}; if (e) { let r = e.indexOf("#"); r >= 0 && (t.hash = e.substring(r), e = e.substring(0, r)); let n = e.indexOf("?"); n >= 0 && (t.search = e.substring(n), e = e.substring(0, n)), e && (t.pathname = e) } return t } function CT(e, t, r, n = {}) { let { window: s = document.defaultView, v5Compat: o = !1 } = n, a = s.history, c = "POP", l = null, p = d(); p == null && (p = 0, a.replaceState({ ...a.state, idx: p }, "")); function d() { return (a.state || { idx: null }).idx } function f() { c = "POP"; let g = d(), S = g == null ? null : g - p; p = g, l && l({ action: c, location: u.location, delta: S }) } function h(g, S) { c = "PUSH"; let R = Og(u.location, g, S); r && r(R, g), p = d() + 1; let y = A1(R, p), v = u.createHref(R); try { a.pushState(y, "", v) } catch (D) { if (D instanceof DOMException && D.name === "DataCloneError") throw D; s.location.assign(v) } o && l && l({ action: c, location: u.location, delta: 1 }) } function P(g, S) { c = "REPLACE"; let R = Og(u.location, g, S); r && r(R, g), p = d(); let y = A1(R, p), v = u.createHref(R); a.replaceState(y, "", v), o && l && l({ action: c, location: u.location, delta: 0 }) } function b(g) { return RT(g) } let u = { get action() { return c }, get location() { return e(s, a) }, listen(g) { if (l) throw new Error("A history only accepts one active listener"); return s.addEventListener(T1, f), l = g, () => { s.removeEventListener(T1, f), l = null } }, createHref(g) { return t(s, g) }, createURL: b, encodeLocation(g) { let S = b(g); return { pathname: S.pathname, search: S.search, hash: S.hash } }, push: h, replace: P, go(g) { return a.go(g) } }; return u } function RT(e, t = !1) { let r = "http://localhost"; typeof window < "u" && (r = window.location.origin !== "null" ? window.location.origin : window.location.href), Un(r, "No window.location.(origin|href) available to create URL"); let n = typeof e == "string" ? e : Ep(e); return n = n.replace(/ $/, "%20"), !t && n.startsWith("//") && (n = r + n), new URL(n, r) } function BS(e, t, r = "/") { return kT(e, t, r, !1) } function kT(e, t, r, n) { let s = typeof t == "string" ? Vd(t) : t, o = jo(s.pathname || "/", r); if (o == null) return null; let a = FS(e); TT(a); let c = null; for (let l = 0; c == null && l < a.length; ++l) { let p = FT(o); c = NT(a[l], p, n) } return c } function FS(e, t = [], r = [], n = "", s = !1) { let o = (a, c, l = s, p) => { let d = { relativePath: p === void 0 ? a.path || "" : p, caseSensitive: a.caseSensitive === !0, childrenIndex: c, route: a }; if (d.relativePath.startsWith("/")) { if (!d.relativePath.startsWith(n) && l) return; Un(d.relativePath.startsWith(n), `Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`), d.relativePath = d.relativePath.slice(n.length) } let f = To([n, d.relativePath]), h = r.concat(d); a.children && a.children.length > 0 && (Un(a.index !== !0, `Index routes must not have child routes. Please remove all child routes from route path "${f}".`), FS(a.children, t, h, f, l)), !(a.path == null && !a.index) && t.push({ path: f, score: MT(f, a.index), routesMeta: h }) }; return e.forEach((a, c) => { var l; if (a.path === "" || !((l = a.path) != null && l.includes("?"))) o(a, c); else for (let p of zS(a.path)) o(a, c, !0, p) }), t } function zS(e) { let t = e.split("/"); if (t.length === 0) return []; let [r, ...n] = t, s = r.endsWith("?"), o = r.replace(/\?$/, ""); if (n.length === 0) return s ? [o, ""] : [o]; let a = zS(n.join("/")), c = []; return c.push(...a.map(l => l === "" ? o : [o, l].join("/"))), s && c.push(...a), c.map(l => e.startsWith("/") && l === "" ? "/" : l) } function TT(e) { e.sort((t, r) => t.score !== r.score ? r.score - t.score : LT(t.routesMeta.map(n => n.childrenIndex), r.routesMeta.map(n => n.childrenIndex))) } var AT = /^:[\w-]+$/, PT = 3, DT = 2, IT = 1, jT = 10, OT = -2, P1 = e => e === "*"; function MT(e, t) { let r = e.split("/"), n = r.length; return r.some(P1) && (n += OT), t && (n += DT), r.filter(s => !P1(s)).reduce((s, o) => s + (AT.test(o) ? PT : o === "" ? IT : jT), n) } function LT(e, t) { return e.length === t.length && e.slice(0, -1).every((n, s) => n === t[s]) ? e[e.length - 1] - t[t.length - 1] : 0 } function NT(e, t, r = !1) { let { routesMeta: n } = e, s = {}, o = "/", a = []; for (let c = 0; c < n.length; ++c) { let l = n[c], p = c === n.length - 1, d = o === "/" ? t : t.slice(o.length) || "/", f = jf({ path: l.relativePath, caseSensitive: l.caseSensitive, end: p }, d), h = l.route; if (!f && p && r && !n[n.length - 1].route.index && (f = jf({ path: l.relativePath, caseSensitive: l.caseSensitive, end: !1 }, d)), !f) return null; Object.assign(s, f.params), a.push({ params: s, pathname: To([o, f.pathname]), pathnameBase: VT(To([o, f.pathnameBase])), route: h }), f.pathnameBase !== "/" && (o = To([o, f.pathnameBase])) } return a } function jf(e, t) { typeof e == "string" && (e = { path: e, caseSensitive: !1, end: !0 }); let [r, n] = BT(e.path, e.caseSensitive, e.end), s = t.match(r); if (!s) return null; let o = s[0], a = o.replace(/(.)\/+$/, "$1"), c = s.slice(1); return { params: n.reduce((p, { paramName: d, isOptional: f }, h) => { if (d === "*") { let b = c[h] || ""; a = o.slice(0, o.length - b.length).replace(/(.)\/+$/, "$1") } const P = c[h]; return f && !P ? p[d] = void 0 : p[d] = (P || "").replace(/%2F/g, "/"), p }, {}), pathname: o, pathnameBase: a, pattern: e } } function BT(e, t = !1, r = !0) { fa(e === "*" || !e.endsWith("*") || e.endsWith("/*"), `Route path "${e}" will be treated as if it were "${e.replace(/\*$/, "/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/, "/*")}".`); let n = [], s = "^" + e.replace(/\/*\*?$/, "").replace(/^\/*/, "/").replace(/[\\.*+^${}|()[\]]/g, "\\$&").replace(/\/:([\w-]+)(\?)?/g, (a, c, l) => (n.push({ paramName: c, isOptional: l != null }), l ? "/?([^\\/]+)?" : "/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g, "(/$1)?$2"); return e.endsWith("*") ? (n.push({ paramName: "*" }), s += e === "*" || e === "/*" ? "(.*)$" : "(?:\\/(.+)|\\/*)$") : r ? s += "\\/*$" : e !== "" && e !== "/" && (s += "(?:(?=\\/|$))"), [new RegExp(s, t ? void 0 : "i"), n] } function FT(e) { try { return e.split("/").map(t => decodeURIComponent(t).replace(/\//g, "%2F")).join("/") } catch (t) { return fa(!1, `The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`), e } } function jo(e, t) { if (t === "/") return e; if (!e.toLowerCase().startsWith(t.toLowerCase())) return null; let r = t.endsWith("/") ? t.length - 1 : t.length, n = e.charAt(r); return n && n !== "/" ? null : e.slice(r) || "/" } var $S = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, zT = e => $S.test(e); function $T(e, t = "/") { let { pathname: r, search: n = "", hash: s = "" } = typeof e == "string" ? Vd(e) : e, o; if (r) if (zT(r)) o = r; else { if (r.includes("//")) { let a = r; r = r.replace(/\/\/+/g, "/"), fa(!1, `Pathnames cannot have embedded double slashes - normalizing ${a} -> ${r}`) } r.startsWith("/") ? o = D1(r.substring(1), "/") : o = D1(r, t) } else o = t; return { pathname: o, search: WT(n), hash: HT(s) } } function D1(e, t) { let r = t.replace(/\/+$/, "").split("/"); return e.split("/").forEach(s => { s === ".." ? r.length > 1 && r.pop() : s !== "." && r.push(s) }), r.length > 1 ? r.join("/") : "/" } function v0(e, t, r, n) { return `Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.` } function UT(e) { return e.filter((t, r) => r === 0 || t.route.path && t.route.path.length > 0) } function iy(e) { let t = UT(e); return t.map((r, n) => n === t.length - 1 ? r.pathname : r.pathnameBase) } function sy(e, t, r, n = !1) { let s; typeof e == "string" ? s = Vd(e) : (s = { ...e }, Un(!s.pathname || !s.pathname.includes("?"), v0("?", "pathname", "search", s)), Un(!s.pathname || !s.pathname.includes("#"), v0("#", "pathname", "hash", s)), Un(!s.search || !s.search.includes("#"), v0("#", "search", "hash", s))); let o = e === "" || s.pathname === "", a = o ? "/" : s.pathname, c; if (a == null) c = r; else { let f = t.length - 1; if (!n && a.startsWith("..")) { let h = a.split("/"); for (; h[0] === "..";)h.shift(), f -= 1; s.pathname = h.join("/") } c = f >= 0 ? t[f] : "/" } let l = $T(s, c), p = a && a !== "/" && a.endsWith("/"), d = (o || a === ".") && r.endsWith("/"); return !l.pathname.endsWith("/") && (p || d) && (l.pathname += "/"), l } var To = e => e.join("/").replace(/\/\/+/g, "/"), VT = e => e.replace(/\/+$/, "").replace(/^\/*/, "/"), WT = e => !e || e === "?" ? "" : e.startsWith("?") ? e : "?" + e, HT = e => !e || e === "#" ? "" : e.startsWith("#") ? e : "#" + e, qT = class { constructor(e, t, r, n = !1) { this.status = e, this.statusText = t || "", this.internal = n, r instanceof Error ? (this.data = r.toString(), this.error = r) : this.data = r } }; function GT(e) { return e != null && typeof e.status == "number" && typeof e.statusText == "string" && typeof e.internal == "boolean" && "data" in e } function KT(e) { return e.map(t => t.route.path).filter(Boolean).join("/").replace(/\/\/*/g, "/") || "/" } var US = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u"; function VS(e, t) { let r = e; if (typeof r != "string" || !$S.test(r)) return { absoluteURL: void 0, isExternal: !1, to: r }; let n = r, s = !1; if (US) try { let o = new URL(window.location.href), a = r.startsWith("//") ? new URL(o.protocol + r) : new URL(r), c = jo(a.pathname, t); a.origin === o.origin && c != null ? r = c + a.search + a.hash : s = !0 } catch { fa(!1, `<Link to="${r}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`) } return { absoluteURL: n, isExternal: s, to: r } } Object.getOwnPropertyNames(Object.prototype).sort().join("\0"); var WS = ["POST", "PUT", "PATCH", "DELETE"]; new Set(WS); var YT = ["GET", ...WS]; new Set(YT); var Wd = J.createContext(null); Wd.displayName = "DataRouter"; var cm = J.createContext(null); cm.displayName = "DataRouterState"; var QT = J.createContext(!1), HS = J.createContext({ isTransitioning: !1 }); HS.displayName = "ViewTransition"; var JT = J.createContext(new Map); JT.displayName = "Fetchers"; var XT = J.createContext(null); XT.displayName = "Await"; var Hs = J.createContext(null); Hs.displayName = "Navigation"; var Mp = J.createContext(null); Mp.displayName = "Location"; var lo = J.createContext({ outlet: null, matches: [], isDataRoute: !1 }); lo.displayName = "Route"; var ay = J.createContext(null); ay.displayName = "RouteError"; var qS = "REACT_ROUTER_ERROR", ZT = "REDIRECT", eA = "ROUTE_ERROR_RESPONSE"; function tA(e) { if (e.startsWith(`${qS}:${ZT}:{`)) try { let t = JSON.parse(e.slice(28)); if (typeof t == "object" && t && typeof t.status == "number" && typeof t.statusText == "string" && typeof t.location == "string" && typeof t.reloadDocument == "boolean" && typeof t.replace == "boolean") return t } catch { } } function rA(e) { if (e.startsWith(`${qS}:${eA}:{`)) try { let t = JSON.parse(e.slice(40)); if (typeof t == "object" && t && typeof t.status == "number" && typeof t.statusText == "string") return new qT(t.status, t.statusText, t.data) } catch { } } function nA(e, { relative: t } = {}) { Un(Hd(), "useHref() may be used only in the context of a <Router> component."); let { basename: r, navigator: n } = J.useContext(Hs), { hash: s, pathname: o, search: a } = Lp(e, { relative: t }), c = o; return r !== "/" && (c = o === "/" ? r : To([r, o])), n.createHref({ pathname: c, search: a, hash: s }) } function Hd() { return J.useContext(Mp) != null } function No() { return Un(Hd(), "useLocation() may be used only in the context of a <Router> component."), J.useContext(Mp).location } var GS = "You should call navigate() in a React.useEffect(), not when your component is first rendered."; function KS(e) { J.useContext(Hs).static || J.useLayoutEffect(e) } function Rl() { let { isDataRoute: e } = J.useContext(lo); return e ? gA() : iA() } function iA() { Un(Hd(), "useNavigate() may be used only in the context of a <Router> component."); let e = J.useContext(Wd), { basename: t, navigator: r } = J.useContext(Hs), { matches: n } = J.useContext(lo), { pathname: s } = No(), o = JSON.stringify(iy(n)), a = J.useRef(!1); return KS(() => { a.current = !0 }), J.useCallback((l, p = {}) => { if (fa(a.current, GS), !a.current) return; if (typeof l == "number") { r.go(l); return } let d = sy(l, JSON.parse(o), s, p.relative === "path"); e == null && t !== "/" && (d.pathname = d.pathname === "/" ? t : To([t, d.pathname])), (p.replace ? r.replace : r.push)(d, p.state, p) }, [t, r, o, s, e]) } J.createContext(null); function Lp(e, { relative: t } = {}) { let { matches: r } = J.useContext(lo), { pathname: n } = No(), s = JSON.stringify(iy(r)); return J.useMemo(() => sy(e, JSON.parse(s), n, t === "path"), [e, s, n, t]) } function sA(e, t) { return YS(e, t) } function YS(e, t, r, n, s) {
    var R; Un(Hd(), "useRoutes() may be used only in the context of a <Router> component."); let { navigator: o } = J.useContext(Hs), { matches: a } = J.useContext(lo), c = a[a.length - 1], l = c ? c.params : {}, p = c ? c.pathname : "/", d = c ? c.pathnameBase : "/", f = c && c.route; {
        let y = f && f.path || ""; JS(p, !f || y.endsWith("*") || y.endsWith("*?"), `You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y === "/" ? "*" : `${y}/*`}">.`)
    } let h = No(), P; if (t) { let y = typeof t == "string" ? Vd(t) : t; Un(d === "/" || ((R = y.pathname) == null ? void 0 : R.startsWith(d)), `When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`), P = y } else P = h; let b = P.pathname || "/", u = b; if (d !== "/") { let y = d.replace(/^\//, "").split("/"); u = "/" + b.replace(/^\//, "").split("/").slice(y.length).join("/") } let g = BS(e, { pathname: u }); fa(f || g != null, `No routes matched location "${P.pathname}${P.search}${P.hash}" `), fa(g == null || g[g.length - 1].route.element !== void 0 || g[g.length - 1].route.Component !== void 0 || g[g.length - 1].route.lazy !== void 0, `Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`); let S = dA(g && g.map(y => Object.assign({}, y, { params: Object.assign({}, l, y.params), pathname: To([d, o.encodeLocation ? o.encodeLocation(y.pathname.replace(/\?/g, "%3F").replace(/#/g, "%23")).pathname : y.pathname]), pathnameBase: y.pathnameBase === "/" ? d : To([d, o.encodeLocation ? o.encodeLocation(y.pathnameBase.replace(/\?/g, "%3F").replace(/#/g, "%23")).pathname : y.pathnameBase]) })), a, r, n, s); return t && S ? J.createElement(Mp.Provider, { value: { location: { pathname: "/", search: "", hash: "", state: null, key: "default", ...P }, navigationType: "POP" } }, S) : S
} function aA() { let e = mA(), t = GT(e) ? `${e.status} ${e.statusText}` : e instanceof Error ? e.message : JSON.stringify(e), r = e instanceof Error ? e.stack : null, n = "rgba(200,200,200, 0.5)", s = { padding: "0.5rem", backgroundColor: n }, o = { padding: "2px 4px", backgroundColor: n }, a = null; return console.error("Error handled by React Router default ErrorBoundary:", e), a = J.createElement(J.Fragment, null, J.createElement("p", null, " Hey developer "), J.createElement("p", null, "You can provide a way better UX than this when your app throws errors by providing your own ", J.createElement("code", { style: o }, "ErrorBoundary"), " or", " ", J.createElement("code", { style: o }, "errorElement"), " prop on your route.")), J.createElement(J.Fragment, null, J.createElement("h2", null, "Unexpected Application Error!"), J.createElement("h3", { style: { fontStyle: "italic" } }, t), r ? J.createElement("pre", { style: s }, r) : null, a) } var oA = J.createElement(aA, null), QS = class extends J.Component { constructor(e) { super(e), this.state = { location: e.location, revalidation: e.revalidation, error: e.error } } static getDerivedStateFromError(e) { return { error: e } } static getDerivedStateFromProps(e, t) { return t.location !== e.location || t.revalidation !== "idle" && e.revalidation === "idle" ? { error: e.error, location: e.location, revalidation: e.revalidation } : { error: e.error !== void 0 ? e.error : t.error, location: t.location, revalidation: e.revalidation || t.revalidation } } componentDidCatch(e, t) { this.props.onError ? this.props.onError(e, t) : console.error("React Router caught the following error during render", e) } render() { let e = this.state.error; if (this.context && typeof e == "object" && e && "digest" in e && typeof e.digest == "string") { const r = rA(e.digest); r && (e = r) } let t = e !== void 0 ? J.createElement(lo.Provider, { value: this.props.routeContext }, J.createElement(ay.Provider, { value: e, children: this.props.component })) : this.props.children; return this.context ? J.createElement(lA, { error: e }, t) : t } }; QS.contextType = QT; var y0 = new WeakMap; function lA({ children: e, error: t }) { let { basename: r } = J.useContext(Hs); if (typeof t == "object" && t && "digest" in t && typeof t.digest == "string") { let n = tA(t.digest); if (n) { let s = y0.get(t); if (s) throw s; let o = VS(n.location, r); if (US && !y0.get(t)) if (o.isExternal || n.reloadDocument) window.location.href = o.absoluteURL || o.to; else { const a = Promise.resolve().then(() => window.__reactRouterDataRouter.navigate(o.to, { replace: n.replace })); throw y0.set(t, a), a } return J.createElement("meta", { httpEquiv: "refresh", content: `0;url=${o.absoluteURL || o.to}` }) } } return e } function cA({ routeContext: e, match: t, children: r }) { let n = J.useContext(Wd); return n && n.static && n.staticContext && (t.route.errorElement || t.route.ErrorBoundary) && (n.staticContext._deepestRenderedBoundaryId = t.route.id), J.createElement(lo.Provider, { value: e }, r) } function dA(e, t = [], r = null, n = null, s = null) { if (e == null) { if (!r) return null; if (r.errors) e = r.matches; else if (t.length === 0 && !r.initialized && r.matches.length > 0) e = r.matches; else return null } let o = e, a = r == null ? void 0 : r.errors; if (a != null) { let d = o.findIndex(f => f.route.id && (a == null ? void 0 : a[f.route.id]) !== void 0); Un(d >= 0, `Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`), o = o.slice(0, Math.min(o.length, d + 1)) } let c = !1, l = -1; if (r) for (let d = 0; d < o.length; d++) { let f = o[d]; if ((f.route.HydrateFallback || f.route.hydrateFallbackElement) && (l = d), f.route.id) { let { loaderData: h, errors: P } = r, b = f.route.loader && !h.hasOwnProperty(f.route.id) && (!P || P[f.route.id] === void 0); if (f.route.lazy || b) { c = !0, l >= 0 ? o = o.slice(0, l + 1) : o = [o[0]]; break } } } let p = r && n ? (d, f) => { var h, P; n(d, { location: r.location, params: ((P = (h = r.matches) == null ? void 0 : h[0]) == null ? void 0 : P.params) ?? {}, unstable_pattern: KT(r.matches), errorInfo: f }) } : void 0; return o.reduceRight((d, f, h) => { let P, b = !1, u = null, g = null; r && (P = a && f.route.id ? a[f.route.id] : void 0, u = f.route.errorElement || oA, c && (l < 0 && h === 0 ? (JS("route-fallback", !1, "No `HydrateFallback` element provided to render during initial hydration"), b = !0, g = null) : l === h && (b = !0, g = f.route.hydrateFallbackElement || null))); let S = t.concat(o.slice(0, h + 1)), R = () => { let y; return P ? y = u : b ? y = g : f.route.Component ? y = J.createElement(f.route.Component, null) : f.route.element ? y = f.route.element : y = d, J.createElement(cA, { match: f, routeContext: { outlet: d, matches: S, isDataRoute: r != null }, children: y }) }; return r && (f.route.ErrorBoundary || f.route.errorElement || h === 0) ? J.createElement(QS, { location: r.location, revalidation: r.revalidation, component: u, error: P, children: R(), routeContext: { outlet: null, matches: S, isDataRoute: !0 }, onError: p }) : R() }, null) } function oy(e) { return `${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.` } function uA(e) { let t = J.useContext(Wd); return Un(t, oy(e)), t } function pA(e) { let t = J.useContext(cm); return Un(t, oy(e)), t } function hA(e) { let t = J.useContext(lo); return Un(t, oy(e)), t } function ly(e) { let t = hA(e), r = t.matches[t.matches.length - 1]; return Un(r.route.id, `${e} can only be used on routes that contain a unique "id"`), r.route.id } function fA() { return ly("useRouteId") } function mA() { var n; let e = J.useContext(ay), t = pA("useRouteError"), r = ly("useRouteError"); return e !== void 0 ? e : (n = t.errors) == null ? void 0 : n[r] } function gA() { let { router: e } = uA("useNavigate"), t = ly("useNavigate"), r = J.useRef(!1); return KS(() => { r.current = !0 }), J.useCallback(async (s, o = {}) => { fa(r.current, GS), r.current && (typeof s == "number" ? await e.navigate(s) : await e.navigate(s, { fromRouteId: t, ...o })) }, [e, t]) } var I1 = {}; function JS(e, t, r) { !t && !I1[e] && (I1[e] = !0, fa(!1, r)) } J.memo(vA); function vA({ routes: e, future: t, state: r, onError: n }) { return YS(e, void 0, r, n, t) } function Za({ to: e, replace: t, state: r, relative: n }) { Un(Hd(), "<Navigate> may be used only in the context of a <Router> component."); let { static: s } = J.useContext(Hs); fa(!s, "<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change."); let { matches: o } = J.useContext(lo), { pathname: a } = No(), c = Rl(), l = sy(e, iy(o), a, n === "path"), p = JSON.stringify(l); return J.useEffect(() => { c(JSON.parse(p), { replace: t, state: r, relative: n }) }, [c, p, n, t, r]), null } function Es(e) { Un(!1, "A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.") } function yA({ basename: e = "/", children: t = null, location: r, navigationType: n = "POP", navigator: s, static: o = !1, unstable_useTransitions: a }) { Un(!Hd(), "You cannot render a <Router> inside another <Router>. You should never have more than one in your app."); let c = e.replace(/^\/*/, "/"), l = J.useMemo(() => ({ basename: c, navigator: s, static: o, unstable_useTransitions: a, future: {} }), [c, s, o, a]); typeof r == "string" && (r = Vd(r)); let { pathname: p = "/", search: d = "", hash: f = "", state: h = null, key: P = "default" } = r, b = J.useMemo(() => { let u = jo(p, c); return u == null ? null : { location: { pathname: u, search: d, hash: f, state: h, key: P }, navigationType: n } }, [c, p, d, f, h, P, n]); return fa(b != null, `<Router basename="${c}"> is not able to match the URL "${p}${d}${f}" because it does not start with the basename, so the <Router> won't render anything.`), b == null ? null : J.createElement(Hs.Provider, { value: l }, J.createElement(Mp.Provider, { children: t, value: b })) } function bA({ children: e, location: t }) { return sA(Mg(e), t) } function Mg(e, t = []) { let r = []; return J.Children.forEach(e, (n, s) => { if (!J.isValidElement(n)) return; let o = [...t, s]; if (n.type === J.Fragment) { r.push.apply(r, Mg(n.props.children, o)); return } Un(n.type === Es, `[${typeof n.type == "string" ? n.type : n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`), Un(!n.props.index || !n.props.children, "An index route cannot have child routes."); let a = { id: n.props.id || o.join("-"), caseSensitive: n.props.caseSensitive, element: n.props.element, Component: n.props.Component, index: n.props.index, path: n.props.path, middleware: n.props.middleware, loader: n.props.loader, action: n.props.action, hydrateFallbackElement: n.props.hydrateFallbackElement, HydrateFallback: n.props.HydrateFallback, errorElement: n.props.errorElement, ErrorBoundary: n.props.ErrorBoundary, hasErrorBoundary: n.props.hasErrorBoundary === !0 || n.props.ErrorBoundary != null || n.props.errorElement != null, shouldRevalidate: n.props.shouldRevalidate, handle: n.props.handle, lazy: n.props.lazy }; n.props.children && (a.children = Mg(n.props.children, o)), r.push(a) }), r } var Qh = "get", Jh = "application/x-www-form-urlencoded"; function dm(e) { return typeof HTMLElement < "u" && e instanceof HTMLElement } function xA(e) { return dm(e) && e.tagName.toLowerCase() === "button" } function _A(e) { return dm(e) && e.tagName.toLowerCase() === "form" } function wA(e) { return dm(e) && e.tagName.toLowerCase() === "input" } function SA(e) { return !!(e.metaKey || e.altKey || e.ctrlKey || e.shiftKey) } function EA(e, t) { return e.button === 0 && (!t || t === "_self") && !SA(e) } var Ph = null; function CA() { if (Ph === null) try { new FormData(document.createElement("form"), 0), Ph = !1 } catch { Ph = !0 } return Ph } var RA = new Set(["application/x-www-form-urlencoded", "multipart/form-data", "text/plain"]); function b0(e) { return e != null && !RA.has(e) ? (fa(!1, `"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jh}"`), null) : e } function kA(e, t) { let r, n, s, o, a; if (_A(e)) { let c = e.getAttribute("action"); n = c ? jo(c, t) : null, r = e.getAttribute("method") || Qh, s = b0(e.getAttribute("enctype")) || Jh, o = new FormData(e) } else if (xA(e) || wA(e) && (e.type === "submit" || e.type === "image")) { let c = e.form; if (c == null) throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>'); let l = e.getAttribute("formaction") || c.getAttribute("action"); if (n = l ? jo(l, t) : null, r = e.getAttribute("formmethod") || c.getAttribute("method") || Qh, s = b0(e.getAttribute("formenctype")) || b0(c.getAttribute("enctype")) || Jh, o = new FormData(c, e), !CA()) { let { name: p, type: d, value: f } = e; if (d === "image") { let h = p ? `${p}.` : ""; o.append(`${h}x`, "0"), o.append(`${h}y`, "0") } else p && o.append(p, f) } } else { if (dm(e)) throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">'); r = Qh, n = null, s = Jh, a = e } return o && s === "text/plain" && (a = o, o = void 0), { action: n, method: r.toLowerCase(), encType: s, formData: o, body: a } } Object.getOwnPropertyNames(Object.prototype).sort().join("\0"); function cy(e, t) { if (e === !1 || e === null || typeof e > "u") throw new Error(t) } function TA(e, t, r, n) { let s = typeof e == "string" ? new URL(e, typeof window > "u" ? "server://singlefetch/" : window.location.origin) : e; return r ? s.pathname.endsWith("/") ? s.pathname = `${s.pathname}_.${n}` : s.pathname = `${s.pathname}.${n}` : s.pathname === "/" ? s.pathname = `_root.${n}` : t && jo(s.pathname, t) === "/" ? s.pathname = `${t.replace(/\/$/, "")}/_root.${n}` : s.pathname = `${s.pathname.replace(/\/$/, "")}.${n}`, s } async function AA(e, t) { if (e.id in t) return t[e.id]; try { let r = await ny(() => import(e.module), []); return t[e.id] = r, r } catch (r) { return console.error(`Error loading route module \`${e.module}\`, reloading page...`), console.error(r), window.__reactRouterContext && window.__reactRouterContext.isSpaMode, window.location.reload(), new Promise(() => { }) } } function PA(e) { return e != null && typeof e.page == "string" } function DA(e) { return e == null ? !1 : e.href == null ? e.rel === "preload" && typeof e.imageSrcSet == "string" && typeof e.imageSizes == "string" : typeof e.rel == "string" && typeof e.href == "string" } async function IA(e, t, r) { let n = await Promise.all(e.map(async s => { let o = t.routes[s.route.id]; if (o) { let a = await AA(o, r); return a.links ? a.links() : [] } return [] })); return LA(n.flat(1).filter(DA).filter(s => s.rel === "stylesheet" || s.rel === "preload").map(s => s.rel === "stylesheet" ? { ...s, rel: "prefetch", as: "style" } : { ...s, rel: "prefetch" })) } function j1(e, t, r, n, s, o) { let a = (l, p) => r[p] ? l.route.id !== r[p].route.id : !0, c = (l, p) => { var d; return r[p].pathname !== l.pathname || ((d = r[p].route.path) == null ? void 0 : d.endsWith("*")) && r[p].params["*"] !== l.params["*"] }; return o === "assets" ? t.filter((l, p) => a(l, p) || c(l, p)) : o === "data" ? t.filter((l, p) => { var f; let d = n.routes[l.route.id]; if (!d || !d.hasLoader) return !1; if (a(l, p) || c(l, p)) return !0; if (l.route.shouldRevalidate) { let h = l.route.shouldRevalidate({ currentUrl: new URL(s.pathname + s.search + s.hash, window.origin), currentParams: ((f = r[0]) == null ? void 0 : f.params) || {}, nextUrl: new URL(e, window.origin), nextParams: l.params, defaultShouldRevalidate: !0 }); if (typeof h == "boolean") return h } return !0 }) : [] } function jA(e, t, { includeHydrateFallback: r } = {}) { return OA(e.map(n => { let s = t.routes[n.route.id]; if (!s) return []; let o = [s.module]; return s.clientActionModule && (o = o.concat(s.clientActionModule)), s.clientLoaderModule && (o = o.concat(s.clientLoaderModule)), r && s.hydrateFallbackModule && (o = o.concat(s.hydrateFallbackModule)), s.imports && (o = o.concat(s.imports)), o }).flat(1)) } function OA(e) { return [...new Set(e)] } function MA(e) { let t = {}, r = Object.keys(e).sort(); for (let n of r) t[n] = e[n]; return t } function LA(e, t) { let r = new Set, n = new Set(t); return e.reduce((s, o) => { if (t && !PA(o) && o.as === "script" && o.href && n.has(o.href)) return s; let c = JSON.stringify(MA(o)); return r.has(c) || (r.add(c), s.push({ key: c, link: o })), s }, []) } function XS() { let e = J.useContext(Wd); return cy(e, "You must render this element inside a <DataRouterContext.Provider> element"), e } function NA() { let e = J.useContext(cm); return cy(e, "You must render this element inside a <DataRouterStateContext.Provider> element"), e } var dy = J.createContext(void 0); dy.displayName = "FrameworkContext"; function ZS() { let e = J.useContext(dy); return cy(e, "You must render this element inside a <HydratedRouter> element"), e } function BA(e, t) { let r = J.useContext(dy), [n, s] = J.useState(!1), [o, a] = J.useState(!1), { onFocus: c, onBlur: l, onMouseEnter: p, onMouseLeave: d, onTouchStart: f } = t, h = J.useRef(null); J.useEffect(() => { if (e === "render" && a(!0), e === "viewport") { let u = S => { S.forEach(R => { a(R.isIntersecting) }) }, g = new IntersectionObserver(u, { threshold: .5 }); return h.current && g.observe(h.current), () => { g.disconnect() } } }, [e]), J.useEffect(() => { if (n) { let u = setTimeout(() => { a(!0) }, 100); return () => { clearTimeout(u) } } }, [n]); let P = () => { s(!0) }, b = () => { s(!1), a(!1) }; return r ? e !== "intent" ? [o, h, {}] : [o, h, { onFocus: Nu(c, P), onBlur: Nu(l, b), onMouseEnter: Nu(p, P), onMouseLeave: Nu(d, b), onTouchStart: Nu(f, P) }] : [!1, h, {}] } function Nu(e, t) { return r => { e && e(r), r.defaultPrevented || t(r) } } function FA({ page: e, ...t }) { let { router: r } = XS(), n = J.useMemo(() => BS(r.routes, e, r.basename), [r.routes, e, r.basename]); return n ? J.createElement($A, { page: e, matches: n, ...t }) : null } function zA(e) { let { manifest: t, routeModules: r } = ZS(), [n, s] = J.useState([]); return J.useEffect(() => { let o = !1; return IA(e, t, r).then(a => { o || s(a) }), () => { o = !0 } }, [e, t, r]), n } function $A({ page: e, matches: t, ...r }) { let n = No(), { future: s, manifest: o, routeModules: a } = ZS(), { basename: c } = XS(), { loaderData: l, matches: p } = NA(), d = J.useMemo(() => j1(e, t, p, o, n, "data"), [e, t, p, o, n]), f = J.useMemo(() => j1(e, t, p, o, n, "assets"), [e, t, p, o, n]), h = J.useMemo(() => { if (e === n.pathname + n.search + n.hash) return []; let u = new Set, g = !1; if (t.forEach(R => { var v; let y = o.routes[R.route.id]; !y || !y.hasLoader || (!d.some(D => D.route.id === R.route.id) && R.route.id in l && ((v = a[R.route.id]) != null && v.shouldRevalidate) || y.hasClientLoader ? g = !0 : u.add(R.route.id)) }), u.size === 0) return []; let S = TA(e, c, s.unstable_trailingSlashAwareDataRequests, "data"); return g && u.size > 0 && S.searchParams.set("_routes", t.filter(R => u.has(R.route.id)).map(R => R.route.id).join(",")), [S.pathname + S.search] }, [c, s.unstable_trailingSlashAwareDataRequests, l, n, o, d, t, e, a]), P = J.useMemo(() => jA(f, o), [f, o]), b = zA(f); return J.createElement(J.Fragment, null, h.map(u => J.createElement("link", { key: u, rel: "prefetch", as: "fetch", href: u, ...r })), P.map(u => J.createElement("link", { key: u, rel: "modulepreload", href: u, ...r })), b.map(({ key: u, link: g }) => J.createElement("link", { key: u, nonce: r.nonce, ...g }))) } function UA(...e) { return t => { e.forEach(r => { typeof r == "function" ? r(t) : r != null && (r.current = t) }) } } var VA = typeof window < "u" && typeof window.document < "u" && typeof window.document.createElement < "u"; try { VA && (window.__reactRouterVersion = "7.12.0") } catch { } function WA({ basename: e, children: t, unstable_useTransitions: r, window: n }) { let s = J.useRef(); s.current == null && (s.current = ST({ window: n, v5Compat: !0 })); let o = s.current, [a, c] = J.useState({ action: o.action, location: o.location }), l = J.useCallback(p => { r === !1 ? c(p) : J.startTransition(() => c(p)) }, [r]); return J.useLayoutEffect(() => o.listen(l), [o, l]), J.createElement(yA, { basename: e, children: t, location: a.location, navigationType: a.action, navigator: o, unstable_useTransitions: r }) } var eE = /^(?:[a-z][a-z0-9+.-]*:|\/\/)/i, uy = J.forwardRef(function ({ onClick: t, discover: r = "render", prefetch: n = "none", relative: s, reloadDocument: o, replace: a, state: c, target: l, to: p, preventScrollReset: d, viewTransition: f, unstable_defaultShouldRevalidate: h, ...P }, b) { let { basename: u, unstable_useTransitions: g } = J.useContext(Hs), S = typeof p == "string" && eE.test(p), R = VS(p, u); p = R.to; let y = nA(p, { relative: s }), [v, D, M] = BA(n, P), W = KA(p, { replace: a, state: c, target: l, preventScrollReset: d, relative: s, viewTransition: f, unstable_defaultShouldRevalidate: h, unstable_useTransitions: g }); function I(_) { t && t(_), _.defaultPrevented || W(_) } let E = J.createElement("a", { ...P, ...M, href: R.absoluteURL || y, onClick: R.isExternal || o ? t : I, ref: UA(b, D), target: l, "data-discover": !S && r === "render" ? "true" : void 0 }); return v && !S ? J.createElement(J.Fragment, null, E, J.createElement(FA, { page: y })) : E }); uy.displayName = "Link"; var HA = J.forwardRef(function ({ "aria-current": t = "page", caseSensitive: r = !1, className: n = "", end: s = !1, style: o, to: a, viewTransition: c, children: l, ...p }, d) { let f = Lp(a, { relative: p.relative }), h = No(), P = J.useContext(cm), { navigator: b, basename: u } = J.useContext(Hs), g = P != null && ZA(f) && c === !0, S = b.encodeLocation ? b.encodeLocation(f).pathname : f.pathname, R = h.pathname, y = P && P.navigation && P.navigation.location ? P.navigation.location.pathname : null; r || (R = R.toLowerCase(), y = y ? y.toLowerCase() : null, S = S.toLowerCase()), y && u && (y = jo(y, u) || y); const v = S !== "/" && S.endsWith("/") ? S.length - 1 : S.length; let D = R === S || !s && R.startsWith(S) && R.charAt(v) === "/", M = y != null && (y === S || !s && y.startsWith(S) && y.charAt(S.length) === "/"), W = { isActive: D, isPending: M, isTransitioning: g }, I = D ? t : void 0, E; typeof n == "function" ? E = n(W) : E = [n, D ? "active" : null, M ? "pending" : null, g ? "transitioning" : null].filter(Boolean).join(" "); let _ = typeof o == "function" ? o(W) : o; return J.createElement(uy, { ...p, "aria-current": I, className: E, ref: d, style: _, to: a, viewTransition: c }, typeof l == "function" ? l(W) : l) }); HA.displayName = "NavLink"; var qA = J.forwardRef(({ discover: e = "render", fetcherKey: t, navigate: r, reloadDocument: n, replace: s, state: o, method: a = Qh, action: c, onSubmit: l, relative: p, preventScrollReset: d, viewTransition: f, unstable_defaultShouldRevalidate: h, ...P }, b) => { let { unstable_useTransitions: u } = J.useContext(Hs), g = JA(), S = XA(c, { relative: p }), R = a.toLowerCase() === "get" ? "get" : "post", y = typeof c == "string" && eE.test(c), v = D => { if (l && l(D), D.defaultPrevented) return; D.preventDefault(); let M = D.nativeEvent.submitter, W = (M == null ? void 0 : M.getAttribute("formmethod")) || a, I = () => g(M || D.currentTarget, { fetcherKey: t, method: W, navigate: r, replace: s, state: o, relative: p, preventScrollReset: d, viewTransition: f, unstable_defaultShouldRevalidate: h }); u && r !== !1 ? J.startTransition(() => I()) : I() }; return J.createElement("form", { ref: b, method: R, action: S, onSubmit: n ? l : v, ...P, "data-discover": !y && e === "render" ? "true" : void 0 }) }); qA.displayName = "Form"; function GA(e) { return `${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.` } function tE(e) { let t = J.useContext(Wd); return Un(t, GA(e)), t } function KA(e, { target: t, replace: r, state: n, preventScrollReset: s, relative: o, viewTransition: a, unstable_defaultShouldRevalidate: c, unstable_useTransitions: l } = {}) { let p = Rl(), d = No(), f = Lp(e, { relative: o }); return J.useCallback(h => { if (EA(h, t)) { h.preventDefault(); let P = r !== void 0 ? r : Ep(d) === Ep(f), b = () => p(e, { replace: P, state: n, preventScrollReset: s, relative: o, viewTransition: a, unstable_defaultShouldRevalidate: c }); l ? J.startTransition(() => b()) : b() } }, [d, p, f, r, n, t, e, s, o, a, c, l]) } var YA = 0, QA = () => `__${String(++YA)}__`; function JA() { let { router: e } = tE("useSubmit"), { basename: t } = J.useContext(Hs), r = fA(), n = e.fetch, s = e.navigate; return J.useCallback(async (o, a = {}) => { let { action: c, method: l, encType: p, formData: d, body: f } = kA(o, t); if (a.navigate === !1) { let h = a.fetcherKey || QA(); await n(h, r, a.action || c, { unstable_defaultShouldRevalidate: a.unstable_defaultShouldRevalidate, preventScrollReset: a.preventScrollReset, formData: d, body: f, formMethod: a.method || l, formEncType: a.encType || p, flushSync: a.flushSync }) } else await s(a.action || c, { unstable_defaultShouldRevalidate: a.unstable_defaultShouldRevalidate, preventScrollReset: a.preventScrollReset, formData: d, body: f, formMethod: a.method || l, formEncType: a.encType || p, replace: a.replace, state: a.state, fromRouteId: r, flushSync: a.flushSync, viewTransition: a.viewTransition }) }, [n, s, t, r]) } function XA(e, { relative: t } = {}) { let { basename: r } = J.useContext(Hs), n = J.useContext(lo); Un(n, "useFormAction must be used inside a RouteContext"); let [s] = n.matches.slice(-1), o = { ...Lp(e || ".", { relative: t }) }, a = No(); if (e == null) { o.search = a.search; let c = new URLSearchParams(o.search), l = c.getAll("index"); if (l.some(d => d === "")) { c.delete("index"), l.filter(f => f).forEach(f => c.append("index", f)); let d = c.toString(); o.search = d ? `?${d}` : "" } } return (!e || e === ".") && s.route.index && (o.search = o.search ? o.search.replace(/^\?/, "?index&") : "?index"), r !== "/" && (o.pathname = o.pathname === "/" ? r : To([r, o.pathname])), Ep(o) } function ZA(e, { relative: t } = {}) { let r = J.useContext(HS); Un(r != null, "`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?"); let { basename: n } = tE("useViewTransitionState"), s = Lp(e, { relative: t }); if (!r.isTransitioning) return !1; let o = jo(r.currentLocation.pathname, n) || r.currentLocation.pathname, a = jo(r.nextLocation.pathname, n) || r.nextLocation.pathname; return jf(s.pathname, a) != null || jf(s.pathname, o) != null } const py = J.createContext({}); function hy(e) { const t = J.useRef(null); return t.current === null && (t.current = e()), t.current } const fy = typeof window < "u", rE = fy ? J.useLayoutEffect : J.useEffect, um = J.createContext(null); function my(e, t) { e.indexOf(t) === -1 && e.push(t) } function gy(e, t) { const r = e.indexOf(t); r > -1 && e.splice(r, 1) } const oo = (e, t, r) => r > t ? t : r < e ? e : r; function O1(e, t) { return t ? `${e}. For more information and steps for solving, visit https://motion.dev/troubleshooting/${t}` : e } let Np = () => { }, Ec = () => { }; var E_; typeof process < "u" && ((E_ = process.env) == null ? void 0 : E_.NODE_ENV) !== "production" && (Np = (e, t, r) => { !e && typeof console < "u" && console.warn(O1(t, r)) }, Ec = (e, t, r) => { if (!e) throw new Error(O1(t, r)) }); const Oo = {}, nE = e => /^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e); function iE(e) { return typeof e == "object" && e !== null } const sE = e => /^0[^.\s]+$/u.test(e); function vy(e) { let t; return () => (t === void 0 && (t = e()), t) } const da = e => e, e4 = (e, t) => r => t(e(r)), Bp = (...e) => e.reduce(e4), Cp = (e, t, r) => { const n = t - e; return n === 0 ? 1 : (r - e) / n }; class yy { constructor() { this.subscriptions = [] } add(t) { return my(this.subscriptions, t), () => gy(this.subscriptions, t) } notify(t, r, n) { const s = this.subscriptions.length; if (s) if (s === 1) this.subscriptions[0](t, r, n); else for (let o = 0; o < s; o++) { const a = this.subscriptions[o]; a && a(t, r, n) } } getSize() { return this.subscriptions.length } clear() { this.subscriptions.length = 0 } } const so = e => e * 1e3, la = e => e / 1e3; function aE(e, t) { return t ? e * (1e3 / t) : 0 } const oE = (e, t, r) => (((1 - 3 * r + 3 * t) * e + (3 * r - 6 * t)) * e + 3 * t) * e, t4 = 1e-7, r4 = 12; function n4(e, t, r, n, s) { let o, a, c = 0; do a = t + (r - t) / 2, o = oE(a, n, s) - e, o > 0 ? r = a : t = a; while (Math.abs(o) > t4 && ++c < r4); return a } function Fp(e, t, r, n) { if (e === t && r === n) return da; const s = o => n4(o, 0, 1, e, r); return o => o === 0 || o === 1 ? o : oE(s(o), t, n) } const lE = e => t => t <= .5 ? e(2 * t) / 2 : (2 - e(2 * (1 - t))) / 2, cE = e => t => 1 - e(1 - t), dE = Fp(.33, 1.53, .69, .99), by = cE(dE), uE = lE(by), pE = e => (e *= 2) < 1 ? .5 * by(e) : .5 * (2 - Math.pow(2, -10 * (e - 1))), xy = e => 1 - Math.sin(Math.acos(e)), hE = cE(xy), fE = lE(xy), i4 = Fp(.42, 0, 1, 1), s4 = Fp(0, 0, .58, 1), mE = Fp(.42, 0, .58, 1), a4 = e => Array.isArray(e) && typeof e[0] != "number", gE = e => Array.isArray(e) && typeof e[0] == "number", M1 = { linear: da, easeIn: i4, easeInOut: mE, easeOut: s4, circIn: xy, circInOut: fE, circOut: hE, backIn: by, backInOut: uE, backOut: dE, anticipate: pE }, o4 = e => typeof e == "string", L1 = e => { if (gE(e)) { Ec(e.length === 4, "Cubic bezier arrays must contain four numerical values.", "cubic-bezier-length"); const [t, r, n, s] = e; return Fp(t, r, n, s) } else if (o4(e)) return Ec(M1[e] !== void 0, `Invalid easing type '${e}'`, "invalid-easing-type"), M1[e]; return e }, Dh = ["setup", "read", "resolveKeyframes", "preUpdate", "update", "preRender", "render", "postRender"], N1 = { value: null, addProjectionMetrics: null }; function l4(e, t) { let r = new Set, n = new Set, s = !1, o = !1; const a = new WeakSet; let c = { delta: 0, timestamp: 0, isProcessing: !1 }, l = 0; function p(f) { a.has(f) && (d.schedule(f), e()), l++, f(c) } const d = { schedule: (f, h = !1, P = !1) => { const u = P && s ? r : n; return h && a.add(f), u.has(f) || u.add(f), f }, cancel: f => { n.delete(f), a.delete(f) }, process: f => { if (c = f, s) { o = !0; return } s = !0, [r, n] = [n, r], r.forEach(p), t && N1.value && N1.value.frameloop[t].push(l), l = 0, r.clear(), s = !1, o && (o = !1, d.process(f)) } }; return d } const c4 = 40; function vE(e, t) { let r = !1, n = !0; const s = { delta: 0, timestamp: 0, isProcessing: !1 }, o = () => r = !0, a = Dh.reduce((y, v) => (y[v] = l4(o, t ? v : void 0), y), {}), { setup: c, read: l, resolveKeyframes: p, preUpdate: d, update: f, preRender: h, render: P, postRender: b } = a, u = () => { const y = Oo.useManualTiming ? s.timestamp : performance.now(); r = !1, Oo.useManualTiming || (s.delta = n ? 1e3 / 60 : Math.max(Math.min(y - s.timestamp, c4), 1)), s.timestamp = y, s.isProcessing = !0, c.process(s), l.process(s), p.process(s), d.process(s), f.process(s), h.process(s), P.process(s), b.process(s), s.isProcessing = !1, r && t && (n = !1, e(u)) }, g = () => { r = !0, n = !0, s.isProcessing || e(u) }; return { schedule: Dh.reduce((y, v) => { const D = a[v]; return y[v] = (M, W = !1, I = !1) => (r || g(), D.schedule(M, W, I)), y }, {}), cancel: y => { for (let v = 0; v < Dh.length; v++)a[Dh[v]].cancel(y) }, state: s, steps: a } } const { schedule: Fn, cancel: _l, state: Bi, steps: x0 } = vE(typeof requestAnimationFrame < "u" ? requestAnimationFrame : da, !0); let Xh; function d4() { Xh = void 0 } const cs = { now: () => (Xh === void 0 && cs.set(Bi.isProcessing || Oo.useManualTiming ? Bi.timestamp : performance.now()), Xh), set: e => { Xh = e, queueMicrotask(d4) } }, yE = e => t => typeof t == "string" && t.startsWith(e), bE = yE("--"), u4 = yE("var(--"), _y = e => u4(e) ? p4.test(e.split("/*")[0].trim()) : !1, p4 = /var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu; function B1(e) { return typeof e != "string" ? !1 : e.split("/*")[0].includes("var(--") } const qd = { test: e => typeof e == "number", parse: parseFloat, transform: e => e }, Rp = { ...qd, transform: e => oo(0, 1, e) }, Ih = { ...qd, default: 1 }, np = e => Math.round(e * 1e5) / 1e5, wy = /-?(?:\d+(?:\.\d+)?|\.\d+)/gu; function h4(e) { return e == null } const f4 = /^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu, Sy = (e, t) => r => !!(typeof r == "string" && f4.test(r) && r.startsWith(e) || t && !h4(r) && Object.prototype.hasOwnProperty.call(r, t)), xE = (e, t, r) => n => { if (typeof n != "string") return n; const [s, o, a, c] = n.match(wy); return { [e]: parseFloat(s), [t]: parseFloat(o), [r]: parseFloat(a), alpha: c !== void 0 ? parseFloat(c) : 1 } }, m4 = e => oo(0, 255, e), _0 = { ...qd, transform: e => Math.round(m4(e)) }, hc = { test: Sy("rgb", "red"), parse: xE("red", "green", "blue"), transform: ({ red: e, green: t, blue: r, alpha: n = 1 }) => "rgba(" + _0.transform(e) + ", " + _0.transform(t) + ", " + _0.transform(r) + ", " + np(Rp.transform(n)) + ")" }; function g4(e) { let t = "", r = "", n = "", s = ""; return e.length > 5 ? (t = e.substring(1, 3), r = e.substring(3, 5), n = e.substring(5, 7), s = e.substring(7, 9)) : (t = e.substring(1, 2), r = e.substring(2, 3), n = e.substring(3, 4), s = e.substring(4, 5), t += t, r += r, n += n, s += s), { red: parseInt(t, 16), green: parseInt(r, 16), blue: parseInt(n, 16), alpha: s ? parseInt(s, 16) / 255 : 1 } } const Lg = { test: Sy("#"), parse: g4, transform: hc.transform }, zp = e => ({ test: t => typeof t == "string" && t.endsWith(e) && t.split(" ").length === 1, parse: parseFloat, transform: t => `${t}${e}` }), nl = zp("deg"), ao = zp("%"), Vt = zp("px"), v4 = zp("vh"), y4 = zp("vw"), F1 = (() => ({ ...ao, parse: e => ao.parse(e) / 100, transform: e => ao.transform(e * 100) }))(), fd = { test: Sy("hsl", "hue"), parse: xE("hue", "saturation", "lightness"), transform: ({ hue: e, saturation: t, lightness: r, alpha: n = 1 }) => "hsla(" + Math.round(e) + ", " + ao.transform(np(t)) + ", " + ao.transform(np(r)) + ", " + np(Rp.transform(n)) + ")" }, vi = { test: e => hc.test(e) || Lg.test(e) || fd.test(e), parse: e => hc.test(e) ? hc.parse(e) : fd.test(e) ? fd.parse(e) : Lg.parse(e), transform: e => typeof e == "string" ? e : e.hasOwnProperty("red") ? hc.transform(e) : fd.transform(e), getAnimatableNone: e => { const t = vi.parse(e); return t.alpha = 0, vi.transform(t) } }, b4 = /(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu; function x4(e) { var t, r; return isNaN(e) && typeof e == "string" && (((t = e.match(wy)) == null ? void 0 : t.length) || 0) + (((r = e.match(b4)) == null ? void 0 : r.length) || 0) > 0 } const _E = "number", wE = "color", _4 = "var", w4 = "var(", z1 = "${}", S4 = /var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu; function kp(e) { const t = e.toString(), r = [], n = { color: [], number: [], var: [] }, s = []; let o = 0; const c = t.replace(S4, l => (vi.test(l) ? (n.color.push(o), s.push(wE), r.push(vi.parse(l))) : l.startsWith(w4) ? (n.var.push(o), s.push(_4), r.push(l)) : (n.number.push(o), s.push(_E), r.push(parseFloat(l))), ++o, z1)).split(z1); return { values: r, split: c, indexes: n, types: s } } function SE(e) { return kp(e).values } function EE(e) { const { split: t, types: r } = kp(e), n = t.length; return s => { let o = ""; for (let a = 0; a < n; a++)if (o += t[a], s[a] !== void 0) { const c = r[a]; c === _E ? o += np(s[a]) : c === wE ? o += vi.transform(s[a]) : o += s[a] } return o } } const E4 = e => typeof e == "number" ? 0 : vi.test(e) ? vi.getAnimatableNone(e) : e; function C4(e) { const t = SE(e); return EE(e)(t.map(E4)) } const wl = { test: x4, parse: SE, createTransformer: EE, getAnimatableNone: C4 }; function w0(e, t, r) { return r < 0 && (r += 1), r > 1 && (r -= 1), r < 1 / 6 ? e + (t - e) * 6 * r : r < 1 / 2 ? t : r < 2 / 3 ? e + (t - e) * (2 / 3 - r) * 6 : e } function R4({ hue: e, saturation: t, lightness: r, alpha: n }) { e /= 360, t /= 100, r /= 100; let s = 0, o = 0, a = 0; if (!t) s = o = a = r; else { const c = r < .5 ? r * (1 + t) : r + t - r * t, l = 2 * r - c; s = w0(l, c, e + 1 / 3), o = w0(l, c, e), a = w0(l, c, e - 1 / 3) } return { red: Math.round(s * 255), green: Math.round(o * 255), blue: Math.round(a * 255), alpha: n } } function Of(e, t) { return r => r > 0 ? t : e } const Qn = (e, t, r) => e + (t - e) * r, S0 = (e, t, r) => { const n = e * e, s = r * (t * t - n) + n; return s < 0 ? 0 : Math.sqrt(s) }, k4 = [Lg, hc, fd], T4 = e => k4.find(t => t.test(e)); function $1(e) { const t = T4(e); if (Np(!!t, `'${e}' is not an animatable color. Use the equivalent color code instead.`, "color-not-animatable"), !t) return !1; let r = t.parse(e); return t === fd && (r = R4(r)), r } const U1 = (e, t) => { const r = $1(e), n = $1(t); if (!r || !n) return Of(e, t); const s = { ...r }; return o => (s.red = S0(r.red, n.red, o), s.green = S0(r.green, n.green, o), s.blue = S0(r.blue, n.blue, o), s.alpha = Qn(r.alpha, n.alpha, o), hc.transform(s)) }, Ng = new Set(["none", "hidden"]); function A4(e, t) { return Ng.has(e) ? r => r <= 0 ? e : t : r => r >= 1 ? t : e } function P4(e, t) { return r => Qn(e, t, r) } function Ey(e) { return typeof e == "number" ? P4 : typeof e == "string" ? _y(e) ? Of : vi.test(e) ? U1 : j4 : Array.isArray(e) ? CE : typeof e == "object" ? vi.test(e) ? U1 : D4 : Of } function CE(e, t) { const r = [...e], n = r.length, s = e.map((o, a) => Ey(o)(o, t[a])); return o => { for (let a = 0; a < n; a++)r[a] = s[a](o); return r } } function D4(e, t) { const r = { ...e, ...t }, n = {}; for (const s in r) e[s] !== void 0 && t[s] !== void 0 && (n[s] = Ey(e[s])(e[s], t[s])); return s => { for (const o in n) r[o] = n[o](s); return r } } function I4(e, t) { const r = [], n = { color: 0, var: 0, number: 0 }; for (let s = 0; s < t.values.length; s++) { const o = t.types[s], a = e.indexes[o][n[o]], c = e.values[a] ?? 0; r[s] = c, n[o]++ } return r } const j4 = (e, t) => { const r = wl.createTransformer(t), n = kp(e), s = kp(t); return n.indexes.var.length === s.indexes.var.length && n.indexes.color.length === s.indexes.color.length && n.indexes.number.length >= s.indexes.number.length ? Ng.has(e) && !s.values.length || Ng.has(t) && !n.values.length ? A4(e, t) : Bp(CE(I4(n, s), s.values), r) : (Np(!0, `Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`, "complex-values-different"), Of(e, t)) }; function RE(e, t, r) { return typeof e == "number" && typeof t == "number" && typeof r == "number" ? Qn(e, t, r) : Ey(e)(e, t) } const O4 = e => { const t = ({ timestamp: r }) => e(r); return { start: (r = !0) => Fn.update(t, r), stop: () => _l(t), now: () => Bi.isProcessing ? Bi.timestamp : cs.now() } }, kE = (e, t, r = 10) => { let n = ""; const s = Math.max(Math.round(t / r), 2); for (let o = 0; o < s; o++)n += Math.round(e(o / (s - 1)) * 1e4) / 1e4 + ", "; return `linear(${n.substring(0, n.length - 2)})` }, Mf = 2e4; function Cy(e) { let t = 0; const r = 50; let n = e.next(t); for (; !n.done && t < Mf;)t += r, n = e.next(t); return t >= Mf ? 1 / 0 : t } function M4(e, t = 100, r) { const n = r({ ...e, keyframes: [0, t] }), s = Math.min(Cy(n), Mf); return { type: "keyframes", ease: o => n.next(s * o).value / t, duration: la(s) } } const L4 = 5; function TE(e, t, r) { const n = Math.max(t - L4, 0); return aE(r - e(n), t - n) } const Kn = { stiffness: 100, damping: 10, mass: 1, velocity: 0, duration: 800, bounce: .3, visualDuration: .3, restSpeed: { granular: .01, default: 2 }, restDelta: { granular: .005, default: .5 }, minDuration: .01, maxDuration: 10, minDamping: .05, maxDamping: 1 }, E0 = .001; function N4({ duration: e = Kn.duration, bounce: t = Kn.bounce, velocity: r = Kn.velocity, mass: n = Kn.mass }) { let s, o; Np(e <= so(Kn.maxDuration), "Spring duration must be 10 seconds or less", "spring-duration-limit"); let a = 1 - t; a = oo(Kn.minDamping, Kn.maxDamping, a), e = oo(Kn.minDuration, Kn.maxDuration, la(e)), a < 1 ? (s = p => { const d = p * a, f = d * e, h = d - r, P = Bg(p, a), b = Math.exp(-f); return E0 - h / P * b }, o = p => { const f = p * a * e, h = f * r + r, P = Math.pow(a, 2) * Math.pow(p, 2) * e, b = Math.exp(-f), u = Bg(Math.pow(p, 2), a); return (-s(p) + E0 > 0 ? -1 : 1) * ((h - P) * b) / u }) : (s = p => { const d = Math.exp(-p * e), f = (p - r) * e + 1; return -E0 + d * f }, o = p => { const d = Math.exp(-p * e), f = (r - p) * (e * e); return d * f }); const c = 5 / e, l = F4(s, o, c); if (e = so(e), isNaN(l)) return { stiffness: Kn.stiffness, damping: Kn.damping, duration: e }; { const p = Math.pow(l, 2) * n; return { stiffness: p, damping: a * 2 * Math.sqrt(n * p), duration: e } } } const B4 = 12; function F4(e, t, r) { let n = r; for (let s = 1; s < B4; s++)n = n - e(n) / t(n); return n } function Bg(e, t) { return e * Math.sqrt(1 - t * t) } const z4 = ["duration", "bounce"], $4 = ["stiffness", "damping", "mass"]; function V1(e, t) { return t.some(r => e[r] !== void 0) } function U4(e) { let t = { velocity: Kn.velocity, stiffness: Kn.stiffness, damping: Kn.damping, mass: Kn.mass, isResolvedFromDuration: !1, ...e }; if (!V1(e, $4) && V1(e, z4)) if (e.visualDuration) { const r = e.visualDuration, n = 2 * Math.PI / (r * 1.2), s = n * n, o = 2 * oo(.05, 1, 1 - (e.bounce || 0)) * Math.sqrt(s); t = { ...t, mass: Kn.mass, stiffness: s, damping: o } } else { const r = N4(e); t = { ...t, ...r, mass: Kn.mass }, t.isResolvedFromDuration = !0 } return t } function Lf(e = Kn.visualDuration, t = Kn.bounce) { const r = typeof e != "object" ? { visualDuration: e, keyframes: [0, 1], bounce: t } : e; let { restSpeed: n, restDelta: s } = r; const o = r.keyframes[0], a = r.keyframes[r.keyframes.length - 1], c = { done: !1, value: o }, { stiffness: l, damping: p, mass: d, duration: f, velocity: h, isResolvedFromDuration: P } = U4({ ...r, velocity: -la(r.velocity || 0) }), b = h || 0, u = p / (2 * Math.sqrt(l * d)), g = a - o, S = la(Math.sqrt(l / d)), R = Math.abs(g) < 5; n || (n = R ? Kn.restSpeed.granular : Kn.restSpeed.default), s || (s = R ? Kn.restDelta.granular : Kn.restDelta.default); let y; if (u < 1) { const D = Bg(S, u); y = M => { const W = Math.exp(-u * S * M); return a - W * ((b + u * S * g) / D * Math.sin(D * M) + g * Math.cos(D * M)) } } else if (u === 1) y = D => a - Math.exp(-S * D) * (g + (b + S * g) * D); else { const D = S * Math.sqrt(u * u - 1); y = M => { const W = Math.exp(-u * S * M), I = Math.min(D * M, 300); return a - W * ((b + u * S * g) * Math.sinh(I) + D * g * Math.cosh(I)) / D } } const v = { calculatedDuration: P && f || null, next: D => { const M = y(D); if (P) c.done = D >= f; else { let W = D === 0 ? b : 0; u < 1 && (W = D === 0 ? so(b) : TE(y, D, M)); const I = Math.abs(W) <= n, E = Math.abs(a - M) <= s; c.done = I && E } return c.value = c.done ? a : M, c }, toString: () => { const D = Math.min(Cy(v), Mf), M = kE(W => v.next(D * W).value, D, 30); return D + "ms " + M }, toTransition: () => { } }; return v } Lf.applyToOptions = e => { const t = M4(e, 100, Lf); return e.ease = t.ease, e.duration = so(t.duration), e.type = "keyframes", e }; function Fg({ keyframes: e, velocity: t = 0, power: r = .8, timeConstant: n = 325, bounceDamping: s = 10, bounceStiffness: o = 500, modifyTarget: a, min: c, max: l, restDelta: p = .5, restSpeed: d }) { const f = e[0], h = { done: !1, value: f }, P = I => c !== void 0 && I < c || l !== void 0 && I > l, b = I => c === void 0 ? l : l === void 0 || Math.abs(c - I) < Math.abs(l - I) ? c : l; let u = r * t; const g = f + u, S = a === void 0 ? g : a(g); S !== g && (u = S - f); const R = I => -u * Math.exp(-I / n), y = I => S + R(I), v = I => { const E = R(I), _ = y(I); h.done = Math.abs(E) <= p, h.value = h.done ? S : _ }; let D, M; const W = I => { P(h.value) && (D = I, M = Lf({ keyframes: [h.value, b(h.value)], velocity: TE(y, I, h.value), damping: s, stiffness: o, restDelta: p, restSpeed: d })) }; return W(0), { calculatedDuration: null, next: I => { let E = !1; return !M && D === void 0 && (E = !0, v(I), W(I)), D !== void 0 && I >= D ? M.next(I - D) : (!E && v(I), h) } } } function V4(e, t, r) { const n = [], s = r || Oo.mix || RE, o = e.length - 1; for (let a = 0; a < o; a++) { let c = s(e[a], e[a + 1]); if (t) { const l = Array.isArray(t) ? t[a] || da : t; c = Bp(l, c) } n.push(c) } return n } function W4(e, t, { clamp: r = !0, ease: n, mixer: s } = {}) { const o = e.length; if (Ec(o === t.length, "Both input and output ranges must be the same length", "range-length"), o === 1) return () => t[0]; if (o === 2 && t[0] === t[1]) return () => t[1]; const a = e[0] === e[1]; e[0] > e[o - 1] && (e = [...e].reverse(), t = [...t].reverse()); const c = V4(t, n, s), l = c.length, p = d => { if (a && d < e[0]) return t[0]; let f = 0; if (l > 1) for (; f < e.length - 2 && !(d < e[f + 1]); f++); const h = Cp(e[f], e[f + 1], d); return c[f](h) }; return r ? d => p(oo(e[0], e[o - 1], d)) : p } function H4(e, t) { const r = e[e.length - 1]; for (let n = 1; n <= t; n++) { const s = Cp(0, t, n); e.push(Qn(r, 1, s)) } } function q4(e) { const t = [0]; return H4(t, e.length - 1), t } function G4(e, t) { return e.map(r => r * t) } function K4(e, t) { return e.map(() => t || mE).splice(0, e.length - 1) } function ip({ duration: e = 300, keyframes: t, times: r, ease: n = "easeInOut" }) { const s = a4(n) ? n.map(L1) : L1(n), o = { done: !1, value: t[0] }, a = G4(r && r.length === t.length ? r : q4(t), e), c = W4(a, t, { ease: Array.isArray(s) ? s : K4(t, s) }); return { calculatedDuration: e, next: l => (o.value = c(l), o.done = l >= e, o) } } const Y4 = e => e !== null; function Ry(e, { repeat: t, repeatType: r = "loop" }, n, s = 1) { const o = e.filter(Y4), c = s < 0 || t && r !== "loop" && t % 2 === 1 ? 0 : o.length - 1; return !c || n === void 0 ? o[c] : n } const Q4 = { decay: Fg, inertia: Fg, tween: ip, keyframes: ip, spring: Lf }; function AE(e) { typeof e.type == "string" && (e.type = Q4[e.type]) } class ky { constructor() { this.updateFinished() } get finished() { return this._finished } updateFinished() { this._finished = new Promise(t => { this.resolve = t }) } notifyFinished() { this.resolve() } then(t, r) { return this.finished.then(t, r) } } const J4 = e => e / 100; class Ty extends ky { constructor(t) { super(), this.state = "idle", this.startTime = null, this.isStopped = !1, this.currentTime = 0, this.holdTime = null, this.playbackSpeed = 1, this.stop = () => { var n, s; const { motionValue: r } = this.options; r && r.updatedAt !== cs.now() && this.tick(cs.now()), this.isStopped = !0, this.state !== "idle" && (this.teardown(), (s = (n = this.options).onStop) == null || s.call(n)) }, this.options = t, this.initAnimation(), this.play(), t.autoplay === !1 && this.pause() } initAnimation() { const { options: t } = this; AE(t); const { type: r = ip, repeat: n = 0, repeatDelay: s = 0, repeatType: o, velocity: a = 0 } = t; let { keyframes: c } = t; const l = r || ip; l !== ip && typeof c[0] != "number" && (this.mixKeyframes = Bp(J4, RE(c[0], c[1])), c = [0, 100]); const p = l({ ...t, keyframes: c }); o === "mirror" && (this.mirroredGenerator = l({ ...t, keyframes: [...c].reverse(), velocity: -a })), p.calculatedDuration === null && (p.calculatedDuration = Cy(p)); const { calculatedDuration: d } = p; this.calculatedDuration = d, this.resolvedDuration = d + s, this.totalDuration = this.resolvedDuration * (n + 1) - s, this.generator = p } updateTime(t) { const r = Math.round(t - this.startTime) * this.playbackSpeed; this.holdTime !== null ? this.currentTime = this.holdTime : this.currentTime = r } tick(t, r = !1) { const { generator: n, totalDuration: s, mixKeyframes: o, mirroredGenerator: a, resolvedDuration: c, calculatedDuration: l } = this; if (this.startTime === null) return n.next(0); const { delay: p = 0, keyframes: d, repeat: f, repeatType: h, repeatDelay: P, type: b, onUpdate: u, finalKeyframe: g } = this.options; this.speed > 0 ? this.startTime = Math.min(this.startTime, t) : this.speed < 0 && (this.startTime = Math.min(t - s / this.speed, this.startTime)), r ? this.currentTime = t : this.updateTime(t); const S = this.currentTime - p * (this.playbackSpeed >= 0 ? 1 : -1), R = this.playbackSpeed >= 0 ? S < 0 : S > s; this.currentTime = Math.max(S, 0), this.state === "finished" && this.holdTime === null && (this.currentTime = s); let y = this.currentTime, v = n; if (f) { const I = Math.min(this.currentTime, s) / c; let E = Math.floor(I), _ = I % 1; !_ && I >= 1 && (_ = 1), _ === 1 && E--, E = Math.min(E, f + 1), !!(E % 2) && (h === "reverse" ? (_ = 1 - _, P && (_ -= P / c)) : h === "mirror" && (v = a)), y = oo(0, 1, _) * c } const D = R ? { done: !1, value: d[0] } : v.next(y); o && (D.value = o(D.value)); let { done: M } = D; !R && l !== null && (M = this.playbackSpeed >= 0 ? this.currentTime >= s : this.currentTime <= 0); const W = this.holdTime === null && (this.state === "finished" || this.state === "running" && M); return W && b !== Fg && (D.value = Ry(d, this.options, g, this.speed)), u && u(D.value), W && this.finish(), D } then(t, r) { return this.finished.then(t, r) } get duration() { return la(this.calculatedDuration) } get iterationDuration() { const { delay: t = 0 } = this.options || {}; return this.duration + la(t) } get time() { return la(this.currentTime) } set time(t) { var r; t = so(t), this.currentTime = t, this.startTime === null || this.holdTime !== null || this.playbackSpeed === 0 ? this.holdTime = t : this.driver && (this.startTime = this.driver.now() - t / this.playbackSpeed), (r = this.driver) == null || r.start(!1) } get speed() { return this.playbackSpeed } set speed(t) { this.updateTime(cs.now()); const r = this.playbackSpeed !== t; this.playbackSpeed = t, r && (this.time = la(this.currentTime)) } play() { var s, o; if (this.isStopped) return; const { driver: t = O4, startTime: r } = this.options; this.driver || (this.driver = t(a => this.tick(a))), (o = (s = this.options).onPlay) == null || o.call(s); const n = this.driver.now(); this.state === "finished" ? (this.updateFinished(), this.startTime = n) : this.holdTime !== null ? this.startTime = n - this.holdTime : this.startTime || (this.startTime = r ?? n), this.state === "finished" && this.speed < 0 && (this.startTime += this.calculatedDuration), this.holdTime = null, this.state = "running", this.driver.start() } pause() { this.state = "paused", this.updateTime(cs.now()), this.holdTime = this.currentTime } complete() { this.state !== "running" && this.play(), this.state = "finished", this.holdTime = null } finish() { var t, r; this.notifyFinished(), this.teardown(), this.state = "finished", (r = (t = this.options).onComplete) == null || r.call(t) } cancel() { var t, r; this.holdTime = null, this.startTime = 0, this.tick(0), this.teardown(), (r = (t = this.options).onCancel) == null || r.call(t) } teardown() { this.state = "idle", this.stopDriver(), this.startTime = this.holdTime = null } stopDriver() { this.driver && (this.driver.stop(), this.driver = void 0) } sample(t) { return this.startTime = 0, this.tick(t, !0) } attachTimeline(t) { var r; return this.options.allowFlatten && (this.options.type = "keyframes", this.options.ease = "linear", this.initAnimation()), (r = this.driver) == null || r.stop(), t.observe(this) } } function X4(e) { for (let t = 1; t < e.length; t++)e[t] ?? (e[t] = e[t - 1]) } const fc = e => e * 180 / Math.PI, zg = e => { const t = fc(Math.atan2(e[1], e[0])); return $g(t) }, Z4 = { x: 4, y: 5, translateX: 4, translateY: 5, scaleX: 0, scaleY: 3, scale: e => (Math.abs(e[0]) + Math.abs(e[3])) / 2, rotate: zg, rotateZ: zg, skewX: e => fc(Math.atan(e[1])), skewY: e => fc(Math.atan(e[2])), skew: e => (Math.abs(e[1]) + Math.abs(e[2])) / 2 }, $g = e => (e = e % 360, e < 0 && (e += 360), e), W1 = zg, H1 = e => Math.sqrt(e[0] * e[0] + e[1] * e[1]), q1 = e => Math.sqrt(e[4] * e[4] + e[5] * e[5]), eP = { x: 12, y: 13, z: 14, translateX: 12, translateY: 13, translateZ: 14, scaleX: H1, scaleY: q1, scale: e => (H1(e) + q1(e)) / 2, rotateX: e => $g(fc(Math.atan2(e[6], e[5]))), rotateY: e => $g(fc(Math.atan2(-e[2], e[0]))), rotateZ: W1, rotate: W1, skewX: e => fc(Math.atan(e[4])), skewY: e => fc(Math.atan(e[1])), skew: e => (Math.abs(e[1]) + Math.abs(e[4])) / 2 }; function Ug(e) { return e.includes("scale") ? 1 : 0 } function Vg(e, t) { if (!e || e === "none") return Ug(t); const r = e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u); let n, s; if (r) n = eP, s = r; else { const c = e.match(/^matrix\(([-\d.e\s,]+)\)$/u); n = Z4, s = c } if (!s) return Ug(t); const o = n[t], a = s[1].split(",").map(rP); return typeof o == "function" ? o(a) : a[o] } const tP = (e, t) => { const { transform: r = "none" } = getComputedStyle(e); return Vg(r, t) }; function rP(e) { return parseFloat(e.trim()) } const Gd = ["transformPerspective", "x", "y", "z", "translateX", "translateY", "translateZ", "scale", "scaleX", "scaleY", "rotate", "rotateX", "rotateY", "rotateZ", "skew", "skewX", "skewY"], Kd = (() => new Set(Gd))(), G1 = e => e === qd || e === Vt, nP = new Set(["x", "y", "z"]), iP = Gd.filter(e => !nP.has(e)); function sP(e) { const t = []; return iP.forEach(r => { const n = e.getValue(r); n !== void 0 && (t.push([r, n.get()]), n.set(r.startsWith("scale") ? 1 : 0)) }), t } const dl = { width: ({ x: e }, { paddingLeft: t = "0", paddingRight: r = "0" }) => e.max - e.min - parseFloat(t) - parseFloat(r), height: ({ y: e }, { paddingTop: t = "0", paddingBottom: r = "0" }) => e.max - e.min - parseFloat(t) - parseFloat(r), top: (e, { top: t }) => parseFloat(t), left: (e, { left: t }) => parseFloat(t), bottom: ({ y: e }, { top: t }) => parseFloat(t) + (e.max - e.min), right: ({ x: e }, { left: t }) => parseFloat(t) + (e.max - e.min), x: (e, { transform: t }) => Vg(t, "x"), y: (e, { transform: t }) => Vg(t, "y") }; dl.translateX = dl.x; dl.translateY = dl.y; const yc = new Set; let Wg = !1, Hg = !1, qg = !1; function PE() { if (Hg) { const e = Array.from(yc).filter(n => n.needsMeasurement), t = new Set(e.map(n => n.element)), r = new Map; t.forEach(n => { const s = sP(n); s.length && (r.set(n, s), n.render()) }), e.forEach(n => n.measureInitialState()), t.forEach(n => { n.render(); const s = r.get(n); s && s.forEach(([o, a]) => { var c; (c = n.getValue(o)) == null || c.set(a) }) }), e.forEach(n => n.measureEndState()), e.forEach(n => { n.suspendedScrollY !== void 0 && window.scrollTo(0, n.suspendedScrollY) }) } Hg = !1, Wg = !1, yc.forEach(e => e.complete(qg)), yc.clear() } function DE() { yc.forEach(e => { e.readKeyframes(), e.needsMeasurement && (Hg = !0) }) } function aP() { qg = !0, DE(), PE(), qg = !1 } class Ay { constructor(t, r, n, s, o, a = !1) { this.state = "pending", this.isAsync = !1, this.needsMeasurement = !1, this.unresolvedKeyframes = [...t], this.onComplete = r, this.name = n, this.motionValue = s, this.element = o, this.isAsync = a } scheduleResolve() { this.state = "scheduled", this.isAsync ? (yc.add(this), Wg || (Wg = !0, Fn.read(DE), Fn.resolveKeyframes(PE))) : (this.readKeyframes(), this.complete()) } readKeyframes() { const { unresolvedKeyframes: t, name: r, element: n, motionValue: s } = this; if (t[0] === null) { const o = s == null ? void 0 : s.get(), a = t[t.length - 1]; if (o !== void 0) t[0] = o; else if (n && r) { const c = n.readValue(r, a); c != null && (t[0] = c) } t[0] === void 0 && (t[0] = a), s && o === void 0 && s.set(t[0]) } X4(t) } setFinalKeyframe() { } measureInitialState() { } renderEndStyles() { } measureEndState() { } complete(t = !1) { this.state = "complete", this.onComplete(this.unresolvedKeyframes, this.finalKeyframe, t), yc.delete(this) } cancel() { this.state === "scheduled" && (yc.delete(this), this.state = "pending") } resume() { this.state === "pending" && this.scheduleResolve() } } const oP = e => e.startsWith("--"); function lP(e, t, r) { oP(t) ? e.style.setProperty(t, r) : e.style[t] = r } const cP = vy(() => window.ScrollTimeline !== void 0), dP = {}; function uP(e, t) { const r = vy(e); return () => dP[t] ?? r() } const IE = uP(() => { try { document.createElement("div").animate({ opacity: 0 }, { easing: "linear(0, 1)" }) } catch { return !1 } return !0 }, "linearEasing"), qu = ([e, t, r, n]) => `cubic-bezier(${e}, ${t}, ${r}, ${n})`, K1 = { linear: "linear", ease: "ease", easeIn: "ease-in", easeOut: "ease-out", easeInOut: "ease-in-out", circIn: qu([0, .65, .55, 1]), circOut: qu([.55, 0, 1, .45]), backIn: qu([.31, .01, .66, -.59]), backOut: qu([.33, 1.53, .69, .99]) }; function jE(e, t) { if (e) return typeof e == "function" ? IE() ? kE(e, t) : "ease-out" : gE(e) ? qu(e) : Array.isArray(e) ? e.map(r => jE(r, t) || K1.easeOut) : K1[e] } function pP(e, t, r, { delay: n = 0, duration: s = 300, repeat: o = 0, repeatType: a = "loop", ease: c = "easeOut", times: l } = {}, p = void 0) { const d = { [t]: r }; l && (d.offset = l); const f = jE(c, s); Array.isArray(f) && (d.easing = f); const h = { delay: n, duration: s, easing: Array.isArray(f) ? "linear" : f, fill: "both", iterations: o + 1, direction: a === "reverse" ? "alternate" : "normal" }; return p && (h.pseudoElement = p), e.animate(d, h) } function OE(e) { return typeof e == "function" && "applyToOptions" in e } function hP({ type: e, ...t }) { return OE(e) && IE() ? e.applyToOptions(t) : (t.duration ?? (t.duration = 300), t.ease ?? (t.ease = "easeOut"), t) } class fP extends ky { constructor(t) { if (super(), this.finishedTime = null, this.isStopped = !1, this.manualStartTime = null, !t) return; const { element: r, name: n, keyframes: s, pseudoElement: o, allowFlatten: a = !1, finalKeyframe: c, onComplete: l } = t; this.isPseudoElement = !!o, this.allowFlatten = a, this.options = t, Ec(typeof t.type != "string", `Mini animate() doesn't support "type" as a string.`, "mini-spring"); const p = hP(t); this.animation = pP(r, n, s, p, o), p.autoplay === !1 && this.animation.pause(), this.animation.onfinish = () => { if (this.finishedTime = this.time, !o) { const d = Ry(s, this.options, c, this.speed); this.updateMotionValue ? this.updateMotionValue(d) : lP(r, n, d), this.animation.cancel() } l == null || l(), this.notifyFinished() } } play() { this.isStopped || (this.manualStartTime = null, this.animation.play(), this.state === "finished" && this.updateFinished()) } pause() { this.animation.pause() } complete() { var t, r; (r = (t = this.animation).finish) == null || r.call(t) } cancel() { try { this.animation.cancel() } catch { } } stop() { if (this.isStopped) return; this.isStopped = !0; const { state: t } = this; t === "idle" || t === "finished" || (this.updateMotionValue ? this.updateMotionValue() : this.commitStyles(), this.isPseudoElement || this.cancel()) } commitStyles() { var t, r; this.isPseudoElement || (r = (t = this.animation).commitStyles) == null || r.call(t) } get duration() { var r, n; const t = ((n = (r = this.animation.effect) == null ? void 0 : r.getComputedTiming) == null ? void 0 : n.call(r).duration) || 0; return la(Number(t)) } get iterationDuration() { const { delay: t = 0 } = this.options || {}; return this.duration + la(t) } get time() { return la(Number(this.animation.currentTime) || 0) } set time(t) { this.manualStartTime = null, this.finishedTime = null, this.animation.currentTime = so(t) } get speed() { return this.animation.playbackRate } set speed(t) { t < 0 && (this.finishedTime = null), this.animation.playbackRate = t } get state() { return this.finishedTime !== null ? "finished" : this.animation.playState } get startTime() { return this.manualStartTime ?? Number(this.animation.startTime) } set startTime(t) { this.manualStartTime = this.animation.startTime = t } attachTimeline({ timeline: t, observe: r }) { var n; return this.allowFlatten && ((n = this.animation.effect) == null || n.updateTiming({ easing: "linear" })), this.animation.onfinish = null, t && cP() ? (this.animation.timeline = t, da) : r(this) } } const ME = { anticipate: pE, backInOut: uE, circInOut: fE }; function mP(e) { return e in ME } function gP(e) { typeof e.ease == "string" && mP(e.ease) && (e.ease = ME[e.ease]) } const C0 = 10; class vP extends fP { constructor(t) { gP(t), AE(t), super(t), t.startTime !== void 0 && (this.startTime = t.startTime), this.options = t } updateMotionValue(t) { const { motionValue: r, onUpdate: n, onComplete: s, element: o, ...a } = this.options; if (!r) return; if (t !== void 0) { r.set(t); return } const c = new Ty({ ...a, autoplay: !1 }), l = Math.max(C0, cs.now() - this.startTime), p = oo(0, C0, l - C0); r.setWithVelocity(c.sample(Math.max(0, l - p)).value, c.sample(l).value, p), c.stop() } } const Y1 = (e, t) => t === "zIndex" ? !1 : !!(typeof e == "number" || Array.isArray(e) || typeof e == "string" && (wl.test(e) || e === "0") && !e.startsWith("url(")); function yP(e) { const t = e[0]; if (e.length === 1) return !0; for (let r = 0; r < e.length; r++)if (e[r] !== t) return !0 } function bP(e, t, r, n) { const s = e[0]; if (s === null) return !1; if (t === "display" || t === "visibility") return !0; const o = e[e.length - 1], a = Y1(s, t), c = Y1(o, t); return Np(a === c, `You are trying to animate ${t} from "${s}" to "${o}". "${a ? o : s}" is not an animatable value.`, "value-not-animatable"), !a || !c ? !1 : yP(e) || (r === "spring" || OE(r)) && n } function Gg(e) { e.duration = 0, e.type = "keyframes" } const xP = new Set(["opacity", "clipPath", "filter", "transform"]), _P = vy(() => Object.hasOwnProperty.call(Element.prototype, "animate")); function wP(e) { var d; const { motionValue: t, name: r, repeatDelay: n, repeatType: s, damping: o, type: a } = e; if (!(((d = t == null ? void 0 : t.owner) == null ? void 0 : d.current) instanceof HTMLElement)) return !1; const { onUpdate: l, transformTemplate: p } = t.owner.getProps(); return _P() && r && xP.has(r) && (r !== "transform" || !p) && !l && !n && s !== "mirror" && o !== 0 && a !== "inertia" } const SP = 40; class EP extends ky { constructor({ autoplay: t = !0, delay: r = 0, type: n = "keyframes", repeat: s = 0, repeatDelay: o = 0, repeatType: a = "loop", keyframes: c, name: l, motionValue: p, element: d, ...f }) { var b; super(), this.stop = () => { var u, g; this._animation && (this._animation.stop(), (u = this.stopTimeline) == null || u.call(this)), (g = this.keyframeResolver) == null || g.cancel() }, this.createdAt = cs.now(); const h = { autoplay: t, delay: r, type: n, repeat: s, repeatDelay: o, repeatType: a, name: l, motionValue: p, element: d, ...f }, P = (d == null ? void 0 : d.KeyframeResolver) || Ay; this.keyframeResolver = new P(c, (u, g, S) => this.onKeyframesResolved(u, g, h, !S), l, p, d), (b = this.keyframeResolver) == null || b.scheduleResolve() } onKeyframesResolved(t, r, n, s) { this.keyframeResolver = void 0; const { name: o, type: a, velocity: c, delay: l, isHandoff: p, onUpdate: d } = n; this.resolvedAt = cs.now(), bP(t, o, a, c) || ((Oo.instantAnimations || !l) && (d == null || d(Ry(t, n, r))), t[0] = t[t.length - 1], Gg(n), n.repeat = 0); const h = { startTime: s ? this.resolvedAt ? this.resolvedAt - this.createdAt > SP ? this.resolvedAt : this.createdAt : this.createdAt : void 0, finalKeyframe: r, ...n, keyframes: t }, P = !p && wP(h) ? new vP({ ...h, element: h.motionValue.owner.current }) : new Ty(h); P.finished.then(() => this.notifyFinished()).catch(da), this.pendingTimeline && (this.stopTimeline = P.attachTimeline(this.pendingTimeline), this.pendingTimeline = void 0), this._animation = P } get finished() { return this._animation ? this.animation.finished : this._finished } then(t, r) { return this.finished.finally(t).then(() => { }) } get animation() { var t; return this._animation || ((t = this.keyframeResolver) == null || t.resume(), aP()), this._animation } get duration() { return this.animation.duration } get iterationDuration() { return this.animation.iterationDuration } get time() { return this.animation.time } set time(t) { this.animation.time = t } get speed() { return this.animation.speed } get state() { return this.animation.state } set speed(t) { this.animation.speed = t } get startTime() { return this.animation.startTime } attachTimeline(t) { return this._animation ? this.stopTimeline = this.animation.attachTimeline(t) : this.pendingTimeline = t, () => this.stop() } play() { this.animation.play() } pause() { this.animation.pause() } complete() { this.animation.complete() } cancel() { var t; this._animation && this.animation.cancel(), (t = this.keyframeResolver) == null || t.cancel() } } const CP = /^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u; function RP(e) { const t = CP.exec(e); if (!t) return [,]; const [, r, n, s] = t; return [`--${r ?? n}`, s] } const kP = 4; function LE(e, t, r = 1) { Ec(r <= kP, `Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`, "max-css-var-depth"); const [n, s] = RP(e); if (!n) return; const o = window.getComputedStyle(t).getPropertyValue(n); if (o) { const a = o.trim(); return nE(a) ? parseFloat(a) : a } return _y(s) ? LE(s, t, r + 1) : s } function Py(e, t) { return (e == null ? void 0 : e[t]) ?? (e == null ? void 0 : e.default) ?? e } const NE = new Set(["width", "height", "top", "left", "right", "bottom", ...Gd]), TP = { test: e => e === "auto", parse: e => e }, BE = e => t => t.test(e), FE = [qd, Vt, ao, nl, y4, v4, TP], Q1 = e => FE.find(BE(e)); function AP(e) { return typeof e == "number" ? e === 0 : e !== null ? e === "none" || e === "0" || sE(e) : !0 } const PP = new Set(["brightness", "contrast", "saturate", "opacity"]); function DP(e) { const [t, r] = e.slice(0, -1).split("("); if (t === "drop-shadow") return e; const [n] = r.match(wy) || []; if (!n) return e; const s = r.replace(n, ""); let o = PP.has(t) ? 1 : 0; return n !== r && (o *= 100), t + "(" + o + s + ")" } const IP = /\b([a-z-]*)\(.*?\)/gu, Kg = { ...wl, getAnimatableNone: e => { const t = e.match(IP); return t ? t.map(DP).join(" ") : e } }, J1 = { ...qd, transform: Math.round }, jP = { rotate: nl, rotateX: nl, rotateY: nl, rotateZ: nl, scale: Ih, scaleX: Ih, scaleY: Ih, scaleZ: Ih, skew: nl, skewX: nl, skewY: nl, distance: Vt, translateX: Vt, translateY: Vt, translateZ: Vt, x: Vt, y: Vt, z: Vt, perspective: Vt, transformPerspective: Vt, opacity: Rp, originX: F1, originY: F1, originZ: Vt }, Dy = { borderWidth: Vt, borderTopWidth: Vt, borderRightWidth: Vt, borderBottomWidth: Vt, borderLeftWidth: Vt, borderRadius: Vt, radius: Vt, borderTopLeftRadius: Vt, borderTopRightRadius: Vt, borderBottomRightRadius: Vt, borderBottomLeftRadius: Vt, width: Vt, maxWidth: Vt, height: Vt, maxHeight: Vt, top: Vt, right: Vt, bottom: Vt, left: Vt, inset: Vt, insetBlock: Vt, insetBlockStart: Vt, insetBlockEnd: Vt, insetInline: Vt, insetInlineStart: Vt, insetInlineEnd: Vt, padding: Vt, paddingTop: Vt, paddingRight: Vt, paddingBottom: Vt, paddingLeft: Vt, paddingBlock: Vt, paddingBlockStart: Vt, paddingBlockEnd: Vt, paddingInline: Vt, paddingInlineStart: Vt, paddingInlineEnd: Vt, margin: Vt, marginTop: Vt, marginRight: Vt, marginBottom: Vt, marginLeft: Vt, marginBlock: Vt, marginBlockStart: Vt, marginBlockEnd: Vt, marginInline: Vt, marginInlineStart: Vt, marginInlineEnd: Vt, backgroundPositionX: Vt, backgroundPositionY: Vt, ...jP, zIndex: J1, fillOpacity: Rp, strokeOpacity: Rp, numOctaves: J1 }, OP = { ...Dy, color: vi, backgroundColor: vi, outlineColor: vi, fill: vi, stroke: vi, borderColor: vi, borderTopColor: vi, borderRightColor: vi, borderBottomColor: vi, borderLeftColor: vi, filter: Kg, WebkitFilter: Kg }, zE = e => OP[e]; function $E(e, t) { let r = zE(e); return r !== Kg && (r = wl), r.getAnimatableNone ? r.getAnimatableNone(t) : void 0 } const MP = new Set(["auto", "none", "0"]); function LP(e, t, r) { let n = 0, s; for (; n < e.length && !s;) { const o = e[n]; typeof o == "string" && !MP.has(o) && kp(o).values.length && (s = e[n]), n++ } if (s && r) for (const o of t) e[o] = $E(r, s) } class NP extends Ay { constructor(t, r, n, s, o) { super(t, r, n, s, o, !0) } readKeyframes() { const { unresolvedKeyframes: t, element: r, name: n } = this; if (!r || !r.current) return; super.readKeyframes(); for (let d = 0; d < t.length; d++) { let f = t[d]; if (typeof f == "string" && (f = f.trim(), _y(f))) { const h = LE(f, r.current); h !== void 0 && (t[d] = h), d === t.length - 1 && (this.finalKeyframe = f) } } if (this.resolveNoneKeyframes(), !NE.has(n) || t.length !== 2) return; const [s, o] = t, a = Q1(s), c = Q1(o), l = B1(s), p = B1(o); if (l !== p && dl[n]) { this.needsMeasurement = !0; return } if (a !== c) if (G1(a) && G1(c)) for (let d = 0; d < t.length; d++) { const f = t[d]; typeof f == "string" && (t[d] = parseFloat(f)) } else dl[n] && (this.needsMeasurement = !0) } resolveNoneKeyframes() { const { unresolvedKeyframes: t, name: r } = this, n = []; for (let s = 0; s < t.length; s++)(t[s] === null || AP(t[s])) && n.push(s); n.length && LP(t, n, r) } measureInitialState() { const { element: t, unresolvedKeyframes: r, name: n } = this; if (!t || !t.current) return; n === "height" && (this.suspendedScrollY = window.pageYOffset), this.measuredOrigin = dl[n](t.measureViewportBox(), window.getComputedStyle(t.current)), r[0] = this.measuredOrigin; const s = r[r.length - 1]; s !== void 0 && t.getValue(n, s).jump(s, !1) } measureEndState() { var c; const { element: t, name: r, unresolvedKeyframes: n } = this; if (!t || !t.current) return; const s = t.getValue(r); s && s.jump(this.measuredOrigin, !1); const o = n.length - 1, a = n[o]; n[o] = dl[r](t.measureViewportBox(), window.getComputedStyle(t.current)), a !== null && this.finalKeyframe === void 0 && (this.finalKeyframe = a), (c = this.removedTransforms) != null && c.length && this.removedTransforms.forEach(([l, p]) => { t.getValue(l).set(p) }), this.resolveNoneKeyframes() } } function BP(e, t, r) { if (e instanceof EventTarget) return [e]; if (typeof e == "string") { let n = document; t && (n = t.current); const s = (r == null ? void 0 : r[e]) ?? n.querySelectorAll(e); return s ? Array.from(s) : [] } return Array.from(e) } const UE = (e, t) => t && typeof e == "number" ? t.transform(e) : e; function VE(e) { return iE(e) && "offsetHeight" in e } const X1 = 30, FP = e => !isNaN(parseFloat(e)); class zP { constructor(t, r = {}) { this.canTrackVelocity = null, this.events = {}, this.updateAndNotify = n => { var o; const s = cs.now(); if (this.updatedAt !== s && this.setPrevFrameValue(), this.prev = this.current, this.setCurrent(n), this.current !== this.prev && ((o = this.events.change) == null || o.notify(this.current), this.dependents)) for (const a of this.dependents) a.dirty() }, this.hasAnimated = !1, this.setCurrent(t), this.owner = r.owner } setCurrent(t) { this.current = t, this.updatedAt = cs.now(), this.canTrackVelocity === null && t !== void 0 && (this.canTrackVelocity = FP(this.current)) } setPrevFrameValue(t = this.current) { this.prevFrameValue = t, this.prevUpdatedAt = this.updatedAt } onChange(t) { return this.on("change", t) } on(t, r) { this.events[t] || (this.events[t] = new yy); const n = this.events[t].add(r); return t === "change" ? () => { n(), Fn.read(() => { this.events.change.getSize() || this.stop() }) } : n } clearListeners() { for (const t in this.events) this.events[t].clear() } attach(t, r) { this.passiveEffect = t, this.stopPassiveEffect = r } set(t) { this.passiveEffect ? this.passiveEffect(t, this.updateAndNotify) : this.updateAndNotify(t) } setWithVelocity(t, r, n) { this.set(r), this.prev = void 0, this.prevFrameValue = t, this.prevUpdatedAt = this.updatedAt - n } jump(t, r = !0) { this.updateAndNotify(t), this.prev = t, this.prevUpdatedAt = this.prevFrameValue = void 0, r && this.stop(), this.stopPassiveEffect && this.stopPassiveEffect() } dirty() { var t; (t = this.events.change) == null || t.notify(this.current) } addDependent(t) { this.dependents || (this.dependents = new Set), this.dependents.add(t) } removeDependent(t) { this.dependents && this.dependents.delete(t) } get() { return this.current } getPrevious() { return this.prev } getVelocity() { const t = cs.now(); if (!this.canTrackVelocity || this.prevFrameValue === void 0 || t - this.updatedAt > X1) return 0; const r = Math.min(this.updatedAt - this.prevUpdatedAt, X1); return aE(parseFloat(this.current) - parseFloat(this.prevFrameValue), r) } start(t) { return this.stop(), new Promise(r => { this.hasAnimated = !0, this.animation = t(r), this.events.animationStart && this.events.animationStart.notify() }).then(() => { this.events.animationComplete && this.events.animationComplete.notify(), this.clearAnimation() }) } stop() { this.animation && (this.animation.stop(), this.events.animationCancel && this.events.animationCancel.notify()), this.clearAnimation() } isAnimating() { return !!this.animation } clearAnimation() { delete this.animation } destroy() { var t, r; (t = this.dependents) == null || t.clear(), (r = this.events.destroy) == null || r.notify(), this.clearListeners(), this.stop(), this.stopPassiveEffect && this.stopPassiveEffect() } } function Md(e, t) { return new zP(e, t) } const { schedule: Iy, cancel: eL } = vE(queueMicrotask, !1), Ia = { x: !1, y: !1 }; function WE() { return Ia.x || Ia.y } function $P(e) { return e === "x" || e === "y" ? Ia[e] ? null : (Ia[e] = !0, () => { Ia[e] = !1 }) : Ia.x || Ia.y ? null : (Ia.x = Ia.y = !0, () => { Ia.x = Ia.y = !1 }) } function HE(e, t) { const r = BP(e), n = new AbortController, s = { passive: !0, ...t, signal: n.signal }; return [r, s, () => n.abort()] } function Z1(e) { return !(e.pointerType === "touch" || WE()) } function UP(e, t, r = {}) { const [n, s, o] = HE(e, r), a = c => { if (!Z1(c)) return; const { target: l } = c, p = t(l, c); if (typeof p != "function" || !l) return; const d = f => { Z1(f) && (p(f), l.removeEventListener("pointerleave", d)) }; l.addEventListener("pointerleave", d, s) }; return n.forEach(c => { c.addEventListener("pointerenter", a, s) }), o } const qE = (e, t) => t ? e === t ? !0 : qE(e, t.parentElement) : !1, jy = e => e.pointerType === "mouse" ? typeof e.button != "number" || e.button <= 0 : e.isPrimary !== !1, VP = new Set(["BUTTON", "INPUT", "SELECT", "TEXTAREA", "A"]); function GE(e) { return VP.has(e.tagName) || e.isContentEditable === !0 } const Zh = new WeakSet; function ex(e) { return t => { t.key === "Enter" && e(t) } } function R0(e, t) { e.dispatchEvent(new PointerEvent("pointer" + t, { isPrimary: !0, bubbles: !0 })) } const WP = (e, t) => { const r = e.currentTarget; if (!r) return; const n = ex(() => { if (Zh.has(r)) return; R0(r, "down"); const s = ex(() => { R0(r, "up") }), o = () => R0(r, "cancel"); r.addEventListener("keyup", s, t), r.addEventListener("blur", o, t) }); r.addEventListener("keydown", n, t), r.addEventListener("blur", () => r.removeEventListener("keydown", n), t) }; function tx(e) { return jy(e) && !WE() } function HP(e, t, r = {}) { const [n, s, o] = HE(e, r), a = c => { const l = c.currentTarget; if (!tx(c)) return; Zh.add(l); const p = t(l, c), d = (P, b) => { window.removeEventListener("pointerup", f), window.removeEventListener("pointercancel", h), Zh.has(l) && Zh.delete(l), tx(P) && typeof p == "function" && p(P, { success: b }) }, f = P => { d(P, l === window || l === document || r.useGlobalTarget || qE(l, P.target)) }, h = P => { d(P, !1) }; window.addEventListener("pointerup", f, s), window.addEventListener("pointercancel", h, s) }; return n.forEach(c => { (r.useGlobalTarget ? window : c).addEventListener("pointerdown", a, s), VE(c) && (c.addEventListener("focus", p => WP(p, s)), !GE(c) && !c.hasAttribute("tabindex") && (c.tabIndex = 0)) }), o } function KE(e) { return iE(e) && "ownerSVGElement" in e } function qP(e) { return KE(e) && e.tagName === "svg" } const es = e => !!(e && e.getVelocity), GP = [...FE, vi, wl], KP = e => GP.find(BE(e)), Oy = J.createContext({ transformPagePoint: e => e, isStatic: !1, reducedMotion: "never" }); function rx(e, t) { if (typeof e == "function") return e(t); e != null && (e.current = t) } function YP(...e) { return t => { let r = !1; const n = e.map(s => { const o = rx(s, t); return !r && typeof o == "function" && (r = !0), o }); if (r) return () => { for (let s = 0; s < n.length; s++) { const o = n[s]; typeof o == "function" ? o() : rx(e[s], null) } } } } function QP(...e) { return J.useCallback(YP(...e), e) } class JP extends J.Component { getSnapshotBeforeUpdate(t) { const r = this.props.childRef.current; if (r && t.isPresent && !this.props.isPresent) { const n = r.offsetParent, s = VE(n) && n.offsetWidth || 0, o = this.props.sizeRef.current; o.height = r.offsetHeight || 0, o.width = r.offsetWidth || 0, o.top = r.offsetTop, o.left = r.offsetLeft, o.right = s - o.width - o.left } return null } componentDidUpdate() { } render() { return this.props.children } } function XP({ children: e, isPresent: t, anchorX: r, root: n }) {
    var d; const s = J.useId(), o = J.useRef(null), a = J.useRef({ width: 0, height: 0, top: 0, left: 0, right: 0 }), { nonce: c } = J.useContext(Oy), l = ((d = e.props) == null ? void 0 : d.ref) ?? (e == null ? void 0 : e.ref), p = QP(o, l); return J.useInsertionEffect(() => {
        const { width: f, height: h, top: P, left: b, right: u } = a.current; if (t || !o.current || !f || !h) return; const g = r === "left" ? `left: ${b}` : `right: ${u}`; o.current.dataset.motionPopId = s; const S = document.createElement("style"); c && (S.nonce = c); const R = n ?? document.head; return R.appendChild(S), S.sheet && S.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${g}px !important;
            top: ${P}px !important;
          }
        `), () => { R.contains(S) && R.removeChild(S) }
    }, [t]), i.jsx(JP, { isPresent: t, childRef: o, sizeRef: a, children: J.cloneElement(e, { ref: p }) })
} const ZP = ({ children: e, initial: t, isPresent: r, onExitComplete: n, custom: s, presenceAffectsLayout: o, mode: a, anchorX: c, root: l }) => { const p = hy(eD), d = J.useId(); let f = !0, h = J.useMemo(() => (f = !1, { id: d, initial: t, isPresent: r, custom: s, onExitComplete: P => { p.set(P, !0); for (const b of p.values()) if (!b) return; n && n() }, register: P => (p.set(P, !1), () => p.delete(P)) }), [r, p, n]); return o && f && (h = { ...h }), J.useMemo(() => { p.forEach((P, b) => p.set(b, !1)) }, [r]), J.useEffect(() => { !r && !p.size && n && n() }, [r]), a === "popLayout" && (e = i.jsx(XP, { isPresent: r, anchorX: c, root: l, children: e })), i.jsx(um.Provider, { value: h, children: e }) }; function eD() { return new Map } function YE(e = !0) { const t = J.useContext(um); if (t === null) return [!0, null]; const { isPresent: r, onExitComplete: n, register: s } = t, o = J.useId(); J.useEffect(() => { if (e) return s(o) }, [e]); const a = J.useCallback(() => e && n && n(o), [o, n, e]); return !r && n ? [!1, a] : [!0] } const jh = e => e.key || ""; function nx(e) { const t = []; return J.Children.forEach(e, r => { J.isValidElement(r) && t.push(r) }), t } const ma = ({ children: e, custom: t, initial: r = !0, onExitComplete: n, presenceAffectsLayout: s = !0, mode: o = "sync", propagate: a = !1, anchorX: c = "left", root: l }) => { const [p, d] = YE(a), f = J.useMemo(() => nx(e), [e]), h = a && !p ? [] : f.map(jh), P = J.useRef(!0), b = J.useRef(f), u = hy(() => new Map), g = J.useRef(new Set), [S, R] = J.useState(f), [y, v] = J.useState(f); rE(() => { P.current = !1, b.current = f; for (let W = 0; W < y.length; W++) { const I = jh(y[W]); h.includes(I) ? (u.delete(I), g.current.delete(I)) : u.get(I) !== !0 && u.set(I, !1) } }, [y, h.length, h.join("-")]); const D = []; if (f !== S) { let W = [...f]; for (let I = 0; I < y.length; I++) { const E = y[I], _ = jh(E); h.includes(_) || (W.splice(I, 0, E), D.push(E)) } return o === "wait" && D.length && (W = D), v(nx(W)), R(f), null } const { forceRender: M } = J.useContext(py); return i.jsx(i.Fragment, { children: y.map(W => { const I = jh(W), E = a && !p ? !1 : f === y || h.includes(I), _ = () => { if (g.current.has(I)) return; if (g.current.add(I), u.has(I)) u.set(I, !0); else return; let k = !0; u.forEach(L => { L || (k = !1) }), k && (M == null || M(), v(b.current), a && (d == null || d()), n && n()) }; return i.jsx(ZP, { isPresent: E, initial: !P.current || r ? void 0 : !1, custom: t, presenceAffectsLayout: s, mode: o, root: l, onExitComplete: E ? void 0 : _, anchorX: c, children: W }, I) }) }) }, QE = J.createContext({ strict: !1 }), ix = { animation: ["animate", "variants", "whileHover", "whileTap", "exit", "whileInView", "whileFocus", "whileDrag"], exit: ["exit"], drag: ["drag", "dragControls"], focus: ["whileFocus"], hover: ["whileHover", "onHoverStart", "onHoverEnd"], tap: ["whileTap", "onTap", "onTapStart", "onTapCancel"], pan: ["onPan", "onPanStart", "onPanSessionStart", "onPanEnd"], inView: ["whileInView", "onViewportEnter", "onViewportLeave"], layout: ["layout", "layoutId"] }, Ld = {}; for (const e in ix) Ld[e] = { isEnabled: t => ix[e].some(r => !!t[r]) }; function tD(e) { for (const t in e) Ld[t] = { ...Ld[t], ...e[t] } } const rD = new Set(["animate", "exit", "variants", "initial", "style", "values", "variants", "transition", "transformTemplate", "custom", "inherit", "onBeforeLayoutMeasure", "onAnimationStart", "onAnimationComplete", "onUpdate", "onDragStart", "onDrag", "onDragEnd", "onMeasureDragConstraints", "onDirectionLock", "onDragTransitionEnd", "_dragX", "_dragY", "onHoverStart", "onHoverEnd", "onViewportEnter", "onViewportLeave", "globalTapTarget", "ignoreStrict", "viewport"]); function Nf(e) { return e.startsWith("while") || e.startsWith("drag") && e !== "draggable" || e.startsWith("layout") || e.startsWith("onTap") || e.startsWith("onPan") || e.startsWith("onLayout") || rD.has(e) } let JE = e => !Nf(e); function nD(e) { typeof e == "function" && (JE = t => t.startsWith("on") ? !Nf(t) : e(t)) } try { nD(require("@emotion/is-prop-valid").default) } catch { } function iD(e, t, r) { const n = {}; for (const s in e) s === "values" && typeof e.values == "object" || (JE(s) || r === !0 && Nf(s) || !t && !Nf(s) || e.draggable && s.startsWith("onDrag")) && (n[s] = e[s]); return n } const pm = J.createContext({}); function hm(e) { return e !== null && typeof e == "object" && typeof e.start == "function" } function Tp(e) { return typeof e == "string" || Array.isArray(e) } const My = ["animate", "whileInView", "whileFocus", "whileHover", "whileTap", "whileDrag", "exit"], Ly = ["initial", ...My]; function fm(e) { return hm(e.animate) || Ly.some(t => Tp(e[t])) } function XE(e) { return !!(fm(e) || e.variants) } function sD(e, t) { if (fm(e)) { const { initial: r, animate: n } = e; return { initial: r === !1 || Tp(r) ? r : void 0, animate: Tp(n) ? n : void 0 } } return e.inherit !== !1 ? t : {} } function aD(e) { const { initial: t, animate: r } = sD(e, J.useContext(pm)); return J.useMemo(() => ({ initial: t, animate: r }), [sx(t), sx(r)]) } function sx(e) { return Array.isArray(e) ? e.join(" ") : e } function ax(e, t) { return t.max === t.min ? 0 : e / (t.max - t.min) * 100 } const Bu = { correct: (e, t) => { if (!t.target) return e; if (typeof e == "string") if (Vt.test(e)) e = parseFloat(e); else return e; const r = ax(e, t.target.x), n = ax(e, t.target.y); return `${r}% ${n}%` } }, oD = { correct: (e, { treeScale: t, projectionDelta: r }) => { const n = e, s = wl.parse(e); if (s.length > 5) return n; const o = wl.createTransformer(e), a = typeof s[0] != "number" ? 1 : 0, c = r.x.scale * t.x, l = r.y.scale * t.y; s[0 + a] /= c, s[1 + a] /= l; const p = Qn(c, l, .5); return typeof s[2 + a] == "number" && (s[2 + a] /= p), typeof s[3 + a] == "number" && (s[3 + a] /= p), o(s) } }, Yg = { borderRadius: { ...Bu, applyTo: ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomLeftRadius", "borderBottomRightRadius"] }, borderTopLeftRadius: Bu, borderTopRightRadius: Bu, borderBottomLeftRadius: Bu, borderBottomRightRadius: Bu, boxShadow: oD }; function ZE(e, { layout: t, layoutId: r }) { return Kd.has(e) || e.startsWith("origin") || (t || r !== void 0) && (!!Yg[e] || e === "opacity") } const lD = { x: "translateX", y: "translateY", z: "translateZ", transformPerspective: "perspective" }, cD = Gd.length; function dD(e, t, r) { let n = "", s = !0; for (let o = 0; o < cD; o++) { const a = Gd[o], c = e[a]; if (c === void 0) continue; let l = !0; if (typeof c == "number" ? l = c === (a.startsWith("scale") ? 1 : 0) : l = parseFloat(c) === 0, !l || r) { const p = UE(c, Dy[a]); if (!l) { s = !1; const d = lD[a] || a; n += `${d}(${p}) ` } r && (t[a] = p) } } return n = n.trim(), r ? n = r(t, s ? "" : n) : s && (n = "none"), n } function Ny(e, t, r) { const { style: n, vars: s, transformOrigin: o } = e; let a = !1, c = !1; for (const l in t) { const p = t[l]; if (Kd.has(l)) { a = !0; continue } else if (bE(l)) { s[l] = p; continue } else { const d = UE(p, Dy[l]); l.startsWith("origin") ? (c = !0, o[l] = d) : n[l] = d } } if (t.transform || (a || r ? n.transform = dD(t, e.transform, r) : n.transform && (n.transform = "none")), c) { const { originX: l = "50%", originY: p = "50%", originZ: d = 0 } = o; n.transformOrigin = `${l} ${p} ${d}` } } const By = () => ({ style: {}, transform: {}, transformOrigin: {}, vars: {} }); function eC(e, t, r) { for (const n in t) !es(t[n]) && !ZE(n, r) && (e[n] = t[n]) } function uD({ transformTemplate: e }, t) { return J.useMemo(() => { const r = By(); return Ny(r, t, e), Object.assign({}, r.vars, r.style) }, [t]) } function pD(e, t) { const r = e.style || {}, n = {}; return eC(n, r, e), Object.assign(n, uD(e, t)), n } function hD(e, t) { const r = {}, n = pD(e, t); return e.drag && e.dragListener !== !1 && (r.draggable = !1, n.userSelect = n.WebkitUserSelect = n.WebkitTouchCallout = "none", n.touchAction = e.drag === !0 ? "none" : `pan-${e.drag === "x" ? "y" : "x"}`), e.tabIndex === void 0 && (e.onTap || e.onTapStart || e.whileTap) && (r.tabIndex = 0), r.style = n, r } const fD = { offset: "stroke-dashoffset", array: "stroke-dasharray" }, mD = { offset: "strokeDashoffset", array: "strokeDasharray" }; function gD(e, t, r = 1, n = 0, s = !0) { e.pathLength = 1; const o = s ? fD : mD; e[o.offset] = Vt.transform(-n); const a = Vt.transform(t), c = Vt.transform(r); e[o.array] = `${a} ${c}` } const vD = ["offsetDistance", "offsetPath", "offsetRotate", "offsetAnchor"]; function tC(e, { attrX: t, attrY: r, attrScale: n, pathLength: s, pathSpacing: o = 1, pathOffset: a = 0, ...c }, l, p, d) { if (Ny(e, c, p), l) { e.style.viewBox && (e.attrs.viewBox = e.style.viewBox); return } e.attrs = e.style, e.style = {}; const { attrs: f, style: h } = e; f.transform && (h.transform = f.transform, delete f.transform), (h.transform || f.transformOrigin) && (h.transformOrigin = f.transformOrigin ?? "50% 50%", delete f.transformOrigin), h.transform && (h.transformBox = (d == null ? void 0 : d.transformBox) ?? "fill-box", delete f.transformBox); for (const P of vD) f[P] !== void 0 && (h[P] = f[P], delete f[P]); t !== void 0 && (f.x = t), r !== void 0 && (f.y = r), n !== void 0 && (f.scale = n), s !== void 0 && gD(f, s, o, a, !1) } const rC = () => ({ ...By(), attrs: {} }), nC = e => typeof e == "string" && e.toLowerCase() === "svg"; function yD(e, t, r, n) { const s = J.useMemo(() => { const o = rC(); return tC(o, t, nC(n), e.transformTemplate, e.style), { ...o.attrs, style: { ...o.style } } }, [t]); if (e.style) { const o = {}; eC(o, e.style, e), s.style = { ...o, ...s.style } } return s } const bD = ["animate", "circle", "defs", "desc", "ellipse", "g", "image", "line", "filter", "marker", "mask", "metadata", "path", "pattern", "polygon", "polyline", "rect", "stop", "switch", "symbol", "svg", "text", "tspan", "use", "view"]; function Fy(e) { return typeof e != "string" || e.includes("-") ? !1 : !!(bD.indexOf(e) > -1 || /[A-Z]/u.test(e)) } function xD(e, t, r, { latestValues: n }, s, o = !1, a) { const l = (a ?? Fy(e) ? yD : hD)(t, n, s, e), p = iD(t, typeof e == "string", o), d = e !== J.Fragment ? { ...p, ...l, ref: r } : {}, { children: f } = t, h = J.useMemo(() => es(f) ? f.get() : f, [f]); return J.createElement(e, { ...d, children: h }) } function ox(e) { const t = [{}, {}]; return e == null || e.values.forEach((r, n) => { t[0][n] = r.get(), t[1][n] = r.getVelocity() }), t } function zy(e, t, r, n) { if (typeof t == "function") { const [s, o] = ox(n); t = t(r !== void 0 ? r : e.custom, s, o) } if (typeof t == "string" && (t = e.variants && e.variants[t]), typeof t == "function") { const [s, o] = ox(n); t = t(r !== void 0 ? r : e.custom, s, o) } return t } function ef(e) { return es(e) ? e.get() : e } function _D({ scrapeMotionValuesFromProps: e, createRenderState: t }, r, n, s) { return { latestValues: wD(r, n, s, e), renderState: t() } } function wD(e, t, r, n) { const s = {}, o = n(e, {}); for (const h in o) s[h] = ef(o[h]); let { initial: a, animate: c } = e; const l = fm(e), p = XE(e); t && p && !l && e.inherit !== !1 && (a === void 0 && (a = t.initial), c === void 0 && (c = t.animate)); let d = r ? r.initial === !1 : !1; d = d || a === !1; const f = d ? c : a; if (f && typeof f != "boolean" && !hm(f)) { const h = Array.isArray(f) ? f : [f]; for (let P = 0; P < h.length; P++) { const b = zy(e, h[P]); if (b) { const { transitionEnd: u, transition: g, ...S } = b; for (const R in S) { let y = S[R]; if (Array.isArray(y)) { const v = d ? y.length - 1 : 0; y = y[v] } y !== null && (s[R] = y) } for (const R in u) s[R] = u[R] } } } return s } const iC = e => (t, r) => { const n = J.useContext(pm), s = J.useContext(um), o = () => _D(e, t, n, s); return r ? o() : hy(o) }; function $y(e, t, r) { var o; const { style: n } = e, s = {}; for (const a in n) (es(n[a]) || t.style && es(t.style[a]) || ZE(a, e) || ((o = r == null ? void 0 : r.getValue(a)) == null ? void 0 : o.liveStyle) !== void 0) && (s[a] = n[a]); return s } const SD = iC({ scrapeMotionValuesFromProps: $y, createRenderState: By }); function sC(e, t, r) { const n = $y(e, t, r); for (const s in e) if (es(e[s]) || es(t[s])) { const o = Gd.indexOf(s) !== -1 ? "attr" + s.charAt(0).toUpperCase() + s.substring(1) : s; n[o] = e[s] } return n } const ED = iC({ scrapeMotionValuesFromProps: sC, createRenderState: rC }), CD = Symbol.for("motionComponentSymbol"); function RD(e, t, r) { const n = J.useRef(r); J.useInsertionEffect(() => { n.current = r }); const s = J.useRef(null); return J.useCallback(o => { var c; o && ((c = e.onMount) == null || c.call(e, o)), t && (o ? t.mount(o) : t.unmount()); const a = n.current; if (typeof a == "function") if (o) { const l = a(o); typeof l == "function" && (s.current = l) } else s.current ? (s.current(), s.current = null) : a(o); else a && (a.current = o) }, [t]) } const Uy = e => e.replace(/([a-z])([A-Z])/gu, "$1-$2").toLowerCase(), kD = "framerAppearId", aC = "data-" + Uy(kD), oC = J.createContext({}); function Gu(e) { return e && typeof e == "object" && Object.prototype.hasOwnProperty.call(e, "current") } function TD(e, t, r, n, s, o) { var g, S; const { visualElement: a } = J.useContext(pm), c = J.useContext(QE), l = J.useContext(um), p = J.useContext(Oy).reducedMotion, d = J.useRef(null); n = n || c.renderer, !d.current && n && (d.current = n(e, { visualState: t, parent: a, props: r, presenceContext: l, blockInitialAnimation: l ? l.initial === !1 : !1, reducedMotionConfig: p, isSVG: o })); const f = d.current, h = J.useContext(oC); f && !f.projection && s && (f.type === "html" || f.type === "svg") && AD(d.current, r, s, h); const P = J.useRef(!1); J.useInsertionEffect(() => { f && P.current && f.update(r, l) }); const b = r[aC], u = J.useRef(!!b && !((g = window.MotionHandoffIsComplete) != null && g.call(window, b)) && ((S = window.MotionHasOptimisedAnimation) == null ? void 0 : S.call(window, b))); return rE(() => { f && (P.current = !0, window.MotionIsMounted = !0, f.updateFeatures(), f.scheduleRenderMicrotask(), u.current && f.animationState && f.animationState.animateChanges()) }), J.useEffect(() => { f && (!u.current && f.animationState && f.animationState.animateChanges(), u.current && (queueMicrotask(() => { var R; (R = window.MotionHandoffMarkAsComplete) == null || R.call(window, b) }), u.current = !1), f.enteringChildren = void 0) }), f } function AD(e, t, r, n) { const { layoutId: s, layout: o, drag: a, dragConstraints: c, layoutScroll: l, layoutRoot: p, layoutCrossfade: d } = t; e.projection = new r(e.latestValues, t["data-framer-portal-id"] ? void 0 : lC(e.parent)), e.projection.setOptions({ layoutId: s, layout: o, alwaysMeasureLayout: !!a || c && Gu(c), visualElement: e, animationType: typeof o == "string" ? o : "both", initialPromotionConfig: n, crossfade: d, layoutScroll: l, layoutRoot: p }) } function lC(e) { if (e) return e.options.allowProjection !== !1 ? e.projection : lC(e.parent) } function k0(e, { forwardMotionProps: t = !1, type: r } = {}, n, s) { n && tD(n); const o = r ? r === "svg" : Fy(e), a = o ? ED : SD; function c(p, d) { let f; const h = { ...J.useContext(Oy), ...p, layoutId: PD(p) }, { isStatic: P } = h, b = aD(p), u = a(p, P); if (!P && fy) { DD(); const g = ID(h); f = g.MeasureLayout, b.visualElement = TD(e, u, h, s, g.ProjectionNode, o) } return i.jsxs(pm.Provider, { value: b, children: [f && b.visualElement ? i.jsx(f, { visualElement: b.visualElement, ...h }) : null, xD(e, p, RD(u, b.visualElement, d), u, P, t, o)] }) } c.displayName = `motion.${typeof e == "string" ? e : `create(${e.displayName ?? e.name ?? ""})`}`; const l = J.forwardRef(c); return l[CD] = e, l } function PD({ layoutId: e }) { const t = J.useContext(py).id; return t && e !== void 0 ? t + "-" + e : e } function DD(e, t) { J.useContext(QE).strict } function ID(e) { const { drag: t, layout: r } = Ld; if (!t && !r) return {}; const n = { ...t, ...r }; return { MeasureLayout: t != null && t.isEnabled(e) || r != null && r.isEnabled(e) ? n.MeasureLayout : void 0, ProjectionNode: n.ProjectionNode } } function jD(e, t) { if (typeof Proxy > "u") return k0; const r = new Map, n = (o, a) => k0(o, a, e, t), s = (o, a) => n(o, a); return new Proxy(s, { get: (o, a) => a === "create" ? n : (r.has(a) || r.set(a, k0(a, void 0, e, t)), r.get(a)) }) } function cC({ top: e, left: t, right: r, bottom: n }) { return { x: { min: t, max: r }, y: { min: e, max: n } } } function OD({ x: e, y: t }) { return { top: t.min, right: e.max, bottom: t.max, left: e.min } } function MD(e, t) { if (!t) return e; const r = t({ x: e.left, y: e.top }), n = t({ x: e.right, y: e.bottom }); return { top: r.y, left: r.x, bottom: n.y, right: n.x } } function T0(e) { return e === void 0 || e === 1 } function Qg({ scale: e, scaleX: t, scaleY: r }) { return !T0(e) || !T0(t) || !T0(r) } function lc(e) { return Qg(e) || dC(e) || e.z || e.rotate || e.rotateX || e.rotateY || e.skewX || e.skewY } function dC(e) { return lx(e.x) || lx(e.y) } function lx(e) { return e && e !== "0%" } function Bf(e, t, r) { const n = e - r, s = t * n; return r + s } function cx(e, t, r, n, s) { return s !== void 0 && (e = Bf(e, s, n)), Bf(e, r, n) + t } function Jg(e, t = 0, r = 1, n, s) { e.min = cx(e.min, t, r, n, s), e.max = cx(e.max, t, r, n, s) } function uC(e, { x: t, y: r }) { Jg(e.x, t.translate, t.scale, t.originPoint), Jg(e.y, r.translate, r.scale, r.originPoint) } const dx = .999999999999, ux = 1.0000000000001; function LD(e, t, r, n = !1) { const s = r.length; if (!s) return; t.x = t.y = 1; let o, a; for (let c = 0; c < s; c++) { o = r[c], a = o.projectionDelta; const { visualElement: l } = o.options; l && l.props.style && l.props.style.display === "contents" || (n && o.options.layoutScroll && o.scroll && o !== o.root && gd(e, { x: -o.scroll.offset.x, y: -o.scroll.offset.y }), a && (t.x *= a.x.scale, t.y *= a.y.scale, uC(e, a)), n && lc(o.latestValues) && gd(e, o.latestValues)) } t.x < ux && t.x > dx && (t.x = 1), t.y < ux && t.y > dx && (t.y = 1) } function md(e, t) { e.min = e.min + t, e.max = e.max + t } function px(e, t, r, n, s = .5) { const o = Qn(e.min, e.max, s); Jg(e, t, r, o, n) } function gd(e, t) { px(e.x, t.x, t.scaleX, t.scale, t.originX), px(e.y, t.y, t.scaleY, t.scale, t.originY) } function pC(e, t) { return cC(MD(e.getBoundingClientRect(), t)) } function ND(e, t, r) { const n = pC(e, r), { scroll: s } = t; return s && (md(n.x, s.offset.x), md(n.y, s.offset.y)), n } const hx = () => ({ translate: 0, scale: 1, origin: 0, originPoint: 0 }), vd = () => ({ x: hx(), y: hx() }), fx = () => ({ min: 0, max: 0 }), wi = () => ({ x: fx(), y: fx() }), Xg = { current: null }, hC = { current: !1 }; function BD() { if (hC.current = !0, !!fy) if (window.matchMedia) { const e = window.matchMedia("(prefers-reduced-motion)"), t = () => Xg.current = e.matches; e.addEventListener("change", t), t() } else Xg.current = !1 } const FD = new WeakMap; function zD(e, t, r) { for (const n in t) { const s = t[n], o = r[n]; if (es(s)) e.addValue(n, s); else if (es(o)) e.addValue(n, Md(s, { owner: e })); else if (o !== s) if (e.hasValue(n)) { const a = e.getValue(n); a.liveStyle === !0 ? a.jump(s) : a.hasAnimated || a.set(s) } else { const a = e.getStaticValue(n); e.addValue(n, Md(a !== void 0 ? a : s, { owner: e })) } } for (const n in r) t[n] === void 0 && e.removeValue(n); return t } const mx = ["AnimationStart", "AnimationComplete", "Update", "BeforeLayoutMeasure", "LayoutMeasure", "LayoutAnimationStart", "LayoutAnimationComplete"]; class $D { scrapeMotionValuesFromProps(t, r, n) { return {} } constructor({ parent: t, props: r, presenceContext: n, reducedMotionConfig: s, blockInitialAnimation: o, visualState: a }, c = {}) { this.current = null, this.children = new Set, this.isVariantNode = !1, this.isControllingVariants = !1, this.shouldReduceMotion = null, this.values = new Map, this.KeyframeResolver = Ay, this.features = {}, this.valueSubscriptions = new Map, this.prevMotionValues = {}, this.events = {}, this.propEventSubscriptions = {}, this.notifyUpdate = () => this.notify("Update", this.latestValues), this.render = () => { this.current && (this.triggerBuild(), this.renderInstance(this.current, this.renderState, this.props.style, this.projection)) }, this.renderScheduledAt = 0, this.scheduleRender = () => { const h = cs.now(); this.renderScheduledAt < h && (this.renderScheduledAt = h, Fn.render(this.render, !1, !0)) }; const { latestValues: l, renderState: p } = a; this.latestValues = l, this.baseTarget = { ...l }, this.initialValues = r.initial ? { ...l } : {}, this.renderState = p, this.parent = t, this.props = r, this.presenceContext = n, this.depth = t ? t.depth + 1 : 0, this.reducedMotionConfig = s, this.options = c, this.blockInitialAnimation = !!o, this.isControllingVariants = fm(r), this.isVariantNode = XE(r), this.isVariantNode && (this.variantChildren = new Set), this.manuallyAnimateOnMount = !!(t && t.current); const { willChange: d, ...f } = this.scrapeMotionValuesFromProps(r, {}, this); for (const h in f) { const P = f[h]; l[h] !== void 0 && es(P) && P.set(l[h]) } } mount(t) { var r; this.current = t, FD.set(t, this), this.projection && !this.projection.instance && this.projection.mount(t), this.parent && this.isVariantNode && !this.isControllingVariants && (this.removeFromVariantTree = this.parent.addVariantChild(this)), this.values.forEach((n, s) => this.bindToMotionValue(s, n)), this.reducedMotionConfig === "never" ? this.shouldReduceMotion = !1 : this.reducedMotionConfig === "always" ? this.shouldReduceMotion = !0 : (hC.current || BD(), this.shouldReduceMotion = Xg.current), (r = this.parent) == null || r.addChild(this), this.update(this.props, this.presenceContext) } unmount() { var t; this.projection && this.projection.unmount(), _l(this.notifyUpdate), _l(this.render), this.valueSubscriptions.forEach(r => r()), this.valueSubscriptions.clear(), this.removeFromVariantTree && this.removeFromVariantTree(), (t = this.parent) == null || t.removeChild(this); for (const r in this.events) this.events[r].clear(); for (const r in this.features) { const n = this.features[r]; n && (n.unmount(), n.isMounted = !1) } this.current = null } addChild(t) { this.children.add(t), this.enteringChildren ?? (this.enteringChildren = new Set), this.enteringChildren.add(t) } removeChild(t) { this.children.delete(t), this.enteringChildren && this.enteringChildren.delete(t) } bindToMotionValue(t, r) { this.valueSubscriptions.has(t) && this.valueSubscriptions.get(t)(); const n = Kd.has(t); n && this.onBindTransform && this.onBindTransform(); const s = r.on("change", a => { this.latestValues[t] = a, this.props.onUpdate && Fn.preRender(this.notifyUpdate), n && this.projection && (this.projection.isTransformDirty = !0), this.scheduleRender() }); let o; window.MotionCheckAppearSync && (o = window.MotionCheckAppearSync(this, t, r)), this.valueSubscriptions.set(t, () => { s(), o && o(), r.owner && r.stop() }) } sortNodePosition(t) { return !this.current || !this.sortInstanceNodePosition || this.type !== t.type ? 0 : this.sortInstanceNodePosition(this.current, t.current) } updateFeatures() { let t = "animation"; for (t in Ld) { const r = Ld[t]; if (!r) continue; const { isEnabled: n, Feature: s } = r; if (!this.features[t] && s && n(this.props) && (this.features[t] = new s(this)), this.features[t]) { const o = this.features[t]; o.isMounted ? o.update() : (o.mount(), o.isMounted = !0) } } } triggerBuild() { this.build(this.renderState, this.latestValues, this.props) } measureViewportBox() { return this.current ? this.measureInstanceViewportBox(this.current, this.props) : wi() } getStaticValue(t) { return this.latestValues[t] } setStaticValue(t, r) { this.latestValues[t] = r } update(t, r) { (t.transformTemplate || this.props.transformTemplate) && this.scheduleRender(), this.prevProps = this.props, this.props = t, this.prevPresenceContext = this.presenceContext, this.presenceContext = r; for (let n = 0; n < mx.length; n++) { const s = mx[n]; this.propEventSubscriptions[s] && (this.propEventSubscriptions[s](), delete this.propEventSubscriptions[s]); const o = "on" + s, a = t[o]; a && (this.propEventSubscriptions[s] = this.on(s, a)) } this.prevMotionValues = zD(this, this.scrapeMotionValuesFromProps(t, this.prevProps, this), this.prevMotionValues), this.handleChildMotionValue && this.handleChildMotionValue() } getProps() { return this.props } getVariant(t) { return this.props.variants ? this.props.variants[t] : void 0 } getDefaultTransition() { return this.props.transition } getTransformPagePoint() { return this.props.transformPagePoint } getClosestVariantNode() { return this.isVariantNode ? this : this.parent ? this.parent.getClosestVariantNode() : void 0 } addVariantChild(t) { const r = this.getClosestVariantNode(); if (r) return r.variantChildren && r.variantChildren.add(t), () => r.variantChildren.delete(t) } addValue(t, r) { const n = this.values.get(t); r !== n && (n && this.removeValue(t), this.bindToMotionValue(t, r), this.values.set(t, r), this.latestValues[t] = r.get()) } removeValue(t) { this.values.delete(t); const r = this.valueSubscriptions.get(t); r && (r(), this.valueSubscriptions.delete(t)), delete this.latestValues[t], this.removeValueFromRenderState(t, this.renderState) } hasValue(t) { return this.values.has(t) } getValue(t, r) { if (this.props.values && this.props.values[t]) return this.props.values[t]; let n = this.values.get(t); return n === void 0 && r !== void 0 && (n = Md(r === null ? void 0 : r, { owner: this }), this.addValue(t, n)), n } readValue(t, r) { let n = this.latestValues[t] !== void 0 || !this.current ? this.latestValues[t] : this.getBaseTargetFromProps(this.props, t) ?? this.readValueFromInstance(this.current, t, this.options); return n != null && (typeof n == "string" && (nE(n) || sE(n)) ? n = parseFloat(n) : !KP(n) && wl.test(r) && (n = $E(t, r)), this.setBaseTarget(t, es(n) ? n.get() : n)), es(n) ? n.get() : n } setBaseTarget(t, r) { this.baseTarget[t] = r } getBaseTarget(t) { var o; const { initial: r } = this.props; let n; if (typeof r == "string" || typeof r == "object") { const a = zy(this.props, r, (o = this.presenceContext) == null ? void 0 : o.custom); a && (n = a[t]) } if (r && n !== void 0) return n; const s = this.getBaseTargetFromProps(this.props, t); return s !== void 0 && !es(s) ? s : this.initialValues[t] !== void 0 && n === void 0 ? void 0 : this.baseTarget[t] } on(t, r) { return this.events[t] || (this.events[t] = new yy), this.events[t].add(r) } notify(t, ...r) { this.events[t] && this.events[t].notify(...r) } scheduleRenderMicrotask() { Iy.render(this.render) } } class fC extends $D { constructor() { super(...arguments), this.KeyframeResolver = NP } sortInstanceNodePosition(t, r) { return t.compareDocumentPosition(r) & 2 ? 1 : -1 } getBaseTargetFromProps(t, r) { return t.style ? t.style[r] : void 0 } removeValueFromRenderState(t, { vars: r, style: n }) { delete r[t], delete n[t] } handleChildMotionValue() { this.childSubscription && (this.childSubscription(), delete this.childSubscription); const { children: t } = this.props; es(t) && (this.childSubscription = t.on("change", r => { this.current && (this.current.textContent = `${r}`) })) } } function mC(e, { style: t, vars: r }, n, s) { const o = e.style; let a; for (a in t) o[a] = t[a]; s == null || s.applyProjectionStyles(o, n); for (a in r) o.setProperty(a, r[a]) } function UD(e) { return window.getComputedStyle(e) } class VD extends fC { constructor() { super(...arguments), this.type = "html", this.renderInstance = mC } readValueFromInstance(t, r) { var n; if (Kd.has(r)) return (n = this.projection) != null && n.isProjecting ? Ug(r) : tP(t, r); { const s = UD(t), o = (bE(r) ? s.getPropertyValue(r) : s[r]) || 0; return typeof o == "string" ? o.trim() : o } } measureInstanceViewportBox(t, { transformPagePoint: r }) { return pC(t, r) } build(t, r, n) { Ny(t, r, n.transformTemplate) } scrapeMotionValuesFromProps(t, r, n) { return $y(t, r, n) } } const gC = new Set(["baseFrequency", "diffuseConstant", "kernelMatrix", "kernelUnitLength", "keySplines", "keyTimes", "limitingConeAngle", "markerHeight", "markerWidth", "numOctaves", "targetX", "targetY", "surfaceScale", "specularConstant", "specularExponent", "stdDeviation", "tableValues", "viewBox", "gradientTransform", "pathLength", "startOffset", "textLength", "lengthAdjust"]); function WD(e, t, r, n) { mC(e, t, void 0, n); for (const s in t.attrs) e.setAttribute(gC.has(s) ? s : Uy(s), t.attrs[s]) } class HD extends fC { constructor() { super(...arguments), this.type = "svg", this.isSVGTag = !1, this.measureInstanceViewportBox = wi } getBaseTargetFromProps(t, r) { return t[r] } readValueFromInstance(t, r) { if (Kd.has(r)) { const n = zE(r); return n && n.default || 0 } return r = gC.has(r) ? r : Uy(r), t.getAttribute(r) } scrapeMotionValuesFromProps(t, r, n) { return sC(t, r, n) } build(t, r, n) { tC(t, r, this.isSVGTag, n.transformTemplate, n.style) } renderInstance(t, r, n, s) { WD(t, r, n, s) } mount(t) { this.isSVGTag = nC(t.tagName), super.mount(t) } } const qD = (e, t) => t.isSVG ?? Fy(e) ? new HD(t) : new VD(t, { allowProjection: e !== J.Fragment }); function Ed(e, t, r) { const n = e.getProps(); return zy(n, t, r !== void 0 ? r : n.custom, e) } const Zg = e => Array.isArray(e); function GD(e, t, r) { e.hasValue(t) ? e.getValue(t).set(r) : e.addValue(t, Md(r)) } function KD(e) { return Zg(e) ? e[e.length - 1] || 0 : e } function YD(e, t) { const r = Ed(e, t); let { transitionEnd: n = {}, transition: s = {}, ...o } = r || {}; o = { ...o, ...n }; for (const a in o) { const c = KD(o[a]); GD(e, a, c) } } function QD(e) { return !!(es(e) && e.add) } function ev(e, t) { const r = e.getValue("willChange"); if (QD(r)) return r.add(t); if (!r && Oo.WillChange) { const n = new Oo.WillChange("auto"); e.addValue("willChange", n), n.add(t) } } function vC(e) { return e.props[aC] } const JD = e => e !== null; function XD(e, { repeat: t, repeatType: r = "loop" }, n) { const s = e.filter(JD), o = t && r !== "loop" && t % 2 === 1 ? 0 : s.length - 1; return !o || n === void 0 ? s[o] : n } const ZD = { type: "spring", stiffness: 500, damping: 25, restSpeed: 10 }, e3 = e => ({ type: "spring", stiffness: 550, damping: e === 0 ? 2 * Math.sqrt(550) : 30, restSpeed: 10 }), t3 = { type: "keyframes", duration: .8 }, r3 = { type: "keyframes", ease: [.25, .1, .35, 1], duration: .3 }, n3 = (e, { keyframes: t }) => t.length > 2 ? t3 : Kd.has(e) ? e.startsWith("scale") ? e3(t[1]) : ZD : r3; function i3({ when: e, delay: t, delayChildren: r, staggerChildren: n, staggerDirection: s, repeat: o, repeatType: a, repeatDelay: c, from: l, elapsed: p, ...d }) { return !!Object.keys(d).length } const Vy = (e, t, r, n = {}, s, o) => a => { const c = Py(n, e) || {}, l = c.delay || n.delay || 0; let { elapsed: p = 0 } = n; p = p - so(l); const d = { keyframes: Array.isArray(r) ? r : [null, r], ease: "easeOut", velocity: t.getVelocity(), ...c, delay: -p, onUpdate: h => { t.set(h), c.onUpdate && c.onUpdate(h) }, onComplete: () => { a(), c.onComplete && c.onComplete() }, name: e, motionValue: t, element: o ? void 0 : s }; i3(c) || Object.assign(d, n3(e, d)), d.duration && (d.duration = so(d.duration)), d.repeatDelay && (d.repeatDelay = so(d.repeatDelay)), d.from !== void 0 && (d.keyframes[0] = d.from); let f = !1; if ((d.type === !1 || d.duration === 0 && !d.repeatDelay) && (Gg(d), d.delay === 0 && (f = !0)), (Oo.instantAnimations || Oo.skipAnimations) && (f = !0, Gg(d), d.delay = 0), d.allowFlatten = !c.type && !c.ease, f && !o && t.get() !== void 0) { const h = XD(d.keyframes, c); if (h !== void 0) { Fn.update(() => { d.onUpdate(h), d.onComplete() }); return } } return c.isSync ? new Ty(d) : new EP(d) }; function s3({ protectedKeys: e, needsAnimating: t }, r) { const n = e.hasOwnProperty(r) && t[r] !== !0; return t[r] = !1, n } function yC(e, t, { delay: r = 0, transitionOverride: n, type: s } = {}) { let { transition: o = e.getDefaultTransition(), transitionEnd: a, ...c } = t; n && (o = n); const l = [], p = s && e.animationState && e.animationState.getState()[s]; for (const d in c) { const f = e.getValue(d, e.latestValues[d] ?? null), h = c[d]; if (h === void 0 || p && s3(p, d)) continue; const P = { delay: r, ...Py(o || {}, d) }, b = f.get(); if (b !== void 0 && !f.isAnimating && !Array.isArray(h) && h === b && !P.velocity) continue; let u = !1; if (window.MotionHandoffAnimation) { const S = vC(e); if (S) { const R = window.MotionHandoffAnimation(S, d, Fn); R !== null && (P.startTime = R, u = !0) } } ev(e, d), f.start(Vy(d, f, h, e.shouldReduceMotion && NE.has(d) ? { type: !1 } : P, e, u)); const g = f.animation; g && l.push(g) } return a && Promise.all(l).then(() => { Fn.update(() => { a && YD(e, a) }) }), l } function bC(e, t, r, n = 0, s = 1) { const o = Array.from(e).sort((p, d) => p.sortNodePosition(d)).indexOf(t), a = e.size, c = (a - 1) * n; return typeof r == "function" ? r(o, a) : s === 1 ? o * n : c - o * n } function tv(e, t, r = {}) { var l; const n = Ed(e, t, r.type === "exit" ? (l = e.presenceContext) == null ? void 0 : l.custom : void 0); let { transition: s = e.getDefaultTransition() || {} } = n || {}; r.transitionOverride && (s = r.transitionOverride); const o = n ? () => Promise.all(yC(e, n, r)) : () => Promise.resolve(), a = e.variantChildren && e.variantChildren.size ? (p = 0) => { const { delayChildren: d = 0, staggerChildren: f, staggerDirection: h } = s; return a3(e, t, p, d, f, h, r) } : () => Promise.resolve(), { when: c } = s; if (c) { const [p, d] = c === "beforeChildren" ? [o, a] : [a, o]; return p().then(() => d()) } else return Promise.all([o(), a(r.delay)]) } function a3(e, t, r = 0, n = 0, s = 0, o = 1, a) { const c = []; for (const l of e.variantChildren) l.notify("AnimationStart", t), c.push(tv(l, t, { ...a, delay: r + (typeof n == "function" ? 0 : n) + bC(e.variantChildren, l, n, s, o) }).then(() => l.notify("AnimationComplete", t))); return Promise.all(c) } function o3(e, t, r = {}) { e.notify("AnimationStart", t); let n; if (Array.isArray(t)) { const s = t.map(o => tv(e, o, r)); n = Promise.all(s) } else if (typeof t == "string") n = tv(e, t, r); else { const s = typeof t == "function" ? Ed(e, t, r.custom) : t; n = Promise.all(yC(e, s, r)) } return n.then(() => { e.notify("AnimationComplete", t) }) } function xC(e, t) { if (!Array.isArray(t)) return !1; const r = t.length; if (r !== e.length) return !1; for (let n = 0; n < r; n++)if (t[n] !== e[n]) return !1; return !0 } const l3 = Ly.length; function _C(e) { if (!e) return; if (!e.isControllingVariants) { const r = e.parent ? _C(e.parent) || {} : {}; return e.props.initial !== void 0 && (r.initial = e.props.initial), r } const t = {}; for (let r = 0; r < l3; r++) { const n = Ly[r], s = e.props[n]; (Tp(s) || s === !1) && (t[n] = s) } return t } const c3 = [...My].reverse(), d3 = My.length; function u3(e) { return t => Promise.all(t.map(({ animation: r, options: n }) => o3(e, r, n))) } function p3(e) { let t = u3(e), r = gx(), n = !0; const s = l => (p, d) => { var h; const f = Ed(e, d, l === "exit" ? (h = e.presenceContext) == null ? void 0 : h.custom : void 0); if (f) { const { transition: P, transitionEnd: b, ...u } = f; p = { ...p, ...u, ...b } } return p }; function o(l) { t = l(e) } function a(l) { const { props: p } = e, d = _C(e.parent) || {}, f = [], h = new Set; let P = {}, b = 1 / 0; for (let g = 0; g < d3; g++) { const S = c3[g], R = r[S], y = p[S] !== void 0 ? p[S] : d[S], v = Tp(y), D = S === l ? R.isActive : null; D === !1 && (b = g); let M = y === d[S] && y !== p[S] && v; if (M && n && e.manuallyAnimateOnMount && (M = !1), R.protectedKeys = { ...P }, !R.isActive && D === null || !y && !R.prevProp || hm(y) || typeof y == "boolean") continue; const W = h3(R.prevProp, y); let I = W || S === l && R.isActive && !M && v || g > b && v, E = !1; const _ = Array.isArray(y) ? y : [y]; let k = _.reduce(s(S), {}); D === !1 && (k = {}); const { prevResolvedValues: L = {} } = R, H = { ...L, ...k }, V = N => { I = !0, h.has(N) && (E = !0, h.delete(N)), R.needsAnimating[N] = !0; const B = e.getValue(N); B && (B.liveStyle = !1) }; for (const N in H) { const B = k[N], Q = L[N]; if (P.hasOwnProperty(N)) continue; let Z = !1; Zg(B) && Zg(Q) ? Z = !xC(B, Q) : Z = B !== Q, Z ? B != null ? V(N) : h.add(N) : B !== void 0 && h.has(N) ? V(N) : R.protectedKeys[N] = !0 } R.prevProp = y, R.prevResolvedValues = k, R.isActive && (P = { ...P, ...k }), n && e.blockInitialAnimation && (I = !1); const ee = M && W; I && (!ee || E) && f.push(..._.map(N => { const B = { type: S }; if (typeof N == "string" && n && !ee && e.manuallyAnimateOnMount && e.parent) { const { parent: Q } = e, Z = Ed(Q, N); if (Q.enteringChildren && Z) { const { delayChildren: le } = Z.transition || {}; B.delay = bC(Q.enteringChildren, e, le) } } return { animation: N, options: B } })) } if (h.size) { const g = {}; if (typeof p.initial != "boolean") { const S = Ed(e, Array.isArray(p.initial) ? p.initial[0] : p.initial); S && S.transition && (g.transition = S.transition) } h.forEach(S => { const R = e.getBaseTarget(S), y = e.getValue(S); y && (y.liveStyle = !0), g[S] = R ?? null }), f.push({ animation: g }) } let u = !!f.length; return n && (p.initial === !1 || p.initial === p.animate) && !e.manuallyAnimateOnMount && (u = !1), n = !1, u ? t(f) : Promise.resolve() } function c(l, p) { var f; if (r[l].isActive === p) return Promise.resolve(); (f = e.variantChildren) == null || f.forEach(h => { var P; return (P = h.animationState) == null ? void 0 : P.setActive(l, p) }), r[l].isActive = p; const d = a(l); for (const h in r) r[h].protectedKeys = {}; return d } return { animateChanges: a, setActive: c, setAnimateFunction: o, getState: () => r, reset: () => { r = gx() } } } function h3(e, t) { return typeof t == "string" ? t !== e : Array.isArray(t) ? !xC(t, e) : !1 } function sc(e = !1) { return { isActive: e, protectedKeys: {}, needsAnimating: {}, prevResolvedValues: {} } } function gx() { return { animate: sc(!0), whileInView: sc(), whileHover: sc(), whileTap: sc(), whileDrag: sc(), whileFocus: sc(), exit: sc() } } class kl { constructor(t) { this.isMounted = !1, this.node = t } update() { } } class f3 extends kl { constructor(t) { super(t), t.animationState || (t.animationState = p3(t)) } updateAnimationControlsSubscription() { const { animate: t } = this.node.getProps(); hm(t) && (this.unmountControls = t.subscribe(this.node)) } mount() { this.updateAnimationControlsSubscription() } update() { const { animate: t } = this.node.getProps(), { animate: r } = this.node.prevProps || {}; t !== r && this.updateAnimationControlsSubscription() } unmount() { var t; this.node.animationState.reset(), (t = this.unmountControls) == null || t.call(this) } } let m3 = 0; class g3 extends kl { constructor() { super(...arguments), this.id = m3++ } update() { if (!this.node.presenceContext) return; const { isPresent: t, onExitComplete: r } = this.node.presenceContext, { isPresent: n } = this.node.prevPresenceContext || {}; if (!this.node.animationState || t === n) return; const s = this.node.animationState.setActive("exit", !t); r && !t && s.then(() => { r(this.id) }) } mount() { const { register: t, onExitComplete: r } = this.node.presenceContext || {}; r && r(this.id), t && (this.unmount = t(this.id)) } unmount() { } } const v3 = { animation: { Feature: f3 }, exit: { Feature: g3 } }; function Ap(e, t, r, n = { passive: !0 }) { return e.addEventListener(t, r, n), () => e.removeEventListener(t, r) } function $p(e) { return { point: { x: e.pageX, y: e.pageY } } } const y3 = e => t => jy(t) && e(t, $p(t)); function sp(e, t, r, n) { return Ap(e, t, y3(r), n) } const wC = 1e-4, b3 = 1 - wC, x3 = 1 + wC, SC = .01, _3 = 0 - SC, w3 = 0 + SC; function ds(e) { return e.max - e.min } function S3(e, t, r) { return Math.abs(e - t) <= r } function vx(e, t, r, n = .5) { e.origin = n, e.originPoint = Qn(t.min, t.max, e.origin), e.scale = ds(r) / ds(t), e.translate = Qn(r.min, r.max, e.origin) - e.originPoint, (e.scale >= b3 && e.scale <= x3 || isNaN(e.scale)) && (e.scale = 1), (e.translate >= _3 && e.translate <= w3 || isNaN(e.translate)) && (e.translate = 0) } function ap(e, t, r, n) { vx(e.x, t.x, r.x, n ? n.originX : void 0), vx(e.y, t.y, r.y, n ? n.originY : void 0) } function yx(e, t, r) { e.min = r.min + t.min, e.max = e.min + ds(t) } function E3(e, t, r) { yx(e.x, t.x, r.x), yx(e.y, t.y, r.y) } function bx(e, t, r) { e.min = t.min - r.min, e.max = e.min + ds(t) } function Ff(e, t, r) { bx(e.x, t.x, r.x), bx(e.y, t.y, r.y) } function ia(e) { return [e("x"), e("y")] } const EC = ({ current: e }) => e ? e.ownerDocument.defaultView : null, xx = (e, t) => Math.abs(e - t); function C3(e, t) { const r = xx(e.x, t.x), n = xx(e.y, t.y); return Math.sqrt(r ** 2 + n ** 2) } const _x = new Set(["auto", "scroll"]); class CC { constructor(t, r, { transformPagePoint: n, contextWindow: s = window, dragSnapToOrigin: o = !1, distanceThreshold: a = 3, element: c } = {}) { if (this.startEvent = null, this.lastMoveEvent = null, this.lastMoveEventInfo = null, this.handlers = {}, this.contextWindow = window, this.scrollPositions = new Map, this.removeScrollListeners = null, this.onElementScroll = P => { this.handleScroll(P.target) }, this.onWindowScroll = () => { this.handleScroll(window) }, this.updatePoint = () => { if (!(this.lastMoveEvent && this.lastMoveEventInfo)) return; const P = P0(this.lastMoveEventInfo, this.history), b = this.startEvent !== null, u = C3(P.offset, { x: 0, y: 0 }) >= this.distanceThreshold; if (!b && !u) return; const { point: g } = P, { timestamp: S } = Bi; this.history.push({ ...g, timestamp: S }); const { onStart: R, onMove: y } = this.handlers; b || (R && R(this.lastMoveEvent, P), this.startEvent = this.lastMoveEvent), y && y(this.lastMoveEvent, P) }, this.handlePointerMove = (P, b) => { this.lastMoveEvent = P, this.lastMoveEventInfo = A0(b, this.transformPagePoint), Fn.update(this.updatePoint, !0) }, this.handlePointerUp = (P, b) => { this.end(); const { onEnd: u, onSessionEnd: g, resumeAnimation: S } = this.handlers; if ((this.dragSnapToOrigin || !this.startEvent) && S && S(), !(this.lastMoveEvent && this.lastMoveEventInfo)) return; const R = P0(P.type === "pointercancel" ? this.lastMoveEventInfo : A0(b, this.transformPagePoint), this.history); this.startEvent && u && u(P, R), g && g(P, R) }, !jy(t)) return; this.dragSnapToOrigin = o, this.handlers = r, this.transformPagePoint = n, this.distanceThreshold = a, this.contextWindow = s || window; const l = $p(t), p = A0(l, this.transformPagePoint), { point: d } = p, { timestamp: f } = Bi; this.history = [{ ...d, timestamp: f }]; const { onSessionStart: h } = r; h && h(t, P0(p, this.history)), this.removeListeners = Bp(sp(this.contextWindow, "pointermove", this.handlePointerMove), sp(this.contextWindow, "pointerup", this.handlePointerUp), sp(this.contextWindow, "pointercancel", this.handlePointerUp)), c && this.startScrollTracking(c) } startScrollTracking(t) { let r = t.parentElement; for (; r;) { const n = getComputedStyle(r); (_x.has(n.overflowX) || _x.has(n.overflowY)) && this.scrollPositions.set(r, { x: r.scrollLeft, y: r.scrollTop }), r = r.parentElement } this.scrollPositions.set(window, { x: window.scrollX, y: window.scrollY }), window.addEventListener("scroll", this.onElementScroll, { capture: !0, passive: !0 }), window.addEventListener("scroll", this.onWindowScroll, { passive: !0 }), this.removeScrollListeners = () => { window.removeEventListener("scroll", this.onElementScroll, { capture: !0 }), window.removeEventListener("scroll", this.onWindowScroll) } } handleScroll(t) { const r = this.scrollPositions.get(t); if (!r) return; const n = t === window, s = n ? { x: window.scrollX, y: window.scrollY } : { x: t.scrollLeft, y: t.scrollTop }, o = { x: s.x - r.x, y: s.y - r.y }; o.x === 0 && o.y === 0 || (n ? this.lastMoveEventInfo && (this.lastMoveEventInfo.point.x += o.x, this.lastMoveEventInfo.point.y += o.y) : this.history.length > 0 && (this.history[0].x -= o.x, this.history[0].y -= o.y), this.scrollPositions.set(t, s), Fn.update(this.updatePoint, !0)) } updateHandlers(t) { this.handlers = t } end() { this.removeListeners && this.removeListeners(), this.removeScrollListeners && this.removeScrollListeners(), this.scrollPositions.clear(), _l(this.updatePoint) } } function A0(e, t) { return t ? { point: t(e.point) } : e } function wx(e, t) { return { x: e.x - t.x, y: e.y - t.y } } function P0({ point: e }, t) { return { point: e, delta: wx(e, RC(t)), offset: wx(e, R3(t)), velocity: k3(t, .1) } } function R3(e) { return e[0] } function RC(e) { return e[e.length - 1] } function k3(e, t) { if (e.length < 2) return { x: 0, y: 0 }; let r = e.length - 1, n = null; const s = RC(e); for (; r >= 0 && (n = e[r], !(s.timestamp - n.timestamp > so(t)));)r--; if (!n) return { x: 0, y: 0 }; const o = la(s.timestamp - n.timestamp); if (o === 0) return { x: 0, y: 0 }; const a = { x: (s.x - n.x) / o, y: (s.y - n.y) / o }; return a.x === 1 / 0 && (a.x = 0), a.y === 1 / 0 && (a.y = 0), a } function T3(e, { min: t, max: r }, n) { return t !== void 0 && e < t ? e = n ? Qn(t, e, n.min) : Math.max(e, t) : r !== void 0 && e > r && (e = n ? Qn(r, e, n.max) : Math.min(e, r)), e } function Sx(e, t, r) { return { min: t !== void 0 ? e.min + t : void 0, max: r !== void 0 ? e.max + r - (e.max - e.min) : void 0 } } function A3(e, { top: t, left: r, bottom: n, right: s }) { return { x: Sx(e.x, r, s), y: Sx(e.y, t, n) } } function Ex(e, t) { let r = t.min - e.min, n = t.max - e.max; return t.max - t.min < e.max - e.min && ([r, n] = [n, r]), { min: r, max: n } } function P3(e, t) { return { x: Ex(e.x, t.x), y: Ex(e.y, t.y) } } function D3(e, t) { let r = .5; const n = ds(e), s = ds(t); return s > n ? r = Cp(t.min, t.max - n, e.min) : n > s && (r = Cp(e.min, e.max - s, t.min)), oo(0, 1, r) } function I3(e, t) { const r = {}; return t.min !== void 0 && (r.min = t.min - e.min), t.max !== void 0 && (r.max = t.max - e.min), r } const rv = .35; function j3(e = rv) { return e === !1 ? e = 0 : e === !0 && (e = rv), { x: Cx(e, "left", "right"), y: Cx(e, "top", "bottom") } } function Cx(e, t, r) { return { min: Rx(e, t), max: Rx(e, r) } } function Rx(e, t) { return typeof e == "number" ? e : e[t] || 0 } const O3 = new WeakMap; class M3 { constructor(t) { this.openDragLock = null, this.isDragging = !1, this.currentDirection = null, this.originPoint = { x: 0, y: 0 }, this.constraints = !1, this.hasMutatedConstraints = !1, this.elastic = wi(), this.latestPointerEvent = null, this.latestPanInfo = null, this.visualElement = t } start(t, { snapToCursor: r = !1, distanceThreshold: n } = {}) { const { presenceContext: s } = this.visualElement; if (s && s.isPresent === !1) return; const o = f => { r ? (this.stopAnimation(), this.snapToCursor($p(f).point)) : this.pauseAnimation() }, a = (f, h) => { this.stopAnimation(); const { drag: P, dragPropagation: b, onDragStart: u } = this.getProps(); if (P && !b && (this.openDragLock && this.openDragLock(), this.openDragLock = $P(P), !this.openDragLock)) return; this.latestPointerEvent = f, this.latestPanInfo = h, this.isDragging = !0, this.currentDirection = null, this.resolveConstraints(), this.visualElement.projection && (this.visualElement.projection.isAnimationBlocked = !0, this.visualElement.projection.target = void 0), ia(S => { let R = this.getAxisMotionValue(S).get() || 0; if (ao.test(R)) { const { projection: y } = this.visualElement; if (y && y.layout) { const v = y.layout.layoutBox[S]; v && (R = ds(v) * (parseFloat(R) / 100)) } } this.originPoint[S] = R }), u && Fn.postRender(() => u(f, h)), ev(this.visualElement, "transform"); const { animationState: g } = this.visualElement; g && g.setActive("whileDrag", !0) }, c = (f, h) => { this.latestPointerEvent = f, this.latestPanInfo = h; const { dragPropagation: P, dragDirectionLock: b, onDirectionLock: u, onDrag: g } = this.getProps(); if (!P && !this.openDragLock) return; const { offset: S } = h; if (b && this.currentDirection === null) { this.currentDirection = L3(S), this.currentDirection !== null && u && u(this.currentDirection); return } this.updateAxis("x", h.point, S), this.updateAxis("y", h.point, S), this.visualElement.render(), g && g(f, h) }, l = (f, h) => { this.latestPointerEvent = f, this.latestPanInfo = h, this.stop(f, h), this.latestPointerEvent = null, this.latestPanInfo = null }, p = () => ia(f => { var h; return this.getAnimationState(f) === "paused" && ((h = this.getAxisMotionValue(f).animation) == null ? void 0 : h.play()) }), { dragSnapToOrigin: d } = this.getProps(); this.panSession = new CC(t, { onSessionStart: o, onStart: a, onMove: c, onSessionEnd: l, resumeAnimation: p }, { transformPagePoint: this.visualElement.getTransformPagePoint(), dragSnapToOrigin: d, distanceThreshold: n, contextWindow: EC(this.visualElement), element: this.visualElement.current }) } stop(t, r) { const n = t || this.latestPointerEvent, s = r || this.latestPanInfo, o = this.isDragging; if (this.cancel(), !o || !s || !n) return; const { velocity: a } = s; this.startAnimation(a); const { onDragEnd: c } = this.getProps(); c && Fn.postRender(() => c(n, s)) } cancel() { this.isDragging = !1; const { projection: t, animationState: r } = this.visualElement; t && (t.isAnimationBlocked = !1), this.panSession && this.panSession.end(), this.panSession = void 0; const { dragPropagation: n } = this.getProps(); !n && this.openDragLock && (this.openDragLock(), this.openDragLock = null), r && r.setActive("whileDrag", !1) } updateAxis(t, r, n) { const { drag: s } = this.getProps(); if (!n || !Oh(t, s, this.currentDirection)) return; const o = this.getAxisMotionValue(t); let a = this.originPoint[t] + n[t]; this.constraints && this.constraints[t] && (a = T3(a, this.constraints[t], this.elastic[t])), o.set(a) } resolveConstraints() { var o; const { dragConstraints: t, dragElastic: r } = this.getProps(), n = this.visualElement.projection && !this.visualElement.projection.layout ? this.visualElement.projection.measure(!1) : (o = this.visualElement.projection) == null ? void 0 : o.layout, s = this.constraints; t && Gu(t) ? this.constraints || (this.constraints = this.resolveRefConstraints()) : t && n ? this.constraints = A3(n.layoutBox, t) : this.constraints = !1, this.elastic = j3(r), s !== this.constraints && n && this.constraints && !this.hasMutatedConstraints && ia(a => { this.constraints !== !1 && this.getAxisMotionValue(a) && (this.constraints[a] = I3(n.layoutBox[a], this.constraints[a])) }) } resolveRefConstraints() { const { dragConstraints: t, onMeasureDragConstraints: r } = this.getProps(); if (!t || !Gu(t)) return !1; const n = t.current; Ec(n !== null, "If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.", "drag-constraints-ref"); const { projection: s } = this.visualElement; if (!s || !s.layout) return !1; const o = ND(n, s.root, this.visualElement.getTransformPagePoint()); let a = P3(s.layout.layoutBox, o); if (r) { const c = r(OD(a)); this.hasMutatedConstraints = !!c, c && (a = cC(c)) } return a } startAnimation(t) { const { drag: r, dragMomentum: n, dragElastic: s, dragTransition: o, dragSnapToOrigin: a, onDragTransitionEnd: c } = this.getProps(), l = this.constraints || {}, p = ia(d => { if (!Oh(d, r, this.currentDirection)) return; let f = l && l[d] || {}; a && (f = { min: 0, max: 0 }); const h = s ? 200 : 1e6, P = s ? 40 : 1e7, b = { type: "inertia", velocity: n ? t[d] : 0, bounceStiffness: h, bounceDamping: P, timeConstant: 750, restDelta: 1, restSpeed: 10, ...o, ...f }; return this.startAxisValueAnimation(d, b) }); return Promise.all(p).then(c) } startAxisValueAnimation(t, r) { const n = this.getAxisMotionValue(t); return ev(this.visualElement, t), n.start(Vy(t, n, 0, r, this.visualElement, !1)) } stopAnimation() { ia(t => this.getAxisMotionValue(t).stop()) } pauseAnimation() { ia(t => { var r; return (r = this.getAxisMotionValue(t).animation) == null ? void 0 : r.pause() }) } getAnimationState(t) { var r; return (r = this.getAxisMotionValue(t).animation) == null ? void 0 : r.state } getAxisMotionValue(t) { const r = `_drag${t.toUpperCase()}`, n = this.visualElement.getProps(), s = n[r]; return s || this.visualElement.getValue(t, (n.initial ? n.initial[t] : void 0) || 0) } snapToCursor(t) { ia(r => { const { drag: n } = this.getProps(); if (!Oh(r, n, this.currentDirection)) return; const { projection: s } = this.visualElement, o = this.getAxisMotionValue(r); if (s && s.layout) { const { min: a, max: c } = s.layout.layoutBox[r], l = o.get() || 0; o.set(t[r] - Qn(a, c, .5) + l) } }) } scalePositionWithinConstraints() { if (!this.visualElement.current) return; const { drag: t, dragConstraints: r } = this.getProps(), { projection: n } = this.visualElement; if (!Gu(r) || !n || !this.constraints) return; this.stopAnimation(); const s = { x: 0, y: 0 }; ia(a => { const c = this.getAxisMotionValue(a); if (c && this.constraints !== !1) { const l = c.get(); s[a] = D3({ min: l, max: l }, this.constraints[a]) } }); const { transformTemplate: o } = this.visualElement.getProps(); this.visualElement.current.style.transform = o ? o({}, "") : "none", n.root && n.root.updateScroll(), n.updateLayout(), this.resolveConstraints(), ia(a => { if (!Oh(a, t, null)) return; const c = this.getAxisMotionValue(a), { min: l, max: p } = this.constraints[a]; c.set(Qn(l, p, s[a])) }) } addListeners() { if (!this.visualElement.current) return; O3.set(this.visualElement, this); const t = this.visualElement.current, r = sp(t, "pointerdown", l => { const { drag: p, dragListener: d = !0 } = this.getProps(); p && d && !GE(l.target) && this.start(l) }), n = () => { const { dragConstraints: l } = this.getProps(); Gu(l) && l.current && (this.constraints = this.resolveRefConstraints()) }, { projection: s } = this.visualElement, o = s.addEventListener("measure", n); s && !s.layout && (s.root && s.root.updateScroll(), s.updateLayout()), Fn.read(n); const a = Ap(window, "resize", () => this.scalePositionWithinConstraints()), c = s.addEventListener("didUpdate", ({ delta: l, hasLayoutChanged: p }) => { this.isDragging && p && (ia(d => { const f = this.getAxisMotionValue(d); f && (this.originPoint[d] += l[d].translate, f.set(f.get() + l[d].translate)) }), this.visualElement.render()) }); return () => { a(), r(), o(), c && c() } } getProps() { const t = this.visualElement.getProps(), { drag: r = !1, dragDirectionLock: n = !1, dragPropagation: s = !1, dragConstraints: o = !1, dragElastic: a = rv, dragMomentum: c = !0 } = t; return { ...t, drag: r, dragDirectionLock: n, dragPropagation: s, dragConstraints: o, dragElastic: a, dragMomentum: c } } } function Oh(e, t, r) { return (t === !0 || t === e) && (r === null || r === e) } function L3(e, t = 10) { let r = null; return Math.abs(e.y) > t ? r = "y" : Math.abs(e.x) > t && (r = "x"), r } class N3 extends kl { constructor(t) { super(t), this.removeGroupControls = da, this.removeListeners = da, this.controls = new M3(t) } mount() { const { dragControls: t } = this.node.getProps(); t && (this.removeGroupControls = t.subscribe(this.controls)), this.removeListeners = this.controls.addListeners() || da } update() { const { dragControls: t } = this.node.getProps(), { dragControls: r } = this.node.prevProps || {}; t !== r && (this.removeGroupControls(), t && (this.removeGroupControls = t.subscribe(this.controls))) } unmount() { this.removeGroupControls(), this.removeListeners() } } const kx = e => (t, r) => { e && Fn.postRender(() => e(t, r)) }; class B3 extends kl { constructor() { super(...arguments), this.removePointerDownListener = da } onPointerDown(t) { this.session = new CC(t, this.createPanHandlers(), { transformPagePoint: this.node.getTransformPagePoint(), contextWindow: EC(this.node) }) } createPanHandlers() { const { onPanSessionStart: t, onPanStart: r, onPan: n, onPanEnd: s } = this.node.getProps(); return { onSessionStart: kx(t), onStart: kx(r), onMove: n, onEnd: (o, a) => { delete this.session, s && Fn.postRender(() => s(o, a)) } } } mount() { this.removePointerDownListener = sp(this.node.current, "pointerdown", t => this.onPointerDown(t)) } update() { this.session && this.session.updateHandlers(this.createPanHandlers()) } unmount() { this.removePointerDownListener(), this.session && this.session.end() } } const tf = { hasAnimatedSinceResize: !0, hasEverUpdated: !1 }; let D0 = !1; class F3 extends J.Component { componentDidMount() { const { visualElement: t, layoutGroup: r, switchLayoutGroup: n, layoutId: s } = this.props, { projection: o } = t; o && (r.group && r.group.add(o), n && n.register && s && n.register(o), D0 && o.root.didUpdate(), o.addEventListener("animationComplete", () => { this.safeToRemove() }), o.setOptions({ ...o.options, onExitComplete: () => this.safeToRemove() })), tf.hasEverUpdated = !0 } getSnapshotBeforeUpdate(t) { const { layoutDependency: r, visualElement: n, drag: s, isPresent: o } = this.props, { projection: a } = n; return a && (a.isPresent = o, D0 = !0, s || t.layoutDependency !== r || r === void 0 || t.isPresent !== o ? a.willUpdate() : this.safeToRemove(), t.isPresent !== o && (o ? a.promote() : a.relegate() || Fn.postRender(() => { const c = a.getStack(); (!c || !c.members.length) && this.safeToRemove() }))), null } componentDidUpdate() { const { projection: t } = this.props.visualElement; t && (t.root.didUpdate(), Iy.postRender(() => { !t.currentAnimation && t.isLead() && this.safeToRemove() })) } componentWillUnmount() { const { visualElement: t, layoutGroup: r, switchLayoutGroup: n } = this.props, { projection: s } = t; D0 = !0, s && (s.scheduleCheckAfterUnmount(), r && r.group && r.group.remove(s), n && n.deregister && n.deregister(s)) } safeToRemove() { const { safeToRemove: t } = this.props; t && t() } render() { return null } } function kC(e) { const [t, r] = YE(), n = J.useContext(py); return i.jsx(F3, { ...e, layoutGroup: n, switchLayoutGroup: J.useContext(oC), isPresent: t, safeToRemove: r }) } function z3(e, t, r) { const n = es(e) ? e : Md(e); return n.start(Vy("", n, t, r)), n.animation } const $3 = (e, t) => e.depth - t.depth; class U3 { constructor() { this.children = [], this.isDirty = !1 } add(t) { my(this.children, t), this.isDirty = !0 } remove(t) { gy(this.children, t), this.isDirty = !0 } forEach(t) { this.isDirty && this.children.sort($3), this.isDirty = !1, this.children.forEach(t) } } function V3(e, t) { const r = cs.now(), n = ({ timestamp: s }) => { const o = s - r; o >= t && (_l(n), e(o - t)) }; return Fn.setup(n, !0), () => _l(n) } const TC = ["TopLeft", "TopRight", "BottomLeft", "BottomRight"], W3 = TC.length, Tx = e => typeof e == "string" ? parseFloat(e) : e, Ax = e => typeof e == "number" || Vt.test(e); function H3(e, t, r, n, s, o) { s ? (e.opacity = Qn(0, r.opacity ?? 1, q3(n)), e.opacityExit = Qn(t.opacity ?? 1, 0, G3(n))) : o && (e.opacity = Qn(t.opacity ?? 1, r.opacity ?? 1, n)); for (let a = 0; a < W3; a++) { const c = `border${TC[a]}Radius`; let l = Px(t, c), p = Px(r, c); if (l === void 0 && p === void 0) continue; l || (l = 0), p || (p = 0), l === 0 || p === 0 || Ax(l) === Ax(p) ? (e[c] = Math.max(Qn(Tx(l), Tx(p), n), 0), (ao.test(p) || ao.test(l)) && (e[c] += "%")) : e[c] = p } (t.rotate || r.rotate) && (e.rotate = Qn(t.rotate || 0, r.rotate || 0, n)) } function Px(e, t) { return e[t] !== void 0 ? e[t] : e.borderRadius } const q3 = AC(0, .5, hE), G3 = AC(.5, .95, da); function AC(e, t, r) { return n => n < e ? 0 : n > t ? 1 : r(Cp(e, t, n)) } function Dx(e, t) { e.min = t.min, e.max = t.max } function Aa(e, t) { Dx(e.x, t.x), Dx(e.y, t.y) } function Ix(e, t) { e.translate = t.translate, e.scale = t.scale, e.originPoint = t.originPoint, e.origin = t.origin } function jx(e, t, r, n, s) { return e -= t, e = Bf(e, 1 / r, n), s !== void 0 && (e = Bf(e, 1 / s, n)), e } function K3(e, t = 0, r = 1, n = .5, s, o = e, a = e) { if (ao.test(t) && (t = parseFloat(t), t = Qn(a.min, a.max, t / 100) - a.min), typeof t != "number") return; let c = Qn(o.min, o.max, n); e === o && (c -= t), e.min = jx(e.min, t, r, c, s), e.max = jx(e.max, t, r, c, s) } function Ox(e, t, [r, n, s], o, a) { K3(e, t[r], t[n], t[s], t.scale, o, a) } const Y3 = ["x", "scaleX", "originX"], Q3 = ["y", "scaleY", "originY"]; function Mx(e, t, r, n) { Ox(e.x, t, Y3, r ? r.x : void 0, n ? n.x : void 0), Ox(e.y, t, Q3, r ? r.y : void 0, n ? n.y : void 0) } function Lx(e) { return e.translate === 0 && e.scale === 1 } function PC(e) { return Lx(e.x) && Lx(e.y) } function Nx(e, t) { return e.min === t.min && e.max === t.max } function J3(e, t) { return Nx(e.x, t.x) && Nx(e.y, t.y) } function Bx(e, t) { return Math.round(e.min) === Math.round(t.min) && Math.round(e.max) === Math.round(t.max) } function DC(e, t) { return Bx(e.x, t.x) && Bx(e.y, t.y) } function Fx(e) { return ds(e.x) / ds(e.y) } function zx(e, t) { return e.translate === t.translate && e.scale === t.scale && e.originPoint === t.originPoint } class X3 { constructor() { this.members = [] } add(t) { my(this.members, t), t.scheduleRender() } remove(t) { if (gy(this.members, t), t === this.prevLead && (this.prevLead = void 0), t === this.lead) { const r = this.members[this.members.length - 1]; r && this.promote(r) } } relegate(t) { const r = this.members.findIndex(s => t === s); if (r === 0) return !1; let n; for (let s = r; s >= 0; s--) { const o = this.members[s]; if (o.isPresent !== !1) { n = o; break } } return n ? (this.promote(n), !0) : !1 } promote(t, r) { const n = this.lead; if (t !== n && (this.prevLead = n, this.lead = t, t.show(), n)) { n.instance && n.scheduleRender(), t.scheduleRender(), t.resumeFrom = n, r && (t.resumeFrom.preserveOpacity = !0), n.snapshot && (t.snapshot = n.snapshot, t.snapshot.latestValues = n.animationValues || n.latestValues), t.root && t.root.isUpdating && (t.isLayoutDirty = !0); const { crossfade: s } = t.options; s === !1 && n.hide() } } exitAnimationComplete() { this.members.forEach(t => { const { options: r, resumingFrom: n } = t; r.onExitComplete && r.onExitComplete(), n && n.options.onExitComplete && n.options.onExitComplete() }) } scheduleRender() { this.members.forEach(t => { t.instance && t.scheduleRender(!1) }) } removeLeadSnapshot() { this.lead && this.lead.snapshot && (this.lead.snapshot = void 0) } } function Z3(e, t, r) { let n = ""; const s = e.x.translate / t.x, o = e.y.translate / t.y, a = (r == null ? void 0 : r.z) || 0; if ((s || o || a) && (n = `translate3d(${s}px, ${o}px, ${a}px) `), (t.x !== 1 || t.y !== 1) && (n += `scale(${1 / t.x}, ${1 / t.y}) `), r) { const { transformPerspective: p, rotate: d, rotateX: f, rotateY: h, skewX: P, skewY: b } = r; p && (n = `perspective(${p}px) ${n}`), d && (n += `rotate(${d}deg) `), f && (n += `rotateX(${f}deg) `), h && (n += `rotateY(${h}deg) `), P && (n += `skewX(${P}deg) `), b && (n += `skewY(${b}deg) `) } const c = e.x.scale * t.x, l = e.y.scale * t.y; return (c !== 1 || l !== 1) && (n += `scale(${c}, ${l})`), n || "none" } const I0 = ["", "X", "Y", "Z"], eI = 1e3; let tI = 0; function j0(e, t, r, n) { const { latestValues: s } = t; s[e] && (r[e] = s[e], t.setStaticValue(e, 0), n && (n[e] = 0)) } function IC(e) { if (e.hasCheckedOptimisedAppear = !0, e.root === e) return; const { visualElement: t } = e.options; if (!t) return; const r = vC(t); if (window.MotionHasOptimisedAnimation(r, "transform")) { const { layout: s, layoutId: o } = e.options; window.MotionCancelOptimisedAnimation(r, "transform", Fn, !(s || o)) } const { parent: n } = e; n && !n.hasCheckedOptimisedAppear && IC(n) } function jC({ attachResizeListener: e, defaultParent: t, measureScroll: r, checkIsScrollRoot: n, resetTransform: s }) { return class { constructor(a = {}, c = t == null ? void 0 : t()) { this.id = tI++, this.animationId = 0, this.animationCommitId = 0, this.children = new Set, this.options = {}, this.isTreeAnimating = !1, this.isAnimationBlocked = !1, this.isLayoutDirty = !1, this.isProjectionDirty = !1, this.isSharedProjectionDirty = !1, this.isTransformDirty = !1, this.updateManuallyBlocked = !1, this.updateBlockedByResize = !1, this.isUpdating = !1, this.isSVG = !1, this.needsReset = !1, this.shouldResetTransform = !1, this.hasCheckedOptimisedAppear = !1, this.treeScale = { x: 1, y: 1 }, this.eventHandlers = new Map, this.hasTreeAnimated = !1, this.layoutVersion = 0, this.updateScheduled = !1, this.scheduleUpdate = () => this.update(), this.projectionUpdateScheduled = !1, this.checkUpdateFailed = () => { this.isUpdating && (this.isUpdating = !1, this.clearAllSnapshots()) }, this.updateProjection = () => { this.projectionUpdateScheduled = !1, this.nodes.forEach(iI), this.nodes.forEach(lI), this.nodes.forEach(cI), this.nodes.forEach(sI) }, this.resolvedRelativeTargetAt = 0, this.linkedParentVersion = 0, this.hasProjected = !1, this.isVisible = !0, this.animationProgress = 0, this.sharedNodes = new Map, this.latestValues = a, this.root = c ? c.root || c : this, this.path = c ? [...c.path, c] : [], this.parent = c, this.depth = c ? c.depth + 1 : 0; for (let l = 0; l < this.path.length; l++)this.path[l].shouldResetTransform = !0; this.root === this && (this.nodes = new U3) } addEventListener(a, c) { return this.eventHandlers.has(a) || this.eventHandlers.set(a, new yy), this.eventHandlers.get(a).add(c) } notifyListeners(a, ...c) { const l = this.eventHandlers.get(a); l && l.notify(...c) } hasListeners(a) { return this.eventHandlers.has(a) } mount(a) { if (this.instance) return; this.isSVG = KE(a) && !qP(a), this.instance = a; const { layoutId: c, layout: l, visualElement: p } = this.options; if (p && !p.current && p.mount(a), this.root.nodes.add(this), this.parent && this.parent.children.add(this), this.root.hasTreeAnimated && (l || c) && (this.isLayoutDirty = !0), e) { let d, f = 0; const h = () => this.root.updateBlockedByResize = !1; Fn.read(() => { f = window.innerWidth }), e(a, () => { const P = window.innerWidth; P !== f && (f = P, this.root.updateBlockedByResize = !0, d && d(), d = V3(h, 250), tf.hasAnimatedSinceResize && (tf.hasAnimatedSinceResize = !1, this.nodes.forEach(Vx))) }) } c && this.root.registerSharedNode(c, this), this.options.animate !== !1 && p && (c || l) && this.addEventListener("didUpdate", ({ delta: d, hasLayoutChanged: f, hasRelativeLayoutChanged: h, layout: P }) => { if (this.isTreeAnimationBlocked()) { this.target = void 0, this.relativeTarget = void 0; return } const b = this.options.transition || p.getDefaultTransition() || fI, { onLayoutAnimationStart: u, onLayoutAnimationComplete: g } = p.getProps(), S = !this.targetLayout || !DC(this.targetLayout, P), R = !f && h; if (this.options.layoutRoot || this.resumeFrom || R || f && (S || !this.currentAnimation)) { this.resumeFrom && (this.resumingFrom = this.resumeFrom, this.resumingFrom.resumingFrom = void 0); const y = { ...Py(b, "layout"), onPlay: u, onComplete: g }; (p.shouldReduceMotion || this.options.layoutRoot) && (y.delay = 0, y.type = !1), this.startAnimation(y), this.setAnimationOrigin(d, R) } else f || Vx(this), this.isLead() && this.options.onExitComplete && this.options.onExitComplete(); this.targetLayout = P }) } unmount() { this.options.layoutId && this.willUpdate(), this.root.nodes.remove(this); const a = this.getStack(); a && a.remove(this), this.parent && this.parent.children.delete(this), this.instance = void 0, this.eventHandlers.clear(), _l(this.updateProjection) } blockUpdate() { this.updateManuallyBlocked = !0 } unblockUpdate() { this.updateManuallyBlocked = !1 } isUpdateBlocked() { return this.updateManuallyBlocked || this.updateBlockedByResize } isTreeAnimationBlocked() { return this.isAnimationBlocked || this.parent && this.parent.isTreeAnimationBlocked() || !1 } startUpdate() { this.isUpdateBlocked() || (this.isUpdating = !0, this.nodes && this.nodes.forEach(dI), this.animationId++) } getTransformTemplate() { const { visualElement: a } = this.options; return a && a.getProps().transformTemplate } willUpdate(a = !0) { if (this.root.hasTreeAnimated = !0, this.root.isUpdateBlocked()) { this.options.onExitComplete && this.options.onExitComplete(); return } if (window.MotionCancelOptimisedAnimation && !this.hasCheckedOptimisedAppear && IC(this), !this.root.isUpdating && this.root.startUpdate(), this.isLayoutDirty) return; this.isLayoutDirty = !0; for (let d = 0; d < this.path.length; d++) { const f = this.path[d]; f.shouldResetTransform = !0, f.updateScroll("snapshot"), f.options.layoutRoot && f.willUpdate(!1) } const { layoutId: c, layout: l } = this.options; if (c === void 0 && !l) return; const p = this.getTransformTemplate(); this.prevTransformTemplateValue = p ? p(this.latestValues, "") : void 0, this.updateSnapshot(), a && this.notifyListeners("willUpdate") } update() { if (this.updateScheduled = !1, this.isUpdateBlocked()) { this.unblockUpdate(), this.clearAllSnapshots(), this.nodes.forEach($x); return } if (this.animationId <= this.animationCommitId) { this.nodes.forEach(Ux); return } this.animationCommitId = this.animationId, this.isUpdating ? (this.isUpdating = !1, this.nodes.forEach(oI), this.nodes.forEach(rI), this.nodes.forEach(nI)) : this.nodes.forEach(Ux), this.clearAllSnapshots(); const c = cs.now(); Bi.delta = oo(0, 1e3 / 60, c - Bi.timestamp), Bi.timestamp = c, Bi.isProcessing = !0, x0.update.process(Bi), x0.preRender.process(Bi), x0.render.process(Bi), Bi.isProcessing = !1 } didUpdate() { this.updateScheduled || (this.updateScheduled = !0, Iy.read(this.scheduleUpdate)) } clearAllSnapshots() { this.nodes.forEach(aI), this.sharedNodes.forEach(uI) } scheduleUpdateProjection() { this.projectionUpdateScheduled || (this.projectionUpdateScheduled = !0, Fn.preRender(this.updateProjection, !1, !0)) } scheduleCheckAfterUnmount() { Fn.postRender(() => { this.isLayoutDirty ? this.root.didUpdate() : this.root.checkUpdateFailed() }) } updateSnapshot() { this.snapshot || !this.instance || (this.snapshot = this.measure(), this.snapshot && !ds(this.snapshot.measuredBox.x) && !ds(this.snapshot.measuredBox.y) && (this.snapshot = void 0)) } updateLayout() { if (!this.instance || (this.updateScroll(), !(this.options.alwaysMeasureLayout && this.isLead()) && !this.isLayoutDirty)) return; if (this.resumeFrom && !this.resumeFrom.instance) for (let l = 0; l < this.path.length; l++)this.path[l].updateScroll(); const a = this.layout; this.layout = this.measure(!1), this.layoutVersion++, this.layoutCorrected = wi(), this.isLayoutDirty = !1, this.projectionDelta = void 0, this.notifyListeners("measure", this.layout.layoutBox); const { visualElement: c } = this.options; c && c.notify("LayoutMeasure", this.layout.layoutBox, a ? a.layoutBox : void 0) } updateScroll(a = "measure") { let c = !!(this.options.layoutScroll && this.instance); if (this.scroll && this.scroll.animationId === this.root.animationId && this.scroll.phase === a && (c = !1), c && this.instance) { const l = n(this.instance); this.scroll = { animationId: this.root.animationId, phase: a, isRoot: l, offset: r(this.instance), wasRoot: this.scroll ? this.scroll.isRoot : l } } } resetTransform() { if (!s) return; const a = this.isLayoutDirty || this.shouldResetTransform || this.options.alwaysMeasureLayout, c = this.projectionDelta && !PC(this.projectionDelta), l = this.getTransformTemplate(), p = l ? l(this.latestValues, "") : void 0, d = p !== this.prevTransformTemplateValue; a && this.instance && (c || lc(this.latestValues) || d) && (s(this.instance, p), this.shouldResetTransform = !1, this.scheduleRender()) } measure(a = !0) { const c = this.measurePageBox(); let l = this.removeElementScroll(c); return a && (l = this.removeTransform(l)), mI(l), { animationId: this.root.animationId, measuredBox: c, layoutBox: l, latestValues: {}, source: this.id } } measurePageBox() { var p; const { visualElement: a } = this.options; if (!a) return wi(); const c = a.measureViewportBox(); if (!(((p = this.scroll) == null ? void 0 : p.wasRoot) || this.path.some(gI))) { const { scroll: d } = this.root; d && (md(c.x, d.offset.x), md(c.y, d.offset.y)) } return c } removeElementScroll(a) { var l; const c = wi(); if (Aa(c, a), (l = this.scroll) != null && l.wasRoot) return c; for (let p = 0; p < this.path.length; p++) { const d = this.path[p], { scroll: f, options: h } = d; d !== this.root && f && h.layoutScroll && (f.wasRoot && Aa(c, a), md(c.x, f.offset.x), md(c.y, f.offset.y)) } return c } applyTransform(a, c = !1) { const l = wi(); Aa(l, a); for (let p = 0; p < this.path.length; p++) { const d = this.path[p]; !c && d.options.layoutScroll && d.scroll && d !== d.root && gd(l, { x: -d.scroll.offset.x, y: -d.scroll.offset.y }), lc(d.latestValues) && gd(l, d.latestValues) } return lc(this.latestValues) && gd(l, this.latestValues), l } removeTransform(a) { const c = wi(); Aa(c, a); for (let l = 0; l < this.path.length; l++) { const p = this.path[l]; if (!p.instance || !lc(p.latestValues)) continue; Qg(p.latestValues) && p.updateSnapshot(); const d = wi(), f = p.measurePageBox(); Aa(d, f), Mx(c, p.latestValues, p.snapshot ? p.snapshot.layoutBox : void 0, d) } return lc(this.latestValues) && Mx(c, this.latestValues), c } setTargetDelta(a) { this.targetDelta = a, this.root.scheduleUpdateProjection(), this.isProjectionDirty = !0 } setOptions(a) { this.options = { ...this.options, ...a, crossfade: a.crossfade !== void 0 ? a.crossfade : !0 } } clearMeasurements() { this.scroll = void 0, this.layout = void 0, this.snapshot = void 0, this.prevTransformTemplateValue = void 0, this.targetDelta = void 0, this.target = void 0, this.isLayoutDirty = !1 } forceRelativeParentToResolveTarget() { this.relativeParent && this.relativeParent.resolvedRelativeTargetAt !== Bi.timestamp && this.relativeParent.resolveTargetDelta(!0) } resolveTargetDelta(a = !1) { var P; const c = this.getLead(); this.isProjectionDirty || (this.isProjectionDirty = c.isProjectionDirty), this.isTransformDirty || (this.isTransformDirty = c.isTransformDirty), this.isSharedProjectionDirty || (this.isSharedProjectionDirty = c.isSharedProjectionDirty); const l = !!this.resumingFrom || this !== c; if (!(a || l && this.isSharedProjectionDirty || this.isProjectionDirty || (P = this.parent) != null && P.isProjectionDirty || this.attemptToResolveRelativeTarget || this.root.updateBlockedByResize)) return; const { layout: d, layoutId: f } = this.options; if (!this.layout || !(d || f)) return; this.resolvedRelativeTargetAt = Bi.timestamp; const h = this.getClosestProjectingParent(); h && this.linkedParentVersion !== h.layoutVersion && !h.options.layoutRoot && this.removeRelativeTarget(), !this.targetDelta && !this.relativeTarget && (h && h.layout ? this.createRelativeTarget(h, this.layout.layoutBox, h.layout.layoutBox) : this.removeRelativeTarget()), !(!this.relativeTarget && !this.targetDelta) && (this.target || (this.target = wi(), this.targetWithTransforms = wi()), this.relativeTarget && this.relativeTargetOrigin && this.relativeParent && this.relativeParent.target ? (this.forceRelativeParentToResolveTarget(), E3(this.target, this.relativeTarget, this.relativeParent.target)) : this.targetDelta ? (this.resumingFrom ? this.target = this.applyTransform(this.layout.layoutBox) : Aa(this.target, this.layout.layoutBox), uC(this.target, this.targetDelta)) : Aa(this.target, this.layout.layoutBox), this.attemptToResolveRelativeTarget && (this.attemptToResolveRelativeTarget = !1, h && !!h.resumingFrom == !!this.resumingFrom && !h.options.layoutScroll && h.target && this.animationProgress !== 1 ? this.createRelativeTarget(h, this.target, h.target) : this.relativeParent = this.relativeTarget = void 0)) } getClosestProjectingParent() { if (!(!this.parent || Qg(this.parent.latestValues) || dC(this.parent.latestValues))) return this.parent.isProjecting() ? this.parent : this.parent.getClosestProjectingParent() } isProjecting() { return !!((this.relativeTarget || this.targetDelta || this.options.layoutRoot) && this.layout) } createRelativeTarget(a, c, l) { this.relativeParent = a, this.linkedParentVersion = a.layoutVersion, this.forceRelativeParentToResolveTarget(), this.relativeTarget = wi(), this.relativeTargetOrigin = wi(), Ff(this.relativeTargetOrigin, c, l), Aa(this.relativeTarget, this.relativeTargetOrigin) } removeRelativeTarget() { this.relativeParent = this.relativeTarget = void 0 } calcProjection() { var b; const a = this.getLead(), c = !!this.resumingFrom || this !== a; let l = !0; if ((this.isProjectionDirty || (b = this.parent) != null && b.isProjectionDirty) && (l = !1), c && (this.isSharedProjectionDirty || this.isTransformDirty) && (l = !1), this.resolvedRelativeTargetAt === Bi.timestamp && (l = !1), l) return; const { layout: p, layoutId: d } = this.options; if (this.isTreeAnimating = !!(this.parent && this.parent.isTreeAnimating || this.currentAnimation || this.pendingAnimation), this.isTreeAnimating || (this.targetDelta = this.relativeTarget = void 0), !this.layout || !(p || d)) return; Aa(this.layoutCorrected, this.layout.layoutBox); const f = this.treeScale.x, h = this.treeScale.y; LD(this.layoutCorrected, this.treeScale, this.path, c), a.layout && !a.target && (this.treeScale.x !== 1 || this.treeScale.y !== 1) && (a.target = a.layout.layoutBox, a.targetWithTransforms = wi()); const { target: P } = a; if (!P) { this.prevProjectionDelta && (this.createProjectionDeltas(), this.scheduleRender()); return } !this.projectionDelta || !this.prevProjectionDelta ? this.createProjectionDeltas() : (Ix(this.prevProjectionDelta.x, this.projectionDelta.x), Ix(this.prevProjectionDelta.y, this.projectionDelta.y)), ap(this.projectionDelta, this.layoutCorrected, P, this.latestValues), (this.treeScale.x !== f || this.treeScale.y !== h || !zx(this.projectionDelta.x, this.prevProjectionDelta.x) || !zx(this.projectionDelta.y, this.prevProjectionDelta.y)) && (this.hasProjected = !0, this.scheduleRender(), this.notifyListeners("projectionUpdate", P)) } hide() { this.isVisible = !1 } show() { this.isVisible = !0 } scheduleRender(a = !0) { var c; if ((c = this.options.visualElement) == null || c.scheduleRender(), a) { const l = this.getStack(); l && l.scheduleRender() } this.resumingFrom && !this.resumingFrom.instance && (this.resumingFrom = void 0) } createProjectionDeltas() { this.prevProjectionDelta = vd(), this.projectionDelta = vd(), this.projectionDeltaWithTransform = vd() } setAnimationOrigin(a, c = !1) { const l = this.snapshot, p = l ? l.latestValues : {}, d = { ...this.latestValues }, f = vd(); (!this.relativeParent || !this.relativeParent.options.layoutRoot) && (this.relativeTarget = this.relativeTargetOrigin = void 0), this.attemptToResolveRelativeTarget = !c; const h = wi(), P = l ? l.source : void 0, b = this.layout ? this.layout.source : void 0, u = P !== b, g = this.getStack(), S = !g || g.members.length <= 1, R = !!(u && !S && this.options.crossfade === !0 && !this.path.some(hI)); this.animationProgress = 0; let y; this.mixTargetDelta = v => { const D = v / 1e3; Wx(f.x, a.x, D), Wx(f.y, a.y, D), this.setTargetDelta(f), this.relativeTarget && this.relativeTargetOrigin && this.layout && this.relativeParent && this.relativeParent.layout && (Ff(h, this.layout.layoutBox, this.relativeParent.layout.layoutBox), pI(this.relativeTarget, this.relativeTargetOrigin, h, D), y && J3(this.relativeTarget, y) && (this.isProjectionDirty = !1), y || (y = wi()), Aa(y, this.relativeTarget)), u && (this.animationValues = d, H3(d, p, this.latestValues, D, R, S)), this.root.scheduleUpdateProjection(), this.scheduleRender(), this.animationProgress = D }, this.mixTargetDelta(this.options.layoutRoot ? 1e3 : 0) } startAnimation(a) { var c, l, p; this.notifyListeners("animationStart"), (c = this.currentAnimation) == null || c.stop(), (p = (l = this.resumingFrom) == null ? void 0 : l.currentAnimation) == null || p.stop(), this.pendingAnimation && (_l(this.pendingAnimation), this.pendingAnimation = void 0), this.pendingAnimation = Fn.update(() => { tf.hasAnimatedSinceResize = !0, this.motionValue || (this.motionValue = Md(0)), this.currentAnimation = z3(this.motionValue, [0, 1e3], { ...a, velocity: 0, isSync: !0, onUpdate: d => { this.mixTargetDelta(d), a.onUpdate && a.onUpdate(d) }, onStop: () => { }, onComplete: () => { a.onComplete && a.onComplete(), this.completeAnimation() } }), this.resumingFrom && (this.resumingFrom.currentAnimation = this.currentAnimation), this.pendingAnimation = void 0 }) } completeAnimation() { this.resumingFrom && (this.resumingFrom.currentAnimation = void 0, this.resumingFrom.preserveOpacity = void 0); const a = this.getStack(); a && a.exitAnimationComplete(), this.resumingFrom = this.currentAnimation = this.animationValues = void 0, this.notifyListeners("animationComplete") } finishAnimation() { this.currentAnimation && (this.mixTargetDelta && this.mixTargetDelta(eI), this.currentAnimation.stop()), this.completeAnimation() } applyTransformsToTarget() { const a = this.getLead(); let { targetWithTransforms: c, target: l, layout: p, latestValues: d } = a; if (!(!c || !l || !p)) { if (this !== a && this.layout && p && OC(this.options.animationType, this.layout.layoutBox, p.layoutBox)) { l = this.target || wi(); const f = ds(this.layout.layoutBox.x); l.x.min = a.target.x.min, l.x.max = l.x.min + f; const h = ds(this.layout.layoutBox.y); l.y.min = a.target.y.min, l.y.max = l.y.min + h } Aa(c, l), gd(c, d), ap(this.projectionDeltaWithTransform, this.layoutCorrected, c, d) } } registerSharedNode(a, c) { this.sharedNodes.has(a) || this.sharedNodes.set(a, new X3), this.sharedNodes.get(a).add(c); const p = c.options.initialPromotionConfig; c.promote({ transition: p ? p.transition : void 0, preserveFollowOpacity: p && p.shouldPreserveFollowOpacity ? p.shouldPreserveFollowOpacity(c) : void 0 }) } isLead() { const a = this.getStack(); return a ? a.lead === this : !0 } getLead() { var c; const { layoutId: a } = this.options; return a ? ((c = this.getStack()) == null ? void 0 : c.lead) || this : this } getPrevLead() { var c; const { layoutId: a } = this.options; return a ? (c = this.getStack()) == null ? void 0 : c.prevLead : void 0 } getStack() { const { layoutId: a } = this.options; if (a) return this.root.sharedNodes.get(a) } promote({ needsReset: a, transition: c, preserveFollowOpacity: l } = {}) { const p = this.getStack(); p && p.promote(this, l), a && (this.projectionDelta = void 0, this.needsReset = !0), c && this.setOptions({ transition: c }) } relegate() { const a = this.getStack(); return a ? a.relegate(this) : !1 } resetSkewAndRotation() { const { visualElement: a } = this.options; if (!a) return; let c = !1; const { latestValues: l } = a; if ((l.z || l.rotate || l.rotateX || l.rotateY || l.rotateZ || l.skewX || l.skewY) && (c = !0), !c) return; const p = {}; l.z && j0("z", a, p, this.animationValues); for (let d = 0; d < I0.length; d++)j0(`rotate${I0[d]}`, a, p, this.animationValues), j0(`skew${I0[d]}`, a, p, this.animationValues); a.render(); for (const d in p) a.setStaticValue(d, p[d]), this.animationValues && (this.animationValues[d] = p[d]); a.scheduleRender() } applyProjectionStyles(a, c) { if (!this.instance || this.isSVG) return; if (!this.isVisible) { a.visibility = "hidden"; return } const l = this.getTransformTemplate(); if (this.needsReset) { this.needsReset = !1, a.visibility = "", a.opacity = "", a.pointerEvents = ef(c == null ? void 0 : c.pointerEvents) || "", a.transform = l ? l(this.latestValues, "") : "none"; return } const p = this.getLead(); if (!this.projectionDelta || !this.layout || !p.target) { this.options.layoutId && (a.opacity = this.latestValues.opacity !== void 0 ? this.latestValues.opacity : 1, a.pointerEvents = ef(c == null ? void 0 : c.pointerEvents) || ""), this.hasProjected && !lc(this.latestValues) && (a.transform = l ? l({}, "") : "none", this.hasProjected = !1); return } a.visibility = ""; const d = p.animationValues || p.latestValues; this.applyTransformsToTarget(); let f = Z3(this.projectionDeltaWithTransform, this.treeScale, d); l && (f = l(d, f)), a.transform = f; const { x: h, y: P } = this.projectionDelta; a.transformOrigin = `${h.origin * 100}% ${P.origin * 100}% 0`, p.animationValues ? a.opacity = p === this ? d.opacity ?? this.latestValues.opacity ?? 1 : this.preserveOpacity ? this.latestValues.opacity : d.opacityExit : a.opacity = p === this ? d.opacity !== void 0 ? d.opacity : "" : d.opacityExit !== void 0 ? d.opacityExit : 0; for (const b in Yg) { if (d[b] === void 0) continue; const { correct: u, applyTo: g, isCSSVariable: S } = Yg[b], R = f === "none" ? d[b] : u(d[b], p); if (g) { const y = g.length; for (let v = 0; v < y; v++)a[g[v]] = R } else S ? this.options.visualElement.renderState.vars[b] = R : a[b] = R } this.options.layoutId && (a.pointerEvents = p === this ? ef(c == null ? void 0 : c.pointerEvents) || "" : "none") } clearSnapshot() { this.resumeFrom = this.snapshot = void 0 } resetTree() { this.root.nodes.forEach(a => { var c; return (c = a.currentAnimation) == null ? void 0 : c.stop() }), this.root.nodes.forEach($x), this.root.sharedNodes.clear() } } } function rI(e) { e.updateLayout() } function nI(e) { var r; const t = ((r = e.resumeFrom) == null ? void 0 : r.snapshot) || e.snapshot; if (e.isLead() && e.layout && t && e.hasListeners("didUpdate")) { const { layoutBox: n, measuredBox: s } = e.layout, { animationType: o } = e.options, a = t.source !== e.layout.source; o === "size" ? ia(f => { const h = a ? t.measuredBox[f] : t.layoutBox[f], P = ds(h); h.min = n[f].min, h.max = h.min + P }) : OC(o, t.layoutBox, n) && ia(f => { const h = a ? t.measuredBox[f] : t.layoutBox[f], P = ds(n[f]); h.max = h.min + P, e.relativeTarget && !e.currentAnimation && (e.isProjectionDirty = !0, e.relativeTarget[f].max = e.relativeTarget[f].min + P) }); const c = vd(); ap(c, n, t.layoutBox); const l = vd(); a ? ap(l, e.applyTransform(s, !0), t.measuredBox) : ap(l, n, t.layoutBox); const p = !PC(c); let d = !1; if (!e.resumeFrom) { const f = e.getClosestProjectingParent(); if (f && !f.resumeFrom) { const { snapshot: h, layout: P } = f; if (h && P) { const b = wi(); Ff(b, t.layoutBox, h.layoutBox); const u = wi(); Ff(u, n, P.layoutBox), DC(b, u) || (d = !0), f.options.layoutRoot && (e.relativeTarget = u, e.relativeTargetOrigin = b, e.relativeParent = f) } } } e.notifyListeners("didUpdate", { layout: n, snapshot: t, delta: l, layoutDelta: c, hasLayoutChanged: p, hasRelativeLayoutChanged: d }) } else if (e.isLead()) { const { onExitComplete: n } = e.options; n && n() } e.options.transition = void 0 } function iI(e) { e.parent && (e.isProjecting() || (e.isProjectionDirty = e.parent.isProjectionDirty), e.isSharedProjectionDirty || (e.isSharedProjectionDirty = !!(e.isProjectionDirty || e.parent.isProjectionDirty || e.parent.isSharedProjectionDirty)), e.isTransformDirty || (e.isTransformDirty = e.parent.isTransformDirty)) } function sI(e) { e.isProjectionDirty = e.isSharedProjectionDirty = e.isTransformDirty = !1 } function aI(e) { e.clearSnapshot() } function $x(e) { e.clearMeasurements() } function Ux(e) { e.isLayoutDirty = !1 } function oI(e) { const { visualElement: t } = e.options; t && t.getProps().onBeforeLayoutMeasure && t.notify("BeforeLayoutMeasure"), e.resetTransform() } function Vx(e) { e.finishAnimation(), e.targetDelta = e.relativeTarget = e.target = void 0, e.isProjectionDirty = !0 } function lI(e) { e.resolveTargetDelta() } function cI(e) { e.calcProjection() } function dI(e) { e.resetSkewAndRotation() } function uI(e) { e.removeLeadSnapshot() } function Wx(e, t, r) { e.translate = Qn(t.translate, 0, r), e.scale = Qn(t.scale, 1, r), e.origin = t.origin, e.originPoint = t.originPoint } function Hx(e, t, r, n) { e.min = Qn(t.min, r.min, n), e.max = Qn(t.max, r.max, n) } function pI(e, t, r, n) { Hx(e.x, t.x, r.x, n), Hx(e.y, t.y, r.y, n) } function hI(e) { return e.animationValues && e.animationValues.opacityExit !== void 0 } const fI = { duration: .45, ease: [.4, 0, .1, 1] }, qx = e => typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().includes(e), Gx = qx("applewebkit/") && !qx("chrome/") ? Math.round : da; function Kx(e) { e.min = Gx(e.min), e.max = Gx(e.max) } function mI(e) { Kx(e.x), Kx(e.y) } function OC(e, t, r) { return e === "position" || e === "preserve-aspect" && !S3(Fx(t), Fx(r), .2) } function gI(e) { var t; return e !== e.root && ((t = e.scroll) == null ? void 0 : t.wasRoot) } const vI = jC({ attachResizeListener: (e, t) => Ap(e, "resize", t), measureScroll: () => ({ x: document.documentElement.scrollLeft || document.body.scrollLeft, y: document.documentElement.scrollTop || document.body.scrollTop }), checkIsScrollRoot: () => !0 }), O0 = { current: void 0 }, MC = jC({ measureScroll: e => ({ x: e.scrollLeft, y: e.scrollTop }), defaultParent: () => { if (!O0.current) { const e = new vI({}); e.mount(window), e.setOptions({ layoutScroll: !0 }), O0.current = e } return O0.current }, resetTransform: (e, t) => { e.style.transform = t !== void 0 ? t : "none" }, checkIsScrollRoot: e => window.getComputedStyle(e).position === "fixed" }), yI = { pan: { Feature: B3 }, drag: { Feature: N3, ProjectionNode: MC, MeasureLayout: kC } }; function Yx(e, t, r) { const { props: n } = e; e.animationState && n.whileHover && e.animationState.setActive("whileHover", r === "Start"); const s = "onHover" + r, o = n[s]; o && Fn.postRender(() => o(t, $p(t))) } class bI extends kl { mount() { const { current: t } = this.node; t && (this.unmount = UP(t, (r, n) => (Yx(this.node, n, "Start"), s => Yx(this.node, s, "End")))) } unmount() { } } class xI extends kl { constructor() { super(...arguments), this.isActive = !1 } onFocus() { let t = !1; try { t = this.node.current.matches(":focus-visible") } catch { t = !0 } !t || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !0), this.isActive = !0) } onBlur() { !this.isActive || !this.node.animationState || (this.node.animationState.setActive("whileFocus", !1), this.isActive = !1) } mount() { this.unmount = Bp(Ap(this.node.current, "focus", () => this.onFocus()), Ap(this.node.current, "blur", () => this.onBlur())) } unmount() { } } function Qx(e, t, r) { const { props: n } = e; if (e.current instanceof HTMLButtonElement && e.current.disabled) return; e.animationState && n.whileTap && e.animationState.setActive("whileTap", r === "Start"); const s = "onTap" + (r === "End" ? "" : r), o = n[s]; o && Fn.postRender(() => o(t, $p(t))) } class _I extends kl { mount() { const { current: t } = this.node; t && (this.unmount = HP(t, (r, n) => (Qx(this.node, n, "Start"), (s, { success: o }) => Qx(this.node, s, o ? "End" : "Cancel")), { useGlobalTarget: this.node.props.globalTapTarget })) } unmount() { } } const nv = new WeakMap, M0 = new WeakMap, wI = e => { const t = nv.get(e.target); t && t(e) }, SI = e => { e.forEach(wI) }; function EI({ root: e, ...t }) { const r = e || document; M0.has(r) || M0.set(r, {}); const n = M0.get(r), s = JSON.stringify(t); return n[s] || (n[s] = new IntersectionObserver(SI, { root: e, ...t })), n[s] } function CI(e, t, r) { const n = EI(t); return nv.set(e, r), n.observe(e), () => { nv.delete(e), n.unobserve(e) } } const RI = { some: 0, all: 1 }; class kI extends kl { constructor() { super(...arguments), this.hasEnteredView = !1, this.isInView = !1 } startObserver() { this.unmount(); const { viewport: t = {} } = this.node.getProps(), { root: r, margin: n, amount: s = "some", once: o } = t, a = { root: r ? r.current : void 0, rootMargin: n, threshold: typeof s == "number" ? s : RI[s] }, c = l => { const { isIntersecting: p } = l; if (this.isInView === p || (this.isInView = p, o && !p && this.hasEnteredView)) return; p && (this.hasEnteredView = !0), this.node.animationState && this.node.animationState.setActive("whileInView", p); const { onViewportEnter: d, onViewportLeave: f } = this.node.getProps(), h = p ? d : f; h && h(l) }; return CI(this.node.current, a, c) } mount() { this.startObserver() } update() { if (typeof IntersectionObserver > "u") return; const { props: t, prevProps: r } = this.node;["amount", "margin", "root"].some(TI(t, r)) && this.startObserver() } unmount() { } } function TI({ viewport: e = {} }, { viewport: t = {} } = {}) { return r => e[r] !== t[r] } const AI = { inView: { Feature: kI }, tap: { Feature: _I }, focus: { Feature: xI }, hover: { Feature: bI } }, PI = { layout: { ProjectionNode: MC, MeasureLayout: kC } }, DI = { ...v3, ...AI, ...yI, ...PI }, Wt = jD(DI, qD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II = e => e.replace(/([a-z0-9])([A-Z])/g, "$1-$2").toLowerCase(), jI = e => e.replace(/^([A-Z])|[\s-_]+(\w)/g, (t, r, n) => n ? n.toUpperCase() : r.toLowerCase()), Jx = e => { const t = jI(e); return t.charAt(0).toUpperCase() + t.slice(1) }, LC = (...e) => e.filter((t, r, n) => !!t && t.trim() !== "" && n.indexOf(t) === r).join(" ").trim(), OI = e => { for (const t in e) if (t.startsWith("aria-") || t === "role" || t === "title") return !0 };/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MI = { xmlns: "http://www.w3.org/2000/svg", width: 24, height: 24, viewBox: "0 0 24 24", fill: "none", stroke: "currentColor", strokeWidth: 2, strokeLinecap: "round", strokeLinejoin: "round" };/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI = J.forwardRef(({ color: e = "currentColor", size: t = 24, strokeWidth: r = 2, absoluteStrokeWidth: n, className: s = "", children: o, iconNode: a, ...c }, l) => J.createElement("svg", { ref: l, ...MI, width: t, height: t, stroke: e, strokeWidth: n ? Number(r) * 24 / Number(t) : r, className: LC("lucide", s), ...!o && !OI(c) && { "aria-hidden": "true" }, ...c }, [...a.map(([p, d]) => J.createElement(p, d)), ...Array.isArray(o) ? o : [o]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt = (e, t) => { const r = J.forwardRef(({ className: n, ...s }, o) => J.createElement(LI, { ref: o, iconNode: t, className: LC(`lucide-${II(Jx(e))}`, `lucide-${e}`, n), ...s })); return r.displayName = Jx(e), r };/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI = [["path", { d: "M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2", key: "169zse" }]], zf = Mt("activity", NI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI = [["path", { d: "m12 19-7-7 7-7", key: "1l729n" }], ["path", { d: "M19 12H5", key: "x3x0zl" }]], L0 = Mt("arrow-left", BI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI = [["path", { d: "m21 16-4 4-4-4", key: "f6ql7i" }], ["path", { d: "M17 20V4", key: "1ejh1v" }], ["path", { d: "m3 8 4-4 4 4", key: "11wl7u" }], ["path", { d: "M7 4v16", key: "1glfcx" }]], zI = Mt("arrow-up-down", FI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I = [["path", { d: "M10.268 21a2 2 0 0 0 3.464 0", key: "vwvbt9" }], ["path", { d: "M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326", key: "11g9vi" }]], $f = Mt("bell", $I);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI = [["path", { d: "M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8", key: "mg9rjx" }]], VI = Mt("bold", UI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI = [["path", { d: "M12 7v14", key: "1akyts" }], ["path", { d: "M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z", key: "ruj8y" }]], HI = Mt("book-open", WI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI = [["path", { d: "M10 12h4", key: "a56b0p" }], ["path", { d: "M10 8h4", key: "1sr2af" }], ["path", { d: "M14 21v-3a2 2 0 0 0-4 0v3", key: "1rgiei" }], ["path", { d: "M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2", key: "secmi2" }], ["path", { d: "M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16", key: "16ra0t" }]], GI = Mt("building-2", qI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI = [["path", { d: "M8 2v4", key: "1cmpym" }], ["path", { d: "M16 2v4", key: "4m81vk" }], ["rect", { width: "18", height: "18", x: "3", y: "4", rx: "2", key: "1hopcy" }], ["path", { d: "M3 10h18", key: "8toen8" }]], NC = Mt("calendar", KI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI = [["path", { d: "M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z", key: "18u6gg" }], ["circle", { cx: "12", cy: "13", r: "3", key: "1vg3eu" }]], rf = Mt("camera", YI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI = [["path", { d: "M3 3v16a2 2 0 0 0 2 2h16", key: "c24i48" }], ["path", { d: "M18 17V9", key: "2bz60n" }], ["path", { d: "M13 17V5", key: "1frdt8" }], ["path", { d: "M8 17v-3", key: "17ska0" }]], JI = Mt("chart-column", QI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XI = [["path", { d: "M20 6 9 17l-5-5", key: "1gmf2c" }]], ZI = Mt("check", XI);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej = [["path", { d: "m6 9 6 6 6-6", key: "qrunsl" }]], tj = Mt("chevron-down", ej);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj = [["path", { d: "m15 18-6-6 6-6", key: "1wnfg3" }]], BC = Mt("chevron-left", rj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj = [["path", { d: "m9 18 6-6-6-6", key: "mthhwq" }]], Yd = Mt("chevron-right", nj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["line", { x1: "12", x2: "12", y1: "8", y2: "12", key: "1pkeuh" }], ["line", { x1: "12", x2: "12.01", y1: "16", y2: "16", key: "4dfq90" }]], Qd = Mt("circle-alert", ij);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj = [["path", { d: "M21.801 10A10 10 0 1 1 17 3.335", key: "yps3ct" }], ["path", { d: "m9 11 3 3L22 4", key: "1pflzl" }]], li = Mt("circle-check-big", sj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "m15 9-6 6", key: "1uzhvr" }], ["path", { d: "m9 9 6 6", key: "z0biqf" }]], Cd = Mt("circle-x", aj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj = [["path", { d: "M12 6v6l4 2", key: "mmk7yg" }], ["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }]], Tl = Mt("clock", oj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj = [["rect", { width: "20", height: "14", x: "2", y: "5", rx: "2", key: "ynyp8z" }], ["line", { x1: "2", x2: "22", y1: "10", y2: "10", key: "1b3vmo" }]], ga = Mt("credit-card", lj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj = [["ellipse", { cx: "12", cy: "5", rx: "9", ry: "3", key: "msslwz" }], ["path", { d: "M3 5V19A9 3 0 0 0 21 19V5", key: "1wlel7" }], ["path", { d: "M3 12A9 3 0 0 0 21 12", key: "mv7ke4" }]], dj = Mt("database", cj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj = [["path", { d: "M12 15V3", key: "m9g1x1" }], ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }], ["path", { d: "m7 10 5 5 5-5", key: "brsn70" }]], Al = Mt("download", uj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj = [["path", { d: "M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49", key: "ct8e1f" }], ["path", { d: "M14.084 14.158a3 3 0 0 1-4.242-4.242", key: "151rxh" }], ["path", { d: "M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143", key: "13bj9a" }], ["path", { d: "m2 2 20 20", key: "1ooewy" }]], Uf = Mt("eye-off", pj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj = [["path", { d: "M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0", key: "1nclc0" }], ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]], Mo = Mt("eye", hj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj = [["path", { d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z", key: "1oefj6" }], ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }], ["path", { d: "M9 15h6", key: "cctwl0" }], ["path", { d: "M12 18v-6", key: "17g6i2" }]], mj = Mt("file-plus", fj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj = [["path", { d: "M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z", key: "1oefj6" }], ["path", { d: "M14 2v5a1 1 0 0 0 1 1h5", key: "wfsgrz" }], ["path", { d: "M10 9H8", key: "b1mrlr" }], ["path", { d: "M16 13H8", key: "t4e002" }], ["path", { d: "M16 17H8", key: "z1uh3a" }]], zn = Mt("file-text", gj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj = [["path", { d: "M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z", key: "sc7q7i" }]], yj = Mt("funnel", vj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj = [["path", { d: "m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381", key: "pgg06f" }], ["path", { d: "m16 16 6-6", key: "vzrcl6" }], ["path", { d: "m21.5 10.5-8-8", key: "a17d9x" }], ["path", { d: "m8 8 6-6", key: "18bi4p" }], ["path", { d: "m8.5 7.5 8 8", key: "1oyaui" }]], FC = Mt("gavel", bj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20", key: "13o1zl" }], ["path", { d: "M2 12h20", key: "9i4pu4" }]], _j = Mt("globe", xj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj = [["line", { x1: "4", x2: "20", y1: "9", y2: "9", key: "4lhtct" }], ["line", { x1: "4", x2: "20", y1: "15", y2: "15", key: "vyu0kd" }], ["line", { x1: "10", x2: "8", y1: "3", y2: "21", key: "1ggp8o" }], ["line", { x1: "16", x2: "14", y1: "3", y2: "21", key: "weycgp" }]], Sj = Mt("hash", wj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej = [["path", { d: "M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8", key: "1357e3" }], ["path", { d: "M3 3v5h5", key: "1xhq8a" }], ["path", { d: "M12 7v5l4 2", key: "1fdv2h" }]], Cj = Mt("history", Ej);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rj = [["rect", { width: "18", height: "18", x: "3", y: "3", rx: "2", ry: "2", key: "1m3agn" }], ["circle", { cx: "9", cy: "9", r: "2", key: "af1f0g" }], ["path", { d: "m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21", key: "1xmnt7" }]], Wy = Mt("image", Rj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj = [["circle", { cx: "12", cy: "12", r: "10", key: "1mglay" }], ["path", { d: "M12 16v-4", key: "1dtifu" }], ["path", { d: "M12 8h.01", key: "e9boi3" }]], Tj = Mt("info", kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aj = [["line", { x1: "19", x2: "10", y1: "4", y2: "4", key: "15jd3p" }], ["line", { x1: "14", x2: "5", y1: "20", y2: "20", key: "bu0au3" }], ["line", { x1: "15", x2: "9", y1: "4", y2: "20", key: "uljnxc" }]], Pj = Mt("italic", Aj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dj = [["path", { d: "M10 18v-7", key: "wt116b" }], ["path", { d: "M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z", key: "1m329m" }], ["path", { d: "M14 18v-7", key: "vav6t3" }], ["path", { d: "M18 18v-7", key: "aexdmj" }], ["path", { d: "M3 22h18", key: "8prr45" }], ["path", { d: "M6 18v-7", key: "1ivflk" }]], Hy = Mt("landmark", Dj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij = [["rect", { width: "7", height: "9", x: "3", y: "3", rx: "1", key: "10lvy0" }], ["rect", { width: "7", height: "5", x: "14", y: "3", rx: "1", key: "16une8" }], ["rect", { width: "7", height: "9", x: "14", y: "12", rx: "1", key: "1hutg5" }], ["rect", { width: "7", height: "5", x: "3", y: "16", rx: "1", key: "ldoo1y" }]], Pl = Mt("layout-dashboard", Ij);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj = [["path", { d: "M11 5h10", key: "1cz7ny" }], ["path", { d: "M11 12h10", key: "1438ji" }], ["path", { d: "M11 19h10", key: "11t30w" }], ["path", { d: "M4 4h1v5", key: "10yrso" }], ["path", { d: "M4 9h2", key: "r1h2o0" }], ["path", { d: "M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02", key: "xtkcd5" }]], Oj = Mt("list-ordered", jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mj = [["path", { d: "M3 5h.01", key: "18ugdj" }], ["path", { d: "M3 12h.01", key: "nlz23k" }], ["path", { d: "M3 19h.01", key: "noohij" }], ["path", { d: "M8 5h13", key: "1pao27" }], ["path", { d: "M8 12h13", key: "1za7za" }], ["path", { d: "M8 19h13", key: "m83p4d" }]], qy = Mt("list", Mj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lj = [["path", { d: "M21 12a9 9 0 1 1-6.219-8.56", key: "13zald" }]], Jn = Mt("loader-circle", Lj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj = [["rect", { width: "18", height: "11", x: "3", y: "11", rx: "2", ry: "2", key: "1w4ew1" }], ["path", { d: "M7 11V7a5 5 0 0 1 10 0v4", key: "fwvmzm" }]], Nd = Mt("lock", Nj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bj = [["path", { d: "m16 17 5-5-5-5", key: "1bji2h" }], ["path", { d: "M21 12H9", key: "dn1m92" }], ["path", { d: "M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4", key: "1uf3rs" }]], Ac = Mt("log-out", Bj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fj = [["path", { d: "m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7", key: "132q7q" }], ["rect", { x: "2", y: "4", width: "20", height: "16", rx: "2", key: "izxlao" }]], Dl = Mt("mail", Fj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zj = [["path", { d: "M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0", key: "1r0f0z" }], ["circle", { cx: "12", cy: "10", r: "3", key: "ilqhr7" }]], $j = Mt("map-pin", zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uj = [["path", { d: "M4 5h16", key: "1tepv9" }], ["path", { d: "M4 12h16", key: "1lakjw" }], ["path", { d: "M4 19h16", key: "1djgab" }]], Vj = Mt("menu", Uj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wj = [["path", { d: "M12 19v3", key: "npa21l" }], ["path", { d: "M15 9.34V5a3 3 0 0 0-5.68-1.33", key: "1gzdoj" }], ["path", { d: "M16.95 16.95A7 7 0 0 1 5 12v-2", key: "cqa7eg" }], ["path", { d: "M18.89 13.23A7 7 0 0 0 19 12v-2", key: "16hl24" }], ["path", { d: "m2 2 20 20", key: "1ooewy" }], ["path", { d: "M9 9v3a3 3 0 0 0 5.12 2.12", key: "r2i35w" }]], Gy = Mt("mic-off", Wj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hj = [["path", { d: "M12 19v3", key: "npa21l" }], ["path", { d: "M19 10v2a7 7 0 0 1-14 0v-2", key: "1vc78b" }], ["rect", { x: "9", y: "2", width: "6", height: "13", rx: "3", key: "s6n7sd" }]], zC = Mt("mic", Hj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qj = [["path", { d: "M13 21h8", key: "1jsn5i" }], ["path", { d: "M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z", key: "1a8usu" }]], iv = Mt("pen-line", qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gj = [["path", { d: "M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z", key: "1a8usu" }]], Jd = Mt("pen", Gj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kj = [["path", { d: "M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272", key: "1wngk7" }], ["path", { d: "M22 2 2 22", key: "y4kqgn" }], ["path", { d: "M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473", key: "10hv5p" }]], Yj = Mt("phone-off", Kj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj = [["path", { d: "M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384", key: "9njp5v" }]], $C = Mt("phone", Qj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jj = [["path", { d: "M5 12h14", key: "1ays0h" }], ["path", { d: "M12 5v14", key: "s699le" }]], Ky = Mt("plus", Jj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xj = [["path", { d: "M12 2v10", key: "mnfbl" }], ["path", { d: "M18.4 6.6a9 9 0 1 1-12.77.04", key: "obofu9" }]], UC = Mt("power", Xj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj = [["path", { d: "M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8", key: "v9h5vc" }], ["path", { d: "M21 3v5h-5", key: "1q7to0" }], ["path", { d: "M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16", key: "3uifl3" }], ["path", { d: "M8 16H3v5", key: "1cv678" }]], mm = Mt("refresh-cw", Zj);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5 = [["path", { d: "M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z", key: "1c8476" }], ["path", { d: "M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7", key: "1ydtos" }], ["path", { d: "M7 3v4a1 1 0 0 0 1 1h7", key: "t51u73" }]], gm = Mt("save", e5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5 = [["path", { d: "M12 3v18", key: "108xh3" }], ["path", { d: "m19 8 3 8a5 5 0 0 1-6 0zV7", key: "zcdpyk" }], ["path", { d: "M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1", key: "1yorad" }], ["path", { d: "m5 8 3 8a5 5 0 0 1-6 0zV7", key: "eua70x" }], ["path", { d: "M7 21h10", key: "1b0cd5" }]], Yy = Mt("scale", t5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5 = [["path", { d: "m21 21-4.34-4.34", key: "14j7rj" }], ["circle", { cx: "11", cy: "11", r: "8", key: "4ej97u" }]], vm = Mt("search", r5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5 = [["path", { d: "M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915", key: "1i5ecw" }], ["circle", { cx: "12", cy: "12", r: "3", key: "1v7zrd" }]], Rd = Mt("settings", n5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5 = [["path", { d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z", key: "oel41y" }], ["path", { d: "m9 12 2 2 4-4", key: "dzmm74" }]], VC = Mt("shield-check", i5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5 = [["path", { d: "M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z", key: "oel41y" }]], Cc = Mt("shield", s5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5 = [["path", { d: "M21 5H3", key: "1fi0y6" }], ["path", { d: "M17 12H7", key: "16if0g" }], ["path", { d: "M19 19H5", key: "vjpgq2" }]], o5 = Mt("text-align-center", a5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5 = [["path", { d: "M21 5H3", key: "1fi0y6" }], ["path", { d: "M21 12H9", key: "dn1m92" }], ["path", { d: "M21 19H7", key: "4cu937" }]], c5 = Mt("text-align-end", l5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5 = [["path", { d: "M21 5H3", key: "1fi0y6" }], ["path", { d: "M15 12H3", key: "6jk70r" }], ["path", { d: "M17 19H3", key: "z6ezky" }]], u5 = Mt("text-align-start", d5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5 = [["path", { d: "M10 11v6", key: "nco0om" }], ["path", { d: "M14 11v6", key: "outv1u" }], ["path", { d: "M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6", key: "miytrc" }], ["path", { d: "M3 6h18", key: "d0wm0j" }], ["path", { d: "M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2", key: "e791ji" }]], Xd = Mt("trash-2", p5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5 = [["path", { d: "M16 7h6v6", key: "box55l" }], ["path", { d: "m22 7-8.5 8.5-5-5L2 17", key: "1t1m79" }]], f5 = Mt("trending-up", h5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5 = [["path", { d: "M12 3v12", key: "1x0j5s" }], ["path", { d: "m17 8-5-5-5 5", key: "7q97r8" }], ["path", { d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4", key: "ih7n3h" }]], Bd = Mt("upload", m5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5 = [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }], ["line", { x1: "19", x2: "19", y1: "8", y2: "14", key: "1bvyxn" }], ["line", { x1: "22", x2: "16", y1: "11", y2: "11", key: "1shjgl" }]], WC = Mt("user-plus", g5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5 = [["path", { d: "M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2", key: "975kel" }], ["circle", { cx: "12", cy: "7", r: "4", key: "17ys0d" }]], Vn = Mt("user", v5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5 = [["path", { d: "M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2", key: "1yyitq" }], ["path", { d: "M16 3.128a4 4 0 0 1 0 7.744", key: "16gr8j" }], ["path", { d: "M22 21v-2a4 4 0 0 0-3-3.87", key: "kshegd" }], ["circle", { cx: "9", cy: "7", r: "4", key: "nufk8" }]], co = Mt("users", y5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5 = [["path", { d: "M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196", key: "w8jjjt" }], ["path", { d: "M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2", key: "1xawa7" }], ["path", { d: "m2 2 20 20", key: "1ooewy" }]], Vf = Mt("video-off", b5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5 = [["path", { d: "m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5", key: "ftymec" }], ["rect", { x: "2", y: "6", width: "14", height: "12", rx: "2", key: "158x01" }]], ua = Mt("video", x5);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5 = [["path", { d: "M18 6 6 18", key: "1bl5f8" }], ["path", { d: "m6 6 12 12", key: "d8bk6v" }]], za = Mt("x", _5), w5 = ({ isOpen: e, onClose: t, type: r = "info", title: n, message: s, onConfirm: o, confirmText: a = "OK", cancelText: c = "Cancel", showCancel: l = !1 }) => { if (!e) return null; const p = () => { switch (r) { case "success": return i.jsx(li, { size: 48, color: "#10b981" }); case "error": return i.jsx(Cd, { size: 48, color: "#f43f5e" }); case "warning": return i.jsx(Qd, { size: 48, color: "#f59e0b" }); default: return i.jsx(Tj, { size: 48, color: "#3b82f6" }) } }, d = f => { const h = { padding: "10px 24px", borderRadius: "8px", border: "none", fontSize: "14px", fontWeight: "600", cursor: "pointer", transition: "transform 0.1s" }; if (!f) return { ...h, background: "white", border: "1px solid #e2e8f0", color: "#778eaeff" }; let P = "#3b82f6"; return r === "success" && (P = "#10b981"), r === "error" && (P = "#f43f5e"), r === "warning" && (P = "#f59e0b"), { ...h, background: P, color: "white", boxShadow: "0 4px 6px -1px rgba(0, 0, 0, 0.1)" } }; return i.jsx(ma, { children: e && i.jsx("div", { style: { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, zIndex: 9999, background: "rgba(0, 0, 0, 0.5)", display: "flex", alignItems: "center", justifyContent: "center", backdropFilter: "blur(4px)", padding: "1rem" }, children: i.jsxs(Wt.div, { initial: { opacity: 0, scale: .95, y: 10 }, animate: { opacity: 1, scale: 1, y: 0 }, exit: { opacity: 0, scale: .95, y: 10 }, transition: { duration: .2 }, style: { background: "white", borderRadius: "16px", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)", width: "100%", maxWidth: "450px", position: "relative", overflow: "hidden" }, children: [i.jsx("button", { onClick: t, style: { position: "absolute", top: "16px", right: "16px", background: "transparent", border: "none", cursor: "pointer", padding: "4px", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", color: "#94a3b8" }, children: i.jsx(za, { size: 20 }) }), i.jsxs("div", { style: { padding: "2.5rem 2rem 2rem", textAlign: "center" }, children: [i.jsx("div", { style: { display: "flex", justifyContent: "center", marginBottom: "1.5rem" }, children: i.jsx("div", { style: { padding: "1rem", borderRadius: "50%", background: r === "success" ? "#ecfdf5" : r === "error" ? "#fff1f2" : r === "warning" ? "#fffbeb" : "#eff6ff" }, children: p() }) }), i.jsx("h3", { style: { margin: "0 0 0.75rem", fontSize: "1.5rem", fontWeight: "700", color: "rgb\(18 37 74\)" }, children: n }), i.jsx("p", { style: { color: "#778eaeff", marginBottom: "2rem", lineHeight: "1.6", fontSize: "15px" }, children: s }), i.jsxs("div", { style: { display: "flex", gap: "1rem", justifyContent: "center" }, children: [l && i.jsx("button", { onClick: () => { t && t() }, style: d(!1), children: c }), i.jsx("button", { onClick: () => { o && o(), t() }, style: d(!0), children: a })] })] })] }) }) }) }, HC = J.createContext(), S5 = ({ children: e }) => { const [t, r] = J.useState(!1), [n, s] = J.useState({ type: "info", title: "", message: "", onConfirm: null, confirmText: "OK", cancelText: "Cancel", showCancel: !1 }), o = J.useCallback(({ type: c = "info", title: l, message: p, onConfirm: d, confirmText: f = "OK", cancelText: h = "Cancel", showCancel: P = !1 }) => { s({ type: c, title: l, message: p, onConfirm: d, confirmText: f, cancelText: h, showCancel: P }), r(!0) }, []), a = J.useCallback(() => { r(!1) }, []); return i.jsxs(HC.Provider, { value: { showModal: o, hideModal: a }, children: [e, i.jsx(w5, { isOpen: t, onClose: a, ...n })] }) }, Pi = () => { const e = J.useContext(HC); if (!e) throw new Error("useModal must be used within a ModalProvider"); return e }; function qC(e, t) { return function () { return e.apply(t, arguments) } } const { toString: E5 } = Object.prototype, { getPrototypeOf: Qy } = Object, { iterator: ym, toStringTag: GC } = Symbol, bm = (e => t => { const r = E5.call(t); return e[r] || (e[r] = r.slice(8, -1).toLowerCase()) })(Object.create(null)), $a = e => (e = e.toLowerCase(), t => bm(t) === e), xm = e => t => typeof t === e, { isArray: Zd } = Array, Fd = xm("undefined"); function Up(e) { return e !== null && !Fd(e) && e.constructor !== null && !Fd(e.constructor) && Ps(e.constructor.isBuffer) && e.constructor.isBuffer(e) } const KC = $a("ArrayBuffer"); function C5(e) { let t; return typeof ArrayBuffer < "u" && ArrayBuffer.isView ? t = ArrayBuffer.isView(e) : t = e && e.buffer && KC(e.buffer), t } const R5 = xm("string"), Ps = xm("function"), YC = xm("number"), Vp = e => e !== null && typeof e == "object", k5 = e => e === !0 || e === !1, nf = e => { if (bm(e) !== "object") return !1; const t = Qy(e); return (t === null || t === Object.prototype || Object.getPrototypeOf(t) === null) && !(GC in e) && !(ym in e) }, T5 = e => { if (!Vp(e) || Up(e)) return !1; try { return Object.keys(e).length === 0 && Object.getPrototypeOf(e) === Object.prototype } catch { return !1 } }, A5 = $a("Date"), P5 = $a("File"), D5 = $a("Blob"), I5 = $a("FileList"), j5 = e => Vp(e) && Ps(e.pipe), O5 = e => { let t; return e && (typeof FormData == "function" && e instanceof FormData || Ps(e.append) && ((t = bm(e)) === "formdata" || t === "object" && Ps(e.toString) && e.toString() === "[object FormData]")) }, M5 = $a("URLSearchParams"), [L5, N5, B5, F5] = ["ReadableStream", "Request", "Response", "Headers"].map($a), z5 = e => e.trim ? e.trim() : e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, ""); function Wp(e, t, { allOwnKeys: r = !1 } = {}) { if (e === null || typeof e > "u") return; let n, s; if (typeof e != "object" && (e = [e]), Zd(e)) for (n = 0, s = e.length; n < s; n++)t.call(null, e[n], n, e); else { if (Up(e)) return; const o = r ? Object.getOwnPropertyNames(e) : Object.keys(e), a = o.length; let c; for (n = 0; n < a; n++)c = o[n], t.call(null, e[c], c, e) } } function QC(e, t) { if (Up(e)) return null; t = t.toLowerCase(); const r = Object.keys(e); let n = r.length, s; for (; n-- > 0;)if (s = r[n], t === s.toLowerCase()) return s; return null } const mc = (() => typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : typeof window < "u" ? window : global)(), JC = e => !Fd(e) && e !== mc; function sv() { const { caseless: e, skipUndefined: t } = JC(this) && this || {}, r = {}, n = (s, o) => { const a = e && QC(r, o) || o; nf(r[a]) && nf(s) ? r[a] = sv(r[a], s) : nf(s) ? r[a] = sv({}, s) : Zd(s) ? r[a] = s.slice() : (!t || !Fd(s)) && (r[a] = s) }; for (let s = 0, o = arguments.length; s < o; s++)arguments[s] && Wp(arguments[s], n); return r } const $5 = (e, t, r, { allOwnKeys: n } = {}) => (Wp(t, (s, o) => { r && Ps(s) ? e[o] = qC(s, r) : e[o] = s }, { allOwnKeys: n }), e), U5 = e => (e.charCodeAt(0) === 65279 && (e = e.slice(1)), e), V5 = (e, t, r, n) => { e.prototype = Object.create(t.prototype, n), e.prototype.constructor = e, Object.defineProperty(e, "super", { value: t.prototype }), r && Object.assign(e.prototype, r) }, W5 = (e, t, r, n) => { let s, o, a; const c = {}; if (t = t || {}, e == null) return t; do { for (s = Object.getOwnPropertyNames(e), o = s.length; o-- > 0;)a = s[o], (!n || n(a, e, t)) && !c[a] && (t[a] = e[a], c[a] = !0); e = r !== !1 && Qy(e) } while (e && (!r || r(e, t)) && e !== Object.prototype); return t }, H5 = (e, t, r) => { e = String(e), (r === void 0 || r > e.length) && (r = e.length), r -= t.length; const n = e.indexOf(t, r); return n !== -1 && n === r }, q5 = e => { if (!e) return null; if (Zd(e)) return e; let t = e.length; if (!YC(t)) return null; const r = new Array(t); for (; t-- > 0;)r[t] = e[t]; return r }, G5 = (e => t => e && t instanceof e)(typeof Uint8Array < "u" && Qy(Uint8Array)), K5 = (e, t) => { const n = (e && e[ym]).call(e); let s; for (; (s = n.next()) && !s.done;) { const o = s.value; t.call(e, o[0], o[1]) } }, Y5 = (e, t) => { let r; const n = []; for (; (r = e.exec(t)) !== null;)n.push(r); return n }, Q5 = $a("HTMLFormElement"), J5 = e => e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g, function (r, n, s) { return n.toUpperCase() + s }), Xx = (({ hasOwnProperty: e }) => (t, r) => e.call(t, r))(Object.prototype), X5 = $a("RegExp"), XC = (e, t) => { const r = Object.getOwnPropertyDescriptors(e), n = {}; Wp(r, (s, o) => { let a; (a = t(s, o, e)) !== !1 && (n[o] = a || s) }), Object.defineProperties(e, n) }, Z5 = e => { XC(e, (t, r) => { if (Ps(e) && ["arguments", "caller", "callee"].indexOf(r) !== -1) return !1; const n = e[r]; if (Ps(n)) { if (t.enumerable = !1, "writable" in t) { t.writable = !1; return } t.set || (t.set = () => { throw Error("Can not rewrite read-only method '" + r + "'") }) } }) }, eO = (e, t) => { const r = {}, n = s => { s.forEach(o => { r[o] = !0 }) }; return Zd(e) ? n(e) : n(String(e).split(t)), r }, tO = () => { }, rO = (e, t) => e != null && Number.isFinite(e = +e) ? e : t; function nO(e) { return !!(e && Ps(e.append) && e[GC] === "FormData" && e[ym]) } const iO = e => { const t = new Array(10), r = (n, s) => { if (Vp(n)) { if (t.indexOf(n) >= 0) return; if (Up(n)) return n; if (!("toJSON" in n)) { t[s] = n; const o = Zd(n) ? [] : {}; return Wp(n, (a, c) => { const l = r(a, s + 1); !Fd(l) && (o[c] = l) }), t[s] = void 0, o } } return n }; return r(e, 0) }, sO = $a("AsyncFunction"), aO = e => e && (Vp(e) || Ps(e)) && Ps(e.then) && Ps(e.catch), ZC = ((e, t) => e ? setImmediate : t ? ((r, n) => (mc.addEventListener("message", ({ source: s, data: o }) => { s === mc && o === r && n.length && n.shift()() }, !1), s => { n.push(s), mc.postMessage(r, "*") }))(`axios@${Math.random()}`, []) : r => setTimeout(r))(typeof setImmediate == "function", Ps(mc.postMessage)), oO = typeof queueMicrotask < "u" ? queueMicrotask.bind(mc) : typeof process < "u" && process.nextTick || ZC, lO = e => e != null && Ps(e[ym]), Pe = { isArray: Zd, isArrayBuffer: KC, isBuffer: Up, isFormData: O5, isArrayBufferView: C5, isString: R5, isNumber: YC, isBoolean: k5, isObject: Vp, isPlainObject: nf, isEmptyObject: T5, isReadableStream: L5, isRequest: N5, isResponse: B5, isHeaders: F5, isUndefined: Fd, isDate: A5, isFile: P5, isBlob: D5, isRegExp: X5, isFunction: Ps, isStream: j5, isURLSearchParams: M5, isTypedArray: G5, isFileList: I5, forEach: Wp, merge: sv, extend: $5, trim: z5, stripBOM: U5, inherits: V5, toFlatObject: W5, kindOf: bm, kindOfTest: $a, endsWith: H5, toArray: q5, forEachEntry: K5, matchAll: Y5, isHTMLForm: Q5, hasOwnProperty: Xx, hasOwnProp: Xx, reduceDescriptors: XC, freezeMethods: Z5, toObjectSet: eO, toCamelCase: J5, noop: tO, toFiniteNumber: rO, findKey: QC, global: mc, isContextDefined: JC, isSpecCompliantForm: nO, toJSONObject: iO, isAsyncFn: sO, isThenable: aO, setImmediate: ZC, asap: oO, isIterable: lO }; function Tr(e, t, r, n, s) { Error.call(this), Error.captureStackTrace ? Error.captureStackTrace(this, this.constructor) : this.stack = new Error().stack, this.message = e, this.name = "AxiosError", t && (this.code = t), r && (this.config = r), n && (this.request = n), s && (this.response = s, this.status = s.status ? s.status : null) } Pe.inherits(Tr, Error, { toJSON: function () { return { message: this.message, name: this.name, description: this.description, number: this.number, fileName: this.fileName, lineNumber: this.lineNumber, columnNumber: this.columnNumber, stack: this.stack, config: Pe.toJSONObject(this.config), code: this.code, status: this.status } } }); const e2 = Tr.prototype, t2 = {};["ERR_BAD_OPTION_VALUE", "ERR_BAD_OPTION", "ECONNABORTED", "ETIMEDOUT", "ERR_NETWORK", "ERR_FR_TOO_MANY_REDIRECTS", "ERR_DEPRECATED", "ERR_BAD_RESPONSE", "ERR_BAD_REQUEST", "ERR_CANCELED", "ERR_NOT_SUPPORT", "ERR_INVALID_URL"].forEach(e => { t2[e] = { value: e } }); Object.defineProperties(Tr, t2); Object.defineProperty(e2, "isAxiosError", { value: !0 }); Tr.from = (e, t, r, n, s, o) => { const a = Object.create(e2); Pe.toFlatObject(e, a, function (d) { return d !== Error.prototype }, p => p !== "isAxiosError"); const c = e && e.message ? e.message : "Error", l = t == null && e ? e.code : t; return Tr.call(a, c, l, r, n, s), e && a.cause == null && Object.defineProperty(a, "cause", { value: e, configurable: !0 }), a.name = e && e.name || "Error", o && Object.assign(a, o), a }; const cO = null; function av(e) { return Pe.isPlainObject(e) || Pe.isArray(e) } function r2(e) { return Pe.endsWith(e, "[]") ? e.slice(0, -2) : e } function Zx(e, t, r) { return e ? e.concat(t).map(function (s, o) { return s = r2(s), !r && o ? "[" + s + "]" : s }).join(r ? "." : "") : t } function dO(e) { return Pe.isArray(e) && !e.some(av) } const uO = Pe.toFlatObject(Pe, {}, null, function (t) { return /^is[A-Z]/.test(t) }); function _m(e, t, r) { if (!Pe.isObject(e)) throw new TypeError("target must be an object"); t = t || new FormData, r = Pe.toFlatObject(r, { metaTokens: !0, dots: !1, indexes: !1 }, !1, function (u, g) { return !Pe.isUndefined(g[u]) }); const n = r.metaTokens, s = r.visitor || d, o = r.dots, a = r.indexes, l = (r.Blob || typeof Blob < "u" && Blob) && Pe.isSpecCompliantForm(t); if (!Pe.isFunction(s)) throw new TypeError("visitor must be a function"); function p(b) { if (b === null) return ""; if (Pe.isDate(b)) return b.toISOString(); if (Pe.isBoolean(b)) return b.toString(); if (!l && Pe.isBlob(b)) throw new Tr("Blob is not supported. Use a Buffer instead."); return Pe.isArrayBuffer(b) || Pe.isTypedArray(b) ? l && typeof Blob == "function" ? new Blob([b]) : Buffer.from(b) : b } function d(b, u, g) { let S = b; if (b && !g && typeof b == "object") { if (Pe.endsWith(u, "{}")) u = n ? u : u.slice(0, -2), b = JSON.stringify(b); else if (Pe.isArray(b) && dO(b) || (Pe.isFileList(b) || Pe.endsWith(u, "[]")) && (S = Pe.toArray(b))) return u = r2(u), S.forEach(function (y, v) { !(Pe.isUndefined(y) || y === null) && t.append(a === !0 ? Zx([u], v, o) : a === null ? u : u + "[]", p(y)) }), !1 } return av(b) ? !0 : (t.append(Zx(g, u, o), p(b)), !1) } const f = [], h = Object.assign(uO, { defaultVisitor: d, convertValue: p, isVisitable: av }); function P(b, u) { if (!Pe.isUndefined(b)) { if (f.indexOf(b) !== -1) throw Error("Circular reference detected in " + u.join(".")); f.push(b), Pe.forEach(b, function (S, R) { (!(Pe.isUndefined(S) || S === null) && s.call(t, S, Pe.isString(R) ? R.trim() : R, u, h)) === !0 && P(S, u ? u.concat(R) : [R]) }), f.pop() } } if (!Pe.isObject(e)) throw new TypeError("data must be an object"); return P(e), t } function e_(e) { const t = { "!": "%21", "'": "%27", "(": "%28", ")": "%29", "~": "%7E", "%20": "+", "%00": "\0" }; return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g, function (n) { return t[n] }) } function Jy(e, t) { this._pairs = [], e && _m(e, this, t) } const n2 = Jy.prototype; n2.append = function (t, r) { this._pairs.push([t, r]) }; n2.toString = function (t) { const r = t ? function (n) { return t.call(this, n, e_) } : e_; return this._pairs.map(function (s) { return r(s[0]) + "=" + r(s[1]) }, "").join("&") }; function pO(e) { return encodeURIComponent(e).replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, "+") } function i2(e, t, r) { if (!t) return e; const n = r && r.encode || pO; Pe.isFunction(r) && (r = { serialize: r }); const s = r && r.serialize; let o; if (s ? o = s(t, r) : o = Pe.isURLSearchParams(t) ? t.toString() : new Jy(t, r).toString(n), o) { const a = e.indexOf("#"); a !== -1 && (e = e.slice(0, a)), e += (e.indexOf("?") === -1 ? "?" : "&") + o } return e } class hO { constructor() { this.handlers = [] } use(t, r, n) { return this.handlers.push({ fulfilled: t, rejected: r, synchronous: n ? n.synchronous : !1, runWhen: n ? n.runWhen : null }), this.handlers.length - 1 } eject(t) { this.handlers[t] && (this.handlers[t] = null) } clear() { this.handlers && (this.handlers = []) } forEach(t) { Pe.forEach(this.handlers, function (n) { n !== null && t(n) }) } } const t_ = hO, s2 = { silentJSONParsing: !0, forcedJSONParsing: !0, clarifyTimeoutError: !1 }, fO = typeof URLSearchParams < "u" ? URLSearchParams : Jy, mO = typeof FormData < "u" ? FormData : null, gO = typeof Blob < "u" ? Blob : null, vO = { isBrowser: !0, classes: { URLSearchParams: fO, FormData: mO, Blob: gO }, protocols: ["http", "https", "file", "blob", "url", "data"] }, Xy = typeof window < "u" && typeof document < "u", ov = typeof navigator == "object" && navigator || void 0, yO = Xy && (!ov || ["ReactNative", "NativeScript", "NS"].indexOf(ov.product) < 0), bO = (() => typeof WorkerGlobalScope < "u" && self instanceof WorkerGlobalScope && typeof self.importScripts == "function")(), xO = Xy && window.location.href || "http://localhost", _O = Object.freeze(Object.defineProperty({ __proto__: null, hasBrowserEnv: Xy, hasStandardBrowserEnv: yO, hasStandardBrowserWebWorkerEnv: bO, navigator: ov, origin: xO }, Symbol.toStringTag, { value: "Module" })), Zi = { ..._O, ...vO }; function wO(e, t) { return _m(e, new Zi.classes.URLSearchParams, { visitor: function (r, n, s, o) { return Zi.isNode && Pe.isBuffer(r) ? (this.append(n, r.toString("base64")), !1) : o.defaultVisitor.apply(this, arguments) }, ...t }) } function SO(e) { return Pe.matchAll(/\w+|\[(\w*)]/g, e).map(t => t[0] === "[]" ? "" : t[1] || t[0]) } function EO(e) { const t = {}, r = Object.keys(e); let n; const s = r.length; let o; for (n = 0; n < s; n++)o = r[n], t[o] = e[o]; return t } function a2(e) { function t(r, n, s, o) { let a = r[o++]; if (a === "__proto__") return !0; const c = Number.isFinite(+a), l = o >= r.length; return a = !a && Pe.isArray(s) ? s.length : a, l ? (Pe.hasOwnProp(s, a) ? s[a] = [s[a], n] : s[a] = n, !c) : ((!s[a] || !Pe.isObject(s[a])) && (s[a] = []), t(r, n, s[a], o) && Pe.isArray(s[a]) && (s[a] = EO(s[a])), !c) } if (Pe.isFormData(e) && Pe.isFunction(e.entries)) { const r = {}; return Pe.forEachEntry(e, (n, s) => { t(SO(n), s, r, 0) }), r } return null } function CO(e, t, r) { if (Pe.isString(e)) try { return (t || JSON.parse)(e), Pe.trim(e) } catch (n) { if (n.name !== "SyntaxError") throw n } return (r || JSON.stringify)(e) } const Zy = { transitional: s2, adapter: ["xhr", "http", "fetch"], transformRequest: [function (t, r) { const n = r.getContentType() || "", s = n.indexOf("application/json") > -1, o = Pe.isObject(t); if (o && Pe.isHTMLForm(t) && (t = new FormData(t)), Pe.isFormData(t)) return s ? JSON.stringify(a2(t)) : t; if (Pe.isArrayBuffer(t) || Pe.isBuffer(t) || Pe.isStream(t) || Pe.isFile(t) || Pe.isBlob(t) || Pe.isReadableStream(t)) return t; if (Pe.isArrayBufferView(t)) return t.buffer; if (Pe.isURLSearchParams(t)) return r.setContentType("application/x-www-form-urlencoded;charset=utf-8", !1), t.toString(); let c; if (o) { if (n.indexOf("application/x-www-form-urlencoded") > -1) return wO(t, this.formSerializer).toString(); if ((c = Pe.isFileList(t)) || n.indexOf("multipart/form-data") > -1) { const l = this.env && this.env.FormData; return _m(c ? { "files[]": t } : t, l && new l, this.formSerializer) } } return o || s ? (r.setContentType("application/json", !1), CO(t)) : t }], transformResponse: [function (t) { const r = this.transitional || Zy.transitional, n = r && r.forcedJSONParsing, s = this.responseType === "json"; if (Pe.isResponse(t) || Pe.isReadableStream(t)) return t; if (t && Pe.isString(t) && (n && !this.responseType || s)) { const a = !(r && r.silentJSONParsing) && s; try { return JSON.parse(t, this.parseReviver) } catch (c) { if (a) throw c.name === "SyntaxError" ? Tr.from(c, Tr.ERR_BAD_RESPONSE, this, null, this.response) : c } } return t }], timeout: 0, xsrfCookieName: "XSRF-TOKEN", xsrfHeaderName: "X-XSRF-TOKEN", maxContentLength: -1, maxBodyLength: -1, env: { FormData: Zi.classes.FormData, Blob: Zi.classes.Blob }, validateStatus: function (t) { return t >= 200 && t < 300 }, headers: { common: { Accept: "application/json, text/plain, */*", "Content-Type": void 0 } } }; Pe.forEach(["delete", "get", "head", "post", "put", "patch"], e => { Zy.headers[e] = {} }); const eb = Zy, RO = Pe.toObjectSet(["age", "authorization", "content-length", "content-type", "etag", "expires", "from", "host", "if-modified-since", "if-unmodified-since", "last-modified", "location", "max-forwards", "proxy-authorization", "referer", "retry-after", "user-agent"]), kO = e => {
    const t = {}; let r, n, s; return e && e.split(`
`).forEach(function (a) { s = a.indexOf(":"), r = a.substring(0, s).trim().toLowerCase(), n = a.substring(s + 1).trim(), !(!r || t[r] && RO[r]) && (r === "set-cookie" ? t[r] ? t[r].push(n) : t[r] = [n] : t[r] = t[r] ? t[r] + ", " + n : n) }), t
}, r_ = Symbol("internals"); function Fu(e) { return e && String(e).trim().toLowerCase() } function sf(e) { return e === !1 || e == null ? e : Pe.isArray(e) ? e.map(sf) : String(e) } function TO(e) { const t = Object.create(null), r = /([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g; let n; for (; n = r.exec(e);)t[n[1]] = n[2]; return t } const AO = e => /^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()); function N0(e, t, r, n, s) { if (Pe.isFunction(n)) return n.call(this, t, r); if (s && (t = r), !!Pe.isString(t)) { if (Pe.isString(n)) return t.indexOf(n) !== -1; if (Pe.isRegExp(n)) return n.test(t) } } function PO(e) { return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g, (t, r, n) => r.toUpperCase() + n) } function DO(e, t) { const r = Pe.toCamelCase(" " + t);["get", "set", "has"].forEach(n => { Object.defineProperty(e, n + r, { value: function (s, o, a) { return this[n].call(this, t, s, o, a) }, configurable: !0 }) }) } class wm {
    constructor(t) { t && this.set(t) } set(t, r, n) { const s = this; function o(c, l, p) { const d = Fu(l); if (!d) throw new Error("header name must be a non-empty string"); const f = Pe.findKey(s, d); (!f || s[f] === void 0 || p === !0 || p === void 0 && s[f] !== !1) && (s[f || l] = sf(c)) } const a = (c, l) => Pe.forEach(c, (p, d) => o(p, d, l)); if (Pe.isPlainObject(t) || t instanceof this.constructor) a(t, r); else if (Pe.isString(t) && (t = t.trim()) && !AO(t)) a(kO(t), r); else if (Pe.isObject(t) && Pe.isIterable(t)) { let c = {}, l, p; for (const d of t) { if (!Pe.isArray(d)) throw TypeError("Object iterator must return a key-value pair"); c[p = d[0]] = (l = c[p]) ? Pe.isArray(l) ? [...l, d[1]] : [l, d[1]] : d[1] } a(c, r) } else t != null && o(r, t, n); return this } get(t, r) { if (t = Fu(t), t) { const n = Pe.findKey(this, t); if (n) { const s = this[n]; if (!r) return s; if (r === !0) return TO(s); if (Pe.isFunction(r)) return r.call(this, s, n); if (Pe.isRegExp(r)) return r.exec(s); throw new TypeError("parser must be boolean|regexp|function") } } } has(t, r) { if (t = Fu(t), t) { const n = Pe.findKey(this, t); return !!(n && this[n] !== void 0 && (!r || N0(this, this[n], n, r))) } return !1 } delete(t, r) { const n = this; let s = !1; function o(a) { if (a = Fu(a), a) { const c = Pe.findKey(n, a); c && (!r || N0(n, n[c], c, r)) && (delete n[c], s = !0) } } return Pe.isArray(t) ? t.forEach(o) : o(t), s } clear(t) { const r = Object.keys(this); let n = r.length, s = !1; for (; n--;) { const o = r[n]; (!t || N0(this, this[o], o, t, !0)) && (delete this[o], s = !0) } return s } normalize(t) { const r = this, n = {}; return Pe.forEach(this, (s, o) => { const a = Pe.findKey(n, o); if (a) { r[a] = sf(s), delete r[o]; return } const c = t ? PO(o) : String(o).trim(); c !== o && delete r[o], r[c] = sf(s), n[c] = !0 }), this } concat(...t) { return this.constructor.concat(this, ...t) } toJSON(t) { const r = Object.create(null); return Pe.forEach(this, (n, s) => { n != null && n !== !1 && (r[s] = t && Pe.isArray(n) ? n.join(", ") : n) }), r } [Symbol.iterator]() { return Object.entries(this.toJSON())[Symbol.iterator]() } toString() {
        return Object.entries(this.toJSON()).map(([t, r]) => t + ": " + r).join(`
`)
    } getSetCookie() { return this.get("set-cookie") || [] } get [Symbol.toStringTag]() { return "AxiosHeaders" } static from(t) { return t instanceof this ? t : new this(t) } static concat(t, ...r) { const n = new this(t); return r.forEach(s => n.set(s)), n } static accessor(t) { const n = (this[r_] = this[r_] = { accessors: {} }).accessors, s = this.prototype; function o(a) { const c = Fu(a); n[c] || (DO(s, a), n[c] = !0) } return Pe.isArray(t) ? t.forEach(o) : o(t), this }
} wm.accessor(["Content-Type", "Content-Length", "Accept", "Accept-Encoding", "User-Agent", "Authorization"]); Pe.reduceDescriptors(wm.prototype, ({ value: e }, t) => { let r = t[0].toUpperCase() + t.slice(1); return { get: () => e, set(n) { this[r] = n } } }); Pe.freezeMethods(wm); const Ba = wm; function B0(e, t) { const r = this || eb, n = t || r, s = Ba.from(n.headers); let o = n.data; return Pe.forEach(e, function (c) { o = c.call(r, o, s.normalize(), t ? t.status : void 0) }), s.normalize(), o } function o2(e) { return !!(e && e.__CANCEL__) } function eu(e, t, r) { Tr.call(this, e ?? "canceled", Tr.ERR_CANCELED, t, r), this.name = "CanceledError" } Pe.inherits(eu, Tr, { __CANCEL__: !0 }); function l2(e, t, r) { const n = r.config.validateStatus; !r.status || !n || n(r.status) ? e(r) : t(new Tr("Request failed with status code " + r.status, [Tr.ERR_BAD_REQUEST, Tr.ERR_BAD_RESPONSE][Math.floor(r.status / 100) - 4], r.config, r.request, r)) } function IO(e) { const t = /^([-+\w]{1,25})(:?\/\/|:)/.exec(e); return t && t[1] || "" } function jO(e, t) { e = e || 10; const r = new Array(e), n = new Array(e); let s = 0, o = 0, a; return t = t !== void 0 ? t : 1e3, function (l) { const p = Date.now(), d = n[o]; a || (a = p), r[s] = l, n[s] = p; let f = o, h = 0; for (; f !== s;)h += r[f++], f = f % e; if (s = (s + 1) % e, s === o && (o = (o + 1) % e), p - a < t) return; const P = d && p - d; return P ? Math.round(h * 1e3 / P) : void 0 } } function OO(e, t) { let r = 0, n = 1e3 / t, s, o; const a = (p, d = Date.now()) => { r = d, s = null, o && (clearTimeout(o), o = null), e(...p) }; return [(...p) => { const d = Date.now(), f = d - r; f >= n ? a(p, d) : (s = p, o || (o = setTimeout(() => { o = null, a(s) }, n - f))) }, () => s && a(s)] } const Wf = (e, t, r = 3) => { let n = 0; const s = jO(50, 250); return OO(o => { const a = o.loaded, c = o.lengthComputable ? o.total : void 0, l = a - n, p = s(l), d = a <= c; n = a; const f = { loaded: a, total: c, progress: c ? a / c : void 0, bytes: l, rate: p || void 0, estimated: p && c && d ? (c - a) / p : void 0, event: o, lengthComputable: c != null, [t ? "download" : "upload"]: !0 }; e(f) }, r) }, n_ = (e, t) => { const r = e != null; return [n => t[0]({ lengthComputable: r, total: e, loaded: n }), t[1]] }, i_ = e => (...t) => Pe.asap(() => e(...t)), MO = Zi.hasStandardBrowserEnv ? ((e, t) => r => (r = new URL(r, Zi.origin), e.protocol === r.protocol && e.host === r.host && (t || e.port === r.port)))(new URL(Zi.origin), Zi.navigator && /(msie|trident)/i.test(Zi.navigator.userAgent)) : () => !0, LO = Zi.hasStandardBrowserEnv ? { write(e, t, r, n, s, o, a) { if (typeof document > "u") return; const c = [`${e}=${encodeURIComponent(t)}`]; Pe.isNumber(r) && c.push(`expires=${new Date(r).toUTCString()}`), Pe.isString(n) && c.push(`path=${n}`), Pe.isString(s) && c.push(`domain=${s}`), o === !0 && c.push("secure"), Pe.isString(a) && c.push(`SameSite=${a}`), document.cookie = c.join("; ") }, read(e) { if (typeof document > "u") return null; const t = document.cookie.match(new RegExp("(?:^|; )" + e + "=([^;]*)")); return t ? decodeURIComponent(t[1]) : null }, remove(e) { this.write(e, "", Date.now() - 864e5, "/") } } : { write() { }, read() { return null }, remove() { } }; function NO(e) { return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e) } function BO(e, t) { return t ? e.replace(/\/?\/$/, "") + "/" + t.replace(/^\/+/, "") : e } function c2(e, t, r) { let n = !NO(t); return e && (n || r == !1) ? BO(e, t) : t } const s_ = e => e instanceof Ba ? { ...e } : e; function Rc(e, t) { t = t || {}; const r = {}; function n(p, d, f, h) { return Pe.isPlainObject(p) && Pe.isPlainObject(d) ? Pe.merge.call({ caseless: h }, p, d) : Pe.isPlainObject(d) ? Pe.merge({}, d) : Pe.isArray(d) ? d.slice() : d } function s(p, d, f, h) { if (Pe.isUndefined(d)) { if (!Pe.isUndefined(p)) return n(void 0, p, f, h) } else return n(p, d, f, h) } function o(p, d) { if (!Pe.isUndefined(d)) return n(void 0, d) } function a(p, d) { if (Pe.isUndefined(d)) { if (!Pe.isUndefined(p)) return n(void 0, p) } else return n(void 0, d) } function c(p, d, f) { if (f in t) return n(p, d); if (f in e) return n(void 0, p) } const l = { url: o, method: o, data: o, baseURL: a, transformRequest: a, transformResponse: a, paramsSerializer: a, timeout: a, timeoutMessage: a, withCredentials: a, withXSRFToken: a, adapter: a, responseType: a, xsrfCookieName: a, xsrfHeaderName: a, onUploadProgress: a, onDownloadProgress: a, decompress: a, maxContentLength: a, maxBodyLength: a, beforeRedirect: a, transport: a, httpAgent: a, httpsAgent: a, cancelToken: a, socketPath: a, responseEncoding: a, validateStatus: c, headers: (p, d, f) => s(s_(p), s_(d), f, !0) }; return Pe.forEach(Object.keys({ ...e, ...t }), function (d) { const f = l[d] || s, h = f(e[d], t[d], d); Pe.isUndefined(h) && f !== c || (r[d] = h) }), r } const d2 = e => { const t = Rc({}, e); let { data: r, withXSRFToken: n, xsrfHeaderName: s, xsrfCookieName: o, headers: a, auth: c } = t; if (t.headers = a = Ba.from(a), t.url = i2(c2(t.baseURL, t.url, t.allowAbsoluteUrls), e.params, e.paramsSerializer), c && a.set("Authorization", "Basic " + btoa((c.username || "") + ":" + (c.password ? unescape(encodeURIComponent(c.password)) : ""))), Pe.isFormData(r)) { if (Zi.hasStandardBrowserEnv || Zi.hasStandardBrowserWebWorkerEnv) a.setContentType(void 0); else if (Pe.isFunction(r.getHeaders)) { const l = r.getHeaders(), p = ["content-type", "content-length"]; Object.entries(l).forEach(([d, f]) => { p.includes(d.toLowerCase()) && a.set(d, f) }) } } if (Zi.hasStandardBrowserEnv && (n && Pe.isFunction(n) && (n = n(t)), n || n !== !1 && MO(t.url))) { const l = s && o && LO.read(o); l && a.set(s, l) } return t }, FO = typeof XMLHttpRequest < "u", zO = FO && function (e) { return new Promise(function (r, n) { const s = d2(e); let o = s.data; const a = Ba.from(s.headers).normalize(); let { responseType: c, onUploadProgress: l, onDownloadProgress: p } = s, d, f, h, P, b; function u() { P && P(), b && b(), s.cancelToken && s.cancelToken.unsubscribe(d), s.signal && s.signal.removeEventListener("abort", d) } let g = new XMLHttpRequest; g.open(s.method.toUpperCase(), s.url, !0), g.timeout = s.timeout; function S() { if (!g) return; const y = Ba.from("getAllResponseHeaders" in g && g.getAllResponseHeaders()), D = { data: !c || c === "text" || c === "json" ? g.responseText : g.response, status: g.status, statusText: g.statusText, headers: y, config: e, request: g }; l2(function (W) { r(W), u() }, function (W) { n(W), u() }, D), g = null } "onloadend" in g ? g.onloadend = S : g.onreadystatechange = function () { !g || g.readyState !== 4 || g.status === 0 && !(g.responseURL && g.responseURL.indexOf("file:") === 0) || setTimeout(S) }, g.onabort = function () { g && (n(new Tr("Request aborted", Tr.ECONNABORTED, e, g)), g = null) }, g.onerror = function (v) { const D = v && v.message ? v.message : "Network Error", M = new Tr(D, Tr.ERR_NETWORK, e, g); M.event = v || null, n(M), g = null }, g.ontimeout = function () { let v = s.timeout ? "timeout of " + s.timeout + "ms exceeded" : "timeout exceeded"; const D = s.transitional || s2; s.timeoutErrorMessage && (v = s.timeoutErrorMessage), n(new Tr(v, D.clarifyTimeoutError ? Tr.ETIMEDOUT : Tr.ECONNABORTED, e, g)), g = null }, o === void 0 && a.setContentType(null), "setRequestHeader" in g && Pe.forEach(a.toJSON(), function (v, D) { g.setRequestHeader(D, v) }), Pe.isUndefined(s.withCredentials) || (g.withCredentials = !!s.withCredentials), c && c !== "json" && (g.responseType = s.responseType), p && ([h, b] = Wf(p, !0), g.addEventListener("progress", h)), l && g.upload && ([f, P] = Wf(l), g.upload.addEventListener("progress", f), g.upload.addEventListener("loadend", P)), (s.cancelToken || s.signal) && (d = y => { g && (n(!y || y.type ? new eu(null, e, g) : y), g.abort(), g = null) }, s.cancelToken && s.cancelToken.subscribe(d), s.signal && (s.signal.aborted ? d() : s.signal.addEventListener("abort", d))); const R = IO(s.url); if (R && Zi.protocols.indexOf(R) === -1) { n(new Tr("Unsupported protocol " + R + ":", Tr.ERR_BAD_REQUEST, e)); return } g.send(o || null) }) }, $O = (e, t) => { const { length: r } = e = e ? e.filter(Boolean) : []; if (t || r) { let n = new AbortController, s; const o = function (p) { if (!s) { s = !0, c(); const d = p instanceof Error ? p : this.reason; n.abort(d instanceof Tr ? d : new eu(d instanceof Error ? d.message : d)) } }; let a = t && setTimeout(() => { a = null, o(new Tr(`timeout ${t} of ms exceeded`, Tr.ETIMEDOUT)) }, t); const c = () => { e && (a && clearTimeout(a), a = null, e.forEach(p => { p.unsubscribe ? p.unsubscribe(o) : p.removeEventListener("abort", o) }), e = null) }; e.forEach(p => p.addEventListener("abort", o)); const { signal: l } = n; return l.unsubscribe = () => Pe.asap(c), l } }, UO = $O, VO = function* (e, t) { let r = e.byteLength; if (!t || r < t) { yield e; return } let n = 0, s; for (; n < r;)s = n + t, yield e.slice(n, s), n = s }, WO = async function* (e, t) { for await (const r of HO(e)) yield* VO(r, t) }, HO = async function* (e) { if (e[Symbol.asyncIterator]) { yield* e; return } const t = e.getReader(); try { for (; ;) { const { done: r, value: n } = await t.read(); if (r) break; yield n } } finally { await t.cancel() } }, a_ = (e, t, r, n) => { const s = WO(e, t); let o = 0, a, c = l => { a || (a = !0, n && n(l)) }; return new ReadableStream({ async pull(l) { try { const { done: p, value: d } = await s.next(); if (p) { c(), l.close(); return } let f = d.byteLength; if (r) { let h = o += f; r(h) } l.enqueue(new Uint8Array(d)) } catch (p) { throw c(p), p } }, cancel(l) { return c(l), s.return() } }, { highWaterMark: 2 }) }, o_ = 64 * 1024, { isFunction: Mh } = Pe, qO = (({ Request: e, Response: t }) => ({ Request: e, Response: t }))(Pe.global), { ReadableStream: l_, TextEncoder: c_ } = Pe.global, d_ = (e, ...t) => { try { return !!e(...t) } catch { return !1 } }, GO = e => { e = Pe.merge.call({ skipUndefined: !0 }, qO, e); const { fetch: t, Request: r, Response: n } = e, s = t ? Mh(t) : typeof fetch == "function", o = Mh(r), a = Mh(n); if (!s) return !1; const c = s && Mh(l_), l = s && (typeof c_ == "function" ? (b => u => b.encode(u))(new c_) : async b => new Uint8Array(await new r(b).arrayBuffer())), p = o && c && d_(() => { let b = !1; const u = new r(Zi.origin, { body: new l_, method: "POST", get duplex() { return b = !0, "half" } }).headers.has("Content-Type"); return b && !u }), d = a && c && d_(() => Pe.isReadableStream(new n("").body)), f = { stream: d && (b => b.body) }; s && ["text", "arrayBuffer", "blob", "formData", "stream"].forEach(b => { !f[b] && (f[b] = (u, g) => { let S = u && u[b]; if (S) return S.call(u); throw new Tr(`Response type '${b}' is not supported`, Tr.ERR_NOT_SUPPORT, g) }) }); const h = async b => { if (b == null) return 0; if (Pe.isBlob(b)) return b.size; if (Pe.isSpecCompliantForm(b)) return (await new r(Zi.origin, { method: "POST", body: b }).arrayBuffer()).byteLength; if (Pe.isArrayBufferView(b) || Pe.isArrayBuffer(b)) return b.byteLength; if (Pe.isURLSearchParams(b) && (b = b + ""), Pe.isString(b)) return (await l(b)).byteLength }, P = async (b, u) => { const g = Pe.toFiniteNumber(b.getContentLength()); return g ?? h(u) }; return async b => { let { url: u, method: g, data: S, signal: R, cancelToken: y, timeout: v, onDownloadProgress: D, onUploadProgress: M, responseType: W, headers: I, withCredentials: E = "same-origin", fetchOptions: _ } = d2(b), k = t || fetch; W = W ? (W + "").toLowerCase() : "text"; let L = UO([R, y && y.toAbortSignal()], v), H = null; const V = L && L.unsubscribe && (() => { L.unsubscribe() }); let ee; try { if (M && p && g !== "get" && g !== "head" && (ee = await P(I, S)) !== 0) { let le = new r(u, { method: "POST", body: S, duplex: "half" }), X; if (Pe.isFormData(S) && (X = le.headers.get("content-type")) && I.setContentType(X), le.body) { const [ce, he] = n_(ee, Wf(i_(M))); S = a_(le.body, o_, ce, he) } } Pe.isString(E) || (E = E ? "include" : "omit"); const K = o && "credentials" in r.prototype, N = { ..._, signal: L, method: g.toUpperCase(), headers: I.normalize().toJSON(), body: S, duplex: "half", credentials: K ? E : void 0 }; H = o && new r(u, N); let B = await (o ? k(H, _) : k(u, N)); const Q = d && (W === "stream" || W === "response"); if (d && (D || Q && V)) { const le = {};["status", "statusText", "headers"].forEach(ue => { le[ue] = B[ue] }); const X = Pe.toFiniteNumber(B.headers.get("content-length")), [ce, he] = D && n_(X, Wf(i_(D), !0)) || []; B = new n(a_(B.body, o_, ce, () => { he && he(), V && V() }), le) } W = W || "text"; let Z = await f[Pe.findKey(f, W) || "text"](B, b); return !Q && V && V(), await new Promise((le, X) => { l2(le, X, { data: Z, headers: Ba.from(B.headers), status: B.status, statusText: B.statusText, config: b, request: H }) }) } catch (K) { throw V && V(), K && K.name === "TypeError" && /Load failed|fetch/i.test(K.message) ? Object.assign(new Tr("Network Error", Tr.ERR_NETWORK, b, H), { cause: K.cause || K }) : Tr.from(K, K && K.code, b, H) } } }, KO = new Map, u2 = e => { let t = e && e.env || {}; const { fetch: r, Request: n, Response: s } = t, o = [n, s, r]; let a = o.length, c = a, l, p, d = KO; for (; c--;)l = o[c], p = d.get(l), p === void 0 && d.set(l, p = c ? new Map : GO(t)), d = p; return p }; u2(); const tb = { http: cO, xhr: zO, fetch: { get: u2 } }; Pe.forEach(tb, (e, t) => { if (e) { try { Object.defineProperty(e, "name", { value: t }) } catch { } Object.defineProperty(e, "adapterName", { value: t }) } }); const u_ = e => `- ${e}`, YO = e => Pe.isFunction(e) || e === null || e === !1; function QO(e, t) {
    e = Pe.isArray(e) ? e : [e]; const { length: r } = e; let n, s; const o = {}; for (let a = 0; a < r; a++) { n = e[a]; let c; if (s = n, !YO(n) && (s = tb[(c = String(n)).toLowerCase()], s === void 0)) throw new Tr(`Unknown adapter '${c}'`); if (s && (Pe.isFunction(s) || (s = s.get(t)))) break; o[c || "#" + a] = s } if (!s) {
        const a = Object.entries(o).map(([l, p]) => `adapter ${l} ` + (p === !1 ? "is not supported by the environment" : "is not available in the build")); let c = r ? a.length > 1 ? `since :
`+ a.map(u_).join(`
`) : " " + u_(a[0]) : "as no adapter specified"; throw new Tr("There is no suitable adapter to dispatch the request " + c, "ERR_NOT_SUPPORT")
    } return s
} const p2 = { getAdapter: QO, adapters: tb }; function F0(e) { if (e.cancelToken && e.cancelToken.throwIfRequested(), e.signal && e.signal.aborted) throw new eu(null, e) } function p_(e) { return F0(e), e.headers = Ba.from(e.headers), e.data = B0.call(e, e.transformRequest), ["post", "put", "patch"].indexOf(e.method) !== -1 && e.headers.setContentType("application/x-www-form-urlencoded", !1), p2.getAdapter(e.adapter || eb.adapter, e)(e).then(function (n) { return F0(e), n.data = B0.call(e, e.transformResponse, n), n.headers = Ba.from(n.headers), n }, function (n) { return o2(n) || (F0(e), n && n.response && (n.response.data = B0.call(e, e.transformResponse, n.response), n.response.headers = Ba.from(n.response.headers))), Promise.reject(n) }) } const h2 = "1.13.2", Sm = {};["object", "boolean", "number", "function", "string", "symbol"].forEach((e, t) => { Sm[e] = function (n) { return typeof n === e || "a" + (t < 1 ? "n " : " ") + e } }); const h_ = {}; Sm.transitional = function (t, r, n) { function s(o, a) { return "[Axios v" + h2 + "] Transitional option '" + o + "'" + a + (n ? ". " + n : "") } return (o, a, c) => { if (t === !1) throw new Tr(s(a, " has been removed" + (r ? " in " + r : "")), Tr.ERR_DEPRECATED); return r && !h_[a] && (h_[a] = !0, console.warn(s(a, " has been deprecated since v" + r + " and will be removed in the near future"))), t ? t(o, a, c) : !0 } }; Sm.spelling = function (t) { return (r, n) => (console.warn(`${n} is likely a misspelling of ${t}`), !0) }; function JO(e, t, r) { if (typeof e != "object") throw new Tr("options must be an object", Tr.ERR_BAD_OPTION_VALUE); const n = Object.keys(e); let s = n.length; for (; s-- > 0;) { const o = n[s], a = t[o]; if (a) { const c = e[o], l = c === void 0 || a(c, o, e); if (l !== !0) throw new Tr("option " + o + " must be " + l, Tr.ERR_BAD_OPTION_VALUE); continue } if (r !== !0) throw new Tr("Unknown option " + o, Tr.ERR_BAD_OPTION) } } const af = { assertOptions: JO, validators: Sm }, eo = af.validators; class Hf {
    constructor(t) { this.defaults = t || {}, this.interceptors = { request: new t_, response: new t_ } } async request(t, r) {
        try { return await this._request(t, r) } catch (n) {
            if (n instanceof Error) {
                let s = {}; Error.captureStackTrace ? Error.captureStackTrace(s) : s = new Error; const o = s.stack ? s.stack.replace(/^.+\n/, "") : ""; try {
                    n.stack ? o && !String(n.stack).endsWith(o.replace(/^.+\n.+\n/, "")) && (n.stack += `
`+ o) : n.stack = o
                } catch { }
            } throw n
        }
    } _request(t, r) { typeof t == "string" ? (r = r || {}, r.url = t) : r = t || {}, r = Rc(this.defaults, r); const { transitional: n, paramsSerializer: s, headers: o } = r; n !== void 0 && af.assertOptions(n, { silentJSONParsing: eo.transitional(eo.boolean), forcedJSONParsing: eo.transitional(eo.boolean), clarifyTimeoutError: eo.transitional(eo.boolean) }, !1), s != null && (Pe.isFunction(s) ? r.paramsSerializer = { serialize: s } : af.assertOptions(s, { encode: eo.function, serialize: eo.function }, !0)), r.allowAbsoluteUrls !== void 0 || (this.defaults.allowAbsoluteUrls !== void 0 ? r.allowAbsoluteUrls = this.defaults.allowAbsoluteUrls : r.allowAbsoluteUrls = !0), af.assertOptions(r, { baseUrl: eo.spelling("baseURL"), withXsrfToken: eo.spelling("withXSRFToken") }, !0), r.method = (r.method || this.defaults.method || "get").toLowerCase(); let a = o && Pe.merge(o.common, o[r.method]); o && Pe.forEach(["delete", "get", "head", "post", "put", "patch", "common"], b => { delete o[b] }), r.headers = Ba.concat(a, o); const c = []; let l = !0; this.interceptors.request.forEach(function (u) { typeof u.runWhen == "function" && u.runWhen(r) === !1 || (l = l && u.synchronous, c.unshift(u.fulfilled, u.rejected)) }); const p = []; this.interceptors.response.forEach(function (u) { p.push(u.fulfilled, u.rejected) }); let d, f = 0, h; if (!l) { const b = [p_.bind(this), void 0]; for (b.unshift(...c), b.push(...p), h = b.length, d = Promise.resolve(r); f < h;)d = d.then(b[f++], b[f++]); return d } h = c.length; let P = r; for (; f < h;) { const b = c[f++], u = c[f++]; try { P = b(P) } catch (g) { u.call(this, g); break } } try { d = p_.call(this, P) } catch (b) { return Promise.reject(b) } for (f = 0, h = p.length; f < h;)d = d.then(p[f++], p[f++]); return d } getUri(t) { t = Rc(this.defaults, t); const r = c2(t.baseURL, t.url, t.allowAbsoluteUrls); return i2(r, t.params, t.paramsSerializer) }
} Pe.forEach(["delete", "get", "head", "options"], function (t) { Hf.prototype[t] = function (r, n) { return this.request(Rc(n || {}, { method: t, url: r, data: (n || {}).data })) } }); Pe.forEach(["post", "put", "patch"], function (t) { function r(n) { return function (o, a, c) { return this.request(Rc(c || {}, { method: t, headers: n ? { "Content-Type": "multipart/form-data" } : {}, url: o, data: a })) } } Hf.prototype[t] = r(), Hf.prototype[t + "Form"] = r(!0) }); const of = Hf; class rb { constructor(t) { if (typeof t != "function") throw new TypeError("executor must be a function."); let r; this.promise = new Promise(function (o) { r = o }); const n = this; this.promise.then(s => { if (!n._listeners) return; let o = n._listeners.length; for (; o-- > 0;)n._listeners[o](s); n._listeners = null }), this.promise.then = s => { let o; const a = new Promise(c => { n.subscribe(c), o = c }).then(s); return a.cancel = function () { n.unsubscribe(o) }, a }, t(function (o, a, c) { n.reason || (n.reason = new eu(o, a, c), r(n.reason)) }) } throwIfRequested() { if (this.reason) throw this.reason } subscribe(t) { if (this.reason) { t(this.reason); return } this._listeners ? this._listeners.push(t) : this._listeners = [t] } unsubscribe(t) { if (!this._listeners) return; const r = this._listeners.indexOf(t); r !== -1 && this._listeners.splice(r, 1) } toAbortSignal() { const t = new AbortController, r = n => { t.abort(n) }; return this.subscribe(r), t.signal.unsubscribe = () => this.unsubscribe(r), t.signal } static source() { let t; return { token: new rb(function (s) { t = s }), cancel: t } } } const XO = rb; function ZO(e) { return function (r) { return e.apply(null, r) } } function eM(e) { return Pe.isObject(e) && e.isAxiosError === !0 } const lv = { Continue: 100, SwitchingProtocols: 101, Processing: 102, EarlyHints: 103, Ok: 200, Created: 201, Accepted: 202, NonAuthoritativeInformation: 203, NoContent: 204, ResetContent: 205, PartialContent: 206, MultiStatus: 207, AlreadyReported: 208, ImUsed: 226, MultipleChoices: 300, MovedPermanently: 301, Found: 302, SeeOther: 303, NotModified: 304, UseProxy: 305, Unused: 306, TemporaryRedirect: 307, PermanentRedirect: 308, BadRequest: 400, Unauthorized: 401, PaymentRequired: 402, Forbidden: 403, NotFound: 404, MethodNotAllowed: 405, NotAcceptable: 406, ProxyAuthenticationRequired: 407, RequestTimeout: 408, Conflict: 409, Gone: 410, LengthRequired: 411, PreconditionFailed: 412, PayloadTooLarge: 413, UriTooLong: 414, UnsupportedMediaType: 415, RangeNotSatisfiable: 416, ExpectationFailed: 417, ImATeapot: 418, MisdirectedRequest: 421, UnprocessableEntity: 422, Locked: 423, FailedDependency: 424, TooEarly: 425, UpgradeRequired: 426, PreconditionRequired: 428, TooManyRequests: 429, RequestHeaderFieldsTooLarge: 431, UnavailableForLegalReasons: 451, InternalServerError: 500, NotImplemented: 501, BadGateway: 502, ServiceUnavailable: 503, GatewayTimeout: 504, HttpVersionNotSupported: 505, VariantAlsoNegotiates: 506, InsufficientStorage: 507, LoopDetected: 508, NotExtended: 510, NetworkAuthenticationRequired: 511, WebServerIsDown: 521, ConnectionTimedOut: 522, OriginIsUnreachable: 523, TimeoutOccurred: 524, SslHandshakeFailed: 525, InvalidSslCertificate: 526 }; Object.entries(lv).forEach(([e, t]) => { lv[t] = e }); const tM = lv; function f2(e) { const t = new of(e), r = qC(of.prototype.request, t); return Pe.extend(r, of.prototype, t, { allOwnKeys: !0 }), Pe.extend(r, t, null, { allOwnKeys: !0 }), r.create = function (s) { return f2(Rc(e, s)) }, r } const bi = f2(eb); bi.Axios = of; bi.CanceledError = eu; bi.CancelToken = XO; bi.isCancel = o2; bi.VERSION = h2; bi.toFormData = _m; bi.AxiosError = Tr; bi.Cancel = bi.CanceledError; bi.all = function (t) { return Promise.all(t) }; bi.spread = ZO; bi.isAxiosError = eM; bi.mergeConfig = Rc; bi.AxiosHeaders = Ba; bi.formToJSON = e => a2(Pe.isHTMLForm(e) ? new FormData(e) : e); bi.getAdapter = p2.getAdapter; bi.HttpStatusCode = tM; bi.default = bi; const rM = bi, m2 = "http://127.0.0.1:5000/api", lt = rM.create({ baseURL: m2 }); lt.interceptors.request.use(e => { const t = localStorage.getItem("token"); return t && (e.headers.Authorization = `Bearer ${t}`), e }, e => Promise.reject(e)); const nM = ({ setUser: e }) => { const [t, r] = J.useState(""), [n, s] = J.useState(""), [o, a] = J.useState(!1), [c, l] = J.useState(!1), [p, d] = J.useState(""), f = Rl(), h = No(), { showModal: P } = Pi(); us.useEffect(() => { new URLSearchParams(h.search).get("reason") === "timeout" && P({ type: "warning", title: "Session Expired", message: "You have been logged out due to inactivity. Please login again to continue." }) }, [h, P]); const b = async u => { var g, S; u.preventDefault(), l(!0), d(""); try { const R = await lt.post("/public/login", { email: t, password: n }), y = R.data.user; e(y), localStorage.setItem("token", R.data.token), localStorage.setItem("user", JSON.stringify(y)), f("/modules") } catch (R) { console.error("Login error:", R); const y = ((S = (g = R.response) == null ? void 0 : g.data) == null ? void 0 : S.message) || R.message || "Login failed"; d(y), P({ type: "error", title: "Login Failed", message: y }) } finally { l(!1) } }; return i.jsx("div", { style: { display: "flex", justifyContent: "center", alignItems: "center", minHeight: "100vh", background: "linear-gradient(135deg, #3d2b1f 0%, #5d4037 100%)" }, children: i.jsxs(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, className: "glass-card", style: { width: "400px", padding: "3rem", textAlign: "center", background: "rgba(255,255,255,0.05)", border: "1px solid rgba(255,255,255,0.1)" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "80px", height: "80px", borderRadius: "50%", marginBottom: "1.5rem" } }), i.jsx("h2", { style: { color: "white", marginBottom: "0.5rem" }, children: "CRMS Login" }), i.jsx("p", { style: { color: "#2ecc71", marginBottom: "2rem", fontSize: "12px", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" }), p && i.jsx("p", { style: { color: "#ff4d4d", marginBottom: "1rem" }, children: p }), i.jsxs("form", { onSubmit: b, style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(Dl, { size: 18, style: { position: "absolute", left: "12px", top: "12px", color: "#666" } }), i.jsx("input", { type: "email", placeholder: "Email Address", style: { width: "100%", padding: "12px 12px 12px 40px", borderRadius: "8px", border: "1px solid #ccc" }, value: t, onChange: u => r(u.target.value), required: !0 })] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(Nd, { size: 18, style: { position: "absolute", left: "12px", top: "12px", color: "#666" } }), i.jsx("input", { type: o ? "text" : "password", placeholder: "Password", style: { width: "100%", padding: "12px 45px 12px 40px", borderRadius: "8px", border: "1px solid #ccc" }, value: n, onChange: u => s(u.target.value), required: !0 }), i.jsx("button", { type: "button", onClick: () => a(!o), style: { position: "absolute", right: "12px", top: "50%", transform: "translateY(-50%)", background: "none", border: "none", cursor: "pointer", color: "#666", display: "flex", alignItems: "center" }, children: o ? i.jsx(Uf, { size: 18 }) : i.jsx(Mo, { size: 18 }) })] }), i.jsx("button", { className: "btn btn-primary", style: { marginTop: "1rem" }, disabled: c, children: c ? i.jsx(Jn, { className: "animate-spin" }) : "Login" })] }), i.jsxs("p", { style: { marginTop: "1.5rem", color: "white", fontSize: "14px" }, children: ["Don't have an account? ", i.jsx("a", { href: "/register", style: { color: "#3498db", textDecoration: "none", fontWeight: "bold" }, children: "Register here" })] }), i.jsxs("p", { style: { marginTop: "0.5rem", color: "white", fontSize: "13px" }, children: ["Forgot password? ", i.jsx("a", { href: "#", style: { color: "#bdc3c7", textDecoration: "none" }, children: "Reset here" })] })] }) }) }, iM = () => { const [e, t] = J.useState(window.innerWidth <= 768); us.useEffect(() => { const u = () => t(window.innerWidth <= 768); return window.addEventListener("resize", u), () => window.removeEventListener("resize", u) }, []); const [r, n] = J.useState({ firstName: "", middleName: "", surname: "", gender: "", age: "", email: "", phone: "", address: "", nin: "", password: "", confirmPassword: "" }), [s, o] = J.useState(!1), [a, c] = J.useState(!1), [l, p] = J.useState(!1), [d, f] = J.useState(!1), h = Rl(), { showModal: P } = Pi(), b = async u => { var g, S; if (u.preventDefault(), r.password !== r.confirmPassword) { P({ type: "warning", title: "Password Mismatch", message: "Passwords do not match. Please try again." }); return } p(!0); try { const { confirmPassword: R, ...y } = r; await lt.post("/public/register", y), P({ type: "success", title: "Registration Successful", message: "Your account has been created successfully. Redirecting to login...", showCancel: !1, confirmText: "Login Now", onConfirm: () => h("/login") }), f(!0), setTimeout(() => h("/login"), 2e3) } catch (R) { const y = ((S = (g = R.response) == null ? void 0 : g.data) == null ? void 0 : S.error) || "Registration failed"; P({ type: "error", title: "Registration Failed", message: y }) } finally { p(!1) } }; return i.jsx("div", { style: { display: "flex", justifyContent: "center", alignItems: "center", minHeight: "100vh", background: "linear-gradient(135deg, #3d2b1f 0%, #5d4037 100%)", padding: "2rem" }, children: i.jsx(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, className: "glass-card", style: { width: "100%", maxWidth: "800px", padding: e ? "1.5rem" : "3rem", background: "rgba(255,255,255,0.05)", border: "1px solid rgba(255,255,255,0.1)" }, children: d ? i.jsxs("div", { style: { textAlign: "center", color: "white" }, children: [i.jsx(li, { size: 64, color: "#2ecc71", style: { marginBottom: "1.5rem" } }), i.jsx("h2", { children: "Registration Successful!" }), i.jsx("p", { style: { marginTop: "1rem" }, children: "Redirecting to login..." })] }) : i.jsxs(i.Fragment, { children: [i.jsxs("div", { style: { textAlign: "center", marginBottom: "2rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "70px", height: "70px", borderRadius: "50%", marginBottom: "1rem" } }), i.jsx("h2", { style: { color: "white", marginBottom: "0.3rem" }, children: "Create Account" }), i.jsx("p", { style: { color: "#2ecc71", fontSize: "11px", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] }), i.jsxs("form", { onSubmit: b, style: { display: "grid", gridTemplateColumns: e ? "1fr" : "1fr 1fr", gap: "1.2rem" }, children: [i.jsxs("div", { style: Pa, children: [i.jsx(Vn, { size: 18, style: td }), i.jsx("input", { type: "text", placeholder: "First Name *", style: Da, onChange: u => n({ ...r, firstName: u.target.value }), required: !0 })] }), i.jsxs("div", { style: Pa, children: [i.jsx(Vn, { size: 18, style: td }), i.jsx("input", { type: "text", placeholder: "Middle Name", style: Da, onChange: u => n({ ...r, middleName: u.target.value }) })] }), i.jsxs("div", { style: Pa, children: [i.jsx(Vn, { size: 18, style: td }), i.jsx("input", { type: "text", placeholder: "Surname *", style: Da, onChange: u => n({ ...r, surname: u.target.value }), required: !0 })] }), i.jsx("div", { style: Pa, children: i.jsxs("select", { style: { ...Da, paddingLeft: "12px" }, onChange: u => n({ ...r, gender: u.target.value }), required: !0, children: [i.jsx("option", { value: "", children: "Select Gender *" }), i.jsx("option", { value: "male", children: "Male" }), i.jsx("option", { value: "female", children: "Female" }), i.jsx("option", { value: "other", children: "Other" })] }) }), i.jsx("div", { style: Pa, children: i.jsx("input", { type: "number", placeholder: "Age *", style: { ...Da, paddingLeft: "12px" }, onChange: u => n({ ...r, age: u.target.value }), required: !0 }) }), i.jsxs("div", { style: Pa, children: [i.jsx(Dl, { size: 18, style: td }), i.jsx("input", { type: "email", placeholder: "Email Address *", style: Da, onChange: u => n({ ...r, email: u.target.value }), required: !0 })] }), i.jsx("div", { style: Pa, children: i.jsx("input", { type: "text", placeholder: "Phone Number", style: { ...Da, paddingLeft: "12px" }, onChange: u => n({ ...r, phone: u.target.value }) }) }), i.jsx("div", { style: Pa, children: i.jsx("input", { type: "text", placeholder: "NIN Number *", style: { ...Da, paddingLeft: "12px" }, onChange: u => n({ ...r, nin: u.target.value }), required: !0 }) }), i.jsx("div", { style: { ...Pa, gridColumn: e ? "span 1" : "span 2" }, children: i.jsx("textarea", { placeholder: "Residential Address *", style: { ...Da, paddingLeft: "12px", minHeight: "80px" }, onChange: u => n({ ...r, address: u.target.value }), required: !0 }) }), i.jsxs("div", { style: Pa, children: [i.jsx(Nd, { size: 18, style: td }), i.jsx("input", { type: s ? "text" : "password", placeholder: "Password *", style: { ...Da, paddingRight: "45px" }, onChange: u => n({ ...r, password: u.target.value }), required: !0 }), i.jsx("button", { type: "button", onClick: () => o(!s), style: { position: "absolute", right: "12px", top: "50%", transform: "translateY(-50%)", background: "none", border: "none", cursor: "pointer", color: "#666", display: "flex", alignItems: "center" }, children: s ? i.jsx(Uf, { size: 18 }) : i.jsx(Mo, { size: 18 }) })] }), i.jsxs("div", { style: Pa, children: [i.jsx(Nd, { size: 18, style: td }), i.jsx("input", { type: a ? "text" : "password", placeholder: "Confirm Password *", style: { ...Da, paddingRight: "45px" }, onChange: u => n({ ...r, confirmPassword: u.target.value }), required: !0 }), i.jsx("button", { type: "button", onClick: () => c(!a), style: { position: "absolute", right: "12px", top: "50%", transform: "translateY(-50%)", background: "none", border: "none", cursor: "pointer", color: "#666", display: "flex", alignItems: "center" }, children: a ? i.jsx(Uf, { size: 18 }) : i.jsx(Mo, { size: 18 }) })] }), i.jsx("button", { className: "btn btn-primary", style: { gridColumn: "span 2", marginTop: "1rem" }, disabled: l, children: l ? i.jsx(Jn, { size: 20, className: "animate-spin" }) : "Create Account" })] }), i.jsxs("p", { style: { marginTop: "2rem", color: "white", fontSize: "14px", textAlign: "center" }, children: ["Already have an account? ", i.jsx(uy, { to: "/login", style: { color: "#3498db", textDecoration: "none", fontWeight: "bold" }, children: "Login here" })] })] }) }) }) }, Pa = { position: "relative" }, td = { position: "absolute", left: "12px", top: "12px", color: "#666" }, Da = { width: "100%", padding: "12px 12px 12px 40px", borderRadius: "8px", border: "1px solid #ccc" }, sM = () => { const [e, t] = J.useState([]), [r, n] = J.useState(0), [s, o] = J.useState(window.innerWidth <= 768); if (J.useEffect(() => { const c = () => o(window.innerWidth <= 768); return window.addEventListener("resize", c), () => window.removeEventListener("resize", c) }, []), J.useEffect(() => { (async () => { try { const l = await lt.get("/banners"); Array.isArray(l.data) ? t(l.data) : t([]) } catch { console.error("Failed to fetch banners") } })() }, []), J.useEffect(() => { if (e.length === 0) return; const c = setInterval(() => { n(l => (l + 1) % e.length) }, 6e3); return () => clearInterval(c) }, [e]), e.length === 0) return null; const a = e[r]; return i.jsxs("div", { style: { position: "relative", height: s ? "350px" : "550px", overflow: "hidden", borderRadius: s ? "16px" : "24px", margin: s ? "1rem 0" : "2rem 0", boxShadow: "0 25px 50px -12px rgba(61, 43, 31, 0.25)", border: s ? "2px solid #3d2b1f" : "4px solid #3d2b1f" }, children: [i.jsx(ma, { mode: "wait", children: i.jsxs(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, transition: { duration: 1.5 }, style: { position: "absolute", width: "100%", height: "100%" }, children: [i.jsx(Wt.div, { initial: { scale: 1.2, x: -20 }, animate: { scale: 1, x: 0 }, transition: { duration: 6, ease: "linear" }, style: { position: "absolute", width: "100%", height: "100%" }, children: i.jsx("img", { src: a.image_url, alt: a.title, style: { width: "100%", height: "100%", objectFit: "cover" } }) }), i.jsx("div", { style: { position: "absolute", inset: 0, background: "linear-gradient(to right, rgba(61, 43, 31, 0.95) 0%, rgba(61, 43, 31, 0.4) 50%, rgba(61, 43, 31, 0.95) 100%)", zIndex: 1 } }), i.jsx("div", { style: { position: "absolute", bottom: "25%", left: "8%", right: "8%", color: "white", zIndex: 2, maxWidth: "800px" }, children: i.jsxs(Wt.div, { initial: { opacity: 0, y: 30 }, animate: { opacity: 1, y: 0 }, transition: { delay: .5, duration: .8 }, children: [i.jsx("span", { style: { background: "#2ecc71", padding: "6px 18px", borderRadius: "30px", fontSize: "13px", fontWeight: "bold", textTransform: "uppercase", letterSpacing: "3px", boxShadow: "0 4px 15px rgba(46, 204, 113, 0.3)" }, children: "Borno High Court Update" }), i.jsx("h2", { style: { fontSize: s ? "2.2rem" : "4.2rem", margin: "1rem 0", fontWeight: "900", textShadow: "3px 3px 10px rgba(0,0,0,0.5)", lineHeight: 1.1 }, children: a.title }), i.jsx("p", { style: { fontSize: s ? "1.1rem" : "1.6rem", opacity: .95, lineHeight: "1.6", fontWeight: "300", maxWidth: "650px" }, children: a.description })] }) })] }, r) }), i.jsx("div", { style: { position: "absolute", bottom: "30px", left: "50%", transform: "translateX(-50%)", display: "flex", gap: "10px", zIndex: 3 }, children: e.map((c, l) => i.jsx("div", { onClick: () => n(l), style: { width: r === l ? "30px" : "10px", height: "10px", background: r === l ? "#2ecc71" : "rgba(255,255,255,0.5)", borderRadius: "5px", cursor: "pointer", transition: "all 0.3s ease" } }, l)) }), i.jsx("button", { onClick: () => n(c => (c - 1 + e.length) % e.length), style: { position: "absolute", left: "25px", top: "50%", transform: "translateY(-50%)", zIndex: 3, background: "rgba(255,255,255,0.1)", backdropFilter: "blur(5px)", border: "1px solid rgba(255,255,255,0.2)", borderRadius: "50%", width: "50px", height: "50px", display: "flex", alignItems: "center", justifyContent: "center", color: "white", cursor: "pointer", transition: "0.3s" }, children: i.jsx(BC, { size: 28 }) }), i.jsx("button", { onClick: () => n(c => (c + 1) % e.length), style: { position: "absolute", right: "25px", top: "50%", transform: "translateY(-50%)", zIndex: 3, background: "rgba(255,255,255,0.1)", backdropFilter: "blur(5px)", border: "1px solid rgba(255,255,255,0.2)", borderRadius: "50%", width: "50px", height: "50px", display: "flex", alignItems: "center", justifyContent: "center", color: "white", cursor: "pointer", transition: "0.3s" }, children: i.jsx(Yd, { size: 28 }) })] }) }, aM = () => { const e = Rl(); return i.jsxs("div", { style: { minHeight: "100vh", background: "#f8fafc" }, children: [i.jsxs("nav", { style: { padding: "1rem 2rem", display: "flex", justifyContent: "space-between", alignItems: "center", background: "white", position: "sticky", top: 0, zIndex: 100, boxShadow: "0 2px 10px rgba(0,0,0,0.05)" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Coat of Arms", style: { width: "50px", height: "50px", borderRadius: "50%" } }), i.jsxs("div", { children: [i.jsx("h2", { style: { color: "#3d2b1f", margin: 0, fontSize: "1.2rem" }, children: "CRMS" }), i.jsx("p", { style: { margin: 0, fontSize: "10px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), i.jsxs("div", { style: { display: "flex", gap: "1.5rem", alignItems: "center" }, children: [i.jsx("button", { onClick: () => e("/login"), className: "btn", style: { background: "transparent", color: "#3d2b1f" }, children: "Login" }), i.jsx("button", { onClick: () => e("/register"), className: "btn btn-primary", style: { background: "#2ecc71" }, children: "Register" })] })] }), i.jsxs("div", { style: { maxWidth: "1200px", margin: "0 auto", padding: "0 2rem" }, children: [i.jsx(sM, {}), i.jsxs(Wt.div, { initial: { opacity: 0, y: 30 }, animate: { opacity: 1, y: 0 }, style: { textAlign: "center", margin: "4rem 0" }, children: [i.jsx("h1", { style: { fontSize: "3rem", color: "#3d2b1f", marginBottom: "1rem", fontWeight: "800" }, children: "Official Court Registry Management" }), i.jsx("p", { style: { fontSize: "1.2rem", color: "#5d4037", maxWidth: "800px", margin: "0 auto", lineHeight: "1.8" }, children: "The Borno State High Court's digital infrastructure for filing probate applications, and legal documentation." })] })] }), i.jsx("section", { style: { padding: "5rem 2rem" }, children: i.jsxs("div", { style: { maxWidth: "1200px", margin: "0 auto", display: "grid", gridTemplateColumns: "repeat(auto-fit, minmax(300px, 1fr))", gap: "3rem" }, children: [i.jsxs("div", { style: { textAlign: "center" }, children: [i.jsx(HI, { size: 48, color: "#3498db", style: { marginBottom: "1.5rem" } }), i.jsx("h3", { style: { marginBottom: "1rem" }, children: "OADR Registry" }), i.jsx("p", { style: { color: "#666" }, children: "File Oaths, Affidavits, and Declarations with ease using our smart templates and digital verification." })] }), i.jsxs("div", { style: { textAlign: "center" }, children: [i.jsx(FC, { size: 48, color: "#2ecc71", style: { marginBottom: "1.5rem" } }), i.jsx("h3", { style: { marginBottom: "1rem" }, children: "Probate Registry" }), i.jsx("p", { style: { color: "#666" }, children: "Apply for Letters of Administration and manage beneficiaries through a streamlined online process." })] }), i.jsxs("div", { style: { textAlign: "center" }, children: [i.jsx(Cc, { size: 48, color: "#e67e22", style: { marginBottom: "1.5rem" } }), i.jsx("h3", { style: { marginBottom: "1rem" }, children: "Secure & Verified" }), i.jsx("p", { style: { color: "#666" }, children: "Liveness checks and digital watermarking ensure the security and validity of all your filings." })] })] }) }), i.jsx("footer", { style: { padding: "3rem 2rem", background: "#2c3e50", color: "#bdc3c7", textAlign: "center" }, children: i.jsx("p", { children: " 2026 Court Registry Management System (CRMS). All rights reserved." }) })] }) }, Il = ({ user: e, title: t, onLogout: r, onSidebarToggle: n, onProfileClick: s, onSettingsClick: o, sidebarOpen: a, isMobile: c, notifications: l = [] }) => { var u; const [p, d] = J.useState(new Date), [f, h] = J.useState(!1), [P, b] = J.useState(!1); return J.useEffect(() => { const g = setInterval(() => d(new Date), 1e3); return () => clearInterval(g) }, []), i.jsxs("header", { style: { minHeight: "80px", background: "white", display: "flex", alignItems: "center", justifyContent: "space-between", padding: "0 1.5rem", boxShadow: "0 2px 10px rgba(0,0,0,0.03)", position: "sticky", top: 0, zIndex: 30, borderBottom: "1px solid #f1f5f9" }, children: [i.jsxs("div", { style: { display: "flex", gap: "1.5rem", alignItems: "center" }, children: [n && i.jsx("button", { onClick: n, style: { background: "#f1f5f9", border: "none", padding: "0.6rem", borderRadius: "10px", cursor: "pointer", display: "flex", alignItems: "center", color: "#778eaeff" }, children: a ? i.jsx(za, { size: 20 }) : i.jsx(Vj, { size: 20 }) }), i.jsxs("div", { style: { display: "flex", flexDirection: "column" }, children: [i.jsx("h1", { style: { margin: 0, fontSize: c ? "1.1rem" : "1.4rem", color: "rgb\(18 37 74\)", fontWeight: "700" }, children: t }), !c && i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "2px" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", color: "#94a3b8", fontSize: "11px" }, children: [i.jsx(NC, { size: 12 }), i.jsx("span", { children: p.toLocaleDateString() })] }), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem", color: "#94a3b8", fontSize: "11px" }, children: [i.jsx(Tl, { size: 12 }), i.jsx("span", { children: p.toLocaleTimeString() })] })] })] })] }), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [!c && (e == null ? void 0 : e.email) && i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.6rem", padding: "0.5rem 1.25rem", background: "#f8fafc", borderRadius: "30px", border: "1px solid #f1f5f9" }, children: [i.jsx(Dl, { size: 14, color: "#3b82f6" }), i.jsx("span", { style: { fontSize: "13px", color: "#778eaeff", fontWeight: "600" }, children: e.email })] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsxs("div", { onClick: () => h(!f), style: { position: "relative", cursor: "pointer", padding: "0.6rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #f1f5f9" }, children: [i.jsx($f, { size: 20, color: "#778eaeff" }), l.length > 0 && i.jsx("span", { style: { position: "absolute", top: "-4px", right: "-4px", background: "#ef4444", color: "white", fontSize: "10px", padding: "2px 5px", borderRadius: "10px", border: "2px solid white", minWidth: "18px", textAlign: "center" }, children: l.length })] }), i.jsx(ma, { children: f && i.jsxs(Wt.div, { initial: { opacity: 0, y: 10, scale: .95 }, animate: { opacity: 1, y: 0, scale: 1 }, exit: { opacity: 0, y: 10, scale: .95 }, style: { position: "absolute", top: "100%", right: 0, marginTop: "0.75rem", width: "320px", background: "white", borderRadius: "16px", boxShadow: "0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)", border: "1px solid #f1f5f9", overflow: "hidden", zIndex: 60 }, children: [i.jsxs("div", { style: { padding: "1rem", fontWeight: "700", borderBottom: "1px solid #f1f5f9", display: "flex", justifyContent: "space-between", alignItems: "center", background: "#f8fafc" }, children: [i.jsx("span", { style: { color: "rgb\(18 37 74\)" }, children: "Notifications" }), i.jsx("span", { style: { color: "#3b82f6", fontSize: "12px", cursor: "pointer", fontWeight: "600" }, children: "Mark all read" })] }), i.jsx("div", { style: { maxHeight: "350px", overflowY: "auto" }, children: l.length > 0 ? l.map(g => i.jsxs("div", { style: { padding: "1rem", borderBottom: "1px solid #f8fafc", cursor: "pointer" }, onMouseOver: S => S.currentTarget.style.background = "#f8fafc", onMouseOut: S => S.currentTarget.style.background = "transparent", children: [i.jsx("p", { style: { margin: 0, fontSize: "14px", color: "rgb\(18 37 74\)", fontWeight: "500" }, children: g.text }), i.jsx("p", { style: { margin: "4px 0 0", fontSize: "12px", color: "#94a3b8" }, children: g.time })] }, g.id)) : i.jsxs("div", { style: { padding: "2rem", textAlign: "center", color: "#94a3b8" }, children: [i.jsx($f, { size: 32, style: { margin: "0 auto 1rem", opacity: .3 } }), i.jsx("p", { style: { margin: 0, fontSize: "14px" }, children: "No new notifications" })] }) }), l.length > 0 && i.jsx("div", { style: { padding: "0.8rem", textAlign: "center", fontSize: "13px", color: "#3b82f6", cursor: "pointer", borderTop: "1px solid #f1f5f9", fontWeight: "600", background: "#f8fafc" }, children: "View All Activity" })] }) })] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsxs("div", { onClick: () => b(!P), style: { display: "flex", alignItems: "center", gap: "0.75rem", padding: "0.4rem 0.6rem", background: "#f1f5f9", borderRadius: "35px", cursor: "pointer", border: "1px solid #e2e8f0", transition: "all 0.2s" }, children: [i.jsx("div", { style: { width: "32px", height: "32px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", borderRadius: "50%", color: "white", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: "bold", fontSize: "13px", boxShadow: "0 2px 4px rgba(37, 99, 235, 0.2)" }, children: ((e == null ? void 0 : e.firstName) || (e == null ? void 0 : e.name) || "?").charAt(0).toUpperCase() }), !c && i.jsx("span", { style: { fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: (e == null ? void 0 : e.firstName) || (e == null ? void 0 : e.name) }), i.jsx(tj, { size: 14, color: "#778eaeff", style: { transform: P ? "rotate(180deg)" : "rotate(0deg)", transition: "transform 0.2s" } })] }), i.jsx(ma, { children: P && i.jsxs(Wt.div, { initial: { opacity: 0, y: 10, scale: .95 }, animate: { opacity: 1, y: 0, scale: 1 }, exit: { opacity: 0, y: 10, scale: .95 }, style: { position: "absolute", top: "100%", right: 0, marginTop: "0.75rem", width: "220px", background: "white", borderRadius: "16px", boxShadow: "0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04)", border: "1px solid #f1f5f9", padding: "0.5rem", zIndex: 60 }, children: [i.jsxs("div", { style: { padding: "0.75rem", borderBottom: "1px solid #f1f5f9", marginBottom: "0.5rem" }, children: [i.jsxs("p", { style: { margin: 0, fontWeight: "700", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: [e == null ? void 0 : e.firstName, " ", (e == null ? void 0 : e.surname) || (e == null ? void 0 : e.name)] }), i.jsx("p", { style: { margin: "2px 0 0", fontSize: "12px", color: "#94a3b8", wordBreak: "break-all" }, children: ((u = e == null ? void 0 : e.role) == null ? void 0 : u.toUpperCase()) || "PUBLIC USER" })] }), i.jsx(f_, { icon: i.jsx(Vn, { size: 18 }), label: "My Profile", onClick: () => { s && s(), b(!1) } }), i.jsx(f_, { icon: i.jsx(Rd, { size: 18 }), label: "Settings", onClick: () => { o && o(), b(!1) } }), i.jsx("div", { style: { borderTop: "1px solid #f1f5f9", margin: "0.5rem 0" } }), i.jsxs("div", { onClick: r, style: { display: "flex", alignItems: "center", gap: "0.75rem", padding: "0.75rem", borderRadius: "10px", cursor: "pointer", fontSize: "14px", color: "#ef4444", fontWeight: "600" }, onMouseOver: g => g.currentTarget.style.background = "#fef2f2", onMouseOut: g => g.currentTarget.style.background = "transparent", children: [i.jsx(Ac, { size: 18 }), i.jsx("span", { children: "Logout System" })] })] }) })] })] })] }) }, f_ = ({ icon: e, label: t, onClick: r }) => i.jsxs("div", { onClick: r, style: { display: "flex", alignItems: "center", gap: "0.75rem", padding: "0.75rem", borderRadius: "10px", cursor: "pointer", fontSize: "14px", color: "#475569", fontWeight: "500" }, onMouseOver: n => n.currentTarget.style.background = "#f8fafc", onMouseOut: n => n.currentTarget.style.background = "transparent", children: [e, i.jsx("span", { children: t })] }), oM = ({ user: e }) => { const t = Rl(), r = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), t("/login") }, n = [{ id: "oadr", title: "OADR Registry", desc: "Oaths, Affidavits and Declaration", icon: i.jsx(FC, { size: 40 }), path: "/oadr", color: "#3498db" }, { id: "probate", title: "Probate Registry", desc: "Letters of Administration", icon: i.jsx(zn, { size: 40 }), path: "/probate", color: "#2ecc71" }]; return i.jsxs("div", { style: { background: "#f4f7f6", minHeight: "100vh", display: "flex", flexDirection: "column" }, children: [i.jsx(Il, { user: e, title: "Select Registry Module", onLogout: r }), i.jsxs("div", { style: { padding: "4rem 2rem", flex: 1 }, children: [i.jsxs("div", { style: { textAlign: "center", marginBottom: "3rem" }, children: [i.jsxs("h1", { style: { fontSize: "2.5rem", color: "rgb\(18 37 74\)", fontWeight: "800", marginBottom: "0.5rem" }, children: ["Welcome, ", e.firstName] }), i.jsx("p", { style: { color: "#778eaeff", fontSize: "1.1rem" }, children: "Please select a registry module to proceed with your application" })] }), i.jsx("div", { className: "grid-container animate-grid", style: { maxWidth: "1000px", margin: "0 auto" }, children: n.map((s, o) => i.jsxs(Wt.div, { initial: { opacity: 0, scale: .9 }, animate: { opacity: 1, scale: 1 }, transition: { delay: o * .1 }, whileHover: { scale: 1.05 }, className: "glass-card", style: { cursor: "pointer", background: "white", borderLeft: `6px solid ${s.color}`, padding: "2.5rem" }, onClick: () => t(s.path), children: [i.jsx("div", { style: { color: s.color, marginBottom: "1.5rem" }, children: s.icon }), i.jsx("h2", { style: { marginBottom: "0.5rem", color: "#2c3e50" }, children: s.title }), i.jsx("p", { style: { color: "#7f8c8d" }, children: s.desc })] }, s.id)) })] })] }) }, tu = async ({ user: e, applicationId: t, templateTitle: r, content: n, file: s, showModal: o, signerName: a, signerSignature: c, returnBlob: l }) => {
    const { jsPDF: p } = window.jspdf, d = window.html2canvas, f = await ny(() => import("./browser-2d1fe99b.js").then(h => h.b), []); try {
        const h = await lt.get("/settings"), P = h.data.court_stamp_path || "", b = a || h.data.commissioner_name || "HON. COMMISSIONER FOR OATHS", u = c || h.data.commissioner_signature_path || ""; let g = e == null ? void 0 : e.profile_pic; try { g = (await lt.get("/public/profile")).data.profile_pic } catch (Dt) { console.error("Failed to fetch latest profile for PDF picture", Dt) } const S = new Date, y = `${(Dt => { const ot = ["th", "st", "nd", "rd"], tr = Dt % 100; return Dt + (ot[(tr - 20) % 10] || ot[tr] || ot[0]) })(S.getDate())} day of ${S.toLocaleDateString("en-GB", { month: "long", year: "numeric" })}`, v = `${(e == null ? void 0 : e.firstName) || (e == null ? void 0 : e.first_name) || ""} ${(e == null ? void 0 : e.surname) || ""}`.trim() || "DEPONENT", D = `${window.location.origin}/verify/${t || "draft"}`, M = await f.toDataURL(D, { margin: 0, width: 150 }), W = m2.replace("/api", ""), I = Date.now(), E = P ? `${W}${P}?t=${I}` : "", _ = u ? `${W}${u}?t=${I}` : "", k = g ? `${W}${g}?t=${I}` : "", L = `${window.location.origin}/assets/coat_of_arms.png`, H = Dt => new Promise(ot => { if (!Dt) return ot(null); const tr = new Image; tr.crossOrigin = "anonymous", tr.onload = () => { const Br = document.createElement("canvas"); Br.width = tr.width, Br.height = tr.height, Br.getContext("2d").drawImage(tr, 0, 0); const ir = Br.toDataURL("image/png"); ot(ir) }, tr.onerror = () => { console.error("Image Load Failed (PDF Gen):", Dt), ot(null) }, tr.src = Dt }), [V, ee, K, N] = await Promise.all([H(E), H(_), H(L), H(k)]), B = document.createElement("div"); B.style.width = "900px", B.style.padding = "40px", B.style.backgroundColor = "#ffffff", B.style.fontFamily = "'Times New Roman', Times, serif", B.style.position = "absolute", B.style.left = "-9999px", B.style.top = "0", B.innerHTML = `
            <style>
                #pdf-export-body { 
                    color: #000; 
                    line-height: 1.5;
                }
                #pdf-export-body h2 { 
                    font-size: 18px; 
                    text-align: center; 
                    margin: 0; 
                    padding: 0;
                    font-style: italic;
                    text-decoration: none;
                    text-transform: uppercase;
                }
                #pdf-export-body h3 { 
                    font-size: 18px; 
                    text-align: center; 
                    margin: 5px 0 20px;
                    font-style: italic;
                    text-decoration: none;
                    text-transform: uppercase;
                }
                .content-box {
                    font-size: 14px;
                    text-align: justify;
                    min-height: 300px;
                    margin-bottom: 30px;
                }
                .content-box p { margin-bottom: 15px; }

                .official-stamp-box {
                    position: absolute; 
                    top: -80px; 
                    left: -40px; 
                    width: 220px; 
                    height: 140px; 
                    border: 5px solid #1e3a8a; 
                    border-radius: 12px; 
                    display: flex; 
                    flex-direction: column;
                    align-items: center; 
                    justify-content: center;
                    color: #1e3a8a; 
                    font-weight: 900; 
                    transform: rotate(-15deg); 
                    opacity: 0.85; 
                    z-index: 50; /* Overlap content */
                    text-align: center;
                    padding: 10px;
                    background: rgba(255,255,255,0.2); /* Slight white tint for contrast */
                    line-height: 1.2;
                    pointer-events: none;
                    mix-blend-mode: multiply; /* Realistic ink effect */
                    font-family: 'Times New Roman', serif;
                }
            </style>
            <div id="pdf-export-body">
                <!-- Court Header (Relative for absolute profile pic) -->
                <div style="position: relative; text-align: center; margin-bottom: 20px; min-height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                    ${N ? `
                    <div style="position: absolute; left: 0; top: 0; z-index: 10;">
                        <img src="${N}" style="width: 85px; height: 95px; object-fit: cover; border: 1px solid #000; padding: 2px;" />
                    </div>
                    `: ""}
                    
                    <img src="${K}" style="width: 80px; height: auto; margin-bottom: 10px;" />
                    <h2>IN THE HIGH COURT OF JUSTICE&nbsp;&nbsp;BORNO STATE&nbsp;&nbsp;OF NIGERIA</h2>
                    <h3>IN THE MAIDUGURI JUDICIAL DIVISION</h3>
                </div>

                <!-- Main Content Area -->
                <div class="content-box">
                    ${n || (s ? `<p style="text-align:center; font-style:italic;">[View Attached Document: ${s.name}]</p>` : "")}
                </div>

                <!-- Deponent Side -->
                <div style="display: flex; justify-content: flex-end; margin-bottom: 30px;">
                    <div style="text-align: center; width: 300px;">
                        <div style="border-bottom: 2px solid #000; margin-bottom: 5px;"></div>
                        <div style="font-weight: bold; text-transform: uppercase; font-size: 16px;">${v}</div>
                        <div style="font-size: 14px;">DEPONENT</div>
                    </div>
                </div>

                <!-- Sworn To Label -->
                <div style="text-align: center; font-size: 18px; font-weight: bold; margin-bottom: 30px; text-transform: uppercase;">
                    Sworn to at High Court of Justice Maiduguri
                </div>

                <!-- Footer / Authentication -->
                <div style="display: flex; justify-content: space-between; align-items: flex-end; height: 200px; border-top: 1px solid #000; padding-top: 20px;">
                    <!-- Date & QR -->
                    <div style="display: flex; flex-direction: column; justify-content: flex-end; gap: 10px;">
                        <div style="font-size: 18px;">
                            <strong>DATED THIS:</strong> ${y}
                        </div>
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <img src="${M}" style="width: 80px; height: 80px;" />
                            <div>
                                <div style="font-size: 10px; font-weight: bold; font-family: monospace;">UUID: CRMS-${t || "NEW"}</div>
                                <div style="font-size: 9px; color: #333;">Digitally Signed & Validated</div>
                            </div>
                        </div>
                    </div>

                    <!-- Commissioner Side -->
                    <div style="width: 380px; text-align: center; position: relative;">
                        ${V ? `
                        <img src="${V}" style="position: absolute; top: -80px; left: -40px; width: 220px; height: auto; transform: rotate(-15deg); opacity: 0.9; z-index: 50;" />
                        `: `
                        <div class="official-stamp-box">
                            <div style="font-size: 16px; margin-bottom: 5px; text-transform: uppercase;">HIGH COURT OF JUSTICE</div>
                            <div style="font-size: 18px; margin-bottom: 5px; text-transform: uppercase; color: #b91c1c;">COMMISSIONER FOR OATHS</div>
                            <div style="font-size: 16px; text-transform: uppercase;">OADR REGISTRY</div>
                        </div>
                        `}

                        <div style="position: relative; z-index: 2;">
                            <div style="font-size: 16px; margin-bottom: 5px;">BEFORE ME:</div>
                            ${ee ? `
                            <img src="${ee}" style="height: 60px; width: auto; max-width: 250px; filter: contrast(1.1);" />
                            `: `
                            <div style="height: 60px; border-bottom: 2px solid #000; width: 80%; margin: 5px auto;"></div>
                            `}
                            <div style="font-weight: bold; font-size: 18px; text-transform: uppercase; margin-top: 5px;">${b}</div>
                            <div style="font-size: 14px; font-weight: bold;">COMMISSIONER FOR OATHS</div>
                        </div>
                    </div>
                </div>
            </div>
        `, document.body.appendChild(B); const Q = await d(B, { scale: 2, useCORS: !0, allowTaint: !1, logging: !0, backgroundColor: "#ffffff" }), Z = new p({ orientation: "portrait", unit: "pt", format: "a4" }), le = Z.internal.pageSize.getWidth(), X = Z.internal.pageSize.getHeight(), ce = 50, he = 50, ue = 50, ye = 50, se = le - ce - he, _e = X - ue - ye, Se = Q.toDataURL("image/png"), we = se, De = Q.height * se / Q.width; let mt = De, Lt = we; if (De > _e) { const Dt = _e / De; Lt = we * Dt, mt = _e; const ot = (se - Lt) / 2; Z.addImage(Se, "PNG", ce + ot, ue, Lt, mt, void 0, "FAST") } else Z.addImage(Se, "PNG", ce, ue, Lt, mt, void 0, "FAST"); if (l) return document.body.removeChild(B), Z.output("blob"); Z.save(`Affidavit_Certified_Final_${t || "Draft"}.pdf`), document.body.removeChild(B)
    } catch (h) { console.error("PDF Final Render Error:", h), o && o({ type: "error", title: "Export Error", message: "Failed to generate clean PDF. " + h.message }) }
}, g2 = async ({ user: e, payment: t }) => {
    const { jsPDF: r } = window.jspdf || {}; !r && window.jspdf && window.jspdf.jsPDF; const n = window.html2canvas, s = await ny(() => import("./browser-2d1fe99b.js").then(o => o.b), []); try {
        const o = new Date, a = `${window.location.origin}/verify-payment/${t.transaction_id || "new"}`, c = await s.toDataURL(a, { margin: 0, width: 120 }), l = `${window.location.origin}/assets/coat_of_arms.png`, d = await (R => new Promise(y => { if (!R) return y(null); const v = new Image; v.crossOrigin = "anonymous", v.onload = () => { const D = document.createElement("canvas"); D.width = v.width, D.height = v.height, D.getContext("2d").drawImage(v, 0, 0); const W = D.toDataURL("image/png"); y(W) }, v.onerror = () => y(null), v.src = R }))(l), f = document.createElement("div"); f.style.width = "800px", f.style.padding = "40px", f.style.backgroundColor = "#ffffff", f.style.fontFamily = "'Inter', sans-serif", f.style.position = "absolute", f.style.left = "-9999px", f.style.top = "0", f.innerHTML = `
            <div style="border: 2px solid #e2e8f0; border-radius: 12px; overflow: hidden; color: rgb\(18 37 74\);">
                <div style="background: #3d2b1f; color: white; padding: 30px; display: flex; align-items: center; gap: 30px;">
                    <img src="${d}" style="width: 80px;" />
                    <div>
                        <h1 style="margin: 0; font-size: 24px; text-transform: uppercase; letter-spacing: 1px;">Borno State High Court</h1>
                        <p style="margin: 5px 0 0; opacity: 0.8; font-size: 14px;">Court Registry Management System (CRMS)</p>
                    </div>
                </div>

                <div style="padding: 40px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 40px; border-bottom: 2px solid #f1f5f9; padding-bottom: 20px;">
                        <div>
                            <h2 style="margin: 0; color: #3d2b1f; font-size: 28px;">Payment Receipt</h2>
                            <p style="margin: 5px 0 0; color: #778eaeff;">Transaction Reference: <strong>${t.transaction_id}</strong></p>
                        </div>
                        <div style="text-align: right;">
                            <p style="margin: 0; color: #778eaeff; font-size: 14px;">Date of Payment</p>
                            <p style="margin: 5px 0 0; font-weight: bold; font-size: 18px;">${new Date(t.payment_date).toLocaleDateString()}</p>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px;">
                        <div>
                            <h3 style="font-size: 12px; text-transform: uppercase; color: #94a3b8; letter-spacing: 1px; margin-bottom: 10px;">Payment From</h3>
                            <p style="margin: 0; font-weight: bold; font-size: 16px;">${e.firstName || e.first_name || ""} ${e.surname || ""}</p>
                            <p style="margin: 5px 0 0; color: #778eaeff; font-size: 14px;">${e.email}</p>
                            <p style="margin: 5px 0 0; color: #778eaeff; font-size: 14px;">NIN: ${e.nin || "N/A"}</p>
                        </div>
                        <div>
                            <h3 style="font-size: 12px; text-transform: uppercase; color: #94a3b8; letter-spacing: 1px; margin-bottom: 10px;">Payment Details</h3>
                            <p style="margin: 0; font-weight: bold; font-size: 16px;">${t.item_paid}</p>
                            <p style="margin: 5px 0 0; color: #778eaeff; font-size: 14px;">Type: ${t.affidavit_id ? "Affidavit Filing" : "Probate Application"}</p>
                            <p style="margin: 5px 0 0; color: #778eaeff; font-size: 14px;">Status: <span style="color: #059669; font-weight: bold;">${t.payment_status.toUpperCase()}</span></p>
                        </div>
                    </div>

                    <div style="background: #f8fafc; border-radius: 8px; padding: 30px; margin-bottom: 40px;">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="border-bottom: 2px solid #e2e8f0; text-align: left;">
                                    <th style="padding: 10px; font-size: 12px; color: #778eaeff; text-transform: uppercase;">Description</th>
                                    <th style="padding: 10px; font-size: 12px; color: #778eaeff; text-transform: uppercase; text-align: right;">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td style="padding: 20px 10px; font-weight: bold;">${t.item_paid} ${t.affidavit_title ? `(${t.affidavit_title})` : t.deceased_name ? `(${t.deceased_name})` : ""}</td>
                                    <td style="padding: 20px 10px; font-weight: bold; text-align: right; font-size: 18px;">${parseFloat(t.amount).toLocaleString()}</td>
                                </tr>
                            </tbody>
                            <tfoot>
                                <tr style="border-top: 2px solid #e2e8f0;">
                                    <td style="padding: 20px 10px; font-weight: bold; text-align: right;">TOTAL PAID</td>
                                    <td style="padding: 20px 10px; font-weight: 900; text-align: right; font-size: 24px; color: #3d2b1f;">${parseFloat(t.amount).toLocaleString()}</td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="display: flex; align-items: center; gap: 20px;">
                            <img src="${c}" style="width: 100px;" />
                            <div>
                                <p style="margin: 0; font-size: 12px; color: #778eaeff;">Authenticity can be verified by scanning</p>
                                <p style="margin: 5px 0 0; font-size: 10px; font-weight: bold; font-family: monospace;">CERT-PTX-${t.id}-${o.getTime()}</p>
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="height: 40px; width: 150px; border-bottom: 2px solid rgb\(18 37 74\); margin-bottom: 5px; margin-left: auto;"></div>
                            <p style="margin: 0; font-size: 12px; font-weight: bold; text-transform: uppercase;">FOR CHIEF REGISTRAR</p>
                            <p style="margin: 0; font-size: 10px; color: #778eaeff;">Borno State High Court</p>
                        </div>
                    </div>
                </div>

                <div style="background: #f1f5f9; padding: 20px; text-align: center; color: #778eaeff; font-size: 11px;">
                    This is an electronically generated receipt and does not require a physical signature. 
                    Copyright &copy; ${o.getFullYear()} Borno State Judiciary.
                </div>
            </div>
        `, document.body.appendChild(f); const h = await n(f, { scale: 2, useCORS: !0 }), P = window.jspdf.jsPDF, b = new P({ orientation: "portrait", unit: "mm", format: "a4" }), u = h.toDataURL("image/png"), g = 210, S = h.height * g / h.width; b.addImage(u, "PNG", 0, 0, g, S), b.save(`Receipt_${t.transaction_id}.pdf`), document.body.removeChild(f)
    } catch (o) { console.error("Receipt generation failed:", o) }
}, Em = ({ value: e, onChange: t, placeholder: r }) => {
    const n = J.useRef(null), s = J.useRef(null); J.useEffect(() => { n.current && n.current.innerHTML !== e && (n.current.innerHTML = e || "") }, [e]); const o = (l, p = null) => { document.execCommand(l, !1, p), t && t(n.current.innerHTML) }, a = () => { t && t(n.current.innerHTML) }, c = l => { const p = l.target.files[0]; if (p) { const d = new FileReader; d.onload = f => { o("insertImage", f.target.result) }, d.readAsDataURL(p) } }; return i.jsxs("div", {
        style: { border: "1px solid #e2e8f0", borderRadius: "12px", overflow: "hidden", background: "white", display: "flex", flexDirection: "column", minHeight: "400px", boxShadow: "0 4px 6px -1px rgba(0, 0, 0, 0.1)" }, children: [i.jsxs("div", { style: { padding: "0.75rem", borderBottom: "1px solid #e2e8f0", background: "#f8fafc", display: "flex", gap: "0.5rem", flexWrap: "wrap" }, children: [i.jsx("button", { onClick: () => o("bold"), className: "editor-btn", title: "Bold", children: i.jsx(VI, { size: 18 }) }), i.jsx("button", { onClick: () => o("italic"), className: "editor-btn", title: "Italic", children: i.jsx(Pj, { size: 18 }) }), i.jsx("div", { style: { width: "1px", background: "#e2e8f0", margin: "0 4px" } }), i.jsx("button", { onClick: () => o("insertUnorderedList"), className: "editor-btn", title: "Bullet List", children: i.jsx(qy, { size: 18 }) }), i.jsx("button", { onClick: () => o("insertOrderedList"), className: "editor-btn", title: "Ordered List", children: i.jsx(Oj, { size: 18 }) }), i.jsx("div", { style: { width: "1px", background: "#e2e8f0", margin: "0 4px" } }), i.jsx("button", { onClick: () => o("justifyLeft"), className: "editor-btn", title: "Align Left", children: i.jsx(u5, { size: 18 }) }), i.jsx("button", { onClick: () => o("justifyCenter"), className: "editor-btn", title: "Align Center", children: i.jsx(o5, { size: 18 }) }), i.jsx("button", { onClick: () => o("justifyRight"), className: "editor-btn", title: "Align Right", children: i.jsx(c5, { size: 18 }) }), i.jsx("div", { style: { width: "1px", background: "#e2e8f0", margin: "0 4px" } }), i.jsx("button", { onClick: () => s.current.click(), className: "editor-btn", title: "Insert Image", children: i.jsx(Wy, { size: 18 }) }), i.jsx("input", { type: "file", ref: s, onChange: c, accept: "image/*", style: { display: "none" } }), i.jsx("div", { style: { width: "1px", background: "#e2e8f0", margin: "0 4px" } }), i.jsxs("select", { onChange: l => o("formatBlock", l.target.value), style: { padding: "4px", borderRadius: "4px", border: "1px solid #e2e8f0", fontSize: "13px" }, children: [i.jsx("option", { value: "P", children: "Paragraph" }), i.jsx("option", { value: "H1", children: "Heading 1" }), i.jsx("option", { value: "H2", children: "Heading 2" }), i.jsx("option", { value: "H3", children: "Heading 3" })] })] }), i.jsx("div", { ref: n, contentEditable: !0, onInput: a, style: { flex: 1, padding: "2rem", outline: "none", fontSize: "16px", lineHeight: "1.6", fontFamily: "'Inter', system-ui, sans-serif", color: "rgb\(18 37 74\)", overflowY: "auto" }, "data-placeholder": r }), i.jsx("style", {
            children: `
                .editor-btn {
                    background: white;
                    border: 1px solid #e2e8f0;
                    padding: 6px;
                    border-radius: 6px;
                    cursor: pointer;
                    color: #475569;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    transition: all 0.2s;
                }
                .editor-btn:hover {
                    background: #f1f5f9;
                    color: rgb\(18 37 74\);
                    border-color: #cbd5e1;
                }
                [contenteditable]:empty:before {
                    content: attr(data-placeholder);
                    color: #94a3b8;
                    cursor: text;
                }
                [contenteditable] h1 { font-size: 2rem; margin-bottom: 1rem; }
                [contenteditable] h2 { font-size: 1.5rem; margin-bottom: 0.75rem; }
                [contenteditable] h3 { font-size: 1.25rem; margin-bottom: 0.5rem; }
                [contenteditable] ul, [contenteditable] ol { margin-left: 1.5rem; margin-bottom: 1rem; }
                [contenteditable] img { max-width: 100%; height: auto; border-radius: 8px; margin: 10px 0; }
            `})]
    })
}, m_ = ({ user: e, editMode: t = !1, affidavit: r = null, onComplete: n = null, onNavigateToOath: s, isMobile: o = !1 }) => { const [a, c] = J.useState(t ? 2 : 1), [l, p] = J.useState([]), [d, f] = J.useState(null), [h, P] = J.useState(""), [b, u] = J.useState(null), [g, S] = J.useState(null), [R, y] = J.useState(!1), [v, D] = J.useState(0), [M, W] = J.useState(!0), { showModal: I } = Pi(), [E, _] = J.useState("idle"), k = async () => { var X, ce, he, ue; if (!navigator.onLine) { I({ type: "error", title: "No Internet Connection", message: "You appear to be offline. Please check your internet connection to proceed to the live session." }); return } if (!g) { console.error("handleProceedToLiveOath: Missing applicationId"), I({ type: "error", title: "System Error", message: "Application ID was not found. Please try refreshing the page." }); return } if (!localStorage.getItem("token")) { I({ type: "error", title: "Session Expired", message: "Your session has expired. Please log in again." }); return } try { console.log("Verifying server connection and ensuring user is live..."), await lt.get("/banners"), console.log(`Sending virtual oath request for affidavit ${g}...`), await lt.put(`/affidavits/${g}/virtual-oath`, { status: "requested" }), I({ type: "success", title: "Request Sent", message: "You are being redirected to the Virtual Oath waiting room.", confirmText: "Proceed", onConfirm: () => { s && s() } }) } catch (ye) { console.error("Failed to set oath request:", ye); let se = "An unexpected error occurred."; ye.code === "ERR_NETWORK" ? se = "Server is unreachable. Please try again later." : se = ((ce = (X = ye.response) == null ? void 0 : X.data) == null ? void 0 : ce.error) || ((ue = (he = ye.response) == null ? void 0 : he.data) == null ? void 0 : ue.message) || "Unknown server error", I({ type: "error", title: "Request Failed", message: `Failed to initiate virtual oath request: ${se}` }) } }; J.useEffect(() => { L() }, []), J.useEffect(() => { t && r && (console.log("FileNewAffidavit: Syncing with affidavit prop", r), S(r.id), P(r.content || ""), a === 1 && c(2)) }, [t, r]), J.useEffect(() => { if (t && r && l.length > 0 && !d) { const le = l.find(X => X.id === r.template_id) || l.find(X => X.title === r.type); le && f(le) } }, [t, r, l, d]); const L = async () => { try { const le = await lt.get("/affidavits/templates"); p(le.data) } catch (le) { console.error("Error fetching templates:", le), I({ type: "error", title: "Error Loading Templates", message: "Failed to load affidavit templates. Please refresh the page." }) } finally { W(!1) } }, H = () => c(a + 1), V = () => c(a - 1), ee = () => d ? parseFloat(d.amount) : 0, K = (le = "Card") => { _("processing"), setTimeout(async () => { try { const X = new FormData; X.append("userId", (e == null ? void 0 : e.id) || 1), X.append("type", (d == null ? void 0 : d.title) || "Custom Affidavit"), X.append("amount", ee()), X.append("payment_id", `PAY-${Math.random().toString(36).substr(2, 9).toUpperCase()}`), (d == null ? void 0 : d.template_type) === "upload" && b ? (X.append("file", b), X.append("content", `Uploaded File: ${b.name}`)) : X.append("content", h); const ce = await lt.post("/affidavits", X, { headers: { "Content-Type": "multipart/form-data" } }); S(ce.data.id); const he = `PAY-${Math.random().toString(36).substr(2, 9).toUpperCase()}`; await lt.post("/payments", { user_id: e.id, applicant_id: null, affidavit_id: ce.data.id, item_paid: (d == null ? void 0 : d.title) || "Custom Affidavit", amount: ee() * 1.075, transaction_id: he, status: "completed" }), _("idle"), I({ type: "success", title: "Payment Successful", message: `${le} payment of ${(ee() * 1.075).toLocaleString()} received successfully.`, confirmText: "Review Submission", onConfirm: H }) } catch (X) { console.error("API Error:", X), _("idle"), I({ type: "error", title: "System Error", message: "Payment was successful but we failed to record it. Reference: ERR-PY-500" }) } }, 2e3) }, N = async () => { try { await lt.put(`/affidavits/${g}/virtual-oath`, { status: "requested" }) } catch (ce) { console.error("Failed to set oath request status:", ce) } y(!0); let le = 0; const X = setInterval(() => { le += 5, D(le), le >= 100 && (clearInterval(X), B()) }, 150) }, B = async () => { try { await lt.put(`/affidavits/${g}/status`, { status: "submitted", captured_image: "liveness_verified_dummy_path" }), y(!1), I({ type: "success", title: "Biometric Verified", message: "Internal AI check complete. Your application is now prioritized for Registry Review.", confirmText: "Finish", onConfirm: H }) } catch (le) { console.error("Update Error:", le), y(!1), H() } }, Q = async () => { var le, X, ce, he; try { const ue = g || (r == null ? void 0 : r.id); if (!ue) throw console.error("FileNewAffidavit: Missing ID", { applicationId: g, affidavit: r }), new Error("Could not identify the affidavit to update (Missing ID)."); const ye = new FormData; ye.append("type", (d == null ? void 0 : d.title) || (r == null ? void 0 : r.type) || "Custom Affidavit"), ye.append("content", h), (d == null ? void 0 : d.template_type) === "upload" && b && ye.append("file", b), console.log(`Sending update for affidavit ${ue}...`); const se = await lt.put(`/affidavits/${ue}`, ye); I({ type: "success", title: "Changes Saved", message: se.data.message || "Your affidavit has been updated successfully.", confirmText: "Back to History", onConfirm: () => { n && n() } }) } catch (ue) { console.error("Update Error Detail:", ue); const ye = ((X = (le = ue.response) == null ? void 0 : le.data) == null ? void 0 : X.error) || ((he = (ce = ue.response) == null ? void 0 : ce.data) == null ? void 0 : he.message) || ue.message || "An unexpected error occurred while saving changes."; I({ type: "error", title: "Update Failed", message: ye }) } }, Z = async () => { await tu({ user: e, applicationId: g, templateTitle: d == null ? void 0 : d.title, content: h, file: b, showModal: I }) }; return i.jsxs("div", { className: "glass-card", style: { background: "white", padding: o ? "1rem" : "2rem", minHeight: "500px" }, children: [i.jsx("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2.5rem", overflowX: o ? "auto" : "visible", paddingBottom: "0.5rem", gap: "0.5rem" }, children: ["Select", "Review", "Pay", "Sub", "Verify", "Done"].map((le, X) => i.jsxs("div", { style: { flex: o ? "0 0 60px" : 1, textAlign: "center", paddingBottom: "0.8rem", borderBottom: a === X + 1 ? "3px solid #3498db" : "3px solid #f1f5f9", color: a === X + 1 ? "#3498db" : "#94a3b8", fontWeight: a === X + 1 ? "700" : "500", fontSize: "11px", transition: "all 0.3s" }, children: [X + 1, ". ", le] }, X)) }), a === 1 && i.jsxs("div", { style: { maxWidth: "500px", margin: "0 auto" }, children: [i.jsx("h3", { style: { marginBottom: "1.5rem", textAlign: "center" }, children: "Choose Affidavit Template" }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#778eaeff", fontSize: "14px" }, children: "Template Category" }), M ? i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "12px" }, children: [i.jsx(Jn, { size: 20, className: "animate-spin" }), i.jsx("span", { children: "Loading templates..." })] }) : i.jsxs("select", { style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #ddd", outline: "none" }, value: (d == null ? void 0 : d.id) || "", onChange: le => { const X = le.target.value; if (X === "") f(null); else { const ce = l.find(he => he.id === parseInt(X)); f(ce) } }, children: [i.jsx("option", { value: "", children: "-- Select Template --" }), l.map(le => i.jsxs("option", { value: le.id, children: [le.title, " - ", parseFloat(le.amount).toLocaleString()] }, le.id))] })] }), d && d.template_type === "upload" && i.jsxs(Wt.div, { initial: { opacity: 0, scale: .98 }, animate: { opacity: 1, scale: 1 }, style: { padding: "2rem", border: "2px dashed #cbd5e1", borderRadius: "12px", textAlign: "center", background: "#f8fafc" }, children: [i.jsx(Bd, { size: 40, color: "#94a3b8", style: { marginBottom: "1rem" } }), i.jsx("h4", { style: { margin: "0 0 0.5rem" }, children: "Upload your Affidavit" }), i.jsx("p", { style: { fontSize: "12px", color: "#778eaeff", marginBottom: "1.5rem" }, children: "Only PDF files are accepted (Max 5MB)" }), i.jsx("input", { type: "file", accept: ".pdf", onChange: le => u(le.target.files[0]), style: { display: "none" }, id: "file-upload" }), i.jsx("label", { htmlFor: "file-upload", className: "btn", style: { background: "#3b82f6", color: "white", padding: "0.6rem 1.5rem", cursor: "pointer", display: "inline-block" }, children: "Select File" }), b && i.jsxs("p", { style: { marginTop: "1rem", color: "#10b981", fontSize: "13px", fontWeight: "500" }, children: [" ", b.name] })] }), i.jsx("button", { disabled: !d || d.template_type === "upload" && !b, onClick: () => { d && d.template_type !== "upload" && P(d.content), H() }, className: "btn btn-primary", style: { padding: "12px" }, children: "Next: Review Content" })] })] }), a === 2 && i.jsxs(Wt.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, children: [(d == null ? void 0 : d.template_type) === "upload" ? i.jsxs("div", { style: { textAlign: "center", padding: "3rem 0" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#ecfdf5", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: i.jsx(zn, { size: 40, color: "#10b981" }) }), i.jsx("h3", { children: "File Review" }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Your document is ready for processing." }), i.jsxs("div", { style: { margin: "1.5rem auto", padding: "1rem", background: "#f8fafc", borderRadius: "8px", border: "1px solid #e2e8f0", maxWidth: "400px" }, children: [i.jsx("p", { style: { margin: 0, fontSize: "14px", fontWeight: "600" }, children: b == null ? void 0 : b.name }), i.jsxs("p", { style: { margin: "4px 0 0", fontSize: "12px", color: "#94a3b8" }, children: [((b == null ? void 0 : b.size) / 1024 / 1024).toFixed(2), " MB  PDF Document"] })] })] }) : i.jsxs(i.Fragment, { children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1rem" }, children: [i.jsx("h3", { children: "Edit Affidavit Content" }), i.jsx("span", { style: { fontSize: "12px", background: "#3b82f6", color: "white", padding: "4px 10px", borderRadius: "20px" }, children: "Smart Editor" })] }), i.jsx(Em, { value: h, onChange: P, placeholder: "Start typing your affidavit content here..." })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "2.5rem" }, children: [i.jsx("button", { onClick: t ? n : V, className: "btn", style: { background: "#f1f5f9", color: "#475569", flex: 1, padding: "12px" }, children: t ? "Cancel Edit" : "Previous Step" }), i.jsx("button", { onClick: t ? Q : H, className: "btn btn-primary", style: { flex: 1, padding: "12px" }, children: t ? "Save Changes" : "Next: Proceed to Payment" })] })] }), a === 3 && i.jsx(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, style: { textAlign: "center", maxWidth: "500px", margin: "0 auto" }, children: E === "processing" ? i.jsxs("div", { style: { padding: "3rem 0" }, children: [i.jsx(Jn, { size: 64, color: "#3b82f6", className: "animate-spin", style: { margin: "0 auto 1.5rem" } }), i.jsx("h3", { children: "Authorizing Transaction" }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Please wait while we secure your payment..." })] }) : i.jsxs(i.Fragment, { children: [i.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#eff6ff", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: i.jsx(ga, { size: 40, color: "#3b82f6" }) }), i.jsx("h3", { children: "Secure Processing Fee" }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Please settle the administrative fee to activate video verification." }), i.jsxs("div", { style: { margin: "2rem 0", padding: "1.5rem", background: "#f8fafc", borderRadius: "12px", border: "1px solid #e2e8f0" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "0.5rem" }, children: [i.jsx("span", { style: { color: "#778eaeff" }, children: "Service Fee" }), i.jsxs("span", { style: { fontWeight: "600" }, children: ["", ee().toLocaleString()] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "1rem", paddingBottom: "1rem", borderBottom: "1px solid #e2e8f0" }, children: [i.jsx("span", { style: { color: "#778eaeff" }, children: "VAT (7.5%)" }), i.jsxs("span", { style: { fontWeight: "600" }, children: ["", (ee() * .075).toLocaleString()] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", fontSize: "1.2rem" }, children: [i.jsx("span", { style: { fontWeight: "700" }, children: "Total Amount" }), i.jsxs("span", { style: { fontWeight: "800", color: "#10b981" }, children: ["", (ee() * 1.075).toLocaleString()] })] })] }), i.jsxs("div", { style: { display: "flex", flexDirection: o ? "column" : "row", gap: "1.5rem", marginBottom: "2.5rem" }, children: [i.jsxs(Wt.button, { whileHover: { scale: 1.02, translateY: -4 }, whileTap: { scale: .98 }, onClick: () => K("PayPal"), className: "btn", style: { background: "#fff", border: "2px solid #e2e8f0", display: "flex", flexDirection: "column", alignItems: "center", gap: "0.75rem", padding: "1.5rem", borderRadius: "16px", flex: 1 }, children: [i.jsx("div", { style: { background: "#f8fafc", padding: "10px", borderRadius: "12px" }, children: i.jsx("img", { src: "https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg", alt: "PayPal", style: { height: "24px" } }) }), i.jsx("span", { style: { fontSize: "14px", fontWeight: "600", color: "rgb\(18 37 74\)" }, children: "PayPal Express" })] }), i.jsxs(Wt.button, { whileHover: { scale: 1.02, translateY: -4 }, whileTap: { scale: .98 }, onClick: () => K("Credit Card"), className: "btn", style: { background: "linear-gradient(135deg, #1e1b4b 0%, #312e81 100%)", color: "white", display: "flex", flexDirection: "column", alignItems: "center", gap: "0.75rem", padding: "1.5rem", border: "none", borderRadius: "16px", boxShadow: "0 10px 15px -3px rgba(49, 46, 129, 0.3)", flex: 1 }, children: [i.jsx("div", { style: { background: "rgba(255,255,255,0.1)", padding: "10px", borderRadius: "12px" }, children: i.jsx(ga, { size: 24 }) }), i.jsx("span", { style: { fontSize: "14px", fontWeight: "600" }, children: "Secure Card Payment" })] })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [i.jsx("button", { onClick: V, className: "btn", style: { background: "#f1f5f9", color: "#475569", flex: 1 }, children: "Back to Review" }), i.jsx("button", { onClick: () => K("Direct"), className: "btn btn-primary", style: { background: "#10b981", flex: 1 }, children: "Pay with Wallet balance" })] })] }) }), a === 4 && i.jsxs(Wt.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, style: { textAlign: "center", maxWidth: "550px", margin: "0 auto" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#fef3c7", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: i.jsx(Qd, { size: 40, color: "#d97706" }) }), i.jsx("h3", { style: { fontSize: "1.5rem", marginBottom: "1rem" }, children: "Application Submitted" }), i.jsxs("p", { style: { color: "#778eaeff", fontSize: "1.1rem", marginBottom: "2rem" }, children: ["Your payment was successful and your application has been received. Your current status is ", i.jsx("strong", { style: { color: "#d97706" }, children: "UNDER REVIEW" }), "."] }), i.jsxs("div", { style: { background: "#f8fafc", padding: "1.5rem", borderRadius: "12px", textAlign: "left", border: "1px solid #e2e8f0", marginBottom: "2.5rem" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "0.8rem" }, children: [i.jsx("span", { style: { color: "#778eaeff" }, children: "Application ID:" }), i.jsxs("span", { style: { fontWeight: "700" }, children: ["CRMS-", g] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between" }, children: [i.jsx("span", { style: { color: "#778eaeff" }, children: "Current Status:" }), i.jsx("span", { style: { color: "#d97706", fontWeight: "bold" }, children: "UNDER REVIEW" })] })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [i.jsx("button", { onClick: () => window.location.reload(), className: "btn", style: { flex: 1, background: "#f1f5f9", color: "#475569" }, children: "Back to Dashboard" }), i.jsxs("button", { onClick: k, className: "btn btn-primary", style: { flex: 1, background: "#3b82f6", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: ["Continue to Live Verify ", i.jsx(rf, { size: 18 })] })] })] }), a === 5 && i.jsxs(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, children: [i.jsxs("div", { style: { textAlign: "center", marginBottom: "2rem" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", borderRadius: "50%", background: "#fff1f2", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: i.jsx(rf, { size: 40, color: "#f43f5e" }) }), i.jsx("h3", { children: "Video Verification Session" }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Connect with a judicial officer to finalize your oath in real-time." })] }), i.jsxs("div", { style: { padding: "4rem 1rem", background: "#0f172a", borderRadius: "16px", textAlign: "center", margin: "1rem 0", position: "relative", overflow: "hidden", minHeight: "350px", display: "flex", flexDirection: "column", justifyContent: "center", alignItems: "center", border: "4px solid rgb\(18 37 74\)" }, children: [i.jsx(ma, { mode: "wait", children: R ? i.jsxs(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { textAlign: "center" }, children: [i.jsx(Jn, { size: 48, className: "animate-spin", color: "#3b82f6", style: { marginBottom: "1.5rem" } }), i.jsx("h4", { style: { color: "white" }, children: "Performing Liveness Check..." }), i.jsx("p", { style: { color: "#94a3b8" }, children: "Please look directly into the camera" }), i.jsx("div", { style: { width: "200px", height: "8px", background: "rgb\(18 37 74\)", borderRadius: "4px", margin: "1.5rem auto", overflow: "hidden" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: `${v}%` }, style: { height: "100%", background: "#3b82f6" } }) }), i.jsxs("span", { style: { color: "#3b82f6", fontWeight: "bold" }, children: [v, "%"] })] }, "verifying") : i.jsxs(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { color: "#94a3b8", textAlign: "center" }, children: [i.jsx(rf, { size: 64, style: { marginBottom: "1.5rem", opacity: .5 } }), i.jsx("h4", { style: { color: "white", margin: "0 0 0.5rem" }, children: "Camera Ready" }), i.jsx("p", { style: { fontSize: "14px" }, children: "Please ensure your face is well-lit and clearly visible." })] }, "waiting") }), i.jsxs("div", { style: { position: "absolute", top: "20px", left: "20px", display: "flex", alignItems: "center", gap: "0.5rem", background: "rgba(0,0,0,0.5)", padding: "4px 12px", borderRadius: "20px", border: "1px solid rgba(255,255,255,0.1)" }, children: [i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: "#ef4444" } }), i.jsx("span", { style: { color: "white", fontSize: "10px", fontWeight: "bold" }, children: "LIVE PREVIEW" })] })] }), i.jsx("button", { onClick: N, disabled: R, className: "btn", style: { width: "100%", background: R ? "rgb\(18 37 74\)" : "#10b981", color: "white", padding: "1.2rem", fontWeight: "bold", fontSize: "16px", borderRadius: "12px", boxShadow: "0 4px 6px -1px rgba(16, 185, 129, 0.2)", cursor: R ? "not-allowed" : "pointer", marginTop: "2rem" }, children: R ? "Verifying Identity..." : "Start Liveness Check" }), i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1.5rem" }, children: [i.jsx("button", { onClick: V, disabled: R, className: "btn", style: { background: "#f1f5f9", color: "#475569", flex: 1, opacity: R ? .5 : 1 }, children: "Back to Submission" }), i.jsx("button", { className: "btn", disabled: R, style: { background: "#f1f5f9", color: "#475569", flex: 1, opacity: R ? .5 : 1 }, children: "Schedule for Later" })] })] }), a === 6 && i.jsxs(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, className: "text-center", children: [i.jsxs("div", { style: { marginBottom: "2rem" }, children: [i.jsx("div", { style: { background: "#f0fdf4", width: "80px", height: "80px", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem", border: "2px solid #10b981" }, children: i.jsx(Tl, { size: 40, color: "#10b981" }) }), i.jsx("h1", { style: { fontSize: "2.5rem", fontWeight: "800", color: "rgb\(18 37 74\)", marginBottom: "1rem" }, children: "Application Submitted" }), i.jsxs("p", { style: { color: "#778eaeff", fontSize: "1.1rem", maxWidth: "600px", margin: "0 auto" }, children: ["Your affidavit has been submitted to the ", i.jsx("strong", { children: "OADR Registry" }), " for formal review."] })] }), i.jsxs("div", { style: { background: "linear-gradient(145deg, #ffffff 0%, #f8fafc 100%)", padding: "2.5rem", borderRadius: "24px", border: "1px solid #e2e8f0", marginBottom: "3rem", position: "relative", overflow: "hidden", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.05)", maxWidth: "500px", margin: "0 auto 3rem" }, children: [i.jsx("div", { style: { position: "absolute", top: 0, right: 0, width: "150px", height: "150px", background: "radial-gradient(circle, rgba(16, 185, 129, 0.05) 0%, transparent 70%)", zIndex: 0 } }), i.jsxs("div", { style: { position: "relative", zIndex: 1 }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", paddingBottom: "1rem", borderBottom: "1px solid #f1f5f9", marginBottom: "1rem" }, children: [i.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Reference ID" }), i.jsxs("span", { style: { fontWeight: "800", color: "rgb\(18 37 74\)", fontFamily: "monospace", fontSize: "1.1rem" }, children: ["CRMS-", g] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", paddingBottom: "1rem", borderBottom: "1px solid #f1f5f9", marginBottom: "1rem" }, children: [i.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Current Status" }), i.jsxs("span", { style: { color: "#3b82f6", fontWeight: "800", display: "flex", alignItems: "center", gap: "6px" }, children: [i.jsx(Jn, { size: 18, className: "animate-spin" }), " SUBMITTED"] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between" }, children: [i.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Identity Check" }), i.jsxs("span", { style: { fontWeight: "700", color: "#10b981", display: "flex", alignItems: "center", gap: "6px" }, children: [i.jsx(VC, { size: 18 }), " AI SECURED"] })] })] })] }), i.jsxs("div", { style: { display: "flex", gap: "1.5rem", justifyContent: "center" }, children: [i.jsxs("button", { onClick: Z, className: "btn", style: { background: "#fff", border: "2px solid #e2e8f0", padding: "1rem 2rem", display: "flex", alignItems: "center", gap: "0.75rem", borderRadius: "14px", fontWeight: "600" }, children: [i.jsx(Al, { size: 20 }), " Preview Draft"] }), i.jsx("button", { onClick: () => window.location.reload(), className: "btn", style: { background: "rgb\(18 37 74\)", color: "white", padding: "1rem 2rem", borderRadius: "14px", fontWeight: "600" }, children: "Go to Dashboard" })] })] })] }) }, lM = ({ isMobile: e = !1 }) => { const [t, r] = J.useState(null), [n, s] = J.useState(!0), [o, a] = J.useState(!0), [c, l] = J.useState(!1), [p, d] = J.useState(!1), [f, h] = J.useState([]); J.useEffect(() => { console.log(" VirtualOathSession component MOUNTED"), P(); const R = setTimeout(() => { d(!0) }, 2e3), y = async () => { var D; try { const M = await lt.post("/user/heartbeat"); console.log(" Heartbeat sent successfully:", M.data) } catch (M) { console.error(" Heartbeat failed:", ((D = M.response) == null ? void 0 : D.data) || M.message) } }; console.log(" Starting heartbeat..."), y(); const v = setInterval(y, 15e3); return () => { console.log(" VirtualOathSession component UNMOUNTED - stopping heartbeat"), clearTimeout(R), clearInterval(v), u() } }, []); const P = async () => { try { const R = JSON.parse(localStorage.getItem("user")); if (R != null && R.id) { const v = (await lt.get(`/affidavits/user/${R.id}`)).data.filter(D => D.status === "submitted"); h(v) } } catch (R) { console.error("Failed to fetch affidavits:", R) } }, b = async () => { try { const R = await navigator.mediaDevices.getUserMedia({ video: !0, audio: !0 }); r(R), l(!0), await Promise.all(f.map(y => lt.put(`/affidavits/${y.id}/virtual-oath`, { taken: !0 }))) } catch (R) { console.error("Error accessing camera or updating status:", R), alert("Could not access camera/microphone. Please check permissions.") } }, u = () => { t && (t.getTracks().forEach(R => R.stop()), r(null)), l(!1) }, g = () => { if (t) { const R = t.getAudioTracks()[0]; R && (R.enabled = !R.enabled, s(R.enabled)) } }, S = () => { if (t) { const R = t.getVideoTracks()[0]; R && (R.enabled = !R.enabled, a(R.enabled)) } }; return i.jsxs("div", { className: "glass-card", style: { background: "#0f172a", padding: "0", overflow: "hidden", height: e ? "calc(100vh - 120px)" : "calc(100vh - 100px)", display: "flex", flexDirection: "column" }, children: [i.jsxs("div", { style: { padding: e ? "0.75rem 1rem" : "1rem 2rem", background: "rgb\(18 37 74\)", borderBottom: "1px solid #334155", display: "flex", justifyContent: "space-between", alignItems: "center", flexWrap: "wrap", gap: "0.5rem" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("div", { style: { width: "12px", height: "12px", borderRadius: "50%", background: c ? "#10b981" : "#f59e0b", boxShadow: c ? "0 0 10px #10b981" : "none" } }), i.jsx("span", { style: { color: "white", fontWeight: "bold", fontSize: e ? "13px" : "16px" }, children: c ? "Connected" : "Waiting..." })] }), c && i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem", background: "rgba(16, 185, 129, 0.1)", padding: "4px 10px", borderRadius: "20px", border: "1px solid rgba(16, 185, 129, 0.2)" }, children: [i.jsx(VC, { size: 14, color: "#10b981" }), i.jsx("span", { style: { fontSize: "11px", color: "#10b981" }, children: "Secure" })] })] }), i.jsxs("div", { style: { flex: 1, display: "flex", flexDirection: e ? "column" : "row", background: "#020617", overflow: "hidden" }, children: [i.jsx("div", { style: { flex: 1, position: "relative", display: "flex", alignItems: "center", justifyContent: "center", borderRight: e ? "none" : "1px solid #334155", borderBottom: e ? "1px solid #334155" : "none", minHeight: e ? "50%" : "auto", overflow: "hidden" }, children: c ? i.jsxs("div", { style: { width: "100%", height: "100%", position: "relative" }, children: [i.jsx("div", { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", background: "rgb\(18 37 74\)" }, children: i.jsxs("div", { style: { textAlign: "center" }, children: [i.jsx("div", { style: { width: "100px", height: "100px", borderRadius: "50%", background: "#475569", margin: "0 auto 1.5rem", display: "flex", alignItems: "center", justifyContent: "center", border: "4px solid #3b82f6" }, children: i.jsx(Vn, { size: 50, color: "white" }) }), i.jsx("h3", { style: { color: "white" }, children: "Hon. CFO Admin" })] }) }), i.jsxs(Wt.div, { drag: !0, dragConstraints: { left: 0, right: 0, top: 0, bottom: 0 }, style: { position: "absolute", bottom: "1rem", right: "1rem", width: e ? "100px" : "200px", height: e ? "75px" : "150px", background: "black", borderRadius: "12px", border: "2px solid rgba(255,255,255,0.2)", overflow: "hidden", boxShadow: "0 8px 32px rgba(0,0,0,0.5)", cursor: "grab" }, children: [i.jsx("video", { ref: R => { R && t && (R.srcObject = t), R && R.play() }, style: { width: "100%", height: "100%", objectFit: "cover", transform: "scaleX(-1)" }, muted: !0 }), !o && i.jsx("div", { style: { position: "absolute", inset: 0, display: "flex", alignItems: "center", justifyContent: "center", background: "rgb\(18 37 74\)" }, children: i.jsx(Vf, { color: "#778eaeff" }) })] })] }) : i.jsx("div", { style: { textAlign: "center", color: "#94a3b8", padding: "2rem" }, children: p ? i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, children: [i.jsx("div", { style: { width: "80px", height: "80px", margin: "0 auto 1.5rem", background: "#334155", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(Vn, { size: 40, color: "#cbd5e1" }) }), i.jsx("h3", { style: { color: "white", marginBottom: "0.5rem" }, children: "Officer Online" }), i.jsx("p", { style: { maxWidth: "400px", margin: "0 auto 2rem", fontSize: "14px" }, children: "Ready to administer oath." }), i.jsxs("button", { onClick: b, className: "btn btn-primary", style: { padding: "0.8rem 2rem", background: "#3b82f6", fontSize: "1rem", display: "flex", alignItems: "center", gap: "0.5rem", margin: "0 auto" }, children: [i.jsx(ua, { size: 20 }), " Join"] })] }) : i.jsxs("div", { style: { display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem" }, children: [i.jsx("div", { className: "animate-pulse", style: { width: "64px", height: "64px", borderRadius: "50%", background: "#334155" } }), i.jsx("p", { children: "Searching for officers..." })] }) }) }), i.jsxs("div", { style: { background: "#0f172a", padding: "1rem", overflowY: "auto", width: e ? "100%" : "300px", height: e ? "auto" : "100%", flex: e ? "1" : "none", borderTop: e ? "1px solid #334155" : "none" }, children: [i.jsx("h4", { style: { color: "#94a3b8", fontSize: "12px", textTransform: "uppercase", letterSpacing: "1px", marginBottom: "1rem" }, children: "References" }), i.jsx("div", { style: { display: "flex", flexDirection: "column", gap: "0.8rem" }, children: f.length > 0 ? f.map(R => i.jsxs("div", { style: { background: "rgba(255,255,255,0.05)", padding: "1rem", borderRadius: "8px", borderLeft: "3px solid #3b82f6" }, children: [i.jsx("p", { style: { color: "white", fontSize: "13px", fontWeight: "bold", margin: "0 0 4px" }, children: R.type }), i.jsxs("p", { style: { color: "#778eaeff", fontSize: "11px", margin: 0 }, children: ["ID: CRMS-", R.id] }), i.jsx("span", { style: { display: "inline-block", marginTop: "6px", fontSize: "10px", background: "rgba(59, 130, 246, 0.2)", color: "#60a5fa", padding: "2px 6px", borderRadius: "4px" }, children: "SUBMITTED" })] }, R.id)) : i.jsx("div", { style: { textAlign: "center", color: "#778eaeff", padding: "2rem 0", fontSize: "13px" }, children: "No submitted affidavits found." }) })] })] }), c && i.jsxs("div", { style: { padding: "1rem", background: "rgb\(18 37 74\)", display: "flex", justifyContent: "center", gap: "1.5rem", flexWrap: "wrap" }, children: [i.jsx("button", { onClick: g, style: { padding: "0.8rem", borderRadius: "50%", background: n ? "#334155" : "#ef4444", border: "none", color: "white", cursor: "pointer" }, children: n ? i.jsx(zC, { size: 20 }) : i.jsx(Gy, { size: 20 }) }), i.jsx("button", { onClick: S, style: { padding: "0.8rem", borderRadius: "50%", background: o ? "#334155" : "#ef4444", border: "none", color: "white", cursor: "pointer" }, children: o ? i.jsx(ua, { size: 20 }) : i.jsx(Vf, { size: 20 }) }), i.jsxs("button", { onClick: u, style: { padding: "0.8rem 1.5rem", borderRadius: "30px", background: "#ef4444", border: "none", color: "white", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.5rem", fontSize: "14px" }, children: [i.jsx(Yj, { size: 20 }), " Leave"] })] })] }) }, qs = ({ columns: e, data: t, loading: r, onRowClick: n, actions: s, searchPlaceholder: o = "Search records...", isMobile: a }) => {
    const [c, l] = J.useState(window.innerWidth <= 1024), p = a !== void 0 ? a : c; J.useEffect(() => { const I = () => l(window.innerWidth <= 1024); return window.addEventListener("resize", I), () => window.removeEventListener("resize", I) }, []); const [d, f] = J.useState(""), [h, P] = J.useState(1), [b] = J.useState(10), [u, g] = J.useState({ key: null, direction: "asc" }), [S, R] = J.useState({ start: "", end: "" }), y = J.useMemo(() => p ? e.filter(I => !I.hiddenMobile) : e, [e, p]), v = I => { let E = "asc"; u.key === I && u.direction === "asc" && (E = "desc"), g({ key: I, direction: E }) }, D = J.useMemo(() => { let I = [...t]; return d && (I = I.filter(E => Object.values(E).some(_ => String(_).toLowerCase().includes(d.toLowerCase())))), (S.start || S.end) && (I = I.filter(E => { const _ = new Date(E.created_at || E.date), k = S.start ? new Date(S.start) : null, L = S.end ? new Date(S.end) : null; return !(k && _ < k || L && _ > L) })), u.key && I.sort((E, _) => E[u.key] < _[u.key] ? u.direction === "asc" ? -1 : 1 : E[u.key] > _[u.key] ? u.direction === "asc" ? 1 : -1 : 0), I }, [t, d, u, S]), M = Math.ceil(D.length / b), W = D.slice((h - 1) * b, h * b); return i.jsxs("div", {
        className: "glass-card", style: { padding: p ? "1rem" : "1.5rem", background: "#ffffff", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [i.jsxs("div", { style: { display: "flex", flexDirection: p ? "column" : "row", justifyContent: "space-between", alignItems: "center", gap: "1rem", marginBottom: "1.5rem" }, children: [i.jsxs("div", { style: { position: "relative", width: p ? "100%" : "300px" }, children: [i.jsx(vm, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#94a3b8" } }), i.jsx("input", { type: "text", placeholder: o, value: d, onChange: I => f(I.target.value), style: { width: "100%", padding: "0.6rem 1rem 0.6rem 2.5rem", borderRadius: "10px", border: "1px solid #e2e8f0", background: "#ffffff", color: "rgb\(18 37 74\)", fontSize: "14px", outline: "none", transition: "border-color 0.2s" } })] }), i.jsx("div", { style: { display: "flex", gap: "0.75rem", width: p ? "100%" : "auto", overflowX: "auto", paddingBottom: p ? "0.5rem" : "0" }, children: i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem", background: "#f8fafc", padding: "0.5rem 1rem", borderRadius: "10px", border: "1px solid #e2e8f0", whiteSpace: "nowrap" }, children: [i.jsx(NC, { size: 16, color: "#778eaeff" }), i.jsx("input", { type: "date", value: S.start, onChange: I => R({ ...S, start: I.target.value }), style: { background: "transparent", border: "none", fontSize: "13px", color: "#778eaeff", outline: "none" } }), i.jsx("span", { style: { color: "#cbd5e1" }, children: "-" }), i.jsx("input", { type: "date", value: S.end, onChange: I => R({ ...S, end: I.target.value }), style: { background: "transparent", border: "none", fontSize: "13px", color: "#778eaeff", outline: "none" } })] }) })] }), i.jsx("div", { style: { overflowX: "auto", borderRadius: "12px", border: "1px solid #f1f5f9" }, children: i.jsxs("table", { style: { width: "100%", borderCollapse: "collapse", textAlign: "left" }, children: [i.jsx("thead", { children: i.jsxs("tr", { style: { background: "#f8fafc", borderBottom: "1px solid #f1f5f9" }, children: [y.map(I => i.jsx("th", { onClick: () => I.sortable && v(I.key), style: { padding: "1rem", fontSize: "13px", fontWeight: "700", color: "#778eaeff", cursor: I.sortable ? "pointer" : "default", whiteSpace: "nowrap" }, children: i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [I.label, I.sortable && i.jsx(zI, { size: 14, opacity: .5 })] }) }, I.key)), s && i.jsx("th", { style: { padding: "1rem" } })] }) }), i.jsx("tbody", { children: i.jsx(ma, { mode: "wait", children: r ? Array(5).fill(0).map((I, E) => i.jsxs("tr", { style: { borderBottom: "1px solid #f1f5f9" }, children: [y.map((_, k) => i.jsx("td", { style: { padding: "1rem" }, children: i.jsx("div", { style: { height: "1.25rem", background: "#f1f5f9", borderRadius: "4px", animation: "pulse 1.5s infinite" } }) }, k)), s && i.jsx("td", { style: { padding: "1rem" }, children: i.jsx("div", { style: { height: "1.25rem", width: "20px", background: "#f1f5f9", borderRadius: "4px", animation: "pulse 1.5s infinite" } }) })] }, E)) : W.length > 0 ? W.map((I, E) => i.jsxs(Wt.tr, { initial: { opacity: 0, y: 5 }, animate: { opacity: 1, y: 0 }, transition: { delay: E * .05 }, onClick: () => n && n(I), style: { borderBottom: "1px solid #f1f5f9", cursor: n ? "pointer" : "default", transition: "background 0.2s" }, onMouseOver: _ => _.currentTarget.style.background = "#f8fafc", onMouseOut: _ => _.currentTarget.style.background = "transparent", children: [y.map(_ => i.jsx("td", { style: { padding: p ? "0.75rem" : "1rem", fontSize: p ? "12px" : "14px", color: "inherit" }, children: _.render ? _.render(I[_.key], I) : I[_.key] }, _.key)), s && i.jsx("td", { style: { padding: "1rem", textAlign: "right" }, children: s(I) })] }, I.id || E)) : i.jsx("tr", { children: i.jsx("td", { colSpan: e.length + (s ? 1 : 0), style: { padding: "4rem", textAlign: "center", color: "#94a3b8" }, children: "No records found." }) }) }) })] }) }), !r && D.length > b && i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginTop: "1.5rem", paddingTop: "1rem", borderTop: "1px solid #f1f5f9" }, children: [i.jsxs("span", { style: { fontSize: "13px", color: "#778eaeff" }, children: ["Showing ", (h - 1) * b + 1, " to ", Math.min(h * b, D.length), " of ", D.length, " records"] }), i.jsxs("div", { style: { display: "flex", gap: "0.5rem" }, children: [i.jsx("button", { disabled: h === 1, onClick: () => P(I => I - 1), style: { padding: "0.5rem", borderRadius: "8px", border: "1px solid #e2e8f0", background: h === 1 ? "#f8fafc" : "white", color: h === 1 ? "#cbd5e1" : "#778eaeff", cursor: h === 1 ? "not-allowed" : "pointer" }, children: i.jsx(BC, { size: 18 }) }), i.jsx("button", { disabled: h === M, onClick: () => P(I => I + 1), style: { padding: "0.5rem", borderRadius: "8px", border: "1px solid #e2e8f0", background: h === M ? "#f8fafc" : "white", color: h === M ? "#cbd5e1" : "#778eaeff", cursor: h === M ? "not-allowed" : "pointer" }, children: i.jsx(Yd, { size: 18 }) })] })] }), i.jsx("style", {
            children: `
                @keyframes pulse {
                    0% { opacity: 1; }
                    50% { opacity: 0.5; }
                    100% { opacity: 1; }
                }
            `})]
    })
}, v2 = ({ user: e, isMobile: t }) => { const [r, n] = J.useState([]), [s, o] = J.useState(!0), [a, c] = J.useState(null); J.useEffect(() => { e != null && e.id && l() }, [e == null ? void 0 : e.id]); const l = async () => { o(!0), c(null); try { const f = await lt.get(`/payments/user/${e.id}`); n(f.data) } catch (f) { console.error("Error fetching payments:", f), c("Failed to load payment history.") } finally { o(!1) } }, p = async f => { await g2({ user: e, payment: f }) }, d = [{ key: "payment_date", label: "Date", sortable: !0, render: f => new Date(f).toLocaleDateString("en-GB", { day: "2-digit", month: "short", year: "numeric" }) }, { key: "transaction_id", label: "Reference", render: f => i.jsx("span", { style: { fontFamily: "monospace", fontWeight: "bold" }, children: f }), hiddenMobile: !0 }, { key: "item_paid", label: "Purpose", render: (f, h) => i.jsxs("div", { children: [i.jsx("div", { style: { fontWeight: "600" }, children: f }), i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: h.affidavit_title || h.deceased_name || "Service Payment" })] }) }, { key: "amount", label: "Amount", sortable: !0, render: f => i.jsxs("span", { style: { fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: ["", parseFloat(f).toLocaleString()] }) }, { key: "payment_status", label: "Status", render: f => i.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", background: f === "completed" ? "#ecfdf5" : "#fffbeb", color: f === "completed" ? "#10b981" : "#f59e0b", textTransform: "uppercase" }, children: f }) }]; return s ? i.jsxs("div", { style: { padding: "4rem", textAlign: "center" }, children: [i.jsx(Jn, { className: "animate-spin", size: 40, color: "#3d2b1f", style: { margin: "0 auto 1rem" } }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Fetching your payment records..." })] }) : a ? i.jsxs("div", { style: { padding: "4rem", textAlign: "center" }, children: [i.jsx(Qd, { size: 40, color: "#ef4444", style: { margin: "0 auto 1rem" } }), i.jsx("p", { style: { color: "#ef4444" }, children: a }), i.jsx("button", { onClick: l, style: { marginTop: "1rem", color: "#3b82f6", background: "none", border: "none", cursor: "pointer", fontWeight: "bold" }, children: "Retry" })] }) : i.jsxs(Wt.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "glass-card", style: { background: "white", padding: t ? "1rem" : "2rem" }, children: [i.jsx("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: i.jsxs("div", { children: [i.jsxs("h2", { style: { margin: 0, fontSize: t ? "1.25rem" : "1.5rem", color: "#3d2b1f", display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsx(ga, {}), " Payment History"] }), i.jsx("p", { style: { margin: "4px 0 0", color: "#778eaeff", fontSize: "14px" }, children: "View and download your official payment receipts." })] }) }), r.length > 0 ? i.jsx(qs, { columns: d, data: r, isMobile: t, searchPlaceholder: "Search transactions...", actions: f => i.jsxs("button", { onClick: () => p(f), title: "Download Receipt", style: { background: "#3d2b1f", color: "white", border: "none", padding: "8px", borderRadius: "8px", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.5rem", transition: "transform 0.2s", fontSize: "12px", fontWeight: "bold" }, onMouseOver: h => h.currentTarget.style.transform = "scale(1.05)", onMouseOut: h => h.currentTarget.style.transform = "scale(1)", children: [i.jsx(Al, { size: 16 }), !t && "Download Receipt"] }) }) : i.jsxs("div", { style: { textAlign: "center", padding: "4rem 2rem", background: "#f8fafc", borderRadius: "16px", border: "2px dashed #e2e8f0" }, children: [i.jsx("div", { style: { width: "64px", height: "64px", background: "#fff", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.1)" }, children: i.jsx(zn, { size: 32, color: "#94a3b8" }) }), i.jsx("h3", { style: { margin: "0 0 0.5rem", color: "rgb\(18 37 74\)" }, children: "No Payments Found" }), i.jsx("p", { style: { color: "#778eaeff", margin: "0 0 1.5rem", maxWidth: "300px", margin: "0 auto 1.5rem" }, children: "You haven't made any payments yet. Records of your filings and applications will appear here." })] })] }) }, y2 = ({ user: e, isMobile: t, onUpdate: r }) => { const { showModal: n } = Pi(), [s, o] = J.useState(e), [a, c] = J.useState(!1), [l, p] = J.useState({ first_name: (s == null ? void 0 : s.first_name) || "", middle_name: (s == null ? void 0 : s.middle_name) || "", surname: (s == null ? void 0 : s.surname) || "", phone: (s == null ? void 0 : s.phone) || "", address: (s == null ? void 0 : s.address) || "", nin: (s == null ? void 0 : s.nin) || "" }), [d, f] = J.useState({ avatar: null, signature: null }), [h, P] = J.useState({ currentPassword: "", newPassword: "", confirmPassword: "" }), [b, u] = J.useState(!1), [g, S] = J.useState(!1), R = async v => { var D, M; v.preventDefault(), u(!0); try { const W = new FormData; Object.keys(l).forEach(_ => { W.append(_, l[_] || "") }), d.avatar && W.append("avatar", d.avatar), d.signature && W.append("signature", d.signature); const E = (await lt.put("/public/profile", W, { headers: { "Content-Type": "multipart/form-data" } })).data.user; o(E), r && r(E), c(!1), f({ avatar: null, signature: null }), n({ type: "success", title: "Profile Updated", message: "Your profile information has been updated successfully." }) } catch (W) { n({ type: "error", title: "Update Failed", message: ((M = (D = W.response) == null ? void 0 : D.data) == null ? void 0 : M.error) || "Failed to update profile." }) } finally { u(!1) } }, y = async v => { var D, M; if (v.preventDefault(), h.newPassword !== h.confirmPassword) return n({ type: "error", title: "Error", message: "New passwords do not match" }); S(!0); try { await lt.put("/public/change-password", { currentPassword: h.currentPassword, newPassword: h.newPassword }), n({ type: "success", title: "Success", message: "Password changed successfully" }), P({ currentPassword: "", newPassword: "", confirmPassword: "" }) } catch (W) { n({ type: "error", title: "Failed", message: ((M = (D = W.response) == null ? void 0 : D.data) == null ? void 0 : M.error) || "Failed to change password" }) } finally { S(!1) } }; return i.jsxs("div", { style: { color: "white" }, children: [i.jsxs("div", { style: { marginBottom: "2.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsxs("div", { children: [i.jsx("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0" }, children: "Account Settings" }), i.jsx("p", { style: { color: "#94a3b8" }, children: "Update your personal details and manage security" })] }), !a && i.jsxs("button", { onClick: () => c(!0), style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "10px 20px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "1px solid #3b82f6", borderRadius: "10px", cursor: "pointer", fontWeight: "600" }, children: [i.jsx(iv, { size: 18 }), " Edit Profile"] })] }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: t ? "1fr" : "1.5fr 1fr", gap: "2.5rem" }, children: [i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "2rem", marginBottom: "2.5rem" }, children: [i.jsxs("div", { style: { position: "relative" }, children: [i.jsx("div", { style: { width: "100px", height: "100px", background: "#334155", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", overflow: "hidden", border: "4px solid rgb\(18 37 74\)", boxShadow: "0 0 0 2px #3b82f6" }, children: d.avatar ? i.jsx("img", { src: URL.createObjectURL(d.avatar), style: { width: "100%", height: "100%", objectFit: "cover" }, alt: "Avatar Preview" }) : s != null && s.profile_pic ? i.jsx("img", { src: `${lt.defaults.baseURL.replace("/api", "")}${s.profile_pic}`, style: { width: "100%", height: "100%", objectFit: "cover" }, alt: "Profile" }) : i.jsx(Vn, { size: 50, color: "#778eaeff" }) }), a && i.jsxs("label", { htmlFor: "avatar-upload", style: { position: "absolute", bottom: 0, right: 0, padding: "8px", background: "#3b82f6", borderRadius: "50%", cursor: "pointer", color: "white", display: "flex", alignItems: "center", justifyContent: "center", boxShadow: "0 4px 6px rgba(0,0,0,0.3)" }, children: [i.jsx(rf, { size: 16 }), i.jsx("input", { id: "avatar-upload", type: "file", accept: "image/*", style: { display: "none" }, onChange: v => f({ ...d, avatar: v.target.files[0] }) })] })] }), i.jsxs("div", { children: [i.jsxs("h3", { style: { margin: 0, fontSize: "1.8rem" }, children: [s == null ? void 0 : s.first_name, " ", s == null ? void 0 : s.surname] }), i.jsx("p", { style: { margin: "0.25rem 0 0 0", color: "#94a3b8" }, children: s == null ? void 0 : s.email }), i.jsx("div", { style: { display: "inline-block", padding: "4px 12px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", borderRadius: "20px", fontSize: "11px", fontWeight: "700", marginTop: "0.75rem", textTransform: "uppercase", letterSpacing: "0.05em" }, children: "Public Deponent" })] })] }), i.jsx("form", { onSubmit: R, children: i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.75rem" }, children: [i.jsxs("div", { style: { display: "grid", gridTemplateColumns: t ? "1fr" : "1fr 1fr 1fr", gap: "1.25rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "First Name" }), i.jsx("input", { type: "text", readOnly: !a, value: l.first_name, onChange: v => p({ ...l, first_name: v.target.value }), style: { width: "100%", padding: "12px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Middle Name" }), i.jsx("input", { type: "text", readOnly: !a, value: l.middle_name, onChange: v => p({ ...l, middle_name: v.target.value }), style: { width: "100%", padding: "12px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Surname" }), i.jsx("input", { type: "text", readOnly: !a, value: l.surname, onChange: v => p({ ...l, surname: v.target.value }), style: { width: "100%", padding: "12px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: t ? "1fr" : "1fr 1fr", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Phone Number" }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx($C, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), i.jsx("input", { type: "text", readOnly: !a, value: l.phone, onChange: v => p({ ...l, phone: v.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "NIN Number" }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(Cc, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), i.jsx("input", { type: "text", readOnly: !a, value: l.nin, onChange: v => p({ ...l, nin: v.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Residential Address" }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx($j, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), i.jsx("textarea", { readOnly: !a, value: l.address, rows: 2, onChange: v => p({ ...l, address: v.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none", resize: "none" } })] })] }), i.jsxs("div", { style: { borderTop: "1px solid #334155", paddingTop: "2rem" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "1rem" }, children: "Digital Signature (for auto-filling)" }), i.jsxs("div", { style: { border: "2px dashed #334155", padding: "1.5rem", borderRadius: "16px", background: a ? "rgba(30, 41, 59, 0.5)" : "#0f172a", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem", position: "relative" }, children: [d.signature ? i.jsx("img", { src: URL.createObjectURL(d.signature), style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Preview" }) : s != null && s.signature_url ? i.jsx("img", { src: `${lt.defaults.baseURL.replace("/api", "")}${s.signature_url}`, style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Signature" }) : i.jsx(iv, { size: 40, color: "#334155" }), a && i.jsxs(i.Fragment, { children: [i.jsx("input", { type: "file", id: "sig-upload", style: { display: "none" }, accept: "image/*", onChange: v => f({ ...d, signature: v.target.files[0] }) }), i.jsxs("label", { htmlFor: "sig-upload", style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "8px 16px", background: "#334155", borderRadius: "8px", cursor: "pointer", fontSize: "13px", color: "white" }, children: [i.jsx(Bd, { size: 16 }), " Choose Signature Image"] })] })] })] }), a && i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [i.jsx("button", { type: "button", onClick: () => { c(!1), p({ first_name: s.first_name, middle_name: s.middle_name, surname: s.surname, phone: s.phone || "", address: s.address || "", nin: s.nin || "" }), f({ avatar: null, signature: null }) }, style: { flex: 1, padding: "12px", background: "transparent", border: "1px solid #ef4444", color: "#ef4444", borderRadius: "10px", cursor: "pointer", fontWeight: "bold" }, children: "Cancel" }), i.jsxs("button", { type: "submit", disabled: b, style: { flex: 1, padding: "12px", background: "linear-gradient(135deg, #10b981 0%, #059669 100%)", border: "none", color: "white", borderRadius: "10px", cursor: "pointer", fontWeight: "bold", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [b ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), " Save Profile"] })] })] }) })] }), i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px" }, children: [i.jsxs("h3", { style: { margin: "0 0 2rem 0", display: "flex", alignItems: "center", gap: "0.75rem", fontSize: "1.4rem" }, children: [i.jsx(Nd, { size: 22, color: "#f59e0b" }), " Change Password"] }), i.jsx("form", { onSubmit: y, children: i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Current Password" }), i.jsx("input", { type: "password", required: !0, value: h.currentPassword, onChange: v => P({ ...h, currentPassword: v.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "New Password" }), i.jsx("input", { type: "password", required: !0, value: h.newPassword, onChange: v => P({ ...h, newPassword: v.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Confirm New Password" }), i.jsx("input", { type: "password", required: !0, value: h.confirmPassword, onChange: v => P({ ...h, confirmPassword: v.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), i.jsxs("button", { type: "submit", disabled: g, style: { padding: "16px", borderRadius: "12px", background: "linear-gradient(135deg, #f59e0b 0%, #d97706 100%)", border: "none", color: "white", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.75rem", marginTop: "1rem", boxShadow: "0 10px 15px -3px rgba(245, 158, 11, 0.3)" }, children: [g ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), "Update Password"] })] }) })] })] })] }) }, b2 = ({ isMobile: e, setView: t }) => { const [r, n] = J.useState(null), [s, o] = J.useState(!0); if (J.useEffect(() => { (async () => { try { const l = await lt.get("/public/stats"); n(l.data) } catch (l) { console.error("Failed to fetch public stats:", l) } finally { o(!1) } })() }, []), s) return i.jsx("div", { style: { display: "flex", justifyContent: "center", padding: "3rem" }, children: i.jsx("div", { className: "animate-spin", style: { width: "40px", height: "40px", border: "4px solid #3b82f6", borderTopColor: "transparent", borderRadius: "50%" } }) }); const a = [{ title: "Your Affidavits", value: (r == null ? void 0 : r.total_affidavits) || 0, icon: i.jsx(zn, { color: "#3b82f6" }), color: "#3b82f6", action: () => t("history") }, { title: "Completed", value: (r == null ? void 0 : r.completed_affidavits) || 0, icon: i.jsx(li, { color: "#10b981" }), color: "#10b981", action: () => t("history") }, { title: "Probate Apps", value: (r == null ? void 0 : r.total_probate) || 0, icon: i.jsx(Tl, { color: "#f59e0b" }), color: "#f59e0b", action: () => t("history") }, { title: "Total Spent", value: `${((r == null ? void 0 : r.total_spent) || 0).toLocaleString()}`, icon: i.jsx(ga, { color: "#8b5cf6" }), color: "#8b5cf6", action: () => t("payments") }]; return i.jsxs("div", { style: { animation: "fadeIn 0.5s ease-out" }, children: [i.jsxs("div", { style: { marginBottom: "2rem" }, children: [i.jsx("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0", fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: "Welcome Back!" }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Here's what's happening with your legal documents today." })] }), i.jsx("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "repeat(4, 1fr)", gap: "1.5rem", marginBottom: "3rem" }, children: a.map((c, l) => i.jsxs(Wt.div, { whileHover: { y: -5, boxShadow: "0 10px 25px -5px rgba(0, 0, 0, 0.1)" }, onClick: c.action, style: { background: "white", padding: "1.75rem", borderRadius: "24px", border: "1px solid #f1f5f9", display: "flex", flexDirection: "column", gap: "1.25rem", cursor: "pointer", transition: "all 0.3s ease" }, children: [i.jsx("div", { style: { padding: "12px", borderRadius: "16px", background: `${c.color}10`, width: "fit-content" }, children: c.icon }), i.jsxs("div", { children: [i.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "14px", fontWeight: "600" }, children: c.title }), i.jsx("h3", { style: { margin: "0.4rem 0 0", fontSize: "1.8rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: c.value })] }), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "4px", color: c.color, fontSize: "12px", fontWeight: "700", marginTop: "auto" }, children: ["View Details ", i.jsx(Yd, { size: 14 })] })] }, l)) }), i.jsx("div", { children: i.jsxs("div", { style: { background: "white", padding: "2.5rem", borderRadius: "32px", border: "1px solid #f1f5f9", width: "100%" }, children: [i.jsxs("h3", { style: { margin: "0 0 2rem 0", display: "flex", alignItems: "center", gap: "0.75rem", color: "rgb\(18 37 74\)", fontSize: "1.25rem" }, children: [i.jsx(zf, { size: 22, color: "#3b82f6" }), " Filing Activity"] }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2rem" }, children: [i.jsxs("div", { children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "12px" }, children: [i.jsx("span", { style: { fontSize: "15px", color: "#778eaeff", fontWeight: "500" }, children: "Affidavit Progress" }), i.jsxs("span", { style: { fontSize: "15px", fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: [(r == null ? void 0 : r.completed_affidavits) || 0, " / ", (r == null ? void 0 : r.total_affidavits) || 0, " Certified"] })] }), i.jsx("div", { style: { height: "12px", background: "#f8fafc", borderRadius: "8px", overflow: "hidden", border: "1px solid #f1f5f9" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: r != null && r.total_affidavits ? `${r.completed_affidavits / r.total_affidavits * 100}%` : 0 }, style: { height: "100%", background: "linear-gradient(90deg, #3b82f6, #60a5fa)", borderRadius: "8px" } }) })] }), i.jsxs("div", { style: { display: "flex", gap: "1.5rem", marginTop: "1rem" }, children: [i.jsxs("div", { style: { flex: 1, padding: "1.5rem", background: "#f0f9ff", borderRadius: "20px", border: "1px solid #e0f2fe" }, children: [i.jsx("h4", { style: { margin: "0 0 0.5rem", color: "#0369a1", fontSize: "0.9rem" }, children: "Efficiency" }), i.jsx("p", { style: { margin: 0, fontSize: "1.25rem", fontWeight: "bold", color: "#0c4a6e" }, children: (r == null ? void 0 : r.total_affidavits) > 0 ? "High" : "N/A" })] }), i.jsxs("div", { style: { flex: 1, padding: "1.5rem", background: "#f0fdf4", borderRadius: "20px", border: "1px solid #dcfce7" }, children: [i.jsx("h4", { style: { margin: "0 0 0.5rem", color: "#15803d", fontSize: "0.9rem" }, children: "Verified" }), i.jsxs("p", { style: { margin: 0, fontSize: "1.25rem", fontWeight: "bold", color: "#064e3b" }, children: [(r == null ? void 0 : r.completed_affidavits) || 0, " Docs"] })] })] })] })] }) })] }) }, cM = ({ user: e }) => { var K; const t = Rl(), [r, n] = J.useState(window.innerWidth > 1024), [s, o] = J.useState(window.innerWidth <= 1024), [a, c] = J.useState("dash"), [l, p] = J.useState([]), [d, f] = J.useState(!0), [h, P] = J.useState(null), [b, u] = J.useState({ open: !1, affidavitId: null }), [g, S] = J.useState({ open: !1, affidavit: null }), [R, y] = J.useState(null); J.useEffect(() => { const N = () => { const B = window.innerWidth <= 1024; o(B), n(!B) }; return window.addEventListener("resize", N), e != null && e.id && v(), () => { window.removeEventListener("resize", N) } }, [e == null ? void 0 : e.id]); const v = async () => { var N, B; if (!(e != null && e.id)) { console.warn("Cannot fetch affidavits: No User ID found in session"); return } f(!0), P(null); try { const Q = localStorage.getItem("token"), Z = await lt.get(`/affidavits/user/${e.id}`); console.log(`Fetched ${Z.data.length} affidavits for user ${e.id}`), p(Z.data) } catch (Q) { if (console.error("Error fetching affidavits:", Q), Q.response && (Q.response.status === 401 || Q.response.status === 403)) { W(); return } const Z = ((B = (N = Q.response) == null ? void 0 : N.data) == null ? void 0 : B.error) || Q.message; P(`Failed to load affidavits (${Z}). Please ensure the server is running.`) } finally { f(!1) } }, [D, M] = J.useState({ open: !1, title: "", message: "" }), W = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), t("/login"), window.location.reload() }, I = async N => { if (N.pdf_path) try { const B = N.pdf_path.startsWith("http") ? N.pdf_path : `${lt.defaults.baseURL.replace("/api", "")}${N.pdf_path}`, Q = document.createElement("a"); Q.href = B, Q.setAttribute("download", `Certified_Affidavit_${N.id}.pdf`), document.body.appendChild(Q), Q.click(), Q.remove() } catch (B) { console.error("Download failed, falling back to generation:", B), E(N) } else E(N) }, E = async N => { await tu({ user: e, applicationId: N.id, templateTitle: N.type, content: N.content, file: null }) }, _ = N => { y(N), c("edit") }, k = async () => { try { await lt.delete(`/affidavits/${b.affidavitId}`), u({ open: !1, affidavitId: null }), v() } catch (N) { console.error("Error deleting affidavit:", N), alert("Failed to delete affidavit. Please try again.") } }, L = N => { S({ open: !0, affidavit: N }) }, H = async () => { const { affidavit: N } = g; if (N) try { await lt.put(`/affidavits/${N.id}/virtual-oath`, { status: "requested" }), S({ open: !1, affidavit: null }), c("oath") } catch (B) { console.error("Error requesting oath:", B), alert("Failed to request virtual oath. Please try again.") } }, V = [{ icon: i.jsx(Pl, { size: 20 }), label: "Dashboard", id: "dash" }, { icon: i.jsx(mj, { size: 20 }), label: "File New Affidavit", id: "new" }, { icon: i.jsx(ua, { size: 20 }), label: "Virtual Oath", id: "oath" }, { icon: i.jsx(Cj, { size: 20 }), label: "Previous Filings", id: "history" }, { icon: i.jsx(ga, { size: 20 }), label: "Payment Receipt", id: "payments" }, { icon: i.jsx(Vn, { size: 20 }), label: "My Profile", id: "profile" }], ee = [{ id: 1, text: "Affidavit of Good Conduct approved", time: "2h ago" }, { id: 2, text: "Verification appointment scheduled", time: "5h ago" }, { id: 3, text: "Payment successful for ID #4920", time: "1d ago" }]; return e ? i.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", position: "relative" }, children: [s && r && i.jsx("div", { onClick: () => n(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40 } }), i.jsxs("aside", { style: { width: r ? "260px" : s ? "0" : "80px", background: "#3d2b1f", color: "white", transition: "all 0.3s ease", display: "flex", flexDirection: "column", position: s ? "fixed" : "relative", height: "100vh", zIndex: 50, overflow: "hidden" }, children: [i.jsxs("div", { style: { padding: "2rem", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "60px", height: "60px", borderRadius: "50%" } }), (r || s && r) && i.jsxs("div", { style: { textAlign: "center", overflow: "hidden" }, children: [i.jsx("h2", { style: { fontSize: "1.2rem", margin: 0 }, children: "CRMS" }), i.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), i.jsx("nav", { style: { flex: 1, padding: "1rem" }, children: V.map(N => i.jsxs("div", { onClick: () => { c(N.id), (N.id === "history" || N.id === "dash") && v(), s && n(!1) }, style: { display: "flex", alignItems: "center", padding: "1rem", cursor: "pointer", borderRadius: "8px", gap: "1rem", marginBottom: "0.5rem", transition: "background 0.2s", backgroundColor: a === N.id ? "#5d4037" : "transparent", color: a === N.id ? "#28a745" : "#8d6e63", justifyContent: r ? "flex-start" : "center" }, children: [N.icon, r && i.jsx("span", { children: N.label })] }, N.id)) }), r && i.jsx("div", { style: { padding: "1rem", borderTop: "1px solid #5d4037" }, children: i.jsxs("button", { onClick: W, style: { width: "100%", display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#8d6e63", cursor: "pointer", borderRadius: "8px" }, onMouseOver: N => N.currentTarget.style.background = "#5d4037", onMouseOut: N => N.currentTarget.style.background = "transparent", children: [i.jsx(Ac, { size: 20 }), i.jsx("span", { children: "Logout" })] }) })] }), i.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", height: "100vh", overflowY: "auto" }, children: [i.jsx(Il, { user: e, title: a === "dash" ? "OADR Dashboard" : a === "new" ? "File New Affidavit" : a === "history" ? "Previous Filings" : "My Profile", onLogout: W, onSidebarToggle: () => n(!r), onProfileClick: () => c("profile"), onSettingsClick: () => c("profile"), sidebarOpen: r, isMobile: s, notifications: ee }), i.jsx("div", { style: { padding: s ? "1rem" : "1.5rem", maxWidth: "1200px", margin: "0 auto", width: "100%" }, children: a === "dash" ? i.jsx(b2, { isMobile: s, setView: c }) : a === "new" ? i.jsx(m_, { user: e, isMobile: s, onNavigateToOath: () => c("oath") }) : a === "oath" ? i.jsx(lM, { isMobile: s }) : a === "history" ? i.jsxs("div", { className: "glass-card", style: { background: "white", padding: s ? "1rem" : "1.5rem" }, children: [i.jsx("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: i.jsx("h3", { style: { margin: 0, fontSize: s ? "1.1rem" : "1.25rem" }, children: "Filing History" }) }), i.jsx(qs, { columns: [{ key: "created_at", label: "Date", sortable: !0, render: N => new Date(N).toLocaleDateString() }, { key: "type", label: "Affidavit Title", sortable: !0 }, { key: "id", label: "Application ID", render: N => `CRMS-${N}` }, { key: "status", label: "Status", sortable: !0, render: N => i.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", background: N === "completed" ? "#ecfdf5" : "#fffbeb", color: N === "completed" ? "#10b981" : "#f59e0b" }, children: N.toUpperCase() }), hiddenMobile: !0 }, { key: "virtual_oath_taken", label: "Virtual Oath", render: (N, B) => B.status === "submitted" ? i.jsx("span", { style: { fontSize: "11px", fontWeight: "bold", color: N === "requested" || N === 1 || N === "completed" || N === 2 ? "#10b981" : "#778eaeff" }, children: N === "requested" || N === 1 || N === "completed" || N === 2 ? "PROCEEDED" : "PENDING" }) : "-", hiddenMobile: !0 }], data: l, loading: d, searchPlaceholder: "Search previous filings...", isMobile: s, actions: N => i.jsx("div", { style: { display: "flex", gap: "0.5rem" }, children: N.status === "completed" ? i.jsx("button", { onClick: () => I(N), title: "Download PDF", style: { background: "#3b82f6", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: i.jsx(Al, { size: 16 }) }) : N.status === "submitted" ? i.jsxs(i.Fragment, { children: [i.jsx("button", { onClick: () => L(N), title: "Request Virtual Oath", style: { background: "#10b981", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: i.jsx(ua, { size: 16 }) }), i.jsx("button", { onClick: () => _(N), title: "Edit Affidavit", style: { background: "#f59e0b", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: i.jsx(Rd, { size: 16 }) }), !s && i.jsx("button", { onClick: () => u({ open: !0, affidavitId: N.id }), title: "Delete Affidavit", style: { background: "#ef4444", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: i.jsx(Cd, { size: 16 }) })] }) : i.jsxs(i.Fragment, { children: [i.jsx("button", { onClick: () => _(N), title: "Edit Affidavit", style: { background: "#f59e0b", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: i.jsx(Rd, { size: 16 }) }), !s && i.jsx("button", { onClick: () => u({ open: !0, affidavitId: N.id }), title: "Delete Affidavit", style: { background: "#ef4444", color: "white", border: "none", padding: "8px", borderRadius: "50%", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", width: "32px", height: "32px" }, children: i.jsx(Cd, { size: 16 }) })] }) }) })] }) : a === "edit" && R ? i.jsx(m_, { user: e, isMobile: s, editMode: !0, affidavit: R, onComplete: () => { c("history"), y(null), v() } }) : a === "payments" ? i.jsx(v2, { user: e, isMobile: s }) : a === "profile" ? i.jsx(y2, { user: e, isMobile: s, onUpdate: N => { localStorage.setItem("user", JSON.stringify(N)) } }) : i.jsxs("div", { className: "glass-card", style: { background: "white", textAlign: "center", padding: "4rem 2rem" }, children: [i.jsx(Rd, { size: 64, style: { marginBottom: "1rem", color: "#cbd5e1" }, className: "animate-spin" }), i.jsxs("h2", { children: [a.charAt(0).toUpperCase() + a.slice(1), " Section"] }), i.jsx("p", { style: { color: "#778eaeff" }, children: "This module is currently being optimized for the best experience." }), i.jsx("button", { onClick: () => c("dash"), className: "btn btn-primary", children: "Return to Dashboard" })] }) }), b.open && i.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9999 }, children: i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "400px", width: "90%", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1)" }, children: [i.jsxs("div", { style: { textAlign: "center", marginBottom: "1.5rem" }, children: [i.jsx("div", { style: { width: "64px", height: "64px", borderRadius: "50%", background: "#fef2f2", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1rem" }, children: i.jsx(Qd, { size: 32, color: "#ef4444" }) }), i.jsx("h3", { style: { margin: "0 0 0.5rem", fontSize: "1.25rem" }, children: "Delete Affidavit?" }), i.jsx("p", { style: { color: "#778eaeff", margin: 0 }, children: "This action cannot be undone. The affidavit will be permanently removed from your records." })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [i.jsx("button", { onClick: () => u({ open: !1, affidavitId: null }), style: { flex: 1, padding: "0.75rem", background: "#f1f5f9", color: "#475569", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600" }, children: "Cancel" }), i.jsx("button", { onClick: k, style: { flex: 1, padding: "0.75rem", background: "#ef4444", color: "white", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600" }, children: "Delete" })] })] }) }), g.open && i.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9999 }, children: i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "450px", width: "90%", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1)" }, children: [i.jsxs("div", { style: { textAlign: "center", marginBottom: "1.5rem" }, children: [i.jsx("div", { style: { width: "64px", height: "64px", borderRadius: "50%", background: "#f0fdf4", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1rem" }, children: i.jsx(ua, { size: 32, color: "#10b981" }) }), i.jsx("h3", { style: { margin: "0 0 0.5rem", fontSize: "1.25rem" }, children: "Start Live Verification?" }), i.jsxs("p", { style: { color: "#778eaeff", margin: 0 }, children: ["You are about to request a virtual oath session for ", i.jsx("strong", { children: (K = g.affidavit) == null ? void 0 : K.type }), ". A judicial officer will be notified of your request."] })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [i.jsx("button", { onClick: () => S({ open: !1, affidavit: null }), style: { flex: 1, padding: "0.75rem", background: "#f1f5f9", color: "#475569", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600" }, children: "Cancel" }), i.jsxs("button", { onClick: H, style: { flex: 1, padding: "0.75rem", background: "#10b981", color: "white", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "600", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: ["Proceed ", i.jsx(Yd, { size: 18 })] })] })] }) }), D.open && i.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 9999 }, children: i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, style: { background: "white", borderRadius: "16px", padding: "2rem", maxWidth: "400px", width: "90%", boxShadow: "0 20px 25px -5px rgba(0, 0, 0, 0.1)", textAlign: "center" }, children: [i.jsx("div", { style: { width: "64px", height: "64px", borderRadius: "50%", background: D.title === "Update Failed" ? "#fef2f2" : "#ecfdf5", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1.5rem" }, children: D.title === "Update Failed" ? i.jsx(Cd, { size: 32, color: "#ef4444" }) : i.jsx(li, { size: 32, color: "#10b981" }) }), i.jsx("h3", { style: { margin: "0 0 0.5rem", fontSize: "1.25rem", fontWeight: "bold" }, children: D.title }), i.jsx("p", { style: { color: "#778eaeff", margin: "0 0 1.5rem" }, children: D.message }), i.jsx("button", { onClick: () => M({ open: !1, title: "", message: "" }), style: { width: "100%", padding: "0.75rem", background: D.title === "Update Failed" ? "#ef4444" : "#10b981", color: "white", border: "none", borderRadius: "8px", cursor: "pointer", fontWeight: "bold" }, children: "Close" })] }) })] })] }) : i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading user session..." }) }, dM = ({ user: e, isMobile: t = !1 }) => { const [r, n] = J.useState(1), [s, o] = J.useState(!1), [a, c] = J.useState({ deceasedName: "", dateOfDeath: "", address: "" }), [l, p] = J.useState([]), [d, f] = J.useState({ name: "", relationship: "" }), [h, P] = J.useState({ introLetter: null, deathCertificate: null }), b = () => { d.name && d.relationship && (p([...l, { ...d, id: Date.now() }]), f({ name: "", relationship: "" })) }, u = R => { p(l.filter(y => y.id !== R)) }, g = (R, y) => { P({ ...h, [R]: y.target.files[0] }) }, S = async () => { o(!0); try { const y = (await lt.post("/public/probate", { deceasedName: a.deceasedName, applicantId: null })).data.id, v = `PAY-PRB-${Math.random().toString(36).substr(2, 9).toUpperCase()}`; await lt.post("/payments", { user_id: e.id, applicant_id: null, probate_application_id: y, item_paid: "Probate Filing Fee", amount: 15e3, transaction_id: v, status: "completed" }), n(5) } catch (R) { console.error("Probate filing error:", R), alert("Failed to file probate application. Please try again.") } finally { o(!1) } }; return i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", padding: t ? "1rem" : "2.5rem" }, children: [i.jsx("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "3rem", borderBottom: "1px solid #334155", paddingBottom: "1rem", overflowX: t ? "auto" : "visible", gap: "1rem" }, children: ["Basic Info", "Next of Kin", "Documents", "Payment"].map((R, y) => i.jsxs("div", { style: { color: r === y + 1 ? "#2ecc71" : "#778eaeff", fontWeight: r === y + 1 ? "bold" : "normal", borderBottom: r === y + 1 ? "2px solid #2ecc71" : "none", paddingBottom: "0.5rem", transition: "all 0.3s", whiteSpace: "nowrap", fontSize: t ? "12px" : "14px" }, children: [i.jsxs("span", { style: { marginRight: "4px", opacity: .5 }, children: [y + 1, "."] }), " ", R] }, R)) }), r === 1 && i.jsxs(Wt.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, children: [i.jsx("h3", { style: { marginBottom: "0.5rem" }, children: "Deceased Person Details" }), i.jsx("p", { style: { color: "#94a3b8", fontSize: "14px", marginBottom: "2rem" }, children: "Please provide the official details of the deceased individual." }), i.jsxs("div", { style: { display: "grid", gap: "1.5rem", marginTop: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: zu, children: "Full Name of Deceased" }), i.jsx("input", { type: "text", style: $u, value: a.deceasedName, onChange: R => c({ ...a, deceasedName: R.target.value }), placeholder: "e.g. Alhaji Ibrahim Mohammed" })] }), i.jsx("div", { style: { display: "grid", gridTemplateColumns: t ? "1fr" : "1fr 1fr", gap: "1rem" }, children: i.jsxs("div", { children: [i.jsx("label", { style: zu, children: "Date of Death" }), i.jsx("input", { type: "date", style: $u, value: a.dateOfDeath, onChange: R => c({ ...a, dateOfDeath: R.target.value }) })] }) }), i.jsxs("div", { children: [i.jsx("label", { style: zu, children: "Last Known Address" }), i.jsx("textarea", { style: { ...$u, height: "100px" }, value: a.address, onChange: R => c({ ...a, address: R.target.value }), placeholder: "Enter full residential address" })] })] }), i.jsxs("button", { onClick: () => n(2), className: "btn btn-primary", style: { background: "#2ecc71", marginTop: "2.5rem", width: t ? "100%" : "200px", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: ["Continue ", i.jsx(Yd, { size: 18 })] })] }), r === 2 && i.jsxs(Wt.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, children: [i.jsx("h3", { style: { marginBottom: "0.5rem" }, children: "Beneficiaries & Next of Kin" }), i.jsx("p", { style: { color: "#94a3b8", fontSize: "14px", marginBottom: "2rem" }, children: "Add all individuals entitled to the estate of the deceased." }), i.jsxs("div", { style: { background: "rgba(15, 23, 42, 0.5)", padding: t ? "1rem" : "2rem", borderRadius: "16px", margin: "1.5rem 0", border: "1px solid #334155" }, children: [i.jsxs("div", { style: { display: "flex", flexDirection: t ? "column" : "row", gap: "1rem", marginBottom: "2rem" }, children: [i.jsxs("div", { style: { flex: 2 }, children: [i.jsx("label", { style: zu, children: "Full Name" }), i.jsx("input", { type: "text", style: $u, value: d.name, onChange: R => f({ ...d, name: R.target.value }) })] }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("label", { style: zu, children: "Relationship" }), i.jsx("input", { type: "text", style: $u, value: d.relationship, onChange: R => f({ ...d, relationship: R.target.value }) })] }), i.jsxs("button", { onClick: b, className: "btn", style: { background: "#2ecc71", color: "white", marginTop: t ? "0" : "24px", height: "45px", width: t ? "100%" : "auto" }, children: [i.jsx(Ky, { size: 20 }), " Add Beneficiary"] })] }), i.jsx("div", { style: { display: "grid", gap: "0.75rem" }, children: i.jsx(ma, { children: l.map(R => i.jsxs(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, exit: { opacity: 0, scale: .95 }, style: { display: "flex", justifyContent: "space-between", padding: "1rem 1.5rem", background: "rgb\(18 37 74\)", borderRadius: "10px", border: "1px solid #334155" }, children: [i.jsxs("div", { children: [i.jsx("strong", { style: { color: "#f1f5f9" }, children: R.name }), i.jsxs("span", { style: { color: "#94a3b8", marginLeft: "10px", fontSize: "13px" }, children: [" ", R.relationship] })] }), i.jsx(Xd, { size: 18, color: "#ef4444", style: { cursor: "pointer" }, onClick: () => u(R.id) })] }, R.id)) }) })] }), i.jsxs("div", { style: { display: "flex", flexDirection: t ? "column" : "row", gap: "1rem", marginTop: "2.5rem" }, children: [i.jsx("button", { onClick: () => n(1), className: "btn", style: { background: "transparent", color: "#94a3b8", border: "1px solid #334155", flex: 1 }, children: "Back" }), i.jsx("button", { onClick: () => n(3), className: "btn btn-primary", style: { background: "#2ecc71", flex: 2 }, children: "Next: Documents" })] })] }), r === 3 && i.jsxs(Wt.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, children: [i.jsx("h3", { style: { marginBottom: "0.5rem" }, children: "Supporting Documentation" }), i.jsx("p", { style: { color: "#94a3b8", fontSize: "14px", marginBottom: "2rem" }, children: "Upload scanned copies of required legal documents." }), i.jsxs("div", { style: { display: "grid", gap: "1.5rem", marginTop: "1.5rem" }, children: [i.jsxs("div", { style: { ...g_, flexDirection: t ? "column" : "row", textAlign: t ? "center" : "left" }, children: [i.jsx("div", { style: { width: "48px", height: "48px", background: "rgba(46, 204, 113, 0.1)", borderRadius: "12px", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(zn, { size: 24, color: "#2ecc71" }) }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("p", { style: { fontWeight: "600", color: "#f1f5f9" }, children: "Death Certificate" }), i.jsx("p", { style: { fontSize: "12px", color: "#94a3b8" }, children: h.deathCertificate ? h.deathCertificate.name : "Required for all applications" })] }), i.jsxs("label", { className: "btn", style: { background: "#3b82f6", color: "white", cursor: "pointer", fontSize: "13px", fontWeight: "bold", width: t ? "100%" : "auto" }, children: [i.jsx(Bd, { size: 16, style: { marginRight: "8px" } }), " ", h.deathCertificate ? "Change File" : "Upload PDF", i.jsx("input", { type: "file", style: { display: "none" }, onChange: R => g("deathCertificate", R) })] })] }), i.jsxs("div", { style: { ...g_, flexDirection: t ? "column" : "row", textAlign: t ? "center" : "left" }, children: [i.jsx("div", { style: { width: "48px", height: "48px", background: "rgba(59, 130, 246, 0.1)", borderRadius: "12px", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(zn, { size: 24, color: "#3b82f6" }) }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("p", { style: { fontWeight: "600", color: "#f1f5f9" }, children: "Introduction Letter" }), i.jsx("p", { style: { fontSize: "12px", color: "#94a3b8" }, children: h.introLetter ? h.introLetter.name : "Optional legal backing" })] }), i.jsxs("label", { className: "btn", style: { background: "#334155", color: "white", cursor: "pointer", fontSize: "13px", fontWeight: "bold", width: t ? "100%" : "auto" }, children: [i.jsx(Bd, { size: 16, style: { marginRight: "8px" } }), " ", h.introLetter ? "Change File" : "Upload", i.jsx("input", { type: "file", style: { display: "none" }, onChange: R => g("introLetter", R) })] })] })] }), i.jsxs("div", { style: { display: "flex", flexDirection: t ? "column" : "row", gap: "1rem", marginTop: "3rem" }, children: [i.jsx("button", { onClick: () => n(2), className: "btn", style: { background: "transparent", color: "#94a3b8", border: "1px solid #334155", flex: 1 }, children: "Back" }), i.jsx("button", { onClick: () => n(4), className: "btn btn-primary", style: { background: "#2ecc71", flex: 2 }, children: "Next: Payment" })] })] }), r === 4 && i.jsx(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, style: { textAlign: "center" }, children: i.jsxs("div", { style: { padding: t ? "2rem 1rem" : "4rem 2rem", background: "#0f172a", borderRadius: "24px", border: "1px solid #334155" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", background: "rgba(46, 204, 113, 0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem" }, children: i.jsx(ga, { size: 40, color: "#2ecc71" }) }), i.jsx("h2", { style: { color: "white" }, children: "Processing Fee" }), i.jsxs("div", { style: { margin: "1.5rem 0" }, children: [i.jsx("span", { style: { fontSize: "1.5rem", color: "#94a3b8", verticalAlign: "top", marginTop: "8px", display: "inline-block" }, children: "" }), i.jsx("span", { style: { fontSize: t ? "3rem" : "4rem", fontWeight: "800", color: "#2ecc71" }, children: "15,000" })] }), i.jsx("p", { style: { color: "#94a3b8", maxWidth: "400px", margin: "0 auto 3rem" }, children: "This payment covers the filing and processing of your Letter of Administration application." }), i.jsxs("div", { style: { display: "flex", flexDirection: t ? "column" : "row", justifyContent: "center", gap: "1rem" }, children: [i.jsx("button", { onClick: S, disabled: s, className: "btn btn-primary", style: { background: "#27ae60", padding: "1rem 2rem", fontSize: "16px", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: s ? i.jsx(Jn, { className: "animate-spin" }) : "Pay with Remita" }), i.jsx("button", { onClick: S, disabled: s, className: "btn", style: { background: "#334155", color: "white", padding: "1rem 2rem", display: "flex", alignItems: "center", justifyContent: "center" }, children: "Bank Transfer" })] })] }) }), r === 5 && i.jsxs(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, style: { textAlign: "center", padding: "4rem 2rem" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", background: "rgba(46, 204, 113, 0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem" }, children: i.jsx(li, { size: 40, color: "#2ecc71" }) }), i.jsx("h2", { style: { color: "white", marginBottom: "1rem" }, children: "Application Submitted!" }), i.jsxs("p", { style: { color: "#94a3b8", marginBottom: "2.5rem" }, children: ["Your probate application for ", i.jsx("strong", { children: a.deceasedName }), " has been received. You will receive an email confirmation shortly."] }), i.jsx("button", { onClick: () => window.location.href = "/probate", className: "btn btn-primary", style: { background: "#2ecc71", padding: "1rem 3rem" }, children: "Go to Dashboard" })] })] }) }, zu = { display: "block", marginBottom: "8px", color: "#94a3b8", fontSize: "13px", fontWeight: "500" }, $u = { width: "100%", padding: "12px 16px", borderRadius: "10px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none", fontSize: "15px" }, g_ = { display: "flex", alignItems: "center", gap: "1.5rem", padding: "1.5rem", border: "1px solid #334155", borderRadius: "16px", background: "rgba(15, 23, 42, 0.3)" }, uM = ({ user: e }) => { const [t, r] = J.useState("overview"), [n, s] = J.useState(window.innerWidth > 1024), [o, a] = J.useState(window.innerWidth <= 1024); us.useEffect(() => { const p = () => { const d = window.innerWidth <= 1024; a(d), s(!d) }; return window.addEventListener("resize", p), () => window.removeEventListener("resize", p) }, []); const c = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), window.location.href = "/login" }, l = [{ icon: i.jsx(Pl, { size: 20 }), label: "Overview", id: "overview" }, { icon: i.jsx(zn, { size: 20 }), label: "New Application", id: "new" }, { icon: i.jsx(co, { size: 20 }), label: "Beneficiaries", id: "beneficiaries" }, { icon: i.jsx(zn, { size: 20 }), label: "Upload Documents", id: "docs" }, { icon: i.jsx(ga, { size: 20 }), label: "Payments", id: "payments" }, { icon: i.jsx(Vn, { size: 20 }), label: "My Profile", id: "profile" }]; return e ? i.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", position: "relative" }, children: [o && n && i.jsx("div", { onClick: () => s(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40 } }), i.jsxs("aside", { style: { width: n ? "260px" : o ? "0" : "80px", background: "#3d2b1f", color: "white", transition: "all 0.3s ease", display: "flex", flexDirection: "column", position: o ? "fixed" : "relative", height: "100vh", zIndex: 50, overflow: "hidden" }, children: [i.jsxs("div", { style: { padding: "2rem", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "60px", height: "60px", borderRadius: "50%" } }), (n || o && n) && i.jsxs("div", { style: { textAlign: "center", overflow: "hidden" }, children: [i.jsx("h2", { style: { fontSize: "1.2rem", margin: 0 }, children: "Probate" }), i.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), i.jsx("nav", { style: { flex: 1, padding: "1rem" }, children: l.map(p => i.jsxs("div", { onClick: () => { r(p.id), o && s(!1) }, style: { display: "flex", alignItems: "center", padding: "1rem", cursor: "pointer", borderRadius: "8px", gap: "1rem", marginBottom: "0.5rem", transition: "background 0.2s", backgroundColor: t === p.id ? "#5d4037" : "transparent", color: t === p.id ? "#2ecc71" : "#8d6e63", justifyContent: n ? "flex-start" : "center" }, children: [p.icon, n && i.jsx("span", { children: p.label })] }, p.id)) })] }), i.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", height: "100vh", overflowY: "auto" }, children: [i.jsx(Il, { user: e, title: t === "overview" ? "Probate Overview" : "Probate Registry", onLogout: c, onSidebarToggle: () => s(!n), sidebarOpen: n, isMobile: o }), i.jsxs("div", { style: { padding: o ? "1rem" : "2rem" }, children: [i.jsx("h1", { style: { marginBottom: "2rem", fontSize: o ? "1.5rem" : "2rem" }, children: t === "overview" ? "Probate Overview" : "Probate Registry" }), t === "overview" ? i.jsx(b2, { isMobile: o, setView: r }) : t === "new" ? i.jsx(dM, { user: e, isMobile: o }) : t === "payments" ? i.jsx(v2, { user: e, isMobile: o }) : t === "profile" ? i.jsx(y2, { user: e, isMobile: o, onUpdate: p => { localStorage.setItem("user", JSON.stringify(p)) } }) : i.jsxs("div", { className: "glass-card", style: { background: "white", padding: o ? "1.5rem" : "2rem" }, children: ["Module Section: ", t, " Under construction"] })] })] })] }) : i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading session..." }) }, pM = ({ setStaff: e }) => { const [t, r] = J.useState(""), [n, s] = J.useState(""), [o, a] = J.useState(!1), c = Rl(), { showModal: l } = Pi(), p = async d => { var f, h; d.preventDefault(), a(!0); try { const P = await lt.post("/staff/login", { email: t, password: n }), b = P.data.user; e(b), localStorage.setItem("token", P.data.token), localStorage.setItem("staff", JSON.stringify(b)); const u = `/staff/${b.role === "registrar" ? "pr" : b.role}`; c(u) } catch (P) { console.error("Staff login error:", P); const b = ((h = (f = P.response) == null ? void 0 : f.data) == null ? void 0 : h.message) || P.message || "Login failed"; l({ type: "error", title: "Access Denied", message: b }) } finally { a(!1) } }; return i.jsx("div", { style: { display: "flex", justifyContent: "center", alignItems: "center", minHeight: "100vh", background: "linear-gradient(135deg, #3d2b1f 0%, #5d4037 100%)" }, children: i.jsxs(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, className: "glass-card", style: { width: "100%", maxWidth: "400px", margin: "1.5rem", padding: "2.5rem 1.5rem", textAlign: "center", background: "rgba(255,255,255,0.05)", border: "1px solid rgba(255,255,255,0.1)" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "80px", height: "80px", borderRadius: "50%", marginBottom: "1.5rem" } }), i.jsx("h2", { style: { color: "white", marginBottom: "0.5rem", fontSize: "1.5rem" }, children: "Staff Login" }), i.jsx("p", { style: { color: "#2ecc71", marginBottom: "2rem", fontSize: "12px", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" }), i.jsxs("form", { onSubmit: p, style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(Dl, { size: 18, style: { position: "absolute", left: "12px", top: "12px", color: "#666" } }), i.jsx("input", { type: "email", placeholder: "Staff Email", style: { width: "100%", padding: "12px 12px 12px 40px", borderRadius: "8px", border: "none", background: "#333", color: "white" }, value: t, onChange: d => r(d.target.value), required: !0 })] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(Nd, { size: 18, style: { position: "absolute", left: "12px", top: "12px", color: "#666" } }), i.jsx("input", { type: "password", placeholder: "Password", style: { width: "100%", padding: "12px 12px 12px 40px", borderRadius: "8px", border: "none", background: "#333", color: "white" }, value: n, onChange: d => s(d.target.value), required: !0 })] }), i.jsx("button", { className: "btn btn-primary", style: { background: "#e74c3c", marginTop: "1rem" }, disabled: o, children: o ? i.jsx(Jn, { className: "animate-spin" }) : "Enter Portal" })] })] }) }) }, hM = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState(!0), [o, a] = J.useState(!1), [c, l] = J.useState(!1), [p, d] = J.useState({ id: null, name: "", email: "", password: "", role: "jurat", division: "", status: "active" }), [f, h] = J.useState(!1), [P, b] = J.useState(!1), [u, g] = J.useState(null), { showModal: S } = Pi(); J.useEffect(() => { R() }, []); const R = async () => { var _, k, L, H; try { s(!0); const V = await lt.get("/staff"); r(V.data) } catch (V) { console.error("Error fetching staff:", V); const ee = ((k = (_ = V.response) == null ? void 0 : _.data) == null ? void 0 : k.error) || ((H = (L = V.response) == null ? void 0 : L.data) == null ? void 0 : H.message) || V.message; S({ type: "error", title: "Error Loading Staff", message: `Could not load staff users: ${ee}` }) } finally { s(!1) } }, y = () => { d({ id: null, name: "", email: "", password: "", role: "jurat", division: "", status: "active" }), l(!1), a(!1), h(!1) }, v = _ => { d({ id: _.id, name: _.name, email: _.email, password: "", role: _.role, division: _.division || "", status: _.status }), l(!0), a(!0) }, D = async _ => { var k, L; _.preventDefault(), b(!0); try { if (c) { const H = { ...p }; H.password || delete H.password, await lt.put(`/staff/${p.id}`, H), S({ type: "success", title: "Staff Updated", message: `${p.name} has been updated successfully.` }) } else await lt.post("/staff", p), S({ type: "success", title: "Staff Created", message: `${p.name} has been added successfully.` }); y(), R() } catch (H) { console.error("Error saving staff:", H), S({ type: "error", title: c ? "Update Failed" : "Creation Failed", message: ((L = (k = H.response) == null ? void 0 : k.data) == null ? void 0 : L.error) || "An error occurred. Please try again." }) } finally { b(!1) } }, M = _ => { S({ type: "warning", title: "Delete Staff User", message: `Are you sure you want to delete ${_.name}? This action cannot be undone.`, confirmText: "Delete", cancelText: "Cancel", showCancel: !0, onConfirm: async () => { var k, L; try { await lt.delete(`/staff/${_.id}`), S({ type: "success", title: "Staff Deleted", message: `${_.name} has been removed successfully.` }), R() } catch (H) { S({ type: "error", title: "Deletion Failed", message: ((L = (k = H.response) == null ? void 0 : k.data) == null ? void 0 : L.error) || "Failed to delete staff user." }) } } }) }, W = async _ => { const k = _.status === "active" ? "inactive" : "active"; try { await lt.put(`/staff/${_.id}`, { ..._, status: k }), S({ type: "success", title: "Status Updated", message: `${_.name} is now ${k}.` }), R() } catch { S({ type: "error", title: "Update Failed", message: "Failed to update staff status." }) } }, I = async (_, k) => { var L, H; if (k) { if (!k.type.startsWith("image/")) { S({ type: "error", title: "Invalid File", message: "Please upload an image file (PNG, JPG, etc.)" }); return } if (k.size > 2 * 1024 * 1024) { S({ type: "error", title: "File Too Large", message: "Signature image must be less than 2MB" }); return } g(_); try { const V = new FormData; V.append("signature", k), await lt.post(`/staff/${_}/signature`, V, { headers: { "Content-Type": "multipart/form-data" } }), S({ type: "success", title: "Signature Uploaded", message: "Signature has been uploaded successfully." }), R() } catch (V) { S({ type: "error", title: "Upload Failed", message: ((H = (L = V.response) == null ? void 0 : L.data) == null ? void 0 : H.error) || "Failed to upload signature." }) } finally { g(null) } } }, E = _ => ({ admin: "#ef4444", cr: "#8b5cf6", registrar: "#3b82f6", cfo: "#f59e0b", jurat: "#10b981" })[_] || "#778eaeff"; return i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", padding: e ? "1rem" : "2rem" }, children: [i.jsxs("div", { style: { display: "flex", flexDirection: e ? "column" : "row", justifyContent: "space-between", alignItems: e ? "flex-start" : "center", marginBottom: "2rem", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("h2", { style: { margin: "0 0 0.5rem 0", fontSize: e ? "1.5rem" : "1.8rem" }, children: "Staff Management" }), i.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "14px" }, children: "Manage staff accounts and permissions" })] }), i.jsxs("button", { className: "btn btn-primary", onClick: () => { y(), a(!0) }, style: { display: "flex", alignItems: "center", gap: "0.5rem", width: e ? "100%" : "auto", justifyContent: "center" }, children: [i.jsx(WC, { size: 18 }), " Add Staff"] })] }), i.jsx(ma, { children: o && i.jsx(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, background: "rgba(0, 0, 0, 0.8)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1e3, padding: "1rem" }, onClick: () => !P && y(), children: i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, exit: { scale: .9, opacity: 0 }, onClick: _ => _.stopPropagation(), style: { background: "rgb\(18 37 74\)", borderRadius: "16px", padding: e ? "1.5rem" : "2.5rem", maxWidth: "600px", width: "100%", maxHeight: "95vh", overflowY: "auto", border: "1px solid #334155", boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: [i.jsx("h3", { style: { margin: 0 }, children: c ? "Edit Staff User" : "Add New Staff User" }), i.jsx("button", { onClick: y, disabled: P, style: { background: "transparent", border: "none", color: "#94a3b8", cursor: P ? "not-allowed" : "pointer", padding: "0.5rem" }, children: i.jsx(za, { size: 20 }) })] }), i.jsx("form", { onSubmit: D, children: i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Full Name *" }), i.jsx("input", { type: "text", required: !0, value: p.name, onChange: _ => d({ ...p, name: _.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: "Enter full name" })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Email Address *" }), i.jsx("input", { type: "email", required: !0, value: p.email, onChange: _ => d({ ...p, email: _.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: "staff@example.com" })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Division / Unit" }), i.jsx("input", { type: "text", value: p.division, onChange: _ => d({ ...p, division: _.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: "e.g. Accounts, Registry" })] }), i.jsxs("div", { children: [i.jsxs("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: ["Password ", c && "(leave blank to keep current)"] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx("input", { type: f ? "text" : "password", required: !c, value: p.password, onChange: _ => d({ ...p, password: _.target.value }), style: { width: "100%", padding: "12px", paddingRight: "45px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, placeholder: c ? "Leave blank to keep current" : "Enter password" }), i.jsx("button", { type: "button", onClick: () => h(!f), style: { position: "absolute", right: "12px", top: "50%", transform: "translateY(-50%)", background: "transparent", border: "none", color: "#94a3b8", cursor: "pointer" }, children: f ? i.jsx(Uf, { size: 18 }) : i.jsx(Mo, { size: 18 }) })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Role *" }), i.jsxs("select", { required: !0, value: p.role, onChange: _ => d({ ...p, role: _.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, children: [i.jsx("option", { value: "jurat", children: "Jurat Officer" }), i.jsx("option", { value: "registrar", children: "Probate Registrar" }), i.jsx("option", { value: "cfo", children: "Commissioner for Oaths (CFO)" }), i.jsx("option", { value: "cr", children: "Chief Registrar (CR)" }), i.jsx("option", { value: "admin", children: "Super Admin" })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Status *" }), i.jsxs("select", { required: !0, value: p.status, onChange: _ => d({ ...p, status: _.target.value }), style: { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none" }, children: [i.jsx("option", { value: "active", children: "Active" }), i.jsx("option", { value: "inactive", children: "Inactive" })] })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [i.jsx("button", { type: "button", onClick: y, disabled: P, style: { flex: 1, padding: "12px", borderRadius: "8px", border: "1px solid #334155", background: "transparent", color: "#94a3b8", cursor: P ? "not-allowed" : "pointer" }, children: "Cancel" }), i.jsx("button", { type: "submit", disabled: P, className: "btn btn-primary", style: { flex: 1, display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem", opacity: P ? .6 : 1, cursor: P ? "not-allowed" : "pointer" }, children: P ? i.jsxs(i.Fragment, { children: [i.jsx(Jn, { size: 18, className: "animate-spin" }), "Saving..."] }) : i.jsxs(i.Fragment, { children: [i.jsx(li, { size: 18 }), c ? "Update Staff" : "Create Staff"] }) })] })] }) })] }) }) }), i.jsx(qs, { columns: [{ key: "name", label: "Staff Member", sortable: !0, render: (_, k) => i.jsxs("div", { children: [i.jsx("div", { style: { fontWeight: "600" }, children: _ }), i.jsx("div", { style: { fontSize: "12px", color: "#778eaeff" }, children: k.email })] }) }, { key: "division", label: "Division", render: _ => _ || i.jsx("span", { style: { color: "#778eaeff", fontStyle: "italic" }, children: "-" }) }, { key: "role", label: "Role", sortable: !0, render: _ => i.jsx("span", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "600", background: E(_), color: "white", textTransform: "uppercase" }, children: _ }) }, { key: "status", label: "Status", sortable: !0, render: _ => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem" }, children: [i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: _ === "active" ? "#10b981" : "#ef4444" } }), i.jsx("span", { style: { color: _ === "active" ? "#10b981" : "#ef4444", fontSize: "14px", textTransform: "capitalize" }, children: _ })] }) }, { key: "signature_path", label: "Signature", render: (_, k) => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [_ ? i.jsx("img", { src: _.startsWith("http") ? _ : `${lt.defaults.baseURL.replace("/api", "")}${_}`, alt: "Sig", style: { height: "30px", background: "white", padding: "2px", borderRadius: "4px" } }) : i.jsx("span", { style: { color: "#94a3b8", fontSize: "12px" }, children: "No Signature" }), i.jsxs("label", { style: { color: "#3b82f6", fontSize: "12px", cursor: "pointer" }, children: [u === k.id ? "..." : "Upload", i.jsx("input", { type: "file", accept: "image/*", style: { display: "none" }, onChange: L => I(k.id, L.target.files[0]) })] })] }) }], data: t, loading: n, searchPlaceholder: "Search staff by name, email or role...", actions: _ => i.jsxs("div", { style: { display: "flex", gap: "0.25rem", justifyContent: "flex-end" }, children: [i.jsx("button", { onClick: () => v(_), style: { padding: "0.5rem", background: "transparent", border: "none", color: "#3b82f6", cursor: "pointer" }, children: i.jsx(Jd, { size: 18 }) }), i.jsx("button", { onClick: () => W(_), style: { padding: "0.5rem", background: "transparent", border: "none", color: _.status === "active" ? "#f59e0b" : "#10b981", cursor: "pointer" }, children: i.jsx(UC, { size: 18 }) }), i.jsx("button", { onClick: () => M(_), style: { padding: "0.5rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer" }, children: i.jsx(Xd, { size: 18 }) })] }) })] }) }, fM = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState(!0), [o, a] = J.useState(""), [c, l] = J.useState(!1), [p, d] = J.useState(null), [f, h] = J.useState(!1), { showModal: P } = Pi(); J.useEffect(() => { b() }, []); const b = async () => { var v, D; try { s(!0); const M = await lt.get("/admin/users"); r(M.data) } catch (M) { console.error("Error fetching users:", M); const W = ((D = (v = M.response) == null ? void 0 : v.data) == null ? void 0 : D.error) || M.message || "Failed to load public users"; P({ type: "error", title: "Error Loading Users", message: `${W}. Please refresh the page.` }) } finally { s(!1) } }, u = v => { d({ ...v }), l(!0) }, g = async v => { var D, M; v.preventDefault(), h(!0); try { await lt.put(`/admin/users/${p.id}`, p), P({ type: "success", title: "User Updated", message: `${p.first_name} ${p.surname} has been updated successfully.` }), l(!1), b() } catch (W) { P({ type: "error", title: "Update Failed", message: ((M = (D = W.response) == null ? void 0 : D.data) == null ? void 0 : M.error) || "Failed to update user." }) } finally { h(!1) } }, S = async v => { const D = v.status === "active" ? "inactive" : "active"; try { await lt.put(`/admin/users/${v.id}`, { ...v, status: D }), P({ type: "success", title: "Status Updated", message: `${v.first_name}'s account is now ${D}.` }), b() } catch { P({ type: "error", title: "Status Update Failed", message: "Failed to update user status." }) } }, R = v => { P({ type: "warning", title: "Delete User Account", message: `Are you sure you want to permanently delete the account for ${v.first_name} ${v.surname}? This action cannot be undone.`, confirmText: "Delete Permanently", cancelText: "Cancel", showCancel: !0, onConfirm: async () => { try { await lt.delete(`/admin/users/${v.id}`), P({ type: "success", title: "User Deleted", message: "The user account has been removed." }), b() } catch { P({ type: "error", title: "Deletion Failed", message: "Failed to delete user account." }) } } }) }, y = t.filter(v => { const D = `${v.first_name || ""} ${v.surname || ""}`.toLowerCase(), M = (v.email || "").toLowerCase(), W = o.toLowerCase(); return D.includes(W) || M.includes(W) || v.phone && v.phone.includes(o) }); return i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", overflow: "hidden" }, children: [i.jsxs("div", { style: { padding: e ? "1.5rem" : "2rem", borderBottom: "1px solid #334155", background: "rgba(30, 41, 59, 0.5)" }, children: [i.jsx("div", { style: { display: "flex", flexDirection: e ? "column" : "row", justifyContent: "space-between", alignItems: e ? "flex-start" : "center", marginBottom: "2rem", gap: "1rem" }, children: i.jsxs("div", { children: [i.jsxs("h2", { style: { margin: "0 0 0.5rem 0", display: "flex", alignItems: "center", gap: "0.75rem", fontSize: e ? "1.4rem" : "1.8rem" }, children: [i.jsx(co, { size: e ? 24 : 28, color: "#3b82f6" }), " User Management"] }), i.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "14px" }, children: "Comprehensive list of all registered portal users" })] }) }), i.jsxs("div", { style: { display: "flex", gap: "1rem", flexDirection: e ? "column" : "row" }, children: [i.jsxs("div", { style: { flex: 1, position: "relative" }, children: [i.jsx(vm, { style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" }, size: 18 }), i.jsx("input", { type: "text", placeholder: "Search by name, email or phone...", value: o, onChange: v => a(v.target.value), style: { width: "100%", padding: "12px 12px 12px 40px", background: "#0f172a", border: "1px solid #334155", borderRadius: "10px", color: "white", outline: "none", transition: "all 0.3s" } })] }), i.jsxs("div", { style: { display: "flex", gap: "0.75rem", width: e ? "100%" : "auto" }, children: [i.jsxs("button", { className: "btn", style: { flex: 1, background: "#334155", color: "white", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [i.jsx(yj, { size: 18 }), " ", e ? "Filter" : "Filter Status"] }), i.jsxs("button", { className: "btn", style: { flex: 1, background: "#334155", color: "white", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [i.jsx(Al, { size: 18 }), " ", e ? "Export" : "Export CSV"] })] })] })] }), i.jsx("div", { style: { padding: "1.5rem" }, children: i.jsx(qs, { columns: [{ key: "first_name", label: "Deponent", sortable: !0, render: (v, D) => { var M; return i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsxs("div", { style: { width: "40px", height: "40px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", borderRadius: "10px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: "bold" }, children: [v == null ? void 0 : v[0], (M = D.surname) == null ? void 0 : M[0]] }), i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600", color: "#f1f5f9" }, children: [v, " ", D.surname] }), i.jsx("div", { style: { fontSize: "12px", color: "#94a3b8" }, children: D.email })] })] }) } }, { key: "phone", label: "Contact", render: (v, D) => i.jsxs("div", { style: { fontSize: "13px" }, children: [i.jsx("div", { children: v || "N/A" }), i.jsxs("div", { style: { color: "#778eaeff", fontSize: "11px" }, children: ["NIN: ", D.nin || "Not Provided"] })] }) }, { key: "status", label: "Status", sortable: !0, render: v => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: v === "active" ? "#10b981" : "#ef4444" } }), i.jsx("span", { style: { color: v === "active" ? "#10b981" : "#ef4444", fontSize: "13px", fontWeight: "bold", textTransform: "uppercase" }, children: v })] }) }, { key: "created_at", label: "Joined", sortable: !0, render: v => new Date(v).toLocaleDateString() }], data: y, loading: n, searchPlaceholder: "Search deponents by name, email or phone...", actions: v => i.jsxs("div", { style: { display: "flex", gap: "0.5rem", justifyContent: "flex-end" }, children: [i.jsx("button", { onClick: () => u(v), style: { padding: "8px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "none", borderRadius: "8px", cursor: "pointer" }, children: i.jsx(Jd, { size: 18 }) }), i.jsx("button", { onClick: () => S(v), style: { padding: "8px", background: v.status === "active" ? "rgba(245, 158, 11, 0.1)" : "rgba(16, 185, 129, 0.1)", color: v.status === "active" ? "#f59e0b" : "#10b981", border: "none", borderRadius: "8px", cursor: "pointer" }, children: i.jsx(UC, { size: 18 }) }), i.jsx("button", { onClick: () => R(v), style: { padding: "8px", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", border: "none", borderRadius: "8px", cursor: "pointer" }, children: i.jsx(Xd, { size: 18 }) })] }) }) }), i.jsx(ma, { children: c && i.jsx(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, background: "rgba(0, 0, 0, 0.8)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 2e3, padding: "1rem" }, onClick: () => !f && l(!1), children: i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, exit: { scale: .9, opacity: 0 }, onClick: v => v.stopPropagation(), style: { background: "rgb\(18 37 74\)", borderRadius: "20px", padding: e ? "1.5rem" : "2.5rem", maxWidth: "700px", width: "100%", border: "1px solid #334155", boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)", maxHeight: "95vh", overflowY: "auto" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [i.jsx("h3", { style: { margin: 0, fontSize: "1.5rem" }, children: "Edit User Profile" }), i.jsx("button", { onClick: () => l(!1), style: { background: "transparent", border: "none", color: "#778eaeff", cursor: "pointer" }, children: i.jsx(za, { size: 24 }) })] }), i.jsxs("form", { onSubmit: g, children: [i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "1fr 1fr", gap: e ? "1rem" : "1.5rem" }, children: [i.jsxs("div", { style: { gridColumn: "span 1" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "First Name" }), i.jsx("input", { type: "text", value: p.first_name, onChange: v => d({ ...p, first_name: v.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { style: { gridColumn: "span 1" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Surname" }), i.jsx("input", { type: "text", value: p.surname, onChange: v => d({ ...p, surname: v.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { style: { gridColumn: e ? "span 1" : "span 2" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Email Address" }), i.jsx("input", { type: "email", value: p.email, onChange: v => d({ ...p, email: v.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { style: { gridColumn: "span 1" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Phone Number" }), i.jsx("input", { type: "text", value: p.phone, onChange: v => d({ ...p, phone: v.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { style: { gridColumn: "span 1" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Status" }), i.jsxs("select", { value: p.status, onChange: v => d({ ...p, status: v.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" }, children: [i.jsx("option", { value: "active", children: "Active" }), i.jsx("option", { value: "inactive", children: "Inactive" })] })] }), i.jsxs("div", { style: { gridColumn: e ? "span 1" : "span 2" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Home Address" }), i.jsx("textarea", { value: p.address, onChange: v => d({ ...p, address: v.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white", minHeight: "80px", resize: "vertical" } })] }), i.jsxs("div", { style: { gridColumn: e ? "span 1" : "span 2" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Identity / NIN" }), i.jsx("input", { type: "text", value: p.nin, onChange: v => d({ ...p, nin: v.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "2.5rem" }, children: [i.jsx("button", { type: "button", onClick: () => l(!1), style: { flex: 1, padding: "14px", borderRadius: "10px", background: "transparent", border: "1px solid #334155", color: "#cbd5e1", cursor: "pointer", fontWeight: "bold" }, children: "Cancel" }), i.jsxs("button", { type: "submit", disabled: f, className: "btn btn-primary", style: { flex: 1, padding: "14px", borderRadius: "10px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", border: "none", color: "white", cursor: "pointer", fontWeight: "bold", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [f ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), "Save Changes"] })] })] })] }) }) })] }) }, mM = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState({ image_url: "", title: "", description: "" }), { showModal: o } = Pi(), a = async () => { try { const p = await lt.get("/banners"); r(p.data) } catch { console.error("Failed to fetch banners") } }; J.useEffect(() => { a() }, []); const c = async p => { p.preventDefault(); try { await lt.post("/banners", n), s({ image_url: "", title: "", description: "" }), a(), o({ type: "success", title: "Success", message: "Banner added successfully" }) } catch { o({ type: "error", title: "Failed", message: "Failed to add banner. Please try again." }) } }, l = async p => { o({ type: "warning", title: "Delete Banner?", message: "Are you sure you want to delete this banner?", showCancel: !0, confirmText: "Yes, Delete", onConfirm: async () => { try { await lt.delete(`/banners/${p}`), a(), o({ type: "success", title: "Deleted", message: "Banner deleted successfully" }) } catch { o({ type: "error", title: "Failed", message: "Failed to delete banner" }) } } }) }; return i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "1fr 1fr", gap: "2rem" }, children: [i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none" }, children: [i.jsx("h3", { style: { marginBottom: "1.5rem", color: "#2ecc71" }, children: "Add New Banner" }), i.jsxs("form", { onSubmit: c, style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [i.jsx("input", { type: "text", placeholder: "Image URL", value: n.image_url, style: z0, onChange: p => s({ ...n, image_url: p.target.value }), required: !0 }), i.jsx("input", { type: "text", placeholder: "Title", value: n.title, style: z0, onChange: p => s({ ...n, title: p.target.value }), required: !0 }), i.jsx("textarea", { placeholder: "Description", value: n.description, style: { ...z0, minHeight: "100px" }, onChange: p => s({ ...n, description: p.target.value }), required: !0 }), i.jsxs("button", { className: "btn btn-primary", style: { display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [i.jsx(Ky, { size: 18 }), " Add Banner"] })] })] }), i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none" }, children: [i.jsx("h3", { style: { marginBottom: "1.5rem", color: "#2ecc71" }, children: "Existing Banners" }), i.jsx("div", { style: { display: "grid", gap: "1rem" }, children: t.map(p => i.jsxs("div", { style: { padding: "1rem", background: "#0f172a", borderRadius: "12px", display: "flex", gap: "1rem", alignItems: "center" }, children: [i.jsx("img", { src: p.image_url, style: { width: "80px", height: "60px", objectFit: "cover", borderRadius: "8px" }, alt: "" }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("div", { style: { fontWeight: "bold", color: "white" }, children: p.title }), i.jsx("div", { style: { fontSize: "12px", color: "#94a3b8" }, children: p.description })] }), i.jsx("button", { onClick: () => l(p.id), style: { padding: "10px", color: "#ef4444", background: "transparent", border: "none", cursor: "pointer" }, children: i.jsx(Xd, { size: 20 }) })] }, p.id)) })] })] }) }, z0 = { padding: "12px", borderRadius: "8px", background: "#0f172a", border: "1px solid #334155", color: "white", width: "100%" }, gM = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState(!0), [o, a] = J.useState(!1), [c, l] = J.useState({ title: "", content: "", amount: 2e3 }), { showModal: p } = Pi(); J.useEffect(() => { d() }, []); const d = async () => { try { const u = await lt.get("/affidavits/templates"); r(u.data) } catch (u) { console.error("Error fetching templates:", u) } finally { s(!1) } }, [f, h] = J.useState(!1), P = async () => { var u, g; if (!c.title || !c.content) { p({ type: "warning", title: "Missing Fields", message: "Title and Content are required to save a template." }); return } h(!0); try { const S = { ...c, amount: parseFloat(c.amount) || 0 }; c.id ? await lt.put(`/affidavits/templates/${c.id}`, S) : await lt.post("/affidavits/templates", S), p({ type: "success", title: "Success", message: "Template saved successfully!" }), a(!1), d(), l({ title: "", content: "", amount: 2e3 }) } catch (S) { console.error("Error saving template:", S); const R = ((g = (u = S.response) == null ? void 0 : u.data) == null ? void 0 : g.error) || S.message; p({ type: "error", title: "Save Failed", message: `Failed to save template: ${R}. If you included large images, they might exceed server limits.` }) } finally { h(!1) } }, b = async u => { p({ type: "warning", title: "Delete Template?", message: "Are you sure you want to delete this template? This action cannot be undone.", showCancel: !0, confirmText: "Yes, Delete", onConfirm: async () => { try { await lt.delete(`/affidavits/templates/${u}`), d(), p({ type: "success", title: "Deleted", message: "Template deleted successfully." }) } catch (g) { console.error("Error deleting template:", g), p({ type: "error", title: "Action Failed", message: "Failed to delete template." }) } } }) }; return o ? i.jsxs("div", { className: "glass-card", style: { background: "white", padding: e ? "1rem" : "2rem" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2rem" }, children: [i.jsx("h2", { children: c.id ? "Edit Template" : "Create New Template" }), i.jsxs("button", { onClick: () => a(!1), className: "btn btn-secondary", children: [i.jsx(za, { size: 20 }), " Cancel"] })] }), i.jsxs("div", { style: { display: "grid", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Template Title" }), i.jsx("input", { type: "text", value: c.title, onChange: u => l({ ...c, title: u.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" }, placeholder: "e.g. Affidavit of Good Conduct" })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Amount ()" }), i.jsx("input", { type: "number", value: c.amount, onChange: u => l({ ...c, amount: u.target.value }), style: { width: "100%", padding: "0.75rem", borderRadius: "8px", border: "1px solid #e2e8f0" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", fontWeight: "bold" }, children: "Template Content" }), i.jsx(Em, { value: c.content, onChange: u => l({ ...c, content: u }), placeholder: "Design your template here..." })] }), i.jsx("button", { onClick: P, disabled: f, className: "btn btn-primary", style: { padding: "1rem", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem", opacity: f ? .7 : 1 }, children: f ? i.jsxs(i.Fragment, { children: [i.jsx(Jn, { size: 20, className: "animate-spin" }), " Saving Template..."] }) : i.jsxs(i.Fragment, { children: [i.jsx(gm, { size: 20 }), " Save Template"] }) })] })] }) : i.jsxs("div", { className: "glass-card", style: { background: "white", padding: e ? "1rem" : "2rem" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "2rem", alignItems: "center" }, children: [i.jsxs("div", { children: [i.jsx("h2", { style: { margin: 0 }, children: "Affidavit Template Management" }), i.jsx("p", { style: { color: "#778eaeff", margin: "0.5rem 0 0" }, children: "Pre-load and manage official court templates" })] }), i.jsxs("button", { onClick: () => { l({ title: "", content: "", amount: 2e3 }), a(!0) }, className: "btn btn-primary", style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(Ky, { size: 20 }), " New Template"] })] }), !o && i.jsx(qs, { columns: [{ key: "title", label: "Affidavit Title", sortable: !0, render: u => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsx("div", { style: { padding: "8px", background: "#f8fafc", borderRadius: "8px", color: "#3b82f6" }, children: i.jsx(zn, { size: 20 }) }), i.jsx("span", { style: { fontWeight: "600", color: "rgb\(18 37 74\)" }, children: u })] }) }, { key: "amount", label: "Fee ()", sortable: !0, render: u => i.jsxs("span", { style: { fontWeight: "bold", color: "#10b981" }, children: ["", Number(u).toLocaleString()] }) }], data: t, loading: n, searchPlaceholder: "Search templates by title...", actions: u => i.jsxs("div", { style: { display: "flex", gap: "0.5rem", justifyContent: "flex-end" }, children: [i.jsx("button", { onClick: () => { l(u), a(!0) }, style: { padding: "8px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "none", borderRadius: "8px", cursor: "pointer" }, title: "Edit Template", children: i.jsx(Jd, { size: 18 }) }), i.jsx("button", { onClick: () => b(u.id), style: { padding: "8px", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", border: "none", borderRadius: "8px", cursor: "pointer" }, title: "Delete Template", children: i.jsx(Xd, { size: 18 }) })] }) })] }) }, Hp = ({ staff: e, isMobile: t, onUpdate: r }) => { var v; const { showModal: n } = Pi(), [s, o] = J.useState(e), [a, c] = J.useState(!1), [l, p] = J.useState({ name: (s == null ? void 0 : s.name) || "", division: (s == null ? void 0 : s.division) || "", email: (s == null ? void 0 : s.email) || "" }), [d, f] = J.useState(null), [h, P] = J.useState({ currentPassword: "", newPassword: "", confirmPassword: "" }), [b, u] = J.useState(!1), [g, S] = J.useState(!1), R = async D => { var M, W; D.preventDefault(), u(!0); try { const I = new FormData; I.append("name", l.name), I.append("division", l.division), d && I.append("signature", d); const _ = (await lt.put("/staff/profile", I, { headers: { "Content-Type": "multipart/form-data" } })).data.user; o(_), r && r(_), c(!1), n({ type: "success", title: "Profile Updated", message: "Your profile information has been updated." }) } catch (I) { n({ type: "error", title: "Update Failed", message: ((W = (M = I.response) == null ? void 0 : M.data) == null ? void 0 : W.error) || "Failed to update profile." }) } finally { u(!1) } }, y = async D => { var M, W; if (D.preventDefault(), h.newPassword !== h.confirmPassword) return n({ type: "error", title: "Error", message: "New passwords do not match" }); S(!0); try { await lt.put("/staff/change-password", { currentPassword: h.currentPassword, newPassword: h.newPassword }), n({ type: "success", title: "Success", message: "Password changed successfully" }), P({ currentPassword: "", newPassword: "", confirmPassword: "" }) } catch (I) { n({ type: "error", title: "Failed", message: ((W = (M = I.response) == null ? void 0 : M.data) == null ? void 0 : W.error) || "Failed to change password" }) } finally { S(!1) } }; return i.jsxs("div", { style: { color: "white" }, children: [i.jsxs("div", { style: { marginBottom: "2.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsxs("div", { children: [i.jsx("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0" }, children: "Security & Profile" }), i.jsx("p", { style: { color: "#94a3b8" }, children: "Manage your account settings and personal information" })] }), !a && i.jsxs("button", { onClick: () => c(!0), style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "10px 20px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "1px solid #3b82f6", borderRadius: "10px", cursor: "pointer", fontWeight: "600" }, children: [i.jsx(iv, { size: 18 }), " Edit Profile"] })] }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: t ? "1fr" : "1.2fr 1fr", gap: "2.5rem" }, children: [i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "2rem", marginBottom: "2.5rem" }, children: [i.jsx("div", { style: { width: "100px", height: "100px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", borderRadius: "24px", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "2.5rem", fontWeight: "bold", boxShadow: "0 10px 15px -3px rgba(59, 130, 246, 0.3)" }, children: (v = s == null ? void 0 : s.name) == null ? void 0 : v[0] }), i.jsxs("div", { children: [i.jsx("h3", { style: { margin: 0, fontSize: "1.8rem" }, children: s == null ? void 0 : s.name }), i.jsx("div", { style: { display: "inline-block", padding: "6px 16px", background: "rgba(16, 185, 129, 0.1)", color: "#10b981", borderRadius: "20px", fontSize: "13px", fontWeight: "700", marginTop: "0.75rem", textTransform: "uppercase", letterSpacing: "0.05em" }, children: s == null ? void 0 : s.role })] })] }), i.jsx("form", { onSubmit: R, children: i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.75rem" }, children: [i.jsxs("div", { style: { display: "grid", gridTemplateColumns: t ? "1fr" : "1fr 1fr", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Full Name" }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(Vn, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), i.jsx("input", { type: "text", readOnly: !a, value: l.name, onChange: D => p({ ...l, name: D.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Division / Office" }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(GI, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), i.jsx("input", { type: "text", readOnly: !a, value: l.division, placeholder: "Not specified", onChange: D => p({ ...l, division: D.target.value }), style: { width: "100%", padding: "12px 12px 12px 40px", background: a ? "#0f172a" : "transparent", border: a ? "1px solid #334155" : "1px solid transparent", borderRadius: "10px", color: "white", outline: "none" } })] })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Email Address" }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(Dl, { size: 18, style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" } }), i.jsx("input", { type: "email", readOnly: !0, value: l.email, style: { width: "100%", padding: "12px 12px 12px 40px", background: "transparent", border: "1px solid transparent", borderRadius: "10px", color: "#778eaeff", outline: "none" } })] })] }), i.jsxs("div", { style: { borderTop: "1px solid #334155", paddingTop: "2rem" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "1rem" }, children: "Digital Signature" }), i.jsxs("div", { style: { border: "2px dashed #334155", padding: "1.5rem", borderRadius: "16px", background: a ? "rgba(30, 41, 59, 0.5)" : "#0f172a", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem", position: "relative" }, children: [d ? i.jsx("img", { src: URL.createObjectURL(d), style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Preview" }) : s != null && s.signature_path ? i.jsx("img", { src: `${lt.defaults.baseURL.replace("/api", "")}${s.signature_path}`, style: { maxHeight: "80px", maxWidth: "200px", objectFit: "contain" }, alt: "Signature" }) : i.jsx(Cc, { size: 40, color: "#334155" }), a && i.jsxs(i.Fragment, { children: [i.jsx("input", { type: "file", id: "sig-upload", style: { display: "none" }, accept: "image/*", onChange: D => f(D.target.files[0]) }), i.jsxs("label", { htmlFor: "sig-upload", style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "8px 16px", background: "#334155", borderRadius: "8px", cursor: "pointer", fontSize: "13px", color: "white" }, children: [i.jsx(Bd, { size: 16 }), " Choose Signature Image"] })] })] })] }), a && i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "1rem" }, children: [i.jsx("button", { type: "button", onClick: () => { c(!1), p({ name: s.name, division: s.division || "", email: s.email }), f(null) }, style: { flex: 1, padding: "12px", background: "transparent", border: "1px solid #ef4444", color: "#ef4444", borderRadius: "10px", cursor: "pointer", fontWeight: "bold" }, children: "Cancel" }), i.jsxs("button", { type: "submit", disabled: b, style: { flex: 1, padding: "12px", background: "linear-gradient(135deg, #10b981 0%, #059669 100%)", border: "none", color: "white", borderRadius: "10px", cursor: "pointer", fontWeight: "bold", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [b ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), " Save Changes"] })] })] }) })] }), i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "2.5rem", borderRadius: "24px" }, children: [i.jsxs("h3", { style: { margin: "0 0 2rem 0", display: "flex", alignItems: "center", gap: "0.75rem", fontSize: "1.4rem" }, children: [i.jsx(Nd, { size: 22, color: "#f59e0b" }), " Security & Password"] }), i.jsx("form", { onSubmit: y, children: i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Current Password" }), i.jsx("input", { type: "password", required: !0, value: h.currentPassword, onChange: D => P({ ...h, currentPassword: D.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "New Password" }), i.jsx("input", { type: "password", required: !0, value: h.newPassword, onChange: D => P({ ...h, newPassword: D.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Confirm New Password" }), i.jsx("input", { type: "password", required: !0, value: h.confirmPassword, onChange: D => P({ ...h, confirmPassword: D.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), i.jsx("div", { style: { marginTop: "1rem", padding: "1rem", background: "rgba(245, 158, 11, 0.05)", border: "1px solid rgba(245, 158, 11, 0.2)", borderRadius: "12px" }, children: i.jsxs("p", { style: { margin: 0, fontSize: "12px", color: "#94a3b8", lineHeight: "1.5" }, children: [i.jsx("strong", { style: { color: "#f59e0b" }, children: "Security Tip:" }), " Use a combination of letters, numbers, and symbols to create a strong password. Avoid using easily guessable information."] }) }), i.jsxs("button", { type: "submit", disabled: g, style: { padding: "16px", borderRadius: "12px", background: "linear-gradient(135deg, #f59e0b 0%, #d97706 100%)", border: "none", color: "white", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.75rem", boxShadow: "0 10px 15px -3px rgba(245, 158, 11, 0.3)" }, children: [g ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), "Update Password Settings"] })] }) })] })] })] }) }, vM = ({ isMobile: e }) => { const [t, r] = J.useState(null), [n, s] = J.useState(!0), [o, a] = J.useState(null), c = async () => { var p, d, f; try { s(!0), a(null); try { const P = await lt.get("/public-test/stats"); console.log("Connectivity check:", P.data) } catch (P) { console.warn("Connectivity check failed:", P.message) } console.log("Fetching admin stats from /admin/system/stats..."); const h = await lt.get("/admin/system/stats"); r(h.data) } catch (h) { console.error("Failed to fetch admin stats:", h); const P = (p = h.response) == null ? void 0 : p.status; let b = ((f = (d = h.response) == null ? void 0 : d.data) == null ? void 0 : f.error) || h.message; try { const u = await lt.get("../debug/routes"); console.log("Registered Server Routes:", u.data), u.data.includes("GET /api/admin/system/stats") || console.error("Missing expected route: /api/admin/system/stats. Server might need a restart.") } catch (u) { console.warn("Could not fetch debug routes:", u.message) } a(P ? `${P}: ${b}` : `Sync Error: ${b}`) } finally { s(!1) } }; if (J.useEffect(() => { c() }, []), n) return i.jsxs("div", { style: { display: "flex", flexDirection: "column", alignItems: "center", padding: "5rem" }, children: [i.jsx("div", { className: "animate-spin", style: { width: "40px", height: "40px", border: "4px solid #3b82f6", borderTopColor: "transparent", borderRadius: "50%", marginBottom: "1rem" } }), i.jsx("p", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Fetching System Metrics..." })] }); if (o) return i.jsxs("div", { style: { padding: "3rem", textAlign: "center", background: "#fff1f2", borderRadius: "24px", border: "1px solid #fecaca" }, children: [i.jsx(zf, { size: 48, color: "#ef4444", style: { marginBottom: "1rem" } }), i.jsx("h3", { style: { color: "#991b1b", margin: "0 0 0.5rem" }, children: "Data Sync Failed" }), i.jsx("p", { style: { color: "#b91c1c", margin: "0 0 1.5rem" }, children: o }), i.jsx("button", { onClick: c, style: { padding: "10px 24px", background: "#ef4444", color: "white", border: "none", borderRadius: "12px", fontWeight: "bold", cursor: "pointer" }, children: "Retry Connection" })] }); const l = [{ title: "Public Users", value: (t == null ? void 0 : t.total_users) ?? 0, icon: i.jsx(co, { color: "#3b82f6" }), color: "#3b82f6" }, { title: "Staff Members", value: (t == null ? void 0 : t.total_staff) ?? 0, icon: i.jsx(Cc, { color: "#10b981" }), color: "#10b981" }, { title: "Legal Templates", value: (t == null ? void 0 : t.total_templates) ?? 0, icon: i.jsx(zn, { color: "#8b5cf6" }), color: "#8b5cf6" }, { title: "Active Banners", value: (t == null ? void 0 : t.total_banners) ?? 0, icon: i.jsx(Wy, { color: "#f59e0b" }), color: "#f59e0b" }]; return i.jsxs("div", { style: { color: "rgb\(18 37 74\)" }, children: [i.jsxs("div", { style: { marginBottom: "2.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsxs("div", { children: [i.jsx("h2", { style: { fontSize: "2rem", margin: "0 0 0.5rem 0", fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: "System Overview" }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Real-time performance metrics and infrastructure status." })] }), i.jsx("button", { onClick: c, style: { padding: "10px", borderRadius: "12px", background: "white", border: "1px solid #e2e8f0", color: "#778eaeff", cursor: "pointer" }, title: "Refresh Data", children: i.jsx(mm, { size: 18 }) })] }), i.jsx("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "repeat(4, 1fr)", gap: "1.5rem", marginBottom: "3rem" }, children: l.map((p, d) => i.jsxs(Wt.div, { whileHover: { y: -5 }, style: { background: "white", padding: "1.75rem", borderRadius: "24px", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)", display: "flex", flexDirection: "column", gap: "1.25rem" }, children: [i.jsx("div", { style: { padding: "12px", borderRadius: "16px", background: `${p.color}15`, width: "fit-content" }, children: p.icon }), i.jsxs("div", { children: [i.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "13px", fontWeight: "bold", textTransform: "uppercase", letterSpacing: "0.5px" }, children: p.title }), i.jsx("h3", { style: { margin: "0.4rem 0 0", fontSize: "1.75rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: p.value })] })] }, d)) }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "1fr 1fr", gap: "2rem" }, children: [i.jsxs("div", { style: { background: "white", padding: "2.5rem", borderRadius: "32px", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [i.jsxs("h3", { style: { margin: "0 0 2rem 0", display: "flex", alignItems: "center", gap: "1rem", fontSize: "1.25rem", color: "rgb\(18 37 74\)" }, children: [i.jsx(zf, { size: 24, color: "#f59e0b" }), " Operations Activity"] }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2rem" }, children: [i.jsxs("div", { children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "10px" }, children: [i.jsx("span", { style: { color: "#778eaeff", fontWeight: "500" }, children: "Recent Activity (24h)" }), i.jsxs("span", { style: { fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: [(t == null ? void 0 : t.recent_activities) || 0, " Events"] })] }), i.jsx("div", { style: { height: "10px", background: "#f1f5f9", borderRadius: "5px" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: t != null && t.total_activities ? `${Math.min(t.recent_activities / t.total_activities * 100, 100)}%` : "0%" }, style: { height: "100%", background: "#f59e0b", borderRadius: "5px" } }) })] }), i.jsxs("div", { style: { display: "flex", gap: "1.5rem" }, children: [i.jsxs("div", { style: { flex: 1, padding: "1.25rem", background: "#f8fafc", borderRadius: "20px", textAlign: "center", border: "1px solid #f1f5f9" }, children: [i.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "11px", fontWeight: "bold", textTransform: "uppercase" }, children: "Lifetime Logs" }), i.jsx("p", { style: { margin: "5px 0 0", fontWeight: "800", fontSize: "1.4rem", color: "rgb\(18 37 74\)" }, children: (t == null ? void 0 : t.total_activities) || 0 })] }), i.jsxs("div", { style: { flex: 1, padding: "1.25rem", background: "#f8fafc", borderRadius: "20px", textAlign: "center", border: "1px solid #f1f5f9" }, children: [i.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "11px", fontWeight: "bold", textTransform: "uppercase" }, children: "Last Heartbeat" }), i.jsx("p", { style: { margin: "5px 0 0", fontWeight: "800", fontSize: "1.2rem", color: "#10b981" }, children: t != null && t.last_activity ? new Date(t.last_activity).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }) : "None" })] })] })] })] }), i.jsxs("div", { style: { background: "linear-gradient(135deg, rgb\(18 37 74\) 0%, #0f172a 100%)", padding: "2.5rem", borderRadius: "32px", display: "flex", flexDirection: "column", justifyContent: "center", position: "relative", overflow: "hidden" }, children: [i.jsx(Cc, { size: 120, style: { position: "absolute", right: "-20px", bottom: "-20px", opacity: .05, color: "white" } }), i.jsx("h3", { style: { fontSize: "1.5rem", margin: "0 0 1rem", position: "relative", color: "#4ade80", fontWeight: "bold" }, children: "Core Health" }), i.jsx("p", { style: { color: "rgba(255,255,255,0.7)", lineHeight: "1.6", fontSize: "0.95rem", marginBottom: "2rem", position: "relative" }, children: "Platform services are operating at peak efficiency. Data integrity checks and security encryption layers are all fully active." }), i.jsxs("div", { style: { display: "flex", gap: "1rem", position: "relative" }, children: [i.jsxs("div", { style: { padding: "0.75rem", background: "rgba(74, 222, 128, 0.1)", borderRadius: "12px", flex: 1, textAlign: "center", border: "1px solid rgba(74, 222, 128, 0.2)" }, children: [i.jsx("span", { style: { display: "block", fontSize: "0.8rem", opacity: .8, color: "#4ade80", fontWeight: "bold" }, children: "SYSTEM" }), i.jsx("span", { style: { fontWeight: "bold", color: "#4ade80" }, children: "ACTIVE" })] }), i.jsxs("div", { style: { padding: "0.75rem", background: "rgba(255,255,255,0.05)", borderRadius: "12px", flex: 1, textAlign: "center" }, children: [i.jsx("span", { style: { display: "block", fontSize: "0.8rem", opacity: .8, color: "#94a3b8" }, children: "DATABASE" }), i.jsx("span", { style: { fontWeight: "bold", color: "white" }, children: "ONLINE" })] })] })] })] })] }) }, yM = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState(!0), o = async () => { try { s(!0); const c = await lt.get("/staff/admin/logs"); r(c.data) } catch (c) { console.error("Failed to fetch logs:", c) } finally { s(!1) } }; J.useEffect(() => { o() }, []); const a = [{ key: "timestamp", label: "Time", render: c => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px", color: "#778eaeff" }, children: [i.jsx(Tl, { size: 14 }), new Date(c).toLocaleString([], { hour: "2-digit", minute: "2-digit", second: "2-digit" })] }) }, { key: "user_name", label: "User", render: (c, l) => { var p; return i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "8px" }, children: [i.jsx(Vn, { size: 14, color: l.user_type === "staff" ? "#8b5cf6" : "#3b82f6" }), i.jsx("span", { style: { fontWeight: "500" }, children: c }), i.jsx("span", { style: { fontSize: "10px", padding: "2px 6px", borderRadius: "10px", background: l.user_type === "staff" ? "#f3e8ff" : "#dbeafe", color: l.user_type === "staff" ? "#7c3aed" : "#2563eb" }, children: (p = l.user_type) == null ? void 0 : p.toUpperCase() })] }) } }, { key: "action", label: "Action", render: c => i.jsx("code", { style: { background: "#f1f5f9", padding: "4px 8px", borderRadius: "4px", fontSize: "12px", color: "rgb\(18 37 74\)" }, children: c }) }, { key: "ip_address", label: "IP Address", render: c => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "6px", color: "#94a3b8", fontSize: "12px" }, children: [i.jsx(_j, { size: 12 }), " ", c] }), hiddenMobile: !0 }]; return i.jsxs(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, className: "glass-card", style: { background: "white", padding: e ? "1rem" : "1.5rem" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "1.5rem" }, children: [i.jsxs("h3", { style: { margin: 0, display: "flex", alignItems: "center", gap: "10px" }, children: [i.jsx(zf, { size: 22, color: "#f59e0b" }), " System Audit Logs"] }), i.jsxs("button", { onClick: o, style: { padding: "8px 16px", borderRadius: "8px", border: "1px solid #e2e8f0", background: "white", cursor: "pointer", display: "flex", alignItems: "center", gap: "8px", fontSize: "13px" }, children: [i.jsx(mm, { size: 14, className: n ? "animate-spin" : "" }), " Refresh"] })] }), i.jsx(qs, { columns: a, data: t, loading: n, searchPlaceholder: "Search audit trails...", isMobile: e })] }) }, bM = ({ isMobile: e }) => { const { showModal: t } = Pi(), [r, n] = J.useState({ maintenance_mode: !1, allow_new_registrations: !0, notification_email: "admin@crms.com", backup_frequency: "daily" }), [s, o] = J.useState(!0), [a, c] = J.useState(!1); J.useEffect(() => { (async () => { try { const d = await lt.get("/staff/admin/settings"); n(d.data) } catch { console.error("Failed to fetch settings") } finally { o(!1) } })() }, []); const l = async p => { p.preventDefault(), c(!0), setTimeout(() => { c(!1), t({ type: "success", title: "Settings Saved", message: "System configuration has been updated successfully." }) }, 1e3) }; return s ? i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading Configuration..." }) : i.jsx("form", { onSubmit: l, style: { maxWidth: "800px", margin: "0 auto" }, children: i.jsxs(Wt.div, { initial: { opacity: 0, y: 20 }, animate: { opacity: 1, y: 0 }, className: "glass-card", style: { background: "white" }, children: [i.jsxs("div", { style: { padding: "1.5rem", borderBottom: "1px solid #f1f5f9", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsxs("h3", { style: { margin: 0, display: "flex", alignItems: "center", gap: "10px" }, children: [i.jsx(Rd, { size: 22, color: "#778eaeff" }), " General Settings"] }), i.jsxs("button", { type: "submit", disabled: a, style: { padding: "10px 20px", borderRadius: "12px", background: "#3b82f6", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", gap: "8px" }, children: [a ? i.jsx(mm, { size: 18, className: "animate-spin" }) : i.jsx(gm, { size: 18 }), "Save Changes"] })] }), i.jsxs("div", { style: { padding: "2rem", display: "flex", flexDirection: "column", gap: "2rem" }, children: [i.jsxs("div", { style: v_, children: [i.jsxs("div", { style: { flex: 1 }, children: [i.jsxs("h4", { style: Lh, children: [i.jsx(Cc, { size: 16 }), " Maintenance Mode"] }), i.jsx("p", { style: y_, children: "Globally disable the public portal for maintenance." })] }), i.jsxs("label", { className: "switch", children: [i.jsx("input", { type: "checkbox", checked: r.maintenance_mode, onChange: p => n({ ...r, maintenance_mode: p.target.checked }) }), i.jsx("span", { className: "slider round" })] })] }), i.jsxs("div", { style: v_, children: [i.jsxs("div", { style: { flex: 1 }, children: [i.jsxs("h4", { style: Lh, children: [i.jsx($f, { size: 16 }), " New Registrations"] }), i.jsx("p", { style: y_, children: "Allow new citizens to create accounts." })] }), i.jsxs("label", { className: "switch", children: [i.jsx("input", { type: "checkbox", checked: r.allow_new_registrations, onChange: p => n({ ...r, allow_new_registrations: p.target.checked }) }), i.jsx("span", { className: "slider round" })] })] }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "1fr 1fr", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsxs("label", { style: Lh, children: [i.jsx(Dl, { size: 16 }), " Notification Email"] }), i.jsx("input", { type: "email", value: r.notification_email, onChange: p => n({ ...r, notification_email: p.target.value }), style: b_ })] }), i.jsxs("div", { children: [i.jsxs("label", { style: Lh, children: [i.jsx(dj, { size: 16 }), " Backup Frequency"] }), i.jsxs("select", { value: r.backup_frequency, onChange: p => n({ ...r, backup_frequency: p.target.value }), style: b_, children: [i.jsx("option", { value: "hourly", children: "Every Hour" }), i.jsx("option", { value: "daily", children: "Daily (3 AM)" }), i.jsx("option", { value: "weekly", children: "Weekly" })] })] })] })] })] }) }) }, v_ = { display: "flex", justifyContent: "space-between", alignItems: "center", padding: "1.5rem", background: "#f8fafc", borderRadius: "16px", gap: "1rem" }, Lh = { margin: "0 0 5px 0", fontSize: "15px", fontWeight: "700", color: "rgb\(18 37 74\)", display: "flex", alignItems: "center", gap: "8px" }, y_ = { margin: 0, fontSize: "13px", color: "#778eaeff" }, b_ = { width: "100%", padding: "12px", borderRadius: "8px", border: "1px solid #e2e8f0", marginTop: "8px", fontSize: "14px" }, xM = ({ staff: e }) => { var h; const [t, r] = J.useState(e), [n, s] = J.useState("dashboard"), [o, a] = J.useState(window.innerWidth > 1024), [c, l] = J.useState(window.innerWidth <= 1024); J.useEffect(() => { const P = () => { const b = window.innerWidth <= 1024; l(b), a(!b) }; return window.addEventListener("resize", P), () => window.removeEventListener("resize", P) }, []), J.useEffect(() => { const P = async () => { try { const b = await lt.get("/staff/profile"); r(b.data), localStorage.setItem("staff", JSON.stringify(b.data)) } catch (b) { console.error("Failed to refresh staff info:", b) } }; e != null && e.id && P() }, [e == null ? void 0 : e.id]); const p = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, d = [{ icon: i.jsx(Pl, { size: 20 }), label: "Dashboard", id: "dashboard" }, { icon: i.jsx(Cc, { size: 20 }), label: "Staff Management", id: "staff" }, { icon: i.jsx(co, { size: 20 }), label: "User Management", id: "users" }, { icon: i.jsx(zn, { size: 20 }), label: "Template Management", id: "templates" }, { icon: i.jsx(Rd, { size: 20 }), label: "System Settings", id: "settings" }, { icon: i.jsx(qy, { size: 20 }), label: "Activity Logs", id: "logs" }, { icon: i.jsx(ga, { size: 20 }), label: "Payment Gateway", id: "payments" }, { icon: i.jsx(Wy, { size: 20 }), label: "Banner Management", id: "banners" }, { icon: i.jsx(Vn, { size: 20 }), label: "My Profile", id: "profile" }], f = [{ id: 1, text: "System backup completed successfully", time: "3h ago" }]; return t ? i.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", color: "#3d2b1f" }, children: [c && o && i.jsx("div", { onClick: () => a(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), i.jsxs("aside", { style: { width: o ? "280px" : "0", background: "#3d2b1f", padding: o ? "2rem" : "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: c ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: c && o ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [i.jsxs("div", { style: { padding: "1rem", marginBottom: "2rem", display: "flex", alignItems: "center", gap: "1rem", justifyContent: "space-between" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%" } }), i.jsxs("div", { style: { whiteSpace: "nowrap" }, children: [i.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS Admin" }), i.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), c && i.jsx("button", { onClick: () => a(!1), style: { background: "transparent", border: "none", color: "white", cursor: "pointer" }, children: i.jsx(za, { size: 24 }) })] }), i.jsx("nav", { style: { flex: 1 }, children: d.map(P => i.jsxs("div", { onClick: () => { s(P.id), c && a(!1) }, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: n === P.id ? "#5d4037" : "transparent", color: n === P.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [P.icon, i.jsx("span", { children: P.label })] }, P.id)) }), i.jsxs("button", { onClick: p, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", marginTop: "auto" }, children: [i.jsx(Ac, { size: 20 }), i.jsx("span", { children: "Logout" })] })] }), i.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", height: "100vh", overflowY: "auto", width: "100%" }, children: [i.jsx(Il, { user: t, title: ((h = d.find(P => P.id === n)) == null ? void 0 : h.label) || "Admin Overview", onLogout: p, onSidebarToggle: () => a(!o), onProfileClick: () => s("profile"), onSettingsClick: () => s("settings"), sidebarOpen: o, isMobile: c, notifications: f }), i.jsx("div", { style: { padding: c ? "1rem" : "2.5rem" }, children: n === "dashboard" ? i.jsx(vM, { isMobile: c }) : n === "staff" ? i.jsx("div", { style: { maxWidth: "1400px", margin: "0 auto" }, children: i.jsx(hM, { isMobile: c }) }) : n === "users" ? i.jsx(fM, { isMobile: c }) : n === "templates" ? i.jsx(gM, { isMobile: c }) : n === "banners" ? i.jsx(mM, { isMobile: c }) : n === "profile" ? i.jsx(Hp, { staff: t, isMobile: c, onUpdate: P => { r(P), localStorage.setItem("staff", JSON.stringify(P)) } }) : n === "logs" ? i.jsx(yM, { isMobile: c }) : n === "settings" ? i.jsx(bM, { isMobile: c }) : i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", padding: "2rem" }, children: [i.jsx("h2", { style: { marginBottom: "1rem" }, children: n.charAt(0).toUpperCase() + n.slice(1) }), i.jsxs("p", { style: { color: "#94a3b8" }, children: ['Module view for "', n, '" is currently being implemented.'] })] }) })] })] }) : i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading admin session..." }) }, _M = ({ isMobile: e }) => { const [t, r] = J.useState(null), [n, s] = J.useState(!0); if (J.useEffect(() => { (async () => { try { const c = await lt.get("/staff/cfo/stats"); r(c.data) } catch (c) { console.error("Failed to fetch CFO stats:", c) } finally { s(!1) } })() }, []), n) return i.jsxs("div", { style: { display: "flex", flexDirection: "column", alignItems: "center", padding: "5rem" }, children: [i.jsx("div", { className: "animate-spin", style: { width: "40px", height: "40px", border: "4px solid #3b82f6", borderTopColor: "transparent", borderRadius: "50%", marginBottom: "1rem" } }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Preparing Registry Overview..." })] }); const o = [{ title: "Total Deponents", value: ((t == null ? void 0 : t.total_users) || 0).toLocaleString(), icon: i.jsx(co, { size: 24 }), color: "#3b82f6", label: "Registered users" }, { title: "Submitted Affidavits", value: ((t == null ? void 0 : t.total_affidavits) || 0).toLocaleString(), icon: i.jsx(zn, { size: 24 }), color: "#8b5cf6", label: "Total filings" }, { title: "Oaths Requested", value: (t == null ? void 0 : t.total_oaths) || 0, icon: i.jsx(ua, { size: 24 }), color: "#10b981", label: "Virtual sessions" }, { title: "Pending Review", value: (t == null ? void 0 : t.pending_affidavits) || 0, icon: i.jsx(Tl, { size: 24 }), color: "#f59e0b", label: "Waiting" }]; return i.jsxs("div", { style: { animation: "fadeIn 0.5s ease-out" }, children: [i.jsxs("div", { style: { marginBottom: "2.5rem" }, children: [i.jsxs("h2", { style: { fontSize: "2rem", margin: "0 0 0.5rem 0", fontWeight: "bold", color: "rgb\(18 37 74\)", display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsx(Pl, { color: "#3b82f6" }), " Registry Overview"] }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Operational performance metrics for affidavits and virtual oath sessions." })] }), i.jsx("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "repeat(4, 1fr)", gap: "1.5rem", marginBottom: "3rem" }, children: o.map((a, c) => i.jsxs(Wt.div, { whileHover: { y: -5 }, style: { background: "white", padding: "1.5rem", borderRadius: "24px", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem", marginBottom: "1.25rem" }, children: [i.jsx("div", { style: { padding: "10px", borderRadius: "12px", background: `${a.color}15`, color: a.color }, children: a.icon }), i.jsx("p", { style: { margin: 0, color: "#778eaeff", fontSize: "13px", fontWeight: "bold", textTransform: "uppercase", letterSpacing: "0.5px" }, children: a.title })] }), i.jsx("h3", { style: { margin: "0", fontSize: "2rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: a.value }), i.jsx("p", { style: { margin: "4px 0 0", fontSize: "12px", color: "#94a3b8" }, children: a.label })] }, c)) }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "2fr 1fr", gap: "2rem" }, children: [i.jsxs("div", { style: { background: "white", padding: "2rem", borderRadius: "32px", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [i.jsxs("h3", { style: { margin: "0 0 2rem 0", fontSize: "1.25rem", fontWeight: "bold", color: "rgb\(18 37 74\)", display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsx(JI, { size: 22, color: "#8b5cf6" }), " Completion Rate"] }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2.5rem" }, children: [i.jsxs("div", { children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "10px" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(li, { size: 16, color: "#10b981" }), i.jsx("span", { style: { fontSize: "14px", color: "#778eaeff", fontWeight: "500" }, children: "Completed Affidavits" })] }), i.jsx("span", { style: { fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: (t == null ? void 0 : t.completed_affidavits) || 0 })] }), i.jsx("div", { style: { height: "8px", background: "#f8fafc", borderRadius: "4px", overflow: "hidden" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: `${(t == null ? void 0 : t.completed_affidavits) / ((t == null ? void 0 : t.total_affidavits) || 1) * 100}%` }, style: { height: "100%", background: "#10b981", borderRadius: "4px" } }) })] }), i.jsxs("div", { children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "10px" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(Cd, { size: 16, color: "#ef4444" }), i.jsx("span", { style: { fontSize: "14px", color: "#778eaeff", fontWeight: "500" }, children: "Rejected Filings" })] }), i.jsx("span", { style: { fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: (t == null ? void 0 : t.rejected_affidavits) || 0 })] }), i.jsx("div", { style: { height: "8px", background: "#f8fafc", borderRadius: "4px", overflow: "hidden" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: `${(t == null ? void 0 : t.rejected_affidavits) / ((t == null ? void 0 : t.total_affidavits) || 1) * 100}%` }, style: { height: "100%", background: "#ef4444", borderRadius: "4px" } }) })] }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: "1rem", marginTop: "1rem", padding: "1.5rem", background: "#f8fafc", borderRadius: "20px" }, children: [i.jsxs("div", { children: [i.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "12px" }, children: "Approval Success" }), i.jsxs("p", { style: { margin: "4px 0 0", fontSize: "1.5rem", fontWeight: "800", color: "#10b981" }, children: [(t == null ? void 0 : t.total_affidavits) > 0 ? Math.round(t.completed_affidavits / t.total_affidavits * 100) : 0, "%"] })] }), i.jsxs("div", { children: [i.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "12px" }, children: "Total Processing" }), i.jsx("p", { style: { margin: "4px 0 0", fontSize: "1.5rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: (t == null ? void 0 : t.total_affidavits) || 0 })] })] })] })] }), i.jsxs("div", { style: { background: "rgb\(18 37 74\)", padding: "2rem", borderRadius: "32px", color: "white", display: "flex", flexDirection: "column", justifyContent: "space-between" }, children: [i.jsxs("div", { children: [i.jsx("div", { style: { background: "rgba(59, 130, 246, 0.2)", width: "48px", height: "48px", borderRadius: "14px", display: "flex", alignItems: "center", justifyContent: "center", marginBottom: "1.5rem" }, children: i.jsx(ua, { size: 24, color: "#3b82f6" }) }), i.jsx("h3", { style: { fontSize: "1.4rem", margin: "0 0 0.75rem", fontWeight: "bold" }, children: "Video Verification" }), i.jsxs("p", { style: { color: "#94a3b8", lineHeight: "1.6", fontSize: "0.9rem" }, children: ["A total of ", i.jsx("strong", { children: (t == null ? void 0 : t.total_oaths) || 0 }), " virtual oath sessions have been conducted or requested across the system."] })] }), i.jsx("div", { style: { marginTop: "2rem", padding: "1.25rem", background: "rgba(255,255,255,0.05)", borderRadius: "20px", border: "1px solid rgba(255,255,255,0.1)" }, children: i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "10px" }, children: [i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: "#10b981", boxShadow: "0 0 10px #10b981" } }), i.jsx("span", { style: { fontSize: "13px", color: "#f1f5f9" }, children: "Real-time Compliance Tracking" })] }) })] })] })] }) }; var nb = { exports: {} }, kd = typeof Reflect == "object" ? Reflect : null, x_ = kd && typeof kd.apply == "function" ? kd.apply : function (t, r, n) { return Function.prototype.apply.call(t, r, n) }, lf; kd && typeof kd.ownKeys == "function" ? lf = kd.ownKeys : Object.getOwnPropertySymbols ? lf = function (t) { return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)) } : lf = function (t) { return Object.getOwnPropertyNames(t) }; function wM(e) { console && console.warn && console.warn(e) } var x2 = Number.isNaN || function (t) { return t !== t }; function Cn() { Cn.init.call(this) } nb.exports = Cn; nb.exports.once = RM; Cn.EventEmitter = Cn; Cn.prototype._events = void 0; Cn.prototype._eventsCount = 0; Cn.prototype._maxListeners = void 0; var __ = 10; function Cm(e) { if (typeof e != "function") throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof e) } Object.defineProperty(Cn, "defaultMaxListeners", { enumerable: !0, get: function () { return __ }, set: function (e) { if (typeof e != "number" || e < 0 || x2(e)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + e + "."); __ = e } }); Cn.init = function () { (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0 }; Cn.prototype.setMaxListeners = function (t) { if (typeof t != "number" || t < 0 || x2(t)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + t + "."); return this._maxListeners = t, this }; function _2(e) { return e._maxListeners === void 0 ? Cn.defaultMaxListeners : e._maxListeners } Cn.prototype.getMaxListeners = function () { return _2(this) }; Cn.prototype.emit = function (t) { for (var r = [], n = 1; n < arguments.length; n++)r.push(arguments[n]); var s = t === "error", o = this._events; if (o !== void 0) s = s && o.error === void 0; else if (!s) return !1; if (s) { var a; if (r.length > 0 && (a = r[0]), a instanceof Error) throw a; var c = new Error("Unhandled error." + (a ? " (" + a.message + ")" : "")); throw c.context = a, c } var l = o[t]; if (l === void 0) return !1; if (typeof l == "function") x_(l, this, r); else for (var p = l.length, d = R2(l, p), n = 0; n < p; ++n)x_(d[n], this, r); return !0 }; function w2(e, t, r, n) { var s, o, a; if (Cm(r), o = e._events, o === void 0 ? (o = e._events = Object.create(null), e._eventsCount = 0) : (o.newListener !== void 0 && (e.emit("newListener", t, r.listener ? r.listener : r), o = e._events), a = o[t]), a === void 0) a = o[t] = r, ++e._eventsCount; else if (typeof a == "function" ? a = o[t] = n ? [r, a] : [a, r] : n ? a.unshift(r) : a.push(r), s = _2(e), s > 0 && a.length > s && !a.warned) { a.warned = !0; var c = new Error("Possible EventEmitter memory leak detected. " + a.length + " " + String(t) + " listeners added. Use emitter.setMaxListeners() to increase limit"); c.name = "MaxListenersExceededWarning", c.emitter = e, c.type = t, c.count = a.length, wM(c) } return e } Cn.prototype.addListener = function (t, r) { return w2(this, t, r, !1) }; Cn.prototype.on = Cn.prototype.addListener; Cn.prototype.prependListener = function (t, r) { return w2(this, t, r, !0) }; function SM() { if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments) } function S2(e, t, r) { var n = { fired: !1, wrapFn: void 0, target: e, type: t, listener: r }, s = SM.bind(n); return s.listener = r, n.wrapFn = s, s } Cn.prototype.once = function (t, r) { return Cm(r), this.on(t, S2(this, t, r)), this }; Cn.prototype.prependOnceListener = function (t, r) { return Cm(r), this.prependListener(t, S2(this, t, r)), this }; Cn.prototype.removeListener = function (t, r) { var n, s, o, a, c; if (Cm(r), s = this._events, s === void 0) return this; if (n = s[t], n === void 0) return this; if (n === r || n.listener === r) --this._eventsCount === 0 ? this._events = Object.create(null) : (delete s[t], s.removeListener && this.emit("removeListener", t, n.listener || r)); else if (typeof n != "function") { for (o = -1, a = n.length - 1; a >= 0; a--)if (n[a] === r || n[a].listener === r) { c = n[a].listener, o = a; break } if (o < 0) return this; o === 0 ? n.shift() : EM(n, o), n.length === 1 && (s[t] = n[0]), s.removeListener !== void 0 && this.emit("removeListener", t, c || r) } return this }; Cn.prototype.off = Cn.prototype.removeListener; Cn.prototype.removeAllListeners = function (t) { var r, n, s; if (n = this._events, n === void 0) return this; if (n.removeListener === void 0) return arguments.length === 0 ? (this._events = Object.create(null), this._eventsCount = 0) : n[t] !== void 0 && (--this._eventsCount === 0 ? this._events = Object.create(null) : delete n[t]), this; if (arguments.length === 0) { var o = Object.keys(n), a; for (s = 0; s < o.length; ++s)a = o[s], a !== "removeListener" && this.removeAllListeners(a); return this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0, this } if (r = n[t], typeof r == "function") this.removeListener(t, r); else if (r !== void 0) for (s = r.length - 1; s >= 0; s--)this.removeListener(t, r[s]); return this }; function E2(e, t, r) { var n = e._events; if (n === void 0) return []; var s = n[t]; return s === void 0 ? [] : typeof s == "function" ? r ? [s.listener || s] : [s] : r ? CM(s) : R2(s, s.length) } Cn.prototype.listeners = function (t) { return E2(this, t, !0) }; Cn.prototype.rawListeners = function (t) { return E2(this, t, !1) }; Cn.listenerCount = function (e, t) { return typeof e.listenerCount == "function" ? e.listenerCount(t) : C2.call(e, t) }; Cn.prototype.listenerCount = C2; function C2(e) { var t = this._events; if (t !== void 0) { var r = t[e]; if (typeof r == "function") return 1; if (r !== void 0) return r.length } return 0 } Cn.prototype.eventNames = function () { return this._eventsCount > 0 ? lf(this._events) : [] }; function R2(e, t) { for (var r = new Array(t), n = 0; n < t; ++n)r[n] = e[n]; return r } function EM(e, t) { for (; t + 1 < e.length; t++)e[t] = e[t + 1]; e.pop() } function CM(e) { for (var t = new Array(e.length), r = 0; r < t.length; ++r)t[r] = e[r].listener || e[r]; return t } function RM(e, t) { return new Promise(function (r, n) { function s(a) { e.removeListener(t, o), n(a) } function o() { typeof e.removeListener == "function" && e.removeListener("error", s), r([].slice.call(arguments)) } k2(e, t, o, { once: !0 }), t !== "error" && kM(e, s, { once: !0 }) }) } function kM(e, t, r) { typeof e.on == "function" && k2(e, "error", t, r) } function k2(e, t, r, n) { if (typeof e.on == "function") n.once ? e.once(t, r) : e.on(t, r); else if (typeof e.addEventListener == "function") e.addEventListener(t, function s(o) { n.once && e.removeEventListener(t, s), r(o) }); else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof e) } var TM = nb.exports; const AM = C_(TM); var T2 = { exports: {} }; (function (e, t) {
    (function (n, s) { e.exports = s() })(self, () => (() => {
        var r = {
            11(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Chrome74 = void 0; const p = l(7363), d = l(2994), f = l(3953), h = l(8046), P = l(4893), b = l(3303), u = l(5544), g = l(5938), S = l(4256), R = l(1305), y = new d.Logger("Chrome74"), v = "Chrome74", D = { OS: 1024, MIS: 1024 }; class M extends f.EnhancedEventEmitter { constructor({ direction: E, iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H, iceServers: V, iceTransportPolicy: ee, additionalSettings: K, getSendExtendedRtpCapabilities: N }) { super(); ve(this, "_closed", !1); ve(this, "_direction"); ve(this, "_remoteSdp"); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_forcedLocalDtlsRole"); ve(this, "_pc"); ve(this, "_mapMidTransceiver", new Map); ve(this, "_sendStream", new MediaStream); ve(this, "_hasDataChannelMediaSection", !1); ve(this, "_nextSendSctpStreamId", 0); ve(this, "_transportReady", !1); ve(this, "onIceGatheringStateChange", () => { this.emit("@icegatheringstatechange", this._pc.iceGatheringState) }); ve(this, "onIceCandidateError", E => { this.emit("@icecandidateerror", E) }); ve(this, "onConnectionStateChange", () => { this.emit("@connectionstatechange", this._pc.connectionState) }); ve(this, "onIceConnectionStateChange", () => { switch (this._pc.iceConnectionState) { case "checking": { this.emit("@connectionstatechange", "connecting"); break } case "connected": case "completed": { this.emit("@connectionstatechange", "connected"); break } case "failed": { this.emit("@connectionstatechange", "failed"); break } case "disconnected": { this.emit("@connectionstatechange", "disconnected"); break } case "closed": { this.emit("@connectionstatechange", "closed"); break } } }); y.debug("constructor()"), this._direction = E, this._remoteSdp = new R.RemoteSdp({ iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H }), this._getSendExtendedRtpCapabilities = N, L.role && L.role !== "auto" && (this._forcedLocalDtlsRole = L.role === "server" ? "client" : "server"), this._pc = new RTCPeerConnection({ iceServers: V ?? [], iceTransportPolicy: ee ?? "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require", ...K }), this._pc.addEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.addEventListener("icecandidateerror", this.onIceCandidateError), this._pc.connectionState ? this._pc.addEventListener("connectionstatechange", this.onConnectionStateChange) : (y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"), this._pc.addEventListener("iceconnectionstatechange", this.onIceConnectionStateChange)) } static createFactory() { return { name: v, factory: E => new M(E), getNativeRtpCapabilities: async () => { y.debug("getNativeRtpCapabilities()"); let E = new RTCPeerConnection({ iceServers: [], iceTransportPolicy: "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require" }); try { E.addTransceiver("audio"), E.addTransceiver("video"); const _ = await E.createOffer(); try { E.close() } catch { } E = void 0; const k = p.parse(_.sdp); return M.getLocalRtpCapabilities(k) } catch (_) { try { E == null || E.close() } catch { } throw E = void 0, _ } }, getNativeSctpCapabilities: async () => (y.debug("getNativeSctpCapabilities()"), { numStreams: D }) } } static getLocalRtpCapabilities(E) { const _ = u.extractRtpCapabilities({ sdpObject: E }); return h.validateAndNormalizeRtpCapabilities(_), S.addNackSupportForOpus(_), _ } get name() { return v } close() { if (y.debug("close()"), !this._closed) { this._closed = !0; try { this._pc.close() } catch { } this._pc.removeEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.removeEventListener("icecandidateerror", this.onIceCandidateError), this._pc.removeEventListener("connectionstatechange", this.onConnectionStateChange), this._pc.removeEventListener("iceconnectionstatechange", this.onIceConnectionStateChange), this.emit("@close"), super.close() } } async updateIceServers(E) { this.assertNotClosed(), y.debug("updateIceServers()"); const _ = this._pc.getConfiguration(); _.iceServers = E, this._pc.setConfiguration(_) } async restartIce(E) { if (this.assertNotClosed(), y.debug("restartIce()"), this._remoteSdp.updateIceParameters(E), !!this._transportReady) if (this._direction === "send") { const _ = await this._pc.createOffer({ iceRestart: !0 }); y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]", _), await this._pc.setLocalDescription(_); const k = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]", k), await this._pc.setRemoteDescription(k) } else { const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } } async getTransportStats() { return this.assertNotClosed(), this._pc.getStats() } async send({ track: E, encodings: _, codecOptions: k, codec: L }) { this.assertNotClosed(), this.assertSendDirection(), y.debug("send() [kind:%s, track.id:%s]", E.kind, E.id), _ && _.length > 1 && _.forEach((ye, se) => { ye.rid = `r${se}` }); const H = this._remoteSdp.getNextMediaSectionIdx(), V = this._pc.addTransceiver(E, { direction: "sendonly", streams: [this._sendStream], sendEncodings: _ }); let ee = await this._pc.createOffer(), K = p.parse(ee.sdp); K.extmapAllowMixed && this._remoteSdp.setSessionExtmapAllowMixed(); const N = M.getLocalRtpCapabilities(K), B = this._getSendExtendedRtpCapabilities(N), Q = h.getSendingRtpParameters(E.kind, B); Q.codecs = h.reduceCodecs(Q.codecs, L); const Z = h.getSendingRemoteRtpParameters(E.kind, B); Z.codecs = h.reduceCodecs(Z.codecs, L), this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: K }); let le = !1; const X = (0, b.parse)((_ ?? [{}])[0].scalabilityMode); let ce; _ && _.length === 1 && X.spatialLayers > 1 && Q.codecs[0].mimeType.toLowerCase() === "video/vp9" && (y.debug("send() | enabling legacy simulcast for VP9 SVC"), le = !0, K = p.parse(ee.sdp), ce = K.media[H.idx], g.addLegacySimulcast({ offerMediaObject: ce, numStreams: X.spatialLayers }), ee = { type: "offer", sdp: p.write(K) }), y.debug("send() | calling pc.setLocalDescription() [offer:%o]", ee), await this._pc.setLocalDescription(ee); const he = V.mid; if (Q.mid = he, K = p.parse(this._pc.localDescription.sdp), ce = K.media[H.idx], Q.rtcp.cname = u.getCname({ offerMediaObject: ce }), !_) Q.encodings = g.getRtpEncodings({ offerMediaObject: ce }); else if (_.length === 1) { let ye = g.getRtpEncodings({ offerMediaObject: ce }); Object.assign(ye[0], _[0]), le && (ye = [ye[0]]), Q.encodings = ye } else Q.encodings = _; if (Q.encodings.length > 1 && (Q.codecs[0].mimeType.toLowerCase() === "video/vp8" || Q.codecs[0].mimeType.toLowerCase() === "video/h264")) for (const ye of Q.encodings) ye.scalabilityMode ? ye.scalabilityMode = `L1T${X.temporalLayers}` : ye.scalabilityMode = "L1T3"; this._remoteSdp.send({ offerMediaObject: ce, reuseMid: H.reuseMid, offerRtpParameters: Q, answerRtpParameters: Z, codecOptions: k }); const ue = { type: "answer", sdp: this._remoteSdp.getSdp() }; return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]", ue), await this._pc.setRemoteDescription(ue), this._mapMidTransceiver.set(he, V), { localId: he, rtpParameters: Q, rtpSender: V.sender } } async stopSending(E) { if (this.assertSendDirection(), y.debug("stopSending() [localId:%s]", E), this._closed) return; const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); if (_.sender.replaceTrack(null), this._pc.removeTrack(_.sender), this._remoteSdp.closeMediaSection(_.mid)) try { _.stop() } catch { } const L = await this._pc.createOffer(); y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]", L), await this._pc.setLocalDescription(L); const H = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]", H), await this._pc.setRemoteDescription(H), this._mapMidTransceiver.delete(E) } async pauseSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("pauseSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "inactive", this._remoteSdp.pauseMediaSection(E); const k = await this._pc.createOffer(); y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async resumeSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("resumeSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (this._remoteSdp.resumeSendingMediaSection(E), !_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "sendonly"; const k = await this._pc.createOffer(); y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async replaceTrack(E, _) { this.assertNotClosed(), this.assertSendDirection(), _ ? y.debug("replaceTrack() [localId:%s, track.id:%s]", E, _.id) : y.debug("replaceTrack() [localId:%s, no track]", E); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); await k.sender.replaceTrack(_) } async setMaxSpatialLayer(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { K <= _ ? ee.active = !0 : ee.active = !1 }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async setRtpEncodingParameters(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setRtpEncodingParameters() [localId:%s, params:%o]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { L.encodings[K] = { ...ee, ..._ } }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async getSenderStats(E) { this.assertNotClosed(), this.assertSendDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.sender.getStats() } async sendDataChannel({ ordered: E, maxPacketLifeTime: _, maxRetransmits: k, label: L, protocol: H }) { this.assertNotClosed(), this.assertSendDirection(); const V = { negotiated: !0, id: this._nextSendSctpStreamId, ordered: E, maxPacketLifeTime: _, maxRetransmits: k, protocol: H }; y.debug("sendDataChannel() [options:%o]", V); const ee = this._pc.createDataChannel(L, V); if (this._nextSendSctpStreamId = ++this._nextSendSctpStreamId % D.MIS, !this._hasDataChannelMediaSection) { const N = await this._pc.createOffer(), B = p.parse(N.sdp), Q = B.media.find(le => le.type === "application"); this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: B }), y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]", N), await this._pc.setLocalDescription(N), this._remoteSdp.sendSctpAssociation({ offerMediaObject: Q }); const Z = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Z), await this._pc.setRemoteDescription(Z), this._hasDataChannelMediaSection = !0 } const K = { streamId: V.id, ordered: V.ordered, maxPacketLifeTime: V.maxPacketLifeTime, maxRetransmits: V.maxRetransmits }; return { dataChannel: ee, sctpStreamParameters: K } } async receive(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = [], k = new Map; for (const ee of E) { const { trackId: K, kind: N, rtpParameters: B, streamId: Q } = ee; y.debug("receive() [trackId:%s, kind:%s]", K, N); const Z = B.mid ?? String(this._mapMidTransceiver.size); k.set(K, Z), this._remoteSdp.receive({ mid: Z, kind: N, offerRtpParameters: B, streamId: Q ?? B.rtcp.cname, trackId: K }) } const L = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]", L), await this._pc.setRemoteDescription(L); let H = await this._pc.createAnswer(); const V = p.parse(H.sdp); for (const ee of E) { const { trackId: K, rtpParameters: N } = ee, B = k.get(K), Q = V.media.find(Z => String(Z.mid) === B); u.applyCodecParameters({ offerRtpParameters: N, answerMediaObject: Q }) } H = { type: "answer", sdp: p.write(V) }, this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: V }), y.debug("receive() | calling pc.setLocalDescription() [answer:%o]", H), await this._pc.setLocalDescription(H); for (const ee of E) { const { trackId: K } = ee, N = k.get(K), B = this._pc.getTransceivers().find(Q => Q.mid === N); if (B) this._mapMidTransceiver.set(N, B), _.push({ localId: N, track: B.receiver.track, rtpReceiver: B.receiver }); else throw new Error("new RTCRtpTransceiver not found") } return _ } async stopReceiving(E) { if (this.assertRecvDirection(), this._closed) return; for (const L of E) { y.debug("stopReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); this._remoteSdp.closeMediaSection(H.mid) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k); for (const L of E) this._mapMidTransceiver.delete(L) } async pauseReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("pauseReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "inactive", this._remoteSdp.pauseMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async resumeReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("resumeReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "recvonly", this._remoteSdp.resumeReceivingMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async getReceiverStats(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.receiver.getStats() } async receiveDataChannel({ sctpStreamParameters: E, label: _, protocol: k }) { this.assertNotClosed(), this.assertRecvDirection(); const { streamId: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee } = E, K = { negotiated: !0, id: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee, protocol: k }; y.debug("receiveDataChannel() [options:%o]", K); const N = this._pc.createDataChannel(_, K); if (!this._hasDataChannelMediaSection) { this._remoteSdp.receiveSctpAssociation(); const B = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]", B), await this._pc.setRemoteDescription(B); const Q = await this._pc.createAnswer(); if (!this._transportReady) { const Z = p.parse(Q.sdp); await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: Z }) } y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Q), await this._pc.setLocalDescription(Q), this._hasDataChannelMediaSection = !0 } return { dataChannel: N } } async setupTransport({ localDtlsRole: E, localSdpObject: _ }) { _ || (_ = p.parse(this._pc.localDescription.sdp)); const k = u.extractDtlsParameters({ sdpObject: _ }); k.role = E, this._remoteSdp.updateDtlsRole(E === "client" ? "server" : "client"), await new Promise((L, H) => { this.safeEmit("@connect", { dtlsParameters: k }, L, H) }), this._transportReady = !0 } assertNotClosed() { if (this._closed) throw new P.InvalidStateError("method called in a closed handler") } assertSendDirection() { if (this._direction !== "send") throw new Error('method can just be called for handlers with "send" direction') } assertRecvDirection() { if (this._direction !== "recv") throw new Error('method can just be called for handlers with "recv" direction') } } c.Chrome74 = M }, 19(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(3009), l(1025)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.Base, P = f.WordArray, b = d.algo, u = b.SHA256, g = b.HMAC, S = b.PBKDF2 = h.extend({ cfg: h.extend({ keySize: 128 / 32, hasher: u, iterations: 25e4 }), init: function (R) { this.cfg = this.cfg.extend(R) }, compute: function (R, y) { for (var v = this.cfg, D = g.create(v.hasher, R), M = P.create(), W = P.create([1]), I = M.words, E = W.words, _ = v.keySize, k = v.iterations; I.length < _;) { var L = D.update(y).finalize(W); D.reset(); for (var H = L.words, V = H.length, ee = L, K = 1; K < k; K++) { ee = D.finalize(ee), D.reset(); for (var N = ee.words, B = 0; B < V; B++)H[B] ^= N[B] } M.concat(L), E[0]++ } return M.sigBytes = _ * 4, M } }); d.PBKDF2 = function (R, y, v) { return S.create(v).compute(R, y) } }(), p.PBKDF2 }) }, 25(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return function (d) { var f = p, h = f.lib, P = h.CipherParams, b = f.enc, u = b.Hex, g = f.format; g.Hex = { stringify: function (S) { return S.ciphertext.toString(u) }, parse: function (S) { var R = u.parse(S); return P.create({ ciphertext: R }) } } }(), p.format.Hex }) }, 76(a, c, l) { c.s$ = c.pF = void 0, l(7833).default, l(8057); var d = l(6004); Object.defineProperty(c, "pF", { enumerable: !0, get: function () { return d.Device } }); var f = l(3303); Object.defineProperty(c, "s$", { enumerable: !0, get: function () { return f.parse } }), l(8046), l(3953), l(2731), l(5248) }, 296(a, c, l) {
                l.d(c, { A: () => P }); function p(b) { if (Array.isArray(b)) return b } function d(b, u) { var g = b == null ? null : typeof Symbol < "u" && b[Symbol.iterator] || b["@@iterator"]; if (g != null) { var S, R, y, v, D = [], M = !0, W = !1; try { if (y = (g = g.call(b)).next, u === 0) { if (Object(g) !== g) return; M = !1 } else for (; !(M = (S = y.call(g)).done) && (D.push(S.value), D.length !== u); M = !0); } catch (I) { W = !0, R = I } finally { try { if (!M && g.return != null && (v = g.return(), Object(v) !== v)) return } finally { if (W) throw R } } return D } } var f = l(7800); function h() {
                    throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                } function P(b, u) { return p(b) || d(b, u) || (0, f.A)(b, u) || h() }
            }, 328(a, c, l) { l(8624), a.exports = self.fetch.bind(self) }, 388(a, c, l) { l.d(c, { A: () => f }); var p = l(2284); function d(h) { if (h === void 0) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return h } function f(h, P) { if (P && ((0, p.A)(P) == "object" || typeof P == "function")) return P; if (P !== void 0) throw new TypeError("Derived constructors may only return object or undefined"); return d(h) } }, 467(a, c, l) { l.d(c, { A: () => d }); function p(f, h, P, b, u, g, S) { try { var R = f[g](S), y = R.value } catch (v) { return void P(v) } R.done ? h(y) : Promise.resolve(y).then(b, u) } function d(f) { return function () { var h = this, P = arguments; return new Promise(function (b, u) { var g = f.apply(h, P); function S(y) { p(g, b, u, S, R, "next", y) } function R(y) { p(g, b, u, S, R, "throw", y) } S(void 0) }) } } }, 477() { }, 482(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.pad.Iso97971 = { pad: function (d, f) { d.concat(p.lib.WordArray.create([2147483648], 1)), p.pad.ZeroPadding.pad(d, f) }, unpad: function (d) { p.pad.ZeroPadding.unpad(d), d.sigBytes-- } }, p.pad.Iso97971 }) }, 579(a, c, l) { var p = l(3738).default; function d(f) { if (f != null) { var h = f[typeof Symbol == "function" && Symbol.iterator || "@@iterator"], P = 0; if (h) return h.call(f); if (typeof f.next == "function") return f; if (!isNaN(f.length)) return { next: function () { return f && P >= f.length && (f = void 0), { value: f && f[P++], done: !f } } } } throw new TypeError(p(f) + " is not iterable") } a.exports = d, a.exports.__esModule = !0, a.exports.default = a.exports }, 736(a, c, l) { function p(d) { h.debug = h, h.default = h, h.coerce = R, h.disable = g, h.enable = b, h.enabled = S, h.humanize = l(6585), h.destroy = y, Object.keys(d).forEach(v => { h[v] = d[v] }), h.names = [], h.skips = [], h.formatters = {}; function f(v) { let D = 0; for (let M = 0; M < v.length; M++)D = (D << 5) - D + v.charCodeAt(M), D |= 0; return h.colors[Math.abs(D) % h.colors.length] } h.selectColor = f; function h(v) { let D, M = null, W, I; function E(..._) { if (!E.enabled) return; const k = E, L = Number(new Date), H = L - (D || L); k.diff = H, k.prev = D, k.curr = L, D = L, _[0] = h.coerce(_[0]), typeof _[0] != "string" && _.unshift("%O"); let V = 0; _[0] = _[0].replace(/%([a-zA-Z%])/g, (K, N) => { if (K === "%%") return "%"; V++; const B = h.formatters[N]; if (typeof B == "function") { const Q = _[V]; K = B.call(k, Q), _.splice(V, 1), V-- } return K }), h.formatArgs.call(k, _), (k.log || h.log).apply(k, _) } return E.namespace = v, E.useColors = h.useColors(), E.color = h.selectColor(v), E.extend = P, E.destroy = h.destroy, Object.defineProperty(E, "enabled", { enumerable: !0, configurable: !1, get: () => M !== null ? M : (W !== h.namespaces && (W = h.namespaces, I = h.enabled(v)), I), set: _ => { M = _ } }), typeof h.init == "function" && h.init(E), E } function P(v, D) { const M = h(this.namespace + (typeof D > "u" ? ":" : D) + v); return M.log = this.log, M } function b(v) { h.save(v), h.namespaces = v, h.names = [], h.skips = []; const D = (typeof v == "string" ? v : "").trim().replace(/\s+/g, ",").split(",").filter(Boolean); for (const M of D) M[0] === "-" ? h.skips.push(M.slice(1)) : h.names.push(M) } function u(v, D) { let M = 0, W = 0, I = -1, E = 0; for (; M < v.length;)if (W < D.length && (D[W] === v[M] || D[W] === "*")) D[W] === "*" ? (I = W, E = M, W++) : (M++, W++); else if (I !== -1) W = I + 1, E++, M = E; else return !1; for (; W < D.length && D[W] === "*";)W++; return W === D.length } function g() { const v = [...h.names, ...h.skips.map(D => "-" + D)].join(","); return h.enable(""), v } function S(v) { for (const D of h.skips) if (u(v, D)) return !1; for (const D of h.names) if (u(v, D)) return !0; return !1 } function R(v) { return v instanceof Error ? v.stack || v.message : v } function y() { console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.") } return h.enable(h.load()), h } a.exports = p }, 754(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.WordArray, P = d.enc; P.Base64 = { stringify: function (u) { var g = u.words, S = u.sigBytes, R = this._map; u.clamp(); for (var y = [], v = 0; v < S; v += 3)for (var D = g[v >>> 2] >>> 24 - v % 4 * 8 & 255, M = g[v + 1 >>> 2] >>> 24 - (v + 1) % 4 * 8 & 255, W = g[v + 2 >>> 2] >>> 24 - (v + 2) % 4 * 8 & 255, I = D << 16 | M << 8 | W, E = 0; E < 4 && v + E * .75 < S; E++)y.push(R.charAt(I >>> 6 * (3 - E) & 63)); var _ = R.charAt(64); if (_) for (; y.length % 4;)y.push(_); return y.join("") }, parse: function (u) { var g = u.length, S = this._map, R = this._reverseMap; if (!R) { R = this._reverseMap = []; for (var y = 0; y < S.length; y++)R[S.charCodeAt(y)] = y } var v = S.charAt(64); if (v) { var D = u.indexOf(v); D !== -1 && (g = D) } return b(u, g, R) }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" }; function b(u, g, S) { for (var R = [], y = 0, v = 0; v < g; v++)if (v % 4) { var D = S[u.charCodeAt(v - 1)] << v % 4 * 2, M = S[u.charCodeAt(v)] >>> 6 - v % 4 * 2, W = D | M; R[y >>> 2] |= W << 24 - y % 4 * 8, y++ } return h.create(R, y) } }(), p.enc.Base64 }) }, 816(a, c, l) { l.d(c, { A: () => f }); var p = l(2284); function d(h, P) { if ((0, p.A)(h) != "object" || !h) return h; var b = h[Symbol.toPrimitive]; if (b !== void 0) { var u = b.call(h, P || "default"); if ((0, p.A)(u) != "object") return u; throw new TypeError("@@toPrimitive must return a primitive value.") } return (P === "string" ? String : Number)(h) } function f(h) { var P = d(h, "string"); return (0, p.A)(P) == "symbol" ? P : P + "" } }, 867(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.ReactNative106 = void 0; const p = l(7363), d = l(3953), f = l(2994), h = l(8046), P = l(4893), b = l(3303), u = l(1305), g = l(5544), S = l(5938), R = l(4256), y = new f.Logger("ReactNative106"), v = "ReactNative106", D = { OS: 1024, MIS: 1024 }; class M extends d.EnhancedEventEmitter { constructor({ direction: E, iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H, iceServers: V, iceTransportPolicy: ee, additionalSettings: K, getSendExtendedRtpCapabilities: N }) { super(); ve(this, "_closed", !1); ve(this, "_direction"); ve(this, "_remoteSdp"); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_forcedLocalDtlsRole"); ve(this, "_pc"); ve(this, "_mapMidTransceiver", new Map); ve(this, "_sendStream", new MediaStream); ve(this, "_hasDataChannelMediaSection", !1); ve(this, "_nextSendSctpStreamId", 0); ve(this, "_transportReady", !1); ve(this, "onIceGatheringStateChange", () => { this.emit("@icegatheringstatechange", this._pc.iceGatheringState) }); ve(this, "onIceCandidateError", E => { this.emit("@icecandidateerror", E) }); ve(this, "onConnectionStateChange", () => { this.emit("@connectionstatechange", this._pc.connectionState) }); ve(this, "onIceConnectionStateChange", () => { switch (this._pc.iceConnectionState) { case "checking": { this.emit("@connectionstatechange", "connecting"); break } case "connected": case "completed": { this.emit("@connectionstatechange", "connected"); break } case "failed": { this.emit("@connectionstatechange", "failed"); break } case "disconnected": { this.emit("@connectionstatechange", "disconnected"); break } case "closed": { this.emit("@connectionstatechange", "closed"); break } } }); y.debug("constructor()"), this._direction = E, this._remoteSdp = new u.RemoteSdp({ iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H }), this._getSendExtendedRtpCapabilities = N, L.role && L.role !== "auto" && (this._forcedLocalDtlsRole = L.role === "server" ? "client" : "server"), this._pc = new RTCPeerConnection({ iceServers: V ?? [], iceTransportPolicy: ee ?? "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require", ...K }), this._pc.addEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.addEventListener("icecandidateerror", this.onIceCandidateError), this._pc.connectionState ? this._pc.addEventListener("connectionstatechange", this.onConnectionStateChange) : (y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"), this._pc.addEventListener("iceconnectionstatechange", this.onIceConnectionStateChange)) } static createFactory() { return { name: v, factory: E => new M(E), getNativeRtpCapabilities: async () => { y.debug("getNativeRtpCapabilities()"); let E = new RTCPeerConnection({ iceServers: [], iceTransportPolicy: "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require" }); try { E.addTransceiver("audio"), E.addTransceiver("video"); const _ = await E.createOffer(); try { E.close() } catch { } E = void 0; const k = p.parse(_.sdp); return M.getLocalRtpCapabilities(k) } catch (_) { try { E == null || E.close() } catch { } throw E = void 0, _ } }, getNativeSctpCapabilities: async () => (y.debug("getNativeSctpCapabilities()"), { numStreams: D }) } } static getLocalRtpCapabilities(E) { const _ = g.extractRtpCapabilities({ sdpObject: E }); return h.validateAndNormalizeRtpCapabilities(_), R.addNackSupportForOpus(_), _ } get name() { return v } close() { if (y.debug("close()"), !this._closed) { this._closed = !0, this._sendStream.release(!1); try { this._pc.close() } catch { } this._pc.removeEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.removeEventListener("icecandidateerror", this.onIceCandidateError), this._pc.removeEventListener("connectionstatechange", this.onConnectionStateChange), this._pc.removeEventListener("iceconnectionstatechange", this.onIceConnectionStateChange), this.emit("@close"), super.close() } } async updateIceServers(E) { this.assertNotClosed(), y.debug("updateIceServers()"); const _ = this._pc.getConfiguration(); _.iceServers = E, this._pc.setConfiguration(_) } async restartIce(E) { if (this.assertNotClosed(), y.debug("restartIce()"), this._remoteSdp.updateIceParameters(E), !!this._transportReady) if (this._direction === "send") { const _ = await this._pc.createOffer({ iceRestart: !0 }); y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]", _), await this._pc.setLocalDescription(_); const k = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]", k), await this._pc.setRemoteDescription(k) } else { const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } } async getTransportStats() { return this.assertNotClosed(), this._pc.getStats() } async send({ track: E, encodings: _, codecOptions: k, codec: L, onRtpSender: H }) { this.assertNotClosed(), this.assertSendDirection(), y.debug("send() [kind:%s, track.id:%s]", E.kind, E.id), _ && _.length > 1 && _.forEach((se, _e) => { se.rid = `r${_e}` }); const V = this._remoteSdp.getNextMediaSectionIdx(), ee = this._pc.addTransceiver(E, { direction: "sendonly", streams: [this._sendStream], sendEncodings: _ }); H && H(ee.sender); let K = await this._pc.createOffer(), N = p.parse(K.sdp); N.extmapAllowMixed && this._remoteSdp.setSessionExtmapAllowMixed(); const B = M.getLocalRtpCapabilities(N), Q = this._getSendExtendedRtpCapabilities(B), Z = h.getSendingRtpParameters(E.kind, Q); Z.codecs = h.reduceCodecs(Z.codecs, L); const le = h.getSendingRemoteRtpParameters(E.kind, Q); le.codecs = h.reduceCodecs(le.codecs, L), this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: N }); let X = !1; const ce = (0, b.parse)((_ ?? [{}])[0].scalabilityMode); let he; _ && _.length === 1 && ce.spatialLayers > 1 && Z.codecs[0].mimeType.toLowerCase() === "video/vp9" && (y.debug("send() | enabling legacy simulcast for VP9 SVC"), X = !0, N = p.parse(K.sdp), he = N.media[V.idx], S.addLegacySimulcast({ offerMediaObject: he, numStreams: ce.spatialLayers }), K = { type: "offer", sdp: p.write(N) }), y.debug("send() | calling pc.setLocalDescription() [offer:%o]", K), await this._pc.setLocalDescription(K); let ue = ee.mid ?? void 0; if (ue || y.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"), Z.mid = ue, N = p.parse(this._pc.localDescription.sdp), he = N.media[V.idx], Z.rtcp.cname = g.getCname({ offerMediaObject: he }), !_) Z.encodings = S.getRtpEncodings({ offerMediaObject: he }); else if (_.length === 1) { let se = S.getRtpEncodings({ offerMediaObject: he }); Object.assign(se[0], _[0]), X && (se = [se[0]]), Z.encodings = se } else Z.encodings = _; if (Z.encodings.length > 1 && (Z.codecs[0].mimeType.toLowerCase() === "video/vp8" || Z.codecs[0].mimeType.toLowerCase() === "video/h264")) for (const se of Z.encodings) se.scalabilityMode ? se.scalabilityMode = `L1T${ce.temporalLayers}` : se.scalabilityMode = "L1T3"; this._remoteSdp.send({ offerMediaObject: he, reuseMid: V.reuseMid, offerRtpParameters: Z, answerRtpParameters: le, codecOptions: k }); const ye = { type: "answer", sdp: this._remoteSdp.getSdp() }; return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]", ye), await this._pc.setRemoteDescription(ye), ue || (ue = ee.mid, Z.mid = ue), this._mapMidTransceiver.set(ue, ee), { localId: ue, rtpParameters: Z, rtpSender: ee.sender } } async stopSending(E) { if (this.assertSendDirection(), this._closed) return; y.debug("stopSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); if (_.sender.replaceTrack(null), this._pc.removeTrack(_.sender), this._remoteSdp.closeMediaSection(_.mid)) try { _.stop() } catch { } const L = await this._pc.createOffer(); y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]", L), await this._pc.setLocalDescription(L); const H = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]", H), await this._pc.setRemoteDescription(H), this._mapMidTransceiver.delete(E) } async pauseSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("pauseSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "inactive", this._remoteSdp.pauseMediaSection(E); const k = await this._pc.createOffer(); y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async resumeSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("resumeSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (this._remoteSdp.resumeSendingMediaSection(E), !_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "sendonly"; const k = await this._pc.createOffer(); y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async replaceTrack(E, _) { this.assertNotClosed(), this.assertSendDirection(), _ ? y.debug("replaceTrack() [localId:%s, track.id:%s]", E, _.id) : y.debug("replaceTrack() [localId:%s, no track]", E); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); await k.sender.replaceTrack(_) } async setMaxSpatialLayer(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { K <= _ ? ee.active = !0 : ee.active = !1 }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async setRtpEncodingParameters(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setRtpEncodingParameters() [localId:%s, params:%o]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { L.encodings[K] = { ...ee, ..._ } }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async getSenderStats(E) { this.assertNotClosed(), this.assertSendDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.sender.getStats() } async sendDataChannel({ ordered: E, maxPacketLifeTime: _, maxRetransmits: k, label: L, protocol: H }) { this.assertNotClosed(), this.assertSendDirection(); const V = { negotiated: !0, id: this._nextSendSctpStreamId, ordered: E, maxPacketLifeTime: _, maxRetransmits: k, protocol: H }; y.debug("sendDataChannel() [options:%o]", V); const ee = this._pc.createDataChannel(L, V); if (this._nextSendSctpStreamId = ++this._nextSendSctpStreamId % D.MIS, !this._hasDataChannelMediaSection) { const N = await this._pc.createOffer(), B = p.parse(N.sdp), Q = B.media.find(le => le.type === "application"); this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: B }), y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]", N), await this._pc.setLocalDescription(N), this._remoteSdp.sendSctpAssociation({ offerMediaObject: Q }); const Z = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Z), await this._pc.setRemoteDescription(Z), this._hasDataChannelMediaSection = !0 } const K = { streamId: V.id, ordered: V.ordered, maxPacketLifeTime: V.maxPacketLifeTime, maxRetransmits: V.maxRetransmits }; return { dataChannel: ee, sctpStreamParameters: K } } async receive(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = [], k = new Map; for (const ee of E) { const { trackId: K, kind: N, rtpParameters: B, streamId: Q } = ee; y.debug("receive() [trackId:%s, kind:%s]", K, N); const Z = B.mid ?? String(this._mapMidTransceiver.size); k.set(K, Z), this._remoteSdp.receive({ mid: Z, kind: N, offerRtpParameters: B, streamId: Q ?? B.rtcp.cname, trackId: K }) } const L = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]", L), await this._pc.setRemoteDescription(L); for (const ee of E) { const { trackId: K, onRtpReceiver: N } = ee; if (N) { const B = k.get(K), Q = this._pc.getTransceivers().find(Z => Z.mid === B); if (!Q) throw new Error("transceiver not found"); N(Q.receiver) } } let H = await this._pc.createAnswer(); const V = p.parse(H.sdp); for (const ee of E) { const { trackId: K, rtpParameters: N } = ee, B = k.get(K), Q = V.media.find(Z => String(Z.mid) === B); g.applyCodecParameters({ offerRtpParameters: N, answerMediaObject: Q }) } H = { type: "answer", sdp: p.write(V) }, this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: V }), y.debug("receive() | calling pc.setLocalDescription() [answer:%o]", H), await this._pc.setLocalDescription(H); for (const ee of E) { const { trackId: K } = ee, N = k.get(K), B = this._pc.getTransceivers().find(Q => Q.mid === N); if (B) this._mapMidTransceiver.set(N, B), _.push({ localId: N, track: B.receiver.track, rtpReceiver: B.receiver }); else throw new Error("new RTCRtpTransceiver not found") } return _ } async stopReceiving(E) { if (this.assertRecvDirection(), this._closed) return; for (const L of E) { y.debug("stopReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); this._remoteSdp.closeMediaSection(H.mid) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k); for (const L of E) this._mapMidTransceiver.delete(L) } async pauseReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("pauseReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "inactive", this._remoteSdp.pauseMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async resumeReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("resumeReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "recvonly", this._remoteSdp.resumeReceivingMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async getReceiverStats(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.receiver.getStats() } async receiveDataChannel({ sctpStreamParameters: E, label: _, protocol: k }) { this.assertNotClosed(), this.assertRecvDirection(); const { streamId: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee } = E, K = { negotiated: !0, id: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee, protocol: k }; y.debug("receiveDataChannel() [options:%o]", K); const N = this._pc.createDataChannel(_, K); if (!this._hasDataChannelMediaSection) { this._remoteSdp.receiveSctpAssociation(); const B = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]", B), await this._pc.setRemoteDescription(B); const Q = await this._pc.createAnswer(); if (!this._transportReady) { const Z = p.parse(Q.sdp); await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: Z }) } y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Q), await this._pc.setLocalDescription(Q), this._hasDataChannelMediaSection = !0 } return { dataChannel: N } } async setupTransport({ localDtlsRole: E, localSdpObject: _ }) { _ || (_ = p.parse(this._pc.localDescription.sdp)); const k = g.extractDtlsParameters({ sdpObject: _ }); k.role = E, this._remoteSdp.updateDtlsRole(E === "client" ? "server" : "client"), await new Promise((L, H) => { this.safeEmit("@connect", { dtlsParameters: k }, L, H) }), this._transportReady = !0 } assertNotClosed() { if (this._closed) throw new P.InvalidStateError("method called in a closed handler") } assertSendDirection() { if (this._direction !== "send") throw new Error('method can just be called for handlers with "send" direction') } assertRecvDirection() { if (this._direction !== "recv") throw new Error('method can just be called for handlers with "recv" direction') } } c.ReactNative106 = M }, 878(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.FakeEvent = void 0; class l { constructor(d, f = {}) { ve(this, "NONE", 0); ve(this, "CAPTURING_PHASE", 1); ve(this, "AT_TARGET", 2); ve(this, "BUBBLING_PHASE", 3); ve(this, "type"); ve(this, "bubbles"); ve(this, "cancelable"); ve(this, "defaultPrevented", !1); ve(this, "composed", !1); ve(this, "currentTarget", null); ve(this, "eventPhase", this.NONE); ve(this, "isTrusted", !0); ve(this, "target", null); ve(this, "timeStamp", 0); ve(this, "cancelBubble", !1); ve(this, "returnValue", !0); ve(this, "srcElement", null); this.type = d, this.bubbles = f.bubbles ?? !1, this.cancelable = f.cancelable ?? !1 } preventDefault() { this.cancelable && (this.defaultPrevented = !0) } stopPropagation() { } stopImmediatePropagation() { } composedPath() { return [] } initEvent(d, f, h) { } } c.FakeEvent = l }, 887(a, c, l) { var p = l(6993), d = l(1791); function f(h, P, b, u, g) { return new d(p().w(h, P, b, u), g || Promise) } a.exports = f, a.exports.__esModule = !0, a.exports.default = a.exports }, 955(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(754), l(4636), l(9506), l(7165)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.BlockCipher, P = d.algo, b = [], u = [], g = [], S = [], R = [], y = [], v = [], D = [], M = [], W = []; (function () { for (var _ = [], k = 0; k < 256; k++)k < 128 ? _[k] = k << 1 : _[k] = k << 1 ^ 283; for (var L = 0, H = 0, k = 0; k < 256; k++) { var V = H ^ H << 1 ^ H << 2 ^ H << 3 ^ H << 4; V = V >>> 8 ^ V & 255 ^ 99, b[L] = V, u[V] = L; var ee = _[L], K = _[ee], N = _[K], B = _[V] * 257 ^ V * 16843008; g[L] = B << 24 | B >>> 8, S[L] = B << 16 | B >>> 16, R[L] = B << 8 | B >>> 24, y[L] = B; var B = N * 16843009 ^ K * 65537 ^ ee * 257 ^ L * 16843008; v[V] = B << 24 | B >>> 8, D[V] = B << 16 | B >>> 16, M[V] = B << 8 | B >>> 24, W[V] = B, L ? (L = ee ^ _[_[_[N ^ ee]]], H ^= _[_[H]]) : L = H = 1 } })(); var I = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], E = P.AES = h.extend({ _doReset: function () { var _; if (!(this._nRounds && this._keyPriorReset === this._key)) { for (var k = this._keyPriorReset = this._key, L = k.words, H = k.sigBytes / 4, V = this._nRounds = H + 6, ee = (V + 1) * 4, K = this._keySchedule = [], N = 0; N < ee; N++)N < H ? K[N] = L[N] : (_ = K[N - 1], N % H ? H > 6 && N % H == 4 && (_ = b[_ >>> 24] << 24 | b[_ >>> 16 & 255] << 16 | b[_ >>> 8 & 255] << 8 | b[_ & 255]) : (_ = _ << 8 | _ >>> 24, _ = b[_ >>> 24] << 24 | b[_ >>> 16 & 255] << 16 | b[_ >>> 8 & 255] << 8 | b[_ & 255], _ ^= I[N / H | 0] << 24), K[N] = K[N - H] ^ _); for (var B = this._invKeySchedule = [], Q = 0; Q < ee; Q++) { var N = ee - Q; if (Q % 4) var _ = K[N]; else var _ = K[N - 4]; Q < 4 || N <= 4 ? B[Q] = _ : B[Q] = v[b[_ >>> 24]] ^ D[b[_ >>> 16 & 255]] ^ M[b[_ >>> 8 & 255]] ^ W[b[_ & 255]] } } }, encryptBlock: function (_, k) { this._doCryptBlock(_, k, this._keySchedule, g, S, R, y, b) }, decryptBlock: function (_, k) { var L = _[k + 1]; _[k + 1] = _[k + 3], _[k + 3] = L, this._doCryptBlock(_, k, this._invKeySchedule, v, D, M, W, u); var L = _[k + 1]; _[k + 1] = _[k + 3], _[k + 3] = L }, _doCryptBlock: function (_, k, L, H, V, ee, K, N) { for (var B = this._nRounds, Q = _[k] ^ L[0], Z = _[k + 1] ^ L[1], le = _[k + 2] ^ L[2], X = _[k + 3] ^ L[3], ce = 4, he = 1; he < B; he++) { var ue = H[Q >>> 24] ^ V[Z >>> 16 & 255] ^ ee[le >>> 8 & 255] ^ K[X & 255] ^ L[ce++], ye = H[Z >>> 24] ^ V[le >>> 16 & 255] ^ ee[X >>> 8 & 255] ^ K[Q & 255] ^ L[ce++], se = H[le >>> 24] ^ V[X >>> 16 & 255] ^ ee[Q >>> 8 & 255] ^ K[Z & 255] ^ L[ce++], _e = H[X >>> 24] ^ V[Q >>> 16 & 255] ^ ee[Z >>> 8 & 255] ^ K[le & 255] ^ L[ce++]; Q = ue, Z = ye, le = se, X = _e } var ue = (N[Q >>> 24] << 24 | N[Z >>> 16 & 255] << 16 | N[le >>> 8 & 255] << 8 | N[X & 255]) ^ L[ce++], ye = (N[Z >>> 24] << 24 | N[le >>> 16 & 255] << 16 | N[X >>> 8 & 255] << 8 | N[Q & 255]) ^ L[ce++], se = (N[le >>> 24] << 24 | N[X >>> 16 & 255] << 16 | N[Q >>> 8 & 255] << 8 | N[Z & 255]) ^ L[ce++], _e = (N[X >>> 24] << 24 | N[Q >>> 16 & 255] << 16 | N[Z >>> 8 & 255] << 8 | N[le & 255]) ^ L[ce++]; _[k] = ue, _[k + 1] = ye, _[k + 2] = se, _[k + 3] = _e }, keySize: 256 / 32 }); d.AES = h._createHelper(E) }(), p.AES }) }, 1025(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { (function () { var d = p, f = d.lib, h = f.Base, P = d.enc, b = P.Utf8, u = d.algo; u.HMAC = h.extend({ init: function (g, S) { g = this._hasher = new g.init, typeof S == "string" && (S = b.parse(S)); var R = g.blockSize, y = R * 4; S.sigBytes > y && (S = g.finalize(S)), S.clamp(); for (var v = this._oKey = S.clone(), D = this._iKey = S.clone(), M = v.words, W = D.words, I = 0; I < R; I++)M[I] ^= 1549556828, W[I] ^= 909522486; v.sigBytes = D.sigBytes = y, this.reset() }, reset: function () { var g = this._hasher; g.reset(), g.update(this._iKey) }, update: function (g) { return this._hasher.update(g), this }, finalize: function (g) { var S = this._hasher, R = S.finalize(g); S.reset(); var y = S.finalize(this._oKey.clone().concat(R)); return y } }) })() }) }, 1260(a, c, l) { l.d(c, { E: () => p, t: () => d }); var p = { WEBSOCKET_DISCONNECTED: 1001, REMOVE_PEER: 1002, REMOVE_PEER_VIEWER_MODE_CHANGED: 1003, REMOVE_PEER_MEDIA_RELAY_STOP: 1004, SWITCH_ROOM: 1005, ROOM_CLOSE: 1006, UNKNOWN: 1007, REMOVE_ALL: 1008, MEETING_END_API: 1009, REMOVE_PEER_API: 1010, DUPLICATE_PARTICIPANT: 1011, MANUAL_LEAVE_CALLED: 1101, WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED: 1102, JOIN_ROOM_FAILED: 1103, SWITCH_ROOM_FAILED: 1104 }, d = { WEBSOCKET_DISCONNECTED: { code: 1001, message: "Socket disconnected" }, REMOVE_PEER: { code: 1002, message: "Participant was removed from the meeting" }, REMOVE_PEER_VIEWER_MODE_CHANGED: { code: 1003, message: "Participant Removed because viewer mode was changed" }, REMOVE_PEER_MEDIA_RELAY_STOP: { code: 1004, message: "Participant Removed because media relay was stopped" }, SWITCH_ROOM: { code: 1005, message: "Participant switched to a different room" }, ROOM_CLOSE: { code: 1006, message: "The meeting has been closed" }, UNKNOWN: { code: 1007, message: "Participant disconnected due to an unknown reason" }, REMOVE_ALL: { code: 1008, message: "Remove All from the meeting" }, DUPLICATE_PARTICIPANT: { code: 1011, message: "Leaving meeting, since this participantId joined from another device." }, MEETING_END_API: { code: 1009, message: "Meeting Ended." }, REMOVE_PEER_API: { code: 1010, message: "Participant removed from the meeting" }, MANUAL_LEAVE_CALLED: { code: 1101, message: "Participant manually called the leave() method to exit the meeting" }, WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED: { code: 1102, message: "Meeting left after multiple failed websocket connection attempts." }, JOIN_ROOM_FAILED: { code: 1103, message: "Meeting left due to an error while joining the room." }, SWITCH_ROOM_FAILED: { code: 1104, message: "Meeting left due to an error while switching rooms." } } }, 1305(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.RemoteSdp = void 0; const p = l(7363), d = l(2994), f = l(3471), h = ["av1", "h264"], P = new d.Logger("RemoteSdp"); class b { constructor({ iceParameters: g, iceCandidates: S, dtlsParameters: R, sctpParameters: y, plainRtpParameters: v }) { ve(this, "_iceParameters"); ve(this, "_iceCandidates"); ve(this, "_dtlsParameters"); ve(this, "_sctpParameters"); ve(this, "_plainRtpParameters"); ve(this, "_mediaSections", []); ve(this, "_midToIndex", new Map); ve(this, "_firstMid"); ve(this, "_sdpObject"); if (this._iceParameters = g, this._iceCandidates = S, this._dtlsParameters = R, this._sctpParameters = y, this._plainRtpParameters = v, this._sdpObject = { version: 0, origin: { address: "0.0.0.0", ipVer: 4, netType: "IN", sessionId: "10000", sessionVersion: 0, username: "mediasoup-client" }, name: "-", timing: { start: 0, stop: 0 }, media: [] }, g != null && g.iceLite && (this._sdpObject.icelite = "ice-lite"), R) { this._sdpObject.msidSemantic = { semantic: "WMS", token: "*" }; const D = this._dtlsParameters.fingerprints.length; this._sdpObject.fingerprint = { type: R.fingerprints[D - 1].algorithm, hash: R.fingerprints[D - 1].value }, this._sdpObject.groups = [{ type: "BUNDLE", mids: "" }] } v && (this._sdpObject.origin.address = v.ip, this._sdpObject.origin.ipVer = v.ipVersion) } updateIceParameters(g) { P.debug("updateIceParameters() [iceParameters:%o]", g), this._iceParameters = g, this._sdpObject.icelite = g.iceLite ? "ice-lite" : void 0; for (const S of this._mediaSections) S.setIceParameters(g) } updateDtlsRole(g) { P.debug("updateDtlsRole() [role:%s]", g), this._dtlsParameters.role = g; for (const S of this._mediaSections) S.setDtlsRole(g) } setSessionExtmapAllowMixed() { P.debug("setSessionExtmapAllowMixed()"), this._sdpObject.extmapAllowMixed = "extmap-allow-mixed" } getNextMediaSectionIdx() { for (let g = 0; g < this._mediaSections.length; ++g) { const S = this._mediaSections[g]; if (S.closed) return { idx: g, reuseMid: S.mid } } return { idx: this._mediaSections.length } } send({ offerMediaObject: g, reuseMid: S, offerRtpParameters: R, answerRtpParameters: y, codecOptions: v }) { var I; const D = new f.AnswerMediaSection({ iceParameters: this._iceParameters, iceCandidates: this._iceCandidates, dtlsParameters: this._dtlsParameters, plainRtpParameters: this._plainRtpParameters, offerMediaObject: g, offerRtpParameters: R, answerRtpParameters: y, codecOptions: v }), M = D.getObject(); M.rtp.find(E => h.includes(E.codec.toLowerCase())) || (M.ext = (I = M.ext) == null ? void 0 : I.filter(E => E.uri !== "https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension")), S ? this._replaceMediaSection(D, S) : this._midToIndex.has(D.mid) ? this._replaceMediaSection(D) : this._addMediaSection(D) } receive({ mid: g, kind: S, offerRtpParameters: R, streamId: y, trackId: v }) { this.setSessionExtmapAllowMixed(); const D = new f.OfferMediaSection({ iceParameters: this._iceParameters, iceCandidates: this._iceCandidates, dtlsParameters: this._dtlsParameters, plainRtpParameters: this._plainRtpParameters, mid: g, kind: S, offerRtpParameters: R, streamId: y, trackId: v }), M = this._mediaSections.find(W => W.closed); M ? this._replaceMediaSection(D, M.mid) : this._addMediaSection(D) } pauseMediaSection(g) { this._findMediaSection(g).pause() } resumeSendingMediaSection(g) { this._findMediaSection(g).resume() } resumeReceivingMediaSection(g) { this._findMediaSection(g).resume() } disableMediaSection(g) { this._findMediaSection(g).disable() } closeMediaSection(g) { const S = this._findMediaSection(g); return g === this._firstMid ? (P.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]", g), this.disableMediaSection(g), !1) : (S.close(), this._regenerateBundleMids(), !0) } muxMediaSectionSimulcast(g, S) { const R = this._findMediaSection(g); R.muxSimulcastStreams(S), this._replaceMediaSection(R) } sendSctpAssociation({ offerMediaObject: g }) { const S = new f.AnswerMediaSection({ iceParameters: this._iceParameters, iceCandidates: this._iceCandidates, dtlsParameters: this._dtlsParameters, sctpParameters: this._sctpParameters, plainRtpParameters: this._plainRtpParameters, offerMediaObject: g }); this._addMediaSection(S) } receiveSctpAssociation() { const g = new f.OfferMediaSection({ iceParameters: this._iceParameters, iceCandidates: this._iceCandidates, dtlsParameters: this._dtlsParameters, sctpParameters: this._sctpParameters, plainRtpParameters: this._plainRtpParameters, mid: "datachannel", kind: "application" }); this._addMediaSection(g) } getSdp() { return this._sdpObject.origin.sessionVersion++, p.write(this._sdpObject) } _addMediaSection(g) { this._firstMid || (this._firstMid = g.mid), this._mediaSections.push(g), this._midToIndex.set(g.mid, this._mediaSections.length - 1), this._sdpObject.media.push(g.getObject()), this._regenerateBundleMids() } _replaceMediaSection(g, S) { if (typeof S == "string") { const R = this._midToIndex.get(S); if (R === void 0) throw new Error(`no media section found for reuseMid '${S}'`); const y = this._mediaSections[R]; this._mediaSections[R] = g, this._midToIndex.delete(y.mid), this._midToIndex.set(g.mid, R), this._sdpObject.media[R] = g.getObject(), this._regenerateBundleMids() } else { const R = this._midToIndex.get(g.mid); if (R === void 0) throw new Error(`no media section found with mid '${g.mid}'`); this._mediaSections[R] = g, this._sdpObject.media[R] = g.getObject() } } _findMediaSection(g) { const S = this._midToIndex.get(g); if (S === void 0) throw new Error(`no media section found with mid '${g}'`); return this._mediaSections[S] } _regenerateBundleMids() { this._dtlsParameters && (this._sdpObject.groups[0].mids = this._mediaSections.filter(g => !g.closed).map(g => g.mid).join(" ")) } } c.RemoteSdp = b }, 1380(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(3240)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.Hasher, P = d.x64, b = P.Word, u = P.WordArray, g = d.algo; function S() { return b.create.apply(b, arguments) } var R = [S(1116352408, 3609767458), S(1899447441, 602891725), S(3049323471, 3964484399), S(3921009573, 2173295548), S(961987163, 4081628472), S(1508970993, 3053834265), S(2453635748, 2937671579), S(2870763221, 3664609560), S(3624381080, 2734883394), S(310598401, 1164996542), S(607225278, 1323610764), S(1426881987, 3590304994), S(1925078388, 4068182383), S(2162078206, 991336113), S(2614888103, 633803317), S(3248222580, 3479774868), S(3835390401, 2666613458), S(4022224774, 944711139), S(264347078, 2341262773), S(604807628, 2007800933), S(770255983, 1495990901), S(1249150122, 1856431235), S(1555081692, 3175218132), S(1996064986, 2198950837), S(2554220882, 3999719339), S(2821834349, 766784016), S(2952996808, 2566594879), S(3210313671, 3203337956), S(3336571891, 1034457026), S(3584528711, 2466948901), S(113926993, 3758326383), S(338241895, 168717936), S(666307205, 1188179964), S(773529912, 1546045734), S(1294757372, 1522805485), S(1396182291, 2643833823), S(1695183700, 2343527390), S(1986661051, 1014477480), S(2177026350, 1206759142), S(2456956037, 344077627), S(2730485921, 1290863460), S(2820302411, 3158454273), S(3259730800, 3505952657), S(3345764771, 106217008), S(3516065817, 3606008344), S(3600352804, 1432725776), S(4094571909, 1467031594), S(275423344, 851169720), S(430227734, 3100823752), S(506948616, 1363258195), S(659060556, 3750685593), S(883997877, 3785050280), S(958139571, 3318307427), S(1322822218, 3812723403), S(1537002063, 2003034995), S(1747873779, 3602036899), S(1955562222, 1575990012), S(2024104815, 1125592928), S(2227730452, 2716904306), S(2361852424, 442776044), S(2428436474, 593698344), S(2756734187, 3733110249), S(3204031479, 2999351573), S(3329325298, 3815920427), S(3391569614, 3928383900), S(3515267271, 566280711), S(3940187606, 3454069534), S(4118630271, 4000239992), S(116418474, 1914138554), S(174292421, 2731055270), S(289380356, 3203993006), S(460393269, 320620315), S(685471733, 587496836), S(852142971, 1086792851), S(1017036298, 365543100), S(1126000580, 2618297676), S(1288033470, 3409855158), S(1501505948, 4234509866), S(1607167915, 987167468), S(1816402316, 1246189591)], y = []; (function () { for (var D = 0; D < 80; D++)y[D] = S() })(); var v = g.SHA512 = h.extend({ _doReset: function () { this._hash = new u.init([new b.init(1779033703, 4089235720), new b.init(3144134277, 2227873595), new b.init(1013904242, 4271175723), new b.init(2773480762, 1595750129), new b.init(1359893119, 2917565137), new b.init(2600822924, 725511199), new b.init(528734635, 4215389547), new b.init(1541459225, 327033209)]) }, _doProcessBlock: function (D, M) { for (var W = this._hash.words, I = W[0], E = W[1], _ = W[2], k = W[3], L = W[4], H = W[5], V = W[6], ee = W[7], K = I.high, N = I.low, B = E.high, Q = E.low, Z = _.high, le = _.low, X = k.high, ce = k.low, he = L.high, ue = L.low, ye = H.high, se = H.low, _e = V.high, Se = V.low, we = ee.high, De = ee.low, mt = K, Lt = N, Dt = B, ot = Q, tr = Z, Br = le, on = X, ir = ce, gr = he, Bt = ue, hn = ye, Wr = se, wn = _e, He = Se, Ue = we, zt = De, hr = 0; hr < 80; hr++) { var Dr, Kr, fn = y[hr]; if (hr < 16) Kr = fn.high = D[M + hr * 2] | 0, Dr = fn.low = D[M + hr * 2 + 1] | 0; else { var St = y[hr - 15], Fe = St.high, ut = St.low, qe = (Fe >>> 1 | ut << 31) ^ (Fe >>> 8 | ut << 24) ^ Fe >>> 7, it = (ut >>> 1 | Fe << 31) ^ (ut >>> 8 | Fe << 24) ^ (ut >>> 7 | Fe << 25), ur = y[hr - 2], Ce = ur.high, Xt = ur.low, cr = (Ce >>> 19 | Xt << 13) ^ (Ce << 3 | Xt >>> 29) ^ Ce >>> 6, pr = (Xt >>> 19 | Ce << 13) ^ (Xt << 3 | Ce >>> 29) ^ (Xt >>> 6 | Ce << 26), ct = y[hr - 7], jr = ct.high, $e = ct.low, It = y[hr - 16], vt = It.high, Nt = It.low; Dr = it + $e, Kr = qe + jr + (Dr >>> 0 < it >>> 0 ? 1 : 0), Dr = Dr + pr, Kr = Kr + cr + (Dr >>> 0 < pr >>> 0 ? 1 : 0), Dr = Dr + Nt, Kr = Kr + vt + (Dr >>> 0 < Nt >>> 0 ? 1 : 0), fn.high = Kr, fn.low = Dr } var dt = gr & hn ^ ~gr & wn, Or = Bt & Wr ^ ~Bt & He, vr = mt & Dt ^ mt & tr ^ Dt & tr, or = Lt & ot ^ Lt & Br ^ ot & Br, br = (mt >>> 28 | Lt << 4) ^ (mt << 30 | Lt >>> 2) ^ (mt << 25 | Lt >>> 7), Ar = (Lt >>> 28 | mt << 4) ^ (Lt << 30 | mt >>> 2) ^ (Lt << 25 | mt >>> 7), vn = (gr >>> 14 | Bt << 18) ^ (gr >>> 18 | Bt << 14) ^ (gr << 23 | Bt >>> 9), Gt = (Bt >>> 14 | gr << 18) ^ (Bt >>> 18 | gr << 14) ^ (Bt << 23 | gr >>> 9), Et = R[hr], Xr = Et.high, mn = Et.low, Cr = zt + Gt, yn = Ue + vn + (Cr >>> 0 < zt >>> 0 ? 1 : 0), Cr = Cr + Or, yn = yn + dt + (Cr >>> 0 < Or >>> 0 ? 1 : 0), Cr = Cr + mn, yn = yn + Xr + (Cr >>> 0 < mn >>> 0 ? 1 : 0), Cr = Cr + Dr, yn = yn + Kr + (Cr >>> 0 < Dr >>> 0 ? 1 : 0), Ci = Ar + or, Ri = br + vr + (Ci >>> 0 < Ar >>> 0 ? 1 : 0); Ue = wn, zt = He, wn = hn, He = Wr, hn = gr, Wr = Bt, Bt = ir + Cr | 0, gr = on + yn + (Bt >>> 0 < ir >>> 0 ? 1 : 0) | 0, on = tr, ir = Br, tr = Dt, Br = ot, Dt = mt, ot = Lt, Lt = Cr + Ci | 0, mt = yn + Ri + (Lt >>> 0 < Cr >>> 0 ? 1 : 0) | 0 } N = I.low = N + Lt, I.high = K + mt + (N >>> 0 < Lt >>> 0 ? 1 : 0), Q = E.low = Q + ot, E.high = B + Dt + (Q >>> 0 < ot >>> 0 ? 1 : 0), le = _.low = le + Br, _.high = Z + tr + (le >>> 0 < Br >>> 0 ? 1 : 0), ce = k.low = ce + ir, k.high = X + on + (ce >>> 0 < ir >>> 0 ? 1 : 0), ue = L.low = ue + Bt, L.high = he + gr + (ue >>> 0 < Bt >>> 0 ? 1 : 0), se = H.low = se + Wr, H.high = ye + hn + (se >>> 0 < Wr >>> 0 ? 1 : 0), Se = V.low = Se + He, V.high = _e + wn + (Se >>> 0 < He >>> 0 ? 1 : 0), De = ee.low = De + zt, ee.high = we + Ue + (De >>> 0 < zt >>> 0 ? 1 : 0) }, _doFinalize: function () { var D = this._data, M = D.words, W = this._nDataBytes * 8, I = D.sigBytes * 8; M[I >>> 5] |= 128 << 24 - I % 32, M[(I + 128 >>> 10 << 5) + 30] = Math.floor(W / 4294967296), M[(I + 128 >>> 10 << 5) + 31] = W, D.sigBytes = M.length * 4, this._process(); var E = this._hash.toX32(); return E }, clone: function () { var D = h.clone.call(this); return D._hash = this._hash.clone(), D }, blockSize: 1024 / 32 }); d.SHA512 = h._createHelper(v), d.HmacSHA512 = h._createHmacHelper(v) }(), p.SHA512 }) }, 1396(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(3240), l(6440), l(5503), l(754), l(4725), l(4636), l(5471), l(3009), l(6308), l(1380), l(9557), l(5953), l(8056), l(1025), l(19), l(9506), l(7165), l(2169), l(6939), l(6372), l(3797), l(8454), l(2073), l(4905), l(482), l(2155), l(8124), l(25), l(955), l(7628), l(7193), l(6298), l(2696), l(3128)) })(this, function (p) { return p }) }, 1765(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.clone = l, c.generateRandomNumber = p, c.deepFreeze = d; function l(f) { if (f !== void 0) return Number.isNaN(f) ? NaN : typeof structuredClone == "function" ? structuredClone(f) : JSON.parse(JSON.stringify(f)) } function p() { return Math.round(Math.random() * 1e7) } function d(f) { const h = Reflect.ownKeys(f); for (const P of h) { const b = f[P]; (b && typeof b == "object" || typeof b == "function") && d(b) } return Object.freeze(f) } }, 1791(a, c, l) { var p = l(5172), d = l(5546); function f(h, P) { function b(g, S, R, y) { try { var v = h[g](S), D = v.value; return D instanceof p ? P.resolve(D.v).then(function (M) { b("next", M, R, y) }, function (M) { b("throw", M, R, y) }) : P.resolve(D).then(function (M) { v.value = M, R(v) }, function (M) { return b("throw", M, R, y) }) } catch (M) { y(M) } } var u; this.next || (d(f.prototype), d(f.prototype, typeof Symbol == "function" && Symbol.asyncIterator || "@asyncIterator", function () { return this })), d(this, "_invoke", function (g, S, R) { function y() { return new P(function (v, D) { b(g, R, v, D) }) } return u = u ? u.then(y, y) : y() }, !0) } a.exports = f, a.exports.__esModule = !0, a.exports.default = a.exports }, 1803(a, c, l) { l.d(c, { ed: () => N, sg: () => B, v7: () => _ }); var p = l(4467), d = l(296), f = l(9027), h = l(6565); function P(Q, Z) { var le = Object.keys(Q); if (Object.getOwnPropertySymbols) { var X = Object.getOwnPropertySymbols(Q); Z && (X = X.filter(function (ce) { return Object.getOwnPropertyDescriptor(Q, ce).enumerable })), le.push.apply(le, X) } return le } function b(Q) { for (var Z = 1; Z < arguments.length; Z++) { var le = arguments[Z] != null ? arguments[Z] : {}; Z % 2 ? P(Object(le), !0).forEach(function (X) { (0, p.A)(Q, X, le[X]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(Q, Object.getOwnPropertyDescriptors(le)) : P(Object(le)).forEach(function (X) { Object.defineProperty(Q, X, Object.getOwnPropertyDescriptor(le, X)) }) } return Q } var u = {}, g = {}, S = {}; for (var R in f.$.videoProfiles) f.$.videoProfiles[R].aspectRatio == "oneSixNine" && (u[R] = f.$.videoProfiles[R], u[R].encoding = { bitrates: u[R].bitrates, maxFramerate: u[R].frameRate }), f.$.videoProfiles[R].aspectRatio == "fourThree" && (g[R] = f.$.videoProfiles[R], g[R].encoding = { bitrates: g[R].bitrates, maxFramerate: g[R].frameRate }); for (var R in f.$.screenShareProfiles) S[R] = f.$.screenShareProfiles[R], S[R].encoding = { maxBitrate: S[R].bitRate, maxFramerate: S[R].frameRate }; var y = Object.values(u), v = Object.values(g), D = Object.values(S), M = { web: { default: [u.h180p_w320p, u.h360p_w640p], 1080: [u.h360p_w640p, u.h540p_w960p], 1440: [u.h360p_w640p, u.h720p_w1280p], 2160: [u.h540p_w960p, u.h1080p_w1920p] }, "react-native": { default: [u.h90p_w160p, u.h360p_w640p], 1080: [u.h360p_w640p, u.h540p_w960p], 1440: [u.h360p_w640p, u.h720p_w1280p], 2160: [u.h540p_w960p, u.h1080p_w1920p] } }, W = { web: { default: [g.h180p_w240p, g.h360p_w480p], 1080: [g.h360p_w480p, g.h540p_w720p], 1440: [g.h360p_w480p, g.h720p_w960p] }, "react-native": { default: [g.h240p_w320p, g.h480p_w640p], 1080: [g.h480p_w640p, g.h720p_w960p], 1440: [g.h360p_w480p, g.h720p_w960p] } }, I = function (Z) { var le = [{ scaleResolutionDownBy: 2, fps: 3 }]; return le.map(function (X) { var ce; return { width: Math.floor(Z.width / X.scaleResolutionDownBy), height: Math.floor(Z.height / X.scaleResolutionDownBy), encodings: { maxBitrate: Math.max(15e4, Math.floor(Z.encoding.maxBitrate / (Math.pow(X.scaleResolutionDownBy, 2) * (((ce = Z.encoding.maxFramerate) !== null && ce !== void 0 ? ce : 30) / X.fps)))), maxFramerate: X.fps } } }) }, E = ["q", "h", "f"]; function _(Q, Z, le, X, ce, he, ue, ye, se) { var _e = ce && ce.videoEncoding; Q && (_e = ce && ce.screenShareEncoding); var Se = ce == null ? void 0 : ce.simulcast; if (se === 1 && (Se = !1), _e || (_e = k(Q, Z, le, X, ue, ye)), !Se) return [_e]; var we = f.$.videoProfiles[X], De = Z || (we == null ? void 0 : we.width), mt = le || (we == null ? void 0 : we.height), Lt = { width: De, height: mt, encoding: { maxBitrate: _e.maxBitrate, maxFramerate: _e.maxFramerate, bitrates: _e.bitrates } }, Dt = []; Dt = V(Q, Lt, ue); var ot, tr = Dt[0]; if (Dt.length > 1 && se >= 3) { var Br = Dt, on = (0, d.A)(Br, 2); ot = on[1] } var ir = Math.max(De, mt); return ir >= 960 && ot ? ee(De, mt, [tr, ot, Lt], he) : ir >= 480 ? ee(De, mt, [tr, Lt], he) : ee(De, mt, [Lt], he) } function k(Q, Z, le, X, ce, he) { for (var ue = f.$.videoProfiles[X], ye = L(Q, Z || (ue == null ? void 0 : ue.width), le || (ue == null ? void 0 : ue.height)), se = ye[0].encoding, _e = Math.max(Z, le), Se = 0; Se < ye.length; Se += 1) { var we = ye[Se]; if (se = we.encoding, Q || (he = he || h.x.BALANCED, se.maxBitrate = se.bitrates[ce][he]), ue) { if (we.width == ue.width && we.height == ue.height) break } else if (we.width >= _e) break } return se } function L(Q, Z, le) { if (Q) return D; var X = Z > le ? Z / le : le / Z; return Math.abs(X - 1.7777777777777777) < Math.abs(X - 1.3333333333333333) ? y : v } function H(Q, Z, le) { return Z === 169 ? Q >= 2160 ? M[le][2160] : Q >= 1440 ? M[le][1440] : Q >= 1080 ? M[le][1080] : M[le].default : Q >= 1440 ? W[le][1440] : Q >= 1080 ? W[le][1080] : W[le].default } function V(Q, Z, le) { Q && I(Z); var X = Z.width, ce = Z.height, he = X > ce ? X / ce : ce / X; return Math.abs(he - 1.7777777777777777) < Math.abs(he - 1.3333333333333333) ? H(ce, 169, le) : H(ce, 43, le) } function ee(Q, Z, le, X) { var ce = []; return le.forEach(function (he, ue) { if (!(ue >= E.length)) { var ye = X ? null : { maxFramerate: he.encoding.maxFramerate }, se = Math.min(Q, Z), _e = E[ue], Se = b({ rid: _e, scaleResolutionDownBy: se / Math.min(he.width, he.height), maxBitrate: he.encoding.maxBitrate, bitrates: he.encoding.bitrates }, ye); ce.push(Se) } }), ce } function K(Q) { var Z = []; if (!(!Q || Q.length == 0)) { if (Q.length === 1) { for (var le = 3, X = 0; X < le; X++)Z.push(Math.pow(2, le - X - 1)); return Z } var ce = !1; return Q.forEach(function (he) { he.scaleResolutionDownBy !== void 0 ? (ce = !0, Z.push(Math.max(1, he.scaleResolutionDownBy))) : Z.push(1) }), ce || Q.forEach(function (he, ue) { Z[ue] = Math.pow(2, Q.length - ue - 1) }), Z } } function N(Q, Z, le) { if (!Q) return {}; var X = Q.id, ce = Q.appData, he = ce.width, ue = ce.height, ye = ce.encodings; try { var se = K(ye); if (!se) return {}; var _e = se.map(function (Dt) { return { width: he / Dt, height: ue / Dt } }), Se = _e.sort(function (Dt, ot) { return Dt.width - ot.width }), we = Se.findIndex(function (Dt) { return Dt.width >= Z && Dt.height >= le }); we === -1 && (we = Se.length - 1); var De = Q.temporalLayers ? Q.temporalLayers : 2; if (we === 0 && De > 0) { var mt = he / se[0], Lt = ue / se[0]; Z < mt * .5 && le < Lt * .5 && (De -= 1), De > 0 && Z < mt * .25 && le < Lt * .25 && (De -= 1) } return { consumerId: X, newPreferredSpatialLayer: Math.max(0, we), newPreferredTemporalLayer: Math.max(0, De) } } catch { return {} } } function B(Q, Z) { var le; return function () { for (var X = this, ce = arguments.length, he = new Array(ce), ue = 0; ue < ce; ue++)he[ue] = arguments[ue]; clearTimeout(le), le = setTimeout(function () { return Q.apply(X, he) }, Z) } } }, 1806(a, c, l) { l.d(c, { $Q: () => d, T4: () => h, Ts: () => b, ue: () => P }); var p = 10, d = "vk_e2ee", f = "VideoSDKEncryptionRatchetSalt", h = { sharedKey: !1, ratchetSalt: f, ratchetWindowSize: 0, failureTolerance: p, keyringSize: 16, discardFrameWhenCryptorNotReady: !1 }, P = ["vp8", "vp9", "h264", "av1"], b = ["opus"] }, 2067(a, c, l) { l.d(c, { y: () => p }); var p = { RELIABLE: "RELIABLE", UNRELIABLE: "UNRELIABLE" } }, 2073(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.pad.AnsiX923 = { pad: function (d, f) { var h = d.sigBytes, P = f * 4, b = P - h % P, u = h + b - 1; d.clamp(), d.words[u >>> 2] |= b << 24 - u % 4 * 8, d.sigBytes += b }, unpad: function (d) { var f = d.words[d.sigBytes - 1 >>> 2] & 255; d.sigBytes -= f } }, p.pad.Ansix923 }) }, 2107(a, c, l) { l.d(c, { kR: () => d, nI: () => p, wZ: () => f }); var p = { CONFERENCE: "CONFERENCE", VIEWER: "VIEWER", SEND_AND_RECV: "SEND_AND_RECV", SIGNALLING_ONLY: "SIGNALLING_ONLY", RECV_ONLY: "RECV_ONLY" }; function d(h) { return h === p.CONFERENCE || h === p.SEND_AND_RECV } function f(h) { return h === p.VIEWER || h === p.SIGNALLING_ONLY } }, 2109(a, c, l) { var p; (function (d, f) { var h = "2.0.7", P = 500, b = "user-agent", u = "", g = "?", S = { FUNCTION: "function", OBJECT: "object", STRING: "string", UNDEFINED: "undefined" }, R = "browser", y = "cpu", v = "device", D = "engine", M = "os", W = "result", I = "name", E = "type", _ = "vendor", k = "version", L = "architecture", H = "major", V = "model", ee = "console", K = "mobile", N = "tablet", B = "smarttv", Q = "wearable", Z = "xr", le = "embedded", X = "inapp", ce = "brands", he = "formFactors", ue = "fullVersionList", ye = "platform", se = "platformVersion", _e = "bitness", Se = "sec-ch-ua", we = Se + "-full-version-list", De = Se + "-arch", mt = Se + "-" + _e, Lt = Se + "-form-factors", Dt = Se + "-" + K, ot = Se + "-" + V, tr = Se + "-" + ye, Br = tr + "-version", on = [ce, ue, K, V, ye, se, L, he, _e], ir = "Amazon", gr = "Apple", Bt = "ASUS", hn = "BlackBerry", Wr = "Google", wn = "Huawei", He = "Lenovo", Ue = "Honor", zt = "LG", hr = "Microsoft", Dr = "Motorola", Kr = "Nvidia", fn = "OnePlus", St = "OPPO", Fe = "Samsung", ut = "Sharp", qe = "Sony", it = "Xiaomi", ur = "Zebra", Ce = "Chrome", Xt = "Chromium", cr = "Chromecast", pr = "Edge", ct = "Firefox", jr = "Opera", $e = "Facebook", It = "Sogou", vt = "Mobile ", Nt = " Browser", dt = "Windows", Or = typeof d !== S.UNDEFINED, vr = Or && d.navigator ? d.navigator : f, or = vr && vr.userAgentData ? vr.userAgentData : f, br = function (Ne, pt) { var yt = {}, kt = pt; if (!Gt(pt)) { kt = {}; for (var Pr in pt) for (var Fr in pt[Pr]) kt[Fr] = pt[Pr][Fr].concat(kt[Fr] ? kt[Fr] : []) } for (var xt in Ne) yt[xt] = kt[xt] && kt[xt].length % 2 === 0 ? kt[xt].concat(Ne[xt]) : Ne[xt]; return yt }, Ar = function (Ne) { for (var pt = {}, yt = 0; yt < Ne.length; yt++)pt[Ne[yt].toUpperCase()] = Ne[yt]; return pt }, vn = function (Ne, pt) { if (typeof Ne === S.OBJECT && Ne.length > 0) { for (var yt in Ne) if (mn(pt) == mn(Ne[yt])) return !0; return !1 } return Et(Ne) ? mn(pt) == mn(Ne) : !1 }, Gt = function (Ne, pt) { for (var yt in Ne) return /^(browser|cpu|device|engine|os)$/.test(yt) || (pt ? Gt(Ne[yt]) : !1) }, Et = function (Ne) { return typeof Ne === S.STRING }, Xr = function (Ne) { if (!Ne) return f; for (var pt = [], yt = Ci(/\\?\"/g, Ne).split(","), kt = 0; kt < yt.length; kt++)if (yt[kt].indexOf(";") > -1) { var Pr = $i(yt[kt]).split(";v="); pt[kt] = { brand: Pr[0], version: Pr[1] } } else pt[kt] = $i(yt[kt]); return pt }, mn = function (Ne) { return Et(Ne) ? Ne.toLowerCase() : Ne }, Cr = function (Ne) { return Et(Ne) ? Ci(/[^\d\.]/g, Ne).split(".")[0] : f }, yn = function (Ne) { for (var pt in Ne) if (Ne.hasOwnProperty(pt)) { var yt = Ne[pt]; typeof yt == S.OBJECT && yt.length == 2 ? this[yt[0]] = yt[1] : this[yt] = f } return this }, Ci = function (Ne, pt) { return Et(pt) ? pt.replace(Ne, u) : pt }, Ri = function (Ne) { return Ci(/\\?\"/g, Ne) }, $i = function (Ne, pt) { return Ne = Ci(/^\s\s*/, String(Ne)), typeof pt === S.UNDEFINED ? Ne : Ne.substring(0, pt) }, Gs = function (Ne, pt) { if (!(!Ne || !pt)) for (var yt = 0, kt, Pr, Fr, xt, $r, xr; yt < pt.length && !$r;) { var Yr = pt[yt], bn = pt[yt + 1]; for (kt = Pr = 0; kt < Yr.length && !$r && Yr[kt];)if ($r = Yr[kt++].exec(Ne), $r) for (Fr = 0; Fr < bn.length; Fr++)xr = $r[++Pr], xt = bn[Fr], typeof xt === S.OBJECT && xt.length > 0 ? xt.length === 2 ? typeof xt[1] == S.FUNCTION ? this[xt[0]] = xt[1].call(this, xr) : this[xt[0]] = xt[1] : xt.length >= 3 && (typeof xt[1] === S.FUNCTION && !(xt[1].exec && xt[1].test) ? xt.length > 3 ? this[xt[0]] = xr ? xt[1].apply(this, xt.slice(2)) : f : this[xt[0]] = xr ? xt[1].call(this, xr, xt[2]) : f : xt.length == 3 ? this[xt[0]] = xr ? xr.replace(xt[1], xt[2]) : f : xt.length == 4 ? this[xt[0]] = xr ? xt[3].call(this, xr.replace(xt[1], xt[2])) : f : xt.length > 4 && (this[xt[0]] = xr ? xt[3].apply(this, [xr.replace(xt[1], xt[2])].concat(xt.slice(4))) : f)) : this[xt] = xr || f; yt += 2 } }, ei = function (Ne, pt) { for (var yt in pt) if (typeof pt[yt] === S.OBJECT && pt[yt].length > 0) { for (var kt = 0; kt < pt[yt].length; kt++)if (vn(pt[yt][kt], Ne)) return yt === g ? f : yt } else if (vn(pt[yt], Ne)) return yt === g ? f : yt; return pt.hasOwnProperty("*") ? pt["*"] : Ne }, va = { ME: "4.90", "NT 3.51": "3.51", "NT 4.0": "4.0", 2e3: ["5.0", "5.01"], XP: ["5.1", "5.2"], Vista: "6.0", 7: "6.1", 8: "6.2", "8.1": "6.3", 10: ["6.4", "10.0"], NT: "" }, Ds = { embedded: "Automotive", mobile: "Mobile", tablet: ["Tablet", "EInk"], smarttv: "TV", wearable: "Watch", xr: ["VR", "XR"], "?": ["Desktop", "Unknown"], "*": f }, ya = { Chrome: "Google Chrome", Edge: "Microsoft Edge", "Edge WebView2": "Microsoft Edge WebView2", "Chrome WebView": "Android WebView", "Chrome Headless": "HeadlessChrome", "Huawei Browser": "HuaweiBrowser", "MIUI Browser": "Miui Browser", "Opera Mobi": "OperaMobile", Yandex: "YaBrowser" }, Ua = { browser: [[/\b(?:crmo|crios)\/([\w\.]+)/i], [k, [I, vt + "Chrome"]], [/webview.+edge\/([\w\.]+)/i], [k, [I, pr + " WebView"]], [/edg(?:e|ios|a)?\/([\w\.]+)/i], [k, [I, "Edge"]], [/(opera mini)\/([-\w\.]+)/i, /(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i, /(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i], [I, k], [/opios[\/ ]+([\w\.]+)/i], [k, [I, jr + " Mini"]], [/\bop(?:rg)?x\/([\w\.]+)/i], [k, [I, jr + " GX"]], [/\bopr\/([\w\.]+)/i], [k, [I, jr]], [/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i], [k, [I, "Baidu"]], [/\b(?:mxbrowser|mxios|myie2)\/?([-\w\.]*)\b/i], [k, [I, "Maxthon"]], [/(kindle)\/([\w\.]+)/i, /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i, /(avant|iemobile|slim(?:browser|boat|jet))[\/ ]?([\d\.]*)/i, /(?:ms|\()(ie) ([\w\.]+)/i, /(atlas|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser|palemoon)\/([-\w\.]+)/i, /(heytap|ovi|115|surf|qwant)browser\/([\d\.]+)/i, /(qwant)(?:ios|mobile)\/([\d\.]+)/i, /(ecosia|weibo)(?:__| \w+@)([\d\.]+)/i], [I, k], [/quark(?:pc)?\/([-\w\.]+)/i], [k, [I, "Quark"]], [/\bddg\/([\w\.]+)/i], [k, [I, "DuckDuckGo"]], [/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i], [k, [I, "UCBrowser"]], [/microm.+\bqbcore\/([\w\.]+)/i, /\bqbcore\/([\w\.]+).+microm/i, /micromessenger\/([\w\.]+)/i], [k, [I, "WeChat"]], [/konqueror\/([\w\.]+)/i], [k, [I, "Konqueror"]], [/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i], [k, [I, "IE"]], [/ya(?:search)?browser\/([\w\.]+)/i], [k, [I, "Yandex"]], [/slbrowser\/([\w\.]+)/i], [k, [I, "Smart " + He + Nt]], [/(avast|avg)\/([\w\.]+)/i], [[I, /(.+)/, "$1 Secure" + Nt], k], [/\bfocus\/([\w\.]+)/i], [k, [I, ct + " Focus"]], [/\bopt\/([\w\.]+)/i], [k, [I, jr + " Touch"]], [/coc_coc\w+\/([\w\.]+)/i], [k, [I, "Coc Coc"]], [/dolfin\/([\w\.]+)/i], [k, [I, "Dolphin"]], [/coast\/([\w\.]+)/i], [k, [I, jr + " Coast"]], [/miuibrowser\/([\w\.]+)/i], [k, [I, "MIUI" + Nt]], [/fxios\/([\w\.-]+)/i], [k, [I, vt + ct]], [/\bqihoobrowser\/?([\w\.]*)/i], [k, [I, "360"]], [/\b(qq)\/([\w\.]+)/i], [[I, /(.+)/, "$1Browser"], k], [/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i], [[I, /(.+)/, "$1" + Nt], k], [/samsungbrowser\/([\w\.]+)/i], [k, [I, Fe + " Internet"]], [/metasr[\/ ]?([\d\.]+)/i], [k, [I, It + " Explorer"]], [/(sogou)mo\w+\/([\d\.]+)/i], [[I, It + " Mobile"], k], [/(electron)\/([\w\.]+) safari/i, /(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i, /m?(qqbrowser|2345(?=browser|chrome|explorer))\w*[\/ ]?v?([\w\.]+)/i], [I, k], [/(lbbrowser|rekonq|steam(?= (clie|tenf|gameo)))/i], [I], [/ome\/([\w\.]+) \w* ?(iron) saf/i, /ome\/([\w\.]+).+qihu (360)[es]e/i], [k, I], [/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i], [[I, $e], k, [E, X]], [/(kakao(?:talk|story))[\/ ]([\w\.]+)/i, /(naver)\(.*?(\d+\.[\w\.]+).*\)/i, /(daum)apps[\/ ]([\w\.]+)/i, /safari (line)\/([\w\.]+)/i, /\b(line)\/([\w\.]+)\/iab/i, /(alipay)client\/([\w\.]+)/i, /(twitter)(?:and| f.+e\/([\w\.]+))/i, /(bing)(?:web|sapphire)\/([\w\.]+)/i, /(instagram|snapchat|klarna)[\/ ]([-\w\.]+)/i], [I, k, [E, X]], [/\bgsa\/([\w\.]+) .*safari\//i], [k, [I, "GSA"], [E, X]], [/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i], [k, [I, "TikTok"], [E, X]], [/\[(linkedin)app\]/i], [I, [E, X]], [/(zalo(?:app)?)[\/\sa-z]*([\w\.-]+)/i], [[I, /(.+)/, "Zalo"], k, [E, X]], [/(chromium)[\/ ]([-\w\.]+)/i], [I, k], [/headlesschrome(?:\/([\w\.]+)| )/i], [k, [I, Ce + " Headless"]], [/wv\).+chrome\/([\w\.]+).+edgw\//i], [k, [I, pr + " WebView2"]], [/ wv\).+(chrome)\/([\w\.]+)/i], [[I, Ce + " WebView"], k], [/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i], [k, [I, "Android" + Nt]], [/chrome\/([\w\.]+) mobile/i], [k, [I, vt + "Chrome"]], [/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i], [I, k], [/version\/([\w\.\,]+) .*mobile(?:\/\w+ | ?)safari/i], [k, [I, vt + "Safari"]], [/iphone .*mobile(?:\/\w+ | ?)safari/i], [[I, vt + "Safari"]], [/version\/([\w\.\,]+) .*(safari)/i], [k, I], [/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i], [I, [k, "1"]], [/(webkit|khtml)\/([\w\.]+)/i], [I, k], [/(?:mobile|tablet);.*(firefox)\/([\w\.-]+)/i], [[I, vt + ct], k], [/(navigator|netscape\d?)\/([-\w\.]+)/i], [[I, "Netscape"], k], [/(wolvic|librewolf)\/([\w\.]+)/i], [I, k], [/mobile vr; rv:([\w\.]+)\).+firefox/i], [k, [I, ct + " Reality"]], [/ekiohf.+(flow)\/([\w\.]+)/i, /(swiftfox)/i, /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i, /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|basilisk|waterfox)\/([-\w\.]+)$/i, /(firefox)\/([\w\.]+)/i, /(mozilla)\/([\w\.]+(?= .+rv\:.+gecko\/\d+)|[0-4][\w\.]+(?!.+compatible))/i, /(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i, /\b(links) \(([\w\.]+)/i], [I, [k, /_/g, "."]], [/(cobalt)\/([\w\.]+)/i], [I, [k, /[^\d\.]+./, u]]], cpu: [[/\b((amd|x|x86[-_]?|wow|win)64)\b/i], [[L, "amd64"]], [/(ia32(?=;))/i, /\b((i[346]|x)86)(pc)?\b/i], [[L, "ia32"]], [/\b(aarch64|arm(v?[89]e?l?|_?64))\b/i], [[L, "arm64"]], [/\b(arm(v[67])?ht?n?[fl]p?)\b/i], [[L, "armhf"]], [/( (ce|mobile); ppc;|\/[\w\.]+arm\b)/i], [[L, "arm"]], [/ sun4\w[;\)]/i], [[L, "sparc"]], [/\b(avr32|ia64(?=;)|68k(?=\))|\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\b|pa-risc)/i, /((ppc|powerpc)(64)?)( mac|;|\))/i, /(?:osf1|[freopnt]{3,4}bsd) (alpha)/i], [[L, /ower/, u, mn]], [/mc680.0/i], [[L, "68k"]], [/winnt.+\[axp/i], [[L, "alpha"]]], device: [[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i], [V, [_, Fe], [E, N]], [/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i, /samsung[- ]((?!sm-[lr]|browser)[-\w]+)/i, /sec-(sgh\w+)/i], [V, [_, Fe], [E, K]], [/(?:\/|\()(ip(?:hone|od)[\w, ]*)[\/\);]/i], [V, [_, gr], [E, K]], [/\b(?:ios|apple\w+)\/.+[\(\/](ipad)/i, /\b(ipad)[\d,]*[;\] ].+(mac |i(pad)?)os/i], [V, [_, gr], [E, N]], [/(macintosh);/i], [V, [_, gr]], [/\b(sh-?[altvz]?\d\d[a-ekm]?)/i], [V, [_, ut], [E, K]], [/\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\)|;)/i], [V, [_, Ue], [E, N]], [/honor([-\w ]+)[;\)]/i], [V, [_, Ue], [E, K]], [/\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\w\. ]*(?= bui|\)))\b(?!.+d\/s)/i], [V, [_, wn], [E, N]], [/(?:huawei) ?([-\w ]+)[;\)]/i, /\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][\dc][adnt]?)\b(?!.+d\/s)/i], [V, [_, wn], [E, K]], [/oid[^\)]+; (2[\dbc]{4}(182|283|rp\w{2})[cgl]|m2105k81a?c)(?: bui|\))/i, /\b(?:xiao)?((?:red)?mi[-_ ]?pad[\w- ]*)(?: bui|\))/i], [[V, /_/g, " "], [_, it], [E, N]], [/\b; (\w+) build\/hm\1/i, /\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i, /oid[^\)]+; (redmi[\-_ ]?(?:note|k)?[\w_ ]+|m?[12]\d[01]\d\w{3,6}|poco[\w ]+|(shark )?\w{3}-[ah]0|qin ?[1-3](s\+|ultra| pro)?)( bui|; wv|\))/i, /\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note|max|cc)?[_ ]?(?:\d{0,2}\w?)[_ ]?(?:plus|se|lite|pro)?( 5g|lte)?)(?: bui|\))/i, / ([\w ]+) miui\/v?\d/i], [[V, /_/g, " "], [_, it], [E, K]], [/droid.+; (cph2[3-6]\d[13579]|((gm|hd)19|(ac|be|in|kb)20|(d[en]|eb|le|mt)21|ne22)[0-2]\d|p[g-k]\w[1m]10)\b/i, /(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i], [V, [_, fn], [E, K]], [/; (\w+) bui.+ oppo/i, /\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i], [V, [_, St], [E, K]], [/\b(opd2(\d{3}a?))(?: bui|\))/i], [V, [_, ei, { OnePlus: ["203", "304", "403", "404", "413", "415"], "*": St }], [E, N]], [/(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\w\+ ]*)(?: bui|\))/i], [V, [_, "BLU"], [E, K]], [/; vivo (\w+)(?: bui|\))/i, /\b(v[12]\d{3}\w?[at])(?: bui|;)/i], [V, [_, "Vivo"], [E, K]], [/\b(rmx[1-3]\d{3})(?: bui|;|\))/i], [V, [_, "Realme"], [E, K]], [/(ideatab[-\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\d{3,4}(?:f[cu]|xu|[av])|yt\d?-[jx]?\d+[lfmx])( bui|;|\)|\/)/i, /lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\w- ]+?)|tb[\w-]{6,7})( bui|;|\)|\/)/i], [V, [_, He], [E, N]], [/lenovo[-_ ]?([-\w ]+?)(?: bui|\)|\/)/i], [V, [_, He], [E, K]], [/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i, /\bmot(?:orola)?[- ]([\w\s]+)(\)| bui)/i, /((?:moto(?! 360)[-\w\(\) ]+|xt\d{3,4}[cgkosw\+]?[-\d]*|nexus 6)(?= bui|\)))/i], [V, [_, Dr], [E, K]], [/\b(mz60\d|xoom[2 ]{0,2}) build\//i], [V, [_, Dr], [E, N]], [/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i], [V, [_, zt], [E, N]], [/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i, /\blg[-e;\/ ]+(?!.*(?:browser|netcast|android tv|watch|webos))(\w+)/i, /\blg-?([\d\w]+) bui/i], [V, [_, zt], [E, K]], [/(nokia) (t[12][01])/i], [_, V, [E, N]], [/(?:maemo|nokia).*(n900|lumia \d+|rm-\d+)/i, /nokia[-_ ]?(([-\w\. ]*?))( bui|\)|;|\/)/i], [[V, /_/g, " "], [E, K], [_, "Nokia"]], [/(pixel (c|tablet))\b/i], [V, [_, Wr], [E, N]], [/droid.+;(?: google)? (g(01[13]a|020[aem]|025[jn]|1b60|1f8f|2ybb|4s1m|576d|5nz6|8hhn|8vou|a02099|c15s|d1yq|e2ae|ec77|gh2x|kv4x|p4bc|pj41|r83y|tt9q|ur25|wvk6)|pixel[\d ]*a?( pro)?( xl)?( fold)?( \(5g\))?)( bui|\))/i], [V, [_, Wr], [E, K]], [/(google) (pixelbook( go)?)/i], [_, V], [/droid.+; (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-\w\w\d\d)(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i], [V, [_, qe], [E, K]], [/sony tablet [ps]/i, /\b(?:sony)?sgp\w+(?: bui|\))/i], [[V, "Xperia Tablet"], [_, qe], [E, N]], [/(alexa)webm/i, /(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i, /(kf[a-z]+)( bui|\)).+silk\//i], [V, [_, ir], [E, N]], [/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i], [[V, /(.+)/g, "Fire Phone $1"], [_, ir], [E, K]], [/(playbook);[-\w\),; ]+(rim)/i], [V, _, [E, N]], [/\b((?:bb[a-f]|st[hv])100-\d)/i, /(?:blackberry|\(bb10;) (\w+)/i], [V, [_, hn], [E, K]], [/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i], [V, [_, Bt], [E, N]], [/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i], [V, [_, Bt], [E, K]], [/(nexus 9)/i], [V, [_, "HTC"], [E, N]], [/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i, /(zte)[- ]([\w ]+?)(?: bui|\/|\))/i, /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i], [_, [V, /_/g, " "], [E, K]], [/tcl (xess p17aa)/i, /droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\w(\w|\w\w))?(\)| bui)/i], [V, [_, "TCL"], [E, N]], [/droid [\w\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\w(\w|\w\w))?(\)| bui)/i], [V, [_, "TCL"], [E, K]], [/(itel) ((\w+))/i], [[_, mn], V, [E, ei, { tablet: ["p10001l", "w7001"], "*": "mobile" }]], [/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i], [V, [_, "Acer"], [E, N]], [/droid.+; (m[1-5] note) bui/i, /\bmz-([-\w]{2,})/i], [V, [_, "Meizu"], [E, K]], [/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i], [V, [_, "Ulefone"], [E, K]], [/; (energy ?\w+)(?: bui|\))/i, /; energizer ([\w ]+)(?: bui|\))/i], [V, [_, "Energizer"], [E, K]], [/; cat (b35);/i, /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\))/i], [V, [_, "Cat"], [E, K]], [/((?:new )?andromax[\w- ]+)(?: bui|\))/i], [V, [_, "Smartfren"], [E, K]], [/droid.+; (a(in)?(0(15|59|6[35])|142)p?)/i], [V, [_, "Nothing"], [E, K]], [/; (x67 5g|tikeasy \w+|ac[1789]\d\w+)( b|\))/i, /archos ?(5|gamepad2?|([\w ]*[t1789]|hello) ?\d+[\w ]*)( b|\))/i], [V, [_, "Archos"], [E, N]], [/archos ([\w ]+)( b|\))/i, /; (ac[3-6]\d\w{2,8})( b|\))/i], [V, [_, "Archos"], [E, K]], [/; (n159v)/i], [V, [_, "HMD"], [E, K]], [/(imo) (tab \w+)/i, /(infinix|tecno) (x1101b?|p904|dp(7c|8d|10a)( pro)?|p70[1-3]a?|p904|t1101)/i], [_, V, [E, N]], [/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|tecno|micromax|advan)[-_ ]?([-\w]*)/i, /; (blu|hmd|imo|infinix|lava|oneplus|tcl|wiko)[_ ]([\w\+ ]+?)(?: bui|\)|; r)/i, /(hp) ([\w ]+\w)/i, /(microsoft); (lumia[\w ]+)/i, /(oppo) ?([\w ]+) bui/i, /(hisense) ([ehv][\w ]+)\)/i, /droid[^;]+; (philips)[_ ]([sv-x][\d]{3,4}[xz]?)/i], [_, V, [E, K]], [/(kobo)\s(ereader|touch)/i, /(hp).+(touchpad(?!.+tablet)|tablet)/i, /(kindle)\/([\w\.]+)/i], [_, V, [E, N]], [/(surface duo)/i], [V, [_, hr], [E, N]], [/droid [\d\.]+; (fp\du?)(?: b|\))/i], [V, [_, "Fairphone"], [E, K]], [/((?:tegranote|shield t(?!.+d tv))[\w- ]*?)(?: b|\))/i], [V, [_, Kr], [E, N]], [/(sprint) (\w+)/i], [_, V, [E, K]], [/(kin\.[onetw]{3})/i], [[V, /\./g, " "], [_, hr], [E, K]], [/droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i], [V, [_, ur], [E, N]], [/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i], [V, [_, ur], [E, K]], [/(philips)[\w ]+tv/i, /smart-tv.+(samsung)/i], [_, [E, B]], [/hbbtv.+maple;(\d+)/i], [[V, /^/, "SmartTV"], [_, Fe], [E, B]], [/(vizio)(?: |.+model\/)(\w+-\w+)/i, /tcast.+(lg)e?. ([-\w]+)/i], [_, V, [E, B]], [/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i], [[_, zt], [E, B]], [/(apple) ?tv/i], [_, [V, gr + " TV"], [E, B]], [/crkey.*devicetype\/chromecast/i], [[V, cr + " Third Generation"], [_, Wr], [E, B]], [/crkey.*devicetype\/([^/]*)/i], [[V, /^/, "Chromecast "], [_, Wr], [E, B]], [/fuchsia.*crkey/i], [[V, cr + " Nest Hub"], [_, Wr], [E, B]], [/crkey/i], [[V, cr], [_, Wr], [E, B]], [/(portaltv)/i], [V, [_, $e], [E, B]], [/droid.+aft(\w+)( bui|\))/i], [V, [_, ir], [E, B]], [/(shield \w+ tv)/i], [V, [_, Kr], [E, B]], [/\(dtv[\);].+(aquos)/i, /(aquos-tv[\w ]+)\)/i], [V, [_, ut], [E, B]], [/(bravia[\w ]+)( bui|\))/i], [V, [_, qe], [E, B]], [/(mi(tv|box)-?\w+) bui/i], [V, [_, it], [E, B]], [/Hbbtv.*(technisat) (.*);/i], [_, V, [E, B]], [/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i, /hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i], [[_, /.+\/(\w+)/, "$1", ei, { LG: "lge" }], [V, $i], [E, B]], [/(playstation \w+)/i], [V, [_, qe], [E, ee]], [/\b(xbox(?: one)?(?!; xbox))[\); ]/i], [V, [_, hr], [E, ee]], [/(ouya)/i, /(nintendo) (\w+)/i, /(retroid) (pocket ([^\)]+))/i, /(valve).+(steam deck)/i, /droid.+; ((shield|rgcube|gr0006))( bui|\))/i], [[_, ei, { Nvidia: "Shield", Anbernic: "RGCUBE", Logitech: "GR0006" }], V, [E, ee]], [/\b(sm-[lr]\d\d[0156][fnuw]?s?|gear live)\b/i], [V, [_, Fe], [E, Q]], [/((pebble))app/i, /(asus|google|lg|oppo|xiaomi) ((pixel |zen)?watch[\w ]*)( bui|\))/i], [_, V, [E, Q]], [/(ow(?:19|20)?we?[1-3]{1,3})/i], [V, [_, St], [E, Q]], [/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i], [V, [_, gr], [E, Q]], [/(opwwe\d{3})/i], [V, [_, fn], [E, Q]], [/(moto 360)/i], [V, [_, Dr], [E, Q]], [/(smartwatch 3)/i], [V, [_, qe], [E, Q]], [/(g watch r)/i], [V, [_, zt], [E, Q]], [/droid.+; (wt63?0{2,3})\)/i], [V, [_, ur], [E, Q]], [/droid.+; (glass) \d/i], [V, [_, Wr], [E, Z]], [/(pico) ([\w ]+) os\d/i], [_, V, [E, Z]], [/(quest( \d| pro)?s?).+vr/i], [V, [_, $e], [E, Z]], [/mobile vr; rv.+firefox/i], [[E, Z]], [/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i], [_, [E, le]], [/(aeobc)\b/i], [V, [_, ir], [E, le]], [/(homepod).+mac os/i], [V, [_, gr], [E, le]], [/windows iot/i], [[E, le]], [/droid.+; ([\w- ]+) (4k|android|smart|google)[- ]?tv/i], [V, [E, B]], [/\b((4k|android|smart|opera)[- ]?tv|tv; rv:|large screen[\w ]+safari)\b/i], [[E, B]], [/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew|; hmsc).+?(mobile|vr|\d) safari/i], [V, [E, ei, { mobile: "Mobile", xr: "VR", "*": N }]], [/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i], [[E, N]], [/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i], [[E, K]], [/droid .+?; ([\w\. -]+)( bui|\))/i], [V, [_, "Generic"]]], engine: [[/windows.+ edge\/([\w\.]+)/i], [k, [I, pr + "HTML"]], [/(arkweb)\/([\w\.]+)/i], [I, k], [/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i], [k, [I, "Blink"]], [/(presto)\/([\w\.]+)/i, /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\/([\w\.]+)/i, /ekioh(flow)\/([\w\.]+)/i, /(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i, /(icab)[\/ ]([23]\.[\d\.]+)/i, /\b(libweb)/i], [I, k], [/ladybird\//i], [[I, "LibWeb"]], [/rv\:([\w\.]{1,9})\b.+(gecko)/i], [k, I]], os: [[/(windows nt) (6\.[23]); arm/i], [[I, /N/, "R"], [k, ei, va]], [/(windows (?:phone|mobile|iot))(?: os)?[\/ ]?([\d\.]*( se)?)/i, /(windows)[\/ ](1[01]|2000|3\.1|7|8(\.1)?|9[58]|me|server 20\d\d( r2)?|vista|xp)/i], [I, k], [/windows nt ?([\d\.\)]*)(?!.+xbox)/i, /\bwin(?=3| ?9|n)(?:nt| 9x )?([\d\.;]*)/i], [[k, /(;|\))/g, "", ei, va], [I, dt]], [/(windows ce)\/?([\d\.]*)/i], [I, k], [/[adehimnop]{4,7}\b(?:.*os ([\w]+) like mac|; opera)/i, /(?:ios;fbsv|ios(?=.+ip(?:ad|hone)|.+apple ?tv)|ip(?:ad|hone)(?: |.+i(?:pad)?)os|apple ?tv.+ios)[\/ ]([\w\.]+)/i, /\btvos ?([\w\.]+)/i, /cfnetwork\/.+darwin/i], [[k, /_/g, "."], [I, "iOS"]], [/(mac os x) ?([\w\. ]*)/i, /(macintosh|mac_powerpc\b)(?!.+(haiku|morphos))/i], [[I, "macOS"], [k, /_/g, "."]], [/android ([\d\.]+).*crkey/i], [k, [I, cr + " Android"]], [/fuchsia.*crkey\/([\d\.]+)/i], [k, [I, cr + " Fuchsia"]], [/crkey\/([\d\.]+).*devicetype\/smartspeaker/i], [k, [I, cr + " SmartSpeaker"]], [/linux.*crkey\/([\d\.]+)/i], [k, [I, cr + " Linux"]], [/crkey\/([\d\.]+)/i], [k, [I, cr]], [/droid ([\w\.]+)\b.+(android[- ]x86)/i], [k, I], [/(ubuntu) ([\w\.]+) like android/i], [[I, /(.+)/, "$1 Touch"], k], [/(harmonyos)[\/ ]?([\d\.]*)/i, /(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen)\w*[-\/\.; ]?([\d\.]*)/i], [I, k], [/\(bb(10);/i], [k, [I, hn]], [/(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\/ ]?([\w\.]*)/i], [k, [I, "Symbian"]], [/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i], [k, [I, ct + " OS"]], [/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i, /webos(?:[ \/]?|\.tv-20(?=2[2-9]))(\d[\d\.]*)/i], [k, [I, "webOS"]], [/web0s;.+?(?:chr[o0]me|safari)\/(\d+)/i], [[k, ei, { 25: "120", 24: "108", 23: "94", 22: "87", 6: "79", 5: "68", 4: "53", 3: "38", 2: "538", 1: "537", "*": "TV" }], [I, "webOS"]], [/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i], [k, [I, "watchOS"]], [/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i], [[I, "Chrome OS"], k], [/panasonic;(viera)/i, /(netrange)mmh/i, /(nettv)\/(\d+\.[\w\.]+)/i, /(nintendo|playstation) (\w+)/i, /(xbox); +xbox ([^\);]+)/i, /(pico) .+os([\w\.]+)/i, /\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i, /linux.+(mint)[\/\(\) ]?([\w\.]*)/i, /(mageia|vectorlinux|fuchsia|arcaos|arch(?= ?linux))[;l ]([\d\.]*)/i, /([kxln]?ubuntu|debian|suse|opensuse|gentoo|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire|knoppix)(?: gnu[\/ ]linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i, /((?:open)?solaris)[-\/ ]?([\w\.]*)/i, /\b(aix)[; ]([1-9\.]{0,4})/i, /(hurd|linux|morphos)(?: (?:arm|x86|ppc)\w*| ?)([\w\.]*)/i, /(gnu) ?([\w\.]*)/i, /\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i, /(haiku) ?(r\d)?/i], [I, k], [/(sunos) ?([\d\.]*)/i], [[I, "Solaris"], k], [/\b(beos|os\/2|amigaos|openvms|hp-ux|serenityos)/i, /(unix) ?([\w\.]*)/i], [I, k]] }, dr = function () { var Ne = { init: {}, isIgnore: {}, isIgnoreRgx: {}, toString: {} }; return yn.call(Ne.init, [[R, [I, k, H, E]], [y, [L]], [v, [E, V, _]], [D, [I, k]], [M, [I, k]]]), yn.call(Ne.isIgnore, [[R, [k, H]], [D, [k]], [M, [k]]]), yn.call(Ne.isIgnoreRgx, [[R, / ?browser$/i], [M, / ?os$/i]]), yn.call(Ne.toString, [[R, [I, k]], [y, [L]], [v, [_, V]], [D, [I, k]], [M, [I, k]]]), Ne }(), Ks = function (Ne, pt) { var yt = dr.init[pt], kt = dr.isIgnore[pt] || 0, Pr = dr.isIgnoreRgx[pt] || 0, Fr = dr.toString[pt] || 0; function xt() { yn.call(this, yt) } return xt.prototype.getItem = function () { return Ne }, xt.prototype.withClientHints = function () { return or ? or.getHighEntropyValues(on).then(function ($r) { return Ne.setCH(new ms($r, !1)).parseCH().get() }) : Ne.parseCH().get() }, xt.prototype.withFeatureCheck = function () { return Ne.detectFeature().get() }, pt != W && (xt.prototype.is = function ($r) { var xr = !1; for (var Yr in this) if (this.hasOwnProperty(Yr) && !vn(kt, Yr) && mn(Pr ? Ci(Pr, this[Yr]) : this[Yr]) == mn(Pr ? Ci(Pr, $r) : $r)) { if (xr = !0, $r != S.UNDEFINED) break } else if ($r == S.UNDEFINED && xr) { xr = !xr; break } return xr }, xt.prototype.toString = function () { var $r = u; for (var xr in Fr) typeof this[Fr[xr]] !== S.UNDEFINED && ($r += ($r ? " " : u) + this[Fr[xr]]); return $r || S.UNDEFINED }), xt.prototype.then = function ($r) { var xr = this, Yr = function () { for (var Di in xr) xr.hasOwnProperty(Di) && (this[Di] = xr[Di]) }; Yr.prototype = { is: xt.prototype.is, toString: xt.prototype.toString, withClientHints: xt.prototype.withClientHints, withFeatureCheck: xt.prototype.withFeatureCheck }; var bn = new Yr; return $r(bn), bn }, new xt }; function ms(Ne, pt) { if (Ne = Ne || {}, yn.call(this, on), pt) yn.call(this, [[ce, Xr(Ne[Se])], [ue, Xr(Ne[we])], [K, /\?1/.test(Ne[Dt])], [V, Ri(Ne[ot])], [ye, Ri(Ne[tr])], [se, Ri(Ne[Br])], [L, Ri(Ne[De])], [he, Xr(Ne[Lt])], [_e, Ri(Ne[mt])]]); else for (var yt in Ne) this.hasOwnProperty(yt) && typeof Ne[yt] !== S.UNDEFINED && (this[yt] = Ne[yt]) } function rs(Ne, pt, yt, kt) { return yn.call(this, [["itemType", Ne], ["ua", pt], ["uaCH", kt], ["rgxMap", yt], ["data", Ks(this, Ne)]]), this } rs.prototype.get = function (Ne) { return Ne ? this.data.hasOwnProperty(Ne) ? this.data[Ne] : f : this.data }, rs.prototype.set = function (Ne, pt) { return this.data[Ne] = pt, this }, rs.prototype.setCH = function (Ne) { return this.uaCH = Ne, this }, rs.prototype.detectFeature = function () { if (vr && vr.userAgent == this.ua) switch (this.itemType) { case R: vr.brave && typeof vr.brave.isBrave == S.FUNCTION && this.set(I, "Brave"); break; case v: !this.get(E) && or && or[K] && this.set(E, K), this.get(V) == "Macintosh" && vr && typeof vr.standalone !== S.UNDEFINED && vr.maxTouchPoints && vr.maxTouchPoints > 2 && this.set(V, "iPad").set(E, N); break; case M: !this.get(I) && or && or[ye] && this.set(I, or[ye]); break; case W: var Ne = this.data, pt = function (yt) { return Ne[yt].getItem().detectFeature().get() }; this.set(R, pt(R)).set(y, pt(y)).set(v, pt(v)).set(D, pt(D)).set(M, pt(M)) }return this }, rs.prototype.parseUA = function () { switch (this.itemType != W && Gs.call(this.data, this.ua, this.rgxMap), this.itemType) { case R: this.set(H, Cr(this.get(k))); break; case M: if (this.get(I) == "iOS" && this.get(k) == "18.6") { var Ne = /\) Version\/([\d\.]+)/.exec(this.ua); Ne && parseInt(Ne[1].substring(0, 2), 10) >= 26 && this.set(k, Ne[1]) } break }return this }, rs.prototype.parseCH = function () { var Ne = this.uaCH, pt = this.rgxMap; switch (this.itemType) { case R: case D: var yt = Ne[ue] || Ne[ce], kt; if (yt) for (var Pr = 0; Pr < yt.length; Pr++) { var Fr = yt[Pr].brand || yt[Pr], xt = yt[Pr].version; this.itemType == R && !/not.a.brand/i.test(Fr) && (!kt || /Chrom/.test(kt) && Fr != Xt || kt == pr && /WebView2/.test(Fr)) && (Fr = ei(Fr, ya), kt = this.get(I), kt && !/Chrom/.test(kt) && /Chrom/.test(Fr) || this.set(I, Fr).set(k, xt).set(H, Cr(xt)), kt = Fr), this.itemType == D && Fr == Xt && this.set(k, xt) } break; case y: var $r = Ne[L]; $r && ($r && Ne[_e] == "64" && ($r += "64"), Gs.call(this.data, $r + ";", pt)); break; case v: if (Ne[K] && this.set(E, K), Ne[V] && (this.set(V, Ne[V]), !this.get(E) || !this.get(_))) { var xr = {}; Gs.call(xr, "droid 9; " + Ne[V] + ")", pt), !this.get(E) && xr.type && this.set(E, xr.type), !this.get(_) && xr.vendor && this.set(_, xr.vendor) } if (Ne[he]) { var Yr; if (typeof Ne[he] != "string") for (var bn = 0; !Yr && bn < Ne[he].length;)Yr = ei(Ne[he][bn++], Ds); else Yr = ei(Ne[he], Ds); this.set(E, Yr) } break; case M: var Di = Ne[ye]; if (Di) { var ki = Ne[se]; Di == dt && (ki = parseInt(Cr(ki), 10) >= 13 ? "11" : "10"), this.set(I, Di).set(k, ki) } this.get(I) == dt && Ne[V] == "Xbox" && this.set(I, "Xbox").set(k, f); break; case W: var ns = this.data, gs = function (ba) { return ns[ba].getItem().setCH(Ne).parseCH().get() }; this.set(R, gs(R)).set(y, gs(y)).set(v, gs(v)).set(D, gs(D)).set(M, gs(M)) }return this }; function dn(Ne, pt, yt) { if (typeof Ne === S.OBJECT ? (Gt(Ne, !0) ? (typeof pt === S.OBJECT && (yt = pt), pt = Ne) : (yt = Ne, pt = f), Ne = f) : typeof Ne === S.STRING && !Gt(pt, !0) && (yt = pt, pt = f), yt) if (typeof yt.append === S.FUNCTION) { var kt = {}; yt.forEach(function (bn, Di) { kt[String(Di).toLowerCase()] = bn }), yt = kt } else { var Pr = {}; for (var Fr in yt) yt.hasOwnProperty(Fr) && (Pr[String(Fr).toLowerCase()] = yt[Fr]); yt = Pr } if (!(this instanceof dn)) return new dn(Ne, pt, yt).getResult(); var xt = typeof Ne === S.STRING ? Ne : yt && yt[b] ? yt[b] : vr && vr.userAgent ? vr.userAgent : u, $r = new ms(yt, !0), xr = pt ? br(Ua, pt) : Ua, Yr = function (bn) { return bn == W ? function () { return new rs(bn, xt, xr, $r).set("ua", xt).set(R, this.getBrowser()).set(y, this.getCPU()).set(v, this.getDevice()).set(D, this.getEngine()).set(M, this.getOS()).get() } : function () { return new rs(bn, xt, xr[bn], $r).parseUA().get() } }; return yn.call(this, [["getBrowser", Yr(R)], ["getCPU", Yr(y)], ["getDevice", Yr(v)], ["getEngine", Yr(D)], ["getOS", Yr(M)], ["getResult", Yr(W)], ["getUA", function () { return xt }], ["setUA", function (bn) { return Et(bn) && (xt = $i(bn, P)), this }]]).setUA(xt), this } dn.VERSION = h, dn.BROWSER = Ar([I, k, H, E]), dn.CPU = Ar([L]), dn.DEVICE = Ar([V, _, E, ee, K, B, N, Q, le]), dn.ENGINE = dn.OS = Ar([I, k]), typeof c !== S.UNDEFINED ? (a.exports && (c = a.exports = dn), c.UAParser = dn) : l.amdO ? (p = (function () { return dn }).call(c, l, c, a), p !== f && (a.exports = p)) : Or && (d.UAParser = dn); var Is = Or && (d.jQuery || d.Zepto); if (Is && !Is.ua) { var Ys = new dn; Is.ua = Ys.getResult(), Is.ua.get = function () { return Ys.getUA() }, Is.ua.set = function (Ne) { Ys.setUA(Ne); var pt = Ys.getResult(); for (var yt in pt) Is.ua[yt] = pt[yt] } } })(typeof window == "object" ? window : this) }, 2155(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.pad.ZeroPadding = { pad: function (d, f) { var h = f * 4; d.clamp(), d.sigBytes += h - (d.sigBytes % h || h) }, unpad: function (d) { for (var f = d.words, h = d.sigBytes - 1, h = d.sigBytes - 1; h >= 0; h--)if (f[h >>> 2] >>> 24 - h % 4 * 8 & 255) { d.sigBytes = h + 1; break } } }, p.pad.ZeroPadding }) }, 2169(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.mode.CFB = function () { var d = p.lib.BlockCipherMode.extend(); d.Encryptor = d.extend({ processBlock: function (h, P) { var b = this._cipher, u = b.blockSize; f.call(this, h, P, u, b), this._prevBlock = h.slice(P, P + u) } }), d.Decryptor = d.extend({ processBlock: function (h, P) { var b = this._cipher, u = b.blockSize, g = h.slice(P, P + u); f.call(this, h, P, u, b), this._prevBlock = g } }); function f(h, P, b, u) { var g, S = this._iv; S ? (g = S.slice(0), this._iv = void 0) : g = this._prevBlock, u.encryptBlock(g, 0); for (var R = 0; R < b; R++)h[P + R] ^= g[R] } return d }(), p.mode.CFB }) }, 2183(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Chrome111 = void 0; const p = l(7363), d = l(3953), f = l(2994), h = l(8046), P = l(4893), b = l(3303), u = l(5544), g = l(5938), S = l(4256), R = l(1305), y = new f.Logger("Chrome111"), v = "Chrome111", D = { OS: 1024, MIS: 1024 }; class M extends d.EnhancedEventEmitter { constructor({ direction: E, iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H, iceServers: V, iceTransportPolicy: ee, additionalSettings: K, getSendExtendedRtpCapabilities: N }) { super(); ve(this, "_closed", !1); ve(this, "_direction"); ve(this, "_remoteSdp"); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_forcedLocalDtlsRole"); ve(this, "_pc"); ve(this, "_mapMidTransceiver", new Map); ve(this, "_sendStream", new MediaStream); ve(this, "_hasDataChannelMediaSection", !1); ve(this, "_nextSendSctpStreamId", 0); ve(this, "_transportReady", !1); ve(this, "onIceGatheringStateChange", () => { this.emit("@icegatheringstatechange", this._pc.iceGatheringState) }); ve(this, "onIceCandidateError", E => { this.emit("@icecandidateerror", E) }); ve(this, "onConnectionStateChange", () => { this.emit("@connectionstatechange", this._pc.connectionState) }); ve(this, "onIceConnectionStateChange", () => { switch (this._pc.iceConnectionState) { case "checking": { this.emit("@connectionstatechange", "connecting"); break } case "connected": case "completed": { this.emit("@connectionstatechange", "connected"); break } case "failed": { this.emit("@connectionstatechange", "failed"); break } case "disconnected": { this.emit("@connectionstatechange", "disconnected"); break } case "closed": { this.emit("@connectionstatechange", "closed"); break } } }); y.debug("constructor()"), this._direction = E, this._remoteSdp = new R.RemoteSdp({ iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H }), this._getSendExtendedRtpCapabilities = N, L.role && L.role !== "auto" && (this._forcedLocalDtlsRole = L.role === "server" ? "client" : "server"), this._pc = new RTCPeerConnection({ iceServers: V ?? [], iceTransportPolicy: ee ?? "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require", ...K }), this._pc.addEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.addEventListener("icecandidateerror", this.onIceCandidateError), this._pc.connectionState ? this._pc.addEventListener("connectionstatechange", this.onConnectionStateChange) : (y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"), this._pc.addEventListener("iceconnectionstatechange", this.onIceConnectionStateChange)) } static createFactory() { return { name: v, factory: E => new M(E), getNativeRtpCapabilities: async () => { y.debug("getNativeRtpCapabilities()"); let E = new RTCPeerConnection({ iceServers: [], iceTransportPolicy: "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require" }); try { E.addTransceiver("audio"), E.addTransceiver("video", { sendEncodings: [{ scalabilityMode: "L3T3" }] }); const _ = await E.createOffer(); try { E.close() } catch { } E = void 0; const k = p.parse(_.sdp); return M.getLocalRtpCapabilities(k) } catch (_) { try { E == null || E.close() } catch { } throw E = void 0, _ } }, getNativeSctpCapabilities: async () => (y.debug("getNativeSctpCapabilities()"), { numStreams: D }) } } static getLocalRtpCapabilities(E) { const _ = u.extractRtpCapabilities({ sdpObject: E }); return h.validateAndNormalizeRtpCapabilities(_), S.addNackSupportForOpus(_), _ } get name() { return v } close() { if (y.debug("close()"), !this._closed) { this._closed = !0; try { this._pc.close() } catch { } this._pc.removeEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.removeEventListener("icecandidateerror", this.onIceCandidateError), this._pc.removeEventListener("connectionstatechange", this.onConnectionStateChange), this._pc.removeEventListener("iceconnectionstatechange", this.onIceConnectionStateChange), this.emit("@close"), super.close() } } async updateIceServers(E) { this.assertNotClosed(), y.debug("updateIceServers()"); const _ = this._pc.getConfiguration(); _.iceServers = E, this._pc.setConfiguration(_) } async restartIce(E) { if (this.assertNotClosed(), y.debug("restartIce()"), this._remoteSdp.updateIceParameters(E), !!this._transportReady) if (this._direction === "send") { const _ = await this._pc.createOffer({ iceRestart: !0 }); y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]", _), await this._pc.setLocalDescription(_); const k = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]", k), await this._pc.setRemoteDescription(k) } else { const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } } async getTransportStats() { return this.assertNotClosed(), this._pc.getStats() } async send({ track: E, encodings: _, codecOptions: k, codec: L, onRtpSender: H }) { if (this.assertNotClosed(), this.assertSendDirection(), y.debug("send() [kind:%s, track.id:%s]", E.kind, E.id), _ && _.length > 1) { let ue = 1; for (const ye of _) { const se = ye.scalabilityMode ? (0, b.parse)(ye.scalabilityMode).temporalLayers : 3; se > ue && (ue = se) } _.forEach((ye, se) => { ye.rid = `r${se}`, ye.scalabilityMode = `L1T${ue}` }) } const V = this._remoteSdp.getNextMediaSectionIdx(), ee = this._pc.addTransceiver(E, { direction: "sendonly", streams: [this._sendStream], sendEncodings: _ }); H && H(ee.sender); const K = await this._pc.createOffer(); let N = p.parse(K.sdp); N.extmapAllowMixed && this._remoteSdp.setSessionExtmapAllowMixed(); const B = M.getLocalRtpCapabilities(N), Q = this._getSendExtendedRtpCapabilities(B), Z = h.getSendingRtpParameters(E.kind, Q); Z.codecs = h.reduceCodecs(Z.codecs, L); const le = h.getSendingRemoteRtpParameters(E.kind, Q); le.codecs = h.reduceCodecs(le.codecs, L), this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: N }), y.debug("send() | calling pc.setLocalDescription() [offer:%o]", K), await this._pc.setLocalDescription(K); const X = ee.mid; Z.mid = X, N = p.parse(this._pc.localDescription.sdp); const ce = N.media[V.idx]; if (Z.rtcp.cname = u.getCname({ offerMediaObject: ce }), !_) Z.encodings = g.getRtpEncodings({ offerMediaObject: ce }); else if (_.length === 1) { const ue = g.getRtpEncodings({ offerMediaObject: ce }); Object.assign(ue[0], _[0]), Z.encodings = ue } else Z.encodings = _; this._remoteSdp.send({ offerMediaObject: ce, reuseMid: V.reuseMid, offerRtpParameters: Z, answerRtpParameters: le, codecOptions: k }); const he = { type: "answer", sdp: this._remoteSdp.getSdp() }; return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]", he), await this._pc.setRemoteDescription(he), this._mapMidTransceiver.set(X, ee), { localId: X, rtpParameters: Z, rtpSender: ee.sender } } async stopSending(E) { if (this.assertSendDirection(), y.debug("stopSending() [localId:%s]", E), this._closed) return; const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); if (_.sender.replaceTrack(null), this._pc.removeTrack(_.sender), this._remoteSdp.closeMediaSection(_.mid)) try { _.stop() } catch { } const L = await this._pc.createOffer(); y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]", L), await this._pc.setLocalDescription(L); const H = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]", H), await this._pc.setRemoteDescription(H), this._mapMidTransceiver.delete(E) } async pauseSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("pauseSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "inactive", this._remoteSdp.pauseMediaSection(E); const k = await this._pc.createOffer(); y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async resumeSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("resumeSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (this._remoteSdp.resumeSendingMediaSection(E), !_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "sendonly"; const k = await this._pc.createOffer(); y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async replaceTrack(E, _) { this.assertNotClosed(), this.assertSendDirection(), _ ? y.debug("replaceTrack() [localId:%s, track.id:%s]", E, _.id) : y.debug("replaceTrack() [localId:%s, no track]", E); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); await k.sender.replaceTrack(_) } async setMaxSpatialLayer(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { K <= _ ? ee.active = !0 : ee.active = !1 }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async setRtpEncodingParameters(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setRtpEncodingParameters() [localId:%s, params:%o]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { L.encodings[K] = { ...ee, ..._ } }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async getSenderStats(E) { this.assertNotClosed(), this.assertSendDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.sender.getStats() } async sendDataChannel({ ordered: E, maxPacketLifeTime: _, maxRetransmits: k, label: L, protocol: H }) { this.assertNotClosed(), this.assertSendDirection(); const V = { negotiated: !0, id: this._nextSendSctpStreamId, ordered: E, maxPacketLifeTime: _, maxRetransmits: k, protocol: H }; y.debug("sendDataChannel() [options:%o]", V); const ee = this._pc.createDataChannel(L, V); if (this._nextSendSctpStreamId = ++this._nextSendSctpStreamId % D.MIS, !this._hasDataChannelMediaSection) { const N = await this._pc.createOffer(), B = p.parse(N.sdp), Q = B.media.find(le => le.type === "application"); this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: B }), y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]", N), await this._pc.setLocalDescription(N), this._remoteSdp.sendSctpAssociation({ offerMediaObject: Q }); const Z = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Z), await this._pc.setRemoteDescription(Z), this._hasDataChannelMediaSection = !0 } const K = { streamId: V.id, ordered: V.ordered, maxPacketLifeTime: V.maxPacketLifeTime, maxRetransmits: V.maxRetransmits }; return { dataChannel: ee, sctpStreamParameters: K } } async receive(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = [], k = new Map; for (const ee of E) { const { trackId: K, kind: N, rtpParameters: B, streamId: Q } = ee; y.debug("receive() [trackId:%s, kind:%s]", K, N); const Z = B.mid ?? String(this._mapMidTransceiver.size); k.set(K, Z), this._remoteSdp.receive({ mid: Z, kind: N, offerRtpParameters: B, streamId: Q ?? B.rtcp.cname, trackId: K }) } const L = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]", L), await this._pc.setRemoteDescription(L); for (const ee of E) { const { trackId: K, onRtpReceiver: N } = ee; if (N) { const B = k.get(K), Q = this._pc.getTransceivers().find(Z => Z.mid === B); if (!Q) throw new Error("transceiver not found"); N(Q.receiver) } } let H = await this._pc.createAnswer(); const V = p.parse(H.sdp); for (const ee of E) { const { trackId: K, rtpParameters: N } = ee, B = k.get(K), Q = V.media.find(Z => String(Z.mid) === B); u.applyCodecParameters({ offerRtpParameters: N, answerMediaObject: Q }) } H = { type: "answer", sdp: p.write(V) }, this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: V }), y.debug("receive() | calling pc.setLocalDescription() [answer:%o]", H), await this._pc.setLocalDescription(H); for (const ee of E) { const { trackId: K } = ee, N = k.get(K), B = this._pc.getTransceivers().find(Q => Q.mid === N); if (B) this._mapMidTransceiver.set(N, B), _.push({ localId: N, track: B.receiver.track, rtpReceiver: B.receiver }); else throw new Error("new RTCRtpTransceiver not found") } return _ } async stopReceiving(E) { if (this.assertRecvDirection(), this._closed) return; for (const L of E) { y.debug("stopReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); this._remoteSdp.closeMediaSection(H.mid) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k); for (const L of E) this._mapMidTransceiver.delete(L) } async pauseReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("pauseReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "inactive", this._remoteSdp.pauseMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async resumeReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("resumeReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "recvonly", this._remoteSdp.resumeReceivingMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async getReceiverStats(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.receiver.getStats() } async receiveDataChannel({ sctpStreamParameters: E, label: _, protocol: k }) { this.assertNotClosed(), this.assertRecvDirection(); const { streamId: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee } = E, K = { negotiated: !0, id: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee, protocol: k }; y.debug("receiveDataChannel() [options:%o]", K); const N = this._pc.createDataChannel(_, K); if (!this._hasDataChannelMediaSection) { this._remoteSdp.receiveSctpAssociation(); const B = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]", B), await this._pc.setRemoteDescription(B); const Q = await this._pc.createAnswer(); if (!this._transportReady) { const Z = p.parse(Q.sdp); await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: Z }) } y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Q), await this._pc.setLocalDescription(Q), this._hasDataChannelMediaSection = !0 } return { dataChannel: N } } async setupTransport({ localDtlsRole: E, localSdpObject: _ }) { _ || (_ = p.parse(this._pc.localDescription.sdp)); const k = u.extractDtlsParameters({ sdpObject: _ }); k.role = E, this._remoteSdp.updateDtlsRole(E === "client" ? "server" : "client"), await new Promise((L, H) => { this.safeEmit("@connect", { dtlsParameters: k }, L, H) }), this._transportReady = !0 } assertNotClosed() { if (this._closed) throw new P.InvalidStateError("method called in a closed handler") } assertSendDirection() { if (this._direction !== "send") throw new Error('method can just be called for handlers with "send" direction') } assertRecvDirection() { if (this._direction !== "recv") throw new Error('method can just be called for handlers with "recv" direction') } } c.Chrome111 = M }, 2211(a) { var c = "0123456789", l = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz", p = "!$%^&*()_+|~-=`{}[]:;<>?,./"; function d(h) { return h || (h = {}), { length: h.length || 8, numeric: typeof h.numeric == "boolean" ? h.numeric : !0, letters: typeof h.letters == "boolean" ? h.letters : !0, special: typeof h.special == "boolean" ? h.special : !1, exclude: Array.isArray(h.exclude) ? h.exclude : [] } } function f(h) { var P = ""; h.numeric && (P += c), h.letters && (P += l), h.special && (P += p); for (var b = 0; b <= h.exclude.length; b++)P = P.replace(h.exclude[b], ""); return P } a.exports = function (P) { P = d(P); var b, u, g = "", S = P.length; P.exclude; var R = f(P); for (b = 1; b <= S; b++)g += R.substring(u = Math.floor(Math.random() * R.length), u + 1); return g } }, 2215(a, c, l) {
                var p, d;/*!
* JavaScript Cookie v2.2.1
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/(function (f) { var h; if (p = f, d = typeof p == "function" ? p.call(c, l, c, a) : p, d !== void 0 && (a.exports = d), h = !0, a.exports = f(), h = !0, !h) { var P = window.Cookies, b = window.Cookies = f(); b.noConflict = function () { return window.Cookies = P, b } } })(function () { function f() { for (var b = 0, u = {}; b < arguments.length; b++) { var g = arguments[b]; for (var S in g) u[S] = g[S] } return u } function h(b) { return b.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent) } function P(b) { function u() { } function g(R, y, v) { if (!(typeof document > "u")) { v = f({ path: "/" }, u.defaults, v), typeof v.expires == "number" && (v.expires = new Date(new Date * 1 + v.expires * 864e5)), v.expires = v.expires ? v.expires.toUTCString() : ""; try { var D = JSON.stringify(y); /^[\{\[]/.test(D) && (y = D) } catch { } y = b.write ? b.write(y, R) : encodeURIComponent(String(y)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), R = encodeURIComponent(String(R)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape); var M = ""; for (var W in v) v[W] && (M += "; " + W, v[W] !== !0 && (M += "=" + v[W].split(";")[0])); return document.cookie = R + "=" + y + M } } function S(R, y) { if (!(typeof document > "u")) { for (var v = {}, D = document.cookie ? document.cookie.split("; ") : [], M = 0; M < D.length; M++) { var W = D[M].split("="), I = W.slice(1).join("="); !y && I.charAt(0) === '"' && (I = I.slice(1, -1)); try { var E = h(W[0]); if (I = (b.read || b)(I, E) || h(I), y) try { I = JSON.parse(I) } catch { } if (v[E] = I, R === E) break } catch { } } return R ? v[R] : v } } return u.set = g, u.get = function (R) { return S(R, !1) }, u.getJSON = function (R) { return S(R, !0) }, u.remove = function (R, y) { g(R, "", f(y, { expires: -1 })) }, u.defaults = {}, u.withConverter = P, u } return P(function () { }) })
            }, 2284(a, c, l) { l.d(c, { A: () => p }); function p(d) { "@babel/helpers - typeof"; return p = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function (f) { return typeof f } : function (f) { return f && typeof Symbol == "function" && f.constructor === Symbol && f !== Symbol.prototype ? "symbol" : typeof f }, p(d) } }, 2292(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Firefox120 = void 0; const p = l(7363), d = l(3953), f = l(2994), h = l(4893), P = l(8046), b = l(3303), u = l(5544), g = l(5938), S = l(1305), R = new f.Logger("Firefox120"), y = "Firefox120", v = { OS: 16, MIS: 2048 }; class D extends d.EnhancedEventEmitter { constructor({ direction: I, iceParameters: E, iceCandidates: _, dtlsParameters: k, sctpParameters: L, iceServers: H, iceTransportPolicy: V, additionalSettings: ee, getSendExtendedRtpCapabilities: K }) { super(); ve(this, "_closed", !1); ve(this, "_direction"); ve(this, "_remoteSdp"); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_pc"); ve(this, "_mapMidTransceiver", new Map); ve(this, "_sendStream", new MediaStream); ve(this, "_hasDataChannelMediaSection", !1); ve(this, "_nextSendSctpStreamId", 0); ve(this, "_transportReady", !1); ve(this, "onIceGatheringStateChange", () => { this.emit("@icegatheringstatechange", this._pc.iceGatheringState) }); ve(this, "onIceCandidateError", I => { this.emit("@icecandidateerror", I) }); ve(this, "onConnectionStateChange", () => { this.emit("@connectionstatechange", this._pc.connectionState) }); ve(this, "onIceConnectionStateChange", () => { switch (this._pc.iceConnectionState) { case "checking": { this.emit("@connectionstatechange", "connecting"); break } case "connected": case "completed": { this.emit("@connectionstatechange", "connected"); break } case "failed": { this.emit("@connectionstatechange", "failed"); break } case "disconnected": { this.emit("@connectionstatechange", "disconnected"); break } case "closed": { this.emit("@connectionstatechange", "closed"); break } } }); R.debug("constructor()"), this._direction = I, this._remoteSdp = new S.RemoteSdp({ iceParameters: E, iceCandidates: _, dtlsParameters: k, sctpParameters: L }), this._getSendExtendedRtpCapabilities = K, this._pc = new RTCPeerConnection({ iceServers: H ?? [], iceTransportPolicy: V ?? "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require", ...ee }), this._pc.addEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.addEventListener("icecandidateerror", this.onIceCandidateError), this._pc.connectionState ? this._pc.addEventListener("connectionstatechange", this.onConnectionStateChange) : (R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"), this._pc.addEventListener("iceconnectionstatechange", this.onIceConnectionStateChange)) } static createFactory() { return { name: y, factory: I => new D(I), getNativeRtpCapabilities: async () => { R.debug("getNativeRtpCapabilities()"); let I = new RTCPeerConnection({ iceServers: [], iceTransportPolicy: "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require" }); const E = document.createElement("canvas"); E.getContext("2d"); const k = E.captureStream().getVideoTracks()[0]; try { I.addTransceiver("audio", { direction: "sendrecv" }), I.addTransceiver(k, { direction: "sendrecv", sendEncodings: [{ rid: "r0", maxBitrate: 1e5 }, { rid: "r1", maxBitrate: 5e5 }] }); const L = await I.createOffer(); try { E.remove() } catch { } try { k.stop() } catch { } try { I.close() } catch { } I = void 0; const H = p.parse(L.sdp); return D.getLocalRtpCapabilities(H) } catch (L) { try { E.remove() } catch { } try { k.stop() } catch { } try { I == null || I.close() } catch { } throw I = void 0, L } }, getNativeSctpCapabilities: async () => (R.debug("getNativeSctpCapabilities()"), { numStreams: v }) } } static getLocalRtpCapabilities(I) { const E = u.extractRtpCapabilities({ sdpObject: I }); return P.validateAndNormalizeRtpCapabilities(E), E } get name() { return y } close() { if (R.debug("close()"), !this._closed) { this._closed = !0; try { this._pc.close() } catch { } this._pc.removeEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.removeEventListener("icecandidateerror", this.onIceCandidateError), this._pc.removeEventListener("connectionstatechange", this.onConnectionStateChange), this._pc.removeEventListener("iceconnectionstatechange", this.onIceConnectionStateChange), this.emit("@close"), super.close() } } async updateIceServers(I) { throw this.assertNotClosed(), new h.UnsupportedError("not supported") } async restartIce(I) { if (this.assertNotClosed(), R.debug("restartIce()"), this._remoteSdp.updateIceParameters(I), !!this._transportReady) if (this._direction === "send") { const E = await this._pc.createOffer({ iceRestart: !0 }); R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]", E), await this._pc.setLocalDescription(E); const _ = { type: "answer", sdp: this._remoteSdp.getSdp() }; R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]", _), await this._pc.setRemoteDescription(_) } else { const E = { type: "offer", sdp: this._remoteSdp.getSdp() }; R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]", E), await this._pc.setRemoteDescription(E); const _ = await this._pc.createAnswer(); R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]", _), await this._pc.setLocalDescription(_) } } async getTransportStats() { return this.assertNotClosed(), this._pc.getStats() } async send({ track: I, encodings: E, codecOptions: _, codec: k, onRtpSender: L }) { this.assertNotClosed(), this.assertSendDirection(), R.debug("send() [kind:%s, track.id:%s]", I.kind, I.id), E && E.length > 1 && E.forEach((he, ue) => { he.rid = `r${ue}` }); const H = this._pc.addTransceiver(I, { direction: "sendonly", streams: [this._sendStream], sendEncodings: E }); L && L(H.sender); const V = await this._pc.createOffer(); let ee = p.parse(V.sdp); ee.extmapAllowMixed && this._remoteSdp.setSessionExtmapAllowMixed(); const K = D.getLocalRtpCapabilities(ee), N = this._getSendExtendedRtpCapabilities(K), B = P.getSendingRtpParameters(I.kind, N); B.codecs = P.reduceCodecs(B.codecs, k); const Q = P.getSendingRemoteRtpParameters(I.kind, N); Q.codecs = P.reduceCodecs(Q.codecs, k), this._transportReady || await this.setupTransport({ localDtlsRole: "client", localSdpObject: ee }); const Z = (0, b.parse)((E ?? [{}])[0].scalabilityMode); R.debug("send() | calling pc.setLocalDescription() [offer:%o]", V), await this._pc.setLocalDescription(V); const le = H.mid; B.mid = le, ee = p.parse(this._pc.localDescription.sdp); const X = ee.media[ee.media.length - 1]; if (B.rtcp.cname = u.getCname({ offerMediaObject: X }), !E) B.encodings = g.getRtpEncodings({ offerMediaObject: X }); else if (E.length === 1) { const he = g.getRtpEncodings({ offerMediaObject: X }); Object.assign(he[0], E[0]), B.encodings = he } else B.encodings = E; if (B.encodings.length > 1 && (B.codecs[0].mimeType.toLowerCase() === "video/vp8" || B.codecs[0].mimeType.toLowerCase() === "video/h264")) for (const he of B.encodings) he.scalabilityMode ? he.scalabilityMode = `L1T${Z.temporalLayers}` : he.scalabilityMode = "L1T3"; this._remoteSdp.send({ offerMediaObject: X, offerRtpParameters: B, answerRtpParameters: Q, codecOptions: _ }); const ce = { type: "answer", sdp: this._remoteSdp.getSdp() }; return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]", ce), await this._pc.setRemoteDescription(ce), this._mapMidTransceiver.set(le, H), { localId: le, rtpParameters: B, rtpSender: H.sender } } async stopSending(I) { if (this.assertSendDirection(), R.debug("stopSending() [localId:%s]", I), this._closed) return; const E = this._mapMidTransceiver.get(I); if (!E) throw new Error("associated transceiver not found"); E.sender.replaceTrack(null), this._pc.removeTrack(E.sender), this._remoteSdp.disableMediaSection(E.mid); const _ = await this._pc.createOffer(); R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]", _), await this._pc.setLocalDescription(_); const k = { type: "answer", sdp: this._remoteSdp.getSdp() }; R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]", k), await this._pc.setRemoteDescription(k), this._mapMidTransceiver.delete(I) } async pauseSending(I) { this.assertNotClosed(), this.assertSendDirection(), R.debug("pauseSending() [localId:%s]", I); const E = this._mapMidTransceiver.get(I); if (!E) throw new Error("associated RTCRtpTransceiver not found"); E.direction = "inactive", this._remoteSdp.pauseMediaSection(I); const _ = await this._pc.createOffer(); R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]", _), await this._pc.setLocalDescription(_); const k = { type: "answer", sdp: this._remoteSdp.getSdp() }; R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]", k), await this._pc.setRemoteDescription(k) } async resumeSending(I) { this.assertNotClosed(), this.assertSendDirection(), R.debug("resumeSending() [localId:%s]", I); const E = this._mapMidTransceiver.get(I); if (!E) throw new Error("associated RTCRtpTransceiver not found"); E.direction = "sendonly", this._remoteSdp.resumeSendingMediaSection(I); const _ = await this._pc.createOffer(); R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]", _), await this._pc.setLocalDescription(_); const k = { type: "answer", sdp: this._remoteSdp.getSdp() }; R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]", k), await this._pc.setRemoteDescription(k) } async replaceTrack(I, E) { this.assertNotClosed(), this.assertSendDirection(), E ? R.debug("replaceTrack() [localId:%s, track.id:%s]", I, E.id) : R.debug("replaceTrack() [localId:%s, no track]", I); const _ = this._mapMidTransceiver.get(I); if (!_) throw new Error("associated RTCRtpTransceiver not found"); await _.sender.replaceTrack(E) } async setMaxSpatialLayer(I, E) { this.assertNotClosed(), this.assertSendDirection(), R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]", I, E); const _ = this._mapMidTransceiver.get(I); if (!_) throw new Error("associated transceiver not found"); const k = _.sender.getParameters(); k.encodings.forEach((V, ee) => { ee <= E ? V.active = !0 : V.active = !1 }), await _.sender.setParameters(k), this._remoteSdp.muxMediaSectionSimulcast(I, k.encodings); const L = await this._pc.createOffer(); R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]", L), await this._pc.setLocalDescription(L); const H = { type: "answer", sdp: this._remoteSdp.getSdp() }; R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]", H), await this._pc.setRemoteDescription(H) } async setRtpEncodingParameters(I, E) { this.assertNotClosed(), this.assertSendDirection(), R.debug("setRtpEncodingParameters() [localId:%s, params:%o]", I, E); const _ = this._mapMidTransceiver.get(I); if (!_) throw new Error("associated RTCRtpTransceiver not found"); const k = _.sender.getParameters(); k.encodings.forEach((V, ee) => { k.encodings[ee] = { ...V, ...E } }), await _.sender.setParameters(k), this._remoteSdp.muxMediaSectionSimulcast(I, k.encodings); const L = await this._pc.createOffer(); R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]", L), await this._pc.setLocalDescription(L); const H = { type: "answer", sdp: this._remoteSdp.getSdp() }; R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]", H), await this._pc.setRemoteDescription(H) } async getSenderStats(I) { this.assertNotClosed(), this.assertSendDirection(); const E = this._mapMidTransceiver.get(I); if (!E) throw new Error("associated RTCRtpTransceiver not found"); return E.sender.getStats() } async sendDataChannel({ ordered: I, maxPacketLifeTime: E, maxRetransmits: _, label: k, protocol: L }) { this.assertNotClosed(), this.assertSendDirection(); const H = { negotiated: !0, id: this._nextSendSctpStreamId, ordered: I, maxPacketLifeTime: E, maxRetransmits: _, protocol: L }; R.debug("sendDataChannel() [options:%o]", H); const V = this._pc.createDataChannel(k, H); if (this._nextSendSctpStreamId = ++this._nextSendSctpStreamId % v.MIS, !this._hasDataChannelMediaSection) { const K = await this._pc.createOffer(), N = p.parse(K.sdp), B = N.media.find(Z => Z.type === "application"); this._transportReady || await this.setupTransport({ localDtlsRole: "client", localSdpObject: N }), R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]", K), await this._pc.setLocalDescription(K), this._remoteSdp.sendSctpAssociation({ offerMediaObject: B }); const Q = { type: "answer", sdp: this._remoteSdp.getSdp() }; R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Q), await this._pc.setRemoteDescription(Q), this._hasDataChannelMediaSection = !0 } const ee = { streamId: H.id, ordered: H.ordered, maxPacketLifeTime: H.maxPacketLifeTime, maxRetransmits: H.maxRetransmits }; return { dataChannel: V, sctpStreamParameters: ee } } async receive(I) { this.assertNotClosed(), this.assertRecvDirection(); const E = [], _ = new Map; for (const V of I) { const { trackId: ee, kind: K, rtpParameters: N, streamId: B } = V; R.debug("receive() [trackId:%s, kind:%s]", ee, K); const Q = N.mid ?? String(this._mapMidTransceiver.size); _.set(ee, Q), this._remoteSdp.receive({ mid: Q, kind: K, offerRtpParameters: N, streamId: B ?? N.rtcp.cname, trackId: ee }) } const k = { type: "offer", sdp: this._remoteSdp.getSdp() }; R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]", k), await this._pc.setRemoteDescription(k); for (const V of I) { const { trackId: ee, onRtpReceiver: K } = V; if (K) { const N = _.get(ee), B = this._pc.getTransceivers().find(Q => Q.mid === N); if (!B) throw new Error("transceiver not found"); K(B.receiver) } } let L = await this._pc.createAnswer(); const H = p.parse(L.sdp); for (const V of I) { const { trackId: ee, rtpParameters: K } = V, N = _.get(ee), B = H.media.find(Q => String(Q.mid) === N); u.applyCodecParameters({ offerRtpParameters: K, answerMediaObject: B }), L = { type: "answer", sdp: p.write(H) } } this._transportReady || await this.setupTransport({ localDtlsRole: "client", localSdpObject: H }), R.debug("receive() | calling pc.setLocalDescription() [answer:%o]", L), await this._pc.setLocalDescription(L); for (const V of I) { const { trackId: ee } = V, K = _.get(ee), N = this._pc.getTransceivers().find(B => B.mid === K); if (!N) throw new Error("new RTCRtpTransceiver not found"); this._mapMidTransceiver.set(K, N), E.push({ localId: K, track: N.receiver.track, rtpReceiver: N.receiver }) } return E } async stopReceiving(I) { if (this.assertRecvDirection(), this._closed) return; for (const k of I) { R.debug("stopReceiving() [localId:%s]", k); const L = this._mapMidTransceiver.get(k); if (!L) throw new Error("associated RTCRtpTransceiver not found"); this._remoteSdp.closeMediaSection(L.mid) } const E = { type: "offer", sdp: this._remoteSdp.getSdp() }; R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]", E), await this._pc.setRemoteDescription(E); const _ = await this._pc.createAnswer(); R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]", _), await this._pc.setLocalDescription(_); for (const k of I) this._mapMidTransceiver.delete(k) } async pauseReceiving(I) { this.assertNotClosed(), this.assertRecvDirection(); for (const k of I) { R.debug("pauseReceiving() [localId:%s]", k); const L = this._mapMidTransceiver.get(k); if (!L) throw new Error("associated RTCRtpTransceiver not found"); L.direction = "inactive", this._remoteSdp.pauseMediaSection(k) } const E = { type: "offer", sdp: this._remoteSdp.getSdp() }; R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]", E), await this._pc.setRemoteDescription(E); const _ = await this._pc.createAnswer(); R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]", _), await this._pc.setLocalDescription(_) } async resumeReceiving(I) { this.assertNotClosed(), this.assertRecvDirection(); for (const k of I) { R.debug("resumeReceiving() [localId:%s]", k); const L = this._mapMidTransceiver.get(k); if (!L) throw new Error("associated RTCRtpTransceiver not found"); L.direction = "recvonly", this._remoteSdp.resumeReceivingMediaSection(k) } const E = { type: "offer", sdp: this._remoteSdp.getSdp() }; R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]", E), await this._pc.setRemoteDescription(E); const _ = await this._pc.createAnswer(); R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]", _), await this._pc.setLocalDescription(_) } async getReceiverStats(I) { this.assertRecvDirection(); const E = this._mapMidTransceiver.get(I); if (!E) throw new Error("associated RTCRtpTransceiver not found"); return E.receiver.getStats() } async receiveDataChannel({ sctpStreamParameters: I, label: E, protocol: _ }) { this.assertNotClosed(), this.assertRecvDirection(); const { streamId: k, ordered: L, maxPacketLifeTime: H, maxRetransmits: V } = I, ee = { negotiated: !0, id: k, ordered: L, maxPacketLifeTime: H, maxRetransmits: V, protocol: _ }; R.debug("receiveDataChannel() [options:%o]", ee); const K = this._pc.createDataChannel(E, ee); if (!this._hasDataChannelMediaSection) { this._remoteSdp.receiveSctpAssociation(); const N = { type: "offer", sdp: this._remoteSdp.getSdp() }; R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]", N), await this._pc.setRemoteDescription(N); const B = await this._pc.createAnswer(); if (!this._transportReady) { const Q = p.parse(B.sdp); await this.setupTransport({ localDtlsRole: "client", localSdpObject: Q }) } R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]", B), await this._pc.setLocalDescription(B), this._hasDataChannelMediaSection = !0 } return { dataChannel: K } } async setupTransport({ localDtlsRole: I, localSdpObject: E }) { E || (E = p.parse(this._pc.localDescription.sdp)); const _ = u.extractDtlsParameters({ sdpObject: E }); _.role = I, this._remoteSdp.updateDtlsRole(I === "client" ? "server" : "client"), await new Promise((k, L) => { this.safeEmit("@connect", { dtlsParameters: _ }, k, L) }), this._transportReady = !0 } assertNotClosed() { if (this._closed) throw new h.InvalidStateError("method called in a closed handler") } assertSendDirection() { if (this._direction !== "send") throw new Error('method can just be called for handlers with "send" direction') } assertRecvDirection() { if (this._direction !== "recv") throw new Error('method can just be called for handlers with "recv" direction') } } c.Firefox120 = D }, 2614(a, c) { for (var l = 256, p = [], d; l--;)p[l] = (l + 256).toString(16).substring(1); function f() { var h = 0, P, b = ""; if (!d || l + 16 > 256) { for (d = Array(h = 256); h--;)d[h] = 256 * Math.random() | 0; h = l = 0 } for (; h < 16; h++)P = d[l + h], h == 6 ? b += p[P & 15 | 64] : h == 8 ? b += p[P & 63 | 128] : b += p[P], h & 1 && h > 1 && h < 11 && (b += "-"); return l++, b } c.v4 = f }, 2696(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(754), l(4636), l(9506), l(7165)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.StreamCipher, P = d.algo, b = [], u = [], g = [], S = P.RabbitLegacy = h.extend({ _doReset: function () { var y = this._key.words, v = this.cfg.iv, D = this._X = [y[0], y[3] << 16 | y[2] >>> 16, y[1], y[0] << 16 | y[3] >>> 16, y[2], y[1] << 16 | y[0] >>> 16, y[3], y[2] << 16 | y[1] >>> 16], M = this._C = [y[2] << 16 | y[2] >>> 16, y[0] & 4294901760 | y[1] & 65535, y[3] << 16 | y[3] >>> 16, y[1] & 4294901760 | y[2] & 65535, y[0] << 16 | y[0] >>> 16, y[2] & 4294901760 | y[3] & 65535, y[1] << 16 | y[1] >>> 16, y[3] & 4294901760 | y[0] & 65535]; this._b = 0; for (var W = 0; W < 4; W++)R.call(this); for (var W = 0; W < 8; W++)M[W] ^= D[W + 4 & 7]; if (v) { var I = v.words, E = I[0], _ = I[1], k = (E << 8 | E >>> 24) & 16711935 | (E << 24 | E >>> 8) & 4278255360, L = (_ << 8 | _ >>> 24) & 16711935 | (_ << 24 | _ >>> 8) & 4278255360, H = k >>> 16 | L & 4294901760, V = L << 16 | k & 65535; M[0] ^= k, M[1] ^= H, M[2] ^= L, M[3] ^= V, M[4] ^= k, M[5] ^= H, M[6] ^= L, M[7] ^= V; for (var W = 0; W < 4; W++)R.call(this) } }, _doProcessBlock: function (y, v) { var D = this._X; R.call(this), b[0] = D[0] ^ D[5] >>> 16 ^ D[3] << 16, b[1] = D[2] ^ D[7] >>> 16 ^ D[5] << 16, b[2] = D[4] ^ D[1] >>> 16 ^ D[7] << 16, b[3] = D[6] ^ D[3] >>> 16 ^ D[1] << 16; for (var M = 0; M < 4; M++)b[M] = (b[M] << 8 | b[M] >>> 24) & 16711935 | (b[M] << 24 | b[M] >>> 8) & 4278255360, y[v + M] ^= b[M] }, blockSize: 128 / 32, ivSize: 64 / 32 }); function R() { for (var y = this._X, v = this._C, D = 0; D < 8; D++)u[D] = v[D]; v[0] = v[0] + 1295307597 + this._b | 0, v[1] = v[1] + 3545052371 + (v[0] >>> 0 < u[0] >>> 0 ? 1 : 0) | 0, v[2] = v[2] + 886263092 + (v[1] >>> 0 < u[1] >>> 0 ? 1 : 0) | 0, v[3] = v[3] + 1295307597 + (v[2] >>> 0 < u[2] >>> 0 ? 1 : 0) | 0, v[4] = v[4] + 3545052371 + (v[3] >>> 0 < u[3] >>> 0 ? 1 : 0) | 0, v[5] = v[5] + 886263092 + (v[4] >>> 0 < u[4] >>> 0 ? 1 : 0) | 0, v[6] = v[6] + 1295307597 + (v[5] >>> 0 < u[5] >>> 0 ? 1 : 0) | 0, v[7] = v[7] + 3545052371 + (v[6] >>> 0 < u[6] >>> 0 ? 1 : 0) | 0, this._b = v[7] >>> 0 < u[7] >>> 0 ? 1 : 0; for (var D = 0; D < 8; D++) { var M = y[D] + v[D], W = M & 65535, I = M >>> 16, E = ((W * W >>> 17) + W * I >>> 15) + I * I, _ = ((M & 4294901760) * M | 0) + ((M & 65535) * M | 0); g[D] = E ^ _ } y[0] = g[0] + (g[7] << 16 | g[7] >>> 16) + (g[6] << 16 | g[6] >>> 16) | 0, y[1] = g[1] + (g[0] << 8 | g[0] >>> 24) + g[7] | 0, y[2] = g[2] + (g[1] << 16 | g[1] >>> 16) + (g[0] << 16 | g[0] >>> 16) | 0, y[3] = g[3] + (g[2] << 8 | g[2] >>> 24) + g[1] | 0, y[4] = g[4] + (g[3] << 16 | g[3] >>> 16) + (g[2] << 16 | g[2] >>> 16) | 0, y[5] = g[5] + (g[4] << 8 | g[4] >>> 24) + g[3] | 0, y[6] = g[6] + (g[5] << 16 | g[5] >>> 16) + (g[4] << 16 | g[4] >>> 16) | 0, y[7] = g[7] + (g[6] << 8 | g[6] >>> 24) + g[5] | 0 } d.RabbitLegacy = h._createHelper(S) }(), p.RabbitLegacy }) }, 2731(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.FakeHandler = void 0; const p = l(5328), d = l(3953), f = l(2994), h = l(1765), P = l(8046), b = l(4893), u = l(3051), g = new f.Logger("FakeHandler"), S = "FakeHandler"; class R extends d.EnhancedEventEmitter { constructor({ getSendExtendedRtpCapabilities: M }, W) { super(); ve(this, "_closed", !1); ve(this, "_fakeParameters"); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_cname", `CNAME-${h.generateRandomNumber()}`); ve(this, "_transportReady", !1); ve(this, "_nextLocalId", 1); ve(this, "_tracks", new Map); ve(this, "_nextSctpStreamId", 0); g.debug("constructor()"), this._getSendExtendedRtpCapabilities = M, this._fakeParameters = W } static createFactory(M) { return { name: S, factory: W => new R(W, M), getNativeRtpCapabilities: async () => (g.debug("getNativeRtpCapabilities()"), R.getLocalRtpCapabilities(M)), getNativeSctpCapabilities: async () => (g.debug("getNativeSctpCapabilities()"), M.generateNativeSctpCapabilities()) } } static getLocalRtpCapabilities(M) { const W = M.generateNativeRtpCapabilities(); return P.validateAndNormalizeRtpCapabilities(W), W } get name() { return S } close() { g.debug("close()"), !this._closed && (this._closed = !0, super.close()) } setIceGatheringState(M) { this.emit("@icegatheringstatechange", M) } setConnectionState(M) { this.emit("@connectionstatechange", M) } async updateIceServers(M) { this.assertNotClosed(), g.debug("updateIceServers()") } async restartIce(M) { this.assertNotClosed(), g.debug("restartIce()") } async getTransportStats() { return this.assertNotClosed(), new Map } async send({ track: M, encodings: W, codecOptions: I, codec: E }) { this.assertNotClosed(), g.debug("send() [kind:%s, track.id:%s]", M.kind, M.id), this._transportReady || await this.setupTransport({ localDtlsRole: "server" }); const _ = R.getLocalRtpCapabilities(this._fakeParameters), k = this._getSendExtendedRtpCapabilities(_), L = P.getSendingRtpParameters(M.kind, k); L.codecs = P.reduceCodecs(L.codecs, E); const H = L.codecs.some(ee => /.+\/rtx$/i.test(ee.mimeType)); L.mid = `mid-${h.generateRandomNumber()}`, W || (W = [{}]); for (const ee of W) ee.ssrc = h.generateRandomNumber(), H && (ee.rtx = { ssrc: h.generateRandomNumber() }); L.encodings = W, L.rtcp = { cname: this._cname, reducedSize: !0, mux: !0 }; const V = this._nextLocalId++; return this._tracks.set(V, M), { localId: String(V), rtpParameters: L } } async stopSending(M) { if (g.debug("stopSending() [localId:%s]", M), !this._closed) { if (!this._tracks.has(Number(M))) throw new Error("local track not found"); this._tracks.delete(Number(M)) } } async pauseSending(M) { this.assertNotClosed() } async resumeSending(M) { this.assertNotClosed() } async replaceTrack(M, W) { this.assertNotClosed(), W ? g.debug("replaceTrack() [localId:%s, track.id:%s]", M, W.id) : g.debug("replaceTrack() [localId:%s, no track]", M), this._tracks.delete(Number(M)), this._tracks.set(Number(M), W) } async setMaxSpatialLayer(M, W) { this.assertNotClosed(), g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]", M, W) } async setRtpEncodingParameters(M, W) { this.assertNotClosed(), g.debug("setRtpEncodingParameters() [localId:%s, params:%o]", M, W) } async getSenderStats(M) { return this.assertNotClosed(), new Map } async sendDataChannel({ ordered: M, maxPacketLifeTime: W, maxRetransmits: I, label: E, protocol: _ }) { this.assertNotClosed(), this._transportReady || await this.setupTransport({ localDtlsRole: "server" }), g.debug("sendDataChannel()"); const k = new y({ id: this._nextSctpStreamId++, ordered: M, maxPacketLifeTime: W, maxRetransmits: I, label: E, protocol: _ }), L = { streamId: this._nextSctpStreamId, ordered: M, maxPacketLifeTime: W, maxRetransmits: I }; return { dataChannel: k, sctpStreamParameters: L } } async receive(M) { this.assertNotClosed(); const W = []; for (const I of M) { const { trackId: E, kind: _ } = I; this._transportReady || await this.setupTransport({ localDtlsRole: "client" }), g.debug("receive() [trackId:%s, kind:%s]", E, _); const k = this._nextLocalId++, L = new p.FakeMediaStreamTrack({ kind: _ }); this._tracks.set(k, L), W.push({ localId: String(k), track: L }) } return W } async stopReceiving(M) { if (!this._closed) for (const W of M) g.debug("stopReceiving() [localId:%s]", W), this._tracks.delete(Number(W)) } async pauseReceiving(M) { this.assertNotClosed() } async resumeReceiving(M) { this.assertNotClosed() } async getReceiverStats(M) { return this.assertNotClosed(), new Map } async receiveDataChannel({ sctpStreamParameters: M, label: W, protocol: I }) { return this.assertNotClosed(), this._transportReady || await this.setupTransport({ localDtlsRole: "client" }), g.debug("receiveDataChannel()"), { dataChannel: new y({ id: M.streamId, ordered: M.ordered, maxPacketLifeTime: M.maxPacketLifeTime, maxRetransmits: M.maxRetransmits, label: W, protocol: I }) } } async setupTransport({ localDtlsRole: M, localSdpObject: W }) { const I = h.clone(this._fakeParameters.generateLocalDtlsParameters()); M && (I.role = M), this.emit("@connectionstatechange", "connecting"), await new Promise((E, _) => this.emit("@connect", { dtlsParameters: I }, E, _)), this._transportReady = !0 } assertNotClosed() { if (this._closed) throw new b.InvalidStateError("method called in a closed handler") } } c.FakeHandler = R; class y extends u.FakeEventTarget { constructor({ id: M, ordered: W = !0, maxPacketLifeTime: I = null, maxRetransmits: E = null, label: _ = "", protocol: k = "" }) { super(); ve(this, "_id"); ve(this, "_negotiated", !0); ve(this, "_ordered"); ve(this, "_maxPacketLifeTime"); ve(this, "_maxRetransmits"); ve(this, "_label"); ve(this, "_protocol"); ve(this, "_readyState", "connecting"); ve(this, "_bufferedAmount", 0); ve(this, "_bufferedAmountLowThreshold", 0); ve(this, "_binaryType", "arraybuffer"); ve(this, "_onopen", null); ve(this, "_onclosing", null); ve(this, "_onclose", null); ve(this, "_onmessage", null); ve(this, "_onbufferedamountlow", null); ve(this, "_onerror", null); g.debug(`constructor() [id:${M}, ordered:${W}, maxPacketLifeTime:${I}, maxRetransmits:${E}, label:${_}, protocol:${k}`), this._id = M, this._ordered = W, this._maxPacketLifeTime = I, this._maxRetransmits = E, this._label = _, this._protocol = k } get id() { return this._id } get negotiated() { return this._negotiated } get ordered() { return this._ordered } get maxPacketLifeTime() { return this._maxPacketLifeTime } get maxRetransmits() { return this._maxRetransmits } get label() { return this._label } get protocol() { return this._protocol } get readyState() { return this._readyState } get bufferedAmount() { return this._bufferedAmount } get bufferedAmountLowThreshold() { return this._bufferedAmountLowThreshold } set bufferedAmountLowThreshold(M) { this._bufferedAmountLowThreshold = M } get binaryType() { return this._binaryType } set binaryType(M) { this._binaryType = M } get onopen() { return this._onopen } set onopen(M) { this._onopen && this.removeEventListener("open", this._onopen), this._onopen = M, M && this.addEventListener("open", M) } get onclosing() { return this._onclosing } set onclosing(M) { this._onclosing && this.removeEventListener("closing", this._onclosing), this._onclosing = M, M && this.addEventListener("closing", M) } get onclose() { return this._onclose } set onclose(M) { this._onclose && this.removeEventListener("close", this._onclose), this._onclose = M, M && this.addEventListener("close", M) } get onmessage() { return this._onmessage } set onmessage(M) { this._onmessage && this.removeEventListener("message", this._onmessage), this._onmessage = M, M && this.addEventListener("message", M) } get onbufferedamountlow() { return this._onbufferedamountlow } set onbufferedamountlow(M) { this._onbufferedamountlow && this.removeEventListener("bufferedamountlow", this._onbufferedamountlow), this._onbufferedamountlow = M, M && this.addEventListener("bufferedamountlow", M) } get onerror() { return this._onerror } set onerror(M) { this._onerror && this.removeEventListener("error", this._onerror), this._onerror = M, M && this.addEventListener("error", M) } addEventListener(M, W, I) { super.addEventListener(M, W, I) } removeEventListener(M, W, I) { super.removeEventListener(M, W, I) } close() { ["closing", "closed"].includes(this._readyState) || (this._readyState = "closed") } send(M) { if (this._readyState !== "open") throw new b.InvalidStateError("not open") } } }, 2901(a, c, l) { l.d(c, { A: () => f }); var p = l(816); function d(h, P) { for (var b = 0; b < P.length; b++) { var u = P[b]; u.enumerable = u.enumerable || !1, u.configurable = !0, "value" in u && (u.writable = !0), Object.defineProperty(h, (0, p.A)(u.key), u) } } function f(h, P, b) { return P && d(h.prototype, P), b && d(h, b), Object.defineProperty(h, "prototype", { writable: !1 }), h } }, 2994(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Logger = void 0; const p = l(7833), d = "mediasoup-client"; class f { constructor(P) { ve(this, "_debug"); ve(this, "_warn"); ve(this, "_error"); P ? (this._debug = (0, p.default)(`${d}:${P}`), this._warn = (0, p.default)(`${d}:WARN:${P}`), this._error = (0, p.default)(`${d}:ERROR:${P}`)) : (this._debug = (0, p.default)(d), this._warn = (0, p.default)(`${d}:WARN`), this._error = (0, p.default)(`${d}:ERROR`)), this._debug.log = console.info.bind(console), this._warn.log = console.warn.bind(console), this._error.log = console.error.bind(console) } get debug() { return this._debug } get warn() { return this._warn } get error() { return this._error } } c.Logger = f }, 3009(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function (d) { var f = p, h = f.lib, P = h.WordArray, b = h.Hasher, u = f.algo, g = [], S = []; (function () { function v(I) { for (var E = d.sqrt(I), _ = 2; _ <= E; _++)if (!(I % _)) return !1; return !0 } function D(I) { return (I - (I | 0)) * 4294967296 | 0 } for (var M = 2, W = 0; W < 64;)v(M) && (W < 8 && (g[W] = D(d.pow(M, .5))), S[W] = D(d.pow(M, .3333333333333333)), W++), M++ })(); var R = [], y = u.SHA256 = b.extend({ _doReset: function () { this._hash = new P.init(g.slice(0)) }, _doProcessBlock: function (v, D) { for (var M = this._hash.words, W = M[0], I = M[1], E = M[2], _ = M[3], k = M[4], L = M[5], H = M[6], V = M[7], ee = 0; ee < 64; ee++) { if (ee < 16) R[ee] = v[D + ee] | 0; else { var K = R[ee - 15], N = (K << 25 | K >>> 7) ^ (K << 14 | K >>> 18) ^ K >>> 3, B = R[ee - 2], Q = (B << 15 | B >>> 17) ^ (B << 13 | B >>> 19) ^ B >>> 10; R[ee] = N + R[ee - 7] + Q + R[ee - 16] } var Z = k & L ^ ~k & H, le = W & I ^ W & E ^ I & E, X = (W << 30 | W >>> 2) ^ (W << 19 | W >>> 13) ^ (W << 10 | W >>> 22), ce = (k << 26 | k >>> 6) ^ (k << 21 | k >>> 11) ^ (k << 7 | k >>> 25), he = V + ce + Z + S[ee] + R[ee], ue = X + le; V = H, H = L, L = k, k = _ + he | 0, _ = E, E = I, I = W, W = he + ue | 0 } M[0] = M[0] + W | 0, M[1] = M[1] + I | 0, M[2] = M[2] + E | 0, M[3] = M[3] + _ | 0, M[4] = M[4] + k | 0, M[5] = M[5] + L | 0, M[6] = M[6] + H | 0, M[7] = M[7] + V | 0 }, _doFinalize: function () { var v = this._data, D = v.words, M = this._nDataBytes * 8, W = v.sigBytes * 8; return D[W >>> 5] |= 128 << 24 - W % 32, D[(W + 64 >>> 9 << 4) + 14] = d.floor(M / 4294967296), D[(W + 64 >>> 9 << 4) + 15] = M, v.sigBytes = D.length * 4, this._process(), this._hash }, clone: function () { var v = b.clone.call(this); return v._hash = this._hash.clone(), v } }); f.SHA256 = b._createHelper(y), f.HmacSHA256 = b._createHmacHelper(y) }(Math), p.SHA256 }) }, 3029(a, c, l) { l.d(c, { A: () => p }); function p(d, f) { if (!(d instanceof f)) throw new TypeError("Cannot call a class as a function") } }, 3051(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.FakeEventTarget = void 0; class l { constructor() { ve(this, "listeners", {}) } addEventListener(d, f, h) { var P; f && ((P = this.listeners)[d] ?? (P[d] = []), this.listeners[d].push({ callback: typeof f == "function" ? f : f.handleEvent, once: typeof h == "object" && h.once === !0 })) } removeEventListener(d, f, h) { this.listeners[d] && f && (this.listeners[d] = this.listeners[d].filter(P => P.callback !== (typeof f == "function" ? f : f.handleEvent))) } dispatchEvent(d) { if (!d || typeof d.type != "string") throw new Error("invalid event object"); const f = this.listeners[d.type]; if (!f) return !0; for (const h of [...f]) { try { h.callback.call(this, d) } catch (P) { setTimeout(() => { throw P }, 0) } h.once && this.removeEventListener(d.type, h.callback) } return !d.defaultPrevented } } c.FakeEventTarget = l }, 3115(a, c, l) {
                l.r(c), l.d(c, { CameraDeviceInfo: () => xo, DeviceInfo: () => bs, ExternalE2EEKeyProvider: () => U2.l, MicrophoneDeviceInfo: () => pu, VideoSDK: () => Su, ZujoSDK: () => q2 }); var p = l(2284), d = l(467), f = l(3029), h = l(2901), P = l(4467), b = l(4756), u = l.n(b), g = l(6880), S = l.n(g); function R(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function y(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? R(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : R(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } function v(U) { return "Minified Redux error #" + U + "; visit https://redux.js.org/Errors?code=" + U + " for the full message or use the non-minified dev environment for full errors. " } var D = function () { return typeof Symbol == "function" && Symbol.observable || "@@observable" }(), M = function () { return Math.random().toString(36).substring(7).split("").join(".") }, W = { INIT: "@@redux/INIT" + M(), REPLACE: "@@redux/REPLACE" + M(), PROBE_UNKNOWN_ACTION: function () { return "@@redux/PROBE_UNKNOWN_ACTION" + M() } }; function I(U) { if (typeof U != "object" || U === null) return !1; for (var A = U; Object.getPrototypeOf(A) !== null;)A = Object.getPrototypeOf(A); return Object.getPrototypeOf(U) === A } function E(U, A, x) { var j; if (typeof A == "function" && typeof x == "function" || typeof x == "function" && typeof arguments[3] == "function") throw new Error(v(0)); if (typeof A == "function" && typeof x > "u" && (x = A, A = void 0), typeof x < "u") { if (typeof x != "function") throw new Error(v(1)); return x(E)(U, A) } if (typeof U != "function") throw new Error(v(2)); var F = U, q = A, ie = [], oe = ie, de = !1; function pe() { oe === ie && (oe = ie.slice()) } function fe() { if (de) throw new Error(v(3)); return q } function ge(tt) { if (typeof tt != "function") throw new Error(v(4)); if (de) throw new Error(v(5)); var Ge = !0; return pe(), oe.push(tt), function () { if (Ge) { if (de) throw new Error(v(6)); Ge = !1, pe(); var Ze = oe.indexOf(tt); oe.splice(Ze, 1), ie = null } } } function Oe(tt) { if (!I(tt)) throw new Error(v(7)); if (typeof tt.type > "u") throw new Error(v(8)); if (de) throw new Error(v(9)); try { de = !0, q = F(q, tt) } finally { de = !1 } for (var Ge = ie = oe, Xe = 0; Xe < Ge.length; Xe++) { var Ze = Ge[Xe]; Ze() } return tt } function Ie(tt) { if (typeof tt != "function") throw new Error(v(10)); F = tt, Oe({ type: W.REPLACE }) } function Tt() { var tt, Ge = ge; return tt = { subscribe: function (Ze) { if (typeof Ze != "object" || Ze === null) throw new Error(v(11)); function Kt() { Ze.next && Ze.next(fe()) } Kt(); var et = Ge(Kt); return { unsubscribe: et } } }, tt[D] = function () { return this }, tt } return Oe({ type: W.INIT }), j = { dispatch: Oe, subscribe: ge, getState: fe, replaceReducer: Ie }, j[D] = Tt, j } function _(U) { Object.keys(U).forEach(function (A) { var x = U[A], j = x(void 0, { type: W.INIT }); if (typeof j > "u") throw new Error(v(12)); if (typeof x(void 0, { type: W.PROBE_UNKNOWN_ACTION() }) > "u") throw new Error(v(13)) }) } function k(U) { for (var A = Object.keys(U), x = {}, j = 0; j < A.length; j++) { var F = A[j]; typeof U[F] == "function" && (x[F] = U[F]) } var q = Object.keys(x), ie; try { _(x) } catch (oe) { ie = oe } return function (de, pe) { if (de === void 0 && (de = {}), ie) throw ie; for (var fe = !1, ge = {}, Oe = 0; Oe < q.length; Oe++) { var Ie = q[Oe], Tt = x[Ie], tt = de[Ie], Ge = Tt(tt, pe); if (typeof Ge > "u") throw pe && pe.type, new Error(v(14)); ge[Ie] = Ge, fe = fe || Ge !== tt } return fe = fe || q.length !== Object.keys(de).length, fe ? ge : de } } function L() { for (var U = arguments.length, A = new Array(U), x = 0; x < U; x++)A[x] = arguments[x]; return A.length === 0 ? function (j) { return j } : A.length === 1 ? A[0] : A.reduce(function (j, F) { return function () { return j(F.apply(void 0, arguments)) } }) } function H() { for (var U = arguments.length, A = new Array(U), x = 0; x < U; x++)A[x] = arguments[x]; return function (j) { return function () { var F = j.apply(void 0, arguments), q = function () { throw new Error(v(15)) }, ie = { getState: F.getState, dispatch: function () { return q.apply(void 0, arguments) } }, oe = A.map(function (de) { return de(ie) }); return q = L.apply(void 0, oe)(F.dispatch), y(y({}, F), {}, { dispatch: q }) } } } function V(U) { var A = function (j) { var F = j.dispatch, q = j.getState; return function (ie) { return function (oe) { return typeof oe == "function" ? oe(F, q, U) : ie(oe) } } }; return A } var ee = V(); ee.withExtraArgument = V; const K = ee; var N = l(2211), B = l.n(N); function Q(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function Z(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? Q(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : Q(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } var le = { url: null, state: "new", activeSpeakerId: null, statsPeerId: null, faceDetection: !1 }, X = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : le, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "SET_ROOM_URL": { var j = x.payload.url; return Z(Z({}, A), {}, { url: j }) } case "SET_ROOM_STATE": { var F = x.payload.state; return F === "connected" ? Z(Z({}, A), {}, { state: F }) : Z(Z({}, A), {}, { state: F, activeSpeakerId: null, statsPeerId: null }) } case "SET_ROOM_ACTIVE_SPEAKER": { var q = x.payload.peerId; return Z(Z({}, A), {}, { activeSpeakerId: q }) } case "SET_ROOM_STATS_PEER_ID": { var ie = x.payload.peerId; return A.statsPeerId === ie ? Z(Z({}, A), {}, { statsPeerId: null }) : Z(Z({}, A), {}, { statsPeerId: ie }) } case "SET_FACE_DETECTION": { var oe = x.payload; return Z(Z({}, A), {}, { faceDetection: oe }) } case "REMOVE_PEER": { var de = x.payload.peerId, pe = Z({}, A); return de && de === A.activeSpeakerId && (pe.activeSpeakerId = null), de && de === A.statsPeerId && (pe.statsPeerId = null), pe } default: return A } }; const ce = X; function he(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function ue(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? he(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : he(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } var ye = { id: null, displayName: null, displayNameSet: !1, device: null, canSendMic: !1, canSendWebcam: !1, canChangeWebcam: !1, webcamInProgress: !1, shareInProgress: !1, audioOnly: !1, audioOnlyInProgress: !1, audioMuted: !1, restartIceInProgress: !1 }, se = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : ye, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "SET_ROOM_STATE": { var j = x.payload.state; return j === "closed" ? ue(ue({}, A), {}, { webcamInProgress: !1, shareInProgress: !1, audioOnly: !1, audioOnlyInProgress: !1, audioMuted: !1, restartIceInProgress: !1 }) : A } case "SET_ME": { var F = x.payload, q = F.peerId, ie = F.displayName, oe = F.displayNameSet, de = F.device; return ue(ue({}, A), {}, { id: q, displayName: ie, displayNameSet: oe, device: de }) } case "SET_MEDIA_CAPABILITIES": { var pe = x.payload, fe = pe.canSendMic, ge = pe.canSendWebcam; return ue(ue({}, A), {}, { canSendMic: fe, canSendWebcam: ge }) } case "SET_CAN_CHANGE_WEBCAM": { var Oe = x.payload; return ue(ue({}, A), {}, { canChangeWebcam: Oe }) } case "SET_WEBCAM_IN_PROGRESS": { var Ie = x.payload.flag; return ue(ue({}, A), {}, { webcamInProgress: Ie }) } case "SET_SHARE_IN_PROGRESS": { var Tt = x.payload.flag; return ue(ue({}, A), {}, { shareInProgress: Tt }) } case "SET_DISPLAY_NAME": { var tt = x.payload.displayName; return tt || (tt = A.displayName), ue(ue({}, A), {}, { displayName: tt, displayNameSet: !0 }) } case "SET_AUDIO_ONLY_STATE": { var Ge = x.payload.enabled; return ue(ue({}, A), {}, { audioOnly: Ge }) } case "SET_AUDIO_ONLY_IN_PROGRESS": { var Xe = x.payload.flag; return ue(ue({}, A), {}, { audioOnlyInProgress: Xe }) } case "SET_AUDIO_MUTED_STATE": { var Ze = x.payload.enabled; return ue(ue({}, A), {}, { audioMuted: Ze }) } case "SET_RESTART_ICE_IN_PROGRESS": { var Kt = x.payload.flag; return ue(ue({}, A), {}, { restartIceInProgress: Kt }) } default: return A } }; const _e = se; function Se(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function we(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? Se(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : Se(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } var De = {}, mt = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : De, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "SET_ROOM_STATE": { var j = x.payload.state; return j === "closed" ? {} : A } case "ADD_PRODUCER": { var F = x.payload.producer; return we(we({}, A), {}, (0, P.A)({}, F.id, F)) } case "REMOVE_PRODUCER": { var q = x.payload.producerId, ie = we({}, A); return delete ie[q], ie } case "SET_PRODUCER_PAUSED": { var oe = x.payload.producerId, de = A[oe], pe = we(we({}, de), {}, { paused: !0 }); return we(we({}, A), {}, (0, P.A)({}, oe, pe)) } case "SET_PRODUCER_RESUMED": { var fe = x.payload.producerId, ge = A[fe], Oe = we(we({}, ge), {}, { paused: !1 }); return we(we({}, A), {}, (0, P.A)({}, fe, Oe)) } case "SET_PRODUCER_TRACK": { var Ie = x.payload, Tt = Ie.producerId, tt = Ie.track, Ge = A[Tt], Xe = we(we({}, Ge), {}, { track: tt }); return we(we({}, A), {}, (0, P.A)({}, Tt, Xe)) } case "SET_PRODUCER_SCORE": { var Ze = x.payload, Kt = Ze.producerId, et = Ze.score, Rt = A[Kt]; if (!Rt) return A; var wr = we(we({}, Rt), {}, { score: et }); return we(we({}, A), {}, (0, P.A)({}, Kt, wr)) } default: return A } }; const Lt = mt; function Dt(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function ot(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? Dt(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : Dt(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } var tr = {}, Br = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : tr, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "SET_ROOM_STATE": { var j = x.payload.state; return j === "closed" ? {} : A } case "ADD_DATA_PRODUCER": { var F = x.payload.dataProducer; return ot(ot({}, A), {}, (0, P.A)({}, F.id, F)) } case "REMOVE_DATA_PRODUCER": { var q = x.payload.dataProducerId, ie = ot({}, A); return delete ie[q], ie } default: return A } }; const on = Br; var ir = l(5458); function gr(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function Bt(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? gr(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : gr(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } var hn = {}, Wr = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : hn, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "SET_ROOM_STATE": { var j = x.payload.state; return j === "closed" ? {} : A } case "ADD_PEER": { var F = x.payload.peer; return Bt(Bt({}, A), {}, (0, P.A)({}, F.id, F)) } case "REMOVE_PEER": { var q = x.payload.peerId, ie = Bt({}, A); return delete ie[q], ie } case "SET_PEER_DISPLAY_NAME": { var oe = x.payload, de = oe.displayName, pe = oe.peerId, fe = A[pe]; if (!fe) throw new Error("no Peer found"); var ge = Bt(Bt({}, fe), {}, { displayName: de }); return Bt(Bt({}, A), {}, (0, P.A)({}, ge.id, ge)) } case "ADD_CONSUMER": { var Oe = x.payload, Ie = Oe.consumer, Tt = Oe.peerId, tt = A[Tt]; if (!tt) return Bt({}, A); var Ge = [].concat((0, ir.A)(tt.consumers), [Ie.id]), Xe = Bt(Bt({}, tt), {}, { consumers: Ge }); return Bt(Bt({}, A), {}, (0, P.A)({}, Xe.id, Xe)) } case "REMOVE_CONSUMER": { var Ze = x.payload, Kt = Ze.consumerId, et = Ze.peerId, Rt = A[et]; if (!Rt) return A; var wr = Rt.consumers.indexOf(Kt); if (wr === -1) return Bt({}, A); var Gr = Rt.consumers.slice(); Gr.splice(wr, 1); var ht = Bt(Bt({}, Rt), {}, { consumers: Gr }); return Bt(Bt({}, A), {}, (0, P.A)({}, ht.id, ht)) } case "ADD_DATA_CONSUMER": { var Er = x.payload, nn = Er.dataConsumer, Vr = Er.peerId; if (!Vr) return A; var sn = A[Vr]; if (!sn) return Bt({}, A); var Rr = [].concat((0, ir.A)(sn.dataConsumers), [nn.id]), si = Bt(Bt({}, sn), {}, { dataConsumers: Rr }); return Bt(Bt({}, A), {}, (0, P.A)({}, si.id, si)) } case "REMOVE_DATA_CONSUMER": { var ui = x.payload, gi = ui.dataConsumerId, ai = ui.peerId; if (!ai) return A; var os = A[ai]; if (!os) return A; var Ss = os.dataConsumers.indexOf(gi); if (Ss === -1) return Bt({}, A); var Ja = os.dataConsumers.slice(); Ja.splice(Ss, 1); var el = Bt(Bt({}, os), {}, { dataConsumers: Ja }); return Bt(Bt({}, A), {}, (0, P.A)({}, el.id, el)) } default: return A } }; const wn = Wr; function He(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function Ue(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? He(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : He(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } var zt = {}, hr = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : zt, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "SET_ROOM_STATE": { var j = x.payload.state; return j === "closed" ? {} : A } case "ADD_CONSUMER": { var F = x.payload.consumer; return Ue(Ue({}, A), {}, (0, P.A)({}, F.id, F)) } case "REMOVE_CONSUMER": { var q = x.payload.consumerId, ie = Ue({}, A); return delete ie[q], ie } case "SET_CONSUMER_PAUSED": { var oe = x.payload, de = oe.consumerId, pe = oe.originator, fe = A[de], ge; return pe === "local" ? ge = Ue(Ue({}, fe), {}, { locallyPaused: !0, paused: !0 }) : ge = Ue(Ue({}, fe), {}, { remotelyPaused: !0, paused: !0 }), Ue(Ue({}, A), {}, (0, P.A)({}, de, ge)) } case "SET_CONSUMER_RESUMED": { var Oe = x.payload, Ie = Oe.consumerId, Tt = Oe.originator, tt = A[Ie], Ge; return Tt === "local" ? Ge = Ue(Ue({}, tt), {}, { locallyPaused: !1, paused: !1 }) : Ge = Ue(Ue({}, tt), {}, { remotelyPaused: !1, paused: !1 }), Ue(Ue({}, A), {}, (0, P.A)({}, Ie, Ge)) } case "SET_CONSUMER_CURRENT_LAYERS": { var Xe = x.payload, Ze = Xe.consumerId, Kt = Xe.spatialLayer, et = Xe.temporalLayer, Rt = A[Ze], wr = Ue(Ue({}, Rt), {}, { currentSpatialLayer: Kt, currentTemporalLayer: et }); return Ue(Ue({}, A), {}, (0, P.A)({}, Ze, wr)) } case "SET_CONSUMER_PREFERRED_LAYERS": { var Gr = x.payload, ht = Gr.consumerId, Er = Gr.spatialLayer, nn = Gr.temporalLayer, Vr = A[ht], sn = Ue(Ue({}, Vr), {}, { preferredSpatialLayer: Er, preferredTemporalLayer: nn }); return Ue(Ue({}, A), {}, (0, P.A)({}, ht, sn)) } case "SET_CONSUMER_PRIORITY": { var Rr = x.payload, si = Rr.consumerId, ui = Rr.priority, gi = A[si], ai = Ue(Ue({}, gi), {}, { priority: ui }); return Ue(Ue({}, A), {}, (0, P.A)({}, si, ai)) } case "SET_CONSUMER_TRACK": { var os = x.payload, Ss = os.consumerId, Ja = os.track, el = A[Ss], na = Ue(Ue({}, el), {}, { track: Ja }); return Ue(Ue({}, A), {}, (0, P.A)({}, Ss, na)) } case "SET_CONSUMER_SCORE": { var uh = x.payload, ph = uh.consumerId, zm = uh.score, Zc = A[ph]; if (!Zc) return A; var Cu = Ue(Ue({}, Zc), {}, { score: zm }); return Ue(Ue({}, A), {}, (0, P.A)({}, ph, Cu)) } default: return A } }; const Dr = hr; function Kr(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function fn(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? Kr(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : Kr(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } var St = {}, Fe = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : St, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "SET_ROOM_STATE": { var j = x.payload.state; return j === "closed" ? {} : A } case "ADD_DATA_CONSUMER": { var F = x.payload.dataConsumer; return fn(fn({}, A), {}, (0, P.A)({}, F.id, F)) } case "REMOVE_DATA_CONSUMER": { var q = x.payload.dataConsumerId, ie = fn({}, A); return delete ie[q], ie } default: return A } }; const ut = Fe; var qe = [], it = function () { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : qe, x = arguments.length > 1 ? arguments[1] : void 0; switch (x.type) { case "ADD_NOTIFICATION": { var j = x.payload.notification; return [].concat((0, ir.A)(A), [j]) } case "REMOVE_NOTIFICATION": { var F = x.payload.notificationId; return A.filter(function (q) { return q.id !== F }) } case "REMOVE_ALL_NOTIFICATIONS": return []; default: return A } }, Ce = k({ room: ce, me: _e, producers: Lt, dataProducers: on, peers: wn, consumers: Dr, dataConsumers: ut, notifications: it }); const Xt = Ce; var cr = l(9767); function pr(U) { if (U == null) throw new TypeError("Cannot destructure " + U) } var ct = l(7007), jr = l(296), $e = l(9767); $e.default; var It = (0, h.A)(function U() { (0, f.A)(this, U), this.roomClient = null }), vt = function () { function U() { (0, f.A)(this, U), U.instance || (U.instance = new It) } return (0, h.A)(U, [{ key: "getInstance", value: function () { return U.instance } }]) }(), Nt = new vt; Object.freeze(Nt); var dt = Nt.getInstance(), Or = "state", vr = function () { function U(A) { (0, f.A)(this, U), (0, P.A)(this, "pausedBy", void 0), this.id = A.id, this.kind = A.track.kind, this.codec = A.codec, this.track = A.track, this.producerOrConsumer = A.instance, A.appData && A.appData.share === !0 && A.track.kind === "video" && (this.kind = "share"), A.appData && A.appData.share === !0 && A.track.kind === "audio" && (this.kind = "shareAudio"), this.rtpSender = A.rtpSender, this.rtpReceiver = A.rtpReceiver, this.eventEmitter = new ct } return (0, h.A)(U, [{ key: "pause", value: function () { dt.roomClient._pauseConsumer(this.producerOrConsumer) } }, { key: "resume", value: function () { dt.roomClient._resumeConsumer(this.producerOrConsumer) } }, { key: "handleStateChanged", value: function (x) { var j = x.state; x.streamId, this.eventEmitter.emit(Or, { state: j, timestamp: new Date().getTime() }) } }, { key: "paused", get: function () { return this.producerOrConsumer.paused } }, { key: "on", value: function (x, j) { switch (x) { case Or: this.eventEmitter.on(x, j); break; default: throw new Error("Invalid event type from STREAM onn") } } }, { key: "off", value: function (x, j) { switch (x) { case Or: this.eventEmitter.off(x, j); break; default: throw new Error("Invalid event type from STREAM off") } } }]) }(), or = l(1803); function br(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function Ar(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? br(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : br(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } function vn(U, A) {
                    var x = typeof Symbol < "u" && U[Symbol.iterator] || U["@@iterator"]; if (!x) {
                        if (Array.isArray(U) || (x = Gt(U)) || A && U && typeof U.length == "number") { x && (U = x); var j = 0, F = function () { }; return { s: F, n: function () { return j >= U.length ? { done: !0 } : { done: !1, value: U[j++] } }, e: function (pe) { throw pe }, f: F } } throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                    } var q, ie = !0, oe = !1; return { s: function () { x = x.call(U) }, n: function () { var pe = x.next(); return ie = pe.done, pe }, e: function (pe) { oe = !0, q = pe }, f: function () { try { ie || x.return == null || x.return() } finally { if (oe) throw q } } }
                } function Gt(U, A) { if (U) { if (typeof U == "string") return Et(U, A); var x = {}.toString.call(U).slice(8, -1); return x === "Object" && U.constructor && (x = U.constructor.name), x === "Map" || x === "Set" ? Array.from(U) : x === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x) ? Et(U, A) : void 0 } } function Et(U, A) { (A == null || A > U.length) && (A = U.length); for (var x = 0, j = Array(A); x < A; x++)j[x] = U[x]; return j } var Xr = "stream-enabled", mn = "stream-disabled", Cr = "media-status-changed", yn = "video-quality-changed", Ci = "stream-paused", Ri = "stream-resumed", $i = "producer-added", Gs = "producer-removed", ei = "consumer-added", va = "consumer-removed", Ds = "e2ee-state-change", ya = function () { function U(A) { var x = this; (0, f.A)(this, U), (0, P.A)(this, "captureImage", (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe, ge, Oe, Ie, Tt, tt, Ge, Xe, Ze = arguments, Kt, et; return u().wrap(function (Rt) { for (; ;)switch (Rt.prev = Rt.next) { case 0: q = Ze.length > 0 && Ze[0] !== void 0 ? Ze[0] : {}, ie = q.height, oe = q.width, de = (F = dt.roomClient._openTelemetry) === null || F === void 0 ? void 0 : F.trace({ spanName: "Capturing image", status: 1, attributes: { height: JSON.stringify(ie), width: JSON.stringify(oe) } }), Rt.prev = 1, ge = (pe = dt.roomClient._openTelemetry) === null || pe === void 0 ? void 0 : pe.trace({ spanName: "Fetching available streams", span: de, status: 1 }), Oe = (0, ir.A)(x.streams.values()), (fe = dt.roomClient._openTelemetry) === null || fe === void 0 || fe.completeSpan({ span: ge, status: 1, message: "Fetched available streams" }), Ie = vn(Oe), Rt.prev = 2, tt = u().mark(function wr() { var Gr, ht, Er, nn, Vr, sn, Rr, si, ui, gi, ai, os, Ss, Ja, el; return u().wrap(function (na) { for (; ;)switch (na.prev = na.next) { case 0: if (Gr = Tt.value, Gr.kind != "video") { na.next = 4; break } return Er = (ht = dt.roomClient._openTelemetry) === null || ht === void 0 ? void 0 : ht.trace({ spanName: "Processing video stream for capture", span: de, status: 1 }), na.prev = 1, si = (nn = dt.roomClient._openTelemetry) === null || nn === void 0 ? void 0 : nn.trace({ spanName: "Initializing capture elements", span: Er, status: 1 }), ui = new MediaStream, ui.addTrack(Gr.track), gi = document.createElement("video"), gi.srcObject = ui, gi.playsInline = !0, ai = document.createElement("canvas"), ai.id = "canvasId", (Vr = dt.roomClient._openTelemetry) === null || Vr === void 0 || Vr.completeSpan({ span: si, status: 1, message: "Initialized video and canvas elements" }), os = (sn = dt.roomClient._openTelemetry) === null || sn === void 0 ? void 0 : sn.trace({ spanName: "Waiting for video frame to load", span: Er, status: 1 }), na.next = 2, new Promise(function (uh, ph) { gi.addEventListener("loadeddata", (0, d.A)(u().mark(function zm() { var Zc, Cu, $m, Um, Ru, ku, Tu, fb, mb, gb, Vm, Wm; return u().wrap(function (tl) { for (; ;)switch (tl.prev = tl.next) { case 0: return (Zc = dt.roomClient._openTelemetry) === null || Zc === void 0 || Zc.completeSpan({ span: os, status: 1, message: "Video frame loaded" }), $m = (Cu = dt.roomClient._openTelemetry) === null || Cu === void 0 ? void 0 : Cu.trace({ spanName: "Drawing video frame to canvas", span: de, status: 1 }), tl.prev = 1, Ru = gi.videoWidth, ku = gi.videoHeight, Tu = 16 / 9, ie == null && oe == null && (ie = ku, oe = Ru), (ie != null || ie != null) && (ie <= 0 || ie > ku) && (ie = ku), (oe != null || oe != null) && (oe <= 0 || oe > Ru) && (oe = Ru), ie == null && (ie = oe / Tu), oe == null && (oe = ie * Tu), ai.width = oe, ai.height = ie, tl.next = 2, gi.play(); case 2: document.body.appendChild(gi), fb = (ai.width - Ru * Tu) / 2, mb = (ai.height - ku * Tu) / 2, ai.getContext("2d").clearRect(0, 0, fb / 2, mb / 2), ai.getContext("2d").drawImage(gi, 0, 0), gb = ai.toDataURL("image/jpeg").split(";base64,")[1], document.body.appendChild(ai), document.body.removeChild(ai), document.body.removeChild(gi), (Um = dt.roomClient._openTelemetry) === null || Um === void 0 || Um.completeSpan({ span: $m, status: 1, message: "Captured frame and generated base64 image" }), uh(gb), tl.next = 4; break; case 3: tl.prev = 3, Wm = tl.catch(1), (Vm = dt.roomClient._openTelemetry) === null || Vm === void 0 || Vm.completeSpan({ span: $m, status: 2, message: "Error capturing frame: ".concat(Wm.message) }), ph(Wm); case 4: case "end": return tl.stop() } }, zm, null, [[1, 3]]) }))) }); case 2: return Ss = na.sent, (Rr = dt.roomClient._openTelemetry) === null || Rr === void 0 || Rr.completeSpan({ span: Er, status: 1, message: "Image captured successfully" }), na.abrupt("return", { v: Ss }); case 3: na.prev = 3, el = na.catch(1), (Ja = dt.roomClient._openTelemetry) === null || Ja === void 0 || Ja.completeSpan({ span: Er, status: 2, message: "Error processing video stream: ".concat(el.message) }), console.error("err on image capture", el); case 4: case "end": return na.stop() } }, wr, null, [[1, 3]]) }), Ie.s(); case 3: if ((Tt = Ie.n()).done) { Rt.next = 6; break } return Rt.delegateYield(tt(), "t0", 4); case 4: if (Ge = Rt.t0, !Ge) { Rt.next = 5; break } return Rt.abrupt("return", Ge.v); case 5: Rt.next = 3; break; case 6: Rt.next = 8; break; case 7: Rt.prev = 7, Kt = Rt.catch(2), Ie.e(Kt); case 8: return Rt.prev = 8, Ie.f(), Rt.finish(8); case 9: throw new Error("Camera must be on to capture an image"); case 10: Rt.prev = 10, et = Rt.catch(1), (Xe = dt.roomClient._openTelemetry) === null || Xe === void 0 || Xe.completeSpan({ span: de, status: 2, message: "Failed to capture image: ".concat(et.message) }), console.error("Error in captureImage::", et), dt.roomClient._videosdkLogs && dt.roomClient._videosdkLogs.pushLogs({ logText: "Error on image capture", logType: "ERROR", attributes: { error: et.message } }); case 11: case "end": return Rt.stop() } }, j, null, [[1, 10], [2, 7, 8, 9]]) }))), this.id = A.id, this.displayName = A.displayName, this.streams = new Map, this.quality = "low", this.screenShareQuality = "high", this.local = A.local || !1, this.pinState = { cam: !1, share: !1 }, this.webcamOn = !1, this.micOn = !1, this.screenShareOn = !1, this.screenShareAudioOn = !1, this.mode = A.mode, this.metaData = A.metaData, this.eventEmitter = new ct.EventEmitter, this.participantVideoElements = new Map, this.participantAudioElements = new Map, this.videoVisible = !1, this.height = null, this.width = null, this.resizeObserver = null } return (0, h.A)(U, [{ key: "_setPinState", value: function (x) { x.cam != null && (this.pinState.cam = x.cam), x.share != null && (this.pinState.share = x.share) } }, { key: "remove", value: function () { dt.roomClient.removePeer(this.id) } }, { key: "enableMic", value: function () { dt.roomClient.enablePeerMic(this.id) } }, { key: "disableMic", value: function () { dt.roomClient.disablePeerMic(this.id) } }, { key: "enableWebcam", value: function () { dt.roomClient.enablePeerWebcam(this.id) } }, { key: "disableWebcam", value: function () { dt.roomClient.disablePeerWebcam(this.id) } }, { key: "getTransportStats", value: function () { return dt.roomClient.getTransportRemoteStats({ participantId: this.id }) } }, { key: "handleStreamStateChanged", value: function (x) { var j = x.state; x.peerId; var F = x.streamId, q = this.streams.get(F); q != null && (q.kind === "video" || q.kind === "share") && q.handleStateChanged({ state: j, streamId: F }) } }, { key: "addStream", value: function (x) { if (!x) { console.warn("Attempted to add null/undefined stream"); return } this.streams.set(x.id, x), x.kind === "video" && !this.local && dt.roomClient.setConsumerQuality(x.id, this.quality); var j = new MediaStream; j.addTrack(x.track); try { if (["video", "share"].includes(x.kind)) { var F = this.participantVideoElements.get(x.kind); if (F) { var q = { display: "block", objectFit: x.kind === "share" ? "contain" : "cover", width: "100%" }; Object.assign(F.style, q), F.srcObject = j, F.play().catch(function (oe) { console.error("Failed to play ".concat(x.kind, " stream:"), oe) }), (x.kind === "share" || x.kind === "video" && this.videoVisible) && x.resume() } } if ((x.kind === "audio" || x.kind === "shareAudio") && !this.local) { var ie = this.participantAudioElements.get(x.kind); ie && (ie.srcObject = j, ie.play().catch(function (oe) { console.error("Failed to play ".concat(x.kind, " audio:"), oe) })) } this.eventEmitter.emit(Xr, x), x.kind === "video" && !this.local && this.height && this.width && this.setViewPort(this.width, this.height) } catch (oe) { console.error("Error in addStream:", oe) } } }, { key: "updateStream", value: function (x) { this.streams.set(x.id, x), this.eventEmitter.emit(Xr, x) } }, { key: "deleteStream", value: function (x) { var j = this.streams.get(x); if (j != null) { this.streams.delete(x); var F = { video: { collection: this.participantVideoElements, type: "video" }, share: { collection: this.participantVideoElements, type: "share" }, audio: { collection: this.participantAudioElements, type: "audio" }, shareAudio: { collection: this.participantAudioElements, type: "shareAudio" } }, q = F[j.kind]; if (q) { var ie = q.collection.get(q.type); ie && (ie.style.display = "none") } return this.eventEmitter.emit(mn, j), j } } }, { key: "streamResumed", value: function (x) { var j = this.streams.get(x); j != null } }, { key: "streamPaused", value: function (x) { var j = this.streams.get(x); j != null } }, { key: "updateParticipantMediaState", value: function (x, j) { x == "audio" ? this.micOn = j : x == "video" ? this.webcamOn = j : x == "share" ? this.screenShareOn = j : x == "shareAudio" && (this.screenShareAudioOn = j), this.eventEmitter.emit(Cr, { peerId: this.id, kind: x, newStatus: j }) } }, { key: "handleParticipantPause", value: function (x) { if (x != null && x.consumerId) { var j = this.streams.get(x.consumerId); j ? j.pausedBy = "SUB_MANAGER" : console.warn("Stream with consumerId ".concat(x.consumerId, " not found.")) } this.eventEmitter.emit(Ci, { kind: x == null ? void 0 : x.kind, reason: x == null ? void 0 : x.reason }) } }, { key: "handleParticipantResume", value: function (x) { if (x != null && x.consumerId) { var j = this.streams.get(x.consumerId); j ? j.pausedBy = void 0 : console.warn("Stream with consumerId ".concat(x.consumerId, " not found.")) } this.eventEmitter.emit(Ri, { kind: x == null ? void 0 : x.kind, reason: x == null ? void 0 : x.reason }) } }, { key: "handleE2EEStateChange", value: function (x) { x == null || delete x.peerId, this.eventEmitter.emit(Ds, x) } }, { key: "videoQualityChanged", value: function (x, j) { this.eventEmitter.emit(yn, { peerId: this.id, prevQuality: x, currentQuality: j }) } }, { key: "setQuality", value: function (x) { var j = this; if (!this.local) { if (typeof document < "u" && this.resizeObserver) { var F = document.querySelector("#f-".concat(this.id)); F && this.resizeObserver.unobserve(F) } this.quality = x; var q = (0, ir.A)(this.streams.entries()); q.forEach(function (ie) { var oe = ie[1]; oe.kind === "video" && dt.roomClient.setConsumerQuality(oe.id, x, j.id) }) } } }, { key: "setScreenShareQuality", value: function (x) { var j = this; this.local || (this.screenShareQuality = x, this.streams.forEach(function (F) { F.kind === "share" && dt.roomClient.setConsumerScreenShareQuality(F.id, x, j.id) })) } }, { key: "setViewPort", value: function (x, j) { var F = this, q = (0, ir.A)(this.streams.entries()); q.forEach(function (ie) { var oe = ie[1]; oe.kind === "video" && dt.roomClient.setViewPort(oe.producerOrConsumer, x, j, F.id) }) } }, { key: "pin", value: function (x) { switch (x) { case "SHARE_AND_CAM": case void 0: this._setPinState({ cam: !0, share: !0 }); break; case "CAM": this._setPinState({ cam: !0 }); break; case "SHARE": this._setPinState({ share: !0 }); break; default: throw new Error("Unknown pin type") }dt.roomClient.pinStateChange({ peerId: this.id, state: this.pinState }) } }, { key: "unpin", value: function (x) { switch (x) { case "SHARE_AND_CAM": case void 0: this._setPinState({ cam: !1, share: !1 }); break; case "CAM": this._setPinState({ cam: !1 }); break; case "SHARE": this._setPinState({ share: !1 }); break; default: throw new Error("Unknown unpin type") }dt.roomClient.pinStateChange({ peerId: this.id, state: this.pinState }) } }, { key: "switchTo", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe; return u().wrap(function (de) { for (; ;)switch (de.prev = de.next) { case 0: return q = F.meetingId, ie = F.payload, oe = F.token, de.next = 1, dt.roomClient.switchPeerRoom({ peerId: this.id, roomId: q, payload: ie, token: oe }); case 1: case "end": return de.stop() } }, j, this) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "getVideoStats", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: if (!this.local) { ge.next = 2; break } return ge.next = 1, dt.roomClient.getVideoRemoteStats(); case 1: return ge.abrupt("return", ge.sent); case 2: F = (0, ir.A)(this.streams.entries()), q = vn(F), ge.prev = 3, q.s(); case 4: if ((ie = q.n()).done) { ge.next = 7; break } if (oe = (0, jr.A)(ie.value, 2), de = oe[0], pe = oe[1], pe.kind != "video") { ge.next = 6; break } return ge.next = 5, dt.roomClient.getConsumerRemoteStats(de); case 5: return ge.abrupt("return", ge.sent); case 6: ge.next = 4; break; case 7: ge.next = 9; break; case 8: ge.prev = 8, fe = ge.catch(3), q.e(fe); case 9: return ge.prev = 9, q.f(), ge.finish(9); case 10: case "end": return ge.stop() } }, j, this, [[3, 8, 9, 10]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "getShareStats", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: if (!this.local) { ge.next = 2; break } return ge.next = 1, dt.roomClient.getShareRemoteStats(); case 1: return ge.abrupt("return", ge.sent); case 2: F = (0, ir.A)(this.streams.entries()), q = vn(F), ge.prev = 3, q.s(); case 4: if ((ie = q.n()).done) { ge.next = 7; break } if (oe = (0, jr.A)(ie.value, 2), de = oe[0], pe = oe[1], pe.kind != "share") { ge.next = 6; break } return ge.next = 5, dt.roomClient.getConsumerRemoteStats(de); case 5: return ge.abrupt("return", ge.sent); case 6: ge.next = 4; break; case 7: ge.next = 9; break; case 8: ge.prev = 8, fe = ge.catch(3), q.e(fe); case 9: return ge.prev = 9, q.f(), ge.finish(9); case 10: case "end": return ge.stop() } }, j, this, [[3, 8, 9, 10]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "getShareAudioStats", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: if (!this.local) { ge.next = 2; break } return ge.next = 1, dt.roomClient.getShareAudioRemoteStats(); case 1: return ge.abrupt("return", ge.sent); case 2: F = (0, ir.A)(this.streams.entries()), q = vn(F), ge.prev = 3, q.s(); case 4: if ((ie = q.n()).done) { ge.next = 7; break } if (oe = (0, jr.A)(ie.value, 2), de = oe[0], pe = oe[1], pe.kind != "shareAudio") { ge.next = 6; break } return ge.next = 5, dt.roomClient.getConsumerRemoteStats(de); case 5: return ge.abrupt("return", ge.sent); case 6: ge.next = 4; break; case 7: ge.next = 9; break; case 8: ge.prev = 8, fe = ge.catch(3), q.e(fe); case 9: return ge.prev = 9, q.f(), ge.finish(9); case 10: case "end": return ge.stop() } }, j, this, [[3, 8, 9, 10]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "getAudioStats", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: if (this.micOn) { ge.next = 1; break } return ge.abrupt("return", []); case 1: if (!this.local) { ge.next = 3; break } return ge.next = 2, dt.roomClient.getAudioRemoteStats(); case 2: return ge.abrupt("return", ge.sent); case 3: F = (0, ir.A)(this.streams.entries()), q = vn(F), ge.prev = 4, q.s(); case 5: if ((ie = q.n()).done) { ge.next = 8; break } if (oe = (0, jr.A)(ie.value, 2), de = oe[0], pe = oe[1], pe.kind != "audio") { ge.next = 7; break } return ge.next = 6, dt.roomClient.getConsumerRemoteStats(de); case 6: return ge.abrupt("return", ge.sent); case 7: ge.next = 5; break; case 8: ge.next = 10; break; case 9: ge.prev = 9, fe = ge.catch(4), q.e(fe); case 10: return ge.prev = 10, q.f(), ge.finish(10); case 11: case "end": return ge.stop() } }, j, this, [[4, 9, 10, 11]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "consumeMicStreams", value: function () { dt.roomClient.consumeMicStreams(this.id) } }, { key: "consumeWebcamStreams", value: function () { dt.roomClient.consumeWebcamStreams(this.id) } }, { key: "stopConsumingWebcamStreams", value: function () { dt.roomClient.stopConsumingWebcamStreams(this.id) } }, { key: "stopConsumingMicStreams", value: function () { dt.roomClient.stopConsumingMicStreams(this.id) } }, { key: "renderVideo", value: function (x) { for (var j = this, F = x.type, q = F === void 0 ? "video" : F, ie = x.maxQuality, oe = ie === void 0 ? "auto" : ie, de = x.videostyle, pe = de === void 0 ? {} : de, fe = x.containerStyle, ge = fe === void 0 ? {} : fe, Oe, Ie = 0, Tt = (0, ir.A)(this.streams.values()); Ie < Tt.length; Ie++) { var tt = Tt[Ie]; tt.kind == q && (Oe = new MediaStream, Oe.addTrack(tt.track)) } if (this.participantVideoElements.get(q)) { if (Oe) { var Ge = this.participantVideoElements.get(q); Ge && (Ge.srcObject = Oe, Ge.play().catch(function (ht) { return console.error("videoElem.play() failed", ht) })) } return this.participantVideoElements.get(q) } try { var Xe = document.createElement("div"); Xe.classList.add("video-container", "participant-video-".concat(this.id)), Xe.setAttribute("id", "f-".concat(this.id).concat(q === "share" ? "-share" : "")), Xe.style.setProperty("position", "relative"), Object.assign(Xe.style, ge); var Ze = document.createElement("video"); if (Ze.setAttribute("id", "v-".concat(this.id).concat(q === "share" ? "-share" : "")), Ze.setAttribute("playsinline", ""), Ze.setAttribute("webkit-playsinline", ""), Ze.setAttribute("x5-playsinline", ""), Ze.playsinline = !0, Ze.muted = !0, Ze.autoplay = !0, Ze.onerror = function (ht) { console.log(ht, "participant video error") }, Object.assign(Ze.style, Ar({ width: "100%", height: "100%", objectFit: q === "share" ? "contain" : "cover" }, pe)), Oe && (Ze.srcObject = Oe, Ze.play().then(function (ht) { console.log("videoElem.play() success", ht) }).catch(function (ht) { return console.error("videoElem.play() failed", ht) })), Xe.appendChild(Ze), this.participantVideoElements.set(q, Ze), this.videoVisible = !1, !this.local && q === "video") { var Kt = (0, or.sg)(function (ht) { if (ht.length != 0) { var Er = ht[ht.length - 1]; if (Er.intersectionRatio > 0) { j.videoVisible = !0; for (var nn = 0, Vr = (0, ir.A)(j.streams.values()); nn < Vr.length; nn++) { var sn = Vr[nn]; sn.kind == "video" && sn.pausedBy !== "SUB_MANAGER" && sn.paused && sn.resume() } } else { j.videoVisible = !1; for (var Rr = 0, si = (0, ir.A)(j.streams.values()); Rr < si.length; Rr++) { var ui = si[Rr]; ui.kind == "video" && ui.pause() } } } }, 500), et = { root: null, rootMargin: "0px", threshold: 0 }, Rt = new IntersectionObserver(Kt, et); if (Rt.observe(Xe), oe == "auto" && q === "video") { var wr = (0, or.sg)(function (ht) { var Er = ht[0].contentRect, nn = Er.width, Vr = Er.height; nn > 0 && Vr > 0 && (j.height = Vr, j.width = nn, j.setViewPort(nn, Vr)) }, 500), Gr = new ResizeObserver(wr); Gr.observe(Xe), this.resizeObserver = Gr } } return q === "video" && oe !== "auto" && !this.local && this.setQuality(oe), Xe } catch (ht) { console.log("Render video Exception", ht) } } }, { key: "renderAudio", value: function (x) { var j = x.type, F = j === void 0 ? "audio" : j; if (this.local) return null; try { if (this.participantAudioElements.get(F)) { var q = this.participantAudioElements.get(F), ie = this.getAudioStream(F); return ie && q && (q.srcObject = ie, q.play().catch(function (pe) { return console.error("Failed to play existing audio:", pe) })), q } var oe = document.createElement("audio"); oe.setAttribute("id", "a-".concat(this.id, "-").concat(F)), oe.autoplay = !1, oe.playsInline = !0, oe.controls = !1, oe.style.display = "none", oe.onerror = function (pe) { return console.log("Audio element error:", pe) }; var de = this.getAudioStream(F); return de && (oe.srcObject = de, oe.play().catch(function (pe) { return console.error("Failed to play new audio:", pe) })), this.participantAudioElements.set(F, oe), oe } catch (pe) { return console.error("Render audio exception:", pe), null } } }, { key: "getAudioStream", value: function () { var x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : "audio", j = (0, ir.A)(this.streams.values()).find(function (q) { return q.kind === x }); if (j) { var F = new MediaStream; return F.addTrack(j.track), j.resume(), F } return null } }, { key: "addProducer", value: function (x) { this.eventEmitter.emit($i, x) } }, { key: "removeProducer", value: function (x) { this.eventEmitter.emit(Gs, x) } }, { key: "addConsumer", value: function (x) { this.eventEmitter.emit(ei, x) } }, { key: "removeConsumer", value: function (x) { this.eventEmitter.emit(va, x) } }, { key: "on", value: function (x, j) { switch (x) { case Xr: case mn: case Cr: case yn: case Ci: case Ri: case $i: case Gs: case ei: case va: case Ds: this.eventEmitter.on(x, j); break; default: throw new Error("Invalid event type from participant onn") } } }, { key: "off", value: function (x, j) { switch (x) { case Xr: case mn: case Cr: case yn: case Ci: case Ri: case $i: case Gs: case ei: case va: case Ds: this.eventEmitter.off(x, j); break; default: throw new Error("Invalid event type from participant off") } } }]) }(), Ua = l(388), dr = l(3954), Ks = l(5501), ms = { CHARACTER_SPEAKING: "CHARACTER_SPEAKING", CHARACTER_THINKING: "CHARACTER_THINKING", CHARACTER_LISTENING: "CHARACTER_LISTENING" }, rs = { TEXT: "text", CO_PILOT: "co_pilot", AUTO_PILOT: "auto_pilot", VISION_PILOT: "vision_pilot" }, dn = l(2107); function Is(U, A, x) { return A = (0, dr.A)(A), (0, Ua.A)(U, Ys() ? Reflect.construct(A, x || [], (0, dr.A)(U).constructor) : A.apply(U, x)) } function Ys() { try { var U = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })) } catch { } return (Ys = function () { return !!U })() } function Ne(U, A) { yt(U, A), A.add(U) } function pt(U, A, x) { yt(U, A), A.set(U, x) } function yt(U, A) { if (A.has(U)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function kt(U, A) { return U.get(Fr(U, A)) } function Pr(U, A, x) { return U.set(Fr(U, A), x), x } function Fr(U, A, x) { if (typeof U == "function" ? U === A : U.has(A)) return arguments.length < 3 ? A : x; throw new TypeError("Private element is not present on this object") } var xt = "stream-enabled", $r = "stream-disabled", xr = "character-joined", Yr = "character-left", bn = "media-status-changed", Di = "video-quality-changed", ki = "character-state-changed", ns = "character-message", gs = "user-message", ba = "data", uo = "error", is = new WeakMap, Va = new WeakMap, Wa = new WeakMap, Ha = new WeakMap, vs = new WeakMap, po = new WeakMap, Ui = new WeakMap, Bo = new WeakSet, jl = function (U) { function A(x) { var j; return (0, f.A)(this, A), j = Is(this, A, [{ id: x.id, displayName: x.displayName, mode: dn.nI.SEND_AND_RECV, metaData: x.metaData }]), Ne(j, Bo), pt(j, is, void 0), pt(j, Va, void 0), pt(j, Wa, void 0), pt(j, Ha, void 0), pt(j, vs, void 0), pt(j, po, void 0), pt(j, Ui, void 0), (0, P.A)(j, "captureImage", (0, d.A)(u().mark(function F() { var q, ie = arguments; return u().wrap(function (oe) { for (; ;)switch (oe.prev = oe.next) { case 0: throw q = ie.length > 0 && ie[0] !== void 0 ? ie[0] : {}, q.height, q.width, new Error("captureImage method is not supported on character"); case 1: case "end": return oe.stop() } }, F) }))), Pr(vs, j, x.interactionId || null), j.id = x.id || null, Pr(is, j, x.characterRole), Pr(Va, j, x.characterMode), Pr(Wa, j, x.knowledgeBases || []), j.displayName = x.displayName, Pr(Ha, j, x.language), Pr(po, j, x.state || ms.CHARACTER_LISTENING), Pr(Ui, j, x.roomClient), j } return (0, Ks.A)(A, U), (0, h.A)(A, [{ key: "join", value: function () { var x = (0, d.A)(u().mark(function F() { var q; return u().wrap(function (ie) { for (; ;)switch (ie.prev = ie.next) { case 0: return ie.next = 1, kt(Ui, this).joinCharacter({ interactionId: kt(vs, this), characterId: this.id, characterRole: kt(is, this), displayName: this.displayName, characterMode: kt(Va, this), knowledgeBases: kt(Wa, this), language: kt(Ha, this), metaData: this.metaData }); case 1: q = ie.sent, q && (this.id = q.characterId, this.displayName = q.displayName, Pr(Va, this, q.characterMode), Pr(is, this, q.characterRole), Pr(vs, this, q.interactionId), Pr(Wa, this, q.knowledgeBases), Pr(Ha, this, q.language), kt(Ui, this)._eventEmitter.emit("INIT_CHARACTER", this)); case 2: case "end": return ie.stop() } }, F, this) })); function j() { return x.apply(this, arguments) } return j }() }, { key: "leave", value: function () { var x = (0, d.A)(u().mark(function F() { return u().wrap(function (q) { for (; ;)switch (q.prev = q.next) { case 0: return q.next = 1, kt(Ui, this).removeCharacter(); case 1: case "end": return q.stop() } }, F, this) })); function j() { return x.apply(this, arguments) } return j }() }, { key: "remove", value: function () { var x = (0, d.A)(u().mark(function F() { return u().wrap(function (q) { for (; ;)switch (q.prev = q.next) { case 0: throw new Error("remove method is not supported on character"); case 1: case "end": return q.stop() } }, F) })); function j() { return x.apply(this, arguments) } return j }() }, { key: "sendMessage", value: function () { var x = (0, d.A)(u().mark(function F(q) { return u().wrap(function (ie) { for (; ;)switch (ie.prev = ie.next) { case 0: return ie.next = 1, kt(Ui, this).sendCharacterMessage({ interactionId: kt(vs, this), text: q }); case 1: case "end": return ie.stop() } }, F, this) })); function j(F) { return x.apply(this, arguments) } return j }() }, { key: "handleCharacterStateChanged", value: function (j) { Object.keys(ms).includes(j.status) && (Fr(Bo, this, Pc).call(this, j.status), this.eventEmitter.emit(ki, j)) } }, { key: "handleCharacterMessage", value: function (j) { this.eventEmitter.emit(ns, j) } }, { key: "interrupt", value: function () { var x = (0, d.A)(u().mark(function F() { return u().wrap(function (q) { for (; ;)switch (q.prev = q.next) { case 0: return q.next = 1, kt(Ui, this).interruptCharacter({ interactionId: kt(vs, this) }); case 1: case "end": return q.stop() } }, F, this) })); function j() { return x.apply(this, arguments) } return j }() }, { key: "handleUserMessage", value: function (j) { this.eventEmitter.emit(gs, j) } }, { key: "handleCharacterData", value: function (j) { var F = j.topic, q = j.data; this.eventEmitter.emit(ba, F, q) } }, { key: "handleCharacterError", value: function (j) { var F = j.data, q = this.eventEmitter.listenerCount(uo); q > 0 && this.eventEmitter.emit(uo, F) } }, { key: "enableMic", value: function () { kt(Ui, this).enablePeerMic(this.id) } }, { key: "disableMic", value: function () { kt(Ui, this).disablePeerMic(this.id) } }, { key: "enableWebcam", value: function () { kt(Ui, this).enablePeerWebcam(this.id) } }, { key: "disableWebcam", value: function () { kt(Ui, this).disablePeerWebcam(this.id) } }, { key: "updateStream", value: function (j) { throw new Error("updateStream method is not supported on character") } }, { key: "switchTo", value: function () { var x = (0, d.A)(u().mark(function F(q) { return u().wrap(function (ie) { for (; ;)switch (ie.prev = ie.next) { case 0: throw q.meetingId, q.payload, q.token, new Error("switchTo method is not supported on character"); case 1: case "end": return ie.stop() } }, F) })); function j(F) { return x.apply(this, arguments) } return j }() }, { key: "pin", value: function (j) { throw new Error("pin method is not supported on character") } }, { key: "on", value: function (j, F) { switch (j) { case xt: case $r: case xr: case Yr: case bn: case Di: case ki: case ns: case gs: case ba: case uo: this.eventEmitter.on(j, F); break; default: throw new Error("Invalid event type") } } }, { key: "off", value: function (j, F) { switch (j) { case xt: case $r: case xr: case Yr: case bn: case Di: case ki: case ns: case gs: case ba: case uo: this.eventEmitter.off(j, F); break; default: throw new Error("Invalid event type") } } }, { key: "state", get: function () { return kt(po, this) } }, { key: "knowledgeBases", get: function () { return kt(Wa, this) } }, { key: "characterMode", get: function () { return kt(Va, this) } }, { key: "characterRole", get: function () { return kt(is, this) } }, { key: "interactionId", get: function () { return kt(vs, this) } }, { key: "language", get: function () { return kt(Ha, this) } }]) }(ya); function Pc(U) { Pr(po, this, U) } function Ol(U, A, x) { Ml(U, A), A.set(U, x) } function Ml(U, A) { if (A.has(U)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function ru(U, A) { return U.get(ho(U, A)) } function nu(U, A, x) { return U.set(ho(U, A), x), x } function ho(U, A, x) { if (typeof U == "function" ? U === A : U.has(A)) return arguments.length < 3 ? A : x; throw new TypeError("Private element is not present on this object") } var Ll = new WeakMap, Fo = function () { function U(A, x) { var j = A.id, F = A.displayName; (0, f.A)(this, U), Ol(this, Ll, void 0), this.id = j, this.displayName = F, nu(Ll, this, x) } return (0, h.A)(U, [{ key: "switchTo", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe; return u().wrap(function (de) { for (; ;)switch (de.prev = de.next) { case 0: return q = F.meetingId, ie = F.payload, oe = F.token, de.next = 1, dt.roomClient.connectionSwitchPeerRoom({ roomId: q, connectionRoomId: ru(Ll, this), payload: ie, peerId: this.id, token: oe }); case 1: case "end": return de.stop() } }, j, this) })); function x(j) { return A.apply(this, arguments) } return x }() }]) }(), fo = "participant-joined", zo = "participant-left", $o = "data", Nl = function () { function U(A, x) { var j = this; (0, f.A)(this, U), this.eventEmitter = new ct.EventEmitter, this.id = A, this.participants = new Map, x.forEach(function (F) { j.participants.set(F.id, new Fo(F, j.id)) }) } return (0, h.A)(U, [{ key: "participantJoin", value: function (x) { var j = new Fo(x, this.id); this.participants.set(x.id, j), this.eventEmitter.emit(fo, j) } }, { key: "participantLeft", value: function (x) { this.participants.delete(x), this.eventEmitter.emit(zo, x) } }, { key: "sendChatMessage", value: function (x) { dt.roomClient.connectionSendChatMessage({ roomId: this.id, message: x }) } }, { key: "sendChatMessageEvent", value: function (x) { var j = x.participantId, F = x.message; this.eventEmitter.emit($o, { participantId: j, message: F }) } }, { key: "end", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, dt.roomClient.connectionEndMeeting({ roomId: this.id }); case 1: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "on", value: function (x, j) { switch (x) { case fo: case zo: case $o: this.eventEmitter.on(x, j); break; default: throw new Error("Invalid event type") } } }, { key: "off", value: function (x, j) { switch (x) { case fo: case zo: case $o: this.eventEmitter.off(x, j); break; default: throw new Error("Invalid event type") } } }]) }(), mo = function () { function U(A) { var x = A.roomId, j = A.peers, F = A.payload; (0, f.A)(this, U), this.id = x, this.payload = F, this.meeting = new Nl(x, j) } return (0, h.A)(U, [{ key: "close", value: function () { dt.roomClient.closeConnection(this.id) } }]) }(), Uo = l(1260); function Bl(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function js(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? Bl(Object(x), !0).forEach(function (j) { (0, P.A)(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : Bl(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } function ys(U, A) { Ic(U, A), A.add(U) } function Dc(U, A, x) { Ic(U, A), A.set(U, x) } function Ic(U, A) { if (A.has(U)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function Vi(U, A) { return U.get(qa(U, A)) } function jc(U, A, x) { return U.set(qa(U, A), x), x } function qa(U, A, x) { if (typeof U == "function" ? U === A : U.has(A)) return arguments.length < 3 ? A : x; throw new TypeError("Private element is not present on this object") } var go = "error", vo = "meeting-joined", Ga = "meeting-left", Vo = "participant-mode-changed", Fl = "participant-joined", zl = "participant-left", Wo = "speaker-changed", Os = "presenter-changed", Ho = "main-participant-changed", $l = "data", Ul = "entry-requested", Vl = "entry-responded", Wl = "recording-state-changed", Hl = "recording-started", ql = "recording-stopped", Gl = "livestream-state-changed", Kl = "livestream-started", qo = "livestream-stopped", sr = "hls-state-changed", rt = "hls-started", ae = "hls-stopped", Ee = "whiteboard-started", Ke = "whiteboard-stopped", Hr = "video-state-changed", Zr = "video-seeked", xa = "mic-requested", Wi = "webcam-requested", iu = "stream-enabled", Oc = "stream-disabled", Mc = "pin-state-changed", Qs = "connection-open", su = "connection-close", Yl = "switch-meeting", _a = "meeting-state-changed", au = "socket-state-changed", Lc = "quality-limitation", Go = "paused-all-streams", ou = "resumed-all-streams", Nc = "transcription-state-changed", yo = "transcription-text", Bc = "translation-state-changed", Fc = "translation-text", bo = "translation-language-changed", Ko = "character-joined", Ql = "character-left", lu = "media-relay-started", zc = "media-relay-stopped", cu = "media-relay-error", Jl = "media-relay-request-response", $c = "media-relay-request-received", wa = new WeakMap, Ka = new WeakMap, Xl = new WeakSet, Rm = function () { function U(A, x, j) { var F = this; (0, f.A)(this, U), ys(this, Xl), Dc(this, wa, void 0), Dc(this, Ka, void 0), (0, P.A)(this, "pubSub", { publish: function () { var q = (0, d.A)(u().mark(function oe(de, pe, fe, ge) { return u().wrap(function (Oe) { for (; ;)switch (Oe.prev = Oe.next) { case 0: if (pe == null) { Oe.next = 1; break } if (typeof pe == "string") { Oe.next = 1; break } throw new Error('"message" can only be string.'); case 1: if (ge == null) { Oe.next = 2; break } if ((0, p.A)(ge) == "object") { Oe.next = 2; break } throw new Error('"payload" can only be object.'); case 2: return Oe.next = 3, F.roomClient.pubsubPublish(de, pe, fe, ge); case 3: case "end": return Oe.stop() } }, oe) })); function ie(oe, de, pe, fe) { return q.apply(this, arguments) } return ie }(), subscribe: function () { var q = (0, d.A)(u().mark(function oe(de, pe) { var fe; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: if (!Vi(wa, F).listeners(de).includes(pe)) { ge.next = 1; break } return ge.abrupt("return"); case 1: return ge.next = 2, F.roomClient.pubsubSubscribe(de); case 2: return fe = ge.sent, Vi(wa, F).on(de, pe), ge.abrupt("return", fe); case 3: case "end": return ge.stop() } }, oe) })); function ie(oe, de) { return q.apply(this, arguments) } return ie }(), unsubscribe: function () { var q = (0, d.A)(u().mark(function oe(de, pe) { return u().wrap(function (fe) { for (; ;)switch (fe.prev = fe.next) { case 0: if (Vi(wa, F).off(de, pe), Vi(wa, F).listeners(de).length != 0) { fe.next = 1; break } return fe.next = 1, F.roomClient.pubsubUnsubscribe(de); case 1: case "end": return fe.stop() } }, oe) })); function ie(oe, de) { return q.apply(this, arguments) } return ie }() }), (0, P.A)(this, "realtimeStore", { setValue: function () { var q = (0, d.A)(u().mark(function oe(de, pe) { return u().wrap(function (fe) { for (; ;)switch (fe.prev = fe.next) { case 0: return fe.next = 1, F.roomClient.setValue(de, pe); case 1: return fe.abrupt("return", fe.sent); case 2: case "end": return fe.stop() } }, oe) })); function ie(oe, de) { return q.apply(this, arguments) } return ie }(), getValue: function () { var q = (0, d.A)(u().mark(function oe(de) { return u().wrap(function (pe) { for (; ;)switch (pe.prev = pe.next) { case 0: return pe.next = 1, F.roomClient.getValue(de); case 1: return pe.abrupt("return", pe.sent); case 2: case "end": return pe.stop() } }, oe) })); function ie(oe) { return q.apply(this, arguments) } return ie }(), observe: function () { var q = (0, d.A)(u().mark(function oe(de, pe) { var fe; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: if (de != null) { ge.next = 1; break } throw new Error("The 'key' parameter is required."); case 1: if (typeof de == "string") { ge.next = 2; break } throw new TypeError("Invalid type for 'key'. Expected a string."); case 2: if (!Vi(Ka, F).listeners(de).includes(pe)) { ge.next = 3; break } return ge.abrupt("return"); case 3: return ge.next = 4, F.roomClient.observe(de); case 4: return fe = Math.random().toString(36).substring(2, 10), F.observers.set(fe, { key: de, callback: pe }), Vi(Ka, F).on(de, pe), ge.abrupt("return", fe); case 5: case "end": return ge.stop() } }, oe) })); function ie(oe, de) { return q.apply(this, arguments) } return ie }(), stopObserving: function () { var q = (0, d.A)(u().mark(function oe(de) { var pe, fe, ge; return u().wrap(function (Oe) { for (; ;)switch (Oe.prev = Oe.next) { case 0: if (de != null) { Oe.next = 1; break } throw new Error("The 'observerId' parameter is required."); case 1: if (pe = F.observers.get(de), pe) { Oe.next = 2; break } return Oe.abrupt("return"); case 2: if (fe = pe.key, ge = pe.callback, Vi(Ka, F).off(fe, ge), Vi(Ka, F).listeners(fe).length != 0) { Oe.next = 3; break } return Oe.next = 3, F.roomClient.stopObserving(fe); case 3: case "end": return Oe.stop() } }, oe) })); function ie(oe) { return q.apply(this, arguments) } return ie }() }), (0, P.A)(this, "uploadBase64File", function () { var q = (0, d.A)(u().mark(function ie(oe) { var de, pe, fe, ge, Oe, Ie, Tt, tt, Ge, Xe, Ze, Kt; return u().wrap(function (et) { for (; ;)switch (et.prev = et.next) { case 0: if (pe = oe.base64Data, fe = oe.token, ge = oe.fileName, Oe = (de = F.roomClient._openTelemetry) === null || de === void 0 ? void 0 : de.trace({ spanName: "Uploading Base64 File", attributes: { fileName: ge || "No filename provided" } }), et.prev = 1, !(!pe || !fe || !ge)) { et.next = 2; break } throw new Error("please provide base64Data, token and fileName"); case 2: return Tt = "https://".concat(F.baseUrl, "/base64-upload?roomId=").concat(F.id), tt = { fileName: ge, base64Data: pe }, et.next = 3, fetch(Tt, { method: "POST", body: JSON.stringify(tt), headers: { "Content-Type": "application/json", Authorization: fe } }); case 3: return Ge = et.sent, et.next = 4, Ge.json(); case 4: return Xe = et.sent, (Ie = F.roomClient._openTelemetry) === null || Ie === void 0 || Ie.completeSpan({ span: Oe, status: 1, message: "Base64 File uploaded successfully" }), et.abrupt("return", Xe.url); case 5: et.prev = 5, Kt = et.catch(1), console.error("Error while Uploading Base64 File::", Kt), F.roomClient._videosdkLogs && F.roomClient._videosdkLogs.pushLogs({ logText: "Error while Uploading Base64 File", logType: "ERROR", attributes: { error: Kt.message } }), (Ze = F.roomClient._openTelemetry) === null || Ze === void 0 || Ze.completeSpan({ span: Oe, status: 1, message: "Error while Uploading Base64 File : ".concat(Kt.message) }); case 6: case "end": return et.stop() } }, ie, null, [[1, 5]]) })); return function (ie) { return q.apply(this, arguments) } }()), (0, P.A)(this, "fetchBase64File", function () { var q = (0, d.A)(u().mark(function ie(oe) { var de, pe, fe, ge, Oe, Ie, Tt, tt, Ge, Xe; return u().wrap(function (Ze) { for (; ;)switch (Ze.prev = Ze.next) { case 0: if (pe = oe.url, fe = oe.token, ge = (de = F.roomClient._openTelemetry) === null || de === void 0 ? void 0 : de.trace({ spanName: "Fetching Base64 File", attributes: { fileUrl: pe || "No URL provided" } }), Ze.prev = 1, !(!pe || !fe)) { Ze.next = 2; break } throw new Error("please provide url and token"); case 2: return Ze.next = 3, fetch(pe, { headers: { Authorization: fe } }); case 3: return Ie = Ze.sent, Ze.next = 4, Ie.arrayBuffer(); case 4: return Tt = Ze.sent, tt = window.btoa(new Uint8Array(Tt).reduce(function (Kt, et) { return Kt + String.fromCharCode(et) }, "")), (Oe = F.roomClient._openTelemetry) === null || Oe === void 0 || Oe.completeSpan({ span: ge, status: 1, message: "Base64 File fetched successfully" }), Ze.abrupt("return", tt); case 5: Ze.prev = 5, Xe = Ze.catch(1), console.error("Error while fetching Base64 File::", Xe), F.roomClient._videosdkLogs && F.roomClient._videosdkLogs.pushLogs({ logText: "Error while fetching Base64 File", logType: "ERROR", attributes: { error: Xe.message } }), (Ge = F.roomClient._openTelemetry) === null || Ge === void 0 || Ge.completeSpan({ span: ge, status: 1, message: "Error while fetching Base64 File : ".concat(Xe.message) }); case 6: case "end": return Ze.stop() } }, ie, null, [[1, 5]]) })); return function (ie) { return q.apply(this, arguments) } }()), this.id = A, this.roomClient = j, this.activeSpeakerId = null, this.activePresenterId = null, this.mainParticipantId = null, this.connections = new Map, this.localParticipant = x, this.participants = new Map, this.characters = new Map, this.baseUrl = null, this.livestreamState = "LIVESTREAM_STOPPED", this.recordingState = "RECORDING_STOPPED", this.hlsState = "HLS_STOPPED", this.transcriptionState = "TRANSCRIPTION_STOPPED", this.translationState = "TRANSLATION_STOPPED", this.hlsUrls = { downstreamUrl: null, playbackHlsUrl: null, livestreamUrl: null }, this.messages = [], this.observers = new Map, this.eventEmitter = new ct.EventEmitter, jc(wa, this, new ct.EventEmitter), jc(Ka, this, new ct.EventEmitter), this.eventEmitter.setMaxListeners(9999), Vi(wa, this).setMaxListeners(9999), Vi(Ka, this).setMaxListeners(9999), this.roomClient.on("ERROR", function (q) { return F.handleError(q) }), this.roomClient.on("ADD_PEER", function (q) { return F.handlePeerAdd(q) }), this.roomClient.on("REMOVE_PEER", function (q) { return F.handlePeerRemove(q) }), this.roomClient.on("STREAM_STATE_CHANGED", function (q) { return F.handleStreamState(q) }), this.roomClient.on("ADD_PRODUCER", function (q) { return F.handleProducerAdd(q) }), this.roomClient.on("UPDATE_PRODUCER", function (q) { return F.handleUpdateProducer(q) }), this.roomClient.on("REMOVE_PRODUCER", function (q) { return F.handleProducerRemove(q) }), this.roomClient.on("ADD_CONSUMER", function (q) { return F.handleConsumerAdd(q) }), this.roomClient.on("REMOVE_CONSUMER", function (q) { return F.handleConsumerRemove(q) }), this.roomClient.on("CONSUMER_RESUMED", function (q) { return F.handleConsumerResume(q) }), this.roomClient.on("CONSUMER_PAUSED", function (q) { return F.handleConsumerPause(q) }), this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED", function (q) { return F.handleParticipantMediaStateChanged(q) }), this.roomClient.on("DATA", function (q) { return F.handleNewChatMessage(q) }), this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER", function (q) { return F.handleSpeakerChange(q) }), this.roomClient.on("ENTRY_REQUESTED", function (q) { return F.handleEntryRequested(q) }), this.roomClient.on("ENTRY_RESPONDED", function (q) { return F.handleEntryResponded(q) }), this.roomClient.on("MEETING_JOINED", function (q) { return F.handleMeetingJoined(q) }), this.roomClient.on("MEETING_LEFT", function (q) { return F.handleMeetingLeft(q) }), this.roomClient.on("RECORDING_STATE_CHANGED", function (q) { F.handleRecordingStateChanged(q) }), this.roomClient.on("RECORDING_STARTED", function (q) { return F.handleRecordingStarted(q) }), this.roomClient.on("RECORDING_STOPPED", function (q) { return F.handleRecordingStopped(q) }), this.roomClient.on("LIVESTREAM_STATE_CHANGED", function (q) { F.handleLivestreamStateChanged(q) }), this.roomClient.on("LIVESTREAM_STARTED", function (q) { return F.handleLivestreamStarted(q) }), this.roomClient.on("LIVESTREAM_STOPPED", function (q) { return F.handleLivestreamStopped(q) }), this.roomClient.on("HLS_STATE_CHANGED", function (q) { F.handleHlsStateChanged(q) }), this.roomClient.on("HLS_STARTED", function (q) { F.handleHlsStarted(q) }), this.roomClient.on("HLS_STOPPED", function (q) { F.handleHlsStopped(q) }), this.roomClient.on("TRANSCRIPTION_STATE_CHANGED", function (q) { F.handleTranscriptionStateChanged(q) }), this.roomClient.on("TRANSCRIPTION_TEXT", function (q) { F.handleTranscriptionText(q) }), this.roomClient.on("TRANSLATION_STATE_CHANGED", function (q) { F.handleTranslationStateChanged(q) }), this.roomClient.on("TRANSLATION_TEXT", function (q) { F.handleTranslationText(q) }), this.roomClient.on("TRANSLATION_LANGUAGE_CHANGED", function (q) { F.handleTranslationLanguageChanged(q) }), this.roomClient.on("SUB_MANAGER_RESUMED", function (q) { F.handleParticipantResumeBySubManager(q) }), this.roomClient.on("SUB_MANAGER_PAUSED", function (q) { F.handleParticipantPausedBySubManager(q) }), this.roomClient.on("WHITEBOARD_STARTED", function (q) { return F.handleWhiteboardStarted(q) }), this.roomClient.on("WHITEBOARD_STOPPED", function (q) { return F.handleWhiteboardStopped(q) }), this.roomClient.on("VIDEO_STATE_CHANGED", function (q) { return F.handleVideoStateChanged(q) }), this.roomClient.on("VIDEO_SEEKED", function (q) { return F.handleVideoSeeked(q) }), this.roomClient.on("PIN_STATE_CHANGED", function (q) { F.handlePinStateChanged(q) }), this.roomClient.on("MIC_REQUESTED", function (q) { return F.handleMicRequested(q) }), this.roomClient.on("WEBCAM_REQUESTED", function (q) { return F.handleWebcamRequested(q) }), this.roomClient.on("CONNECTION_OPEN", function (q) { return F.handleConnectionOpen(q) }), this.roomClient.on("CONNECTION_CLOSE", function (q) { return F.handleConnectionClose(q) }), this.roomClient.on("CONNECTION_PARTICIPANT_JOIN", function (q) { return F.handleConnectionParticipantJoin(q) }), this.roomClient.on("SWITCH_ROOM", function (q) { return F.handleSwitchMeeting(q) }), this.roomClient.on("CONNECTION_CHAT_MESSAGE", function (q) { return F.handleConnectionChatMessage(q) }), this.roomClient.on("CONNECTION_PARTICIPANT_LEFT", function (q) { F.handleConnectionParticipantLeft(q) }), this.roomClient.on("PUBSUB_MESSAGE", function (q) { return qa(Xl, F, Yo).call(F, q) }), this.roomClient.on("REALTIMESTORE_VALUE_CHANGED", function (q) { return qa(Xl, F, Sa).call(F, q) }), this.roomClient.on("PEER_MODE_CHANGED", function (q) { return qa(Xl, F, du).call(F, q) }), this.updateMainParticipant(this.localParticipant.id), this.roomClient.on("MEETING_STATE_CHANGED", function (q) { return F.handleMeetingStateChanged(q) }), this.roomClient.on("SOCKET_STATE_CHANGED", function (q) { return F.handleSocketStateChanged(q) }), this.roomClient.on("QUALITY_LIMITATION_INTERNAL", function (q) { return F.handleQualityChanged(q) }), this.roomClient.on("ALL_CONSUMERS_PAUSED", function (q) { return F.handleConsumersPaused(q) }), this.roomClient.on("ALL_CONSUMERS_RESUMED", function (q) { return F.handleConsumersResumed(q) }), this.roomClient.on("VIDEO_QUALITY_CHANGED", function (q) { return F.handleVideoQualityChanged(q) }), this.roomClient.on("ADD_CHARACTER", function (q) { return F.handleAddCharacter(q) }), this.roomClient.on("INIT_CHARACTER", function (q) { return F.handleInitCharacter(q) }), this.roomClient.on("REMOVE_CHARACTER", function (q) { return F.handleRemoveCharacter(q) }), this.roomClient.on("CHARACTER_STATE_CHANGED", function (q) { return F.handleCharacterStateChanged(q) }), this.roomClient.on("CHARACTER_MESSAGE", function (q) { return F.handleCharacterMessage(q) }), this.roomClient.on("USER_MESSAGE", function (q) { return F.handleUserMessage(q) }), this.roomClient.on("CHARACTER_DATA", function (q) { return F.handleOnCharacterData(q) }), this.roomClient.on("CHARACTER_ERROR", function (q) { return F.handleOnCharacterError(q) }), this.roomClient.on("E2EE_STATE_CHANGE", function (q) { return F.handleE2EEStateChange(q) }), this.roomClient.on("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING", function () { return F.handleOnRemoveCurrentMeetingParticipant() }), this.roomClient.on("MEDIA_RELAY_STARTED", function (q) { return F.handleMediaRelayStart(q) }), this.roomClient.on("MEDIA_RELAY_STOPPED", function (q) { return F.handleMediaRelayStop(q) }), this.roomClient.on("MEDIA_RELAY_ERROR", function (q) { return F.handleMediaRelayError(q) }), this.roomClient.on("MEDIA_RELAY_REQUEST_RESPONSE", function (q) { return F.handleMediaRelayRequestResponse(q) }), this.roomClient.on("MEDIA_RELAY_REQUEST_RECEIVED", function (q) { return F.handleMediaRelayRequest(q) }) } return (0, h.A)(U, [{ key: "isE2EEEnabled", get: function () { return this.roomClient.isE2EEEnabled } }, { key: "handleError", value: function (x) { var j = this.eventEmitter.listenerCount(go); j > 0 && this.eventEmitter.emit(go, x) } }, { key: "join", value: function () { this.roomClient.join() } }, { key: "changeMode", value: function (x) { this.roomClient.changeMode(x) } }, { key: "leave", value: function () { this.roomClient.close({ sendLeft: !0, manualCalled: !0 }) } }, { key: "end", value: function () { this.roomClient.closeRoom() } }, { key: "respondEntry", value: function (x, j) { this.roomClient.respondEntry(x, j) } }, { key: "pinnedParticipants", get: function () { return this.roomClient._pinnedParticipants } }, { key: "muteMic", value: function () { this.roomClient.disableMic() } }, { key: "unmuteMic", value: function () { var x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0; this.roomClient.enableMic(x) } }, { key: "publishAudio", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q = arguments; return u().wrap(function (ie) { for (; ;)switch (ie.prev = ie.next) { case 0: return F = q.length > 0 && q[0] !== void 0 ? q[0] : void 0, ie.next = 1, this.roomClient.enableMic(F); case 1: return ie.abrupt("return"); case 2: case "end": return ie.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "unpublishAudio", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, this.roomClient.disableMic(); case 1: return F.abrupt("return"); case 2: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "disableWebcam", value: function () { this.roomClient.disableWebcam() } }, { key: "enableWebcam", value: function () { var x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0; this.roomClient.enableWebcam(x) } }, { key: "publishVideo", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q = arguments; return u().wrap(function (ie) { for (; ;)switch (ie.prev = ie.next) { case 0: return F = q.length > 0 && q[0] !== void 0 ? q[0] : void 0, this.roomClient.enableWebcam(F), ie.abrupt("return"); case 1: case "end": return ie.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "unpublishVideo", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return this.roomClient.disableWebcam(), F.abrupt("return"); case 1: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "disableScreenShare", value: function () { this.roomClient.disableShare() } }, { key: "enableScreenShare", value: function () { var x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0; this.roomClient.enableShare(x) } }, { key: "pubblishScreenShare", value: function () { var x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : void 0; this.roomClient.enableShare(x) } }, { key: "unpublishScreenShare", value: function () { this.roomClient.disableShare() } }, { key: "send", value: function () { var A = (0, d.A)(u().mark(function j(F, q) { return u().wrap(function (ie) { for (; ;)switch (ie.prev = ie.next) { case 0: return ie.next = 1, this.roomClient.send(F, q); case 1: return ie.abrupt("return", ie.sent); case 2: case "end": return ie.stop() } }, j, this) })); function x(j, F) { return A.apply(this, arguments) } return x }() }, { key: "pauseAllStreams", value: function (x) { this.roomClient.pauseAllConsumers(x) } }, { key: "resumeAllStreams", value: function (x) { this.roomClient.resumeAllConsumers(x) } }, { key: "startRecording", value: function (x, j, F, q) { this.roomClient.startRecording(x, j, F, q) } }, { key: "stopRecording", value: function () { this.roomClient.stopRecording() } }, { key: "startTranscription", value: function (x) { this.roomClient.startTranscription(x) } }, { key: "stopTranscription", value: function () { this.roomClient.stopTranscription() } }, { key: "startTranslation", value: function () { var A = (0, d.A)(u().mark(function j(F) { return u().wrap(function (q) { for (; ;)switch (q.prev = q.next) { case 0: return q.abrupt("return", this.roomClient.startTranslation(F)); case 1: case "end": return q.stop() } }, j, this) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "changeTranslationLanguage", value: function () { var A = (0, d.A)(u().mark(function j(F) { return u().wrap(function (q) { for (; ;)switch (q.prev = q.next) { case 0: return q.abrupt("return", this.roomClient.changeTranslationLanguage(F)); case 1: case "end": return q.stop() } }, j, this) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "stopTranslation", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.abrupt("return", this.roomClient.stopTranslation()); case 1: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "startLivestream", value: function (x, j) { this.roomClient.startLivestream(x, j) } }, { key: "stopLivestream", value: function () { this.roomClient.stopLivestream() } }, { key: "startHls", value: function () { var A = (0, d.A)(u().mark(function j(F, q) { return u().wrap(function (ie) { for (; ;)switch (ie.prev = ie.next) { case 0: return ie.next = 1, this.roomClient.startHls(F, q); case 1: case "end": return ie.stop() } }, j, this) })); function x(j, F) { return A.apply(this, arguments) } return x }() }, { key: "stopHls", value: function () { this.roomClient.stopHls() } }, { key: "createCharacter", value: function (x) { if (!x.interactionId && !x.id) throw new Error("InteractionId or id is required"); return new jl(js(js({}, x), {}, { roomClient: this.roomClient })) } }, { key: "getMics", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, this.roomClient.getMics(); case 1: return F.abrupt("return", F.sent); case 2: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "getWebcams", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, this.roomClient.getWebcams(); case 1: return F.abrupt("return", F.sent); case 2: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "changeMic", value: function (x) { this.roomClient.changeMic(x) } }, { key: "changeWebcam", value: function (x) { this.roomClient.changeWebcam(x) } }, { key: "replaceWebcamStream", value: function (x) { this.roomClient.replaceWebcamStream(x) } }, { key: "setWebcamQuality", value: function (x) { this.roomClient.setWebcamQuality(x) } }, { key: "startWhiteboard", value: function () { this.roomClient.startWhiteboard() } }, { key: "stopWhiteboard", value: function () { this.roomClient.stopWhiteboard() } }, { key: "startVideo", value: function (x) { var j = x.link; this.roomClient.startVideo({ link: j }) } }, { key: "stopVideo", value: function () { this.roomClient.stopVideo() } }, { key: "resumeVideo", value: function () { this.roomClient.resumeVideo() } }, { key: "refreshConnection", value: function () { this.roomClient.restartIce() } }, { key: "pauseVideo", value: function (x) { var j = x.currentTime; this.roomClient.pauseVideo(j) } }, { key: "seekVideo", value: function (x) { var j = x.currentTime; this.roomClient.seekVideo(j) } }, { key: "handlePeerAdd", value: function (x) { var j = x.peer, F = new ya(j); this.participants.set(F.id, F), this.eventEmitter.emit(Fl, F), this.participants.size === 1 && this.updateMainParticipant(F.id) } }, { key: "handleStreamState", value: function (x) { var j = x.state, F = x.peerId, q = x.streamId, ie = this.participants.get(F); ie != null && ie.handleStreamStateChanged({ state: j, peerId: F, streamId: q }) } }, { key: "handlePeerRemove", value: function (x) { var j = x.peerId, F = x.reason, q = { code: Uo.t.UNKNOWN.code, message: Uo.t.UNKNOWN.message }, ie = this.participants.get(j); ie != null && (this.participants.delete(j), this.eventEmitter.emit(zl, ie, F || q), this.activePresenterId === ie.id && (this.activePresenterId = null, this.eventEmitter.emit(Os, this.activePresenterId)), this.mainParticipantId === ie.id && (this.participants.size > 0 ? this.updateMainParticipant(this.participants.entries().next().value[1].id) : this.updateMainParticipant(this.localParticipant.id))) } }, { key: "handleProducerAdd", value: function (x) { var j = x.producer, F = { id: j.id, rtpSender: j.rtpSender }; this.localParticipant.addProducer(F); var q = new vr(j); this.localParticipant.addStream(q), q.kind === "share" && (this.activePresenterId = this.localParticipant.id, this.eventEmitter.emit(Os, this.activePresenterId), this.updateMainParticipant(this.localParticipant.id)) } }, { key: "handleUpdateProducer", value: function (x) { var j = x.producer, F = new vr(j); this.localParticipant.updateStream(F) } }, { key: "handleProducerRemove", value: function (x) { var j = x.producerId; this.localParticipant.removeProducer(j); var F = this.localParticipant.deleteStream(j); if (F && F.kind === "share") { this.activePresenterId = null, this.eventEmitter.emit(Os, this.activePresenterId); var q = this.participants.size > 0 ? this.participants.entries().next().value[1].id : null; this.updateMainParticipant(this.activeSpeakerId || q || this.localParticipant.id) } } }, { key: "handleConsumerAdd", value: function (x) { var j = x.consumer, F = x.peerId, q = this.participants.get(F) || this.characters.get(F); if (q) { var ie = { id: j.id, rtpReceiver: j.rtpReceiver }; q.addConsumer(ie); var oe = new vr(j); q.addStream(oe), this.eventEmitter.emit(iu, oe), oe.kind === "share" && (this.activePresenterId = q.id, this.eventEmitter.emit(Os, this.activePresenterId), this.updateMainParticipant(q.id)) } } }, { key: "handleConsumerResume", value: function (x) { var j = x.consumerId, F = x.peerId, q = this.participants.get(F); q && q.streamResumed(j) } }, { key: "handleConsumerPause", value: function (x) { var j = x.consumerId, F = x.peerId, q = this.participants.get(F); q && q.streamPaused(j) } }, { key: "handleConsumerRemove", value: function (x) { var j = x.consumerId, F = x.peerId, q = this.participants.get(F) || this.characters.get(F); if (q != null && q) { q.removeConsumer(j); var ie = q.deleteStream(j); if (this.eventEmitter.emit(Oc, ie), ie && ie.kind === "share") { this.activePresenterId = null, this.eventEmitter.emit(Os, this.activePresenterId); var oe = this.participants.size > 0 ? this.participants.entries().next().value[1].id : null; this.updateMainParticipant(this.activeSpeakerId || oe || this.localParticipant.id) } } } }, { key: "handleParticipantMediaStateChanged", value: function (x) { var j = x.peerId, F = x.kind, q = x.newState, ie = this.participants.get(j) || this.characters.get(j); this.localParticipant.id == j && (ie = this.localParticipant), ie && ie && (F == "audio" ? ie.micOn = q : F == "video" ? ie.webcamOn = q : F == "share" ? ie.screenShareOn = q : F == "shareAudio" && (ie.screenShareAudioOn = q), ie.updateParticipantMediaState(F, q)) } }, { key: "handleParticipantPausedBySubManager", value: function (x) { var j = this.participants.get(x.peerId); j && j && j.handleParticipantPause(x) } }, { key: "handleParticipantResumeBySubManager", value: function (x) { var j = this.participants.get(x.peerId); j && j && j.handleParticipantResume(x) } }, { key: "handleSpeakerChange", value: function (x) { var j = x.peerId; this.activeSpeakerId !== j && (this.activeSpeakerId = j, this.eventEmitter.emit(Wo, j), j && j !== this.localParticipant.id && this.activePresenterId !== this.mainParticipantId && j !== this.mainParticipantId && this.updateMainParticipant(j)) } }, { key: "handleNewChatMessage", value: function (x) { var j = x.payload, F = x.from, q = x.reliability, ie = x.timestamp, oe = { from: F, payload: j, timestamp: ie, reliability: q }; this.messages.push(oe), this.eventEmitter.emit($l, oe) } }, { key: "updateMainParticipant", value: function (x) { this.mainParticipantId = x; var j = null; x === this.localParticipant.id ? j = this.localParticipant : j = this.participants.get(this.mainParticipantId), this.eventEmitter.emit(Ho, j) } }, { key: "handleEntryRequested", value: function (x) { var j = this, F = x.id, q = x.name; this.eventEmitter.emit(Ul, { participantId: F, name: q, allow: function () { j.roomClient.respondEntry(F, "allowed") }, deny: function () { j.roomClient.respondEntry(F, "denied") } }) } }, { key: "handleEntryResponded", value: function (x) { var j = x.id, F = x.decision; this.eventEmitter.emit(Vl, j, F) } }, { key: "handleMeetingJoined", value: function (x) { var j = x.peers, F = x.poll, q = x.messages, ie = x.baseUrl, oe = x.switchRoomId; typeof oe == "string" && (this.id = oe), this.baseUrl = ie, q.length > 0 && (this.messages = q), this.eventEmitter.emit(vo, { switchRoomId: oe || null, peers: j, poll: F, messages: q }) } }, { key: "handleMeetingLeft", value: function (x) { this.eventEmitter.emit(Ga, x) } }, { key: "handleRecordingStateChanged", value: function (x) { this.recordingState = x.status, this.eventEmitter.emit(Wl, x) } }, { key: "handleLivestreamStateChanged", value: function (x) { this.livestreamState = x.status, this.eventEmitter.emit(Gl, x) } }, { key: "handleHlsStateChanged", value: function (x) { this.hlsState = x.status, x.status == "HLS_PLAYABLE" ? this.hlsUrls = { downstreamUrl: x.downstreamUrl, playbackHlsUrl: x.playbackHlsUrl, livestreamUrl: x.livestreamUrl } : x.status == "HLS_STOPPED" && (this.hlsUrls = { downstreamUrl: null, playbackHlsUrl: null, livestreamUrl: null }), this.eventEmitter.emit(sr, x) } }, { key: "handleTranscriptionStateChanged", value: function (x) { this.transcriptionState = x.status, this.eventEmitter.emit(Nc, x) } }, { key: "handleTranscriptionText", value: function (x) { this.eventEmitter.emit(yo, x) } }, { key: "handleTranslationText", value: function (x) { this.eventEmitter.emit(Fc, x) } }, { key: "handleTranslationStateChanged", value: function (x) { this.translationState = x.status, this.eventEmitter.emit(Bc, x) } }, { key: "handleTranslationLanguageChanged", value: function (x) { this.eventEmitter.emit(bo, x) } }, { key: "handleRecordingStarted", value: function () { this.eventEmitter.emit(Hl) } }, { key: "handleRecordingStopped", value: function () { this.eventEmitter.emit(ql) } }, { key: "handleLivestreamStarted", value: function () { this.eventEmitter.emit(Kl) } }, { key: "handleLivestreamStopped", value: function () { this.eventEmitter.emit(qo) } }, { key: "handleHlsStarted", value: function (x) { this.eventEmitter.emit(rt, x) } }, { key: "handleHlsStopped", value: function () { this.eventEmitter.emit(ae) } }, { key: "handleWhiteboardStarted", value: function (x) { this.eventEmitter.emit(Ee, x) } }, { key: "handleWhiteboardStopped", value: function (x) { pr(x), this.eventEmitter.emit(Ke) } }, { key: "handleAddCharacter", value: function (x) { var j, F = x.id, q = (j = this.characters.get(F)) !== null && j !== void 0 ? j : new jl(js(js({}, x), {}, { state: ms.CHARACTER_LISTENING, roomClient: this.roomClient })); this.characters.set(F, q), this.eventEmitter.emit(Ko, q), q.eventEmitter.emit(Ko) } }, { key: "handleInitCharacter", value: function (x) { this.characters.set(x.id, x) } }, { key: "handleRemoveCharacter", value: function (x) { var j = x.id; if (this.characters.has(j)) { var F = this.characters.get(j); this.eventEmitter.emit(Ql, F), F.eventEmitter.emit(Ql), this.characters.delete(j) } } }, { key: "handleCharacterStateChanged", value: function (x) { var j = x.id; if (this.characters.has(j)) { var F = this.characters.get(j); F.handleCharacterStateChanged(x) } } }, { key: "handleCharacterMessage", value: function (x) { var j = x.id; if (this.characters.has(j)) { var F = this.characters.get(j); F.handleCharacterMessage(x) } } }, { key: "handleUserMessage", value: function (x) { var j = x.id; if (this.characters.has(j)) { var F = this.characters.get(j); F.handleUserMessage(x) } } }, { key: "handleOnCharacterData", value: function (x) { var j = x.id; if (this.characters.has(j)) { var F = this.characters.get(j); F.handleCharacterData(x) } } }, { key: "handleOnCharacterError", value: function (x) { var j = x.id; if (this.characters.has(j)) { var F = this.characters.get(j); F.handleCharacterError(x) } } }, { key: "handleOnRemoveCurrentMeetingParticipant", value: function () { var x = this; (0, ir.A)(this.participants.keys()).forEach(function (j) { j !== x.localParticipant.id && x.handlePeerRemove({ peerId: j }) }) } }, { key: "handleVideoStateChanged", value: function (x) { this.eventEmitter.emit(Hr, x) } }, { key: "handleVideoSeeked", value: function (x) { var j = x.currentTime; this.eventEmitter.emit(Zr, { currentTime: j }) } }, { key: "handlePinStateChanged", value: function (x) { var j = x.peerId, F = x.state, q = x.pinnedBy; this.eventEmitter.emit(Mc, { participantId: j, state: F, pinnedBy: q }) } }, { key: "handleMeetingStateChanged", value: function (x) { var j = x.state; this.eventEmitter.emit(_a, { state: j }) } }, { key: "handleSocketStateChanged", value: function (x) { var j = x.state; this.eventEmitter.emit(au, { state: j }) } }, { key: "handleQualityChanged", value: function (x) { var j = x.type, F = x.state, q = x.timestamp; this.eventEmitter.emit(Lc, { type: j, state: F, timestamp: q }) } }, { key: "handleConsumersPaused", value: function (x) { var j = x.kind; this.eventEmitter.emit(Go, { kind: j }) } }, { key: "handleConsumersResumed", value: function (x) { var j = x.kind; this.eventEmitter.emit(ou, { kind: j }) } }, { key: "handleVideoQualityChanged", value: function (x) { var j = x.peerId, F = x.prevQuality, q = x.currentQuality, ie = this.participants.get(j) || this.characters.get(j); ie && ie && ie.videoQualityChanged(F, q) } }, { key: "handleMicRequested", value: function (x) { var j = this, F = x.peerId; this.eventEmitter.emit(xa, { participantId: F, accept: function () { return j.unmuteMic() }, reject: function () { } }) } }, { key: "handleWebcamRequested", value: function (x) { var j = this, F = x.peerId; this.eventEmitter.emit(Wi, { participantId: F, accept: function () { return j.enableWebcam() }, reject: function () { } }) } }, { key: "handleConnectionParticipantJoin", value: function (x) { var j = x.roomId, F = x.peer, q = this.connections.get(j); q != null && q.meeting.participantJoin(F) } }, { key: "handleConnectionParticipantLeft", value: function (x) { var j = x.roomId, F = x.peerId, q = this.connections.get(j); q != null && q.meeting.participantLeft(F) } }, { key: "handleConnectionOpen", value: function (x) { var j = x.peers, F = x.roomId, q = x.payload, ie = new mo({ roomId: F, peers: j, payload: q }); this.connections.set(ie.id, ie), this.eventEmitter.emit(Qs, ie) } }, { key: "handleConnectionClose", value: function (x) { var j = x.roomId, F = this.connections.get(j); F != null && (this.connections.delete(j), this.eventEmitter.emit(su, j)) } }, { key: "handleMediaRelayError", value: function (x) { var j = x.meetingId, F = x.error; this.eventEmitter.emit(cu, { meetingId: j, error: F }) } }, { key: "handleMediaRelayRequest", value: function (x) { var j = this, F = x.peerId, q = x.meetingId, ie = x.displayName; this.eventEmitter.emit($c, { participantId: F, meetingId: q, displayName: ie, accept: function () { return j.roomClient.handleRelayRequestResponse({ decision: "allowed", meetingId: q, peerId: F }) }, reject: function () { return j.roomClient.handleRelayRequestResponse({ decision: "denied", meetingId: q, peerId: F }) } }) } }, { key: "handleMediaRelayRequestResponse", value: function (x) { var j = x.decision, F = x.decidedBy, q = x.meetingId; this.eventEmitter.emit(Jl, { decision: j, decidedBy: F, meetingId: q }) } }, { key: "handleMediaRelayStart", value: function (x) { var j = x.meetingId; this.eventEmitter.emit(lu, { meetingId: j }) } }, { key: "handleMediaRelayStop", value: function (x) { var j = x.meetingId, F = x.reason; this.eventEmitter.emit(zc, { meetingId: j, reason: F }) } }, { key: "requestMediaRelay", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe; return u().wrap(function (de) { for (; ;)switch (de.prev = de.next) { case 0: if (q = F.destinationMeetingId, ie = F.token, oe = F.kinds, q) { de.next = 1; break } throw new Error("Parameter destinationMeetingId is required when calling requestMediaRelay."); case 1: return de.next = 2, this.roomClient.requestMediaRelay(q, ie, oe); case 2: case "end": return de.stop() } }, j, this) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "stopMediaRelay", value: function () { var A = (0, d.A)(u().mark(function j(F) { return u().wrap(function (q) { for (; ;)switch (q.prev = q.next) { case 0: if (F) { q.next = 1; break } throw new Error("Parameter destinationMeetingId is required when calling stopMediaRelay."); case 1: return q.next = 2, this.roomClient.stopMediaRelay(F); case 2: case "end": return q.stop() } }, j, this) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "enableAdaptiveSubscription", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, this.roomClient.enableAdaptiveSubscription(); case 1: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "disableAdaptiveSubscription", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, this.roomClient.disableAdaptiveSubscription(); case 1: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "enableE2EE", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, this.roomClient.toggleE2EEEnabled(!0); case 1: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "disableE2EE", value: function () { var A = (0, d.A)(u().mark(function j() { return u().wrap(function (F) { for (; ;)switch (F.prev = F.next) { case 0: return F.next = 1, this.roomClient.toggleE2EEEnabled(!1); case 1: case "end": return F.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "handleSwitchMeeting", value: function (x) { var j = x.roomId, F = x.token, q = x.payload, ie = x.peerId, oe = x.connectionPeerId, de = x.connectionRoomId, pe = ie ? { meetingId: j, payload: q, token: F, participantId: ie } : { meetingId: j, payload: q, token: F, connectionParticipantId: oe, connectionMeetingId: de }; this.eventEmitter.emit(Yl, pe) } }, { key: "handleConnectionChatMessage", value: function (x) { var j = x.roomId, F = x.peerId, q = x.message, ie = this.connections.get(j); ie != null && ie.meeting.sendChatMessageEvent({ participantId: F, message: q }) } }, { key: "handleE2EEStateChange", value: function (x) { var j = x.peerId, F = this.localParticipant.id == j ? this.localParticipant : this.participants.get(j) || this.characters.get(j); F && F && F.handleE2EEStateChange(x) } }, { key: "connectTo", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie; return u().wrap(function (oe) { for (; ;)switch (oe.prev = oe.next) { case 0: return q = F.meetingId, ie = F.payload, oe.next = 1, this.roomClient.openConnection({ roomId: q, payload: ie }); case 1: case "end": return oe.stop() } }, j, this) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "switchTo", value: function (x) { var j = x.meetingId, F = x.token; if (!j || typeof j != "string" || j.trim() === "") throw new Error("Invalid meetingId: must be a non-empty string"); this.roomClient.switchTo({ meetingId: j, token: F, participantId: this.localParticipant.id }) } }, { key: "selectedCameraDevice", get: function () { var x; return (x = this.roomClient._webcam) === null || x === void 0 ? void 0 : x.device } }, { key: "selectedMicrophoneDevice", get: function () { var x; return (x = this.roomClient._mic) === null || x === void 0 ? void 0 : x.device } }, { key: "on", value: function (x, j) { switch (x) { case Fl: case zl: case Wo: case Os: case Ho: case $l: case Ul: case Vl: case Wl: case Hl: case ql: case Gl: case Kl: case qo: case rt: case ae: case sr: case Nc: case yo: case Bc: case Fc: case bo: case iu: case Oc: case Ee: case Ke: case Ko: case Ql: case vo: case Ga: case Hr: case Zr: case xa: case Wi: case Mc: case Qs: case su: case Yl: case _a: case au: case Vo: case Go: case ou: case lu: case zc: case cu: case $c: case Jl: case go: case Lc: this.eventEmitter.on(x, j); break; default: throw new Error("Invalid event type " + x) } } }, { key: "off", value: function (x, j) { switch (x) { case Fl: case zl: case Wo: case Os: case Ho: case $l: case Ul: case Vl: case Wl: case Hl: case ql: case Gl: case Kl: case qo: case sr: case rt: case ae: case Nc: case yo: case Bc: case Fc: case bo: case iu: case Oc: case Ee: case Ke: case Ko: case Ql: case vo: case Ga: case Hr: case Zr: case xa: case Wi: case Mc: case Qs: case su: case Yl: case _a: case au: case go: case lu: case zc: case cu: case $c: case Jl: case Vo: case Go: case ou: case Lc: this.eventEmitter.off(x, j); break; default: throw new Error("Invalid event type.") } } }]) }(); function Yo(U) { var A = U.topic, x = U.message, j = U.senderId, F = U.timestamp, q = U.senderName, ie = U.id, oe = U.payload; !A || !x || Vi(wa, this).emit(A, { message: x, senderId: j, timestamp: F, topic: A, senderName: q, id: ie, payload: oe }) } function Sa(U) { var A = U.key, x = U.value, j = U.updatedBy; A && Vi(Ka, this).emit(A, { value: x, updatedBy: j }) } function du(U) { var A = U.peerId, x = U.mode; A === this.localParticipant.id ? this.localParticipant.mode = x : this.participants.get(A).mode = x, this.activePresenterId === this.localParticipant.id && !(0, dn.kR)(x) && (this.activePresenterId = null, this.eventEmitter.emit(Os, this.activePresenterId)), this.eventEmitter.emit(Vo, { participantId: A, mode: x }) } var Ir = l(7080), km = { RECORDING_STARTING: "RECORDING_STARTING", RECORDING_STARTED: "RECORDING_STARTED", RECORDING_STOPPING: "RECORDING_STOPPING", RECORDING_STOPPED: "RECORDING_STOPPED" }, Tm = { LIVESTREAM_STARTING: "LIVESTREAM_STARTING", LIVESTREAM_STARTED: "LIVESTREAM_STARTED", LIVESTREAM_STOPPING: "LIVESTREAM_STOPPING", LIVESTREAM_STOPPED: "LIVESTREAM_STOPPED" }, qp = l(5071), Am = { TRANSCRIPTION_STARTING: "TRANSCRIPTION_STARTING", TRANSCRIPTION_STARTED: "TRANSCRIPTION_STARTED", TRANSCRIPTION_STOPPING: "TRANSCRIPTION_STOPPING", TRANSCRIPTION_STOPPED: "TRANSCRIPTION_STOPPED" }, Gp = { TRANSLATION_STARTING: "TRANSLATION_STARTING", TRANSLATION_STARTED: "TRANSLATION_STARTED", TRANSLATION_STOPPING: "TRANSLATION_STOPPING", TRANSLATION_STOPPED: "TRANSLATION_STOPPED" }, uu = l(4973), Qo = l(9027); function Uc(U, A, x) { return A = (0, dr.A)(A), (0, Ua.A)(U, Vc() ? Reflect.construct(A, x || [], (0, dr.A)(U).constructor) : A.apply(U, x)) } function Vc() { try { var U = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })) } catch { } return (Vc = function () { return !!U })() } var Pm = (0, h.A)(function U(A, x, j, F) { (0, f.A)(this, U), this.deviceId = A, this.groupId = x, this.kind = j, this.label = F }), bs = function (U) { function A(x, j, F, q) { return (0, f.A)(this, A), Uc(this, A, [x, j, F, q]) } return (0, Ks.A)(A, U), (0, h.A)(A) }(Pm), xo = function (U) { function A(x, j, F, q) { return (0, f.A)(this, A), Uc(this, A, [x, j, F, q]) } return (0, Ks.A)(A, U), (0, h.A)(A) }(bs), pu = function (U) { function A(x, j, F, q) { return (0, f.A)(this, A), Uc(this, A, [x, j, F, q]) } return (0, Ks.A)(A, U), (0, h.A)(A) }(bs), Kp = function (U) { function A(x, j, F, q) { return (0, f.A)(this, A), Uc(this, A, [x, j, F, q]) } return (0, Ks.A)(A, U), (0, h.A)(A) }(bs), Dn = { AUDIO: "audio", VIDEO: "video", AUDIO_AND_VIDEO: "audio_video" }; l(328); var Dm = l(7654); function Zl(U, A) { return U == null || A == null ? NaN : U < A ? -1 : U > A ? 1 : U >= A ? 0 : NaN } function Yp(U, A) { return U == null || A == null ? NaN : A < U ? -1 : A > U ? 1 : A >= U ? 0 : NaN } function Rn(U) { let A, x, j; U.length !== 2 ? (A = Zl, x = (oe, de) => Zl(U(oe), de), j = (oe, de) => U(oe) - de) : (A = U === Zl || U === Yp ? U : Im, x = U, j = U); function F(oe, de, pe = 0, fe = oe.length) { if (pe < fe) { if (A(de, de) !== 0) return fe; do { const ge = pe + fe >>> 1; x(oe[ge], de) < 0 ? pe = ge + 1 : fe = ge } while (pe < fe) } return pe } function q(oe, de, pe = 0, fe = oe.length) { if (pe < fe) { if (A(de, de) !== 0) return fe; do { const ge = pe + fe >>> 1; x(oe[ge], de) <= 0 ? pe = ge + 1 : fe = ge } while (pe < fe) } return pe } function ie(oe, de, pe = 0, fe = oe.length) { const ge = F(oe, de, pe, fe - 1); return ge > pe && j(oe[ge - 1], de) > -j(oe[ge], de) ? ge - 1 : ge } return { left: F, center: ie, right: q } } function Im() { return 0 } function jm(U) { return U === null ? NaN : +U } const hu = Rn(Zl).right; Rn(jm).center; const fu = hu; function Om(U, A) { switch (arguments.length) { case 0: break; case 1: this.range(U); break; default: this.range(A).domain(U); break }return this } function Ea() { var U = [.5], A = [0, 1], x, j = 1; function F(q) { return q != null && q <= q ? A[fu(U, q, 0, j)] : x } return F.domain = function (q) { return arguments.length ? (U = Array.from(q), j = Math.min(U.length, A.length - 1), F) : U.slice() }, F.range = function (q) { return arguments.length ? (A = Array.from(q), j = Math.min(U.length, A.length - 1), F) : A.slice() }, F.invertExtent = function (q) { var ie = A.indexOf(q); return [U[ie - 1], U[ie]] }, F.unknown = function (q) { return arguments.length ? (x = q, F) : x }, F.copy = function () { return Ea().domain(U).range(A).unknown(x) }, Om.apply(F, arguments) } function Jo(U, A) { (A == null || A > U.length) && (A = U.length); for (var x = 0, j = Array(A); x < A; x++)j[x] = U[x]; return j } function Re(U) { if (Array.isArray(U)) return U } function ze(U) { if (Array.isArray(U)) return Jo(U) } function ar(U, A, x) { if (typeof U == "function" ? U === A : U.has(A)) return arguments.length < 3 ? A : x; throw new TypeError("Private element is not present on this object") } function Mm(U) { if (U === void 0) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return U } function Wc(U, A, x) { return A = te(A), nt(U, ne() ? Reflect.construct(A, x || [], te(U).constructor) : A.apply(U, x)) } function Hc(U, A) { if (A.has(U)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function Y(U, A) { if (!(U instanceof A)) throw new TypeError("Cannot call a class as a function") } function m(U, A) { return U.get(ar(U, A)) } function C(U, A, x) { Hc(U, A), A.set(U, x) } function T(U, A, x) { return U.set(ar(U, A), x), x } function w(U, A) { Hc(U, A), A.add(U) } function O(U, A) { for (var x = 0; x < A.length; x++) { var j = A[x]; j.enumerable = j.enumerable || !1, j.configurable = !0, "value" in j && (j.writable = !0), Object.defineProperty(U, Ot(j.key), j) } } function $(U, A, x) { return A && O(U.prototype, A), Object.defineProperty(U, "prototype", { writable: !1 }), U } function z(U, A, x) { return (A = Ot(A)) in U ? Object.defineProperty(U, A, { value: x, enumerable: !0, configurable: !0, writable: !0 }) : U[A] = x, U } function G() { return G = typeof Reflect < "u" && Reflect.get ? Reflect.get.bind() : function (U, A, x) { var j = Ve(U, A); if (j) { var F = Object.getOwnPropertyDescriptor(j, A); return F.get ? F.get.call(arguments.length < 3 ? U : x) : F.value } }, G.apply(null, arguments) } function te(U) { return te = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (A) { return A.__proto__ || Object.getPrototypeOf(A) }, te(U) } function re(U, A) { if (typeof A != "function" && A !== null) throw new TypeError("Super expression must either be null or a function"); U.prototype = Object.create(A && A.prototype, { constructor: { value: U, writable: !0, configurable: !0 } }), Object.defineProperty(U, "prototype", { writable: !1 }), A && _t(U, A) } function ne() { try { var U = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })) } catch { } return (ne = function () { return !!U })() } function me(U) { if (typeof Symbol < "u" && U[Symbol.iterator] != null || U["@@iterator"] != null) return Array.from(U) } function Te(U, A) { var x = U == null ? null : typeof Symbol < "u" && U[Symbol.iterator] || U["@@iterator"]; if (x != null) { var j, F, q, ie, oe = [], de = !0, pe = !1; try { if (q = (x = x.call(U)).next, A === 0) { if (Object(x) !== x) return; de = !1 } else for (; !(de = (j = q.call(x)).done) && (oe.push(j.value), oe.length !== A); de = !0); } catch (fe) { pe = !0, F = fe } finally { try { if (!de && x.return != null && (ie = x.return(), Object(ie) !== ie)) return } finally { if (pe) throw F } } return oe } } function ke() {
                    throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                } function Be() {
                    throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                } function Qe(U, A) { var x = Object.keys(U); if (Object.getOwnPropertySymbols) { var j = Object.getOwnPropertySymbols(U); A && (j = j.filter(function (F) { return Object.getOwnPropertyDescriptor(U, F).enumerable })), x.push.apply(x, j) } return x } function Me(U) { for (var A = 1; A < arguments.length; A++) { var x = arguments[A] != null ? arguments[A] : {}; A % 2 ? Qe(Object(x), !0).forEach(function (j) { z(U, j, x[j]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(U, Object.getOwnPropertyDescriptors(x)) : Qe(Object(x)).forEach(function (j) { Object.defineProperty(U, j, Object.getOwnPropertyDescriptor(x, j)) }) } return U } function je(U, A) { if (U == null) return {}; var x, j, F = ft(U, A); if (Object.getOwnPropertySymbols) { var q = Object.getOwnPropertySymbols(U); for (j = 0; j < q.length; j++)x = q[j], A.indexOf(x) === -1 && {}.propertyIsEnumerable.call(U, x) && (F[x] = U[x]) } return F } function ft(U, A) { if (U == null) return {}; var x = {}; for (var j in U) if ({}.hasOwnProperty.call(U, j)) { if (A.indexOf(j) !== -1) continue; x[j] = U[j] } return x } function nt(U, A) { if (A && (typeof A == "object" || typeof A == "function")) return A; if (A !== void 0) throw new TypeError("Derived constructors may only return object or undefined"); return Mm(U) } function jt(U, A, x, j) { return jt = typeof Reflect < "u" && Reflect.set ? Reflect.set : function (F, q, ie, oe) { var de, pe = Ve(F, q); if (pe) { if ((de = Object.getOwnPropertyDescriptor(pe, q)).set) return de.set.call(oe, ie), !0; if (!de.writable) return !1 } if (de = Object.getOwnPropertyDescriptor(oe, q)) { if (!de.writable) return !1; de.value = ie, Object.defineProperty(oe, q, de) } else z(oe, q, ie); return !0 }, jt(U, A, x, j) } function Je(U, A, x, j, F) { if (!jt(U, A, x, j || U) && F) throw new TypeError("failed to set property"); return x } function _t(U, A) { return _t = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (x, j) { return x.__proto__ = j, x }, _t(U, A) } function We(U, A) { return Re(U) || Te(U, A) || bt(U, A) || ke() } function Ve(U, A) { for (; !{}.hasOwnProperty.call(U, A) && (U = te(U)) !== null;); return U } function gt(U, A, x, j) { var F = G(te(U.prototype), A, x); return 2 & j && typeof F == "function" ? function (q) { return F.apply(x, q) } : F } function wt(U, A, x, j, F, q) { return Je(te(U.prototype), A, x, j, F) } function $t(U) { return ze(U) || me(U) || bt(U) || Be() } function Ut(U, A) { if (typeof U != "object" || !U) return U; var x = U[Symbol.toPrimitive]; if (x !== void 0) { var j = x.call(U, A); if (typeof j != "object") return j; throw new TypeError("@@toPrimitive must return a primitive value.") } return String(U) } function Ot(U) { var A = Ut(U, "string"); return typeof A == "symbol" ? A : A + "" } function bt(U, A) { if (U) { if (typeof U == "string") return Jo(U, A); var x = {}.toString.call(U).slice(8, -1); return x === "Object" && U.constructor && (x = U.constructor.name), x === "Map" || x === "Set" ? Array.from(U) : x === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x) ? Jo(U, A) : void 0 } } var Zt = "https://speed.cloudflare.com", lr = { autoStart: !0, downloadApiUrl: "".concat(Zt, "/__down"), uploadApiUrl: "".concat(Zt, "/__up"), logMeasurementApiUrl: null, logAimApiUrl: "https://aim.cloudflare.com/__log", turnServerUri: "turn.speed.cloudflare.com:50000", turnServerCredsApiUrl: "".concat(Zt, "/turn-creds"), turnServerUser: null, turnServerPass: null, rpkiInvalidHost: "invalid.rpki.cloudflare.com", cfTraceUrl: "".concat(Zt, "/cdn-cgi/trace"), includeCredentials: !1, sessionId: void 0, measurements: [{ type: "latency", numPackets: 1 }, { type: "download", bytes: 1e5, count: 1, bypassMinDuration: !0 }, { type: "latency", numPackets: 20 }, { type: "download", bytes: 1e5, count: 9 }, { type: "download", bytes: 1e6, count: 8 }, { type: "upload", bytes: 1e5, count: 8 }, { type: "packetLoss", numPackets: 1e3, batchSize: 10, batchWaitTime: 10, responsesWaitTime: 3e3 }, { type: "upload", bytes: 1e6, count: 6 }, { type: "download", bytes: 1e7, count: 6 }, { type: "upload", bytes: 1e7, count: 4 }, { type: "download", bytes: 25e6, count: 4 }, { type: "upload", bytes: 25e6, count: 4 }, { type: "download", bytes: 1e8, count: 3 }, { type: "upload", bytes: 5e7, count: 3 }, { type: "download", bytes: 25e7, count: 2 }], measureDownloadLoadedLatency: !0, measureUploadLoadedLatency: !0, loadedLatencyThrottle: 400, bandwidthFinishRequestDuration: 1e3, estimatedServerTime: 10, latencyPercentile: .5, bandwidthPercentile: .9, bandwidthMinRequestDuration: 10, loadedRequestMinDuration: 250, loadedLatencyMaxPoints: 20 }, qt = { aimMeasurementScoring: { packetLoss: Ea([.01, .05, .25, .5], [10, 5, 0, -10, -20]), latency: Ea([10, 20, 50, 100, 500], [20, 10, 5, 0, -10, -20]), loadedLatencyIncrease: Ea([10, 20, 50, 100, 500], [20, 10, 5, 0, -10, -20]), jitter: Ea([10, 20, 100, 500], [10, 5, 0, -10, -20]), download: Ea([1e6, 1e7, 5e7, 1e8], [0, 5, 10, 20, 30]), upload: Ea([1e6, 1e7, 5e7, 1e8], [0, 5, 10, 20, 30]) }, aimExperiencesDefs: { streaming: { input: ["latency", "packetLoss", "download", "loadedLatencyIncrease"], pointThresholds: [15, 20, 40, 60] }, gaming: { input: ["latency", "packetLoss", "loadedLatencyIncrease"], pointThresholds: [5, 15, 25, 30] }, rtc: { input: ["latency", "jitter", "packetLoss", "loadedLatencyIncrease"], pointThresholds: [5, 15, 25, 40] } } }, st = 20, Ye = .005, Le = function (A) { var x = A.headers.get("server-timing"); if (x) { var j = x.match(/dur=([0-9.]+)/); if (j) return +j[1] } }, Ae = function (A) { return A.responseStart - A.requestStart }, Pt = function (A) { return A.responseEnd - A.responseStart }, Yt = function (A) { var x = A.ping, j = A.payloadDownloadTime; return x + j }, Ft = function (A) { var x = A.ttfb; return x }, nr = function (A, x) { var j = A.duration, F = A.transferSize, q = 8 * (F || +x * (1 + Ye)), ie = j / 1e3; return ie ? q / ie : void 0 }, fr = function (A, x) { var j = A.duration, F = 8 * x * (1 + Ye), q = j / 1e3; return q ? F / q : void 0 }, Mr = Dm(function (U) { return "0".repeat(U) }), Sr = new WeakMap, er = new WeakMap, ln = new WeakMap, Lr = new WeakMap, Nr = new WeakMap, en = new WeakMap, kn = new WeakMap, gn = new WeakMap, Sn = new WeakMap, Tn = new WeakMap, un = new WeakMap, Qr = new WeakMap, Ct = new WeakMap, _r = new WeakMap, mr = new WeakMap, qr = new WeakMap, xn = new WeakMap, tn = new WeakMap, In = new WeakMap, ti = new WeakMap, ci = new WeakMap, Mn = new WeakMap, cn = new WeakSet, An = function () { function U(A) { var x = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, j = x.downloadApiUrl, F = x.uploadApiUrl, q = x.throttleMs, ie = q === void 0 ? 0 : q, oe = x.estimatedServerTime, de = oe === void 0 ? 0 : oe; if (Y(this, U), w(this, cn), C(this, Sr, {}), C(this, er, {}), z(this, "finishRequestDuration", 1e3), z(this, "getServerTime", Le), C(this, ln, function (pe) { return pe }), C(this, Lr, function () { }), C(this, Nr, function () { }), C(this, en, function () { }), C(this, kn, function () { }), C(this, gn, function () { }), C(this, Sn, void 0), C(this, Tn, void 0), C(this, un, void 0), C(this, Qr, !1), C(this, Ct, { down: !1, up: !1 }), C(this, _r, { down: {}, up: {} }), C(this, mr, 0), C(this, qr, 0), C(this, xn, 0), C(this, tn, -1 / 0), C(this, In, 0), C(this, ti, 0), C(this, ci, void 0), C(this, Mn, void 0), !A) throw new Error("Missing measurements argument"); if (!j) throw new Error("Missing downloadApiUrl argument"); if (!F) throw new Error("Missing uploadApiUrl argument"); T(Sn, this, A), T(Tn, this, j), T(un, this, F), T(In, this, ie), T(ti, this, Math.max(0, de)) } return $(U, [{ key: "results", get: function () { return m(_r, this) } }, { key: "qsParams", get: function () { return m(Sr, this) }, set: function (x) { T(Sr, this, x) } }, { key: "fetchOptions", get: function () { return m(er, this) }, set: function (x) { T(er, this, x) } }, { key: "responseHook", set: function (x) { T(ln, this, x) } }, { key: "onRunningChange", set: function (x) { T(Lr, this, x) } }, { key: "onNewMeasurementStarted", set: function (x) { T(Nr, this, x) } }, { key: "onMeasurementResult", set: function (x) { T(en, this, x) } }, { key: "onFinished", set: function (x) { T(kn, this, x) } }, { key: "onConnectionError", set: function (x) { T(gn, this, x) } }, { key: "pause", value: function () { clearTimeout(m(Mn, this)), ar(cn, this, Js).call(this), ar(cn, this, Wn).call(this, !1) } }, { key: "play", value: function () { m(Qr, this) || (ar(cn, this, Wn).call(this, !0), ar(cn, this, ri).call(this)) } }]) }(); function Wn(U) { var A = this; U !== m(Qr, this) && (T(Qr, this, U), setTimeout(function () { return m(Lr, A).call(A, m(Qr, A)) })) } function hi(U, A) { var x = this, j = m(Sn, this)[U], F = j.bytes, q = j.dir, ie = m(_r, this), oe = ie[q].hasOwnProperty(F) ? ie[q][F] : { timings: [], numMeasurements: m(Sn, this).filter(function (de) { var pe = de.bytes, fe = de.dir; return F === pe && q === fe }).map(function (de) { return de.count }).reduce(function (de, pe) { return de + pe }, 0) }; A && oe.timings.push(A), oe.timings = oe.timings.slice(-oe.numMeasurements), ie[q][F] = oe, A ? setTimeout(function () { m(en, x).call(x, Me({ type: q, bytes: F }, A), ie) }) : m(Nr, this).call(this, m(Sn, this)[U], ie) } function ri() { var U = this, A = m(Sn, this), x = A[m(mr, this)]; if (m(qr, this) >= x.count) { var j = m(Ct, this); if (m(tn, this) > this.finishRequestDuration && !x.bypassMinDuration) { var F = x.dir; m(Ct, this)[F] = !0, Object.values(m(Ct, this)).every(function (Ge) { return Ge }) && m(kn, this).call(this, m(_r, this)) } T(qr, this, 0), T(tn, this, -1 / 0), performance.clearResourceTimings(); do T(mr, this, m(mr, this) + 1); while (m(mr, this) < A.length && j[A[m(mr, this)].dir]); if (m(mr, this) >= A.length) { T(Ct, this, { down: !0, up: !0 }), ar(cn, this, Wn).call(this, !1), m(kn, this).call(this, m(_r, this)); return } x = A[m(mr, this)] } var q = m(mr, this); m(qr, this) === 0 && ar(cn, this, hi).call(this, q); var ie = x, oe = ie.bytes, de = ie.dir, pe = de === "down", fe = pe ? m(Tn, this) : m(un, this), ge = Object.assign({}, m(Sr, this)); pe && (ge.bytes = "".concat(oe)); var Oe = "".concat(fe.startsWith("http") || fe.startsWith("//") ? "" : window.location.origin).concat(fe, "?").concat(Object.entries(ge).map(function (Ge) { var Xe = We(Ge, 2), Ze = Xe[0], Kt = Xe[1]; return "".concat(Ze, "=").concat(Kt) }).join("&")), Ie = Object.assign({}, pe ? {} : { method: "POST", body: Mr(oe) }, m(er, this)), Tt, tt = T(ci, this, fetch(Oe, Ie).then(function (Ge) { if (Ge.ok) return Ge; throw Error(Ge.statusText) }).then(function (Ge) { return U.getServerTime && (Tt = U.getServerTime(Ge)), Ge }).then(function (Ge) { return Ge.text().then(function (Xe) { return m(ln, U) && m(ln, U).call(U, { url: Oe, headers: Ge.headers, body: Xe }), Xe }) }).then(function (Ge, Xe) { if (tt._cancel) { Xe("cancelled"); return } var Ze = performance.getEntriesByName(Oe).slice(-1)[0], Kt = { transferSize: Ze.transferSize, ttfb: Ae(Ze), payloadDownloadTime: Pt(Ze), serverTime: Tt || -1, measTime: new Date }; if (Kt.ping = Math.max(.01, Kt.ttfb - (Tt || m(ti, U))), Kt.duration = (pe ? Yt : Ft)(Kt), Kt.bps = (pe ? nr : fr)(Kt, oe), pe && oe) { var et = +oe; Kt.transferSize && (Kt.transferSize < et || Kt.transferSize / et > 1.05) && console.warn("Requested ".concat(et, "B but received ").concat(Kt.transferSize, "B (").concat(Math.round(Kt.transferSize / et * 1e4) / 100, "%).")) } ar(cn, U, hi).call(U, q, Kt); var Rt = Kt.duration; T(tn, U, m(tn, U) < 0 ? Rt : Math.min(m(tn, U), Rt)), T(qr, U, m(qr, U) + 1), T(xn, U, 0), m(In, U) ? T(Mn, U, setTimeout(function () { return ar(cn, U, ri).call(U) }, m(In, U))) : ar(cn, U, ri).call(U) }).catch(function (Ge) { var Xe, Ze; tt._cancel || (console.warn("Error fetching ".concat(Oe, ": ").concat(Ge)), T(xn, U, (Xe = m(xn, U), Ze = Xe++, Xe)), Ze < st ? ar(cn, U, ri).call(U) : (T(xn, U, 0), ar(cn, U, Wn).call(U, !1), m(gn, U).call(U, "Connection failed to ".concat(Oe, ". Gave up after ").concat(st, " retries.")))) })) } function Js() { var U = m(ci, this); U && (U._cancel = !0) } var Xs = ["measureParallelLatency", "parallelLatencyThrottleMs", "downloadApiUrl", "uploadApiUrl", "estimatedServerTime"], jn = new WeakMap, Hi = new WeakMap, qi = new WeakSet, xs = function (U) { function A(x) { var j, F = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, q = F.measureParallelLatency, ie = q === void 0 ? !1 : q, oe = F.parallelLatencyThrottleMs, de = oe === void 0 ? 100 : oe, pe = F.downloadApiUrl, fe = F.uploadApiUrl, ge = F.estimatedServerTime, Oe = ge === void 0 ? 0 : ge, Ie = je(F, Xs); return Y(this, A), j = Wc(this, A, [x, Me({ downloadApiUrl: pe, uploadApiUrl: fe, estimatedServerTime: Oe }, Ie)]), w(j, qi), C(j, jn, void 0), C(j, Hi, void 0), ie && (T(jn, j, new An([{ dir: "down", bytes: 0, count: 1 / 0, bypassMinDuration: !0 }], { downloadApiUrl: pe, uploadApiUrl: fe, estimatedServerTime: Oe, throttleMs: de })), m(jn, j).qsParams = { during: "".concat(x[0].dir, "load") }, wt(A, "onRunningChange", ar(qi, j, Ms), j, 1), wt(A, "onConnectionError", function () { return m(jn, j).pause() }, j, 1)), j } return re(A, U), $(A, [{ key: "latencyResults", get: function () { return m(jn, this) && m(jn, this).results.down[0].timings } }, { key: "onParallelLatencyResult", set: function (j) { m(jn, this) && (m(jn, this).onMeasurementResult = function (F) { return j(F) }) } }, { key: "fetchOptions", get: function () { return gt(A, "fetchOptions", this, 1) }, set: function (j) { wt(A, "fetchOptions", j, this, 1), m(jn, this) && (m(jn, this).fetchOptions = j) } }, { key: "onRunningChange", set: function (j) { var F = this; wt(A, "onRunningChange", function (q) { ar(qi, F, Ms).call(F, q), j(q) }, this, 1) } }, { key: "onConnectionError", set: function (j) { var F = this; wt(A, "onConnectionError", function () { m(jn, F) && m(jn, F).pause(), j.apply(void 0, arguments) }, this, 1) } }]) }(An); function Ms(U) { var A = this; m(jn, this) && (U ? T(Hi, this, setTimeout(function () { return m(jn, A).play() }, 20)) : (clearTimeout(m(Hi, this)), m(jn, this).pause())) } var _s = ["measurementId", "logApiUrl", "sessionId"], Hn = new WeakMap, Gi = new WeakMap, Ki = new WeakMap, fi = new WeakMap, Ii = new WeakMap, ji = new WeakSet, Zs = function (U) { function A(x) { var j, F = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, q = F.measurementId, ie = F.logApiUrl, oe = F.sessionId, de = je(F, _s); return Y(this, A), j = Wc(this, A, [x, de]), w(j, ji), C(j, Hn, void 0), C(j, Gi, void 0), C(j, Ki, void 0), C(j, fi, void 0), C(j, Ii, void 0), T(Hn, j, q), T(fi, j, ie), T(Ii, j, oe), wt(A, "qsParams", ie ? { measId: m(Hn, j) } : {}, j, 1), wt(A, "responseHook", function (pe) { return ar(ji, j, Yi).call(j, pe) }, j, 1), wt(A, "onMeasurementResult", function (pe) { return ar(ji, j, Pn).call(j, pe) }, j, 1), j } return re(A, U), $(A, [{ key: "qsParams", set: function (j) { wt(A, "qsParams", m(fi, this) ? Me({ measId: m(Hn, this) }, j) : j, this, 1) } }, { key: "responseHook", set: function (j) { var F = this; wt(A, "responseHook", function (q) { j(q), ar(ji, F, Yi).call(F, q) }, this, 1) } }, { key: "onMeasurementResult", set: function (j) { var F = this; wt(A, "onMeasurementResult", function (q) { for (var ie = arguments.length, oe = new Array(ie > 1 ? ie - 1 : 0), de = 1; de < ie; de++)oe[de - 1] = arguments[de]; j.apply(void 0, [q].concat(oe)), ar(ji, F, Pn).call(F, q) }, this, 1) } }]) }(xs); function Yi(U) { m(fi, this) && (T(Ki, this, +U.headers.get("cf-meta-request-time")), T(Gi, this, U.body.slice(-300).split("___").pop())) } function Pn(U) { if (m(fi, this)) { var A = { type: U.type, bytes: U.bytes, ping: Math.round(U.ping), ttfb: Math.round(U.ttfb), payloadDownloadTime: Math.round(U.payloadDownloadTime), duration: Math.round(U.duration), transferSize: Math.round(U.transferSize), serverTime: Math.round(U.serverTime), token: m(Gi, this), requestTime: m(Ki, this), measId: m(Hn, this), sessionId: m(Ii, this) }; T(Gi, this, null), T(Ki, this, null), fetch(m(fi, this), Me({ method: "POST", body: JSON.stringify(A) }, this.fetchOptions)) } } var di = new WeakMap, xi = new WeakMap, Jt = new WeakMap, Jr = new WeakSet, rn = function () { function U(A) { if (Y(this, U), w(this, Jr), C(this, di, !1), C(this, xi, void 0), C(this, Jt, void 0), !A) throw new Error("Missing operation to perform"); T(Jt, this, A), this.play() } return $(U, [{ key: "pause", value: function () { ar(Jr, this, Ya).call(this), ar(Jr, this, Oi).call(this, !1) } }, { key: "stop", value: function () { this.pause() } }, { key: "play", value: function () { m(di, this) || (ar(Jr, this, Oi).call(this, !0), ar(Jr, this, ss).call(this)) } }]) }(); function Oi(U) { U !== m(di, this) && T(di, this, U) } function ss() { var U = this, A = T(xi, this, m(Jt, this).call(this).then(function () { !A._cancel && ar(Jr, U, ss).call(U) })) } function Ya() { var U = m(xi, this); U && (U._cancel = !0) } var _i = new WeakMap, ea = function () { function U() { var A = this, x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, j = x.download, F = x.upload; if (Y(this, U), z(this, "qsParams", {}), z(this, "fetchOptions", {}), C(this, _i, []), !j && !F) throw new Error("Missing at least one of download/upload config");[[j, "download"], [F, "upload"]].filter(function (ie) { var oe = We(ie, 1), de = oe[0]; return de }).forEach(function (ie) { var oe = We(ie, 2), de = oe[0], pe = oe[1], fe = de.apiUrl, ge = de.chunkSize; if (!fe) throw new Error("Missing ".concat(pe, " apiUrl argument")); if (!ge) throw new Error("Missing ".concat(pe, " chunkSize argument")) }); var q = function (oe) { var de = oe.apiUrl, pe = oe.qsParams, fe = pe === void 0 ? {} : pe, ge = oe.fetchOptions, Oe = ge === void 0 ? {} : ge; return new rn(function () { var Ie = Object.assign({}, fe, A.qsParams), Tt = "".concat(de.startsWith("http") || de.startsWith("//") ? "" : window.location.origin).concat(de, "?").concat(Object.entries(Ie).map(function (Ge) { var Xe = We(Ge, 2), Ze = Xe[0], Kt = Xe[1]; return "".concat(Ze, "=").concat(Kt) }).join("&")), tt = Object.assign({}, Oe, A.fetchOptions); return fetch(Tt, tt).then(function (Ge) { if (Ge.ok) return Ge; throw Error(Ge.statusText) }).then(function (Ge) { return Ge.text() }) }) }; j && m(_i, this).push(q({ apiUrl: j.apiUrl, qsParams: { bytes: "".concat(j.chunkSize) } })), F && m(_i, this).push(q({ apiUrl: F.apiUrl, fetchOptions: { method: "POST", body: "0".repeat(F.chunkSize) } })) } return $(U, [{ key: "pause", value: function () { m(_i, this).forEach(function (x) { return x.pause() }) } }, { key: "stop", value: function () { this.pause() } }, { key: "play", value: function () { m(_i, this).forEach(function (x) { return x.play() }) } }]) }(), En = ["iceServers", "acceptIceCandidate", "dataChannelCfg"], as = new WeakMap, Ca = new WeakMap, Ra = new WeakMap, ws = new WeakMap, Ls = new WeakMap, Xo = function () { function U() { var A = this, x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, j = x.iceServers, F = j === void 0 ? [] : j, q = x.acceptIceCandidate, ie = q === void 0 ? function (Ie) { var Tt = Ie.protocol || ""; if (!Tt && Ie.candidate) { var tt = Ie.candidate.split(" "); tt.length >= 3 && (Tt = tt[2]) } return Tt.toLowerCase() === "udp" } : q, oe = x.dataChannelCfg, de = oe === void 0 ? { ordered: !1, maxRetransmits: 0 } : oe, pe = je(x, En); Y(this, U), z(this, "onOpen", function () { }), z(this, "onClose", function () { }), z(this, "onMessageReceived", function () { }), C(this, as, !1), C(this, Ca, void 0), C(this, Ra, void 0), C(this, ws, void 0), C(this, Ls, void 0); var fe = new RTCPeerConnection(Me({ iceServers: F }, pe)), ge = new RTCPeerConnection(Me({ iceServers: F }, pe)), Oe = fe.createDataChannel("channel", de); Oe.onopen = function () { T(as, A, !0), A.onOpen() }, Oe.onclose = function () { return A.close() }, ge.ondatachannel = function (Ie) { var Tt = Ie.channel; Tt.onclose = function () { return A.close() }, Tt.onmessage = function (tt) { return A.onMessageReceived(tt.data) }, T(Ls, A, Tt) }, fe.onicecandidate = function (Ie) { Ie.candidate && ie(Ie.candidate) && ge.addIceCandidate(Ie.candidate) }, ge.onicecandidate = function (Ie) { Ie.candidate && ie(Ie.candidate) && fe.addIceCandidate(Ie.candidate) }, fe.createOffer().then(function (Ie) { return fe.setLocalDescription(Ie) }).then(function () { return ge.setRemoteDescription(fe.localDescription) }).then(function () { return ge.createAnswer() }).then(function (Ie) { return ge.setLocalDescription(Ie) }).then(function () { return fe.setRemoteDescription(ge.localDescription) }), T(Ca, this, fe), T(Ra, this, ge), T(ws, this, Oe), T(as, this, !1) } return $(U, [{ key: "send", value: function (x) { return m(ws, this).send(x) } }, { key: "close", value: function () { return m(Ca, this) && m(Ca, this).close(), m(Ra, this) && m(Ra, this).close(), m(ws, this) && m(ws, this).close(), m(Ls, this) && m(Ls, this).close(), m(as, this) && this.onClose(), T(as, this, !1), this } }]) }(), Ns = new WeakMap, ni = new WeakMap, ta = new WeakMap, Mi = new WeakMap, Qt = new WeakMap, Ur = new WeakMap, ii = function () { function U() { var A = this, x = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, j = x.turnServerUri, F = x.turnServerCredsApi, q = x.turnServerCredsApiParser, ie = q === void 0 ? function (Rt) { var wr = Rt.username, Gr = Rt.credential, ht = Rt.server; return { turnServerUser: wr, turnServerPass: Gr, turnServerUri: ht } } : q, oe = x.turnServerCredsApiIncludeCredentials, de = oe === void 0 ? !1 : oe, pe = x.turnServerUser, fe = x.turnServerPass, ge = x.numMsgs, Oe = ge === void 0 ? 100 : ge, Ie = x.batchSize, Tt = Ie === void 0 ? 10 : Ie, tt = x.batchWaitTime, Ge = tt === void 0 ? 10 : tt, Xe = x.responsesWaitTime, Ze = Xe === void 0 ? 5e3 : Xe, Kt = x.connectionTimeout, et = Kt === void 0 ? 5e3 : Kt; if (Y(this, U), C(this, Ns, function () { }), C(this, ni, function () { }), C(this, ta, function () { }), z(this, "onMsgSent", function () { }), z(this, "onAllMsgsSent", function () { }), z(this, "onMsgReceived", function () { }), C(this, Mi, {}), C(this, Qt, void 0), C(this, Ur, void 0), !j && !F) throw new Error("Missing turnServerCredsApi or turnServerUri argument"); if ((!pe || !fe) && !F) throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments"); T(Ur, this, Oe), (!pe || !fe ? fetch(F, { credentials: de ? "include" : void 0 }).then(function (Rt) { return Rt.json() }).then(function (Rt) { if (Rt.error) throw Rt.error; return Rt }).then(ie) : Promise.resolve({ turnServerUser: pe, turnServerPass: fe })).catch(function (Rt) { return m(Ns, A).call(A, Rt) }).then(function (Rt) { var wr = Rt.turnServerUser, Gr = Rt.turnServerPass, ht = Rt.turnServerUri, Er = T(Qt, A, new Xo({ iceServers: [{ urls: "turn:".concat(ht || j, "?transport=udp"), username: wr, credential: Gr }], iceTransportPolicy: "relay" })), nn = !1; setTimeout(function () { nn || (Er.close(), m(ni, A).call(A, "ICE connection timeout!")) }, et); var Vr = m(Mi, A); Er.onOpen = function () { nn = !0; var sn = A; (function Rr(si) { if (si <= Oe) { for (var ui = si; ui <= Math.min(Oe, si + Tt - 1);)Vr[ui] = !1, Er.send(ui), sn.onMsgSent(ui), ui++; setTimeout(function () { return Rr(ui) }, Ge) } else { sn.onAllMsgsSent(Object.keys(Vr).length); var gi = function () { Er.close(), m(ta, sn).call(sn, sn.results) }, ai = setTimeout(gi, Ze), os = Object.values(m(Mi, sn)).filter(function (Ss) { return !Ss }).length; Er.onMessageReceived = function (Ss) { clearTimeout(ai), Vr[Ss] = !0, sn.onMsgReceived(Ss), os--, os <= 0 && Object.values(m(Mi, sn)).every(function (Ja) { return Ja }) ? gi() : ai = setTimeout(gi, Ze) } } })(1) }, Er.onMessageReceived = function (sn) { Vr[sn] = !0, A.onMsgReceived(sn) } }).catch(function (Rt) { return m(ni, A).call(A, Rt.toString()) }) } return $(U, [{ key: "onCredentialsFailure", set: function (x) { T(Ns, this, x) } }, { key: "onConnectionError", set: function (x) { T(ni, this, x) } }, { key: "onFinished", set: function (x) { T(ta, this, x) } }, { key: "results", get: function () { var x = m(Ur, this), j = Object.keys(m(Mi, this)).length, F = Object.entries(m(Mi, this)).filter(function (ie) { var oe = We(ie, 2), de = oe[1]; return !de }).map(function (ie) { var oe = We(ie, 1), de = oe[0]; return +de }), q = F.length / j; return { totalMessages: x, numMessagesSent: j, packetLoss: q, lostMessages: F } } }]) }(), Bs = ["downloadChunkSize", "uploadChunkSize", "downloadApiUrl", "uploadApiUrl"], mi = new WeakMap, _o = function (U) { function A() { var x, j = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}, F = j.downloadChunkSize, q = j.uploadChunkSize, ie = j.downloadApiUrl, oe = j.uploadApiUrl, de = je(j, Bs); return Y(this, A), x = Wc(this, A, [de]), C(x, mi, void 0), (F || q) && (T(mi, x, new ea({ download: F ? { apiUrl: ie, chunkSize: F } : null, upload: q ? { apiUrl: oe, chunkSize: q } : null })), wt(A, "onCredentialsFailure", wt(A, "onConnectionError", wt(A, "onFinished", function () { return m(mi, x).stop() }, x, 1, 1), x, 1, 1), x, 1)), x } return re(A, U), $(A, [{ key: "qsParams", set: function (j) { m(mi, this) && (m(mi, this).qsParams = j) } }, { key: "fetchOptions", set: function (j) { m(mi, this) && (m(mi, this).fetchOptions = j) } }, { key: "onCredentialsFailure", set: function (j) { var F = this; wt(A, "onCredentialsFailure", function () { j.apply(void 0, arguments), m(mi, F) && m(mi, F).stop() }, this, 1) } }, { key: "onConnectionError", set: function (j) { var F = this; wt(A, "onConnectionError", function () { j.apply(void 0, arguments), m(mi, F) && m(mi, F).stop() }, this, 1) } }, { key: "onFinished", set: function (j) { var F = this; wt(A, "onFinished", function () { j.apply(void 0, arguments), m(mi, F) && m(mi, F).stop() }, this, 1) } }]) }(ii), mu = ["reachable"], ec = $(function U(A) { var x = this, j = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : {}, F = j.timeout, q = F === void 0 ? -1 : F, ie = j.fetchOptions, oe = ie === void 0 ? {} : ie; Y(this, U), z(this, "onFinished", function () { }); var de = !1, pe = function (ge) { var Oe = ge.reachable, Ie = je(ge, mu); de || (de = !0, x.onFinished(Me({ targetUrl: A, reachable: Oe }, Ie))) }; fetch(A, oe).then(function (fe) { pe({ reachable: !0, response: fe }) }).catch(function (fe) { pe({ reachable: !1, error: fe }) }), q > 0 && setTimeout(function () { return pe({ reachable: !1, error: "Request timeout" }) }, q) }), Qp = function (A) { return A.reduce(function (x, j) { return x + j }, 0) }, gu = function (A) { var x = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : .5; if (!A.length) return 0; var j = A.slice().sort(function (oe, de) { return oe - de }), F = (A.length - 1) * x, q = F % 1; if (q === 0) return j[Math.round(F)]; var ie = [Math.floor, Math.ceil].map(function (oe) { return j[oe(F)] }); return ie[0] + (ie[1] - ie[0]) * q }, ka = new WeakMap, tc = new WeakMap, Jp = function () { function U(A) { var x = this; Y(this, U), z(this, "getLatencyPoints", function (j) { return j.timings.map(function (F) { return F.ping }) }), z(this, "getLatency", function (j) { return gu(x.getLatencyPoints(j), m(ka, x).latencyPercentile) }), z(this, "getBandwidthPoints", function (j) { return Object.entries(j).map(function (F) { var q = We(F, 2), ie = q[0], oe = q[1].timings; return oe.map(function (de) { var pe = de.bps, fe = de.duration, ge = de.ping, Oe = de.measTime, Ie = de.serverTime, Tt = de.transferSize; return { bytes: +ie, bps: pe, duration: fe, ping: ge, measTime: Oe, serverTime: Ie, transferSize: Tt } }) }).flat() }), z(this, "getBandwidth", function (j) { return gu(x.getBandwidthPoints(j).filter(function (F) { return F.duration >= m(ka, x).bandwidthMinRequestDuration }).map(function (F) { return F.bps }).filter(function (F) { return F }), m(ka, x).bandwidthPercentile) }), z(this, "getLoadedLatency", function (j) { return x.getLatency({ timings: m(tc, x).call(x, j) }) }), z(this, "getLoadedJitter", function (j) { return x.getJitter({ timings: m(tc, x).call(x, j) }) }), z(this, "getLoadedLatencyPoints", function (j) { return x.getLatencyPoints({ timings: m(tc, x).call(x, j) }) }), z(this, "getPacketLoss", function (j) { return j.packetLoss }), z(this, "getPacketLossDetails", function (j) { return j }), z(this, "getReachability", function (j) { return !!j.reachable }), z(this, "getReachabilityDetails", function (j) { return { host: j.host, reachable: j.reachable } }), C(this, ka, void 0), C(this, tc, function (j) { return Object.values(j).filter(function (F) { return F.timings.length && Math.min.apply(Math, $t(F.timings.map(function (q) { return q.duration }))) >= m(ka, x).loadedRequestMinDuration }).map(function (F) { return F.sideLatency || [] }).flat().slice(-m(ka, x).loadedLatencyMaxPoints) }), T(ka, this, A) } return $(U, [{ key: "getJitter", value: function (x) { var j = this.getLatencyPoints(x); return j.length < 2 ? null : j.reduce(function (F, q) { var ie = F.sumDeltas, oe = ie === void 0 ? 0 : ie, de = F.prevLatency; return { sumDeltas: oe + (de !== void 0 ? Math.abs(de - q) : 0), prevLatency: q } }, {}).sumDeltas / (j.length - 1) } }]) }(), vu = ["bad", "poor", "average", "good", "great"], yu = { loadedLatencyIncrease: function (A) { return A.latency && (A.downLoadedLatency || A.upLoadedLatency) ? Math.max(A.downLoadedLatency, A.upLoadedLatency) - A.latency : void 0 } }, qc = { packetLoss: 0 }, rc = new WeakMap, Xp = function () { function U(A) { Y(this, U), C(this, rc, void 0), T(rc, this, A) } return $(U, [{ key: "getScores", value: function (x) { var j = Object.assign.apply(Object, $t(Object.entries(m(rc, this).aimMeasurementScoring).map(function (F) { var q = We(F, 2), ie = q[0], oe = q[1], de = yu.hasOwnProperty(ie) ? yu[ie](x) : x[ie]; return de === void 0 ? qc.hasOwnProperty(ie) ? z({}, ie, qc[ie]) : {} : z({}, ie, de === void 0 ? 0 : +oe(de)) }))); return Object.assign.apply(Object, [{}].concat($t(Object.entries(m(rc, this).aimExperiencesDefs).filter(function (F) { var q = We(F, 2), ie = q[1].input; return ie.every(function (oe) { return j.hasOwnProperty(oe) }) }).map(function (F) { var q = We(F, 2), ie = q[0], oe = q[1], de = oe.input, pe = oe.pointThresholds, fe = Math.max(0, Qp(de.map(function (Ie) { return j[Ie] }))), ge = Ea(pe, [0, 1, 2, 3, 4])(fe), Oe = vu[ge]; return z({}, ie, { points: fe, classificationIdx: ge, classificationName: Oe }) })))) } }]) }(), wo = new WeakMap, nc = new WeakMap, Gc = new WeakMap, qn = new WeakMap, bu = new WeakMap, Zp = new WeakMap, xu = new WeakMap, eh = new WeakMap, th = function () { function U(A) { var x = this; Y(this, U), z(this, "raw", void 0), z(this, "getUnloadedLatency", function () { return m(qn, x).call(x, "getLatency", "latency") }), z(this, "getUnloadedJitter", function () { return m(qn, x).call(x, "getJitter", "latency") }), z(this, "getUnloadedLatencyPoints", function () { return m(qn, x).call(x, "getLatencyPoints", "latency", []) }), z(this, "getDownLoadedLatency", function () { return m(qn, x).call(x, "getLoadedLatency", "download") }), z(this, "getDownLoadedJitter", function () { return m(qn, x).call(x, "getLoadedJitter", "download") }), z(this, "getDownLoadedLatencyPoints", function () { return m(qn, x).call(x, "getLoadedLatencyPoints", "download", []) }), z(this, "getUpLoadedLatency", function () { return m(qn, x).call(x, "getLoadedLatency", "upload") }), z(this, "getUpLoadedJitter", function () { return m(qn, x).call(x, "getLoadedJitter", "upload") }), z(this, "getUpLoadedLatencyPoints", function () { return m(qn, x).call(x, "getLoadedLatencyPoints", "upload", []) }), z(this, "getDownloadBandwidth", function () { return m(qn, x).call(x, "getBandwidth", "download") }), z(this, "getDownloadBandwidthPoints", function () { return m(qn, x).call(x, "getBandwidthPoints", "download", []) }), z(this, "getUploadBandwidth", function () { return m(qn, x).call(x, "getBandwidth", "upload") }), z(this, "getUploadBandwidthPoints", function () { return m(qn, x).call(x, "getBandwidthPoints", "upload", []) }), z(this, "getPacketLoss", function () { return m(qn, x).call(x, "getPacketLoss", "packetLoss") }), z(this, "getPacketLossDetails", function () { return m(qn, x).call(x, "getPacketLossDetails", "packetLoss", void 0, !0) }), z(this, "getScores", function () { return m(Gc, x).getScores(x.getSummary()) }), C(this, wo, void 0), C(this, nc, void 0), C(this, Gc, void 0), C(this, qn, function (j, F) { var q = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : void 0, ie = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : !1; return !x.raw.hasOwnProperty(F) || !x.raw[F].started ? q : ie && x.raw[F].error ? { error: x.raw[F].error } : m(nc, x)[j](x.raw[F].results) }), C(this, bu, function () { return m(qn, x).call(x, "getReachability", "v4Reachability") }), C(this, Zp, function () { return m(qn, x).call(x, "getReachabilityDetails", "v4Reachability") }), C(this, xu, function () { return m(qn, x).call(x, "getReachability", "v6Reachability") }), C(this, eh, function () { return m(qn, x).call(x, "getReachabilityDetails", "v6Reachability") }), T(wo, this, A), this.clear(), T(nc, this, new Jp(m(wo, this))), T(Gc, this, new Xp(m(wo, this))) } return $(U, [{ key: "isFinished", get: function () { return Object.values(this.raw).every(function (x) { return x.finished }) } }, { key: "clear", value: function () { this.raw = Object.assign.apply(Object, [{}].concat($t($t(new Set(m(wo, this).measurements.map(function (x) { return x.type }))).map(function (x) { return z({}, x, { started: !1, finished: !1, results: {} }) })))) } }, { key: "getSummary", value: function () { var x = { download: this.getDownloadBandwidth, upload: this.getUploadBandwidth, latency: this.getUnloadedLatency, jitter: this.getUnloadedJitter, downLoadedLatency: this.getDownLoadedLatency, downLoadedJitter: this.getDownLoadedJitter, upLoadedLatency: this.getUpLoadedLatency, upLoadedJitter: this.getUpLoadedJitter, packetLoss: this.getPacketLoss, v4Reachability: m(bu, this), v6Reachability: m(xu, this) }; return Object.assign.apply(Object, $t(Object.entries(x).map(function (j) { var F = We(j, 2), q = F[0], ie = F[1], oe = ie(); return oe === void 0 ? {} : z({}, q, oe) }))) } }]) }(), Kc = function (A) { var x = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 0; return A && Math.round(A * Math.pow(10, x)) / Math.pow(10, x) }, Yc = function (A) { return A.map(function (x) { return Kc(x, 2) }) }, _u = function (A) { return A.map(function (x) { return { bytes: +x.bytes, bps: Kc(x.bps) } }) }, rh = function (A) { return A.error ? void 0 : { numMessages: A.numMessagesSent, lossRatio: Kc(A.packetLoss, 4) } }, nh = { latencyMs: ["getUnloadedLatencyPoints", Yc], download: ["getDownloadBandwidthPoints", _u], upload: ["getUploadBandwidthPoints", _u], downLoadedLatencyMs: ["getDownLoadedLatencyPoints", Yc], upLoadedLatencyMs: ["getUpLoadedLatencyPoints", Yc], packetLoss: ["getPacketLossDetails", rh] }, rr = function (A) { return { points: A.points, classification: A.classificationName } }, At = function (A, x) { var j = x.apiUrl, F = x.sessionId, q = { sessionId: F }; Object.entries(nh).forEach(function (oe) { var de = We(oe, 2), pe = de[0], fe = We(de[1], 2), ge = fe[0], Oe = fe[1], Ie = Oe === void 0 ? function (tt) { return tt } : Oe, Tt = A[ge](); Tt && (q[pe] = Ie(Tt)) }); var ie = A.getScores(); ie && (q.scores = Object.assign.apply(Object, [{}].concat($t(Object.entries(ie).map(function (oe) { var de = We(oe, 2), pe = de[0], fe = de[1]; return z({}, pe, rr(fe)) }))))), fetch(j, { method: "POST", body: JSON.stringify(q) }) }, ic = ["type"], j2 = ["numPackets"], O2 = ["bytes"], M2 = 1e6, L2 = 1e6, N2 = .5, Lm = ["latency", "latencyUnderLoad", "download", "upload"], ob = function () { return "".concat(Math.round(Math.random() * 1e16)) }, Nm = new WeakMap, Qc = new WeakMap, Gn = new WeakMap, wu = new WeakMap, ih = new WeakMap, Qa = new WeakMap, Jc = new WeakMap, sh = new WeakMap, ah = new WeakMap, Zo = new WeakMap, oh = new WeakMap, pn = new WeakSet, B2 = function () { function U() { var A = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}; Y(this, U), w(this, pn), z(this, "onRunningChange", function () { }), z(this, "onResultsChange", function () { }), C(this, Nm, function () { }), C(this, Qc, function () { }), C(this, Gn, void 0), C(this, wu, void 0), C(this, ih, ob()), C(this, Qa, -1), C(this, Jc, void 0), C(this, sh, M2), C(this, ah, L2), C(this, Zo, !1), C(this, oh, !1), T(Gn, this, Object.assign({}, lr, A, qt)), T(wu, this, new th(m(Gn, this))), m(Gn, this).autoStart && this.play() } return $(U, [{ key: "results", get: function () { return m(wu, this) } }, { key: "isRunning", get: function () { return m(Zo, this) } }, { key: "isFinished", get: function () { return m(oh, this) } }, { key: "onFinish", set: function (x) { T(Nm, this, x) } }, { key: "onError", set: function (x) { T(Qc, this, x) } }, { key: "pause", value: function () { Lm.includes(ar(pn, this, ch).call(this)) && m(Jc, this).pause(), ar(pn, this, lh).call(this, !1) } }, { key: "play", value: function () { m(Zo, this) || (ar(pn, this, lh).call(this, !0), ar(pn, this, ra).call(this)) } }, { key: "restart", value: function () { ar(pn, this, F2).call(this), this.play() } }]) }(); function lh(U) { U !== m(Zo, this) && (T(Zo, this, U), this.onRunningChange(m(Zo, this))) } function lb(U) { var A = this; U !== m(oh, this) && (T(oh, this, U), U && setTimeout(function () { return m(Nm, A).call(A, A.results) })) } function ch() { return m(Qa, this) < 0 || m(Qa, this) >= m(Gn, this).measurements.length ? null : m(Gn, this).measurements[m(Qa, this)].type } function Xc() { return m(wu, this).raw[ar(pn, this, ch).call(this)] || void 0 } function F2() { ar(pn, this, z2).call(this), T(ih, this, ob()), T(Qa, this, -1), T(Jc, this, void 0), ar(pn, this, lh).call(this, !1), ar(pn, this, lb).call(this, !1), m(wu, this).clear() } function z2() { var U = m(Jc, this); U && (U.onFinished = U.onConnectionError = U.onFail = U.onMsgReceived = U.onCredentialsFailure = U.onMeasurementResult = function () { }, Lm.includes(ar(pn, this, ch).call(this)) && U.pause()) } function ra() { var U = this, A; if (Lm.includes(ar(pn, this, ch).call(this)) && ar(pn, this, Xc).call(this) && ar(pn, this, Xc).call(this).started && !ar(pn, this, Xc).call(this).finished && !ar(pn, this, Xc).call(this).finishedCurrentRound && !ar(pn, this, Xc).call(this).error) { m(Jc, this).play(); return } if (T(Qa, this, (A = m(Qa, this), A++, A)), m(Qa, this) >= m(Gn, this).measurements.length) { ar(pn, this, lh).call(this, !1), ar(pn, this, lb).call(this, !0); return } var x = m(Gn, this).measurements[m(Qa, this)], j = x.type, F = je(x, ic), q = ar(pn, this, Xc).call(this), ie = m(Gn, this), oe = ie.downloadApiUrl, de = ie.uploadApiUrl, pe = ie.estimatedServerTime, fe; switch (j) { case "v4Reachability": case "v6Reachability": fe = new ec("https://".concat(F.host), { fetchOptions: { method: "GET", mode: "no-cors" } }), fe.onFinished = function (et) { q.finished = !0, q.results = Me({ host: F.host }, et), U.onResultsChange({ type: j }), ar(pn, U, ra).call(U) }; break; case "rpki": fe = new ec("https://".concat(m(Gn, this).rpkiInvalidHost), { timeout: 5e3 }), fe.onFinished = function (et) { (et.response ? et.response.json() : Promise.resolve()).then(function (Rt) { q.finished = !0, q.results = Me({ host: m(Gn, U).rpkiInvalidHost, filteringInvalids: !et.reachable }, Rt ? { asn: Rt.asn, name: Rt.name } : {}), U.onResultsChange({ type: j }), ar(pn, U, ra).call(U) }) }; break; case "nxdomain": fe = new ec("https://".concat(F.nxhost), { fetchOptions: { mode: "no-cors" } }), fe.onFinished = function (et) { q.finished = !0, q.results = { host: F.nxhost, reachable: et.reachable }, U.onResultsChange({ type: j }), ar(pn, U, ra).call(U) }; break; case "packetLoss": case "packetLossUnderLoad": { q.finished = !1; var ge = F.numPackets, Oe = je(F, j2), Ie = m(Gn, this), Tt = Ie.turnServerUri, tt = Ie.turnServerCredsApiUrl, Ge = Ie.turnServerUser, Xe = Ie.turnServerPass, Ze = Ie.includeCredentials; fe = new _o(Me({ turnServerUri: Tt, turnServerCredsApi: tt, turnServerCredsApiIncludeCredentials: Ze, turnServerUser: Ge, turnServerPass: Xe, numMsgs: ge, downloadChunkSize: F.loadDown ? m(sh, this) : void 0, uploadChunkSize: F.loadUp ? m(ah, this) : void 0, downloadApiUrl: oe, uploadApiUrl: de }, Oe)) } fe.onMsgReceived = function () { q.results = Object.assign({}, fe.results), U.onResultsChange({ type: j }) }, fe.onFinished = function () { q.finished = !0, U.onResultsChange({ type: j }), ar(pn, U, ra).call(U) }, fe.onConnectionError = function (et) { q.error = et, U.onResultsChange({ type: j }), m(Qc, U).call(U, "Connection error while measuring packet loss: ".concat(et)), ar(pn, U, ra).call(U) }, fe.onCredentialsFailure = function () { q.error = "unable to get turn server credentials", U.onResultsChange({ type: j }), m(Qc, U).call(U, "Error while measuring packet loss: unable to get turn server credentials."), ar(pn, U, ra).call(U) }; break; case "latency": case "latencyUnderLoad": q.finished = !1, fe = new Zs([{ dir: "down", bytes: 0, count: F.numPackets, bypassMinDuration: !0 }], { downloadApiUrl: oe, uploadApiUrl: de, estimatedServerTime: pe, logApiUrl: m(Gn, this).logMeasurementApiUrl, measurementId: m(ih, this), sessionId: m(Gn, this).sessionId, downloadChunkSize: F.loadDown ? m(sh, this) : void 0, uploadChunkSize: F.loadUp ? m(ah, this) : void 0 }), fe.fetchOptions = { credentials: m(Gn, this).includeCredentials ? "include" : void 0 }, fe.onMeasurementResult = fe.onNewMeasurementStarted = function (et, Rt) { q.results = Object.assign({}, Rt.down[0]), U.onResultsChange({ type: j }) }, fe.onFinished = function () { q.finished = !0, U.onResultsChange({ type: j }), m(Zo, U) && ar(pn, U, ra).call(U) }, fe.onConnectionError = function (et) { q.error = et, U.onResultsChange({ type: j }), m(Qc, U).call(U, "Connection error while measuring latency: ".concat(et)), ar(pn, U, ra).call(U) }, fe.play(); break; case "download": case "upload": if (q.finished || q.error) ar(pn, this, ra).call(this); else { delete q.finishedCurrentRound; var Kt = m(Gn, this)["measure".concat(j === "download" ? "Down" : "Up", "loadLoadedLatency")]; fe = new Zs([Me({ dir: j === "download" ? "down" : "up" }, F)], { downloadApiUrl: oe, uploadApiUrl: de, estimatedServerTime: pe, logApiUrl: m(Gn, this).logMeasurementApiUrl, measurementId: m(ih, this), measureParallelLatency: Kt, parallelLatencyThrottleMs: m(Gn, this).loadedLatencyThrottle, sessionId: m(Gn, this).sessionId }), fe.fetchOptions = { credentials: m(Gn, this).includeCredentials ? "include" : void 0 }, fe.finishRequestDuration = m(Gn, this).bandwidthFinishRequestDuration, fe.onNewMeasurementStarted = function (et) { var Rt = et.count, wr = et.bytes, Gr = q.results = Object.assign({}, q.results); !Gr.hasOwnProperty(wr) && (Gr[wr] = { timings: [], numMeasurements: 0, sideLatency: Kt ? [] : void 0 }), Gr[wr].numMeasurements - Gr[wr].timings.length !== Rt && (Gr[wr].numMeasurements += Rt, U.onResultsChange({ type: j })) }, fe.onMeasurementResult = function (et) { var Rt = et.bytes, wr = je(et, O2); q.results[Rt].timings.push(wr), q.results = Object.assign({}, q.results), U.onResultsChange({ type: j }) }, fe.onParallelLatencyResult = function (et) { q.results[F.bytes].sideLatency.push(et), q.results = Object.assign({}, q.results), U.onResultsChange({ type: j }) }, fe.onFinished = function (et) { var Rt = !m(Gn, U).measurements.slice(m(Qa, U) + 1).map(function (nn) { return nn.type }).includes(j), wr = Math.min.apply(Math, $t(Object.values(j === "download" ? et.down : et.up).slice(-1)[0].timings.map(function (nn) { return nn.duration }))), Gr = Rt || !F.bypassMinDuration && wr > m(Gn, U).bandwidthFinishRequestDuration; if (!Gr) q.finishedCurrentRound = !0; else { q.finished = !0, U.onResultsChange({ type: j }); var ht = Object.keys(q.results).map(function (nn) { return +nn }).sort(function (nn, Vr) { return Vr - nn })[0], Er = ht * N2; j === "download" && T(sh, U, Er), j === "upload" && T(ah, U, Er) } m(Zo, U) && ar(pn, U, ra).call(U) }, fe.onConnectionError = function (et) { q.error = et, U.onResultsChange({ type: j }), m(Qc, U).call(U, "Connection error while measuring ".concat(j, ": ").concat(et)), ar(pn, U, ra).call(U) }, fe.play() } break }T(Jc, this, fe), q.started = !0, this.onResultsChange({ type: j }) } var dh = new WeakMap, Bm = new WeakMap, Fm = new WeakMap, $2 = function (U) { function A(x) { var j; Y(this, A); for (var F = arguments.length, q = new Array(F > 1 ? F - 1 : 0), ie = 1; ie < F; ie++)q[ie - 1] = arguments[ie]; j = Wc(this, A, [x].concat(q)), C(j, dh, void 0), C(j, Bm, void 0), C(j, Fm, function (de) { m(dh, j) && At(de, { apiUrl: m(dh, j), sessionId: m(Bm, j) }) }), wt(A, "onFinish", m(Fm, j), j, 1); var oe = Object.assign({}, lr, x, qt); return T(dh, j, oe.logAimApiUrl), T(Bm, j, oe.sessionId), j } return re(A, U), $(A, [{ key: "onFinish", set: function (j) { var F = this; wt(A, "onFinish", function (q) { j(q), m(Fm, F).call(F, q) }, this, 1) } }]) }(B2), U2 = l(9633), V2 = l(2067), cb = l(6565); function db(U, A) {
                    var x = typeof Symbol < "u" && U[Symbol.iterator] || U["@@iterator"]; if (!x) {
                        if (Array.isArray(U) || (x = W2(U)) || A && U && typeof U.length == "number") { x && (U = x); var j = 0, F = function () { }; return { s: F, n: function () { return j >= U.length ? { done: !0 } : { done: !1, value: U[j++] } }, e: function (pe) { throw pe }, f: F } } throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                    } var q, ie = !0, oe = !1; return { s: function () { x = x.call(U) }, n: function () { var pe = x.next(); return ie = pe.done, pe }, e: function (pe) { oe = !0, q = pe }, f: function () { try { ie || x.return == null || x.return() } finally { if (oe) throw q } } }
                } function W2(U, A) { if (U) { if (typeof U == "string") return ub(U, A); var x = {}.toString.call(U).slice(8, -1); return x === "Object" && U.constructor && (x = U.constructor.name), x === "Map" || x === "Set" ? Array.from(U) : x === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(x) ? ub(U, A) : void 0 } } function ub(U, A) { (A == null || A > U.length) && (A = U.length); for (var x = 0, j = Array(A); x < A; x++)j[x] = U[x]; return j } var H2 = [K], pb = !1, Su = function () { function U() { (0, f.A)(this, U), (0, P.A)(this, "keyProvider", null) } return (0, h.A)(U, null, [{ key: "setKeyProvider", value: function (x) { this.keyProvider = x } }, { key: "getKeyProvider", value: function () { return this.keyProvider } }, { key: "config", value: function (x) { if (!x) throw new Error("'token' is empty, please provide it in config"); this.apiKey = x; var j = E(Xt, void 0, H.apply(void 0, H2)); window.STORE = j, cr.default.init({ store: j }) } }, { key: "getCameras", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de; return u().wrap(function (pe) { for (; ;)switch (pe.prev = pe.next) { case 0: if (pe.prev = 0, navigator.userAgent && (F = navigator.userAgent.includes("Firefox")), q = [], !F) { pe.next = 2; break } return pe.next = 1, new Promise(function (fe, ge) { navigator.mediaDevices.getUserMedia({ audio: !1, video: !0 }).then(function () { var Oe = (0, d.A)(u().mark(function Ie(Tt) { var tt; return u().wrap(function (Ge) { for (; ;)switch (Ge.prev = Ge.next) { case 0: return Ge.next = 1, navigator.mediaDevices.enumerateDevices(); case 1: tt = Ge.sent, q = tt.filter(function (Xe) { return Xe.kind === "videoinput" }).map(function (Xe) { return new xo(Xe.deviceId, Xe.groupId, Xe.kind, Xe.label) }), fe(q), Tt.getTracks().forEach(function (Xe) { return Xe.stop() }); case 2: case "end": return Ge.stop() } }, Ie) })); return function (Ie) { return Oe.apply(this, arguments) } }()).catch(function (Oe) { console.error("Error in getCameras()", Oe), ge(Oe) }) }); case 1: pe.next = 4; break; case 2: return pe.next = 3, navigator.mediaDevices.enumerateDevices(); case 3: ie = pe.sent, q = ie.filter(function (fe) { return fe.kind === "videoinput" }).map(function (fe) { return new xo(fe.deviceId, fe.groupId, fe.kind, fe.label) }); case 4: return pe.abrupt("return", q); case 5: pe.prev = 5, de = pe.catch(0), oe = de.message, de instanceof TypeError && de.name === "TypeError" && (oe = Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message), console.error("An error occurred in getCameras(), ".concat(oe)); case 6: case "end": return pe.stop() } }, j, null, [[0, 5]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "getMicrophones", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de; return u().wrap(function (pe) { for (; ;)switch (pe.prev = pe.next) { case 0: if (pe.prev = 0, navigator.userAgent && (F = navigator.userAgent.includes("Firefox")), q = [], !F) { pe.next = 2; break } return pe.next = 1, new Promise(function (fe, ge) { navigator.mediaDevices.getUserMedia({ audio: !0, video: !1 }).then(function () { var Oe = (0, d.A)(u().mark(function Ie(Tt) { var tt; return u().wrap(function (Ge) { for (; ;)switch (Ge.prev = Ge.next) { case 0: return Ge.next = 1, navigator.mediaDevices.enumerateDevices(); case 1: tt = Ge.sent, q = tt.filter(function (Xe) { return Xe.kind === "audioinput" }).map(function (Xe) { return new pu(Xe.deviceId, Xe.groupId, Xe.kind, Xe.label) }), fe(q), Tt.getTracks().forEach(function (Xe) { return Xe.stop() }); case 2: case "end": return Ge.stop() } }, Ie) })); return function (Ie) { return Oe.apply(this, arguments) } }()).catch(function (Oe) { console.error("Error in getMicrophones()", Oe), ge(Oe) }) }); case 1: pe.next = 4; break; case 2: return pe.next = 3, navigator.mediaDevices.enumerateDevices(); case 3: ie = pe.sent, q = ie.filter(function (fe) { return fe.kind === "audioinput" }).map(function (fe) { return new pu(fe.deviceId, fe.groupId, fe.kind, fe.label) }); case 4: return pe.abrupt("return", q); case 5: pe.prev = 5, de = pe.catch(0), oe = de.message, de instanceof TypeError && de.name === "TypeError" && (oe = Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message), console.error("An error occurred in getMicrophones(), ".concat(oe)); case 6: case "end": return pe.stop() } }, j, null, [[0, 5]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "getPlaybackDevices", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de; return u().wrap(function (pe) { for (; ;)switch (pe.prev = pe.next) { case 0: if (pe.prev = 0, navigator.userAgent && (F = navigator.userAgent.includes("Firefox")), q = [], !F) { pe.next = 2; break } return pe.next = 1, new Promise(function (fe, ge) { navigator.mediaDevices.getUserMedia({ audio: !0, video: !1 }).then(function () { var Oe = (0, d.A)(u().mark(function Ie(Tt) { var tt; return u().wrap(function (Ge) { for (; ;)switch (Ge.prev = Ge.next) { case 0: return Ge.next = 1, navigator.mediaDevices.enumerateDevices(); case 1: tt = Ge.sent, q = tt.filter(function (Xe) { return Xe.kind === "audiooutput" }).map(function (Xe) { return new Kp(Xe.deviceId, Xe.groupId, Xe.kind, Xe.label) }), fe(q), Tt.getTracks().forEach(function (Xe) { return Xe.stop() }); case 2: case "end": return Ge.stop() } }, Ie) })); return function (Ie) { return Oe.apply(this, arguments) } }()).catch(function (Oe) { console.error("Error in getPlaybackDevices()", Oe), ge(Oe) }) }); case 1: pe.next = 4; break; case 2: return pe.next = 3, navigator.mediaDevices.enumerateDevices(); case 3: ie = pe.sent, q = ie.filter(function (fe) { return fe.kind === "audiooutput" }).map(function (fe) { return new Kp(fe.deviceId, fe.groupId, fe.kind, fe.label) }); case 4: return pe.abrupt("return", q); case 5: pe.prev = 5, de = pe.catch(0), oe = de.message, de instanceof TypeError && de.name === "TypeError" && (oe = "Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"), console.error("An error occurred in getPlaybackDevices(), ".concat(oe)); case 6: case "end": return pe.stop() } }, j, null, [[0, 5]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "getDevices", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: return ge.prev = 0, ge.next = 1, navigator.mediaDevices.enumerateDevices(); case 1: F = ge.sent, q = [], ie = db(F); try { for (ie.s(); !(oe = ie.n()).done;)de = oe.value, q.push(new bs(de.deviceId, de.groupId, de.kind, de.label)) } catch (Oe) { ie.e(Oe) } finally { ie.f() } return ge.abrupt("return", q); case 2: ge.prev = 2, fe = ge.catch(0), pe = fe.message, fe instanceof TypeError && (fe.name === "TypeError" ? pe = "Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)" : pe = fe.message), console.error("An error occurred in getDevices(), ".concat(pe)); case 3: case "end": return ge.stop() } }, j, null, [[0, 2]]) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "on", value: function (x, j) { switch (x) { case "device-changed": this.addDeviceChangeEvent(), this.eventEmitter.on(x, j); break; default: throw new Error("Unsupported event type") } } }, { key: "addDeviceChangeEvent", value: function () { var x = this; if (!pb) { this.getDevices().then(function (F) { x.devices = F }); try { navigator.mediaDevices.addEventListener("devicechange", function () { var F = (0, d.A)(u().mark(function q(ie) { var oe, de, pe, fe, ge, Oe; return u().wrap(function (Ie) { for (; ;)switch (Ie.prev = Ie.next) { case 0: return oe = x.devices, Ie.next = 1, x.getDevices(); case 1: x.devices = Ie.sent, de = new Array, pe = db(x.devices), Ie.prev = 2, ge = u().mark(function Tt() { var tt, Ge; return u().wrap(function (Xe) { for (; ;)switch (Xe.prev = Xe.next) { case 0: tt = fe.value, Ge = oe.filter(function (Ze) { return Ze.deviceId == tt.deviceId && Ze.kind == tt.kind }), Ge.length == 0 ? de.push(tt) : oe = oe.filter(function (Ze) { return !(Ze.deviceId == tt.deviceId && Ze.kind == tt.kind) }); case 1: case "end": return Xe.stop() } }, Tt) }), pe.s(); case 3: if ((fe = pe.n()).done) { Ie.next = 5; break } return Ie.delegateYield(ge(), "t0", 4); case 4: Ie.next = 3; break; case 5: Ie.next = 7; break; case 6: Ie.prev = 6, Oe = Ie.catch(2), pe.e(Oe); case 7: return Ie.prev = 7, pe.f(), Ie.finish(7); case 8: de.length != 0 && x.eventEmitter.emit("device-changed", { devices: x.devices }), oe.length != 0 && x.eventEmitter.emit("device-changed", { devices: x.devices }); case 9: case "end": return Ie.stop() } }, q, null, [[2, 6, 7, 8]]) })); return function (q) { return F.apply(this, arguments) } }()), pb = !0 } catch (F) { var j = F.message; F instanceof TypeError && (F.name === "TypeError" ? j = "Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)" : j = F.message), console.error("An error occurred in device-change event, ".concat(j)) } } } }, { key: "off", value: function (x, j) { switch (x) { case "device-changed": this.eventEmitter.off(x, j); break; default: throw new Error("Unsupported event type") } } }, { key: "checkPermissions", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe, de, pe; return u().wrap(function (fe) { for (; ;)switch (fe.prev = fe.next) { case 0: if (F || (F = Dn.AUDIO_AND_VIDEO), q = new Map, !(F.includes(Dn.AUDIO) || F.includes(Dn.AUDIO_AND_VIDEO))) { fe.next = 5; break } return ie = !0, fe.prev = 1, fe.next = 2, navigator.permissions.query({ name: "microphone" }); case 2: oe = fe.sent, (oe.state == "prompt" || oe.state == "denied") && (ie = !1), fe.next = 4; break; case 3: throw fe.prev = 3, fe.catch(1), Error("Browser does not support microphone permission check"); case 4: q.set(Dn.AUDIO, ie); case 5: if (!(F.includes(Dn.VIDEO) || F.includes(Dn.AUDIO_AND_VIDEO))) { fe.next = 10; break } return de = !0, fe.prev = 6, fe.next = 7, navigator.permissions.query({ name: "camera" }); case 7: pe = fe.sent, (pe.state == "prompt" || pe.state == "denied") && (de = !1), fe.next = 9; break; case 8: throw fe.prev = 8, fe.catch(6), Error("Browser does not support camera permission check"); case 9: q.set(Dn.VIDEO, de); case 10: return fe.abrupt("return", q); case 11: case "end": return fe.stop() } }, j, null, [[1, 3], [6, 8]]) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "requestPermission", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe, de, pe, fe, ge, Oe, Ie, Tt, tt, Ge, Xe, Ze, Kt, et, Rt, wr, Gr; return u().wrap(function (ht) { for (; ;)switch (ht.prev = ht.next) { case 0: if (F || (F = Dn.AUDIO_AND_VIDEO), q = new Map, !F.includes(Dn.AUDIO_AND_VIDEO)) { ht.next = 12; break } return oe = { audio: !0, video: !0 }, de = !0, ht.prev = 1, ht.next = 2, navigator.mediaDevices.getUserMedia(oe); case 2: ie = ht.sent, ht.next = 11; break; case 3: if (ht.prev = 3, Ze = ht.catch(1), !(Ze instanceof DOMException)) { ht.next = 9; break } Kt = Ze.name, ht.next = Kt === "NotAllowedError" ? 4 : Kt === "NotReadableError" ? 5 : Kt === "NotFoundError" ? 6 : 7; break; case 4: return Ze.message === "Permission denied by system" && (pe = Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message), ht.abrupt("continue", 8); case 5: return pe = Eu(Ze, "video"), ht.abrupt("continue", 8); case 6: return pe = Ir.q.ERROR_CAMERA_NOT_FOUND.message, navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") != -1 && (pe = Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message), ht.abrupt("continue", 8); case 7: pe = Ze.message; case 8: ht.next = 10; break; case 9: Ze instanceof TypeError && Ze.name === "TypeError" ? pe = Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message : pe = Ze.message; case 10: de = !1, pe && console.error("An error occurred in request permission, ".concat(pe)); case 11: ie && setTimeout(function () { ie.getTracks().forEach(function (Er) { Er.stop() }) }, 100), q.set(Dn.AUDIO_AND_VIDEO, de); case 12: if (!F.includes(Dn.VIDEO)) { ht.next = 24; break } return ge = { audio: !1, video: !0 }, Oe = !0, ht.prev = 13, ht.next = 14, navigator.mediaDevices.getUserMedia(ge); case 14: fe = ht.sent, ht.next = 23; break; case 15: if (ht.prev = 15, et = ht.catch(13), !(et instanceof DOMException)) { ht.next = 21; break } Rt = et.name, ht.next = Rt === "NotAllowedError" ? 16 : Rt === "NotReadableError" ? 17 : Rt === "NotFoundError" ? 18 : 19; break; case 16: return et.message === "Permission denied by system" && (Ie = Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message), ht.abrupt("continue", 20); case 17: return Ie = Eu(et, "video"), ht.abrupt("continue", 20); case 18: return Ie = Ir.q.ERROR_CAMERA_NOT_FOUND.message, navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") != -1 && (Ie = Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message), ht.abrupt("continue", 20); case 19: Ie = et.message; case 20: ht.next = 22; break; case 21: et instanceof TypeError && et.name === "TypeError" ? Ie = Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message : Ie = et.message; case 22: Oe = !1, Ie && console.error("An error occurred in request permission, ".concat(Ie)); case 23: fe && fe.getTracks().forEach(function (Er) { Er.stop() }), q.set(Dn.VIDEO, Oe); case 24: if (!F.includes(Dn.AUDIO)) { ht.next = 36; break } return tt = { audio: !0, video: !1 }, Ge = !0, ht.prev = 25, ht.next = 26, navigator.mediaDevices.getUserMedia(tt); case 26: Tt = ht.sent, ht.next = 35; break; case 27: if (ht.prev = 27, wr = ht.catch(25), !(wr instanceof DOMException)) { ht.next = 33; break } Gr = wr.name, ht.next = Gr === "NotAllowedError" ? 28 : Gr === "NotReadableError" ? 29 : Gr === "NotFoundError" ? 30 : 31; break; case 28: return wr.message === "Permission denied by system" && (Xe = Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message), ht.abrupt("continue", 32); case 29: return Xe = Eu(wr, "audio"), ht.abrupt("continue", 32); case 30: return Xe = Ir.q.ERROR_MICROPHONE_NOT_FOUND.message, navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") != -1 && (Xe = Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message), ht.abrupt("continue", 32); case 31: Xe = wr.message; case 32: ht.next = 34; break; case 33: wr instanceof TypeError && wr.name === "TypeError" ? Xe = Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message : Xe = wr.message; case 34: Ge = !1, Xe && console.error("An error occurred in request permission, ".concat(Xe)); case 35: Tt && Tt.getTracks().forEach(function (Er) { Er.stop() }), q.set(Dn.AUDIO, Ge); case 36: return ht.abrupt("return", q); case 37: case "end": return ht.stop() } }, j, null, [[1, 3], [13, 15], [25, 27]]) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "isInt", value: function (x) { return typeof x == "number" && x % 1 == 0 } }, { key: "getNetworkStats", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe = arguments; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: return F = fe.length > 0 && fe[0] !== void 0 ? fe[0] : {}, q = F.timeoutDuration, ie = F.baseUrl, oe = ie === void 0 ? "api.videosdk.live" : ie, (!q || !this.isInt(q)) && (q = 6e4), de = new Promise(function (Oe, Ie) { setTimeout(function () { Ie("Not able to get NetworkStats due to timeout") }, q) }), pe = new Promise(function (Oe, Ie) { if (!navigator.onLine) { Ie("Not able to get NetworkStats due to no Network"); return } var Tt = new $2({ measureDownloadLoadedLatency: !1, measureUploadLoadedLatency: !1, measurements: [{ type: "upload", bytes: 3e6, count: 1, bypassMinDuration: !0 }, { type: "download", bytes: 3e6, count: 1, bypassMinDuration: !0 }], uploadApiUrl: "https://".concat(oe, "/test-upload-speed"), downloadApiUrl: "https://".concat(oe, "/test-download-speed") }); if (!Tt.isRunning) { Ie("Not able to get NetworkStats"); return } Tt.onFinish = function (tt) { Oe({ downloadSpeed: parseFloat(Number(tt.getDownloadBandwidth() / 1048576).toFixed(2)), uploadSpeed: parseFloat(Number(tt.getUploadBandwidth() / 1048576).toFixed(2)) }) }, Tt.onError = function (tt) { Ie("Not able to get NetworkStats") } }), ge.abrupt("return", Promise.race([pe, de])); case 1: case "end": return ge.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "checkConnection", value: function () { var A = (0, d.A)(u().mark(function j() { var F, q, ie, oe, de, pe, fe = arguments; return u().wrap(function (ge) { for (; ;)switch (ge.prev = ge.next) { case 0: return F = fe.length > 0 && fe[0] !== void 0 ? fe[0] : {}, q = F.timeoutDuration, ie = F.baseUrl, oe = ie === void 0 ? "api.videosdk.live" : ie, (!q || !this.isInt(q)) && (q = 6e4), de = new Promise(function (Oe, Ie) { setTimeout(function () { Ie("TimeoutError: NetworkStats timeout") }, q) }), pe = new Promise(function (Oe, Ie) { if (!navigator.onLine) { Ie("NetworkError: Offline"); return } fetch("https://".concat(oe, "/ping")).then(function (Tt) { Tt.text().then(function (tt) { tt == "pong" ? Oe("Connection established") : Ie("ConnectionError: Server unreachable") }) }).catch(function (Tt) { Ie("ConnectionError: Server unreachable") }) }), ge.abrupt("return", Promise.race([pe, de])); case 1: case "end": return ge.stop() } }, j, this) })); function x() { return A.apply(this, arguments) } return x }() }, { key: "analytics", value: function (x) { var j, F, q; !x && navigator && navigator.userAgent && (F = navigator.userAgent, q = S().parse(F), delete q.engine); try { var ie; (ie = x) !== null && ie !== void 0 && ie.browserUserAgent || (F = navigator.userAgent, q = S().parse(F), delete q.engine) } catch { } x && x.rawUserAgent && (F = x.rawUserAgent, q = S().parse(F), delete q.engine), x || (x = {}); var oe = {}; oe.sdkType = x.sdkType || "javascript", oe.sdkVersion = x.sdkVersion || "0.5.6", oe.platform = x.platform || ((j = q) === null || j === void 0 || (j = j.platform) === null || j === void 0 ? void 0 : j.type) || "", x.browserUserAgent == "null" ? oe.browserUserAgent = void 0 : oe.browserUserAgent = q, x.deviceUserAgent && (oe.deviceUserAgent = x.deviceUserAgent), this._deviceInfo = oe } }, { key: "initMeeting", value: function (x) { var j, F = x.meetingId, q = x.customCameraVideoTrack, ie = q === void 0 ? void 0 : q, oe = x.customMicrophoneAudioTrack, de = oe === void 0 ? void 0 : oe, pe = x.autoConsume, fe = pe === void 0 ? !0 : pe, ge = x.preferredProtocol, Oe = x.mode, Ie = x.multiStream, Tt = Ie === void 0 ? !0 : Ie, tt = x.participantId, Ge = x.name, Xe = x.translationLanguage, Ze = x.speakingLanguage, Kt = x.micEnabled, et = x.webcamEnabled, Rt = x.maxResolution, wr = x.metaData, Gr = x.chatEnabled, ht = x.useSpartialLayerAnalytics, Er = x.signalingBaseUrl, nn = x.defaultCamera, Vr = x.debugMode, sn = Vr === void 0 ? !0 : Vr; if (!F) throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API."); var Rr = tt ? tt.toString() : B()({ length: 8 }).toLowerCase(), si = Ge || B()({ length: 6 }).toLowerCase(); switch (this._deviceInfo || this.analytics(), typeof ge != "string" && (ge = "UDP_OVER_TCP"), (j = ge) === null || j === void 0 ? void 0 : j.toUpperCase()) { case "UDP_ONLY": case "UDP_OVER_TCP": case "TCP_ONLY": ge = ge.toUpperCase(); break; default: ge = "UDP_OVER_TCP"; break }if (Oe || (Oe = dn.nI.SEND_AND_RECV), Oe !== dn.nI.SEND_AND_RECV && Oe !== dn.nI.SIGNALLING_ONLY && Oe !== dn.nI.RECV_ONLY && Oe !== dn.nI.VIEWER && Oe !== dn.nI.CONFERENCE) throw new Error('"mode" can only be either '.concat(dn.nI.SEND_AND_RECV, " or ").concat(dn.nI.SIGNALLING_ONLY, " or ").concat(dn.nI.RECV_ONLY, " ")); if (wr != null && (0, p.A)(wr) != "object") throw new Error('"metaData" can only be object.'); var ui = this._deviceInfo.sdkType === "react-native", gi = ui ? nn ? nn === "front" ? 1 : 0 : ie ? ie.getVideoTracks()[0].getConstraints().facingMode === "user" ? 1 : 0 : ui ? 1 : 0 : 0, ai = new cr.default({ roomId: F, peerId: Rr, secret: this.apiKey, device: "unknown", displayName: si, translationLanguage: Xe, speakingLanguage: Ze, mode: Oe, useSimulcast: Tt, produce: !0, consume: !0, datachannel: Gr !== !1, micEnabled: Kt !== !1, webcamEnabled: et !== !1, maxResolution: Rt || "hd", useSpartialLayerAnalytics: ht, _deviceInfo: this._deviceInfo, customCameraVideoTrack: ie, customMicrophoneAudioTrack: de, autoConsume: fe, preferredProtocol: ge, signalingBaseUrl: Er, metaData: wr, defaultCameraIndex: gi, defaultCamera: nn, debugMode: sn, keyProvider: this.keyProvider }); dt.roomClient = ai; var os = new ya({ id: Rr, displayName: si, local: !0, mode: Oe, metaData: wr }); return new Rm(F, os, ai) } }, { key: "createCameraVideoTrack", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe, de, pe, fe, ge, Oe, Ie, Tt, tt, Ge, Xe, Ze, Kt, et, Rt, wr, Gr, ht, Er, nn, Vr, sn; return u().wrap(function (Rr) { for (; ;)switch (Rr.prev = Rr.next) { case 0: if (q = F.cameraId, ie = q === void 0 ? void 0 : q, oe = F.encoderConfig, de = oe === void 0 ? void 0 : oe, pe = F.facingMode, fe = pe === void 0 ? void 0 : pe, ge = F.optimizationMode, Oe = ge === void 0 ? void 0 : ge, Ie = F.multiStream, Tt = Ie === void 0 ? !0 : Ie, tt = F.bitrateMode, Ge = tt === void 0 ? cb.x.BALANCED : tt, Xe = F.maxLayer, Ze = Xe === void 0 ? 3 : Xe, !ie) { Rr.next = 2; break } return Rr.next = 1, this.getCameras(); case 1: Kt = Rr.sent, Kt && (et = Kt.some(function (si) { return si.deviceId }), et && (Rt = Kt.some(function (si) { return si.deviceId === ie }), Rt || console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."))); case 2: return Rr.prev = 2, wr = de ? Qo.$.videoProfiles[de] : Qo.$.videoProfiles.h720p_w1280p, Gr = { video: { deviceId: ie ? { exact: ie } : void 0, facingMode: fe || void 0, width: wr.width, height: wr.height, frameRate: wr.frameRate } }, Rr.next = 3, (0, uu.lp)(Gr); case 3: return ht = Rr.sent, Oe && (ht.contentHint = Oe), ht.encoderConfig = de || "h720p_w1280p", ht.contentHint = Oe || "", ht.multiStream = Tt, ht.cameraId = ie, ht.bitrateMode = Ge, ht.maxLayer = Number.isInteger(Ze) && Ze > 0 && Ze <= 3 ? Ze : 3, Rr.abrupt("return", ht); case 4: if (Rr.prev = 4, Vr = Rr.catch(2), Vr.name !== "SecurityError") { Rr.next = 5; break } Er = Ir.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message, Rr.next = 13; break; case 5: if (Vr.name !== "DOMException") { Rr.next = 6; break } Er = Ir.q.ERROR_RN_CAMERA_NOT_FOUND.message, Rr.next = 13; break; case 6: if (!(Vr instanceof DOMException)) { Rr.next = 12; break } sn = Vr.name, Rr.next = sn === "NotAllowedError" ? 7 : sn === "NotReadableError" ? 8 : sn === "NotFoundError" ? 9 : 10; break; case 7: return Er = hb(Vr, "video"), Rr.abrupt("continue", 11); case 8: return Er = Eu(Vr, "video"), Rr.abrupt("continue", 11); case 9: return Er = Ir.q.ERROR_CAMERA_NOT_FOUND.message, navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") != -1 && (Er = Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message), Rr.abrupt("continue", 11); case 10: return Er = Vr.message, Rr.abrupt("continue", 11); case 11: Rr.next = 13; break; case 12: Vr.message == "getUserMedia is not implemented in this browser" ? (nn = Ir.q.ERROR_CAMERA_ACCESS_UNAVAILABLE, Er = nn.message) : Er = Vr.message; case 13: return console.error("An error occurred in creating video track, ".concat(Er)), Rr.abrupt("return", null); case 14: case "end": return Rr.stop() } }, j, this, [[2, 4]]) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "createScreenShareVideoTrack", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe, de, pe, fe, ge, Oe, Ie, Tt, tt; return u().wrap(function (Ge) { for (; ;)switch (Ge.prev = Ge.next) { case 0: return q = F.encoderConfig, ie = q === void 0 ? void 0 : q, oe = F.optimizationMode, de = oe === void 0 ? void 0 : oe, pe = F.withAudio, fe = pe === void 0 ? "enable" : pe, ge = F.multiStream, Oe = ge === void 0 ? !1 : ge, Ie = ie ? Qo.$.screenShareProfiles[ie] : Qo.$.screenShareProfiles.h720p_15fps, Tt = { audio: fe === "enable", video: { width: Ie.resolution.width, height: Ie.resolution.height, frameRate: Ie.frameRate } }, Ge.next = 1, (0, uu.Zu)(Tt); case 1: return tt = Ge.sent, de && (tt.contentHint = de), tt.multiStream = Oe, Ge.abrupt("return", tt); case 2: case "end": return Ge.stop() } }, j) })); function x(j) { return A.apply(this, arguments) } return x }() }, { key: "createMicrophoneAudioTrack", value: function () { var A = (0, d.A)(u().mark(function j(F) { var q, ie, oe, de, pe, fe, ge, Oe, Ie, Tt, tt, Ge, Xe, Ze, Kt; return u().wrap(function (et) { for (; ;)switch (et.prev = et.next) { case 0: if (q = F.noiseConfig, ie = q === void 0 ? void 0 : q, oe = F.encoderConfig, de = oe === void 0 ? void 0 : oe, pe = F.microphoneId, fe = pe === void 0 ? void 0 : pe, !fe) { et.next = 2; break } return et.next = 1, this.getMicrophones(); case 1: ge = et.sent, ge && ge.some(function (Rt) { return Rt.deviceId }) && (Oe = ge.some(function (Rt) { return Rt.deviceId === fe }), Oe || console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead.")); case 2: return et.prev = 2, Ie = de ? Qo.$.audioProfiles[de] : Qo.$.audioProfiles.speech_standard, Tt = { audio: { deviceId: fe ? { exact: fe } : void 0, sampleRate: Ie.sampleRate, echoCancellation: ie ? ie && ie.acousticEchoCancellation : Ie.echoCancellation, autoGainControl: ie ? ie && ie.autoGainControl : Ie.autoGainControl, noiseSuppression: ie ? ie && ie.noiseSuppression : Ie.noiseSuppression, channelCount: Ie.channelCount } }, et.next = 3, (0, uu.lp)(Tt); case 3: return tt = et.sent, tt.encoderConfig = de || "speech_standard", tt.microphoneId = fe, et.abrupt("return", tt); case 4: if (et.prev = 4, Ze = et.catch(2), Ze.name !== "SecurityError") { et.next = 5; break } Ge = Ir.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message, et.next = 13; break; case 5: if (Ze.name !== "DOMException") { et.next = 6; break } Ge = Ir.q.ERROR_RN_MIC_NOT_FOUND.message, et.next = 13; break; case 6: if (!(Ze instanceof DOMException)) { et.next = 12; break } Kt = Ze.name, et.next = Kt === "NotAllowedError" ? 7 : Kt === "NotReadableError" ? 8 : Kt === "NotFoundError" ? 9 : 10; break; case 7: return Ge = hb(Ze, "audio"), et.abrupt("continue", 11); case 8: return Ge = Eu(Ze, "audio"), et.abrupt("continue", 11); case 9: return Ge = Ir.q.ERROR_MICROPHONE_NOT_FOUND.message, navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") != -1 && (Ge = Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message), et.abrupt("continue", 11); case 10: return Ge = Ze.message, et.abrupt("continue", 11); case 11: et.next = 13; break; case 12: Ze.message == "getUserMedia is not implemented in this browser" ? (Xe = Ir.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE, Ge = Xe.message) : Ge = Ze.message; case 13: return console.error("An error occurred in creating audio track, ".concat(Ge)), et.abrupt("return", null); case 14: case "end": return et.stop() } }, j, this, [[2, 4]]) })); function x(j) { return A.apply(this, arguments) } return x }() }]) }(); (0, P.A)(Su, "devices", []), (0, P.A)(Su, "eventEmitter", new ct), (0, P.A)(Su, "Constants", { errors: Ir.s, recordingEvents: km, livestreamEvents: Tm, characterState: ms, characterMode: rs, hlsEvents: qp.V, transcriptionEvents: Am, translationEvents: Gp, modes: dn.nI, permission: Dn, reliabilityMode: V2.y, leaveReason: Uo.E, BitrateMode: cb.x }); function hb(U, A) { var x = {}; return U.message === "Permission denied" || U.message === "Permission dismissed" ? x = A === "video" ? Ir.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED : Ir.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED : U.message.includes("The request is not allowed by the user agent") ? x = A === "video" ? Ir.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE : Ir.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED : U.message === "Permission denied by system" ? x = A === "video" ? Ir.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS : Ir.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS : x = A === "video" ? Ir.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED : Ir.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED, x.message } function Eu(U, A) { var x = {}; return U.message === "Device in use" ? x = A === "video" ? Ir.q.ERROR_CAMERA_IN_USE : Ir.q.ERROR_MICROPHONE_IN_USE : x = A === "video" ? Ir.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED : Ir.q.ERROR_MICROPHONE_IN_USE, x.message } var q2 = Su
            }, 3128(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(754), l(4636), l(9506), l(7165)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.BlockCipher, P = d.algo; const b = 16, u = [608135816, 2242054355, 320440878, 57701188, 2752067618, 698298832, 137296536, 3964562569, 1160258022, 953160567, 3193202383, 887688300, 3232508343, 3380367581, 1065670069, 3041331479, 2450970073, 2306472731], g = [[3509652390, 2564797868, 805139163, 3491422135, 3101798381, 1780907670, 3128725573, 4046225305, 614570311, 3012652279, 134345442, 2240740374, 1667834072, 1901547113, 2757295779, 4103290238, 227898511, 1921955416, 1904987480, 2182433518, 2069144605, 3260701109, 2620446009, 720527379, 3318853667, 677414384, 3393288472, 3101374703, 2390351024, 1614419982, 1822297739, 2954791486, 3608508353, 3174124327, 2024746970, 1432378464, 3864339955, 2857741204, 1464375394, 1676153920, 1439316330, 715854006, 3033291828, 289532110, 2706671279, 2087905683, 3018724369, 1668267050, 732546397, 1947742710, 3462151702, 2609353502, 2950085171, 1814351708, 2050118529, 680887927, 999245976, 1800124847, 3300911131, 1713906067, 1641548236, 4213287313, 1216130144, 1575780402, 4018429277, 3917837745, 3693486850, 3949271944, 596196993, 3549867205, 258830323, 2213823033, 772490370, 2760122372, 1774776394, 2652871518, 566650946, 4142492826, 1728879713, 2882767088, 1783734482, 3629395816, 2517608232, 2874225571, 1861159788, 326777828, 3124490320, 2130389656, 2716951837, 967770486, 1724537150, 2185432712, 2364442137, 1164943284, 2105845187, 998989502, 3765401048, 2244026483, 1075463327, 1455516326, 1322494562, 910128902, 469688178, 1117454909, 936433444, 3490320968, 3675253459, 1240580251, 122909385, 2157517691, 634681816, 4142456567, 3825094682, 3061402683, 2540495037, 79693498, 3249098678, 1084186820, 1583128258, 426386531, 1761308591, 1047286709, 322548459, 995290223, 1845252383, 2603652396, 3431023940, 2942221577, 3202600964, 3727903485, 1712269319, 422464435, 3234572375, 1170764815, 3523960633, 3117677531, 1434042557, 442511882, 3600875718, 1076654713, 1738483198, 4213154764, 2393238008, 3677496056, 1014306527, 4251020053, 793779912, 2902807211, 842905082, 4246964064, 1395751752, 1040244610, 2656851899, 3396308128, 445077038, 3742853595, 3577915638, 679411651, 2892444358, 2354009459, 1767581616, 3150600392, 3791627101, 3102740896, 284835224, 4246832056, 1258075500, 768725851, 2589189241, 3069724005, 3532540348, 1274779536, 3789419226, 2764799539, 1660621633, 3471099624, 4011903706, 913787905, 3497959166, 737222580, 2514213453, 2928710040, 3937242737, 1804850592, 3499020752, 2949064160, 2386320175, 2390070455, 2415321851, 4061277028, 2290661394, 2416832540, 1336762016, 1754252060, 3520065937, 3014181293, 791618072, 3188594551, 3933548030, 2332172193, 3852520463, 3043980520, 413987798, 3465142937, 3030929376, 4245938359, 2093235073, 3534596313, 375366246, 2157278981, 2479649556, 555357303, 3870105701, 2008414854, 3344188149, 4221384143, 3956125452, 2067696032, 3594591187, 2921233993, 2428461, 544322398, 577241275, 1471733935, 610547355, 4027169054, 1432588573, 1507829418, 2025931657, 3646575487, 545086370, 48609733, 2200306550, 1653985193, 298326376, 1316178497, 3007786442, 2064951626, 458293330, 2589141269, 3591329599, 3164325604, 727753846, 2179363840, 146436021, 1461446943, 4069977195, 705550613, 3059967265, 3887724982, 4281599278, 3313849956, 1404054877, 2845806497, 146425753, 1854211946], [1266315497, 3048417604, 3681880366, 3289982499, 290971e4, 1235738493, 2632868024, 2414719590, 3970600049, 1771706367, 1449415276, 3266420449, 422970021, 1963543593, 2690192192, 3826793022, 1062508698, 1531092325, 1804592342, 2583117782, 2714934279, 4024971509, 1294809318, 4028980673, 1289560198, 2221992742, 1669523910, 35572830, 157838143, 1052438473, 1016535060, 1802137761, 1753167236, 1386275462, 3080475397, 2857371447, 1040679964, 2145300060, 2390574316, 1461121720, 2956646967, 4031777805, 4028374788, 33600511, 2920084762, 1018524850, 629373528, 3691585981, 3515945977, 2091462646, 2486323059, 586499841, 988145025, 935516892, 3367335476, 2599673255, 2839830854, 265290510, 3972581182, 2759138881, 3795373465, 1005194799, 847297441, 406762289, 1314163512, 1332590856, 1866599683, 4127851711, 750260880, 613907577, 1450815602, 3165620655, 3734664991, 3650291728, 3012275730, 3704569646, 1427272223, 778793252, 1343938022, 2676280711, 2052605720, 1946737175, 3164576444, 3914038668, 3967478842, 3682934266, 1661551462, 3294938066, 4011595847, 840292616, 3712170807, 616741398, 312560963, 711312465, 1351876610, 322626781, 1910503582, 271666773, 2175563734, 1594956187, 70604529, 3617834859, 1007753275, 1495573769, 4069517037, 2549218298, 2663038764, 504708206, 2263041392, 3941167025, 2249088522, 1514023603, 1998579484, 1312622330, 694541497, 2582060303, 2151582166, 1382467621, 776784248, 2618340202, 3323268794, 2497899128, 2784771155, 503983604, 4076293799, 907881277, 423175695, 432175456, 1378068232, 4145222326, 3954048622, 3938656102, 3820766613, 2793130115, 2977904593, 26017576, 3274890735, 3194772133, 1700274565, 1756076034, 4006520079, 3677328699, 720338349, 1533947780, 354530856, 688349552, 3973924725, 1637815568, 332179504, 3949051286, 53804574, 2852348879, 3044236432, 1282449977, 3583942155, 3416972820, 4006381244, 1617046695, 2628476075, 3002303598, 1686838959, 431878346, 2686675385, 1700445008, 1080580658, 1009431731, 832498133, 3223435511, 2605976345, 2271191193, 2516031870, 1648197032, 4164389018, 2548247927, 300782431, 375919233, 238389289, 3353747414, 2531188641, 2019080857, 1475708069, 455242339, 2609103871, 448939670, 3451063019, 1395535956, 2413381860, 1841049896, 1491858159, 885456874, 4264095073, 4001119347, 1565136089, 3898914787, 1108368660, 540939232, 1173283510, 2745871338, 3681308437, 4207628240, 3343053890, 4016749493, 1699691293, 1103962373, 3625875870, 2256883143, 3830138730, 1031889488, 3479347698, 1535977030, 4236805024, 3251091107, 2132092099, 1774941330, 1199868427, 1452454533, 157007616, 2904115357, 342012276, 595725824, 1480756522, 206960106, 497939518, 591360097, 863170706, 2375253569, 3596610801, 1814182875, 2094937945, 3421402208, 1082520231, 3463918190, 2785509508, 435703966, 3908032597, 1641649973, 2842273706, 3305899714, 1510255612, 2148256476, 2655287854, 3276092548, 4258621189, 236887753, 3681803219, 274041037, 1734335097, 3815195456, 3317970021, 1899903192, 1026095262, 4050517792, 356393447, 2410691914, 3873677099, 3682840055], [3913112168, 2491498743, 4132185628, 2489919796, 1091903735, 1979897079, 3170134830, 3567386728, 3557303409, 857797738, 1136121015, 1342202287, 507115054, 2535736646, 337727348, 3213592640, 1301675037, 2528481711, 1895095763, 1721773893, 3216771564, 62756741, 2142006736, 835421444, 2531993523, 1442658625, 3659876326, 2882144922, 676362277, 1392781812, 170690266, 3921047035, 1759253602, 3611846912, 1745797284, 664899054, 1329594018, 3901205900, 3045908486, 2062866102, 2865634940, 3543621612, 3464012697, 1080764994, 553557557, 3656615353, 3996768171, 991055499, 499776247, 1265440854, 648242737, 3940784050, 980351604, 3713745714, 1749149687, 3396870395, 4211799374, 3640570775, 1161844396, 3125318951, 1431517754, 545492359, 4268468663, 3499529547, 1437099964, 2702547544, 3433638243, 2581715763, 2787789398, 1060185593, 1593081372, 2418618748, 4260947970, 69676912, 2159744348, 86519011, 2512459080, 3838209314, 1220612927, 3339683548, 133810670, 1090789135, 1078426020, 1569222167, 845107691, 3583754449, 4072456591, 1091646820, 628848692, 1613405280, 3757631651, 526609435, 236106946, 48312990, 2942717905, 3402727701, 1797494240, 859738849, 992217954, 4005476642, 2243076622, 3870952857, 3732016268, 765654824, 3490871365, 2511836413, 1685915746, 3888969200, 1414112111, 2273134842, 3281911079, 4080962846, 172450625, 2569994100, 980381355, 4109958455, 2819808352, 2716589560, 2568741196, 3681446669, 3329971472, 1835478071, 660984891, 3704678404, 4045999559, 3422617507, 3040415634, 1762651403, 1719377915, 3470491036, 2693910283, 3642056355, 3138596744, 1364962596, 2073328063, 1983633131, 926494387, 3423689081, 2150032023, 4096667949, 1749200295, 3328846651, 309677260, 2016342300, 1779581495, 3079819751, 111262694, 1274766160, 443224088, 298511866, 1025883608, 3806446537, 1145181785, 168956806, 3641502830, 3584813610, 1689216846, 3666258015, 3200248200, 1692713982, 2646376535, 4042768518, 1618508792, 1610833997, 3523052358, 4130873264, 2001055236, 3610705100, 2202168115, 4028541809, 2961195399, 1006657119, 2006996926, 3186142756, 1430667929, 3210227297, 1314452623, 4074634658, 4101304120, 2273951170, 1399257539, 3367210612, 3027628629, 1190975929, 2062231137, 2333990788, 2221543033, 2438960610, 1181637006, 548689776, 2362791313, 3372408396, 3104550113, 3145860560, 296247880, 1970579870, 3078560182, 3769228297, 1714227617, 3291629107, 3898220290, 166772364, 1251581989, 493813264, 448347421, 195405023, 2709975567, 677966185, 3703036547, 1463355134, 2715995803, 1338867538, 1343315457, 2802222074, 2684532164, 233230375, 2599980071, 2000651841, 3277868038, 1638401717, 4028070440, 3237316320, 6314154, 819756386, 300326615, 590932579, 1405279636, 3267499572, 3150704214, 2428286686, 3959192993, 3461946742, 1862657033, 1266418056, 963775037, 2089974820, 2263052895, 1917689273, 448879540, 3550394620, 3981727096, 150775221, 3627908307, 1303187396, 508620638, 2975983352, 2726630617, 1817252668, 1876281319, 1457606340, 908771278, 3720792119, 3617206836, 2455994898, 1729034894, 1080033504], [976866871, 3556439503, 2881648439, 1522871579, 1555064734, 1336096578, 3548522304, 2579274686, 3574697629, 3205460757, 3593280638, 3338716283, 3079412587, 564236357, 2993598910, 1781952180, 1464380207, 3163844217, 3332601554, 1699332808, 1393555694, 1183702653, 3581086237, 1288719814, 691649499, 2847557200, 2895455976, 3193889540, 2717570544, 1781354906, 1676643554, 2592534050, 3230253752, 1126444790, 2770207658, 2633158820, 2210423226, 2615765581, 2414155088, 3127139286, 673620729, 2805611233, 1269405062, 4015350505, 3341807571, 4149409754, 1057255273, 2012875353, 2162469141, 2276492801, 2601117357, 993977747, 3918593370, 2654263191, 753973209, 36408145, 2530585658, 25011837, 3520020182, 2088578344, 530523599, 2918365339, 1524020338, 1518925132, 3760827505, 3759777254, 1202760957, 3985898139, 3906192525, 674977740, 4174734889, 2031300136, 2019492241, 3983892565, 4153806404, 3822280332, 352677332, 2297720250, 60907813, 90501309, 3286998549, 1016092578, 2535922412, 2839152426, 457141659, 509813237, 4120667899, 652014361, 1966332200, 2975202805, 55981186, 2327461051, 676427537, 3255491064, 2882294119, 3433927263, 1307055953, 942726286, 933058658, 2468411793, 3933900994, 4215176142, 1361170020, 2001714738, 2830558078, 3274259782, 1222529897, 1679025792, 2729314320, 3714953764, 1770335741, 151462246, 3013232138, 1682292957, 1483529935, 471910574, 1539241949, 458788160, 3436315007, 1807016891, 3718408830, 978976581, 1043663428, 3165965781, 1927990952, 4200891579, 2372276910, 3208408903, 3533431907, 1412390302, 2931980059, 4132332400, 1947078029, 3881505623, 4168226417, 2941484381, 1077988104, 1320477388, 886195818, 18198404, 3786409e3, 2509781533, 112762804, 3463356488, 1866414978, 891333506, 18488651, 661792760, 1628790961, 3885187036, 3141171499, 876946877, 2693282273, 1372485963, 791857591, 2686433993, 3759982718, 3167212022, 3472953795, 2716379847, 445679433, 3561995674, 3504004811, 3574258232, 54117162, 3331405415, 2381918588, 3769707343, 4154350007, 1140177722, 4074052095, 668550556, 3214352940, 367459370, 261225585, 2610173221, 4209349473, 3468074219, 3265815641, 314222801, 3066103646, 3808782860, 282218597, 3406013506, 3773591054, 379116347, 1285071038, 846784868, 2669647154, 3771962079, 3550491691, 2305946142, 453669953, 1268987020, 3317592352, 3279303384, 3744833421, 2610507566, 3859509063, 266596637, 3847019092, 517658769, 3462560207, 3443424879, 370717030, 4247526661, 2224018117, 4143653529, 4112773975, 2788324899, 2477274417, 1456262402, 2901442914, 1517677493, 1846949527, 2295493580, 3734397586, 2176403920, 1280348187, 1908823572, 3871786941, 846861322, 1172426758, 3287448474, 3383383037, 1655181056, 3139813346, 901632758, 1897031941, 2986607138, 3066810236, 3447102507, 1393639104, 373351379, 950779232, 625454576, 3124240540, 4148612726, 2007998917, 544563296, 2244738638, 2330496472, 2058025392, 1291430526, 424198748, 50039436, 29584100, 3605783033, 2429876329, 2791104160, 1057563949, 3255363231, 3075367218, 3463963227, 1469046755, 985887462]]; var S = { pbox: [], sbox: [] }; function R(W, I) { let E = I >> 24 & 255, _ = I >> 16 & 255, k = I >> 8 & 255, L = I & 255, H = W.sbox[0][E] + W.sbox[1][_]; return H = H ^ W.sbox[2][k], H = H + W.sbox[3][L], H } function y(W, I, E) { let _ = I, k = E, L; for (let H = 0; H < b; ++H)_ = _ ^ W.pbox[H], k = R(W, _) ^ k, L = _, _ = k, k = L; return L = _, _ = k, k = L, k = k ^ W.pbox[b], _ = _ ^ W.pbox[b + 1], { left: _, right: k } } function v(W, I, E) { let _ = I, k = E, L; for (let H = b + 1; H > 1; --H)_ = _ ^ W.pbox[H], k = R(W, _) ^ k, L = _, _ = k, k = L; return L = _, _ = k, k = L, k = k ^ W.pbox[1], _ = _ ^ W.pbox[0], { left: _, right: k } } function D(W, I, E) { for (let V = 0; V < 4; V++) { W.sbox[V] = []; for (let ee = 0; ee < 256; ee++)W.sbox[V][ee] = g[V][ee] } let _ = 0; for (let V = 0; V < b + 2; V++)W.pbox[V] = u[V] ^ I[_], _++, _ >= E && (_ = 0); let k = 0, L = 0, H = 0; for (let V = 0; V < b + 2; V += 2)H = y(W, k, L), k = H.left, L = H.right, W.pbox[V] = k, W.pbox[V + 1] = L; for (let V = 0; V < 4; V++)for (let ee = 0; ee < 256; ee += 2)H = y(W, k, L), k = H.left, L = H.right, W.sbox[V][ee] = k, W.sbox[V][ee + 1] = L; return !0 } var M = P.Blowfish = h.extend({ _doReset: function () { if (this._keyPriorReset !== this._key) { var W = this._keyPriorReset = this._key, I = W.words, E = W.sigBytes / 4; D(S, I, E) } }, encryptBlock: function (W, I) { var E = y(S, W[I], W[I + 1]); W[I] = E.left, W[I + 1] = E.right }, decryptBlock: function (W, I) { var E = v(S, W[I], W[I + 1]); W[I] = E.left, W[I + 1] = E.right }, blockSize: 64 / 32, keySize: 128 / 32, ivSize: 64 / 32 }); d.Blowfish = h._createHelper(M) }(), p.Blowfish }) }, 3145(a, c, l) { l.d(c, { A: () => p }); function p(d, f) { (f == null || f > d.length) && (f = d.length); for (var h = 0, P = Array(f); h < f; h++)P[h] = d[h]; return P } }, 3200(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.ProfileLevelId = c.Level = c.Profile = void 0, c.parseProfileLevelId = y, c.profileLevelIdToString = v, c.profileToString = D, c.levelToString = M, c.parseSdpProfileLevelId = W, c.isSameProfile = I, c.isSameProfileAndLevel = E, c.generateProfileLevelIdStringForAnswer = _, c.supportedLevel = k; const p = l(3582), d = new p.Logger; var f; (function (K) { K[K.ConstrainedBaseline = 1] = "ConstrainedBaseline", K[K.Baseline = 2] = "Baseline", K[K.Main = 3] = "Main", K[K.ConstrainedHigh = 4] = "ConstrainedHigh", K[K.High = 5] = "High", K[K.PredictiveHigh444 = 6] = "PredictiveHigh444" })(f || (c.Profile = f = {})); var h; (function (K) { K[K.L1_b = 0] = "L1_b", K[K.L1 = 10] = "L1", K[K.L1_1 = 11] = "L1_1", K[K.L1_2 = 12] = "L1_2", K[K.L1_3 = 13] = "L1_3", K[K.L2 = 20] = "L2", K[K.L2_1 = 21] = "L2_1", K[K.L2_2 = 22] = "L2_2", K[K.L3 = 30] = "L3", K[K.L3_1 = 31] = "L3_1", K[K.L3_2 = 32] = "L3_2", K[K.L4 = 40] = "L4", K[K.L4_1 = 41] = "L4_1", K[K.L4_2 = 42] = "L4_2", K[K.L5 = 50] = "L5", K[K.L5_1 = 51] = "L5_1", K[K.L5_2 = 52] = "L5_2" })(h || (c.Level = h = {})); class P { constructor(N, B) { ve(this, "profile"); ve(this, "level"); this.profile = N, this.level = B } } c.ProfileLevelId = P; const b = new P(f.ConstrainedBaseline, h.L3_1); class u { constructor(N) { ve(this, "mask"); ve(this, "masked_value"); this.mask = ~L("x", N), this.masked_value = L("1", N) } isMatch(N) { return this.masked_value === (N & this.mask) } } class g { constructor(N, B, Q) { ve(this, "profile_idc"); ve(this, "profile_iop"); ve(this, "profile"); this.profile_idc = N, this.profile_iop = B, this.profile = Q } } const S = [new g(66, new u("x1xx0000"), f.ConstrainedBaseline), new g(77, new u("1xxx0000"), f.ConstrainedBaseline), new g(88, new u("11xx0000"), f.ConstrainedBaseline), new g(66, new u("x0xx0000"), f.Baseline), new g(88, new u("10xx0000"), f.Baseline), new g(77, new u("0x0x0000"), f.Main), new g(100, new u("00000000"), f.High), new g(100, new u("00001100"), f.ConstrainedHigh), new g(244, new u("00000000"), f.PredictiveHigh444)], R = [{ max_macroblocks_per_second: 1485, max_macroblock_frame_size: 99, level: h.L1 }, { max_macroblocks_per_second: 1485, max_macroblock_frame_size: 99, level: h.L1_b }, { max_macroblocks_per_second: 3e3, max_macroblock_frame_size: 396, level: h.L1_1 }, { max_macroblocks_per_second: 6e3, max_macroblock_frame_size: 396, level: h.L1_2 }, { max_macroblocks_per_second: 11880, max_macroblock_frame_size: 396, level: h.L1_3 }, { max_macroblocks_per_second: 11880, max_macroblock_frame_size: 396, level: h.L2 }, { max_macroblocks_per_second: 19800, max_macroblock_frame_size: 792, level: h.L2_1 }, { max_macroblocks_per_second: 20250, max_macroblock_frame_size: 1620, level: h.L2_2 }, { max_macroblocks_per_second: 40500, max_macroblock_frame_size: 1620, level: h.L3 }, { max_macroblocks_per_second: 108e3, max_macroblock_frame_size: 3600, level: h.L3_1 }, { max_macroblocks_per_second: 216e3, max_macroblock_frame_size: 5120, level: h.L3_2 }, { max_macroblocks_per_second: 245760, max_macroblock_frame_size: 8192, level: h.L4 }, { max_macroblocks_per_second: 245760, max_macroblock_frame_size: 8192, level: h.L4_1 }, { max_macroblocks_per_second: 522240, max_macroblock_frame_size: 8704, level: h.L4_2 }, { max_macroblocks_per_second: 589824, max_macroblock_frame_size: 22080, level: h.L5 }, { max_macroblocks_per_second: 983040, max_macroblock_frame_size: 36864, level: h.L5_1 }, { max_macroblocks_per_second: 2073600, max_macroblock_frame_size: 36864, level: h.L5_2 }]; function y(K) { if (typeof K != "string" || K.length !== 6) return; const B = parseInt(K, 16); if (B === 0) return; const Q = B & 255, Z = B >> 8 & 255, le = B >> 16 & 255; let X; switch (Q) { case h.L1_1: { X = Z & 16 ? h.L1_b : h.L1_1; break } case h.L1: case h.L1_2: case h.L1_3: case h.L2: case h.L2_1: case h.L2_2: case h.L3: case h.L3_1: case h.L3_2: case h.L4: case h.L4_1: case h.L4_2: case h.L5: case h.L5_1: case h.L5_2: { X = Q; break } default: { d.warn(`parseProfileLevelId() | unrecognized level_idc [str:${K}, level_idc:${Q}]`); return } }for (const ce of S) if (le === ce.profile_idc && ce.profile_iop.isMatch(Z)) return d.debug(`parseProfileLevelId() | result [str:${K}, profile:${ce.profile}, level:${X}]`), new P(ce.profile, X); d.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${K}, profile_idc:${le}, profile_iop:${Z}]`) } function v(K) { if (K.level == h.L1_b) switch (K.profile) { case f.ConstrainedBaseline: return "42f00b"; case f.Baseline: return "42100b"; case f.Main: return "4d100b"; default: { d.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${K.profile}`); return } }let N; switch (K.profile) { case f.ConstrainedBaseline: { N = "42e0"; break } case f.Baseline: { N = "4200"; break } case f.Main: { N = "4d00"; break } case f.ConstrainedHigh: { N = "640c"; break } case f.High: { N = "6400"; break } case f.PredictiveHigh444: { N = "f400"; break } default: { d.warn(`profileLevelIdToString() | unrecognized profile ${K.profile}`); return } }let B = K.level.toString(16); return B.length === 1 && (B = `0${B}`), `${N}${B}` } function D(K) { switch (K) { case f.ConstrainedBaseline: return "ConstrainedBaseline"; case f.Baseline: return "Baseline"; case f.Main: return "Main"; case f.ConstrainedHigh: return "ConstrainedHigh"; case f.High: return "High"; case f.PredictiveHigh444: return "PredictiveHigh444"; default: { d.warn(`profileToString() | unrecognized profile ${K}`); return } } } function M(K) { switch (K) { case h.L1_b: return "1b"; case h.L1: return "1"; case h.L1_1: return "1.1"; case h.L1_2: return "1.2"; case h.L1_3: return "1.3"; case h.L2: return "2"; case h.L2_1: return "2.1"; case h.L2_2: return "2.2"; case h.L3: return "3"; case h.L3_1: return "3.1"; case h.L3_2: return "3.2"; case h.L4: return "4"; case h.L4_1: return "4.1"; case h.L4_2: return "4.2"; case h.L5: return "5"; case h.L5_1: return "5.1"; case h.L5_2: return "5.2"; default: { d.warn(`levelToString() | unrecognized level ${K}`); return } } } function W(K = {}) { const N = K["profile-level-id"]; return N ? y(N) : b } function I(K = {}, N = {}) { const B = W(K), Q = W(N); return !!(B && Q && B.profile === Q.profile) } function E(K = {}, N = {}) { const B = W(K), Q = W(N); return !!(B && Q && B.profile === Q.profile && B.level == Q.level) } function _(K = {}, N = {}) { if (!K["profile-level-id"] && !N["profile-level-id"]) { d.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params"); return } const B = W(K), Q = W(N); if (!B) throw new TypeError("invalid local_profile_level_id"); if (!Q) throw new TypeError("invalid remote_profile_level_id"); if (B.profile !== Q.profile) throw new TypeError("H264 Profile mismatch"); const Z = ee(K) && ee(N), le = B.level, X = Q.level, ce = V(le, X), he = Z ? le : ce; return d.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${B.profile}, level:${he}]`), v(new P(B.profile, he)) } function k(K, N) { for (let Q = R.length - 1; Q >= 0; --Q) { const Z = R[Q]; if (Z.max_macroblock_frame_size * 256 <= K && Z.max_macroblocks_per_second <= N * Z.max_macroblock_frame_size) return d.debug(`supportedLevel() | result [max_frame_pixel_count:${K}, max_fps:${N}, level:${Z.level}]`), Z.level } d.warn(`supportedLevel() | no level supported [max_frame_pixel_count:${K}, max_fps:${N}]`) } function L(K, N) { return +(N[0] === K) << 7 | +(N[1] === K) << 6 | +(N[2] === K) << 5 | +(N[3] === K) << 4 | +(N[4] === K) << 3 | +(N[5] === K) << 2 | +(N[6] === K) << 1 | +(N[7] === K) << 0 } function H(K, N) { return K === h.L1_b ? N !== h.L1 && N !== h.L1_b : N === h.L1_b ? K !== h.L1 : K < N } function V(K, N) { return H(K, N) ? K : N } function ee(K = {}) { const N = K["level-asymmetry-allowed"]; return N === !0 || N === 1 || N === "1" } }, 3240(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function (d) { var f = p, h = f.lib, P = h.Base, b = h.WordArray, u = f.x64 = {}; u.Word = P.extend({ init: function (g, S) { this.high = g, this.low = S } }), u.WordArray = P.extend({ init: function (g, S) { g = this.words = g || [], S != d ? this.sigBytes = S : this.sigBytes = g.length * 8 }, toX32: function () { for (var g = this.words, S = g.length, R = [], y = 0; y < S; y++) { var v = g[y]; R.push(v.high), R.push(v.low) } return b.create(R, this.sigBytes) }, clone: function () { for (var g = P.clone.call(this), S = g.words = this.words.slice(0), R = S.length, y = 0; y < R; y++)S[y] = S[y].clone(); return g } }) }(), p }) }, 3303(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.parse = p; const l = new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})"); function p(d) { const f = l.exec(d ?? ""); return f ? { spatialLayers: Number(f[1]), temporalLayers: Number(f[2]) } : { spatialLayers: 1, temporalLayers: 1 } } }, 3471(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.OfferMediaSection = c.AnswerMediaSection = c.MediaSection = void 0; const p = l(7363), d = l(1765); class f { constructor({ iceParameters: g, iceCandidates: S, dtlsParameters: R }) { ve(this, "_mediaObject"); if (this._mediaObject = { type: "", port: 0, protocol: "", payloads: "", rtp: [], fmtp: [] }, g && this.setIceParameters(g), S) { this._mediaObject.candidates = []; for (const y of S) { const v = { foundation: y.foundation, component: 1, ip: y.address ?? y.ip, port: y.port, priority: y.priority, transport: y.protocol, type: y.type }; y.tcpType && (v.tcptype = y.tcpType), this._mediaObject.candidates.push(v) } this._mediaObject.endOfCandidates = "end-of-candidates", this._mediaObject.iceOptions = "renomination" } R && this.setDtlsRole(R.role) } get mid() { return String(this._mediaObject.mid) } get closed() { return this._mediaObject.port === 0 } getObject() { return this._mediaObject } setIceParameters(g) { this._mediaObject.iceUfrag = g.usernameFragment, this._mediaObject.icePwd = g.password } pause() { this._mediaObject.direction = "inactive" } disable() { this.pause(), delete this._mediaObject.ext, delete this._mediaObject.ssrcs, delete this._mediaObject.ssrcGroups, delete this._mediaObject.simulcast, delete this._mediaObject.simulcast_03, delete this._mediaObject.rids, delete this._mediaObject.extmapAllowMixed } close() { this.disable(), this._mediaObject.port = 0 } } c.MediaSection = f; class h extends f { constructor({ iceParameters: g, iceCandidates: S, dtlsParameters: R, sctpParameters: y, plainRtpParameters: v, offerMediaObject: D, offerRtpParameters: M, answerRtpParameters: W, codecOptions: I }) { switch (super({ iceParameters: g, iceCandidates: S, dtlsParameters: R }), this._mediaObject.mid = String(D.mid), this._mediaObject.type = D.type, this._mediaObject.protocol = D.protocol, v ? (this._mediaObject.connection = { ip: v.ip, version: v.ipVersion }, this._mediaObject.port = v.port) : (this._mediaObject.connection = { ip: "127.0.0.1", version: 4 }, this._mediaObject.port = 7), D.type) { case "audio": case "video": { this._mediaObject.direction = "recvonly", this._mediaObject.rtp = [], this._mediaObject.rtcpFb = [], this._mediaObject.fmtp = []; for (const E of W.codecs) { const _ = { payload: E.payloadType, codec: b(E), rate: E.clockRate }; E.channels > 1 && (_.encoding = E.channels), this._mediaObject.rtp.push(_); const k = d.clone(E.parameters) ?? {}; let L = d.clone(E.rtcpFeedback) ?? []; if (I) { const { opusStereo: V, opusFec: ee, opusDtx: K, opusMaxPlaybackRate: N, opusMaxAverageBitrate: B, opusPtime: Q, opusNack: Z, videoGoogleStartBitrate: le, videoGoogleMaxBitrate: X, videoGoogleMinBitrate: ce } = I, he = M.codecs.find(ue => ue.payloadType === E.payloadType); switch (E.mimeType.toLowerCase()) { case "audio/opus": case "audio/multiopus": { V !== void 0 && (he.parameters["sprop-stereo"] = V ? 1 : 0, k.stereo = V ? 1 : 0), ee !== void 0 && (he.parameters.useinbandfec = ee ? 1 : 0, k.useinbandfec = ee ? 1 : 0), K !== void 0 && (he.parameters.usedtx = K ? 1 : 0, k.usedtx = K ? 1 : 0), N !== void 0 && (k.maxplaybackrate = N), B !== void 0 && (k.maxaveragebitrate = B), Q !== void 0 && (he.parameters.ptime = Q, k.ptime = Q), Z || (he.rtcpFeedback = he.rtcpFeedback.filter(ue => ue.type !== "nack" || ue.parameter), L = L.filter(ue => ue.type !== "nack" || ue.parameter)); break } case "video/vp8": case "video/vp9": case "video/h264": case "video/h265": case "video/av1": { le !== void 0 && (k["x-google-start-bitrate"] = le), X !== void 0 && (k["x-google-max-bitrate"] = X), ce !== void 0 && (k["x-google-min-bitrate"] = ce); break } } } const H = { payload: E.payloadType, config: "" }; for (const V of Object.keys(k)) H.config && (H.config += ";"), H.config += `${V}=${k[V]}`; H.config && this._mediaObject.fmtp.push(H); for (const V of L) this._mediaObject.rtcpFb.push({ payload: E.payloadType, type: V.type, subtype: V.parameter }) } this._mediaObject.payloads = W.codecs.map(E => E.payloadType).join(" "), this._mediaObject.ext = []; for (const E of W.headerExtensions) (D.ext ?? []).some(k => k.uri === E.uri) && this._mediaObject.ext.push({ uri: E.uri, value: E.id }); if (D.extmapAllowMixed === "extmap-allow-mixed" && (this._mediaObject.extmapAllowMixed = "extmap-allow-mixed"), D.simulcast) { this._mediaObject.simulcast = { dir1: "recv", list1: D.simulcast.list1 }, this._mediaObject.rids = []; for (const E of D.rids ?? []) E.direction === "send" && this._mediaObject.rids.push({ id: E.id, direction: "recv" }) } else if (D.simulcast_03) { this._mediaObject.simulcast_03 = { value: D.simulcast_03.value.replace(/send/g, "recv") }, this._mediaObject.rids = []; for (const E of D.rids ?? []) E.direction === "send" && this._mediaObject.rids.push({ id: E.id, direction: "recv" }) } this._mediaObject.rtcpMux = "rtcp-mux", this._mediaObject.rtcpRsize = "rtcp-rsize"; break } case "application": { typeof D.sctpPort == "number" ? (this._mediaObject.payloads = "webrtc-datachannel", this._mediaObject.sctpPort = y.port, this._mediaObject.maxMessageSize = y.maxMessageSize) : D.sctpmap && (this._mediaObject.payloads = String(y.port), this._mediaObject.sctpmap = { app: "webrtc-datachannel", sctpmapNumber: y.port, maxMessageSize: y.maxMessageSize }); break } } } setDtlsRole(g) { switch (g) { case "client": { this._mediaObject.setup = "active"; break } case "server": { this._mediaObject.setup = "passive"; break } case "auto": { this._mediaObject.setup = "actpass"; break } } } resume() { this._mediaObject.direction = "recvonly" } muxSimulcastStreams(g) { var v, D; if (!((v = this._mediaObject.simulcast) != null && v.list1)) return; const S = {}; for (const M of g) M.rid && (S[M.rid] = M); const R = this._mediaObject.simulcast.list1, y = p.parseSimulcastStreamList(R); for (const M of y) for (const W of M) W.paused = !((D = S[W.scid]) != null && D.active); this._mediaObject.simulcast.list1 = y.map(M => M.map(W => `${W.paused ? "~" : ""}${W.scid}`).join(",")).join(";") } } c.AnswerMediaSection = h; class P extends f { constructor({ iceParameters: g, iceCandidates: S, dtlsParameters: R, sctpParameters: y, plainRtpParameters: v, mid: D, kind: M, offerRtpParameters: W, streamId: I, trackId: E }) { var _; switch (super({ iceParameters: g, iceCandidates: S, dtlsParameters: R }), this._mediaObject.mid = String(D), this._mediaObject.type = M, v ? (this._mediaObject.connection = { ip: v.ip, version: v.ipVersion }, this._mediaObject.protocol = "RTP/AVP", this._mediaObject.port = v.port) : (this._mediaObject.connection = { ip: "127.0.0.1", version: 4 }, y ? this._mediaObject.protocol = "UDP/DTLS/SCTP" : this._mediaObject.protocol = "UDP/TLS/RTP/SAVPF", this._mediaObject.port = 7), this._mediaObject.extmapAllowMixed = "extmap-allow-mixed", M) { case "audio": case "video": { this._mediaObject.direction = "sendonly", this._mediaObject.rtp = [], this._mediaObject.rtcpFb = [], this._mediaObject.fmtp = [], this._mediaObject.msid = `${I ?? "-"} ${E}`; for (const V of W.codecs) { const ee = { payload: V.payloadType, codec: b(V), rate: V.clockRate }; V.channels > 1 && (ee.encoding = V.channels), this._mediaObject.rtp.push(ee); const K = { payload: V.payloadType, config: "" }; for (const N of Object.keys(V.parameters ?? {})) K.config && (K.config += ";"), K.config += `${N}=${V.parameters[N]}`; K.config && this._mediaObject.fmtp.push(K); for (const N of V.rtcpFeedback) this._mediaObject.rtcpFb.push({ payload: V.payloadType, type: N.type, subtype: N.parameter }) } this._mediaObject.payloads = W.codecs.map(V => V.payloadType).join(" "), this._mediaObject.ext = []; for (const V of W.headerExtensions) this._mediaObject.ext.push({ uri: V.uri, value: V.id }); this._mediaObject.rtcpMux = "rtcp-mux", this._mediaObject.rtcpRsize = "rtcp-rsize"; const k = W.encodings[0], L = k.ssrc, H = (_ = k.rtx) == null ? void 0 : _.ssrc; this._mediaObject.ssrcs = [], this._mediaObject.ssrcGroups = [], L && W.rtcp.cname && this._mediaObject.ssrcs.push({ id: L, attribute: "cname", value: W.rtcp.cname }), H && (W.rtcp.cname && this._mediaObject.ssrcs.push({ id: H, attribute: "cname", value: W.rtcp.cname }), L && this._mediaObject.ssrcGroups.push({ semantics: "FID", ssrcs: `${L} ${H}` })); break } case "application": { this._mediaObject.payloads = "webrtc-datachannel", this._mediaObject.sctpPort = y.port, this._mediaObject.maxMessageSize = y.maxMessageSize; break } } } setDtlsRole(g) { this._mediaObject.setup = "actpass" } resume() { this._mediaObject.direction = "sendonly" } } c.OfferMediaSection = P; function b(u) { const S = new RegExp("^(audio|video)/(.+)", "i").exec(u.mimeType); if (!S) throw new TypeError("invalid codec.mimeType"); return S[2] } }, 3518(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Consumer = void 0; const p = l(2994), d = l(3953), f = l(4893), h = new p.Logger("Consumer"); class P extends d.EnhancedEventEmitter { constructor({ id: g, localId: S, producerId: R, rtpReceiver: y, track: v, rtpParameters: D, appData: M }) { super(); ve(this, "_id"); ve(this, "_localId"); ve(this, "_producerId"); ve(this, "_closed", !1); ve(this, "_rtpReceiver"); ve(this, "_track"); ve(this, "_rtpParameters"); ve(this, "_paused"); ve(this, "_appData"); ve(this, "_observer", new d.EnhancedEventEmitter); h.debug("constructor()"), this._id = g, this._localId = S, this._producerId = R, this._rtpReceiver = y, this._track = v, this._rtpParameters = D, this._paused = !v.enabled, this._appData = M ?? {}, this.onTrackEnded = this.onTrackEnded.bind(this), this.handleTrack() } get id() { return this._id } get localId() { return this._localId } get producerId() { return this._producerId } get closed() { return this._closed } get kind() { return this._track.kind } get rtpReceiver() { return this._rtpReceiver } get track() { return this._track } get rtpParameters() { return this._rtpParameters } get paused() { return this._paused } get appData() { return this._appData } set appData(g) { this._appData = g } get observer() { return this._observer } close() { this._closed || (h.debug("close()"), this._closed = !0, this.destroyTrack(), this.emit("@close"), this._observer.safeEmit("close"), super.close(), this._observer.close()) } transportClosed() { this._closed || (h.debug("transportClosed()"), this._closed = !0, this.destroyTrack(), this.safeEmit("transportclose"), this._observer.safeEmit("close")) } async getStats() { if (this._closed) throw new f.InvalidStateError("closed"); return new Promise((g, S) => { this.safeEmit("@getstats", g, S) }) } pause() { if (h.debug("pause()"), this._closed) { h.error("pause() | Consumer closed"); return } if (this._paused) { h.debug("pause() | Consumer is already paused"); return } this._paused = !0, this._track.enabled = !1, this.emit("@pause"), this._observer.safeEmit("pause") } resume() { if (h.debug("resume()"), this._closed) { h.error("resume() | Consumer closed"); return } if (!this._paused) { h.debug("resume() | Consumer is already resumed"); return } this._paused = !1, this._track.enabled = !0, this.emit("@resume"), this._observer.safeEmit("resume") } onTrackEnded() { h.debug('track "ended" event'), this.safeEmit("trackended"), this._observer.safeEmit("trackended") } handleTrack() { this._track.addEventListener("ended", this.onTrackEnded) } destroyTrack() { try { this._track.removeEventListener("ended", this.onTrackEnded), this._track.stop() } catch { } } } c.Consumer = P }, 3582(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Logger = void 0; const p = l(7833), d = "h264-profile-level-id"; class f { constructor(P) { ve(this, "_debug"); ve(this, "_warn"); ve(this, "_error"); P ? (this._debug = (0, p.default)(`${d}:${P}`), this._warn = (0, p.default)(`${d}:WARN:${P}`), this._error = (0, p.default)(`${d}:ERROR:${P}`)) : (this._debug = (0, p.default)(d), this._warn = (0, p.default)(`${d}:WARN`), this._error = (0, p.default)(`${d}:ERROR`)), this._debug.log = console.info.bind(console), this._warn.log = console.warn.bind(console), this._error.log = console.error.bind(console) } get debug() { return this._debug } get warn() { return this._warn } get error() { return this._error } } c.Logger = f }, 3662(a, c, l) { l.d(c, { A: () => p }); function p(d, f) { return p = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (h, P) { return h.__proto__ = P, h }, p(d, f) } }, 3738(a) { function c(l) { "@babel/helpers - typeof"; return a.exports = c = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function (p) { return typeof p } : function (p) { return p && typeof Symbol == "function" && p.constructor === Symbol && p !== Symbol.prototype ? "symbol" : typeof p }, a.exports.__esModule = !0, a.exports.default = a.exports, c(l) } a.exports = c, a.exports.__esModule = !0, a.exports.default = a.exports }, 3785(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.clone = l; function l(p) { if (p !== void 0) return Number.isNaN(p) ? NaN : typeof structuredClone == "function" ? structuredClone(p) : JSON.parse(JSON.stringify(p)) } }, 3797(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.mode.OFB = function () { var d = p.lib.BlockCipherMode.extend(), f = d.Encryptor = d.extend({ processBlock: function (h, P) { var b = this._cipher, u = b.blockSize, g = this._iv, S = this._keystream; g && (S = this._keystream = g.slice(0), this._iv = void 0), b.encryptBlock(S, 0); for (var R = 0; R < u; R++)h[P + R] ^= S[R] } }); return d.Decryptor = f, d }(), p.mode.OFB }) }, 3804(a, c, l) {
                var p = l(5602), d = /%[sdv%]/g, f = function (u) { var g = 1, S = arguments, R = S.length; return u.replace(d, function (y) { if (g >= R) return y; var v = S[g]; switch (g += 1, y) { case "%%": return "%"; case "%s": return String(v); case "%d": return Number(v); case "%v": return "" } }) }, h = function (u, g, S) { var R = g.format instanceof Function ? g.format(g.push ? S : S[g.name]) : g.format, y = [u + "=" + R]; if (g.names) for (var v = 0; v < g.names.length; v += 1) { var D = g.names[v]; g.name ? y.push(S[g.name][D]) : y.push(S[g.names[v]]) } else y.push(S[g.name]); return f.apply(null, y) }, P = ["v", "o", "s", "i", "u", "e", "p", "c", "b", "t", "r", "z", "a"], b = ["i", "c", "b", "a"]; a.exports = function (u, g) {
                    g = g || {}, u.version == null && (u.version = 0), u.name == null && (u.name = " "), u.media.forEach(function (v) { v.payloads == null && (v.payloads = "") }); var S = g.outerOrder || P, R = g.innerOrder || b, y = []; return S.forEach(function (v) { p[v].forEach(function (D) { D.name in u && u[D.name] != null ? y.push(h(v, D, u)) : D.push in u && u[D.push] != null && u[D.push].forEach(function (M) { y.push(h(v, D, M)) }) }) }), u.media.forEach(function (v) { y.push(h("m", p.m[0], v)), R.forEach(function (D) { p[D].forEach(function (M) { M.name in v && v[M.name] != null ? y.push(h(D, M, v)) : M.push in v && v[M.push] != null && v[M.push].forEach(function (W) { y.push(h(D, M, W)) }) }) }) }), y.join(`\r
`) + `\r
`}
            }, 3953(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.EnhancedEventEmitter = void 0; const p = l(5528), d = l(2994), f = new d.Logger("EnhancedEventEmitter"); class h extends p.EventEmitter { constructor() { super(), this.setMaxListeners(1 / 0) } close() { super.removeAllListeners() } emit(b, ...u) { return super.emit(b, ...u) } safeEmit(b, ...u) { try { return super.emit(b, ...u) } catch (g) { f.error("safeEmit() | event listener threw an error [eventName:%s]:%o", b, g); try { super.emit("listenererror", b, g) } catch { } return !!super.listenerCount(b) } } on(b, u) { return super.on(b, u), this } off(b, u) { return super.off(b, u), this } addListener(b, u) { return super.on(b, u), this } prependListener(b, u) { return super.prependListener(b, u), this } once(b, u) { return super.once(b, u), this } prependOnceListener(b, u) { return super.prependOnceListener(b, u), this } removeListener(b, u) { return super.off(b, u), this } removeAllListeners(b) { return super.removeAllListeners(b), this } listenerCount(b) { return super.listenerCount(b) } listeners(b) { return super.listeners(b) } rawListeners(b) { return super.rawListeners(b) } } c.EnhancedEventEmitter = h }, 3954(a, c, l) { l.d(c, { A: () => p }); function p(d) { return p = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (f) { return f.__proto__ || Object.getPrototypeOf(f) }, p(d) } }, 4253(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.AwaitQueueRemovedTaskError = c.AwaitQueueStoppedError = void 0; class l extends Error { constructor(f) { super(f ?? "queue stopped"), this.name = "AwaitQueueStoppedError", typeof Error.captureStackTrace == "function" && Error.captureStackTrace(this, l) } } c.AwaitQueueStoppedError = l; class p extends Error { constructor(f) { super(f ?? "queue task removed"), this.name = "AwaitQueueRemovedTaskError", typeof Error.captureStackTrace == "function" && Error.captureStackTrace(this, p) } } c.AwaitQueueRemovedTaskError = p }, 4256(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.addNackSupportForOpus = l; function l(p) { var d; for (const f of p.codecs ?? []) (f.mimeType.toLowerCase() === "audio/opus" || f.mimeType.toLowerCase() === "audio/multiopus") && !((d = f.rtcpFeedback) != null && d.some(h => h.type === "nack" && !h.parameter)) && (f.rtcpFeedback || (f.rtcpFeedback = []), f.rtcpFeedback.push({ type: "nack" })) } }, 4373(a) { function c(l) { var p = Object(l), d = []; for (var f in p) d.unshift(f); return function h() { for (; d.length;)if ((f = d.pop()) in p) return h.value = f, h.done = !1, h; return h.done = !0, h } } a.exports = c, a.exports.__esModule = !0, a.exports.default = a.exports }, 4467(a, c, l) { l.d(c, { A: () => d }); var p = l(816); function d(f, h, P) { return (h = (0, p.A)(h)) in f ? Object.defineProperty(f, h, { value: P, enumerable: !0, configurable: !0, writable: !0 }) : f[h] = P, f } }, 4633(a, c, l) { var p = l(5172), d = l(6993), f = l(5869), h = l(887), P = l(1791), b = l(4373), u = l(579); function g() { var S = d(), R = S.m(g), y = (Object.getPrototypeOf ? Object.getPrototypeOf(R) : R.__proto__).constructor; function v(W) { var I = typeof W == "function" && W.constructor; return !!I && (I === y || (I.displayName || I.name) === "GeneratorFunction") } var D = { throw: 1, return: 2, break: 3, continue: 3 }; function M(W) { var I, E; return function (_) { I || (I = { stop: function () { return E(_.a, 2) }, catch: function () { return _.v }, abrupt: function (L, H) { return E(_.a, D[L], H) }, delegateYield: function (L, H, V) { return I.resultName = H, E(_.d, u(L), V) }, finish: function (L) { return E(_.f, L) } }, E = function (L, H, V) { _.p = I.prev, _.n = I.next; try { return L(H, V) } finally { I.next = _.n } }), I.resultName && (I[I.resultName] = _.v, I.resultName = void 0), I.sent = _.v, I.next = _.n; try { return W.call(this, I) } finally { _.p = I.prev, _.n = I.next } } } return (a.exports = g = function () { return { wrap: function (E, _, k, L) { return S.w(M(E), _, k, L && L.reverse()) }, isGeneratorFunction: v, mark: S.m, awrap: function (E, _) { return new p(E, _) }, AsyncIterator: P, async: function (E, _, k, L, H) { return (v(_) ? h : f)(M(E), _, k, L, H) }, keys: b, values: u } }, a.exports.__esModule = !0, a.exports.default = a.exports)() } a.exports = g, a.exports.__esModule = !0, a.exports.default = a.exports }, 4636(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function (d) { var f = p, h = f.lib, P = h.WordArray, b = h.Hasher, u = f.algo, g = []; (function () { for (var M = 0; M < 64; M++)g[M] = d.abs(d.sin(M + 1)) * 4294967296 | 0 })(); var S = u.MD5 = b.extend({ _doReset: function () { this._hash = new P.init([1732584193, 4023233417, 2562383102, 271733878]) }, _doProcessBlock: function (M, W) { for (var I = 0; I < 16; I++) { var E = W + I, _ = M[E]; M[E] = (_ << 8 | _ >>> 24) & 16711935 | (_ << 24 | _ >>> 8) & 4278255360 } var k = this._hash.words, L = M[W + 0], H = M[W + 1], V = M[W + 2], ee = M[W + 3], K = M[W + 4], N = M[W + 5], B = M[W + 6], Q = M[W + 7], Z = M[W + 8], le = M[W + 9], X = M[W + 10], ce = M[W + 11], he = M[W + 12], ue = M[W + 13], ye = M[W + 14], se = M[W + 15], _e = k[0], Se = k[1], we = k[2], De = k[3]; _e = R(_e, Se, we, De, L, 7, g[0]), De = R(De, _e, Se, we, H, 12, g[1]), we = R(we, De, _e, Se, V, 17, g[2]), Se = R(Se, we, De, _e, ee, 22, g[3]), _e = R(_e, Se, we, De, K, 7, g[4]), De = R(De, _e, Se, we, N, 12, g[5]), we = R(we, De, _e, Se, B, 17, g[6]), Se = R(Se, we, De, _e, Q, 22, g[7]), _e = R(_e, Se, we, De, Z, 7, g[8]), De = R(De, _e, Se, we, le, 12, g[9]), we = R(we, De, _e, Se, X, 17, g[10]), Se = R(Se, we, De, _e, ce, 22, g[11]), _e = R(_e, Se, we, De, he, 7, g[12]), De = R(De, _e, Se, we, ue, 12, g[13]), we = R(we, De, _e, Se, ye, 17, g[14]), Se = R(Se, we, De, _e, se, 22, g[15]), _e = y(_e, Se, we, De, H, 5, g[16]), De = y(De, _e, Se, we, B, 9, g[17]), we = y(we, De, _e, Se, ce, 14, g[18]), Se = y(Se, we, De, _e, L, 20, g[19]), _e = y(_e, Se, we, De, N, 5, g[20]), De = y(De, _e, Se, we, X, 9, g[21]), we = y(we, De, _e, Se, se, 14, g[22]), Se = y(Se, we, De, _e, K, 20, g[23]), _e = y(_e, Se, we, De, le, 5, g[24]), De = y(De, _e, Se, we, ye, 9, g[25]), we = y(we, De, _e, Se, ee, 14, g[26]), Se = y(Se, we, De, _e, Z, 20, g[27]), _e = y(_e, Se, we, De, ue, 5, g[28]), De = y(De, _e, Se, we, V, 9, g[29]), we = y(we, De, _e, Se, Q, 14, g[30]), Se = y(Se, we, De, _e, he, 20, g[31]), _e = v(_e, Se, we, De, N, 4, g[32]), De = v(De, _e, Se, we, Z, 11, g[33]), we = v(we, De, _e, Se, ce, 16, g[34]), Se = v(Se, we, De, _e, ye, 23, g[35]), _e = v(_e, Se, we, De, H, 4, g[36]), De = v(De, _e, Se, we, K, 11, g[37]), we = v(we, De, _e, Se, Q, 16, g[38]), Se = v(Se, we, De, _e, X, 23, g[39]), _e = v(_e, Se, we, De, ue, 4, g[40]), De = v(De, _e, Se, we, L, 11, g[41]), we = v(we, De, _e, Se, ee, 16, g[42]), Se = v(Se, we, De, _e, B, 23, g[43]), _e = v(_e, Se, we, De, le, 4, g[44]), De = v(De, _e, Se, we, he, 11, g[45]), we = v(we, De, _e, Se, se, 16, g[46]), Se = v(Se, we, De, _e, V, 23, g[47]), _e = D(_e, Se, we, De, L, 6, g[48]), De = D(De, _e, Se, we, Q, 10, g[49]), we = D(we, De, _e, Se, ye, 15, g[50]), Se = D(Se, we, De, _e, N, 21, g[51]), _e = D(_e, Se, we, De, he, 6, g[52]), De = D(De, _e, Se, we, ee, 10, g[53]), we = D(we, De, _e, Se, X, 15, g[54]), Se = D(Se, we, De, _e, H, 21, g[55]), _e = D(_e, Se, we, De, Z, 6, g[56]), De = D(De, _e, Se, we, se, 10, g[57]), we = D(we, De, _e, Se, B, 15, g[58]), Se = D(Se, we, De, _e, ue, 21, g[59]), _e = D(_e, Se, we, De, K, 6, g[60]), De = D(De, _e, Se, we, ce, 10, g[61]), we = D(we, De, _e, Se, V, 15, g[62]), Se = D(Se, we, De, _e, le, 21, g[63]), k[0] = k[0] + _e | 0, k[1] = k[1] + Se | 0, k[2] = k[2] + we | 0, k[3] = k[3] + De | 0 }, _doFinalize: function () { var M = this._data, W = M.words, I = this._nDataBytes * 8, E = M.sigBytes * 8; W[E >>> 5] |= 128 << 24 - E % 32; var _ = d.floor(I / 4294967296), k = I; W[(E + 64 >>> 9 << 4) + 15] = (_ << 8 | _ >>> 24) & 16711935 | (_ << 24 | _ >>> 8) & 4278255360, W[(E + 64 >>> 9 << 4) + 14] = (k << 8 | k >>> 24) & 16711935 | (k << 24 | k >>> 8) & 4278255360, M.sigBytes = (W.length + 1) * 4, this._process(); for (var L = this._hash, H = L.words, V = 0; V < 4; V++) { var ee = H[V]; H[V] = (ee << 8 | ee >>> 24) & 16711935 | (ee << 24 | ee >>> 8) & 4278255360 } return L }, clone: function () { var M = b.clone.call(this); return M._hash = this._hash.clone(), M } }); function R(M, W, I, E, _, k, L) { var H = M + (W & I | ~W & E) + _ + L; return (H << k | H >>> 32 - k) + W } function y(M, W, I, E, _, k, L) { var H = M + (W & E | I & ~E) + _ + L; return (H << k | H >>> 32 - k) + W } function v(M, W, I, E, _, k, L) { var H = M + (W ^ I ^ E) + _ + L; return (H << k | H >>> 32 - k) + W } function D(M, W, I, E, _, k, L) { var H = M + (I ^ (W | ~E)) + _ + L; return (H << k | H >>> 32 - k) + W } f.MD5 = b._createHelper(S), f.HmacMD5 = b._createHmacHelper(S) }(Math), p.MD5 }) }, 4725(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.WordArray, P = d.enc; P.Base64url = { stringify: function (u, g) { g === void 0 && (g = !0); var S = u.words, R = u.sigBytes, y = g ? this._safe_map : this._map; u.clamp(); for (var v = [], D = 0; D < R; D += 3)for (var M = S[D >>> 2] >>> 24 - D % 4 * 8 & 255, W = S[D + 1 >>> 2] >>> 24 - (D + 1) % 4 * 8 & 255, I = S[D + 2 >>> 2] >>> 24 - (D + 2) % 4 * 8 & 255, E = M << 16 | W << 8 | I, _ = 0; _ < 4 && D + _ * .75 < R; _++)v.push(y.charAt(E >>> 6 * (3 - _) & 63)); var k = y.charAt(64); if (k) for (; v.length % 4;)v.push(k); return v.join("") }, parse: function (u, g) { g === void 0 && (g = !0); var S = u.length, R = g ? this._safe_map : this._map, y = this._reverseMap; if (!y) { y = this._reverseMap = []; for (var v = 0; v < R.length; v++)y[R.charCodeAt(v)] = v } var D = R.charAt(64); if (D) { var M = u.indexOf(D); M !== -1 && (S = M) } return b(u, S, y) }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", _safe_map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_" }; function b(u, g, S) { for (var R = [], y = 0, v = 0; v < g; v++)if (v % 4) { var D = S[u.charCodeAt(v - 1)] << v % 4 * 2, M = S[u.charCodeAt(v)] >>> 6 - v % 4 * 2, W = D | M; R[y >>> 2] |= W << 24 - y % 4 * 8, y++ } return h.create(R, y) } }(), p.enc.Base64url }) }, 4756(a, c, l) { var p = l(4633)(); a.exports = p; try { regeneratorRuntime = p } catch { typeof globalThis == "object" ? globalThis.regeneratorRuntime = p : Function("r", "regeneratorRuntime = r")(p) } }, 4893(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.InvalidStateError = c.UnsupportedError = void 0; class l extends Error { constructor(f) { super(f), this.name = "UnsupportedError", Error.hasOwnProperty("captureStackTrace") ? Error.captureStackTrace(this, l) : this.stack = new Error(f).stack } } c.UnsupportedError = l; class p extends Error { constructor(f) { super(f), this.name = "InvalidStateError", Error.hasOwnProperty("captureStackTrace") ? Error.captureStackTrace(this, p) : this.stack = new Error(f).stack } } c.InvalidStateError = p }, 4905(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.pad.Iso10126 = { pad: function (d, f) { var h = f * 4, P = h - d.sigBytes % h; d.concat(p.lib.WordArray.random(P - 1)).concat(p.lib.WordArray.create([P << 24], 1)) }, unpad: function (d) { var f = d.words[d.sigBytes - 1 >>> 2] & 255; d.sigBytes -= f } }, p.pad.Iso10126 }) }, 4973(a, c, l) { l.d(c, { Zu: () => P, lp: () => h }); var p = l(467), d = l(4756), f = l.n(d); l(9027); var h = function () { var b = (0, p.A)(f().mark(function u(g) { return f().wrap(function (S) { for (; ;)switch (S.prev = S.next) { case 0: return navigator.mediaDevices === void 0 && (navigator.mediaDevices = {}), navigator.mediaDevices.getUserMedia === void 0 && (navigator.mediaDevices.getUserMedia = function (R) { var y = navigator.webkitGetUserMedia || navigator.mozGetUserMedia; return y ? new Promise(function (v, D) { y.call(navigator, R, v, D) }) : Promise.reject(new Error("getUserMedia is not implemented in this browser")) }), S.next = 1, navigator.mediaDevices.getUserMedia(g); case 1: return S.abrupt("return", S.sent); case 2: case "end": return S.stop() } }, u) })); return function (g) { return b.apply(this, arguments) } }(), P = function () { var b = (0, p.A)(f().mark(function u(g) { return f().wrap(function (S) { for (; ;)switch (S.prev = S.next) { case 0: return navigator.mediaDevices === void 0 && (navigator.mediaDevices = {}), navigator.mediaDevices.getDisplayMedia === void 0 && (navigator.mediaDevices.getDisplayMedia = function (R) { var y = navigator.webkitGetDisplayMedia || navigator.mozGetDisplayMedia; return y ? new Promise(function (v, D) { y.call(navigator, R, v, D) }) : Promise.reject(new Error("getDisplayMedia is not implemented in this browser")) }), S.next = 1, navigator.mediaDevices.getDisplayMedia(g); case 1: return S.abrupt("return", S.sent); case 2: case "end": return S.stop() } }, u) })); return function (g) { return b.apply(this, arguments) } }() }, 5020(a, c, l) { var p = function (u) { return String(Number(u)) === u ? Number(u) : u }, d = function (u, g, S, R) { if (R && !S) g[R] = p(u[1]); else for (var y = 0; y < S.length; y += 1)u[y + 1] != null && (g[S[y]] = p(u[y + 1])) }, f = function (u, g, S) { var R = u.name && u.names; u.push && !g[u.push] ? g[u.push] = [] : R && !g[u.name] && (g[u.name] = {}); var y = u.push ? {} : R ? g[u.name] : g; d(S.match(u.reg), y, u.names, u.name), u.push && g[u.push].push(y) }, h = l(5602), P = RegExp.prototype.test.bind(/^([a-z])=(.*)/); c.parse = function (u) { var g = {}, S = [], R = g; return u.split(/(\r\n|\r|\n)/).filter(P).forEach(function (y) { var v = y[0], D = y.slice(2); v === "m" && (S.push({ rtp: [], fmtp: [] }), R = S[S.length - 1]); for (var M = 0; M < (h[v] || []).length; M += 1) { var W = h[v][M]; if (W.reg.test(D)) return f(W, R, D) } }), g.media = S, g }; var b = function (u, g) { var S = g.split(/=(.+)/, 2); return S.length === 2 ? u[S[0]] = p(S[1]) : S.length === 1 && g.length > 1 && (u[S[0]] = void 0), u }; c.parseParams = function (u) { return u.split(/;\s?/).reduce(b, {}) }, c.parseFmtpConfig = c.parseParams, c.parsePayloads = function (u) { return u.toString().split(" ").map(Number) }, c.parseRemoteCandidates = function (u) { for (var g = [], S = u.split(" ").map(p), R = 0; R < S.length; R += 3)g.push({ component: S[R], ip: S[R + 1], port: S[R + 2] }); return g }, c.parseImageAttributes = function (u) { return u.split(" ").map(function (g) { return g.substring(1, g.length - 1).split(",").reduce(b, {}) }) }, c.parseSimulcastStreamList = function (u) { return u.split(";").map(function (g) { return g.split(",").map(function (S) { var R, y = !1; return S[0] !== "~" ? R = p(S) : (R = p(S.substring(1, S.length)), y = !0), { scid: R, paused: y } }) }) } }, 5071(a, c, l) { l.d(c, { V: () => p }); var p = { HLS_STARTING: "HLS_STARTING", HLS_STARTED: "HLS_STARTED", HLS_PLAYABLE: "HLS_PLAYABLE", HLS_STOPPING: "HLS_STOPPING", HLS_STOPPED: "HLS_STOPPED" } }, 5172(a) { function c(l, p) { this.v = l, this.k = p } a.exports = c, a.exports.__esModule = !0, a.exports.default = a.exports }, 5248(a, c, l) { l(1765) }, 5328(a, c, l) { var b, u, g, S, R, y, v, D, M, W, I, E, _, k, L, H; Object.defineProperty(c, "__esModule", { value: !0 }), c.FakeMediaStreamTrack = void 0; const p = l(2614), d = l(5935), f = l(878), h = l(3785), V = class V extends d.FakeEventTarget { constructor({ kind: N, id: B, label: Q, contentHint: Z, enabled: le, muted: X, readyState: ce, capabilities: he, constraints: ue, settings: ye, data: se }) { super(); Li(this, b, void 0); Li(this, u, void 0); Li(this, g, void 0); Li(this, S, void 0); Li(this, R, void 0); Li(this, y, void 0); Li(this, v, void 0); Li(this, D, void 0); Li(this, M, void 0); Li(this, W, void 0); Li(this, I, void 0); Li(this, E, null); Li(this, _, null); Li(this, k, null); Li(this, L, null); Li(this, H, null); Ln(this, b, B ?? (0, p.v4)()), Ln(this, u, N), Ln(this, g, Q ?? ""), Ln(this, v, Z ?? ""), Ln(this, R, le ?? !0), Ln(this, y, X ?? !1), Ln(this, S, ce ?? "live"), Ln(this, D, he ?? {}), Ln(this, M, ue ?? {}), Ln(this, W, ye ?? {}), Ln(this, I, se ?? {}) } get id() { return kr(this, b) } get kind() { return kr(this, u) } get label() { return kr(this, g) } get contentHint() { return kr(this, v) } set contentHint(N) { Ln(this, v, N) } get enabled() { return kr(this, R) } set enabled(N) { const B = kr(this, R) !== N; Ln(this, R, N), B && this.dispatchEvent(new f.FakeEvent("enabledchange")) } get muted() { return kr(this, y) } get readyState() { return kr(this, S) } get data() { return kr(this, I) } set data(N) { Ln(this, I, N) } get onmute() { return kr(this, E) } set onmute(N) { kr(this, E) && this.removeEventListener("mute", kr(this, E)), Ln(this, E, N), N && this.addEventListener("mute", N) } get onunmute() { return kr(this, _) } set onunmute(N) { kr(this, _) && this.removeEventListener("unmute", kr(this, _)), Ln(this, _, N), N && this.addEventListener("unmute", N) } get onended() { return kr(this, k) } set onended(N) { kr(this, k) && this.removeEventListener("ended", kr(this, k)), Ln(this, k, N), N && this.addEventListener("ended", N) } get onenabledchange() { return kr(this, L) } set onenabledchange(N) { kr(this, L) && this.removeEventListener("enabledchange", kr(this, L)), Ln(this, L, N), N && this.addEventListener("enabledchange", N) } get onstopped() { return kr(this, H) } set onstopped(N) { kr(this, H) && this.removeEventListener("stopped", kr(this, H)), Ln(this, H, N), N && this.addEventListener("stopped", N) } addEventListener(N, B, Q) { super.addEventListener(N, B, Q) } removeEventListener(N, B, Q) { super.removeEventListener(N, B, Q) } stop() { kr(this, S) !== "ended" && (Ln(this, S, "ended"), this.dispatchEvent(new f.FakeEvent("stopped"))) } clone({ id: N, data: B } = {}) { return new V({ id: N ?? (0, p.v4)(), kind: kr(this, u), label: kr(this, g), contentHint: kr(this, v), enabled: kr(this, R), muted: kr(this, y), readyState: kr(this, S), capabilities: (0, h.clone)(kr(this, D)), constraints: (0, h.clone)(kr(this, M)), settings: (0, h.clone)(kr(this, W)), data: B ?? (0, h.clone)(kr(this, I)) }) } getCapabilities() { return kr(this, D) } getConstraints() { return kr(this, M) } async applyConstraints(N = {}) { return Ln(this, M, N), Promise.resolve() } getSettings() { return kr(this, W) } remoteStop() { kr(this, S) !== "ended" && (Ln(this, S, "ended"), this.dispatchEvent(new f.FakeEvent("stopped")), this.dispatchEvent(new f.FakeEvent("ended"))) } remoteMute() { kr(this, y) || (Ln(this, y, !0), this.dispatchEvent(new f.FakeEvent("mute"))) } remoteUnmute() { kr(this, y) && (Ln(this, y, !1), this.dispatchEvent(new f.FakeEvent("unmute"))) } }; b = new WeakMap, u = new WeakMap, g = new WeakMap, S = new WeakMap, R = new WeakMap, y = new WeakMap, v = new WeakMap, D = new WeakMap, M = new WeakMap, W = new WeakMap, I = new WeakMap, E = new WeakMap, _ = new WeakMap, k = new WeakMap, L = new WeakMap, H = new WeakMap; let P = V; c.FakeMediaStreamTrack = P }, 5414(a) { (function (c, l) { a.exports = l() })(self, function () { return (() => { var c = { 43: function (f, h, P) { var b, u; (function (g, S) { b = function () { var R = function () { }, y = "undefined", v = typeof window !== y && typeof window.navigator !== y && /Trident\/|MSIE /.test(window.navigator.userAgent), D = ["trace", "debug", "info", "warn", "error"]; function M(K, N) { var B = K[N]; if (typeof B.bind == "function") return B.bind(K); try { return Function.prototype.bind.call(B, K) } catch { return function () { return Function.prototype.apply.apply(B, [K, arguments]) } } } function W() { console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace() } function I(K) { return K === "debug" && (K = "log"), typeof console !== y && (K === "trace" && v ? W : console[K] !== void 0 ? M(console, K) : console.log !== void 0 ? M(console, "log") : R) } function E(K, N) { for (var B = 0; B < D.length; B++) { var Q = D[B]; this[Q] = B < K ? R : this.methodFactory(Q, K, N) } this.log = this.debug } function _(K, N, B) { return function () { typeof console !== y && (E.call(this, N, B), this[K].apply(this, arguments)) } } function k(K, N, B) { return I(K) || _.apply(this, arguments) } function L(K, N, B) { var Q, Z = this, le = "loglevel"; function X() { var he; if (typeof window !== y && le) { try { he = window.localStorage[le] } catch { } if (typeof he === y) try { var ue = window.document.cookie, ye = ue.indexOf(encodeURIComponent(le) + "="); ye !== -1 && (he = /^([^;]+)/.exec(ue.slice(ye))[1]) } catch { } return Z.levels[he] === void 0 && (he = void 0), he } } typeof K == "string" ? le += ":" + K : typeof K == "symbol" && (le = void 0), Z.name = K, Z.levels = { TRACE: 0, DEBUG: 1, INFO: 2, WARN: 3, ERROR: 4, SILENT: 5 }, Z.methodFactory = B || k, Z.getLevel = function () { return Q }, Z.setLevel = function (he, ue) { if (typeof he == "string" && Z.levels[he.toUpperCase()] !== void 0 && (he = Z.levels[he.toUpperCase()]), !(typeof he == "number" && he >= 0 && he <= Z.levels.SILENT)) throw "log.setLevel() called with invalid level: " + he; if (Q = he, ue !== !1 && function (ye) { var se = (D[ye] || "silent").toUpperCase(); if (typeof window !== y && le) { try { return void (window.localStorage[le] = se) } catch { } try { window.document.cookie = encodeURIComponent(le) + "=" + se + ";" } catch { } } }(he), E.call(Z, he, K), typeof console === y && he < Z.levels.SILENT) return "No console available for logging" }, Z.setDefaultLevel = function (he) { X() || Z.setLevel(he, !1) }, Z.enableAll = function (he) { Z.setLevel(Z.levels.TRACE, he) }, Z.disableAll = function (he) { Z.setLevel(Z.levels.SILENT, he) }; var ce = X(); ce == null && (ce = N ?? "WARN"), Z.setLevel(ce, !1) } var H = new L, V = {}; H.getLogger = function (K) { if (typeof K != "symbol" && typeof K != "string" || K === "") throw new TypeError("You must supply a name when creating a logger."); var N = V[K]; return N || (N = V[K] = new L(K, H.getLevel(), H.methodFactory)), N }; var ee = typeof window !== y ? window.log : void 0; return H.noConflict = function () { return typeof window !== y && window.log === H && (window.log = ee), H }, H.getLoggers = function () { return V }, H.default = H, H }, (u = b.call(h, P, h, f)) === void 0 || (f.exports = u) })() } }, l = {}; function p(f) { var h = l[f]; if (h !== void 0) return h.exports; var P = l[f] = { exports: {} }; return c[f].call(P.exports, P, P.exports, p), P.exports } p.d = (f, h) => { for (var P in h) p.o(h, P) && !p.o(f, P) && Object.defineProperty(f, P, { enumerable: !0, get: h[P] }) }, p.o = (f, h) => Object.prototype.hasOwnProperty.call(f, h), p.r = f => { typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(f, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(f, "__esModule", { value: !0 }) }; var d = {}; return (() => { p.r(d), p.d(d, { VideoSDKMetrics: () => fn }); const f = "inbound", h = "outbound", P = { codec_id_in: "", codec_in: { mime_type: null, clock_rate: null, sdp_fmtp_line: null }, delta_jitter_ms_in: 0, delta_rtt_ms_out: null, percent_packets_lost_in: 0, delta_packets_in: 0, delta_packets_lost_in: 0, total_packets_in: 0, total_packets_lost_in: 0, total_KBytes_in: 0, delta_KBytes_in: 0, delta_kbs_in: 0, timestamp_in: null, ssrc: "", total_concealment_events: 0, delta_concealment_events: 0, total_inserted_samples_for_decelaration: 0, delta_inserted_samples_for_decelaration: 0, total_removed_samples_for_accelaration: 0, delta_removed_samples_for_accelaration: 0, direction: f }, b = { codec_id_out: "", codec_out: { mime_type: null, clock_rate: null, sdp_fmtp_line: null }, delta_jitter_ms_out: 0, delta_rtt_ms_out: null, percent_packets_lost_out: 0, delta_packets_out: 0, delta_packets_lost_out: 0, total_packets_out: 0, total_packets_lost_out: 0, total_KBytes_out: 0, delta_KBytes_out: 0, delta_kbs_out: 0, timestamp_out: null, ssrc: "", direction: h }, u = { codec_id_in: "", size_in: { width: null, height: null, framerate: null }, codec_in: { mime_type: null, clock_rate: null }, delta_jitter_ms_in: 0, percent_packets_lost_in: 0, delta_packets_in: 0, delta_packets_lost_in: 0, total_packets_in: 0, total_packets_lost_in: 0, total_KBytes_in: 0, delta_KBytes_in: 0, delta_kbs_in: 0, ssrc: "", direction: f }, g = { codec_id_out: "", size_out: { width: null, height: null, framerate: null }, codec_out: { mime_type: null, clock_rate: null }, delta_jitter_ms_out: 0, delta_rtt_ms_out: null, percent_packets_lost_out: 0, delta_packets_out: 0, delta_packets_lost_out: 0, total_packets_out: 0, total_packets_lost_out: 0, total_KBytes_out: 0, delta_KBytes_out: 0, delta_kbs_out: 0, limitation_out: { reason: null, durations: null, resolutionChanges: 0 }, timestamp_out: null, ssrc: "", direction: h }, S = "inbound-rtp", R = "bytesReceived", y = "bytesSent", v = "currentRoundTripTime", D = "roundTripTime", M = "fractionLost", W = "frameHeight", I = "frameWidth", E = "qualityLimitationReason", _ = "qualityLimitationDurations", k = "qualityLimitationResolutionChanges", L = "jitter", H = "packetsLost", V = "packetsReceived", ee = "packetsSent", K = "responsesReceived", N = "selected", B = "totalRoundTripTime", Q = "roundTripTimeMeasurements", Z = "framesDecoded", le = "framesEncoded", X = "totalDecodeTime", ce = "totalEncodeTime", he = "pliCount", ue = "nackCount", ye = "audio", se = "video", _e = { 0: "ETHERNET", 2: "CELLULAR_5G", 3: "WIFI", 5: "CELLULAR_4G", 10: "CELLULAR" }, Se = "audio", we = "video", De = "network", mt = "data"; var Lt = p(43); const Dt = () => `${new Date().toISOString()} | metrics`, ot = (St, Fe, ut) => `${St} | ${Fe} | ${ut}`; Lt.setDefaultLevel(Lt.levels.TRACE); const tr = (St, Fe, ut) => { ut ? Lt.debug(ot(Dt(), St, Fe), ut) : Lt.debug(ot(Dt(), St, Fe)) }, Br = (St, Fe) => { Lt.warn(ot(Dt(), St, Fe)) }, on = (St, Fe) => { Lt.error(ot(Dt(), St, Fe)) }, ir = "extractor   ", gr = (St, Fe, ut) => { if (!Fe) return null; const qe = {}; let it = Fe.audio[St]; it || (it = ut === f ? { ...P } : { ...b }), qe.audio = it; let ur = Fe.video[St]; return ur || (ur = ut === f ? { ...u } : { ...g }), qe.video = ur, qe }, Bt = (St, Fe, ut, qe) => { let it = !1; const ur = qe[Fe].total_rtt_ms_out, Ce = qe[Fe].total_rtt_measure_out, Xt = ut ? ut[Fe].total_rtt_ms_out : 0, cr = ut ? ut[Fe].total_rtt_measure_out : 0, pr = { rtt: null, totalRTT: ur, totalRTTMeasurements: Ce }; if (St.timestamp === qe[Fe].timestamp_out || !Object.prototype.hasOwnProperty.call(St, D) || Object.prototype.hasOwnProperty.call(St, Q) && (it = !0, Number(St.roundTripTimeMeasurements) === 0 || Number(St.roundTripTimeMeasurements) - cr === Ce)) return pr; const ct = 1e3 * Number(St.roundTripTime); let jr = ur + ct, $e = Ce + 1; return it && (jr = 1e3 * Number(St.totalRoundTripTime) - Xt, $e = Number(St.roundTripTimeMeasurements) - cr), { rtt: ct, totalRTT: jr, totalRTTMeasurements: $e } }, hn = (St, Fe, ut) => St.timestamp === ut[Fe].timestamp_out ? null : Object.prototype.hasOwnProperty.call(St, L) ? 1e3 * (Number(St.jitter) || 0) : null, Wr = (St, Fe, ut, qe) => { if (!Object.prototype.hasOwnProperty.call(St, ee) || !Object.prototype.hasOwnProperty.call(St, y)) return { packetsSent: ut[Fe].total_packets_out, packetsLost: ut[Fe].total_packets_lost_out, bytesSent: ut[Fe].total_KBytes_out }; const it = Number(St.packetsSent) || 0 - (qe ? qe[Fe].total_packets_out : 0), ur = it - ut[Fe].total_packets_out, Ce = Number(St.bytesSent) / 1024 - (qe ? qe[Fe].total_KBytes_out : 0), Xt = Ce - ut[Fe].total_KBytes_out, cr = St.timestamp || Date.now(), pr = qe ? qe.timestamp : null; let ct = ut.timestamp; !ct && pr && (ct = pr); const jr = ct ? cr - ct : 0; return { packetsSent: it, deltaPacketsSent: ur, KBytesSent: Ce, deltaKBytesSent: Xt, kbsSent: jr > 0 ? .008 * Xt * 1024 / jr * 1e3 : 0 } }, wn = (St, Fe, ut, qe) => { let it = ut[Fe].total_packets_lost_out, ur = 0, Ce = 0; return Object.prototype.hasOwnProperty.call(St, H) && (it = Number(St.packetsLost) || 0 - (qe ? qe[Fe].total_packets_lost_out : 0), ur = it - ut[Fe].total_packets_lost_out), Object.prototype.hasOwnProperty.call(St, M) && (Ce = Number(100 * St.fractionLost)), { packetsLost: it, deltaPacketsLost: ur, fractionLost: Ce } }, He = (St, Fe, ut, qe) => { if (!Object.prototype.hasOwnProperty.call(St, V) || !Object.prototype.hasOwnProperty.call(St, H) || !Object.prototype.hasOwnProperty.call(St, R)) return { percent_packets_lost: ut[Fe].percent_packets_lost_in, packetsReceived: ut[Fe].total_packets_in, packetsLost: ut[Fe].total_packets_lost_in, bytesReceived: ut[Fe].total_KBytes_in }; const it = (Number(St.packetsReceived) || 0) - (qe ? qe[Fe].total_packets_in : 0), ur = (Number(St.packetsLost) || 0) - (qe ? qe[Fe].total_packets_lost_in : 0), Ce = ur - ut[Fe].total_packets_lost_in, Xt = it - ut[Fe].total_packets_in, cr = it !== ut[Fe].total_packets_in ? 100 * Ce / (Ce + Xt) : 0, pr = Number(St.bytesReceived) / 1024 - (qe ? qe[Fe].total_KBytes_in : 0), ct = pr - ut[Fe].total_KBytes_in, jr = St.timestamp || Date.now(), $e = qe ? qe.timestamp : null; let It = ut.timestamp; !It && $e && (It = $e); const vt = It ? jr - It : 0; return { percentPacketsLost: cr, packetsReceived: it, deltaPacketsReceived: Xt, packetsLost: ur, deltaPacketsLost: Ce, KBytesReceived: pr, deltaKBytesReceived: ct, kbsReceived: vt > 0 ? .008 * ct * 1024 / vt * 1e3 : 0 } }, Ue = St => St.candidateType !== "relay" ? "" : St.relayProtocol || "", zt = St => Object.prototype.hasOwnProperty.call(St, W) && Object.prototype.hasOwnProperty.call(St, I) ? { width: St.frameWidth || null, height: St.frameHeight || null, framerate: St.framesPerSecond } : { width: null, height: null, framerate: null }; class hr { constructor(Fe, ut) { this._callbacks = { onStatsCollected: null }, this._id = `collector-${ut}`, this._moduleName = this._id, this._probeId = ut, this._config = Fe, this._state = "idle", this._statsReports = [] } registerCallback(Fe, ut, qe) { Fe in this._callbacks ? (this._callbacks[Fe] = { callback: ut, context: qe }, tr(this._moduleName, `registered callback '${Fe}'`)) : on(this._moduleName, `can't register callback for '${Fe}' - not found`) } unregisterCallback(Fe) { Fe in this._callbacks ? (this._callbacks[Fe] = null, delete this._callbacks[Fe], tr(this._moduleName, `unregistered callback '${Fe}'`)) : on(this._moduleName, `can't unregister callback for '${Fe}' - not found`) } analyze(Fe, ut) { const qe = (ur => { const Ce = { name: "", meetingId: "", peerId: "", timestamp: null, count: 0, audio: {}, video: {}, network: { infrastructure: 3 }, data: { delta_kbs_bandwidth_in: 0, delta_kbs_bandwidth_out: 0, delta_rtt_connectivity_ms: null, total_rtt_connectivity_ms: 0 } }; if (ur) { const Xt = { ...ur, audio: {}, video: {}, data: { ...ur.data }, network: { ...ur.network } }; return Object.keys(ur.audio).forEach(cr => { Xt.audio[cr] = { ...ur.audio[cr] } }), Object.keys(ur.video).forEach(cr => { Xt.video[cr] = { ...ur.video[cr] } }), Xt } return { ...Ce, audio: {}, video: {}, data: { ...Ce.data }, network: { ...Ce.network } } })(ut); qe.name = this._config.name, qe.meetingId = this._config.meetingId, qe.peerId = this._config.peerId, qe.count = ut ? ut.count + 1 : 1; let it = null; return Fe.forEach(ur => { !it && ur.timestamp && (it = ur.timestamp), ((Ce, Xt, cr, pr) => { if (!Ce) return []; switch (Ce.type) { case "candidate-pair": let ct = !1; if (Ce.nominated && Ce.state === "succeeded" && (ct = !0, tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce), N in Ce && !Ce.selected && (ct = !1)), ct) { Ce.localCandidateId, Ce.remoteCandidateId; const $e = ((vt, Nt, dt) => { const Or = (vt.bytesReceived || 0) / 1024 - (dt ? dt.data.total_KBytes_in : 0), vr = (vt.bytesSent || 0) / 1024 - (dt ? dt.data.total_KBytes_out : 0), or = vt.timestamp || Date.now(), br = Or - Nt.data.total_KBytes_in, Ar = vr - Nt.data.total_KBytes_out, vn = dt ? dt.timestamp : null; let Gt = Nt.timestamp; !Gt && vn && (Gt = vn); const Et = Gt ? or - Gt : 0; return { total_KBytes_received: Or, total_KBytes_sent: vr, delta_KBytes_received: br, delta_KBytes_sent: Ar, kbs_speed_received: Et > 0 ? .008 * br * 1024 / Et * 1e3 : 0, kbs_speed_sent: Et > 0 ? .008 * Ar * 1024 / Et * 1e3 : 0 } })(Ce, Xt, pr), It = ((vt => { vt.availableIncomingBitrate, vt.availableOutgoingBitrate })(Ce), ((vt, Nt, dt, Or) => { if (!Object.prototype.hasOwnProperty.call(vt, v)) return { rtt: null, totalRTT: Or.data.total_rtt_connectivity_ms, totalRTTMeasurements: Or.data.total_rtt_connectivity_measure }; const vr = 1e3 * Number(vt.currentRoundTripTime); let or = Or.data.total_rtt_connectivity_ms + vr, br = Or.data.total_rtt_connectivity_measure + 1; return Object.prototype.hasOwnProperty.call(vt, B) && (or = 1e3 * Number(vt.totalRoundTripTime) - (dt ? dt.data.total_rtt_connectivity_ms : 0)), Object.prototype.hasOwnProperty.call(vt, K) && (br = Number(vt.responsesReceived) - (dt ? dt.data.total_rtt_connectivity_measure : 0)), { rtt: vr, totalRTT: or, totalRTTMeasurements: br } })(Ce, 0, pr, Xt)); return [{ type: mt, value: { total_KBytes_in: $e.total_KBytes_received } }, { type: mt, value: { total_KBytes_out: $e.total_KBytes_sent } }, { type: mt, value: { delta_KBytes_in: $e.delta_KBytes_received } }, { type: mt, value: { delta_KBytes_out: $e.delta_KBytes_sent } }, { type: mt, value: { delta_kbs_in: $e.kbs_speed_received } }, { type: mt, value: { delta_kbs_out: $e.kbs_speed_sent } }, { type: mt, value: { delta_rtt_connectivity_ms: It.rtt } }] } break; case "local-candidate": if (Ce.id === Xt.network.local_candidate_id) return [{ type: De, value: { infrastructure: Ce.networkType } }, { type: De, value: { local_candidate_protocol: Ce.protocol || "" } }, { type: De, value: { local_candidate_relay_protocol: Ue(Ce) } }]; break; case S: { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const $e = Ce.ssrc, It = gr($e, Xt, f); It && (It.timestamp = Xt.timestamp); const vt = gr($e, pr, f); if (vt && (vt.timestamp = pr.timestamp), Ce.kind === ye) { const Nt = He(Ce, ye, It, vt), dt = hn(Ce, ye, It), Or = Ce.codecId || "", vr = ((or, br, Ar, vn) => { const Gt = Number(or.concealmentEvents) || 0, Et = Gt - (Ar.audio.total_concealment_events || 0), Xr = Number(or.insertedSamplesForDeceleration) || 0, mn = Xr - (Ar.audio.total_inserted_samples_for_decelaration || 0), Cr = Number(or.removedSamplesForAcceleration) || 0; return { totalConcealmentEvents: Gt, deltaConcealmentEvents: Et, totalInsertedSamplesForDecelaration: Xr, deltaInsertedSamplesForDecelaration: mn, totalRemovedSamplesForAccelaration: Cr, deltaRemovedSampleForAccelaration: Cr - (Ar.audio.total_removed_samples_for_accelaration || 0) } })(Ce, 0, It); return [{ ssrc: $e, type: Se, value: { codec_id_in: Or } }, { ssrc: $e, type: Se, value: { total_packets_in: Nt.packetsReceived } }, { ssrc: $e, type: Se, value: { delta_packets_in: Nt.deltaPacketsReceived } }, { ssrc: $e, type: Se, value: { total_packets_lost_in: Nt.packetsLost } }, { ssrc: $e, type: Se, value: { delta_packets_lost_in: Nt.deltaPacketsLost } }, { ssrc: $e, type: Se, value: { percent_packets_lost_in: Nt.percentPacketsLost } }, { ssrc: $e, type: Se, value: { total_KBytes_in: Nt.KBytesReceived } }, { ssrc: $e, type: Se, value: { delta_KBytes_in: Nt.deltaKBytesReceived } }, { ssrc: $e, type: Se, value: { delta_kbs_in: Nt.kbsReceived } }, { ssrc: $e, type: Se, value: { delta_jitter_ms_in: dt } }, { ssrc: $e, type: Se, value: { total_concealment_events: vr.totalConcealmentEvents } }, { ssrc: $e, type: Se, value: { delta_concealment_events: vr.deltaConcealmentEvents } }, { ssrc: $e, type: Se, value: { total_inserted_samples_for_decelaration: vr.totalInsertedSamplesForDecelaration } }, { ssrc: $e, type: Se, value: { delta_inserted_samples_for_decelaration: vr.deltaInsertedSamplesForDecelaration } }, { ssrc: $e, type: Se, value: { total_removed_samples_for_accelaration: vr.totalRemovedSamplesForAccelaration } }, { ssrc: $e, type: Se, value: { delta_removed_samples_for_accelaration: vr.deltaRemovedSampleForAccelaration } }, { ssrc: $e, type: Se, value: { track_in: Ce.trackId } }, { ssrc: $e, type: Se, value: { track_id_in: Ce.trackIdentifier } }, { ssrc: $e, type: Se, value: { media_source_id: Ce.mediaSourceId } }] } if (Ce.kind === se) { ((or, br) => { if (!Object.prototype.hasOwnProperty.call(or, Z) || !Object.prototype.hasOwnProperty.call(or, X)) return { delta_ms_decode_frame: br.video.delta_ms_decode_frame_in, frames_decoded: br.video.total_frames_decoded_in, total_decode_time: br.video.total_time_decoded_in }; or.framesDecoded, or.totalDecodeTime, br.video.total_time_decoded_in, br.video.total_frames_decoded_in })(Ce, It); const Nt = He(Ce, se, It, vt), dt = hn(Ce, se, It), Or = (Ce.decoderImplementation, Ce.codecId || null), vr = zt(Ce); return ((or, br, Ar) => { if (!Object.prototype.hasOwnProperty.call(or, he) || !Object.prototype.hasOwnProperty.call(or, ue)) return { pliCount: br.total_pli_sent_in, nackCount: br.total_nack_sent_in, deltaPliCount: 0, deltaNackCount: 0 }; or.pliCount, Ar && Ar.video.total_pli_sent_in, or.nackCount, Ar && Ar.video.total_nack_sent_in, br.video.total_pli_sent_in, br.video.total_nack_sent_in })(Ce, It, vt), [{ ssrc: $e, type: we, value: { codec_id_in: Or } }, { ssrc: $e, type: we, value: { total_packets_in: Nt.packetsReceived } }, { ssrc: $e, type: we, value: { delta_packets_in: Nt.deltaPacketsReceived } }, { ssrc: $e, type: we, value: { total_packets_lost_in: Nt.packetsLost } }, { ssrc: $e, type: we, value: { delta_packets_lost_in: Nt.deltaPacketsLost } }, { ssrc: $e, type: we, value: { percent_packets_lost_in: Nt.percentPacketsLost } }, { ssrc: $e, type: we, value: { total_KBytes_in: Nt.KBytesReceived } }, { ssrc: $e, type: we, value: { delta_KBytes_in: Nt.deltaKBytesReceived } }, { ssrc: $e, type: we, value: { delta_kbs_in: Nt.kbsReceived } }, { ssrc: $e, type: we, value: { delta_jitter_ms_in: dt } }, { ssrc: $e, type: we, value: { size_in: vr } }, { ssrc: $e, type: we, value: { track_in: Ce.trackId } }, { ssrc: $e, type: we, value: { track_id_in: Ce.trackIdentifier } }, { ssrc: $e, type: we, value: { media_source_id: Ce.mediaSourceId } }, { ssrc: $e, type: we, value: { pause_count: Ce.pauseCount } }, { ssrc: $e, type: we, value: { total_pauses_duration: Ce.totalPausesDuration } }, { ssrc: $e, type: we, value: { freeze_count: Ce.freezeCount } }, { ssrc: $e, type: we, value: { total_freezes_duration: Ce.totalFreezesDuration } }] } break } case "outbound-rtp": { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const $e = Ce.ssrc, It = gr($e, Xt, h); It && (It.timestamp = Xt.timestamp); const vt = gr($e, pr, h); if (vt && (vt.timestamp = pr.timestamp), Ce.kind === ye) { const Nt = Ce.codecId || null, dt = Wr(Ce, ye, It, vt); return [{ ssrc: $e, type: Se, value: { codec_id_out: Nt } }, { ssrc: $e, type: Se, value: { total_packets_out: dt.packetsSent } }, { ssrc: $e, type: Se, value: { delta_packets_out: dt.deltaPacketsSent } }, { ssrc: $e, type: Se, value: { total_KBytes_out: dt.KBytesSent } }, { type: Se, value: { delta_KBytes_out: dt.deltaKBytesSent } }, { ssrc: $e, type: Se, value: { delta_kbs_out: dt.kbsSent } }, { ssrc: $e, type: Se, value: { track_out: Ce.trackId } }, { ssrc: $e, type: Se, value: { track_id_out: Ce.trackIdentifier } }, { ssrc: $e, type: Se, value: { media_source_id: Ce.mediaSourceId } }] } if (Ce.kind === se) { Ce.encoderImplementation; const Nt = Ce.codecId || null, dt = (((or, br) => { if (!Object.prototype.hasOwnProperty.call(or, le) || !Object.prototype.hasOwnProperty.call(or, ce)) return { delta_ms_encode_frame: br.video.delta_ms_encode_frame_out, frames_encoded: br.video.total_frames_encoded_out, total_encode_time: br.video.total_time_encoded_out }; or.framesEncoded, or.totalEncodeTime, br.video.total_time_encoded_out, br.video.total_frames_encoded_out })(Ce, It), zt(Ce)), Or = (or => { const br = Object.prototype.hasOwnProperty.call(or, E) ? or.qualityLimitationReason : null, Ar = Object.prototype.hasOwnProperty.call(or, k) ? or.qualityLimitationResolutionChanges : null, vn = Object.prototype.hasOwnProperty.call(or, _) ? or.qualityLimitationDurations : null; return vn && Object.keys(vn).forEach(Gt => { vn[Gt] > 1e3 && (vn[Gt] = Number(vn[Gt] / 1e3)) }), { reason: br, durations: vn, resolutionChanges: Ar } })(Ce), vr = (((or, br, Ar) => { if (!Object.prototype.hasOwnProperty.call(or, he) || !Object.prototype.hasOwnProperty.call(or, ue)) return { pliCount: br.total_pli_received_out, nackCount: br.total_nack_received_out, deltaPliCount: 0, deltaNackCount: 0 }; or.pliCount, Ar && Ar.video.total_pli_received_out, or.nackCount, Ar && Ar.video.total_nack_received_out, br.video.total_pli_received_out, br.video.total_nack_received_out })(Ce, It, vt), Wr(Ce, se, It, vt)); return [{ ssrc: $e, type: we, value: { codec_id_out: Nt } }, { ssrc: $e, type: we, value: { total_packets_out: vr.packetsSent } }, { ssrc: $e, type: we, value: { delta_packets_out: vr.deltaPacketsSent } }, { ssrc: $e, type: we, value: { total_KBytes_out: vr.KBytesSent } }, { ssrc: $e, type: we, value: { delta_KBytes_out: vr.deltaKBytesSent } }, { ssrc: $e, type: we, value: { delta_kbs_out: vr.kbsSent } }, { ssrc: $e, type: we, value: { size_out: dt } }, { ssrc: $e, type: we, value: { limitation_out: Or } }, { ssrc: $e, type: we, value: { track_out: Ce.trackId } }, { ssrc: $e, type: we, value: { track_id_out: Ce.trackIdentifier } }, { ssrc: $e, type: we, value: { media_source_id: Ce.mediaSourceId } }] } break } case "media-source": { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const $e = []; return Object.keys(Xt.audio).forEach(It => { const vt = Xt.audio[It]; if (vt.media_source_id === Ce.id) { var Nt = Ce.trackIdentifier; $e.push({ ssrc: vt.ssrc, type: Se, value: { track_id_out: Nt } }) } }), Object.keys(Xt.video).forEach(It => { const vt = Xt.video[It]; if (vt.media_source_id === Ce.id) { var Nt = Ce.trackIdentifier; $e.push({ ssrc: vt.ssrc, type: we, value: { track_id_out: Nt } }) } }), $e } case "track": { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const $e = []; return Object.keys(Xt.audio).forEach(It => { const vt = Xt.audio[It]; if (vt.track_in === Ce.id || vt.track_out === Ce.id) { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); var Nt = Ce.trackIdentifier; Ce.id === vt.track_in ? $e.push({ ssrc: vt.ssrc, type: Se, value: { track_id_in: Nt } }) : $e.push({ ssrc: vt.ssrc, type: Se, value: { track_id_out: Nt } }) } }), Object.keys(Xt.video).forEach(It => { const vt = Xt.video[It]; if (vt.track_in === Ce.id || vt.track_out === Ce.id) { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); var Nt = Ce.trackIdentifier; Ce.id === vt.track_in ? $e.push({ ssrc: vt.ssrc, type: we, value: { track_id_in: Nt } }) : $e.push({ ssrc: vt.ssrc, type: we, value: { track_id_out: Nt } }) } }), $e } case "codec": const jr = []; return Object.keys(Xt.audio).forEach($e => { const It = Xt.audio[$e]; if (It.codec_id_in === Ce.id || It.codec_id_out === Ce.id) { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const vt = (Nt => ({ channels: Nt.channels || null, clock_rate: Nt.clockRate || null, mime_type: Nt.mimeType || null, sdp_fmtp_line: Nt.sdpFmtpLine || null }))(Ce); Ce.id === It.codec_id_in ? jr.push({ ssrc: It.ssrc, type: Se, value: { codec_in: vt } }) : jr.push({ ssrc: It.ssrc, type: Se, value: { codec_out: vt } }) } }), Object.keys(Xt.video).forEach($e => { const It = Xt.video[$e]; if (It.codec_id_in === Ce.id || It.codec_id_out === Ce.id) { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const vt = (Nt => ({ clock_rate: Nt.clockRate || null, mime_type: Nt.mimeType || null }))(Ce); Ce.id === It.codec_id_in ? jr.push({ ssrc: It.ssrc, type: we, value: { codec_in: vt } }) : jr.push({ ssrc: It.ssrc, type: we, value: { codec_out: vt } }) } }), jr; case "remote-inbound-rtp": { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const $e = Ce.ssrc, It = gr($e, Xt, h), vt = gr($e, pr, h); if (Ce.kind === ye) { const Nt = Bt(Ce, ye, vt, It), dt = hn(Ce, ye, It), Or = wn(Ce, ye, It, vt); return [{ ssrc: $e, type: Se, value: { delta_rtt_ms_out: Nt.rtt } }, { ssrc: $e, type: Se, value: { delta_jitter_ms_out: dt } }, { ssrc: $e, type: Se, value: { timestamp_out: Ce.timestamp } }, { ssrc: $e, type: Se, value: { total_packets_lost_out: Or.packetsLost } }, { ssrc: $e, type: Se, value: { delta_packets_lost_out: Or.deltaPacketsLost } }, { ssrc: $e, type: Se, value: { percent_packets_lost_out: Or.fractionLost } }] } if (Ce.kind === se) { const Nt = Bt(Ce, se, vt, It), dt = hn(Ce, se, It), Or = wn(Ce, se, It, vt); return [{ ssrc: $e, type: we, value: { delta_rtt_ms_out: Nt.rtt } }, { ssrc: $e, type: we, value: { delta_jitter_ms_out: dt } }, { ssrc: $e, type: we, value: { timestamp_out: Ce.timestamp } }, { ssrc: $e, type: we, value: { total_packets_lost_out: Or.packetsLost } }, { ssrc: $e, type: we, value: { delta_packets_lost_out: Or.deltaPacketsLost } }] } break } case "remote-outbound-rtp": { tr(ir, `analyze() - got stats ${Ce.type} for ${cr}`, Ce); const $e = Ce.ssrc, It = gr($e, Xt, h), vt = gr($e, pr, h); if (Ce.kind === ye) { const Nt = Bt(Ce, ye, vt, It); return [{ ssrc: $e, type: Se, value: { delta_rtt_ms_in: Nt.rtt } }, { ssrc: $e, type: Se, value: { timestamp_in: Ce.timestamp } }] } break } }return [] })(ur, qe, qe.name, null).forEach(Ce => { if (Ce.value && Ce.type) if (Ce.ssrc) { let pr = qe[Ce.type][Ce.ssrc]; pr || (Xt = Ce.type, cr = ur.type, pr = Xt === ye ? cr === S ? { ...P } : { ...b } : cr === S ? { ...u } : { ...g }, pr.ssrc = Ce.ssrc, qe[Ce.type][Ce.ssrc] = pr), Object.keys(Ce.value).forEach(ct => { Ce.value[ct] !== void 0 && (pr[ct] = Ce.value[ct]) }) } else Object.keys(Ce.value).forEach(pr => { Ce.value[pr] !== void 0 && (qe[Ce.type][pr] = Ce.value[pr]) }); var Xt, cr }) }), qe.timestamp = it, qe } async collectStats() { try { const Fe = await this._config.monitoringObject.getStats(), ut = this.analyze(Fe, this._statsReports.slice().pop() || null); return this._statsReports.push(ut), this.fireOnStatsCollected(ut), Fe } catch (Fe) { return on(this._moduleName, `got error ${Fe}`), null } } fireOnStatsCollected(Fe) { if (this._callbacks.onStatsCollected) { const ut = {}; ut.meetingId = Fe.meetingId, ut.peerId = Fe.peerId, ut.name = Fe.name, ut.audio = [], ut.video = [], Object.values(Fe.audio).forEach(qe => { const it = {}; if (it.network = _e[Fe.network.infrastructure], it.timestamp = Fe.timestamp, qe.direction == f) { it.codec = qe.codec_in.mime_type, it.jitter = qe.delta_jitter_ms_in, it.bitrate = qe.delta_kbs_in, it.packetsLost = qe.delta_packets_lost_in, it.rtt = Fe.data.delta_rtt_connectivity_ms || 0, it.totalPackets = qe.delta_packets_in, it.concealmentEvents = qe.delta_concealment_events, it.removedSampleForAccelaration = qe.delta_removed_samples_for_accelaration, it.insertedSamplesForDecelaration = qe.delta_inserted_samples_for_decelaration; const ur = JSON.stringify(qe.track_id_in).replace(/[{}"]/g, ""); it.trackId = ur } else qe.direction == h && (it.codec = qe.codec_out.mime_type, it.jitter = qe.delta_jitter_ms_out, it.bitrate = qe.delta_kbs_out, it.packetsLost = qe.delta_packets_lost_out, it.rtt = Fe.data.delta_rtt_connectivity_ms || 0, it.totalPackets = qe.delta_packets_out, it.trackId = qe.track_id_out); qe.direction && ut.audio.push(it) }), Object.values(Fe.video).forEach(qe => { const it = {}; if (it.network = _e[Fe.network.infrastructure], it.timestamp = Fe.timestamp, qe.direction == f) { it.codec = qe.codec_in.mime_type, it.jitter = qe.delta_jitter_ms_in, it.bitrate = qe.delta_kbs_in, it.packetsLost = qe.delta_packets_lost_in, it.rtt = Fe.data.delta_rtt_connectivity_ms || 0, it.totalPackets = qe.delta_packets_in, it.size = qe.size_in, it.pauseCount = qe.pause_count, it.totalPausesDuration = qe.total_pauses_duration, it.freezeCount = qe.freeze_count, it.totalFreezesDuration = qe.total_freezes_duration; const ur = JSON.stringify(qe.track_id_in).replace(/[{}"]/g, ""); it.trackId = ur } else qe.direction == h && (it.codec = qe.codec_out.mime_type, it.jitter = qe.delta_jitter_ms_out, it.bitrate = qe.delta_kbs_out, it.packetsLost = qe.delta_packets_lost_out, it.rtt = Fe.data.delta_rtt_connectivity_ms || 0, it.totalPackets = qe.delta_packets_out, it.limitation = qe.limitation_out, it.size = qe.size_out, it.trackId = qe.track_id_out); qe.direction && ut.video.push(it) }), this._callbacks.onStatsCollected.callback(ut) } } } class Dr { constructor(Fe) { this._id = Fe.name && Fe.name.substr(0, 12).padEnd(12, " "), this._moduleName = this._id, this._config = Fe, this._collector = new hr(this._config, this._id) } get id() { return this._id } start() { this._collectorIntervalId ? Br("Probe already started.") : (tr(this._moduleName, "Probe Started"), this._collectorIntervalId = setInterval(() => { tr(this._moduleName, "Collector collecting stats"), this._collector.collectStats() }, this._config.refreshEvery)) } stop() { this._collectorIntervalId ? (clearInterval(this._collectorIntervalId), tr(this._moduleName, "Probe Stopped")) : Br("Probe not running, Please start first.") } set onStatsCollected(Fe) { Fe ? this._collector.registerCallback("onStatsCollected", Fe) : this._collector.unregisterCallback("onStatsCollected") } } const Kr = { refreshEvery: 2e3, startAfter: 0, stopAfter: -1, verbose: !1, peerId: "peerId", meetingId: "meetingId", name: "name" }; class fn { constructor(Fe) { var ut; this._config = { defaultConfig: Kr, ...Fe }, this._probes = [], ut = this._config.verbose || !1, Lt.setLevel(ut ? Lt.levels.TRACE : Lt.levels.INFO), tr("VideoSDKMetrics", "VideoSDKMetrics initialized") } get probes() { return this._probes } addNewProbe(Fe, ut) { if (!Fe) throw new Error("undefined monitoring object"); const qe = { monitoringObject: Fe, ...ut, ...this._config }, it = new Dr(qe); return this._probes.push(it), it } removeExistingProbe(Fe) { if (!Fe) throw new Error("undefined probe"); Fe.stop(), this._probes = this._probes.filter(ut => Fe.id !== ut.id) } getProbe(Fe) { for (let ut of this.probes) if (ut.id == Fe) return ut } startAllProbes() { this._probes.forEach((Fe, ut) => { Fe.start() }) } stopAllProbes() { this._probes.forEach(Fe => Fe.stop()) } } })(), d })() }) }, 5458(a, c, l) {
                l.d(c, { A: () => b }); var p = l(3145); function d(u) { if (Array.isArray(u)) return (0, p.A)(u) } function f(u) { if (typeof Symbol < "u" && u[Symbol.iterator] != null || u["@@iterator"] != null) return Array.from(u) } var h = l(7800); function P() {
                    throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                } function b(u) { return d(u) || f(u) || (0, h.A)(u) || P() }
            }, 5471(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.WordArray, P = f.Hasher, b = d.algo, u = [], g = b.SHA1 = P.extend({ _doReset: function () { this._hash = new h.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]) }, _doProcessBlock: function (S, R) { for (var y = this._hash.words, v = y[0], D = y[1], M = y[2], W = y[3], I = y[4], E = 0; E < 80; E++) { if (E < 16) u[E] = S[R + E] | 0; else { var _ = u[E - 3] ^ u[E - 8] ^ u[E - 14] ^ u[E - 16]; u[E] = _ << 1 | _ >>> 31 } var k = (v << 5 | v >>> 27) + I + u[E]; E < 20 ? k += (D & M | ~D & W) + 1518500249 : E < 40 ? k += (D ^ M ^ W) + 1859775393 : E < 60 ? k += (D & M | D & W | M & W) - 1894007588 : k += (D ^ M ^ W) - 899497514, I = W, W = M, M = D << 30 | D >>> 2, D = v, v = k } y[0] = y[0] + v | 0, y[1] = y[1] + D | 0, y[2] = y[2] + M | 0, y[3] = y[3] + W | 0, y[4] = y[4] + I | 0 }, _doFinalize: function () { var S = this._data, R = S.words, y = this._nDataBytes * 8, v = S.sigBytes * 8; return R[v >>> 5] |= 128 << 24 - v % 32, R[(v + 64 >>> 9 << 4) + 14] = Math.floor(y / 4294967296), R[(v + 64 >>> 9 << 4) + 15] = y, S.sigBytes = R.length * 4, this._process(), this._hash }, clone: function () { var S = P.clone.call(this); return S._hash = this._hash.clone(), S } }); d.SHA1 = P._createHelper(g), d.HmacSHA1 = P._createHmacHelper(g) }(), p.SHA1 }) }, 5501(a, c, l) { l.d(c, { A: () => d }); var p = l(3662); function d(f, h) { if (typeof h != "function" && h !== null) throw new TypeError("Super expression must either be null or a function"); f.prototype = Object.create(h && h.prototype, { constructor: { value: f, writable: !0, configurable: !0 } }), Object.defineProperty(f, "prototype", { writable: !1 }), h && (0, p.A)(f, h) } }, 5503(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.WordArray, P = d.enc; P.Utf16 = P.Utf16BE = { stringify: function (u) { for (var g = u.words, S = u.sigBytes, R = [], y = 0; y < S; y += 2) { var v = g[y >>> 2] >>> 16 - y % 4 * 8 & 65535; R.push(String.fromCharCode(v)) } return R.join("") }, parse: function (u) { for (var g = u.length, S = [], R = 0; R < g; R++)S[R >>> 1] |= u.charCodeAt(R) << 16 - R % 2 * 16; return h.create(S, g * 2) } }, P.Utf16LE = { stringify: function (u) { for (var g = u.words, S = u.sigBytes, R = [], y = 0; y < S; y += 2) { var v = b(g[y >>> 2] >>> 16 - y % 4 * 8 & 65535); R.push(String.fromCharCode(v)) } return R.join("") }, parse: function (u) { for (var g = u.length, S = [], R = 0; R < g; R++)S[R >>> 1] |= b(u.charCodeAt(R) << 16 - R % 2 * 16); return h.create(S, g * 2) } }; function b(u) { return u << 8 & 4278255360 | u >>> 8 & 16711935 } }(), p.enc.Utf16 }) }, 5528(a) { var c = typeof Reflect == "object" ? Reflect : null, l = c && typeof c.apply == "function" ? c.apply : function (L, H, V) { return Function.prototype.apply.call(L, H, V) }, p; c && typeof c.ownKeys == "function" ? p = c.ownKeys : Object.getOwnPropertySymbols ? p = function (L) { return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L)) } : p = function (L) { return Object.getOwnPropertyNames(L) }; function d(k) { console && console.warn && console.warn(k) } var f = Number.isNaN || function (L) { return L !== L }; function h() { h.init.call(this) } a.exports = h, a.exports.once = I, h.EventEmitter = h, h.prototype._events = void 0, h.prototype._eventsCount = 0, h.prototype._maxListeners = void 0; var P = 10; function b(k) { if (typeof k != "function") throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof k) } Object.defineProperty(h, "defaultMaxListeners", { enumerable: !0, get: function () { return P }, set: function (k) { if (typeof k != "number" || k < 0 || f(k)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + k + "."); P = k } }), h.init = function () { (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0 }, h.prototype.setMaxListeners = function (L) { if (typeof L != "number" || L < 0 || f(L)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + L + "."); return this._maxListeners = L, this }; function u(k) { return k._maxListeners === void 0 ? h.defaultMaxListeners : k._maxListeners } h.prototype.getMaxListeners = function () { return u(this) }, h.prototype.emit = function (L) { for (var H = [], V = 1; V < arguments.length; V++)H.push(arguments[V]); var ee = L === "error", K = this._events; if (K !== void 0) ee = ee && K.error === void 0; else if (!ee) return !1; if (ee) { var N; if (H.length > 0 && (N = H[0]), N instanceof Error) throw N; var B = new Error("Unhandled error." + (N ? " (" + N.message + ")" : "")); throw B.context = N, B } var Q = K[L]; if (Q === void 0) return !1; if (typeof Q == "function") l(Q, this, H); else for (var Z = Q.length, le = D(Q, Z), V = 0; V < Z; ++V)l(le[V], this, H); return !0 }; function g(k, L, H, V) { var ee, K, N; if (b(H), K = k._events, K === void 0 ? (K = k._events = Object.create(null), k._eventsCount = 0) : (K.newListener !== void 0 && (k.emit("newListener", L, H.listener ? H.listener : H), K = k._events), N = K[L]), N === void 0) N = K[L] = H, ++k._eventsCount; else if (typeof N == "function" ? N = K[L] = V ? [H, N] : [N, H] : V ? N.unshift(H) : N.push(H), ee = u(k), ee > 0 && N.length > ee && !N.warned) { N.warned = !0; var B = new Error("Possible EventEmitter memory leak detected. " + N.length + " " + String(L) + " listeners added. Use emitter.setMaxListeners() to increase limit"); B.name = "MaxListenersExceededWarning", B.emitter = k, B.type = L, B.count = N.length, d(B) } return k } h.prototype.addListener = function (L, H) { return g(this, L, H, !1) }, h.prototype.on = h.prototype.addListener, h.prototype.prependListener = function (L, H) { return g(this, L, H, !0) }; function S() { if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments) } function R(k, L, H) { var V = { fired: !1, wrapFn: void 0, target: k, type: L, listener: H }, ee = S.bind(V); return ee.listener = H, V.wrapFn = ee, ee } h.prototype.once = function (L, H) { return b(H), this.on(L, R(this, L, H)), this }, h.prototype.prependOnceListener = function (L, H) { return b(H), this.prependListener(L, R(this, L, H)), this }, h.prototype.removeListener = function (L, H) { var V, ee, K, N, B; if (b(H), ee = this._events, ee === void 0) return this; if (V = ee[L], V === void 0) return this; if (V === H || V.listener === H) --this._eventsCount === 0 ? this._events = Object.create(null) : (delete ee[L], ee.removeListener && this.emit("removeListener", L, V.listener || H)); else if (typeof V != "function") { for (K = -1, N = V.length - 1; N >= 0; N--)if (V[N] === H || V[N].listener === H) { B = V[N].listener, K = N; break } if (K < 0) return this; K === 0 ? V.shift() : M(V, K), V.length === 1 && (ee[L] = V[0]), ee.removeListener !== void 0 && this.emit("removeListener", L, B || H) } return this }, h.prototype.off = h.prototype.removeListener, h.prototype.removeAllListeners = function (L) { var H, V, ee; if (V = this._events, V === void 0) return this; if (V.removeListener === void 0) return arguments.length === 0 ? (this._events = Object.create(null), this._eventsCount = 0) : V[L] !== void 0 && (--this._eventsCount === 0 ? this._events = Object.create(null) : delete V[L]), this; if (arguments.length === 0) { var K = Object.keys(V), N; for (ee = 0; ee < K.length; ++ee)N = K[ee], N !== "removeListener" && this.removeAllListeners(N); return this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0, this } if (H = V[L], typeof H == "function") this.removeListener(L, H); else if (H !== void 0) for (ee = H.length - 1; ee >= 0; ee--)this.removeListener(L, H[ee]); return this }; function y(k, L, H) { var V = k._events; if (V === void 0) return []; var ee = V[L]; return ee === void 0 ? [] : typeof ee == "function" ? H ? [ee.listener || ee] : [ee] : H ? W(ee) : D(ee, ee.length) } h.prototype.listeners = function (L) { return y(this, L, !0) }, h.prototype.rawListeners = function (L) { return y(this, L, !1) }, h.listenerCount = function (k, L) { return typeof k.listenerCount == "function" ? k.listenerCount(L) : v.call(k, L) }, h.prototype.listenerCount = v; function v(k) { var L = this._events; if (L !== void 0) { var H = L[k]; if (typeof H == "function") return 1; if (H !== void 0) return H.length } return 0 } h.prototype.eventNames = function () { return this._eventsCount > 0 ? p(this._events) : [] }; function D(k, L) { for (var H = new Array(L), V = 0; V < L; ++V)H[V] = k[V]; return H } function M(k, L) { for (; L + 1 < k.length; L++)k[L] = k[L + 1]; k.pop() } function W(k) { for (var L = new Array(k.length), H = 0; H < L.length; ++H)L[H] = k[H].listener || k[H]; return L } function I(k, L) { return new Promise(function (H, V) { function ee(N) { k.removeListener(L, K), V(N) } function K() { typeof k.removeListener == "function" && k.removeListener("error", ee), H([].slice.call(arguments)) } _(k, L, K, { once: !0 }), L !== "error" && E(k, ee, { once: !0 }) }) } function E(k, L, H) { typeof k.on == "function" && _(k, "error", L, H) } function _(k, L, H, V) { if (typeof k.on == "function") V.once ? k.once(L, H) : k.on(L, H); else if (typeof k.addEventListener == "function") k.addEventListener(L, function ee(K) { V.once && k.removeEventListener(L, ee), H(K) }); else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof k) } }, 5544(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.extractRtpCapabilities = d, c.extractDtlsParameters = f, c.getCname = h, c.applyCodecParameters = P; const p = l(7363); function d({ sdpObject: b }) { const u = new Map, g = new Map; for (const R of b.media) { const y = R.type; switch (y) { case "audio": case "video": break; default: continue }for (const v of R.rtp) { const D = { kind: y, mimeType: `${y}/${v.codec}`, preferredPayloadType: v.payload, clockRate: v.rate, channels: v.encoding, parameters: {}, rtcpFeedback: [] }; u.set(D.preferredPayloadType, D) } for (const v of R.fmtp ?? []) { const D = p.parseParams(v.config), M = u.get(v.payload); M && (D != null && D.hasOwnProperty("profile-level-id") && (D["profile-level-id"] = String(D["profile-level-id"])), M.parameters = D) } for (const v of R.rtcpFb ?? []) { const D = { type: v.type, parameter: v.subtype }; if (D.parameter || delete D.parameter, v.payload !== "*") { const M = u.get(Number(v.payload)); if (!M) continue; M.rtcpFeedback.push(D) } else for (const M of u.values()) M.kind === y && !/.+\/rtx$/i.test(M.mimeType) && M.rtcpFeedback.push(D) } for (const v of R.ext ?? []) { if (v["encrypt-uri"]) continue; const D = { kind: y, uri: v.uri, preferredId: v.value }; g.set(D.preferredId, D) } } return { codecs: Array.from(u.values()), headerExtensions: Array.from(g.values()) } } function f({ sdpObject: b }) { let u = b.setup, g = b.fingerprint; if (!u || !g) { const y = (b.media ?? []).find(v => v.port !== 0); y && (u ?? (u = y.setup), g ?? (g = y.fingerprint)) } if (u) { if (!g) throw new Error("no a=fingerprint found at SDP session or media level") } else throw new Error("no a=setup found at SDP session or media level"); let S; switch (u) { case "active": { S = "client"; break } case "passive": { S = "server"; break } case "actpass": { S = "auto"; break } }return { role: S, fingerprints: [{ algorithm: g.type, value: g.hash }] } } function h({ offerMediaObject: b }) { const u = (b.ssrcs ?? []).find(g => g.attribute === "cname"); return u ? u.value : "" } function P({ offerRtpParameters: b, answerMediaObject: u }) { var g; for (const S of b.codecs) { const R = S.mimeType.toLowerCase(); if (R !== "audio/opus" || !(u.rtp ?? []).find(M => M.payload === S.payloadType)) continue; u.fmtp = u.fmtp ?? []; let v = u.fmtp.find(M => M.payload === S.payloadType); v || (v = { payload: S.payloadType, config: "" }, u.fmtp.push(v)); const D = p.parseParams(v.config); switch (R) { case "audio/opus": { const M = (g = S.parameters) == null ? void 0 : g["sprop-stereo"]; M !== void 0 && (D.stereo = Number(M) ? 1 : 0); break } }v.config = ""; for (const M of Object.keys(D)) v.config && (v.config += ";"), v.config += `${M}=${D[M]}` } } }, 5546(a) { function c(l, p, d, f) { var h = Object.defineProperty; try { h({}, "", {}) } catch { h = 0 } a.exports = c = function (b, u, g, S) { function R(y, v) { c(b, y, function (D) { return this._invoke(y, v, D) }) } u ? h ? h(b, u, { value: g, enumerable: !S, configurable: !S, writable: !S }) : b[u] = g : (R("next", 0), R("throw", 1), R("return", 2)) }, a.exports.__esModule = !0, a.exports.default = a.exports, c(l, p, d, f) } a.exports = c, a.exports.__esModule = !0, a.exports.default = a.exports }, 5601(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Transport = void 0; const p = l(8876), d = l(2994), f = l(3953), h = l(4893), P = l(1765), b = l(8046), u = l(9792), g = l(3518), S = l(7504), R = l(9166), y = new d.Logger("Transport"); class v { constructor(W) { ve(this, "consumerOptions"); ve(this, "promise"); ve(this, "resolve"); ve(this, "reject"); this.consumerOptions = W, this.promise = new Promise((I, E) => { this.resolve = I, this.reject = E }) } } class D extends f.EnhancedEventEmitter { constructor({ direction: I, id: E, iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H, iceServers: V, iceTransportPolicy: ee, additionalSettings: K, appData: N, handlerFactory: B, getSendExtendedRtpCapabilities: Q, recvRtpCapabilities: Z, canProduceByKind: le }) { super(); ve(this, "_id"); ve(this, "_closed", !1); ve(this, "_direction"); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_recvRtpCapabilities"); ve(this, "_canProduceByKind"); ve(this, "_maxSctpMessageSize"); ve(this, "_handler"); ve(this, "_iceGatheringState", "new"); ve(this, "_connectionState", "new"); ve(this, "_appData"); ve(this, "_producers", new Map); ve(this, "_consumers", new Map); ve(this, "_dataProducers", new Map); ve(this, "_dataConsumers", new Map); ve(this, "_probatorConsumerCreated", !1); ve(this, "_awaitQueue", new p.AwaitQueue); ve(this, "_pendingConsumerTasks", []); ve(this, "_consumerCreationInProgress", !1); ve(this, "_pendingPauseConsumers", new Map); ve(this, "_consumerPauseInProgress", !1); ve(this, "_pendingResumeConsumers", new Map); ve(this, "_consumerResumeInProgress", !1); ve(this, "_pendingCloseConsumers", new Map); ve(this, "_consumerCloseInProgress", !1); ve(this, "_observer", new f.EnhancedEventEmitter); y.debug("constructor() [id:%s, direction:%s]", E, I), this._id = E, this._direction = I, this._getSendExtendedRtpCapabilities = Q, this._recvRtpCapabilities = Z, this._canProduceByKind = le, this._maxSctpMessageSize = H ? H.maxMessageSize : null; const X = P.clone(K) ?? {}; delete X.iceServers, delete X.iceTransportPolicy, delete X.bundlePolicy, delete X.rtcpMuxPolicy, this._handler = B.factory({ direction: I, iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H, iceServers: V, iceTransportPolicy: ee, additionalSettings: X, getSendExtendedRtpCapabilities: this._getSendExtendedRtpCapabilities }), this._appData = N ?? {}, this.handleHandler() } get id() { return this._id } get closed() { return this._closed } get direction() { return this._direction } get handler() { return this._handler } get iceGatheringState() { return this._iceGatheringState } get connectionState() { return this._connectionState } get appData() { return this._appData } set appData(I) { this._appData = I } get observer() { return this._observer } close() { if (!this._closed) { y.debug("close()"), this._closed = !0, this._awaitQueue.stop(), this._handler.close(), this._connectionState = "closed"; for (const I of this._producers.values()) I.transportClosed(); this._producers.clear(); for (const I of this._consumers.values()) I.transportClosed(); this._consumers.clear(); for (const I of this._dataProducers.values()) I.transportClosed(); this._dataProducers.clear(); for (const I of this._dataConsumers.values()) I.transportClosed(); this._dataConsumers.clear(), this._observer.safeEmit("close"), super.close(), this._observer.close() } } async getStats() { if (this._closed) throw new h.InvalidStateError("closed"); return this._handler.getTransportStats() } async restartIce({ iceParameters: I }) { if (y.debug("restartIce()"), this._closed) throw new h.InvalidStateError("closed"); if (!I) throw new TypeError("missing iceParameters"); return this._awaitQueue.push(async () => await this._handler.restartIce(I), "transport.restartIce()") } async updateIceServers({ iceServers: I } = {}) { if (y.debug("updateIceServers()"), this._closed) throw new h.InvalidStateError("closed"); if (!Array.isArray(I)) throw new TypeError("missing iceServers"); return this._awaitQueue.push(async () => this._handler.updateIceServers(I), "transport.updateIceServers()") } async produce({ track: I, encodings: E, codecOptions: _, codec: k, stopTracks: L = !0, disableTrackOnPause: H = !0, zeroRtpOnPause: V = !1, onRtpSender: ee, appData: K = {} } = {}) { if (y.debug("produce() [track:%o]", I), this._closed) throw new h.InvalidStateError("closed"); if (I) { if (this._direction !== "send") throw new h.UnsupportedError("not a sending Transport"); if (this._canProduceByKind[I.kind]) { if (I.readyState === "ended") throw new h.InvalidStateError("track ended"); if (this.listenerCount("connect") === 0 && this._connectionState === "new") throw new TypeError('no "connect" listener set into this transport'); if (this.listenerCount("produce") === 0) throw new TypeError('no "produce" listener set into this transport'); if (K && typeof K != "object") throw new TypeError("if given, appData must be an object") } else throw new h.UnsupportedError(`cannot produce ${I.kind}`) } else throw new TypeError("missing track"); return this._awaitQueue.push(async () => { let N; if (E && !Array.isArray(E)) throw TypeError("encodings must be an array"); E && E.length === 0 ? N = void 0 : E && (N = E.map(le => { const X = { active: !0 }; return le.active === !1 && (X.active = !1), typeof le.dtx == "boolean" && (X.dtx = le.dtx), typeof le.scalabilityMode == "string" && (X.scalabilityMode = le.scalabilityMode), typeof le.scaleResolutionDownBy == "number" && (X.scaleResolutionDownBy = le.scaleResolutionDownBy), typeof le.maxBitrate == "number" && (X.maxBitrate = le.maxBitrate), typeof le.maxFramerate == "number" && (X.maxFramerate = le.maxFramerate), typeof le.adaptivePtime == "boolean" && (X.adaptivePtime = le.adaptivePtime), typeof le.priority == "string" && (X.priority = le.priority), typeof le.networkPriority == "string" && (X.networkPriority = le.networkPriority), X })); const { localId: B, rtpParameters: Q, rtpSender: Z } = await this._handler.send({ track: I, encodings: N, codecOptions: _, codec: k, onRtpSender: ee }); try { b.validateAndNormalizeRtpParameters(Q); const { id: le } = await new Promise((ce, he) => { this.safeEmit("produce", { kind: I.kind, rtpParameters: Q, appData: K }, ce, he) }), X = new u.Producer({ id: le, localId: B, rtpSender: Z, track: I, rtpParameters: Q, stopTracks: L, disableTrackOnPause: H, zeroRtpOnPause: V, appData: K }); return this._producers.set(X.id, X), this.handleProducer(X), this._observer.safeEmit("newproducer", X), X } catch (le) { throw this._handler.stopSending(B).catch(() => { }), le } }, "transport.produce()").catch(N => { if (L) try { I.stop() } catch { } throw N }) } async consume({ id: I, producerId: E, kind: _, rtpParameters: k, streamId: L, onRtpReceiver: H, appData: V = {} }) { if (y.debug("consume()"), this._closed) throw new h.InvalidStateError("closed"); if (this._direction !== "recv") throw new h.UnsupportedError("not a receiving Transport"); if (typeof I != "string") throw new TypeError("missing id"); if (typeof E != "string") throw new TypeError("missing producerId"); if (_ !== "audio" && _ !== "video") throw new TypeError(`invalid kind '${_}'`); if (this.listenerCount("connect") === 0 && this._connectionState === "new") throw new TypeError('no "connect" listener set into this transport'); if (V && typeof V != "object") throw new TypeError("if given, appData must be an object"); const ee = P.clone(k); if (!b.canReceive(ee, this._recvRtpCapabilities)) throw new h.UnsupportedError("cannot consume this Producer"); const N = new v({ id: I, producerId: E, kind: _, rtpParameters: ee, streamId: L, onRtpReceiver: H, appData: V }); return this._pendingConsumerTasks.push(N), queueMicrotask(() => { this._closed || this._consumerCreationInProgress === !1 && this.createPendingConsumers() }), N.promise } async produceData({ ordered: I = !0, maxPacketLifeTime: E, maxRetransmits: _, label: k = "", protocol: L = "", appData: H = {} } = {}) { if (y.debug("produceData()"), this._closed) throw new h.InvalidStateError("closed"); if (this._direction !== "send") throw new h.UnsupportedError("not a sending Transport"); if (this._maxSctpMessageSize) { if (this.listenerCount("connect") === 0 && this._connectionState === "new") throw new TypeError('no "connect" listener set into this transport'); if (this.listenerCount("producedata") === 0) throw new TypeError('no "producedata" listener set into this transport'); if (H && typeof H != "object") throw new TypeError("if given, appData must be an object") } else throw new h.UnsupportedError("SCTP not enabled by remote Transport"); return (E || _) && (I = !1), this._awaitQueue.push(async () => { const { dataChannel: V, sctpStreamParameters: ee } = await this._handler.sendDataChannel({ ordered: I, maxPacketLifeTime: E, maxRetransmits: _, label: k, protocol: L }); b.validateAndNormalizeSctpStreamParameters(ee); const { id: K } = await new Promise((B, Q) => { this.safeEmit("producedata", { sctpStreamParameters: ee, label: k, protocol: L, appData: H }, B, Q) }), N = new S.DataProducer({ id: K, dataChannel: V, sctpStreamParameters: ee, appData: H }); return this._dataProducers.set(N.id, N), this.handleDataProducer(N), this._observer.safeEmit("newdataproducer", N), N }, "transport.produceData()") } async consumeData({ id: I, dataProducerId: E, sctpStreamParameters: _, label: k = "", protocol: L = "", appData: H = {} }) { if (y.debug("consumeData()"), this._closed) throw new h.InvalidStateError("closed"); if (this._direction !== "recv") throw new h.UnsupportedError("not a receiving Transport"); if (this._maxSctpMessageSize) { if (typeof I != "string") throw new TypeError("missing id"); if (typeof E != "string") throw new TypeError("missing dataProducerId"); if (this.listenerCount("connect") === 0 && this._connectionState === "new") throw new TypeError('no "connect" listener set into this transport'); if (H && typeof H != "object") throw new TypeError("if given, appData must be an object") } else throw new h.UnsupportedError("SCTP not enabled by remote Transport"); const V = P.clone(_); return b.validateAndNormalizeSctpStreamParameters(V), this._awaitQueue.push(async () => { const { dataChannel: ee } = await this._handler.receiveDataChannel({ sctpStreamParameters: V, label: k, protocol: L }), K = new R.DataConsumer({ id: I, dataProducerId: E, dataChannel: ee, sctpStreamParameters: V, appData: H }); return this._dataConsumers.set(K.id, K), this.handleDataConsumer(K), this._observer.safeEmit("newdataconsumer", K), K }, "transport.consumeData()") } createPendingConsumers() { this._consumerCreationInProgress = !0, this._awaitQueue.push(async () => { if (this._pendingConsumerTasks.length === 0) { y.debug("createPendingConsumers() | there is no Consumer to be created"); return } const I = [...this._pendingConsumerTasks]; this._pendingConsumerTasks = []; let E; const _ = []; for (const k of I) { const { id: L, kind: H, rtpParameters: V, streamId: ee, onRtpReceiver: K } = k.consumerOptions; _.push({ trackId: L, kind: H, rtpParameters: V, streamId: ee, onRtpReceiver: K }) } try { const k = await this._handler.receive(_); for (let L = 0; L < k.length; ++L) { const H = I[L], V = k[L], { id: ee, producerId: K, kind: N, rtpParameters: B, appData: Q } = H.consumerOptions, { localId: Z, rtpReceiver: le, track: X } = V, ce = new g.Consumer({ id: ee, localId: Z, producerId: K, rtpReceiver: le, track: X, rtpParameters: B, appData: Q }); this._consumers.set(ce.id, ce), this.handleConsumer(ce), !this._probatorConsumerCreated && !E && N === "video" && (E = ce), this._observer.safeEmit("newconsumer", ce), H.resolve(ce) } } catch (k) { for (const L of I) L.reject(k) } if (E) try { const k = b.generateProbatorRtpParameters(E.rtpParameters); await this._handler.receive([{ trackId: "probator", kind: "video", rtpParameters: k }]), y.debug("createPendingConsumers() | Consumer for RTP probation created"), this._probatorConsumerCreated = !0 } catch (k) { y.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o", k) } }, "transport.createPendingConsumers()").then(() => { this._consumerCreationInProgress = !1, this._pendingConsumerTasks.length > 0 && this.createPendingConsumers() }).catch(() => { }) } pausePendingConsumers() { this._consumerPauseInProgress = !0, this._awaitQueue.push(async () => { if (this._pendingPauseConsumers.size === 0) { y.debug("pausePendingConsumers() | there is no Consumer to be paused"); return } const I = Array.from(this._pendingPauseConsumers.values()); this._pendingPauseConsumers.clear(); try { const E = I.map(_ => _.localId); await this._handler.pauseReceiving(E) } catch (E) { y.error("pausePendingConsumers() | failed to pause Consumers:", E) } }, "transport.pausePendingConsumers").then(() => { this._consumerPauseInProgress = !1, this._pendingPauseConsumers.size > 0 && this.pausePendingConsumers() }).catch(() => { }) } resumePendingConsumers() { this._consumerResumeInProgress = !0, this._awaitQueue.push(async () => { if (this._pendingResumeConsumers.size === 0) { y.debug("resumePendingConsumers() | there is no Consumer to be resumed"); return } const I = Array.from(this._pendingResumeConsumers.values()); this._pendingResumeConsumers.clear(); try { const E = I.map(_ => _.localId); await this._handler.resumeReceiving(E) } catch (E) { y.error("resumePendingConsumers() | failed to resume Consumers:", E) } }, "transport.resumePendingConsumers").then(() => { this._consumerResumeInProgress = !1, this._pendingResumeConsumers.size > 0 && this.resumePendingConsumers() }).catch(() => { }) } closePendingConsumers() { this._consumerCloseInProgress = !0, this._awaitQueue.push(async () => { if (this._pendingCloseConsumers.size === 0) { y.debug("closePendingConsumers() | there is no Consumer to be closed"); return } const I = Array.from(this._pendingCloseConsumers.values()); this._pendingCloseConsumers.clear(); try { await this._handler.stopReceiving(I.map(E => E.localId)) } catch (E) { y.error("closePendingConsumers() | failed to close Consumers:", E) } }, "transport.closePendingConsumers").then(() => { this._consumerCloseInProgress = !1, this._pendingCloseConsumers.size > 0 && this.closePendingConsumers() }).catch(() => { }) } handleHandler() { const I = this._handler; I.on("@connect", ({ dtlsParameters: E }, _, k) => { if (this._closed) { k(new h.InvalidStateError("closed")); return } this.safeEmit("connect", { dtlsParameters: E }, _, k) }), I.on("@icegatheringstatechange", E => { E !== this._iceGatheringState && (y.debug("ICE gathering state changed to %s", E), this._iceGatheringState = E, this._closed || this.safeEmit("icegatheringstatechange", E)) }), I.on("@icecandidateerror", E => { y.warn(`ICE candidate error [url:${E.url}, localAddress:${E.address}, localPort:${E.port}]: ${E.errorCode} "${E.errorText}"`), this.safeEmit("icecandidateerror", E) }), I.on("@connectionstatechange", E => { E !== this._connectionState && (y.debug("connection state changed to %s", E), this._connectionState = E, this._closed || this.safeEmit("connectionstatechange", E)) }) } handleProducer(I) { I.on("@close", () => { this._producers.delete(I.id), !this._closed && this._awaitQueue.push(async () => await this._handler.stopSending(I.localId), "producer @close event").catch(E => y.warn("producer.close() failed:%o", E)) }), I.on("@pause", (E, _) => { this._awaitQueue.push(async () => await this._handler.pauseSending(I.localId), "producer @pause event").then(E).catch(_) }), I.on("@resume", (E, _) => { this._awaitQueue.push(async () => await this._handler.resumeSending(I.localId), "producer @resume event").then(E).catch(_) }), I.on("@replacetrack", (E, _, k) => { this._awaitQueue.push(async () => await this._handler.replaceTrack(I.localId, E), "producer @replacetrack event").then(_).catch(k) }), I.on("@setmaxspatiallayer", (E, _, k) => { this._awaitQueue.push(async () => await this._handler.setMaxSpatialLayer(I.localId, E), "producer @setmaxspatiallayer event").then(_).catch(k) }), I.on("@setrtpencodingparameters", (E, _, k) => { this._awaitQueue.push(async () => await this._handler.setRtpEncodingParameters(I.localId, E), "producer @setrtpencodingparameters event").then(_).catch(k) }), I.on("@getstats", (E, _) => { if (this._closed) return _(new h.InvalidStateError("closed")); this._handler.getSenderStats(I.localId).then(E).catch(_) }) } handleConsumer(I) { I.on("@close", () => { this._consumers.delete(I.id), this._pendingPauseConsumers.delete(I.id), this._pendingResumeConsumers.delete(I.id), !this._closed && (this._pendingCloseConsumers.set(I.id, I), this._consumerCloseInProgress === !1 && this.closePendingConsumers()) }), I.on("@pause", () => { this._pendingResumeConsumers.has(I.id) && this._pendingResumeConsumers.delete(I.id), this._pendingPauseConsumers.set(I.id, I), queueMicrotask(() => { this._closed || this._consumerPauseInProgress === !1 && this.pausePendingConsumers() }) }), I.on("@resume", () => { this._pendingPauseConsumers.has(I.id) && this._pendingPauseConsumers.delete(I.id), this._pendingResumeConsumers.set(I.id, I), queueMicrotask(() => { this._closed || this._consumerResumeInProgress === !1 && this.resumePendingConsumers() }) }), I.on("@getstats", (E, _) => { if (this._closed) return _(new h.InvalidStateError("closed")); this._handler.getReceiverStats(I.localId).then(E).catch(_) }) } handleDataProducer(I) { I.on("@close", () => { this._dataProducers.delete(I.id) }) } handleDataConsumer(I) { I.on("@close", () => { this._dataConsumers.delete(I.id) }) } } c.Transport = D }, 5602(a) { var c = a.exports = { v: [{ name: "version", reg: /^(\d*)$/ }], o: [{ name: "origin", reg: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/, names: ["username", "sessionId", "sessionVersion", "netType", "ipVer", "address"], format: "%s %s %d %s IP%d %s" }], s: [{ name: "name" }], i: [{ name: "description" }], u: [{ name: "uri" }], e: [{ name: "email" }], p: [{ name: "phone" }], z: [{ name: "timezones" }], r: [{ name: "repeats" }], t: [{ name: "timing", reg: /^(\d*) (\d*)/, names: ["start", "stop"], format: "%d %d" }], c: [{ name: "connection", reg: /^IN IP(\d) (\S*)/, names: ["version", "ip"], format: "IN IP%d %s" }], b: [{ push: "bandwidth", reg: /^(TIAS|AS|CT|RR|RS):(\d*)/, names: ["type", "limit"], format: "%s:%s" }], m: [{ reg: /^(\w*) (\d*) ([\w/]*)(?: (.*))?/, names: ["type", "port", "protocol", "payloads"], format: "%s %d %s %s" }], a: [{ push: "rtp", reg: /^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/, names: ["payload", "codec", "rate", "encoding"], format: function (l) { return l.encoding ? "rtpmap:%d %s/%s/%s" : l.rate ? "rtpmap:%d %s/%s" : "rtpmap:%d %s" } }, { push: "fmtp", reg: /^fmtp:(\d*) ([\S| ]*)/, names: ["payload", "config"], format: "fmtp:%d %s" }, { name: "control", reg: /^control:(.*)/, format: "control:%s" }, { name: "rtcp", reg: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/, names: ["port", "netType", "ipVer", "address"], format: function (l) { return l.address != null ? "rtcp:%d %s IP%d %s" : "rtcp:%d" } }, { push: "rtcpFbTrrInt", reg: /^rtcp-fb:(\*|\d*) trr-int (\d*)/, names: ["payload", "value"], format: "rtcp-fb:%s trr-int %d" }, { push: "rtcpFb", reg: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/, names: ["payload", "type", "subtype"], format: function (l) { return l.subtype != null ? "rtcp-fb:%s %s %s" : "rtcp-fb:%s %s" } }, { push: "ext", reg: /^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/, names: ["value", "direction", "encrypt-uri", "uri", "config"], format: function (l) { return "extmap:%d" + (l.direction ? "/%s" : "%v") + (l["encrypt-uri"] ? " %s" : "%v") + " %s" + (l.config ? " %s" : "") } }, { name: "extmapAllowMixed", reg: /^(extmap-allow-mixed)/ }, { push: "crypto", reg: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/, names: ["id", "suite", "config", "sessionConfig"], format: function (l) { return l.sessionConfig != null ? "crypto:%d %s %s %s" : "crypto:%d %s %s" } }, { name: "setup", reg: /^setup:(\w*)/, format: "setup:%s" }, { name: "connectionType", reg: /^connection:(new|existing)/, format: "connection:%s" }, { name: "mid", reg: /^mid:([^\s]*)/, format: "mid:%s" }, { name: "msid", reg: /^msid:(.*)/, format: "msid:%s" }, { name: "ptime", reg: /^ptime:(\d*(?:\.\d*)*)/, format: "ptime:%d" }, { name: "maxptime", reg: /^maxptime:(\d*(?:\.\d*)*)/, format: "maxptime:%d" }, { name: "direction", reg: /^(sendrecv|recvonly|sendonly|inactive)/ }, { name: "icelite", reg: /^(ice-lite)/ }, { name: "iceUfrag", reg: /^ice-ufrag:(\S*)/, format: "ice-ufrag:%s" }, { name: "icePwd", reg: /^ice-pwd:(\S*)/, format: "ice-pwd:%s" }, { name: "fingerprint", reg: /^fingerprint:(\S*) (\S*)/, names: ["type", "hash"], format: "fingerprint:%s %s" }, { push: "candidates", reg: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/, names: ["foundation", "component", "transport", "priority", "ip", "port", "type", "raddr", "rport", "tcptype", "generation", "network-id", "network-cost"], format: function (l) { var p = "candidate:%s %d %s %d %s %d typ %s"; return p += l.raddr != null ? " raddr %s rport %d" : "%v%v", p += l.tcptype != null ? " tcptype %s" : "%v", l.generation != null && (p += " generation %d"), p += l["network-id"] != null ? " network-id %d" : "%v", p += l["network-cost"] != null ? " network-cost %d" : "%v", p } }, { name: "endOfCandidates", reg: /^(end-of-candidates)/ }, { name: "remoteCandidates", reg: /^remote-candidates:(.*)/, format: "remote-candidates:%s" }, { name: "iceOptions", reg: /^ice-options:(\S*)/, format: "ice-options:%s" }, { push: "ssrcs", reg: /^ssrc:(\d*) ([\w_-]*)(?::(.*))?/, names: ["id", "attribute", "value"], format: function (l) { var p = "ssrc:%d"; return l.attribute != null && (p += " %s", l.value != null && (p += ":%s")), p } }, { push: "ssrcGroups", reg: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/, names: ["semantics", "ssrcs"], format: "ssrc-group:%s %s" }, { name: "msidSemantic", reg: /^msid-semantic:\s?(\w*) (\S*)/, names: ["semantic", "token"], format: "msid-semantic: %s %s" }, { push: "groups", reg: /^group:(\w*) (.*)/, names: ["type", "mids"], format: "group:%s %s" }, { name: "rtcpMux", reg: /^(rtcp-mux)/ }, { name: "rtcpRsize", reg: /^(rtcp-rsize)/ }, { name: "sctpmap", reg: /^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/, names: ["sctpmapNumber", "app", "maxMessageSize"], format: function (l) { return l.maxMessageSize != null ? "sctpmap:%s %s %s" : "sctpmap:%s %s" } }, { name: "xGoogleFlag", reg: /^x-google-flag:([^\s]*)/, format: "x-google-flag:%s" }, { push: "rids", reg: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/, names: ["id", "direction", "params"], format: function (l) { return l.params ? "rid:%s %s %s" : "rid:%s %s" } }, { push: "imageattrs", reg: new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"), names: ["pt", "dir1", "attrs1", "dir2", "attrs2"], format: function (l) { return "imageattr:%s %s %s" + (l.dir2 ? " %s %s" : "") } }, { name: "simulcast", reg: new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"), names: ["dir1", "list1", "dir2", "list2"], format: function (l) { return "simulcast:%s %s" + (l.dir2 ? " %s %s" : "") } }, { name: "simulcast_03", reg: /^simulcast:[\s\t]+([\S+\s\t]+)$/, names: ["value"], format: "simulcast: %s" }, { name: "framerate", reg: /^framerate:(\d+(?:$|\.\d+))/, format: "framerate:%s" }, { name: "sourceFilter", reg: /^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/, names: ["filterMode", "netType", "addressTypes", "destAddress", "srcList"], format: "source-filter: %s %s %s %s %s" }, { name: "bundleOnly", reg: /^(bundle-only)/ }, { name: "label", reg: /^label:(.+)/, format: "label:%s" }, { name: "sctpPort", reg: /^sctp-port:(\d+)$/, format: "sctp-port:%s" }, { name: "maxMessageSize", reg: /^max-message-size:(\d+)$/, format: "max-message-size:%s" }, { push: "tsRefClocks", reg: /^ts-refclk:([^\s=]*)(?:=(\S*))?/, names: ["clksrc", "clksrcExt"], format: function (l) { return "ts-refclk:%s" + (l.clksrcExt != null ? "=%s" : "") } }, { name: "mediaClk", reg: /^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/, names: ["id", "mediaClockName", "mediaClockValue", "rateNumerator", "rateDenominator"], format: function (l) { var p = "mediaclk:"; return p += l.id != null ? "id=%s %s" : "%v%s", p += l.mediaClockValue != null ? "=%s" : "", p += l.rateNumerator != null ? " rate=%s" : "", p += l.rateDenominator != null ? "/%s" : "", p } }, { name: "keywords", reg: /^keywds:(.+)$/, format: "keywds:%s" }, { name: "content", reg: /^content:(.+)/, format: "content:%s" }, { name: "bfcpFloorCtrl", reg: /^floorctrl:(c-only|s-only|c-s)/, format: "floorctrl:%s" }, { name: "bfcpConfId", reg: /^confid:(\d+)/, format: "confid:%s" }, { name: "bfcpUserId", reg: /^userid:(\d+)/, format: "userid:%s" }, { name: "bfcpFloorId", reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/, names: ["id", "mStream"], format: "floorid:%s mstrm:%s" }, { push: "invalid", names: ["value"] }] }; Object.keys(c).forEach(function (l) { var p = c[l]; p.forEach(function (d) { d.reg || (d.reg = /(.*)/), d.format || (d.format = "%s") }) }) }, 5765(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Safari12 = void 0; const p = l(7363), d = l(3953), f = l(2994), h = l(8046), P = l(4893), b = l(3303), u = l(1305), g = l(5544), S = l(5938), R = l(4256), y = new f.Logger("Safari12"), v = "Safari12", D = { OS: 1024, MIS: 1024 }; class M extends d.EnhancedEventEmitter { constructor({ direction: E, iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H, iceServers: V, iceTransportPolicy: ee, additionalSettings: K, getSendExtendedRtpCapabilities: N }) { super(); ve(this, "_closed", !1); ve(this, "_direction"); ve(this, "_remoteSdp"); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_forcedLocalDtlsRole"); ve(this, "_pc"); ve(this, "_mapMidTransceiver", new Map); ve(this, "_sendStream", new MediaStream); ve(this, "_hasDataChannelMediaSection", !1); ve(this, "_nextSendSctpStreamId", 0); ve(this, "_transportReady", !1); ve(this, "onIceGatheringStateChange", () => { this.emit("@icegatheringstatechange", this._pc.iceGatheringState) }); ve(this, "onIceCandidateError", E => { this.emit("@icecandidateerror", E) }); ve(this, "onConnectionStateChange", () => { this.emit("@connectionstatechange", this._pc.connectionState) }); ve(this, "onIceConnectionStateChange", () => { switch (this._pc.iceConnectionState) { case "checking": { this.emit("@connectionstatechange", "connecting"); break } case "connected": case "completed": { this.emit("@connectionstatechange", "connected"); break } case "failed": { this.emit("@connectionstatechange", "failed"); break } case "disconnected": { this.emit("@connectionstatechange", "disconnected"); break } case "closed": { this.emit("@connectionstatechange", "closed"); break } } }); y.debug("constructor()"), this._direction = E, this._remoteSdp = new u.RemoteSdp({ iceParameters: _, iceCandidates: k, dtlsParameters: L, sctpParameters: H }), this._getSendExtendedRtpCapabilities = N, L.role && L.role !== "auto" && (this._forcedLocalDtlsRole = L.role === "server" ? "client" : "server"), this._pc = new RTCPeerConnection({ iceServers: V ?? [], iceTransportPolicy: ee ?? "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require", ...K }), this._pc.addEventListener("icegatheringstatechange", () => { this.emit("@icegatheringstatechange", this._pc.iceGatheringState) }), this._pc.addEventListener("icecandidateerror", B => { this.emit("@icecandidateerror", B) }), this._pc.addEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.addEventListener("icecandidateerror", this.onIceCandidateError), this._pc.connectionState ? this._pc.addEventListener("connectionstatechange", this.onConnectionStateChange) : (y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"), this._pc.addEventListener("iceconnectionstatechange", this.onIceConnectionStateChange)) } static createFactory() { return { name: v, factory: E => new M(E), getNativeRtpCapabilities: async () => { y.debug("getNativeRtpCapabilities()"); let E = new RTCPeerConnection({ iceServers: [], iceTransportPolicy: "all", bundlePolicy: "max-bundle", rtcpMuxPolicy: "require" }); try { E.addTransceiver("audio"), E.addTransceiver("video"); const _ = await E.createOffer(); try { E.close() } catch { } E = void 0; const k = p.parse(_.sdp); return M.getLocalRtpCapabilities(k) } catch (_) { try { E == null || E.close() } catch { } throw E = void 0, _ } }, getNativeSctpCapabilities: async () => (y.debug("getNativeSctpCapabilities()"), { numStreams: D }) } } static getLocalRtpCapabilities(E) { const _ = g.extractRtpCapabilities({ sdpObject: E }); return h.validateAndNormalizeRtpCapabilities(_), R.addNackSupportForOpus(_), _ } get name() { return v } close() { if (y.debug("close()"), !this._closed) { this._closed = !0; try { this._pc.close() } catch { } this._pc.removeEventListener("icegatheringstatechange", this.onIceGatheringStateChange), this._pc.removeEventListener("icecandidateerror", this.onIceCandidateError), this._pc.removeEventListener("connectionstatechange", this.onConnectionStateChange), this._pc.removeEventListener("iceconnectionstatechange", this.onIceConnectionStateChange), this.emit("@close"), super.close() } } async updateIceServers(E) { this.assertNotClosed(), y.debug("updateIceServers()"); const _ = this._pc.getConfiguration(); _.iceServers = E, this._pc.setConfiguration(_) } async restartIce(E) { if (this.assertNotClosed(), y.debug("restartIce()"), this._remoteSdp.updateIceParameters(E), !!this._transportReady) if (this._direction === "send") { const _ = await this._pc.createOffer({ iceRestart: !0 }); y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]", _), await this._pc.setLocalDescription(_); const k = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]", k), await this._pc.setRemoteDescription(k) } else { const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } } async getTransportStats() { return this.assertNotClosed(), this._pc.getStats() } async send({ track: E, encodings: _, codecOptions: k, codec: L, onRtpSender: H }) { this.assertNotClosed(), this.assertSendDirection(), y.debug("send() [kind:%s, track.id:%s]", E.kind, E.id); const V = this._remoteSdp.getNextMediaSectionIdx(), ee = this._pc.addTransceiver(E, { direction: "sendonly", streams: [this._sendStream] }); H && H(ee.sender); let K = await this._pc.createOffer(), N = p.parse(K.sdp); N.extmapAllowMixed && this._remoteSdp.setSessionExtmapAllowMixed(); const B = M.getLocalRtpCapabilities(N), Q = this._getSendExtendedRtpCapabilities(B), Z = h.getSendingRtpParameters(E.kind, Q); Z.codecs = h.reduceCodecs(Z.codecs, L); const le = h.getSendingRemoteRtpParameters(E.kind, Q); le.codecs = h.reduceCodecs(le.codecs, L); let X; this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: N }); const ce = (0, b.parse)((_ ?? [{}])[0].scalabilityMode); _ && _.length > 1 && (y.debug("send() | enabling legacy simulcast"), N = p.parse(K.sdp), X = N.media[V.idx], S.addLegacySimulcast({ offerMediaObject: X, numStreams: _.length }), K = { type: "offer", sdp: p.write(N) }), y.debug("send() | calling pc.setLocalDescription() [offer:%o]", K), await this._pc.setLocalDescription(K); const he = ee.mid; if (Z.mid = he, N = p.parse(this._pc.localDescription.sdp), X = N.media[V.idx], Z.rtcp.cname = g.getCname({ offerMediaObject: X }), Z.encodings = S.getRtpEncodings({ offerMediaObject: X }), _) for (let ye = 0; ye < Z.encodings.length; ++ye)_[ye] && Object.assign(Z.encodings[ye], _[ye]); if (Z.encodings.length > 1 && (Z.codecs[0].mimeType.toLowerCase() === "video/vp8" || Z.codecs[0].mimeType.toLowerCase() === "video/h264")) for (const ye of Z.encodings) ye.scalabilityMode ? ye.scalabilityMode = `L1T${ce.temporalLayers}` : ye.scalabilityMode = "L1T3"; this._remoteSdp.send({ offerMediaObject: X, reuseMid: V.reuseMid, offerRtpParameters: Z, answerRtpParameters: le, codecOptions: k }); const ue = { type: "answer", sdp: this._remoteSdp.getSdp() }; return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]", ue), await this._pc.setRemoteDescription(ue), this._mapMidTransceiver.set(he, ee), { localId: he, rtpParameters: Z, rtpSender: ee.sender } } async stopSending(E) { if (this.assertSendDirection(), this._closed) return; y.debug("stopSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); if (_.sender.replaceTrack(null), this._pc.removeTrack(_.sender), this._remoteSdp.closeMediaSection(_.mid)) try { _.stop() } catch { } const L = await this._pc.createOffer(); y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]", L), await this._pc.setLocalDescription(L); const H = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]", H), await this._pc.setRemoteDescription(H), this._mapMidTransceiver.delete(E) } async pauseSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("pauseSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "inactive", this._remoteSdp.pauseMediaSection(E); const k = await this._pc.createOffer(); y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async resumeSending(E) { this.assertNotClosed(), this.assertSendDirection(), y.debug("resumeSending() [localId:%s]", E); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); _.direction = "sendonly", this._remoteSdp.resumeSendingMediaSection(E); const k = await this._pc.createOffer(); y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]", k), await this._pc.setLocalDescription(k); const L = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]", L), await this._pc.setRemoteDescription(L) } async replaceTrack(E, _) { this.assertNotClosed(), this.assertSendDirection(), _ ? y.debug("replaceTrack() [localId:%s, track.id:%s]", E, _.id) : y.debug("replaceTrack() [localId:%s, no track]", E); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); await k.sender.replaceTrack(_) } async setMaxSpatialLayer(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { K <= _ ? ee.active = !0 : ee.active = !1 }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async setRtpEncodingParameters(E, _) { this.assertNotClosed(), this.assertSendDirection(), y.debug("setRtpEncodingParameters() [localId:%s, params:%o]", E, _); const k = this._mapMidTransceiver.get(E); if (!k) throw new Error("associated RTCRtpTransceiver not found"); const L = k.sender.getParameters(); L.encodings.forEach((ee, K) => { L.encodings[K] = { ...ee, ..._ } }), await k.sender.setParameters(L), this._remoteSdp.muxMediaSectionSimulcast(E, L.encodings); const H = await this._pc.createOffer(); y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]", H), await this._pc.setLocalDescription(H); const V = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]", V), await this._pc.setRemoteDescription(V) } async getSenderStats(E) { this.assertNotClosed(), this.assertSendDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.sender.getStats() } async sendDataChannel({ ordered: E, maxPacketLifeTime: _, maxRetransmits: k, label: L, protocol: H }) { this.assertNotClosed(), this.assertSendDirection(); const V = { negotiated: !0, id: this._nextSendSctpStreamId, ordered: E, maxPacketLifeTime: _, maxRetransmits: k, protocol: H }; y.debug("sendDataChannel() [options:%o]", V); const ee = this._pc.createDataChannel(L, V); if (this._nextSendSctpStreamId = ++this._nextSendSctpStreamId % D.MIS, !this._hasDataChannelMediaSection) { const N = await this._pc.createOffer(), B = p.parse(N.sdp), Q = B.media.find(le => le.type === "application"); this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: B }), y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]", N), await this._pc.setLocalDescription(N), this._remoteSdp.sendSctpAssociation({ offerMediaObject: Q }); const Z = { type: "answer", sdp: this._remoteSdp.getSdp() }; y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Z), await this._pc.setRemoteDescription(Z), this._hasDataChannelMediaSection = !0 } const K = { streamId: V.id, ordered: V.ordered, maxPacketLifeTime: V.maxPacketLifeTime, maxRetransmits: V.maxRetransmits }; return { dataChannel: ee, sctpStreamParameters: K } } async receive(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = [], k = new Map; for (const ee of E) { const { trackId: K, kind: N, rtpParameters: B, streamId: Q } = ee; y.debug("receive() [trackId:%s, kind:%s]", K, N); const Z = B.mid ?? String(this._mapMidTransceiver.size); k.set(K, Z), this._remoteSdp.receive({ mid: Z, kind: N, offerRtpParameters: B, streamId: Q ?? B.rtcp.cname, trackId: K }) } const L = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]", L), await this._pc.setRemoteDescription(L); for (const ee of E) { const { trackId: K, onRtpReceiver: N } = ee; if (N) { const B = k.get(K), Q = this._pc.getTransceivers().find(Z => Z.mid === B); if (!Q) throw new Error("transceiver not found"); N(Q.receiver) } } let H = await this._pc.createAnswer(); const V = p.parse(H.sdp); for (const ee of E) { const { trackId: K, rtpParameters: N } = ee, B = k.get(K), Q = V.media.find(Z => String(Z.mid) === B); g.applyCodecParameters({ offerRtpParameters: N, answerMediaObject: Q }) } H = { type: "answer", sdp: p.write(V) }, this._transportReady || await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: V }), y.debug("receive() | calling pc.setLocalDescription() [answer:%o]", H), await this._pc.setLocalDescription(H); for (const ee of E) { const { trackId: K } = ee, N = k.get(K), B = this._pc.getTransceivers().find(Q => Q.mid === N); if (!B) throw new Error("new RTCRtpTransceiver not found"); this._mapMidTransceiver.set(N, B), _.push({ localId: N, track: B.receiver.track, rtpReceiver: B.receiver }) } return _ } async stopReceiving(E) { if (this.assertRecvDirection(), this._closed) return; for (const L of E) { y.debug("stopReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); this._remoteSdp.closeMediaSection(H.mid) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k); for (const L of E) this._mapMidTransceiver.delete(L) } async pauseReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("pauseReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "inactive", this._remoteSdp.pauseMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async resumeReceiving(E) { this.assertNotClosed(), this.assertRecvDirection(); for (const L of E) { y.debug("resumeReceiving() [localId:%s]", L); const H = this._mapMidTransceiver.get(L); if (!H) throw new Error("associated RTCRtpTransceiver not found"); H.direction = "recvonly", this._remoteSdp.resumeReceivingMediaSection(L) } const _ = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]", _), await this._pc.setRemoteDescription(_); const k = await this._pc.createAnswer(); y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]", k), await this._pc.setLocalDescription(k) } async getReceiverStats(E) { this.assertNotClosed(), this.assertRecvDirection(); const _ = this._mapMidTransceiver.get(E); if (!_) throw new Error("associated RTCRtpTransceiver not found"); return _.receiver.getStats() } async receiveDataChannel({ sctpStreamParameters: E, label: _, protocol: k }) { this.assertNotClosed(), this.assertRecvDirection(); const { streamId: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee } = E, K = { negotiated: !0, id: L, ordered: H, maxPacketLifeTime: V, maxRetransmits: ee, protocol: k }; y.debug("receiveDataChannel() [options:%o]", K); const N = this._pc.createDataChannel(_, K); if (!this._hasDataChannelMediaSection) { this._remoteSdp.receiveSctpAssociation(); const B = { type: "offer", sdp: this._remoteSdp.getSdp() }; y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]", B), await this._pc.setRemoteDescription(B); const Q = await this._pc.createAnswer(); if (!this._transportReady) { const Z = p.parse(Q.sdp); await this.setupTransport({ localDtlsRole: this._forcedLocalDtlsRole ?? "client", localSdpObject: Z }) } y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]", Q), await this._pc.setLocalDescription(Q), this._hasDataChannelMediaSection = !0 } return { dataChannel: N } } async setupTransport({ localDtlsRole: E, localSdpObject: _ }) { _ || (_ = p.parse(this._pc.localDescription.sdp)); const k = g.extractDtlsParameters({ sdpObject: _ }); k.role = E, this._remoteSdp.updateDtlsRole(E === "client" ? "server" : "client"), await new Promise((L, H) => { this.safeEmit("@connect", { dtlsParameters: k }, L, H) }), this._transportReady = !0 } assertNotClosed() { if (this._closed) throw new P.InvalidStateError("method called in a closed handler") } assertSendDirection() { if (this._direction !== "send") throw new Error('method can just be called for handlers with "send" direction') } assertRecvDirection() { if (this._direction !== "recv") throw new Error('method can just be called for handlers with "recv" direction') } } c.Safari12 = M }, 5869(a, c, l) { var p = l(887); function d(f, h, P, b, u) { var g = p(f, h, P, b, u); return g.next().then(function (S) { return S.done ? S.value : g.next() }) } a.exports = d, a.exports.__esModule = !0, a.exports.default = a.exports }, 5935(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.FakeEventTarget = void 0; class l { constructor() { ve(this, "listeners", {}) } addEventListener(d, f, h) { f && (this.listeners[d] = this.listeners[d] ?? [], this.listeners[d].push({ callback: typeof f == "function" ? f : f.handleEvent, once: typeof h == "object" && h.once === !0 })) } removeEventListener(d, f, h) { this.listeners[d] && f && (this.listeners[d] = this.listeners[d].filter(P => P.callback !== (typeof f == "function" ? f : f.handleEvent))) } dispatchEvent(d) { if (!d || typeof d.type != "string") throw new Error("invalid event object"); const f = this.listeners[d.type]; if (!f) return !0; for (const h of [...f]) { try { h.callback.call(this, d) } catch (P) { setTimeout(() => { throw P }, 0) } h.once && this.removeEventListener(d.type, h.callback) } return !d.defaultPrevented } } c.FakeEventTarget = l }, 5938(a, c) { Object.defineProperty(c, "__esModule", { value: !0 }), c.getRtpEncodings = l, c.addLegacySimulcast = p; function l({ offerMediaObject: d }) { const f = new Set; for (const b of d.ssrcs ?? []) { const u = b.id; u && f.add(u) } if (f.size === 0) throw new Error("no a=ssrc lines found"); const h = new Map; for (const b of d.ssrcGroups ?? []) { if (b.semantics !== "FID") continue; const u = b.ssrcs.split(/\s+/), g = Number(u[0]), S = Number(u[1]); f.has(g) && (f.delete(g), f.delete(S), h.set(g, S)) } for (const b of f) h.set(b, void 0); const P = []; for (const [b, u] of h) { const g = { ssrc: b }; u && (g.rtx = { ssrc: u }), P.push(g) } return P } function p({ offerMediaObject: d, numStreams: f }) { if (f <= 1) throw new TypeError("numStreams must be greater than 1"); const h = (d.ssrcs ?? []).find(D => D.attribute === "msid"); if (!h) throw new Error("a=ssrc line with msid information not found"); const [P, b] = h.value.split(" "), u = Number(h.id); let g; (d.ssrcGroups ?? []).some(D => { if (D.semantics !== "FID") return !1; const M = D.ssrcs.split(/\s+/); return Number(M[0]) === u ? (g = Number(M[1]), !0) : !1 }); const S = (d.ssrcs ?? []).find(D => D.attribute === "cname"); if (!S) throw new Error("a=ssrc line with cname information not found"); const R = S.value, y = [], v = []; for (let D = 0; D < f; ++D)y.push(u + D), g && v.push(g + D); d.ssrcGroups = [], d.ssrcs = [], d.ssrcGroups.push({ semantics: "SIM", ssrcs: y.join(" ") }); for (const D of y) d.ssrcs.push({ id: D, attribute: "cname", value: R }), d.ssrcs.push({ id: D, attribute: "msid", value: `${P} ${b}` }); for (let D = 0; D < v.length; ++D) { const M = y[D], W = v[D]; d.ssrcs.push({ id: W, attribute: "cname", value: R }), d.ssrcs.push({ id: W, attribute: "msid", value: `${P} ${b}` }), d.ssrcGroups.push({ semantics: "FID", ssrcs: `${M} ${W}` }) } } }, 5953(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(3240)) })(this, function (p) { return function (d) { var f = p, h = f.lib, P = h.WordArray, b = h.Hasher, u = f.x64, g = u.Word, S = f.algo, R = [], y = [], v = []; (function () { for (var W = 1, I = 0, E = 0; E < 24; E++) { R[W + 5 * I] = (E + 1) * (E + 2) / 2 % 64; var _ = I % 5, k = (2 * W + 3 * I) % 5; W = _, I = k } for (var W = 0; W < 5; W++)for (var I = 0; I < 5; I++)y[W + 5 * I] = I + (2 * W + 3 * I) % 5 * 5; for (var L = 1, H = 0; H < 24; H++) { for (var V = 0, ee = 0, K = 0; K < 7; K++) { if (L & 1) { var N = (1 << K) - 1; N < 32 ? ee ^= 1 << N : V ^= 1 << N - 32 } L & 128 ? L = L << 1 ^ 113 : L <<= 1 } v[H] = g.create(V, ee) } })(); var D = []; (function () { for (var W = 0; W < 25; W++)D[W] = g.create() })(); var M = S.SHA3 = b.extend({ cfg: b.cfg.extend({ outputLength: 512 }), _doReset: function () { for (var W = this._state = [], I = 0; I < 25; I++)W[I] = new g.init; this.blockSize = (1600 - 2 * this.cfg.outputLength) / 32 }, _doProcessBlock: function (W, I) { for (var E = this._state, _ = this.blockSize / 2, k = 0; k < _; k++) { var L = W[I + 2 * k], H = W[I + 2 * k + 1]; L = (L << 8 | L >>> 24) & 16711935 | (L << 24 | L >>> 8) & 4278255360, H = (H << 8 | H >>> 24) & 16711935 | (H << 24 | H >>> 8) & 4278255360; var V = E[k]; V.high ^= H, V.low ^= L } for (var ee = 0; ee < 24; ee++) { for (var K = 0; K < 5; K++) { for (var N = 0, B = 0, Q = 0; Q < 5; Q++) { var V = E[K + 5 * Q]; N ^= V.high, B ^= V.low } var Z = D[K]; Z.high = N, Z.low = B } for (var K = 0; K < 5; K++)for (var le = D[(K + 4) % 5], X = D[(K + 1) % 5], ce = X.high, he = X.low, N = le.high ^ (ce << 1 | he >>> 31), B = le.low ^ (he << 1 | ce >>> 31), Q = 0; Q < 5; Q++) { var V = E[K + 5 * Q]; V.high ^= N, V.low ^= B } for (var ue = 1; ue < 25; ue++) { var N, B, V = E[ue], ye = V.high, se = V.low, _e = R[ue]; _e < 32 ? (N = ye << _e | se >>> 32 - _e, B = se << _e | ye >>> 32 - _e) : (N = se << _e - 32 | ye >>> 64 - _e, B = ye << _e - 32 | se >>> 64 - _e); var Se = D[y[ue]]; Se.high = N, Se.low = B } var we = D[0], De = E[0]; we.high = De.high, we.low = De.low; for (var K = 0; K < 5; K++)for (var Q = 0; Q < 5; Q++) { var ue = K + 5 * Q, V = E[ue], mt = D[ue], Lt = D[(K + 1) % 5 + 5 * Q], Dt = D[(K + 2) % 5 + 5 * Q]; V.high = mt.high ^ ~Lt.high & Dt.high, V.low = mt.low ^ ~Lt.low & Dt.low } var V = E[0], ot = v[ee]; V.high ^= ot.high, V.low ^= ot.low } }, _doFinalize: function () { var W = this._data, I = W.words; this._nDataBytes * 8; var E = W.sigBytes * 8, _ = this.blockSize * 32; I[E >>> 5] |= 1 << 24 - E % 32, I[(d.ceil((E + 1) / _) * _ >>> 5) - 1] |= 128, W.sigBytes = I.length * 4, this._process(); for (var k = this._state, L = this.cfg.outputLength / 8, H = L / 8, V = [], ee = 0; ee < H; ee++) { var K = k[ee], N = K.high, B = K.low; N = (N << 8 | N >>> 24) & 16711935 | (N << 24 | N >>> 8) & 4278255360, B = (B << 8 | B >>> 24) & 16711935 | (B << 24 | B >>> 8) & 4278255360, V.push(B), V.push(N) } return new P.init(V, L) }, clone: function () { for (var W = b.clone.call(this), I = W._state = this._state.slice(0), E = 0; E < 25; E++)I[E] = I[E].clone(); return W } }); f.SHA3 = b._createHelper(M), f.HmacSHA3 = b._createHmacHelper(M) }(Math), p.SHA3 }) }, 6004(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Device = void 0, c.detectDeviceAsync = M, c.detectDevice = W; const p = l(2109), d = l(2994), f = l(3953), h = l(4893), P = l(1765), b = l(8046), u = l(5601), g = l(2183), S = l(11), R = l(2292), y = l(5765), v = l(867), D = new d.Logger("Device"); async function M(_) { D.debug("detectDeviceAsync() [userAgent:%s]", _), !_ && typeof navigator == "object" && (_ = navigator.userAgent); const k = await (0, p.UAParser)(_).withFeatureCheck(); return E(k) } function W(_) { D.debug("detectDevice() [userAgent:%s]", _), !_ && typeof navigator == "object" && (_ = navigator.userAgent); const k = (0, p.UAParser)(_); return E(k) } class I { constructor({ handlerName: k, handlerFactory: L } = {}) { ve(this, "_handlerFactory"); ve(this, "_handlerName"); ve(this, "_loaded", !1); ve(this, "_getSendExtendedRtpCapabilities"); ve(this, "_recvRtpCapabilities"); ve(this, "_canProduceByKind", { audio: !1, video: !1 }); ve(this, "_sctpCapabilities"); ve(this, "_observer", new f.EnhancedEventEmitter); if (D.debug("constructor()"), k && L) throw new TypeError("just one of handlerName or handlerInterface can be given"); if (L) this._handlerFactory = L; else { if (k) D.debug("constructor() | handler given: %s", k); else if (k = W(), k) D.debug("constructor() | detected handler: %s", k); else throw new h.UnsupportedError("device not supported"); switch (k) { case "Chrome111": { this._handlerFactory = g.Chrome111.createFactory(); break } case "Chrome74": { this._handlerFactory = S.Chrome74.createFactory(); break } case "Firefox120": { this._handlerFactory = R.Firefox120.createFactory(); break } case "Safari12": { this._handlerFactory = y.Safari12.createFactory(); break } case "ReactNative106": { this._handlerFactory = v.ReactNative106.createFactory(); break } default: throw new TypeError(`unknown handlerName "${k}"`) } } this._handlerName = this._handlerFactory.name } static async factory({ handlerName: k, handlerFactory: L } = {}) { if (D.debug("factory()"), k && L) throw new TypeError("just one of handlerName or handlerInterface can be given"); if (!k && !L && (k = await M(), !k)) throw new h.UnsupportedError("device not supported"); return new I({ handlerName: k, handlerFactory: L }) } get handlerName() { return this._handlerName } get loaded() { return this._loaded } get rtpCapabilities() { if (!this._loaded) throw new h.InvalidStateError("not loaded"); return this._recvRtpCapabilities } get sctpCapabilities() { if (!this._loaded) throw new h.InvalidStateError("not loaded"); return this._sctpCapabilities } get observer() { return this._observer } async load({ routerRtpCapabilities: k, preferLocalCodecsOrder: L = !1 }) { if (D.debug("load() [routerRtpCapabilities:%o]", k), this._loaded) throw new h.InvalidStateError("already loaded"); const H = P.clone(k); b.validateAndNormalizeRtpCapabilities(H); const { getNativeRtpCapabilities: V, getNativeSctpCapabilities: ee } = this._handlerFactory, K = P.clone(await V()); b.validateAndNormalizeRtpCapabilities(K), D.debug("load() | got native RTP capabilities:%o", K), this._getSendExtendedRtpCapabilities = B => P.clone(b.getExtendedRtpCapabilities(B, H, L)); const N = b.getExtendedRtpCapabilities(K, H, !1); this._recvRtpCapabilities = b.getRecvRtpCapabilities(N), b.validateAndNormalizeRtpCapabilities(this._recvRtpCapabilities), D.debug("load() | got receiving RTP capabilities:%o", this._recvRtpCapabilities), this._canProduceByKind.audio = b.canSend("audio", this._recvRtpCapabilities), this._canProduceByKind.video = b.canSend("video", this._recvRtpCapabilities), this._sctpCapabilities = await ee(), b.validateSctpCapabilities(this._sctpCapabilities), D.debug("load() | got native SCTP capabilities:%o", this._sctpCapabilities), D.debug("load() succeeded"), this._loaded = !0 } canProduce(k) { if (this._loaded) { if (k !== "audio" && k !== "video") throw new TypeError(`invalid kind "${k}"`) } else throw new h.InvalidStateError("not loaded"); return this._canProduceByKind[k] } createSendTransport({ id: k, iceParameters: L, iceCandidates: H, dtlsParameters: V, sctpParameters: ee, iceServers: K, iceTransportPolicy: N, additionalSettings: B, appData: Q }) { return D.debug("createSendTransport()"), this.createTransport({ direction: "send", id: k, iceParameters: L, iceCandidates: H, dtlsParameters: V, sctpParameters: ee, iceServers: K, iceTransportPolicy: N, additionalSettings: B, appData: Q }) } createRecvTransport({ id: k, iceParameters: L, iceCandidates: H, dtlsParameters: V, sctpParameters: ee, iceServers: K, iceTransportPolicy: N, additionalSettings: B, appData: Q }) { return D.debug("createRecvTransport()"), this.createTransport({ direction: "recv", id: k, iceParameters: L, iceCandidates: H, dtlsParameters: V, sctpParameters: ee, iceServers: K, iceTransportPolicy: N, additionalSettings: B, appData: Q }) } createTransport({ direction: k, id: L, iceParameters: H, iceCandidates: V, dtlsParameters: ee, sctpParameters: K, iceServers: N, iceTransportPolicy: B, additionalSettings: Q, appData: Z }) { if (this._loaded) { if (typeof L != "string") throw new TypeError("missing id"); if (typeof H != "object") throw new TypeError("missing iceParameters"); if (Array.isArray(V)) { if (typeof ee != "object") throw new TypeError("missing dtlsParameters"); if (K && typeof K != "object") throw new TypeError("wrong sctpParameters"); if (Z && typeof Z != "object") throw new TypeError("if given, appData must be an object") } else throw new TypeError("missing iceCandidates") } else throw new h.InvalidStateError("not loaded"); const le = new u.Transport({ direction: k, id: L, iceParameters: H, iceCandidates: V, dtlsParameters: ee, sctpParameters: K, iceServers: N, iceTransportPolicy: B, additionalSettings: Q, appData: Z, handlerFactory: this._handlerFactory, getSendExtendedRtpCapabilities: this._getSendExtendedRtpCapabilities, recvRtpCapabilities: this._recvRtpCapabilities, canProduceByKind: this._canProduceByKind }); return this._observer.safeEmit("newtransport", le), le } } c.Device = I; function E(_) { var k, L, H, V; if (typeof navigator == "object" && navigator.product === "ReactNative") { if (D.debug("detectDeviceImpl() | React-Native detected"), typeof RTCPeerConnection > "u" || typeof RTCRtpTransceiver > "u") { D.warn("detectDeviceImpl() | unsupported react-native-webrtc without RTCPeerConnection or RTCRtpTransceiver, forgot to call registerGlobals() on it?"); return } return "ReactNative106" } else { D.debug("detectDeviceImpl() | browser detected [userAgent:%s, parsed:%o]", _.ua, _); const ee = _.browser, K = (k = ee.name) == null ? void 0 : k.toLowerCase(), N = parseInt(ee.major ?? "0"), Q = (L = _.engine.name) == null ? void 0 : L.toLowerCase(), Z = _.os, le = (H = Z.name) == null ? void 0 : H.toLowerCase(), X = parseFloat(Z.version ?? "0"), he = (V = _.device.model) == null ? void 0 : V.toLowerCase(), ue = le === "ios" || he === "ipad", ye = K && ["chrome", "chromium", "mobile chrome", "chrome webview", "chrome headless"].includes(K), se = K && ["firefox", "mobile firefox", "mobile focus"].includes(K), _e = K && ["safari", "mobile safari"].includes(K), Se = K && ["edge"].includes(K); if ((ye || Se) && !ue && N >= 111) return "Chrome111"; if (ye && !ue && N >= 74 || Se && !ue && N >= 88) return "Chrome74"; if (se && !ue && N >= 120) return "Firefox120"; if (se && ue && X >= 14.3) return "Safari12"; if (_e && N >= 12 && typeof RTCRtpTransceiver < "u" && RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")) return "Safari12"; if (Q === "webkit" && ue && typeof RTCRtpTransceiver < "u" && RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection")) return "Safari12"; if (Q === "blink") { const we = _.ua.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i); return we ? Number(we[1]) >= 111 ? "Chrome111" : "Chrome74" : "Chrome111" } else { D.warn("detectDeviceImpl() | browser not supported [name:%s, version:%s]", K, N); return } } } }, 6298(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(754), l(4636), l(9506), l(7165)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.StreamCipher, P = d.algo, b = [], u = [], g = [], S = P.Rabbit = h.extend({ _doReset: function () { for (var y = this._key.words, v = this.cfg.iv, D = 0; D < 4; D++)y[D] = (y[D] << 8 | y[D] >>> 24) & 16711935 | (y[D] << 24 | y[D] >>> 8) & 4278255360; var M = this._X = [y[0], y[3] << 16 | y[2] >>> 16, y[1], y[0] << 16 | y[3] >>> 16, y[2], y[1] << 16 | y[0] >>> 16, y[3], y[2] << 16 | y[1] >>> 16], W = this._C = [y[2] << 16 | y[2] >>> 16, y[0] & 4294901760 | y[1] & 65535, y[3] << 16 | y[3] >>> 16, y[1] & 4294901760 | y[2] & 65535, y[0] << 16 | y[0] >>> 16, y[2] & 4294901760 | y[3] & 65535, y[1] << 16 | y[1] >>> 16, y[3] & 4294901760 | y[0] & 65535]; this._b = 0; for (var D = 0; D < 4; D++)R.call(this); for (var D = 0; D < 8; D++)W[D] ^= M[D + 4 & 7]; if (v) { var I = v.words, E = I[0], _ = I[1], k = (E << 8 | E >>> 24) & 16711935 | (E << 24 | E >>> 8) & 4278255360, L = (_ << 8 | _ >>> 24) & 16711935 | (_ << 24 | _ >>> 8) & 4278255360, H = k >>> 16 | L & 4294901760, V = L << 16 | k & 65535; W[0] ^= k, W[1] ^= H, W[2] ^= L, W[3] ^= V, W[4] ^= k, W[5] ^= H, W[6] ^= L, W[7] ^= V; for (var D = 0; D < 4; D++)R.call(this) } }, _doProcessBlock: function (y, v) { var D = this._X; R.call(this), b[0] = D[0] ^ D[5] >>> 16 ^ D[3] << 16, b[1] = D[2] ^ D[7] >>> 16 ^ D[5] << 16, b[2] = D[4] ^ D[1] >>> 16 ^ D[7] << 16, b[3] = D[6] ^ D[3] >>> 16 ^ D[1] << 16; for (var M = 0; M < 4; M++)b[M] = (b[M] << 8 | b[M] >>> 24) & 16711935 | (b[M] << 24 | b[M] >>> 8) & 4278255360, y[v + M] ^= b[M] }, blockSize: 128 / 32, ivSize: 64 / 32 }); function R() { for (var y = this._X, v = this._C, D = 0; D < 8; D++)u[D] = v[D]; v[0] = v[0] + 1295307597 + this._b | 0, v[1] = v[1] + 3545052371 + (v[0] >>> 0 < u[0] >>> 0 ? 1 : 0) | 0, v[2] = v[2] + 886263092 + (v[1] >>> 0 < u[1] >>> 0 ? 1 : 0) | 0, v[3] = v[3] + 1295307597 + (v[2] >>> 0 < u[2] >>> 0 ? 1 : 0) | 0, v[4] = v[4] + 3545052371 + (v[3] >>> 0 < u[3] >>> 0 ? 1 : 0) | 0, v[5] = v[5] + 886263092 + (v[4] >>> 0 < u[4] >>> 0 ? 1 : 0) | 0, v[6] = v[6] + 1295307597 + (v[5] >>> 0 < u[5] >>> 0 ? 1 : 0) | 0, v[7] = v[7] + 3545052371 + (v[6] >>> 0 < u[6] >>> 0 ? 1 : 0) | 0, this._b = v[7] >>> 0 < u[7] >>> 0 ? 1 : 0; for (var D = 0; D < 8; D++) { var M = y[D] + v[D], W = M & 65535, I = M >>> 16, E = ((W * W >>> 17) + W * I >>> 15) + I * I, _ = ((M & 4294901760) * M | 0) + ((M & 65535) * M | 0); g[D] = E ^ _ } y[0] = g[0] + (g[7] << 16 | g[7] >>> 16) + (g[6] << 16 | g[6] >>> 16) | 0, y[1] = g[1] + (g[0] << 8 | g[0] >>> 24) + g[7] | 0, y[2] = g[2] + (g[1] << 16 | g[1] >>> 16) + (g[0] << 16 | g[0] >>> 16) | 0, y[3] = g[3] + (g[2] << 8 | g[2] >>> 24) + g[1] | 0, y[4] = g[4] + (g[3] << 16 | g[3] >>> 16) + (g[2] << 16 | g[2] >>> 16) | 0, y[5] = g[5] + (g[4] << 8 | g[4] >>> 24) + g[3] | 0, y[6] = g[6] + (g[5] << 16 | g[5] >>> 16) + (g[4] << 16 | g[4] >>> 16) | 0, y[7] = g[7] + (g[6] << 8 | g[6] >>> 24) + g[5] | 0 } d.Rabbit = h._createHelper(S) }(), p.Rabbit }) }, 6308(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(3009)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.WordArray, P = d.algo, b = P.SHA256, u = P.SHA224 = b.extend({ _doReset: function () { this._hash = new h.init([3238371032, 914150663, 812702999, 4144912697, 4290775857, 1750603025, 1694076839, 3204075428]) }, _doFinalize: function () { var g = b._doFinalize.call(this); return g.sigBytes -= 4, g } }); d.SHA224 = b._createHelper(u), d.HmacSHA224 = b._createHmacHelper(u) }(), p.SHA224 }) }, 6372(a, c, l) {
                (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) {/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return p.mode.CTRGladman = function () { var d = p.lib.BlockCipherMode.extend(); function f(b) { if ((b >> 24 & 255) === 255) { var u = b >> 16 & 255, g = b >> 8 & 255, S = b & 255; u === 255 ? (u = 0, g === 255 ? (g = 0, S === 255 ? S = 0 : ++S) : ++g) : ++u, b = 0, b += u << 16, b += g << 8, b += S } else b += 16777216; return b } function h(b) { return (b[0] = f(b[0])) === 0 && (b[1] = f(b[1])), b } var P = d.Encryptor = d.extend({ processBlock: function (b, u) { var g = this._cipher, S = g.blockSize, R = this._iv, y = this._counter; R && (y = this._counter = R.slice(0), this._iv = void 0), h(y); var v = y.slice(0); g.encryptBlock(v, 0); for (var D = 0; D < S; D++)b[u + D] ^= v[D] } }); return d.Decryptor = P, d }(), p.mode.CTRGladman
                })
            }, 6440(a, c, l) { (function (p, d) { a.exports = d(l(9021)) })(this, function (p) { return function () { if (typeof ArrayBuffer == "function") { var d = p, f = d.lib, h = f.WordArray, P = h.init, b = h.init = function (u) { if (u instanceof ArrayBuffer && (u = new Uint8Array(u)), (u instanceof Int8Array || typeof Uint8ClampedArray < "u" && u instanceof Uint8ClampedArray || u instanceof Int16Array || u instanceof Uint16Array || u instanceof Int32Array || u instanceof Uint32Array || u instanceof Float32Array || u instanceof Float64Array) && (u = new Uint8Array(u.buffer, u.byteOffset, u.byteLength)), u instanceof Uint8Array) { for (var g = u.byteLength, S = [], R = 0; R < g; R++)S[R >>> 2] |= u[R] << 24 - R % 4 * 8; P.call(this, S, g) } else P.apply(this, arguments) }; b.prototype = h } }(), p.lib.WordArray }) }, 6565(a, c, l) { l.d(c, { x: () => p }); var p = { HIGH_QUALITY: "high_quality", BALANCED: "balanced", BANDWIDTH_OPTIMIZED: "bandwidth_optimized" } }, 6585(a) { var c = 1e3, l = c * 60, p = l * 60, d = p * 24, f = d * 7, h = d * 365.25; a.exports = function (S, R) { R = R || {}; var y = typeof S; if (y === "string" && S.length > 0) return P(S); if (y === "number" && isFinite(S)) return R.long ? u(S) : b(S); throw new Error("val is not a non-empty string or a valid number. val=" + JSON.stringify(S)) }; function P(S) { if (S = String(S), !(S.length > 100)) { var R = /^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(S); if (R) { var y = parseFloat(R[1]), v = (R[2] || "ms").toLowerCase(); switch (v) { case "years": case "year": case "yrs": case "yr": case "y": return y * h; case "weeks": case "week": case "w": return y * f; case "days": case "day": case "d": return y * d; case "hours": case "hour": case "hrs": case "hr": case "h": return y * p; case "minutes": case "minute": case "mins": case "min": case "m": return y * l; case "seconds": case "second": case "secs": case "sec": case "s": return y * c; case "milliseconds": case "millisecond": case "msecs": case "msec": case "ms": return y; default: return } } } } function b(S) { var R = Math.abs(S); return R >= d ? Math.round(S / d) + "d" : R >= p ? Math.round(S / p) + "h" : R >= l ? Math.round(S / l) + "m" : R >= c ? Math.round(S / c) + "s" : S + "ms" } function u(S) { var R = Math.abs(S); return R >= d ? g(S, R, d, "day") : R >= p ? g(S, R, p, "hour") : R >= l ? g(S, R, l, "minute") : R >= c ? g(S, R, c, "second") : S + " ms" } function g(S, R, y, v) { var D = R >= y * 1.5; return Math.round(S / y) + " " + v + (D ? "s" : "") } }, 6746(a, c, l) { l.d(c, { KS: () => d, fo: () => p }); var p = Object.freeze({ SetKey: "setKey", RatchetRequest: "ratchetRequest", KeyRatcheted: "keyRatcheted" }), d = Object.freeze({ ParticipantEncryptionStatusChanged: "participantEncryptionStatusChanged", EncryptionError: "encryptionError", E2EEStateChange: "e2eeStateChange" }) }, 6880(a) { (function (c, l) { a.exports = l() })(this, function () { return function (c) { var l = {}; function p(d) { if (l[d]) return l[d].exports; var f = l[d] = { i: d, l: !1, exports: {} }; return c[d].call(f.exports, f, f.exports, p), f.l = !0, f.exports } return p.m = c, p.c = l, p.d = function (d, f, h) { p.o(d, f) || Object.defineProperty(d, f, { enumerable: !0, get: h }) }, p.r = function (d) { typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(d, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(d, "__esModule", { value: !0 }) }, p.t = function (d, f) { if (1 & f && (d = p(d)), 8 & f || 4 & f && typeof d == "object" && d && d.__esModule) return d; var h = Object.create(null); if (p.r(h), Object.defineProperty(h, "default", { enumerable: !0, value: d }), 2 & f && typeof d != "string") for (var P in d) p.d(h, P, (function (b) { return d[b] }).bind(null, P)); return h }, p.n = function (d) { var f = d && d.__esModule ? function () { return d.default } : function () { return d }; return p.d(f, "a", f), f }, p.o = function (d, f) { return Object.prototype.hasOwnProperty.call(d, f) }, p.p = "", p(p.s = 90) }({ 17: function (c, l, p) { l.__esModule = !0, l.default = void 0; var d = p(18), f = function () { function h() { } return h.getFirstMatch = function (P, b) { var u = b.match(P); return u && u.length > 0 && u[1] || "" }, h.getSecondMatch = function (P, b) { var u = b.match(P); return u && u.length > 1 && u[2] || "" }, h.matchAndReturnConst = function (P, b, u) { if (P.test(b)) return u }, h.getWindowsVersionName = function (P) { switch (P) { case "NT": return "NT"; case "XP": return "XP"; case "NT 5.0": return "2000"; case "NT 5.1": return "XP"; case "NT 5.2": return "2003"; case "NT 6.0": return "Vista"; case "NT 6.1": return "7"; case "NT 6.2": return "8"; case "NT 6.3": return "8.1"; case "NT 10.0": return "10"; default: return } }, h.getMacOSVersionName = function (P) { var b = P.split(".").splice(0, 2).map(function (S) { return parseInt(S, 10) || 0 }); b.push(0); var u = b[0], g = b[1]; if (u === 10) switch (g) { case 5: return "Leopard"; case 6: return "Snow Leopard"; case 7: return "Lion"; case 8: return "Mountain Lion"; case 9: return "Mavericks"; case 10: return "Yosemite"; case 11: return "El Capitan"; case 12: return "Sierra"; case 13: return "High Sierra"; case 14: return "Mojave"; case 15: return "Catalina"; default: return }switch (u) { case 11: return "Big Sur"; case 12: return "Monterey"; case 13: return "Ventura"; case 14: return "Sonoma"; case 15: return "Sequoia"; default: return } }, h.getAndroidVersionName = function (P) { var b = P.split(".").splice(0, 2).map(function (u) { return parseInt(u, 10) || 0 }); if (b.push(0), !(b[0] === 1 && b[1] < 5)) return b[0] === 1 && b[1] < 6 ? "Cupcake" : b[0] === 1 && b[1] >= 6 ? "Donut" : b[0] === 2 && b[1] < 2 ? "Eclair" : b[0] === 2 && b[1] === 2 ? "Froyo" : b[0] === 2 && b[1] > 2 ? "Gingerbread" : b[0] === 3 ? "Honeycomb" : b[0] === 4 && b[1] < 1 ? "Ice Cream Sandwich" : b[0] === 4 && b[1] < 4 ? "Jelly Bean" : b[0] === 4 && b[1] >= 4 ? "KitKat" : b[0] === 5 ? "Lollipop" : b[0] === 6 ? "Marshmallow" : b[0] === 7 ? "Nougat" : b[0] === 8 ? "Oreo" : b[0] === 9 ? "Pie" : void 0 }, h.getVersionPrecision = function (P) { return P.split(".").length }, h.compareVersions = function (P, b, u) { u === void 0 && (u = !1); var g = h.getVersionPrecision(P), S = h.getVersionPrecision(b), R = Math.max(g, S), y = 0, v = h.map([P, b], function (D) { var M = R - h.getVersionPrecision(D), W = D + new Array(M + 1).join(".0"); return h.map(W.split("."), function (I) { return new Array(20 - I.length).join("0") + I }).reverse() }); for (u && (y = R - Math.min(g, S)), R -= 1; R >= y;) { if (v[0][R] > v[1][R]) return 1; if (v[0][R] === v[1][R]) { if (R === y) return 0; R -= 1 } else if (v[0][R] < v[1][R]) return -1 } }, h.map = function (P, b) { var u, g = []; if (Array.prototype.map) return Array.prototype.map.call(P, b); for (u = 0; u < P.length; u += 1)g.push(b(P[u])); return g }, h.find = function (P, b) { var u, g; if (Array.prototype.find) return Array.prototype.find.call(P, b); for (u = 0, g = P.length; u < g; u += 1) { var S = P[u]; if (b(S, u)) return S } }, h.assign = function (P) { for (var b, u, g = P, S = arguments.length, R = new Array(S > 1 ? S - 1 : 0), y = 1; y < S; y++)R[y - 1] = arguments[y]; if (Object.assign) return Object.assign.apply(Object, [P].concat(R)); var v = function () { var D = R[b]; typeof D == "object" && D !== null && Object.keys(D).forEach(function (M) { g[M] = D[M] }) }; for (b = 0, u = R.length; b < u; b += 1)v(); return P }, h.getBrowserAlias = function (P) { return d.BROWSER_ALIASES_MAP[P] }, h.getBrowserTypeByAlias = function (P) { return d.BROWSER_MAP[P] || "" }, h }(); l.default = f, c.exports = l.default }, 18: function (c, l, p) { l.__esModule = !0, l.ENGINE_MAP = l.OS_MAP = l.PLATFORMS_MAP = l.BROWSER_MAP = l.BROWSER_ALIASES_MAP = void 0, l.BROWSER_ALIASES_MAP = { AmazonBot: "amazonbot", "Amazon Silk": "amazon_silk", "Android Browser": "android", BaiduSpider: "baiduspider", Bada: "bada", BingCrawler: "bingcrawler", BlackBerry: "blackberry", "ChatGPT-User": "chatgpt_user", Chrome: "chrome", ClaudeBot: "claudebot", Chromium: "chromium", Diffbot: "diffbot", DuckDuckBot: "duckduckbot", Electron: "electron", Epiphany: "epiphany", FacebookExternalHit: "facebookexternalhit", Firefox: "firefox", Focus: "focus", Generic: "generic", "Google Search": "google_search", Googlebot: "googlebot", GPTBot: "gptbot", "Internet Explorer": "ie", InternetArchiveCrawler: "internetarchivecrawler", "K-Meleon": "k_meleon", LibreWolf: "librewolf", Maxthon: "maxthon", "Meta-ExternalAds": "meta_externalads", "Meta-ExternalAgent": "meta_externalagent", "Meta-ExternalFetcher": "meta_externalfetcher", "Meta-WebIndexer": "meta_webindexer", "Microsoft Edge": "edge", "MZ Browser": "mz", "NAVER Whale Browser": "naver", "OAI-SearchBot": "oai_searchbot", Omgilibot: "omgilibot", Opera: "opera", "Opera Coast": "opera_coast", "Pale Moon": "pale_moon", PerplexityBot: "perplexitybot", "Perplexity-User": "perplexity_user", PhantomJS: "phantomjs", PingdomBot: "pingdombot", Puffin: "puffin", QQ: "qq", QQLite: "qqlite", QupZilla: "qupzilla", Roku: "roku", Safari: "safari", Sailfish: "sailfish", "Samsung Internet for Android": "samsung_internet", SeaMonkey: "seamonkey", Sleipnir: "sleipnir", "Sogou Browser": "sogou", Swing: "swing", Tizen: "tizen", "UC Browser": "uc", Vivaldi: "vivaldi", "WebOS Browser": "webos", WeChat: "wechat", YahooSlurp: "yahooslurp", "Yandex Browser": "yandex", YandexBot: "yandexbot", YouBot: "youbot" }, l.BROWSER_MAP = { amazonbot: "AmazonBot", amazon_silk: "Amazon Silk", android: "Android Browser", baiduspider: "BaiduSpider", bada: "Bada", bingcrawler: "BingCrawler", blackberry: "BlackBerry", chatgpt_user: "ChatGPT-User", chrome: "Chrome", claudebot: "ClaudeBot", chromium: "Chromium", diffbot: "Diffbot", duckduckbot: "DuckDuckBot", edge: "Microsoft Edge", electron: "Electron", epiphany: "Epiphany", facebookexternalhit: "FacebookExternalHit", firefox: "Firefox", focus: "Focus", generic: "Generic", google_search: "Google Search", googlebot: "Googlebot", gptbot: "GPTBot", ie: "Internet Explorer", internetarchivecrawler: "InternetArchiveCrawler", k_meleon: "K-Meleon", librewolf: "LibreWolf", maxthon: "Maxthon", meta_externalads: "Meta-ExternalAds", meta_externalagent: "Meta-ExternalAgent", meta_externalfetcher: "Meta-ExternalFetcher", meta_webindexer: "Meta-WebIndexer", mz: "MZ Browser", naver: "NAVER Whale Browser", oai_searchbot: "OAI-SearchBot", omgilibot: "Omgilibot", opera: "Opera", opera_coast: "Opera Coast", pale_moon: "Pale Moon", perplexitybot: "PerplexityBot", perplexity_user: "Perplexity-User", phantomjs: "PhantomJS", pingdombot: "PingdomBot", puffin: "Puffin", qq: "QQ Browser", qqlite: "QQ Browser Lite", qupzilla: "QupZilla", roku: "Roku", safari: "Safari", sailfish: "Sailfish", samsung_internet: "Samsung Internet for Android", seamonkey: "SeaMonkey", sleipnir: "Sleipnir", sogou: "Sogou Browser", swing: "Swing", tizen: "Tizen", uc: "UC Browser", vivaldi: "Vivaldi", webos: "WebOS Browser", wechat: "WeChat", yahooslurp: "YahooSlurp", yandex: "Yandex Browser", yandexbot: "YandexBot", youbot: "YouBot" }, l.PLATFORMS_MAP = { bot: "bot", desktop: "desktop", mobile: "mobile", tablet: "tablet", tv: "tv" }, l.OS_MAP = { Android: "Android", Bada: "Bada", BlackBerry: "BlackBerry", ChromeOS: "Chrome OS", HarmonyOS: "HarmonyOS", iOS: "iOS", Linux: "Linux", MacOS: "macOS", PlayStation4: "PlayStation 4", Roku: "Roku", Tizen: "Tizen", WebOS: "WebOS", Windows: "Windows", WindowsPhone: "Windows Phone" }, l.ENGINE_MAP = { Blink: "Blink", EdgeHTML: "EdgeHTML", Gecko: "Gecko", Presto: "Presto", Trident: "Trident", WebKit: "WebKit" } }, 90: function (c, l, p) { l.__esModule = !0, l.default = void 0; var d, f = (d = p(91)) && d.__esModule ? d : { default: d }, h = p(18); function P(u, g) { for (var S = 0; S < g.length; S++) { var R = g[S]; R.enumerable = R.enumerable || !1, R.configurable = !0, "value" in R && (R.writable = !0), Object.defineProperty(u, R.key, R) } } var b = function () { function u() { } var g, S, R; return u.getParser = function (y, v) { if (v === void 0 && (v = !1), typeof y != "string") throw new Error("UserAgent should be a string"); return new f.default(y, v) }, u.parse = function (y) { return new f.default(y).getResult() }, g = u, R = [{ key: "BROWSER_MAP", get: function () { return h.BROWSER_MAP } }, { key: "ENGINE_MAP", get: function () { return h.ENGINE_MAP } }, { key: "OS_MAP", get: function () { return h.OS_MAP } }, { key: "PLATFORMS_MAP", get: function () { return h.PLATFORMS_MAP } }], (S = null) && P(g.prototype, S), R && P(g, R), u }(); l.default = b, c.exports = l.default }, 91: function (c, l, p) { l.__esModule = !0, l.default = void 0; var d = u(p(92)), f = u(p(93)), h = u(p(94)), P = u(p(95)), b = u(p(17)); function u(S) { return S && S.__esModule ? S : { default: S } } var g = function () { function S(y, v) { if (v === void 0 && (v = !1), y == null || y === "") throw new Error("UserAgent parameter can't be empty"); this._ua = y, this.parsedResult = {}, v !== !0 && this.parse() } var R = S.prototype; return R.getUA = function () { return this._ua }, R.test = function (y) { return y.test(this._ua) }, R.parseBrowser = function () { var y = this; this.parsedResult.browser = {}; var v = b.default.find(d.default, function (D) { if (typeof D.test == "function") return D.test(y); if (Array.isArray(D.test)) return D.test.some(function (M) { return y.test(M) }); throw new Error("Browser's test function is not valid") }); return v && (this.parsedResult.browser = v.describe(this.getUA())), this.parsedResult.browser }, R.getBrowser = function () { return this.parsedResult.browser ? this.parsedResult.browser : this.parseBrowser() }, R.getBrowserName = function (y) { return y ? String(this.getBrowser().name).toLowerCase() || "" : this.getBrowser().name || "" }, R.getBrowserVersion = function () { return this.getBrowser().version }, R.getOS = function () { return this.parsedResult.os ? this.parsedResult.os : this.parseOS() }, R.parseOS = function () { var y = this; this.parsedResult.os = {}; var v = b.default.find(f.default, function (D) { if (typeof D.test == "function") return D.test(y); if (Array.isArray(D.test)) return D.test.some(function (M) { return y.test(M) }); throw new Error("Browser's test function is not valid") }); return v && (this.parsedResult.os = v.describe(this.getUA())), this.parsedResult.os }, R.getOSName = function (y) { var v = this.getOS().name; return y ? String(v).toLowerCase() || "" : v || "" }, R.getOSVersion = function () { return this.getOS().version }, R.getPlatform = function () { return this.parsedResult.platform ? this.parsedResult.platform : this.parsePlatform() }, R.getPlatformType = function (y) { y === void 0 && (y = !1); var v = this.getPlatform().type; return y ? String(v).toLowerCase() || "" : v || "" }, R.parsePlatform = function () { var y = this; this.parsedResult.platform = {}; var v = b.default.find(h.default, function (D) { if (typeof D.test == "function") return D.test(y); if (Array.isArray(D.test)) return D.test.some(function (M) { return y.test(M) }); throw new Error("Browser's test function is not valid") }); return v && (this.parsedResult.platform = v.describe(this.getUA())), this.parsedResult.platform }, R.getEngine = function () { return this.parsedResult.engine ? this.parsedResult.engine : this.parseEngine() }, R.getEngineName = function (y) { return y ? String(this.getEngine().name).toLowerCase() || "" : this.getEngine().name || "" }, R.parseEngine = function () { var y = this; this.parsedResult.engine = {}; var v = b.default.find(P.default, function (D) { if (typeof D.test == "function") return D.test(y); if (Array.isArray(D.test)) return D.test.some(function (M) { return y.test(M) }); throw new Error("Browser's test function is not valid") }); return v && (this.parsedResult.engine = v.describe(this.getUA())), this.parsedResult.engine }, R.parse = function () { return this.parseBrowser(), this.parseOS(), this.parsePlatform(), this.parseEngine(), this }, R.getResult = function () { return b.default.assign({}, this.parsedResult) }, R.satisfies = function (y) { var v = this, D = {}, M = 0, W = {}, I = 0; if (Object.keys(y).forEach(function (K) { var N = y[K]; typeof N == "string" ? (W[K] = N, I += 1) : typeof N == "object" && (D[K] = N, M += 1) }), M > 0) { var E = Object.keys(D), _ = b.default.find(E, function (K) { return v.isOS(K) }); if (_) { var k = this.satisfies(D[_]); if (k !== void 0) return k } var L = b.default.find(E, function (K) { return v.isPlatform(K) }); if (L) { var H = this.satisfies(D[L]); if (H !== void 0) return H } } if (I > 0) { var V = Object.keys(W), ee = b.default.find(V, function (K) { return v.isBrowser(K, !0) }); if (ee !== void 0) return this.compareVersion(W[ee]) } }, R.isBrowser = function (y, v) { v === void 0 && (v = !1); var D = this.getBrowserName().toLowerCase(), M = y.toLowerCase(), W = b.default.getBrowserTypeByAlias(M); return v && W && (M = W.toLowerCase()), M === D }, R.compareVersion = function (y) { var v = [0], D = y, M = !1, W = this.getBrowserVersion(); if (typeof W == "string") return y[0] === ">" || y[0] === "<" ? (D = y.substr(1), y[1] === "=" ? (M = !0, D = y.substr(2)) : v = [], y[0] === ">" ? v.push(1) : v.push(-1)) : y[0] === "=" ? D = y.substr(1) : y[0] === "~" && (M = !0, D = y.substr(1)), v.indexOf(b.default.compareVersions(W, D, M)) > -1 }, R.isOS = function (y) { return this.getOSName(!0) === String(y).toLowerCase() }, R.isPlatform = function (y) { return this.getPlatformType(!0) === String(y).toLowerCase() }, R.isEngine = function (y) { return this.getEngineName(!0) === String(y).toLowerCase() }, R.is = function (y, v) { return v === void 0 && (v = !1), this.isBrowser(y, v) || this.isOS(y) || this.isPlatform(y) }, R.some = function (y) { var v = this; return y === void 0 && (y = []), y.some(function (D) { return v.is(D) }) }, S }(); l.default = g, c.exports = l.default }, 92: function (c, l, p) { l.__esModule = !0, l.default = void 0; var d, f = (d = p(17)) && d.__esModule ? d : { default: d }, h = /version\/(\d+(\.?_?\d+)+)/i, P = [{ test: [/gptbot/i], describe: function (b) { var u = { name: "GPTBot" }, g = f.default.getFirstMatch(/gptbot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/chatgpt-user/i], describe: function (b) { var u = { name: "ChatGPT-User" }, g = f.default.getFirstMatch(/chatgpt-user\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/oai-searchbot/i], describe: function (b) { var u = { name: "OAI-SearchBot" }, g = f.default.getFirstMatch(/oai-searchbot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/claudebot/i, /claude-web/i, /claude-user/i, /claude-searchbot/i], describe: function (b) { var u = { name: "ClaudeBot" }, g = f.default.getFirstMatch(/(?:claudebot|claude-web|claude-user|claude-searchbot)\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/omgilibot/i, /webzio-extended/i], describe: function (b) { var u = { name: "Omgilibot" }, g = f.default.getFirstMatch(/(?:omgilibot|webzio-extended)\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/diffbot/i], describe: function (b) { var u = { name: "Diffbot" }, g = f.default.getFirstMatch(/diffbot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/perplexitybot/i], describe: function (b) { var u = { name: "PerplexityBot" }, g = f.default.getFirstMatch(/perplexitybot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/perplexity-user/i], describe: function (b) { var u = { name: "Perplexity-User" }, g = f.default.getFirstMatch(/perplexity-user\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/youbot/i], describe: function (b) { var u = { name: "YouBot" }, g = f.default.getFirstMatch(/youbot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/meta-webindexer/i], describe: function (b) { var u = { name: "Meta-WebIndexer" }, g = f.default.getFirstMatch(/meta-webindexer\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/meta-externalads/i], describe: function (b) { var u = { name: "Meta-ExternalAds" }, g = f.default.getFirstMatch(/meta-externalads\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/meta-externalagent/i], describe: function (b) { var u = { name: "Meta-ExternalAgent" }, g = f.default.getFirstMatch(/meta-externalagent\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/meta-externalfetcher/i], describe: function (b) { var u = { name: "Meta-ExternalFetcher" }, g = f.default.getFirstMatch(/meta-externalfetcher\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/googlebot/i], describe: function (b) { var u = { name: "Googlebot" }, g = f.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/amazonbot/i], describe: function (b) { var u = { name: "AmazonBot" }, g = f.default.getFirstMatch(/amazonbot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/bingbot/i], describe: function (b) { var u = { name: "BingCrawler" }, g = f.default.getFirstMatch(/bingbot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/baiduspider/i], describe: function (b) { var u = { name: "BaiduSpider" }, g = f.default.getFirstMatch(/baiduspider\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/duckduckbot/i], describe: function (b) { var u = { name: "DuckDuckBot" }, g = f.default.getFirstMatch(/duckduckbot\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/ia_archiver/i], describe: function (b) { var u = { name: "InternetArchiveCrawler" }, g = f.default.getFirstMatch(/ia_archiver\/(\d+(\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/facebookexternalhit/i, /facebookcatalog/i], describe: function () { return { name: "FacebookExternalHit" } } }, { test: [/yahoo!?[\s/]*slurp/i], describe: function () { return { name: "YahooSlurp" } } }, { test: [/yandexbot/i, /yandexmobilebot/i], describe: function () { return { name: "YandexBot" } } }, { test: [/pingdom/i], describe: function () { return { name: "PingdomBot" } } }, { test: [/opera/i], describe: function (b) { var u = { name: "Opera" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/opr\/|opios/i], describe: function (b) { var u = { name: "Opera" }, g = f.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/SamsungBrowser/i], describe: function (b) { var u = { name: "Samsung Internet for Android" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/Whale/i], describe: function (b) { var u = { name: "NAVER Whale Browser" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/PaleMoon/i], describe: function (b) { var u = { name: "Pale Moon" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:PaleMoon)[\s/](\d+(?:\.\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/MZBrowser/i], describe: function (b) { var u = { name: "MZ Browser" }, g = f.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/focus/i], describe: function (b) { var u = { name: "Focus" }, g = f.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/swing/i], describe: function (b) { var u = { name: "Swing" }, g = f.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/coast/i], describe: function (b) { var u = { name: "Opera Coast" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/opt\/\d+(?:.?_?\d+)+/i], describe: function (b) { var u = { name: "Opera Touch" }, g = f.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/yabrowser/i], describe: function (b) { var u = { name: "Yandex Browser" }, g = f.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/ucbrowser/i], describe: function (b) { var u = { name: "UC Browser" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/Maxthon|mxios/i], describe: function (b) { var u = { name: "Maxthon" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/epiphany/i], describe: function (b) { var u = { name: "Epiphany" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/puffin/i], describe: function (b) { var u = { name: "Puffin" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/sleipnir/i], describe: function (b) { var u = { name: "Sleipnir" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/k-meleon/i], describe: function (b) { var u = { name: "K-Meleon" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/micromessenger/i], describe: function (b) { var u = { name: "WeChat" }, g = f.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/qqbrowser/i], describe: function (b) { var u = { name: /qqbrowserlite/i.test(b) ? "QQ Browser Lite" : "QQ Browser" }, g = f.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/msie|trident/i], describe: function (b) { var u = { name: "Internet Explorer" }, g = f.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/\sedg\//i], describe: function (b) { var u = { name: "Microsoft Edge" }, g = f.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/edg([ea]|ios)/i], describe: function (b) { var u = { name: "Microsoft Edge" }, g = f.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/vivaldi/i], describe: function (b) { var u = { name: "Vivaldi" }, g = f.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/seamonkey/i], describe: function (b) { var u = { name: "SeaMonkey" }, g = f.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/sailfish/i], describe: function (b) { var u = { name: "Sailfish" }, g = f.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i, b); return g && (u.version = g), u } }, { test: [/silk/i], describe: function (b) { var u = { name: "Amazon Silk" }, g = f.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/phantom/i], describe: function (b) { var u = { name: "PhantomJS" }, g = f.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/slimerjs/i], describe: function (b) { var u = { name: "SlimerJS" }, g = f.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/blackberry|\bbb\d+/i, /rim\stablet/i], describe: function (b) { var u = { name: "BlackBerry" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/(web|hpw)[o0]s/i], describe: function (b) { var u = { name: "WebOS Browser" }, g = f.default.getFirstMatch(h, b) || f.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/bada/i], describe: function (b) { var u = { name: "Bada" }, g = f.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/tizen/i], describe: function (b) { var u = { name: "Tizen" }, g = f.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/qupzilla/i], describe: function (b) { var u = { name: "QupZilla" }, g = f.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/librewolf/i], describe: function (b) { var u = { name: "LibreWolf" }, g = f.default.getFirstMatch(/(?:librewolf)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/firefox|iceweasel|fxios/i], describe: function (b) { var u = { name: "Firefox" }, g = f.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/electron/i], describe: function (b) { var u = { name: "Electron" }, g = f.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/sogoumobilebrowser/i, /metasr/i, /se 2\.[x]/i], describe: function (b) { var u = { name: "Sogou Browser" }, g = f.default.getFirstMatch(/(?:sogoumobilebrowser)[\s/](\d+(\.?_?\d+)+)/i, b), S = f.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i, b), R = f.default.getFirstMatch(/se ([\d.]+)x/i, b), y = g || S || R; return y && (u.version = y), u } }, { test: [/MiuiBrowser/i], describe: function (b) { var u = { name: "Miui" }, g = f.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/chromium/i], describe: function (b) { var u = { name: "Chromium" }, g = f.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i, b) || f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/chrome|crios|crmo/i], describe: function (b) { var u = { name: "Chrome" }, g = f.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/GSA/i], describe: function (b) { var u = { name: "Google Search" }, g = f.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: function (b) { var u = !b.test(/like android/i), g = b.test(/android/i); return u && g }, describe: function (b) { var u = { name: "Android Browser" }, g = f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/playstation 4/i], describe: function (b) { var u = { name: "PlayStation 4" }, g = f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/safari|applewebkit/i], describe: function (b) { var u = { name: "Safari" }, g = f.default.getFirstMatch(h, b); return g && (u.version = g), u } }, { test: [/.*/i], describe: function (b) { var u = b.search("\\(") !== -1 ? /^(.*)\/(.*)[ \t]\((.*)/ : /^(.*)\/(.*) /; return { name: f.default.getFirstMatch(u, b), version: f.default.getSecondMatch(u, b) } } }]; l.default = P, c.exports = l.default }, 93: function (c, l, p) { l.__esModule = !0, l.default = void 0; var d, f = (d = p(17)) && d.__esModule ? d : { default: d }, h = p(18), P = [{ test: [/Roku\/DVP/], describe: function (b) { var u = f.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i, b); return { name: h.OS_MAP.Roku, version: u } } }, { test: [/windows phone/i], describe: function (b) { var u = f.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i, b); return { name: h.OS_MAP.WindowsPhone, version: u } } }, { test: [/windows /i], describe: function (b) { var u = f.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i, b), g = f.default.getWindowsVersionName(u); return { name: h.OS_MAP.Windows, version: u, versionName: g } } }, { test: [/Macintosh(.*?) FxiOS(.*?)\//], describe: function (b) { var u = { name: h.OS_MAP.iOS }, g = f.default.getSecondMatch(/(Version\/)(\d[\d.]+)/, b); return g && (u.version = g), u } }, { test: [/macintosh/i], describe: function (b) { var u = f.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i, b).replace(/[_\s]/g, "."), g = f.default.getMacOSVersionName(u), S = { name: h.OS_MAP.MacOS, version: u }; return g && (S.versionName = g), S } }, { test: [/(ipod|iphone|ipad)/i], describe: function (b) { var u = f.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i, b).replace(/[_\s]/g, "."); return { name: h.OS_MAP.iOS, version: u } } }, { test: [/OpenHarmony/i], describe: function (b) { var u = f.default.getFirstMatch(/OpenHarmony\s+(\d+(\.\d+)*)/i, b); return { name: h.OS_MAP.HarmonyOS, version: u } } }, { test: function (b) { var u = !b.test(/like android/i), g = b.test(/android/i); return u && g }, describe: function (b) { var u = f.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i, b), g = f.default.getAndroidVersionName(u), S = { name: h.OS_MAP.Android, version: u }; return g && (S.versionName = g), S } }, { test: [/(web|hpw)[o0]s/i], describe: function (b) { var u = f.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i, b), g = { name: h.OS_MAP.WebOS }; return u && u.length && (g.version = u), g } }, { test: [/blackberry|\bbb\d+/i, /rim\stablet/i], describe: function (b) { var u = f.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i, b) || f.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i, b) || f.default.getFirstMatch(/\bbb(\d+)/i, b); return { name: h.OS_MAP.BlackBerry, version: u } } }, { test: [/bada/i], describe: function (b) { var u = f.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i, b); return { name: h.OS_MAP.Bada, version: u } } }, { test: [/tizen/i], describe: function (b) { var u = f.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i, b); return { name: h.OS_MAP.Tizen, version: u } } }, { test: [/linux/i], describe: function () { return { name: h.OS_MAP.Linux } } }, { test: [/CrOS/], describe: function () { return { name: h.OS_MAP.ChromeOS } } }, { test: [/PlayStation 4/], describe: function (b) { var u = f.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i, b); return { name: h.OS_MAP.PlayStation4, version: u } } }]; l.default = P, c.exports = l.default }, 94: function (c, l, p) { l.__esModule = !0, l.default = void 0; var d, f = (d = p(17)) && d.__esModule ? d : { default: d }, h = p(18), P = [{ test: [/googlebot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Google" } } }, { test: [/amazonbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Amazon" } } }, { test: [/gptbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "OpenAI" } } }, { test: [/chatgpt-user/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "OpenAI" } } }, { test: [/oai-searchbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "OpenAI" } } }, { test: [/baiduspider/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Baidu" } } }, { test: [/bingbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Bing" } } }, { test: [/duckduckbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "DuckDuckGo" } } }, { test: [/claudebot/i, /claude-web/i, /claude-user/i, /claude-searchbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Anthropic" } } }, { test: [/omgilibot/i, /webzio-extended/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Webz.io" } } }, { test: [/diffbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Diffbot" } } }, { test: [/perplexitybot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Perplexity AI" } } }, { test: [/perplexity-user/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Perplexity AI" } } }, { test: [/youbot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "You.com" } } }, { test: [/ia_archiver/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Internet Archive" } } }, { test: [/meta-webindexer/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Meta" } } }, { test: [/meta-externalads/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Meta" } } }, { test: [/meta-externalagent/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Meta" } } }, { test: [/meta-externalfetcher/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Meta" } } }, { test: [/facebookexternalhit/i, /facebookcatalog/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Meta" } } }, { test: [/yahoo/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Yahoo" } } }, { test: [/yandexbot/i, /yandexmobilebot/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Yandex" } } }, { test: [/pingdom/i], describe: function () { return { type: h.PLATFORMS_MAP.bot, vendor: "Pingdom" } } }, { test: [/huawei/i], describe: function (b) { var u = f.default.getFirstMatch(/(can-l01)/i, b) && "Nova", g = { type: h.PLATFORMS_MAP.mobile, vendor: "Huawei" }; return u && (g.model = u), g } }, { test: [/nexus\s*(?:7|8|9|10).*/i], describe: function () { return { type: h.PLATFORMS_MAP.tablet, vendor: "Nexus" } } }, { test: [/ipad/i], describe: function () { return { type: h.PLATFORMS_MAP.tablet, vendor: "Apple", model: "iPad" } } }, { test: [/Macintosh(.*?) FxiOS(.*?)\//], describe: function () { return { type: h.PLATFORMS_MAP.tablet, vendor: "Apple", model: "iPad" } } }, { test: [/kftt build/i], describe: function () { return { type: h.PLATFORMS_MAP.tablet, vendor: "Amazon", model: "Kindle Fire HD 7" } } }, { test: [/silk/i], describe: function () { return { type: h.PLATFORMS_MAP.tablet, vendor: "Amazon" } } }, { test: [/tablet(?! pc)/i], describe: function () { return { type: h.PLATFORMS_MAP.tablet } } }, { test: function (b) { var u = b.test(/ipod|iphone/i), g = b.test(/like (ipod|iphone)/i); return u && !g }, describe: function (b) { var u = f.default.getFirstMatch(/(ipod|iphone)/i, b); return { type: h.PLATFORMS_MAP.mobile, vendor: "Apple", model: u } } }, { test: [/nexus\s*[0-6].*/i, /galaxy nexus/i], describe: function () { return { type: h.PLATFORMS_MAP.mobile, vendor: "Nexus" } } }, { test: [/Nokia/i], describe: function (b) { var u = f.default.getFirstMatch(/Nokia\s+([0-9]+(\.[0-9]+)?)/i, b), g = { type: h.PLATFORMS_MAP.mobile, vendor: "Nokia" }; return u && (g.model = u), g } }, { test: [/[^-]mobi/i], describe: function () { return { type: h.PLATFORMS_MAP.mobile } } }, { test: function (b) { return b.getBrowserName(!0) === "blackberry" }, describe: function () { return { type: h.PLATFORMS_MAP.mobile, vendor: "BlackBerry" } } }, { test: function (b) { return b.getBrowserName(!0) === "bada" }, describe: function () { return { type: h.PLATFORMS_MAP.mobile } } }, { test: function (b) { return b.getBrowserName() === "windows phone" }, describe: function () { return { type: h.PLATFORMS_MAP.mobile, vendor: "Microsoft" } } }, { test: function (b) { var u = Number(String(b.getOSVersion()).split(".")[0]); return b.getOSName(!0) === "android" && u >= 3 }, describe: function () { return { type: h.PLATFORMS_MAP.tablet } } }, { test: function (b) { return b.getOSName(!0) === "android" }, describe: function () { return { type: h.PLATFORMS_MAP.mobile } } }, { test: function (b) { return b.getOSName(!0) === "macos" }, describe: function () { return { type: h.PLATFORMS_MAP.desktop, vendor: "Apple" } } }, { test: function (b) { return b.getOSName(!0) === "windows" }, describe: function () { return { type: h.PLATFORMS_MAP.desktop } } }, { test: function (b) { return b.getOSName(!0) === "linux" }, describe: function () { return { type: h.PLATFORMS_MAP.desktop } } }, { test: function (b) { return b.getOSName(!0) === "playstation 4" }, describe: function () { return { type: h.PLATFORMS_MAP.tv } } }, { test: function (b) { return b.getOSName(!0) === "roku" }, describe: function () { return { type: h.PLATFORMS_MAP.tv } } }]; l.default = P, c.exports = l.default }, 95: function (c, l, p) { l.__esModule = !0, l.default = void 0; var d, f = (d = p(17)) && d.__esModule ? d : { default: d }, h = p(18), P = [{ test: function (b) { return b.getBrowserName(!0) === "microsoft edge" }, describe: function (b) { if (/\sedg\//i.test(b)) return { name: h.ENGINE_MAP.Blink }; var u = f.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i, b); return { name: h.ENGINE_MAP.EdgeHTML, version: u } } }, { test: [/trident/i], describe: function (b) { var u = { name: h.ENGINE_MAP.Trident }, g = f.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: function (b) { return b.test(/presto/i) }, describe: function (b) { var u = { name: h.ENGINE_MAP.Presto }, g = f.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: function (b) { var u = b.test(/gecko/i), g = b.test(/like gecko/i); return u && !g }, describe: function (b) { var u = { name: h.ENGINE_MAP.Gecko }, g = f.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }, { test: [/(apple)?webkit\/537\.36/i], describe: function () { return { name: h.ENGINE_MAP.Blink } } }, { test: [/(apple)?webkit/i], describe: function (b) { var u = { name: h.ENGINE_MAP.WebKit }, g = f.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i, b); return g && (u.version = g), u } }]; l.default = P, c.exports = l.default } }) }) }, 6939(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.mode.CTR = function () { var d = p.lib.BlockCipherMode.extend(), f = d.Encryptor = d.extend({ processBlock: function (h, P) { var b = this._cipher, u = b.blockSize, g = this._iv, S = this._counter; g && (S = this._counter = g.slice(0), this._iv = void 0); var R = S.slice(0); b.encryptBlock(R, 0), S[u - 1] = S[u - 1] + 1 | 0; for (var y = 0; y < u; y++)h[P + y] ^= R[y] } }); return d.Decryptor = f, d }(), p.mode.CTR }) }, 6993(a, c, l) { var p = l(5546); function d() {/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var f, h, P = typeof Symbol == "function" ? Symbol : {}, b = P.iterator || "@@iterator", u = P.toStringTag || "@@toStringTag"; function g(I, E, _, k) { var L = E && E.prototype instanceof R ? E : R, H = Object.create(L.prototype); return p(H, "_invoke", function (V, ee, K) { var N, B, Q, Z = 0, le = K || [], X = !1, ce = { p: 0, n: 0, v: f, a: he, f: he.bind(f, 4), d: function (ye, se) { return N = ye, B = 0, Q = f, ce.n = se, S } }; function he(ue, ye) { for (B = ue, Q = ye, h = 0; !X && Z && !se && h < le.length; h++) { var se, _e = le[h], Se = ce.p, we = _e[2]; ue > 3 ? (se = we === ye) && (Q = _e[(B = _e[4]) ? 5 : (B = 3, 3)], _e[4] = _e[5] = f) : _e[0] <= Se && ((se = ue < 2 && Se < _e[1]) ? (B = 0, ce.v = ye, ce.n = _e[1]) : Se < we && (se = ue < 3 || _e[0] > ye || ye > we) && (_e[4] = ue, _e[5] = ye, ce.n = we, B = 0)) } if (se || ue > 1) return S; throw X = !0, ye } return function (ue, ye, se) { if (Z > 1) throw TypeError("Generator is already running"); for (X && ye === 1 && he(ye, se), B = ye, Q = se; (h = B < 2 ? f : Q) || !X;) { N || (B ? B < 3 ? (B > 1 && (ce.n = -1), he(B, Q)) : ce.n = Q : ce.v = Q); try { if (Z = 2, N) { if (B || (ue = "next"), h = N[ue]) { if (!(h = h.call(N, Q))) throw TypeError("iterator result is not an object"); if (!h.done) return h; Q = h.value, B < 2 && (B = 0) } else B === 1 && (h = N.return) && h.call(N), B < 2 && (Q = TypeError("The iterator does not provide a '" + ue + "' method"), B = 1); N = f } else if ((h = (X = ce.n < 0) ? Q : V.call(ee, ce)) !== S) break } catch (_e) { N = f, B = 1, Q = _e } finally { Z = 1 } } return { value: h, done: X } } }(I, _, k), !0), H } var S = {}; function R() { } function y() { } function v() { } h = Object.getPrototypeOf; var D = [][b] ? h(h([][b]())) : (p(h = {}, b, function () { return this }), h), M = v.prototype = R.prototype = Object.create(D); function W(I) { return Object.setPrototypeOf ? Object.setPrototypeOf(I, v) : (I.__proto__ = v, p(I, u, "GeneratorFunction")), I.prototype = Object.create(M), I } return y.prototype = v, p(M, "constructor", v), p(v, "constructor", y), y.displayName = "GeneratorFunction", p(v, u, "GeneratorFunction"), p(M), p(M, u, "Generator"), p(M, b, function () { return this }), p(M, "toString", function () { return "[object Generator]" }), (a.exports = d = function () { return { w: g, m: W } }, a.exports.__esModule = !0, a.exports.default = a.exports)() } a.exports = d, a.exports.__esModule = !0, a.exports.default = a.exports }, 7007(a) { var c = typeof Reflect == "object" ? Reflect : null, l = c && typeof c.apply == "function" ? c.apply : function (L, H, V) { return Function.prototype.apply.call(L, H, V) }, p; c && typeof c.ownKeys == "function" ? p = c.ownKeys : Object.getOwnPropertySymbols ? p = function (L) { return Object.getOwnPropertyNames(L).concat(Object.getOwnPropertySymbols(L)) } : p = function (L) { return Object.getOwnPropertyNames(L) }; function d(k) { console && console.warn && console.warn(k) } var f = Number.isNaN || function (L) { return L !== L }; function h() { h.init.call(this) } a.exports = h, a.exports.once = I, h.EventEmitter = h, h.prototype._events = void 0, h.prototype._eventsCount = 0, h.prototype._maxListeners = void 0; var P = 10; function b(k) { if (typeof k != "function") throw new TypeError('The "listener" argument must be of type Function. Received type ' + typeof k) } Object.defineProperty(h, "defaultMaxListeners", { enumerable: !0, get: function () { return P }, set: function (k) { if (typeof k != "number" || k < 0 || f(k)) throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received ' + k + "."); P = k } }), h.init = function () { (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) && (this._events = Object.create(null), this._eventsCount = 0), this._maxListeners = this._maxListeners || void 0 }, h.prototype.setMaxListeners = function (L) { if (typeof L != "number" || L < 0 || f(L)) throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received ' + L + "."); return this._maxListeners = L, this }; function u(k) { return k._maxListeners === void 0 ? h.defaultMaxListeners : k._maxListeners } h.prototype.getMaxListeners = function () { return u(this) }, h.prototype.emit = function (L) { for (var H = [], V = 1; V < arguments.length; V++)H.push(arguments[V]); var ee = L === "error", K = this._events; if (K !== void 0) ee = ee && K.error === void 0; else if (!ee) return !1; if (ee) { var N; if (H.length > 0 && (N = H[0]), N instanceof Error) throw N; var B = new Error("Unhandled error." + (N ? " (" + N.message + ")" : "")); throw B.context = N, B } var Q = K[L]; if (Q === void 0) return !1; if (typeof Q == "function") l(Q, this, H); else for (var Z = Q.length, le = D(Q, Z), V = 0; V < Z; ++V)l(le[V], this, H); return !0 }; function g(k, L, H, V) { var ee, K, N; if (b(H), K = k._events, K === void 0 ? (K = k._events = Object.create(null), k._eventsCount = 0) : (K.newListener !== void 0 && (k.emit("newListener", L, H.listener ? H.listener : H), K = k._events), N = K[L]), N === void 0) N = K[L] = H, ++k._eventsCount; else if (typeof N == "function" ? N = K[L] = V ? [H, N] : [N, H] : V ? N.unshift(H) : N.push(H), ee = u(k), ee > 0 && N.length > ee && !N.warned) { N.warned = !0; var B = new Error("Possible EventEmitter memory leak detected. " + N.length + " " + String(L) + " listeners added. Use emitter.setMaxListeners() to increase limit"); B.name = "MaxListenersExceededWarning", B.emitter = k, B.type = L, B.count = N.length, d(B) } return k } h.prototype.addListener = function (L, H) { return g(this, L, H, !1) }, h.prototype.on = h.prototype.addListener, h.prototype.prependListener = function (L, H) { return g(this, L, H, !0) }; function S() { if (!this.fired) return this.target.removeListener(this.type, this.wrapFn), this.fired = !0, arguments.length === 0 ? this.listener.call(this.target) : this.listener.apply(this.target, arguments) } function R(k, L, H) { var V = { fired: !1, wrapFn: void 0, target: k, type: L, listener: H }, ee = S.bind(V); return ee.listener = H, V.wrapFn = ee, ee } h.prototype.once = function (L, H) { return b(H), this.on(L, R(this, L, H)), this }, h.prototype.prependOnceListener = function (L, H) { return b(H), this.prependListener(L, R(this, L, H)), this }, h.prototype.removeListener = function (L, H) { var V, ee, K, N, B; if (b(H), ee = this._events, ee === void 0) return this; if (V = ee[L], V === void 0) return this; if (V === H || V.listener === H) --this._eventsCount === 0 ? this._events = Object.create(null) : (delete ee[L], ee.removeListener && this.emit("removeListener", L, V.listener || H)); else if (typeof V != "function") { for (K = -1, N = V.length - 1; N >= 0; N--)if (V[N] === H || V[N].listener === H) { B = V[N].listener, K = N; break } if (K < 0) return this; K === 0 ? V.shift() : M(V, K), V.length === 1 && (ee[L] = V[0]), ee.removeListener !== void 0 && this.emit("removeListener", L, B || H) } return this }, h.prototype.off = h.prototype.removeListener, h.prototype.removeAllListeners = function (L) { var H, V, ee; if (V = this._events, V === void 0) return this; if (V.removeListener === void 0) return arguments.length === 0 ? (this._events = Object.create(null), this._eventsCount = 0) : V[L] !== void 0 && (--this._eventsCount === 0 ? this._events = Object.create(null) : delete V[L]), this; if (arguments.length === 0) { var K = Object.keys(V), N; for (ee = 0; ee < K.length; ++ee)N = K[ee], N !== "removeListener" && this.removeAllListeners(N); return this.removeAllListeners("removeListener"), this._events = Object.create(null), this._eventsCount = 0, this } if (H = V[L], typeof H == "function") this.removeListener(L, H); else if (H !== void 0) for (ee = H.length - 1; ee >= 0; ee--)this.removeListener(L, H[ee]); return this }; function y(k, L, H) { var V = k._events; if (V === void 0) return []; var ee = V[L]; return ee === void 0 ? [] : typeof ee == "function" ? H ? [ee.listener || ee] : [ee] : H ? W(ee) : D(ee, ee.length) } h.prototype.listeners = function (L) { return y(this, L, !0) }, h.prototype.rawListeners = function (L) { return y(this, L, !1) }, h.listenerCount = function (k, L) { return typeof k.listenerCount == "function" ? k.listenerCount(L) : v.call(k, L) }, h.prototype.listenerCount = v; function v(k) { var L = this._events; if (L !== void 0) { var H = L[k]; if (typeof H == "function") return 1; if (H !== void 0) return H.length } return 0 } h.prototype.eventNames = function () { return this._eventsCount > 0 ? p(this._events) : [] }; function D(k, L) { for (var H = new Array(L), V = 0; V < L; ++V)H[V] = k[V]; return H } function M(k, L) { for (; L + 1 < k.length; L++)k[L] = k[L + 1]; k.pop() } function W(k) { for (var L = new Array(k.length), H = 0; H < L.length; ++H)L[H] = k[H].listener || k[H]; return L } function I(k, L) { return new Promise(function (H, V) { function ee(N) { k.removeListener(L, K), V(N) } function K() { typeof k.removeListener == "function" && k.removeListener("error", ee), H([].slice.call(arguments)) } _(k, L, K, { once: !0 }), L !== "error" && E(k, ee, { once: !0 }) }) } function E(k, L, H) { typeof k.on == "function" && _(k, "error", L, H) } function _(k, L, H, V) { if (typeof k.on == "function") V.once ? k.once(L, H) : k.on(L, H); else if (typeof k.addEventListener == "function") k.addEventListener(L, function ee(K) { V.once && k.removeEventListener(L, ee), H(K) }); else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type ' + typeof k) } }, 7080(a, c, l) { l.d(c, { q: () => d, s: () => p }); var p = { INVALID_API_KEY: 4001, INVALID_TOKEN: 4002, INVALID_MEETING_ID: 4003, INVALID_PARTICIPANT_ID: 4004, DUPLICATE_PARTICIPANT: 4005, ACCOUNT_DEACTIVATED: 4006, ACCOUNT_DISCONTINUED: 4007, INVALID_PERMISSIONS: 4008, MAX_PARTCIPANT_REACHED: 4009, MAX_SPEAKER_REACHED: 4010, START_RECORDING_FAILED: 4011, STOP_RECORDING_FAILED: 4012, START_LIVESTREAM_FAILED: 4013, STOP_LIVESTREAM_FAILED: 4014, INVALID_LIVESTREAM_CONFIG: 4015, START_HLS_FAILED: 4016, STOP_HLS_FAILED: 4017, START_TRANSCRIPTION_FAILED: 4031, STOP_TRANSCRIPTION_FAILED: 4032, START_TRANSLATION_FAILED: 4042, STOP_TRANSLATION_FAILED: 4043, CHANGE_TRANSLATION_LANGUAGE_FAILED: 4044, RECORDING_FAILED: 5001, LIVESTREAM_FAILED: 5002, HLS_FAILED: 5003, TRANSCRIPTION_FAILED: 5007, TRANSLATION_FAILED: 5015, ERROR_GET_VIDEO_MEDIA: 3011, ERROR_GET_AUDIO_MEDIA: 3012, ERROR_GET_DISPLAY_MEDIA: 3013, ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED: 3014, ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED: 3015, ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED: 3016, ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED: 3017, ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED: 3018, ERROR_CAMERA_PERMISSION_DENIED_BY_OS: 3019, ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS: 3020, ERROR_CAMERA_NOT_FOUND: 3021, ERROR_MICROPHONE_NOT_FOUND: 3022, ERROR_CAMERA_IN_USE: 3023, ERROR_MICROPHONE_IN_USE: 3024, ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE: 3025, ERROR_VIDEO_SOURCE_INITIATION_FAILED: 3026, ERROR_WEBCAM_TRACK_ENDED: 3027, ERROR_MICROPHONE_TRACK_ENDED: 3028, ERROR_INVALID_CUSTOM_VIDEO_TRACK: 3029, ERROR_INVALID_CUSTOM_AUDIO_TRACK: 3030, ERROR_CUSTOM_VIDEO_TRACK_ENDED: 3031, ERROR_CUSTOM_AUDIO_TRACK_ENDED: 3032, ERROR_CAMERA_ACCESS_UNAVAILABLE: 3033, ERROR_MICROPHONE_ACCESS_UNAVAILABLE: 3034, ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED: 3035, ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED: 3036, ERROR_RN_CAMERA_NOT_FOUND: 3037, ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED: 3038, ERROR_RN_MIC_NOT_FOUND: 3039, ERROR_RN_CAMERA_ACCESS_UNAVAILABLE: 3040, ERROR_RN_MIC_ACCESS_UNAVAILABLE: 3041, ERROR_RN_CAMERA_TRACK_ENDED: 3042, ERROR_RN_MIC_TRACK_ENDED: 3043 }, d = { ERROR_GET_VIDEO_MEDIA: { code: 3011, message: "Your browser/Device does not support Video." }, ERROR_GET_AUDIO_MEDIA: { code: 3012, message: "Your browser/Device does not support Audio." }, ERROR_GET_DISPLAY_MEDIA: { code: 3013, message: "Your browser/Device does not support Screen Sharing." }, ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED: { code: 3014, message: "Video capture permission denied." }, ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED: { code: 3015, message: "Audio capture permission denied." }, ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED: { code: 3016, message: "Screen sharing permission denied." }, ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED: { code: 3017, message: "Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings." }, ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED: { code: 3018, message: "Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings." }, ERROR_CAMERA_PERMISSION_DENIED_BY_OS: { code: 3019, message: "Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser." }, ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS: { code: 3020, message: "Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser." }, ERROR_CAMERA_NOT_FOUND: { code: 3021, message: "Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date." }, ERROR_MICROPHONE_NOT_FOUND: { code: 3022, message: "Please ensure your microphone is connected and turned on." }, ERROR_CAMERA_IN_USE: { code: 3023, message: "The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again." }, ERROR_MICROPHONE_IN_USE: { code: 3024, message: "The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again." }, ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE: { code: 3025, message: "It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue" }, ERROR_VIDEO_SOURCE_INITIATION_FAILED: { code: 3026, message: "Unable to initiate video source. Please verify browser settings for video permissions." }, ERROR_WEBCAM_TRACK_ENDED: { code: 3027, message: "Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it." }, ERROR_MICROPHONE_TRACK_ENDED: { code: 3028, message: "Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again." }, ERROR_INVALID_CUSTOM_VIDEO_TRACK: { code: 3029, message: "The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications." }, ERROR_INVALID_CUSTOM_AUDIO_TRACK: { code: 3030, message: "The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications." }, ERROR_CUSTOM_VIDEO_TRACK_ENDED: { code: 3031, message: "The provided custom video track is in an ended state. Please verify the video track's status, and try again." }, ERROR_CUSTOM_AUDIO_TRACK_ENDED: { code: 3032, message: "The provided custom audio track is in an ended state. Please verify the audio track's status, and try again." }, ERROR_CAMERA_ACCESS_UNAVAILABLE: { code: 3033, message: "Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)." }, ERROR_MICROPHONE_ACCESS_UNAVAILABLE: { code: 3034, message: "Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)." }, ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED: { code: 3035, message: "Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting." }, ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED: { code: 3036, message: "Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings." }, ERROR_RN_CAMERA_NOT_FOUND: { code: 3037, message: "Please ensure your camera is connected and turned on" }, ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED: { code: 3038, message: "Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings." }, ERROR_RN_MIC_NOT_FOUND: { code: 3039, message: "Please ensure your mic is connected and turned on" }, ERROR_RN_CAMERA_ACCESS_UNAVAILABLE: { code: 3040, message: "Camera access unavailable: Please ensure your device is compatible." }, ERROR_RN_MIC_ACCESS_UNAVAILABLE: { code: 3041, message: "Microphone access unavailable: Please ensure your device is compatible." }, ERROR_RN_CAMERA_TRACK_ENDED: { code: 3042, message: "Camera track has ended. Please make sure your camera is turned on or try restarting it." }, ERROR_RN_MIC_TRACK_ENDED: { code: 3043, message: "Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again." } } }, 7165(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(9506)) })(this, function (p) { p.lib.Cipher || function (d) { var f = p, h = f.lib, P = h.Base, b = h.WordArray, u = h.BufferedBlockAlgorithm, g = f.enc; g.Utf8; var S = g.Base64, R = f.algo, y = R.EvpKDF, v = h.Cipher = u.extend({ cfg: P.extend(), createEncryptor: function (N, B) { return this.create(this._ENC_XFORM_MODE, N, B) }, createDecryptor: function (N, B) { return this.create(this._DEC_XFORM_MODE, N, B) }, init: function (N, B, Q) { this.cfg = this.cfg.extend(Q), this._xformMode = N, this._key = B, this.reset() }, reset: function () { u.reset.call(this), this._doReset() }, process: function (N) { return this._append(N), this._process() }, finalize: function (N) { N && this._append(N); var B = this._doFinalize(); return B }, keySize: 128 / 32, ivSize: 128 / 32, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function () { function N(B) { return typeof B == "string" ? K : H } return function (B) { return { encrypt: function (Q, Z, le) { return N(Z).encrypt(B, Q, Z, le) }, decrypt: function (Q, Z, le) { return N(Z).decrypt(B, Q, Z, le) } } } }() }); h.StreamCipher = v.extend({ _doFinalize: function () { var N = this._process(!0); return N }, blockSize: 1 }); var D = f.mode = {}, M = h.BlockCipherMode = P.extend({ createEncryptor: function (N, B) { return this.Encryptor.create(N, B) }, createDecryptor: function (N, B) { return this.Decryptor.create(N, B) }, init: function (N, B) { this._cipher = N, this._iv = B } }), W = D.CBC = function () { var N = M.extend(); N.Encryptor = N.extend({ processBlock: function (Q, Z) { var le = this._cipher, X = le.blockSize; B.call(this, Q, Z, X), le.encryptBlock(Q, Z), this._prevBlock = Q.slice(Z, Z + X) } }), N.Decryptor = N.extend({ processBlock: function (Q, Z) { var le = this._cipher, X = le.blockSize, ce = Q.slice(Z, Z + X); le.decryptBlock(Q, Z), B.call(this, Q, Z, X), this._prevBlock = ce } }); function B(Q, Z, le) { var X, ce = this._iv; ce ? (X = ce, this._iv = d) : X = this._prevBlock; for (var he = 0; he < le; he++)Q[Z + he] ^= X[he] } return N }(), I = f.pad = {}, E = I.Pkcs7 = { pad: function (N, B) { for (var Q = B * 4, Z = Q - N.sigBytes % Q, le = Z << 24 | Z << 16 | Z << 8 | Z, X = [], ce = 0; ce < Z; ce += 4)X.push(le); var he = b.create(X, Z); N.concat(he) }, unpad: function (N) { var B = N.words[N.sigBytes - 1 >>> 2] & 255; N.sigBytes -= B } }; h.BlockCipher = v.extend({ cfg: v.cfg.extend({ mode: W, padding: E }), reset: function () { var N; v.reset.call(this); var B = this.cfg, Q = B.iv, Z = B.mode; this._xformMode == this._ENC_XFORM_MODE ? N = Z.createEncryptor : (N = Z.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == N ? this._mode.init(this, Q && Q.words) : (this._mode = N.call(Z, this, Q && Q.words), this._mode.__creator = N) }, _doProcessBlock: function (N, B) { this._mode.processBlock(N, B) }, _doFinalize: function () { var N, B = this.cfg.padding; return this._xformMode == this._ENC_XFORM_MODE ? (B.pad(this._data, this.blockSize), N = this._process(!0)) : (N = this._process(!0), B.unpad(N)), N }, blockSize: 4 }); var _ = h.CipherParams = P.extend({ init: function (N) { this.mixIn(N) }, toString: function (N) { return (N || this.formatter).stringify(this) } }), k = f.format = {}, L = k.OpenSSL = { stringify: function (N) { var B, Q = N.ciphertext, Z = N.salt; return Z ? B = b.create([1398893684, 1701076831]).concat(Z).concat(Q) : B = Q, B.toString(S) }, parse: function (N) { var B, Q = S.parse(N), Z = Q.words; return Z[0] == 1398893684 && Z[1] == 1701076831 && (B = b.create(Z.slice(2, 4)), Z.splice(0, 4), Q.sigBytes -= 16), _.create({ ciphertext: Q, salt: B }) } }, H = h.SerializableCipher = P.extend({ cfg: P.extend({ format: L }), encrypt: function (N, B, Q, Z) { Z = this.cfg.extend(Z); var le = N.createEncryptor(Q, Z), X = le.finalize(B), ce = le.cfg; return _.create({ ciphertext: X, key: Q, iv: ce.iv, algorithm: N, mode: ce.mode, padding: ce.padding, blockSize: N.blockSize, formatter: Z.format }) }, decrypt: function (N, B, Q, Z) { Z = this.cfg.extend(Z), B = this._parse(B, Z.format); var le = N.createDecryptor(Q, Z).finalize(B.ciphertext); return le }, _parse: function (N, B) { return typeof N == "string" ? B.parse(N, this) : N } }), V = f.kdf = {}, ee = V.OpenSSL = { execute: function (N, B, Q, Z, le) { if (Z || (Z = b.random(64 / 8)), le) var X = y.create({ keySize: B + Q, hasher: le }).compute(N, Z); else var X = y.create({ keySize: B + Q }).compute(N, Z); var ce = b.create(X.words.slice(B), Q * 4); return X.sigBytes = B * 4, _.create({ key: X, iv: ce, salt: Z }) } }, K = h.PasswordBasedCipher = H.extend({ cfg: H.cfg.extend({ kdf: ee }), encrypt: function (N, B, Q, Z) { Z = this.cfg.extend(Z); var le = Z.kdf.execute(Q, N.keySize, N.ivSize, Z.salt, Z.hasher); Z.iv = le.iv; var X = H.encrypt.call(this, N, B, le.key, Z); return X.mixIn(le), X }, decrypt: function (N, B, Q, Z) { Z = this.cfg.extend(Z), B = this._parse(B, Z.format); var le = Z.kdf.execute(Q, N.keySize, N.ivSize, B.salt, Z.hasher); Z.iv = le.iv; var X = H.decrypt.call(this, N, B, le.key, Z); return X } }) }() }) }, 7193(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(754), l(4636), l(9506), l(7165)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.StreamCipher, P = d.algo, b = P.RC4 = h.extend({ _doReset: function () { for (var S = this._key, R = S.words, y = S.sigBytes, v = this._S = [], D = 0; D < 256; D++)v[D] = D; for (var D = 0, M = 0; D < 256; D++) { var W = D % y, I = R[W >>> 2] >>> 24 - W % 4 * 8 & 255; M = (M + v[D] + I) % 256; var E = v[D]; v[D] = v[M], v[M] = E } this._i = this._j = 0 }, _doProcessBlock: function (S, R) { S[R] ^= u.call(this) }, keySize: 256 / 32, ivSize: 0 }); function u() { for (var S = this._S, R = this._i, y = this._j, v = 0, D = 0; D < 4; D++) { R = (R + 1) % 256, y = (y + S[R]) % 256; var M = S[R]; S[R] = S[y], S[y] = M, v |= S[(S[R] + S[y]) % 256] << 24 - D * 8 } return this._i = R, this._j = y, v } d.RC4 = h._createHelper(b); var g = P.RC4Drop = b.extend({ cfg: b.cfg.extend({ drop: 192 }), _doReset: function () { b._doReset.call(this); for (var S = this.cfg.drop; S > 0; S--)u.call(this) } }); d.RC4Drop = h._createHelper(g) }(), p.RC4 }) }, 7363(a, c, l) { var p = l(5020), d = l(3804), f = l(5602); c.grammar = f, c.write = d, c.parse = p.parse, c.parseParams = p.parseParams, c.parseFmtpConfig = p.parseFmtpConfig, c.parsePayloads = p.parsePayloads, c.parseRemoteCandidates = p.parseRemoteCandidates, c.parseImageAttributes = p.parseImageAttributes, c.parseSimulcastStreamList = p.parseSimulcastStreamList }, 7504(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.DataProducer = void 0; const p = l(2994), d = l(3953), f = l(4893), h = new p.Logger("DataProducer"); class P extends d.EnhancedEventEmitter { constructor({ id: g, dataChannel: S, sctpStreamParameters: R, appData: y }) { super(); ve(this, "_id"); ve(this, "_dataChannel"); ve(this, "_closed", !1); ve(this, "_sctpStreamParameters"); ve(this, "_appData"); ve(this, "_observer", new d.EnhancedEventEmitter); h.debug("constructor()"), this._id = g, this._dataChannel = S, this._sctpStreamParameters = R, this._appData = y ?? {}, this.handleDataChannel() } get id() { return this._id } get closed() { return this._closed } get sctpStreamParameters() { return this._sctpStreamParameters } get readyState() { return this._dataChannel.readyState } get label() { return this._dataChannel.label } get protocol() { return this._dataChannel.protocol } get bufferedAmount() { return this._dataChannel.bufferedAmount } get bufferedAmountLowThreshold() { return this._dataChannel.bufferedAmountLowThreshold } set bufferedAmountLowThreshold(g) { this._dataChannel.bufferedAmountLowThreshold = g } get appData() { return this._appData } set appData(g) { this._appData = g } get observer() { return this._observer } close() { this._closed || (h.debug("close()"), this._closed = !0, this._dataChannel.close(), this.emit("@close"), this._observer.safeEmit("close"), super.close(), this._observer.close()) } transportClosed() { this._closed || (h.debug("transportClosed()"), this._closed = !0, this._dataChannel.close(), this.safeEmit("transportclose"), this._observer.safeEmit("close")) } send(g) { if (h.debug("send()"), this._closed) throw new f.InvalidStateError("closed"); this._dataChannel.send(g) } handleDataChannel() { this._dataChannel.addEventListener("open", () => { this._closed || (h.debug('DataChannel "open" event'), this.safeEmit("open")) }), this._dataChannel.addEventListener("error", g => { var R, y; if (this._closed) return; const S = g.error ?? new Error("unknown DataChannel error"); ((R = g.error) == null ? void 0 : R.errorDetail) === "sctp-failure" ? h.error("DataChannel SCTP error [sctpCauseCode:%s]: %s", (y = g.error) == null ? void 0 : y.sctpCauseCode, g.error.message) : h.error('DataChannel "error" event: %o', S), this.safeEmit("error", S) }), this._dataChannel.addEventListener("close", () => { this._closed || (h.warn('DataChannel "close" event'), this._closed = !0, this.emit("@close"), this.safeEmit("close"), this._observer.safeEmit("close")) }), this._dataChannel.addEventListener("message", () => { this._closed || h.warn('DataChannel "message" event in a DataProducer, message discarded') }), this._dataChannel.addEventListener("bufferedamountlow", () => { this._closed || this.safeEmit("bufferedamountlow") }) } } c.DataProducer = P }, 7628(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(754), l(4636), l(9506), l(7165)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.WordArray, P = f.BlockCipher, b = d.algo, u = [57, 49, 41, 33, 25, 17, 9, 1, 58, 50, 42, 34, 26, 18, 10, 2, 59, 51, 43, 35, 27, 19, 11, 3, 60, 52, 44, 36, 63, 55, 47, 39, 31, 23, 15, 7, 62, 54, 46, 38, 30, 22, 14, 6, 61, 53, 45, 37, 29, 21, 13, 5, 28, 20, 12, 4], g = [14, 17, 11, 24, 1, 5, 3, 28, 15, 6, 21, 10, 23, 19, 12, 4, 26, 8, 16, 7, 27, 20, 13, 2, 41, 52, 31, 37, 47, 55, 30, 40, 51, 45, 33, 48, 44, 49, 39, 56, 34, 53, 46, 42, 50, 36, 29, 32], S = [1, 2, 4, 6, 8, 10, 12, 14, 15, 17, 19, 21, 23, 25, 27, 28], R = [{ 0: 8421888, 268435456: 32768, 536870912: 8421378, 805306368: 2, 1073741824: 512, 1342177280: 8421890, 1610612736: 8389122, 1879048192: 8388608, 2147483648: 514, 2415919104: 8389120, 2684354560: 33280, 2952790016: 8421376, 3221225472: 32770, 3489660928: 8388610, 3758096384: 0, 4026531840: 33282, 134217728: 0, 402653184: 8421890, 671088640: 33282, 939524096: 32768, 1207959552: 8421888, 1476395008: 512, 1744830464: 8421378, 2013265920: 2, 2281701376: 8389120, 2550136832: 33280, 2818572288: 8421376, 3087007744: 8389122, 3355443200: 8388610, 3623878656: 32770, 3892314112: 514, 4160749568: 8388608, 1: 32768, 268435457: 2, 536870913: 8421888, 805306369: 8388608, 1073741825: 8421378, 1342177281: 33280, 1610612737: 512, 1879048193: 8389122, 2147483649: 8421890, 2415919105: 8421376, 2684354561: 8388610, 2952790017: 33282, 3221225473: 514, 3489660929: 8389120, 3758096385: 32770, 4026531841: 0, 134217729: 8421890, 402653185: 8421376, 671088641: 8388608, 939524097: 512, 1207959553: 32768, 1476395009: 8388610, 1744830465: 2, 2013265921: 33282, 2281701377: 32770, 2550136833: 8389122, 2818572289: 514, 3087007745: 8421888, 3355443201: 8389120, 3623878657: 0, 3892314113: 33280, 4160749569: 8421378 }, { 0: 1074282512, 16777216: 16384, 33554432: 524288, 50331648: 1074266128, 67108864: 1073741840, 83886080: 1074282496, 100663296: 1073758208, 117440512: 16, 134217728: 540672, 150994944: 1073758224, 167772160: 1073741824, 184549376: 540688, 201326592: 524304, 218103808: 0, 234881024: 16400, 251658240: 1074266112, 8388608: 1073758208, 25165824: 540688, 41943040: 16, 58720256: 1073758224, 75497472: 1074282512, 92274688: 1073741824, 109051904: 524288, 125829120: 1074266128, 142606336: 524304, 159383552: 0, 176160768: 16384, 192937984: 1074266112, 209715200: 1073741840, 226492416: 540672, 243269632: 1074282496, 260046848: 16400, 268435456: 0, 285212672: 1074266128, 301989888: 1073758224, 318767104: 1074282496, 335544320: 1074266112, 352321536: 16, 369098752: 540688, 385875968: 16384, 402653184: 16400, 419430400: 524288, 436207616: 524304, 452984832: 1073741840, 469762048: 540672, 486539264: 1073758208, 503316480: 1073741824, 520093696: 1074282512, 276824064: 540688, 293601280: 524288, 310378496: 1074266112, 327155712: 16384, 343932928: 1073758208, 360710144: 1074282512, 377487360: 16, 394264576: 1073741824, 411041792: 1074282496, 427819008: 1073741840, 444596224: 1073758224, 461373440: 524304, 478150656: 0, 494927872: 16400, 511705088: 1074266128, 528482304: 540672 }, { 0: 260, 1048576: 0, 2097152: 67109120, 3145728: 65796, 4194304: 65540, 5242880: 67108868, 6291456: 67174660, 7340032: 67174400, 8388608: 67108864, 9437184: 67174656, 10485760: 65792, 11534336: 67174404, 12582912: 67109124, 13631488: 65536, 14680064: 4, 15728640: 256, 524288: 67174656, 1572864: 67174404, 2621440: 0, 3670016: 67109120, 4718592: 67108868, 5767168: 65536, 6815744: 65540, 7864320: 260, 8912896: 4, 9961472: 256, 11010048: 67174400, 12058624: 65796, 13107200: 65792, 14155776: 67109124, 15204352: 67174660, 16252928: 67108864, 16777216: 67174656, 17825792: 65540, 18874368: 65536, 19922944: 67109120, 20971520: 256, 22020096: 67174660, 23068672: 67108868, 24117248: 0, 25165824: 67109124, 26214400: 67108864, 27262976: 4, 28311552: 65792, 29360128: 67174400, 30408704: 260, 31457280: 65796, 32505856: 67174404, 17301504: 67108864, 18350080: 260, 19398656: 67174656, 20447232: 0, 21495808: 65540, 22544384: 67109120, 23592960: 256, 24641536: 67174404, 25690112: 65536, 26738688: 67174660, 27787264: 65796, 28835840: 67108868, 29884416: 67109124, 30932992: 67174400, 31981568: 4, 33030144: 65792 }, { 0: 2151682048, 65536: 2147487808, 131072: 4198464, 196608: 2151677952, 262144: 0, 327680: 4198400, 393216: 2147483712, 458752: 4194368, 524288: 2147483648, 589824: 4194304, 655360: 64, 720896: 2147487744, 786432: 2151678016, 851968: 4160, 917504: 4096, 983040: 2151682112, 32768: 2147487808, 98304: 64, 163840: 2151678016, 229376: 2147487744, 294912: 4198400, 360448: 2151682112, 425984: 0, 491520: 2151677952, 557056: 4096, 622592: 2151682048, 688128: 4194304, 753664: 4160, 819200: 2147483648, 884736: 4194368, 950272: 4198464, 1015808: 2147483712, 1048576: 4194368, 1114112: 4198400, 1179648: 2147483712, 1245184: 0, 1310720: 4160, 1376256: 2151678016, 1441792: 2151682048, 1507328: 2147487808, 1572864: 2151682112, 1638400: 2147483648, 1703936: 2151677952, 1769472: 4198464, 1835008: 2147487744, 1900544: 4194304, 1966080: 64, 2031616: 4096, 1081344: 2151677952, 1146880: 2151682112, 1212416: 0, 1277952: 4198400, 1343488: 4194368, 1409024: 2147483648, 1474560: 2147487808, 1540096: 64, 1605632: 2147483712, 1671168: 4096, 1736704: 2147487744, 1802240: 2151678016, 1867776: 4160, 1933312: 2151682048, 1998848: 4194304, 2064384: 4198464 }, { 0: 128, 4096: 17039360, 8192: 262144, 12288: 536870912, 16384: 537133184, 20480: 16777344, 24576: 553648256, 28672: 262272, 32768: 16777216, 36864: 537133056, 40960: 536871040, 45056: 553910400, 49152: 553910272, 53248: 0, 57344: 17039488, 61440: 553648128, 2048: 17039488, 6144: 553648256, 10240: 128, 14336: 17039360, 18432: 262144, 22528: 537133184, 26624: 553910272, 30720: 536870912, 34816: 537133056, 38912: 0, 43008: 553910400, 47104: 16777344, 51200: 536871040, 55296: 553648128, 59392: 16777216, 63488: 262272, 65536: 262144, 69632: 128, 73728: 536870912, 77824: 553648256, 81920: 16777344, 86016: 553910272, 90112: 537133184, 94208: 16777216, 98304: 553910400, 102400: 553648128, 106496: 17039360, 110592: 537133056, 114688: 262272, 118784: 536871040, 122880: 0, 126976: 17039488, 67584: 553648256, 71680: 16777216, 75776: 17039360, 79872: 537133184, 83968: 536870912, 88064: 17039488, 92160: 128, 96256: 553910272, 100352: 262272, 104448: 553910400, 108544: 0, 112640: 553648128, 116736: 16777344, 120832: 262144, 124928: 537133056, 129024: 536871040 }, { 0: 268435464, 256: 8192, 512: 270532608, 768: 270540808, 1024: 268443648, 1280: 2097152, 1536: 2097160, 1792: 268435456, 2048: 0, 2304: 268443656, 2560: 2105344, 2816: 8, 3072: 270532616, 3328: 2105352, 3584: 8200, 3840: 270540800, 128: 270532608, 384: 270540808, 640: 8, 896: 2097152, 1152: 2105352, 1408: 268435464, 1664: 268443648, 1920: 8200, 2176: 2097160, 2432: 8192, 2688: 268443656, 2944: 270532616, 3200: 0, 3456: 270540800, 3712: 2105344, 3968: 268435456, 4096: 268443648, 4352: 270532616, 4608: 270540808, 4864: 8200, 5120: 2097152, 5376: 268435456, 5632: 268435464, 5888: 2105344, 6144: 2105352, 6400: 0, 6656: 8, 6912: 270532608, 7168: 8192, 7424: 268443656, 7680: 270540800, 7936: 2097160, 4224: 8, 4480: 2105344, 4736: 2097152, 4992: 268435464, 5248: 268443648, 5504: 8200, 5760: 270540808, 6016: 270532608, 6272: 270540800, 6528: 270532616, 6784: 8192, 7040: 2105352, 7296: 2097160, 7552: 0, 7808: 268435456, 8064: 268443656 }, { 0: 1048576, 16: 33555457, 32: 1024, 48: 1049601, 64: 34604033, 80: 0, 96: 1, 112: 34603009, 128: 33555456, 144: 1048577, 160: 33554433, 176: 34604032, 192: 34603008, 208: 1025, 224: 1049600, 240: 33554432, 8: 34603009, 24: 0, 40: 33555457, 56: 34604032, 72: 1048576, 88: 33554433, 104: 33554432, 120: 1025, 136: 1049601, 152: 33555456, 168: 34603008, 184: 1048577, 200: 1024, 216: 34604033, 232: 1, 248: 1049600, 256: 33554432, 272: 1048576, 288: 33555457, 304: 34603009, 320: 1048577, 336: 33555456, 352: 34604032, 368: 1049601, 384: 1025, 400: 34604033, 416: 1049600, 432: 1, 448: 0, 464: 34603008, 480: 33554433, 496: 1024, 264: 1049600, 280: 33555457, 296: 34603009, 312: 1, 328: 33554432, 344: 1048576, 360: 1025, 376: 34604032, 392: 33554433, 408: 34603008, 424: 0, 440: 34604033, 456: 1049601, 472: 1024, 488: 33555456, 504: 1048577 }, { 0: 134219808, 1: 131072, 2: 134217728, 3: 32, 4: 131104, 5: 134350880, 6: 134350848, 7: 2048, 8: 134348800, 9: 134219776, 10: 133120, 11: 134348832, 12: 2080, 13: 0, 14: 134217760, 15: 133152, 2147483648: 2048, 2147483649: 134350880, 2147483650: 134219808, 2147483651: 134217728, 2147483652: 134348800, 2147483653: 133120, 2147483654: 133152, 2147483655: 32, 2147483656: 134217760, 2147483657: 2080, 2147483658: 131104, 2147483659: 134350848, 2147483660: 0, 2147483661: 134348832, 2147483662: 134219776, 2147483663: 131072, 16: 133152, 17: 134350848, 18: 32, 19: 2048, 20: 134219776, 21: 134217760, 22: 134348832, 23: 131072, 24: 0, 25: 131104, 26: 134348800, 27: 134219808, 28: 134350880, 29: 133120, 30: 2080, 31: 134217728, 2147483664: 131072, 2147483665: 2048, 2147483666: 134348832, 2147483667: 133152, 2147483668: 32, 2147483669: 134348800, 2147483670: 134217728, 2147483671: 134219808, 2147483672: 134350880, 2147483673: 134217760, 2147483674: 134219776, 2147483675: 0, 2147483676: 133120, 2147483677: 2080, 2147483678: 131104, 2147483679: 134350848 }], y = [4160749569, 528482304, 33030144, 2064384, 129024, 8064, 504, 2147483679], v = b.DES = P.extend({ _doReset: function () { for (var I = this._key, E = I.words, _ = [], k = 0; k < 56; k++) { var L = u[k] - 1; _[k] = E[L >>> 5] >>> 31 - L % 32 & 1 } for (var H = this._subKeys = [], V = 0; V < 16; V++) { for (var ee = H[V] = [], K = S[V], k = 0; k < 24; k++)ee[k / 6 | 0] |= _[(g[k] - 1 + K) % 28] << 31 - k % 6, ee[4 + (k / 6 | 0)] |= _[28 + (g[k + 24] - 1 + K) % 28] << 31 - k % 6; ee[0] = ee[0] << 1 | ee[0] >>> 31; for (var k = 1; k < 7; k++)ee[k] = ee[k] >>> (k - 1) * 4 + 3; ee[7] = ee[7] << 5 | ee[7] >>> 27 } for (var N = this._invSubKeys = [], k = 0; k < 16; k++)N[k] = H[15 - k] }, encryptBlock: function (I, E) { this._doCryptBlock(I, E, this._subKeys) }, decryptBlock: function (I, E) { this._doCryptBlock(I, E, this._invSubKeys) }, _doCryptBlock: function (I, E, _) { this._lBlock = I[E], this._rBlock = I[E + 1], D.call(this, 4, 252645135), D.call(this, 16, 65535), M.call(this, 2, 858993459), M.call(this, 8, 16711935), D.call(this, 1, 1431655765); for (var k = 0; k < 16; k++) { for (var L = _[k], H = this._lBlock, V = this._rBlock, ee = 0, K = 0; K < 8; K++)ee |= R[K][((V ^ L[K]) & y[K]) >>> 0]; this._lBlock = V, this._rBlock = H ^ ee } var N = this._lBlock; this._lBlock = this._rBlock, this._rBlock = N, D.call(this, 1, 1431655765), M.call(this, 8, 16711935), M.call(this, 2, 858993459), D.call(this, 16, 65535), D.call(this, 4, 252645135), I[E] = this._lBlock, I[E + 1] = this._rBlock }, keySize: 64 / 32, ivSize: 64 / 32, blockSize: 64 / 32 }); function D(I, E) { var _ = (this._lBlock >>> I ^ this._rBlock) & E; this._rBlock ^= _, this._lBlock ^= _ << I } function M(I, E) { var _ = (this._rBlock >>> I ^ this._lBlock) & E; this._lBlock ^= _, this._rBlock ^= _ << I } d.DES = P._createHelper(v); var W = b.TripleDES = P.extend({ _doReset: function () { var I = this._key, E = I.words; if (E.length !== 2 && E.length !== 4 && E.length < 6) throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192."); var _ = E.slice(0, 2), k = E.length < 4 ? E.slice(0, 2) : E.slice(2, 4), L = E.length < 6 ? E.slice(0, 2) : E.slice(4, 6); this._des1 = v.createEncryptor(h.create(_)), this._des2 = v.createEncryptor(h.create(k)), this._des3 = v.createEncryptor(h.create(L)) }, encryptBlock: function (I, E) { this._des1.encryptBlock(I, E), this._des2.decryptBlock(I, E), this._des3.encryptBlock(I, E) }, decryptBlock: function (I, E) { this._des3.decryptBlock(I, E), this._des2.encryptBlock(I, E), this._des1.decryptBlock(I, E) }, keySize: 192 / 32, ivSize: 64 / 32, blockSize: 64 / 32 }); d.TripleDES = P._createHelper(W) }(), p.TripleDES }) }, 7654(a, c, l) { var p = "Expected a function", d = "__lodash_hash_undefined__", f = "[object Function]", h = "[object GeneratorFunction]", P = /[\\^$.*+?()[\]{}|]/g, b = /^\[object .+?Constructor\]$/, u = typeof l.g == "object" && l.g && l.g.Object === Object && l.g, g = typeof self == "object" && self && self.Object === Object && self, S = u || g || Function("return this")(); function R(He, Ue) { return He == null ? void 0 : He[Ue] } function y(He) { var Ue = !1; if (He != null && typeof He.toString != "function") try { Ue = !!(He + "") } catch { } return Ue } var v = Array.prototype, D = Function.prototype, M = Object.prototype, W = S["__core-js_shared__"], I = function () { var He = /[^.]+$/.exec(W && W.keys && W.keys.IE_PROTO || ""); return He ? "Symbol(src)_1." + He : "" }(), E = D.toString, _ = M.hasOwnProperty, k = M.toString, L = RegExp("^" + E.call(_).replace(P, "\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$"), H = v.splice, V = Br(S, "Map"), ee = Br(Object, "create"); function K(He) { var Ue = -1, zt = He ? He.length : 0; for (this.clear(); ++Ue < zt;) { var hr = He[Ue]; this.set(hr[0], hr[1]) } } function N() { this.__data__ = ee ? ee(null) : {} } function B(He) { return this.has(He) && delete this.__data__[He] } function Q(He) { var Ue = this.__data__; if (ee) { var zt = Ue[He]; return zt === d ? void 0 : zt } return _.call(Ue, He) ? Ue[He] : void 0 } function Z(He) { var Ue = this.__data__; return ee ? Ue[He] !== void 0 : _.call(Ue, He) } function le(He, Ue) { var zt = this.__data__; return zt[He] = ee && Ue === void 0 ? d : Ue, this } K.prototype.clear = N, K.prototype.delete = B, K.prototype.get = Q, K.prototype.has = Z, K.prototype.set = le; function X(He) { var Ue = -1, zt = He ? He.length : 0; for (this.clear(); ++Ue < zt;) { var hr = He[Ue]; this.set(hr[0], hr[1]) } } function ce() { this.__data__ = [] } function he(He) { var Ue = this.__data__, zt = Dt(Ue, He); if (zt < 0) return !1; var hr = Ue.length - 1; return zt == hr ? Ue.pop() : H.call(Ue, zt, 1), !0 } function ue(He) { var Ue = this.__data__, zt = Dt(Ue, He); return zt < 0 ? void 0 : Ue[zt][1] } function ye(He) { return Dt(this.__data__, He) > -1 } function se(He, Ue) { var zt = this.__data__, hr = Dt(zt, He); return hr < 0 ? zt.push([He, Ue]) : zt[hr][1] = Ue, this } X.prototype.clear = ce, X.prototype.delete = he, X.prototype.get = ue, X.prototype.has = ye, X.prototype.set = se; function _e(He) { var Ue = -1, zt = He ? He.length : 0; for (this.clear(); ++Ue < zt;) { var hr = He[Ue]; this.set(hr[0], hr[1]) } } function Se() { this.__data__ = { hash: new K, map: new (V || X), string: new K } } function we(He) { return tr(this, He).delete(He) } function De(He) { return tr(this, He).get(He) } function mt(He) { return tr(this, He).has(He) } function Lt(He, Ue) { return tr(this, He).set(He, Ue), this } _e.prototype.clear = Se, _e.prototype.delete = we, _e.prototype.get = De, _e.prototype.has = mt, _e.prototype.set = Lt; function Dt(He, Ue) { for (var zt = He.length; zt--;)if (hn(He[zt][0], Ue)) return zt; return -1 } function ot(He) { if (!wn(He) || ir(He)) return !1; var Ue = Wr(He) || y(He) ? L : b; return Ue.test(gr(He)) } function tr(He, Ue) { var zt = He.__data__; return on(Ue) ? zt[typeof Ue == "string" ? "string" : "hash"] : zt.map } function Br(He, Ue) { var zt = R(He, Ue); return ot(zt) ? zt : void 0 } function on(He) { var Ue = typeof He; return Ue == "string" || Ue == "number" || Ue == "symbol" || Ue == "boolean" ? He !== "__proto__" : He === null } function ir(He) { return !!I && I in He } function gr(He) { if (He != null) { try { return E.call(He) } catch { } try { return He + "" } catch { } } return "" } function Bt(He, Ue) { if (typeof He != "function" || Ue && typeof Ue != "function") throw new TypeError(p); var zt = function () { var hr = arguments, Dr = Ue ? Ue.apply(this, hr) : hr[0], Kr = zt.cache; if (Kr.has(Dr)) return Kr.get(Dr); var fn = He.apply(this, hr); return zt.cache = Kr.set(Dr, fn), fn }; return zt.cache = new (Bt.Cache || _e), zt } Bt.Cache = _e; function hn(He, Ue) { return He === Ue || He !== He && Ue !== Ue } function Wr(He) { var Ue = wn(He) ? k.call(He) : ""; return Ue == f || Ue == h } function wn(He) { var Ue = typeof He; return !!He && (Ue == "object" || Ue == "function") } a.exports = Bt }, 7800(a, c, l) { l.d(c, { A: () => d }); var p = l(3145); function d(f, h) { if (f) { if (typeof f == "string") return (0, p.A)(f, h); var P = {}.toString.call(f).slice(8, -1); return P === "Object" && f.constructor && (P = f.constructor.name), P === "Map" || P === "Set" ? Array.from(f) : P === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P) ? (0, p.A)(f, h) : void 0 } } }, 7833(a, c, l) { c.formatArgs = d, c.save = f, c.load = h, c.useColors = p, c.storage = P(), c.destroy = (() => { let u = !1; return () => { u || (u = !0, console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")) } })(), c.colors = ["#0000CC", "#0000FF", "#0033CC", "#0033FF", "#0066CC", "#0066FF", "#0099CC", "#0099FF", "#00CC00", "#00CC33", "#00CC66", "#00CC99", "#00CCCC", "#00CCFF", "#3300CC", "#3300FF", "#3333CC", "#3333FF", "#3366CC", "#3366FF", "#3399CC", "#3399FF", "#33CC00", "#33CC33", "#33CC66", "#33CC99", "#33CCCC", "#33CCFF", "#6600CC", "#6600FF", "#6633CC", "#6633FF", "#66CC00", "#66CC33", "#9900CC", "#9900FF", "#9933CC", "#9933FF", "#99CC00", "#99CC33", "#CC0000", "#CC0033", "#CC0066", "#CC0099", "#CC00CC", "#CC00FF", "#CC3300", "#CC3333", "#CC3366", "#CC3399", "#CC33CC", "#CC33FF", "#CC6600", "#CC6633", "#CC9900", "#CC9933", "#CCCC00", "#CCCC33", "#FF0000", "#FF0033", "#FF0066", "#FF0099", "#FF00CC", "#FF00FF", "#FF3300", "#FF3333", "#FF3366", "#FF3399", "#FF33CC", "#FF33FF", "#FF6600", "#FF6633", "#FF9900", "#FF9933", "#FFCC00", "#FFCC33"]; function p() { if (typeof window < "u" && window.process && (window.process.type === "renderer" || window.process.__nwjs)) return !0; if (typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)) return !1; let u; return typeof document < "u" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || typeof window < "u" && window.console && (window.console.firebug || window.console.exception && window.console.table) || typeof navigator < "u" && navigator.userAgent && (u = navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)) && parseInt(u[1], 10) >= 31 || typeof navigator < "u" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/) } function d(u) { if (u[0] = (this.useColors ? "%c" : "") + this.namespace + (this.useColors ? " %c" : " ") + u[0] + (this.useColors ? "%c " : " ") + "+" + a.exports.humanize(this.diff), !this.useColors) return; const g = "color: " + this.color; u.splice(1, 0, g, "color: inherit"); let S = 0, R = 0; u[0].replace(/%[a-zA-Z%]/g, y => { y !== "%%" && (S++, y === "%c" && (R = S)) }), u.splice(R, 0, g) } c.log = console.debug || console.log || (() => { }); function f(u) { try { u ? c.storage.setItem("debug", u) : c.storage.removeItem("debug") } catch { } } function h() { let u; try { u = c.storage.getItem("debug") || c.storage.getItem("DEBUG") } catch { } return !u && typeof process < "u" && "env" in process && (u = {}.DEBUG), u } function P() { try { return localStorage } catch { } } a.exports = l(736)(c); const { formatters: b } = a.exports; b.j = function (u) { try { return JSON.stringify(u) } catch (g) { return "[UnexpectedJSONParseError]: " + g.message } } }, 8046(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.validateAndNormalizeRtpCapabilities = b, c.validateAndNormalizeRtpParameters = u, c.validateAndNormalizeSctpStreamParameters = g, c.validateSctpCapabilities = S, c.getExtendedRtpCapabilities = R, c.getRecvRtpCapabilities = y, c.getSendingRtpParameters = v, c.getSendingRemoteRtpParameters = D, c.reduceCodecs = M, c.generateProbatorRtpParameters = W, c.canSend = I, c.canReceive = E; const p = l(3200), d = l(1765), f = "probator", h = 1234, P = 127; function b(X) { if (typeof X != "object") throw new TypeError("caps is not an object"); if (X.codecs && !Array.isArray(X.codecs)) throw new TypeError("caps.codecs is not an array"); X.codecs || (X.codecs = []); for (const ce of X.codecs) _(ce); if (X.headerExtensions && !Array.isArray(X.headerExtensions)) throw new TypeError("caps.headerExtensions is not an array"); X.headerExtensions || (X.headerExtensions = []); for (const ce of X.headerExtensions) L(ce) } function u(X) { if (typeof X != "object") throw new TypeError("params is not an object"); if (X.mid && typeof X.mid != "string") throw new TypeError("params.mid is not a string"); if (!Array.isArray(X.codecs)) throw new TypeError("missing params.codecs"); for (const ce of X.codecs) H(ce); if (X.headerExtensions && !Array.isArray(X.headerExtensions)) throw new TypeError("params.headerExtensions is not an array"); X.headerExtensions || (X.headerExtensions = []); for (const ce of X.headerExtensions) V(ce); if (X.encodings && !Array.isArray(X.encodings)) throw new TypeError("params.encodings is not an array"); X.encodings || (X.encodings = []); for (const ce of X.encodings) ee(ce); if (X.rtcp && typeof X.rtcp != "object") throw new TypeError("params.rtcp is not an object"); X.rtcp || (X.rtcp = {}), K(X.rtcp) } function g(X) { if (typeof X != "object") throw new TypeError("params is not an object"); if (typeof X.streamId != "number") throw new TypeError("missing params.streamId"); let ce = !1; if (typeof X.ordered == "boolean" ? ce = !0 : X.ordered = !0, X.maxPacketLifeTime && typeof X.maxPacketLifeTime != "number") throw new TypeError("invalid params.maxPacketLifeTime"); if (X.maxRetransmits && typeof X.maxRetransmits != "number") throw new TypeError("invalid params.maxRetransmits"); if (X.maxPacketLifeTime && X.maxRetransmits) throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits"); if (ce && X.ordered && (X.maxPacketLifeTime || X.maxRetransmits)) throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits"); if (!ce && (X.maxPacketLifeTime || X.maxRetransmits) && (X.ordered = !1), X.label && typeof X.label != "string") throw new TypeError("invalid params.label"); if (X.protocol && typeof X.protocol != "string") throw new TypeError("invalid params.protocol") } function S(X) { if (typeof X != "object") throw new TypeError("caps is not an object"); if (!X.numStreams || typeof X.numStreams != "object") throw new TypeError("missing caps.numStreams"); N(X.numStreams) } function R(X, ce, he) { const ue = { codecs: [], headerExtensions: [] }; if (he) for (const ye of X.codecs ?? []) { if (B(ye)) continue; const se = (ce.codecs ?? []).find(Se => Q(Se, ye, { strict: !0, modify: !0 })); if (!se) continue; const _e = { kind: ye.kind, mimeType: ye.mimeType, clockRate: ye.clockRate, channels: ye.channels, localPayloadType: ye.preferredPayloadType, localRtxPayloadType: void 0, remotePayloadType: se.preferredPayloadType, remoteRtxPayloadType: void 0, localParameters: ye.parameters ?? {}, remoteParameters: se.parameters ?? {}, rtcpFeedback: le(ye, se) }; ue.codecs.push(_e) } else for (const ye of ce.codecs ?? []) { if (B(ye)) continue; const se = (X.codecs ?? []).find(Se => Q(Se, ye, { strict: !0, modify: !0 })); if (!se) continue; const _e = { kind: se.kind, mimeType: se.mimeType, clockRate: se.clockRate, channels: se.channels, localPayloadType: se.preferredPayloadType, localRtxPayloadType: void 0, remotePayloadType: ye.preferredPayloadType, remoteRtxPayloadType: void 0, localParameters: se.parameters ?? {}, remoteParameters: ye.parameters ?? {}, rtcpFeedback: le(se, ye) }; ue.codecs.push(_e) } for (const ye of ue.codecs) { const se = X.codecs.find(Se => { var we; return B(Se) && ((we = Se.parameters) == null ? void 0 : we.apt) === ye.localPayloadType }), _e = ce.codecs.find(Se => { var we; return B(Se) && ((we = Se.parameters) == null ? void 0 : we.apt) === ye.remotePayloadType }); se && _e && (ye.localRtxPayloadType = se.preferredPayloadType, ye.remoteRtxPayloadType = _e.preferredPayloadType) } for (const ye of ce.headerExtensions) { const se = X.headerExtensions.find(Se => Z(Se, ye)); if (!se) continue; const _e = { kind: ye.kind, uri: ye.uri, sendId: se.preferredId, recvId: ye.preferredId, encrypt: se.preferredEncrypt ?? !1, direction: "sendrecv" }; switch (ye.direction) { case "sendrecv": { _e.direction = "sendrecv"; break } case "recvonly": { _e.direction = "sendonly"; break } case "sendonly": { _e.direction = "recvonly"; break } case "inactive": { _e.direction = "inactive"; break } }ue.headerExtensions.push(_e) } return ue } function y(X) { const ce = { codecs: [], headerExtensions: [] }; for (const he of X.codecs) { const ue = { kind: he.kind, mimeType: he.mimeType, preferredPayloadType: he.remotePayloadType, clockRate: he.clockRate, channels: he.channels, parameters: he.localParameters, rtcpFeedback: he.rtcpFeedback }; if (ce.codecs.push(ue), !he.remoteRtxPayloadType) continue; const ye = { kind: he.kind, mimeType: `${he.kind}/rtx`, preferredPayloadType: he.remoteRtxPayloadType, clockRate: he.clockRate, parameters: { apt: he.remotePayloadType }, rtcpFeedback: [] }; ce.codecs.push(ye) } for (const he of X.headerExtensions) { if (he.direction !== "sendrecv" && he.direction !== "recvonly") continue; const ue = { kind: he.kind, uri: he.uri, preferredId: he.recvId, preferredEncrypt: he.encrypt ?? !1, direction: he.direction }; ce.headerExtensions.push(ue) } return ce } function v(X, ce) { const he = { mid: void 0, codecs: [], headerExtensions: [], encodings: [], rtcp: {} }; for (const ue of ce.codecs) { if (ue.kind !== X) continue; const ye = { mimeType: ue.mimeType, payloadType: ue.localPayloadType, clockRate: ue.clockRate, channels: ue.channels, parameters: ue.localParameters, rtcpFeedback: ue.rtcpFeedback }; if (he.codecs.push(ye), ue.localRtxPayloadType) { const se = { mimeType: `${ue.kind}/rtx`, payloadType: ue.localRtxPayloadType, clockRate: ue.clockRate, parameters: { apt: ue.localPayloadType }, rtcpFeedback: [] }; he.codecs.push(se) } } for (const ue of ce.headerExtensions) { if (ue.kind && ue.kind !== X || ue.direction !== "sendrecv" && ue.direction !== "sendonly") continue; const ye = { uri: ue.uri, id: ue.sendId, encrypt: ue.encrypt, parameters: {} }; he.headerExtensions.push(ye) } return he } function D(X, ce) { const he = { mid: void 0, codecs: [], headerExtensions: [], encodings: [], rtcp: {} }; for (const ue of ce.codecs) { if (ue.kind !== X) continue; const ye = { mimeType: ue.mimeType, payloadType: ue.localPayloadType, clockRate: ue.clockRate, channels: ue.channels, parameters: ue.remoteParameters, rtcpFeedback: ue.rtcpFeedback }; if (he.codecs.push(ye), ue.localRtxPayloadType) { const se = { mimeType: `${ue.kind}/rtx`, payloadType: ue.localRtxPayloadType, clockRate: ue.clockRate, parameters: { apt: ue.localPayloadType }, rtcpFeedback: [] }; he.codecs.push(se) } } for (const ue of ce.headerExtensions) { if (ue.kind && ue.kind !== X || ue.direction !== "sendrecv" && ue.direction !== "sendonly") continue; const ye = { uri: ue.uri, id: ue.sendId, encrypt: ue.encrypt, parameters: {} }; he.headerExtensions.push(ye) } if (he.headerExtensions.some(ue => ue.uri === "http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")) for (const ue of he.codecs) ue.rtcpFeedback = (ue.rtcpFeedback ?? []).filter(ye => ye.type !== "goog-remb"); else if (he.headerExtensions.some(ue => ue.uri === "http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time")) for (const ue of he.codecs) ue.rtcpFeedback = (ue.rtcpFeedback ?? []).filter(ye => ye.type !== "transport-cc"); else for (const ue of he.codecs) ue.rtcpFeedback = (ue.rtcpFeedback ?? []).filter(ye => ye.type !== "transport-cc" && ye.type !== "goog-remb"); return he } function M(X, ce) { const he = []; if (!ce) he.push(X[0]), B(X[1]) && he.push(X[1]); else { for (let ue = 0; ue < X.length; ++ue)if (Q(X[ue], ce, { strict: !0 })) { he.push(X[ue]), B(X[ue + 1]) && he.push(X[ue + 1]); break } if (he.length === 0) throw new TypeError("no matching codec found") } return he } function W(X) { X = d.clone(X), u(X); const ce = { mid: f, codecs: [], headerExtensions: [], encodings: [{ ssrc: h }], rtcp: { cname: "probator" } }; return ce.codecs.push(X.codecs[0]), ce.codecs[0].payloadType = P, ce.headerExtensions = X.headerExtensions, ce } function I(X, ce) { return (ce.codecs ?? []).some(he => he.kind === X) } function E(X, ce) { if (u(X), X.codecs.length === 0) return !1; const he = X.codecs[0]; return (ce.codecs ?? []).some(ue => ue.preferredPayloadType === he.payloadType) } function _(X) { const ce = new RegExp("^(audio|video)/(.+)", "i"); if (typeof X != "object") throw new TypeError("codec is not an object"); if (!X.mimeType || typeof X.mimeType != "string") throw new TypeError("missing codec.mimeType"); const he = ce.exec(X.mimeType); if (!he) throw new TypeError("invalid codec.mimeType"); if (X.kind = he[1].toLowerCase(), typeof X.preferredPayloadType != "number") throw new TypeError("missing codec.preferredPayloadType"); if (typeof X.clockRate != "number") throw new TypeError("missing codec.clockRate"); X.kind === "audio" ? typeof X.channels != "number" && (X.channels = 1) : delete X.channels, (!X.parameters || typeof X.parameters != "object") && (X.parameters = {}); for (const ue of Object.keys(X.parameters)) { let ye = X.parameters[ue]; if (ye === void 0 && (X.parameters[ue] = "", ye = ""), typeof ye != "string" && typeof ye != "number") throw new TypeError(`invalid codec parameter [key:${ue}s, value:${ye}]`); if (ue === "apt" && typeof ye != "number") throw new TypeError("invalid codec apt parameter") } (!X.rtcpFeedback || !Array.isArray(X.rtcpFeedback)) && (X.rtcpFeedback = []); for (const ue of X.rtcpFeedback) k(ue) } function k(X) { if (typeof X != "object") throw new TypeError("fb is not an object"); if (!X.type || typeof X.type != "string") throw new TypeError("missing fb.type"); (!X.parameter || typeof X.parameter != "string") && (X.parameter = "") } function L(X) { if (typeof X != "object") throw new TypeError("ext is not an object"); if (X.kind !== "audio" && X.kind !== "video") throw new TypeError("invalid ext.kind"); if (!X.uri || typeof X.uri != "string") throw new TypeError("missing ext.uri"); if (typeof X.preferredId != "number") throw new TypeError("missing ext.preferredId"); if (X.preferredEncrypt && typeof X.preferredEncrypt != "boolean") throw new TypeError("invalid ext.preferredEncrypt"); if (X.preferredEncrypt || (X.preferredEncrypt = !1), X.direction && typeof X.direction != "string") throw new TypeError("invalid ext.direction"); X.direction || (X.direction = "sendrecv") } function H(X) { const ce = new RegExp("^(audio|video)/(.+)", "i"); if (typeof X != "object") throw new TypeError("codec is not an object"); if (!X.mimeType || typeof X.mimeType != "string") throw new TypeError("missing codec.mimeType"); const he = ce.exec(X.mimeType); if (!he) throw new TypeError("invalid codec.mimeType"); if (typeof X.payloadType != "number") throw new TypeError("missing codec.payloadType"); if (typeof X.clockRate != "number") throw new TypeError("missing codec.clockRate"); he[1].toLowerCase() === "audio" ? typeof X.channels != "number" && (X.channels = 1) : delete X.channels, (!X.parameters || typeof X.parameters != "object") && (X.parameters = {}); for (const ye of Object.keys(X.parameters)) { let se = X.parameters[ye]; if (se === void 0 && (X.parameters[ye] = "", se = ""), typeof se != "string" && typeof se != "number") throw new TypeError(`invalid codec parameter [key:${ye}s, value:${se}]`); if (ye === "apt" && typeof se != "number") throw new TypeError("invalid codec apt parameter") } (!X.rtcpFeedback || !Array.isArray(X.rtcpFeedback)) && (X.rtcpFeedback = []); for (const ye of X.rtcpFeedback) k(ye) } function V(X) { if (typeof X != "object") throw new TypeError("ext is not an object"); if (!X.uri || typeof X.uri != "string") throw new TypeError("missing ext.uri"); if (typeof X.id != "number") throw new TypeError("missing ext.id"); if (X.encrypt && typeof X.encrypt != "boolean") throw new TypeError("invalid ext.encrypt"); X.encrypt || (X.encrypt = !1), (!X.parameters || typeof X.parameters != "object") && (X.parameters = {}); for (const ce of Object.keys(X.parameters)) { let he = X.parameters[ce]; if (he === void 0 && (X.parameters[ce] = "", he = ""), typeof he != "string" && typeof he != "number") throw new TypeError("invalid header extension parameter") } } function ee(X) { if (typeof X != "object") throw new TypeError("encoding is not an object"); if (X.ssrc && typeof X.ssrc != "number") throw new TypeError("invalid encoding.ssrc"); if (X.rid && typeof X.rid != "string") throw new TypeError("invalid encoding.rid"); if (X.rtx && typeof X.rtx != "object") throw new TypeError("invalid encoding.rtx"); if (X.rtx && typeof X.rtx.ssrc != "number") throw new TypeError("missing encoding.rtx.ssrc"); if ((!X.dtx || typeof X.dtx != "boolean") && (X.dtx = !1), X.scalabilityMode && typeof X.scalabilityMode != "string") throw new TypeError("invalid encoding.scalabilityMode") } function K(X) { if (typeof X != "object") throw new TypeError("rtcp is not an object"); if (X.cname && typeof X.cname != "string") throw new TypeError("invalid rtcp.cname"); (!X.reducedSize || typeof X.reducedSize != "boolean") && (X.reducedSize = !0) } function N(X) { if (typeof X != "object") throw new TypeError("numStreams is not an object"); if (typeof X.OS != "number") throw new TypeError("missing numStreams.OS"); if (typeof X.MIS != "number") throw new TypeError("missing numStreams.MIS") } function B(X) { return X ? /.+\/rtx$/i.test(X.mimeType) : !1 } function Q(X, ce, { strict: he = !1, modify: ue = !1 } = {}) { const ye = X.mimeType.toLowerCase(), se = ce.mimeType.toLowerCase(); if (ye !== se || X.clockRate !== ce.clockRate || X.channels !== ce.channels) return !1; switch (ye) { case "video/h264": { if (he) { const _e = X.parameters["packetization-mode"] ?? 0, Se = ce.parameters["packetization-mode"] ?? 0; if (_e !== Se || !p.isSameProfile(X.parameters, ce.parameters)) return !1; let we; try { we = p.generateProfileLevelIdStringForAnswer(X.parameters, ce.parameters) } catch { return !1 } ue && (we ? (X.parameters["profile-level-id"] = we, ce.parameters["profile-level-id"] = we) : (delete X.parameters["profile-level-id"], delete ce.parameters["profile-level-id"])) } break } case "video/vp9": { if (he) { const _e = X.parameters["profile-id"] ?? 0, Se = ce.parameters["profile-id"] ?? 0; if (_e !== Se) return !1 } break } }return !0 } function Z(X, ce) { return !(X.kind && ce.kind && X.kind !== ce.kind || X.uri !== ce.uri) } function le(X, ce) { const he = []; for (const ue of X.rtcpFeedback ?? []) { const ye = (ce.rtcpFeedback ?? []).find(se => se.type === ue.type && (se.parameter === ue.parameter || !se.parameter && !ue.parameter)); ye && he.push(ye) } return he } }, 8056(a, c, l) {
                (function (p, d) { a.exports = d(l(9021)) })(this, function (p) {/** @preserve
		(c) 2012 by Cdric Mesnil. All rights reserved.

		Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

		    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
		    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

		THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
		*/return function (d) { var f = p, h = f.lib, P = h.WordArray, b = h.Hasher, u = f.algo, g = P.create([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8, 3, 10, 14, 4, 9, 15, 8, 1, 2, 7, 0, 6, 13, 11, 5, 12, 1, 9, 11, 10, 0, 8, 12, 4, 13, 3, 7, 15, 14, 5, 6, 2, 4, 0, 5, 9, 7, 12, 2, 10, 14, 1, 3, 8, 11, 6, 15, 13]), S = P.create([5, 14, 7, 0, 9, 2, 11, 4, 13, 6, 15, 8, 1, 10, 3, 12, 6, 11, 3, 7, 0, 13, 5, 10, 14, 15, 8, 12, 4, 9, 1, 2, 15, 5, 1, 3, 7, 14, 6, 9, 11, 8, 12, 2, 10, 0, 4, 13, 8, 6, 4, 1, 3, 11, 15, 0, 5, 12, 2, 13, 9, 7, 10, 14, 12, 15, 10, 4, 1, 5, 8, 7, 6, 2, 13, 14, 0, 3, 9, 11]), R = P.create([11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8, 7, 6, 8, 13, 11, 9, 7, 15, 7, 12, 15, 9, 11, 7, 13, 12, 11, 13, 6, 7, 14, 9, 13, 15, 14, 8, 13, 6, 5, 12, 7, 5, 11, 12, 14, 15, 14, 15, 9, 8, 9, 14, 5, 6, 8, 6, 5, 12, 9, 15, 5, 11, 6, 8, 13, 12, 5, 12, 13, 14, 11, 8, 5, 6]), y = P.create([8, 9, 9, 11, 13, 15, 15, 5, 7, 7, 8, 11, 14, 14, 12, 6, 9, 13, 15, 7, 12, 8, 9, 11, 7, 7, 12, 7, 6, 15, 13, 11, 9, 7, 15, 11, 8, 6, 6, 14, 12, 13, 5, 14, 13, 13, 7, 5, 15, 5, 8, 11, 14, 14, 6, 14, 6, 9, 12, 9, 12, 5, 15, 8, 8, 5, 12, 9, 12, 5, 14, 6, 8, 13, 6, 5, 15, 13, 11, 11]), v = P.create([0, 1518500249, 1859775393, 2400959708, 2840853838]), D = P.create([1352829926, 1548603684, 1836072691, 2053994217, 0]), M = u.RIPEMD160 = b.extend({ _doReset: function () { this._hash = P.create([1732584193, 4023233417, 2562383102, 271733878, 3285377520]) }, _doProcessBlock: function (H, V) { for (var ee = 0; ee < 16; ee++) { var K = V + ee, N = H[K]; H[K] = (N << 8 | N >>> 24) & 16711935 | (N << 24 | N >>> 8) & 4278255360 } var B = this._hash.words, Q = v.words, Z = D.words, le = g.words, X = S.words, ce = R.words, he = y.words, ue, ye, se, _e, Se, we, De, mt, Lt, Dt; we = ue = B[0], De = ye = B[1], mt = se = B[2], Lt = _e = B[3], Dt = Se = B[4]; for (var ot, ee = 0; ee < 80; ee += 1)ot = ue + H[V + le[ee]] | 0, ee < 16 ? ot += W(ye, se, _e) + Q[0] : ee < 32 ? ot += I(ye, se, _e) + Q[1] : ee < 48 ? ot += E(ye, se, _e) + Q[2] : ee < 64 ? ot += _(ye, se, _e) + Q[3] : ot += k(ye, se, _e) + Q[4], ot = ot | 0, ot = L(ot, ce[ee]), ot = ot + Se | 0, ue = Se, Se = _e, _e = L(se, 10), se = ye, ye = ot, ot = we + H[V + X[ee]] | 0, ee < 16 ? ot += k(De, mt, Lt) + Z[0] : ee < 32 ? ot += _(De, mt, Lt) + Z[1] : ee < 48 ? ot += E(De, mt, Lt) + Z[2] : ee < 64 ? ot += I(De, mt, Lt) + Z[3] : ot += W(De, mt, Lt) + Z[4], ot = ot | 0, ot = L(ot, he[ee]), ot = ot + Dt | 0, we = Dt, Dt = Lt, Lt = L(mt, 10), mt = De, De = ot; ot = B[1] + se + Lt | 0, B[1] = B[2] + _e + Dt | 0, B[2] = B[3] + Se + we | 0, B[3] = B[4] + ue + De | 0, B[4] = B[0] + ye + mt | 0, B[0] = ot }, _doFinalize: function () { var H = this._data, V = H.words, ee = this._nDataBytes * 8, K = H.sigBytes * 8; V[K >>> 5] |= 128 << 24 - K % 32, V[(K + 64 >>> 9 << 4) + 14] = (ee << 8 | ee >>> 24) & 16711935 | (ee << 24 | ee >>> 8) & 4278255360, H.sigBytes = (V.length + 1) * 4, this._process(); for (var N = this._hash, B = N.words, Q = 0; Q < 5; Q++) { var Z = B[Q]; B[Q] = (Z << 8 | Z >>> 24) & 16711935 | (Z << 24 | Z >>> 8) & 4278255360 } return N }, clone: function () { var H = b.clone.call(this); return H._hash = this._hash.clone(), H } }); function W(H, V, ee) { return H ^ V ^ ee } function I(H, V, ee) { return H & V | ~H & ee } function E(H, V, ee) { return (H | ~V) ^ ee } function _(H, V, ee) { return H & ee | V & ~ee } function k(H, V, ee) { return H ^ (V | ~ee) } function L(H, V) { return H << V | H >>> 32 - V } f.RIPEMD160 = b._createHelper(M), f.HmacRIPEMD160 = b._createHmacHelper(M) }(), p.RIPEMD160
                })
            }, 8057(a, c) { }, 8124(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.pad.NoPadding = { pad: function () { }, unpad: function () { } }, p.pad.NoPadding }) }, 8274(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Logger = void 0; const p = l(7833), d = "awaitqueue"; class f { constructor(P) { ve(this, "_debug"); ve(this, "_warn"); ve(this, "_error"); P ? (this._debug = p(`${d}:${P}`), this._warn = p(`${d}:WARN:${P}`), this._error = p(`${d}:ERROR:${P}`)) : (this._debug = p(d), this._warn = p(`${d}:WARN`), this._error = p(`${d}:ERROR`)), this._debug.log = console.info.bind(console), this._warn.log = console.warn.bind(console), this._error.log = console.error.bind(console) } get debug() { return this._debug } get warn() { return this._warn } get error() { return this._error } } c.Logger = f }, 8278(a, c, l) { l.d(c, { Ag: () => h, Wm: () => P, sn: () => u, tr: () => S }); var p = l(467), d = l(4756), f = l.n(d); l(1806); function h() { return b() || P() } function P() { return typeof window.RTCRtpScriptTransform < "u" } function b() { return typeof window.RTCRtpSender < "u" && typeof window.RTCRtpSender.prototype.createEncodedStreams < "u" } function u(y) { return g.apply(this, arguments) } function g() { return g = (0, p.A)(f().mark(function y(v) { var D, M; return f().wrap(function (W) { for (; ;)switch (W.prev = W.next) { case 0: return D = new TextEncoder, W.next = 1, crypto.subtle.importKey("raw", D.encode(v), { name: "PBKDF2" }, !1, ["deriveBits", "deriveKey"]); case 1: return M = W.sent, W.abrupt("return", M); case 2: case "end": return W.stop() } }, y) })), g.apply(this, arguments) } function S(y) { return R.apply(this, arguments) } function R() { return R = (0, p.A)(f().mark(function y(v) { var D; return f().wrap(function (M) { for (; ;)switch (M.prev = M.next) { case 0: return M.next = 1, crypto.subtle.importKey("raw", v, "HKDF", !1, ["deriveBits", "deriveKey"]); case 1: return D = M.sent, M.abrupt("return", D); case 2: case "end": return M.stop() } }, y) })), R.apply(this, arguments) } }, 8454(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(7165)) })(this, function (p) { return p.mode.ECB = function () { var d = p.lib.BlockCipherMode.extend(); return d.Encryptor = d.extend({ processBlock: function (f, h) { this._cipher.encryptBlock(f, h) } }), d.Decryptor = d.extend({ processBlock: function (f, h) { this._cipher.decryptBlock(f, h) } }), d }(), p.mode.ECB }) }, 8624(a, c, l) {
                l.r(c), l.d(c, { DOMException: () => K, Headers: () => S, Request: () => k, Response: () => V, fetch: () => N }); var p = typeof globalThis < "u" && globalThis || typeof self < "u" && self || typeof l.g < "u" && l.g || {}, d = { searchParams: "URLSearchParams" in p, iterable: "Symbol" in p && "iterator" in Symbol, blob: "FileReader" in p && "Blob" in p && function () { try { return new Blob, !0 } catch { return !1 } }(), formData: "FormData" in p, arrayBuffer: "ArrayBuffer" in p }; function f(B) { return B && DataView.prototype.isPrototypeOf(B) } if (d.arrayBuffer) var h = ["[object Int8Array]", "[object Uint8Array]", "[object Uint8ClampedArray]", "[object Int16Array]", "[object Uint16Array]", "[object Int32Array]", "[object Uint32Array]", "[object Float32Array]", "[object Float64Array]"], P = ArrayBuffer.isView || function (B) { return B && h.indexOf(Object.prototype.toString.call(B)) > -1 }; function b(B) { if (typeof B != "string" && (B = String(B)), /[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(B) || B === "") throw new TypeError('Invalid character in header field name: "' + B + '"'); return B.toLowerCase() } function u(B) { return typeof B != "string" && (B = String(B)), B } function g(B) { var Q = { next: function () { var Z = B.shift(); return { done: Z === void 0, value: Z } } }; return d.iterable && (Q[Symbol.iterator] = function () { return Q }), Q } function S(B) { this.map = {}, B instanceof S ? B.forEach(function (Q, Z) { this.append(Z, Q) }, this) : Array.isArray(B) ? B.forEach(function (Q) { if (Q.length != 2) throw new TypeError("Headers constructor: expected name/value pair to be length 2, found" + Q.length); this.append(Q[0], Q[1]) }, this) : B && Object.getOwnPropertyNames(B).forEach(function (Q) { this.append(Q, B[Q]) }, this) } S.prototype.append = function (B, Q) { B = b(B), Q = u(Q); var Z = this.map[B]; this.map[B] = Z ? Z + ", " + Q : Q }, S.prototype.delete = function (B) { delete this.map[b(B)] }, S.prototype.get = function (B) { return B = b(B), this.has(B) ? this.map[B] : null }, S.prototype.has = function (B) { return this.map.hasOwnProperty(b(B)) }, S.prototype.set = function (B, Q) { this.map[b(B)] = u(Q) }, S.prototype.forEach = function (B, Q) { for (var Z in this.map) this.map.hasOwnProperty(Z) && B.call(Q, this.map[Z], Z, this) }, S.prototype.keys = function () { var B = []; return this.forEach(function (Q, Z) { B.push(Z) }), g(B) }, S.prototype.values = function () { var B = []; return this.forEach(function (Q) { B.push(Q) }), g(B) }, S.prototype.entries = function () { var B = []; return this.forEach(function (Q, Z) { B.push([Z, Q]) }), g(B) }, d.iterable && (S.prototype[Symbol.iterator] = S.prototype.entries); function R(B) { if (!B._noBody) { if (B.bodyUsed) return Promise.reject(new TypeError("Already read")); B.bodyUsed = !0 } } function y(B) { return new Promise(function (Q, Z) { B.onload = function () { Q(B.result) }, B.onerror = function () { Z(B.error) } }) } function v(B) { var Q = new FileReader, Z = y(Q); return Q.readAsArrayBuffer(B), Z } function D(B) { var Q = new FileReader, Z = y(Q), le = /charset=([A-Za-z0-9_-]+)/.exec(B.type), X = le ? le[1] : "utf-8"; return Q.readAsText(B, X), Z } function M(B) { for (var Q = new Uint8Array(B), Z = new Array(Q.length), le = 0; le < Q.length; le++)Z[le] = String.fromCharCode(Q[le]); return Z.join("") } function W(B) { if (B.slice) return B.slice(0); var Q = new Uint8Array(B.byteLength); return Q.set(new Uint8Array(B)), Q.buffer } function I() { return this.bodyUsed = !1, this._initBody = function (B) { this.bodyUsed = this.bodyUsed, this._bodyInit = B, B ? typeof B == "string" ? this._bodyText = B : d.blob && Blob.prototype.isPrototypeOf(B) ? this._bodyBlob = B : d.formData && FormData.prototype.isPrototypeOf(B) ? this._bodyFormData = B : d.searchParams && URLSearchParams.prototype.isPrototypeOf(B) ? this._bodyText = B.toString() : d.arrayBuffer && d.blob && f(B) ? (this._bodyArrayBuffer = W(B.buffer), this._bodyInit = new Blob([this._bodyArrayBuffer])) : d.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(B) || P(B)) ? this._bodyArrayBuffer = W(B) : this._bodyText = B = Object.prototype.toString.call(B) : (this._noBody = !0, this._bodyText = ""), this.headers.get("content-type") || (typeof B == "string" ? this.headers.set("content-type", "text/plain;charset=UTF-8") : this._bodyBlob && this._bodyBlob.type ? this.headers.set("content-type", this._bodyBlob.type) : d.searchParams && URLSearchParams.prototype.isPrototypeOf(B) && this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8")) }, d.blob && (this.blob = function () { var B = R(this); if (B) return B; if (this._bodyBlob) return Promise.resolve(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(new Blob([this._bodyArrayBuffer])); if (this._bodyFormData) throw new Error("could not read FormData body as blob"); return Promise.resolve(new Blob([this._bodyText])) }), this.arrayBuffer = function () { if (this._bodyArrayBuffer) { var B = R(this); return B || (ArrayBuffer.isView(this._bodyArrayBuffer) ? Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset, this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength)) : Promise.resolve(this._bodyArrayBuffer)) } else { if (d.blob) return this.blob().then(v); throw new Error("could not read as ArrayBuffer") } }, this.text = function () { var B = R(this); if (B) return B; if (this._bodyBlob) return D(this._bodyBlob); if (this._bodyArrayBuffer) return Promise.resolve(M(this._bodyArrayBuffer)); if (this._bodyFormData) throw new Error("could not read FormData body as text"); return Promise.resolve(this._bodyText) }, d.formData && (this.formData = function () { return this.text().then(L) }), this.json = function () { return this.text().then(JSON.parse) }, this } var E = ["CONNECT", "DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT", "TRACE"]; function _(B) { var Q = B.toUpperCase(); return E.indexOf(Q) > -1 ? Q : B } function k(B, Q) { if (!(this instanceof k)) throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.'); Q = Q || {}; var Z = Q.body; if (B instanceof k) { if (B.bodyUsed) throw new TypeError("Already read"); this.url = B.url, this.credentials = B.credentials, Q.headers || (this.headers = new S(B.headers)), this.method = B.method, this.mode = B.mode, this.signal = B.signal, !Z && B._bodyInit != null && (Z = B._bodyInit, B.bodyUsed = !0) } else this.url = String(B); if (this.credentials = Q.credentials || this.credentials || "same-origin", (Q.headers || !this.headers) && (this.headers = new S(Q.headers)), this.method = _(Q.method || this.method || "GET"), this.mode = Q.mode || this.mode || null, this.signal = Q.signal || this.signal || function () { if ("AbortController" in p) { var ce = new AbortController; return ce.signal } }(), this.referrer = null, (this.method === "GET" || this.method === "HEAD") && Z) throw new TypeError("Body not allowed for GET or HEAD requests"); if (this._initBody(Z), (this.method === "GET" || this.method === "HEAD") && (Q.cache === "no-store" || Q.cache === "no-cache")) { var le = /([?&])_=[^&]*/; if (le.test(this.url)) this.url = this.url.replace(le, "$1_=" + new Date().getTime()); else { var X = /\?/; this.url += (X.test(this.url) ? "&" : "?") + "_=" + new Date().getTime() } } } k.prototype.clone = function () { return new k(this, { body: this._bodyInit }) }; function L(B) { var Q = new FormData; return B.trim().split("&").forEach(function (Z) { if (Z) { var le = Z.split("="), X = le.shift().replace(/\+/g, " "), ce = le.join("=").replace(/\+/g, " "); Q.append(decodeURIComponent(X), decodeURIComponent(ce)) } }), Q } function H(B) {
                    var Q = new S, Z = B.replace(/\r?\n[\t ]+/g, " "); return Z.split("\r").map(function (le) {
                        return le.indexOf(`
`) === 0 ? le.substr(1, le.length) : le
                    }).forEach(function (le) { var X = le.split(":"), ce = X.shift().trim(); if (ce) { var he = X.join(":").trim(); try { Q.append(ce, he) } catch (ue) { console.warn("Response " + ue.message) } } }), Q
                } I.call(k.prototype); function V(B, Q) { if (!(this instanceof V)) throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.'); if (Q || (Q = {}), this.type = "default", this.status = Q.status === void 0 ? 200 : Q.status, this.status < 200 || this.status > 599) throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599]."); this.ok = this.status >= 200 && this.status < 300, this.statusText = Q.statusText === void 0 ? "" : "" + Q.statusText, this.headers = new S(Q.headers), this.url = Q.url || "", this._initBody(B) } I.call(V.prototype), V.prototype.clone = function () { return new V(this._bodyInit, { status: this.status, statusText: this.statusText, headers: new S(this.headers), url: this.url }) }, V.error = function () { var B = new V(null, { status: 200, statusText: "" }); return B.ok = !1, B.status = 0, B.type = "error", B }; var ee = [301, 302, 303, 307, 308]; V.redirect = function (B, Q) { if (ee.indexOf(Q) === -1) throw new RangeError("Invalid status code"); return new V(null, { status: Q, headers: { location: B } }) }; var K = p.DOMException; try { new K } catch { K = function (Q, Z) { this.message = Q, this.name = Z; var le = Error(Q); this.stack = le.stack }, K.prototype = Object.create(Error.prototype), K.prototype.constructor = K } function N(B, Q) { return new Promise(function (Z, le) { var X = new k(B, Q); if (X.signal && X.signal.aborted) return le(new K("Aborted", "AbortError")); var ce = new XMLHttpRequest; function he() { ce.abort() } ce.onload = function () { var se = { statusText: ce.statusText, headers: H(ce.getAllResponseHeaders() || "") }; X.url.indexOf("file://") === 0 && (ce.status < 200 || ce.status > 599) ? se.status = 200 : se.status = ce.status, se.url = "responseURL" in ce ? ce.responseURL : se.headers.get("X-Request-URL"); var _e = "response" in ce ? ce.response : ce.responseText; setTimeout(function () { Z(new V(_e, se)) }, 0) }, ce.onerror = function () { setTimeout(function () { le(new TypeError("Network request failed")) }, 0) }, ce.ontimeout = function () { setTimeout(function () { le(new TypeError("Network request timed out")) }, 0) }, ce.onabort = function () { setTimeout(function () { le(new K("Aborted", "AbortError")) }, 0) }; function ue(se) { try { return se === "" && p.location.href ? p.location.href : se } catch { return se } } if (ce.open(X.method, ue(X.url), !0), X.credentials === "include" ? ce.withCredentials = !0 : X.credentials === "omit" && (ce.withCredentials = !1), "responseType" in ce && (d.blob ? ce.responseType = "blob" : d.arrayBuffer && (ce.responseType = "arraybuffer")), Q && typeof Q.headers == "object" && !(Q.headers instanceof S || p.Headers && Q.headers instanceof p.Headers)) { var ye = []; Object.getOwnPropertyNames(Q.headers).forEach(function (se) { ye.push(b(se)), ce.setRequestHeader(se, u(Q.headers[se])) }), X.headers.forEach(function (se, _e) { ye.indexOf(_e) === -1 && ce.setRequestHeader(_e, se) }) } else X.headers.forEach(function (se, _e) { ce.setRequestHeader(_e, se) }); X.signal && (X.signal.addEventListener("abort", he), ce.onreadystatechange = function () { ce.readyState === 4 && X.signal.removeEventListener("abort", he) }), ce.send(typeof X._bodyInit > "u" ? null : X._bodyInit) }) } N.polyfill = !0, p.fetch || (p.fetch = N, p.Headers = S, p.Request = k, p.Response = V)
            }, 8876(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.AwaitQueueRemovedTaskError = c.AwaitQueueStoppedError = c.AwaitQueue = void 0; var p = l(9275); Object.defineProperty(c, "AwaitQueue", { enumerable: !0, get: function () { return p.AwaitQueue } }); var d = l(4253); Object.defineProperty(c, "AwaitQueueStoppedError", { enumerable: !0, get: function () { return d.AwaitQueueStoppedError } }), Object.defineProperty(c, "AwaitQueueRemovedTaskError", { enumerable: !0, get: function () { return d.AwaitQueueRemovedTaskError } }) }, 9021(a, c, l) { (function (p, d) { a.exports = d() })(this, function () { var p = p || function (d, f) { var h; if (typeof window < "u" && window.crypto && (h = window.crypto), typeof self < "u" && self.crypto && (h = self.crypto), typeof globalThis < "u" && globalThis.crypto && (h = globalThis.crypto), !h && typeof window < "u" && window.msCrypto && (h = window.msCrypto), !h && typeof l.g < "u" && l.g.crypto && (h = l.g.crypto), !h) try { h = l(477) } catch { } var P = function () { if (h) { if (typeof h.getRandomValues == "function") try { return h.getRandomValues(new Uint32Array(1))[0] } catch { } if (typeof h.randomBytes == "function") try { return h.randomBytes(4).readInt32LE() } catch { } } throw new Error("Native crypto module could not be used to get secure random number.") }, b = Object.create || function () { function E() { } return function (_) { var k; return E.prototype = _, k = new E, E.prototype = null, k } }(), u = {}, g = u.lib = {}, S = g.Base = function () { return { extend: function (E) { var _ = b(this); return E && _.mixIn(E), (!_.hasOwnProperty("init") || this.init === _.init) && (_.init = function () { _.$super.init.apply(this, arguments) }), _.init.prototype = _, _.$super = this, _ }, create: function () { var E = this.extend(); return E.init.apply(E, arguments), E }, init: function () { }, mixIn: function (E) { for (var _ in E) E.hasOwnProperty(_) && (this[_] = E[_]); E.hasOwnProperty("toString") && (this.toString = E.toString) }, clone: function () { return this.init.prototype.extend(this) } } }(), R = g.WordArray = S.extend({ init: function (E, _) { E = this.words = E || [], _ != f ? this.sigBytes = _ : this.sigBytes = E.length * 4 }, toString: function (E) { return (E || v).stringify(this) }, concat: function (E) { var _ = this.words, k = E.words, L = this.sigBytes, H = E.sigBytes; if (this.clamp(), L % 4) for (var V = 0; V < H; V++) { var ee = k[V >>> 2] >>> 24 - V % 4 * 8 & 255; _[L + V >>> 2] |= ee << 24 - (L + V) % 4 * 8 } else for (var K = 0; K < H; K += 4)_[L + K >>> 2] = k[K >>> 2]; return this.sigBytes += H, this }, clamp: function () { var E = this.words, _ = this.sigBytes; E[_ >>> 2] &= 4294967295 << 32 - _ % 4 * 8, E.length = d.ceil(_ / 4) }, clone: function () { var E = S.clone.call(this); return E.words = this.words.slice(0), E }, random: function (E) { for (var _ = [], k = 0; k < E; k += 4)_.push(P()); return new R.init(_, E) } }), y = u.enc = {}, v = y.Hex = { stringify: function (E) { for (var _ = E.words, k = E.sigBytes, L = [], H = 0; H < k; H++) { var V = _[H >>> 2] >>> 24 - H % 4 * 8 & 255; L.push((V >>> 4).toString(16)), L.push((V & 15).toString(16)) } return L.join("") }, parse: function (E) { for (var _ = E.length, k = [], L = 0; L < _; L += 2)k[L >>> 3] |= parseInt(E.substr(L, 2), 16) << 24 - L % 8 * 4; return new R.init(k, _ / 2) } }, D = y.Latin1 = { stringify: function (E) { for (var _ = E.words, k = E.sigBytes, L = [], H = 0; H < k; H++) { var V = _[H >>> 2] >>> 24 - H % 4 * 8 & 255; L.push(String.fromCharCode(V)) } return L.join("") }, parse: function (E) { for (var _ = E.length, k = [], L = 0; L < _; L++)k[L >>> 2] |= (E.charCodeAt(L) & 255) << 24 - L % 4 * 8; return new R.init(k, _) } }, M = y.Utf8 = { stringify: function (E) { try { return decodeURIComponent(escape(D.stringify(E))) } catch { throw new Error("Malformed UTF-8 data") } }, parse: function (E) { return D.parse(unescape(encodeURIComponent(E))) } }, W = g.BufferedBlockAlgorithm = S.extend({ reset: function () { this._data = new R.init, this._nDataBytes = 0 }, _append: function (E) { typeof E == "string" && (E = M.parse(E)), this._data.concat(E), this._nDataBytes += E.sigBytes }, _process: function (E) { var _, k = this._data, L = k.words, H = k.sigBytes, V = this.blockSize, ee = V * 4, K = H / ee; E ? K = d.ceil(K) : K = d.max((K | 0) - this._minBufferSize, 0); var N = K * V, B = d.min(N * 4, H); if (N) { for (var Q = 0; Q < N; Q += V)this._doProcessBlock(L, Q); _ = L.splice(0, N), k.sigBytes -= B } return new R.init(_, B) }, clone: function () { var E = S.clone.call(this); return E._data = this._data.clone(), E }, _minBufferSize: 0 }); g.Hasher = W.extend({ cfg: S.extend(), init: function (E) { this.cfg = this.cfg.extend(E), this.reset() }, reset: function () { W.reset.call(this), this._doReset() }, update: function (E) { return this._append(E), this._process(), this }, finalize: function (E) { E && this._append(E); var _ = this._doFinalize(); return _ }, blockSize: 16, _createHelper: function (E) { return function (_, k) { return new E.init(k).finalize(_) } }, _createHmacHelper: function (E) { return function (_, k) { return new I.HMAC.init(E, k).finalize(_) } } }); var I = u.algo = {}; return u }(Math); return p }) }, 9027(a, c, l) { l.d(c, { $: () => p }); var p = { networkPriorities: { audio: "high", dominatingVideo: "high", otherVideos: "medium", screenShare: "medium" }, aspectRatios: { fourThree: { label: "fourThree", value: 1.333 }, oneSixNine: { label: "oneSixNine", value: 1.777 } }, audioProfiles: { speech_low_quality: { sampleRate: 16e3, bitRate: 24, sampleSize: 16, stereo: !1, dtx: !0, fec: !0, maxPlaybackRate: 16e3, packetTime: 20, autoGainControl: !0, echoCancellation: !0, noiseSuppression: !0, channelCount: 1 }, speech_standard: { sampleRate: 32e3, bitRate: 24, sampleSize: 24, stereo: !1, dtx: !0, fec: !0, maxPlaybackRate: 32e3, packetTime: 30, autoGainControl: !0, echoCancellation: !0, noiseSuppression: !0, channelCount: 1 }, music_standard: { sampleRate: 48e3, bitRate: 40, sampleSize: 32, stereo: !1, dtx: !1, fec: !0, maxPlaybackRate: 48e3, packetTime: 40, autoGainControl: !1, echoCancellation: !1, noiseSuppression: !1, channelCount: 1 }, standard_stereo: { sampleRate: 48e3, sampleSize: 32, bitRate: 64, stereo: !0, dtx: !1, fec: !0, maxPlaybackRate: 48e3, packetTime: 40, autoGainControl: !1, echoCancellation: !1, noiseSuppression: !1, channelCount: 2 }, high_quality: { sampleRate: 48e3, sampleSize: 32, bitRate: 128, stereo: !1, dtx: !1, fec: !0, maxPlaybackRate: 48e3, packetTime: 60, autoGainControl: !1, echoCancellation: !1, noiseSuppression: !1, channelCount: 1 }, high_quality_stereo: { sampleRate: 48e3, sampleSize: 32, bitRate: 192, stereo: !0, dtx: !1, fec: !0, maxPlaybackRate: 48e3, packetTime: 60, autoGainControl: !1, echoCancellation: !1, noiseSuppression: !1, channelCount: 2 } }, videoProfiles: { h90p_w160p: { width: 160, height: 90, bitrates: { web: { bandwidth_optimized: 60 * 1e3, balanced: 100 * 1e3, high_quality: 150 * 1e3 }, "react-native": { bandwidth_optimized: 60 * 1e3, balanced: 100 * 1e3, high_quality: 150 * 1e3 }, "web-iOS": { bandwidth_optimized: 100, balanced: 150, high_quality: 200 } }, frameRate: 15, aspectRatio: "oneSixNine" }, h180p_w320p: { width: 320, height: 180, bitrates: { web: { bandwidth_optimized: 100 * 1e3, balanced: 150 * 1e3, high_quality: 250 * 1e3 }, "react-native": { bandwidth_optimized: 100 * 1e3, balanced: 150 * 1e3, high_quality: 250 * 1e3 }, "web-iOS": { bandwidth_optimized: 150, balanced: 200, high_quality: 300 } }, frameRate: 15, aspectRatio: "oneSixNine" }, h216p_w384p: { width: 384, height: 216, bitrates: { web: { bandwidth_optimized: 120 * 1e3, balanced: 200 * 1e3, high_quality: 350 * 1e3 }, "react-native": { bandwidth_optimized: 120 * 1e3, balanced: 200 * 1e3, high_quality: 350 * 1e3 }, "web-iOS": { bandwidth_optimized: 170, balanced: 250, high_quality: 450 } }, frameRate: 15, aspectRatio: "oneSixNine" }, h360p_w640p: { width: 640, height: 360, bitrates: { web: { bandwidth_optimized: 200 * 1e3, balanced: 400 * 1e3, high_quality: 600 * 1e3 }, "react-native": { bandwidth_optimized: 200 * 1e3, balanced: 400 * 1e3, high_quality: 600 * 1e3 }, "web-iOS": { bandwidth_optimized: 400, balanced: 650, high_quality: 800 } }, frameRate: 20, aspectRatio: "oneSixNine" }, h540p_w960p: { width: 960, height: 540, bitrates: { web: { bandwidth_optimized: 350 * 1e3, balanced: 550 * 1e3, high_quality: 800 * 1e3 }, "react-native": { bandwidth_optimized: 350 * 1e3, balanced: 550 * 1e3, high_quality: 800 * 1e3 }, "web-iOS": { bandwidth_optimized: 950, balanced: 1150, high_quality: 1400 } }, frameRate: 25, aspectRatio: "oneSixNine" }, h720p_w1280p: { width: 1280, height: 720, bitrates: { web: { bandwidth_optimized: 1e3 * 1e3, balanced: 1500 * 1e3, high_quality: 2e3 * 1e3 }, "react-native": { bandwidth_optimized: 1e3 * 1e3, balanced: 1500 * 1e3, high_quality: 2e3 * 1e3 }, "web-iOS": { bandwidth_optimized: 1700, balanced: 2400, high_quality: 2800 } }, frameRate: 30, aspectRatio: "oneSixNine" }, h1080p_w1920p: { width: 1920, height: 1080, bitrates: { web: { bandwidth_optimized: 1600 * 1e3, balanced: 2200 * 1e3, high_quality: 2700 * 1e3 }, "react-native": { bandwidth_optimized: 1600 * 1e3, balanced: 2200 * 1e3, high_quality: 2700 * 1e3 }, "web-iOS": { bandwidth_optimized: 3500, balanced: 4e3, high_quality: 4500 } }, frameRate: 30, aspectRatio: "oneSixNine" }, h1440p_w2560p: { width: 2560, height: 1440, bitrates: { web: { bandwidth_optimized: 5e3 * 1e3, balanced: 5500 * 1e3, high_quality: 6e3 * 1e3 }, "react-native": { bandwidth_optimized: 5e3 * 1e3, balanced: 5500 * 1e3, high_quality: 6e3 * 1e3 }, "web-iOS": { bandwidth_optimized: 7500, balanced: 8e3, high_quality: 8500 } }, frameRate: 30, aspectRatio: "oneSixNine" }, h2160p_w3840p: { width: 3840, height: 2160, bitrates: { web: { bandwidth_optimized: 8e3 * 1e3, balanced: 8500 * 1e3, high_quality: 9e3 * 1e3 }, "react-native": { bandwidth_optimized: 8e3 * 1e3, balanced: 8500 * 1e3, high_quality: 9e3 * 1e3 }, "web-iOS": { bandwidth_optimized: 9500, balanced: 1e4, high_quality: 10500 } }, frameRate: 30, aspectRatio: "oneSixNine" }, h120p_w160p: { width: 160, height: 120, bitrates: { web: { bandwidth_optimized: 60 * 1e3, balanced: 100 * 1e3, high_quality: 150 * 1e3 }, "react-native": { bandwidth_optimized: 60 * 1e3, balanced: 100 * 1e3, high_quality: 150 * 1e3 }, "web-iOS": { bandwidth_optimized: 100, balanced: 150, high_quality: 200 } }, frameRate: 15, aspectRatio: "fourThree" }, h144p_w192p: { width: 192, height: 144, bitrates: { web: { bandwidth_optimized: 60 * 1e3, balanced: 100 * 1e3, high_quality: 150 * 1e3 }, "react-native": { bandwidth_optimized: 60 * 1e3, balanced: 100 * 1e3, high_quality: 150 * 1e3 }, "web-iOS": { bandwidth_optimized: 150, balanced: 200, high_quality: 300 } }, frameRate: 15, aspectRatio: "fourThree" }, h180p_w240p: { width: 240, height: 180, bitrates: { web: { bandwidth_optimized: 100 * 1e3, balanced: 150 * 1e3, high_quality: 250 * 1e3 }, "react-native": { bandwidth_optimized: 100 * 1e3, balanced: 150 * 1e3, high_quality: 250 * 1e3 }, "web-iOS": { bandwidth_optimized: 150, balanced: 200, high_quality: 300 } }, frameRate: 15, aspectRatio: "fourThree" }, h240p_w320p: { width: 320, height: 240, bitrates: { web: { bandwidth_optimized: 120 * 1e3, balanced: 200 * 1e3, high_quality: 350 * 1e3 }, "react-native": { bandwidth_optimized: 80 * 1e3, balanced: 150 * 1e3, high_quality: 300 * 1e3 }, "web-iOS": { bandwidth_optimized: 170, balanced: 250, high_quality: 450 } }, frameRate: 15, aspectRatio: "fourThree" }, h360p_w480p: { width: 480, height: 360, bitrates: { web: { bandwidth_optimized: 200 * 1e3, balanced: 400 * 1e3, high_quality: 600 * 1e3 }, "react-native": { bandwidth_optimized: 200 * 1e3, balanced: 400 * 1e3, high_quality: 600 * 1e3 }, "web-iOS": { bandwidth_optimized: 400, balanced: 650, high_quality: 800 } }, frameRate: 20, aspectRatio: "fourThree" }, h480p_w640p: { width: 640, height: 480, bitrates: { web: { bandwidth_optimized: 300 * 1e3, balanced: 500 * 1e3, high_quality: 700 * 1e3 }, "react-native": { bandwidth_optimized: 300 * 1e3, balanced: 500 * 1e3, high_quality: 700 * 1e3 }, "web-iOS": { bandwidth_optimized: 550, balanced: 750, high_quality: 1e3 } }, frameRate: 25, aspectRatio: "fourThree" }, h540p_w720p: { width: 720, height: 540, bitrates: { web: { bandwidth_optimized: 350 * 1e3, balanced: 550 * 1e3, high_quality: 800 * 1e3 }, "react-native": { bandwidth_optimized: 350 * 1e3, balanced: 550 * 1e3, high_quality: 800 * 1e3 }, "web-iOS": { bandwidth_optimized: 600, balanced: 900, high_quality: 1200 } }, frameRate: 30, aspectRatio: "fourThree" }, h720p_w960p: { width: 960, height: 720, bitrates: { web: { bandwidth_optimized: 900 * 1e3, balanced: 1300 * 1e3, high_quality: 1600 * 1e3 }, "react-native": { bandwidth_optimized: 800 * 1e3, balanced: 1200 * 1e3, high_quality: 1600 * 1e3 }, "web-iOS": { bandwidth_optimized: 1600, balanced: 2e3, high_quality: 2350 } }, frameRate: 30, aspectRatio: "fourThree" }, h1080p_w1440p: { width: 1440, height: 1080, bitrates: { web: { bandwidth_optimized: 1600 * 1e3, balanced: 2200 * 1e3, high_quality: 2700 * 1e3 }, "react-native": { bandwidth_optimized: 1600 * 1e3, balanced: 2200 * 1e3, high_quality: 2700 * 1e3 }, "web-iOS": { bandwidth_optimized: 3e3, balanced: 3500, high_quality: 4e3 } }, frameRate: 30, aspectRatio: "fourThree" }, h1440p_w1920p: { width: 1920, height: 1440, bitrates: { web: { bandwidth_optimized: 3500 * 1e3, balanced: 4e3 * 1e3, high_quality: 4500 * 1e3 }, "react-native": { bandwidth_optimized: 3500 * 1e3, balanced: 4e3 * 1e3, high_quality: 4500 * 1e3 }, "web-iOS": { bandwidth_optimized: 6e3, balanced: 6500, high_quality: 7e3 } }, frameRate: 30, aspectRatio: "fourThree" } }, screenShareProfiles: { h360p_30fps: { resolution: { width: 640, height: 360 }, frameRate: 30, bitrates: { high: 4e5, medium: 2e5, low: 1e5 } }, h480p_15fps: { resolution: { width: 854, height: 480 }, frameRate: 15, bitrates: { high: 3e5, medium: 15e4, low: 75e3 } }, h480p_30fps: { resolution: { width: 854, height: 480 }, frameRate: 30, bitrates: { high: 5e5, medium: 25e4, low: 125e3 } }, h720p_5fps: { resolution: { width: 1280, height: 720 }, frameRate: 5, bitrates: { high: 4e5, medium: 2e5, low: 1e5 } }, h720p_15fps: { resolution: { width: 1280, height: 720 }, frameRate: 15, bitrates: { high: 1e6, medium: 5e5, low: 25e4 } }, h720p_30fps: { resolution: { width: 1280, height: 720 }, frameRate: 30, bitrates: { high: 15e5, medium: 75e4, low: 375e3 } }, h1080p_15fps: { resolution: { width: 1920, height: 1080 }, frameRate: 15, bitrates: { high: 15e5, medium: 75e4, low: 3e5 } }, h1080p_30fps: { resolution: { width: 1920, height: 1080 }, frameRate: 30, bitrates: { high: 2e6, medium: 1e6, low: 5e5 } } }, simulcastProfiles: { 3840: [{ scaleResolutionDownBy: 12, maxBitRate: 150 * 1e3 }, { scaleResolutionDownBy: 6, maxBitRate: 500 * 1e3 }, { scaleResolutionDownBy: 1, maxBitRate: 1e3 * 1e4 }], 1920: [{ scaleResolutionDownBy: 6, maxBitRate: 150 * 1e3 }, { scaleResolutionDownBy: 3, maxBitRate: 500 * 1e3 }, { scaleResolutionDownBy: 1, maxBitRate: 350 * 1e4 }], 1280: [{ scaleResolutionDownBy: 4, maxBitRate: 150 * 1e3 }, { scaleResolutionDownBy: 2, maxBitRate: 500 * 1e3 }, { scaleResolutionDownBy: 1, maxBitRate: 120 * 1e4 }], 640: [{ scaleResolutionDownBy: 2, maxBitRate: 150 * 1e3 }, { scaleResolutionDownBy: 1, maxBitRate: 500 * 1e3 }], 320: [{ scaleResolutionDownBy: 1, maxBitRate: 150 * 1e3 }] }, requestTimeout: 2e4, requestRetries: 3, transportOptions: { tcp: !0 }, videoKSVCEncodings: [{ scalabilityMode: "S3T3_KEY" }], videoSVCEncodings: [{ scalabilityMode: "S3T3", dtx: !0 }] } }, 9166(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.DataConsumer = void 0; const p = l(2994), d = l(3953), f = new p.Logger("DataConsumer"); class h extends d.EnhancedEventEmitter { constructor({ id: u, dataProducerId: g, dataChannel: S, sctpStreamParameters: R, appData: y }) { super(); ve(this, "_id"); ve(this, "_dataProducerId"); ve(this, "_dataChannel"); ve(this, "_closed", !1); ve(this, "_sctpStreamParameters"); ve(this, "_appData"); ve(this, "_observer", new d.EnhancedEventEmitter); f.debug("constructor()"), this._id = u, this._dataProducerId = g, this._dataChannel = S, this._sctpStreamParameters = R, this._appData = y ?? {}, this.handleDataChannel() } get id() { return this._id } get dataProducerId() { return this._dataProducerId } get closed() { return this._closed } get sctpStreamParameters() { return this._sctpStreamParameters } get readyState() { return this._dataChannel.readyState } get label() { return this._dataChannel.label } get protocol() { return this._dataChannel.protocol } get binaryType() { return this._dataChannel.binaryType } set binaryType(u) { this._dataChannel.binaryType = u } get appData() { return this._appData } set appData(u) { this._appData = u } get observer() { return this._observer } close() { this._closed || (f.debug("close()"), this._closed = !0, this._dataChannel.close(), this.emit("@close"), this._observer.safeEmit("close"), super.close(), this._observer.close()) } transportClosed() { this._closed || (f.debug("transportClosed()"), this._closed = !0, this._dataChannel.close(), this.safeEmit("transportclose"), this._observer.safeEmit("close")) } handleDataChannel() { this._dataChannel.addEventListener("open", () => { this._closed || (f.debug('DataChannel "open" event'), this.safeEmit("open")) }), this._dataChannel.addEventListener("error", u => { var S, R; if (this._closed) return; const g = u.error ?? new Error("unknown DataChannel error"); ((S = u.error) == null ? void 0 : S.errorDetail) === "sctp-failure" ? f.error("DataChannel SCTP error [sctpCauseCode:%s]: %s", (R = u.error) == null ? void 0 : R.sctpCauseCode, u.error.message) : f.error('DataChannel "error" event: %o', g), this.safeEmit("error", g) }), this._dataChannel.addEventListener("close", () => { this._closed || (f.warn('DataChannel "close" event'), this._closed = !0, this.emit("@close"), this.safeEmit("close"), this._observer.safeEmit("close")) }), this._dataChannel.addEventListener("message", u => { this._closed || this.safeEmit("message", u.data) }) } } c.DataConsumer = h }, 9275(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.AwaitQueue = void 0; const p = l(8274), d = l(4253), f = new p.Logger("AwaitQueue"); class h { constructor() { ve(this, "pendingTasks", new Map); ve(this, "nextTaskId", 0); f.debug("constructor()") } get size() { return this.pendingTasks.size } async push(b, u, g) { if (u = u ?? b.name, f.debug(`push() [name:${u}, options:%o]`, g), typeof b != "function") throw new TypeError("given task is not a function"); if (u) try { Object.defineProperty(b, "name", { value: u }) } catch { } return new Promise((S, R) => { if (u && (g != null && g.removeOngoingTasksWithSameName)) for (const v of this.pendingTasks.values()) v.name === u && v.reject(new d.AwaitQueueRemovedTaskError, { canExecuteNextTask: !1 }); const y = { id: this.nextTaskId++, task: b, name: u, enqueuedAt: Date.now(), executedAt: void 0, completed: !1, resolve: v => { if (y.completed) return; y.completed = !0, this.pendingTasks.delete(y.id), f.debug(`resolving task [name:${y.name}]`), S(v); const [D] = this.pendingTasks.values(); D && !D.executedAt && this.execute(D) }, reject: (v, { canExecuteNextTask: D }) => { if (!y.completed && (y.completed = !0, this.pendingTasks.delete(y.id), f.debug(`rejecting task [name:${y.name}]: %s`, String(v)), R(v), D)) { const [M] = this.pendingTasks.values(); M && !M.executedAt && this.execute(M) } } }; this.pendingTasks.set(y.id, y), this.pendingTasks.size === 1 && this.execute(y) }) } stop() { f.debug("stop()"); for (const b of this.pendingTasks.values()) f.debug(`stop() | stopping task [name:${b.name}]`), b.reject(new d.AwaitQueueStoppedError, { canExecuteNextTask: !1 }) } remove(b) { f.debug(`remove() [taskIdx:${b}]`); const u = Array.from(this.pendingTasks.values())[b]; if (!u) { f.debug(`stop() | no task with given idx [taskIdx:${b}]`); return } u.reject(new d.AwaitQueueRemovedTaskError, { canExecuteNextTask: !0 }) } dump() { const b = Date.now(); let u = 0; return Array.from(this.pendingTasks.values()).map(g => ({ idx: u++, task: g.task, name: g.name, enqueuedTime: g.executedAt ? g.executedAt - g.enqueuedAt : b - g.enqueuedAt, executionTime: g.executedAt ? b - g.executedAt : 0 })) } async execute(b) { if (f.debug(`execute() [name:${b.name}]`), b.executedAt) throw new Error("task already being executed"); b.executedAt = Date.now(); try { const u = await b.task(); b.resolve(u) } catch (u) { b.reject(u, { canExecuteNextTask: !0 }) } } } c.AwaitQueue = h }, 9506(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(5471), l(1025)) })(this, function (p) { return function () { var d = p, f = d.lib, h = f.Base, P = f.WordArray, b = d.algo, u = b.MD5, g = b.EvpKDF = h.extend({ cfg: h.extend({ keySize: 128 / 32, hasher: u, iterations: 1 }), init: function (S) { this.cfg = this.cfg.extend(S) }, compute: function (S, R) { for (var y, v = this.cfg, D = v.hasher.create(), M = P.create(), W = M.words, I = v.keySize, E = v.iterations; W.length < I;) { y && D.update(y), y = D.update(S).finalize(R), D.reset(); for (var _ = 1; _ < E; _++)y = D.finalize(y), D.reset(); M.concat(y) } return M.sigBytes = I * 4, M } }); d.EvpKDF = function (S, R, y) { return g.create(y).compute(S, R) } }(), p.EvpKDF }) }, 9557(a, c, l) { (function (p, d, f) { a.exports = d(l(9021), l(3240), l(1380)) })(this, function (p) { return function () { var d = p, f = d.x64, h = f.Word, P = f.WordArray, b = d.algo, u = b.SHA512, g = b.SHA384 = u.extend({ _doReset: function () { this._hash = new P.init([new h.init(3418070365, 3238371032), new h.init(1654270250, 914150663), new h.init(2438529370, 812702999), new h.init(355462360, 4144912697), new h.init(1731405415, 4290775857), new h.init(2394180231, 1750603025), new h.init(3675008525, 1694076839), new h.init(1203062813, 3204075428)]) }, _doFinalize: function () { var S = u._doFinalize.call(this); return S.sigBytes -= 16, S } }); d.SHA384 = u._createHelper(g), d.HmacSHA384 = u._createHmacHelper(g) }(), p.SHA384 }) }, 9633(a, c, l) { l.d(c, { l: () => I }); var p = l(467), d = l(3029), f = l(2901), h = l(388), P = l(3954), b = l(5501), u = l(4756), g = l.n(u), S = l(7007), R = l(1806), y = l(6746), v = l(8278); function D(E, _, k) { return _ = (0, P.A)(_), (0, h.A)(E, M() ? Reflect.construct(_, k || [], (0, P.A)(E).constructor) : _.apply(E, k)) } function M() { try { var E = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })) } catch { } return (M = function () { return !!E })() } var W = function (E) { function _() { var k, L = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}; return (0, d.A)(this, _), k = D(this, _), k.onKeyRatcheted = function (H, V) { console.debug("key ratcheted event received", { material: H, keyIndex: V }) }, k.keyInfoMap = new Map, k.options = Object.assign(Object.assign({}, R.T4), L), k.on(y.fo.KeyRatcheted, k.onKeyRatcheted), k } return (0, b.A)(_, E), (0, f.A)(_, [{ key: "onSetEncryptionKey", value: function (L, H, V) { var ee = { key: L, participantIdentity: H, keyIndex: V }; if (!this.options.sharedKey && !H) throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false"); this.keyInfoMap.set("".concat(H ?? "shared", "-").concat(V ?? 0), ee), this.emit(y.fo.SetKey, ee) } }, { key: "getKeys", value: function () { return Array.from(this.keyInfoMap.values()) } }, { key: "getOptions", value: function () { return this.options } }, { key: "ratchetKey", value: function (L, H) { this.emit(y.fo.RatchetRequest, L, H) } }]) }(S.EventEmitter), I = function (E) { function _() { var k = arguments.length > 0 && arguments[0] !== void 0 ? arguments[0] : {}; (0, d.A)(this, _); var L = Object.assign(Object.assign({}, k), { sharedKey: !0, ratchetWindowSize: 0, failureTolerance: -1 }); return D(this, _, [L]) } return (0, b.A)(_, E), (0, f.A)(_, [{ key: "setSharedKey", value: function () { var k = (0, p.A)(g().mark(function H(V) { var ee, K; return g().wrap(function (N) { for (; ;)switch (N.prev = N.next) { case 0: if (typeof V != "string") { N.next = 2; break } return N.next = 1, (0, v.sn)(V); case 1: K = N.sent, N.next = 4; break; case 2: return N.next = 3, (0, v.tr)(V); case 3: K = N.sent; case 4: ee = K, this.onSetEncryptionKey(ee); case 5: case "end": return N.stop() } }, H, this) })); function L(H) { return k.apply(this, arguments) } return L }() }]) }(W) }, 9767(a, c, l) {
                l.r(c), l.d(c, { default: () => Mm }); var p = {}; l.r(p), l.d(p, { Decoder: () => ms, Encoder: () => Ks, PacketType: () => dr, isPacketValid: () => yt, protocol: () => Ua }); var d = l(5458); function f(Y, m) { if (Y == null) return {}; var C = {}; for (var T in Y) if ({}.hasOwnProperty.call(Y, T)) { if (m.indexOf(T) !== -1) continue; C[T] = Y[T] } return C } function h(Y, m) { if (Y == null) return {}; var C, T, w = f(Y, m); if (Object.getOwnPropertySymbols) { var O = Object.getOwnPropertySymbols(Y); for (T = 0; T < O.length; T++)C = O[T], m.indexOf(C) === -1 && {}.propertyIsEnumerable.call(Y, C) && (w[C] = Y[C]) } return w } var P = l(2284), b = l(296), u = l(467), g = l(3029), S = l(2901), R = l(4467), y = l(4756), v = l.n(y); const D = Object.create(null); D.open = "0", D.close = "1", D.ping = "2", D.pong = "3", D.message = "4", D.upgrade = "5", D.noop = "6"; const M = Object.create(null); Object.keys(D).forEach(Y => { M[D[Y]] = Y }); const W = { type: "error", data: "parser error" }, I = typeof Blob == "function" || typeof Blob < "u" && Object.prototype.toString.call(Blob) === "[object BlobConstructor]", E = typeof ArrayBuffer == "function", _ = Y => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(Y) : Y && Y.buffer instanceof ArrayBuffer, k = ({ type: Y, data: m }, C, T) => I && m instanceof Blob ? C ? T(m) : L(m, T) : E && (m instanceof ArrayBuffer || _(m)) ? C ? T(m) : L(new Blob([m]), T) : T(D[Y] + (m || "")), L = (Y, m) => { const C = new FileReader; return C.onload = function () { const T = C.result.split(",")[1]; m("b" + (T || "")) }, C.readAsDataURL(Y) }; function H(Y) { return Y instanceof Uint8Array ? Y : Y instanceof ArrayBuffer ? new Uint8Array(Y) : new Uint8Array(Y.buffer, Y.byteOffset, Y.byteLength) } let V; function ee(Y, m) { if (I && Y.data instanceof Blob) return Y.data.arrayBuffer().then(H).then(m); if (E && (Y.data instanceof ArrayBuffer || _(Y.data))) return m(H(Y.data)); k(Y, !1, C => { V || (V = new TextEncoder), m(V.encode(C)) }) } const K = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", N = typeof Uint8Array > "u" ? [] : new Uint8Array(256); for (let Y = 0; Y < K.length; Y++)N[K.charCodeAt(Y)] = Y; const B = Y => { let m = Y.length * .75, C = Y.length, T, w = 0, O, $, z, G; Y[Y.length - 1] === "=" && (m--, Y[Y.length - 2] === "=" && m--); const te = new ArrayBuffer(m), re = new Uint8Array(te); for (T = 0; T < C; T += 4)O = N[Y.charCodeAt(T)], $ = N[Y.charCodeAt(T + 1)], z = N[Y.charCodeAt(T + 2)], G = N[Y.charCodeAt(T + 3)], re[w++] = O << 2 | $ >> 4, re[w++] = ($ & 15) << 4 | z >> 2, re[w++] = (z & 3) << 6 | G & 63; return te }, Q = typeof ArrayBuffer == "function", Z = (Y, m) => { if (typeof Y != "string") return { type: "message", data: X(Y, m) }; const C = Y.charAt(0); return C === "b" ? { type: "message", data: le(Y.substring(1), m) } : M[C] ? Y.length > 1 ? { type: M[C], data: Y.substring(1) } : { type: M[C] } : W }, le = (Y, m) => { if (Q) { const C = B(Y); return X(C, m) } else return { base64: !0, data: Y } }, X = (Y, m) => { switch (m) { case "blob": return Y instanceof Blob ? Y : new Blob([Y]); case "arraybuffer": default: return Y instanceof ArrayBuffer ? Y : Y.buffer } }, ce = String.fromCharCode(30), he = (Y, m) => { const C = Y.length, T = new Array(C); let w = 0; Y.forEach((O, $) => { k(O, !1, z => { T[$] = z, ++w === C && m(T.join(ce)) }) }) }, ue = (Y, m) => { const C = Y.split(ce), T = []; for (let w = 0; w < C.length; w++) { const O = Z(C[w], m); if (T.push(O), O.type === "error") break } return T }; function ye() { return new TransformStream({ transform(Y, m) { ee(Y, C => { const T = C.length; let w; if (T < 126) w = new Uint8Array(1), new DataView(w.buffer).setUint8(0, T); else if (T < 65536) { w = new Uint8Array(3); const O = new DataView(w.buffer); O.setUint8(0, 126), O.setUint16(1, T) } else { w = new Uint8Array(9); const O = new DataView(w.buffer); O.setUint8(0, 127), O.setBigUint64(1, BigInt(T)) } Y.data && typeof Y.data != "string" && (w[0] |= 128), m.enqueue(w), m.enqueue(C) }) } }) } let se; function _e(Y) { return Y.reduce((m, C) => m + C.length, 0) } function Se(Y, m) { if (Y[0].length === m) return Y.shift(); const C = new Uint8Array(m); let T = 0; for (let w = 0; w < m; w++)C[w] = Y[0][T++], T === Y[0].length && (Y.shift(), T = 0); return Y.length && T < Y[0].length && (Y[0] = Y[0].slice(T)), C } function we(Y, m) { se || (se = new TextDecoder); const C = []; let T = 0, w = -1, O = !1; return new TransformStream({ transform($, z) { for (C.push($); ;) { if (T === 0) { if (_e(C) < 1) break; const G = Se(C, 1); O = (G[0] & 128) === 128, w = G[0] & 127, w < 126 ? T = 3 : w === 126 ? T = 1 : T = 2 } else if (T === 1) { if (_e(C) < 2) break; const G = Se(C, 2); w = new DataView(G.buffer, G.byteOffset, G.length).getUint16(0), T = 3 } else if (T === 2) { if (_e(C) < 8) break; const G = Se(C, 8), te = new DataView(G.buffer, G.byteOffset, G.length), re = te.getUint32(0); if (re > Math.pow(2, 21) - 1) { z.enqueue(W); break } w = re * Math.pow(2, 32) + te.getUint32(4), T = 3 } else { if (_e(C) < w) break; const G = Se(C, w); z.enqueue(Z(O ? G : se.decode(G), m)), T = 0 } if (w === 0 || w > Y) { z.enqueue(W); break } } } }) } const De = 4; function mt(Y) { if (Y) return Lt(Y) } function Lt(Y) { for (var m in mt.prototype) Y[m] = mt.prototype[m]; return Y } mt.prototype.on = mt.prototype.addEventListener = function (Y, m) { return this._callbacks = this._callbacks || {}, (this._callbacks["$" + Y] = this._callbacks["$" + Y] || []).push(m), this }, mt.prototype.once = function (Y, m) { function C() { this.off(Y, C), m.apply(this, arguments) } return C.fn = m, this.on(Y, C), this }, mt.prototype.off = mt.prototype.removeListener = mt.prototype.removeAllListeners = mt.prototype.removeEventListener = function (Y, m) { if (this._callbacks = this._callbacks || {}, arguments.length == 0) return this._callbacks = {}, this; var C = this._callbacks["$" + Y]; if (!C) return this; if (arguments.length == 1) return delete this._callbacks["$" + Y], this; for (var T, w = 0; w < C.length; w++)if (T = C[w], T === m || T.fn === m) { C.splice(w, 1); break } return C.length === 0 && delete this._callbacks["$" + Y], this }, mt.prototype.emit = function (Y) { this._callbacks = this._callbacks || {}; for (var m = new Array(arguments.length - 1), C = this._callbacks["$" + Y], T = 1; T < arguments.length; T++)m[T - 1] = arguments[T]; if (C) { C = C.slice(0); for (var T = 0, w = C.length; T < w; ++T)C[T].apply(this, m) } return this }, mt.prototype.emitReserved = mt.prototype.emit, mt.prototype.listeners = function (Y) { return this._callbacks = this._callbacks || {}, this._callbacks["$" + Y] || [] }, mt.prototype.hasListeners = function (Y) { return !!this.listeners(Y).length }; const Dt = (() => typeof Promise == "function" && typeof Promise.resolve == "function" ? m => Promise.resolve().then(m) : (m, C) => C(m, 0))(), ot = (() => typeof self < "u" ? self : typeof window < "u" ? window : Function("return this")())(), tr = "arraybuffer"; function Br() { } function on(Y, ...m) { return m.reduce((C, T) => (Y.hasOwnProperty(T) && (C[T] = Y[T]), C), {}) } const ir = ot.setTimeout, gr = ot.clearTimeout; function Bt(Y, m) { m.useNativeTimers ? (Y.setTimeoutFn = ir.bind(ot), Y.clearTimeoutFn = gr.bind(ot)) : (Y.setTimeoutFn = ot.setTimeout.bind(ot), Y.clearTimeoutFn = ot.clearTimeout.bind(ot)) } const hn = 1.33; function Wr(Y) { return typeof Y == "string" ? wn(Y) : Math.ceil((Y.byteLength || Y.size) * hn) } function wn(Y) { let m = 0, C = 0; for (let T = 0, w = Y.length; T < w; T++)m = Y.charCodeAt(T), m < 128 ? C += 1 : m < 2048 ? C += 2 : m < 55296 || m >= 57344 ? C += 3 : (T++, C += 4); return C } function He() { return Date.now().toString(36).substring(3) + Math.random().toString(36).substring(2, 5) } function Ue(Y) { let m = ""; for (let C in Y) Y.hasOwnProperty(C) && (m.length && (m += "&"), m += encodeURIComponent(C) + "=" + encodeURIComponent(Y[C])); return m } function zt(Y) { let m = {}, C = Y.split("&"); for (let T = 0, w = C.length; T < w; T++) { let O = C[T].split("="); m[decodeURIComponent(O[0])] = decodeURIComponent(O[1]) } return m } class hr extends Error { constructor(m, C, T) { super(m), this.description = C, this.context = T, this.type = "TransportError" } } class Dr extends mt { constructor(m) { super(), this.writable = !1, Bt(this, m), this.opts = m, this.query = m.query, this.socket = m.socket, this.supportsBinary = !m.forceBase64 } onError(m, C, T) { return super.emitReserved("error", new hr(m, C, T)), this } open() { return this.readyState = "opening", this.doOpen(), this } close() { return (this.readyState === "opening" || this.readyState === "open") && (this.doClose(), this.onClose()), this } send(m) { this.readyState === "open" && this.write(m) } onOpen() { this.readyState = "open", this.writable = !0, super.emitReserved("open") } onData(m) { const C = Z(m, this.socket.binaryType); this.onPacket(C) } onPacket(m) { super.emitReserved("packet", m) } onClose(m) { this.readyState = "closed", super.emitReserved("close", m) } pause(m) { } createUri(m, C = {}) { return m + "://" + this._hostname() + this._port() + this.opts.path + this._query(C) } _hostname() { const m = this.opts.hostname; return m.indexOf(":") === -1 ? m : "[" + m + "]" } _port() { return this.opts.port && (this.opts.secure && Number(this.opts.port) !== 443 || !this.opts.secure && Number(this.opts.port) !== 80) ? ":" + this.opts.port : "" } _query(m) { const C = Ue(m); return C.length ? "?" + C : "" } } class Kr extends Dr { constructor() { super(...arguments), this._polling = !1 } get name() { return "polling" } doOpen() { this._poll() } pause(m) { this.readyState = "pausing"; const C = () => { this.readyState = "paused", m() }; if (this._polling || !this.writable) { let T = 0; this._polling && (T++, this.once("pollComplete", function () { --T || C() })), this.writable || (T++, this.once("drain", function () { --T || C() })) } else C() } _poll() { this._polling = !0, this.doPoll(), this.emitReserved("poll") } onData(m) { const C = T => { if (this.readyState === "opening" && T.type === "open" && this.onOpen(), T.type === "close") return this.onClose({ description: "transport closed by the server" }), !1; this.onPacket(T) }; ue(m, this.socket.binaryType).forEach(C), this.readyState !== "closed" && (this._polling = !1, this.emitReserved("pollComplete"), this.readyState === "open" && this._poll()) } doClose() { const m = () => { this.write([{ type: "close" }]) }; this.readyState === "open" ? m() : this.once("open", m) } write(m) { this.writable = !1, he(m, C => { this.doWrite(C, () => { this.writable = !0, this.emitReserved("drain") }) }) } uri() { const m = this.opts.secure ? "https" : "http", C = this.query || {}; return this.opts.timestampRequests !== !1 && (C[this.opts.timestampParam] = He()), !this.supportsBinary && !C.sid && (C.b64 = 1), this.createUri(m, C) } } let fn = !1; try { fn = typeof XMLHttpRequest < "u" && "withCredentials" in new XMLHttpRequest } catch { } const St = fn; function Fe() { } class ut extends Kr { constructor(m) { if (super(m), typeof location < "u") { const C = location.protocol === "https:"; let T = location.port; T || (T = C ? "443" : "80"), this.xd = typeof location < "u" && m.hostname !== location.hostname || T !== m.port } } doWrite(m, C) { const T = this.request({ method: "POST", data: m }); T.on("success", C), T.on("error", (w, O) => { this.onError("xhr post error", w, O) }) } doPoll() { const m = this.request(); m.on("data", this.onData.bind(this)), m.on("error", (C, T) => { this.onError("xhr poll error", C, T) }), this.pollXhr = m } } class qe extends mt { constructor(m, C, T) { super(), this.createRequest = m, Bt(this, T), this._opts = T, this._method = T.method || "GET", this._uri = C, this._data = T.data !== void 0 ? T.data : null, this._create() } _create() { var m; const C = on(this._opts, "agent", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "autoUnref"); C.xdomain = !!this._opts.xd; const T = this._xhr = this.createRequest(C); try { T.open(this._method, this._uri, !0); try { if (this._opts.extraHeaders) { T.setDisableHeaderCheck && T.setDisableHeaderCheck(!0); for (let w in this._opts.extraHeaders) this._opts.extraHeaders.hasOwnProperty(w) && T.setRequestHeader(w, this._opts.extraHeaders[w]) } } catch { } if (this._method === "POST") try { T.setRequestHeader("Content-type", "text/plain;charset=UTF-8") } catch { } try { T.setRequestHeader("Accept", "*/*") } catch { } (m = this._opts.cookieJar) === null || m === void 0 || m.addCookies(T), "withCredentials" in T && (T.withCredentials = this._opts.withCredentials), this._opts.requestTimeout && (T.timeout = this._opts.requestTimeout), T.onreadystatechange = () => { var w; T.readyState === 3 && ((w = this._opts.cookieJar) === null || w === void 0 || w.parseCookies(T.getResponseHeader("set-cookie"))), T.readyState === 4 && (T.status === 200 || T.status === 1223 ? this._onLoad() : this.setTimeoutFn(() => { this._onError(typeof T.status == "number" ? T.status : 0) }, 0)) }, T.send(this._data) } catch (w) { this.setTimeoutFn(() => { this._onError(w) }, 0); return } typeof document < "u" && (this._index = qe.requestsCount++, qe.requests[this._index] = this) } _onError(m) { this.emitReserved("error", m, this._xhr), this._cleanup(!0) } _cleanup(m) { if (!(typeof this._xhr > "u" || this._xhr === null)) { if (this._xhr.onreadystatechange = Fe, m) try { this._xhr.abort() } catch { } typeof document < "u" && delete qe.requests[this._index], this._xhr = null } } _onLoad() { const m = this._xhr.responseText; m !== null && (this.emitReserved("data", m), this.emitReserved("success"), this._cleanup()) } abort() { this._cleanup() } } if (qe.requestsCount = 0, qe.requests = {}, typeof document < "u") { if (typeof attachEvent == "function") attachEvent("onunload", it); else if (typeof addEventListener == "function") { const Y = "onpagehide" in ot ? "pagehide" : "unload"; addEventListener(Y, it, !1) } } function it() { for (let Y in qe.requests) qe.requests.hasOwnProperty(Y) && qe.requests[Y].abort() } const ur = function () { const Y = Xt({ xdomain: !1 }); return Y && Y.responseType !== null }(); class Ce extends ut { constructor(m) { super(m); const C = m && m.forceBase64; this.supportsBinary = ur && !C } request(m = {}) { return Object.assign(m, { xd: this.xd }, this.opts), new qe(Xt, this.uri(), m) } } function Xt(Y) { const m = Y.xdomain; try { if (typeof XMLHttpRequest < "u" && (!m || St)) return new XMLHttpRequest } catch { } if (!m) try { return new ot[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP") } catch { } } const cr = typeof navigator < "u" && typeof navigator.product == "string" && navigator.product.toLowerCase() === "reactnative"; class pr extends Dr { get name() { return "websocket" } doOpen() { const m = this.uri(), C = this.opts.protocols, T = cr ? {} : on(this.opts, "agent", "perMessageDeflate", "pfx", "key", "passphrase", "cert", "ca", "ciphers", "rejectUnauthorized", "localAddress", "protocolVersion", "origin", "maxPayload", "family", "checkServerIdentity"); this.opts.extraHeaders && (T.headers = this.opts.extraHeaders); try { this.ws = this.createSocket(m, C, T) } catch (w) { return this.emitReserved("error", w) } this.ws.binaryType = this.socket.binaryType, this.addEventListeners() } addEventListeners() { this.ws.onopen = () => { this.opts.autoUnref && this.ws._socket.unref(), this.onOpen() }, this.ws.onclose = m => this.onClose({ description: "websocket connection closed", context: m }), this.ws.onmessage = m => this.onData(m.data), this.ws.onerror = m => this.onError("websocket error", m) } write(m) { this.writable = !1; for (let C = 0; C < m.length; C++) { const T = m[C], w = C === m.length - 1; k(T, this.supportsBinary, O => { try { this.doWrite(T, O) } catch { } w && Dt(() => { this.writable = !0, this.emitReserved("drain") }, this.setTimeoutFn) }) } } doClose() { typeof this.ws < "u" && (this.ws.onerror = () => { }, this.ws.close(), this.ws = null) } uri() { const m = this.opts.secure ? "wss" : "ws", C = this.query || {}; return this.opts.timestampRequests && (C[this.opts.timestampParam] = He()), this.supportsBinary || (C.b64 = 1), this.createUri(m, C) } } const ct = ot.WebSocket || ot.MozWebSocket; class jr extends pr { createSocket(m, C, T) { return cr ? new ct(m, C, T) : C ? new ct(m, C) : new ct(m) } doWrite(m, C) { this.ws.send(C) } } class $e extends Dr { get name() { return "webtransport" } doOpen() { try { this._transport = new WebTransport(this.createUri("https"), this.opts.transportOptions[this.name]) } catch (m) { return this.emitReserved("error", m) } this._transport.closed.then(() => { this.onClose() }).catch(m => { this.onError("webtransport error", m) }), this._transport.ready.then(() => { this._transport.createBidirectionalStream().then(m => { const C = we(Number.MAX_SAFE_INTEGER, this.socket.binaryType), T = m.readable.pipeThrough(C).getReader(), w = ye(); w.readable.pipeTo(m.writable), this._writer = w.writable.getWriter(); const O = () => { T.read().then(({ done: z, value: G }) => { z || (this.onPacket(G), O()) }).catch(z => { }) }; O(); const $ = { type: "open" }; this.query.sid && ($.data = `{"sid":"${this.query.sid}"}`), this._writer.write($).then(() => this.onOpen()) }) }) } write(m) { this.writable = !1; for (let C = 0; C < m.length; C++) { const T = m[C], w = C === m.length - 1; this._writer.write(T).then(() => { w && Dt(() => { this.writable = !0, this.emitReserved("drain") }, this.setTimeoutFn) }) } } doClose() { var m; (m = this._transport) === null || m === void 0 || m.close() } } const It = { websocket: jr, webtransport: $e, polling: Ce }, vt = /^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, Nt = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"]; function dt(Y) { if (Y.length > 8e3) throw "URI too long"; const m = Y, C = Y.indexOf("["), T = Y.indexOf("]"); C != -1 && T != -1 && (Y = Y.substring(0, C) + Y.substring(C, T).replace(/:/g, ";") + Y.substring(T, Y.length)); let w = vt.exec(Y || ""), O = {}, $ = 14; for (; $--;)O[Nt[$]] = w[$] || ""; return C != -1 && T != -1 && (O.source = m, O.host = O.host.substring(1, O.host.length - 1).replace(/;/g, ":"), O.authority = O.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), O.ipv6uri = !0), O.pathNames = Or(O, O.path), O.queryKey = vr(O, O.query), O } function Or(Y, m) { const C = /\/{2,9}/g, T = m.replace(C, "/").split("/"); return (m.slice(0, 1) == "/" || m.length === 0) && T.splice(0, 1), m.slice(-1) == "/" && T.splice(T.length - 1, 1), T } function vr(Y, m) { const C = {}; return m.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function (T, w, O) { w && (C[w] = O) }), C } const or = typeof addEventListener == "function" && typeof removeEventListener == "function", br = []; or && addEventListener("offline", () => { br.forEach(Y => Y()) }, !1); class Ar extends mt { constructor(m, C) { if (super(), this.binaryType = tr, this.writeBuffer = [], this._prevBufferLen = 0, this._pingInterval = -1, this._pingTimeout = -1, this._maxPayload = -1, this._pingTimeoutTime = 1 / 0, m && typeof m == "object" && (C = m, m = null), m) { const T = dt(m); C.hostname = T.host, C.secure = T.protocol === "https" || T.protocol === "wss", C.port = T.port, T.query && (C.query = T.query) } else C.host && (C.hostname = dt(C.host).host); Bt(this, C), this.secure = C.secure != null ? C.secure : typeof location < "u" && location.protocol === "https:", C.hostname && !C.port && (C.port = this.secure ? "443" : "80"), this.hostname = C.hostname || (typeof location < "u" ? location.hostname : "localhost"), this.port = C.port || (typeof location < "u" && location.port ? location.port : this.secure ? "443" : "80"), this.transports = [], this._transportsByName = {}, C.transports.forEach(T => { const w = T.prototype.name; this.transports.push(w), this._transportsByName[w] = T }), this.opts = Object.assign({ path: "/engine.io", agent: !1, withCredentials: !1, upgrade: !0, timestampParam: "t", rememberUpgrade: !1, addTrailingSlash: !0, rejectUnauthorized: !0, perMessageDeflate: { threshold: 1024 }, transportOptions: {}, closeOnBeforeunload: !1 }, C), this.opts.path = this.opts.path.replace(/\/$/, "") + (this.opts.addTrailingSlash ? "/" : ""), typeof this.opts.query == "string" && (this.opts.query = zt(this.opts.query)), or && (this.opts.closeOnBeforeunload && (this._beforeunloadEventListener = () => { this.transport && (this.transport.removeAllListeners(), this.transport.close()) }, addEventListener("beforeunload", this._beforeunloadEventListener, !1)), this.hostname !== "localhost" && (this._offlineEventListener = () => { this._onClose("transport close", { description: "network connection lost" }) }, br.push(this._offlineEventListener))), this.opts.withCredentials && (this._cookieJar = void 0), this._open() } createTransport(m) { const C = Object.assign({}, this.opts.query); C.EIO = De, C.transport = m, this.id && (C.sid = this.id); const T = Object.assign({}, this.opts, { query: C, socket: this, hostname: this.hostname, secure: this.secure, port: this.port }, this.opts.transportOptions[m]); return new this._transportsByName[m](T) } _open() { if (this.transports.length === 0) { this.setTimeoutFn(() => { this.emitReserved("error", "No transports available") }, 0); return } const m = this.opts.rememberUpgrade && Ar.priorWebsocketSuccess && this.transports.indexOf("websocket") !== -1 ? "websocket" : this.transports[0]; this.readyState = "opening"; const C = this.createTransport(m); C.open(), this.setTransport(C) } setTransport(m) { this.transport && this.transport.removeAllListeners(), this.transport = m, m.on("drain", this._onDrain.bind(this)).on("packet", this._onPacket.bind(this)).on("error", this._onError.bind(this)).on("close", C => this._onClose("transport close", C)) } onOpen() { this.readyState = "open", Ar.priorWebsocketSuccess = this.transport.name === "websocket", this.emitReserved("open"), this.flush() } _onPacket(m) { if (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing") switch (this.emitReserved("packet", m), this.emitReserved("heartbeat"), m.type) { case "open": this.onHandshake(JSON.parse(m.data)); break; case "ping": this._sendPacket("pong"), this.emitReserved("ping"), this.emitReserved("pong"), this._resetPingTimeout(); break; case "error": const C = new Error("server error"); C.code = m.data, this._onError(C); break; case "message": this.emitReserved("data", m.data), this.emitReserved("message", m.data); break } } onHandshake(m) { this.emitReserved("handshake", m), this.id = m.sid, this.transport.query.sid = m.sid, this._pingInterval = m.pingInterval, this._pingTimeout = m.pingTimeout, this._maxPayload = m.maxPayload, this.onOpen(), this.readyState !== "closed" && this._resetPingTimeout() } _resetPingTimeout() { this.clearTimeoutFn(this._pingTimeoutTimer); const m = this._pingInterval + this._pingTimeout; this._pingTimeoutTime = Date.now() + m, this._pingTimeoutTimer = this.setTimeoutFn(() => { this._onClose("ping timeout") }, m), this.opts.autoUnref && this._pingTimeoutTimer.unref() } _onDrain() { this.writeBuffer.splice(0, this._prevBufferLen), this._prevBufferLen = 0, this.writeBuffer.length === 0 ? this.emitReserved("drain") : this.flush() } flush() { if (this.readyState !== "closed" && this.transport.writable && !this.upgrading && this.writeBuffer.length) { const m = this._getWritablePackets(); this.transport.send(m), this._prevBufferLen = m.length, this.emitReserved("flush") } } _getWritablePackets() { if (!(this._maxPayload && this.transport.name === "polling" && this.writeBuffer.length > 1)) return this.writeBuffer; let C = 1; for (let T = 0; T < this.writeBuffer.length; T++) { const w = this.writeBuffer[T].data; if (w && (C += Wr(w)), T > 0 && C > this._maxPayload) return this.writeBuffer.slice(0, T); C += 2 } return this.writeBuffer } _hasPingExpired() { if (!this._pingTimeoutTime) return !0; const m = Date.now() > this._pingTimeoutTime; return m && (this._pingTimeoutTime = 0, Dt(() => { this._onClose("ping timeout") }, this.setTimeoutFn)), m } write(m, C, T) { return this._sendPacket("message", m, C, T), this } send(m, C, T) { return this._sendPacket("message", m, C, T), this } _sendPacket(m, C, T, w) { if (typeof C == "function" && (w = C, C = void 0), typeof T == "function" && (w = T, T = null), this.readyState === "closing" || this.readyState === "closed") return; T = T || {}, T.compress = T.compress !== !1; const O = { type: m, data: C, options: T }; this.emitReserved("packetCreate", O), this.writeBuffer.push(O), w && this.once("flush", w), this.flush() } close() { const m = () => { this._onClose("forced close"), this.transport.close() }, C = () => { this.off("upgrade", C), this.off("upgradeError", C), m() }, T = () => { this.once("upgrade", C), this.once("upgradeError", C) }; return (this.readyState === "opening" || this.readyState === "open") && (this.readyState = "closing", this.writeBuffer.length ? this.once("drain", () => { this.upgrading ? T() : m() }) : this.upgrading ? T() : m()), this } _onError(m) { if (Ar.priorWebsocketSuccess = !1, this.opts.tryAllTransports && this.transports.length > 1 && this.readyState === "opening") return this.transports.shift(), this._open(); this.emitReserved("error", m), this._onClose("transport error", m) } _onClose(m, C) { if (this.readyState === "opening" || this.readyState === "open" || this.readyState === "closing") { if (this.clearTimeoutFn(this._pingTimeoutTimer), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), or && (this._beforeunloadEventListener && removeEventListener("beforeunload", this._beforeunloadEventListener, !1), this._offlineEventListener)) { const T = br.indexOf(this._offlineEventListener); T !== -1 && br.splice(T, 1) } this.readyState = "closed", this.id = null, this.emitReserved("close", m, C), this.writeBuffer = [], this._prevBufferLen = 0 } } } Ar.protocol = De; class vn extends Ar { constructor() { super(...arguments), this._upgrades = [] } onOpen() { if (super.onOpen(), this.readyState === "open" && this.opts.upgrade) for (let m = 0; m < this._upgrades.length; m++)this._probe(this._upgrades[m]) } _probe(m) { let C = this.createTransport(m), T = !1; Ar.priorWebsocketSuccess = !1; const w = () => { T || (C.send([{ type: "ping", data: "probe" }]), C.once("packet", ne => { if (!T) if (ne.type === "pong" && ne.data === "probe") { if (this.upgrading = !0, this.emitReserved("upgrading", C), !C) return; Ar.priorWebsocketSuccess = C.name === "websocket", this.transport.pause(() => { T || this.readyState !== "closed" && (re(), this.setTransport(C), C.send([{ type: "upgrade" }]), this.emitReserved("upgrade", C), C = null, this.upgrading = !1, this.flush()) }) } else { const me = new Error("probe error"); me.transport = C.name, this.emitReserved("upgradeError", me) } })) }; function O() { T || (T = !0, re(), C.close(), C = null) } const $ = ne => { const me = new Error("probe error: " + ne); me.transport = C.name, O(), this.emitReserved("upgradeError", me) }; function z() { $("transport closed") } function G() { $("socket closed") } function te(ne) { C && ne.name !== C.name && O() } const re = () => { C.removeListener("open", w), C.removeListener("error", $), C.removeListener("close", z), this.off("close", G), this.off("upgrading", te) }; C.once("open", w), C.once("error", $), C.once("close", z), this.once("close", G), this.once("upgrading", te), this._upgrades.indexOf("webtransport") !== -1 && m !== "webtransport" ? this.setTimeoutFn(() => { T || C.open() }, 200) : C.open() } onHandshake(m) { this._upgrades = this._filterUpgrades(m.upgrades), super.onHandshake(m) } _filterUpgrades(m) { const C = []; for (let T = 0; T < m.length; T++)~this.transports.indexOf(m[T]) && C.push(m[T]); return C } } class Gt extends vn { constructor(m, C = {}) { const T = typeof m == "object" ? m : C; (!T.transports || T.transports && typeof T.transports[0] == "string") && (T.transports = (T.transports || ["polling", "websocket", "webtransport"]).map(w => It[w]).filter(w => !!w)), super(m, T) } } function Et(Y, m = "", C) { let T = Y; C = C || typeof location < "u" && location, Y == null && (Y = C.protocol + "//" + C.host), typeof Y == "string" && (Y.charAt(0) === "/" && (Y.charAt(1) === "/" ? Y = C.protocol + Y : Y = C.host + Y), /^(https?|wss?):\/\//.test(Y) || (typeof C < "u" ? Y = C.protocol + "//" + Y : Y = "https://" + Y), T = dt(Y)), T.port || (/^(http|ws)$/.test(T.protocol) ? T.port = "80" : /^(http|ws)s$/.test(T.protocol) && (T.port = "443")), T.path = T.path || "/"; const O = T.host.indexOf(":") !== -1 ? "[" + T.host + "]" : T.host; return T.id = T.protocol + "://" + O + ":" + T.port + m, T.href = T.protocol + "://" + O + (C && C.port === T.port ? "" : ":" + T.port), T } const Xr = typeof ArrayBuffer == "function", mn = Y => typeof ArrayBuffer.isView == "function" ? ArrayBuffer.isView(Y) : Y.buffer instanceof ArrayBuffer, Cr = Object.prototype.toString, yn = typeof Blob == "function" || typeof Blob < "u" && Cr.call(Blob) === "[object BlobConstructor]", Ci = typeof File == "function" || typeof File < "u" && Cr.call(File) === "[object FileConstructor]"; function Ri(Y) { return Xr && (Y instanceof ArrayBuffer || mn(Y)) || yn && Y instanceof Blob || Ci && Y instanceof File } function $i(Y, m) { if (!Y || typeof Y != "object") return !1; if (Array.isArray(Y)) { for (let C = 0, T = Y.length; C < T; C++)if ($i(Y[C])) return !0; return !1 } if (Ri(Y)) return !0; if (Y.toJSON && typeof Y.toJSON == "function" && arguments.length === 1) return $i(Y.toJSON(), !0); for (const C in Y) if (Object.prototype.hasOwnProperty.call(Y, C) && $i(Y[C])) return !0; return !1 } function Gs(Y) { const m = [], C = Y.data, T = Y; return T.data = ei(C, m), T.attachments = m.length, { packet: T, buffers: m } } function ei(Y, m) { if (!Y) return Y; if (Ri(Y)) { const C = { _placeholder: !0, num: m.length }; return m.push(Y), C } else if (Array.isArray(Y)) { const C = new Array(Y.length); for (let T = 0; T < Y.length; T++)C[T] = ei(Y[T], m); return C } else if (typeof Y == "object" && !(Y instanceof Date)) { const C = {}; for (const T in Y) Object.prototype.hasOwnProperty.call(Y, T) && (C[T] = ei(Y[T], m)); return C } return Y } function va(Y, m) { return Y.data = Ds(Y.data, m), delete Y.attachments, Y } function Ds(Y, m) { if (!Y) return Y; if (Y && Y._placeholder === !0) { if (typeof Y.num == "number" && Y.num >= 0 && Y.num < m.length) return m[Y.num]; throw new Error("illegal attachments") } else if (Array.isArray(Y)) for (let C = 0; C < Y.length; C++)Y[C] = Ds(Y[C], m); else if (typeof Y == "object") for (const C in Y) Object.prototype.hasOwnProperty.call(Y, C) && (Y[C] = Ds(Y[C], m)); return Y } const ya = ["connect", "connect_error", "disconnect", "disconnecting", "newListener", "removeListener"], Ua = 5; var dr; (function (Y) { Y[Y.CONNECT = 0] = "CONNECT", Y[Y.DISCONNECT = 1] = "DISCONNECT", Y[Y.EVENT = 2] = "EVENT", Y[Y.ACK = 3] = "ACK", Y[Y.CONNECT_ERROR = 4] = "CONNECT_ERROR", Y[Y.BINARY_EVENT = 5] = "BINARY_EVENT", Y[Y.BINARY_ACK = 6] = "BINARY_ACK" })(dr || (dr = {})); class Ks { constructor(m) { this.replacer = m } encode(m) { return (m.type === dr.EVENT || m.type === dr.ACK) && $i(m) ? this.encodeAsBinary({ type: m.type === dr.EVENT ? dr.BINARY_EVENT : dr.BINARY_ACK, nsp: m.nsp, data: m.data, id: m.id }) : [this.encodeAsString(m)] } encodeAsString(m) { let C = "" + m.type; return (m.type === dr.BINARY_EVENT || m.type === dr.BINARY_ACK) && (C += m.attachments + "-"), m.nsp && m.nsp !== "/" && (C += m.nsp + ","), m.id != null && (C += m.id), m.data != null && (C += JSON.stringify(m.data, this.replacer)), C } encodeAsBinary(m) { const C = Gs(m), T = this.encodeAsString(C.packet), w = C.buffers; return w.unshift(T), w } } class ms extends mt { constructor(m) { super(), this.reviver = m } add(m) { let C; if (typeof m == "string") { if (this.reconstructor) throw new Error("got plaintext data when reconstructing a packet"); C = this.decodeString(m); const T = C.type === dr.BINARY_EVENT; T || C.type === dr.BINARY_ACK ? (C.type = T ? dr.EVENT : dr.ACK, this.reconstructor = new rs(C), C.attachments === 0 && super.emitReserved("decoded", C)) : super.emitReserved("decoded", C) } else if (Ri(m) || m.base64) if (this.reconstructor) C = this.reconstructor.takeBinaryData(m), C && (this.reconstructor = null, super.emitReserved("decoded", C)); else throw new Error("got binary data when not reconstructing a packet"); else throw new Error("Unknown type: " + m) } decodeString(m) { let C = 0; const T = { type: Number(m.charAt(0)) }; if (dr[T.type] === void 0) throw new Error("unknown packet type " + T.type); if (T.type === dr.BINARY_EVENT || T.type === dr.BINARY_ACK) { const O = C + 1; for (; m.charAt(++C) !== "-" && C != m.length;); const $ = m.substring(O, C); if ($ != Number($) || m.charAt(C) !== "-") throw new Error("Illegal attachments"); T.attachments = Number($) } if (m.charAt(C + 1) === "/") { const O = C + 1; for (; ++C && !(m.charAt(C) === "," || C === m.length);); T.nsp = m.substring(O, C) } else T.nsp = "/"; const w = m.charAt(C + 1); if (w !== "" && Number(w) == w) { const O = C + 1; for (; ++C;) { const $ = m.charAt(C); if ($ == null || Number($) != $) { --C; break } if (C === m.length) break } T.id = Number(m.substring(O, C + 1)) } if (m.charAt(++C)) { const O = this.tryParse(m.substr(C)); if (ms.isPayloadValid(T.type, O)) T.data = O; else throw new Error("invalid payload") } return T } tryParse(m) { try { return JSON.parse(m, this.reviver) } catch { return !1 } } static isPayloadValid(m, C) { switch (m) { case dr.CONNECT: return Ne(C); case dr.DISCONNECT: return C === void 0; case dr.CONNECT_ERROR: return typeof C == "string" || Ne(C); case dr.EVENT: case dr.BINARY_EVENT: return Array.isArray(C) && (typeof C[0] == "number" || typeof C[0] == "string" && ya.indexOf(C[0]) === -1); case dr.ACK: case dr.BINARY_ACK: return Array.isArray(C) } } destroy() { this.reconstructor && (this.reconstructor.finishedReconstruction(), this.reconstructor = null) } } class rs { constructor(m) { this.packet = m, this.buffers = [], this.reconPack = m } takeBinaryData(m) { if (this.buffers.push(m), this.buffers.length === this.reconPack.attachments) { const C = va(this.reconPack, this.buffers); return this.finishedReconstruction(), C } return null } finishedReconstruction() { this.reconPack = null, this.buffers = [] } } function dn(Y) { return typeof Y == "string" } const Is = Number.isInteger || function (Y) { return typeof Y == "number" && isFinite(Y) && Math.floor(Y) === Y }; function Ys(Y) { return Y === void 0 || Is(Y) } function Ne(Y) { return Object.prototype.toString.call(Y) === "[object Object]" } function pt(Y, m) { switch (Y) { case dr.CONNECT: return m === void 0 || Ne(m); case dr.DISCONNECT: return m === void 0; case dr.EVENT: return Array.isArray(m) && (typeof m[0] == "number" || typeof m[0] == "string" && ya.indexOf(m[0]) === -1); case dr.ACK: return Array.isArray(m); case dr.CONNECT_ERROR: return typeof m == "string" || Ne(m); default: return !1 } } function yt(Y) { return dn(Y.nsp) && Ys(Y.id) && pt(Y.type, Y.data) } function kt(Y, m, C) { return Y.on(m, C), function () { Y.off(m, C) } } const Pr = Object.freeze({ connect: 1, connect_error: 1, disconnect: 1, disconnecting: 1, newListener: 1, removeListener: 1 }); class Fr extends mt { constructor(m, C, T) { super(), this.connected = !1, this.recovered = !1, this.receiveBuffer = [], this.sendBuffer = [], this._queue = [], this._queueSeq = 0, this.ids = 0, this.acks = {}, this.flags = {}, this.io = m, this.nsp = C, T && T.auth && (this.auth = T.auth), this._opts = Object.assign({}, T), this.io._autoConnect && this.open() } get disconnected() { return !this.connected } subEvents() { if (this.subs) return; const m = this.io; this.subs = [kt(m, "open", this.onopen.bind(this)), kt(m, "packet", this.onpacket.bind(this)), kt(m, "error", this.onerror.bind(this)), kt(m, "close", this.onclose.bind(this))] } get active() { return !!this.subs } connect() { return this.connected ? this : (this.subEvents(), this.io._reconnecting || this.io.open(), this.io._readyState === "open" && this.onopen(), this) } open() { return this.connect() } send(...m) { return m.unshift("message"), this.emit.apply(this, m), this } emit(m, ...C) { var T, w, O; if (Pr.hasOwnProperty(m)) throw new Error('"' + m.toString() + '" is a reserved event name'); if (C.unshift(m), this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) return this._addToQueue(C), this; const $ = { type: dr.EVENT, data: C }; if ($.options = {}, $.options.compress = this.flags.compress !== !1, typeof C[C.length - 1] == "function") { const re = this.ids++, ne = C.pop(); this._registerAckCallback(re, ne), $.id = re } const z = (w = (T = this.io.engine) === null || T === void 0 ? void 0 : T.transport) === null || w === void 0 ? void 0 : w.writable, G = this.connected && !(!((O = this.io.engine) === null || O === void 0) && O._hasPingExpired()); return this.flags.volatile && !z || (G ? (this.notifyOutgoingListeners($), this.packet($)) : this.sendBuffer.push($)), this.flags = {}, this } _registerAckCallback(m, C) { var T; const w = (T = this.flags.timeout) !== null && T !== void 0 ? T : this._opts.ackTimeout; if (w === void 0) { this.acks[m] = C; return } const O = this.io.setTimeoutFn(() => { delete this.acks[m]; for (let z = 0; z < this.sendBuffer.length; z++)this.sendBuffer[z].id === m && this.sendBuffer.splice(z, 1); C.call(this, new Error("operation has timed out")) }, w), $ = (...z) => { this.io.clearTimeoutFn(O), C.apply(this, z) }; $.withError = !0, this.acks[m] = $ } emitWithAck(m, ...C) { return new Promise((T, w) => { const O = ($, z) => $ ? w($) : T(z); O.withError = !0, C.push(O), this.emit(m, ...C) }) } _addToQueue(m) { let C; typeof m[m.length - 1] == "function" && (C = m.pop()); const T = { id: this._queueSeq++, tryCount: 0, pending: !1, args: m, flags: Object.assign({ fromQueue: !0 }, this.flags) }; m.push((w, ...O) => (this._queue[0], w !== null ? T.tryCount > this._opts.retries && (this._queue.shift(), C && C(w)) : (this._queue.shift(), C && C(null, ...O)), T.pending = !1, this._drainQueue())), this._queue.push(T), this._drainQueue() } _drainQueue(m = !1) { if (!this.connected || this._queue.length === 0) return; const C = this._queue[0]; C.pending && !m || (C.pending = !0, C.tryCount++, this.flags = C.flags, this.emit.apply(this, C.args)) } packet(m) { m.nsp = this.nsp, this.io._packet(m) } onopen() { typeof this.auth == "function" ? this.auth(m => { this._sendConnectPacket(m) }) : this._sendConnectPacket(this.auth) } _sendConnectPacket(m) { this.packet({ type: dr.CONNECT, data: this._pid ? Object.assign({ pid: this._pid, offset: this._lastOffset }, m) : m }) } onerror(m) { this.connected || this.emitReserved("connect_error", m) } onclose(m, C) { this.connected = !1, delete this.id, this.emitReserved("disconnect", m, C), this._clearAcks() } _clearAcks() { Object.keys(this.acks).forEach(m => { if (!this.sendBuffer.some(T => String(T.id) === m)) { const T = this.acks[m]; delete this.acks[m], T.withError && T.call(this, new Error("socket has been disconnected")) } }) } onpacket(m) { if (m.nsp === this.nsp) switch (m.type) { case dr.CONNECT: m.data && m.data.sid ? this.onconnect(m.data.sid, m.data.pid) : this.emitReserved("connect_error", new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)")); break; case dr.EVENT: case dr.BINARY_EVENT: this.onevent(m); break; case dr.ACK: case dr.BINARY_ACK: this.onack(m); break; case dr.DISCONNECT: this.ondisconnect(); break; case dr.CONNECT_ERROR: this.destroy(); const T = new Error(m.data.message); T.data = m.data.data, this.emitReserved("connect_error", T); break } } onevent(m) { const C = m.data || []; m.id != null && C.push(this.ack(m.id)), this.connected ? this.emitEvent(C) : this.receiveBuffer.push(Object.freeze(C)) } emitEvent(m) { if (this._anyListeners && this._anyListeners.length) { const C = this._anyListeners.slice(); for (const T of C) T.apply(this, m) } super.emit.apply(this, m), this._pid && m.length && typeof m[m.length - 1] == "string" && (this._lastOffset = m[m.length - 1]) } ack(m) { const C = this; let T = !1; return function (...w) { T || (T = !0, C.packet({ type: dr.ACK, id: m, data: w })) } } onack(m) { const C = this.acks[m.id]; typeof C == "function" && (delete this.acks[m.id], C.withError && m.data.unshift(null), C.apply(this, m.data)) } onconnect(m, C) { this.id = m, this.recovered = C && this._pid === C, this._pid = C, this.connected = !0, this.emitBuffered(), this._drainQueue(!0), this.emitReserved("connect") } emitBuffered() { this.receiveBuffer.forEach(m => this.emitEvent(m)), this.receiveBuffer = [], this.sendBuffer.forEach(m => { this.notifyOutgoingListeners(m), this.packet(m) }), this.sendBuffer = [] } ondisconnect() { this.destroy(), this.onclose("io server disconnect") } destroy() { this.subs && (this.subs.forEach(m => m()), this.subs = void 0), this.io._destroy(this) } disconnect() { return this.connected && this.packet({ type: dr.DISCONNECT }), this.destroy(), this.connected && this.onclose("io client disconnect"), this } close() { return this.disconnect() } compress(m) { return this.flags.compress = m, this } get volatile() { return this.flags.volatile = !0, this } timeout(m) { return this.flags.timeout = m, this } onAny(m) { return this._anyListeners = this._anyListeners || [], this._anyListeners.push(m), this } prependAny(m) { return this._anyListeners = this._anyListeners || [], this._anyListeners.unshift(m), this } offAny(m) { if (!this._anyListeners) return this; if (m) { const C = this._anyListeners; for (let T = 0; T < C.length; T++)if (m === C[T]) return C.splice(T, 1), this } else this._anyListeners = []; return this } listenersAny() { return this._anyListeners || [] } onAnyOutgoing(m) { return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.push(m), this } prependAnyOutgoing(m) { return this._anyOutgoingListeners = this._anyOutgoingListeners || [], this._anyOutgoingListeners.unshift(m), this } offAnyOutgoing(m) { if (!this._anyOutgoingListeners) return this; if (m) { const C = this._anyOutgoingListeners; for (let T = 0; T < C.length; T++)if (m === C[T]) return C.splice(T, 1), this } else this._anyOutgoingListeners = []; return this } listenersAnyOutgoing() { return this._anyOutgoingListeners || [] } notifyOutgoingListeners(m) { if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) { const C = this._anyOutgoingListeners.slice(); for (const T of C) T.apply(this, m.data) } } } function xt(Y) { Y = Y || {}, this.ms = Y.min || 100, this.max = Y.max || 1e4, this.factor = Y.factor || 2, this.jitter = Y.jitter > 0 && Y.jitter <= 1 ? Y.jitter : 0, this.attempts = 0 } xt.prototype.duration = function () { var Y = this.ms * Math.pow(this.factor, this.attempts++); if (this.jitter) { var m = Math.random(), C = Math.floor(m * this.jitter * Y); Y = Math.floor(m * 10) & 1 ? Y + C : Y - C } return Math.min(Y, this.max) | 0 }, xt.prototype.reset = function () { this.attempts = 0 }, xt.prototype.setMin = function (Y) { this.ms = Y }, xt.prototype.setMax = function (Y) { this.max = Y }, xt.prototype.setJitter = function (Y) { this.jitter = Y }; class $r extends mt { constructor(m, C) { var T; super(), this.nsps = {}, this.subs = [], m && typeof m == "object" && (C = m, m = void 0), C = C || {}, C.path = C.path || "/socket.io", this.opts = C, Bt(this, C), this.reconnection(C.reconnection !== !1), this.reconnectionAttempts(C.reconnectionAttempts || 1 / 0), this.reconnectionDelay(C.reconnectionDelay || 1e3), this.reconnectionDelayMax(C.reconnectionDelayMax || 5e3), this.randomizationFactor((T = C.randomizationFactor) !== null && T !== void 0 ? T : .5), this.backoff = new xt({ min: this.reconnectionDelay(), max: this.reconnectionDelayMax(), jitter: this.randomizationFactor() }), this.timeout(C.timeout == null ? 2e4 : C.timeout), this._readyState = "closed", this.uri = m; const w = C.parser || p; this.encoder = new w.Encoder, this.decoder = new w.Decoder, this._autoConnect = C.autoConnect !== !1, this._autoConnect && this.open() } reconnection(m) { return arguments.length ? (this._reconnection = !!m, m || (this.skipReconnect = !0), this) : this._reconnection } reconnectionAttempts(m) { return m === void 0 ? this._reconnectionAttempts : (this._reconnectionAttempts = m, this) } reconnectionDelay(m) { var C; return m === void 0 ? this._reconnectionDelay : (this._reconnectionDelay = m, (C = this.backoff) === null || C === void 0 || C.setMin(m), this) } randomizationFactor(m) { var C; return m === void 0 ? this._randomizationFactor : (this._randomizationFactor = m, (C = this.backoff) === null || C === void 0 || C.setJitter(m), this) } reconnectionDelayMax(m) { var C; return m === void 0 ? this._reconnectionDelayMax : (this._reconnectionDelayMax = m, (C = this.backoff) === null || C === void 0 || C.setMax(m), this) } timeout(m) { return arguments.length ? (this._timeout = m, this) : this._timeout } maybeReconnectOnOpen() { !this._reconnecting && this._reconnection && this.backoff.attempts === 0 && this.reconnect() } open(m) { if (~this._readyState.indexOf("open")) return this; this.engine = new Gt(this.uri, this.opts); const C = this.engine, T = this; this._readyState = "opening", this.skipReconnect = !1; const w = kt(C, "open", function () { T.onopen(), m && m() }), O = z => { this.cleanup(), this._readyState = "closed", this.emitReserved("error", z), m ? m(z) : this.maybeReconnectOnOpen() }, $ = kt(C, "error", O); if (this._timeout !== !1) { const z = this._timeout, G = this.setTimeoutFn(() => { w(), O(new Error("timeout")), C.close() }, z); this.opts.autoUnref && G.unref(), this.subs.push(() => { this.clearTimeoutFn(G) }) } return this.subs.push(w), this.subs.push($), this } connect(m) { return this.open(m) } onopen() { this.cleanup(), this._readyState = "open", this.emitReserved("open"); const m = this.engine; this.subs.push(kt(m, "ping", this.onping.bind(this)), kt(m, "data", this.ondata.bind(this)), kt(m, "error", this.onerror.bind(this)), kt(m, "close", this.onclose.bind(this)), kt(this.decoder, "decoded", this.ondecoded.bind(this))) } onping() { this.emitReserved("ping") } ondata(m) { try { this.decoder.add(m) } catch (C) { this.onclose("parse error", C) } } ondecoded(m) { Dt(() => { this.emitReserved("packet", m) }, this.setTimeoutFn) } onerror(m) { this.emitReserved("error", m) } socket(m, C) { let T = this.nsps[m]; return T ? this._autoConnect && !T.active && T.connect() : (T = new Fr(this, m, C), this.nsps[m] = T), T } _destroy(m) { const C = Object.keys(this.nsps); for (const T of C) if (this.nsps[T].active) return; this._close() } _packet(m) { const C = this.encoder.encode(m); for (let T = 0; T < C.length; T++)this.engine.write(C[T], m.options) } cleanup() { this.subs.forEach(m => m()), this.subs.length = 0, this.decoder.destroy() } _close() { this.skipReconnect = !0, this._reconnecting = !1, this.onclose("forced close") } disconnect() { return this._close() } onclose(m, C) { var T; this.cleanup(), (T = this.engine) === null || T === void 0 || T.close(), this.backoff.reset(), this._readyState = "closed", this.emitReserved("close", m, C), this._reconnection && !this.skipReconnect && this.reconnect() } reconnect() { if (this._reconnecting || this.skipReconnect) return this; const m = this; if (this.backoff.attempts >= this._reconnectionAttempts) this.backoff.reset(), this.emitReserved("reconnect_failed"), this._reconnecting = !1; else { const C = this.backoff.duration(); this._reconnecting = !0; const T = this.setTimeoutFn(() => { m.skipReconnect || (this.emitReserved("reconnect_attempt", m.backoff.attempts), !m.skipReconnect && m.open(w => { w ? (m._reconnecting = !1, m.reconnect(), this.emitReserved("reconnect_error", w)) : m.onreconnect() })) }, C); this.opts.autoUnref && T.unref(), this.subs.push(() => { this.clearTimeoutFn(T) }) } } onreconnect() { const m = this.backoff.attempts; this._reconnecting = !1, this.backoff.reset(), this.emitReserved("reconnect", m) } } const xr = {}; function Yr(Y, m) { typeof Y == "object" && (m = Y, Y = void 0), m = m || {}; const C = Et(Y, m.path || "/socket.io"), T = C.source, w = C.id, O = C.path, $ = xr[w] && O in xr[w].nsps, z = m.forceNew || m["force new connection"] || m.multiplex === !1 || $; let G; return z ? G = new $r(T, m) : (xr[w] || (xr[w] = new $r(T, m)), G = xr[w]), C.query && !m.query && (m.query = C.queryKey), G.socket(C.path, m) } Object.assign(Yr, { Manager: $r, Socket: Fr, io: Yr, connect: Yr }); var bn = l(76), Di = l(7833), ki = l.n(Di), ns = "mediasoup-demo", gs = function () { function Y(m) { (0, g.A)(this, Y), m ? (this._debug = ki()("".concat(ns, ":").concat(m)), this._warn = ki()("".concat(ns, ":WARN:").concat(m)), this._error = ki()("".concat(ns, ":ERROR:").concat(m))) : (this._debug = ki()(ns), this._warn = ki()("".concat(ns, ":WARN")), this._error = ki()("".concat(ns, ":ERROR"))), ki().disable(), this._debug.log = console.info.bind(console), this._warn.log = console.warn.bind(console), this._error.log = console.error.bind(console) } return (0, S.A)(Y, [{ key: "debug", get: function () { return this._debug } }, { key: "warn", get: function () { return this._warn } }, { key: "error", get: function () { return this._error } }]) }(); function ba(Y, m) { var C = Object.keys(Y); if (Object.getOwnPropertySymbols) { var T = Object.getOwnPropertySymbols(Y); m && (T = T.filter(function (w) { return Object.getOwnPropertyDescriptor(Y, w).enumerable })), C.push.apply(C, T) } return C } function uo(Y) { for (var m = 1; m < arguments.length; m++) { var C = arguments[m] != null ? arguments[m] : {}; m % 2 ? ba(Object(C), !0).forEach(function (T) { (0, R.A)(Y, T, C[T]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(Y, Object.getOwnPropertyDescriptors(C)) : ba(Object(C)).forEach(function (T) { Object.defineProperty(Y, T, Object.getOwnPropertyDescriptor(C, T)) }) } return Y } var is = l(1396), Va = is.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"), Wa = is.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj("); function Ha(Y) { return vs.apply(this, arguments) } function vs() { return vs = (0, u.A)(v().mark(function Y(m) { var C, T, w, O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je; return v().wrap(function (ft) { for (; ;)switch (ft.prev = ft.next) { case 0: return C = m.roomId, T = m.secret, w = m.signalingBaseUrl, O = "call-api.videosdk.live", $ = [], z = null, G = {}, te = {}, re = {}, ne = null, me = null, Te = null, ft.next = 1, fetch("https://".concat(w, "/infra/v1/meetings/init-config"), { method: "POST", headers: { Authorization: T, "Content-Type": "application/json" }, body: JSON.stringify({ roomId: C }) }).then(function () { var nt = (0, u.A)(v().mark(function jt(Je) { var _t; return v().wrap(function (We) { for (; ;)switch (We.prev = We.next) { case 0: return We.next = 1, Je.json(); case 1: return _t = We.sent, We.abrupt("return", uo({ success: Je.status == 200 }, _t)); case 2: case "end": return We.stop() } }, jt) })); return function (jt) { return nt.apply(this, arguments) } }()).catch(function (nt) { return { success: !1 } }); case 1: if (ke = ft.sent, Be = ke.data, Qe = ke.success, Me = ke.error, Qe) { ft.next = 2; break } throw Error(Me ?? "Error getting server configurations"); case 2: return Be && (O = Be.baseUrl, je = Be.observability, $ = po(Be.iceServers), z = je.jwt, G = je.traces, te = je.logs, re = je.metaData, ne = Be.signalingUrl, Te = Be.socketPath, me = Be.socketUrl), ft.abrupt("return", { baseUrl: O, iceServers: $, observabilityJwt: z, traces: G, logs: te, metaData: re, signalingUrl: ne, socketPath: Te, socketUrl: me }); case 3: case "end": return ft.stop() } }, Y) })), vs.apply(this, arguments) } function po(Y) { try { var m = is.AES.decrypt(Y, Va, { iv: Wa, mode: is.mode.CBC, padding: is.pad.ZeroPadding }), C = m.toString(is.enc.Utf8); return JSON.parse(C) } catch { return [] } } var Ui = l(2215), Bo = l.n(Ui), jl = "mediasoup-demo.user", Pc = "mediasoup-demo.devices"; function Ol(Y) { var m = Y.displayName; Bo().set(jl, { displayName: m }) } function Ml() { return Bo().getJSON(Pc) } var ru = l(2211), nu = l.n(ru), ho = function (m) { return { type: "SET_ROOM_STATE", payload: { state: m } } }, Ll = function (m) { return { type: "SET_ROOM_ACTIVE_SPEAKER", payload: { peerId: m } } }, Fo = function (m) { return { type: "SET_ROOM_STATS_PEER_ID", payload: { peerId: m } } }, fo = function (m) { var C = m.canSendMic, T = m.canSendWebcam; return { type: "SET_MEDIA_CAPABILITIES", payload: { canSendMic: C, canSendWebcam: T } } }, zo = function (m) { return { type: "SET_CAN_CHANGE_WEBCAM", payload: m } }, $o = function (m) { return { type: "SET_DISPLAY_NAME", payload: { displayName: m } } }, Nl = function (m) { return { type: "SET_AUDIO_ONLY_STATE", payload: { enabled: m } } }, mo = function (m) { return { type: "SET_AUDIO_ONLY_IN_PROGRESS", payload: { flag: m } } }, Uo = function (m) { return { type: "SET_AUDIO_MUTED_STATE", payload: { enabled: m } } }, Bl = function (m) { return { type: "SET_RESTART_ICE_IN_PROGRESS", payload: { flag: m } } }, js = function (m) { return { type: "ADD_PRODUCER", payload: { producer: m } } }, ys = function (m) { return { type: "REMOVE_PRODUCER", payload: { producerId: m } } }, Dc = function (m) { return { type: "SET_PRODUCER_PAUSED", payload: { producerId: m } } }, Ic = function (m) { return { type: "SET_PRODUCER_RESUMED", payload: { producerId: m } } }, Vi = function (m, C) { return { type: "SET_PRODUCER_TRACK", payload: { producerId: m, track: C } } }, jc = function (m, C) { return { type: "SET_PRODUCER_SCORE", payload: { producerId: m, score: C } } }, qa = function (m) { return { type: "ADD_DATA_PRODUCER", payload: { dataProducer: m } } }, go = function (m) { return { type: "SET_WEBCAM_IN_PROGRESS", payload: { flag: m } } }, vo = function (m) { return { type: "SET_SHARE_IN_PROGRESS", payload: { flag: m } } }, Ga = function (m) { return { type: "ADD_PEER", payload: { peer: m } } }, Vo = function (m, C) { return { type: "REMOVE_PEER", payload: { peerId: m, reason: C } } }, Fl = function (m, C) { return { type: "SET_PEER_DISPLAY_NAME", payload: { displayName: m, peerId: C } } }, zl = function (m, C) { return { type: "ADD_CONSUMER", payload: { consumer: m, peerId: C } } }, Wo = function (m, C) { return { type: "REMOVE_CONSUMER", payload: { consumerId: m, peerId: C } } }, Os = function (m, C) { return { type: "SET_CONSUMER_PAUSED", payload: { consumerId: m, originator: C } } }, Ho = function (m, C) { return { type: "SET_CONSUMER_RESUMED", payload: { consumerId: m, originator: C } } }, $l = function (m, C, T) { return { type: "SET_CONSUMER_CURRENT_LAYERS", payload: { consumerId: m, spatialLayer: C, temporalLayer: T } } }, Ul = function (m, C, T) { return { type: "SET_CONSUMER_PREFERRED_LAYERS", payload: { consumerId: m, spatialLayer: C, temporalLayer: T } } }, Vl = function (m, C) { return { type: "SET_CONSUMER_PRIORITY", payload: { consumerId: m, priority: C } } }, Wl = function (m, C) { return { type: "SET_CONSUMER_SCORE", payload: { consumerId: m, score: C } } }, Hl = function (m, C) { return { type: "ADD_DATA_CONSUMER", payload: { dataConsumer: m, peerId: C } } }, ql = function (m, C) { return { type: "REMOVE_DATA_CONSUMER", payload: { dataConsumerId: m, peerId: C } } }, Gl = function (m) { return { type: "ADD_NOTIFICATION", payload: { notification: m } } }, Kl = function (m) { return { type: "REMOVE_NOTIFICATION", payload: { notificationId: m } } }, qo = function () { return { type: "REMOVE_ALL_NOTIFICATIONS" } }, sr = function (m) { var C = m.type, T = C === void 0 ? "info" : C, w = m.text, O = m.title, $ = m.timeout; if (!$) switch (T) { case "info": $ = 3e3; break; case "error": $ = 5e3; break }var z = { id: nu()({ length: 6 }).toLowerCase(), type: T, title: O, text: w, timeout: $ }; return function (G) { G(Gl(z)), setTimeout(function () { G(Kl(z.id)) }, $) } }, rt = l(7007), ae = l(1803), Ee = l(9027), Ke = l(7080), Hr = { CONNECTING: "CONNECTING", CONNECTED: "CONNECTED", RECONNECTING: "RECONNECTING", FAILED: "FAILED", DISCONNECTED: "DISCONNECTED" }, Zr = l(1260), xa = l(5414), Wi = l(2107), iu = l(5071), Oc = 8, Mc = 16, Qs = Array(32); function su() { for (var Y = 0; Y < Mc * 2; Y++)Qs[Y] = Math.floor(Math.random() * 16) + 48, Qs[Y] >= 58 && (Qs[Y] += 39); return String.fromCharCode.apply(null, Qs.slice(0, Mc * 2)) } function Yl() { for (var Y = 0; Y < Oc * 2; Y++)Qs[Y] = Math.floor(Math.random() * 16) + 48, Qs[Y] >= 58 && (Qs[Y] += 39); return String.fromCharCode.apply(null, Qs.slice(0, Oc * 2)) } function _a() { var Y = new Date().getTime(), m = Y * 1e6, C = m.toString().padEnd(19, "0"); return Number(C) } function au(Y) { for (var m = "0123456789abcdefghijklmnopqrstuvwxyz", C = "", T = Y; T > 0; T--)C += m[Math.floor(Math.random() * m.length)]; return C } function Lc(Y, m) { var C = Object.keys(Y); if (Object.getOwnPropertySymbols) { var T = Object.getOwnPropertySymbols(Y); m && (T = T.filter(function (w) { return Object.getOwnPropertyDescriptor(Y, w).enumerable })), C.push.apply(C, T) } return C } function Go(Y) { for (var m = 1; m < arguments.length; m++) { var C = arguments[m] != null ? arguments[m] : {}; m % 2 ? Lc(Object(C), !0).forEach(function (T) { (0, R.A)(Y, T, C[T]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(Y, Object.getOwnPropertyDescriptors(C)) : Lc(Object(C)).forEach(function (T) { Object.defineProperty(Y, T, Object.getOwnPropertyDescriptor(C, T)) }) } return Y } var ou = function () { function Y(m) { var C = this, T = m.roomId, w = m.peerId, O = m.sdkName, $ = m.observabilityJwt, z = m.metaData, G = m.traces; (0, g.A)(this, Y), this._traceId = su(), this._rootSpanId = Yl(), this._observabilityJwt = $, this._tracesEnabled = G.enabled, this._tracesEndpoint = G.endPoint, this._sessionId; var te = au(8); this._spans = [], this._traceJSON = { resourceSpans: [{ resource: { attributes: [{ key: "service.name", value: { stringValue: "videosdk-otel" } }, { key: "telemetry.sdk.language", value: { stringValue: "webjs" } }, { key: "telemetry.sdk.name", value: { stringValue: "opentelemetry" } }, { key: "telemetry.sdk.version", value: { stringValue: "1.14.0" } }, { key: "sdk-version", value: { stringValue: "0.5.6" } }], droppedAttributesCount: 0 }, scopeSpans: [{ scope: { name: te }, spans: [] }] }] }, this._tracesEnabled && (this.addRootSpan(T, w, O, z), setInterval(function () { C.processQueue() }, 4e3)) } return (0, S.A)(Y, [{ key: "setSessionId", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O = this, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (this._sessionId = w, $ = this._spans.find(function (te) { return te.spanId === O._rootSpanId }), $) { G.next = 1; break } return G.abrupt("return"); case 1: z = $.attributes.find(function (te) { return te.key === "sessionId" }), z ? z.value.stringValue = w : $.attributes.push({ key: "sessionId", value: { stringValue: w } }); case 2: case "end": return G.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "addRootSpan", value: function (C, T, w, O) { var $ = { traceId: this._traceId, spanId: this._rootSpanId, name: "room_".concat(C, "_peer_").concat(T, "_sdk_").concat(w), kind: 1, startTimeUnixNano: _a(), endTimeUnixNano: _a(), attributes: [{ key: "roomId", value: { stringValue: C } }, { key: "peerId", value: { stringValue: T } }, { key: "sdkName", value: { stringValue: w } }, { key: "userId", value: { stringValue: O.userId } }, { key: "email", value: { stringValue: O.email } }], droppedAttributesCount: 0, events: [], droppedEventsCount: 0, status: { code: 0 }, links: [], droppedLinksCount: 0 }; this._spans.push($) } }, { key: "addSpanToTrace", value: function (C) { this._spans.push(C) } }, { key: "trace", value: function (C) { var T = C.spanName, w = C.attributes, O = w === void 0 ? {} : w, $ = C.span, z = $ === void 0 ? void 0 : $; if (this._tracesEnabled) { var G = Yl(), te = _a(), re = { traceId: this._traceId, spanId: G, parentSpanId: z || this._rootSpanId, name: T, kind: 1, startTimeUnixNano: te, droppedAttributesCount: 0, events: [], droppedEventsCount: 0, links: [], droppedLinksCount: 0 }; return ((0, P.A)(O) !== "object" || O === null || Array.isArray(O)) && (O = { payload: O }), Object.keys(O).length > 0 && (re.attributes = Object.entries(O).map(function (ne) { var me = (0, b.A)(ne, 2), Te = me[0], ke = me[1]; return { key: Te, value: { stringValue: ke } } })), this.addSpanToTrace(re), G } } }, { key: "traceAutoComplete", value: function (C) { var T = C.spanName, w = C.attributes, O = w === void 0 ? {} : w, $ = C.status, z = $ === void 0 ? 1 : $, G = C.span, te = G === void 0 ? void 0 : G, re = C.message, ne = re === void 0 ? "SUCCESS" : re; if (this._tracesEnabled) { var me = Yl(), Te = _a(), ke = _a(), Be = { traceId: this._traceId, spanId: me, parentSpanId: te || this._rootSpanId, name: T, kind: 1, startTimeUnixNano: Te, endTimeUnixNano: ke, droppedAttributesCount: 0, events: [], droppedEventsCount: 0, links: [], droppedLinksCount: 0, status: { code: z, message: ne } }; ((0, P.A)(O) !== "object" || O === null || Array.isArray(O)) && (O = { payload: O }), Object.keys(O).length > 0 && (Be.attributes = Object.entries(O).map(function (Qe) { var Me = (0, b.A)(Qe, 2), je = Me[0], ft = Me[1]; return { key: je, value: { stringValue: ft } } })), this.addSpanToTrace(Be) } } }, { key: "completeSpan", value: function (C) { var T = this, w = C.span, O = C.status, $ = C.message, z = C.attributes, G = z === void 0 ? {} : z; if (this._tracesEnabled) { var te = _a(); this._spans = this._spans.map(function (re) { if (re.spanId !== w) return re; ((0, P.A)(G) !== "object" || G === null || Array.isArray(G)) && (G = { payload: G }); var ne = Object.entries(G).map(function (me) { var Te = (0, b.A)(me, 2), ke = Te[0], Be = Te[1]; return { key: ke, value: { stringValue: Be } } }); return T._sessionId && ne.push({ key: "sessionId", value: { stringValue: T._sessionId } }), re.attributes = re.attributes ? [].concat((0, d.A)(re.attributes), (0, d.A)(ne)) : ne, Go(Go({}, re), {}, { status: { code: O, message: $ }, endTimeUnixNano: te }) }) } } }, { key: "processQueue", value: function () { var C = this; if (this._spans.length > 0) { var T; this._spans = this._spans.map(function (G) { return G.endTimeUnixNano ? G : Go(Go({}, G), {}, { endTimeUnixNano: _a() }) }); var w = this._spans.find(function (G) { return G.spanId === C._rootSpanId }), O = w == null || (T = w.attributes) === null || T === void 0 ? void 0 : T.some(function (G) { return G.key === "sessionId" }), $ = O ? this._spans : this._spans.filter(function (G) { return G.spanId !== C._rootSpanId }); this._spans = O ? [] : this._spans.filter(function (G) { return G.spanId === C._rootSpanId }), this._traceJSON.resourceSpans[0].scopeSpans[0].spans = $; var z = { method: "POST", headers: { Authorization: this._observabilityJwt, "Content-Type": "application/json" }, body: JSON.stringify(this._traceJSON) }; fetch(this._tracesEndpoint, z).then(function () { var G = (0, u.A)(v().mark(function te(re) { return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return C._traceJSON.resourceSpans[0].scopeSpans[0].spans = [], ne.next = 1, re.text(); case 1: return ne.abrupt("return", ne.sent); case 2: case "end": return ne.stop() } }, te) })); return function (te) { return G.apply(this, arguments) } }()).then(function (G) { }).catch(function (G) { C._spans = C._traceJSON.resourceSpans[0].scopeSpans[0].spans, console.error("There was a problem with the POST request:", G) }) } } }, { key: "getTraceId", value: function () { return this._traceId } }, { key: "getCurrentSpanId", value: function () { return this._rootSpanId } }]) }(); function Nc(Y, m) { var C = Object.keys(Y); if (Object.getOwnPropertySymbols) { var T = Object.getOwnPropertySymbols(Y); m && (T = T.filter(function (w) { return Object.getOwnPropertyDescriptor(Y, w).enumerable })), C.push.apply(C, T) } return C } function yo(Y) { for (var m = 1; m < arguments.length; m++) { var C = arguments[m] != null ? arguments[m] : {}; m % 2 ? Nc(Object(C), !0).forEach(function (T) { (0, R.A)(Y, T, C[T]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(Y, Object.getOwnPropertyDescriptors(C)) : Nc(Object(C)).forEach(function (T) { Object.defineProperty(Y, T, Object.getOwnPropertyDescriptor(C, T)) }) } return Y } var Bc = function () { function Y(m) { var C = m.roomId, T = m.peerId, w = m.logs, O = m.observabilityJwt, $ = m.deviceInfo, z = m.sessionId, G = m.debugMode; (0, g.A)(this, Y); var te = $.browserUserAgent, re = $.deviceUserAgent, ne = $.platform; this._peerId = T, this._roomId = C, this._logs = w, this._observabilityJwt = O, this._deviceInfo = $, this._sessionId = z, this._debugMode = G, this.browserOrDeviceInfo = te ? { browserName: te.browser.name, browserVersion: te.browser.version, osName: te.os.name, osVersion: te.os.version, platform: ne } : re ? yo({ platform: ne }, re) : null } return (0, S.A)(Y, [{ key: "pushLogs", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te, ke, Be, Qe; return v().wrap(function (Me) { for (; ;)switch (Me.prev = Me.next) { case 0: if (O = w.logType, $ = w.logText, z = w.attributes, G = w.dashboardLog, te = G === void 0 ? !1 : G, re = w.traceId, ne = re === void 0 ? null : re, me = w.spanId, Te = me === void 0 ? null : me, ke = this._logs, Be = ke.enabled, Qe = ke.endPoint, !Be) { Me.next = 2; break } return Me.next = 1, fetch(Qe, { method: "POST", headers: { Authorization: this._observabilityJwt, "Content-Type": "application/json" }, body: JSON.stringify({ logType: O, logText: $, attributes: yo(yo(yo(yo({}, z), {}, { roomId: this._roomId, peerId: this._peerId, SDK: "".concat(this._deviceInfo.sdkType, "-sdk"), SDK_VERSION: this._deviceInfo.sdkVersion, sessionId: this._sessionId }, this.browserOrDeviceInfo), ne && { traceId: ne }), Te && { spanId: Te }), debugMode: this._debugMode, dashboardLog: te }) }).then(function (je) { return je.json() }).catch(function (je) { return console.log("error", je), {} }); case 1: return Me.abrupt("return", Me.sent); case 2: return Me.abrupt("return", null); case 3: case "end": return Me.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }]) }(); l(4973); var Fc = l(388), bo = l(3954), Ko = l(5501), Ql = l(3662); function lu(Y) { try { return Function.toString.call(Y).indexOf("[native code]") !== -1 } catch { return typeof Y == "function" } } function zc() { try { var Y = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })) } catch { } return (zc = function () { return !!Y })() } function cu(Y, m, C) { if (zc()) return Reflect.construct.apply(null, arguments); var T = [null]; T.push.apply(T, m); var w = new (Y.bind.apply(Y, T)); return C && (0, Ql.A)(w, C.prototype), w } function Jl(Y) { var m = typeof Map == "function" ? new Map : void 0; return Jl = function (T) { if (T === null || !lu(T)) return T; if (typeof T != "function") throw new TypeError("Super expression must either be null or a function"); if (m !== void 0) { if (m.has(T)) return m.get(T); m.set(T, w) } function w() { return cu(T, arguments, (0, bo.A)(this).constructor) } return w.prototype = Object.create(T.prototype, { constructor: { value: w, enumerable: !1, writable: !0, configurable: !0 } }), (0, Ql.A)(w, T) }, Jl(Y) } function $c(Y, m, C) { return m = (0, bo.A)(m), (0, Fc.A)(Y, wa() ? Reflect.construct(m, C || [], (0, bo.A)(Y).constructor) : m.apply(Y, C)) } function wa() { try { var Y = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })) } catch { } return (wa = function () { return !!Y })() } var Ka = function (Y) { function m(C, T) { var w; return (0, g.A)(this, m), w = $c(this, m, [T || "an error has occured"]), (0, R.A)(w, "code", void 0), w.name = "VideoSdkError", w.code = C, w } return (0, Ko.A)(m, Y), (0, S.A)(m) }(Jl(Error)), Xl; (function (Y) { Y[Y.InvalidKey = 0] = "InvalidKey", Y[Y.MissingKey = 1] = "MissingKey", Y[Y.InternalError = 2] = "InternalError" })(Xl || (Xl = {})); var Rm = function (Y) { function m(C) { var T; return (0, g.A)(this, m), T = $c(this, m, [21, C ?? "device is unsupported"]), T.name = "DeviceUnsupportedError", T } return (0, Ko.A)(m, Y), (0, S.A)(m) }(Ka), Yo = l(1806), Sa = l(6746), du = l(8278); function Ir(Y, m) { return Y ? m == "audio" ? "shareAudio" : "share" : m } function km(Y, m) {
                    var C = typeof Symbol < "u" && Y[Symbol.iterator] || Y["@@iterator"]; if (!C) {
                        if (Array.isArray(Y) || (C = Tm(Y)) || m && Y && typeof Y.length == "number") { C && (Y = C); var T = 0, w = function () { }; return { s: w, n: function () { return T >= Y.length ? { done: !0 } : { done: !1, value: Y[T++] } }, e: function (te) { throw te }, f: w } } throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                    } var O, $ = !0, z = !1; return { s: function () { C = C.call(Y) }, n: function () { var te = C.next(); return $ = te.done, te }, e: function (te) { z = !0, O = te }, f: function () { try { $ || C.return == null || C.return() } finally { if (z) throw O } } }
                } function Tm(Y, m) { if (Y) { if (typeof Y == "string") return qp(Y, m); var C = {}.toString.call(Y).slice(8, -1); return C === "Object" && Y.constructor && (C = Y.constructor.name), C === "Map" || C === "Set" ? Array.from(Y) : C === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C) ? qp(Y, m) : void 0 } } function qp(Y, m) { (m == null || m > Y.length) && (m = Y.length); for (var C = 0, T = Array(m); C < m; C++)T[C] = Y[C]; return T } function Am(Y, m, C) { return m = (0, bo.A)(m), (0, Fc.A)(Y, Gp() ? Reflect.construct(m, C || [], (0, bo.A)(Y).constructor) : m.apply(Y, C)) } function Gp() { try { var Y = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () { })) } catch { } return (Gp = function () { return !!Y })() } var uu = function (Y) { function m(C) { var T; return (0, g.A)(this, m), T = Am(this, m), T.onWorkerMessage = function (w) { var O, $ = w.data, z = $.kind, G = $.data; switch (z) { case "error": console.error(G.error.message), T.emit(Sa.KS.EncryptionError, G.error); break; case "initAck": G.enabled && T.keyProvider.getKeys().forEach(function (re) { T.postKey(re) }); break; case "enable": if (G.enabled && T.keyProvider.getKeys().forEach(function (re) { T.postKey(re) }), T.encryptionEnabled !== G.enabled && G.participantIdentity === T.room._peerId) T.emit(Sa.KS.ParticipantEncryptionStatusChanged, G.enabled, T.room.localParticipant), T.encryptionEnabled = G.enabled; else if (G.participantIdentity) { var te = (O = T.room) === null || O === void 0 ? void 0 : O.getParticipantByIdentity(G.participantIdentity); if (!te) throw TypeError("couldn't set encryption status, participant not found".concat(G.participantIdentity)); T.emit(Sa.KS.ParticipantEncryptionStatusChanged, G.enabled, te) } break; case "ratchetKey": T.keyProvider.emit(Sa.fo.KeyRatcheted, G.material, G.keyIndex); break; case "e2eeStateChange": T.emit(Sa.KS.E2EEStateChange, G); break; default: console.log("unknown message kind", w); break } }, T.onWorkerError = function (w) { var O; console.error("Worker encountered an error:", w), console.error("Error message:", w.message), console.error("Error filename:", w.filename), console.error("Error line number:", w.lineno), console.error("Error stack:", (O = w.error) === null || O === void 0 ? void 0 : O.stack) }, T.keyProvider = C.keyProvider, T.worker = C.worker, T.encryptionEnabled = !1, T } return (0, Ko.A)(m, Y), (0, S.A)(m, [{ key: "setup", value: function (T) { if (!(0, du.Ag)()) throw new Rm("tried to setup end-to-end encryption on an unsupported browser"); if (console.info("setting up e2ee"), T !== this.room) { this.room = T, this.setupEventListeners(T, this.keyProvider), this.handleE2EEManagerEvents(); var w = { kind: "init", data: { keyProviderOptions: this.keyProvider.getOptions() } }; console.log("msg", w), this.worker && (console.info("initializing worker", { worker: this.worker }), this.worker.onmessage = this.onWorkerMessage, this.worker.onerror = this.onWorkerError, this.worker.postMessage(w)) } } }, { key: "setParticipantCryptorEnabled", value: function (T, w) { console.debug("set e2ee to ".concat(T, " for participant ").concat(w)), this.postEnable(T, w) } }, { key: "setSifTrailer", value: function (T) { !T || T.length === 0 ? console.warn("ignoring server sent trailer as it's empty") : this.postSifTrailer(T) } }, { key: "setupEventListeners", value: function (T, w) { var O = this; w.on(Sa.fo.SetKey, function ($) { console.log("### keyInfo", $), O.postKey($) }).on(Sa.fo.RatchetRequest, function ($, z) { return O.postRatchetRequest($, z) }) } }, { key: "postRatchetRequest", value: function (T, w) { if (!this.worker) throw Error("could not ratchet key, worker is missing"); var O = { kind: "ratchetRequest", data: { participantIdentity: T, keyIndex: w } }; this.worker.postMessage(O) } }, { key: "postKey", value: function (T) { var w = T.key, O = T.participantIdentity, $ = T.keyIndex; if (!this.worker) throw Error("could not set key, worker is missing"); var z = { kind: "setKey", data: { participantIdentity: O, isPublisher: O === this.room._peerId, key: w, keyIndex: $ } }; this.worker.postMessage(z) } }, { key: "postEnable", value: function (T, w) { if (this.worker) { var O = { kind: "enable", data: { enabled: T, participantIdentity: w } }; this.worker.postMessage(O) } else throw new ReferenceError("failed to enable e2ee, worker is not ready") } }, { key: "postRTPMap", value: function (T) { var w; if (!this.worker) throw TypeError("could not post rtp map, worker is missing"); if (!(!((w = this.room) === null || w === void 0) && w._peerId)) throw TypeError("could not post rtp map, local participant identity is missing"); var O = { kind: "setRTPMap", data: { map: T, participantIdentity: this.room._peerId } }; this.worker.postMessage(O) } }, { key: "postSifTrailer", value: function (T) { if (!this.worker) throw Error("could not post SIF trailer, worker is missing"); var w = { kind: "setSifTrailer", data: { trailer: T } }; this.worker.postMessage(w) } }, { key: "setupE2EEReceiver", value: function (T, w) { var O; this.handleReceiver(T, T.rtpReceiver, T.track.id, w, this.extractCodec(T.rtpParameters.codecs), Ir((O = T.appData) === null || O === void 0 ? void 0 : O.share, T.kind)) } }, { key: "setupE2EESender", value: function (T) { var w; if (!T) { console.error("Producer is required to setup E2EE sender"); return } this.handleSender(T.rtpSender, T.track.id, this.extractCodec(T.rtpParameters.codecs), Ir((w = T.appData) === null || w === void 0 ? void 0 : w.share, T.kind), this.room._peerId) } }, { key: "handleReceiver", value: function () { var C = (0, u.A)(v().mark(function w(O, $, z, G, te, re) { var ne, me, Te, ke, Be, Qe; return v().wrap(function (Me) { for (; ;)switch (Me.prev = Me.next) { case 0: if (this.worker) { Me.next = 1; break } return Me.abrupt("return"); case 1: if (!(0, du.Wm)()) { Me.next = 2; break } ne = { kind: "decode", participantIdentity: G, trackId: O.track.id, codec: te }, $.transform = new RTCRtpScriptTransform(this.worker, ne), Me.next = 5; break; case 2: if (!(Yo.$Q in $ && te)) { Me.next = 3; break } return Te = { kind: "updateCodec", data: { trackId: z, codec: te, participantIdentity: G } }, this.worker.postMessage(Te), Me.abrupt("return"); case 3: if (ke = $.writableStream, Be = $.readableStream, !(!ke || !Be)) { Me.next = 4; break } return console.error("no writable or readable stream"), Me.abrupt("return"); case 4: Qe = { kind: "decode", data: { readableStream: Be, writableStream: ke, trackId: z, codec: te, participantIdentity: G, mediaKind: re, peerId: (me = O.appData) === null || me === void 0 ? void 0 : me.peerId } }, this.worker.postMessage(Qe, [Be, ke]); case 5: $[Yo.$Q] = !0; case 6: case "end": return Me.stop() } }, w, this) })); function T(w, O, $, z, G, te) { return C.apply(this, arguments) } return T }() }, { key: "handleSender", value: function (T, w, O, $, z) { var G; if (Yo.$Q in T || !this.worker) { console.error("### sender already set up"); return } if (!(!((G = this.room) === null || G === void 0) && G._peerId) || this.room._peerId === "") throw TypeError("local identity needs to be known in order to set up encrypted sender"); if ((0, du.Wm)()) { console.info("### initialize script transform"); var te = { kind: "encode", participantIdentity: this.room._peerId, trackId: w, codec: O, mediaKind: $, peerId: z }; T.transform = new RTCRtpScriptTransform(this.worker, te) } else try { var re = T.senderStreams; if (re) { var ne = { kind: "encode", data: { readableStream: re.readable, writableStream: re.writable, codec: O, trackId: w, participantIdentity: this.room._peerId, mediaKind: $, peerId: z } }; this.worker.postMessage(ne, [re.readable, re.writable]) } else console.error("Error no sender streams found") } catch (me) { console.log("Error in handle sender ", me) } T[Yo.$Q] = !0 } }, { key: "handleE2EEManagerEvents", value: function () { var T = this; this.on("NEW_CONSUMER", function (w) { var O = w.consumer, $ = w.peerId; console.log("NEW_CONSUMER", O), T.setupE2EEReceiver(O, $) }), this.on("NEW_PRODUCER", function (w) { T.setupE2EESender(w) }) } }, { key: "extractCodec", value: function (T) { var w = "", O = km(T), $; try { for (O.s(); !($ = O.n()).done;) { var z = $.value, G = z.mimeType.split("/")[1].toLowerCase(); if (this.kind === "audio") { if (Yo.Ts.includes(G)) { z = G; break } } else if (Yo.ue.includes(G)) { z = G; break } } } catch (te) { O.e(te) } finally { O.f() } return w } }]) }(rt.EventEmitter), Qo = "https://cdn.videosdk.live/e2ee/0.0.1/bundle.js"; function Uc() { return Vc.apply(this, arguments) } function Vc() { return Vc = (0, u.A)(v().mark(function Y() { var m, C, T, w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: return O.next = 1, fetch(Qo); case 1: if (m = O.sent, m.ok) { O.next = 2; break } throw new Error("Failed to load worker script: ".concat(m.statusText)); case 2: return O.next = 3, m.text(); case 3: return C = O.sent, T = new Blob([C], { type: "application/javascript" }), w = URL.createObjectURL(T), O.abrupt("return", new Worker(w)); case 4: case "end": return O.stop() } }, Y) })), Vc.apply(this, arguments) } var Pm = l(9633), bs = l(3115), xo = l(2067), pu = l(6565), Kp = ["bitrates"]; function Dn(Y, m) {
                    var C = typeof Symbol < "u" && Y[Symbol.iterator] || Y["@@iterator"]; if (!C) {
                        if (Array.isArray(Y) || (C = Dm(Y)) || m && Y && typeof Y.length == "number") { C && (Y = C); var T = 0, w = function () { }; return { s: w, n: function () { return T >= Y.length ? { done: !0 } : { done: !1, value: Y[T++] } }, e: function (te) { throw te }, f: w } } throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)
                    } var O, $ = !0, z = !1; return { s: function () { C = C.call(Y) }, n: function () { var te = C.next(); return $ = te.done, te }, e: function (te) { z = !0, O = te }, f: function () { try { $ || C.return == null || C.return() } finally { if (z) throw O } } }
                } function Dm(Y, m) { if (Y) { if (typeof Y == "string") return Zl(Y, m); var C = {}.toString.call(Y).slice(8, -1); return C === "Object" && Y.constructor && (C = Y.constructor.name), C === "Map" || C === "Set" ? Array.from(Y) : C === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C) ? Zl(Y, m) : void 0 } } function Zl(Y, m) { (m == null || m > Y.length) && (m = Y.length); for (var C = 0, T = Array(m); C < m; C++)T[C] = Y[C]; return T } function Yp(Y, m) { var C = Object.keys(Y); if (Object.getOwnPropertySymbols) { var T = Object.getOwnPropertySymbols(Y); m && (T = T.filter(function (w) { return Object.getOwnPropertyDescriptor(Y, w).enumerable })), C.push.apply(C, T) } return C } function Rn(Y) { for (var m = 1; m < arguments.length; m++) { var C = arguments[m] != null ? arguments[m] : {}; m % 2 ? Yp(Object(C), !0).forEach(function (T) { (0, R.A)(Y, T, C[T]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(Y, Object.getOwnPropertyDescriptors(C)) : Yp(Object(C)).forEach(function (T) { Object.defineProperty(Y, T, Object.getOwnPropertyDescriptor(C, T)) }) } return Y } function Im(Y, m) { jm(Y, m), m.add(Y) } function jm(Y, m) { if (m.has(Y)) throw new TypeError("Cannot initialize the same private elements twice on an object") } function ab(Y, m, C) { if (typeof Y == "function" ? Y === m : Y.has(m)) return arguments.length < 3 ? m : C; throw new TypeError("Private element is not present on this object") } var hu = { sd: { low: { s: 0, t: 2 }, med: { s: 0, t: 2 }, high: { s: 1, t: 2 }, s0t0: { s: 0, t: 0 }, s0t1: { s: 0, t: 1 }, s0t2: { s: 0, t: 2 }, s1t0: { s: 1, t: 0 }, s1t1: { s: 1, t: 1 }, s1t2: { s: 1, t: 2 }, s2t0: { s: 2, t: 0 }, s2t1: { s: 2, t: 1 }, s2t2: { s: 2, t: 2 } }, hd: { low: { s: 0, t: 2 }, med: { s: 1, t: 2 }, high: { s: 2, t: 2 }, s0t0: { s: 0, t: 0 }, s0t1: { s: 0, t: 1 }, s0t2: { s: 0, t: 2 }, s1t0: { s: 1, t: 0 }, s1t1: { s: 1, t: 1 }, s1t2: { s: 1, t: 2 }, s2t0: { s: 2, t: 0 }, s2t1: { s: 2, t: 1 }, s2t2: { s: 2, t: 2 } } }, fu = { qvga: { width: { ideal: 320 }, height: { ideal: 240 } }, vga: { width: { ideal: 640 }, height: { ideal: 480 } }, sd: { width: { ideal: 1280 }, height: { ideal: 720 }, frameRate: { ideal: 24 } }, hd: { width: { ideal: 1280 }, height: { ideal: 720 }, frameRate: { ideal: 24 } } }, Om = { sd: [{ scaleResolutionDownBy: 6 }, { scaleResolutionDownBy: 4 }, { scaleResolutionDownBy: 2 }], hd: [{ scaleResolutionDownBy: 4 }, { scaleResolutionDownBy: 2 }, { scaleResolutionDownBy: 1 }] }, Ea = [{ scalabilityMode: "S3T3_KEY" }], Jo = [{ dtx: !0, maxFramerate: 30 }], Re = new gs("RoomClient"), ze, ar = new WeakSet, Mm = function () { function Y(m) { var C = m.roomId, T = m.peerId, w = m.secret, O = m.displayName, $ = m.device, z = m.handlerName, G = m.useSimulcast, te = m.forceTcp, re = m.mode, ne = m.forceH264, me = m.forceVP9, Te = m.svc; m.datachannel; var ke = m.externalVideo, Be = m.micEnabled, Qe = m.webcamEnabled, Me = m.maxResolution, je = m.useSpartialLayerAnalytics, ft = m._deviceInfo, nt = m.customCameraVideoTrack, jt = m.customMicrophoneAudioTrack, Je = m.autoConsume, _t = m.preferredProtocol, We = m.signalingBaseUrl, Ve = m.metaData, gt = m.translationLanguage, wt = m.speakingLanguage, $t = m.defaultCameraIndex, Ut = m.debugMode, Ot = m.keyProvider, bt = m.defaultCamera; (0, g.A)(this, Y), Im(this, ar), (0, R.A)(this, "e2eeManager", null), Re.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]', C, T, O, $.flag), this.useSpartialLayerAnalytics = je || !1, this._deviceInfo = ft, this._eventEmitter = new rt.EventEmitter, this._closed = !1, this._displayName = O, this._device = $, this._forceTcp = te, this._preferredProtocol = _t, this._defaultCamera = bt; var Zt, lr; switch (re) { case Wi.nI.CONFERENCE: case Wi.nI.SEND_AND_RECV: Zt = !0, lr = !0; break; case Wi.nI.RECV_ONLY: Zt = !1, lr = !0; break; default: Zt = !1, lr = !1 }this._mode = re, this._produce = Zt, this._consume = lr, this._forceH264 = !!ne, this._forceVP9 = !!me, this._micEnabled = !!Be, this._webcamEnabled = !!Qe, this._externalVideo = null, this._externalVideoStream = null, this._nextDataChannelTestNumber = 0, ke && (this._externalVideo = document.createElement("video"), this._externalVideo.controls = !0, this._externalVideo.loop = !0, this._externalVideo.setAttribute("playsinline", ""), this._externalVideo.src = ke, this._externalVideo.play().catch(function (st) { return Re.warn("externalVideo.play() failed:%o", st) })), this._handlerName = z, this._useSimulcast = G, this._socketUrl = "", this._secret = w, this._peerId = T, this._roomId = C, this._baseUrl = "", this._webSocket = null, this._mediasoupDevice = null, this._sendTransport = null, this._recvTransport = null, this._micProducer = null, this._webcamProducer = null, this._shareProducer = null, this._shareAudioProducer = null, this._reliableDataProducer = null, this._unreliableDataProducer = null, this._consumers = new Map, this._dataConsumers = new Map, this._mics = new Map, this._mic = { device: null }, this._webcams = new Map, this._webcam = { device: null, resolution: Me || "hd" }, this._pinnedParticipants = new Map, Te && (Ea[0].scalabilityMode = "".concat(Te, "_KEY")), this.customCameraVideoTrack = nt, this.customMicrophoneAudioTrack = jt, this._autoConsume = Je, this._iceServers = []; var qt = { refreshEvery: 1e3, startAfter: 1e3, verbose: !1 }; if (this._metrics = new xa.VideoSDKMetrics(qt), this._stats = {}, this._latestStats = {}, this._isWebsocketAlive = !1, this._pingWebsocketInterval = null, this._pingInternetInterval = null, this._pingWebsocketFailedCounter = 0, this._pongInternetCounter = 0, this._transportState = "", this._openTelemetry = null, this._videosdkLogs = null, this._signalingBaseUrl = We || "api.videosdk.live", this._metaData = Rn(Rn(Rn({}, Ve ?? {}), gt && { translationLanguage: gt }), wt && { speakingLanguage: wt }), this._defaultCameraIndex = $t, this._translationLanguage = gt, this._debugMode = !!Ut, this._meetingConnectionState = null, this._peerSpans = new Map, this._sendTransportInternal = null, Ot) if (Ot instanceof Pm.l) ab(ar, this, Wc).call(this, Ot); else throw new Error("keyProvider should be an instance of ExternalE2EEKeyProvider") } return (0, S.A)(Y, [{ key: "on", value: function (C, T) { this._eventEmitter.on(C, T) } }, { key: "softClose", value: function () { var C; (C = this._videosdkLogs) === null || C === void 0 || C.pushLogs({ logText: "In softClose() Start ", logType: "INFO" }); try { var T, w, O; this._eventEmitter.emit("REMOVE_PARTICIPANTS_FOR_SWITCH_MEETING"), (T = this._videosdkLogs) === null || T === void 0 || T.pushLogs({ logText: "In softClose() Consumer Cleanup ", logType: "INFO" }); var $ = Dn(this._consumers.values()), z; try { for ($.s(); !(z = $.n()).done;) { var G = z.value; G.close() } } catch (re) { $.e(re) } finally { $.f() } (w = this._videosdkLogs) === null || w === void 0 || w.pushLogs({ logText: "In softClose(), Closed ".concat(this._consumers.size, " media streams successfully"), logType: "INFO" }), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "In softClose(), Soft close completed successfully", logType: "INFO" }) } catch (re) { var te; (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "In softClose(), Soft close failed: ".concat(re.message), logType: "ERROR" }), console.error(re) } } }, { key: "close", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft; return v().wrap(function (nt) { for (; ;)switch (nt.prev = nt.next) { case 0: if (te = w.sendLeft, re = te === void 0 ? !0 : te, ne = w.manualCalled, me = ne === void 0 ? !1 : ne, Te = w.code, ke = w.meetingLeftReason, re && (Be = (Qe = this._openTelemetry) === null || Qe === void 0 ? void 0 : Qe.trace({ spanName: me ? "Leaving the meeting" : "Closing the meeting" }), (Me = this._videosdkLogs) === null || Me === void 0 || Me.pushLogs({ logText: "Meeting is in CLOSING State", logType: "INFO" })), !me) { nt.next = 2; break } return (je = this._videosdkLogs) === null || je === void 0 || je.pushLogs({ logText: "Participant manually called the leave() method to exit the meeting", logType: "INFO" }), nt.next = 1, this._socketRequest("definePeerLeftReason", { leaveReason: "MANUAL_LEAVE_CALLED" }); case 1: ke = Zr.t.MANUAL_LEAVE_CALLED.message, Te = Zr.t.MANUAL_LEAVE_CALLED.code; case 2: if (!this._closed) { nt.next = 3; break } return nt.abrupt("return"); case 3: this._closed = !0, this._pingWebsocketInterval && clearInterval(this._pingWebsocketInterval), this._pingWebsocketInterval = null, this._pingInternetInterval && clearInterval(this._pingInternetInterval), this._pingInternetInterval = null, this._sendTransportInternal && clearInterval(this._sendTransportInternal), this._sendTransportInternal = null, this._webSocket.close(), this._metrics.running && this._metrics.stopAllProbes(), Re.debug("close()"), ft = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Closing Media Transports", span: Be }), this._sendTransport && this._sendTransport.close(), this._recvTransport && this._recvTransport.close(), ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: ft, status: 1, message: "Media Transports closed successfully" }), ze.dispatch(ho("closed")), re && this.emitMeetingStateChange(Hr.DISCONNECTED), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: "Meeting is in CLOSED State", logType: "INFO" }), (G = this._openTelemetry) === null || G === void 0 || G.traceAutoComplete({ spanName: "Emitting MEETING_LEFT Event with meeting left reason : ".concat(ke, "(").concat(Te, ")"), status: 1, span: Be }), re && this._eventEmitter.emit("MEETING_LEFT", { message: ke || Zr.t.UNKNOWN.message, code: Te || Zr.t.UNKNOWN.code }), this._openTelemetry.completeSpan({ span: Be, status: 1, message: "".concat(me ? "Meeting left successfully" : "Meeting closed successfully") }); case 4: case "end": return nt.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "join", value: function () { var m = (0, u.A)(v().mark(function T() { var w = this, O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We, Ve, gt, wt, $t, Ut, Ot, bt, Zt, lr; return v().wrap(function (qt) { for (; ;)switch (qt.prev = qt.next) { case 0: return qt.prev = 0, qt.next = 1, Ha({ roomId: this._roomId, secret: this._secret, signalingBaseUrl: this._signalingBaseUrl }); case 1: if (G = qt.sent, te = G.baseUrl, re = G.iceServers, ne = G.logs, me = G.observabilityJwt, Te = G.traces, ke = G.metaData, Be = G.signalingUrl, Qe = G.socketPath, Me = G.socketUrl, this._baseUrl = te, this._socketUrl = "wss://".concat(Me || this._baseUrl, "/?roomId=").concat(this._roomId, "&peerId=").concat(this._peerId, "&secret=").concat(this._secret, "&mode=").concat(this._mode, "&lib=socket"), this._iceServers = re, this._tracesEnabled = Te.enabled, this._openTelemetry = new ou((0, R.A)({ roomId: this._roomId, peerId: this._peerId, sdkName: "".concat(this._deviceInfo.sdkType, "-sdk"), traces: Te, logs: ne, observabilityJwt: me, metaData: ke }, "traces", Te)), this._videosdkLogs = new Bc({ roomId: this._roomId, peerId: this._peerId, sdkName: "".concat(this._deviceInfo.sdkType, "-sdk"), logs: ne, observabilityJwt: me, deviceInfo: this._deviceInfo, sessionId: this._sessionId, debugMode: this._debugMode }), this._deviceInfo.sdkType === "react-native") { qt.next = 6; break } if (qt.prev = 2, je = [], this._micEnabled && this._webcamEnabled ? je = [bs.VideoSDK.Constants.permission.AUDIO_AND_VIDEO] : this._micEnabled ? je = [bs.VideoSDK.Constants.permission.AUDIO] : this._webcamEnabled && (je = [bs.VideoSDK.Constants.permission.VIDEO]), !(je.length > 0)) { qt.next = 4; break } return qt.next = 3, bs.VideoSDK.requestPermission(je); case 3: ft = qt.sent, nt = Dn(ft); try { for (nt.s(); !(jt = nt.n()).done;)Ve = (0, b.A)(jt.value, 2), gt = Ve[0], wt = Ve[1], $t = gt === bs.VideoSDK.Constants.permission.AUDIO ? "Audio" : gt === bs.VideoSDK.Constants.permission.VIDEO ? "Video" : "Audio and Video", Ut = (Je = this._openTelemetry) === null || Je === void 0 ? void 0 : Je.trace({ spanName: "Checking ".concat($t, " permission"), span: Ut }), (_t = this._openTelemetry) === null || _t === void 0 || _t.traceAutoComplete({ spanName: wt ? "".concat($t, " permission granted.") : "".concat($t, " permission denied!"), span: Ut, status: wt ? 1 : 2, attributes: { permissionType: $t, granted: wt } }), (We = this._openTelemetry) === null || We === void 0 || We.completeSpan({ span: Ut }) } catch (st) { nt.e(st) } finally { nt.f() } case 4: qt.next = 6; break; case 5: qt.prev = 5, Zt = qt.catch(2), (Ot = this._openTelemetry) === null || Ot === void 0 || Ot.completeSpan({ message: "Permission check failed.", span: permissionSpan, status: 2, attributes: { error: Zt.message } }); case 6: this._joinSpan = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Joining the meeting", attributes: { DeviceInfo: JSON.stringify(this._deviceInfo), mode: this._mode, displayName: this._displayName, multiStream: this._useSimulcast, micEnabled: this._micEnabled, webcamEnabled: this._webcamEnabled, CustomVideoTrack: !!this.customCameraVideoTrack, CustomMicTrack: !!this.customMicrophoneAudioTrack, signalingUrl: Be || "signalingUrl not specified" } }), this._requestEntrySpan = null, this._webSocket = Yr(this._socketUrl, { transports: ["websocket"], reconnectionAttempts: 10, reconnectionDelay: 5e3, reconnection: !0, path: "".concat(Qe ?? "", "/socket.io") }), this.emitMeetingStateChange(Hr.CONNECTING), ze.dispatch(ho("connecting")), ($ = this._openTelemetry) === null || $ === void 0 || $.traceAutoComplete({ spanName: "Meeting is in CONNECTING State", span: this._joinSpan, status: 1 }), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: "Meeting is in CONNECTING State", logType: "INFO" }), this._webSocket.on("connect", function () { }), this._webSocket.on("connectionSuccess", function () { var st, Ye; w._isWebsocketAlive = !0, w._closed = !1, (w._mode === Wi.nI.RECV_ONLY || w._mode === Wi.nI.SIGNALLING_ONLY) && w.emitMeetingStateChange(Hr.CONNECTED), (st = w._openTelemetry) === null || st === void 0 || st.traceAutoComplete({ spanName: "Meeting is in CONNECTED State", span: w._joinSpan, status: 1 }), (Ye = w._videosdkLogs) === null || Ye === void 0 || Ye.pushLogs({ logText: "Meeting is in CONNECTED State", logType: "INFO" }), w.requestEntry() }), this._webSocket.on("disconnect", function (st) { var Ye; if ((Ye = w._videosdkLogs) === null || Ye === void 0 || Ye.pushLogs({ logText: "Meeting is in Websocket Disconnect State", logType: "INFO", attributes: { reason: st }, dashboardLog: !1 }), st === "transport close" || st === "transport error" || st === "ping timeout") { if (w._eventEmitter.emit("SOCKET_STATE_CHANGED", { state: "SOCKET_DISCONNECTED" }), w.customMicrophoneAudioTrack) { var Le; (Le = w.customMicrophoneAudioTrack) === null || Le === void 0 || Le.getTracks().forEach(function (Ft) { Ft.stop() }), w.customMicrophoneAudioTrack = null } if (w.customCameraVideoTrack) { var Ae; (Ae = w.customCameraVideoTrack) === null || Ae === void 0 || Ae.getTracks().forEach(function (Ft) { Ft.stop() }), w.customCameraVideoTrack = null } if (w._sendTransport) { var Pt; (Pt = w._sendTransport) === null || Pt === void 0 || Pt.close(), w._sendTransport = null } if (w._recvTransport) { var Yt; (Yt = w._recvTransport) === null || Yt === void 0 || Yt.close(), w._recvTransport = null } } }), this._webSocket.io.on("reconnect_failed", function () { w._closed || w.close({ sendLeft: !0, meetingLeftReason: Zr.t.WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED.message, code: Zr.t.WEBSOCKET_CONNECTION_ATTEMPTS_EXHAUSTED.code }) }), this._webSocket.on("connect_error", function (st) { if (w._webSocket.active && w._webSocket.io._reconnecting) { var Ye, Le, Ae, Pt; if ((Ye = w._openTelemetry) === null || Ye === void 0 || Ye.traceAutoComplete({ spanName: "Reconnecting to the meeting", span: w._joinSpan, status: 1 }), (Le = w._videosdkLogs) === null || Le === void 0 || Le.pushLogs({ logText: "Meeting is in RECONNECTING State", logType: "INFO", attributes: { error: st.message } }), ze.dispatch(sr({ type: "error", text: "WebSocket Reconnecting" })), w.emitMeetingStateChange(Hr.RECONNECTING), w._sendTransport) { var Yt; (Yt = w._sendTransport) === null || Yt === void 0 || Yt.close(), w._sendTransport = null } if (w._recvTransport) { var Ft; (Ft = w._recvTransport) === null || Ft === void 0 || Ft.close(), w._recvTransport = null } (Ae = w.customMicrophoneAudioTrack) === null || Ae === void 0 || Ae.getTracks().forEach(function (nr) { nr.stop() }), w.customMicrophoneAudioTrack = null, (Pt = w.customCameraVideoTrack) === null || Pt === void 0 || Pt.getTracks().forEach(function (nr) { nr.stop() }), w.customCameraVideoTrack = null } else console.log("Error while trying to reconnect", st.message) }), this._webSocket.on("close", function (st) { var Ye = st.reason ? st.reason : Zr.t.UNKNOWN; w._closed || w.close({ sendLeft: !0, code: Ye.code, meetingLeftReason: Ye.message }) }), this._webSocket.on("newConsumer", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { var Pt, Yt, Ft, nr, fr, Mr, Sr, er, ln, Lr, Nr, en, kn, gn, Sn, Tn, un, Qr, Ct, _r, mr, qr, xn, tn, In, ti, ci; return v().wrap(function (Mn) { for (; ;)switch (Mn.prev = Mn.next) { case 0: if (Ft = Le.peerId, nr = Le.producerId, fr = Le.id, Mr = Le.kind, Sr = Le.rtpParameters, er = Le.type, ln = Le.appData, Lr = Le.producerPaused, Nr = w._peerSpans.get(Ft), en = (Pt = w._openTelemetry) === null || Pt === void 0 ? void 0 : Pt.trace({ spanName: "Receiving participant's ".concat(Mr, " stream"), span: Nr, attributes: { "peer.id": Ft, "Stream kind": Mr } }), w._consume) { Mn.next = 1; break } return Ae({ errorCode: 403, message: "I do not want to consume", method: "newConsumer" }), (kn = w._openTelemetry) === null || kn === void 0 || kn.completeSpan({ span: en, status: 2, message: "I do not want to consume" }), Mn.abrupt("return"); case 1: return gn = (Yt = w._openTelemetry) === null || Yt === void 0 ? void 0 : Yt.trace({ spanName: "Setting up incoming media stream", span: en }), Mn.prev = 2, Mn.next = 3, w._recvTransport.consume({ id: fr, producerId: nr, kind: Mr, rtpParameters: Sr, appData: Rn(Rn({}, ln), {}, { peerId: Ft }), onRtpReceiver: function (An) { if (w.e2eeManager) { var Wn = An.writableStream, hi = An.readableStream; if (!Wn || !hi) { var ri = An.createEncodedStreams(); An.writableStream = ri.writable, Wn = ri.writable, An.readableStream = ri.readable, hi = ri.readable } } } }); case 3: Ct = Mn.sent, _r = bn.s$(Ct.rtpParameters.encodings[0].scalabilityMode), mr = _r.spatialLayers, qr = _r.temporalLayers, Ct.spatialLayers = mr, Ct.temporalLayers = qr, Ct.currentSpatialLayers = mr - 1, Ct.currentTemporalLayers = qr - 1, w._consumers.set(Ct.id, Ct), Ct.on("transportclose", function () { w._consumers.delete(Ct.id); var cn = Wo(Ct.id, Ft); ze.dispatch(cn), w._eventEmitter.emit(cn.type, cn.payload) }), (Sn = w._openTelemetry) === null || Sn === void 0 || Sn.completeSpan({ span: gn, status: 1, message: "Participant's media stream received successfully." }), gn = (Tn = w._openTelemetry) === null || Tn === void 0 ? void 0 : Tn.trace({ spanName: "Sending Stream Enabled Event", span: en }), xn = zl({ id: Ct.id, type: er, locallyPaused: !1, remotelyPaused: Lr, rtpParameters: Ct.rtpParameters, spatialLayers: mr, temporalLayers: qr, currentSpatialLayer: mr - 1, currentTemporalLayer: qr - 1, preferredSpatialLayer: mr - 1, preferredTemporalLayer: qr - 1, priority: 1, codec: Ct.rtpParameters.codecs[0].mimeType.split("/")[1], track: Ct.track, appData: ln, instance: Ct, rtpReceiver: Ct._rtpReceiver }, Ft), ze.dispatch(xn), w._eventEmitter.emit(xn.type, xn.payload), Ae(), Ct.kind === "video" && ze.getState().me.audioOnly && w._pauseConsumer(Ct), (un = w._openTelemetry) === null || un === void 0 || un.completeSpan({ span: gn, status: 1, message: "Event Sent Successfully" }), (Qr = w._openTelemetry) === null || Qr === void 0 || Qr.completeSpan({ span: en, status: 1, message: "New media stream received successfully", attributes: {} }), w.e2eeManager && w.e2eeManager.emit("NEW_CONSUMER", { consumer: Ct, peerId: w._peerId }), Mn.next = 5; break; case 4: throw Mn.prev = 4, ci = Mn.catch(2), (tn = w._openTelemetry) === null || tn === void 0 || tn.completeSpan({ span: gn, status: 2, message: "Unable to receive participant's media stream: ".concat(ci) }), (In = w._openTelemetry) === null || In === void 0 || In.completeSpan({ span: en, status: 2, message: "Unable to receive participant's media stream: ".concat(ci) }), ze.dispatch(sr({ type: "error", text: "Error receiving participant's media stream: ".concat(ci) })), (ti = w._videosdkLogs) === null || ti === void 0 || ti.pushLogs({ logText: "Error receiving participant's media stream", logType: "ERROR", attributes: { error: ci.message } }), ci; case 5: case "end": return Mn.stop() } }, Ye, null, [[2, 4]]) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("newDataConsumer", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { var Pt, Yt, Ft, nr, fr, Mr, Sr, er, ln; return v().wrap(function (Lr) { for (; ;)switch (Lr.prev = Lr.next) { case 0: if (w._consume) { Lr.next = 1; break } return Ae({ errorCode: 403, message: "I do not want to data consume", method: "newConsumer" }), Lr.abrupt("return"); case 1: return Pt = Le.peerId, Yt = Le.dataProducerId, Ft = Le.id, nr = Le.sctpStreamParameters, fr = Le.label, Mr = Le.protocol, Sr = Le.appData, Lr.prev = 2, Lr.next = 3, w._recvTransport.consumeData({ id: Ft, dataProducerId: Yt, sctpStreamParameters: nr, label: fr, protocol: Mr, appData: Rn(Rn({}, Sr), {}, { peerId: Pt }) }); case 3: er = Lr.sent, w._dataConsumers.set(er.id, er), er.on("transportclose", function () { w._dataConsumers.delete(er.id) }), er.on("open", function () { Re.debug('DataConsumer "open" event') }), er.on("close", function () { Re.warn('DataConsumer "close" event'), w._dataConsumers.delete(er.id), ze.dispatch(sr({ type: "error", text: "DataConsumer closed" })) }), er.on("error", function (Nr) { Re.error('DataConsumer "error" event:%o', Nr), ze.dispatch(sr({ type: "error", text: "DataConsumer error: ".concat(Nr) })) }), er.on("message", function (Nr) { var en; if (Re.debug('DataConsumer "message" event [streamId:%d]', er.sctpStreamParameters.streamId), Nr instanceof ArrayBuffer) { var kn = new Uint8Array(Nr); en = kn } else en = Nr; var gn = ze.getState(), Sn = gn.peers, Tn = Object.keys(Sn).map(function (Qr) { return Sn[Qr] }), un = Tn.find(function (Qr) { return Qr.dataConsumers.includes(er.id) }); switch (er.label) { case "reliable_data_producer": { if (!un) { Re.warn('DataConsumer "message" from unknown peer'); break } ze.dispatch(sr({ title: "".concat(un.displayName, " says:"), text: Nr, timeout: 5e3 })), w._eventEmitter.emit("DATA", { payload: en, from: un.id, timestamp: Date.now(), reliability: xo.y.RELIABLE }); break } case "unreliable_data_producer": { if (!un) { Re.warn('DataConsumer "message" from unknown peer'); break } ze.dispatch(sr({ title: "".concat(un.displayName, " says:"), text: Nr, timeout: 5e3 })), w._eventEmitter.emit("DATA", { payload: en, from: un.id, timestamp: Date.now(), reliability: xo.y.UNRELIABLE }); break } } }), ze.dispatch(Hl({ id: er.id, sctpStreamParameters: er.sctpStreamParameters, label: er.label, protocol: er.protocol }, Pt)), Ae(), Lr.next = 5; break; case 4: Lr.prev = 4, ln = Lr.catch(2), Re.error('"newDataConsumer" request failed:%o', ln), ze.dispatch(sr({ type: "error", text: "Error creating a DataConsumer: ".concat(ln) })); case 5: case "end": return Lr.stop() } }, Ye, null, [[2, 4]]) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("enableMic", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { var Pt, Yt, Ft; return v().wrap(function (nr) { for (; ;)switch (nr.prev = nr.next) { case 0: try { Yt = Le.peerId, (Pt = w._openTelemetry) === null || Pt === void 0 || Pt.traceAutoComplete({ spanName: "Emitting MIC_REQUESTED event. Participant(".concat(Yt, ") requested to enable mic."), status: 1 }), w._eventEmitter.emit("MIC_REQUESTED", { peerId: Yt }), Ae() } catch (fr) { Re.error('"enableMic" request failed:%o', fr), (Ft = w._videosdkLogs) === null || Ft === void 0 || Ft.pushLogs({ logText: "Error enableMic request failed", logType: "ERROR", attributes: { error: fr.message } }), w._emitError({ code: 3027, message: fr.message }) } case 1: case "end": return nr.stop() } }, Ye) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("disableMic", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { var Pt, Yt, Ft, nr, fr, Mr, Sr; return v().wrap(function (er) { for (; ;)switch (er.prev = er.next) { case 0: return Pt = Le.peerId, er.prev = 1, Yt = (Ft = w._openTelemetry) === null || Ft === void 0 ? void 0 : Ft.trace({ spanName: "Disabling Microphone as requested by Participant".concat(Pt) }), er.next = 2, w.disableMic(!1, Yt); case 2: (nr = w._openTelemetry) === null || nr === void 0 || nr.completeSpan({ span: Yt, status: 1, message: "Microphone disabled successfully" }), Ae(), er.next = 4; break; case 3: er.prev = 3, Sr = er.catch(1), (fr = w._openTelemetry) === null || fr === void 0 || fr.completeSpan({ span: Yt, status: 2, message: "Failed to disable microphone :: ".concat(Sr.message) }), (Mr = w._videosdkLogs) === null || Mr === void 0 || Mr.pushLogs({ logText: "Error disableMic request failed", logType: "ERROR", attributes: { error: Sr.message } }), w._emitError({ code: 3028, message: Sr.message }); case 4: case "end": return er.stop() } }, Ye, null, [[1, 3]]) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("enableWebcam", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { var Pt, Yt, Ft; return v().wrap(function (nr) { for (; ;)switch (nr.prev = nr.next) { case 0: try { Yt = Le.peerId, (Pt = w._openTelemetry) === null || Pt === void 0 || Pt.traceAutoComplete({ spanName: "Emitting WEBCAM_REQUESTED event. Participant(".concat(Yt, ") requested to enable webcam."), status: 1 }), w._eventEmitter.emit("WEBCAM_REQUESTED", { peerId: Yt }), Ae() } catch (fr) { Re.error('"enableWebcam" request failed:%o', fr), (Ft = w._videosdkLogs) === null || Ft === void 0 || Ft.pushLogs({ logText: "Error enableWebcam request failed", logType: "ERROR", attributes: { error: fr.message } }), w._emitError({ code: 3029, message: fr.message }) } case 1: case "end": return nr.stop() } }, Ye) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("disableWebcam", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { var Pt, Yt, Ft, nr, fr, Mr, Sr; return v().wrap(function (er) { for (; ;)switch (er.prev = er.next) { case 0: return er.prev = 0, nr = Le.peerId, Pt = (Yt = w._openTelemetry) === null || Yt === void 0 ? void 0 : Yt.trace({ spanName: "Disabling Webcam as requested by Participant".concat(nr) }), er.next = 1, w.disableWebcam(Pt); case 1: (Ft = w._openTelemetry) === null || Ft === void 0 || Ft.completeSpan({ span: Pt, status: 1, message: "Webcam disabled successfully" }), Ae(), er.next = 3; break; case 2: er.prev = 2, Sr = er.catch(0), (fr = w._openTelemetry) === null || fr === void 0 || fr.completeSpan({ span: Pt, status: 2, message: "Failed to disable webcam :: ".concat(Sr.message) }), (Mr = w._videosdkLogs) === null || Mr === void 0 || Mr.pushLogs({ logText: "Error disableWebcam request failed", logType: "ERROR", attributes: { error: Sr.message } }), w._emitError({ code: 3030, message: Sr.message }); case 3: case "end": return er.stop() } }, Ye, null, [[0, 2]]) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("pinStateChanged", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { var Pt, Yt, Ft, nr, fr, Mr, Sr, er, ln, Lr; return v().wrap(function (Nr) { for (; ;)switch (Nr.prev = Nr.next) { case 0: Nr.prev = 0, nr = Le.peerId, fr = Le.state, Mr = Le.pinnedBy, Pt = (Yt = w._openTelemetry) === null || Yt === void 0 ? void 0 : Yt.trace({ spanName: "Pinning Participant(".concat(nr, ") as requested by Participant").concat(Mr), attributes: { requestData: JSON.stringify({ peerId: nr, state: fr, pinnedBy: Mr }) } }), w._pinnedParticipants.has(nr) || w._pinnedParticipants.set(nr, { cam: !1, share: !1 }), Sr = w._pinnedParticipants.get(nr), fr.cam != null && (Sr.cam = fr.cam), fr.share != null && (Sr.share = fr.share), w._pinnedParticipants.set(nr, Sr), w._eventEmitter.emit("PIN_STATE_CHANGED", { peerId: nr, state: fr, pinnedBy: Mr }), Sr.share == !1 && Sr.cam == !1 && w._pinnedParticipants.delete(nr), (Ft = w._openTelemetry) === null || Ft === void 0 || Ft.completeSpan({ span: Pt, status: 1, message: "Participant pinned succesfully", attributes: { _pinnedParticipants: JSON.stringify(w._pinnedParticipants) } }), Ae(), Nr.next = 2; break; case 1: throw Nr.prev = 1, Lr = Nr.catch(0), (er = w._openTelemetry) === null || er === void 0 || er.completeSpan({ span: Pt, status: 2, message: "Failed to pin participant. ".concat(Lr.message) }), (ln = w._videosdkLogs) === null || ln === void 0 || ln.pushLogs({ logText: "Error pinStateChanged request failed", logType: "ERROR", attributes: { error: Lr.message } }), Lr; case 2: case "end": return Nr.stop() } }, Ye, null, [[0, 1]]) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("switchRoom", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { return v().wrap(function (Pt) { for (; ;)switch (Pt.prev = Pt.next) { case 0: w._eventEmitter.emit("SWITCH_ROOM", Le), Ae(); case 1: case "end": return Pt.stop() } }, Ye) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("statsData", function () { var st = (0, u.A)(v().mark(function Ye(Le, Ae) { return v().wrap(function (Pt) { for (; ;)switch (Pt.prev = Pt.next) { case 0: Ae({ peerId: w._peerId, statsData: w._stats }), w._stats = {}; case 1: case "end": return Pt.stop() } }, Ye) })); return function (Ye, Le) { return st.apply(this, arguments) } }()), this._webSocket.on("notification", function () { var st = (0, u.A)(v().mark(function Ye(Le) { var Ae, Pt, Yt, Ft, nr, fr, Mr, Sr, er, ln, Lr, Nr, en, kn, gn, Sn, Tn, un, Qr, Ct, _r, mr, qr, xn, tn, In, ti, ci, Mn, cn, An, Wn, hi, ri, Js, Xs, jn, Hi, qi, xs, Ms, _s, Hn, Gi, Ki, fi, Ii, ji, Zs, Yi, Pn, di, xi, Jt, Jr, rn, Oi, ss, Ya, _i, ea, En, as, Ca, Ra, ws, Ls, Xo, Ns, ni, ta, Mi, Qt, Ur, ii, Bs, mi, _o, mu, ec, Qp, gu, ka, tc, Jp, vu, yu, qc, rc, Xp, wo, nc, Gc, qn, bu, Zp, xu, eh, th, Kc, Yc, _u, rh, nh, rr; return v().wrap(function (At) { for (; ;)switch (At.prev = At.next) { case 0: Ae = Le, Re.debug('proto "notification" event [method:%s, data:%o]', Le.method, Ae), rr = Le.method, At.next = rr === "error" ? 1 : rr === "participantMediaStateChanged" ? 2 : rr === "producerScore" ? 3 : rr === "entryRequested" ? 4 : rr === "entryResponded" ? 5 : rr === "newPeer" ? 9 : rr === "peerClosed" ? 10 : rr === "peerDisplayNameChanged" ? 11 : rr === "consumerClosed" ? 12 : rr === "consumerPaused" ? 14 : rr === "consumerResumed" ? 16 : rr === "consumerLayersChanged" ? 18 : rr === "consumerScore" ? 20 : rr === "dataConsumerClosed" ? 21 : rr === "activeSpeaker" ? 23 : rr === "consumerResumedSubManager" ? 24 : rr === "consumerPausedSubManager" ? 25 : rr === "transcriptionStateChanged" ? 26 : rr === "transcriptionText" ? 27 : rr === "translationStateChanged" ? 28 : rr === "translationText" ? 29 : rr === "translationLanguageChanged" ? 30 : rr === "recordingStateChanged" ? 31 : rr === "recordingStarted" ? 32 : rr === "recordingStopped" ? 33 : rr === "livestreamStateChanged" ? 34 : rr === "livestreamStarted" ? 35 : rr === "livestreamStopped" ? 36 : rr === "hlsStateChanged" ? 37 : rr === "hlsPlayableStateChanged" ? 38 : rr === "hlsStarted" ? 39 : rr === "hlsStopped" ? 40 : rr === "whiteboardStarted" ? 41 : rr === "whiteboardStopped" ? 42 : rr === "addCharacter" ? 43 : rr === "removeCharacter" ? 44 : rr === "characterStateChanged" ? 45 : rr === "characterMessage" ? 46 : rr === "userMessage" ? 47 : rr === "characterData" ? 48 : rr === "characterError" ? 49 : rr === "videoStatusChanged" ? 50 : rr === "videoSeeked" ? 51 : rr === "connectionOpen" ? 52 : rr === "connectionClose" ? 53 : rr === "connectionChatMessage" ? 54 : rr === "connectionParticipantJoined" ? 55 : rr === "connectionParticipantLeft" ? 56 : rr === "pubsubMessage" ? 57 : rr === "realtimeStoreValueChanged" ? 58 : rr === "peerModeChanged" ? 59 : rr === "restartIce" ? 60 : rr === "mediaRelayStarted" ? 61 : rr === "mediaRelayStopped" ? 62 : rr === "mediaRelayError" ? 63 : rr === "mediaRelayRequestResponse" ? 64 : rr === "mediaRelayRequestReceived" ? 65 : 66; break; case 1: return Ft = Ae, w._eventEmitter.emit("ERROR", Ft), (Pt = w._videosdkLogs) === null || Pt === void 0 || Pt.pushLogs({ logText: "Error in Meeting Session", logType: "ERROR", attributes: { error: Ft.message } }), (Yt = w._openTelemetry) === null || Yt === void 0 || Yt.traceAutoComplete({ spanName: "Emitting `ERROR` Event", attributes: { error: Ft.message }, status: 2 }), At.abrupt("continue", 67); case 2: try { nr = Ae.peerId, fr = Ae.kind, Mr = Ae.newState, w._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED", { peerId: nr, kind: fr, newState: Mr }), nr != w._peerId && (er = w._peerSpans.get(nr), (Sr = w._openTelemetry) === null || Sr === void 0 || Sr.traceAutoComplete({ spanName: "Emitting MEDIA_STATUS_CHANGED event. Participant has ".concat(Mr ? "enabled" : "disabled", " ").concat(fr), span: er, status: 1, attributes: { "peer.id": nr, "media.kind": fr, "media.state": Mr } })) } catch (ic) { Re.error('"newProducer" request failed:%o', ic), (ln = w._videosdkLogs) === null || ln === void 0 || ln.pushLogs({ logText: "Error newProducer request failed", logType: "ERROR", attributes: { error: ic.message } }) } case 3: return Lr = Ae.producerId, Nr = Ae.score, ze.dispatch(jc(Lr, Nr)), At.abrupt("continue", 67); case 4: return kn = Ae.id, gn = Ae.name, Sn = (en = w._openTelemetry) === null || en === void 0 ? void 0 : en.trace({ spanName: "Entry Request from ".concat(gn), span: w._joinSpan, attributes: { data: JSON.stringify({ id: kn, name: gn }) } }), kn !== w._peerId ? (w._eventEmitter.emit("ENTRY_REQUESTED", { id: kn, name: gn }), (Tn = w._openTelemetry) === null || Tn === void 0 || Tn.completeSpan({ span: Sn, status: 1, message: "ENTRY_REQUESTED event send succeessfully" })) : (un = w._openTelemetry) === null || un === void 0 || un.completeSpan({ span: Sn, status: 2, message: "Failed to send ENTRY_REQUESTED event" }), At.abrupt("continue", 67); case 5: if (Ct = Ae.id, _r = Ae.decision, mr = Ae.sessionId, qr = Ae.switchingRoomId, xn = (Qr = w._openTelemetry) === null || Qr === void 0 ? void 0 : Qr.trace({ spanName: "Entry responded", span: w._requestEntrySpan, attributes: { "peer.id": Ct, "entry.decision": _r, switching_room: !!qr } }), w._eventEmitter.emit("ENTRY_RESPONDED", { id: Ct, decision: _r }), !(Ct === w._peerId && _r === "allowed")) { At.next = 7; break } if (!qr) { At.next = 6; break } return (ti = w._openTelemetry) === null || ti === void 0 || ti.completeSpan({ span: xn, status: 1, message: "Switching room initiated" }), (ci = w._openTelemetry) === null || ci === void 0 || ci.completeSpan({ span: w._requestEntrySpan, status: 1 }), w.softClose(), w.switchingRoom(qr), At.abrupt("continue", 67); case 6: w._videosdkLogs = new Bc({ roomId: w._roomId, peerId: w._peerId, logs: ne, observabilityJwt: me, deviceInfo: w._deviceInfo, sessionId: mr, debugMode: w._debugMode }), w._openTelemetry.setSessionId(mr), w.joinRoom(), (tn = w._openTelemetry) === null || tn === void 0 || tn.completeSpan({ span: xn, status: 1, message: "Entry Responded Recieved" }), (In = w._openTelemetry) === null || In === void 0 || In.completeSpan({ span: w._requestEntrySpan, status: 1 }), At.next = 8; break; case 7: (Mn = w._openTelemetry) === null || Mn === void 0 || Mn.completeSpan({ span: w._joinSpan, status: 2, message: "Join Request Denied" }), (cn = w._openTelemetry) === null || cn === void 0 || cn.completeSpan({ span: w._requestEntrySpan, status: 2 }); case 8: return At.abrupt("continue", 67); case 9: An = Ae, Wn = Ga(Rn(Rn({}, An), {}, { consumers: [], dataConsumers: [] })), ze.dispatch(Wn), w._eventEmitter.emit(Wn.type, Wn.payload), ze.dispatch(sr({ text: "".concat(An.displayName, " has joined the room") })); try { ri = (hi = w._openTelemetry) === null || hi === void 0 ? void 0 : hi.trace({ spanName: "Participant '".concat(An.displayName, "' joined the room"), attributes: { peerData: JSON.stringify(An), "peer.id": An.id, "peer.displayName": An.displayName } }), ri && (w._peerSpans.set(An.id, ri), (Js = w._openTelemetry) === null || Js === void 0 || Js.completeSpan({ span: ri })) } catch (ic) { (Xs = w._videosdkLogs) === null || Xs === void 0 || Xs.pushLogs({ logText: "Error Websocket Noti: newPeer", logType: "ERROR", attributes: { error: ic.message } }), console.error(ic) } return At.abrupt("continue", 67); case 10: return Hi = Ae.peerId, qi = Ae.reason, xs = Vo(Hi, qi), ze.dispatch(xs), w._eventEmitter.emit(xs.type, xs.payload), (jn = w._openTelemetry) === null || jn === void 0 || jn.traceAutoComplete({ span: w._peerSpans.get(Hi), status: 1, spanName: "Peer ".concat(Hi, " closed. Reason: ").concat(qi.message, " (Code: ").concat(qi.code, ")") }), At.abrupt("continue", 67); case 11: return Ms = Ae.peerId, _s = Ae.displayName, Hn = Ae.oldDisplayName, ze.dispatch(Fl(_s, Ms)), ze.dispatch(sr({ text: "".concat(Hn, " is now ").concat(_s) })), At.abrupt("continue", 67); case 12: if (Ki = Ae.consumerId, fi = w._consumers.get(Ki), fi) { At.next = 13; break } return At.abrupt("continue", 67); case 13: return fi.close(), w._consumers.delete(Ki), Ii = fi.appData.peerId, ji = Wo(Ki, Ii), w._eventEmitter.emit("STREAM_STATE_CHANGED", { state: "ended", peerId: Ii, streamId: fi._track.id }), ze.dispatch(ji), w._eventEmitter.emit(ji.type, ji.payload), Zs = w._peerSpans.get(Ii), (Gi = w._openTelemetry) === null || Gi === void 0 || Gi.traceAutoComplete({ spanName: "Participant stream ended", span: Zs, attributes: { "peer.id": Ii, "Stream kind": fi.kind } }), At.abrupt("continue", 67); case 14: if (Pn = Ae.consumerId, di = w._consumers.get(Pn), di) { At.next = 15; break } return At.abrupt("continue", 67); case 15: return di.pause(), ze.dispatch(Os(Pn, "remote")), w._eventEmitter.emit("CONSUMER_PAUSED", { consumerId: Pn, peerId: di.appData.peerId }), xi = w._peerSpans.get(di.appData.peerId), (Yi = w._openTelemetry) === null || Yi === void 0 || Yi.traceAutoComplete({ spanName: "Participant stream paused", span: xi, attributes: { "peer.id": di.appData.peerId, "Stream kind": di.kind } }), At.abrupt("continue", 67); case 16: if (Jr = Ae.consumerId, rn = w._consumers.get(Jr), w._eventEmitter.emit("STREAM_STATE_CHANGED", { state: "active", peerId: rn.appData.peerId, streamId: rn._track.id }), rn) { At.next = 17; break } return At.abrupt("continue", 67); case 17: return rn.resume(), ze.dispatch(Ho(Jr, "remote")), w._eventEmitter.emit("CONSUMER_RESUMED", { consumerId: Jr, peerId: rn.appData.peerId }), Oi = w._peerSpans.get(rn.appData.peerId), (Jt = w._openTelemetry) === null || Jt === void 0 || Jt.traceAutoComplete({ spanName: "Participant stream resumed", span: Oi, attributes: { "peer.id": rn.appData.peerId, "Stream kind": rn.kind } }), At.abrupt("continue", 67); case 18: if (Ya = Ae.consumerId, _i = Ae.spatialLayer, ea = Ae.temporalLayer, En = w._consumers.get(Ya), En.currentSpatialLayer = _i, En.currentTemporalLayer = ea, En) { At.next = 19; break } return At.abrupt("continue", 67); case 19: return ((ss = En.appData) === null || ss === void 0 || (ss = ss.encodings) === null || ss === void 0 ? void 0 : ss.length) > 1 && (w._eventEmitter.emit("VIDEO_QUALITY_CHANGED", { peerId: En.appData.peerId, prevQuality: En.spatialLayers - 1 - En.currentSpatialLayer == 0 ? "HIGH" : En.spatialLayers - 1 - En.currentSpatialLayer == 1 ? "MEDIUM" : "LOW", currentQuality: En.spatialLayers - 1 - _i == 0 ? "HIGH" : En.spatialLayers - 1 - _i == 1 ? "MEDIUM" : "LOW" }), (as = w._videosdkLogs) === null || as === void 0 || as.pushLogs({ logText: "Consumer Peer ".concat(En.appData.peerId, " changed to ").concat(En.spatialLayers - 1 - _i == 0 ? "HIGH" : En.spatialLayers - 1 - _i == 1 ? "MEDIUM" : "LOW", ", previous quality was ").concat(En.spatialLayers - 1 - En.currentSpatialLayer == 0 ? "HIGH" : En.spatialLayers - 1 - En.currentSpatialLayer == 1 ? "MEDIUM" : "LOW"), logType: "INFO", attributes: { spatialLayer: _i, temporalLayer: ea, consumerId: Ya } })), En.currentSpatialLayer = _i, En.currentTemporalLayer = ea, ze.dispatch($l(Ya, _i, ea)), w._peerSpans.get(En.appData.peerId), At.abrupt("continue", 67); case 20: return Ca = Ae.consumerId, Ra = Ae.score, ze.dispatch(Wl(Ca, Ra)), At.abrupt("continue", 67); case 21: if (ws = Ae.dataConsumerId, Ls = w._dataConsumers.get(ws), Ls) { At.next = 22; break } return At.abrupt("continue", 67); case 22: return Ls.close(), w._dataConsumers.delete(ws), Xo = Ls.appData.peerId, ze.dispatch(ql(ws, Xo)), At.abrupt("continue", 67); case 23: return Ns = Ae.peerId, ni = Ll(Ns), ze.dispatch(ni), w._eventEmitter.emit(ni.type, ni.payload), At.abrupt("continue", 67); case 24: return w._eventEmitter.emit("SUB_MANAGER_RESUMED", Ae), At.abrupt("continue", 67); case 25: return w._eventEmitter.emit("SUB_MANAGER_PAUSED", Ae), At.abrupt("continue", 67); case 26: return w._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED", Ae), (ta = w._openTelemetry) === null || ta === void 0 || ta.traceAutoComplete({ spanName: "Live transcription status changed to ".concat(Ae.status.toLowerCase()), status: 1, attributes: { eventPayload: JSON.stringify(Ae) } }), At.abrupt("continue", 67); case 27: return w._eventEmitter.emit("TRANSCRIPTION_TEXT", Ae), At.abrupt("continue", 67); case 28: return w._eventEmitter.emit("TRANSLATION_STATE_CHANGED", Ae), (Mi = w._openTelemetry) === null || Mi === void 0 || Mi.traceAutoComplete({ spanName: "Translation State Changed to : ".concat(Ae.status), status: 1, attributes: { eventPayload: JSON.stringify(Ae) } }), At.abrupt("continue", 67); case 29: return w._translationLanguage == Ae.language && w._eventEmitter.emit("TRANSLATION_TEXT", Ae), At.abrupt("continue", 67); case 30: return w._eventEmitter.emit("TRANSLATION_LANGUAGE_CHANGED", Ae), w._peerId == Ae.peerId && (w._translationLanguage = Ae.language), At.abrupt("continue", 67); case 31: return w._eventEmitter.emit("RECORDING_STATE_CHANGED", Ae), (Qt = w._openTelemetry) === null || Qt === void 0 || Qt.traceAutoComplete({ spanName: "Recording State Changed to `".concat(Ae.status.toUpperCase(), "`"), status: 1, attributes: { eventPayload: JSON.stringify(Ae) } }), At.abrupt("continue", 67); case 32: return w._eventEmitter.emit("RECORDING_STARTED", {}), At.abrupt("continue", 67); case 33: return w._eventEmitter.emit("RECORDING_STOPPED", {}), At.abrupt("continue", 67); case 34: return w._eventEmitter.emit("LIVESTREAM_STATE_CHANGED", Ae), (Ur = w._openTelemetry) === null || Ur === void 0 || Ur.traceAutoComplete({ spanName: "Meeting live stream state changed to ".concat(Ae.status.toLowerCase()), attributes: { eventPayload: JSON.stringify(Ae) }, status: 1 }), At.abrupt("continue", 67); case 35: return w._eventEmitter.emit("LIVESTREAM_STARTED", {}), At.abrupt("continue", 67); case 36: return w._eventEmitter.emit("LIVESTREAM_STOPPED", {}), At.abrupt("continue", 67); case 37: return w._eventEmitter.emit("HLS_STATE_CHANGED", Ae), (ii = w._openTelemetry) === null || ii === void 0 || ii.traceAutoComplete({ spanName: "HLS streaming status changed to ".concat(Ae.status.toLowerCase()), attributes: { eventPayload: JSON.stringify(Ae) } }), At.abrupt("continue", 67); case 38: return Ae.isPlayable && (w._eventEmitter.emit("HLS_STATE_CHANGED", Rn(Rn({}, Ae), {}, { status: iu.V.HLS_PLAYABLE })), (Bs = w._openTelemetry) === null || Bs === void 0 || Bs.traceAutoComplete({ spanName: "HLS stream is now playable", status: 1 })), At.abrupt("continue", 67); case 39: return mi = Ae.downstreamUrl, w._eventEmitter.emit("HLS_STARTED", mi), At.abrupt("continue", 67); case 40: return w._eventEmitter.emit("HLS_STOPPED", {}), At.abrupt("continue", 67); case 41: return _o = Ae.state, mu = Ae.url, _o ? w._eventEmitter.emit("WHITEBOARD_STARTED", { state: _o }) : mu && w._eventEmitter.emit("WHITEBOARD_STARTED", { url: mu }), At.abrupt("continue", 67); case 42: return w._eventEmitter.emit("WHITEBOARD_STOPPED", {}), At.abrupt("continue", 67); case 43: return Qp = Ae, gu = Ga(Rn(Rn({}, Qp), {}, { consumers: [], dataConsumers: [] })), ze.dispatch(gu), w._eventEmitter.emit("ADD_CHARACTER", Ae), (ec = w._openTelemetry) === null || ec === void 0 || ec.traceAutoComplete({ spanName: "Emitted ADD_CHARACTER : ".concat(Ae), attributes: { data: JSON.stringify(Ae) }, status: 1 }), At.abrupt("continue", 67); case 44: return tc = Ae.id, Jp = Vo(tc), ze.dispatch(Jp), w._eventEmitter.emit("REMOVE_CHARACTER", Ae), (ka = w._openTelemetry) === null || ka === void 0 || ka.traceAutoComplete({ spanName: "Emitted REMOVE_CHARACTER : ".concat(Ae), attributes: { data: JSON.stringify(Ae) }, status: 1 }), At.abrupt("continue", 67); case 45: return w._eventEmitter.emit("CHARACTER_STATE_CHANGED", Ae), (vu = w._openTelemetry) === null || vu === void 0 || vu.traceAutoComplete({ spanName: "Emitted CHARACTER_STATE_CHANGED, status : ".concat(Ae.status), attributes: { data: JSON.stringify(Ae) }, status: 1 }), At.abrupt("continue", 67); case 46: return w._eventEmitter.emit("CHARACTER_MESSAGE", Ae), At.abrupt("continue", 67); case 47: return w._eventEmitter.emit("USER_MESSAGE", Ae), At.abrupt("continue", 67); case 48: return w._eventEmitter.emit("CHARACTER_DATA", Ae), At.abrupt("continue", 67); case 49: return w._eventEmitter.emit("CHARACTER_ERROR", Ae), At.abrupt("continue", 67); case 50: return w._eventEmitter.emit("VIDEO_STATE_CHANGED", Ae), At.abrupt("continue", 67); case 51: return yu = Ae.currentTime, w._eventEmitter.emit("VIDEO_SEEKED", { currentTime: yu }), At.abrupt("continue", 67); case 52: return w._eventEmitter.emit("CONNECTION_OPEN", Ae), At.abrupt("continue", 67); case 53: return w._eventEmitter.emit("CONNECTION_CLOSE", Ae), At.abrupt("continue", 67); case 54: return w._eventEmitter.emit("CONNECTION_CHAT_MESSAGE", Ae), At.abrupt("continue", 67); case 55: return w._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN", Ae), At.abrupt("continue", 67); case 56: return w._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT", Ae), At.abrupt("continue", 67); case 57: return w._eventEmitter.emit("PUBSUB_MESSAGE", Ae), At.abrupt("continue", 67); case 58: return w._eventEmitter.emit("REALTIMESTORE_VALUE_CHANGED", Ae), At.abrupt("continue", 67); case 59: return rc = Ae.peerId, Xp = Ae.mode, w._eventEmitter.emit("PEER_MODE_CHANGED", Ae), (qc = w._openTelemetry) === null || qc === void 0 || qc.traceAutoComplete({ span: w._peerSpans.get(rc), status: 1, spanName: "Participant changed their mode to ".concat(Xp, " ") }), At.abrupt("continue", 67); case 60: return nc = Ae.transportId, Gc = Ae.iceParameters, (wo = w._videosdkLogs) === null || wo === void 0 || wo.pushLogs({ logText: "Websocket Noti: restartIce for transportId :".concat(nc), logType: "INFO" }), w.handleRemoteRestartIce({ transportId: nc, iceParameters: Gc, internalSpan }), At.abrupt("continue", 67); case 61: return qn = Le.meetingId, w._eventEmitter.emit("MEDIA_RELAY_STARTED", { meetingId: qn }), At.abrupt("continue", 67); case 62: return bu = Le.meetingId, Zp = Le.reason, w._eventEmitter.emit("MEDIA_RELAY_STOPPED", { meetingId: bu, reason: Zp }), At.abrupt("continue", 67); case 63: return xu = Le.meetingId, eh = Le.reason, w._eventEmitter.emit("MEDIA_RELAY_ERROR", { meetingId: xu, reason: eh }), At.abrupt("continue", 67); case 64: return th = Le.decision, Kc = Le.decidedBy, Yc = Le.meetingId, w._eventEmitter.emit("MEDIA_RELAY_REQUEST_RESPONSE", { decision: th, decidedBy: Kc, meetingId: Yc }), At.abrupt("continue", 67); case 65: return _u = Le.peerId, rh = Le.meetingId, nh = Le.displayName, w._eventEmitter.emit("MEDIA_RELAY_REQUEST_RECEIVED", { peerId: _u, meetingId: rh, displayName: nh }), At.abrupt("continue", 67); case 66: Re.error('unknown Websocket notification.method "%s"', Le.method); case 67: case "end": return At.stop() } }, Ye) })); return function (Ye) { return st.apply(this, arguments) } }()), qt.next = 8; break; case 7: qt.prev = 7, lr = qt.catch(0), (bt = this._videosdkLogs) === null || bt === void 0 || bt.pushLogs({ logText: "Error initializing the meeting :: ".concat(lr), logType: "ERROR", attributes: { error: lr } }), this.emitMeetingStateChange(Hr.FAILED); case 8: case "end": return qt.stop() } }, T, this, [[0, 7], [2, 5]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "requestEntry", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: return this._requestEntrySpan = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting Entry", span: this._joinSpan }), $.prev = 1, $.next = 2, this._socketRequest("requestEntry", { name: this._displayName }); case 2: $.next = 4; break; case 3: $.prev = 3, O = $.catch(1), this._openTelemetry.completeSpan({ span: this._requestEntrySpan, message: "Failed to send entry request. Error: ".concat(O.message) }); case 4: case "end": return $.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "respondEntry", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return ne.prev = 0, $ = (z = this._openTelemetry) === null || z === void 0 ? void 0 : z.trace({ spanName: "Responding Entry for ".concat(w), attributes: { peerId: w, decision: O }, span: this._joinSpan }), ne.next = 1, this._socketRequest("respondEntry", { id: w, decision: O }); case 1: (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ message: "Entry Responded Successfully", span: $, status: 1 }), ne.next = 3; break; case 2: ne.prev = 2, re = ne.catch(0), (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ message: "Failed to respond entry for ".concat(w), span: $, status: 1, attributes: { error: re.message } }); case 3: case "end": return ne.stop() } }, T, this, [[0, 2]]) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "startTranscription", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("startTranscription()"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to start meeting transcription", attributes: { config: w ? JSON.stringify(w) : "Transcription configuration not specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("startTranscription", { config: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Meeting transcription start request sent successfully" }), ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), Re.error("startTranscription() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send meeting transcription start request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error startTranscription() failed", logType: "ERROR", attributes: { error: re.message } }), this._emitError({ code: 4031, message: re.message }); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "stopTranscription", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return Re.debug("stopTranscription()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to stop meeting transcription" }), re.prev = 1, re.next = 2, this._socketRequest("stopTranscription", {}); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "Meeting transcription stop request sent successfully" }), re.next = 4; break; case 3: re.prev = 3, te = re.catch(1), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: O, status: 2, message: "Failed to send meeting transcription stop request. Error: ".concat(te.message) }), (G = this._videosdkLogs) === null || G === void 0 || G.pushLogs({ logText: "Error stopTranscription() failed", logType: "ERROR", attributes: { error: te.message } }), this._emitError({ code: 4032, message: te.message }); case 4: case "end": return re.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "startTranslation", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("startTranslation() called"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to start meeting translation", attributes: { config: w ? JSON.stringify(w) : "Translation configuration not specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("startTranslation", { config: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Meeting translation start request sent successfully" }), ne.next = 4; break; case 3: throw ne.prev = 3, re = ne.catch(1), Re.error("startTranslation() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send meeting translation start request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error startTranslation() failed", logType: "ERROR", attributes: { error: re.message } }), this._emitError({ code: 4042, message: re.message }), re; case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "changeTranslationLanguage", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("changeTranslationLanguage() called"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to change translation language", attributes: { language: w ?? "Language Not Specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("changeTranslationLanguage", { language: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Translation language change request sent successfully" }), ne.next = 4; break; case 3: throw ne.prev = 3, re = ne.catch(1), Re.error("changeTranslationLanguage() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send translation language change request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error changeTranslationLanguage() failed", logType: "ERROR", attributes: { error: re.message } }), this._emitError({ code: 4043, message: re.message }), re; case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "stopTranslation", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return Re.debug("stopTranslation() called"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to stop meeting translation" }), re.prev = 1, re.next = 2, this._socketRequest("stopTranslation", {}); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "Meeting translation stop request sent successfully" }), re.next = 4; break; case 3: throw re.prev = 3, te = re.catch(1), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: O, status: 2, message: "Failed to send meeting translation stop request. Error: ".concat(te.message) }), (G = this._videosdkLogs) === null || G === void 0 || G.pushLogs({ logText: "Error stopTranslation() failed", logType: "ERROR", attributes: { error: te.message } }), this._emitError({ code: 4044, message: te.message }), te; case 4: case "end": return re.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "pauseAllConsumers", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me; return v().wrap(function (je) { for (; ;)switch (je.prev = je.next) { case 0: return $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to pause all media streams", attributes: { kind: w || "Stream kind not specified" } }), je.prev = 1, je.next = 2, this._socketRequest("pauseAllConsumers", { kind: w === void 0 ? "all" : w }); case 2: if (te = je.sent, re = !1, !((te == null || (z = te.consumersWithIssues) === null || z === void 0 ? void 0 : z.length) > 0)) { je.next = 6; break } return je.next = 3, this._socketRequest("pauseAllConsumers", { kind: w === void 0 ? "all" : w }); case 3: if (me = je.sent, (me == null || (ne = me.consumersWithIssues) === null || ne === void 0 ? void 0 : ne.length) !== 0) { je.next = 4; break } re = !0, je.next = 5; break; case 4: return (Te = this._openTelemetry) === null || Te === void 0 || Te.completeSpan({ span: $, status: 1, message: "Failed to pause all media streams" }), je.abrupt("return"); case 5: je.next = 7; break; case 6: re = !0; case 7: re && ((ke = this._openTelemetry) === null || ke === void 0 || ke.traceAutoComplete({ spanName: "Emitting paused-all-streams event", span: $, status: 1 }), this._eventEmitter.emit("ALL_CONSUMERS_PAUSED", { kind: w })), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 1, message: "All media streams ".concat(w && "of ".concat(w), " paused successfully") }), je.next = 9; break; case 8: je.prev = 8, Me = je.catch(1), Re.error("pauseAllConsumers() | failed:%o", Me), (Be = this._openTelemetry) === null || Be === void 0 || Be.completeSpan({ span: $, status: 2, message: "Failed to pause all media streams. Error : ".concat(Me.message) }), (Qe = this._videosdkLogs) === null || Qe === void 0 || Qe.pushLogs({ logText: "Error pauseAllConsumers() failed", logType: "ERROR", attributes: { error: Me.message } }); case 9: case "end": return je.stop() } }, T, this, [[1, 8]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "resumeAllConsumers", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me; return v().wrap(function (je) { for (; ;)switch (je.prev = je.next) { case 0: return z = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to resume all media streams", attributes: { kind: w || "Stream kind not specified" } }), je.prev = 1, je.next = 2, this._socketRequest("resumeAllConsumers", { kind: w === void 0 ? "all" : w }); case 2: if (te = je.sent, re = !1, !((te == null || (G = te.consumersWithIssues) === null || G === void 0 ? void 0 : G.length) > 0)) { je.next = 6; break } return je.next = 3, this._socketRequest("resumeAllConsumers", { kind: w === void 0 ? "all" : w }); case 3: if (me = je.sent, (me == null || (ne = me.consumersWithIssues) === null || ne === void 0 ? void 0 : ne.length) !== 0) { je.next = 4; break } re = !0, je.next = 5; break; case 4: return (Te = this._openTelemetry) === null || Te === void 0 || Te.completeSpan({ span: z, status: 1, message: "Failed to resume all media streams" }), je.abrupt("return"); case 5: je.next = 7; break; case 6: re = !0; case 7: re && ((ke = this._openTelemetry) === null || ke === void 0 || ke.traceAutoComplete({ spanName: "Emitting resumed-all-streams event", span: z, status: 1 }), this._eventEmitter.emit("ALL_CONSUMERS_RESUMED", { kind: w })), je.next = 9; break; case 8: je.prev = 8, Me = je.catch(1), Re.error("resumeAllConsumers() | failed:%o", Me), (Be = this._openTelemetry) === null || Be === void 0 || Be.completeSpan({ span: z, status: 2, message: "Failed to resume all media streams. Error : ".concat(Me.message) }), (Qe = this._videosdkLogs) === null || Qe === void 0 || Qe.pushLogs({ logText: "Error resumeAllConsumers() failed", logType: "ERROR", attributes: { error: Me.message } }); case 9: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: z, status: 1, message: "All media streams resumed successfully" }); case 10: case "end": return je.stop() } }, T, this, [[1, 8]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "startRecording", value: function () { var m = (0, u.A)(v().mark(function T(w, O, $, z) { var G, te, re, ne, me, Te; return v().wrap(function (ke) { for (; ;)switch (ke.prev = ke.next) { case 0: return Re.debug("startRecording()"), te = (G = this._openTelemetry) === null || G === void 0 ? void 0 : G.trace({ spanName: "Requesting to start meeting recording", attributes: { webhookUrl: w || "Webhook URL not specified", awsDirPath: O || "AWS directory path not specified", config: $ ? JSON.stringify($) : "Recording configuration not specified", transcription: z ? JSON.stringify(z) : "Transcription configuration not specified" } }), ke.prev = 1, ke.next = 2, this._socketRequest("startRecording", { webhookUrl: w, awsDirPath: O, config: $, transcription: z }); case 2: (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: te, status: 1, message: "Meeting recording start request sent successfully" }), ke.next = 4; break; case 3: ke.prev = 3, Te = ke.catch(1), Re.error("startRecording() | failed: %o", Te), (ne = this._openTelemetry) === null || ne === void 0 || ne.completeSpan({ span: te, status: 2, message: "Failed to send meeting recording start request. Error: ".concat(Te.message) }), (me = this._videosdkLogs) === null || me === void 0 || me.pushLogs({ logText: "Error in startRecording()", logType: "ERROR", attributes: { error: Te.message }, dashboardLog: !0 }), this._emitError({ code: 4011, message: Te.message }); case 4: case "end": return ke.stop() } }, T, this, [[1, 3]]) })); function C(T, w, O, $) { return m.apply(this, arguments) } return C }() }, { key: "stopRecording", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: if (!this._closed) { re.next = 1; break } return re.abrupt("return"); case 1: return Re.debug("stopRecording()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to stop meeting recording" }), re.prev = 2, re.next = 3, this._socketRequest("stopRecording", {}); case 3: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "Meeting recording stop request sent successfully" }), re.next = 5; break; case 4: re.prev = 4, te = re.catch(2), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: O, status: 2, message: "Failed to send meeting recording stop request. Error: ".concat(te.message) }), (G = this._videosdkLogs) === null || G === void 0 || G.pushLogs({ logText: "Error stopRecording() failed", logType: "ERROR", attributes: { error: te.message } }), this._emitError({ code: 4012, message: te.message }); case 5: case "end": return re.stop() } }, T, this, [[2, 4]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "startLivestream", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z, G, te, re, ne; return v().wrap(function (me) { for (; ;)switch (me.prev = me.next) { case 0: return Re.debug("startLivestream()"), z = ($ = this._openTelemetry) === null || $ === void 0 ? void 0 : $.trace({ spanName: "Requesting to start RTMP livestreaming", attributes: { outputs: w ? JSON.stringify(w) : "Outputs not specified", config: O ? JSON.stringify(O) : "Livestream config not specified" } }), me.prev = 1, me.next = 2, this._socketRequest("startLivestream", { outputs: w, config: O }); case 2: (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: z, status: 1, message: "RTMP Live streaming start request sent successfully" }), me.next = 4; break; case 3: me.prev = 3, ne = me.catch(1), (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ span: z, status: 2, message: "Failed to send RTMP live streaming start request. Error: ".concat(ne.message) }), (re = this._videosdkLogs) === null || re === void 0 || re.pushLogs({ logText: "Error startLivestream() failed", logType: "ERROR", attributes: { error: ne.message } }), this._emitError({ code: 4013, message: ne.message }); case 4: case "end": return me.stop() } }, T, this, [[1, 3]]) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "stopLivestream", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return Re.debug("stopLivestream()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to stop RTMP livestreaming" }), re.prev = 1, re.next = 2, this._socketRequest("stopLivestream", {}); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "RTMP Live streaming stop request sent successfully" }), re.next = 4; break; case 3: re.prev = 3, te = re.catch(1), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: "Error stopLivestream() failed", logType: "ERROR", attributes: { error: te.message } }), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: O, status: 2, message: "Failed to send RTMP live streaming stop request. Error : ".concat(te.message) }), this._emitError({ code: 4014, message: te.message }); case 4: case "end": return re.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "startHls", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z, G, te, re, ne; return v().wrap(function (me) { for (; ;)switch (me.prev = me.next) { case 0: return w = w || {}, O = O || {}, Re.debug("startHls()"), z = ($ = this._openTelemetry) === null || $ === void 0 ? void 0 : $.trace({ spanName: "Requesting to start HLS streaming", attributes: { config: w ? JSON.stringify(w) : "HLS configuration not specified", transcription: O ? JSON.stringify(O) : "Transcription configuration not specified" } }), me.prev = 1, me.next = 2, this._socketRequest("startHls", { config: w, transcription: O }); case 2: (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: z, status: 1, message: "HLS streaming start request sent successfully" }), me.next = 4; break; case 3: me.prev = 3, ne = me.catch(1), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error startHls() failed", logType: "ERROR", attributes: { error: ne.message } }), (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: z, status: 2, message: "Failed to send HLS streaming start request. Error : ".concat(ne.message) }), this._emitError({ code: 4016, message: ne.message }), Re.error("startHls() | failed:%o", ne); case 4: case "end": return me.stop() } }, T, this, [[1, 3]]) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "stopHls", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return Re.debug("stopHls()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to stop HLS streaming" }), re.prev = 1, re.next = 2, this._socketRequest("stopHls", {}); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "HLS streaming stop request sent successfully" }), re.next = 4; break; case 3: re.prev = 3, te = re.catch(1), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: "Error stopHls() failed", logType: "ERROR", attributes: { error: te.message } }), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: O, status: 2, message: "Failed to send HLS streaming stop request. Error ".concat(te.message) }), this._emitError({ code: 4017, message: te.message }); case 4: case "end": return re.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "startWhiteboard", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: return Re.debug("startWhiteboard()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to start whiteboard" }), te.prev = 1, te.next = 2, this._socketRequest("startWhiteboard", { version: "v2" }); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "Whiteboard start request sent successfully" }), te.next = 4; break; case 3: te.prev = 3, G = te.catch(1), Re.error("startWhiteboard() | failed:%o", G), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: O, status: 2, message: "Failed to send whiteboard start request. Error: ".concat(G.message) }), this._emitError({ code: 3021, message: G.message }); case 4: case "end": return te.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "stopWhiteboard", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: return Re.debug("stopWhiteboard()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to stop whiteboard" }), te.prev = 1, te.next = 2, this._socketRequest("stopWhiteboard", {}); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "Whiteboard stop request sent successfully" }), te.next = 4; break; case 3: te.prev = 3, G = te.catch(1), Re.error("stopWhiteboard() | failed:%o", G), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: O, status: 2, message: "Failed to send whiteboard stop request. Error: ".concat(G.message) }), this._emitError({ code: 3022, message: G.message }); case 4: case "end": return te.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "joinCharacter", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("joinCharacter()"), z = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "joinCharacter() Start", attributes: { config: w ? JSON.stringify(w) : "config Not Specify" } }), ne.prev = 1, ne.next = 2, this._socketRequest("joinCharacter", { config: w }); case 2: return ne.abrupt("return", ne.sent); case 3: return ne.prev = 3, re = ne.catch(1), Re.error("joinCharacter() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: z, status: 2, message: "joinCharacter() failed" }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error joinCharacter() failed", logType: "ERROR", attributes: { error: re.message } }), this._emitError({ code: 4033, message: re.message }), ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: z, status: 1, message: "joinCharacter() End" }), ne.abrupt("return", !1); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "removeCharacter", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("removeCharacter()"), z = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "removeCharacter() Start" }), ne.prev = 1, ne.next = 2, this._socketRequest("leaveCharacter", { config: w }); case 2: ne.next = 4; break; case 3: return ne.prev = 3, re = ne.catch(1), Re.error("removeCharacter() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: z, status: 2, message: "removeCharacter() failed" }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error removeCharacter() failed", logType: "ERROR", attributes: { error: re.message } }), this._emitError({ code: 4034, message: re.message }), ne.abrupt("return", !1); case 4: return ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: z, status: 1, message: "removeCharacter() End" }), ne.abrupt("return", !0); case 5: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "sendCharacterMessage", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return O = w.interactionId, $ = w.text, Re.debug("sendCharacterMessage()"), G.prev = 1, G.next = 2, this._socketRequest("sendCharacterMessage", { interactionId: O, text: $ }); case 2: G.next = 4; break; case 3: G.prev = 3, z = G.catch(1), Re.error("sendCharacterMessage() | failed:%o", z), this._emitError({ code: 4035, message: z.message }); case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "interruptCharacter", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: return O = w.interactionId, Re.debug("interruptCharacter()"), z.prev = 1, z.next = 2, this._socketRequest("interruptCharacter", { interactionId: O }); case 2: z.next = 4; break; case 3: z.prev = 3, $ = z.catch(1), Re.error("interruptCharacter() | failed:%o", $), this._emitError({ code: 4036, message: $.message }); case 4: case "end": return z.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "switchTo", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te; return v().wrap(function (ke) { for (; ;)switch (ke.prev = ke.next) { case 0: return $ = w.meetingId, z = w.participantId, G = w.token, te = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to switch meeting", attributes: { "peer.id": z || "Participant ID not specified", meetingId: $ || "Meeting ID not specified" } }), ke.prev = 1, ke.next = 2, this._socketRequest("switchToMeeting", { meetingId: $, participantId: z, secret: G || this._secret }); case 2: (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: te, status: 1, message: "Meeting switch request sent successfully" }), ke.next = 4; break; case 3: ke.prev = 3, Te = ke.catch(1), (ne = this._openTelemetry) === null || ne === void 0 || ne.completeSpan({ span: te, status: 2, message: "Failed to send meeting switch request. Error: ".concat(Te.message) }), (me = this._videosdkLogs) === null || me === void 0 || me.pushLogs({ logText: "Error in switchTo()", logType: "ERROR", attributes: { error: Te.message }, dashboardLog: !0 }); case 4: case "end": return ke.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "pinStateChange", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me; return v().wrap(function (Te) { for (; ;)switch (Te.prev = Te.next) { case 0: return $ = w.peerId, z = w.state, G = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to change pin state", attributes: { state: z ? JSON.stringify(z) : "State not specified" } }), Te.prev = 1, Te.next = 2, this._socketRequest("pinStateChanged", { peerId: $, state: z }); case 2: (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ span: G, status: 1, message: "Pin state change request sent successfully" }), Te.next = 4; break; case 3: Te.prev = 3, me = Te.catch(1), Re.error("pinStateChange() | failed: %o", me), (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: G, status: 2, message: "Failed to send pin state change request. Error: ".concat(me.message) }), (ne = this._videosdkLogs) === null || ne === void 0 || ne.pushLogs({ logText: "Error in pinStateChange()", logType: "ERROR", attributes: { error: me.message }, dashboardLog: !0 }); case 4: case "end": return Te.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "startVideo", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: return $ = w.link, Re.debug("startVideo()"), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "startVideo() Calling", logType: "INFO" }), te.prev = 1, te.next = 2, this._socketRequest("startVideo", { link: $ }); case 2: te.next = 4; break; case 3: te.prev = 3, G = te.catch(1), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: "Error startVideo() failed", logType: "ERROR", attributes: { error: G.message } }), Re.error("startVideo() | failed:%o", G), this._emitError({ code: 3023, message: G.message }); case 4: case "end": return te.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "stopVideo", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: return Re.debug("stopVideo()"), (w = this._videosdkLogs) === null || w === void 0 || w.pushLogs({ logText: "stopVideo() Calling", logType: "INFO" }), z.prev = 1, z.next = 2, this._socketRequest("stopVideo", {}); case 2: z.next = 4; break; case 3: z.prev = 3, $ = z.catch(1), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Error stopVideo() failed", logType: "ERROR", attributes: { error: $.message } }), Re.error("stopVideo() | failed:%o", $), this._emitError({ code: 3024, message: $.message }); case 4: case "end": return z.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "pauseVideo", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: return Re.debug("pauseVideo()"), $.prev = 1, $.next = 2, this._socketRequest("pauseVideo", { currentTime: w }); case 2: $.next = 4; break; case 3: $.prev = 3, O = $.catch(1), Re.error("pauseVideo() | failed:%o", O), this._emitError({ code: 3025, message: O.message }); case 4: case "end": return $.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "resumeVideo", value: function () { var m = (0, u.A)(v().mark(function T() { var w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: return Re.debug("resumeVideo()"), O.prev = 1, O.next = 2, this._socketRequest("resumeVideo", {}); case 2: O.next = 4; break; case 3: O.prev = 3, w = O.catch(1), Re.error("resumeVideo() | failed:%o", w), this._emitError({ code: 3026, message: w.message }); case 4: case "end": return O.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "seekVideo", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: return Re.debug("seekVideo()"), $.prev = 1, $.next = 2, this._socketRequest("seekVideo", { currentTime: w }); case 2: $.next = 4; break; case 3: $.prev = 3, O = $.catch(1), Re.error("seekVideo() | failed:%o", O), this._emitError({ code: 3031, message: O.message }); case 4: case "end": return $.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "requestMediaRelay", value: function () { var m = (0, u.A)(v().mark(function T(w, O, $) { var z, G, te, re, ne, me; return v().wrap(function (Te) { for (; ;)switch (Te.prev = Te.next) { case 0: return Re.debug("requestMediaRelay()"), G = (z = this._openTelemetry) === null || z === void 0 ? void 0 : z.trace({ spanName: "Requesting to send media relay request", attributes: { meetingId: w || "Meeting ID not specified", kinds: $ ? JSON.stringify($) : "Kinds not specified" } }), Te.prev = 1, Te.next = 2, this._socketRequest("mediaRelayRequestSent", { meetingId: w, secret: O ?? this._secret, kinds: $ ?? ["audio", "video", "share", "share_audio"] }); case 2: (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ span: G, status: 1, message: "Media relay request sent successfully" }), Te.next = 4; break; case 3: Te.prev = 3, me = Te.catch(1), Re.error("requestMediaRelay() | failed:%o", me), (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: G, status: 2, message: "Failed to send media relay request. Error: ".concat(me.message) }), (ne = this._videosdkLogs) === null || ne === void 0 || ne.pushLogs({ logText: "Error in requestMediaRelay()", logType: "ERROR", attributes: { error: me.message } }); case 4: case "end": return Te.stop() } }, T, this, [[1, 3]]) })); function C(T, w, O) { return m.apply(this, arguments) } return C }() }, { key: "handleRelayRequestResponse", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te; return v().wrap(function (ke) { for (; ;)switch (ke.prev = ke.next) { case 0: return $ = w.decision, z = w.peerId, G = w.meetingId, Re.debug("handleRelayRequestResponse()"), te = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to respond to media relay request", attributes: { peerId: z || "Peer ID not specified", meetingId: G || "Meeting ID not specified", decision: $ || "Decision not specified" } }), ke.prev = 1, ke.next = 2, this._socketRequest("respondToMediaRelayRequest", { decision: $, decidedBy: this._peerId, peerId: z, meetingId: G }); case 2: (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: te, status: 1, message: "Media relay response request sent successfully" }), ke.next = 4; break; case 3: ke.prev = 3, Te = ke.catch(1), Re.error("handleRelayRequestResponse() | failed:%o", Te), (ne = this._openTelemetry) === null || ne === void 0 || ne.completeSpan({ span: te, status: 2, message: "Failed to send media relay response request. Error: ".concat(Te.message) }), (me = this._videosdkLogs) === null || me === void 0 || me.pushLogs({ logText: "Error in handleRelayRequestResponse()", logType: "ERROR", attributes: { error: Te.message }, dashboardLog: !0 }); case 4: case "end": return ke.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "stopMediaRelay", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("stopMediaRelay()"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to stop media relay", attributes: { meetingId: w || "Meeting ID not specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("mediaRelayRequestStop", { meetingId: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Media relay stop request sent successfully" }), ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), Re.error("stopMediaRelay() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send media relay stop request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error in stopMediaRelay()", logType: "ERROR", attributes: { error: re.message }, dashboardLog: !0 }); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "enableRelayMedia", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return G.prev = 0, G.next = 1, this._socketRequest("enableRelayMedia", { meetingId: w, kind: O }); case 1: G.next = 3; break; case 2: G.prev = 2, z = G.catch(0), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error enableRelayMedia() failed", logType: "ERROR", attributes: { error: z.message } }); case 3: case "end": return G.stop() } }, T, this, [[0, 2]]) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "disableRelayMedia", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return G.prev = 0, G.next = 1, this._socketRequest("disableRelayMedia", { meetingId: w, kind: O }); case 1: G.next = 3; break; case 2: G.prev = 2, z = G.catch(0), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error disableRelayMedia() failed", logType: "ERROR", attributes: { error: z.message } }); case 3: case "end": return G.stop() } }, T, this, [[0, 2]]) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "enableAdaptiveSubscription", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return Re.debug("enableAdaptiveSubscription()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to enable adaptive subscription" }), re.prev = 1, re.next = 2, this._socketRequest("enableAdaptiveSubscription"); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "Adaptive subscription enable request sent successfully" }), re.next = 4; break; case 3: re.prev = 3, te = re.catch(1), Re.error("enableAdaptiveSubscription() | failed:%o", te), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: O, status: 2, message: "Failed to send adaptive subscription enable request. Error: ".concat(te.message) }), (G = this._videosdkLogs) === null || G === void 0 || G.pushLogs({ logText: "Error in enableAdaptiveSubscription()", logType: "ERROR", attributes: { error: te.message }, dashboardLog: !0 }); case 4: case "end": return re.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "disableAdaptiveSubscription", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return Re.debug("disableAdaptiveSubscription()"), O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Requesting to disable adaptive subscription" }), re.prev = 1, re.next = 2, this._socketRequest("disableAdaptiveSubscription"); case 2: ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: O, status: 1, message: "Adaptive subscription disable request sent successfully" }), re.next = 4; break; case 3: re.prev = 3, te = re.catch(1), Re.error("disableAdaptiveSubscription() | failed:%o", te), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: O, status: 2, message: "Failed to send adaptive subscription disable request. Error: ".concat(te.message) }), (G = this._videosdkLogs) === null || G === void 0 || G.pushLogs({ logText: "Error in disableAdaptiveSubscription()", logType: "ERROR", attributes: { error: te.message }, dashboardLog: !0 }); case 4: case "end": return re.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "enablePeerMic", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("enablePeerMic()"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to enable peer(".concat(w, ") microphone"), attributes: { peerId: w || "Peer ID not specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("enablePeerMic", { peerId: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Peer microphone enable request sent successfully" }), ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), Re.error("enablePeerMic() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send peer microphone enable request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error in enablePeerMic()", logType: "ERROR", attributes: { error: re.message } }); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "disablePeerMic", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("disablePeerMic()"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to disable peer(".concat(w, ") microphone"), attributes: { peerId: w || "Peer ID not specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("disablePeerMic", { peerId: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Peer microphone disable request sent successfully" }), ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), Re.error("disablePeerMic() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send peer microphone disable request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error in disablePeerMic()", logType: "ERROR", attributes: { error: re.message } }); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "consumeWebcamStreams", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (!this._closed) { G.next = 1; break } return G.abrupt("return"); case 1: return Re.debug("consumeWebcamStreams()"), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "consumeWebcamStreams() Calling", logType: "INFO", attributes: { peerId: w } }), G.prev = 2, G.next = 3, this._socketRequest("consumeVideoStreams", { peerId: w }); case 3: G.next = 5; break; case 4: G.prev = 4, z = G.catch(2), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error consumeWebcamStreams() failed", logType: "ERROR", attributes: { error: z.message } }), Re.error("consumeWebcamStreams() | failed:%o", z); case 5: case "end": return G.stop() } }, T, this, [[2, 4]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "consumeMicStreams", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return Re.debug("consumeMicStreams()"), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "consumeMicStreams() Calling", logType: "INFO", attributes: { peerId: w } }), G.prev = 1, G.next = 2, this._socketRequest("consumeAudioStreams", { peerId: w }); case 2: G.next = 4; break; case 3: G.prev = 3, z = G.catch(1), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error consumeMicStreams() failed", logType: "ERROR", attributes: { error: z.message } }), Re.error("consumeMicStreams() | failed:%o", z); case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "stopConsumingMicStreams", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (!this._closed) { G.next = 1; break } return G.abrupt("return"); case 1: return Re.debug("stopConsumingAudioStreams()"), G.prev = 2, G.next = 3, this._socketRequest("stopConsumingAudioStreams", { peerId: w }); case 3: (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "stopConsumingAudioStreams() Calling", logType: "INFO", attributes: { peerId: w } }), G.next = 5; break; case 4: G.prev = 4, z = G.catch(2), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error stopConsumingMicStreams() failed", logType: "ERROR", attributes: { error: z.message } }), Re.error("stopConsumingMicStreams() | failed:%o", z); case 5: case "end": return G.stop() } }, T, this, [[2, 4]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "stopConsumingWebcamStreams", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return Re.debug("stopConsumingWebcamStreams()"), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "stopConsumingWebcamStreams() Calling", logType: "INFO", attributes: { peerId: w } }), G.prev = 1, G.next = 2, this._socketRequest("stopConsumingVideoStreams", { peerId: w }); case 2: G.next = 4; break; case 3: G.prev = 3, z = G.catch(1), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error stopConsumingWebcamStreams() failed", logType: "ERROR", attributes: { error: z.message } }), Re.error("stopConsumingWebcamStreams() | failed:%o", z); case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "changeMode", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $ = this, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We, Ve, gt, wt, $t, Ut, Ot, bt, Zt, lr, qt, st; return v().wrap(function (Ye) { for (; ;)switch (Ye.prev = Ye.next) { case 0: if (z = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Changing mode to ".concat(w) }), G = this._mode, Ye.prev = 1, G !== w) { Ye.next = 2; break } throw (ne = this._openTelemetry) === null || ne === void 0 || ne.completeSpan({ span: z, status: 2, message: "Participant is already in ".concat(w, " mode") }), (me = this._videosdkLogs) === null || me === void 0 || me.pushLogs({ logText: "You are already in ".concat(w, " mode"), logType: "INFO" }), new Error("You are already in ".concat(w, " mode")); case 2: if (Te = function () { var Le = (0, u.A)(v().mark(function Ae(Pt, Yt) { return v().wrap(function (Ft) { for (; ;)switch (Ft.prev = Ft.next) { case 0: return Ft.next = 1, $._socketRequest("createWebRtcTransport", { preferredProtocol: $._preferredProtocol, producing: Pt, consuming: Yt, sctpCapabilities: $._mediasoupDevice.sctpCapabilities }); case 1: return Ft.abrupt("return", Ft.sent); case 2: case "end": return Ft.stop() } }, Ae) })); return function (Pt, Yt) { return Le.apply(this, arguments) } }(), !(0, Wi.kR)(w)) { Ye.next = 10; break } return this._consume = !0, this._produce = !0, this._mode = w, this._mediasoupDevice = new bn.pF({ handlerName: this._handlerName }), ft = (ke = this._openTelemetry) === null || ke === void 0 ? void 0 : ke.trace({ spanName: "Loading device capabilities", span: z }), Ye.next = 3, this._socketRequest("getRouterRtpCapabilities"); case 3: return nt = Ye.sent, nt.headerExtensions = (Be = nt.headerExtensions) === null || Be === void 0 ? void 0 : Be.filter(function (Le) { return Le.uri != "urn:3gpp:video-orientation" }), Ye.next = 4, this._mediasoupDevice.load({ routerRtpCapabilities: nt }); case 4: if ((Qe = this._openTelemetry) === null || Qe === void 0 || Qe.completeSpan({ span: ft, status: 1, attributes: { routerRtpCapabilities: JSON.stringify(nt).toString() }, message: "Device Capabilities Loaded" }), !this._produce) { Ye.next = 6; break } return Ye.next = 5, Te(!0, !1); case 5: jt = Ye.sent, this.createProducerTransport(jt, z); case 6: if (!(G !== Wi.nI.RECV_ONLY && this._consume)) { Ye.next = 8; break } return Ye.next = 7, Te(!1, !0); case 7: Je = Ye.sent, this.createConsumerTransport(Je, z); case 8: return te = (Me = this._openTelemetry) === null || Me === void 0 ? void 0 : Me.trace({ spanName: "Requesting to change mode", span: z, attributes: { mode: w } }), Ye.next = 9, this._socketRequest("changeMode", { mode: w }); case 9: (je = this._openTelemetry) === null || je === void 0 || je.completeSpan({ span: te, status: 1, message: "Change Mode request sent successfully" }), this._produce && (ze.dispatch(fo({ canSendMic: this._mediasoupDevice.canProduce("audio"), canSendWebcam: this._mediasoupDevice.canProduce("video") })), this._micEnabled ? this.enableMic(this.customMicrophoneAudioTrack, z) : this.customMicrophoneAudioTrack && this.customMicrophoneAudioTrack.getTracks().forEach(function (Le) { Le.stop() }), this._webcamEnabled ? this.enableWebcam(this.customCameraVideoTrack, z) : this.customCameraVideoTrack && this.customCameraVideoTrack.getTracks().forEach(function (Le) { Le.stop() }), this.enableChatDataProducer()), window.SHOW_INFO && (_t = ze.getState(), We = _t.me, ze.dispatch(Fo(We.id))), Ye.next = 17; break; case 10: if (!((0, Wi.kR)(G) && w === Wi.nI.RECV_ONLY)) { Ye.next = 12; break } return this._produce = !1, this._mode = w, this._openTelemetry.traceAutoComplete({ spanName: "Closing Media Transports and Disposing Media Tracks", span: z, status: 1 }), this._closeProducersAndTransport(), te = (Ve = this._openTelemetry) === null || Ve === void 0 ? void 0 : Ve.trace({ spanName: "Requesting to change mode", span: z, attributes: { mode: w } }), Ye.next = 11, this._socketRequest("changeMode", { mode: w }); case 11: (gt = this._openTelemetry) === null || gt === void 0 || gt.completeSpan({ span: te, status: 1, message: "Change Mode request sent successfully" }), Ye.next = 17; break; case 12: if (!((0, Wi.wZ)(G) && w === Wi.nI.RECV_ONLY)) { Ye.next = 15; break } return this._consume = !0, this._mode = w, Ye.next = 13, this._setupWebrtcTransport(z); case 13: return te = (wt = this._openTelemetry) === null || wt === void 0 ? void 0 : wt.trace({ spanName: "Requesting to change mode", span: z, attributes: { mode: w } }), Ye.next = 14, this._socketRequest("changeMode", { mode: w }); case 14: ($t = this._openTelemetry) === null || $t === void 0 || $t.completeSpan({ span: te, status: 1, message: "Change Mode request sent successfully" }), window.SHOW_INFO && (Ut = ze.getState(), Ot = Ut.me, ze.dispatch(Fo(Ot.id))), Ye.next = 17; break; case 15: if (!(0, Wi.wZ)(w)) { Ye.next = 17; break } return te = (bt = this._openTelemetry) === null || bt === void 0 ? void 0 : bt.trace({ spanName: "Requesting to change mode", span: z, attributes: { mode: w } }), Ye.next = 16, this._socketRequest("changeMode", { mode: w }); case 16: (Zt = this._openTelemetry) === null || Zt === void 0 || Zt.completeSpan({ span: te, status: 1, message: "Change Mode request sent successfully" }), this._consume = !1, this._produce = !1, this._mode = w, this._openTelemetry.traceAutoComplete({ spanName: "Closing Media Transports", span: z, status: 1 }), this._dataConsumers.clear(), this._closeTransports(); case 17: (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: z, status: 1, message: "Changed mode to ".concat(w, " successfully") }), Ye.next = 19; break; case 18: Ye.prev = 18, st = Ye.catch(1), (lr = this._videosdkLogs) === null || lr === void 0 || lr.pushLogs({ logText: "Error changeMode(".concat(w, ") | failed"), logType: "ERROR", attributes: { error: st.message } }), (qt = this._openTelemetry) === null || qt === void 0 || qt.completeSpan({ span: z, status: 2, message: "Failed to change mode to ".concat(w, ". Error : ").concat(st.message) }); case 19: case "end": return Ye.stop() } }, T, this, [[1, 18]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "_closeProducersAndTransport", value: function () { var C; this._webcamProducer && (this._webcamProducer.close(), this._webcamProducer = null), this._micProducer && (this._micProducer.close(), this._micProducer = null), this._shareProducer && (this._shareProducer.close(), this._shareProducer = null), this._shareAudioProducer && (this._shareAudioProducer.close(), this._shareAudioProducer = null), (C = this._sendTransport) === null || C === void 0 || C.close(), this._sendTransport = null } }, { key: "_closeTransports", value: function () { if (this._sendTransport) { var C; (C = this._sendTransport) === null || C === void 0 || C.close(), this._sendTransport = null } if (this._recvTransport) { var T; (T = this._recvTransport) === null || T === void 0 || T.close(), this._recvTransport = null } } }, { key: "_setupWebrtcTransport", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return this._mediasoupDevice = new bn.pF({ handlerName: this._handlerName }), G = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Loading device capabilities", span: w }), ne.next = 1, this._socketRequest("getRouterRtpCapabilities"); case 1: return te = ne.sent, te.headerExtensions = ($ = te.headerExtensions) === null || $ === void 0 ? void 0 : $.filter(function (me) { return me.uri != "urn:3gpp:video-orientation" }), ne.next = 2, this._mediasoupDevice.load({ routerRtpCapabilities: te }); case 2: return (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: G, status: 1, attributes: { routerRtpCapabilities: JSON.stringify(te).toString() }, message: "Device Capabilities Loaded" }), ne.next = 3, this._socketRequest("createWebRtcTransport", { preferredProtocol: this._preferredProtocol, producing: !1, consuming: !0, sctpCapabilities: this._mediasoupDevice.sctpCapabilities }); case 3: re = ne.sent, this.createConsumerTransport(re, w); case 4: case "end": return ne.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "enablePeerWebcam", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("enablePeerWebcam()"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to enable peer(".concat(w, ") webcam"), attributes: { peerId: w || "Peer ID not specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("enablePeerWebcam", { peerId: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Peer webcam enable request sent successfully" }), ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), Re.error("enablePeerWebcam() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send peer webcam enable request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error in enablePeerWebcam()", logType: "ERROR", attributes: { error: re.message } }); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "disablePeerWebcam", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return Re.debug("disablePeerWebcam()"), $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Requesting to disable peer(".concat(w, ") webcam"), attributes: { peerId: w || "Peer ID not specified" } }), ne.prev = 1, ne.next = 2, this._socketRequest("disablePeerWebcam", { peerId: w }); case 2: (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: $, status: 1, message: "Peer webcam disable request sent successfully" }), ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), Re.error("disablePeerWebcam() | failed:%o", re), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: $, status: 2, message: "Failed to send peer webcam disable request. Error: ".concat(re.message) }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error in disablePeerWebcam()", logType: "ERROR", attributes: { error: re.message } }); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "getMicStats", value: function (C) { var T = this; if (this._micProducer) { var w = 0; C.onStatsCollected = function (O) { if (T._stats.producerStats || (T._stats.producerStats = {}), T._stats.producerStats.audio || (T._stats.producerStats.audio = []), T._micProducer) { var $; T._latestStats[($ = T._micProducer) === null || $ === void 0 ? void 0 : $.id] = [] } O.audio.forEach(function (z) { if (T._micProducer) { var G; T._latestStats[(G = T._micProducer) === null || G === void 0 ? void 0 : G.id].push(z) } }), w % 5 == 0 && T._micProducer != null && T._stats.producerStats.audio.push(Rn({ timestamp: new Date }, T._latestStats[T._micProducer.id] ? T._latestStats[T._micProducer.id][0] : {})), w++ } } } }, { key: "enableMic", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O = this, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We, Ve, gt, wt, $t, Ut, Ot, bt, Zt, lr, qt, st, Ye, Le, Ae, Pt, Yt, Ft, nr, fr, Mr, Sr, er, ln, Lr, Nr, en, kn, gn, Sn, Tn, un, Qr, Ct, _r, mr, qr, xn, tn, In, ti, ci, Mn, cn, An, Wn, hi, ri, Js, Xs, jn, Hi, qi, xs, Ms, _s, Hn, Gi, Ki, fi, Ii, ji, Zs, Yi = arguments, Pn, di, xi; return v().wrap(function (Jt) { for (; ;)switch (Jt.prev = Jt.next) { case 0: if (re = Yi.length > 0 && Yi[0] !== void 0 ? Yi[0] : void 0, ne = Yi.length > 1 && Yi[1] !== void 0 ? Yi[1] : void 0, me = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Enabling microphone with".concat(re ? " " : "out ", "Custom Audio Track"), attributes: { customAudioConfig: re ? JSON.stringify(re) : "Custom Track not provided" }, span: ne || null }), Re.debug("enableMic()"), this._micEnabled = !0, !this._micProducer) { Jt.next = 4; break } if (re && re.getTracks().forEach(function (Jr) { Jr.stop() }), ke = (Te = this._openTelemetry) === null || Te === void 0 ? void 0 : Te.trace({ spanName: "Starting Audio Stream transmission", span: me }), this._micProducer.resume(), Be = this._micProducer, !this._sendTransport) { Jt.next = 2; break } return Jt.next = 1, this._sendTransport.produce({ track: this._micProducer.track, encodings: this._micProducer._appData.encodings, codecOptions: this._micProducer._appData.codecOptions, appData: { isEncrypted: this.isE2EEEnabled }, onRtpSender: function (rn) { O.e2eeManager && (rn.senderStreams = rn.createEncodedStreams()) } }); case 1: this._micProducer = Jt.sent, this.e2eeManager && this.e2eeManager.emit("NEW_PRODUCER", this._micProducer), this._micProducer ? (ft = js({ id: this._micProducer.id, paused: this._micProducer.paused, track: this._micProducer.track, rtpParameters: this._micProducer.rtpParameters, codec: this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1], encodings: Be._appData.encodings, codecOptions: Be._appData.codecOptions, instance: this._micProducer, rtpSender: this._micProducer.rtpSender }), this._micProducer.track.getConstraints().deviceId && (this._mic.device = this._mics.get(this._micProducer.track.getConstraints().deviceId)), ze.dispatch(ft), (Qe = this._openTelemetry) === null || Qe === void 0 || Qe.completeSpan({ span: ke, status: 1, message: "Audio Stream transmission started successfully" }), (Me = this._openTelemetry) === null || Me === void 0 || Me.traceAutoComplete({ spanName: "Emitting STREAM_ENABLED event", span: me, status: 1 }), this._eventEmitter.emit(ft.type, ft.payload), (je = this._openTelemetry) === null || je === void 0 || je.completeSpan({ span: me, status: 1, message: "Microphone turned on successfully" })) : ((nt = this._openTelemetry) === null || nt === void 0 || nt.completeSpan({ span: ke, status: 2, message: "Error in enableMic() :: microphone transmission failed to initialize" }), (jt = this._openTelemetry) === null || jt === void 0 || jt.completeSpan({ span: me, status: 2, message: "Error in enableMic() :: microphone transmission failed to initialize" })), Jt.next = 3; break; case 2: return (Je = this._videosdkLogs) === null || Je === void 0 || Je.pushLogs({ logText: Ke.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message, attributes: { error: "Error in enableMic() :: Transport is not setup" }, logType: "ERROR", dashboardLog: !0 }), (_t = this._openTelemetry) === null || _t === void 0 || _t.completeSpan({ span: ke, status: 2, message: "Error in enableMic() :: Tried to enable mic while room was in a connecting state. " }), (We = this._openTelemetry) === null || We === void 0 || We.completeSpan({ span: me, status: 2, message: "Error in enableMic() :: Tried to enable mic while room was in a connecting state. " }), this._emitError(Ke.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED), Jt.abrupt("return"); case 3: return Ve = this._metrics.addNewProbe(this._micProducer, { name: "mic_producer" }), this._micProducer.observer.on("pause", function () { Ve == null || Ve.stop(), O._latestStats[O._micProducer.id] = [], O._metrics.removeExistingProbe(Ve) }), this._micProducer.observer.on("close", function () { Ve == null || Ve.stop(), O._latestStats[O._micProducer.id] = [], O._metrics.removeExistingProbe(Ve) }), this.getMicStats(Ve), Ve.start(), Jt.abrupt("return"); case 4: if (!this._mediasoupDevice) { Jt.next = 6; break } if (this._mediasoupDevice.canProduce("audio")) { Jt.next = 5; break } return $t = this._deviceInfo.sdkType == "react-native" ? Ke.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message : Ke.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message, (gt = this._videosdkLogs) === null || gt === void 0 || gt.pushLogs({ logText: $t, attributes: { error: "Error in enableMic() :: Microphone access unavailable" }, logType: "ERROR", dashboardLog: !0 }), Re.error("enableMic() | cannot produce audio"), (wt = this._openTelemetry) === null || wt === void 0 || wt.completeSpan({ span: me, status: 2, message: "".concat($t) }), Jt.abrupt("return"); case 5: Jt.next = 7; break; case 6: return (Ut = this._videosdkLogs) === null || Ut === void 0 || Ut.pushLogs({ logText: "Oops! Something went wrong, and we're unable to enable the mic. Please try again.", logType: "ERROR", attributes: { error: "Error in enableMic(): Something went wrong." }, dashboardLog: !0 }), (Ot = this._openTelemetry) === null || Ot === void 0 || Ot.completeSpan({ span: me, status: 2, message: "Error in enableMic() :: mediasoupDevice is undefined" }), Jt.abrupt("return"); case 7: if (Jt.prev = 7, this._externalVideo) { Jt.next = 23; break } return Re.debug("enableMic() | calling getUserMedia()"), Jt.next = 8, this._updateMics(me); case 8: if (this._mic.device) { Jt.next = 9; break } throw Le = "Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).", new Error(Le); case 9: try { re && (Zt = (Ae = this._openTelemetry) === null || Ae === void 0 ? void 0 : Ae.trace({ spanName: "Utilising provided custom track", span: me, attributes: { customVideoTrackConfig: re ? JSON.stringify(re) : "Custom Track not provided" } }), bt = re.getAudioTracks()[0], bt.readyState == "ended" && (bt = null, Ft = Ke.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED, (Yt = this._videosdkLogs) === null || Yt === void 0 || Yt.pushLogs({ logText: Ft.message, logType: "INFO", attributes: { error: "In enableMic() :: Invalid Custom Track Passed" }, dashboardLog: !0 }), this._openTelemetry.completeSpan({ message: "Invalid Custom Audio Track Passed. Reverting to default.", span: Zt, status: 2 }), this._emitError(Ft)), (Pt = this._openTelemetry) === null || Pt === void 0 || Pt.completeSpan({ span: Zt, status: 1 })) } catch (Jr) { fr = Ke.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK, (nr = this._videosdkLogs) === null || nr === void 0 || nr.pushLogs({ logText: fr.message, logType: "INFO", attributes: { error: "In enableMic() :: Invalid Custom Track Passed" } }), this._emitError(fr), console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Jr)), this._openTelemetry.completeSpan({ span: Zt, message: "Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Jr), status: 2 }) } if (bt) { Jt.next = 22; break } return Sr = (Mr = this._openTelemetry) === null || Mr === void 0 ? void 0 : Mr.trace({ spanName: "Creating Audio Track ".concat(this._mic.device.deviceId ? "using device: ".concat(this._mic.device.label) : "", " "), span: me }), ln = null, Jt.prev = 10, Jt.next = 11, navigator.mediaDevices.getUserMedia({ audio: { deviceId: this._mic.device.deviceId ? { exact: this._mic.device.deviceId } : void 0, channelCount: 1, noiseSuppression: !0, echoCancellation: !0, googEchoCancellation: !0, googEchoCancellation2: !0, googAutoGainControl: !0, googAutoGainControl2: !0, googNoiseSuppression: !0, googNoiseSuppression2: !0, googHighpassFilter: !0 } }); case 11: er = Jt.sent, ln = JSON.stringify({ micId: this._mic.device.deviceId ? { exact: this._mic.device.deviceId } : void 0 }), bt = er.getAudioTracks()[0], (Lr = this._openTelemetry) === null || Lr === void 0 || Lr.completeSpan({ message: "Default Microphone Track Generated", span: Sr, attributes: { customAudioTrackConfig: ln }, status: 1 }), Jt.next = 22; break; case 12: if (Jt.prev = 12, Pn = Jt.catch(10), (Nr = this._openTelemetry) === null || Nr === void 0 || Nr.completeSpan({ message: "Error while creating Audio Track in enableMic() :: ".concat(Pn.message), span: Sr, status: 2 }), Pn.name !== "SecurityError") { Jt.next = 13; break } gn = Ke.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED, Sn = gn.message, this._emitError(gn), (en = this._videosdkLogs) === null || en === void 0 || en.pushLogs({ logText: Sn, logType: "ERROR", attributes: { error: "Error in enableMic() :: Microphone Permission Denied or Dismissed" }, dashboardLog: !0 }), (kn = this._openTelemetry) === null || kn === void 0 || kn.completeSpan({ message: "Error while creating Audio Track in enableMic() :: ".concat(Sn), span: me, status: 2 }), Jt.next = 21; break; case 13: if (Pn.name !== "DOMException") { Jt.next = 14; break } Qr = Ke.q.ERROR_RN_MIC_NOT_FOUND, Ct = Qr.message, this._emitError(Qr), (Tn = this._videosdkLogs) === null || Tn === void 0 || Tn.pushLogs({ logText: Ct, logType: "ERROR", attributes: { error: "Error in enableMic() :: No Microphone Device Found" }, dashboardLog: !0 }), (un = this._openTelemetry) === null || un === void 0 || un.completeSpan({ message: "Error while creating Audio Track in enableMic() :: ".concat(Ct), span: me, status: 2 }), Jt.next = 21; break; case 14: if (!(Pn instanceof DOMException)) { Jt.next = 20; break } di = Pn.name, Jt.next = di === "NotAllowedError" ? 15 : di === "NotReadableError" ? 16 : di === "NotFoundError" ? 17 : 18; break; case 15: return _r = this.handleNotAllowedError(Pn, this._openTelemetry, this._videosdkLogs, me, "audio"), this._emitError(_r), Jt.abrupt("continue", 19); case 16: return mr = this.handleNotReadableError(Pn, this._openTelemetry, this._videosdkLogs, me, "audio"), this._emitError(mr), Jt.abrupt("continue", 19); case 17: return qr = Ke.q.ERROR_MICROPHONE_NOT_FOUND, navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") != -1 && (qr = Ke.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS), xn = qr.message, this._emitError(qr), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: xn, logType: "ERROR", attributes: { error: "Error in enableMic() :: No Microphone Device Found" }, dashboardLog: !0 }), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ message: "Error while creating Audio Track in enableMic() :: ".concat(xn), span: me, status: 2 }), Jt.abrupt("continue", 19); case 18: return tn = "An error occurred in creating audio track, ".concat(Pn.message), (G = this._videosdkLogs) === null || G === void 0 || G.pushLogs({ logText: Pn.message, logType: "ERROR", attributes: { error: "Error in enableMic() :: ".concat(tn) }, dashboardLog: !0 }), (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ message: "Error while creating Audio Track in enableMic() :: ".concat(tn), span: me, status: 2 }), Jt.abrupt("continue", 19); case 19: Jt.next = 21; break; case 20: ci = "An error occurred in creating audio track, ".concat(Pn.message), (In = this._videosdkLogs) === null || In === void 0 || In.pushLogs({ logText: Pn.message, logType: "ERROR", attributes: { error: "Error in enableMic() :: ".concat(ci) }, dashboardLog: !0 }), (ti = this._openTelemetry) === null || ti === void 0 || ti.completeSpan({ message: "Error while creating Audio Track in enableMic() :: ".concat(ci), span: me, status: 2 }); case 21: return Jt.abrupt("return"); case 22: Jt.next = 25; break; case 23: return Jt.next = 24, this._getExternalVideoStream(); case 24: Mn = Jt.sent, bt = Mn.getAudioTracks()[0].clone(); case 25: if (cn = (lr = this._openTelemetry) === null || lr === void 0 ? void 0 : lr.trace({ spanName: "Generating configurations for sending Audio Stream", span: me }), An = { opusStereo: 1, opusDtx: 1 }, bt && (Wn = bt.encoderConfig ? Ee.$.audioProfiles[bt.encoderConfig] : Ee.$.audioProfiles.speech_standard, An = { opusStereo: Wn.stereo ? 1 : 0, opusFec: Wn.fec ? 1 : 0, opusDtx: Wn.dtx ? 1 : 0, opusMaxPlaybackRate: Wn.maxPlaybackRate, opusPtime: Wn.packetTime }), hi = "high", ri = [{ networkPriority: hi }], Js = { encodings: ri, codecOptions: An }, (qt = this._openTelemetry) === null || qt === void 0 || qt.completeSpan({ span: cn, status: 1, message: "Audio stream configurations generated", attributes: { appData: JSON.stringify(Js) } }), (st = bt) === null || st === void 0 || st.addEventListener("ended", function () { console.log("Track Ended Error"); try { var Jr, rn, Oi = O._deviceInfo.sdkType == "react-native" ? Ke.q.ERROR_RN_MIC_TRACK_ENDED : Ke.q.ERROR_MICROPHONE_TRACK_ENDED; (Jr = O._videosdkLogs) === null || Jr === void 0 || Jr.pushLogs({ logText: Oi.message, logType: "ERROR", attributes: { error: "Error Track Ended :: ".concat(Oi.message) }, dashboardLog: !0 }), (rn = O._openTelemetry) === null || rn === void 0 || rn.traceAutoComplete({ spanName: "Microphone track ended or Microphone disconnected!", span: me, message: Oi.message, status: 2 }), ze.dispatch(sr({ type: "error", text: "Microphone disconnected!" })), O.disableMic(!0, me).catch(function () { }) } catch (ss) { console.error(ss) } }), cn = (Ye = this._openTelemetry) === null || Ye === void 0 ? void 0 : Ye.trace({ spanName: "Starting Audio Stream transmission", span: me }), !this._sendTransport) { Jt.next = 27; break } return Jt.next = 26, this._sendTransport.produce({ track: bt, encodings: ri, codecOptions: An, appData: Rn(Rn({}, Js), {}, { isEncrypted: this.isE2EEEnabled }), onRtpSender: function (rn) { O.e2eeManager && (rn.senderStreams = rn.createEncodedStreams()) } }); case 26: this._micProducer = Jt.sent, this.e2eeManager && this.e2eeManager.emit("NEW_PRODUCER", this._micProducer), Jt.next = 28; break; case 27: return (Xs = this._videosdkLogs) === null || Xs === void 0 || Xs.pushLogs({ logText: Ke.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message, attributes: { error: "Error in enableMic() :: Transport is not setup" }, logType: "ERROR", dashboardLog: !0 }), (jn = this._openTelemetry) === null || jn === void 0 || jn.completeSpan({ span: cn, status: 2, message: "Error in enableMic() :: Tried to enable mic while room was in a connecting state. " }), (Hi = this._openTelemetry) === null || Hi === void 0 || Hi.completeSpan({ span: me, status: 2, message: "Error in enableMic() :: Tried to enable mic while room was in a connecting state. " }), this._emitError(Ke.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED), Jt.abrupt("return"); case 28: this._micProducer ? (bt.getConstraints().deviceId && (this._mic.device = this._mics.get(bt.getConstraints().deviceId)), _s = js({ id: this._micProducer.id, paused: this._micProducer.paused, track: this._micProducer.track, rtpParameters: this._micProducer.rtpParameters, codec: this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1], encodings: ri, codecOptions: An, instance: this._micProducer, rtpSender: this._micProducer.rtpSender }), ze.dispatch(_s), (qi = this._openTelemetry) === null || qi === void 0 || qi.completeSpan({ span: cn, status: 1, message: "Audio Stream transmission started successfully" }), (xs = this._openTelemetry) === null || xs === void 0 || xs.traceAutoComplete({ spanName: "Emitting STREAM_ENABLED event", span: me, status: 1 }), this._eventEmitter.emit(_s.type, _s.payload), Hn = this._metrics.addNewProbe(this._micProducer, { name: "mic_producer" }), Hn.start(), this.getMicStats(Hn), this._micProducer.on("transportclose", function () { var Jr, rn = ys(O._micProducer.id); ze.dispatch(rn), O._eventEmitter.emit(rn.type, rn.payload), (Jr = O._micProducer) === null || Jr === void 0 || Jr.close(), O._micProducer = null }), this._micProducer.observer.on("pause", function () { Hn == null || Hn.stop(), O._latestStats[O._micProducer.id] = [], O._metrics.removeExistingProbe(Hn) }), this._micProducer.observer.on("close", function () { Hn == null || Hn.stop(), O._latestStats[O._micProducer.id] = [], O._metrics.removeExistingProbe(Hn) }), this._micProducer.on("trackended", function () { var Jr, rn, Oi = O._deviceInfo.sdkType == "react-native" ? Ke.q.ERROR_RN_MIC_TRACK_ENDED : Ke.q.ERROR_MICROPHONE_TRACK_ENDED; (Jr = O._videosdkLogs) === null || Jr === void 0 || Jr.pushLogs({ logText: Oi.message, logType: "ERROR", attributes: { error: "Error in enableMic() :: ".concat(Oi.message) }, dashboardLog: !0 }), (rn = O._openTelemetry) === null || rn === void 0 || rn.traceAutoComplete({ spanName: "Microphone track ended or Microphone disconnected!", span: me, message: Oi.message, status: 2 }), ze.dispatch(sr({ type: "error", text: "Microphone disconnected!" })), O.disableMic(!0, me).catch(function () { }) }), (Ms = this._openTelemetry) === null || Ms === void 0 || Ms.completeSpan({ span: me, status: 1, message: "Microphone turned on successfully" })) : ((Gi = this._videosdkLogs) === null || Gi === void 0 || Gi.pushLogs({ logText: "Oops! Something went wrong, and we're unable to enable the mic. Please try again.", logType: "ERROR", attributes: { error: "Error in enableMic(): Something went wrong." }, dashboardLog: !0 }), (Ki = this._openTelemetry) === null || Ki === void 0 || Ki.completeSpan({ span: cn, status: 2, message: "Error in enableMic() :: microphone transmission failed to initialize" }), (fi = this._openTelemetry) === null || fi === void 0 || fi.completeSpan({ span: me, status: 2, message: "Error in enableMic() :: microphone transmission failed to initialize" })), Jt.next = 31; break; case 29: return Jt.prev = 29, xi = Jt.catch(7), (Ii = this._openTelemetry) === null || Ii === void 0 || Ii.completeSpan({ span: internalSpan, status: 2, message: "Error in enableMic() :: occurred in creating microphone transmission, ".concat(xi.message) }), (ji = this._openTelemetry) === null || ji === void 0 || ji.completeSpan({ span: me, status: 2, message: "Error in enableMic :: ".concat(xi.message) }), (Zs = this._videosdkLogs) === null || Zs === void 0 || Zs.pushLogs({ logText: xi.message, logType: "ERROR", attributes: { error: "Error in enableMic() :: ".concat(xi.message) }, dashboardLog: !0 }), Re.error("enableMic() | failed:%o", xi), ze.dispatch(sr({ type: "error", text: "Error enabling microphone: ".concat(xi) })), Jt.next = 30, this._socketRequest("produceError", { mediaType: "audio", message: xi.message }); case 30: bt && bt.stop(); case 31: case "end": return Jt.stop() } }, T, this, [[7, 29], [10, 12]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "disableMic", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We, Ve, gt, wt, $t, Ut, Ot, bt, Zt, lr, qt = arguments, st, Ye; return v().wrap(function (Le) { for (; ;)switch (Le.prev = Le.next) { case 0: if (re = qt.length > 0 && qt[0] !== void 0 ? qt[0] : !1, ne = qt.length > 1 && qt[1] !== void 0 ? qt[1] : void 0, Re.debug("disableMic()"), me = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Disabling Microphone", status: 1, span: ne || null }), this._micProducer) { Le.next = 1; break } return (Te = this._openTelemetry) === null || Te === void 0 || Te.completeSpan({ span: me, status: 2, message: "Microphone is already disabled" }), (ke = this._videosdkLogs) === null || ke === void 0 || ke.pushLogs({ logText: "Attempted to call disableMic() multiple times", attributes: { error: "Error in disableMic() :: Microphone is already disabled" }, logType: "ERROR", dashboardLog: !0 }), Le.abrupt("return"); case 1: if (Be = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Disposing Audio Track", span: me, status: 1 }), this._micEnabled = !1, !(this._micProducer && !re)) { Le.next = 6; break } return this._micProducer.pause(), ft = ys(this._micProducer.id), (Qe = this._openTelemetry) === null || Qe === void 0 || Qe.completeSpan({ span: Be, status: 1, message: "Audio track disposed successfully", attributes: JSON.stringify({ closeProducer: re }) }), ze.dispatch(ft), (Me = this._openTelemetry) === null || Me === void 0 || Me.traceAutoComplete({ spanName: "Emitting STREAM_DISABLED event", span: me, status: 1 }), this._eventEmitter.emit(ft.type, ft.payload), Le.prev = 2, nt = (jt = this._openTelemetry) === null || jt === void 0 ? void 0 : jt.trace({ spanName: "Stopping Audio Stream transmission", span: me }), Le.next = 3, this._socketRequest("closeProducer", { producerId: this._micProducer.id }); case 3: this._openTelemetry.completeSpan({ span: nt, message: "Audio Stream transmission stopped successfully", status: 1 }), Le.next = 5; break; case 4: Le.prev = 4, st = Le.catch(2), ze.dispatch(sr({ type: "error", text: "Error closing server-side mic Producer: ".concat(st) })), Ve = "Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(re), (Je = this._openTelemetry) === null || Je === void 0 || Je.completeSpan({ span: nt, status: 2, message: "Failed to stop Audio Stream transmission: ".concat(st) }), (_t = this._openTelemetry) === null || _t === void 0 || _t.completeSpan({ span: me, status: 2, message: "Failed to disable mic: ".concat(st) }), (We = this._videosdkLogs) === null || We === void 0 || We.pushLogs({ logText: Ve, logType: "ERROR", attributes: { error: st.message }, dashboardLog: !0 }); case 5: return (je = this._openTelemetry) === null || je === void 0 || je.completeSpan({ span: me, status: 1, message: "Microphone disabled successfully" }), Le.abrupt("return"); case 6: return Be = ($ = this._openTelemetry) === null || $ === void 0 ? void 0 : $.trace({ spanName: "Disposing Audio Track", span: me, status: 1, attributes: { audioTrackConfig: (z = this._micProducer) !== null && z !== void 0 && z.track ? JSON.stringify(function (Ae) { return { kind: Ae.kind, id: Ae.id, label: Ae.label } }(this._micProducer.track)) : "Track not provided" } }), this._micProducer.close(), gt = ys(this._micProducer.id), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: Be, status: 1, message: "Audio track disposed successfully", attributes: JSON.stringify({ closeProducer: re }) }), ze.dispatch(gt), (te = this._openTelemetry) === null || te === void 0 || te.traceAutoComplete({ spanName: "Emitting STREAM_DISABLED event", span: me, status: 1 }), this._eventEmitter.emit(gt.type, gt.payload), Le.prev = 7, wt = ($t = this._openTelemetry) === null || $t === void 0 ? void 0 : $t.trace({ spanName: "Stopping Audio Stream transmission", span: me }), Le.next = 8, this._socketRequest("closeProducer", { producerId: this._micProducer.id }); case 8: this._openTelemetry.completeSpan({ span: wt, message: "Audio Stream transmission stopped successfully", status: 1 }), this._micProducer = null, (Ut = this._openTelemetry) === null || Ut === void 0 || Ut.completeSpan({ span: me, status: 1, message: "Microphone disabled successfully" }), Le.next = 10; break; case 9: Le.prev = 9, Ye = Le.catch(7), ze.dispatch(sr({ type: "error", text: "Error closing server-side mic Producer: ".concat(Ye) })), lr = "Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(re), (Ot = this._openTelemetry) === null || Ot === void 0 || Ot.completeSpan({ span: wt, status: 2, message: "Failed to stop Audio Stream transmission: ".concat(Ye) }), (bt = this._openTelemetry) === null || bt === void 0 || bt.completeSpan({ span: me, status: 2, message: "Failed to disable mic: ".concat(Ye) }), (Zt = this._videosdkLogs) === null || Zt === void 0 || Zt.pushLogs({ logText: lr, logType: "ERROR", attributes: { error: Ye.message }, dashboardLog: !0 }); case 10: case "end": return Le.stop() } }, T, this, [[2, 4], [7, 9]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "muteMic", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: return Re.debug("muteMic()"), this._micEnabled = !1, this._micProducer.pause(), $.prev = 1, $.next = 2, this._socketRequest("pauseProducer", { producerId: this._micProducer.id }); case 2: ze.dispatch(Dc(this._micProducer.id)), $.next = 4; break; case 3: $.prev = 3, O = $.catch(1), Re.error("muteMic() | failed: %o", O), (w = this._videosdkLogs) === null || w === void 0 || w.pushLogs({ logText: "Error pausing server-side mic Producer", logType: "ERROR", attributes: { error: O.message } }), ze.dispatch(sr({ type: "error", text: "Error pausing server-side mic Producer: ".concat(O) })); case 4: case "end": return $.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "unmuteMic", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: return Re.debug("unmuteMic()"), this._micEnabled = !0, this._micProducer.resume(), $.prev = 1, $.next = 2, this._socketRequest("resumeProducer", { producerId: this._micProducer.id }); case 2: ze.dispatch(Ic(this._micProducer.id)), $.next = 4; break; case 3: $.prev = 3, O = $.catch(1), Re.error("unmuteMic() | failed: %o", O), (w = this._videosdkLogs) === null || w === void 0 || w.pushLogs({ logText: "Error resuming server-side mic Producer", logType: "ERROR", attributes: { error: O.message } }), ze.dispatch(sr({ type: "error", text: "Error resuming server-side mic Producer: ".concat(O) })); case 4: case "end": return $.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "enableWebcam", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te = this, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We, Ve, gt, wt, $t, Ut, Ot, bt, Zt, lr, qt, st, Ye, Le, Ae, Pt, Yt, Ft, nr, fr, Mr, Sr, er, ln, Lr, Nr, en, kn, gn, Sn, Tn, un, Qr, Ct, _r, mr, qr, xn, tn, In, ti, ci, Mn, cn, An, Wn, hi, ri, Js, Xs, jn, Hi, qi, xs, Ms, _s, Hn, Gi, Ki, fi, Ii, ji, Zs, Yi, Pn, di, xi, Jt, Jr, rn, Oi, ss, Ya, _i, ea, En, as, Ca, Ra, ws, Ls, Xo, Ns = arguments, ni, ta, Mi; return v().wrap(function (Qt) { for (; ;)switch (Qt.prev = Qt.next) { case 0: if (re = Ns.length > 0 && Ns[0] !== void 0 ? Ns[0] : void 0, ne = Ns.length > 1 && Ns[1] !== void 0 ? Ns[1] : void 0, me = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Enabling Webcam with".concat(re ? " " : "out ", "Custom Video Track"), attributes: { customVideoConfig: re ? JSON.stringify(re) : "Custom Track not provided" }, span: ne || null }), Re.debug("enableWebcam()"), this._webcamEnabled = !0, !this._webcamProducer) { Qt.next = 1; break } return (Te = this._openTelemetry) === null || Te === void 0 || Te.completeSpan({ span: me, status: 2, message: "Webcam is already enabled" }), (ke = this._videosdkLogs) === null || ke === void 0 || ke.pushLogs({ logText: "Attempted to call enableWebcam() multiple times", attributes: { error: "Error in enableWebcam() :: Webcam is already enabled" }, logType: "ERROR", dashboardLog: !0 }), Qt.abrupt("return"); case 1: if (Be = ze.getState(), Qe = Be.me, !Qe.webcamInProgress) { Qt.next = 2; break } return (Me = this._openTelemetry) === null || Me === void 0 || Me.completeSpan({ span: me, status: 2, message: "Error in enableWebcam(): Webcam enabling process is already in progress." }), (je = this._videosdkLogs) === null || je === void 0 || je.pushLogs({ logText: "Attempted to call enableWebcam() multiple times", attributes: { error: "Webcam enabling process is already in progress" }, logType: "ERROR", dashboardLog: !0 }), Qt.abrupt("return"); case 2: if (!this._mediasoupDevice) { Qt.next = 4; break } if (this._mediasoupDevice.canProduce("video")) { Qt.next = 3; break } return jt = this._deviceInfo.sdkType == "react-native" ? Ke.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message : Ke.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message, (ft = this._openTelemetry) === null || ft === void 0 || ft.completeSpan({ span: me, status: 2, message: "".concat(jt) }), (nt = this._videosdkLogs) === null || nt === void 0 || nt.pushLogs({ logText: jt, attributes: { error: "Error in enableWebcam() :: Camera access unavailable" }, logType: "ERROR", dashboardLog: !0 }), Re.error("enableWebcam() | cannot produce video"), Qt.abrupt("return"); case 3: Qt.next = 5; break; case 4: return (Je = this._videosdkLogs) === null || Je === void 0 || Je.pushLogs({ logText: "Oops! Something went wrong, and we're unable to enable the webcam. Please try again.", logType: "ERROR", attributes: { error: "Error in enableWebcam(): Something went wrong." } }), (_t = this._openTelemetry) === null || _t === void 0 || _t.completeSpan({ span: me, status: 2, message: "Error in enableWebcam() :: mediasoupDevice is undefined" }), Qt.abrupt("return"); case 5: if (ze.dispatch(go(!0)), wt = this._webcam.resolution, Qt.prev = 6, this._externalVideo) { Qt.next = 25; break } return Qt.next = 7, this._updateWebcams(me); case 7: if (Ve = this._webcam.device, Ve) { Qt.next = 8; break } throw qt = "Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).", new Error(qt); case 8: Re.debug("enableWebcam() | calling getUserMedia()"); try { re && (gt = (st = this._openTelemetry) === null || st === void 0 ? void 0 : st.trace({ spanName: "Utilising provided custom track", span: me, attributes: { customVideoTrackConfig: re ? JSON.stringify(re) : "Custom Track not provided" } }), We = re.getVideoTracks()[0], We.readyState == "ended" && (We = null, Ae = Ke.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED, (Le = this._videosdkLogs) === null || Le === void 0 || Le.pushLogs({ logText: Ae.message, logType: "INFO", attributes: { error: "In enableWebcam() :: Invalid Custom Track Passed" }, dashboardLog: !0 }), this._openTelemetry.completeSpan({ span: gt, message: "Invalid Custom Video Track Passed. Reverting to default.", status: 2 }), this._emitError(Ae)), (Ye = this._openTelemetry) === null || Ye === void 0 || Ye.completeSpan({ span: gt, status: 1 })) } catch (Ur) { Yt = Ke.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK, (Pt = this._videosdkLogs) === null || Pt === void 0 || Pt.pushLogs({ logText: Yt.message, logType: "INFO", attributes: { error: "In enableWebcam() :: Invalid Custom Track Passed" } }), this._openTelemetry.completeSpan({ span: gt, message: "Invalid Custom Video Track Passed. Reverting to default Error: ".concat(Ur), status: 2 }), this._emitError(Yt), console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(Ur)) } if (We) { Qt.next = 24; break } if (gt = (Ft = this._openTelemetry) === null || Ft === void 0 ? void 0 : Ft.trace({ spanName: "Creating Video Track using device: ".concat(Ve.label), span: me }), nr = null, Qt.prev = 9, this._webcam.resolution != "hd") { Qt.next = 11; break } return Qt.next = 10, bs.VideoSDK.createCameraVideoTrack({ cameraId: Ve.deviceId, encoderConfig: "h720p_w1280p", multiStream: this._useSimulcast, facingMode: Ve.facing }); case 10: re = Qt.sent, nr = JSON.stringify({ encoderConfig: "h720p_w1280p", multiStream: this._useSimulcast, cameraId: Ve.deviceId }), Qt.next = 13; break; case 11: return Qt.next = 12, bs.VideoSDK.createCameraVideoTrack({ cameraId: Ve.deviceId, encoderConfig: "h540p_w960p", multiStream: this._useSimulcast, facingMode: Ve.facing }); case 12: re = Qt.sent, nr = JSON.stringify({ encoderConfig: "h540p_w960p", multiStream: this._useSimulcast, cameraId: Ve.deviceId }); case 13: We = re.getVideoTracks()[0], (fr = this._openTelemetry) === null || fr === void 0 || fr.completeSpan({ message: "Default Camera Track Generated", span: gt, attributes: { customVideoTrackConfig: nr }, status: 1 }), Qt.next = 24; break; case 14: if (Qt.prev = 14, ni = Qt.catch(9), (Mr = this._openTelemetry) === null || Mr === void 0 || Mr.completeSpan({ message: "Error while creating Video Track in enableWebcam() :: ".concat(ni.message), span: gt, status: 2 }), ni.name !== "SecurityError") { Qt.next = 15; break } ln = Ke.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED, Lr = ln.message, this._emitError(ln), (Sr = this._videosdkLogs) === null || Sr === void 0 || Sr.pushLogs({ logText: Lr, logType: "ERROR", attributes: { error: "Error in enableWebcam() :: Camera Permission Denied or Dismissed" }, dashboardLog: !0 }), (er = this._openTelemetry) === null || er === void 0 || er.completeSpan({ message: "Error while creating Video Track in enableWebcam() :: ".concat(Lr), span: me, status: 2 }), Qt.next = 23; break; case 15: if (ni.name !== "DOMException") { Qt.next = 16; break } kn = Ke.q.ERROR_RN_CAMERA_NOT_FOUND, gn = kn.message, this._emitError(kn), (Nr = this._videosdkLogs) === null || Nr === void 0 || Nr.pushLogs({ logText: gn, logType: "ERROR", attributes: { error: "Error in enableWebcam() :: No Camra Device Found" }, dashboardLog: !0 }), (en = this._openTelemetry) === null || en === void 0 || en.completeSpan({ message: "Error while creating Video Track in enableWebcam() :: ".concat(gn), span: me, status: 2 }), Qt.next = 23; break; case 16: if (!(ni instanceof DOMException)) { Qt.next = 22; break } ta = ni.name, Qt.next = ta === "NotAllowedError" ? 17 : ta === "NotReadableError" ? 18 : ta === "NotFoundError" ? 19 : 20; break; case 17: return Sn = this.handleNotAllowedError(ni, this._openTelemetry, this._videosdkLogs, me, "video"), this._emitError(Sn), Qt.abrupt("continue", 21); case 18: return Tn = this.handleNotReadableError(ni, this._openTelemetry, this._videosdkLogs, me, "video"), this._emitError(Tn), Qt.abrupt("continue", 21); case 19: return un = Ke.q.ERROR_CAMERA_NOT_FOUND, navigator && navigator.userAgent && navigator.userAgent.indexOf("Firefox") != -1 && (un = Ke.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS), Qr = un.message, this._emitError(un), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: Qr, logType: "ERROR", attributes: { error: "Error in enableWebcam() :: No Webcam Device Found" }, dashboardLog: !0 }), ($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ message: "Error while creating Video Track in enableWebcam() :: ".concat(Qr), span: me, status: 2 }), Qt.abrupt("continue", 21); case 20: return Ct = "An error occurred in creating Video Track, ".concat(ni.message), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: ni.message, logType: "ERROR", attributes: { error: "Error in enableWebcam() :: ".concat(Ct) }, dashboardLog: !0 }), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ message: "Error while creating Video Track in enableWebcam() :: ".concat(Ct), span: me, status: 2 }), Qt.abrupt("continue", 21); case 21: Qt.next = 23; break; case 22: qr = "An error occurred in creating Video Track, ".concat(ni.message), (_r = this._videosdkLogs) === null || _r === void 0 || _r.pushLogs({ logText: ni.message, logType: "ERROR", attributes: { error: "Error in enableWebcam() :: ".concat(qr) }, dashboardLog: !0 }), (mr = this._openTelemetry) === null || mr === void 0 || mr.completeSpan({ message: "Error while creating Video Track in enableWebcam() :: ".concat(qr), span: me, status: 2 }); case 23: return Qt.abrupt("return"); case 24: Qt.next = 27; break; case 25: return Ve = { label: "external video" }, Qt.next = 26, this._getExternalVideoStream(); case 26: xn = Qt.sent, We = xn.getVideoTracks()[0].clone(); case 27: if (tn = ($t = this._openTelemetry) === null || $t === void 0 ? void 0 : $t.trace({ spanName: "Generating configurations for sending Video Stream", span: me }), !this._forceH264) { Qt.next = 29; break } if (ti = this._mediasoupDevice.rtpCapabilities.codecs.find(function (Ur) { return Ur.mimeType.toLowerCase() === "video/h264" }), ti) { Qt.next = 28; break } throw ci = "The desired H.264 codec and configuration are not supported", new Error(ci); case 28: Qt.next = 30; break; case 29: if (!this._forceVP9) { Qt.next = 30; break } if (ti = this._mediasoupDevice.rtpCapabilities.codecs.find(function (Ur) { return Ur.mimeType.toLowerCase() === "video/vp9" }), ti) { Qt.next = 30; break } throw Mn = "The desired VP9 codec and configuration are not supported", new Error(Mn); case 30: if (We) { hi = We.getConstraints(), ri = ((cn = this._deviceInfo) === null || cn === void 0 ? void 0 : cn.sdkType) === "react-native" && ((An = this._deviceInfo) === null || An === void 0 ? void 0 : An.platform) === "ios", Js = ((Wn = this._deviceInfo) === null || Wn === void 0 ? void 0 : Wn.sdkType) === "react-native" ? "react-native" : "web", Xs = (0, P.A)(hi.width) === "object" ? Object.values(hi.width)[0] : hi.width, jn = (0, P.A)(hi.height) === "object" ? Object.values(hi.height)[0] : hi.height; try { In = (0, ae.v7)(!1, Xs, jn, (Hi = re) === null || Hi === void 0 ? void 0 : Hi.encoderConfig, { simulcast: (qi = re) === null || qi === void 0 ? void 0 : qi.multiStream }, ri, Js, (xs = re) === null || xs === void 0 ? void 0 : xs.bitrateMode, (Ms = re) === null || Ms === void 0 ? void 0 : Ms.maxLayer) } catch (Ur) { In = null, (_s = this._videosdkLogs) === null || _s === void 0 || _s.pushLogs({ logText: "Error in enableWebcam() :: Something went wrong while computing encoding", logType: "ERROR", attributes: { error: "".concat(Ur.message) }, dashboardLog: !0 }) } } else this._useSimulcast && (Hn = this._mediasoupDevice.rtpCapabilities.codecs.find(function (Ur) { return Ur.kind === "video" }), this._forceVP9 && ti || Hn.mimeType.toLowerCase() === "video/vp9" ? In = Ea : In = Om[this._webcam.resolution]); Gi = { videoGoogleStartBitrate: 1e3 }, Ki = ((Ut = this._deviceInfo) === null || Ut === void 0 || (Ut = Ut.browserUserAgent) === null || Ut === void 0 || (Ut = Ut.os) === null || Ut === void 0 ? void 0 : Ut.name) === "iOS", fi = ((Ot = this._deviceInfo) === null || Ot === void 0 || (Ot = Ot.browserUserAgent) === null || Ot === void 0 || (Ot = Ot.browser) === null || Ot === void 0 ? void 0 : Ot.name) === "Safari", (Ki || fi) && In != null && (ji = ((Ii = re) === null || Ii === void 0 ? void 0 : Ii.bitrateMode) || pu.x.BALANCED, Zs = In[In.length - 1].bitrates["web-iOS"][ji], Gi = { videoGoogleMaxBitrate: Zs, videoGoogleStartBitrate: 1e3 }), Yi = (bt = In) === null || bt === void 0 ? void 0 : bt.map(function (Ur) { Ur.bitrates; var ii = h(Ur, Kp); return ii }), Pn = {}; try { Pn = { encodings: Yi, width: re ? (di = We) === null || di === void 0 ? void 0 : di.getConstraints().width : fu[wt].width.ideal, height: re ? (xi = We) === null || xi === void 0 ? void 0 : xi.getConstraints().height : fu[wt].height.ideal } } catch (Ur) { (Jt = this._videosdkLogs) === null || Jt === void 0 || Jt.pushLogs({ logText: Ur.message, logType: "INFO", attributes: { error: "In enableWebcam() :: ".concat(Ur.message) }, dashboardLog: !0 }), console.log(Ur) } if ((Zt = this._openTelemetry) === null || Zt === void 0 || Zt.completeSpan({ span: tn, status: 1, message: "Video stream configurations generated", attributes: { appData: JSON.stringify(Pn) } }), tn = (lr = this._openTelemetry) === null || lr === void 0 ? void 0 : lr.trace({ spanName: "Starting Video Stream transmission (".concat(Pn.width, "x").concat(Pn.height, "), simulcast: ").concat(re.multiStream), span: me }), !this._sendTransport) { Qt.next = 32; break } return Qt.next = 31, this._sendTransport.produce({ track: We, encodings: In, codecOptions: Gi, codec: ti, appData: Rn(Rn({}, Pn), {}, { isEncrypted: this.isE2EEEnabled }), onRtpSender: function (ii) { te.e2eeManager && (ii.senderStreams = ii.createEncodedStreams()) } }); case 31: this._webcamProducer = Qt.sent, this.e2eeManager && this.e2eeManager.emit("NEW_PRODUCER", this._webcamProducer), Qt.next = 33; break; case 32: return (Jr = this._videosdkLogs) === null || Jr === void 0 || Jr.pushLogs({ logText: Ke.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message, attributes: { error: "Error in enableWebcam() :: Transport is not setup" }, logType: "ERROR", dashboardLog: !0 }), (rn = this._openTelemetry) === null || rn === void 0 || rn.completeSpan({ span: tn, status: 2, message: "Error in enableWebcam() :: Tried to enable webcam while room was in a connecting state. " }), (Oi = this._openTelemetry) === null || Oi === void 0 || Oi.completeSpan({ span: me, status: 2, message: "Error in enableWebcam() :: Tried to enable webcam while room was in a connecting state. " }), this._emitError(Ke.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED), Qt.abrupt("return"); case 33: We.getSettings().deviceId && (this._webcam.device = this._webcams.get(We.getSettings().deviceId)), this._webcamProducer ? (ea = js({ id: this._webcamProducer.id, deviceLabel: Ve.label, type: this._getWebcamType(Ve), paused: this._webcamProducer.paused, track: this._webcamProducer.track, rtpParameters: this._webcamProducer.rtpParameters, codec: this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1], instance: this._webcamProducer, rtpSender: this._webcamProducer.rtpSender }), ze.dispatch(ea), (ss = this._openTelemetry) === null || ss === void 0 || ss.completeSpan({ span: tn, status: 1, message: "Video Stream transmission started successfully" }), (Ya = this._openTelemetry) === null || Ya === void 0 || Ya.traceAutoComplete({ spanName: "Emitting STREAM_ENABLED event", span: me, status: 1 }), this._eventEmitter.emit(ea.type, ea.payload), En = 0, as = this._metrics.addNewProbe(this._webcamProducer, "producer"), as.onStatsCollected = function (Ur) { try { if (te._stats.producerStats || (te._stats.producerStats = {}), te._stats.producerStats.video || (te._stats.producerStats.video = []), te._webcamProducer) { var ii; te._latestStats[(ii = te._webcamProducer) === null || ii === void 0 ? void 0 : ii.id] = [] } Ur.video.forEach(function (mi) { var _o; te._latestStats[(_o = te._webcamProducer) === null || _o === void 0 ? void 0 : _o.id].push(mi) }), En % 5 == 0 && te._webcamProducer != null && te._stats.producerStats.video.push({ timestamp: new Date, stats: te._latestStats[te._webcamProducer.id] }), En++ } catch (mi) { var Bs; (Bs = te._videosdkLogs) === null || Bs === void 0 || Bs.pushLogs({ logText: "Error PRODUCER Stats ERROR", logType: "ERROR", attributes: { error: mi.message } }) } }, as.start(), this._webcamProducer.observer.on("close", function () { as.stop(), te._metrics.removeExistingProbe(as) }), this._webcamProducer.on("transportclose", function () { var Ur, ii = ys(te._webcamProducer.id); ze.dispatch(ii), te._eventEmitter.emit(ii.type, ii.payload), (Ur = te._webcamProducer) === null || Ur === void 0 || Ur.close(), te._webcamProducer = null }), this._webcamProducer.on("trackended", function () { var Ur, ii, Bs = te._deviceInfo.sdkType == "react-native" ? Ke.q.ERROR_RN_CAMERA_TRACK_ENDED : Ke.q.ERROR_WEBCAM_TRACK_ENDED; (Ur = te._videosdkLogs) === null || Ur === void 0 || Ur.pushLogs({ logText: Bs.message, logType: "ERROR", attributes: { error: "Error in enableWebcam() :: ".concat(Bs.message) }, dashboardLog: !0 }), (ii = te._openTelemetry) === null || ii === void 0 || ii.traceAutoComplete({ spanName: "Webcam track ended or Webcam disconnected!", span: me, message: Bs.message, status: 2 }), ze.dispatch(sr({ type: "error", text: "Webcam disconnected!" })), te.disableWebcam(me).catch(function () { }) }), (_i = this._openTelemetry) === null || _i === void 0 || _i.completeSpan({ span: me, status: 1, message: "Webcam turned on successfully" })) : ((Ca = this._videosdkLogs) === null || Ca === void 0 || Ca.pushLogs({ logText: "Oops! Something went wrong, and we're unable to enable the webcam. Please try again.", logType: "ERROR", attributes: { error: "Error in enableWebcam(): Something went wrong." }, dashboardLog: !0 }), (Ra = this._openTelemetry) === null || Ra === void 0 || Ra.completeSpan({ span: tn, status: 2, message: "Error in enableWebcam() :: camera transmission failed to initialize" }), (ws = this._openTelemetry) === null || ws === void 0 || ws.completeSpan({ span: me, status: 2, message: "Error in enableWebcam() :: camera transmission failed to initialize" })), Qt.next = 36; break; case 34: return Qt.prev = 34, Mi = Qt.catch(6), (Ls = this._videosdkLogs) === null || Ls === void 0 || Ls.pushLogs({ logText: Mi.message, logType: "ERROR", attributes: { error: "Error in enableWebcam() :: ".concat(Mi.message) }, dashboardLog: !0 }), (Xo = this._openTelemetry) === null || Xo === void 0 || Xo.completeSpan({ span: me, status: 2, message: "Error in enableWebcam() :: ".concat(Mi.message) }), ze.dispatch(sr({ type: "error", text: "Error enabling webcam: ".concat(Mi) })), Qt.next = 35, this._socketRequest("produceError", { mediaType: "video", message: Mi.message }); case 35: We && We.stop(); case 36: ze.dispatch(go(!1)); case 37: case "end": return Qt.stop() } }, T, this, [[6, 34], [9, 14]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "handleNotAllowedError", value: function (C, T, w, O, $) { var z = {}; return C.message === "Permission denied" || C.message === "Permission dismissed" ? z = $ === "video" ? Ke.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED : Ke.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED : C.message.includes("The request is not allowed by the user agent") ? z = $ === "video" ? Ke.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE : Ke.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED : C.message === "Permission denied by system" ? z = $ === "video" ? Ke.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS : Ke.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS : z = $ === "video" ? Ke.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED : Ke.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED, w.pushLogs({ logText: z.message, logType: "ERROR", attributes: { error: "Error in ".concat($ === "video" ? "enableWebcam()" : "enableMic()", " :: ").concat(C.message) }, dashboardLog: !0 }), T.completeSpan({ message: $ === "video" ? "Error in enableWebcam() :: occurred in creating Video Track, ".concat(z.message) : "Error in enableMic() :: occurred in creating audio track, ".concat(z.message), span: O, status: 2 }), z } }, { key: "handleNotReadableError", value: function (C, T, w, O, $) { var z = {}; return C.message === "Device in use" ? z = $ === "video" ? Ke.q.ERROR_CAMERA_IN_USE : Ke.q.ERROR_MICROPHONE_IN_USE : z = $ === "video" ? Ke.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED : Ke.q.ERROR_MICROPHONE_IN_USE, w.pushLogs({ logText: z.message, logType: "ERROR", attributes: { error: "Error in ".concat($ === "video" ? "enableWebcam()" : "enableMic()", " :: ").concat(C.message) }, dashboardLog: !0 }), T.completeSpan({ message: $ === "video" ? "Error in enableWebcam() :: occurred in creating Video Track, ".concat(z.message) : "Error in enableMic() :: occurred in creating audio track, ".concat(z.message), span: O, status: 2 }), z } }, { key: "disableWebcam", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt = arguments, Je; return v().wrap(function (_t) { for (; ;)switch (_t.prev = _t.next) { case 0: if (te = jt.length > 0 && jt[0] !== void 0 ? jt[0] : void 0, re = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Disabling Webcam", span: te || null }), Re.debug("disableWebcam()"), this._webcamEnabled = !1, this._webcamProducer) { _t.next = 1; break } return (ne = this._openTelemetry) === null || ne === void 0 || ne.completeSpan({ span: re, status: 2, message: "Webcam is already disabled" }), (me = this._videosdkLogs) === null || me === void 0 || me.pushLogs({ logText: "Attempted to call disableWebcam() multiple times", attributes: { error: "Error in disableWebcam() :: Webcam is already disabled" }, logType: "ERROR", dashboardLog: !0 }), _t.abrupt("return"); case 1: return Te = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Disposing Video Track", span: re, status: 1, attributes: { videoTrackConfig: ($ = this._webcamProducer) !== null && $ !== void 0 && $.track ? JSON.stringify(function (We) { return { kind: We.kind, id: We.id, label: We.label } }(this._webcamProducer.track)) : "Track not provided" } }), this._webcamProducer.close(), ke = ys(this._webcamProducer.id), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: Te, status: 1, message: "Video track disposed successfully" }), ze.dispatch(ke), (G = this._openTelemetry) === null || G === void 0 || G.traceAutoComplete({ spanName: "Emitting STREAM_DISABLED event", span: re, status: 1 }), this._eventEmitter.emit(ke.type, ke.payload), _t.prev = 2, Be = (Qe = this._openTelemetry) === null || Qe === void 0 ? void 0 : Qe.trace({ spanName: "Stopping Video Stream transmission", span: re }), _t.next = 3, this._socketRequest("closeProducer", { producerId: this._webcamProducer.id }); case 3: this._openTelemetry.completeSpan({ span: Be, message: "Video Stream transmission stopped successfully", status: 1 }), this._webcamProducer = null, (Me = this._openTelemetry) === null || Me === void 0 || Me.completeSpan({ span: re, status: 1, message: "Webcam disabled successfully" }), _t.next = 5; break; case 4: _t.prev = 4, Je = _t.catch(2), (je = this._videosdkLogs) === null || je === void 0 || je.pushLogs({ logText: "Error in disableWebcam() :: Failed to close server-side webcam producer", logType: "ERROR", attributes: { error: Je.message }, dashboardLog: !0 }), (ft = this._openTelemetry) === null || ft === void 0 || ft.completeSpan({ span: Be, status: 2, message: "Failed to stop Video Stream transmission: ".concat(Je) }), (nt = this._openTelemetry) === null || nt === void 0 || nt.completeSpan({ span: re, status: 2, message: "Failed to disable webcam: ".concat(Je) }), ze.dispatch(sr({ type: "error", text: "Error closing server-side webcam Producer: ".concat(Je) })); case 5: case "end": return _t.stop() } }, T, this, [[2, 4]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getMics", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: return O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Getting Microphones" }), $ = [], te.prev = 1, te.next = 2, this._updateMics(O); case 2: this._mics.forEach(function (re, ne) { $.push({ deviceId: ne, label: re.label }) }), this._openTelemetry.completeSpan({ status: 1, span: O, message: "Microphone list fetched successfully" }), te.next = 4; break; case 3: te.prev = 3, G = te.catch(1), Re.error("getMics() | Error", G), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: G.message, logType: "ERROR", attributes: { error: "Error in getMics() :: Not able to get Mic List" }, dashboardLog: !0 }), this._openTelemetry.completeSpan({ status: 2, span: O, message: "Error in getMics() :: ".concat(G.message) }); case 4: return te.abrupt("return", $); case 5: case "end": return te.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "changeMic", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt; return v().wrap(function (Je) { for (; ;)switch (Je.prev = Je.next) { case 0: if ($ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Changing Microphone", attributes: { inputType: (0, P.A)(w), micId: typeof w == "string" ? w : "none", customTrackInfo: (0, P.A)(w) === "object" ? JSON.stringify(w) : "none" } }), Je.prev = 1, (0, P.A)(w) != "object") { Je.next = 7; break } return Je.prev = 2, Je.next = 3, this.disableMic(!0, $); case 3: return Je.next = 4, this.enableMic(w, $); case 4: this._openTelemetry.completeSpan({ span: $, status: 1, message: "Microphone changed successfully" }), Je.next = 6; break; case 5: Je.prev = 5, nt = Je.catch(2), this._openTelemetry.completeSpan({ span: $, status: 2, message: "Error changing microphone with the given configuration :: ".concat(nt.message) }); case 6: Je.next = 12; break; case 7: return re = w, Je.next = 8, this._updateMics($); case 8: if (ne = (z = this._openTelemetry) === null || z === void 0 ? void 0 : z.trace({ spanName: "Selecting microphone device to switch to", span: $ }), me = Array.from(this._mics.keys()), Te = me.length, ke = this._mic.device ? this._mic.device.deviceId : void 0, re != null && re != null ? Be = me.indexOf(re) : (Be = me.indexOf(ke), Be < Te - 1 ? Be++ : Be = 0), this._mic.device = this._mics.get(me[Be]), this._mic.device) { Je.next = 9; break } throw (Qe = this._videosdkLogs) === null || Qe === void 0 || Qe.pushLogs({ logText: "Error changeMic : No mic Found", logType: "ERROR" }), (Me = this._openTelemetry) === null || Me === void 0 || Me.completeSpan({ span: ne, status: 2, message: "Failed to select Microphone device. ".concat(w ? "Microphone Device with deviceId (".concat(w, ") does not exist.") : "No webcam device found") }), new Error("No microphone device found"); case 9: return (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: ne, status: 1, message: "Microphone device selected successfully", attributes: { selectedMicrophone: this._mic.device ? JSON.stringify(this._mic.device) : "No microphone devices found" } }), Je.next = 10, this.disableMic(!0, $); case 10: return Je.next = 11, this.enableMic(void 0, $); case 11: (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ span: $, status: 1, message: "Microphone changed successfully" }); case 12: Je.next = 14; break; case 13: Je.prev = 13, jt = Je.catch(1), (je = this._openTelemetry) === null || je === void 0 || je.completeSpan({ span: $, status: 2, message: "Something went wrong while changing microphone. Error : ".concat(jt.message) }), (ft = this._videosdkLogs) === null || ft === void 0 || ft.pushLogs({ logText: "Error changeMic() | Error", logType: "ERROR", attributes: { error: jt.message } }); case 14: case "end": return Je.stop() } }, T, this, [[1, 13], [2, 5]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "getWebcams", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: return O = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Getting Webcams" }), $ = [], te.prev = 1, te.next = 2, this._updateWebcams(O); case 2: this._webcams.forEach(function (re, ne) { $.push({ deviceId: ne, label: re.label, facingMode: re.facing || "environment" }) }), this._openTelemetry.completeSpan({ status: 1, span: O, message: "Webcams fetched successfully" }), te.next = 4; break; case 3: te.prev = 3, G = te.catch(1), Re.error("getWebcams() | failed %o", G), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: G.message, logType: "ERROR", attributes: { error: "Error in getWebcams() :: Not able to get Webcam List" }, dashboardLog: !0 }), this._openTelemetry.completeSpan({ status: 2, span: O, message: "Error in getWebcams() :: ".concat(G.message) }); case 4: return te.abrupt("return", $); case 5: case "end": return te.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "replaceWebcamStream", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: if (!this._webcamProducer) { $.next = 2; break } return O = w.getVideoTracks()[0], $.next = 1, this._webcamProducer.replaceTrack({ track: O }); case 1: this._eventEmitter.emit("UPDATE_PRODUCER", { producer: this._webcamProducer }), $.next = 4; break; case 2: return $.next = 3, this.disableWebcam(); case 3: return $.next = 4, this.enableWebcam(w); case 4: case "end": return $.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "changeWebcam", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt; return v().wrap(function (Je) { for (; ;)switch (Je.prev = Je.next) { case 0: if ($ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Changing Webcam", attributes: { inputType: (0, P.A)(w), webcamId: typeof w == "string" ? w : "none", customTrackInfo: (0, P.A)(w) === "object" ? JSON.stringify(w) : "none" } }), (0, P.A)(w) !== "object") { Je.next = 6; break } return Je.prev = 1, Je.next = 2, this.disableWebcam($); case 2: return Je.next = 3, this.enableWebcam(w, $); case 3: this._openTelemetry.completeSpan({ span: $, status: 1, message: "Webcam changed successfully" }), Je.next = 5; break; case 4: Je.prev = 4, nt = Je.catch(1), Re.error("changeWebcam() | failed: %o", nt), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: "Error Could not change webcam", logType: "ERROR", attributes: { object: JSON.stringify(w), error: nt.message } }), this._openTelemetry.completeSpan({ span: $, status: 2, message: "Error changing webcam with the given configuration :: ".concat(nt.message) }), ze.dispatch(sr({ type: "error", text: "Could not change webcam: ".concat(nt) })); case 5: Je.next = 12; break; case 6: return Je.prev = 6, Je.next = 7, this._updateWebcams($); case 7: if (ne = (G = this._openTelemetry) === null || G === void 0 ? void 0 : G.trace({ spanName: "Selecting webcam device to switch to", span: $ }), me = Array.from(this._webcams.keys()), Te = me.length, ke = this._webcam.device ? this._webcam.device.deviceId : void 0, w != null && w != null ? Be = me.indexOf(w) : (Be = me.indexOf(ke), Be < Te - 1 ? Be++ : Be = 0), this._webcam.device = this._webcams.get(me[Be]), Re.debug("changeWebcam() | new selected webcam [device:%o]", this._webcam.device), this._webcam.resolution = this._webcam.resolution || "hd", this._webcam.device) { Je.next = 8; break } throw (Qe = this._videosdkLogs) === null || Qe === void 0 || Qe.pushLogs({ logText: "Error changeWebcam : No webcam Found", logType: "ERROR" }), (Me = this._openTelemetry) === null || Me === void 0 || Me.completeSpan({ span: ne, status: 2, message: "Failed to select Webcam device. ".concat(w ? "Webcam Device with deviceId (".concat(w, ") does not exist.") : "No webcam device found") }), new Error("No webcam device found"); case 8: return (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ span: ne, status: 1, message: "Webcam device selected successfully", attributes: { selectedWebcam: this._webcam.device ? JSON.stringify(this._webcam.device) : "No webcam devices found" } }), Je.next = 9, this.disableWebcam($); case 9: return Je.next = 10, this.enableWebcam(void 0, $); case 10: return (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: $, status: 1, message: "Webcam changed successfully" }), Je.abrupt("return"); case 11: Je.prev = 11, jt = Je.catch(6), Re.error("changeWebcam() | failed: %o", jt), (je = this._videosdkLogs) === null || je === void 0 || je.pushLogs({ logText: "Error Could not change webcam", logType: "ERROR", attributes: { object: JSON.stringify(w), error: jt.message } }), (ft = this._openTelemetry) === null || ft === void 0 || ft.completeSpan({ span: $, status: 2, message: "Something went wrong while changing webcam. Error : ".concat(jt.message) }), ze.dispatch(sr({ type: "error", text: "Could not change webcam: ".concat(jt) })); case 12: case "end": return Je.stop() } }, T, this, [[1, 4], [6, 11]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "changeWebcamResolution", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: Re.debug("changeWebcamResolution()"), ne.prev = 1, G = this._webcam.resolution, ne.next = G === "qvga" ? 2 : G === "vga" ? 3 : G === "hd" ? 4 : 5; break; case 2: return this._webcam.resolution = "vga", ne.abrupt("continue", 6); case 3: return this._webcam.resolution = "hd", ne.abrupt("continue", 6); case 4: return this._webcam.resolution = "qvga", ne.abrupt("continue", 6); case 5: this._webcam.resolution = "hd"; case 6: return Re.debug("changeWebcamResolution() | calling getUserMedia()"), ne.prev = 7, ne.next = 8, navigator.mediaDevices.getUserMedia({ video: Rn({ deviceId: { exact: this._webcam.device.deviceId } }, fu[this._webcam.resolution]) }); case 8: w = ne.sent, ne.next = 10; break; case 9: return ne.prev = 9, te = ne.catch(7), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Error in getUserMedia for changeWebcamResolution", logType: "ERROR", attributes: { error: JSON.stringify(te) } }), te.message === "Permission denied" || te.name === "NotAllowedError" ? this._emitError(Ke.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED) : this._emitError(Ke.q.ERROR_GET_VIDEO_MEDIA), ne.abrupt("return"); case 10: return $ = w.getVideoTracks()[0], ne.next = 11, this._webcamProducer.replaceTrack({ track: $ }); case 11: ze.dispatch(Vi(this._webcamProducer.id, $)), ne.next = 13; break; case 12: ne.prev = 12, re = ne.catch(1), Re.error("changeWebcamResolution() | failed: %o", re), (z = this._videosdkLogs) === null || z === void 0 || z.pushLogs({ logText: "Error Could not change webcam resolution", logType: "ERROR", attributes: { error: re.message } }), ze.dispatch(sr({ type: "error", text: "Could not change webcam resolution: ".concat(re) })); case 13: case "end": return ne.stop() } }, T, this, [[1, 12], [7, 9]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "enableShare", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O = this, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We, Ve, gt, wt, $t, Ut, Ot, bt, Zt, lr, qt, st, Ye, Le, Ae, Pt, Yt, Ft, nr, fr, Mr, Sr, er, ln, Lr, Nr, en, kn, gn, Sn = arguments, Tn, un, Qr; return v().wrap(function (Ct) { for (; ;)switch (Ct.prev = Ct.next) { case 0: if ($ = Sn.length > 0 && Sn[0] !== void 0 ? Sn[0] : void 0, z = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Enabling Screen Share with".concat($ ? " " : "out ", "Custom Screen Sharing Track"), attributes: { customShareConfig: $ ? JSON.stringify($) : "Custom Track not provided" } }), Re.debug("enableShare()"), !this._shareProducer) { Ct.next = 1; break } return (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: z, status: 2, message: "Screen sharing is already enabled" }), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Attempted to call enableScreenShare() multiple times", attributes: { error: "Error in enableScreenShare() :: Screen Sharing is already enabled" }, logType: "ERROR", dashboardLog: !0 }), Ct.abrupt("return"); case 1: if (this._mediasoupDevice.canProduce("video")) { Ct.next = 2; break } return (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: z, status: 2, message: "Device is not capable of producing video for screen sharing." }), Re.error("enableShare() | cannot produce video"), Ct.abrupt("return"); case 2: if (ke = [], ze.dispatch(vo(!0)), Ct.prev = 3, Re.debug("enableShare() | calling getUserMedia()"), !($ && $.active)) { Ct.next = 4; break } Te = (jt = this._openTelemetry) === null || jt === void 0 ? void 0 : jt.trace({ spanName: "Utilising provided custom track", span: z, attributes: { customScreenShareTrackConfig: $ ? JSON.stringify($) : "Custom Track not provided" } }), ne = $.getVideoTracks()[0], me = $.getAudioTracks()[0], $.multiStream ? (Je = ne.getConstraints(), _t = Je.height, We = Je.frameRate, Ve = Ee.$.screenShareProfiles["h".concat(_t, "p_").concat(We, "fps")], gt = [{ maxBitrate: Ve.bitrates.high, maxFramerate: We, scalabilityMode: "S3T3", dtx: !0 }, { maxBitrate: Ve.bitrates.medium, maxFramerate: We, scalabilityMode: "S2T3", dtx: !0 }, { maxBitrate: Ve.bitrates.low, maxFramerate: We, scalabilityMode: "S1T3", dtx: !0 }], ke = gt) : ke = Jo, Ct.next = 10; break; case 4: return Te = (wt = this._openTelemetry) === null || wt === void 0 ? void 0 : wt.trace({ spanName: "Creating Screenshare Track", span: z }), Ct.prev = 5, Ct.next = 6, navigator.mediaDevices.getDisplayMedia({ audio: !0, video: { width: { max: 1920 }, height: { max: 1080 }, frameRate: { max: 10 } } }); case 6: Ut = Ct.sent, Ct.next = 8; break; case 7: return Ct.prev = 7, Tn = Ct.catch(5), (Ot = this._videosdkLogs) === null || Ot === void 0 || Ot.pushLogs({ logText: "Error in getDisplayMedia for screen share", logType: "ERROR", attributes: { error: JSON.stringify(Tn) } }), (bt = this._openTelemetry) === null || bt === void 0 || bt.completeSpan({ message: "Error occured while creating Screenshare track :".concat(Tn), span: Te, status: 2 }), (Zt = this._openTelemetry) === null || Zt === void 0 || Zt.completeSpan({ span: z, status: 2, message: "Error in getDisplayMedia for screen share ".concat(Tn) }), Tn.message === "Permission denied" || Tn.name === "NotAllowedError" ? this._emitError(Ke.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED) : this._emitError(Ke.q.ERROR_GET_DISPLAY_MEDIA), Ct.abrupt("return"); case 8: if (Ut) { Ct.next = 9; break } return ze.dispatch(vo(!1)), (lr = this._openTelemetry) === null || lr === void 0 || lr.completeSpan({ message: "Error occured while creating Screenshare track : Stream not found.", span: Te, status: 2 }), (qt = this._openTelemetry) === null || qt === void 0 || qt.completeSpan({ span: z, status: 2, message: "Stream not found" }), Ct.abrupt("return"); case 9: ne = Ut.getVideoTracks()[0], me = Ut.getAudioTracks()[0], ke = Jo, ($t = this._openTelemetry) === null || $t === void 0 || $t.completeSpan({ message: $ ? "" : "Screenshare Track Generated", span: Te, attributes: { customScreenshareTrackConfig: JSON.stringify($ || { audio: !0, video: { width: 1920, height: 1080, frameRate: 10 } }) }, status: 1 }); case 10: if (st = (Be = this._openTelemetry) === null || Be === void 0 ? void 0 : Be.trace({ spanName: "Generating configurations for sending Screenshare Stream", span: z }), Le = { videoGoogleStartBitrate: 1e3 }, !this._forceH264) { Ct.next = 12; break } if (Ye = this._mediasoupDevice.rtpCapabilities.codecs.find(function (_r) { return _r.mimeType.toLowerCase() === "video/h264" }), Ye) { Ct.next = 11; break } throw (Ae = this._videosdkLogs) === null || Ae === void 0 || Ae.pushLogs({ logText: "Error EnableShare : desired H264 codec+configuration is not supported", logType: "ERROR" }), new Error("desired H264 codec+configuration is not supported"); case 11: Ct.next = 13; break; case 12: if (!this._forceVP9) { Ct.next = 13; break } if (Ye = this._mediasoupDevice.rtpCapabilities.codecs.find(function (_r) { return _r.mimeType.toLowerCase() === "video/vp9" }), Ye) { Ct.next = 13; break } throw (Pt = this._videosdkLogs) === null || Pt === void 0 || Pt.pushLogs({ logText: "Error EnableShare :desired VP9 codec+configuration is not supported", logType: "ERROR" }), new Error("desired VP9 codec+configuration is not supported"); case 13: return (Qe = this._openTelemetry) === null || Qe === void 0 || Qe.completeSpan({ span: st, status: 1, message: "Screenshare stream configuration generated", attributes: { appData: JSON.stringify({ encodings: ke.length > 0 ? ke : Jo, codecOptions: Le, codec: Ye }) } }), st = (Me = this._openTelemetry) === null || Me === void 0 ? void 0 : Me.trace({ spanName: "Starting Screen Share Stream transmission", span: z }), Ct.next = 14, this._sendTransport.produce({ track: ne, encodings: ke.length > 0 ? ke : Jo, codecOptions: Le, codec: Ye, appData: { share: !0, isEncrypted: this.isE2EEEnabled }, onRtpSender: function (mr) { O.e2eeManager && (mr.senderStreams = mr.createEncodedStreams()) } }); case 14: if (this._shareProducer = Ct.sent, this.e2eeManager && this.e2eeManager.emit("NEW_PRODUCER", this._shareProducer), Yt = js({ id: this._shareProducer.id, type: "share", paused: this._shareProducer.paused, track: this._shareProducer.track, rtpParameters: this._shareProducer.rtpParameters, codec: this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1], appData: { share: !0, isEncrypted: this.isE2EEEnabled }, instance: this._shareProducer, rtpSender: this._shareProducer.rtpSender }), ze.dispatch(Yt), (je = this._openTelemetry) === null || je === void 0 || je.completeSpan({ span: st, status: 1, message: "Screen share transmission started successfully" }), (ft = this._openTelemetry) === null || ft === void 0 || ft.traceAutoComplete({ spanName: "Emitting STREAM_ENABLED event", span: z, status: 1 }), this._eventEmitter.emit(Yt.type, Yt.payload), this._shareProducer.on("transportclose", function () { var _r, mr = ys(O._shareProducer.id); ze.dispatch(mr), O._eventEmitter.emit(mr.type, mr.payload), (_r = O._shareProducer) === null || _r === void 0 || _r.close(), O._shareProducer = null }), this._shareProducer.on("trackended", function () { var _r; (_r = O._openTelemetry) === null || _r === void 0 || _r.traceAutoComplete({ spanName: "Screen share track ended or Share disconnected!", span: z, status: 2 }), ze.dispatch(sr({ type: "error", text: "Share disconnected!" })), O.disableShare().catch(function () { }) }), !me) { Ct.next = 19; break } return Ct.prev = 15, Mr = { opusStereo: 1, opusDtx: 1 }, st = (Ft = this._openTelemetry) === null || Ft === void 0 ? void 0 : Ft.trace({ spanName: "Starting Screen Share Audio Stream transmission", span: z }), Ct.next = 16, this._sendTransport.produce({ track: me, codecOptions: Mr, appData: { share: !0, isEncrypted: this.isE2EEEnabled }, onRtpSender: function (mr) { O.e2eeManager && (mr.senderStreams = mr.createEncodedStreams()) } }); case 16: this._shareAudioProducer = Ct.sent, Sr = js({ id: this._shareAudioProducer.id, type: "share", paused: this._shareAudioProducer.paused, track: this._shareAudioProducer.track, rtpParameters: this._shareAudioProducer.rtpParameters, codec: this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1], appData: { share: !0, isEncrypted: this.isE2EEEnabled }, instance: this._shareAudioProducer, rtpSender: this._shareAudioProducer.rtpSender }), ze.dispatch(Sr), (nr = this._openTelemetry) === null || nr === void 0 || nr.completeSpan({ span: st, status: 1, message: "Screen Share Audio Stream transmission started successfully" }), this.e2eeManager && this.e2eeManager.emit("NEW_PRODUCER", this._shareAudioProducer), (fr = this._openTelemetry) === null || fr === void 0 || fr.traceAutoComplete({ spanName: "Emitting STREAM_ENABLED event", span: z, status: 1 }), this._eventEmitter.emit(Sr.type, Sr.payload), this._shareAudioProducer.on("transportclose", function () { var _r, mr = ys(O._shareAudioProducer.id); ze.dispatch(mr), O._eventEmitter.emit(mr.type, mr.payload), (_r = O._shareAudioProducer) === null || _r === void 0 || _r.close(), O._shareAudioProducer = null }), this._shareAudioProducer.on("trackended", function () { var _r; (_r = O._openTelemetry) === null || _r === void 0 || _r.traceAutoComplete({ spanName: "Screen share audio track ended", span: z, status: 2 }), ze.dispatch(sr({ type: "error", text: "Share disconnected!" })) }), Ct.next = 19; break; case 17: return Ct.prev = 17, un = Ct.catch(15), Ct.next = 18, this._socketRequest("produceError", { mediaType: "shareAudio", message: un.message }); case 18: (er = this._videosdkLogs) === null || er === void 0 || er.pushLogs({ logText: "Error in shareAudio produceError", logType: "ERROR", attributes: { error: un.message } }); case 19: (nt = this._openTelemetry) === null || nt === void 0 || nt.completeSpan({ span: z, status: 1, message: "Screen Share enabled successfully" }), Ct.next = 22; break; case 20: return Ct.prev = 20, Qr = Ct.catch(3), Re.error("enableShare() | failed:%o", Qr), (ln = this._openTelemetry) === null || ln === void 0 || ln.completeSpan({ span: z, status: 2, attributes: { error: Qr.message }, message: "Error in enableScreenShare() : Screenshare stream could not be produced" }), console.log("screen share catch", Qr.message), (Lr = this._videosdkLogs) === null || Lr === void 0 || Lr.pushLogs({ logText: "Error in enableShare video produceError", logType: "ERROR", attributes: { error: Qr.message } }), Qr.name !== "NotAllowedError" && ze.dispatch(sr({ type: "error", text: "Error sharing: ".concat(Qr) })), Ct.next = 21, this._socketRequest("produceError", { mediaType: "share", message: Qr.message }); case 21: ne && ne.stop(), me && me.stop(); case 22: ze.dispatch(vo(!1)), this._shareProducer && (Nr = 0, en = this._metrics.addNewProbe(this._shareProducer, "share_producer"), en.onStatsCollected = function (_r) { try { if (O._stats.producerStats || (O._stats.producerStats = {}), O._stats.producerStats.share || (O._stats.producerStats.share = []), O._shareProducer) { var mr; O._latestStats[(mr = O._shareProducer) === null || mr === void 0 ? void 0 : mr.id] = [] } _r.video.forEach(function (xn) { if (O._shareProducer) { var tn; O._latestStats[(tn = O._shareProducer) === null || tn === void 0 ? void 0 : tn.id].push(xn) } }), Nr % 5 == 0 && O._shareProducer != null && O._stats.producerStats.share.push({ timestamp: new Date, stats: O._latestStats[O._shareProducer.id] }), Nr++ } catch (xn) { var qr; (qr = O._videosdkLogs) === null || qr === void 0 || qr.pushLogs({ logText: "Error PRODUCER Stats ERROR", logType: "ERROR", attributes: { error: xn.message } }) } }, en.start(), this._shareProducer.observer.on("close", function () { en.stop(), O._metrics.removeExistingProbe(en) })), this._shareAudioProducer && (kn = 0, gn = this._metrics.addNewProbe(this._shareAudioProducer, "share_audio_producer"), gn.onStatsCollected = function (_r) { try { if (O._stats.producerStats || (O._stats.producerStats = {}), O._stats.producerStats.shareAudio || (O._stats.producerStats.shareAudio = []), O._shareAudioProducer) { var mr; O._latestStats[(mr = O._shareAudioProducer) === null || mr === void 0 ? void 0 : mr.id] = [] } _r.audio.forEach(function (xn) { if (O._shareAudioProducer) { var tn; O._latestStats[(tn = O._shareAudioProducer) === null || tn === void 0 ? void 0 : tn.id].push(xn) } }), kn % 5 == 0 && O._shareAudioProducer != null && O._stats.producerStats.shareAudio.push(Rn({ timestamp: new Date }, O._latestStats[O._shareAudioProducer.id] ? O._latestStats[O._shareAudioProducer.id][0] : {})), kn++ } catch (xn) { var qr; (qr = O._videosdkLogs) === null || qr === void 0 || qr.pushLogs({ logText: "Error PRODUCER Stats ERROR", logType: "ERROR", attributes: { error: xn.message } }) } }, gn.start(), this._shareAudioProducer.observer.on("close", function () { gn.stop(), O._metrics.removeExistingProbe(gn) })); case 23: case "end": return Ct.stop() } }, T, this, [[3, 20], [5, 7], [15, 17]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "disableShare", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We; return v().wrap(function (Ve) { for (; ;)switch (Ve.prev = Ve.next) { case 0: if (Re.debug("disableShare()"), re = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Disabling Screen Share", status: 1 }), this._shareProducer) { Ve.next = 1; break } return (ne = this._openTelemetry) === null || ne === void 0 || ne.completeSpan({ span: re, status: 2, message: "Screen sharing is already disabled" }), Ve.abrupt("return"); case 1: return me = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Disposing Screenshare Track", span: re, attributes: { shareTrackConfig: ($ = this._shareProducer) !== null && $ !== void 0 && $.track ? JSON.stringify(function (gt) { return { kind: gt.kind, id: gt.id, label: gt.label } }(this._shareProducer.track)) : "Track not provided" } }), this._shareProducer.close(), Te = ys(this._shareProducer.id), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ span: me, status: 1, message: "Screenshare track disposed successfully" }), ze.dispatch(Te), (G = this._openTelemetry) === null || G === void 0 || G.traceAutoComplete({ spanName: "Emitting STREAM_DISABLED event", span: re, status: 1 }), this._eventEmitter.emit(Te.type, Te.payload), this._shareAudioProducer && (je = (ke = this._openTelemetry) === null || ke === void 0 ? void 0 : ke.trace({ spanName: "Disposing Screenshare Audio Track", span: re, attributes: { shareAudioTrackConfig: (Be = this._shareAudioProducer) !== null && Be !== void 0 && Be.track ? JSON.stringify(function (gt) { return { kind: gt.kind, id: gt.id, label: gt.label } }(this._shareAudioProducer.track)) : "Track not provided" } }), this._shareAudioProducer.close(), Te = ys(this._shareAudioProducer.id), (Qe = this._openTelemetry) === null || Qe === void 0 || Qe.completeSpan({ span: je, status: 1, message: "Screenshare Audio Track disposed successfully" }), ze.dispatch(Te), (Me = this._openTelemetry) === null || Me === void 0 || Me.traceAutoComplete({ spanName: "Emitting STREAM_DISABLED event", span: re, status: 1 }), this._eventEmitter.emit(Te.type, Te.payload)), Ve.prev = 2, ft = (nt = this._openTelemetry) === null || nt === void 0 ? void 0 : nt.trace({ spanName: "Stopping Screenshare Stream transmission", span: re }), Ve.next = 3, this._socketRequest("closeProducer", { producerId: this._shareProducer.id }); case 3: if (!this._shareAudioProducer) { Ve.next = 4; break } return this._openTelemetry.traceAutoComplete({ spanName: "Stopping Screenshare Audio Stream transmission", span: ft }), Ve.next = 4, this._socketRequest("closeProducer", { producerId: this._shareAudioProducer.id }); case 4: this._openTelemetry.completeSpan({ span: ft, message: this._shareAudioProducer ? "Screenshare Stream and Screenshare Audio Stream transmission stopped successfully" : "Screenshare Stream transmission stopped successfully", status: 1 }), Ve.next = 6; break; case 5: Ve.prev = 5, We = Ve.catch(2), ze.dispatch(sr({ type: "error", text: "Error closing server-side share Producer: ".concat(We) })), (jt = this._openTelemetry) === null || jt === void 0 || jt.completeSpan({ span: ft, status: 2, message: "Failed to stop Screenshare Stream transmission: ".concat(We) }), (Je = this._openTelemetry) === null || Je === void 0 || Je.completeSpan({ span: re, status: 2, message: "Error closing server-side screen share producer ".concat(We) }), (_t = this._videosdkLogs) === null || _t === void 0 || _t.pushLogs({ logText: "Error closing server-side share Producer", logType: "ERROR", attributes: { error: We.message } }); case 6: this._shareProducer = null, this._shareAudioProducer = null, (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ span: re, status: 1, message: "Screen share disabled successfully" }); case 7: case "end": return Ve.stop() } }, T, this, [[2, 5]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "enableAudioOnly", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: Re.debug("enableAudioOnly()"), ze.dispatch(mo(!0)), this.disableWebcam(), w = Dn(this._consumers.values()), G.prev = 1, w.s(); case 2: if ((O = w.n()).done) { G.next = 5; break } if ($ = O.value, $.kind === "video") { G.next = 3; break } return G.abrupt("continue", 4); case 3: this._pauseConsumer($); case 4: G.next = 2; break; case 5: G.next = 7; break; case 6: G.prev = 6, z = G.catch(1), w.e(z); case 7: return G.prev = 7, w.f(), G.finish(7); case 8: ze.dispatch(Nl(!0)), ze.dispatch(mo(!1)); case 9: case "end": return G.stop() } }, T, this, [[1, 6, 7, 8]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "disableAudioOnly", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: Re.debug("disableAudioOnly()"), ze.dispatch(mo(!0)), !this._webcamProducer && this._produce && (Ml() || {}).webcamEnabled && this.enableWebcam(), w = Dn(this._consumers.values()), G.prev = 1, w.s(); case 2: if ((O = w.n()).done) { G.next = 5; break } if ($ = O.value, $.kind === "video") { G.next = 3; break } return G.abrupt("continue", 4); case 3: this._resumeConsumer($); case 4: G.next = 2; break; case 5: G.next = 7; break; case 6: G.prev = 6, z = G.catch(1), w.e(z); case 7: return G.prev = 7, w.f(), G.finish(7); case 8: ze.dispatch(Nl(!1)), ze.dispatch(mo(!1)); case 9: case "end": return G.stop() } }, T, this, [[1, 6, 7, 8]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "muteAudio", value: function () { var m = (0, u.A)(v().mark(function T() { return v().wrap(function (w) { for (; ;)switch (w.prev = w.next) { case 0: Re.debug("muteAudio()"), ze.dispatch(Uo(!0)); case 1: case "end": return w.stop() } }, T) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "unmuteAudio", value: function () { var m = (0, u.A)(v().mark(function T() { return v().wrap(function (w) { for (; ;)switch (w.prev = w.next) { case 0: Re.debug("unmuteAudio()"), ze.dispatch(Uo(!1)); case 1: case "end": return w.stop() } }, T) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "handleRemoteRestartIce", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return z = w.iceParameters, G = w.transportId, w.internalSpan, G === ((O = this._sendTransport) === null || O === void 0 ? void 0 : O.id) && this._sendTransport.restartIce({ iceParameters: z }), G === (($ = this._recvTransport) === null || $ === void 0 ? void 0 : $.id) && this._recvTransport.restartIce({ iceParameters: z }), ne.prev = 1, ne.next = 2, this._socketRequest("iceRestarted", { transportId: G }); case 2: ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error handleRemoteRestartIce() ICE restart failed", logType: "ERROR", attributes: { error: re.message } }), ze.dispatch(sr({ type: "error", text: "ICE restart failed: ".concat(re) })); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "restartIce", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (Re.debug("restartIce()"), ze.dispatch(Bl(!0)), G.prev = 1, !this._sendTransport) { G.next = 3; break } return G.next = 2, this._socketRequest("restartIce", { transportId: this._sendTransport.id }); case 2: return w = G.sent, G.next = 3, this._sendTransport.restartIce({ iceParameters: w }); case 3: if (!this._recvTransport) { G.next = 5; break } return G.next = 4, this._socketRequest("restartIce", { transportId: this._recvTransport.id }); case 4: return O = G.sent, G.next = 5, this._recvTransport.restartIce({ iceParameters: O }); case 5: ze.dispatch(sr({ text: "ICE restarted" })), G.next = 7; break; case 6: G.prev = 6, z = G.catch(1), Re.error("restartIce() | failed:%o", z), ze.dispatch(sr({ type: "error", text: "ICE restart failed: ".concat(z) })), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error restartIce() ICE restart failed", logType: "ERROR", attributes: { error: z.message } }); case 7: ze.dispatch(Bl(!1)); case 8: case "end": return G.stop() } }, T, this, [[1, 6]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "_socketRequest", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O = this, $, z = arguments; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return $ = z.length > 1 && z[1] !== void 0 ? z[1] : {}, G.abrupt("return", new Promise(function (te, re) { O._webSocket.emit("request", { method: w, request: !0, data: $ }, function (ne) { ne != null && ne.error ? re(new Error(ne.error)) : te(ne.data) }) })); case 1: case "end": return G.stop() } }, T) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "_socketRequestForPubsub", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O = this, $, z = arguments; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return $ = z.length > 1 && z[1] !== void 0 ? z[1] : {}, G.abrupt("return", new Promise(function (te, re) { O._webSocket.timeout(3e4).emit("request", { method: w, request: !0, data: $ }, function (ne, me) { if (ne) return re(ne); me != null && me.error ? re(new Error(me.error)) : te(me.data) }) })); case 1: case "end": return G.stop() } }, T) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "setMaxSendingSpatialLayer", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: if (Re.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]", w), z.prev = 1, !this._webcamProducer) { z.next = 3; break } return z.next = 2, this._webcamProducer.setMaxSpatialLayer(w); case 2: z.next = 4; break; case 3: if (!this._shareProducer) { z.next = 4; break } return z.next = 4, this._shareProducer.setMaxSpatialLayer(w); case 4: z.next = 6; break; case 5: z.prev = 5, $ = z.catch(1), Re.error("setMaxSendingSpatialLayer() | failed:%o", $), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Error setting max sending video spatial layer", logType: "ERROR", attributes: { error: $.message } }), ze.dispatch(sr({ type: "error", text: "Error setting max sending video spatial layer: ".concat($) })); case 6: case "end": return z.stop() } }, T, this, [[1, 5]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "setWebcamQuality", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (O = this._openTelemetry.trace({ spanName: "Setting Webcam Quality to ".concat(w) }), this._webcamProducer) { G.next = 1; break } return G.abrupt("return"); case 1: if ($ = this._webcam.resolution, z = hu[$][w].s, this._webcamProducer.maxSpatialLayer != z) { G.next = 2; break } return G.abrupt("return"); case 2: return G.next = 3, this._webcamProducer.setMaxSpatialLayer(z); case 3: this._openTelemetry.completeSpan({ span: O, status: 1, message: "Webcam Quality successfully set to ".concat(w) }); case 4: case "end": return G.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "setConsumerScreenShareQuality", value: function () { var m = (0, u.A)(v().mark(function T(w, O, $) { var z, G, te, re, ne, me, Te, ke; return v().wrap(function (Be) { for (; ;)switch (Be.prev = Be.next) { case 0: return re = this._peerSpans.get($), ne = (z = this._openTelemetry) === null || z === void 0 ? void 0 : z.trace({ spanName: "Setting Screen Share Quality to ".concat(O), span: re }), me = { high: { spatialLayer: 2, temporalLayer: 2 }, med: { spatialLayer: 1, temporalLayer: 2 }, low: { spatialLayer: 0, temporalLayer: 2 } }, Te = me[O] || me.high, ke = (G = this._openTelemetry) === null || G === void 0 ? void 0 : G.trace({ spanName: "Fetching Screen share spatial & temporal layer settings", span: ne, attributes: { selectedQuality: JSON.stringify(Te) } }), Be.next = 1, this.setConsumerPreferredLayers(w, Te.spatialLayer, Te.temporalLayer, ke); case 1: (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ message: "Screen share quality set successfully", span: ne, status: 1 }); case 2: case "end": return Be.stop() } }, T, this) })); function C(T, w, O) { return m.apply(this, arguments) } return C }() }, { key: "setConsumerQuality", value: function () { var m = (0, u.A)(v().mark(function T(w, O, $) { var z, G, te, re, ne, me, Te, ke, Be; return v().wrap(function (Qe) { for (; ;)switch (Qe.prev = Qe.next) { case 0: return re = this._webcam.resolution, ne = this._peerSpans.get($), me = (z = this._openTelemetry) === null || z === void 0 ? void 0 : z.trace({ spanName: "Setting Webcam Quality to ".concat(O), span: ne }), Te = hu[re][O].s, ke = hu[re][O].t, Be = (G = this._openTelemetry) === null || G === void 0 ? void 0 : G.trace({ spanName: "Fetching Webcam spatial & temporal layer settings", span: me, attributes: { quality: O } }), Qe.next = 1, this.setConsumerPreferredLayers(w, Te, ke, Be); case 1: (te = this._openTelemetry) === null || te === void 0 || te.completeSpan({ message: "Webcam quality set successfully", span: me, status: 1 }); case 2: case "end": return Qe.stop() } }, T, this) })); function C(T, w, O) { return m.apply(this, arguments) } return C }() }, { key: "setViewPort", value: function () { var m = (0, u.A)(v().mark(function T(w, O, $, z) { var G, te, re, ne, me, Te, ke, Be, Qe, Me; return v().wrap(function (je) { for (; ;)switch (je.prev = je.next) { case 0: if (this._consumers.get(w.id)) { je.next = 1; break } return je.abrupt("return"); case 1: if (ne = this._peerSpans.get(z), me = (G = this._openTelemetry) === null || G === void 0 ? void 0 : G.trace({ spanName: "Setting ViewPort", span: ne, attributes: { viewportWidth: JSON.stringify(O), viewportHeight: JSON.stringify($) } }), Te = (te = this._openTelemetry) === null || te === void 0 ? void 0 : te.trace({ spanName: "Fetching spatial & temporal layer settings", span: me }), ke = (0, ae.ed)(this._consumers.get(w.id), O, $), Be = ke.consumerId, Qe = ke.newPreferredSpatialLayer, Me = ke.newPreferredTemporalLayer, !(Qe === w.preferredSpatialLayer && Me === w.preferredTemporalLayer)) { je.next = 2; break } return this._openTelemetry.completeSpan({ span: Te }), je.abrupt("return"); case 2: if (!Be) { je.next = 3; break } return je.next = 3, this.setConsumerPreferredLayers(Be, Qe, Me, Te); case 3: (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ message: "Viewport set successfully", span: me, status: 1 }); case 4: case "end": return je.stop() } }, T, this) })); function C(T, w, O, $) { return m.apply(this, arguments) } return C }() }, { key: "setConsumerPreferredLayers", value: function () { var m = (0, u.A)(v().mark(function T(w, O, $, z) { var G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: return this._openTelemetry.traceAutoComplete({ spanName: "Setting preferred spatial and temporal layers", span: z || null, attributes: { spatialLayers: String(O), temporalLayers: String($) } }), Re.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]", w, O, $), ne.prev = 1, G = this._consumers.get(w), G.spatialLayers > 1 && (G.preferredSpatialLayer = O, G.preferredTemporalLayer = $), ne.next = 2, this._socketRequest("setConsumerPreferredLayers", { consumerId: w, spatialLayer: O, temporalLayer: $ }); case 2: this._openTelemetry.completeSpan({ span: z, message: "Preferred layers set successfully", status: 1 }), ze.dispatch(Ul(w, O, $)), ne.next = 4; break; case 3: ne.prev = 3, re = ne.catch(1), Re.error("setConsumerPreferredLayers() | failed:%o", re), (te = this._videosdkLogs) === null || te === void 0 || te.pushLogs({ logText: "Error setting Consumer preferred layers:", logType: "ERROR", attributes: { error: re.message } }), this._openTelemetry.completeSpan({ span: z, message: "Failed to set preferred layers: ".concat(re.message), status: 2 }), ze.dispatch(sr({ type: "error", text: "Error setting Consumer preferred layers: ".concat(re) })); case 4: case "end": return ne.stop() } }, T, this, [[1, 3]]) })); function C(T, w, O, $) { return m.apply(this, arguments) } return C }() }, { key: "setConsumerPriority", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: return Re.debug("setConsumerPriority() [consumerId:%s, priority:%d]", w, O), G.prev = 1, G.next = 2, this._socketRequest("setConsumerPriority", { consumerId: w, priority: O }); case 2: ze.dispatch(Vl(w, O)), G.next = 4; break; case 3: G.prev = 3, z = G.catch(1), Re.error("setConsumerPriority() | failed:%o", z), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error setting Consumer priority", logType: "ERROR", attributes: { error: z.message } }), ze.dispatch(sr({ type: "error", text: "Error setting Consumer priority: ".concat(z) })); case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "requestConsumerKeyFrame", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: return Re.debug("requestConsumerKeyFrame() [consumerId:%s]", w), z.prev = 1, z.next = 2, this._socketRequest("requestConsumerKeyFrame", { consumerId: w }); case 2: ze.dispatch(sr({ text: "Keyframe requested for video consumer" })), z.next = 4; break; case 3: z.prev = 3, $ = z.catch(1), Re.error("requestConsumerKeyFrame() | failed:%o", $), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Error requesting key frame for Consumer", logType: "ERROR", attributes: { error: $.message } }), ze.dispatch(sr({ type: "error", text: "Error requesting key frame for Consumer: ".concat($) })); case 4: case "end": return z.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "enableChatDataProducer", value: function () { var m = (0, u.A)(v().mark(function T() { var w = this, O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: return Re.debug("enableChatDataProducer()"), z.prev = 1, z.next = 2, this._sendTransport.produceData({ ordered: !0, maxRetransmits: 5, label: "reliable_data_producer", appData: { info: "my-chat-DataProducer" } }); case 2: return this._reliableDataProducer = z.sent, this._reliableDataProducer.bufferedAmountLowThreshold = 65535, z.next = 3, this._sendTransport.produceData({ ordered: !1, label: "unreliable_data_producer", appData: { info: "my-chat-DataProducer" } }); case 3: this._unreliableDataProducer = z.sent, this._unreliableDataProducer.bufferedAmountLowThreshold = 65535, ze.dispatch(qa({ id: this._reliableDataProducer.id, sctpStreamParameters: this._reliableDataProducer.sctpStreamParameters, label: this._reliableDataProducer.label, protocol: this._reliableDataProducer.protocol })), this._reliableDataProducer.on("transportclose", function () { w._reliableDataProducer = null }), this._reliableDataProducer.on("open", function () { Re.debug('chat DataProducer "open" event') }), this._reliableDataProducer.on("close", function () { Re.error('chat DataProducer "close" event'), w._reliableDataProducer = null, ze.dispatch(sr({ type: "error", text: "Chat DataProducer closed" })) }), this._reliableDataProducer.on("error", function (G) { Re.error('chat DataProducer "error" event:%o', G), ze.dispatch(sr({ type: "error", text: "Chat DataProducer error: ".concat(G) })) }), ze.dispatch(qa({ id: this._unreliableDataProducer.id, sctpStreamParameters: this._unreliableDataProducer.sctpStreamParameters, label: this._unreliableDataProducer.label, protocol: this._unreliableDataProducer.protocol })), this._unreliableDataProducer.on("transportclose", function () { w._unreliableDataProducer = null }), this._unreliableDataProducer.on("open", function () { Re.debug('unreliable DataProducer "open" event') }), this._unreliableDataProducer.on("close", function () { Re.error('unreliable DataProducer "close" event'), w._unreliableDataProducer = null, ze.dispatch(sr({ type: "error", text: "unreliable DataProducer closed" })) }), this._unreliableDataProducer.on("error", function (G) { Re.error('unreliable DataProducer "error" event:%o', G), ze.dispatch(sr({ type: "error", text: "unreliable DataProducer error: ".concat(G) })) }), z.next = 5; break; case 4: throw z.prev = 4, $ = z.catch(1), Re.error("enableChatDataProducer() | failed:%o", $), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Error enabling chat DataProducer", logType: "ERROR", attributes: { error: $.message } }), ze.dispatch(sr({ type: "error", text: "Error enabling chat DataProducer: ".concat($) })), $; case 5: case "end": return z.stop() } }, T, this, [[1, 4]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "send", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O = this, $, z, G, te = arguments, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: if ($ = te.length > 1 && te[1] !== void 0 ? te[1] : { reliability: xo.y.RELIABLE }, ne.prev = 1, z = typeof w == "string" || w instanceof Blob || w instanceof ArrayBuffer || ArrayBuffer.isView(w), z) { ne.next = 2; break } throw new TypeError("Invalid payload type. Expected string | Blob | ArrayBuffer | ArrayBufferView"); case 2: if (G = 0, typeof w == "string" ? G = new TextEncoder().encode(w).length : w instanceof Blob ? G = w.size : (w instanceof ArrayBuffer || ArrayBuffer.isView(w)) && (G = w.byteLength), !(G > 15360)) { ne.next = 3; break } throw new Error("Payload too large: ".concat(G, " bytes. Max allowed is 15 KiB.")); case 3: if (!(!this._sendTransport || this._sendTransport.connectionState !== "connected")) { ne.next = 4; break } throw new Error("Cannot send message, Network is not available."); case 4: if ($.reliability !== xo.y.RELIABLE) { ne.next = 6; break } if (!(this._reliableDataProducer.bufferedAmount > this._reliableDataProducer.bufferedAmountLowThreshold)) { ne.next = 5; break } return Re.warn("Buffer full, waiting to resume"), ne.abrupt("return", new Promise(function (me, Te) { var ke = function () { try { O._reliableDataProducer.send(w), me(!0) } catch (Qe) { Te(Qe) } finally { O._reliableDataProducer.off("bufferedamountlow", ke) } }; O._reliableDataProducer.on("bufferedamountlow", ke) })); case 5: return this._reliableDataProducer.send(w), ne.abrupt("return", !0); case 6: if ($.reliability !== xo.y.UNRELIABLE) { ne.next = 8; break } if (!(this._unreliableDataProducer.bufferedAmount > this._unreliableDataProducer.bufferedAmountLowThreshold)) { ne.next = 7; break } return Re.warn("Buffer full, waiting to resume"), ne.abrupt("return", new Promise(function (me, Te) { var ke = function () { try { O._unreliableDataProducer.send(w), me(!0) } catch (Qe) { Te(Qe) } finally { O._unreliableDataProducer.off("bufferedamountlow", ke) } }; O._unreliableDataProducer.on("bufferedamountlow", ke) })); case 7: return this._unreliableDataProducer.send(w), ne.abrupt("return", !0); case 8: ne.next = 10; break; case 9: throw ne.prev = 9, re = ne.catch(1), Re.error("DataProducer.send() failed:%o", re), ze.dispatch(sr({ type: "error", text: "DataProducer.send() failed: ".concat(re) })), re; case 10: case "end": return ne.stop() } }, T, this, [[1, 9]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "changeDisplayName", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: return Re.debug('changeDisplayName() [displayName:"%s"]', w), Ol({ displayName: w }), $.prev = 1, $.next = 2, this._socketRequest("changeDisplayName", { displayName: w }); case 2: this._displayName = w, ze.dispatch($o(w)), ze.dispatch(sr({ text: "Display name changed" })), $.next = 4; break; case 3: $.prev = 3, O = $.catch(1), Re.error("changeDisplayName() | failed: %o", O), ze.dispatch(sr({ type: "error", text: "Could not change display name: ".concat(O) })), ze.dispatch($o()); case 4: case "end": return $.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "openConnection", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: return O = w.roomId, $ = w.payload, z.next = 1, this._socketRequest("openConnection", { roomId: O, payload: $ }).catch(function (G) { throw new Error(G) }); case 1: case "end": return z.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "closeConnection", value: function () { var m = (0, u.A)(v().mark(function T(w) { return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: return O.next = 1, this._socketRequest("closeConnection", { roomId: w }); case 1: case "end": return O.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "switchPeerRoom", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: return O = w.peerId, $ = w.roomId, z = w.payload, G = w.token, te.next = 1, this._socketRequest("switchPeerRoom", { roomId: $, peerId: O, payload: z, token: G }); case 1: case "end": return te.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "connectionSwitchPeerRoom", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return O = w.roomId, $ = w.connectionRoomId, z = w.peerId, G = w.payload, te = w.token, re.next = 1, this._socketRequest("connectionSwitchPeerRoom", { roomId: O, connectionRoomId: $, peerId: z, payload: G, token: te }); case 1: case "end": return re.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "connectionSendChatMessage", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: return O = w.roomId, $ = w.message, z.next = 1, this._socketRequest("connectionSendChatMessage", { roomId: O, message: $ }); case 1: case "end": return z.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "connectionEndMeeting", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: return O = w.roomId, $.next = 1, this._socketRequest("connectionCloseRoom", { roomId: O }); case 1: case "end": return $.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "setValue", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: if (te.prev = 0, w != null) { te.next = 1; break } throw new Error("The 'key' parameter is required."); case 1: if (typeof w == "string") { te.next = 2; break } throw new TypeError("Invalid type for 'key'. Expected a string."); case 2: if (!(O !== null && typeof O != "string")) { te.next = 3; break } throw new TypeError("Invalid type for 'value'. Expected a string or null."); case 3: if (O === null) { te.next = 4; break } if ($ = new TextEncoder().encode(O).length, !($ > 1024)) { te.next = 4; break } throw new Error("Payload too large: ".concat($, " bytes. Maximum allowed size is 1024 bytes (1KB).")); case 4: return te.next = 5, this._socketRequest("realtimeStoreSet", { key: w, value: O }); case 5: if (z = te.sent, z.status !== "error") { te.next = 6; break } throw new Error(z.message ? z.message : "Something went wrong while setting value in Realtime Store"); case 6: te.next = 8; break; case 7: throw te.prev = 7, G = te.catch(0), console.error("Failed to set value for key '".concat(w, "':"), G.message), G; case 8: case "end": return te.stop() } }, T, this, [[0, 7]]) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "getValue", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: if (z.prev = 0, w != null) { z.next = 1; break } throw new Error("The 'key' parameter is required."); case 1: if (typeof w == "string") { z.next = 2; break } throw new TypeError("Invalid type for 'key'. Expected a string."); case 2: return z.next = 3, this._socketRequest("realtimeStoreGet", { key: w }); case 3: if (O = z.sent, !(O && O.status === "ok" && O.value)) { z.next = 4; break } return z.abrupt("return", O.value); case 4: if (O.status !== "error") { z.next = 5; break } throw new Error(O.message ? O.message : "Something went wrong while getting value from Realtime Store"); case 5: return z.abrupt("return", null); case 6: throw z.prev = 6, $ = z.catch(0), $; case 7: case "end": return z.stop() } }, T, this, [[0, 6]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "observe", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (!this._closed) { G.next = 1; break } return G.abrupt("return"); case 1: return G.prev = 1, G.next = 2, this._socketRequest("realtimeStoreObserve", { key: w }); case 2: (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "RealtimeStore observation started successfully for key '".concat(w, "'."), logType: "INFO" }), G.next = 4; break; case 3: throw G.prev = 3, z = G.catch(1), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error observe() | failed", logType: "ERROR", attributes: { error: z.message } }), z; case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "stopObserving", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (!this._closed) { G.next = 1; break } return G.abrupt("return"); case 1: return G.prev = 1, G.next = 2, this._socketRequest("realtimeStoreStopObserve", { key: w }); case 2: (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "RealtimeStore observation stopped successfully for key '".concat(w, "'."), logType: "INFO" }), G.next = 4; break; case 3: throw G.prev = 3, z = G.catch(1), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error stopObserving() | failed", logType: "ERROR", attributes: { error: z.message } }), z; case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "pubsubPublish", value: function () { var m = (0, u.A)(v().mark(function T(w, O, $, z) { var G, te, re, ne, me, Te, ke; return v().wrap(function (Be) { for (; ;)switch (Be.prev = Be.next) { case 0: if (Be.prev = 0, $ != null && $.sendOnly) { if (G = $.sendOnly, te = [], G) { re = Dn(G); try { for (re.s(); !(ne = re.n()).done;)me = ne.value, me && te.push(me.toString()) } catch (Qe) { re.e(Qe) } finally { re.f() } } $.sendOnly = te } return Be.next = 1, this._socketRequestForPubsub("pubsubPublish", { topic: w, message: O, options: $, payload: z }); case 1: Be.next = 3; break; case 2: throw Be.prev = 2, ke = Be.catch(0), (Te = this._videosdkLogs) === null || Te === void 0 || Te.pushLogs({ logText: "Error pubsubPublish() | failed", logType: "ERROR", attributes: { error: ke.message } }), Re.error("pubsubPublish() | failed: %o", ke), new Error("".concat(ke.message === "operation has timed out" ? "Message publishing timed out. Please check your network connection and try again." : "Pubsub Publish Error : ".concat(ke.message))); case 3: case "end": return Be.stop() } }, T, this, [[0, 2]]) })); function C(T, w, O, $) { return m.apply(this, arguments) } return C }() }, { key: "pubsubSubscribe", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (!this._closed) { G.next = 1; break } return G.abrupt("return"); case 1: return G.prev = 1, G.next = 2, this._socketRequest("pubsubSubscribe", { topic: w }); case 2: return O = G.sent, G.abrupt("return", O); case 3: G.prev = 3, z = G.catch(1), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error pubsubSubscribe() | failed", logType: "ERROR", attributes: { error: z.message } }), Re.error("pubsubSubscribe() | failed: %o", z); case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "pubsubUnsubscribe", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z; return v().wrap(function (G) { for (; ;)switch (G.prev = G.next) { case 0: if (!this._closed) { G.next = 1; break } return G.abrupt("return"); case 1: return G.prev = 1, G.next = 2, this._socketRequest("pubsubUnsubscribe", { topic: w }); case 2: (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Pubsub Unsubscribing Successfully for topic ".concat(w), logType: "INFO" }), G.next = 4; break; case 3: G.prev = 3, z = G.catch(1), ($ = this._videosdkLogs) === null || $ === void 0 || $.pushLogs({ logText: "Error pubsubUnsubscribe() | failed", logType: "ERROR", attributes: { error: z.message } }), Re.error("pubsubUnsubscribe() | failed: %o", z); case 4: case "end": return G.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "closeRoom", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: return z.prev = 0, w = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Closing room (requested by peer: ".concat(this._peerId, ")") }), z.next = 1, this._socketRequest("closeRoom", {}); case 1: this._openTelemetry.completeSpan({ span: w, status: 1, message: "Room closed successfully." }), z.next = 3; break; case 2: z.prev = 2, $ = z.catch(0), this._openTelemetry.completeSpan({ span: w, status: 2, message: "Failed to close room", attributes: { error: $.message } }); case 3: case "end": return z.stop() } }, T, this, [[0, 2]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "removePeer", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: if ($ = this._peerSpans.get(w), z = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Removing peer ".concat(w), span: $ }), te.prev = 1, w != null) { te.next = 2; break } return te.abrupt("return"); case 2: return te.next = 3, this._socketRequest("removePeer", { peerId: w }); case 3: this._openTelemetry.completeSpan({ span: z, status: 1, message: "Peer removed successfully" }), te.next = 5; break; case 4: te.prev = 4, G = te.catch(1), this._openTelemetry.completeSpan({ span: z, status: 2, message: "Failed to remove peer. Error : ".concat(G.message) }); case 5: case "end": return te.stop() } }, T, this, [[1, 4]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "getSendTransportRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T() { return v().wrap(function (w) { for (; ;)switch (w.prev = w.next) { case 0: if (Re.debug("getSendTransportRemoteStats()"), this._sendTransport) { w.next = 1; break } return w.abrupt("return"); case 1: return w.abrupt("return", this._socketRequest("getTransportStats", { transportId: this._sendTransport.id })); case 2: case "end": return w.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getRecvTransportRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T() { return v().wrap(function (w) { for (; ;)switch (w.prev = w.next) { case 0: if (Re.debug("getRecvTransportRemoteStats()"), this._recvTransport) { w.next = 1; break } return w.abrupt("return"); case 1: return w.abrupt("return", this._socketRequest("getTransportStats", { transportId: this._recvTransport.id })); case 2: case "end": return w.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getAudioRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T() { var w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: if (Re.debug("getAudioRemoteStats()"), w = this._micProducer, w) { O.next = 1; break } return O.abrupt("return"); case 1: return O.abrupt("return", this._latestStats[w.id]); case 2: case "end": return O.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getVideoRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T() { var w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: if (Re.debug("getVideoRemoteStats()"), w = this._webcamProducer, w) { O.next = 1; break } return O.abrupt("return"); case 1: return O.abrupt("return", this._latestStats[w.id]); case 2: case "end": return O.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getShareRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T() { var w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: if (Re.debug("getVideoRemoteStats()"), w = this._shareProducer, w) { O.next = 1; break } return O.abrupt("return"); case 1: return O.abrupt("return", this._latestStats[w.id]); case 2: case "end": return O.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getShareAudioRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T() { var w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: if (w = this._shareAudioProducer, w) { O.next = 1; break } return O.abrupt("return"); case 1: return O.abrupt("return", this._latestStats[w.id]); case 2: case "end": return O.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getConsumerRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: if (Re.debug("getConsumerRemoteStats()"), O = this._consumers.get(w), O) { z.next = 1; break } return z.abrupt("return"); case 1: return this._latestStats[w] && (this._latestStats[w][0].currentSpatialLayer = O.currentSpatialLayer, this._latestStats[w][0].currentTemporalLayer = O.currentTemporalLayer, this._latestStats[w][0].preferredSpatialLayer = O.preferredSpatialLayer, this._latestStats[w][0].preferredTemporalLayer = O.preferredTemporalLayer), $ = O.track.id.replace(/[{}]/g, ""), z.abrupt("return", this._latestStats[$]); case 2: case "end": return z.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "getChatDataProducerRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T() { var w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: if (Re.debug("getChatDataProducerRemoteStats()"), w = this._reliableDataProducer, w) { O.next = 1; break } return O.abrupt("return"); case 1: return O.abrupt("return", this._socketRequest("getDataProducerStats", { dataProducerId: w.id })); case 2: case "end": return O.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getDataConsumerRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: if (Re.debug("getDataConsumerRemoteStats()"), O = this._dataConsumers.get(w), O) { $.next = 1; break } return $.abrupt("return"); case 1: return $.abrupt("return", this._socketRequest("getDataConsumerStats", { dataConsumerId: w })); case 2: case "end": return $.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "getSendTransportLocalStats", value: function () { var m = (0, u.A)(v().mark(function T() { return v().wrap(function (w) { for (; ;)switch (w.prev = w.next) { case 0: if (Re.debug("getSendTransportLocalStats()"), this._sendTransport) { w.next = 1; break } return w.abrupt("return"); case 1: return w.abrupt("return", this._sendTransport.getStats()); case 2: case "end": return w.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getRecvTransportLocalStats", value: function () { var m = (0, u.A)(v().mark(function T() { return v().wrap(function (w) { for (; ;)switch (w.prev = w.next) { case 0: if (Re.debug("getRecvTransportLocalStats()"), this._recvTransport) { w.next = 1; break } return w.abrupt("return"); case 1: return w.abrupt("return", this._recvTransport.getStats()); case 2: case "end": return w.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getAudioLocalStats", value: function () { var m = (0, u.A)(v().mark(function T() { return v().wrap(function (w) { for (; ;)switch (w.prev = w.next) { case 0: if (Re.debug("getAudioLocalStats()"), this._micProducer) { w.next = 1; break } return w.abrupt("return"); case 1: return w.abrupt("return", this._micProducer.getStats()); case 2: case "end": return w.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getVideoLocalStats", value: function () { var m = (0, u.A)(v().mark(function T() { var w; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: if (Re.debug("getVideoLocalStats()"), w = this._webcamProducer || this._shareProducer, w) { O.next = 1; break } return O.abrupt("return"); case 1: return O.abrupt("return", w.getStats()); case 2: case "end": return O.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "getConsumerLocalStats", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O; return v().wrap(function ($) { for (; ;)switch ($.prev = $.next) { case 0: if (O = this._consumers.get(w), O) { $.next = 1; break } return $.abrupt("return"); case 1: return $.abrupt("return", O.getStats()); case 2: case "end": return $.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "getTransportRemoteStats", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: if (z = w.participantId, z) { re.next = 1; break } return re.abrupt("return"); case 1: return re.next = 2, this._socketRequest("getTransportStats", { peerId: z }); case 2: return G = re.sent, te = { availableBitrate: G == null || (O = G.recv) === null || O === void 0 ? void 0 : O.availableBitrate, targetBitrate: G == null || ($ = G.recv) === null || $ === void 0 ? void 0 : $.targetBitrate }, re.abrupt("return", te); case 3: case "end": return re.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "applyNetworkThrottle", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te; return v().wrap(function (re) { for (; ;)switch (re.prev = re.next) { case 0: return O = w.uplink, $ = w.downlink, z = w.rtt, G = w.secret, Re.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]", O, $, z), re.prev = 1, re.next = 2, this._socketRequest("applyNetworkThrottle", { uplink: O, downlink: $, rtt: z, secret: G }); case 2: re.next = 4; break; case 3: re.prev = 3, te = re.catch(1), Re.error("applyNetworkThrottle() | failed:%o", te), ze.dispatch(sr({ type: "error", text: "Error applying network throttle: ".concat(te) })); case 4: case "end": return re.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "resetNetworkThrottle", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: return O = w.silent, $ = O === void 0 ? !1 : O, z = w.secret, Re.debug("resetNetworkThrottle()"), te.prev = 1, te.next = 2, this._socketRequest("resetNetworkThrottle", { secret: z }); case 2: te.next = 4; break; case 3: te.prev = 3, G = te.catch(1), $ || (Re.error("resetNetworkThrottle() | failed:%o", G), ze.dispatch(sr({ type: "error", text: "Error resetting network throttle: ".concat(G) }))); case 4: case "end": return te.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "createProducerTransport", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z = this, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt; return v().wrap(function (jt) { for (; ;)switch (jt.prev = jt.next) { case 0: te = w.id, re = w.iceParameters, ne = w.iceCandidates, me = w.dtlsParameters, Te = w.sctpParameters, ke = ($ = this._openTelemetry) === null || $ === void 0 ? void 0 : $.trace({ spanName: "Creating Send Media Transport", span: O || null }), this._sendTransport = this._mediasoupDevice.createSendTransport({ id: te, iceParameters: re, iceCandidates: ne, dtlsParameters: me, sctpParameters: Te, iceServers: this._iceServers }), Be = new Map, Qe = new Map, je = !1, ft = !1, nt = !1, this._sendTransportInternal = setInterval((0, u.A)(v().mark(function Je() { var _t, We, Ve, gt, wt, $t, Ut, Ot, bt, Zt, lr, qt, st; return v().wrap(function (Ye) { for (; ;)switch (Ye.prev = Ye.next) { case 0: return _t = [], Ye.prev = 1, Ye.next = 2, (Ve = z._sendTransport) === null || Ve === void 0 ? void 0 : Ve.getStats(); case 2: We = Ye.sent, Ye.next = 4; break; case 3: return Ye.prev = 3, st = Ye.catch(1), console.error("Error fetching stats:", st), Ye.abrupt("return"); case 4: try { We.forEach(function (Le) { try { if (Le.type === "outbound-rtp") { var Ae = { qualityLimitationReason: Le.qualityLimitationReason }; Be.set(Le.id, Ae) } if (Le.type === "remote-inbound-rtp" && Le.totalRoundTripTime && Le.roundTripTimeMeasurements) { var Pt = Qe.get(Le.id); Pt || (Pt = { totalRoundTripTime: 0, roundTripTimeMeasurements: 0 }, Qe.set(Le.id, Pt)); var Yt = Le.roundTripTimeMeasurements - Pt.roundTripTimeMeasurements, Ft = Le.totalRoundTripTime - Pt.totalRoundTripTime; if (Yt > 0 && Ft > 0) { var nr = Ft / Yt; Pt.totalRoundTripTime = Le.totalRoundTripTime, Pt.roundTripTimeMeasurements = Le.roundTripTimeMeasurements, _t.push(nr * 1e3) } } } catch { } }); try { gt = _t.reduce(function (Le, Ae) { return Le + Ae }, 0) / _t.length, Number.isNaN(gt) || (Me || (Me = gt), wt = (0, d.A)(Be.values()).some(function (Le) { return Le.qualityLimitationReason === "bandwidth" }), $t = (0, d.A)(Be.values()).some(function (Le) { return Le.qualityLimitationReason === "cpu" }), !je && wt && gt - Me > 50 ? ((Ut = z._videosdkLogs) === null || Ut === void 0 || Ut.pushLogs({ logType: "WARN", attributes: { avgRoundTripTimeInMs: gt, ewmaRttInMs: Me }, logText: "Send Transport Congestion detected, the network is bandwidth limited and the round trip time is increasing (ewmaRtt: ".concat(Me, ", avgRoundTripTime: ").concat(gt, ")") }), je = !0, z._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL", { type: "congestion", state: "detected", timestamp: new Date().getTime() })) : je && gt - Me < 30 && ((Ot = z._videosdkLogs) === null || Ot === void 0 || Ot.pushLogs({ logType: "INFO", attributes: { avgRoundTripTimeInMs: gt, ewmaRttInMs: Me }, logText: "Send Transport  Congestion resolved, the round trip time is back to normal (ewmaRtt: ".concat(Me, ", avgRoundTripTime: ").concat(gt, ")") }), je = !1, z._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL", { type: "congestion", state: "resolved", timestamp: new Date().getTime() })), wt && !nt ? ((bt = z._videosdkLogs) === null || bt === void 0 || bt.pushLogs({ logType: "WARN", logText: "Bandwidth Limitation detected" }), z._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL", { type: "bandwidth", state: "detected", timestamp: new Date().getTime() }), nt = !0) : !wt && nt && ((Zt = z._videosdkLogs) === null || Zt === void 0 || Zt.pushLogs({ logType: "INFO", logText: "Bandwidth Limitation resolved" }), z._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL", { type: "bandwidth", state: "resolved", timestamp: new Date().getTime() }), nt = !1), Me = .9 * Me + .1 * gt, !ft && $t ? (z._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL", { type: "cpu", state: "detected", timestamp: new Date().getTime() }), (lr = z._videosdkLogs) === null || lr === void 0 || lr.pushLogs({ logType: "WARN", logText: "CPU Limitation detected" }), ft = !0) : ft && !$t && (z._eventEmitter.emit("QUALITY_LIMITATION_INTERNAL", { type: "cpu", state: "resolved", timestamp: new Date().getTime() }), (qt = z._videosdkLogs) === null || qt === void 0 || qt.pushLogs({ logType: "INFO", logText: "CPU Limitation resolved" }), ft = !1)) } catch { } } catch { } case 5: case "end": return Ye.stop() } }, Je, null, [[1, 3]]) })), 1e3), this._sendTransport.on("connect", function (Je, _t, We) { var Ve, gt = Je.dtlsParameters; (Ve = z._openTelemetry) === null || Ve === void 0 || Ve.traceAutoComplete({ spanName: "Media Transport is about to establish the ICE+DTLS connection", span: ke, status: 1 }), z._socketRequest("connectWebRtcTransport", { transportId: z._sendTransport.id, dtlsParameters: gt }).then(function () { _t() }).catch(function (wt) { We(wt) }) }), this._sendTransport.on("produce", function () { var Je = (0, u.A)(v().mark(function _t(We, Ve, gt) { var wt, $t, Ut, Ot, bt, Zt, lr, qt; return v().wrap(function (st) { for (; ;)switch (st.prev = st.next) { case 0: return wt = We.kind, $t = We.rtpParameters, Ut = We.appData, st.prev = 1, (Ot = z._openTelemetry) === null || Ot === void 0 || Ot.traceAutoComplete({ spanName: "Transmiting information about a new ".concat(wt, " track"), span: ke, status: 1 }), st.next = 2, z._socketRequest("produce", { transportId: z._sendTransport.id, kind: wt, rtpParameters: $t, appData: Ut }); case 2: bt = st.sent, Zt = bt.id, Ve({ id: Zt }), st.next = 4; break; case 3: st.prev = 3, qt = st.catch(1), (lr = z._videosdkLogs) === null || lr === void 0 || lr.pushLogs({ logText: 'Error this._sendTransport "produce" Event catch', logType: "ERROR", attributes: { error: qt.message } }), gt(qt); case 4: case "end": return st.stop() } }, _t, null, [[1, 3]]) })); return function (_t, We, Ve) { return Je.apply(this, arguments) } }()), this._sendTransport.on("producedata", function () { var Je = (0, u.A)(v().mark(function _t(We, Ve, gt) { var wt, $t, Ut, Ot, bt, Zt, lr, qt; return v().wrap(function (st) { for (; ;)switch (st.prev = st.next) { case 0: return wt = We.sctpStreamParameters, $t = We.label, Ut = We.protocol, Ot = We.appData, st.prev = 1, st.next = 2, z._socketRequest("produceData", { transportId: z._sendTransport.id, sctpStreamParameters: wt, label: $t, protocol: Ut, appData: Ot }); case 2: bt = st.sent, Zt = bt.id, Ve({ id: Zt }), st.next = 4; break; case 3: st.prev = 3, qt = st.catch(1), (lr = z._videosdkLogs) === null || lr === void 0 || lr.pushLogs({ logText: "Error producedata event catch", logType: "ERROR", attributes: { error: qt.message } }), gt(qt); case 4: case "end": return st.stop() } }, _t, null, [[1, 3]]) })); return function (_t, We, Ve) { return Je.apply(this, arguments) } }()), this._sendTransport.on("connectionstatechange", function () { var Je = (0, u.A)(v().mark(function _t(We) { var Ve, gt, wt, $t, Ut; return v().wrap(function (Ot) { for (; ;)switch (Ot.prev = Ot.next) { case 0: return Ut = Array, Ot.next = 1, z._sendTransport.getStats(); case 1: gt = Ut.from.call(Ut, Ot.sent).filter(function (bt) { var Zt = (0, b.A)(bt, 2), lr = Zt[1]; return lr.type === "local-candidate" || lr.type === "remote-candidate" }).map(function (bt) { var Zt = (0, b.A)(bt, 2), lr = Zt[1]; return lr }), gt.length > 0 && ((wt = z._videosdkLogs) === null || wt === void 0 || wt.pushLogs({ logText: 'Send Transport State Change "'.concat(We, '" candidates'), logType: "INFO", attributes: { candidates: JSON.stringify(gt) } })), We === "connected" && z.emitMeetingStateChange(Hr.CONNECTED), (Ve = z._openTelemetry) === null || Ve === void 0 || Ve.traceAutoComplete({ spanName: "Media Transport state changed to ".concat(We.toUpperCase()), span: ke, status: 1 }), We === "failed" && (($t = z._videosdkLogs) === null || $t === void 0 || $t.pushLogs({ logText: "ERROR_MEETING_MEDIA_CONNECTION_FAILED", logType: "ERROR", attributes: { error: "Unable to connect to the meeting or media. Please check your network connection, ensure your firewall or security settings are not blocking the application, or try connecting using a different network." }, dashboardLog: !0 }), z.restartIce()), z._transportState = We; case 2: case "end": return Ot.stop() } }, _t) })); return function (_t) { return Je.apply(this, arguments) } }()), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: ke, status: 1, message: "Send Transport Created Successfully" }); case 1: case "end": return jt.stop() } }, T, this) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "createConsumerTransport", value: function () { var m = (0, u.A)(v().mark(function T(w, O) { var $, z = this, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt; return v().wrap(function (jt) { for (; ;)switch (jt.prev = jt.next) { case 0: te = w.id, re = w.iceParameters, ne = w.iceCandidates, me = w.dtlsParameters, Te = w.sctpParameters, ke = ($ = this._openTelemetry) === null || $ === void 0 ? void 0 : $.trace({ spanName: "Creating Recieve Media Transport", span: O || null }), this._recvTransport = this._mediasoupDevice.createRecvTransport({ id: te, iceParameters: re, iceCandidates: ne, dtlsParameters: me, sctpParameters: Te, iceServers: this._iceServers }), this._recvTransport.on("connect", function (Je, _t, We) { var Ve, gt = Je.dtlsParameters; (Ve = z._openTelemetry) === null || Ve === void 0 || Ve.traceAutoComplete({ spanName: "Media Transport is about to establish the ICE+DTLS connection", span: ke, status: 1 }), z._socketRequest("connectWebRtcTransport", { transportId: z._recvTransport.id, dtlsParameters: gt }).then(function () { _t() }).catch(function (wt) { We(wt) }) }), this._recvTransport.on("connectionstatechange", function () { var Je = (0, u.A)(v().mark(function _t(We) { var Ve, gt, wt, $t; return v().wrap(function (Ut) { for (; ;)switch (Ut.prev = Ut.next) { case 0: return $t = Array, Ut.next = 1, z._recvTransport.getStats(); case 1: gt = $t.from.call($t, Ut.sent).filter(function (Ot) { var bt = (0, b.A)(Ot, 2), Zt = bt[1]; return Zt.type === "local-candidate" || Zt.type === "remote-candidate" }).map(function (Ot) { var bt = (0, b.A)(Ot, 2), Zt = bt[1]; return Zt }), gt.length > 0 && ((wt = z._videosdkLogs) === null || wt === void 0 || wt.pushLogs({ logText: 'Recv Transport State Change "'.concat(We, '" candidates'), logType: "INFO", attributes: { candidates: JSON.stringify(gt) } })), (Ve = z._openTelemetry) === null || Ve === void 0 || Ve.traceAutoComplete({ spanName: "Media Transport state changed to ".concat(We.toUpperCase()), span: ke, status: 1 }), We === "failed" && z.restartIce(), z._transportState = We; case 2: case "end": return Ut.stop() } }, _t) })); return function (_t) { return Je.apply(this, arguments) } }()), Be = 0, Qe = this._metrics.addNewProbe(this._recvTransport, "transport"), Me = new Map, je = new Map, ft = new Map, nt = new Set, Qe.onStatsCollected = function (Je) { try { var _t = function (wt, $t, Ut) { z._stats.consumerStats || (z._stats.consumerStats = {}); var Ot = $t.appData.peerId; z._stats.consumerStats[Ot] || (z._stats.consumerStats[Ot] = {}), z._stats.consumerStats[Ot][Ut] || (z._stats.consumerStats[Ot][Ut] = []), z._latestStats[$t.track.id.replace(/[{}]/g, "")] = [wt], Be % 5 === 0 && z._stats.consumerStats[Ot][Ut].push(wt) }, We = function (wt) { Je[wt].forEach(function ($t) { var Ut = Dn(z._consumers), Ot; try { for (Ut.s(); !(Ot = Ut.n()).done;) { var bt = (0, b.A)(Ot.value, 2), Zt = bt[0], lr = bt[1], qt = lr.track.id.replace(/[{}]/g, ""); if (qt === $t.trackId) { var st = lr.appData.share ? lr.kind === "audio" ? "shareAudio" : "share" : lr.kind; if (_t($t, lr, st), st === "audio" || st === "shareAudio") return; if ($t.bitrate > 0) Me.has(qt) && Me.delete(qt); else { var Ye = Me.get(qt); Ye ? Ye.detected + 5e3 < Date.now() && z._eventEmitter.emit("STREAM_STATE_CHANGED", { state: "stuck", peerId: lr.appData.peerId, streamId: qt }) : Me.set(qt, { detected: Date.now() }) } var Le = $t.trackId, Ae = $t.freezeCount; if (!Le || Ae === void 0) return; var Pt = je.get(Le); if (Pt === void 0) { je.set(Le, Ae); return } if (Ae > Pt) z._eventEmitter.emit("STREAM_STATE_CHANGED", { state: "freeze-detected", peerId: lr.appData.peerId, streamId: qt }), ft.set(Le, Date.now()), nt.delete(Le); else { var Yt = ft.get(Le); if (Yt && !nt.has(Le)) { var Ft = Date.now() - Yt; Ft > 5e3 && (z._eventEmitter.emit("STREAM_STATE_CHANGED", { state: "freeze-resolved", peerId: lr.appData.peerId, streamId: qt }), nt.add(Le)) } } je.set(Le, Ae) } } } catch (nr) { Ut.e(nr) } finally { Ut.f() } }) }; We("audio"), We("video"), Be++ } catch (gt) { var Ve; (Ve = z._videosdkLogs) === null || Ve === void 0 || Ve.pushLogs({ logText: "Error CONSUMER Stats ERROR", logType: "ERROR", attributes: { error: gt.message } }), console.log("CONSUMER CATCH", gt) } }, Qe.start(), this._recvTransport.observer.on("close", function () { Qe.stop(), z._metrics.removeExistingProbe(Qe) }), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: ke, status: 1, message: "Recieve Transport Created Successfully" }); case 1: case "end": return jt.stop() } }, T, this) })); function C(T, w) { return m.apply(this, arguments) } return C }() }, { key: "emitMeetingStateChange", value: function (C) { this._eventEmitter.emit("MEETING_STATE_CHANGED", { state: C }), this._meetingConnectionState = C } }, { key: "disposeTrack", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G = arguments; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: O = G.length > 1 && G[1] !== void 0 ? G[1] : "AUDIO_VIDEO", (O === "AUDIO" || O === "AUDIO_VIDEO") && this.customMicrophoneAudioTrack && (($ = this._openTelemetry) === null || $ === void 0 || $.traceAutoComplete({ spanName: "Disposing Audio Track", span: w, status: 2 }), this.customMicrophoneAudioTrack.getTracks().forEach(function (re) { re.stop() }), this.customMicrophoneAudioTrack = null), (O === "VIDEO" || O === "AUDIO_VIDEO") && this.customCameraVideoTrack && ((z = this._openTelemetry) === null || z === void 0 || z.traceAutoComplete({ spanName: "Disposing Video Track", span: w, status: 2 }), this.customCameraVideoTrack.getTracks().forEach(function (re) { re.stop() }), this.customCameraVideoTrack = null); case 1: case "end": return te.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "joinRoom", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We, Ve, gt, wt, $t, Ut, Ot; return v().wrap(function (bt) { for (; ;)switch (bt.prev = bt.next) { case 0: return Re.debug("joinRoom()"), bt.prev = 1, ne = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Loading device capabilities", span: this._joinSpan }), this._mediasoupDevice = new bn.pF({ handlerName: this._handlerName }), bt.next = 2, this._socketRequest("getRouterRtpCapabilities"); case 2: return me = bt.sent, me.headerExtensions = (O = me.headerExtensions) === null || O === void 0 ? void 0 : O.filter(function (Zt) { return Zt.uri != "urn:3gpp:video-orientation" }), bt.next = 3, this._mediasoupDevice.load({ routerRtpCapabilities: me }); case 3: if (($ = this._openTelemetry) === null || $ === void 0 || $.completeSpan({ span: ne, status: 1, attributes: { routerRtpCapabilities: JSON.stringify(me).toString() }, message: "Device Capabilities Loaded" }), !this._produce) { bt.next = 5; break } return bt.next = 4, this._socketRequest("createWebRtcTransport", { preferredProtocol: this._preferredProtocol, producing: !0, consuming: !1, sctpCapabilities: this._mediasoupDevice.sctpCapabilities }); case 4: Te = bt.sent, this.createProducerTransport(Te, this._joinSpan); case 5: if (!this._consume) { bt.next = 7; break } return bt.next = 6, this._socketRequest("createWebRtcTransport", { preferredProtocol: this._preferredProtocol, producing: !1, consuming: !0, sctpCapabilities: this._mediasoupDevice.sctpCapabilities }); case 6: ke = bt.sent, this.createConsumerTransport(ke, this._joinSpan); case 7: return bt.next = 8, this._socketRequest("join", { displayName: this._displayName, device: this._device, secret: this._secret, rtpCapabilities: (z = this._mediasoupDevice) === null || z === void 0 ? void 0 : z.rtpCapabilities, sctpCapabilities: (G = this._mediasoupDevice) === null || G === void 0 ? void 0 : G.sctpCapabilities, deviceInfo: this._deviceInfo, debugMode: this._debugMode, autoConsume: this._autoConsume, metaData: this._metaData, mode: this._mode }); case 8: Be = bt.sent, Qe = Be.peers, Me = Be.poll, je = Be.messages, ze.dispatch(ho("connected")), (te = this._openTelemetry) === null || te === void 0 || te.traceAutoComplete({ spanName: "Meeting is in JOINED State.", span: this._joinSpan, status: 1 }), this._eventEmitter.emit("MEETING_JOINED", { peers: Qe, poll: Me, messages: je, baseUrl: this._baseUrl }), ze.dispatch(qo()), ze.dispatch(sr({ text: "You are in the room!", timeout: 3e3 })), ft = Dn(Qe); try { for (ft.s(); !(nt = ft.n()).done;)jt = nt.value, Je = Ga(Rn(Rn({}, jt), {}, { consumers: [], dataConsumers: [] })), ze.dispatch(Je), this._eventEmitter.emit(Je.type, Je.payload) } catch (Zt) { ft.e(Zt) } finally { ft.f() } this._produce ? (ze.dispatch(fo({ canSendMic: this._mediasoupDevice.canProduce("audio"), canSendWebcam: this._mediasoupDevice.canProduce("video") })), this._micEnabled ? this.enableMic(this.customMicrophoneAudioTrack, this._joinSpan) : this.customMicrophoneAudioTrack && ((_t = this._openTelemetry) === null || _t === void 0 || _t.traceAutoComplete({ spanName: "Disposing Audio Track", span: this._joinSpan, status: 2 }), this.customMicrophoneAudioTrack.getTracks().forEach(function (Zt) { Zt.stop() })), We = Ml(), this._webcamEnabled && (!We || We.webcamEnabled || this._externalVideo) ? this.enableWebcam(this.customCameraVideoTrack, this._joinSpan) : this.customCameraVideoTrack && ((Ve = this._openTelemetry) === null || Ve === void 0 || Ve.traceAutoComplete({ spanName: "Disposing Video Track", span: this._joinSpan, status: 2 }), this.customCameraVideoTrack.getTracks().forEach(function (Zt) { Zt.stop() })), this.enableChatDataProducer()) : this.disposeTrack(this._joinSpan), window.SHOW_INFO && (gt = ze.getState(), wt = gt.me, ze.dispatch(Fo(wt.id))), (re = this._openTelemetry) === null || re === void 0 || re.completeSpan({ span: this._joinSpan, status: 1, message: "Meeting Joined" }), bt.next = 10; break; case 9: bt.prev = 9, Ot = bt.catch(1), Re.error("joinRoom() failed:%o", Ot), ($t = this._videosdkLogs) === null || $t === void 0 || $t.pushLogs({ logText: "Error Could not join the room", logType: "ERROR", attributes: { error: Ot.message } }), routerSpan && this._openTelemetry.completeSpan({ span: routerSpan, status: 2, message: "Failed to load device capabilities: ".concat(Ot.message) }), (Ut = this._openTelemetry) === null || Ut === void 0 || Ut.completeSpan({ span: this._joinSpan, status: 2, message: "Could not join the room ".concat(Ot.message) }), ze.dispatch(sr({ type: "error", text: "Could not join the room: ".concat(Ot.message) })), this.close({ sendLeft: !0, meetingLeftReason: "".concat(Zr.t.JOIN_ROOM_FAILED.message, ". Error : ").concat(Ot.message), code: Zr.t.JOIN_ROOM_FAILED.code }); case 10: case "end": return bt.stop() } }, T, this, [[1, 9]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "switchingRoom", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je, _t, We; return v().wrap(function (Ve) { for (; ;)switch (Ve.prev = Ve.next) { case 0: return $ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: "Switching room", attributes: { "room.id": w, "peer.id": this._peerId, display_name: this._displayName } }), Ve.prev = 1, z = (G = this._openTelemetry) === null || G === void 0 ? void 0 : G.trace({ spanName: "Requesting to join switched room", span: $ }), Ve.next = 2, this._socketRequest("join", { displayName: this._displayName, device: this._device, secret: this._secret, rtpCapabilities: (te = this._mediasoupDevice) === null || te === void 0 ? void 0 : te.rtpCapabilities, sctpCapabilities: (re = this._mediasoupDevice) === null || re === void 0 ? void 0 : re.sctpCapabilities, deviceInfo: this._deviceInfo, debugMode: this._debugMode, autoConsume: this._autoConsume, metaData: this._metaData, switchingRoom: !0, mode: this._mode }); case 2: Te = Ve.sent, ke = Te.peers, Be = Te.poll, Qe = Te.messages, (ne = this._openTelemetry) === null || ne === void 0 || ne.completeSpan({ span: z, status: 1, message: "Requested to join switched room successfully" }), ze.dispatch(ho("connected")), this._openTelemetry.traceAutoComplete({ spanName: "Emitted MEETING_JOINED Event", span: $ }), this._eventEmitter.emit("MEETING_JOINED", { switchRoomId: w, peers: ke, poll: Be, messages: Qe, baseUrl: this._baseUrl }), ze.dispatch(qo()), ze.dispatch(sr({ text: "You are in the room!", timeout: 3e3 })), Me = Dn(ke); try { for (Me.s(); !(je = Me.n()).done;)ft = je.value, nt = Ga(Rn(Rn({}, ft), {}, { consumers: [], dataConsumers: [] })), ze.dispatch(nt), this._eventEmitter.emit(nt.type, nt.payload) } catch (gt) { Me.e(gt) } finally { Me.f() } (me = this._openTelemetry) === null || me === void 0 || me.completeSpan({ span: $, status: 1, message: "Requested room switch completed successfully" }), Ve.next = 4; break; case 3: Ve.prev = 3, We = Ve.catch(1), Re.error("joinRoom() failed:%o", We), (jt = this._videosdkLogs) === null || jt === void 0 || jt.pushLogs({ logText: "Failed to request joining the switched room", logType: "ERROR", attributes: { error: We.message } }), (Je = this._openTelemetry) === null || Je === void 0 || Je.completeSpan({ span: z, status: 2, message: "Request to switch room failed: ".concat(We.message) }), (_t = this._openTelemetry) === null || _t === void 0 || _t.completeSpan({ span: $, status: 2, message: "Request to switch room failed: ".concat(We.message) }), ze.dispatch(sr({ type: "error", text: "Failed to request joining the switched room: ".concat(We) })), this.close({ sendLeft: !0, meetingLeftReason: "".concat(Zr.t.SWITCH_ROOM_FAILED.message, ". Error : ").concat(We.message), code: Zr.t.SWITCH_ROOM_FAILED.code }); case 4: case "end": return Ve.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "_updateMics", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je = arguments, ft; return v().wrap(function (nt) { for (; ;)switch (nt.prev = nt.next) { case 0: return O = je.length > 0 && je[0] !== void 0 ? je[0] : void 0, this._mics = new Map, Re.debug("_updateMics() |"), $ = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Fetching System Microphone list", span: O || null }), nt.prev = 1, nt.next = 2, navigator.mediaDevices.enumerateDevices(); case 2: G = nt.sent, G.filter(function (jt) { return jt.kind === "audioinput" }).length > 0 && G.find(function (jt) { return jt.kind === "audioinput" }), te = Dn(G); try { for (te.s(); !(re = te.n()).done;)ne = re.value, ne.kind == "audioinput" && this._mics.set(ne.deviceId, ne) } catch (jt) { te.e(jt) } finally { te.f() } me = Array.from(this._mics.values()), Te = me.length, ke = this._mic.device ? this._mic.device.deviceId : void 0, Te === 0 ? this._mic.device = null : this._mics.has(ke) || (this._mic.device = me[0]), (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ message: "Microphone List fetched Successfully", span: $, status: 1, attributes: { micList: G ? JSON.stringify(G) : "No mic devices found" } }), nt.next = 5; break; case 3: if (nt.prev = 3, ft = nt.catch(1), !(ft instanceof TypeError)) { nt.next = 5; break } if (ft.name !== "TypeError") { nt.next = 4; break } throw Qe = Ke.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE, this._emitError(Qe), (Be = this._openTelemetry) === null || Be === void 0 || Be.completeSpan({ span: $, status: 2, message: "Error in updateMics() :: ".concat(Qe.message) }), new Error(Qe.message); case 4: throw (Me = this._openTelemetry) === null || Me === void 0 || Me.completeSpan({ span: $, status: 2, message: "Error in updateMics() :: ".concat(ft.message) }), new Error(ft.message); case 5: case "end": return nt.stop() } }, T, this, [[1, 3]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "_updateWebcams", value: function () { var m = (0, u.A)(v().mark(function T() { var w, O = this, $, z, G, te, re, ne, me, Te, ke, Be, Qe, Me, je, ft, nt, jt, Je = arguments, _t, We; return v().wrap(function (Ve) { for (; ;)switch (Ve.prev = Ve.next) { case 0: return $ = Je.length > 0 && Je[0] !== void 0 ? Je[0] : void 0, Re.debug("_updateWebcams()"), this._webcams = new Map, Re.debug("_updateWebcams() | calling enumerateDevices()"), z = (w = this._openTelemetry) === null || w === void 0 ? void 0 : w.trace({ spanName: "Fetching System Webcam list", span: $ || null }), Ve.prev = 1, Ve.next = 2, navigator.mediaDevices.enumerateDevices(); case 2: te = Ve.sent, re = this._deviceInfo.sdkType === "react-native", te.filter(function (gt) { return gt.kind === "videoinput" }).length > 0 && te.find(function (gt) { return gt.kind === "videoinput" }), ne = Dn(te), Ve.prev = 3, ne.s(); case 4: if ((me = ne.n()).done) { Ve.next = 7; break } if (Te = me.value, Te.kind === "videoinput") { Ve.next = 5; break } return Ve.abrupt("continue", 6); case 5: this._webcams.set(Te.deviceId, Te); case 6: Ve.next = 4; break; case 7: Ve.next = 9; break; case 8: Ve.prev = 8, _t = Ve.catch(3), ne.e(_t); case 9: return Ve.prev = 9, ne.f(), Ve.finish(9); case 10: ke = Array.from(this._webcams.values()), Be = ke.length, Qe = this._webcam.device ? this._webcam.device.deviceId : void 0, Qe && (this._defaultCameraIndex = Qe), Re.debug("_updateWebcams() [webcams:%o]", ke), Be === 0 ? this._webcam.device = null : re ? (Qe == null || !this._webcams.has(Qe)) && (je = (Me = ke.find(function (gt) { return gt.facing === O._defaultCamera })) !== null && Me !== void 0 ? Me : ke[0], this._webcam.device = je) : this._webcams.has(Qe) || (this._webcam.device = ke[0]), (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ span: z, status: 1, message: "Webcam List fetched Successfully", attributes: { webcamList: te ? JSON.stringify(te) : "No webcam devices found" } }), ze.dispatch(zo(this._webcams.size > 1)), Ve.next = 13; break; case 11: if (Ve.prev = 11, We = Ve.catch(1), !(We instanceof TypeError)) { Ve.next = 13; break } if (We.name !== "TypeError") { Ve.next = 12; break } throw nt = Ke.q.ERROR_CAMERA_ACCESS_UNAVAILABLE, this._emitError(nt), (ft = this._openTelemetry) === null || ft === void 0 || ft.completeSpan({ span: z, status: 2, message: "Error in updateWebcams() :: ".concat(nt.message) }), new Error(nt.message); case 12: throw (jt = this._openTelemetry) === null || jt === void 0 || jt.completeSpan({ span: z, status: 2, message: "Error in updateWebcams() :: ".concat(We.message) }), new Error(We.message); case 13: case "end": return Ve.stop() } }, T, this, [[1, 11], [3, 8, 9, 10]]) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "_getWebcamType", value: function (C) { return /(back|rear)/i.test(C.label) ? (Re.debug("_getWebcamType() | it seems to be a back camera"), "back") : (Re.debug("_getWebcamType() | it seems to be a front camera"), "front") } }, { key: "_pauseConsumer", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: if (!w.paused) { z.next = 1; break } return z.abrupt("return"); case 1: return z.prev = 1, z.next = 2, this._socketRequest("pauseConsumer", { consumerId: w.id }); case 2: w.pause(), ze.dispatch(Os(w.id, "local")), z.next = 4; break; case 3: z.prev = 3, $ = z.catch(1), Re.error("_pauseConsumer() | failed:%o", $), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Error pausing Consumer", logType: "ERROR", attributes: { error: $.message } }), ze.dispatch(sr({ type: "error", text: "Error pausing Consumer: ".concat($) })); case 4: case "end": return z.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "_resumeConsumer", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $; return v().wrap(function (z) { for (; ;)switch (z.prev = z.next) { case 0: if (w.paused) { z.next = 1; break } return z.abrupt("return"); case 1: return z.prev = 1, z.next = 2, this._socketRequest("resumeConsumer", { consumerId: w.id }); case 2: w.resume(), ze.dispatch(Ho(w.id, "local")), z.next = 4; break; case 3: z.prev = 3, $ = z.catch(1), Re.error("_resumeConsumer() | failed:%o", $), (O = this._videosdkLogs) === null || O === void 0 || O.pushLogs({ logText: "Error resuming Consumer", logType: "ERROR", attributes: { error: $.message } }), ze.dispatch(sr({ type: "error", text: "Error resuming Consumer: ".concat($) })); case 4: case "end": return z.stop() } }, T, this, [[1, 3]]) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "_getExternalVideoStream", value: function () { var m = (0, u.A)(v().mark(function T() { var w = this; return v().wrap(function (O) { for (; ;)switch (O.prev = O.next) { case 0: if (!this._externalVideoStream) { O.next = 1; break } return O.abrupt("return", this._externalVideoStream); case 1: if (!(this._externalVideo.readyState < 3)) { O.next = 2; break } return O.next = 2, new Promise(function ($) { return w._externalVideo.addEventListener("canplay", $) }); case 2: if (!this._externalVideo.captureStream) { O.next = 3; break } this._externalVideoStream = this._externalVideo.captureStream(), O.next = 5; break; case 3: if (!this._externalVideo.mozCaptureStream) { O.next = 4; break } this._externalVideoStream = this._externalVideo.mozCaptureStream(), O.next = 5; break; case 4: throw new Error("video.captureStream() not supported"); case 5: return O.abrupt("return", this._externalVideoStream); case 6: case "end": return O.stop() } }, T, this) })); function C() { return m.apply(this, arguments) } return C }() }, { key: "toggleE2EEEnabled", value: function () { var m = (0, u.A)(v().mark(function T(w) { var O, $, z, G; return v().wrap(function (te) { for (; ;)switch (te.prev = te.next) { case 0: if ($ = (O = this._openTelemetry) === null || O === void 0 ? void 0 : O.trace({ spanName: w ? "Enabling End-to-End Encryption" : "Disabling End-to-End Encryption" }), !this.e2eeManager) { te.next = 1; break } this._peerId && this.e2eeManager.setParticipantCryptorEnabled(w, this._peerId), this.isE2EEEnabled = w, (z = this._openTelemetry) === null || z === void 0 || z.completeSpan({ message: "End-to-End Encryption ".concat(w ? "enabled" : "disabled", " successfully"), status: 1, span: $ }), te.next = 2; break; case 1: throw (G = this._openTelemetry) === null || G === void 0 || G.completeSpan({ message: "Failed to ".concat(w ? "enable" : "disable", " End-to-End Encryption as it is not configured"), status: 2, span: $ }), Error("e2ee not configured, please set e2ee settings within the room options"); case 2: case "end": return te.stop() } }, T, this) })); function C(T) { return m.apply(this, arguments) } return C }() }, { key: "_emitError", value: function (C) { this._eventEmitter.emit("ERROR", C) } }], [{ key: "init", value: function (C) { ze = C.store } }]) }(); function Wc(Y) { return Hc.apply(this, arguments) } function Hc() { return Hc = (0, u.A)(v().mark(function Y(m) { var C, T = this, w, O, $, z, G, te, re; return v().wrap(function (ne) { for (; ;)switch (ne.prev = ne.next) { case 0: if (w = (C = this._openTelemetry) === null || C === void 0 ? void 0 : C.trace({ spanName: "Setting up End-to-End Encryption", attributes: { keyProvider: JSON.stringify(m) } }), ne.prev = 1, this.e2eeManager) { ne.next = 3; break } return $ = uu, z = m, ne.next = 2, Uc(); case 2: G = ne.sent, te = { keyProvider: z, worker: G }, this.e2eeManager = new $(te), this.e2eeManager.on(Sa.KS.ParticipantEncryptionStatusChanged, function (me) { T.isE2EEEnabled = me }), this.e2eeManager.on(Sa.KS.E2EEStateChange, function (me) { T._eventEmitter.emit("E2EE_STATE_CHANGE", me) }), (O = this.e2eeManager) === null || O === void 0 || O.setup(this), this.toggleE2EEEnabled(!0); case 3: this._openTelemetry.completeSpan({ span: w, message: "E2EE Enabled successfully", status: 1 }), ne.next = 5; break; case 4: throw ne.prev = 4, re = ne.catch(1), console.error("Error setting up E2EE: ", re), this._openTelemetry.completeSpan({ span: w, message: "Error setting up E2EE : ".concat(re.message), status: 2 }), new Error("Error setting up E2EE: " + re.message); case 5: case "end": return ne.stop() } }, Y, this, [[1, 4]]) })), Hc.apply(this, arguments) }
            }, 9792(a, c, l) { Object.defineProperty(c, "__esModule", { value: !0 }), c.Producer = void 0; const p = l(2994), d = l(3953), f = l(4893), h = new p.Logger("Producer"); class P extends d.EnhancedEventEmitter { constructor({ id: g, localId: S, rtpSender: R, track: y, rtpParameters: v, stopTracks: D, disableTrackOnPause: M, zeroRtpOnPause: W, appData: I }) { super(); ve(this, "_id"); ve(this, "_localId"); ve(this, "_closed", !1); ve(this, "_rtpSender"); ve(this, "_track"); ve(this, "_kind"); ve(this, "_rtpParameters"); ve(this, "_paused"); ve(this, "_maxSpatialLayer"); ve(this, "_stopTracks"); ve(this, "_disableTrackOnPause"); ve(this, "_zeroRtpOnPause"); ve(this, "_appData"); ve(this, "_observer", new d.EnhancedEventEmitter); h.debug("constructor()"), this._id = g, this._localId = S, this._rtpSender = R, this._track = y, this._kind = y.kind, this._rtpParameters = v, this._paused = M ? !y.enabled : !1, this._maxSpatialLayer = void 0, this._stopTracks = D, this._disableTrackOnPause = M, this._zeroRtpOnPause = W, this._appData = I ?? {}, this.onTrackEnded = this.onTrackEnded.bind(this), this.handleTrack() } get id() { return this._id } get localId() { return this._localId } get closed() { return this._closed } get kind() { return this._kind } get rtpSender() { return this._rtpSender } get track() { return this._track } get rtpParameters() { return this._rtpParameters } get paused() { return this._paused } get maxSpatialLayer() { return this._maxSpatialLayer } get appData() { return this._appData } set appData(g) { this._appData = g } get observer() { return this._observer } close() { this._closed || (h.debug("close()"), this._closed = !0, this.destroyTrack(), this.emit("@close"), this._observer.safeEmit("close"), super.close(), this._observer.close()) } transportClosed() { this._closed || (h.debug("transportClosed()"), this._closed = !0, this.destroyTrack(), this.safeEmit("transportclose"), this._observer.safeEmit("close")) } async getStats() { if (this._closed) throw new f.InvalidStateError("closed"); return new Promise((g, S) => { this.safeEmit("@getstats", g, S) }) } pause() { if (h.debug("pause()"), this._closed) { h.error("pause() | Producer closed"); return } this._paused = !0, this._track && this._disableTrackOnPause && (this._track.enabled = !1), this._zeroRtpOnPause && new Promise((g, S) => { this.safeEmit("@pause", g, S) }).catch(() => { }), this._observer.safeEmit("pause") } resume() { if (h.debug("resume()"), this._closed) { h.error("resume() | Producer closed"); return } this._paused = !1, this._track && this._disableTrackOnPause && (this._track.enabled = !0), this._zeroRtpOnPause && new Promise((g, S) => { this.safeEmit("@resume", g, S) }).catch(() => { }), this._observer.safeEmit("resume") } async replaceTrack({ track: g }) { if (h.debug("replaceTrack() [track:%o]", g), this._closed) { if (g && this._stopTracks) try { g.stop() } catch { } throw new f.InvalidStateError("closed") } else if (g && g.readyState === "ended") throw new f.InvalidStateError("track ended"); if (g === this._track) { h.debug("replaceTrack() | same track, ignored"); return } await new Promise((S, R) => { this.safeEmit("@replacetrack", g, S, R) }), this.destroyTrack(), this._track = g, this._track && this._disableTrackOnPause && (this._paused ? this._paused && (this._track.enabled = !1) : this._track.enabled = !0), this.handleTrack() } async setMaxSpatialLayer(g) { if (this._closed) throw new f.InvalidStateError("closed"); if (this._kind !== "video") throw new f.UnsupportedError("not a video Producer"); if (typeof g != "number") throw new TypeError("invalid spatialLayer"); g !== this._maxSpatialLayer && (await new Promise((S, R) => { this.safeEmit("@setmaxspatiallayer", g, S, R) }).catch(() => { }), this._maxSpatialLayer = g) } async setRtpEncodingParameters(g) { if (this._closed) throw new f.InvalidStateError("closed"); if (typeof g != "object") throw new TypeError("invalid params"); await new Promise((S, R) => { this.safeEmit("@setrtpencodingparameters", g, S, R) }) } onTrackEnded() { h.debug('track "ended" event'), this.safeEmit("trackended"), this._observer.safeEmit("trackended") } handleTrack() { this._track && this._track.addEventListener("ended", this.onTrackEnded) } destroyTrack() { if (this._track) try { this._track.removeEventListener("ended", this.onTrackEnded), this._stopTracks && this._track.stop() } catch { } } } c.Producer = P }
        }, n = {}; function s(a) { var c = n[a]; if (c !== void 0) return c.exports; var l = n[a] = { exports: {} }; return r[a].call(l.exports, l, l.exports, s), l.exports } s.amdO = {}, s.n = a => { var c = a && a.__esModule ? () => a.default : () => a; return s.d(c, { a: c }), c }, s.d = (a, c) => { for (var l in c) s.o(c, l) && !s.o(a, l) && Object.defineProperty(a, l, { enumerable: !0, get: c[l] }) }, s.g = function () { if (typeof globalThis == "object") return globalThis; try { return this || new Function("return this")() } catch { if (typeof window == "object") return window } }(), s.o = (a, c) => Object.prototype.hasOwnProperty.call(a, c), s.r = a => { typeof Symbol < "u" && Symbol.toStringTag && Object.defineProperty(a, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(a, "__esModule", { value: !0 }) }; var o = s(3115); return o
    })())
})(T2); var cc = T2.exports; function qf() { return qf = Object.assign ? Object.assign.bind() : function (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t]; for (var n in r) ({}).hasOwnProperty.call(r, n) && (e[n] = r[n]) } return e }, qf.apply(null, arguments) } var yr = "videosdk-live-react-sdk", xe = { "participant-joined": yr + "-participant-joined", "participant-left": yr + "-participant-left", "speaker-changed": yr + "-speaker-changed", "presenter-changed": yr + "-presenter-changed", "main-participant-changed": yr + "-main-participant-changed", "entry-requested": yr + "-entry-requested", "entry-responded": yr + "-entry-responded", "recording-started": yr + "-recording-started", "recording-stopped": yr + "-recording-stopped", data: yr + "-data", "meeting-joined": yr + "-meeting-joined", "meeting-left": yr + "-meeting-left", "live-stream-started": yr + "-live-stream-started", "live-stream-stopped": yr + "-live-stream-stopped", "video-state-changed": yr + "-video-state-changed", "video-seeked": yr + "-video-seeked", "webcam-requested": yr + "-webcam-requested", "mic-requested": yr + "-mic-requested", "pin-state-changed": yr + "-pin-state-changed", "connection-open": yr + "-connection-open", "connection-close": yr + "-connection-close", "switch-meeting": yr + "-switch-meeting", error: yr + "-error", "hls-started": yr + "-hls-started", "hls-stopped": yr + "-hls-stopped", "hls-state-changed": yr + "-hls-state-changed", "hls-playable-state-changed": yr + "-hls-playable-state-changed", "recording-state-changed": yr + "-recording-state-changed", "livestream-state-changed": yr + "-livestream-state-changed", "meeting-state-changed": yr + "-meeting-state-changed", "participant-mode-changed": yr + "-participant-mode-changed", "transcription-state-changed": yr + "-transcription-state-changed", "transcription-text": yr + "-transcription-text", "translation-state-changed": yr + "-translation-state-changed", "translation-language-changed": yr + "-translation-language-changed", "translation-text": yr + "-translation-text", "character-joined": yr + "-character-joined", "character-left": yr + "-character-left", "whiteboard-started": yr + "-whiteboard-started", "whiteboard-stopped": yr + "-whiteboard-stopped", "paused-all-streams": yr + "-paused-all-streams", "resumed-all-streams": yr + "-resumed-all-streams", "media-relay-started": yr + "-media-relay-started", "media-relay-stopped": yr + "-media-relay-stopped", "media-relay-error": yr + "-media-relay-error", "media-relay-request-response": yr + "-media-relay-request-response", "media-relay-request-received": yr + "-media-relay-request-received", "quality-limitation": yr + "-quality-limitation" }, be = new AM; be.setMaxListeners(9999); var ib = J.createContext(), A2 = function (t) { var r = t === void 0 ? {} : t, n = r.onParticipantJoined, s = n === void 0 ? function () { } : n, o = r.onParticipantLeft, a = o === void 0 ? function () { } : o, c = r.onSpeakerChanged, l = c === void 0 ? function () { } : c, p = r.onPresenterChanged, d = p === void 0 ? function () { } : p, f = r.onMainParticipantChanged, h = f === void 0 ? function () { } : f, P = r.onEntryRequested, b = P === void 0 ? function () { } : P, u = r.onEntryResponded, g = u === void 0 ? function () { } : u, S = r.onPausedAllStreams, R = S === void 0 ? function () { } : S, y = r.onResumedAllStreams, v = y === void 0 ? function () { } : y, D = r.onRecordingStarted, M = D === void 0 ? function () { } : D, W = r.onRecordingStopped, I = W === void 0 ? function () { } : W, E = r.onData, _ = E === void 0 ? function () { } : E, k = r.onMeetingJoined, L = k === void 0 ? function () { } : k, H = r.onMeetingLeft, V = H === void 0 ? function () { } : H, ee = r.onLiveStreamStarted, K = ee === void 0 ? function () { } : ee, N = r.onLiveStreamStopped, B = N === void 0 ? function () { } : N, Q = r.onVideoStateChanged, Z = Q === void 0 ? function () { } : Q, le = r.onVideoSeeked, X = le === void 0 ? function () { } : le, ce = r.onWebcamRequested, he = ce === void 0 ? function () { } : ce, ue = r.onMicRequested, ye = ue === void 0 ? function () { } : ue, se = r.onPinStateChanged, _e = se === void 0 ? function () { } : se, Se = r.onConnectionOpen, we = Se === void 0 ? function () { } : Se, De = r.onConnetionClose, mt = De === void 0 ? function () { } : De, Lt = r.onSwitchMeeting, Dt = Lt === void 0 ? function () { } : Lt, ot = r.onError, tr = ot === void 0 ? function () { } : ot, Br = r.onHlsStarted, on = Br === void 0 ? function () { } : Br, ir = r.onHlsStopped, gr = ir === void 0 ? function () { } : ir, Bt = r.onHlsStateChanged, hn = Bt === void 0 ? function () { } : Bt, Wr = r.onRecordingStateChanged, wn = Wr === void 0 ? function () { } : Wr, He = r.onLivestreamStateChanged, Ue = He === void 0 ? function () { } : He, zt = r.onMeetingStateChanged, hr = zt === void 0 ? function () { } : zt, Dr = r.onParticipantModeChanged, Kr = Dr === void 0 ? function () { } : Dr, fn = r.onCharacterJoined, St = fn === void 0 ? function () { } : fn, Fe = r.onCharacterLeft, ut = Fe === void 0 ? function () { } : Fe, qe = r.onMediaRelayStarted, it = qe === void 0 ? function () { } : qe, ur = r.onMediaRelayStopped, Ce = ur === void 0 ? function () { } : ur, Xt = r.onMediaRelayError, cr = Xt === void 0 ? function () { } : Xt, pr = r.onMediaRelayRequestResponse, ct = pr === void 0 ? function () { } : pr, jr = r.onMediaRelayRequestReceived, $e = jr === void 0 ? function () { } : jr, It = r.onQualityLimitation, vt = It === void 0 ? function () { } : It; return J.useEffect(function () { return be.on(xe["participant-joined"], s), be.on(xe["participant-left"], a), be.on(xe["speaker-changed"], l), be.on(xe["presenter-changed"], d), be.on(xe["main-participant-changed"], h), be.on(xe["entry-requested"], b), be.on(xe["entry-responded"], g), be.on(xe["paused-all-streams"], R), be.on(xe["resumed-all-streams"], v), be.on(xe["recording-started"], M), be.on(xe["recording-stopped"], I), be.on(xe.data, _), be.on(xe["meeting-joined"], L), be.on(xe["meeting-left"], V), be.on(xe["live-stream-started"], K), be.on(xe["live-stream-stopped"], B), be.on(xe["video-state-changed"], Z), be.on(xe["video-seeked"], X), be.on(xe["webcam-requested"], he), be.on(xe["mic-requested"], ye), be.on(xe["pin-state-changed"], _e), be.on(xe["connection-open"], we), be.on(xe["connection-close"], mt), be.on(xe["switch-meeting"], Dt), be.on(xe.error, tr), be.on(xe["hls-started"], on), be.on(xe["hls-stopped"], gr), be.on(xe["hls-state-changed"], hn), be.on(xe["recording-state-changed"], wn), be.on(xe["livestream-state-changed"], Ue), be.on(xe["meeting-state-changed"], hr), be.on(xe["participant-mode-changed"], Kr), be.on(xe["character-joined"], St), be.on(xe["character-left"], ut), be.on(xe["media-relay-started"], it), be.on(xe["media-relay-stopped"], Ce), be.on(xe["media-relay-error"], cr), be.on(xe["media-relay-request-response"], ct), be.on(xe["media-relay-request-received"], $e), be.on(xe["quality-limitation"], vt), function () { be.off(xe["meeting-state-changed"], hr), be.off(xe["participant-joined"], s), be.off(xe["participant-left"], a), be.off(xe["speaker-changed"], l), be.off(xe["presenter-changed"], d), be.off(xe["main-participant-changed"], h), be.off(xe["entry-requested"], b), be.off(xe["entry-responded"], g), be.off(xe["paused-all-streams"], R), be.off(xe["resumed-all-streams"], v), be.off(xe["recording-started"], M), be.off(xe["recording-stopped"], I), be.off(xe.data, _), be.off(xe["meeting-joined"], L), be.off(xe["meeting-left"], V), be.off(xe["live-stream-started"], K), be.off(xe["live-stream-stopped"], B), be.off(xe["video-state-changed"], Z), be.off(xe["video-seeked"], X), be.off(xe["webcam-requested"], he), be.off(xe["mic-requested"], ye), be.off(xe["pin-state-changed"], _e), be.off(xe["connection-open"], we), be.off(xe["connection-close"], mt), be.off(xe["switch-meeting"], Dt), be.off(xe.error, tr), be.off(xe["hls-started"], on), be.off(xe["hls-stopped"], gr), be.off(xe["hls-state-changed"], hn), be.off(xe["recording-state-changed"], wn), be.off(xe["livestream-state-changed"], Ue), be.off(xe["participant-mode-changed"], Kr), be.off(xe["character-joined"], St), be.off(xe["character-left"], ut), be.off(xe["media-relay-started"], it), be.off(xe["media-relay-stopped"], Ce), be.off(xe["media-relay-error"], cr), be.off(xe["media-relay-request-response"], ct), be.off(xe["media-relay-request-received"], $e), be.off(xe["quality-limitation"], vt) } }, []), J.useContext(ib) }, PM = function (t) { var r = t.children, n = t.onParticipantJoined, s = n === void 0 ? function () { } : n, o = t.onParticipantLeft, a = o === void 0 ? function () { } : o, c = t.onSpeakerChanged, l = c === void 0 ? function () { } : c, p = t.onPresenterChanged, d = p === void 0 ? function () { } : p, f = t.onMainParticipantChanged, h = f === void 0 ? function () { } : f, P = t.onEntryRequested, b = P === void 0 ? function () { } : P, u = t.onEntryResponded, g = u === void 0 ? function () { } : u, S = t.onPausedAllStreams, R = S === void 0 ? function () { } : S, y = t.onResumedAllStreams, v = y === void 0 ? function () { } : y, D = t.onRecordingStarted, M = D === void 0 ? function () { } : D, W = t.onRecordingStopped, I = W === void 0 ? function () { } : W, E = t.onData, _ = E === void 0 ? function () { } : E, k = t.onMeetingJoined, L = k === void 0 ? function () { } : k, H = t.onMeetingLeft, V = H === void 0 ? function () { } : H, ee = t.onLiveStreamStarted, K = ee === void 0 ? function () { } : ee, N = t.onLiveStreamStopped, B = N === void 0 ? function () { } : N, Q = t.onVideoStateChanged, Z = Q === void 0 ? function () { } : Q, le = t.onVideoSeeked, X = le === void 0 ? function () { } : le, ce = t.onWebcamRequested, he = ce === void 0 ? function () { } : ce, ue = t.onMicRequested, ye = ue === void 0 ? function () { } : ue, se = t.onPinStateChanged, _e = se === void 0 ? function () { } : se, Se = t.onConnectionOpen, we = Se === void 0 ? function () { } : Se, De = t.onConnetionClose, mt = De === void 0 ? function () { } : De, Lt = t.onSwitchMeeting, Dt = Lt === void 0 ? function () { } : Lt, ot = t.onError, tr = ot === void 0 ? function () { } : ot, Br = t.onHlsStarted, on = Br === void 0 ? function () { } : Br, ir = t.onHlsStopped, gr = ir === void 0 ? function () { } : ir, Bt = t.onHlsStateChanged, hn = Bt === void 0 ? function () { } : Bt, Wr = t.onRecordingStateChanged, wn = Wr === void 0 ? function () { } : Wr, He = t.onLivestreamStateChanged, Ue = He === void 0 ? function () { } : He, zt = t.onMeetingStateChanged, hr = zt === void 0 ? function () { } : zt, Dr = t.onParticipantModeChanged, Kr = Dr === void 0 ? function () { } : Dr, fn = t.onCharacterJoined, St = fn === void 0 ? function () { } : fn, Fe = t.onCharacterLeft, ut = Fe === void 0 ? function () { } : Fe, qe = t.onMediaRelayStarted, it = qe === void 0 ? function () { } : qe, ur = t.onMediaRelayStopped, Ce = ur === void 0 ? function () { } : ur, Xt = t.onMediaRelayError, cr = Xt === void 0 ? function () { } : Xt, pr = t.onMediaRelayRequestResponse, ct = pr === void 0 ? function () { } : pr, jr = t.onMediaRelayRequestReceived, $e = jr === void 0 ? function () { } : jr, It = t.onQualityLimitation, vt = It === void 0 ? function () { } : It; return J.useEffect(function () { return be.on(xe["meeting-state-changed"], hr), be.on(xe["participant-joined"], s), be.on(xe["participant-left"], a), be.on(xe["speaker-changed"], l), be.on(xe["presenter-changed"], d), be.on(xe["main-participant-changed"], h), be.on(xe["entry-requested"], b), be.on(xe["entry-responded"], g), be.on(xe["paused-all-streams"], R), be.on(xe["resumed-all-streams"], v), be.on(xe["recording-started"], M), be.on(xe["recording-stopped"], I), be.on(xe.data, _), be.on(xe["meeting-joined"], L), be.on(xe["meeting-left"], V), be.on(xe["live-stream-enabled"], K), be.on(xe["live-stream-disabled"], B), be.on(xe["video-state-changed"], Z), be.on(xe["video-seeked"], X), be.on(xe["webcam-requested"], he), be.on(xe["mic-requested"], ye), be.on(xe["pin-state-changed"], _e), be.on(xe["connection-open"], we), be.on(xe["connection-close"], mt), be.on(xe["switch-meeting"], Dt), be.on(xe.error, tr), be.on(xe["hls-started"], on), be.on(xe["hls-stopped"], gr), be.on(xe["hls-state-changed"], hn), be.on(xe["recording-state-changed"], wn), be.on(xe["livestream-state-changed"], Ue), be.on(xe["participant-mode-changed"], Kr), be.on(xe["character-joined"], St), be.on(xe["character-left"], ut), be.on(xe["media-relay-started"], it), be.on(xe["media-relay-stopped"], Ce), be.on(xe["media-relay-error"], cr), be.on(xe["media-relay-request-response"], ct), be.on(xe["media-relay-request-received"], $e), be.on(xe["quality-limitation"], vt), function () { be.off(xe["meeting-state-changed"], hr), be.off(xe["participant-joined"], s), be.off(xe["participant-left"], a), be.off(xe["speaker-changed"], l), be.off(xe["presenter-changed"], d), be.off(xe["main-participant-changed"], h), be.off(xe["entry-requested"], b), be.off(xe["entry-responded"], g), be.off(xe["paused-all-streams"], R), be.off(xe["resumed-all-streams"], v), be.off(xe["recording-started"], M), be.off(xe["recording-stopped"], I), be.off(xe.data, _), be.off(xe["meeting-joined"], L), be.off(xe["meeting-left"], V), be.off(xe["live-stream-enabled"], K), be.off(xe["live-stream-disabled"], B), be.off(xe["video-state-changed"], Z), be.off(xe["video-seeked"], X), be.off(xe["webcam-requested"], he), be.off(xe["mic-requested"], ye), be.off(xe["pin-state-changed"], _e), be.off(xe["connection-open"], we), be.off(xe["connection-close"], mt), be.off(xe["switch-meeting"], Dt), be.off(xe.error, tr), be.off(xe["hls-started"], on), be.off(xe["hls-stopped"], gr), be.off(xe["hls-state-changed"], hn), be.off(xe["recording-state-changed"], wn), be.off(xe["livestream-state-changed"], Ue), be.off(xe["participant-mode-changed"], Kr), be.off(xe["character-joined"], St), be.off(xe["character-left"], ut), be.off(xe["media-relay-started"], it), be.off(xe["media-relay-stopped"], Ce), be.off(xe["media-relay-error"], cr), be.off(xe["media-relay-request-response"], ct), be.off(xe["media-relay-request-received"], $e), be.off(xe["quality-limitation"], vt) } }, []), us.createElement(us.Fragment, null, us.createElement(ib.Consumer, null, r)) }, DM = "0.6.7", IM = function (t) { var r = t.children, n = t.config, s = t.token, o = t.joinWithoutUserInteraction, a = t.reinitialiseMeetingOnConfigChange, c = t.deviceInfo, l = t.keyProvider, p = J.useState(null), d = p[0], f = p[1], h = J.useState(null), P = h[0], b = h[1], u = J.useState(null), g = u[0], S = u[1], R = J.useState(null), y = R[0], v = R[1], D = J.useState(null), M = D[0], W = D[1], I = J.useState(!1), E = I[0], _ = I[1], k = J.useState(!1), L = k[0], H = k[1], V = J.useState(!1), ee = V[0], K = V[1], N = J.useState(!1), B = N[0], Q = N[1], Z = J.useState([]), le = Z[0], X = Z[1], ce = J.useState(new Map), he = ce[0], ue = ce[1], ye = J.useState(new Map), se = ye[0], _e = ye[1], Se = J.useState(new Map), we = Se[0], De = Se[1], mt = J.useState(!1), Lt = mt[0], Dt = mt[1], ot = J.useState(new Map), tr = ot[0], Br = ot[1], on = J.useState(!1), ir = on[0], gr = on[1], Bt = J.useState(!1), hn = Bt[0], Wr = Bt[1], wn = J.useState("RECORDING_STOPPED"), He = wn[0], Ue = wn[1], zt = J.useState("LIVESTREAM_STOPPED"), hr = zt[0], Dr = zt[1], Kr = J.useState("HLS_STOPPED"), fn = Kr[0], St = Kr[1], Fe = J.useState({ downstreamUrl: null, playbackHlsUrl: null, livestreamUrl: null }), ut = Fe[0], qe = Fe[1], it = J.useState("TRANSCRIPTION_STOPPED"), ur = it[0], Ce = it[1], Xt = J.useState("TRANSLATION_STOPPED"), cr = Xt[0], pr = Xt[1], ct = J.useRef(), jr = J.useRef(), $e = J.useRef(), It = J.useRef(), vt = J.useRef(), Nt = J.useRef(l), dt = J.useRef(n), Or = J.useRef(s), vr = J.useRef(!1), or = J.useRef(), br = J.useMemo(function () { return a }, []); J.useEffect(function () { ct.current = d }, [d]), J.useEffect(function () { jr.current = E }, [E]), J.useEffect(function () { $e.current = L }, [L]), J.useEffect(function () { It.current = ee }, [ee]), J.useEffect(function () { vt.current = B }, [B]), J.useEffect(function () { dt.current = n }, [n]), J.useEffect(function () { Or.current = s }, [s]), J.useEffect(function () { or.current = hn }, [hn]); var Ar = function () { f(null), b(null), S(null), v(null), W(null), _(!1), H(!1), K(!1), Q(!1), X([]), Dt(!1), ue(new Map), _e(new Map), De(new Map), Br(new Map), gr(!1), Wr(!1), Ue("RECORDING_STOPPED"), Dr("LIVESTREAM_STOPPED"), St("HLS_STOPPED"), Ce("TRANSCRIPTION_STOPPED"), pr("TRANSLATION_STOPPED"), qe({ downstreamUrl: null, playbackHlsUrl: null, livestreamUrl: null }) }, vn = function (ae) { ue(function (Ee) { Ee.set(ae.id, ae); var Ke = new Map(Ee); return Ke }), be.emit(xe["participant-joined"], ae) }, Gt = function (ae, Ee) { ue(function (Ke) { Ke.delete(ae.id); var Hr = new Map(Ke); return Hr }), be.emit(xe["participant-left"], ae, Ee) }, Et = function (ae) { var Ee, Ke; W(ae), K(ae === (ct == null || (Ee = ct.current) === null || Ee === void 0 || (Ke = Ee.localParticipant) === null || Ke === void 0 ? void 0 : Ke.id)), be.emit(xe["presenter-changed"], ae) }, Xr = function (ae) { S(ae), be.emit(xe["main-participant-changed"], ae) }, mn = function (ae) { v(ae), be.emit(xe["speaker-changed"], ae) }, Cr = function (ae) { X(function (Ee) { return [].concat(Ee, [ae]) }), be.emit(xe.data, ae) }, yn = function (ae) { be.emit(xe["entry-requested"], ae) }, Ci = function (ae, Ee) { be.emit(xe["entry-responded"], ae, Ee) }, Ri = function () { Q(!0), be.emit(xe["recording-started"]) }, $i = function () { Q(!1), be.emit(xe["recording-stopped"]) }, Gs = function (ae) { ae.track.readyState === "live" && (ae.kind === "video" ? H(!0) : ae.kind === "audio" && _(!0)) }, ei = function (ae) { ae.kind === "video" ? H(!1) : ae.kind === "audio" && _(!1) }, va = function (ae) { Dt(!0), be.emit(xe["live-stream-started"], ae) }, Ds = function () { Dt(!1), be.emit(xe["live-stream-stopped"]) }, ya = function (ae) { Wr(!0), be.emit(xe["hls-started"], ae) }, Ua = function () { Wr(!1), be.emit(xe["hls-stopped"]) }, dr = function (ae) { be.emit(xe["video-state-changed"], ae) }, Ks = function (ae) { be.emit(xe["video-seeked"], ae) }, ms = function (ae) { be.emit(xe["webcam-requested"], ae) }, rs = function (ae) { be.emit(xe["mic-requested"], ae) }, dn = function (ae) { ae.switchRoomId ? (X(function (Ee) { return [].concat(Ee, ae.messages) }), be.emit(xe["meeting-joined"], ae)) : (vr.current = !0, X(function (Ee) { return [].concat(Ee, ae.messages) }), be.emit(xe["meeting-joined"], ae), gr(!0)) }, Is = function (ae) { be.emit(xe["meeting-left"], ae); var Ee = ct.current; if (Ee) { var Ke; typeof (Ee == null ? void 0 : Ee.off) == "function" && (Ee.off("meeting-state-changed", Yr), Ee.off("socket-state-changed", bn), Ee.off("participant-joined", vn), Ee.off("participant-left", Gt), Ee.off("presenter-changed", Et), Ee.off("main-participant-changed", Xr), Ee.off("speaker-changed", mn), Ee.off("entry-requested", yn), Ee.off("entry-responded", Ci), Ee.off("data", Cr), Ee.off("recording-started", Ri), Ee.off("recording-stopped", $i), Ee.off("meeting-joined", dn), Ee.off("meeting-left", Is), Ee.off("livestream-started", va), Ee.off("livestream-stopped", Ds), Ee.off("video-state-changed", dr), Ee.off("video-seeked", Ks), Ee.off("webcam-requested", ms), Ee.off("mic-requested", rs), Ee.off("pin-state-changed", Ys), Ee.off("paused-all-streams", Ne), Ee.off("resumed-all-streams", pt), Ee.off("connection-open", yt), Ee.off("connection-close", kt), Ee.off("switch-meeting", Pr), Ee.off("error", Fr), Ee.off("hls-started", ya), Ee.off("hls-stopped", Ua), Ee.off("recording-state-changed", xt), Ee.off("livestream-state-changed", $r), Ee.off("hls-state-changed", xr), Ee.off("participant-mode-changed", Ha), Ee.off("whiteboard-stopped", is), Ee.off("whiteboard-started", uo), Ee.off("transcription-state-changed", Di), Ee.off("transcription-text", ki), Ee.off("translation-state-changed", ns), Ee.off("translation-text", gs), Ee.off("translation-language-changed", ba), Ee.off("character-joined", Va), Ee.off("character-left", Wa), Ee.off("media-relay-started", vs), Ee.off("media-relay-stopped", po), Ee.off("media-relay-error", Ui), Ee.off("media-relay-request-response", Bo), Ee.off("media-relay-request-received", jl), Ee.off("quality-limitation", Pc)), typeof (Ee == null || (Ke = Ee.localParticipant) === null || Ke === void 0 ? void 0 : Ke.off) == "function" && (Ee.localParticipant.off("stream-enabled", Gs), Ee.localParticipant.off("stream-disabled", ei)), Ar() } }, Ys = function (ae) { var Ee = ae.participantId, Ke = ae.state, Hr = ae.pinnedBy; De(function (Zr) { !Ke.cam && !Ke.share ? Zr.delete(Ee) : Zr.set(Ee, Ke); var xa = new Map(Zr); return xa }), be.emit(xe["pin-state-changed"], { participantId: Ee, state: Ke, pinnedBy: Hr }) }, Ne = function (ae) { var Ee = ae.kind; be.emit(xe["paused-all-streams"], { kind: Ee }) }, pt = function (ae) { var Ee = ae.kind; be.emit(xe["resumed-all-streams"], { kind: Ee }) }, yt = function (ae) { Br(function (Ee) { Ee.set(ae.id, ae); var Ke = new Map(Ee); return Ke }), be.emit(xe["connection-open"], ae) }, kt = function (ae) { Br(function (Ee) { Ee.delete(ae); var Ke = new Map(Ee); return Ke }), be.emit(xe["connection-close"], ae) }, Pr = function (ae) { be.emit(xe["switch-meeting"], ae) }, Fr = function (ae) { be.emit(xe.error, ae) }, xt = function (ae) { Ue(ae == null ? void 0 : ae.status), be.emit(xe["recording-state-changed"], ae) }, $r = function (ae) { Dr(ae == null ? void 0 : ae.status), be.emit(xe["livestream-state-changed"], ae) }, xr = function (ae) { St(ae == null ? void 0 : ae.status), (ae == null ? void 0 : ae.status) == "HLS_PLAYABLE" ? qe({ downstreamUrl: ae == null ? void 0 : ae.downstreamUrl, playbackHlsUrl: ae == null ? void 0 : ae.playbackHlsUrl, livestreamUrl: ae == null ? void 0 : ae.livestreamUrl }) : (ae == null ? void 0 : ae.status) == "HLS_STOPPED" && qe({ downstreamUrl: null, playbackHlsUrl: null, livestreamUrl: null }), be.emit(xe["hls-state-changed"], ae) }, Yr = function (ae) { be.emit(xe["meeting-state-changed"], ae), (ae == null ? void 0 : ae.state) == "RECONNECTING" && gr(!1) }, bn = function (ae) { (ae == null ? void 0 : ae.state) == "SOCKET_DISCONNECTED" && gr(!1) }, Di = function (ae) { Ce(ae == null ? void 0 : ae.status), be.emit(xe["transcription-state-changed"], ae) }, ki = function (ae) { be.emit(xe["transcription-text"], ae) }, ns = function (ae) { pr(ae == null ? void 0 : ae.status), be.emit(xe["translation-state-changed"], ae) }, gs = function (ae) { be.emit(xe["translation-text"], ae) }, ba = function (ae) { be.emit(xe["translation-language-changed"], ae) }, uo = function (ae) { be.emit(xe["whiteboard-started"], ae) }, is = function (ae) { be.emit(xe["whiteboard-stopped"], ae) }, Va = function (ae) { _e(function (Ee) { Ee.set(ae.id, ae); var Ke = new Map(Ee); return Ke }), be.emit(xe["character-joined"], ae) }, Wa = function (ae) { _e(function (Ee) { Ee.delete(ae.id); var Ke = new Map(Ee); return Ke }), be.emit(xe["character-left"], ae) }, Ha = function (ae) { var Ee, Ke; ue(function (Hr) { var Zr = Hr.get(ae.participantId); Zr.mode = ae.mode, Hr.set(Zr.id, Zr); var xa = new Map(Hr); return xa }), ae.participantId === (ct == null || (Ee = ct.current) === null || Ee === void 0 || (Ke = Ee.localParticipant) === null || Ke === void 0 ? void 0 : Ke.id) && b(function (Hr) { return Hr.mode = ae.mode, Hr }), be.emit(xe["participant-mode-changed"], ae) }, vs = function (ae) { be.emit(xe["media-relay-started"], ae) }, po = function (ae) { be.emit(xe["media-relay-stopped"], ae) }, Ui = function (ae) { be.emit(xe["media-relay-error"], ae) }, Bo = function (ae) { be.emit(xe["media-relay-request-response"], ae) }, jl = function (ae) { be.emit(xe["media-relay-request-received"], ae) }, Pc = function (ae) { be.emit(xe["quality-limitation"], ae) }, Ol = function () { var ae = cc.VideoSDK && cc.VideoSDK.initMeeting(dt.current); f(ae); var Ee = ae.localParticipant, Ke = ae.participants, Hr = ae.characters; Ke.set(Ee.id, Ee), ue(Ke), _e(Hr), b(Ee), ae.on("meeting-state-changed", Yr), ae.on("socket-state-changed", bn), ae.on("participant-joined", vn), ae.on("participant-left", Gt), ae.on("presenter-changed", Et), ae.on("main-participant-changed", Xr), ae.on("speaker-changed", mn), ae.on("entry-requested", yn), ae.on("entry-responded", Ci), ae.on("data", Cr), ae.on("recording-started", Ri), ae.on("recording-stopped", $i), ae.on("meeting-joined", dn), ae.on("meeting-left", Is), ae.on("livestream-started", va), ae.on("livestream-stopped", Ds), ae.on("video-state-changed", dr), ae.on("video-seeked", Ks), ae.on("webcam-requested", ms), ae.on("mic-requested", rs), ae.on("pin-state-changed", Ys), ae.on("paused-all-streams", Ne), ae.on("resumed-all-streams", pt), ae.on("connection-open", yt), ae.on("connection-close", kt), ae.on("switch-meeting", Pr), ae.on("error", Fr), ae.on("hls-started", ya), ae.on("hls-stopped", Ua), ae.on("recording-state-changed", xt), ae.on("livestream-state-changed", $r), ae.on("hls-state-changed", xr), ae.on("participant-mode-changed", Ha), ae.on("transcription-state-changed", Di), ae.on("transcription-text", ki), ae.on("translation-state-changed", ns), ae.on("translation-text", gs), ae.on("translation-language-changed", ba), ae.on("whiteboard-started", uo), ae.on("whiteboard-stopped", is), ae.on("character-joined", Va), ae.on("character-left", Wa), ae.on("media-relay-started", vs), ae.on("media-relay-stopped", po), ae.on("media-relay-error", Ui), ae.on("media-relay-request-response", Bo), ae.on("media-relay-request-received", jl), ae.on("quality-limitation", Pc), ae.localParticipant.on("stream-enabled", Gs), ae.localParticipant.on("stream-disabled", ei), ae.join() }, Ml = function () { var ae = ct.current; ae && ae.leave() }, ru = function () { var ae = ct.current; ae && ae.end() }, nu = function (ae) { var Ee = ct.current; Ee && Ee.pauseAllStreams(ae) }, ho = function (ae) { var Ee = ct.current; Ee && Ee.resumeAllStreams(ae) }, Ll = function (ae, Ee, Ke, Hr) { var Zr = ct.current; Zr && Zr.startRecording(ae, Ee, Ke, Hr) }, Fo = function () { var ae = ct.current; if (ae) { var Ee = vt.current; Ee && ae.stopRecording() } }, fo = function (ae) { ae === void 0 && (ae = void 0); var Ee = ct.current; Ee && Ee.unmuteMic(ae) }, zo = function () { var ae = ct.current; ae && ae.muteMic() }, $o = function (ae) { ae === void 0 && (ae = void 0); var Ee = jr.current; Ee ? zo() : fo(ae) }, Nl = function () { var ae = ct.current; ae && ae.disableWebcam() }, mo = function (ae) { ae === void 0 && (ae = void 0); var Ee = ct.current; Ee && Ee.enableWebcam(ae) }, Uo = function (ae) { ae === void 0 && (ae = void 0); var Ee = $e.current; Ee ? Nl() : mo(ae) }, Bl = function (ae) { var Ee = ae.meetingId, Ke = ae.token, Hr = ct.current; Hr && Hr.switchTo({ meetingId: Ee, token: Ke }) }, js = function () { var ae = ct.current; ae && ae.disableScreenShare() }, ys = function (ae) { ae === void 0 && (ae = void 0); var Ee = ct.current; Ee && Ee.enableScreenShare(ae) }, Dc = function (ae) { ae === void 0 && (ae = void 0); var Ee = It.current; Ee ? js() : ys(ae) }, Ic = function (ae) { var Ee = ct.current; Ee && Ee.changeMode(ae) }, Vi = function (ae, Ee) { Ee === void 0 && (Ee = { reliability: "RELIABLE" }); try { var Ke = ct.current; return Promise.resolve(function () { if (Ke) return Promise.resolve(Ke.send(ae, Ee)) }()) } catch (Hr) { return Promise.reject(Hr) } }, jc = function (ae, Ee) { var Ke = ct.current; Ke && Ke.respondEntry(ae, Ee) }, qa = function () { try { var ae = ct.current; return Promise.resolve(function () { if (ae) return Promise.resolve(ae.getMics()) }()) } catch (Ee) { return Promise.reject(Ee) } }, go = function () { try { var ae = ct.current; return Promise.resolve(function () { if (ae) return Promise.resolve(ae.getWebcams()) }()) } catch (Ee) { return Promise.reject(Ee) } }, vo = function (ae) { var Ee = ct.current; Ee && Ee.changeWebcam(ae) }, Ga = function (ae) { var Ee = ct.current; Ee && Ee.replaceWebcamStream(ae) }, Vo = function (ae) { var Ee = ct.current; Ee && Ee.changeMic(ae) }, Fl = function (ae) { var Ee = ae.link, Ke = ct.current; Ke && Ke.startVideo({ link: Ee }) }, zl = function () { var ae = ct.current; ae && ae.stopVideo() }, Wo = function () { var ae = ct.current; ae && ae.resumeVideo() }, Os = function (ae) { var Ee = ae.currentTime, Ke = ct.current; Ke && Ke.pauseVideo({ currentTime: Ee }) }, Ho = function () { var ae = ct.current; ae && ae.enableAdaptiveSubscription() }, $l = function () { var ae = ct.current; ae && ae.disableAdaptiveSubscription() }, Ul = function (ae) { var Ee = ae.destinationMeetingId, Ke = ae.token, Hr = ae.kinds, Zr = ct.current; Zr && Zr.requestMediaRelay({ destinationMeetingId: Ee, token: Ke, kinds: Hr }) }, Vl = function (ae) { var Ee = ct.current; Ee && Ee.stopMediaRelay(ae) }, Wl = function (ae) { var Ee = ae.currentTime, Ke = ct.current; Ke && Ke.seekVideo({ currentTime: Ee }) }, Hl = function (ae, Ee) { var Ke = ct.current; Ke && Ke.startLivestream(ae, Ee) }, ql = function () { var ae = ct.current; ae && ae.stopLivestream() }, Gl = function (ae) { var Ee = ae.meetingId, Ke = ae.payload; try { var Hr = ct.current, Zr = function () { if (Hr) return Promise.resolve(Hr.connectTo({ meetingId: Ee, payload: Ke })).then(function () { }) }(); return Promise.resolve(Zr && Zr.then ? Zr.then(function () { }) : void 0) } catch (xa) { return Promise.reject(xa) } }, Kl = function (ae, Ee) { var Ke = ct.current; Ke && Ke.startHls(ae, Ee) }, qo = function () { var ae = ct.current; ae && ae.stopHls() }, sr = function () { cc.VideoSDK.config(Or.current), Nt.current && cc.VideoSDK.setKeyProvider(Nt.current), c ? cc.VideoSDK.analytics(c) : cc.VideoSDK.analytics({ sdkType: "react-web", sdkVersion: DM }), o && Ol() }; return J.useEffect(function () { sr() }, []), J.useEffect(function () { br && vr.current && (Ml(), sr(), !o && Ol()) }, [n.meetingId, s, br]), us.createElement(ib.Provider, { value: { meetingId: d == null ? void 0 : d.id, meeting: d, baseUrl: d == null ? void 0 : d.baseUrl, localParticipant: P, mainParticipant: g, activeSpeakerId: y, participants: he, characters: se, presenterId: M, localMicOn: E, localWebcamOn: L, localScreenShareOn: ee, messages: le, isRecording: B, isLiveStreaming: Lt, pinnedParticipants: we, connections: tr, isHls: hn, recordingState: He, livestreamState: hr, hlsState: fn, hlsUrls: ut, transcriptionState: ur, translationState: cr, isMeetingJoined: ir, selectedCameraDevice: d == null ? void 0 : d.selectedCameraDevice, selectedMicrophoneDevice: d == null ? void 0 : d.selectedMicrophoneDevice, join: Ol, leave: Ml, end: ru, pauseAllStreams: nu, resumeAllStreams: ho, startRecording: Ll, stopRecording: Fo, send: Vi, respondEntry: jc, muteMic: zo, unmuteMic: fo, toggleMic: $o, disableWebcam: Nl, enableWebcam: mo, toggleWebcam: Uo, disableScreenShare: js, enableScreenShare: ys, toggleScreenShare: Dc, switchTo: Bl, getMics: qa, getWebcams: go, changeWebcam: vo, replaceWebcamStream: Ga, changeMic: Vo, changeMode: Ic, startVideo: Fl, stopVideo: zl, resumeVideo: Wo, pauseVideo: Os, seekVideo: Wl, startLivestream: Hl, stopLivestream: ql, connectTo: Gl, startHls: Kl, stopHls: qo, enableAdaptiveSubscription: Ho, disableAdaptiveSubscription: $l, requestMediaRelay: Ul, stopMediaRelay: Vl } }, r) }, P2 = function (t, r) { var n = r === void 0 ? {} : r, s = n.onStreamEnabled, o = s === void 0 ? function () { } : s, a = n.onStreamDisabled, c = a === void 0 ? function () { } : a, l = n.onMediaStatusChanged, p = l === void 0 ? function () { } : l, d = n.onVideoQualityChanged, f = d === void 0 ? function () { } : d, h = n.onStreamPaused, P = h === void 0 ? function () { } : h, b = n.onStreamResumed, u = b === void 0 ? function () { } : b, g = n.onProducerAdded, S = g === void 0 ? function () { } : g, R = n.onProducerRemoved, y = R === void 0 ? function () { } : R, v = n.onConsumerAdded, D = v === void 0 ? function () { } : v, M = n.onConsumerRemoved, W = M === void 0 ? function () { } : M, I = J.useState(null), E = I[0], _ = I[1], k = J.useState(null), L = k[0], H = k[1], V = J.useState(null), ee = V[0], K = V[1], N = J.useState(null), B = N[0], Q = N[1], Z = A2(), le = J.useMemo(function () { var Gt, Et = Z == null ? void 0 : Z.participants, Xr = Z == null ? void 0 : Z.localParticipant, mn = Z == null ? void 0 : Z.activeSpeakerId, Cr = Z == null ? void 0 : Z.mainParticipant, yn = (Z == null || (Gt = Z.pinnedParticipants) === null || Gt === void 0 ? void 0 : Gt.get(t)) || { cam: !1, share: !1 }; return { participants: Et, localParticipant: Xr, activeSpeakerId: mn, mainParticipant: Cr, pinState: yn } }, [Z]), X = le.participants, ce = le.localParticipant, he = le.activeSpeakerId, ue = le.mainParticipant, ye = le.pinState, se = X == null ? void 0 : X.get(t), _e = J.useState(se == null ? void 0 : se.webcamOn), Se = _e[0], we = _e[1], De = J.useState(se == null ? void 0 : se.micOn), mt = De[0], Lt = De[1], Dt = J.useState(se == null ? void 0 : se.screenShareOn), ot = Dt[0], tr = Dt[1], Br = J.useState(se == null ? void 0 : se.screenShareAudioOn), on = Br[0], ir = Br[1], gr = J.useState(se == null ? void 0 : se.mode), Bt = gr[0], hn = gr[1], Wr = function (Et) { if (Et.track.readyState === "live") switch (Et.kind) { case "video": E != null && _(null), _(Et); break; case "audio": L != null && H(null), H(Et); break; case "share": ee != null && K(null), K(Et); break; case "shareAudio": B != null && Q(null), Q(Et); break } }, wn = function (Et) { switch (Et.kind) { case "video": _(null); break; case "audio": H(null); break; case "share": K(null); break; case "shareAudio": Q(null); break } }, He = function (Et) { Wr(Et), o(Et) }, Ue = function (Et) { P(Et) }, zt = function (Et) { u(Et) }, hr = function (Et) { t === Et.participantId && hn(Et.mode) }, Dr = function (Et) { wn(Et), c(Et) }, Kr = function (Et) { var Xr = Et.peerId, mn = Et.prevQuality, Cr = Et.currentQuality; f({ peerId: Xr, prevQuality: mn, currentQuality: Cr }) }, fn = function (Et) { var Xr = Et.kind, mn = Et.peerId, Cr = Et.newStatus; Xr == "audio" ? Lt(Cr) : Xr == "video" ? we(Cr) : Xr == "share" ? tr(Cr) : Xr == "shareAudio" && ir(Cr), p({ kind: Xr, peerId: mn, newStatus: Cr }) }, St = function (Et) { S(Et) }, Fe = function (Et) { y(Et) }, ut = function (Et) { D(Et) }, qe = function (Et) { W(Et) }, it = function (Et) { se == null || se.setQuality(Et) }, ur = function (Et, Xr) { se == null || se.setViewPort(Et, Xr) }, Ce = function (Et) { se == null || se.setScreenShareQuality(Et) }, Xt = function () { se == null || se.enableMic() }, cr = function () { se == null || se.disableMic() }, pr = function () { se == null || se.enableWebcam() }, ct = function () { se == null || se.disableWebcam() }, jr = function (Et) { se == null || se.pin(Et) }, $e = function (Et) { se == null || se.unpin(Et) }, It = function () { se == null || se.remove() }, vt = function (Et) { var Xr = Et === void 0 ? {} : Et, mn = Xr.height, Cr = Xr.width; return Promise.resolve(se == null ? void 0 : se.captureImage({ height: mn, width: Cr })) }, Nt = function () { return Promise.resolve(se == null ? void 0 : se.getAudioStats()) }, dt = function () { return Promise.resolve(se == null ? void 0 : se.getVideoStats()) }, Or = function () { return Promise.resolve(se == null ? void 0 : se.getShareStats()) }, vr = function () { return Promise.resolve(se == null ? void 0 : se.getShareAudioStats()) }, or = function () { se == null || se.consumeWebcamStreams() }, br = function () { se == null || se.consumeMicStreams() }, Ar = function () { se == null || se.stopConsumingWebcamStreams() }, vn = function () { se == null || se.stopConsumingMicStreams() }; return J.useEffect(function () { var Gt = se == null ? void 0 : se.streams; return Gt && Gt.forEach(function (Et) { Wr(Et) }), se != null && se.micOn && Lt(mt), se != null && se.webcamOn && we(Se), se != null && se.screenShareOn && tr(ot), se != null && se.screenShareAudioOn && ir(on), se == null || se.on("stream-enabled", He), se == null || se.on("stream-disabled", Dr), se == null || se.on("stream-paused", Ue), se == null || se.on("stream-resumed", zt), se == null || se.on("media-status-changed", fn), se == null || se.on("video-quality-changed", Kr), se == null || se.on("producer-added", St), se == null || se.on("producer-removed", Fe), se == null || se.on("consumer-added", ut), se == null || se.on("consumer-removed", qe), be.on(xe["participant-mode-changed"], hr), function () { se == null || se.off("stream-enabled", He), se == null || se.off("stream-disabled", Dr), se == null || se.off("stream-paused", Ue), se == null || se.off("stream-resumed", zt), se == null || se.off("media-status-changed", fn), se == null || se.off("video-quality-changed", Kr), se == null || se.off("producer-added", St), se == null || se.off("producer-removed", Fe), se == null || se.off("consumer-added", ut), se == null || se.off("consumer-removed", qe), be.off(xe["participant-mode-changed"], hr) } }, [se]), { displayName: se == null ? void 0 : se.displayName, participant: se, webcamStream: E, micStream: L, screenShareStream: ee, screenShareAudioStream: B, webcamOn: Se || !!E, micOn: mt || !!L, mode: Bt, metaData: se == null ? void 0 : se.metaData, screenShareOn: ot || !!ee, screenShareAudioOn: on || !!B, isLocal: (ce == null ? void 0 : ce.id) === t, isActiveSpeaker: he === t, isMainParticipant: (ue == null ? void 0 : ue.id) === t, pinState: ye, consumeMicStreams: br, consumeWebcamStreams: or, stopConsumingMicStreams: vn, stopConsumingWebcamStreams: Ar, setQuality: it, setScreenShareQuality: Ce, setViewPort: ur, enableMic: Xt, disableMic: cr, enableWebcam: pr, disableWebcam: ct, captureImage: vt, pin: jr, unpin: $e, remove: It, getAudioStats: Nt, getVideoStats: dt, getShareStats: Or, getShareAudioStats: vr } }; typeof Symbol < "u" && (Symbol.iterator || (Symbol.iterator = Symbol("Symbol.iterator"))); typeof Symbol < "u" && (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol("Symbol.asyncIterator"))); cc.VideoSDK.Constants; J.forwardRef(function (e, t) { var r = e.participantId, n = e.type, s = n === void 0 ? "video" : n, o = e.containerStyle, a = o === void 0 ? {} : o, c = e.className, l = c === void 0 ? "" : c, p = e.classNameVideo, d = p === void 0 ? "" : p, f = e.videoStyle, h = f === void 0 ? {} : f, P = e.videoRef, b = P2(r), u = b.webcamOn, g = b.webcamStream, S = b.isLocal, R = b.screenShareStream, y = b.screenShareOn, v = J.useRef(null), D = P || v; return J.useEffect(function () { var M = s === "share" ? R : g, W = s === "share" ? y : u; if (D.current) if (W && M) { var I = new MediaStream; I.addTrack(M.track), D.current.setAttribute("muted", ""), D.current.srcObject = I, D.current.setAttribute("playsinline", ""), D.current.setAttribute("x5-playsinline", ""), D.current.setAttribute("webkit-playsinline", ""), D.current.play().catch(function (E) { return console.error("finalVideoRef.current.play() failed", E) }) } else D.current.srcObject = null }, [s].concat(s === "share" ? [y, R] : s === "video" ? [u, g] : [])), us.createElement("div", { ref: t, className: "video-container participant-video-" + r + " " + (l || ""), style: qf({ objectFit: s === "share" ? "contain" : "none", height: "100%" }, a) }, us.createElement("video", { width: "100%", height: "100%", ref: D, autoPlay: !0, className: d, muted: !0, style: S && s !== "share" ? qf({ transform: "scaleX(-1)", WebkitTransform: "scaleX(-1)" }, h) : h })) }); const jM = "https://api.videosdk.live", OM = async () => { try { const t = await fetch("http://127.0.0.1:5000/api/videosdk/token", { method: "GET" }), { token: r } = await t.json(); return r } catch (e) { return console.error("Error getting token", e), null } }, MM = async ({ token: e }) => { const t = `${jM}/v2/rooms`, s = await (await fetch(t, { method: "POST", headers: { Authorization: e, "Content-Type": "application/json" } })).json(); return s.roomId ? { meetingId: s.roomId, err: null } : { meetingId: null, err: s.error } }, w_ = ({ participantId: e }) => { const { webcamStream: t, micStream: r, webcamOn: n, micOn: s, isLocal: o, displayName: a } = P2(e), c = J.useRef(null), l = J.useRef(null); return J.useEffect(() => { c.current && t && (c.current.srcObject = new MediaStream([t.track]), c.current.play().catch(p => console.error("videoElem.current.play() failed", p))) }, [t, n]), J.useEffect(() => { l.current && r && (l.current.srcObject = new MediaStream([r.track]), l.current.play().catch(p => console.error("audioElem.current.play() failed", p))) }, [r, s]), i.jsxs("div", { style: { position: "relative", width: "100%", height: "100%", background: "rgb\(18 37 74\)", borderRadius: "8px", overflow: "hidden" }, children: [n ? i.jsx("video", { ref: c, style: { width: "100%", height: "100%", objectFit: "cover" }, autoPlay: !0, playsInline: !0, muted: o }) : i.jsx("div", { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", color: "white" }, children: i.jsxs("div", { style: { textAlign: "center" }, children: [i.jsx("div", { style: { width: "64px", height: "64px", background: "rgba(255,255,255,0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 1rem" }, children: i.jsx(Vf, { size: 32 }) }), i.jsxs("p", { children: [a, " Camera Off"] })] }) }), i.jsx("audio", { ref: l, autoPlay: !0, playsInline: !0, muted: o }), i.jsxs("div", { style: { position: "absolute", bottom: "10px", left: "10px", background: "rgba(0,0,0,0.6)", padding: "4px 8px", borderRadius: "4px", color: "white", fontSize: "12px", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsxs("span", { children: [a, " ", o ? "(You)" : ""] }), !s && i.jsx(Gy, { size: 12, color: "#ef4444" })] }), o && i.jsx("div", { style: { position: "absolute", top: "10px", right: "10px", background: "#3b82f6", color: "white", padding: "2px 6px", borderRadius: "4px", fontSize: "10px" }, children: "HOST" })] }) }, LM = ({ leaveMeeting: e, toggleMic: t, toggleWebcam: r, micOn: n, webcamOn: s }) => i.jsxs("div", { style: { display: "flex", gap: "1rem", justifyContent: "center", padding: "1rem" }, children: [i.jsx("button", { onClick: () => t(), style: { width: "50px", height: "50px", borderRadius: "50%", border: "none", background: n ? "#f1f5f9" : "#fee2e2", color: n ? "rgb\(18 37 74\)" : "#ef4444", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center" }, children: n ? i.jsx(zC, { size: 20 }) : i.jsx(Gy, { size: 20 }) }), i.jsx("button", { onClick: () => r(), style: { width: "50px", height: "50px", borderRadius: "50%", border: "none", background: s ? "#f1f5f9" : "#fee2e2", color: s ? "rgb\(18 37 74\)" : "#ef4444", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center" }, children: s ? i.jsx(ua, { size: 20 }) : i.jsx(Vf, { size: 20 }) }), i.jsx("button", { onClick: () => e(), style: { width: "50px", height: "50px", borderRadius: "50%", border: "none", background: "#ef4444", color: "white", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx($C, { size: 20, style: { transform: "rotate(135deg)" } }) })] }), NM = ({ onLeave: e, isMobile: t }) => { const [r, n] = J.useState(window.innerWidth <= 1024), s = t !== void 0 ? t : r; J.useEffect(() => { const g = () => n(window.innerWidth <= 1024); return window.addEventListener("resize", g), () => window.removeEventListener("resize", g) }, []); const { join: o, leave: a, toggleMic: c, toggleWebcam: l, localMicOn: p, localWebcamOn: d, participants: f } = A2({ onMeetingJoined: () => { console.log("Meeting Joined") }, onMeetingLeft: () => { e() } }), [h, P] = J.useState(!1); J.useEffect(() => { h || (o(), P(!0)) }, [h, o]); const u = [...f.keys()].find(g => { var S; return g !== ((S = f.localParticipant) == null ? void 0 : S.id) }); return i.jsxs("div", { style: { display: "flex", flexDirection: "column", height: "100%", minHeight: 0, overflow: "auto", transition: "all 0.3s ease" }, children: [i.jsxs("div", { style: { flex: 1, position: "relative", background: "#0f172a", borderRadius: "12px", overflow: "hidden", minHeight: "300px", maxHeight: "100%", transition: "all 0.3s ease" }, children: [u ? i.jsx(w_, { participantId: u }) : i.jsxs("div", { style: { width: "100%", height: "100%", display: "flex", alignItems: "center", justifyContent: "center", color: "white", flexDirection: "column" }, children: [i.jsx("div", { className: "animate-pulse", style: { width: "100px", height: "100px", background: "rgba(255,255,255,0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", marginBottom: "1rem" }, children: i.jsx(co, { size: 48 }) }), i.jsx("h3", { children: "Waiting for deponent to join..." })] }), i.jsx("div", { style: { position: "absolute", bottom: s ? "10px" : "20px", right: s ? "10px" : "20px", width: s ? "100px" : "200px", height: s ? "75px" : "150px", borderRadius: "12px", overflow: "hidden", border: "2px solid rgba(255,255,255,0.2)", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.3)", transition: "all 0.3s ease", zIndex: 10 }, children: f.localParticipant && i.jsx(w_, { participantId: f.localParticipant.id }) })] }), i.jsx(LM, { leaveMeeting: a, toggleMic: c, toggleWebcam: l, micOn: p, webcamOn: d })] }) }, BM = ({ deponentName: e, onEndSession: t }) => { const [r, n] = J.useState(null), [s, o] = J.useState(null), a = async c => { const l = await OM(); o(l); const { meetingId: p, err: d } = await MM({ token: l }); p ? n(p) : console.error("Failed to create meeting", d) }; return J.useEffect(() => { a() }, []), !s || !r ? i.jsx("div", { style: { flex: 1, display: "flex", alignItems: "center", justifyContent: "center", height: "100%" }, children: i.jsx("div", { children: "Initializing secure session..." }) }) : i.jsx(IM, { config: { meetingId: r, micEnabled: !0, webcamEnabled: !0, name: "CFO Staff" }, token: s, children: i.jsx(PM, { children: () => i.jsx(NM, { onLeave: t }) }) }) }, sb = ({ affidavit: e, isOpen: t, onClose: r, onVerify: n, onReject: s, staff: o }) => { var l, p; const [a, c] = J.useState(window.innerWidth <= 768); return J.useEffect(() => { const d = () => c(window.innerWidth <= 768); return window.addEventListener("resize", d), () => window.removeEventListener("resize", d) }, []), e ? i.jsx(ma, { children: t && i.jsx(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.8)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 2e3, padding: a ? "0.5rem" : "2rem" }, onClick: r, children: i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0, y: 20 }, animate: { scale: 1, opacity: 1, y: 0 }, exit: { scale: .9, opacity: 0, y: 20 }, onClick: d => d.stopPropagation(), style: { background: "#ffffff", borderRadius: "24px", width: "100%", maxWidth: "900px", maxHeight: "95vh", overflow: "hidden", display: "flex", flexDirection: "column", border: "1px solid #e2e8f0", boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.15)" }, children: [i.jsxs("div", { style: { padding: a ? "1rem" : "1.5rem 2rem", borderBottom: "1px solid #f1f5f9", display: "flex", justifyContent: "space-between", alignItems: "center", background: "#f8fafc" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: a ? "0.5rem" : "1rem" }, children: [i.jsx("div", { style: { width: a ? "35px" : "45px", height: a ? "35px" : "45px", background: "rgba(56, 189, 248, 0.1)", borderRadius: "12px", display: "flex", alignItems: "center", justifyContent: "center", color: "#0284c7" }, children: i.jsx(zn, { size: a ? 18 : 24 }) }), i.jsxs("div", { children: [i.jsx("h3", { style: { margin: 0, fontSize: a ? "1rem" : "1.25rem", color: "rgb\(18 37 74\)" }, children: e.type }), i.jsxs("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: ["CRMS-", e.id, "  ", new Date(e.created_at).toLocaleDateString()] })] })] }), i.jsx("button", { onClick: r, style: { background: "#f1f5f9", border: "none", padding: "0.4rem", borderRadius: "50%", color: "#778eaeff", cursor: "pointer" }, children: i.jsx(za, { size: 18 }) })] }), i.jsxs("div", { style: { padding: a ? "1rem" : "2rem", overflowY: "auto", flex: 1, display: "grid", gridTemplateColumns: a ? "1fr" : "1fr 2fr", gap: a ? "1.5rem" : "2rem" }, children: [i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [i.jsxs("section", { children: [i.jsx("h4", { style: { color: "#778eaeff", fontSize: "10px", textTransform: "uppercase", letterSpacing: "1px", marginBottom: "0.75rem" }, children: "Deponent Details" }), i.jsxs("div", { style: { background: "#f8fafc", padding: "1rem", borderRadius: "16px", border: "1px solid #e2e8f0" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem", marginBottom: "0.75rem" }, children: [i.jsxs("div", { style: { width: "32px", height: "32px", background: "#3b82f6", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "14px", fontWeight: "bold", color: "white" }, children: [((l = e.first_name) == null ? void 0 : l[0]) || "?", ((p = e.surname) == null ? void 0 : p[0]) || "?"] }), i.jsxs("div", { style: { fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: [e.first_name || "Unknown", " ", e.surname || ""] })] }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "0.5rem" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem", color: "#94a3b8", fontSize: "12px", overflow: "hidden", textOverflow: "ellipsis" }, children: [i.jsx(Dl, { size: 12 }), " ", e.email || "No Email"] }), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem", color: "#94a3b8", fontSize: "12px" }, children: [i.jsx(Sj, { size: 12 }), " NIN: ", e.nin || "N/A"] }), e.filed_by_name && i.jsxs("div", { style: { marginTop: "0.5rem", paddingTop: "0.5rem", borderTop: "1px solid #e2e8f0", display: "flex", alignItems: "center", gap: "0.5rem", color: "#10b981", fontSize: "11px", fontWeight: "bold" }, children: [i.jsx(Vn, { size: 12 }), " Filed by: ", e.filed_by_name] })] })] })] }), i.jsxs("section", { children: [i.jsx("h4", { style: { color: "#778eaeff", fontSize: "10px", textTransform: "uppercase", letterSpacing: "1px", marginBottom: "0.75rem" }, children: "Status History" }), i.jsxs("div", { style: { paddingLeft: "1rem", borderLeft: "2px dashed #e2e8f0" }, children: [i.jsxs("div", { style: { position: "relative", marginBottom: "1.25rem" }, children: [i.jsx("div", { style: { position: "absolute", left: "-1.4rem", top: "0", width: "10px", height: "10px", borderRadius: "50%", background: "#3b82f6", border: "2px solid #ffffff" } }), i.jsx("div", { style: { fontSize: "12px", color: "rgb\(18 37 74\)", fontWeight: "600" }, children: "Application Submitted" }), i.jsx("div", { style: { fontSize: "10px", color: "#778eaeff" }, children: "Received by system" })] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx("div", { style: { position: "absolute", left: "-1.4rem", top: "0", width: "10px", height: "10px", borderRadius: "50%", background: e.status === "completed" ? "#10b981" : "#f59e0b", border: "2px solid #ffffff" } }), i.jsx("div", { style: { fontSize: "12px", color: e.status === "completed" ? "#10b981" : "#f59e0b", fontWeight: "600" }, children: e.status === "completed" ? "CFO Verified" : "Awaiting CFO Approval" }), i.jsx("div", { style: { fontSize: "10px", color: "#778eaeff" }, children: "Final stage of approval" })] })] })] })] }), i.jsxs("div", { style: { background: "white", color: "rgb\(18 37 74\)", padding: a ? "1.5rem" : "3rem", borderRadius: "12px", fontFamily: "'Times New Roman', serif", height: "fit-content", boxShadow: "inset 0 2px 10px rgba(0,0,0,0.05)", border: "1px solid #f1f5f9" }, children: [i.jsx("div", { style: { borderBottom: "2px solid #1e3a8a", paddingBottom: "0.75rem", marginBottom: "1.5rem", textAlign: "center" }, children: i.jsx("h4", { style: { margin: 0, textTransform: "uppercase", color: "#1e3a8a", fontSize: "14px" }, children: "Affidavit Content Preview" }) }), i.jsx("div", { dangerouslySetInnerHTML: { __html: e.content }, style: { fontSize: "13px", lineHeight: "1.6", textAlign: "justify" } })] })] }), i.jsxs("div", { style: { padding: a ? "1rem" : "1.5rem 2rem", background: "#f8fafc", borderTop: "1px solid #f1f5f9", display: "flex", flexDirection: a ? "column" : "row", justifyContent: "flex-end", gap: "0.75rem" }, children: [e.status === "submitted" && i.jsxs("div", { style: { display: "flex", flexDirection: a ? "column" : "row", gap: "0.75rem", width: a ? "100%" : "auto" }, children: [i.jsxs("button", { onClick: () => s(e), style: { flex: 1, padding: "0.75rem 1.25rem", borderRadius: "12px", background: "#ef4444", color: "white", border: "none", fontWeight: "600", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem", fontSize: "13px" }, children: [i.jsx(Cd, { size: 16 }), " Reject"] }), i.jsxs("button", { onClick: () => n(e), style: { flex: 1, padding: "0.75rem 1.25rem", borderRadius: "12px", background: "#10b981", color: "white", border: "none", fontWeight: "600", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem", fontSize: "13px" }, children: [i.jsx(li, { size: 16 }), " Confirm Approval"] })] }), e.status === "completed" && i.jsxs("button", { onClick: () => tu({ user: e, applicationId: e.id, templateTitle: e.type, content: e.content, signerName: o == null ? void 0 : o.name, signerSignature: o == null ? void 0 : o.signature_path }), style: { width: a ? "100%" : "auto", padding: "0.75rem 1.25rem", borderRadius: "12px", background: "#3b82f6", color: "white", border: "none", fontWeight: "600", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem", fontSize: "13px" }, children: [i.jsx(Al, { size: 16 }), " Download Copy"] }), i.jsx("button", { onClick: r, style: { width: a ? "100%" : "auto", padding: "0.75rem 1.5rem", borderRadius: "12px", background: "white", border: "1px solid #e2e8f0", color: "#778eaeff", fontWeight: "600", cursor: "pointer", fontSize: "13px" }, children: "Close" })] })] }) }) }) : null }, FM = ({ staff: e, isMobile: t }) => { const [r, n] = J.useState([]), [s, o] = J.useState(!0), [a, c] = J.useState(null), [l, p] = J.useState(null), [d, f] = J.useState(!1), [h, P] = J.useState("all"), { showModal: b } = Pi(), u = us.useMemo(() => { let D = [...r]; return h !== "all" && (D = D.filter(M => { var W; return ((W = M.source) == null ? void 0 : W.toLowerCase()) === h.toLowerCase() })), D }, [r, h]), g = async () => { var D, M; try { o(!0); const W = await lt.get("/staff/affidavits/pending-verification"); n(W.data), c(null) } catch (W) { console.error("Error fetching pending affidavits:", W), c("Failed to load pending affidavits. " + (((M = (D = W.response) == null ? void 0 : D.data) == null ? void 0 : M.error) || W.message)) } finally { o(!1) } }; J.useEffect(() => { g() }, []); const S = async D => { b({ type: "info", title: "Verify Affidavit?", message: `Are you sure you want to approve ${D.first_name}'s affidavit? This will mark it as officially sworn.`, showCancel: !0, confirmText: "Verify Now", onConfirm: async () => { var M, W; try { await lt.put(`/affidavits/${D.id}/approve`, { nextStatus: "completed" }), b({ type: "success", title: "Affidavit Approved", message: "The document has been approved and the deponent has been notified." }), f(!1), g() } catch (I) { b({ type: "error", title: "Verification Failed", message: ((W = (M = I.response) == null ? void 0 : M.data) == null ? void 0 : W.error) || "Failed to update status." }) } } }) }, R = async D => { b({ type: "error", title: "Reject Application?", message: `Are you sure you want to reject ${D.first_name}'s affidavit? This action will notify the deponent and mark the record as rejected.`, showCancel: !0, confirmText: "Yes, Reject", onConfirm: async () => { var M, W; try { await lt.put(`/affidavits/${D.id}/approve`, { nextStatus: "rejected" }), b({ type: "success", title: "Application Rejected", message: "The document has been rejected and the record updated." }), f(!1), g() } catch (I) { b({ type: "error", title: "Rejection Failed", message: ((W = (M = I.response) == null ? void 0 : M.data) == null ? void 0 : W.error) || "Failed to update status." }) } } }) }, y = [{ key: "id", label: "ID", sortable: !0, render: D => `CRMS-${D}`, hiddenMobile: !0 }, { key: "first_name", label: "Deponent", sortable: !0, render: (D, M) => { var W; return i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsxs("div", { style: { width: "32px", height: "32px", background: "rgba(56, 189, 248, 0.1)", color: "#38bdf8", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: "bold", fontSize: "12px" }, children: [(D == null ? void 0 : D[0]) || "?", ((W = M.surname) == null ? void 0 : W[0]) || "?"] }), i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: t ? "12px" : "14px" }, children: [D || "Unknown", " ", M.surname || ""] }), !t && i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: M.email })] })] }) } }, { key: "type", label: "Type", sortable: !0 }, { key: "source", label: "Source", sortable: !0, render: (D, M) => i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "4px" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "6px" }, children: [i.jsx("div", { style: { width: "22px", height: "22px", borderRadius: "6px", background: D === "Jurat" ? "rgba(14, 165, 233, 0.1)" : "rgba(148, 163, 184, 0.1)", display: "flex", alignItems: "center", justifyContent: "center" }, children: D === "Jurat" ? i.jsx(Hy, { size: 12, color: "#0ea5e9" }) : i.jsx(Vn, { size: 12, color: "#778eaeff" }) }), i.jsx("span", { style: { fontSize: "11px", fontWeight: "bold", color: D === "Jurat" ? "#0ea5e9" : "#778eaeff" }, children: (D == null ? void 0 : D.toUpperCase()) || "SELF" })] }), M.filed_by_name && i.jsx("span", { style: { fontSize: "10px", color: "#94a3b8", marginLeft: "28px" }, children: M.filed_by_name })] }), hiddenMobile: !0 }, { key: "created_at", label: "Filed Date", sortable: !0, render: D => new Date(D).toLocaleDateString(), hiddenMobile: !0 }, { key: "status", label: "Process", render: () => i.jsx("span", { style: { padding: "4px 8px", borderRadius: "12px", fontSize: "10px", fontWeight: "bold", background: "#eff6ff", color: "#3b82f6" }, children: "SUBMITTED" }), hiddenMobile: !0 }, { key: "virtual_oath_taken", label: "Virtual Oath Status", sortable: !0, render: D => { let M = "#778eaeff", W = "PENDING"; const I = String(D).toLowerCase(); return (I === "requested" || D === 1) && (M = "#3b82f6", W = "REQUESTED"), (I === "completed" || I === "complete" || D === 2) && (M = "#10b981", W = "COMPLETE"), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: M } }), i.jsx("span", { style: { fontSize: "11px", fontWeight: "bold", color: M }, children: W })] }) } }], v = D => i.jsxs("div", { style: { display: "flex", gap: "0.5rem", justifyContent: "flex-end" }, children: [i.jsx("button", { onClick: () => { p(D), f(!0) }, style: { padding: "0.5rem", background: "#f8fafc", border: "1px solid #e2e8f0", borderRadius: "8px", color: "#778eaeff", cursor: "pointer" }, title: "View for Review", children: i.jsx(Mo, { size: 18 }) }), !t && i.jsx("button", { onClick: () => S(D), style: { padding: "0.5rem", background: "rgba(16, 185, 129, 0.1)", border: "none", borderRadius: "8px", color: "#10b981", cursor: "pointer" }, title: "Verify Instantly", children: i.jsx(li, { size: 18 }) })] }); return i.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", padding: t ? "1rem" : "1.5rem", color: "rgb\(18 37 74\)", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.1)" }, children: [i.jsxs("div", { style: { marginBottom: "1rem", display: "flex", gap: "1rem", alignItems: "center" }, children: [i.jsx("span", { style: { fontSize: "13px", fontWeight: "bold", color: "#778eaeff" }, children: "Filter Source:" }), i.jsx("div", { style: { display: "flex", background: "#f1f5f9", padding: "4px", borderRadius: "10px", gap: "4px" }, children: ["all", "self", "jurat"].map(D => i.jsx("button", { onClick: () => P(D), style: { padding: "6px 16px", borderRadius: "8px", border: "none", fontSize: "12px", fontWeight: "bold", cursor: "pointer", background: h === D ? "white" : "transparent", color: h === D ? "#0284c7" : "#778eaeff", boxShadow: h === D ? "0 2px 4px rgba(0,0,0,0.05)" : "none", transition: "all 0.2s" }, children: D.toUpperCase() }, D)) })] }), a && i.jsx("div", { style: { color: "#ef4444", marginBottom: "1rem", padding: "1rem", background: "rgba(239,68,68,0.1)", borderRadius: "8px" }, children: a }), i.jsx(qs, { columns: y, data: u, loading: s, actions: v, searchPlaceholder: "Search queue...", onRowClick: D => { p(D), f(!0) }, isMobile: t }), i.jsx(sb, { affidavit: l, isOpen: d, onClose: () => f(!1), onVerify: S, onReject: R, staff: e })] }) }, zM = ({ staff: e, isMobile: t }) => { const [r, n] = J.useState([]), [s, o] = J.useState(!0), [a, c] = J.useState(null), [l, p] = J.useState(null), [d, f] = J.useState(!1), [h, P] = J.useState("all"), [b, u] = J.useState("all"), g = us.useMemo(() => { let v = [...r]; return h !== "all" && (v = v.filter(D => { var M; return ((M = D.source) == null ? void 0 : M.toLowerCase()) === h.toLowerCase() })), b !== "all" && (v = v.filter(D => { var M; return ((M = D.status) == null ? void 0 : M.toLowerCase()) === b.toLowerCase() })), v }, [r, h, b]), S = async () => { var v, D; try { o(!0); const M = await lt.get("/staff/affidavits/all"); n(M.data), c(null) } catch (M) { console.error("Error fetching all affidavits:", M), c("Failed to load records. " + (((D = (v = M.response) == null ? void 0 : v.data) == null ? void 0 : D.error) || M.message)) } finally { o(!1) } }; J.useEffect(() => { S() }, []); const R = [{ key: "id", label: "ID", sortable: !0, render: v => `CRMS-${v}`, hiddenMobile: !0 }, { key: "first_name", label: "Deponent", sortable: !0, render: (v, D) => i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: t ? "12px" : "14px" }, children: [v || "Unknown", " ", D.surname || ""] }), !t && i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: D.email })] }) }, { key: "type", label: "Type", sortable: !0 }, { key: "source", label: "Source", sortable: !0, render: (v, D) => i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "4px" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "6px" }, children: [i.jsx("div", { style: { width: "22px", height: "22px", borderRadius: "6px", background: v === "Jurat" ? "rgba(14, 165, 233, 0.1)" : "rgba(148, 163, 184, 0.1)", display: "flex", alignItems: "center", justifyContent: "center" }, children: v === "Jurat" ? i.jsx(Hy, { size: 12, color: "#0ea5e9" }) : i.jsx(Vn, { size: 12, color: "#778eaeff" }) }), i.jsx("span", { style: { fontSize: "11px", fontWeight: "bold", color: v === "Jurat" ? "#0ea5e9" : "#778eaeff" }, children: (v == null ? void 0 : v.toUpperCase()) || "SELF" })] }), D.filed_by_name && i.jsx("span", { style: { fontSize: "10px", color: "#94a3b8", marginLeft: "28px" }, children: D.filed_by_name })] }), hiddenMobile: !0 }, { key: "created_at", label: "Filed Date", sortable: !0, render: v => new Date(v).toLocaleDateString(), hiddenMobile: !0 }, { key: "status", label: "Status", sortable: !0, render: v => { let D = v.toUpperCase(), M = "#f8fafc", W = "#778eaeff"; return v === "submitted" ? (M = "#eff6ff", W = "#3b82f6") : v === "completed" ? (M = "#ecfdf5", W = "#10b981") : v === "rejected" && (M = "#fef2f2", W = "#ef4444"), i.jsx("span", { style: { padding: "4px 10px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", background: M, color: W }, children: D }) } }, { key: "virtual_oath_taken", label: "Virtual Oath Status", render: v => { let D = "#778eaeff", M = "PENDING"; const W = String(v).toLowerCase(); return (W === "requested" || v === 1) && (D = "#3b82f6", M = "REQUESTED"), (W === "completed" || W === "complete" || v === 2) && (D = "#10b981", M = "COMPLETE"), i.jsx("span", { style: { fontSize: "11px", fontWeight: "bold", color: D }, children: M }) }, hiddenMobile: !0 }], y = v => i.jsxs("div", { style: { display: "flex", gap: "0.4rem", justifyContent: "flex-end" }, children: [i.jsx("button", { onClick: () => { p(v), f(!0) }, style: { padding: "0.5rem", background: "#f8fafc", border: "1px solid #e2e8f0", borderRadius: "8px", color: "#778eaeff", cursor: "pointer" }, children: i.jsx(Mo, { size: 16 }) }), v.status === "completed" && i.jsx("button", { onClick: () => tu({ user: v, applicationId: v.id, templateTitle: v.type, content: v.content, signerName: e == null ? void 0 : e.name, signerSignature: e == null ? void 0 : e.signature_path }), style: { padding: "0.5rem", background: "rgba(59, 130, 246, 0.1)", border: "none", borderRadius: "8px", color: "#3b82f6", cursor: "pointer" }, children: i.jsx(Al, { size: 16 }) })] }); return i.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", padding: t ? "1rem" : "1.5rem", color: "rgb\(18 37 74\)", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.1)" }, children: [i.jsxs("div", { style: { marginBottom: "1.5rem", display: "flex", flexWrap: "wrap", gap: "1.5rem", alignItems: "center", borderBottom: "1px solid #f1f5f9", paddingBottom: "1rem" }, children: [i.jsxs("div", { style: { display: "flex", gap: "1rem", alignItems: "center" }, children: [i.jsx("span", { style: { fontSize: "13px", fontWeight: "bold", color: "#778eaeff" }, children: "Source:" }), i.jsx("div", { style: { display: "flex", background: "#f1f5f9", padding: "4px", borderRadius: "10px", gap: "4px" }, children: ["all", "self", "jurat"].map(v => i.jsx("button", { onClick: () => P(v), style: { padding: "6px 16px", borderRadius: "8px", border: "none", fontSize: "11px", fontWeight: "bold", cursor: "pointer", background: h === v ? "white" : "transparent", color: h === v ? "#0284c7" : "#778eaeff", boxShadow: h === v ? "0 2px 4px rgba(0,0,0,0.05)" : "none", transition: "all 0.2s" }, children: v.toUpperCase() }, v)) })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem", alignItems: "center" }, children: [i.jsx("span", { style: { fontSize: "13px", fontWeight: "bold", color: "#778eaeff" }, children: "Status:" }), i.jsx("div", { style: { display: "flex", background: "#f1f5f9", padding: "4px", borderRadius: "10px", gap: "4px" }, children: ["all", "submitted", "completed", "rejected"].map(v => i.jsx("button", { onClick: () => u(v), style: { padding: "6px 16px", borderRadius: "8px", border: "none", fontSize: "11px", fontWeight: "bold", cursor: "pointer", background: b === v ? "white" : "transparent", color: b === v ? "#0284c7" : "#778eaeff", boxShadow: b === v ? "0 2px 4px rgba(0,0,0,0.05)" : "none", transition: "all 0.2s" }, children: v.toUpperCase() }, v)) })] })] }), a && i.jsx("div", { style: { color: "#ef4444", marginBottom: "1rem", padding: "1rem", background: "rgba(239,68,68,0.1)", borderRadius: "8px" }, children: a }), i.jsx(qs, { columns: R, data: g, loading: s, actions: y, searchPlaceholder: "Search all records...", onRowClick: v => { p(v), f(!0) }, isMobile: t }), i.jsx(sb, { affidavit: l, isOpen: d, onClose: () => f(!1), onVerify: () => { }, onReject: () => { }, staff: e })] }) }, $M = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState(!0), [o, a] = J.useState(null), { showModal: c } = Pi(), l = async () => { var f, h; try { s(!0); const P = await lt.get("/staff/users/deponents"); r(P.data), a(null) } catch (P) { console.error("Error fetching deponents:", P), a("Failed to load deponents. " + (((h = (f = P.response) == null ? void 0 : f.data) == null ? void 0 : h.error) || P.message)) } finally { s(!1) } }; J.useEffect(() => { l() }, []); const p = [{ key: "first_name", label: "Deponent", sortable: !0, render: (f, h) => i.jsx("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: e ? "12px" : "14px" }, children: [f || "Unknown", " ", h.surname || ""] }), !e && i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: h.email })] }) }) }, { key: "phone", label: "Contact Info", render: (f, h) => i.jsxs("div", { children: [i.jsx("div", { style: { color: "rgb\(18 37 74\)", fontSize: e ? "12px" : "13px" }, children: f }), !e && i.jsxs("div", { style: { color: "#778eaeff", fontSize: "11px" }, children: ["NIN: ", h.nin] })] }) }, { key: "status", label: "Account", sortable: !0, render: f => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.4rem" }, children: [i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: f === "active" ? "#10b981" : "#ef4444" } }), i.jsx("span", { style: { color: f === "active" ? "#10b981" : "#ef4444", fontSize: "12px", fontWeight: "bold", textTransform: "uppercase" }, children: f })] }), hiddenMobile: !0 }, { key: "affidavit_count", label: "Affidavits", sortable: !0, render: f => i.jsx("div", { style: { textAlign: "center" }, children: i.jsx("span", { style: { background: "rgba(59, 130, 246, 0.2)", color: "#60a5fa", padding: "2px 8px", borderRadius: "12px", fontSize: "12px", fontWeight: "bold" }, children: f || 0 }) }), hiddenMobile: !0 }, { key: "created_at", label: "Joined", sortable: !0, render: f => new Date(f).toLocaleDateString(), hiddenMobile: !0 }], d = f => i.jsxs("div", { style: { display: "flex", gap: "0.4rem", justifyContent: "flex-end" }, children: [i.jsx("button", { onClick: () => c({ type: "info", title: "User Profile", message: `Profile view for ${f.first_name} is under optimization.` }), style: { padding: "0.5rem", background: "#f8fafc", border: "1px solid #e2e8f0", borderRadius: "8px", color: "#778eaeff", cursor: "pointer" }, children: i.jsx(Vn, { size: 16 }) }), !e && i.jsx("button", { style: { padding: "0.5rem", background: "rgba(56, 189, 248, 0.1)", border: "none", borderRadius: "8px", color: "#38bdf8", cursor: "pointer" }, title: "Send Message", children: i.jsx(Dl, { size: 16 }) })] }); return i.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", padding: e ? "1rem" : "1.5rem", color: "rgb\(18 37 74\)", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.1)" }, children: [o && i.jsx("div", { style: { color: "#ef4444", marginBottom: "1rem", padding: "1rem", background: "rgba(239,68,68,0.1)", borderRadius: "8px" }, children: o }), i.jsx(qs, { columns: p, data: t, loading: n, actions: d, searchPlaceholder: "Search deponents...", isMobile: e })] }) }, UM = ({ staff: e, isMobile: t }) => { const [r, n] = J.useState([]), [s, o] = J.useState(!0), [a, c] = J.useState(null), [l, p] = J.useState(null), [d, f] = J.useState(!1), { showModal: h } = Pi(), [P, b] = J.useState(window.innerWidth <= 1024), u = t !== void 0 ? t : P; J.useEffect(() => { const W = () => b(window.innerWidth <= 1024); return window.addEventListener("resize", W), () => window.removeEventListener("resize", W) }, []); const g = async () => { try { o(!0); const W = await lt.get("/staff/affidavits/pending-verification?oathOnly=true"); n(W.data), c(null) } catch (W) { console.error("Error fetching live queue:", W), c("Failed to load live verification queue.") } finally { o(!1) } }; J.useEffect(() => { g(); const W = setInterval(g, 1e4); return () => clearInterval(W) }, []); const S = async W => { h({ type: "info", title: "Verify Affidavit?", message: `Are you sure you want to approve ${W.first_name}'s affidavit? This will compile the final certified PDF.`, showCancel: !0, confirmText: "Verify & Certify", onConfirm: async () => { var I, E; try { await lt.put(`/affidavits/${W.id}/approve`, { nextStatus: "completed" }); const _ = await tu({ user: { firstName: W.first_name, surname: W.surname }, applicationId: W.id, templateTitle: W.type, content: W.content, file: null, showModal: h, signerName: e.name || "HON. COMMISSIONER FOR OATHS", signerSignature: e.signature_path, returnBlob: !0 }); if (_) { const k = new FormData; k.append("pdf", _, `Certified_Affidavit_${W.id}.pdf`), await lt.post(`/affidavits/${W.id}/upload-pdf`, k, { headers: { "Content-Type": "multipart/form-data" } }) } h({ type: "success", title: "Certified & Approved", message: "The affidavit has been certified, PDF generated, and deponent notified." }), f(!1), g() } catch (_) { console.error("Verification Process Failed:", _), h({ type: "error", title: "Verification Failed", message: ((E = (I = _.response) == null ? void 0 : I.data) == null ? void 0 : E.error) || _.message || "Failed to complete process." }) } } }) }, R = async W => { h({ type: "error", title: "Reject Application?", message: `Are you sure you want to reject ${W.first_name}'s affidavit?`, showCancel: !0, confirmText: "Yes, Reject", onConfirm: async () => { var I, E; try { await lt.put(`/affidavits/${W.id}/approve`, { nextStatus: "rejected" }), h({ type: "success", title: "Application Rejected", message: "The document has been rejected." }), f(!1), g() } catch (_) { h({ type: "error", title: "Rejection Failed", message: ((E = (I = _.response) == null ? void 0 : I.data) == null ? void 0 : E.error) || "Failed to update status." }) } } }) }, [y, v] = J.useState(null), D = W => { if (!W) return !1; const I = new Date(W); return new Date().getTime() - I.getTime() < 9e4 }, M = r.filter(W => (W.virtual_oath_taken === "requested" || W.virtual_oath_taken === 1) && D(W.last_seen)); return i.jsxs("div", { style: { display: "grid", gridTemplateColumns: u ? "1fr" : "minmax(300px, 1fr) 2fr", gap: "1rem", height: u ? "calc(100vh - 120px)" : "calc(100vh - 180px)", overflow: "auto", padding: u ? "0" : "0.5rem" }, children: [(!y || !u) && i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [i.jsxs("div", { style: { background: "#f0fdf4", border: "1px solid #dcfce7", padding: "1rem", borderRadius: "12px", display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsx(ua, { size: 20, color: "#10b981" }), i.jsxs("div", { children: [i.jsx("h4", { style: { margin: 0, color: "#10b981", fontSize: "14px" }, children: "Waiting Room" }), i.jsx("p", { style: { margin: 0, fontSize: "11px", color: "#778eaeff" }, children: "Deponents available online" })] }), i.jsx("div", { style: { marginLeft: "auto", background: "#10b981", color: "white", padding: "2px 8px", borderRadius: "10px", fontSize: "11px", fontWeight: "bold" }, children: M.length })] }), i.jsx("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", flex: 1, overflowY: "auto", padding: "0.5rem", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)", minHeight: 0, transition: "all 0.3s ease", scrollBehavior: "smooth" }, children: s ? i.jsx("div", { style: { padding: "2rem", textAlign: "center", color: "#94a3b8" }, children: "Loading queue..." }) : M.length > 0 ? i.jsx("div", { style: { display: "flex", flexDirection: "column", gap: "0.5rem" }, children: M.map(W => { var I, E; return i.jsxs("div", { onClick: () => v(W), style: { padding: "1rem", borderRadius: "8px", background: (y == null ? void 0 : y.id) === W.id ? "#eff6ff" : "white", border: (y == null ? void 0 : y.id) === W.id ? "1px solid #3b82f6" : "1px solid #f1f5f9", cursor: "pointer", transition: "all 0.2s", display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsxs("div", { style: { width: "36px", height: "36px", background: "#e2e8f0", borderRadius: "8px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: "bold", color: "#778eaeff", fontSize: "13px" }, children: [(I = W.first_name) == null ? void 0 : I[0], (E = W.surname) == null ? void 0 : E[0]] }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsxs("div", { style: { fontWeight: "600", color: "rgb\(18 37 74\)", fontSize: "14px" }, children: [W.first_name, " ", W.surname] }), i.jsx("div", { style: { fontSize: "11px", color: "#10b981", fontWeight: "600" }, children: "Online  Ready" })] }), i.jsx("button", { onClick: _ => { _.stopPropagation(), p(W), f(!0) }, style: { padding: "6px", background: "#f1f5f9", borderRadius: "50%", border: "none", cursor: "pointer", display: "flex", transition: "background 0.2s", marginRight: "0.5rem" }, title: "Preview Affidavit", children: i.jsx(Mo, { size: 14, color: "#778eaeff" }) }), i.jsx("div", { className: "animate-pulse", style: { width: "8px", height: "8px", borderRadius: "50%", background: "#10b981" } })] }, W.id) }) }) : i.jsxs("div", { style: { padding: "3rem 1rem", textAlign: "center", color: "#94a3b8", display: "flex", flexDirection: "column", alignItems: "center", gap: "1rem" }, children: [i.jsx("div", { style: { width: "48px", height: "48px", background: "#f1f5f9", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsx(Vn, { size: 24, color: "#cbd5e1" }) }), i.jsx("p", { style: { fontSize: "14px" }, children: "No deponents in waiting room" })] }) })] }), (!u || y && u) && i.jsx("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", display: "flex", flexDirection: "column", overflow: "auto", maxHeight: "100%", boxShadow: "0 10px 15px -3px rgba(0, 0, 0, 0.05)", transition: "all 0.3s ease" }, children: y ? i.jsxs("div", { style: { flex: 1, display: "flex", flexDirection: "column" }, children: [i.jsxs("div", { style: { padding: "1rem 1.5rem", borderBottom: "1px solid #f1f5f9", display: "flex", justifyContent: "space-between", alignItems: "center", background: "#f8fafc" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [u && i.jsx("button", { onClick: () => v(null), style: { background: "transparent", border: "none", color: "#778eaeff", cursor: "pointer", marginRight: "0.5rem" }, children: "" }), i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: "#ef4444", boxShadow: "0 0 0 2px rgba(239, 68, 68, 0.2)" } }), i.jsxs("span", { style: { fontWeight: "600", color: "rgb\(18 37 74\)" }, children: [y.first_name, " ", y.surname] })] }), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsxs("button", { onClick: () => { p(y), f(!0) }, style: { padding: "0.4rem 0.8rem", background: "white", border: "1px solid #e2e8f0", borderRadius: "8px", color: "#778eaeff", fontSize: "12px", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.4rem" }, children: [i.jsx(zn, { size: 14 }), " Doc"] }), i.jsxs("button", { onClick: () => S(y), style: { padding: "0.4rem 1rem", background: "#10b981", border: "none", borderRadius: "16px", color: "white", fontWeight: "bold", fontSize: "12px", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(li, { size: 14 }), " APPROVE"] })] })] }), i.jsx("div", { style: { flex: 1, overflow: "auto", display: "flex", flexDirection: "column", minHeight: 0 }, children: i.jsx(BM, { deponentName: `${y.first_name} ${y.surname}`, onEndSession: () => v(null) }) })] }) : i.jsxs("div", { style: { flex: 1, display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", padding: "3rem", textAlign: "center" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", background: "#f0f9ff", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", marginBottom: "1.5rem" }, children: i.jsx(ua, { size: 32, color: "#0ea5e9" }) }), i.jsx("h3", { style: { color: "rgb\(18 37 74\)", marginBottom: "0.5rem" }, children: "Virtual Session Inactive" }), i.jsx("p", { style: { color: "#778eaeff", maxWidth: "300px", lineHeight: "1.5" }, children: "Select a deponent from the waiting room to start." })] }) }), i.jsx(sb, { affidavit: l, isOpen: d, onClose: () => f(!1), onVerify: S, onReject: R, staff: e })] }) }, VM = ({ staff: e }) => { var h; const [t, r] = J.useState(e), [n, s] = J.useState("overview"), [o, a] = J.useState(window.innerWidth > 1024), [c, l] = J.useState(window.innerWidth <= 1024); J.useEffect(() => { const P = () => { const b = window.innerWidth <= 1024; l(b), a(!b) }; return window.addEventListener("resize", P), () => window.removeEventListener("resize", P) }, []), J.useEffect(() => { const P = async () => { try { const b = await lt.get("/staff/profile"); r(b.data), localStorage.setItem("staff", JSON.stringify(b.data)) } catch (b) { console.error("Failed to refresh staff info:", b) } }; e != null && e.id && P() }, [e == null ? void 0 : e.id]); const p = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, d = [{ icon: i.jsx(Pl, { size: 20 }), label: "Dashboard", id: "overview" }, { icon: i.jsx(Tl, { size: 20 }), label: "Pending Affidavits", id: "pending" }, { icon: i.jsx(zn, { size: 20 }), label: "All Affidavits", id: "paid" }, { icon: i.jsx(ua, { size: 20 }), label: "Virtual Oath Queue", id: "verify" }, { icon: i.jsx(co, { size: 20 }), label: "All Deponents", id: "deponents" }, { icon: i.jsx(Vn, { size: 20 }), label: "My Profile", id: "profile" }], f = [{ id: 1, text: "New affidavits pending verification", time: "10m ago" }, { id: 2, text: "Virtual oath requested by deponent", time: "1h ago" }]; return t ? i.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", color: "#3d2b1f", position: "relative" }, children: [c && o && i.jsx("div", { onClick: () => a(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), i.jsxs("aside", { style: { width: o ? "280px" : "0", background: "#3d2b1f", padding: o ? "2rem" : "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: c ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: c && o ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [i.jsxs("div", { style: { padding: "1rem", marginBottom: "2rem", display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%" } }), i.jsxs("div", { style: { whiteSpace: "nowrap" }, children: [i.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS CFO" }), i.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), i.jsx("nav", { style: { flex: 1, overflowY: "auto" }, children: d.map(P => i.jsxs("div", { onClick: () => { s(P.id), c && a(!1) }, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: n === P.id ? "#5d4037" : "transparent", color: n === P.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [P.icon, i.jsx("span", { children: P.label })] }, P.id)) }), i.jsxs("button", { onClick: p, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", marginTop: "auto" }, children: [i.jsx(Ac, { size: 20 }), i.jsx("span", { children: "Logout" })] })] }), i.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", minHeight: "100vh", width: "100%" }, children: [i.jsx(Il, { user: t, title: ((h = d.find(P => P.id === n)) == null ? void 0 : h.label) || "CFO Overview", onLogout: p, onSidebarToggle: () => a(!o), onProfileClick: () => s("profile"), onSettingsClick: () => s("profile"), sidebarOpen: o, notifications: f, isMobile: c }), i.jsx("div", { style: { padding: c ? "1rem" : "2rem", overflow: "auto", flex: 1 }, children: n === "profile" ? i.jsx(Hp, { staff: t, isMobile: c, onUpdate: P => { r(P), localStorage.setItem("staff", JSON.stringify(P)) } }) : n === "verify" ? i.jsx(UM, { staff: t, isMobile: c }) : n === "pending" ? i.jsx(FM, { staff: t, isMobile: c }) : n === "paid" ? i.jsx(zM, { staff: t, isMobile: c }) : n === "deponents" ? i.jsx($M, { isMobile: c }) : n === "overview" ? i.jsx(_M, { isMobile: c }) : i.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f1f5f9", color: "rgb\(18 37 74\)", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)" }, children: [i.jsx("h2", { children: n.charAt(0).toUpperCase() + n.slice(1) }), i.jsxs("p", { style: { color: "#778eaeff", marginTop: "1rem" }, children: ['Module view for "', n, '" is currently being implemented.'] })] }) })] })] }) : i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading CFO session..." }) }, D2 = ({ role: e, isMobile: t }) => { const [r, n] = J.useState([]), [s, o] = J.useState(null), [a, c] = J.useState(!0), [l, p] = J.useState(null), [d, f] = J.useState(!1), [h, P] = J.useState("all"), b = us.useMemo(() => h === "all" ? r : r.filter(v => { var D; return ((D = v.source) == null ? void 0 : D.toLowerCase()) === h.toLowerCase() }), [r, h]); J.useEffect(() => { R() }, []); const [u, g] = J.useState(window.innerWidth <= 1024), S = t !== void 0 ? t : u; J.useEffect(() => { const v = () => g(window.innerWidth <= 1024); return window.addEventListener("resize", v), () => window.removeEventListener("resize", v) }, []); const R = async () => { c(!0); try { const v = await lt.get("/staff/affidavits/pending-review"); n(v.data), p(null) } catch (v) { console.error("Error fetching applications:", v), p("Failed to load applications. Please ensure you are logged in."), n([]) } finally { c(!1) } }, y = async v => { if (s) { f(!0); try { await lt.put(`/affidavits/${s.id}/approve`, { nextStatus: v }), o(null), R() } catch (D) { console.error("Error processing application:", D), alert("Failed to update application status.") } finally { f(!1) } } }; return S ? i.jsx("div", { style: { padding: "0.5rem" }, children: s ? i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", minHeight: "100vh" }, children: [i.jsx("button", { onClick: () => o(null), className: "btn", style: { color: "#94a3b8", padding: "0", marginBottom: "1.5rem" }, children: " Back to List" }), i.jsxs("div", { style: { marginBottom: "2rem" }, children: [i.jsx("h2", { style: { color: "white", margin: 0, fontSize: "1.5rem" }, children: "Review Application" }), i.jsxs("p", { style: { color: "#94a3b8", fontSize: "13px" }, children: ["CRMS-ID: ", s.id] })] }), i.jsxs("div", { style: { display: "grid", gap: "1.5rem" }, children: [i.jsxs("div", { style: { ...Nh, flexDirection: "column", gap: "0.5rem" }, children: [i.jsxs("div", { style: { display: "flex", gap: "0.75rem", alignItems: "center" }, children: [i.jsx(Vn, { size: 18, color: "#3b82f6" }), i.jsx("p", { style: { fontSize: "11px", color: "#94a3b8", textTransform: "uppercase", margin: 0 }, children: "Applicant" })] }), i.jsxs("p", { style: { fontSize: "16px", fontWeight: "600", color: "white", margin: 0 }, children: [s.first_name, " ", s.surname] }), i.jsx("p", { style: { fontSize: "13px", color: "#778eaeff", margin: 0 }, children: s.email || "No Email" }), s.filed_by_name && i.jsxs("div", { style: { padding: "6px 12px", background: "rgba(16, 185, 129, 0.1)", color: "#10b981", borderRadius: "8px", fontSize: "11px", fontWeight: "bold", border: "1px solid rgba(16, 185, 129, 0.2)", width: "fit-content", marginTop: "4px" }, children: ["Filed by: ", s.filed_by_name] })] }), i.jsxs("div", { style: { ...Nh, flexDirection: "column", gap: "1rem" }, children: [i.jsxs("div", { style: { display: "flex", gap: "0.75rem", alignItems: "center" }, children: [i.jsx(zn, { size: 18, color: "#10b981" }), i.jsx("p", { style: { fontSize: "11px", color: "#94a3b8", textTransform: "uppercase", margin: 0 }, children: "Affidavit Content" })] }), i.jsx("div", { style: { padding: "1.25rem", background: "#0f172a", borderRadius: "12px", border: "1px solid #334155", fontSize: "14px", color: "#cbd5e1", lineHeight: "1.6" }, children: i.jsx("div", { dangerouslySetInnerHTML: { __html: s.content } }) })] })] }), i.jsxs("div", { style: { marginTop: "2.5rem", display: "flex", flexDirection: "column", gap: "1rem" }, children: [i.jsx("button", { onClick: () => y("pending_cfo"), disabled: d, style: { width: "100%", background: "#10b981", color: "white", padding: "1rem", borderRadius: "12px", border: "none", fontWeight: "bold" }, children: d ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : "Approve to CFO" }), i.jsx("button", { onClick: () => y("rejected"), disabled: d, style: { width: "100%", background: "transparent", border: "1px solid #ef4444", color: "#ef4444", padding: "1rem", borderRadius: "12px", fontWeight: "bold" }, children: "Reject & Notify" })] })] }) : i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none" }, children: [i.jsx("h3", { style: { marginBottom: "1rem", color: "#38bdf8" }, children: e === "cr" ? "Pending Approvals" : "Pending Initial Review" }), i.jsx("div", { style: { display: "flex", gap: "0.5rem", marginBottom: "1.5rem", flexWrap: "wrap" }, children: ["all", "self", "jurat"].map(v => i.jsx("button", { onClick: D => { D.stopPropagation(), P(v) }, style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", border: "none", cursor: "pointer", background: h === v ? "#38bdf8" : "rgba(255,255,255,0.05)", color: h === v ? "white" : "#94a3b8" }, children: v.toUpperCase() }, v)) }), a ? i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: i.jsx(Jn, { className: "animate-spin", color: "#38bdf8" }) }) : b.length === 0 ? i.jsx("div", { style: { padding: "2rem", textAlign: "center", color: "#94a3b8" }, children: "No applications match filter" }) : i.jsx("div", { style: { display: "grid", gap: "1rem" }, children: b.map(v => { var D; return i.jsxs("div", { onClick: () => o(v), style: { padding: "1.2rem", background: "rgba(255,255,255,0.03)", borderRadius: "12px", border: "1px solid #334155" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start" }, children: [i.jsxs("div", { style: { fontWeight: "bold", color: "white" }, children: [v.first_name, " ", v.surname] }), i.jsx("span", { style: { fontSize: "9px", padding: "2px 6px", borderRadius: "4px", background: v.source === "Jurat" ? "#075985" : "#334155", color: "white", fontWeight: "bold" }, children: ((D = v.source) == null ? void 0 : D.toUpperCase()) || "SELF" })] }), i.jsx("div", { style: { fontSize: "13px", color: "#94a3b8" }, children: v.type }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginTop: "1rem", alignItems: "center" }, children: [i.jsxs("span", { style: { fontSize: "11px", color: "#38bdf8" }, children: ["ID: CRMS-", v.id] }), i.jsx("button", { className: "btn", style: { background: "#38bdf8", color: "white", padding: "4px 12px", fontSize: "12px" }, children: "Review" })] })] }, v.id) }) })] }) }) : i.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr 2fr", gap: "2rem" }, children: [i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", height: "fit-content" }, children: [i.jsx("h3", { style: { marginBottom: "1rem", color: "#38bdf8" }, children: e === "cr" ? "Pending Approvals" : "Pending Registry Review" }), i.jsx("div", { style: { display: "flex", gap: "0.5rem", marginBottom: "1.5rem" }, children: ["all", "self", "jurat"].map(v => i.jsx("button", { onClick: () => P(v), style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", border: "none", cursor: "pointer", background: h === v ? "#38bdf8" : "rgba(255,255,255,0.05)", color: h === v ? "white" : "#94a3b8", transition: "all 0.2s" }, children: v.toUpperCase() }, v)) }), a ? i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: i.jsx(Jn, { className: "animate-spin", color: "#38bdf8" }) }) : l ? i.jsxs("div", { style: { padding: "1rem", color: "#ef4444", textAlign: "center" }, children: [i.jsx(Qd, { style: { marginBottom: "0.5rem" } }), i.jsx("p", { style: { fontSize: "13px" }, children: l })] }) : b.length === 0 ? i.jsx("div", { style: { padding: "2rem", textAlign: "center", color: "#94a3b8" }, children: "No matches" }) : b.map(v => { var D; return i.jsxs("div", { onClick: () => o(v), style: { padding: "1.2rem", background: (s == null ? void 0 : s.id) === v.id ? "#334155" : "rgba(255,255,255,0.03)", borderRadius: "12px", cursor: "pointer", marginBottom: "1rem", border: (s == null ? void 0 : s.id) === v.id ? "2px solid #38bdf8" : "1px solid #334155", transition: "all 0.2s" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "flex-start" }, children: [i.jsxs("div", { style: { fontWeight: "bold", color: "white" }, children: [v.first_name, " ", v.surname] }), i.jsx("span", { style: { fontSize: "9px", padding: "2px 6px", borderRadius: "4px", background: v.source === "Jurat" ? "#0ea5e920" : "#47556940", color: v.source === "Jurat" ? "#38bdf8" : "#94a3b8", border: `1px solid ${v.source === "Jurat" ? "#38bdf840" : "#47556980"}`, fontWeight: "bold" }, children: ((D = v.source) == null ? void 0 : D.toUpperCase()) || "SELF" })] }), i.jsx("div", { style: { fontSize: "13px", color: "#94a3b8", marginTop: "4px" }, children: v.type }), i.jsxs("div", { style: { fontSize: "11px", color: "#38bdf8", marginTop: "0.8rem", display: "flex", justifyContent: "space-between" }, children: [i.jsxs("span", { children: ["ID: CRMS-", v.id] }), i.jsx("span", { children: new Date(v.created_at).toLocaleDateString() })] })] }, v.id) })] }), i.jsx("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", minHeight: "600px" }, children: s ? i.jsxs(Wt.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2.5rem" }, children: [i.jsxs("div", { children: [i.jsx("h2", { style: { color: "white", margin: 0 }, children: "Review Application" }), i.jsxs("p", { style: { color: "#94a3b8", fontSize: "14px" }, children: ["CRMS-ID: ", s.id] })] }), i.jsx("span", { style: { padding: "6px 16px", background: "#38bdf820", color: "#38bdf8", borderRadius: "30px", fontSize: "12px", fontWeight: "bold", border: "1px solid #38bdf840" }, children: "PENDING REVIEW" })] }), i.jsxs("div", { style: { display: "grid", gap: "1.5rem" }, children: [i.jsxs("div", { style: Nh, children: [i.jsx("div", { style: { background: "#3b82f620", padding: "10px", borderRadius: "10px" }, children: i.jsx(Vn, { size: 20, color: "#3b82f6" }) }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("p", { style: { fontSize: "12px", color: "#94a3b8", textTransform: "uppercase", letterSpacing: "1px" }, children: "Applicant Profile" }), i.jsxs("p", { style: { fontSize: "18px", fontWeight: "600", color: "white" }, children: [s.first_name, " ", s.surname] }), i.jsx("p", { style: { fontSize: "14px", color: "#778eaeff" }, children: s.email || "No Email" }), s.filed_by_name && i.jsxs("div", { style: { padding: "4px 10px", background: "rgba(56, 189, 248, 0.1)", color: "#38bdf8", borderRadius: "6px", fontSize: "11px", fontWeight: "700", marginTop: "10px", width: "fit-content", border: "1px solid rgba(56, 189, 248, 0.2)" }, children: ["FILED BY STAFF: ", s.filed_by_name.toUpperCase()] })] })] }), i.jsxs("div", { style: Nh, children: [i.jsx("div", { style: { background: "#10b98120", padding: "10px", borderRadius: "10px" }, children: i.jsx(zn, { size: 20, color: "#10b981" }) }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("p", { style: { fontSize: "12px", color: "#94a3b8", textTransform: "uppercase", letterSpacing: "1px" }, children: "Affidavit Content" }), i.jsx("div", { style: { marginTop: "1rem", padding: "1.5rem", background: "#0f172a", borderRadius: "12px", border: "1px solid #334155", maxHeight: "300px", overflowY: "auto", fontSize: "14px", color: "#cbd5e1", lineHeight: "1.6" }, children: i.jsx("div", { dangerouslySetInnerHTML: { __html: s.content } }) }), s.pdf_path && i.jsxs("div", { style: { marginTop: "1.5rem", padding: "1rem", background: "#33415550", borderRadius: "12px", display: "flex", alignItems: "center", justifyContent: "space-between" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx(zn, { color: "#38bdf8" }), i.jsx("span", { style: { fontSize: "14px", color: "white" }, children: "Attached PDF Document" })] }), i.jsxs("a", { href: `http://localhost:5000${s.pdf_path}`, target: "_blank", rel: "noreferrer", className: "btn", style: { background: "#38bdf8", color: "white", display: "flex", alignItems: "center", gap: "0.5rem", padding: "6px 15px", fontSize: "12px" }, children: [i.jsx(Mo, { size: 14 }), " View File"] })] })] })] })] }), i.jsxs("div", { style: { marginTop: "4rem", display: "flex", gap: "1.5rem" }, children: [i.jsx("button", { onClick: () => y("pending_cfo"), disabled: d, className: "btn", style: { flex: 1, background: "#10b981", color: "white", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.8rem", padding: "1rem", fontSize: "16px" }, children: d ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsxs(i.Fragment, { children: [i.jsx(ZI, { size: 20 }), " Approve to CFO"] }) }), i.jsxs("button", { onClick: () => y("rejected"), disabled: d, className: "btn", style: { flex: 1, background: "transparent", border: "1px solid #ef4444", color: "#ef4444", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.8rem", padding: "1rem", fontSize: "16px" }, children: [i.jsx(za, { size: 20 }), " Reject & Notify"] })] })] }) : i.jsxs("div", { style: { height: "100%", display: "flex", flexDirection: "column", alignItems: "center", justifyContent: "center", color: "#475569" }, children: [i.jsx("div", { style: { background: "#33415530", padding: "2rem", borderRadius: "50%", marginBottom: "1.5rem" }, children: i.jsx(Mo, { size: 48 }) }), i.jsx("h3", { children: "Selection Pending" }), i.jsx("p", { children: "Select an application from the sidebar to start reviewing" })] }) })] }) }, Nh = { display: "flex", gap: "1rem", alignItems: "flex-start", padding: "1rem", background: "#0f172a", borderRadius: "12px" }, I2 = ({ isMobile: e, role: t }) => { const [r, n] = J.useState(null), [s, o] = J.useState(!0), a = async () => { try { o(!0); const l = await lt.get("/staff/registry/stats"); n(l.data) } catch (l) { console.error("Failed to fetch registry stats:", l) } finally { o(!1) } }; if (J.useEffect(() => { a() }, []), s) return i.jsx("div", { style: { color: "rgb\(18 37 74\)", textAlign: "center", padding: "3rem" }, children: "Fetching Registry Data..." }); const c = [{ title: "Pending Affidavits", value: (r == null ? void 0 : r.pending_affidavits) || 0, icon: i.jsx(zn, { size: 22 }), color: "#f59e0b", description: "Awaiting signature/seal" }, { title: "Pending Probate", value: (r == null ? void 0 : r.pending_probate) || 0, icon: i.jsx(qy, { size: 22 }), color: "#3b82f6", description: "In review queue" }, { title: "Oath Requests", value: (r == null ? void 0 : r.oath_requests) || 0, icon: i.jsx(ua, { size: 22 }), color: "#8b5cf6", description: "Live sessions waiting" }, { title: "Total Approved", value: ((r == null ? void 0 : r.approved_affidavits) || 0) + ((r == null ? void 0 : r.approved_probate) || 0), icon: i.jsx(li, { size: 22 }), color: "#10b981", description: "Processed successfully" }]; return i.jsxs("div", { style: { animation: "fadeIn 0.5s ease-out" }, children: [i.jsxs("div", { style: { marginBottom: "2.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsxs("div", { children: [i.jsxs("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0", fontWeight: "bold", color: "rgb\(18 37 74\)" }, children: [t === "cr" ? "Chief Registrar" : "Probate Registrar", " Dashboard"] }), i.jsx("p", { style: { color: "#778eaeff" }, children: "Workflow analytics and application throughput monitoring." })] }), i.jsxs("button", { onClick: a, style: { padding: "10px", borderRadius: "12px", background: "white", border: "1px solid #e2e8f0", color: "#3b82f6", cursor: "pointer", display: "flex", alignItems: "center", gap: "8px", fontSize: "14px", fontWeight: "600" }, children: [i.jsx(mm, { size: 16 }), " Refresh"] })] }), i.jsx("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "repeat(4, 1fr)", gap: "1.5rem", marginBottom: "3.5rem" }, children: c.map((l, p) => i.jsxs(Wt.div, { whileHover: { y: -5 }, style: { background: "white", padding: "1.75rem", borderRadius: "24px", border: "1px solid #f1f5f9", boxShadow: "0 4px 6px -1px rgba(0,0,0,0.05)", display: "flex", flexDirection: "column", gap: "1.25rem" }, children: [i.jsx("div", { style: { padding: "12px", borderRadius: "16px", background: `${l.color}15`, color: l.color, width: "fit-content" }, children: l.icon }), i.jsxs("div", { children: [i.jsx("h3", { style: { margin: 0, fontSize: "1.8rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: l.value }), i.jsx("p", { style: { margin: "4px 0 0", color: "rgb\(18 37 74\)", fontSize: "14px", fontWeight: "bold" }, children: l.title }), i.jsx("p", { style: { margin: "8px 0 0", color: "#94a3b8", fontSize: "12px" }, children: l.description })] })] }, p)) }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "repeat(2, 1fr)", gap: "2rem" }, children: [i.jsxs("div", { style: { background: "#f8fafc", padding: "2.5rem", borderRadius: "32px", border: "1px solid #e2e8f0" }, children: [i.jsxs("h3", { style: { margin: "0 0 2rem 0", display: "flex", alignItems: "center", gap: "1rem", color: "rgb\(18 37 74\)", fontSize: "1.25rem", fontWeight: "bold" }, children: [i.jsx(Tl, { size: 22, color: "#3b82f6" }), " Efficiency Metrics"] }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "2.5rem" }, children: [i.jsxs("div", { style: { display: "flex", gap: "2rem" }, children: [i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("p", { style: { margin: "0 0 8px", fontSize: "12px", color: "#778eaeff", fontWeight: "bold", textTransform: "uppercase" }, children: "Avg Review Time" }), i.jsx("p", { style: { margin: 0, fontSize: "1.8rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: "14m" }), i.jsx("span", { style: { fontSize: "11px", color: "#10b981", fontWeight: "bold" }, children: "-2m from avg" })] }), i.jsxs("div", { style: { flex: 1 }, children: [i.jsx("p", { style: { margin: "0 0 8px", fontSize: "12px", color: "#778eaeff", fontWeight: "bold", textTransform: "uppercase" }, children: "Daily Capacity" }), i.jsx("p", { style: { margin: 0, fontSize: "1.8rem", fontWeight: "800", color: "rgb\(18 37 74\)" }, children: "85" }), i.jsx("span", { style: { fontSize: "11px", color: "#3b82f6", fontWeight: "bold" }, children: "Optimal level" })] })] }), i.jsxs("div", { children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "12px" }, children: [i.jsx("span", { style: { color: "#778eaeff", fontWeight: "600", fontSize: "13px" }, children: "Queue Completion Status" }), i.jsx("span", { style: { fontWeight: "bold", color: "rgb\(18 37 74\)", fontSize: "13px" }, children: "72% Daily Target" })] }), i.jsx("div", { style: { height: "10px", background: "#e2e8f0", borderRadius: "5px", overflow: "hidden" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: "72%" }, style: { height: "100%", background: "linear-gradient(90deg, #10b981, #34d399)", borderRadius: "5px" } }) })] })] })] }), i.jsx("div", { style: { background: "rgb\(18 37 74\)", padding: "2.5rem", borderRadius: "32px", color: "white", display: "flex", flexDirection: "column", justifyContent: "center" }, children: i.jsxs("div", { style: { display: "flex", alignItems: "flex-start", gap: "1.5rem" }, children: [i.jsx("div", { style: { background: "rgba(245, 158, 11, 0.2)", padding: "16px", borderRadius: "20px" }, children: i.jsx(Qd, { size: 32, color: "#f59e0b" }) }), i.jsxs("div", { children: [i.jsx("h3", { style: { fontSize: "1.4rem", margin: "0 0 1rem", fontWeight: "bold" }, children: "Verification Alert" }), i.jsxs("p", { style: { color: "#94a3b8", lineHeight: "1.6", fontSize: "0.95rem", marginBottom: "1.5rem" }, children: ["There are currently ", i.jsxs("strong", { children: [(r == null ? void 0 : r.oath_requests) || 0, " deponents"] }), " in the virtual oath waiting room. Priority attention is recommended to maintain SLA standards."] }), i.jsxs("div", { style: { display: "flex", gap: "12px" }, children: [i.jsx("button", { style: { padding: "10px 20px", background: "#f59e0b", color: "white", border: "none", borderRadius: "12px", fontWeight: "bold", fontSize: "13px", cursor: "pointer" }, children: "View Queue" }), i.jsx("button", { style: { padding: "10px 20px", background: "rgba(255,255,255,0.1)", color: "white", border: "none", borderRadius: "12px", fontWeight: "bold", fontSize: "13px", cursor: "pointer" }, children: "Dismiss" })] })] })] }) })] })] }) }, WM = ({ staff: e }) => { var h; const [t, r] = J.useState(e), [n, s] = J.useState("dashboard"), [o, a] = J.useState(window.innerWidth > 1024), [c, l] = J.useState(window.innerWidth <= 1024); J.useEffect(() => { const P = () => { const b = window.innerWidth <= 1024; l(b), a(!b) }; return window.addEventListener("resize", P), () => window.removeEventListener("resize", P) }, []), J.useEffect(() => { const P = async () => { try { const b = await lt.get("/staff/profile"); r(b.data), localStorage.setItem("staff", JSON.stringify(b.data)) } catch (b) { console.error("Failed to refresh staff info:", b) } }; e != null && e.id && P() }, [e == null ? void 0 : e.id]); const p = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, d = [{ icon: i.jsx(Pl, { size: 20 }), label: "Dashboard", id: "dashboard" }, { icon: i.jsx(zn, { size: 20 }), label: "Probate Approvals", id: "probate" }, { icon: i.jsx($f, { size: 20 }), label: "Notifications", id: "notifications" }, { icon: i.jsx(Vn, { size: 20 }), label: "My Profile", id: "profile" }], f = [{ id: 1, text: "New probate application pending review", time: "10m ago" }, { id: 2, text: "Signature verification required", time: "1h ago" }]; return t ? i.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", color: "#3d2b1f", position: "relative" }, children: [c && o && i.jsx("div", { onClick: () => a(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), i.jsxs("aside", { style: { width: o ? "280px" : "0", background: "#3d2b1f", padding: o ? "2rem" : "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: c ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: c && o ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [i.jsxs("div", { style: { padding: "1rem", marginBottom: "2rem", display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%" } }), i.jsxs("div", { style: { whiteSpace: "nowrap" }, children: [i.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS CR" }), i.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), i.jsx("nav", { style: { flex: 1, overflowY: "auto" }, children: d.map(P => i.jsxs("div", { onClick: () => { s(P.id), c && a(!1) }, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: n === P.id ? "#5d4037" : "transparent", color: n === P.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [P.icon, i.jsx("span", { children: P.label })] }, P.id)) }), i.jsxs("button", { onClick: p, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", marginTop: "auto" }, children: [i.jsx(Ac, { size: 20 }), i.jsx("span", { children: "Logout" })] })] }), i.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", minHeight: "100vh", width: "100%" }, children: [i.jsx(Il, { user: t, title: ((h = d.find(P => P.id === n)) == null ? void 0 : h.label) || "CR Overview", onLogout: p, onSidebarToggle: () => a(!o), sidebarOpen: o, notifications: f, isMobile: c }), i.jsx("div", { style: { padding: c ? "1rem" : "2.5rem", flex: 1, overflowY: "auto" }, children: n === "dashboard" ? i.jsx(I2, { isMobile: c, role: "cr" }) : n === "probate" ? i.jsx(D2, { role: "cr", isMobile: c }) : n === "profile" ? i.jsx(Hp, { staff: t, isMobile: c, onUpdate: P => { r(P), localStorage.setItem("staff", JSON.stringify(P)) } }) : i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white" }, children: [i.jsx("h2", { children: n.charAt(0).toUpperCase() + n.slice(1) }), i.jsxs("p", { style: { color: "#94a3b8", marginTop: "1rem" }, children: ['Module view for "', n, '" is currently being implemented.'] })] }) })] })] }) : i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading CR session..." }) }, HM = ({ staff: e }) => { var h; const [t, r] = J.useState(e), [n, s] = J.useState("dashboard"), [o, a] = J.useState(window.innerWidth > 1024), [c, l] = J.useState(window.innerWidth <= 1024); J.useEffect(() => { const P = () => { const b = window.innerWidth <= 1024; l(b), a(!b) }; return window.addEventListener("resize", P), () => window.removeEventListener("resize", P) }, []), J.useEffect(() => { const P = async () => { try { const b = await lt.get("/staff/profile"); r(b.data), localStorage.setItem("staff", JSON.stringify(b.data)) } catch (b) { console.error("Failed to refresh staff info:", b) } }; e != null && e.id && P() }, [e == null ? void 0 : e.id]); const p = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, d = [{ icon: i.jsx(Pl, { size: 20 }), label: "Dashboard", id: "dashboard" }, { icon: i.jsx(zn, { size: 20 }), label: "Review Applications", id: "review" }, { icon: i.jsx(Vn, { size: 20 }), label: "My Profile", id: "profile" }], f = [{ id: 1, text: "New applications pending initial review", time: "10m ago" }]; return t ? i.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", color: "#3d2b1f", position: "relative" }, children: [c && o && i.jsx("div", { onClick: () => a(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), i.jsxs("aside", { style: { width: o ? "280px" : "0", background: "#3d2b1f", padding: o ? "2rem" : "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: c ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: c && o ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [i.jsxs("div", { style: { padding: "1rem", marginBottom: "2rem", display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%" } }), i.jsxs("div", { style: { whiteSpace: "nowrap" }, children: [i.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS Registrar" }), i.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), i.jsx("nav", { style: { flex: 1, overflowY: "auto" }, children: d.map(P => i.jsxs("div", { onClick: () => { s(P.id), c && a(!1) }, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: n === P.id ? "#5d4037" : "transparent", color: n === P.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [P.icon, i.jsx("span", { children: P.label })] }, P.id)) }), i.jsxs("button", { onClick: p, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", marginTop: "auto" }, children: [i.jsx(Ac, { size: 20 }), i.jsx("span", { children: "Logout" })] })] }), i.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", minHeight: "100vh", width: "100%" }, children: [i.jsx(Il, { user: t, title: ((h = d.find(P => P.id === n)) == null ? void 0 : h.label) || "Registrar Overview", onLogout: p, onSidebarToggle: () => a(!o), sidebarOpen: o, notifications: f, isMobile: c }), i.jsx("div", { style: { padding: c ? "1rem" : "2.5rem", flex: 1, overflowY: "auto" }, children: n === "dashboard" ? i.jsx(I2, { isMobile: c, role: "pr" }) : n === "review" ? i.jsx(D2, { role: "registrar", isMobile: c }) : n === "profile" ? i.jsx(Hp, { staff: t, isMobile: c, onUpdate: P => { r(P), localStorage.setItem("staff", JSON.stringify(P)) } }) : i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white" }, children: [i.jsx("h2", { children: n.charAt(0).toUpperCase() + n.slice(1) }), i.jsxs("p", { style: { color: "#94a3b8", marginTop: "1rem" }, children: ['Module view for "', n, '" is currently being implemented.'] })] }) })] })] }) : i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading Registrar session..." }) }, qM = ({ isMobile: e, onFileFor: t }) => { const [r, n] = J.useState([]), [s, o] = J.useState(!0), [a, c] = J.useState(""), [l, p] = J.useState(!1), [d, f] = J.useState(null), [h, P] = J.useState(!1), { showModal: b } = Pi(); J.useEffect(() => { u() }, []); const u = async () => { var D, M; try { o(!0); const W = await lt.get("/applicants"); n(W.data) } catch (W) { console.error("Error fetching applicants:", W), b({ type: "error", title: "Error Loading Applicants", message: ((M = (D = W.response) == null ? void 0 : D.data) == null ? void 0 : M.error) || "Failed to load applicants. Please refresh the page." }) } finally { o(!1) } }, g = () => { f({ first_name: "", middle_name: "", surname: "", gender: "male", age: "", email: "", phone: "", address: "", nin: "", status: "active" }), p(!0) }, S = D => { f({ ...D, picture: null, signature: null }), p(!0) }, R = async D => { var M, W; D.preventDefault(), P(!0); try { const I = new FormData, E = { first_name: d.first_name, middle_name: d.middle_name, surname: d.surname, gender: d.gender, age: d.age, email: d.email, phone: d.phone, address: d.address, nin: d.nin, status: d.status || "active" }; Object.entries(E).forEach(([_, k]) => { k != null && (!d.id && _ === "first_name" ? I.append("firstName", k) : !d.id && _ === "middle_name" ? I.append("middleName", k) : _ === "age" && k === "" ? I.append(_, 0) : (_ !== "first_name" && _ !== "middle_name" || d.id) && I.append(_, k)) }), d.id && (d.picture_path && I.append("picture_path", d.picture_path), d.signature_path && I.append("signature_path", d.signature_path)), d.picture instanceof File && I.append("picture", d.picture), d.signature instanceof File && I.append("signature", d.signature), console.log("Submitting applicant:", d.id ? "UPDATE" : "CREATE"), console.log("FormData entries:"); for (let [_, k] of I.entries()) console.log(`  ${_}:`, k instanceof File ? `File(${k.name})` : k); d.id ? (await lt.put(`/applicants/${d.id}`, I, { headers: { "Content-Type": "multipart/form-data" } }), b({ type: "success", title: "Applicant Updated", message: `${d.first_name} ${d.surname} has been updated successfully.` })) : (await lt.post("/applicants", I, { headers: { "Content-Type": "multipart/form-data" } }), b({ type: "success", title: "Applicant Created", message: `${d.first_name} ${d.surname} has been added successfully.` })), p(!1), u() } catch (I) { b({ type: "error", title: d.id ? "Update Failed" : "Creation Failed", message: ((W = (M = I.response) == null ? void 0 : M.data) == null ? void 0 : W.error) || "Failed to save applicant." }) } finally { P(!1) } }, y = D => { b({ type: "warning", title: "Delete Applicant", message: `Are you sure you want to permanently delete ${D.first_name} ${D.surname}? This action cannot be undone.`, confirmText: "Delete Permanently", cancelText: "Cancel", showCancel: !0, onConfirm: async () => { try { await lt.delete(`/applicants/${D.id}`), b({ type: "success", title: "Applicant Deleted", message: "The applicant has been removed." }), u() } catch { b({ type: "error", title: "Deletion Failed", message: "Failed to delete applicant." }) } } }) }, v = r.filter(D => { const M = `${D.first_name || ""} ${D.surname || ""}`.toLowerCase(), W = (D.email || "").toLowerCase(), I = a.toLowerCase(); return M.includes(I) || W.includes(I) || D.phone && D.phone.includes(a) }); return i.jsxs("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", color: "white", overflow: "auto" }, children: [i.jsxs("div", { style: { padding: e ? "1.5rem" : "2rem", borderBottom: "1px solid #334155", background: "rgba(30, 41, 59, 0.5)" }, children: [i.jsxs("div", { style: { display: "flex", flexDirection: e ? "column" : "row", justifyContent: "space-between", alignItems: e ? "flex-start" : "center", marginBottom: "2rem", gap: "1rem" }, children: [i.jsxs("div", { children: [i.jsxs("h2", { style: { margin: "0 0 0.5rem 0", display: "flex", alignItems: "center", gap: "0.75rem", fontSize: e ? "1.4rem" : "1.8rem" }, children: [i.jsx(co, { size: e ? 24 : 28, color: "#3b82f6" }), " Applicant Registry"] }), i.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "14px" }, children: "Manage applicants and file applications on their behalf" })] }), i.jsxs("button", { onClick: g, className: "btn btn-primary", style: { display: "flex", alignItems: "center", gap: "0.5rem", padding: "12px 24px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", border: "none", borderRadius: "10px", color: "white", fontWeight: "bold", cursor: "pointer" }, children: [i.jsx(WC, { size: 20 }), " Add Applicant"] })] }), i.jsxs("div", { style: { position: "relative" }, children: [i.jsx(vm, { style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" }, size: 18 }), i.jsx("input", { type: "text", placeholder: "Search by name, email or phone...", value: a, onChange: D => c(D.target.value), style: { width: "100%", padding: "12px 12px 12px 40px", background: "#0f172a", border: "1px solid #334155", borderRadius: "10px", color: "white", outline: "none", transition: "all 0.3s" } })] })] }), i.jsx("div", { style: { padding: "1.5rem" }, children: i.jsx(qs, { columns: [{ key: "first_name", label: "Applicant", sortable: !0, render: (D, M) => { var W; return i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.75rem" }, children: [M.picture_path ? i.jsx("img", { src: `${lt.defaults.baseURL.replace(/\/api$/, "")}${M.picture_path}`, alt: D, style: { width: "40px", height: "40px", borderRadius: "10px", objectFit: "cover", border: "1px solid #334155" }, onError: I => { I.target.src = "https://via.placeholder.com/40?text=User" } }) : i.jsxs("div", { style: { width: "40px", height: "40px", background: "linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)", borderRadius: "10px", display: "flex", alignItems: "center", justifyContent: "center", fontWeight: "bold" }, children: [D == null ? void 0 : D[0], (W = M.surname) == null ? void 0 : W[0]] }), i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600", color: "#f1f5f9" }, children: [D, " ", M.surname] }), i.jsx("div", { style: { fontSize: "12px", color: "#94a3b8" }, children: M.email || "No Email" })] })] }) } }, { key: "phone", label: "Contact", render: (D, M) => i.jsxs("div", { style: { fontSize: "13px" }, children: [i.jsx("div", { children: D || "N/A" }), i.jsxs("div", { style: { color: "#778eaeff", fontSize: "11px" }, children: ["NIN: ", M.nin || "Not Provided"] })] }) }, { key: "status", label: "Status", sortable: !0, render: D => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx("div", { style: { width: "8px", height: "8px", borderRadius: "50%", background: D === "active" ? "#10b981" : "#ef4444" } }), i.jsx("span", { style: { color: D === "active" ? "#10b981" : "#ef4444", fontSize: "13px", fontWeight: "bold", textTransform: "uppercase" }, children: D })] }) }, { key: "created_at", label: "Added", sortable: !0, render: D => new Date(D).toLocaleDateString() }], data: v, loading: s, searchPlaceholder: "Search applicants...", actions: D => i.jsxs("div", { style: { display: "flex", gap: "0.5rem", justifyContent: "flex-end" }, children: [i.jsx("button", { onClick: () => t && t(D), style: { padding: "8px", background: "rgba(16, 185, 129, 0.1)", color: "#10b981", border: "none", borderRadius: "8px", cursor: "pointer" }, title: "File Application", children: i.jsx(zn, { size: 18 }) }), i.jsx("button", { onClick: () => S(D), style: { padding: "8px", background: "rgba(59, 130, 246, 0.1)", color: "#3b82f6", border: "none", borderRadius: "8px", cursor: "pointer" }, title: "Edit", children: i.jsx(Jd, { size: 18 }) }), i.jsx("button", { onClick: () => y(D), style: { padding: "8px", background: "rgba(239, 68, 68, 0.1)", color: "#ef4444", border: "none", borderRadius: "8px", cursor: "pointer" }, title: "Delete", children: i.jsx(Xd, { size: 18 }) })] }) }) }), i.jsx(ma, { children: l && i.jsx(Wt.div, { initial: { opacity: 0 }, animate: { opacity: 1 }, exit: { opacity: 0 }, style: { position: "fixed", top: 0, left: 0, right: 0, bottom: 0, background: "rgba(0, 0, 0, 0.8)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 2e3, padding: "1rem" }, onClick: () => !h && p(!1), children: i.jsxs(Wt.div, { initial: { scale: .9, opacity: 0 }, animate: { scale: 1, opacity: 1 }, exit: { scale: .9, opacity: 0 }, onClick: D => D.stopPropagation(), style: { background: "rgb\(18 37 74\)", borderRadius: "20px", padding: e ? "1.5rem" : "2.5rem", maxWidth: "700px", width: "100%", border: "1px solid #334155", boxShadow: "0 25px 50px -12px rgba(0, 0, 0, 0.5)", maxHeight: "95vh", overflowY: "auto" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [i.jsx("h3", { style: { margin: 0, fontSize: "1.5rem" }, children: d != null && d.id ? "Edit Applicant" : "Add New Applicant" }), i.jsx("button", { onClick: () => p(!1), style: { background: "transparent", border: "none", color: "#778eaeff", cursor: "pointer" }, children: i.jsx(za, { size: 24 }) })] }), i.jsxs("form", { onSubmit: R, children: [i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "1fr 1fr", gap: e ? "1rem" : "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "First Name *" }), i.jsx("input", { type: "text", required: !0, value: (d == null ? void 0 : d.first_name) || "", onChange: D => f({ ...d, first_name: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Middle Name" }), i.jsx("input", { type: "text", value: (d == null ? void 0 : d.middle_name) || "", onChange: D => f({ ...d, middle_name: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Surname *" }), i.jsx("input", { type: "text", required: !0, value: (d == null ? void 0 : d.surname) || "", onChange: D => f({ ...d, surname: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Gender" }), i.jsxs("select", { value: (d == null ? void 0 : d.gender) || "male", onChange: D => f({ ...d, gender: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" }, children: [i.jsx("option", { value: "male", children: "Male" }), i.jsx("option", { value: "female", children: "Female" }), i.jsx("option", { value: "other", children: "Other" })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Age" }), i.jsx("input", { type: "number", value: (d == null ? void 0 : d.age) || "", onChange: D => f({ ...d, age: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Email" }), i.jsx("input", { type: "email", value: (d == null ? void 0 : d.email) || "", onChange: D => f({ ...d, email: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Phone" }), i.jsx("input", { type: "text", value: (d == null ? void 0 : d.phone) || "", onChange: D => f({ ...d, phone: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "NIN" }), i.jsx("input", { type: "text", value: (d == null ? void 0 : d.nin) || "", onChange: D => f({ ...d, nin: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { style: { gridColumn: e ? "span 1" : "span 2" }, children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Address" }), i.jsx("textarea", { value: (d == null ? void 0 : d.address) || "", onChange: D => f({ ...d, address: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white", minHeight: "80px", resize: "vertical" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Applicant Picture" }), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [(d == null ? void 0 : d.picture_path) && !d.picture && i.jsx("img", { src: `${lt.defaults.baseURL.replace(/\/api$/, "")}${d.picture_path}`, style: { width: "40px", height: "40px", borderRadius: "8px", objectFit: "cover" }, alt: "Current" }), i.jsx("input", { type: "file", accept: "image/*", onChange: D => f({ ...d, picture: D.target.files[0] }), style: { fontSize: "12px", color: "#94a3b8" } })] })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Applicant Signature" }), i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [(d == null ? void 0 : d.signature_path) && !d.signature && i.jsx("div", { style: { padding: "4px", background: "white", borderRadius: "4px" }, children: i.jsx("img", { src: `${lt.defaults.baseURL.replace(/\/api$/, "")}${d.signature_path}`, style: { height: "30px", maxWidth: "100px", objectFit: "contain" }, alt: "Current Signature" }) }), i.jsx("input", { type: "file", accept: "image/*", onChange: D => f({ ...d, signature: D.target.files[0] }), style: { fontSize: "12px", color: "#94a3b8" } })] })] }), (d == null ? void 0 : d.id) && i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Status" }), i.jsxs("select", { value: (d == null ? void 0 : d.status) || "active", onChange: D => f({ ...d, status: D.target.value }), style: { width: "100%", padding: "12px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" }, children: [i.jsx("option", { value: "active", children: "Active" }), i.jsx("option", { value: "inactive", children: "Inactive" })] })] })] }), i.jsxs("div", { style: { display: "flex", gap: "1rem", marginTop: "2.5rem" }, children: [i.jsx("button", { type: "button", onClick: () => p(!1), style: { flex: 1, padding: "14px", borderRadius: "10px", background: "transparent", border: "1px solid #334155", color: "#cbd5e1", cursor: "pointer", fontWeight: "bold" }, children: "Cancel" }), i.jsxs("button", { type: "submit", disabled: h, className: "btn btn-primary", style: { flex: 1, padding: "14px", borderRadius: "10px", background: "linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)", border: "none", color: "white", cursor: "pointer", fontWeight: "bold", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [h ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), d != null && d.id ? "Update" : "Create", " Applicant"] })] })] })] }) }) })] }) }, S_ = ({ isMobile: e }) => { const [t, r] = J.useState(null), [n, s] = J.useState(!0); if (J.useEffect(() => { (async () => { try { const c = await lt.get("/staff/jurat/stats"); r(c.data) } catch (c) { console.error("Failed to fetch stats:", c) } finally { s(!1) } })() }, []), n) return i.jsx("div", { style: { color: "white", textAlign: "center", padding: "2rem" }, children: "Loading Analytics..." }); const o = [{ title: "Total Applicants", value: (t == null ? void 0 : t.total_applicants) || 0, icon: i.jsx(co, { color: "#3b82f6" }), color: "#3b82f6" }, { title: "Total Fees Paid", value: `${((t == null ? void 0 : t.total_fees) || 0).toLocaleString()}`, icon: i.jsx(f5, { color: "#10b981" }), color: "#10b981" }, { title: "Affidavits filed", value: (t == null ? void 0 : t.total_affidavits) || 0, icon: i.jsx(zn, { color: "#8b5cf6" }), color: "#8b5cf6" }, { title: "Probate filed", value: (t == null ? void 0 : t.total_probate) || 0, icon: i.jsx(Yy, { color: "#f59e0b" }), color: "#f59e0b" }]; return i.jsxs("div", { style: { color: "white" }, children: [i.jsxs("div", { style: { marginBottom: "2rem" }, children: [i.jsx("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0" }, children: "Jurat Performance Dashboard" }), i.jsx("p", { style: { color: "#94a3b8" }, children: "Real-time summary of applications and registry health" })] }), i.jsx("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "repeat(4, 1fr)", gap: "1.5rem", marginBottom: "3rem" }, children: o.map((a, c) => i.jsxs(Wt.div, { whileHover: { y: -5 }, style: { background: "rgb\(18 37 74\)", padding: "1.5rem", borderRadius: "20px", border: `1px solid ${a.color}20`, display: "flex", flexDirection: "column", gap: "1rem" }, children: [i.jsx("div", { style: { padding: "10px", borderRadius: "12px", background: `${a.color}10`, width: "fit-content" }, children: a.icon }), i.jsxs("div", { children: [i.jsx("p", { style: { margin: 0, color: "#94a3b8", fontSize: "14px" }, children: a.title }), i.jsx("h3", { style: { margin: "0.25rem 0 0", fontSize: "1.5rem", fontWeight: "bold" }, children: a.value })] })] }, c)) }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: e ? "1fr" : "1fr 1fr", gap: "2rem" }, children: [i.jsxs("div", { style: { background: "rgb\(18 37 74\)", padding: "2rem", borderRadius: "24px" }, children: [i.jsxs("h3", { style: { margin: "0 0 1.5rem 0", display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsx(li, { size: 20, color: "#10b981" }), " Completion Rate"] }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1rem" }, children: [i.jsxs("div", { children: [i.jsxs("div", { style: { display: "flex", justify: "space-between", marginBottom: "8px" }, children: [i.jsx("span", { style: { fontSize: "14px", color: "#94a3b8" }, children: "Affidavits" }), i.jsxs("span", { style: { fontSize: "14px", fontWeight: "bold" }, children: [(t == null ? void 0 : t.completed_affidavits) || 0, " / ", (t == null ? void 0 : t.total_affidavits) || 0] })] }), i.jsx("div", { style: { height: "8px", background: "#0f172a", borderRadius: "4px", overflow: "hidden" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: t != null && t.total_affidavits ? `${t.completed_affidavits / t.total_affidavits * 100}%` : 0 }, style: { height: "100%", background: "#8b5cf6" } }) })] }), i.jsxs("div", { children: [i.jsxs("div", { style: { display: "flex", justify: "space-between", marginBottom: "8px" }, children: [i.jsx("span", { style: { fontSize: "14px", color: "#94a3b8" }, children: "Probate" }), i.jsxs("span", { style: { fontSize: "14px", fontWeight: "bold" }, children: [(t == null ? void 0 : t.completed_probate) || 0, " / ", (t == null ? void 0 : t.total_probate) || 0] })] }), i.jsx("div", { style: { height: "8px", background: "#0f172a", borderRadius: "4px", overflow: "hidden" }, children: i.jsx(Wt.div, { initial: { width: 0 }, animate: { width: t != null && t.total_probate ? `${t.completed_probate / t.total_probate * 100}%` : 0 }, style: { height: "100%", background: "#f59e0b" } }) })] })] })] }), i.jsx("div", { style: { background: "rgb\(18 37 74\)", padding: "2rem", borderRadius: "24px", display: "flex", alignItems: "center", justifyContent: "center" }, children: i.jsxs("div", { style: { textAlign: "center" }, children: [i.jsx(Tl, { size: 40, color: "#778eaeff", style: { marginBottom: "1rem" } }), i.jsx("h4", { style: { margin: 0, color: "#94a3b8" }, children: "Recent Activity Focus" }), i.jsx("p", { style: { fontSize: "13px", color: "#778eaeff", marginTop: "0.5rem" }, children: "Higher volume of OADR applications detected in the last 24h." })] }) })] })] }) }, GM = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState(!0), [o, a] = J.useState(""); J.useEffect(() => { c() }, []); const c = async () => { try { s(!0); const p = await lt.get("/staff/jurat/payments"); r(p.data) } catch (p) { console.error("Error fetching payments:", p) } finally { s(!1) } }, l = t.filter(p => { const d = `${p.first_name || ""} ${p.surname || ""}`.toLowerCase(), f = (p.transaction_id || "").toLowerCase(); return d.includes(o.toLowerCase()) || f.includes(o.toLowerCase()) }); return i.jsxs("div", { style: { color: "white" }, children: [i.jsxs("div", { style: { display: "flex", flexDirection: e ? "column" : "row", justifyContent: "space-between", alignItems: e ? "flex-start" : "center", marginBottom: "2rem", gap: "1rem" }, children: [i.jsxs("div", { children: [i.jsxs("h2", { style: { fontSize: "1.8rem", margin: "0 0 0.5rem 0", display: "flex", alignItems: "center", gap: "0.75rem" }, children: [i.jsx(ga, { color: "#10b981" }), " Transaction Records"] }), i.jsx("p", { style: { color: "#94a3b8" }, children: "Monitor all payment attempts and completed filing fees" })] }), i.jsxs("div", { style: { position: "relative", width: e ? "100%" : "300px" }, children: [i.jsx(vm, { style: { position: "absolute", left: "12px", top: "50%", transform: "translateY(-50%)", color: "#778eaeff" }, size: 18 }), i.jsx("input", { type: "text", placeholder: "Search by applicant or Ref...", value: o, onChange: p => a(p.target.value), style: { width: "100%", padding: "12px 12px 12px 40px", background: "rgb\(18 37 74\)", border: "1px solid #334155", borderRadius: "12px", color: "white", outline: "none" } })] })] }), i.jsx("div", { className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: "1rem" }, children: i.jsx(qs, { columns: [{ key: "transaction_id", label: "Reference", render: p => i.jsx("span", { style: { fontFamily: "monospace", color: "#3b82f6", fontWeight: "bold" }, children: p || "N/A" }) }, { key: "applicant", label: "Applicant", render: (p, d) => i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600" }, children: [d.first_name, " ", d.surname] }), i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: d.email }), i.jsx("div", { style: { fontSize: "10px", color: "#94a3b8" }, children: d.phone })] }) }, { key: "item_paid", label: "Application Type", render: (p, d) => i.jsxs("div", { children: [i.jsx("div", { style: { fontSize: "13px" }, children: p }), i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: d.affidavit_title ? `(OADR: ${d.affidavit_title})` : d.deceased_name ? `(Probate: ${d.deceased_name})` : "" })] }) }, { key: "amount", label: "Amount", render: p => i.jsxs("span", { style: { fontWeight: "bold" }, children: ["", parseFloat(p).toLocaleString()] }) }, { key: "payment_status", label: "Status", render: p => i.jsx("div", { style: { padding: "4px 12px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", textTransform: "uppercase", background: p === "completed" ? "rgba(16, 185, 129, 0.1)" : "rgba(239, 68, 68, 0.1)", color: p === "completed" ? "#10b981" : "#ef4444", display: "inline-block" }, children: p }) }, { key: "payment_date", label: "Date", render: p => new Date(p).toLocaleDateString() }], data: l, loading: n, actions: p => i.jsxs("button", { onClick: () => g2({ user: { first_name: p.first_name, surname: p.surname, email: p.email, phone: p.phone, address: p.address, nin: p.nin, gender: p.gender, age: p.age }, payment: { ...p, payment_date: p.payment_date || p.created_at } }), style: { background: "#10b981", color: "white", border: "none", padding: "6px 12px", borderRadius: "8px", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.4rem", fontSize: "11px", fontWeight: "bold" }, children: [i.jsx(Al, { size: 14 }), "Receipt"] }) }) })] }) }, KM = ({ isMobile: e, staff: t }) => { const [r, n] = J.useState([]), [s, o] = J.useState(!0), [a, c] = J.useState(null), [l, p] = J.useState(null), [d, f] = J.useState(!1), { showModal: h } = Pi(), P = async () => { try { o(!0); const S = await lt.get("/staff/jurat/affidavits"); n(S.data), c(null) } catch (S) { console.error("Error fetching affidavits:", S), c("Failed to load records.") } finally { o(!1) } }; J.useEffect(() => { P() }, []); const b = async S => { var R, y; S.preventDefault(); try { await lt.put(`/staff/affidavits/${l.id}`, { content: l.content, type: l.type, amount: l.amount, status: l.status }), h({ type: "success", title: "Updated", message: "Affidavit updated successfully." }), f(!1), P() } catch (v) { h({ type: "error", title: "Update Failed", message: ((y = (R = v.response) == null ? void 0 : R.data) == null ? void 0 : y.error) || "Failed to update." }) } }, u = [{ key: "first_name", label: "Applicant/User", sortable: !0, render: (S, R) => i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600", color: "rgb\(18 37 74\)" }, children: [S, " ", R.surname] }), i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: R.email || R.phone })] }) }, { key: "type", label: "Affidavit Type", sortable: !0 }, { key: "source", label: "Source", render: S => i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "6px" }, children: [i.jsx("div", { style: { width: "24px", height: "24px", borderRadius: "6px", background: S === "Jurat" ? "rgba(14, 165, 233, 0.1)" : "rgba(148, 163, 184, 0.1)", display: "flex", alignItems: "center", justifyContent: "center" }, children: S === "Jurat" ? i.jsx(Hy, { size: 12, color: "#0ea5e9" }) : i.jsx(Vn, { size: 12, color: "#778eaeff" }) }), i.jsx("span", { style: { fontSize: "11px", fontWeight: "bold", color: S === "Jurat" ? "#0ea5e9" : "#778eaeff" }, children: (S == null ? void 0 : S.toUpperCase()) || "SELF" })] }) }, { key: "amount", label: "Amount", render: S => `${Number(S).toLocaleString()}`, hiddenMobile: !0 }, { key: "status", label: "Status", sortable: !0, render: S => { const y = { pending: { bg: "#fff7ed", text: "#9a3412" }, submitted: { bg: "#eff6ff", text: "#1e40af" }, completed: { bg: "#f0fdf4", text: "#166534" }, rejected: { bg: "#fef2f2", text: "#991b1b" } }[S] || { bg: "#f8fafc", text: "#778eaeff" }; return i.jsx("span", { style: { padding: "4px 10px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", background: y.bg, color: y.text, textTransform: "uppercase" }, children: S }) } }, { key: "created_at", label: "Date", sortable: !0, render: S => new Date(S).toLocaleDateString(), hiddenMobile: !0 }], g = S => i.jsxs("div", { style: { display: "flex", gap: "0.4rem" }, children: [S.status === "submitted" && i.jsx("button", { onClick: () => { p(S), f(!0) }, style: { padding: "0.5rem", background: "#f8fafc", border: "1px solid #e2e8f0", borderRadius: "8px", color: "#778eaeff", cursor: "pointer" }, title: "Edit Affidavit", children: i.jsx(Jd, { size: 16 }) }), S.status === "completed" && i.jsx("button", { onClick: () => { if (S.pdf_path) { const R = lt.defaults.baseURL.split("/api")[0]; window.open(`${R}${S.pdf_path}`, "_blank") } else tu({ user: S, applicationId: S.id, templateTitle: S.type, content: S.content, signerName: t == null ? void 0 : t.name, signerSignature: t == null ? void 0 : t.signature_path }) }, style: { padding: "0.5rem", background: "rgba(59, 130, 246, 0.1)", border: "none", borderRadius: "8px", color: "#3b82f6", cursor: "pointer" }, title: "Download PDF", children: i.jsx(Al, { size: 16 }) })] }); return i.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f2f4f7", borderRadius: "16px", padding: "1.5rem" }, children: [i.jsxs("div", { style: { marginBottom: "1.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsx("h3", { style: { margin: 0, color: "#101828", fontSize: "1.1rem", fontWeight: "600" }, children: "Affidavit Registry" }), i.jsx("button", { onClick: P, className: "btn-secondary", style: { padding: "0.5rem 1rem", fontSize: "13px" }, children: "Refresh" })] }), a && i.jsx("div", { style: { color: "#ef4444", marginBottom: "1rem" }, children: a }), i.jsx(qs, { columns: u, data: r, loading: s, actions: g, searchPlaceholder: "Search affidavits...", isMobile: e }), d && l && i.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1e3, padding: "1rem" }, children: i.jsxs("div", { className: "modal-content", style: { background: "#fff", borderRadius: "16px", width: "100%", maxWidth: "800px", maxHeight: "90vh", overflow: "hidden", display: "flex", flexDirection: "column" }, children: [i.jsxs("div", { style: { padding: "1.5rem", borderBottom: "1px solid #f1f5f9", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsx("h2", { style: { margin: 0, fontSize: "1.25rem" }, children: "Edit Affidavit Content" }), i.jsx("button", { onClick: () => f(!1), style: { background: "none", border: "none", cursor: "pointer", color: "#778eaeff" }, children: i.jsx(za, { size: 24 }) })] }), i.jsx("div", { style: { padding: "1.5rem", overflowY: "auto", flex: 1 }, children: i.jsxs("form", { onSubmit: b, children: [i.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr", gap: "1rem", marginBottom: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", fontSize: "14px", fontWeight: "600", marginBottom: "0.5rem" }, children: "Affidavit Type" }), i.jsx("input", { type: "text", value: l.type, onChange: S => p({ ...l, type: S.target.value }), className: "form-input" })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", fontSize: "14px", fontWeight: "600", marginBottom: "0.5rem" }, children: "Amount ()" }), i.jsx("input", { type: "number", value: l.amount, onChange: S => p({ ...l, amount: S.target.value }), className: "form-input" })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", fontSize: "14px", fontWeight: "600", marginBottom: "0.5rem" }, children: "Status" }), i.jsxs("select", { value: l.status, onChange: S => p({ ...l, status: S.target.value }), className: "form-input", children: [i.jsx("option", { value: "pending", children: "Pending" }), i.jsx("option", { value: "submitted", children: "Submitted" }), i.jsx("option", { value: "completed", children: "Completed" }), i.jsx("option", { value: "rejected", children: "Rejected" })] })] })] }), i.jsxs("div", { style: { marginBottom: "1.5rem" }, children: [i.jsx("label", { style: { display: "block", fontSize: "14px", fontWeight: "600", marginBottom: "0.5rem" }, children: "Affidavit Content" }), i.jsx(Em, { value: l.content, onChange: S => p({ ...l, content: S }) })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "flex-end", gap: "1rem" }, children: [i.jsx("button", { type: "button", onClick: () => f(!1), className: "btn-secondary", children: "Cancel" }), i.jsxs("button", { type: "submit", className: "btn-primary", style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(gm, { size: 18 }), " Save Changes"] })] })] }) })] }) })] }) }, YM = ({ isMobile: e }) => { const [t, r] = J.useState([]), [n, s] = J.useState(!0), [o, a] = J.useState(null), [c, l] = J.useState(null), [p, d] = J.useState(!1), { showModal: f } = Pi(), h = async () => { try { s(!0); const g = await lt.get("/staff/jurat/probate"); r(g.data), a(null) } catch (g) { console.error("Error fetching probate:", g), a("Failed to load records.") } finally { s(!1) } }; J.useEffect(() => { h() }, []); const P = async g => { var S, R; g.preventDefault(); try { await lt.put(`/staff/probate/${c.id}`, { deceased_name: c.deceased_name, status: c.status }), f({ type: "success", title: "Updated", message: "Probate application updated successfully." }), d(!1), h() } catch (y) { f({ type: "error", title: "Update Failed", message: ((R = (S = y.response) == null ? void 0 : S.data) == null ? void 0 : R.error) || "Failed to update." }) } }, b = [{ key: "first_name", label: "Applicant", sortable: !0, render: (g, S) => i.jsxs("div", { children: [i.jsxs("div", { style: { fontWeight: "600", color: "rgb\(18 37 74\)" }, children: [g, " ", S.surname] }), i.jsx("div", { style: { fontSize: "11px", color: "#778eaeff" }, children: S.email || S.phone })] }) }, { key: "deceased_name", label: "Deceased Name", sortable: !0 }, { key: "status", label: "Status", sortable: !0, render: g => { const S = { pending_registrar: { bg: "#eff6ff", text: "#1e40af", label: "PENDING REGISTRAR" }, query: { bg: "#fef2f2", text: "#991b1b", label: "QUERIED" }, approved: { bg: "#f0fdf4", text: "#166534", label: "APPROVED" }, completed: { bg: "#f0fdf4", text: "#166534", label: "COMPLETED" } }, R = g || "unknown", y = S[R] || { bg: "#f8fafc", text: "#778eaeff", label: R.toUpperCase() }; return i.jsx("span", { style: { padding: "4px 10px", borderRadius: "20px", fontSize: "11px", fontWeight: "bold", background: y.bg, color: y.text }, children: y.label }) } }, { key: "created_at", label: "Date", sortable: !0, render: g => new Date(g).toLocaleDateString(), hiddenMobile: !0 }], u = g => i.jsx("button", { onClick: () => { l(g), d(!0) }, style: { padding: "0.5rem", background: "#f8fafc", border: "1px solid #e2e8f0", borderRadius: "8px", color: "#778eaeff", cursor: "pointer" }, title: "Edit Application", children: i.jsx(Jd, { size: 16 }) }); return i.jsxs("div", { className: "glass-card", style: { background: "#ffffff", border: "1px solid #f2f4f7", borderRadius: "16px", padding: "1.5rem" }, children: [i.jsxs("div", { style: { marginBottom: "1.5rem", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsx("h3", { style: { margin: 0, color: "#101828", fontSize: "1.1rem", fontWeight: "600" }, children: "Probate Administration Registry" }), i.jsx("button", { onClick: h, className: "btn-secondary", style: { padding: "0.5rem 1rem", fontSize: "13px" }, children: "Refresh" })] }), o && i.jsx("div", { style: { color: "#ef4444", marginBottom: "1rem" }, children: o }), i.jsx(qs, { columns: b, data: t, loading: n, actions: u, searchPlaceholder: "Search records...", isMobile: e }), p && c && i.jsx("div", { style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", display: "flex", alignItems: "center", justifyContent: "center", zIndex: 1e3, padding: "1rem" }, children: i.jsxs("div", { className: "modal-content", style: { background: "#fff", borderRadius: "16px", width: "100%", maxWidth: "500px" }, children: [i.jsxs("div", { style: { padding: "1.5rem", borderBottom: "1px solid #f1f5f9", display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsx("h2", { style: { margin: 0, fontSize: "1.25rem" }, children: "Edit Probate Status" }), i.jsx("button", { onClick: () => d(!1), style: { background: "none", border: "none", cursor: "pointer", color: "#778eaeff" }, children: i.jsx(za, { size: 24 }) })] }), i.jsx("div", { style: { padding: "1.5rem" }, children: i.jsxs("form", { onSubmit: P, children: [i.jsxs("div", { style: { marginBottom: "1.5rem" }, children: [i.jsx("label", { style: { display: "block", fontSize: "14px", fontWeight: "600", marginBottom: "0.5rem" }, children: "Deceased Name" }), i.jsx("input", { type: "text", value: c.deceased_name, onChange: g => l({ ...c, deceased_name: g.target.value }), className: "form-input" })] }), i.jsxs("div", { style: { marginBottom: "1.5rem" }, children: [i.jsx("label", { style: { display: "block", fontSize: "14px", fontWeight: "600", marginBottom: "0.5rem" }, children: "Application Status" }), i.jsxs("select", { value: c.status, onChange: g => l({ ...c, status: g.target.value }), className: "form-input", children: [i.jsx("option", { value: "pending_registrar", children: "Pending Registrar" }), i.jsx("option", { value: "query", children: "Query/Correction Needed" }), i.jsx("option", { value: "approved", children: "Approved" }), i.jsx("option", { value: "completed", children: "Completed/Issued" })] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "flex-end", gap: "1rem" }, children: [i.jsx("button", { type: "button", onClick: () => d(!1), className: "btn-secondary", children: "Cancel" }), i.jsxs("button", { type: "submit", className: "btn-primary", style: { display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(gm, { size: 18 }), " Update Status"] })] })] }) })] }) })] }) }, QM = ({ isMobile: e, activeTab: t, staff: r, onUpdate: n }) => { const [s, o] = J.useState("main"), [a, c] = J.useState(null), [l, p] = J.useState(window.innerWidth <= 1024), d = e !== void 0 ? e : l, { showModal: f } = Pi(); us.useEffect(() => { o("main"), c(null) }, [t]); const [h, P] = J.useState(1), [b, u] = J.useState([]), [g, S] = J.useState(null), [R, y] = J.useState(""), [v, D] = J.useState(0); J.useState(!1); const [M, W] = J.useState(!1), [I, E] = J.useState({ deceasedName: "" }); J.useState(!1); const _ = async () => { try { const N = await lt.get("/affidavits/templates"); u(N.data) } catch (N) { console.error("Error fetching templates:", N) } }; us.useEffect(() => { s === "file_affidavit" && _() }, [s]); const k = N => { c(N), o("select_filing_type") }, L = N => { S(N), y(N.content), D(N.amount), P(2) }, H = async () => { var N, B; W(!0); try { const Z = (await lt.post(`/applicants/${a.id}/affidavit`, { type: g.title, content: R, amount: v })).data.id; await lt.post("/payments", { applicant_id: a.id, affidavit_id: Z, item_paid: g.title, amount: v, status: "completed" }), f({ type: "success", title: "Filing Complete", message: `Affidavit for ${a.first_name} has been filed and payment recorded.` }), P(5) } catch (Q) { f({ type: "error", title: "Filing Failed", message: ((B = (N = Q.response) == null ? void 0 : N.data) == null ? void 0 : B.error) || "Failed to complete filing." }) } finally { W(!1) } }, V = () => { o("main"), P(1), S(null), y(""), c(null) }, ee = () => { s === "file_affidavit" ? h > 1 && h < 5 ? P(h - 1) : (o("select_filing_type"), P(1)) : s === "file_probate" ? o("select_filing_type") : s === "select_filing_type" && (o("main"), c(null)) }, K = () => { switch (t) { case "dashboard": return i.jsx(S_, { isMobile: d }); case "applicants": return i.jsx(qM, { isMobile: d, onFileFor: k }); case "affidavits": return i.jsx(KM, { isMobile: d, staff: r }); case "probate": return i.jsx(YM, { isMobile: d }); case "payments": return i.jsx(GM, { isMobile: d }); case "profile": return i.jsx(Hp, { staff: r, isMobile: d, onUpdate: n }); default: return i.jsx(S_, { isMobile: d }) } }; return i.jsx("div", { style: { minHeight: "100vh" }, children: i.jsxs(ma, { mode: "wait", children: [s === "main" && i.jsx(Wt.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, exit: { opacity: 0, y: -10 }, children: K() }, "main_content"), s === "select_filing_type" && a && i.jsxs(Wt.div, { initial: { opacity: 0, scale: .95 }, animate: { opacity: 1, scale: 1 }, exit: { opacity: 0, scale: .95 }, className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: d ? "1.5rem" : "3rem", color: "white" }, children: [i.jsxs("button", { onClick: ee, style: { background: "transparent", border: "none", color: "#94a3b8", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.5rem", marginBottom: "1.5rem" }, children: [i.jsx(L0, { size: 18 }), " Back to Applicants"] }), i.jsxs("div", { style: { marginBottom: "2.5rem" }, children: [i.jsx("h2", { style: { fontSize: d ? "1.8rem" : "2.5rem", margin: "0 0 0.5rem 0" }, children: "Select Filing Type" }), i.jsxs("p", { style: { color: "#94a3b8" }, children: ["Filing for: ", i.jsxs("strong", { style: { color: "#3b82f6" }, children: [a.first_name, " ", a.surname] })] })] }), i.jsxs("div", { style: { display: "grid", gridTemplateColumns: d ? "1fr" : "1fr 1fr", gap: "2rem" }, children: [i.jsxs(Wt.div, { whileHover: { y: -5 }, onClick: () => o("file_affidavit"), style: { background: "rgba(59, 130, 246, 0.1)", border: "1px solid #3b82f6", borderRadius: "24px", padding: "2.5rem", cursor: "pointer" }, children: [i.jsx(zn, { size: 48, color: "#3b82f6", style: { marginBottom: "1.5rem" } }), i.jsx("h3", { style: { fontSize: "1.5rem", margin: "0 0 0.5rem 0" }, children: "OADR Registry" }), i.jsx("p", { style: { color: "#94a3b8", fontSize: "14px", margin: 0 }, children: "File Oaths, Affidavits and Declarations" })] }), i.jsxs(Wt.div, { whileHover: { y: -5 }, onClick: () => o("file_probate"), style: { background: "rgba(16, 185, 129, 0.1)", border: "1px solid #10b981", borderRadius: "24px", padding: "2.5rem", cursor: "pointer" }, children: [i.jsx(Yy, { size: 48, color: "#10b981", style: { marginBottom: "1.5rem" } }), i.jsx("h3", { style: { fontSize: "1.5rem", margin: "0 0 0.5rem 0" }, children: "Probate Registry" }), i.jsx("p", { style: { color: "#94a3b8", fontSize: "14px", margin: 0 }, children: "File Letters of Administration" })] })] })] }, "select_filing"), s === "file_affidavit" && a && i.jsxs(Wt.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, exit: { opacity: 0, x: -20 }, className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: d ? "1.5rem" : "3rem", color: "white" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2.5rem" }, children: [i.jsxs("button", { onClick: ee, style: { background: "transparent", border: "none", color: "#94a3b8", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(L0, { size: 18 }), " ", h === 5 ? "Done" : "Back"] }), i.jsx("div", { style: { display: "flex", flex: 1, justifyContent: "center", gap: "1rem", marginLeft: "2rem", marginRight: "2rem" }, children: ["Select", "Review", "Pay", "Finalize", "Success"].map((N, B) => i.jsxs("div", { style: { display: "flex", flexDirection: "column", alignItems: "center", gap: "0.5rem", opacity: h === B + 1 ? 1 : .4, transition: "all 0.3s" }, children: [i.jsx("div", { style: { width: "24px", height: "24px", borderRadius: "50%", background: h >= B + 1 ? "#3b82f6" : "#334155", display: "flex", alignItems: "center", justifyContent: "center", fontSize: "11px", fontWeight: "bold" }, children: B + 1 }), i.jsx("span", { style: { fontSize: "10px", fontWeight: "bold", textTransform: "uppercase", color: h === B + 1 ? "#3b82f6" : "#94a3b8" }, children: N })] }, B)) })] }), h === 1 && i.jsxs("div", { style: { maxWidth: "500px", margin: "0 auto" }, children: [i.jsx("h3", { style: { marginBottom: "1.5rem", textAlign: "center" }, children: "Choose Affidavit Template" }), i.jsxs("div", { style: { display: "flex", flexDirection: "column", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", marginBottom: "0.5rem", color: "#94a3b8", fontSize: "14px" }, children: "Template Category" }), i.jsxs("select", { style: { width: "100%", padding: "14px", borderRadius: "12px", border: "1px solid #334155", background: "#0f172a", color: "white", outline: "none", fontSize: "15px" }, value: (g == null ? void 0 : g.id) || "", onChange: N => { const B = N.target.value; if (B) { const Q = b.find(Z => Z.id === parseInt(B)); L(Q) } }, children: [i.jsx("option", { value: "", children: "-- Select Template --" }), b.map(N => i.jsxs("option", { value: N.id, children: [N.title, " - ", Number(N.amount).toLocaleString()] }, N.id))] })] }), g && i.jsx("div", { style: { background: "rgba(59, 130, 246, 0.1)", padding: "1.5rem", borderRadius: "16px", border: "1px solid rgba(59, 130, 246, 0.2)" }, children: i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center" }, children: [i.jsx("span", { style: { color: "#94a3b8" }, children: "Selected Fee:" }), i.jsxs("span", { style: { fontSize: "1.25rem", fontWeight: "bold", color: "#3b82f6" }, children: ["", Number(g.amount).toLocaleString()] })] }) }), i.jsx("button", { disabled: !g, onClick: () => P(2), className: "btn btn-primary", style: { padding: "14px", borderRadius: "12px", background: "#3b82f6", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", opacity: g ? 1 : .5 }, children: "Next: Review Content" })] })] }), h === 2 && i.jsxs("div", { children: [i.jsx("h2", { style: { marginBottom: "1.5rem" }, children: "Edit Affidavit Content" }), i.jsx("div", { style: { background: "white", borderRadius: "12px", padding: "1px", marginBottom: "2rem" }, children: i.jsx(Em, { value: R, onChange: y }) }), i.jsx("button", { onClick: () => P(3), style: { width: "100%", padding: "16px", borderRadius: "12px", background: "#3b82f6", color: "white", border: "none", fontWeight: "bold", cursor: "pointer" }, children: "Review Application" })] }), h === 3 && i.jsxs("div", { style: { maxWidth: "800px", margin: "0 auto" }, children: [i.jsx("h2", { style: { marginBottom: "1.5rem" }, children: "Review Filing" }), i.jsx("div", { style: { background: "white", color: "rgb\(18 37 74\)", padding: d ? "1.5rem" : "4rem", borderRadius: "12px", fontFamily: "'Times New Roman', serif", boxShadow: "0 10px 25px rgba(0,0,0,0.2)", marginBottom: "2rem" }, children: i.jsx("div", { dangerouslySetInnerHTML: { __html: R }, style: { lineHeight: "1.8", textAlign: "justify", fontSize: "15px" } }) }), i.jsxs("div", { style: { display: "flex", gap: "1rem" }, children: [i.jsx("button", { onClick: () => P(2), style: { flex: 1, padding: "16px", borderRadius: "12px", background: "rgba(255,255,255,0.05)", color: "white", border: "1px solid rgba(255,255,255,0.1)", fontWeight: "bold", cursor: "pointer" }, children: "Edit Content" }), i.jsxs("button", { onClick: () => P(4), style: { flex: 2, padding: "16px", borderRadius: "12px", background: "#3b82f6", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: ["Confirm & Proceed to Payment ", i.jsx(Yd, { size: 20 })] })] })] }), h === 4 && i.jsxs("div", { style: { textAlign: "center", maxWidth: "500px", margin: "0 auto", padding: "2rem 0" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", background: "rgba(59, 130, 246, 0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem", color: "#3b82f6" }, children: i.jsx(ga, { size: 40 }) }), i.jsx("h2", { style: { marginBottom: "1rem" }, children: "Payment Confirmation" }), i.jsxs("p", { style: { color: "#94a3b8", marginBottom: "2.5rem" }, children: ["Confirm that the amount of ", i.jsxs("strong", { children: ["", v] }), " has been received for this filing."] }), i.jsxs("div", { style: { background: "#0f172a", border: "1px solid rgba(255,255,255,0.1)", borderRadius: "24px", padding: "2.5rem", marginBottom: "2.5rem", textAlign: "left", boxShadow: "0 20px 25px -5px rgba(0,0,0,0.3)" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "1.25rem" }, children: [i.jsx("span", { style: { color: "#94a3b8" }, children: "Template Type" }), i.jsx("span", { style: { fontWeight: "600" }, children: g.title })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "1.25rem" }, children: [i.jsx("span", { style: { color: "#94a3b8" }, children: "Filing For" }), i.jsxs("span", { style: { fontWeight: "600" }, children: [a.first_name, " ", a.surname] })] }), i.jsx("div", { style: { height: "1px", background: "rgba(255,255,255,0.1)", margin: "1.5rem 0" } }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "0.75rem" }, children: [i.jsx("span", { style: { color: "#94a3b8" }, children: "Administrative Fee" }), i.jsxs("span", { style: { fontWeight: "600" }, children: ["", Number(v).toLocaleString()] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: "1.25rem" }, children: [i.jsx("span", { style: { color: "#94a3b8" }, children: "Tax/VAT (7.5%)" }), i.jsxs("span", { style: { fontWeight: "600" }, children: ["", (v * .075).toLocaleString()] })] }), i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", paddingTop: "1.5rem", borderTop: "2px dashed rgba(255,255,255,0.1)" }, children: [i.jsx("span", { style: { color: "#f1f5f9", fontWeight: "bold", fontSize: "1.1rem" }, children: "Total Received" }), i.jsxs("span", { style: { fontWeight: "900", color: "#3b82f6", fontSize: "1.75rem" }, children: ["", (v * 1.075).toLocaleString()] })] })] }), i.jsxs("button", { onClick: H, disabled: M, style: { width: "100%", padding: "16px", borderRadius: "12px", background: "#10b981", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [M ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), "Confirm Payment & Finalize"] })] }), h === 5 && i.jsxs("div", { style: { textAlign: "center", padding: "4rem 0" }, children: [i.jsx("div", { style: { width: "100px", height: "100px", background: "rgba(16, 185, 129, 0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem", color: "#10b981" }, children: i.jsx(li, { size: 60 }) }), i.jsx("h1", { style: { fontSize: "2.5rem", marginBottom: "1rem" }, children: "Filing Successful!" }), i.jsxs("p", { style: { color: "#94a3b8", fontSize: "1.2rem", marginBottom: "3rem", maxWidth: "600px", margin: "0 auto 3rem" }, children: ["The affidavit has been successfully filed on behalf of ", a.first_name, " ", a.surname, ". A confirmation email has been sent to ", i.jsx("strong", { style: { color: "white" }, children: a.email || "the applicant" }), "."] }), i.jsxs("div", { style: { display: "flex", gap: "1.5rem", justifyContent: "center" }, children: [i.jsx("button", { onClick: V, style: { padding: "16px 40px", borderRadius: "16px", background: "#3b82f6", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", transition: "all 0.3s" }, children: "Go to Dashboard" }), i.jsx("button", { onClick: () => window.location.reload(), style: { padding: "16px 40px", borderRadius: "16px", background: "rgba(255,255,255,0.05)", color: "white", border: "1px solid rgba(255,255,255,0.1)", fontWeight: "bold", cursor: "pointer", transition: "all 0.3s" }, children: "File Another" })] })] })] }, "file_affidavit"), s === "file_probate" && a && i.jsxs(Wt.div, { initial: { opacity: 0, x: 20 }, animate: { opacity: 1, x: 0 }, exit: { opacity: 0, x: -20 }, className: "glass-card", style: { background: "rgb\(18 37 74\)", border: "none", padding: d ? "1.5rem" : "3rem", color: "white" }, children: [i.jsxs("div", { style: { display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: "2rem" }, children: [i.jsxs("button", { onClick: ee, style: { background: "transparent", border: "none", color: "#94a3b8", cursor: "pointer", display: "flex", alignItems: "center", gap: "0.5rem" }, children: [i.jsx(L0, { size: 18 }), " ", h === 5 ? "Close" : "Back"] }), h < 5 && i.jsx("div", { style: { display: "flex", gap: "0.5rem" }, children: [1, 2, 3, 4].map(N => i.jsx("div", { style: { width: "30px", height: "4px", background: h >= N ? "#10b981" : "#334155", borderRadius: "2px" } }, N)) })] }), h === 1 && i.jsxs(Wt.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, children: [i.jsx("h2", { style: { marginBottom: "0.5rem" }, children: "Deceased Person Details" }), i.jsxs("p", { style: { color: "#94a3b8", fontSize: "14px", marginBottom: "2.5rem" }, children: ["Filing for: ", i.jsxs("strong", { style: { color: "#10b981" }, children: [a.first_name, " ", a.surname] })] }), i.jsxs("div", { style: { display: "grid", gap: "1.5rem" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Full Name of Deceased *" }), i.jsx("input", { type: "text", value: I.deceasedName, onChange: N => E({ ...I, deceasedName: N.target.value }), style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" }, placeholder: "Enter full name" })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Date of Death" }), i.jsx("input", { type: "date", style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "13px", marginBottom: "8px" }, children: "Last Known Address" }), i.jsx("textarea", { style: { width: "100%", padding: "14px", background: "#0f172a", border: "1px solid #334155", borderRadius: "12px", color: "white", minHeight: "100px" }, placeholder: "Enter address" })] })] }), i.jsx("button", { onClick: () => P(2), disabled: !I.deceasedName, style: { width: "100%", marginTop: "2.5rem", padding: "16px", borderRadius: "12px", background: "#10b981", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", opacity: I.deceasedName ? 1 : .5 }, children: "Continue to Next of Kin" })] }), h === 2 && i.jsxs(Wt.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, children: [i.jsx("h2", { style: { marginBottom: "0.5rem" }, children: "Beneficiaries & Next of Kin" }), i.jsx("p", { style: { color: "#94a3b8", fontSize: "14px", marginBottom: "2rem" }, children: "Add individuals related to the deceased." }), i.jsx("div", { style: { background: "rgba(15, 23, 42, 0.5)", padding: "1.5rem", borderRadius: "16px", border: "1px solid #334155", marginBottom: "2rem" }, children: i.jsxs("div", { style: { display: "grid", gridTemplateColumns: "1fr 1fr auto", gap: "1rem", alignItems: "end" }, children: [i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "11px", marginBottom: "4px" }, children: "Name" }), i.jsx("input", { type: "text", style: { width: "100%", padding: "10px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsxs("div", { children: [i.jsx("label", { style: { display: "block", color: "#94a3b8", fontSize: "11px", marginBottom: "4px" }, children: "Relationship" }), i.jsx("input", { type: "text", style: { width: "100%", padding: "10px", background: "#0f172a", border: "1px solid #334155", borderRadius: "8px", color: "white" } })] }), i.jsx("button", { style: { padding: "10px 20px", background: "#10b981", color: "white", border: "none", borderRadius: "8px", fontWeight: "bold" }, children: "Add" })] }) }), i.jsx("button", { onClick: () => P(3), style: { width: "100%", padding: "16px", borderRadius: "12px", background: "#10b981", color: "white", border: "none", fontWeight: "bold", cursor: "pointer" }, children: "Continue to Documents" })] }), h === 3 && i.jsxs(Wt.div, { initial: { opacity: 0, y: 10 }, animate: { opacity: 1, y: 0 }, children: [i.jsx("h2", { style: { marginBottom: "0.5rem" }, children: "Supporting Documents" }), i.jsx("p", { style: { color: "#94a3b8", fontSize: "14px", marginBottom: "2.5rem" }, children: "Upload certificates and letters." }), i.jsx("div", { style: { display: "grid", gap: "1rem" }, children: ["Death Certificate", "Introduction Letter"].map(N => i.jsxs("div", { style: { display: "flex", alignItems: "center", justifyContent: "space-between", padding: "1.5rem", background: "#0f172a", borderRadius: "12px", border: "1px solid #334155" }, children: [i.jsxs("div", { style: { display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("div", { style: { width: "40px", height: "40px", background: "rgba(59, 130, 246, 0.1)", borderRadius: "10px", display: "flex", alignItems: "center", justifyContent: "center", color: "#3b82f6" }, children: i.jsx(Bd, { size: 20 }) }), i.jsx("span", { children: N })] }), i.jsx("button", { style: { background: "#334155", color: "white", border: "none", padding: "8px 16px", borderRadius: "8px", fontSize: "12px" }, children: "Upload" })] }, N)) }), i.jsx("button", { onClick: () => P(4), style: { width: "100%", marginTop: "3rem", padding: "16px", borderRadius: "12px", background: "#10b981", color: "white", border: "none", fontWeight: "bold", cursor: "pointer" }, children: "Proceed to Payment" })] }), h === 4 && i.jsxs("div", { style: { textAlign: "center", maxWidth: "500px", margin: "0 auto", padding: "2rem 0" }, children: [i.jsx("div", { style: { width: "80px", height: "80px", background: "rgba(16, 185, 129, 0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem", color: "#10b981" }, children: i.jsx(ga, { size: 40 }) }), i.jsx("h2", { style: { marginBottom: "1rem" }, children: "Payment Confirmation" }), i.jsxs("p", { style: { color: "#94a3b8", marginBottom: "2.5rem" }, children: ["Probate Fee: ", i.jsx("strong", { style: { color: "white", fontSize: "1.5rem" }, children: "15,000" })] }), i.jsxs("button", { onClick: async () => { W(!0); try { await lt.post(`/applicants/${a.id}/probate`, { deceasedName: I.deceasedName }), P(5) } catch { alert("Filing failed") } finally { W(!1) } }, disabled: M, style: { width: "100%", padding: "16px", borderRadius: "12px", background: "#10b981", color: "white", border: "none", fontWeight: "bold", cursor: "pointer", display: "flex", alignItems: "center", justifyContent: "center", gap: "0.5rem" }, children: [M ? i.jsx(Jn, { className: "animate-spin", size: 20 }) : i.jsx(li, { size: 20 }), "Confirm Payment & Finalize"] })] }), h === 5 && i.jsxs("div", { style: { textAlign: "center", padding: "4rem 0" }, children: [i.jsx("div", { style: { width: "100px", height: "100px", background: "rgba(16, 185, 129, 0.1)", borderRadius: "50%", display: "flex", alignItems: "center", justifyContent: "center", margin: "0 auto 2rem", color: "#10b981" }, children: i.jsx(li, { size: 60 }) }), i.jsx("h1", { style: { fontSize: "2.5rem", marginBottom: "1rem" }, children: "Application Submitted!" }), i.jsxs("p", { style: { color: "#94a3b8", fontSize: "1.2rem", marginBottom: "3rem" }, children: ["The probate application for ", I.deceasedName, " has been received."] }), i.jsx("button", { onClick: V, style: { padding: "16px 40px", borderRadius: "12px", background: "#3b82f6", color: "white", border: "none", fontWeight: "bold", cursor: "pointer" }, children: "Back to Dashboard" })] })] }, "file_probate")] }) }) }, JM = ({ staff: e }) => { var h; console.log("JuratDashboard staff:", e); const [t, r] = J.useState(e), [n, s] = J.useState("dashboard"), [o, a] = J.useState(window.innerWidth > 1024), [c, l] = J.useState(window.innerWidth <= 1024); J.useEffect(() => { const P = () => { const b = window.innerWidth <= 1024; l(b), a(!b) }; return window.addEventListener("resize", P), () => window.removeEventListener("resize", P) }, []), J.useEffect(() => { const P = async () => { try { const b = await lt.get("/staff/profile"); r(b.data), localStorage.setItem("staff", JSON.stringify(b.data)) } catch (b) { console.error("Failed to refresh staff info:", b) } }; e != null && e.id && P() }, [e == null ? void 0 : e.id]); const p = () => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), window.location.href = "/staff/login" }, d = [{ icon: i.jsx(Pl, { size: 20 }), label: "Dashboard", id: "dashboard" }, { icon: i.jsx(co, { size: 20 }), label: "Manage Applicants", id: "applicants" }, { icon: i.jsx(zn, { size: 20 }), label: "All Affidavits", id: "affidavits" }, { icon: i.jsx(Yy, { size: 20 }), label: "Probate Applications", id: "probate" }, { icon: i.jsx(ga, { size: 20 }), label: "Payments", id: "payments" }, { icon: i.jsx(Vn, { size: 20 }), label: "My Profile", id: "profile" }], f = [{ id: 1, text: "New filing session started", time: "10m ago" }]; return t ? i.jsxs("div", { style: { display: "flex", minHeight: "100vh", background: "#f8fafc", color: "#3d2b1f", position: "relative" }, children: [c && o && i.jsx("div", { onClick: () => a(!1), style: { position: "fixed", inset: 0, background: "rgba(0,0,0,0.5)", zIndex: 40, backdropFilter: "blur(4px)" } }), i.jsxs("aside", { style: { width: o ? "280px" : "0", background: "#3d2b1f", padding: o ? "2rem" : "0", display: "flex", flexDirection: "column", transition: "all 0.3s cubic-bezier(0.4, 0, 0.2, 1)", overflow: "hidden", position: c ? "fixed" : "relative", height: "100vh", zIndex: 50, boxShadow: c && o ? "10px 0 30px rgba(0,0,0,0.2)" : "none" }, children: [i.jsxs("div", { style: { padding: "1rem", marginBottom: "2rem", display: "flex", alignItems: "center", gap: "1rem" }, children: [i.jsx("img", { src: "/assets/logo.png", alt: "Logo", style: { width: "40px", height: "40px", borderRadius: "50%" } }), i.jsxs("div", { style: { whiteSpace: "nowrap" }, children: [i.jsx("h2", { style: { color: "white", fontSize: "1.2rem", margin: 0 }, children: "CRMS Jurat" }), i.jsx("p", { style: { margin: 0, fontSize: "9px", color: "#8d6e63", fontWeight: "bold" }, children: "BORNO STATE HIGH COURT" })] })] }), i.jsx("nav", { style: { flex: 1, overflowY: "auto" }, children: d.map(P => i.jsxs("div", { onClick: () => { s(P.id), c && a(!1) }, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", cursor: "pointer", borderRadius: "12px", background: n === P.id ? "#5d4037" : "transparent", color: n === P.id ? "#2ecc71" : "#8d6e63", marginBottom: "0.5rem", transition: "all 0.2s", whiteSpace: "nowrap" }, children: [P.icon, i.jsx("span", { children: P.label })] }, P.id)) }), i.jsxs("button", { onClick: p, style: { display: "flex", alignItems: "center", gap: "1rem", padding: "1rem", background: "transparent", border: "none", color: "#ef4444", cursor: "pointer", marginTop: "auto" }, children: [i.jsx(Ac, { size: 20 }), i.jsx("span", { children: "Logout" })] })] }), i.jsxs("main", { style: { flex: 1, display: "flex", flexDirection: "column", minHeight: "100vh", width: "100%" }, children: [i.jsx(Il, { user: t, title: ((h = d.find(P => P.id === n)) == null ? void 0 : h.label) || "Jurat Overview", onLogout: p, onSidebarToggle: () => a(!o), sidebarOpen: o, notifications: f, isMobile: c }), i.jsx("div", { style: { padding: c ? "1rem" : "2.5rem", flex: 1, overflowY: "auto" }, children: i.jsx(QM, { activeTab: n, isMobile: c, staff: t, onUpdate: P => { r(P), localStorage.setItem("staff", JSON.stringify(P)) } }) })] })] }) : i.jsx("div", { style: { padding: "2rem", textAlign: "center" }, children: "Loading Jurat session..." }) }, XM = () => { const [e, t] = J.useState(() => { const o = localStorage.getItem("user"); return o ? JSON.parse(o) : null }), [r, n] = J.useState(() => { const o = localStorage.getItem("staff"); return o ? JSON.parse(o) : null }), s = o => { localStorage.removeItem("token"), localStorage.removeItem("user"), localStorage.removeItem("staff"), t(null), n(null), window.location.href = typeof o == "string" ? `/login?reason=${o}` : "/login" }; return J.useEffect(() => { let o; const c = () => { o && clearTimeout(o), (e || r) && (o = setTimeout(() => { console.log("Session expired due to inactivity"), s("timeout") }, 36e5)) }, l = ["mousedown", "mousemove", "keypress", "scroll", "touchstart"]; return l.forEach(p => document.addEventListener(p, c)), c(), () => { o && clearTimeout(o), l.forEach(p => document.removeEventListener(p, c)) } }, [e, r]), i.jsx(WA, { children: i.jsxs(bA, { children: [i.jsx(Es, { path: "/", element: i.jsx(aM, {}) }), i.jsx(Es, { path: "/login", element: i.jsx(nM, { setUser: o => { localStorage.setItem("user", JSON.stringify(o)), t(o) } }) }), i.jsx(Es, { path: "/register", element: i.jsx(iM, {}) }), i.jsx(Es, { path: "/modules", element: e ? i.jsx(oM, { user: e }) : i.jsx(Za, { to: "/login" }) }), i.jsx(Es, { path: "/oadr/*", element: e ? i.jsx(cM, { user: e }) : i.jsx(Za, { to: "/login" }) }), i.jsx(Es, { path: "/probate/*", element: e ? i.jsx(uM, { user: e }) : i.jsx(Za, { to: "/login" }) }), i.jsx(Es, { path: "/staff/login", element: i.jsx(pM, { setStaff: o => { localStorage.setItem("staff", JSON.stringify(o)), n(o) } }) }), i.jsx(Es, { path: "/staff/admin", element: r && r.role === "admin" ? i.jsx(xM, { staff: r }) : i.jsx(Za, { to: "/staff/login" }) }), i.jsx(Es, { path: "/staff/cfo", element: r && r.role === "cfo" ? i.jsx(VM, { staff: r }) : i.jsx(Za, { to: "/staff/login" }) }), i.jsx(Es, { path: "/staff/cr", element: r && r.role === "cr" ? i.jsx(WM, { staff: r }) : i.jsx(Za, { to: "/staff/login" }) }), i.jsx(Es, { path: "/staff/pr", element: r && r.role === "registrar" ? i.jsx(HM, { staff: r }) : i.jsx(Za, { to: "/staff/login" }) }), i.jsx(Es, { path: "/staff/jurat", element: r && r.role === "jurat" ? i.jsx(JM, { staff: r }) : i.jsx(Za, { to: "/staff/login" }) }), i.jsx(Es, { path: "/staff", element: !r || !r.role ? i.jsx(Za, { to: "/staff/login" }) : i.jsx(Za, { to: `/staff/${r.role === "registrar" ? "pr" : r.role}` }) })] }) }) }; $0.createRoot(document.getElementById("root")).render(i.jsx(us.StrictMode, { children: i.jsx(S5, { children: i.jsx(XM, {}) }) }));
