import {
  __commonJS,
  __require
} from "./chunk-USJHI7ER.js";

// node_modules/long/umd/index.js
var require_umd = __commonJS({
  "node_modules/long/umd/index.js"(exports2, module2) {
    var Long = function(exports3) {
      "use strict";
      Object.defineProperty(exports3, "__esModule", {
        value: true
      });
      exports3.default = void 0;
      var wasm = null;
      try {
        wasm = new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0, 97, 115, 109, 1, 0, 0, 0, 1, 13, 2, 96, 0, 1, 127, 96, 4, 127, 127, 127, 127, 1, 127, 3, 7, 6, 0, 1, 1, 1, 1, 1, 6, 6, 1, 127, 1, 65, 0, 11, 7, 50, 6, 3, 109, 117, 108, 0, 1, 5, 100, 105, 118, 95, 115, 0, 2, 5, 100, 105, 118, 95, 117, 0, 3, 5, 114, 101, 109, 95, 115, 0, 4, 5, 114, 101, 109, 95, 117, 0, 5, 8, 103, 101, 116, 95, 104, 105, 103, 104, 0, 0, 10, 191, 1, 6, 4, 0, 35, 0, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 126, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 127, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 128, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 129, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11, 36, 1, 1, 126, 32, 0, 173, 32, 1, 173, 66, 32, 134, 132, 32, 2, 173, 32, 3, 173, 66, 32, 134, 132, 130, 34, 4, 66, 32, 135, 167, 36, 0, 32, 4, 167, 11])), {}).exports;
      } catch (e) {
      }
      function Long2(low, high, unsigned) {
        this.low = low | 0;
        this.high = high | 0;
        this.unsigned = !!unsigned;
      }
      Long2.prototype.__isLong__;
      Object.defineProperty(Long2.prototype, "__isLong__", {
        value: true
      });
      function isLong(obj) {
        return (obj && obj["__isLong__"]) === true;
      }
      function ctz32(value) {
        var c = Math.clz32(value & -value);
        return value ? 31 - c : c;
      }
      Long2.isLong = isLong;
      var INT_CACHE = {};
      var UINT_CACHE = {};
      function fromInt(value, unsigned) {
        var obj, cachedObj, cache;
        if (unsigned) {
          value >>>= 0;
          if (cache = 0 <= value && value < 256) {
            cachedObj = UINT_CACHE[value];
            if (cachedObj)
              return cachedObj;
          }
          obj = fromBits(value, 0, true);
          if (cache)
            UINT_CACHE[value] = obj;
          return obj;
        } else {
          value |= 0;
          if (cache = -128 <= value && value < 128) {
            cachedObj = INT_CACHE[value];
            if (cachedObj)
              return cachedObj;
          }
          obj = fromBits(value, value < 0 ? -1 : 0, false);
          if (cache)
            INT_CACHE[value] = obj;
          return obj;
        }
      }
      Long2.fromInt = fromInt;
      function fromNumber(value, unsigned) {
        if (isNaN(value))
          return unsigned ? UZERO : ZERO;
        if (unsigned) {
          if (value < 0)
            return UZERO;
          if (value >= TWO_PWR_64_DBL)
            return MAX_UNSIGNED_VALUE;
        } else {
          if (value <= -TWO_PWR_63_DBL)
            return MIN_VALUE;
          if (value + 1 >= TWO_PWR_63_DBL)
            return MAX_VALUE;
        }
        if (value < 0)
          return fromNumber(-value, unsigned).neg();
        return fromBits(value % TWO_PWR_32_DBL | 0, value / TWO_PWR_32_DBL | 0, unsigned);
      }
      Long2.fromNumber = fromNumber;
      function fromBits(lowBits, highBits, unsigned) {
        return new Long2(lowBits, highBits, unsigned);
      }
      Long2.fromBits = fromBits;
      var pow_dbl = Math.pow;
      function fromString(str, unsigned, radix) {
        if (str.length === 0)
          throw Error("empty string");
        if (typeof unsigned === "number") {
          radix = unsigned;
          unsigned = false;
        } else {
          unsigned = !!unsigned;
        }
        if (str === "NaN" || str === "Infinity" || str === "+Infinity" || str === "-Infinity")
          return unsigned ? UZERO : ZERO;
        radix = radix || 10;
        if (radix < 2 || 36 < radix)
          throw RangeError("radix");
        var p;
        if ((p = str.indexOf("-")) > 0)
          throw Error("interior hyphen");
        else if (p === 0) {
          return fromString(str.substring(1), unsigned, radix).neg();
        }
        var radixToPower = fromNumber(pow_dbl(radix, 8));
        var result = ZERO;
        for (var i = 0; i < str.length; i += 8) {
          var size = Math.min(8, str.length - i), value = parseInt(str.substring(i, i + size), radix);
          if (size < 8) {
            var power = fromNumber(pow_dbl(radix, size));
            result = result.mul(power).add(fromNumber(value));
          } else {
            result = result.mul(radixToPower);
            result = result.add(fromNumber(value));
          }
        }
        result.unsigned = unsigned;
        return result;
      }
      Long2.fromString = fromString;
      function fromValue(val, unsigned) {
        if (typeof val === "number")
          return fromNumber(val, unsigned);
        if (typeof val === "string")
          return fromString(val, unsigned);
        return fromBits(val.low, val.high, typeof unsigned === "boolean" ? unsigned : val.unsigned);
      }
      Long2.fromValue = fromValue;
      var TWO_PWR_16_DBL = 1 << 16;
      var TWO_PWR_24_DBL = 1 << 24;
      var TWO_PWR_32_DBL = TWO_PWR_16_DBL * TWO_PWR_16_DBL;
      var TWO_PWR_64_DBL = TWO_PWR_32_DBL * TWO_PWR_32_DBL;
      var TWO_PWR_63_DBL = TWO_PWR_64_DBL / 2;
      var TWO_PWR_24 = fromInt(TWO_PWR_24_DBL);
      var ZERO = fromInt(0);
      Long2.ZERO = ZERO;
      var UZERO = fromInt(0, true);
      Long2.UZERO = UZERO;
      var ONE = fromInt(1);
      Long2.ONE = ONE;
      var UONE = fromInt(1, true);
      Long2.UONE = UONE;
      var NEG_ONE = fromInt(-1);
      Long2.NEG_ONE = NEG_ONE;
      var MAX_VALUE = fromBits(4294967295 | 0, 2147483647 | 0, false);
      Long2.MAX_VALUE = MAX_VALUE;
      var MAX_UNSIGNED_VALUE = fromBits(4294967295 | 0, 4294967295 | 0, true);
      Long2.MAX_UNSIGNED_VALUE = MAX_UNSIGNED_VALUE;
      var MIN_VALUE = fromBits(0, 2147483648 | 0, false);
      Long2.MIN_VALUE = MIN_VALUE;
      var LongPrototype = Long2.prototype;
      LongPrototype.toInt = function toInt() {
        return this.unsigned ? this.low >>> 0 : this.low;
      };
      LongPrototype.toNumber = function toNumber() {
        if (this.unsigned)
          return (this.high >>> 0) * TWO_PWR_32_DBL + (this.low >>> 0);
        return this.high * TWO_PWR_32_DBL + (this.low >>> 0);
      };
      LongPrototype.toString = function toString(radix) {
        radix = radix || 10;
        if (radix < 2 || 36 < radix)
          throw RangeError("radix");
        if (this.isZero())
          return "0";
        if (this.isNegative()) {
          if (this.eq(MIN_VALUE)) {
            var radixLong = fromNumber(radix), div = this.div(radixLong), rem1 = div.mul(radixLong).sub(this);
            return div.toString(radix) + rem1.toInt().toString(radix);
          } else
            return "-" + this.neg().toString(radix);
        }
        var radixToPower = fromNumber(pow_dbl(radix, 6), this.unsigned), rem = this;
        var result = "";
        while (true) {
          var remDiv = rem.div(radixToPower), intval = rem.sub(remDiv.mul(radixToPower)).toInt() >>> 0, digits = intval.toString(radix);
          rem = remDiv;
          if (rem.isZero())
            return digits + result;
          else {
            while (digits.length < 6)
              digits = "0" + digits;
            result = "" + digits + result;
          }
        }
      };
      LongPrototype.getHighBits = function getHighBits() {
        return this.high;
      };
      LongPrototype.getHighBitsUnsigned = function getHighBitsUnsigned() {
        return this.high >>> 0;
      };
      LongPrototype.getLowBits = function getLowBits() {
        return this.low;
      };
      LongPrototype.getLowBitsUnsigned = function getLowBitsUnsigned() {
        return this.low >>> 0;
      };
      LongPrototype.getNumBitsAbs = function getNumBitsAbs() {
        if (this.isNegative())
          return this.eq(MIN_VALUE) ? 64 : this.neg().getNumBitsAbs();
        var val = this.high != 0 ? this.high : this.low;
        for (var bit = 31; bit > 0; bit--)
          if ((val & 1 << bit) != 0)
            break;
        return this.high != 0 ? bit + 33 : bit + 1;
      };
      LongPrototype.isZero = function isZero() {
        return this.high === 0 && this.low === 0;
      };
      LongPrototype.eqz = LongPrototype.isZero;
      LongPrototype.isNegative = function isNegative() {
        return !this.unsigned && this.high < 0;
      };
      LongPrototype.isPositive = function isPositive() {
        return this.unsigned || this.high >= 0;
      };
      LongPrototype.isOdd = function isOdd() {
        return (this.low & 1) === 1;
      };
      LongPrototype.isEven = function isEven() {
        return (this.low & 1) === 0;
      };
      LongPrototype.equals = function equals(other) {
        if (!isLong(other))
          other = fromValue(other);
        if (this.unsigned !== other.unsigned && this.high >>> 31 === 1 && other.high >>> 31 === 1)
          return false;
        return this.high === other.high && this.low === other.low;
      };
      LongPrototype.eq = LongPrototype.equals;
      LongPrototype.notEquals = function notEquals(other) {
        return !this.eq(
          /* validates */
          other
        );
      };
      LongPrototype.neq = LongPrototype.notEquals;
      LongPrototype.ne = LongPrototype.notEquals;
      LongPrototype.lessThan = function lessThan(other) {
        return this.comp(
          /* validates */
          other
        ) < 0;
      };
      LongPrototype.lt = LongPrototype.lessThan;
      LongPrototype.lessThanOrEqual = function lessThanOrEqual(other) {
        return this.comp(
          /* validates */
          other
        ) <= 0;
      };
      LongPrototype.lte = LongPrototype.lessThanOrEqual;
      LongPrototype.le = LongPrototype.lessThanOrEqual;
      LongPrototype.greaterThan = function greaterThan(other) {
        return this.comp(
          /* validates */
          other
        ) > 0;
      };
      LongPrototype.gt = LongPrototype.greaterThan;
      LongPrototype.greaterThanOrEqual = function greaterThanOrEqual(other) {
        return this.comp(
          /* validates */
          other
        ) >= 0;
      };
      LongPrototype.gte = LongPrototype.greaterThanOrEqual;
      LongPrototype.ge = LongPrototype.greaterThanOrEqual;
      LongPrototype.compare = function compare(other) {
        if (!isLong(other))
          other = fromValue(other);
        if (this.eq(other))
          return 0;
        var thisNeg = this.isNegative(), otherNeg = other.isNegative();
        if (thisNeg && !otherNeg)
          return -1;
        if (!thisNeg && otherNeg)
          return 1;
        if (!this.unsigned)
          return this.sub(other).isNegative() ? -1 : 1;
        return other.high >>> 0 > this.high >>> 0 || other.high === this.high && other.low >>> 0 > this.low >>> 0 ? -1 : 1;
      };
      LongPrototype.comp = LongPrototype.compare;
      LongPrototype.negate = function negate() {
        if (!this.unsigned && this.eq(MIN_VALUE))
          return MIN_VALUE;
        return this.not().add(ONE);
      };
      LongPrototype.neg = LongPrototype.negate;
      LongPrototype.add = function add(addend) {
        if (!isLong(addend))
          addend = fromValue(addend);
        var a48 = this.high >>> 16;
        var a32 = this.high & 65535;
        var a16 = this.low >>> 16;
        var a00 = this.low & 65535;
        var b48 = addend.high >>> 16;
        var b32 = addend.high & 65535;
        var b16 = addend.low >>> 16;
        var b00 = addend.low & 65535;
        var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
        c00 += a00 + b00;
        c16 += c00 >>> 16;
        c00 &= 65535;
        c16 += a16 + b16;
        c32 += c16 >>> 16;
        c16 &= 65535;
        c32 += a32 + b32;
        c48 += c32 >>> 16;
        c32 &= 65535;
        c48 += a48 + b48;
        c48 &= 65535;
        return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);
      };
      LongPrototype.subtract = function subtract(subtrahend) {
        if (!isLong(subtrahend))
          subtrahend = fromValue(subtrahend);
        return this.add(subtrahend.neg());
      };
      LongPrototype.sub = LongPrototype.subtract;
      LongPrototype.multiply = function multiply(multiplier) {
        if (this.isZero())
          return this;
        if (!isLong(multiplier))
          multiplier = fromValue(multiplier);
        if (wasm) {
          var low = wasm["mul"](this.low, this.high, multiplier.low, multiplier.high);
          return fromBits(low, wasm["get_high"](), this.unsigned);
        }
        if (multiplier.isZero())
          return this.unsigned ? UZERO : ZERO;
        if (this.eq(MIN_VALUE))
          return multiplier.isOdd() ? MIN_VALUE : ZERO;
        if (multiplier.eq(MIN_VALUE))
          return this.isOdd() ? MIN_VALUE : ZERO;
        if (this.isNegative()) {
          if (multiplier.isNegative())
            return this.neg().mul(multiplier.neg());
          else
            return this.neg().mul(multiplier).neg();
        } else if (multiplier.isNegative())
          return this.mul(multiplier.neg()).neg();
        if (this.lt(TWO_PWR_24) && multiplier.lt(TWO_PWR_24))
          return fromNumber(this.toNumber() * multiplier.toNumber(), this.unsigned);
        var a48 = this.high >>> 16;
        var a32 = this.high & 65535;
        var a16 = this.low >>> 16;
        var a00 = this.low & 65535;
        var b48 = multiplier.high >>> 16;
        var b32 = multiplier.high & 65535;
        var b16 = multiplier.low >>> 16;
        var b00 = multiplier.low & 65535;
        var c48 = 0, c32 = 0, c16 = 0, c00 = 0;
        c00 += a00 * b00;
        c16 += c00 >>> 16;
        c00 &= 65535;
        c16 += a16 * b00;
        c32 += c16 >>> 16;
        c16 &= 65535;
        c16 += a00 * b16;
        c32 += c16 >>> 16;
        c16 &= 65535;
        c32 += a32 * b00;
        c48 += c32 >>> 16;
        c32 &= 65535;
        c32 += a16 * b16;
        c48 += c32 >>> 16;
        c32 &= 65535;
        c32 += a00 * b32;
        c48 += c32 >>> 16;
        c32 &= 65535;
        c48 += a48 * b00 + a32 * b16 + a16 * b32 + a00 * b48;
        c48 &= 65535;
        return fromBits(c16 << 16 | c00, c48 << 16 | c32, this.unsigned);
      };
      LongPrototype.mul = LongPrototype.multiply;
      LongPrototype.divide = function divide(divisor) {
        if (!isLong(divisor))
          divisor = fromValue(divisor);
        if (divisor.isZero())
          throw Error("division by zero");
        if (wasm) {
          if (!this.unsigned && this.high === -2147483648 && divisor.low === -1 && divisor.high === -1) {
            return this;
          }
          var low = (this.unsigned ? wasm["div_u"] : wasm["div_s"])(this.low, this.high, divisor.low, divisor.high);
          return fromBits(low, wasm["get_high"](), this.unsigned);
        }
        if (this.isZero())
          return this.unsigned ? UZERO : ZERO;
        var approx, rem, res;
        if (!this.unsigned) {
          if (this.eq(MIN_VALUE)) {
            if (divisor.eq(ONE) || divisor.eq(NEG_ONE))
              return MIN_VALUE;
            else if (divisor.eq(MIN_VALUE))
              return ONE;
            else {
              var halfThis = this.shr(1);
              approx = halfThis.div(divisor).shl(1);
              if (approx.eq(ZERO)) {
                return divisor.isNegative() ? ONE : NEG_ONE;
              } else {
                rem = this.sub(divisor.mul(approx));
                res = approx.add(rem.div(divisor));
                return res;
              }
            }
          } else if (divisor.eq(MIN_VALUE))
            return this.unsigned ? UZERO : ZERO;
          if (this.isNegative()) {
            if (divisor.isNegative())
              return this.neg().div(divisor.neg());
            return this.neg().div(divisor).neg();
          } else if (divisor.isNegative())
            return this.div(divisor.neg()).neg();
          res = ZERO;
        } else {
          if (!divisor.unsigned)
            divisor = divisor.toUnsigned();
          if (divisor.gt(this))
            return UZERO;
          if (divisor.gt(this.shru(1)))
            return UONE;
          res = UZERO;
        }
        rem = this;
        while (rem.gte(divisor)) {
          approx = Math.max(1, Math.floor(rem.toNumber() / divisor.toNumber()));
          var log2 = Math.ceil(Math.log(approx) / Math.LN2), delta = log2 <= 48 ? 1 : pow_dbl(2, log2 - 48), approxRes = fromNumber(approx), approxRem = approxRes.mul(divisor);
          while (approxRem.isNegative() || approxRem.gt(rem)) {
            approx -= delta;
            approxRes = fromNumber(approx, this.unsigned);
            approxRem = approxRes.mul(divisor);
          }
          if (approxRes.isZero())
            approxRes = ONE;
          res = res.add(approxRes);
          rem = rem.sub(approxRem);
        }
        return res;
      };
      LongPrototype.div = LongPrototype.divide;
      LongPrototype.modulo = function modulo(divisor) {
        if (!isLong(divisor))
          divisor = fromValue(divisor);
        if (wasm) {
          var low = (this.unsigned ? wasm["rem_u"] : wasm["rem_s"])(this.low, this.high, divisor.low, divisor.high);
          return fromBits(low, wasm["get_high"](), this.unsigned);
        }
        return this.sub(this.div(divisor).mul(divisor));
      };
      LongPrototype.mod = LongPrototype.modulo;
      LongPrototype.rem = LongPrototype.modulo;
      LongPrototype.not = function not() {
        return fromBits(~this.low, ~this.high, this.unsigned);
      };
      LongPrototype.countLeadingZeros = function countLeadingZeros() {
        return this.high ? Math.clz32(this.high) : Math.clz32(this.low) + 32;
      };
      LongPrototype.clz = LongPrototype.countLeadingZeros;
      LongPrototype.countTrailingZeros = function countTrailingZeros() {
        return this.low ? ctz32(this.low) : ctz32(this.high) + 32;
      };
      LongPrototype.ctz = LongPrototype.countTrailingZeros;
      LongPrototype.and = function and(other) {
        if (!isLong(other))
          other = fromValue(other);
        return fromBits(this.low & other.low, this.high & other.high, this.unsigned);
      };
      LongPrototype.or = function or(other) {
        if (!isLong(other))
          other = fromValue(other);
        return fromBits(this.low | other.low, this.high | other.high, this.unsigned);
      };
      LongPrototype.xor = function xor(other) {
        if (!isLong(other))
          other = fromValue(other);
        return fromBits(this.low ^ other.low, this.high ^ other.high, this.unsigned);
      };
      LongPrototype.shiftLeft = function shiftLeft(numBits) {
        if (isLong(numBits))
          numBits = numBits.toInt();
        if ((numBits &= 63) === 0)
          return this;
        else if (numBits < 32)
          return fromBits(this.low << numBits, this.high << numBits | this.low >>> 32 - numBits, this.unsigned);
        else
          return fromBits(0, this.low << numBits - 32, this.unsigned);
      };
      LongPrototype.shl = LongPrototype.shiftLeft;
      LongPrototype.shiftRight = function shiftRight(numBits) {
        if (isLong(numBits))
          numBits = numBits.toInt();
        if ((numBits &= 63) === 0)
          return this;
        else if (numBits < 32)
          return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >> numBits, this.unsigned);
        else
          return fromBits(this.high >> numBits - 32, this.high >= 0 ? 0 : -1, this.unsigned);
      };
      LongPrototype.shr = LongPrototype.shiftRight;
      LongPrototype.shiftRightUnsigned = function shiftRightUnsigned(numBits) {
        if (isLong(numBits))
          numBits = numBits.toInt();
        if ((numBits &= 63) === 0)
          return this;
        if (numBits < 32)
          return fromBits(this.low >>> numBits | this.high << 32 - numBits, this.high >>> numBits, this.unsigned);
        if (numBits === 32)
          return fromBits(this.high, 0, this.unsigned);
        return fromBits(this.high >>> numBits - 32, 0, this.unsigned);
      };
      LongPrototype.shru = LongPrototype.shiftRightUnsigned;
      LongPrototype.shr_u = LongPrototype.shiftRightUnsigned;
      LongPrototype.rotateLeft = function rotateLeft(numBits) {
        var b;
        if (isLong(numBits))
          numBits = numBits.toInt();
        if ((numBits &= 63) === 0)
          return this;
        if (numBits === 32)
          return fromBits(this.high, this.low, this.unsigned);
        if (numBits < 32) {
          b = 32 - numBits;
          return fromBits(this.low << numBits | this.high >>> b, this.high << numBits | this.low >>> b, this.unsigned);
        }
        numBits -= 32;
        b = 32 - numBits;
        return fromBits(this.high << numBits | this.low >>> b, this.low << numBits | this.high >>> b, this.unsigned);
      };
      LongPrototype.rotl = LongPrototype.rotateLeft;
      LongPrototype.rotateRight = function rotateRight(numBits) {
        var b;
        if (isLong(numBits))
          numBits = numBits.toInt();
        if ((numBits &= 63) === 0)
          return this;
        if (numBits === 32)
          return fromBits(this.high, this.low, this.unsigned);
        if (numBits < 32) {
          b = 32 - numBits;
          return fromBits(this.high << b | this.low >>> numBits, this.low << b | this.high >>> numBits, this.unsigned);
        }
        numBits -= 32;
        b = 32 - numBits;
        return fromBits(this.low << b | this.high >>> numBits, this.high << b | this.low >>> numBits, this.unsigned);
      };
      LongPrototype.rotr = LongPrototype.rotateRight;
      LongPrototype.toSigned = function toSigned() {
        if (!this.unsigned)
          return this;
        return fromBits(this.low, this.high, false);
      };
      LongPrototype.toUnsigned = function toUnsigned() {
        if (this.unsigned)
          return this;
        return fromBits(this.low, this.high, true);
      };
      LongPrototype.toBytes = function toBytes(le) {
        return le ? this.toBytesLE() : this.toBytesBE();
      };
      LongPrototype.toBytesLE = function toBytesLE() {
        var hi = this.high, lo = this.low;
        return [lo & 255, lo >>> 8 & 255, lo >>> 16 & 255, lo >>> 24, hi & 255, hi >>> 8 & 255, hi >>> 16 & 255, hi >>> 24];
      };
      LongPrototype.toBytesBE = function toBytesBE() {
        var hi = this.high, lo = this.low;
        return [hi >>> 24, hi >>> 16 & 255, hi >>> 8 & 255, hi & 255, lo >>> 24, lo >>> 16 & 255, lo >>> 8 & 255, lo & 255];
      };
      Long2.fromBytes = function fromBytes(bytes, unsigned, le) {
        return le ? Long2.fromBytesLE(bytes, unsigned) : Long2.fromBytesBE(bytes, unsigned);
      };
      Long2.fromBytesLE = function fromBytesLE(bytes, unsigned) {
        return new Long2(bytes[0] | bytes[1] << 8 | bytes[2] << 16 | bytes[3] << 24, bytes[4] | bytes[5] << 8 | bytes[6] << 16 | bytes[7] << 24, unsigned);
      };
      Long2.fromBytesBE = function fromBytesBE(bytes, unsigned) {
        return new Long2(bytes[4] << 24 | bytes[5] << 16 | bytes[6] << 8 | bytes[7], bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3], unsigned);
      };
      var _default = Long2;
      exports3.default = _default;
      return "default" in exports3 ? exports3.default : exports3;
    }({});
    if (typeof define === "function" && define.amd)
      define([], function() {
        return Long;
      });
    else if (typeof module2 === "object" && typeof exports2 === "object")
      module2.exports = Long;
  }
});

// node_modules/@protobufjs/aspromise/index.js
var require_aspromise = __commonJS({
  "node_modules/@protobufjs/aspromise/index.js"(exports2, module2) {
    "use strict";
    module2.exports = asPromise;
    function asPromise(fn, ctx) {
      var params = new Array(arguments.length - 1), offset = 0, index = 2, pending = true;
      while (index < arguments.length)
        params[offset++] = arguments[index++];
      return new Promise(function executor(resolve, reject) {
        params[offset] = function callback(err) {
          if (pending) {
            pending = false;
            if (err)
              reject(err);
            else {
              var params2 = new Array(arguments.length - 1), offset2 = 0;
              while (offset2 < params2.length)
                params2[offset2++] = arguments[offset2];
              resolve.apply(null, params2);
            }
          }
        };
        try {
          fn.apply(ctx || null, params);
        } catch (err) {
          if (pending) {
            pending = false;
            reject(err);
          }
        }
      });
    }
  }
});

// node_modules/@protobufjs/base64/index.js
var require_base64 = __commonJS({
  "node_modules/@protobufjs/base64/index.js"(exports2) {
    "use strict";
    var base64 = exports2;
    base64.length = function length(string) {
      var p = string.length;
      if (!p)
        return 0;
      var n = 0;
      while (--p % 4 > 1 && string.charAt(p) === "=")
        ++n;
      return Math.ceil(string.length * 3) / 4 - n;
    };
    var b64 = new Array(64);
    var s64 = new Array(123);
    for (i = 0; i < 64; )
      s64[b64[i] = i < 26 ? i + 65 : i < 52 ? i + 71 : i < 62 ? i - 4 : i - 59 | 43] = i++;
    var i;
    base64.encode = function encode(buffer, start, end) {
      var parts = null, chunk = [];
      var i2 = 0, j = 0, t;
      while (start < end) {
        var b = buffer[start++];
        switch (j) {
          case 0:
            chunk[i2++] = b64[b >> 2];
            t = (b & 3) << 4;
            j = 1;
            break;
          case 1:
            chunk[i2++] = b64[t | b >> 4];
            t = (b & 15) << 2;
            j = 2;
            break;
          case 2:
            chunk[i2++] = b64[t | b >> 6];
            chunk[i2++] = b64[b & 63];
            j = 0;
            break;
        }
        if (i2 > 8191) {
          (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
          i2 = 0;
        }
      }
      if (j) {
        chunk[i2++] = b64[t];
        chunk[i2++] = 61;
        if (j === 1)
          chunk[i2++] = 61;
      }
      if (parts) {
        if (i2)
          parts.push(String.fromCharCode.apply(String, chunk.slice(0, i2)));
        return parts.join("");
      }
      return String.fromCharCode.apply(String, chunk.slice(0, i2));
    };
    var invalidEncoding = "invalid encoding";
    base64.decode = function decode(string, buffer, offset) {
      var start = offset;
      var j = 0, t;
      for (var i2 = 0; i2 < string.length; ) {
        var c = string.charCodeAt(i2++);
        if (c === 61 && j > 1)
          break;
        if ((c = s64[c]) === void 0)
          throw Error(invalidEncoding);
        switch (j) {
          case 0:
            t = c;
            j = 1;
            break;
          case 1:
            buffer[offset++] = t << 2 | (c & 48) >> 4;
            t = c;
            j = 2;
            break;
          case 2:
            buffer[offset++] = (t & 15) << 4 | (c & 60) >> 2;
            t = c;
            j = 3;
            break;
          case 3:
            buffer[offset++] = (t & 3) << 6 | c;
            j = 0;
            break;
        }
      }
      if (j === 1)
        throw Error(invalidEncoding);
      return offset - start;
    };
    base64.test = function test(string) {
      return /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(string);
    };
  }
});

// node_modules/@protobufjs/eventemitter/index.js
var require_eventemitter = __commonJS({
  "node_modules/@protobufjs/eventemitter/index.js"(exports2, module2) {
    "use strict";
    module2.exports = EventEmitter;
    function EventEmitter() {
      this._listeners = {};
    }
    EventEmitter.prototype.on = function on(evt, fn, ctx) {
      (this._listeners[evt] || (this._listeners[evt] = [])).push({
        fn,
        ctx: ctx || this
      });
      return this;
    };
    EventEmitter.prototype.off = function off(evt, fn) {
      if (evt === void 0)
        this._listeners = {};
      else {
        if (fn === void 0)
          this._listeners[evt] = [];
        else {
          var listeners = this._listeners[evt];
          for (var i = 0; i < listeners.length; )
            if (listeners[i].fn === fn)
              listeners.splice(i, 1);
            else
              ++i;
        }
      }
      return this;
    };
    EventEmitter.prototype.emit = function emit(evt) {
      var listeners = this._listeners[evt];
      if (listeners) {
        var args = [], i = 1;
        for (; i < arguments.length; )
          args.push(arguments[i++]);
        for (i = 0; i < listeners.length; )
          listeners[i].fn.apply(listeners[i++].ctx, args);
      }
      return this;
    };
  }
});

// node_modules/@protobufjs/float/index.js
var require_float = __commonJS({
  "node_modules/@protobufjs/float/index.js"(exports2, module2) {
    "use strict";
    module2.exports = factory(factory);
    function factory(exports3) {
      if (typeof Float32Array !== "undefined")
        (function() {
          var f32 = new Float32Array([-0]), f8b = new Uint8Array(f32.buffer), le = f8b[3] === 128;
          function writeFloat_f32_cpy(val, buf, pos) {
            f32[0] = val;
            buf[pos] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
          }
          function writeFloat_f32_rev(val, buf, pos) {
            f32[0] = val;
            buf[pos] = f8b[3];
            buf[pos + 1] = f8b[2];
            buf[pos + 2] = f8b[1];
            buf[pos + 3] = f8b[0];
          }
          exports3.writeFloatLE = le ? writeFloat_f32_cpy : writeFloat_f32_rev;
          exports3.writeFloatBE = le ? writeFloat_f32_rev : writeFloat_f32_cpy;
          function readFloat_f32_cpy(buf, pos) {
            f8b[0] = buf[pos];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            return f32[0];
          }
          function readFloat_f32_rev(buf, pos) {
            f8b[3] = buf[pos];
            f8b[2] = buf[pos + 1];
            f8b[1] = buf[pos + 2];
            f8b[0] = buf[pos + 3];
            return f32[0];
          }
          exports3.readFloatLE = le ? readFloat_f32_cpy : readFloat_f32_rev;
          exports3.readFloatBE = le ? readFloat_f32_rev : readFloat_f32_cpy;
        })();
      else
        (function() {
          function writeFloat_ieee754(writeUint, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
              val = -val;
            if (val === 0)
              writeUint(1 / val > 0 ? (
                /* positive */
                0
              ) : (
                /* negative 0 */
                2147483648
              ), buf, pos);
            else if (isNaN(val))
              writeUint(2143289344, buf, pos);
            else if (val > 34028234663852886e22)
              writeUint((sign << 31 | 2139095040) >>> 0, buf, pos);
            else if (val < 11754943508222875e-54)
              writeUint((sign << 31 | Math.round(val / 1401298464324817e-60)) >>> 0, buf, pos);
            else {
              var exponent = Math.floor(Math.log(val) / Math.LN2), mantissa = Math.round(val * Math.pow(2, -exponent) * 8388608) & 8388607;
              writeUint((sign << 31 | exponent + 127 << 23 | mantissa) >>> 0, buf, pos);
            }
          }
          exports3.writeFloatLE = writeFloat_ieee754.bind(null, writeUintLE);
          exports3.writeFloatBE = writeFloat_ieee754.bind(null, writeUintBE);
          function readFloat_ieee754(readUint, buf, pos) {
            var uint = readUint(buf, pos), sign = (uint >> 31) * 2 + 1, exponent = uint >>> 23 & 255, mantissa = uint & 8388607;
            return exponent === 255 ? mantissa ? NaN : sign * Infinity : exponent === 0 ? sign * 1401298464324817e-60 * mantissa : sign * Math.pow(2, exponent - 150) * (mantissa + 8388608);
          }
          exports3.readFloatLE = readFloat_ieee754.bind(null, readUintLE);
          exports3.readFloatBE = readFloat_ieee754.bind(null, readUintBE);
        })();
      if (typeof Float64Array !== "undefined")
        (function() {
          var f64 = new Float64Array([-0]), f8b = new Uint8Array(f64.buffer), le = f8b[7] === 128;
          function writeDouble_f64_cpy(val, buf, pos) {
            f64[0] = val;
            buf[pos] = f8b[0];
            buf[pos + 1] = f8b[1];
            buf[pos + 2] = f8b[2];
            buf[pos + 3] = f8b[3];
            buf[pos + 4] = f8b[4];
            buf[pos + 5] = f8b[5];
            buf[pos + 6] = f8b[6];
            buf[pos + 7] = f8b[7];
          }
          function writeDouble_f64_rev(val, buf, pos) {
            f64[0] = val;
            buf[pos] = f8b[7];
            buf[pos + 1] = f8b[6];
            buf[pos + 2] = f8b[5];
            buf[pos + 3] = f8b[4];
            buf[pos + 4] = f8b[3];
            buf[pos + 5] = f8b[2];
            buf[pos + 6] = f8b[1];
            buf[pos + 7] = f8b[0];
          }
          exports3.writeDoubleLE = le ? writeDouble_f64_cpy : writeDouble_f64_rev;
          exports3.writeDoubleBE = le ? writeDouble_f64_rev : writeDouble_f64_cpy;
          function readDouble_f64_cpy(buf, pos) {
            f8b[0] = buf[pos];
            f8b[1] = buf[pos + 1];
            f8b[2] = buf[pos + 2];
            f8b[3] = buf[pos + 3];
            f8b[4] = buf[pos + 4];
            f8b[5] = buf[pos + 5];
            f8b[6] = buf[pos + 6];
            f8b[7] = buf[pos + 7];
            return f64[0];
          }
          function readDouble_f64_rev(buf, pos) {
            f8b[7] = buf[pos];
            f8b[6] = buf[pos + 1];
            f8b[5] = buf[pos + 2];
            f8b[4] = buf[pos + 3];
            f8b[3] = buf[pos + 4];
            f8b[2] = buf[pos + 5];
            f8b[1] = buf[pos + 6];
            f8b[0] = buf[pos + 7];
            return f64[0];
          }
          exports3.readDoubleLE = le ? readDouble_f64_cpy : readDouble_f64_rev;
          exports3.readDoubleBE = le ? readDouble_f64_rev : readDouble_f64_cpy;
        })();
      else
        (function() {
          function writeDouble_ieee754(writeUint, off0, off1, val, buf, pos) {
            var sign = val < 0 ? 1 : 0;
            if (sign)
              val = -val;
            if (val === 0) {
              writeUint(0, buf, pos + off0);
              writeUint(1 / val > 0 ? (
                /* positive */
                0
              ) : (
                /* negative 0 */
                2147483648
              ), buf, pos + off1);
            } else if (isNaN(val)) {
              writeUint(0, buf, pos + off0);
              writeUint(2146959360, buf, pos + off1);
            } else if (val > 17976931348623157e292) {
              writeUint(0, buf, pos + off0);
              writeUint((sign << 31 | 2146435072) >>> 0, buf, pos + off1);
            } else {
              var mantissa;
              if (val < 22250738585072014e-324) {
                mantissa = val / 5e-324;
                writeUint(mantissa >>> 0, buf, pos + off0);
                writeUint((sign << 31 | mantissa / 4294967296) >>> 0, buf, pos + off1);
              } else {
                var exponent = Math.floor(Math.log(val) / Math.LN2);
                if (exponent === 1024)
                  exponent = 1023;
                mantissa = val * Math.pow(2, -exponent);
                writeUint(mantissa * 4503599627370496 >>> 0, buf, pos + off0);
                writeUint((sign << 31 | exponent + 1023 << 20 | mantissa * 1048576 & 1048575) >>> 0, buf, pos + off1);
              }
            }
          }
          exports3.writeDoubleLE = writeDouble_ieee754.bind(null, writeUintLE, 0, 4);
          exports3.writeDoubleBE = writeDouble_ieee754.bind(null, writeUintBE, 4, 0);
          function readDouble_ieee754(readUint, off0, off1, buf, pos) {
            var lo = readUint(buf, pos + off0), hi = readUint(buf, pos + off1);
            var sign = (hi >> 31) * 2 + 1, exponent = hi >>> 20 & 2047, mantissa = 4294967296 * (hi & 1048575) + lo;
            return exponent === 2047 ? mantissa ? NaN : sign * Infinity : exponent === 0 ? sign * 5e-324 * mantissa : sign * Math.pow(2, exponent - 1075) * (mantissa + 4503599627370496);
          }
          exports3.readDoubleLE = readDouble_ieee754.bind(null, readUintLE, 0, 4);
          exports3.readDoubleBE = readDouble_ieee754.bind(null, readUintBE, 4, 0);
        })();
      return exports3;
    }
    function writeUintLE(val, buf, pos) {
      buf[pos] = val & 255;
      buf[pos + 1] = val >>> 8 & 255;
      buf[pos + 2] = val >>> 16 & 255;
      buf[pos + 3] = val >>> 24;
    }
    function writeUintBE(val, buf, pos) {
      buf[pos] = val >>> 24;
      buf[pos + 1] = val >>> 16 & 255;
      buf[pos + 2] = val >>> 8 & 255;
      buf[pos + 3] = val & 255;
    }
    function readUintLE(buf, pos) {
      return (buf[pos] | buf[pos + 1] << 8 | buf[pos + 2] << 16 | buf[pos + 3] << 24) >>> 0;
    }
    function readUintBE(buf, pos) {
      return (buf[pos] << 24 | buf[pos + 1] << 16 | buf[pos + 2] << 8 | buf[pos + 3]) >>> 0;
    }
  }
});

// node_modules/@protobufjs/inquire/index.js
var require_inquire = __commonJS({
  "node_modules/@protobufjs/inquire/index.js"(exports, module) {
    "use strict";
    module.exports = inquire;
    function inquire(moduleName) {
      try {
        var mod = eval("quire".replace(/^/, "re"))(moduleName);
        if (mod && (mod.length || Object.keys(mod).length))
          return mod;
      } catch (e) {
      }
      return null;
    }
  }
});

// node_modules/@protobufjs/utf8/index.js
var require_utf8 = __commonJS({
  "node_modules/@protobufjs/utf8/index.js"(exports2) {
    "use strict";
    var utf8 = exports2;
    utf8.length = function utf8_length(string) {
      var len = 0, c = 0;
      for (var i = 0; i < string.length; ++i) {
        c = string.charCodeAt(i);
        if (c < 128)
          len += 1;
        else if (c < 2048)
          len += 2;
        else if ((c & 64512) === 55296 && (string.charCodeAt(i + 1) & 64512) === 56320) {
          ++i;
          len += 4;
        } else
          len += 3;
      }
      return len;
    };
    utf8.read = function utf8_read(buffer, start, end) {
      var len = end - start;
      if (len < 1)
        return "";
      var parts = null, chunk = [], i = 0, t;
      while (start < end) {
        t = buffer[start++];
        if (t < 128)
          chunk[i++] = t;
        else if (t > 191 && t < 224)
          chunk[i++] = (t & 31) << 6 | buffer[start++] & 63;
        else if (t > 239 && t < 365) {
          t = ((t & 7) << 18 | (buffer[start++] & 63) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63) - 65536;
          chunk[i++] = 55296 + (t >> 10);
          chunk[i++] = 56320 + (t & 1023);
        } else
          chunk[i++] = (t & 15) << 12 | (buffer[start++] & 63) << 6 | buffer[start++] & 63;
        if (i > 8191) {
          (parts || (parts = [])).push(String.fromCharCode.apply(String, chunk));
          i = 0;
        }
      }
      if (parts) {
        if (i)
          parts.push(String.fromCharCode.apply(String, chunk.slice(0, i)));
        return parts.join("");
      }
      return String.fromCharCode.apply(String, chunk.slice(0, i));
    };
    utf8.write = function utf8_write(string, buffer, offset) {
      var start = offset, c1, c2;
      for (var i = 0; i < string.length; ++i) {
        c1 = string.charCodeAt(i);
        if (c1 < 128) {
          buffer[offset++] = c1;
        } else if (c1 < 2048) {
          buffer[offset++] = c1 >> 6 | 192;
          buffer[offset++] = c1 & 63 | 128;
        } else if ((c1 & 64512) === 55296 && ((c2 = string.charCodeAt(i + 1)) & 64512) === 56320) {
          c1 = 65536 + ((c1 & 1023) << 10) + (c2 & 1023);
          ++i;
          buffer[offset++] = c1 >> 18 | 240;
          buffer[offset++] = c1 >> 12 & 63 | 128;
          buffer[offset++] = c1 >> 6 & 63 | 128;
          buffer[offset++] = c1 & 63 | 128;
        } else {
          buffer[offset++] = c1 >> 12 | 224;
          buffer[offset++] = c1 >> 6 & 63 | 128;
          buffer[offset++] = c1 & 63 | 128;
        }
      }
      return offset - start;
    };
  }
});

// node_modules/@protobufjs/pool/index.js
var require_pool = __commonJS({
  "node_modules/@protobufjs/pool/index.js"(exports2, module2) {
    "use strict";
    module2.exports = pool;
    function pool(alloc, slice, size) {
      var SIZE = size || 8192;
      var MAX = SIZE >>> 1;
      var slab = null;
      var offset = SIZE;
      return function pool_alloc(size2) {
        if (size2 < 1 || size2 > MAX)
          return alloc(size2);
        if (offset + size2 > SIZE) {
          slab = alloc(SIZE);
          offset = 0;
        }
        var buf = slice.call(slab, offset, offset += size2);
        if (offset & 7)
          offset = (offset | 7) + 1;
        return buf;
      };
    }
  }
});

// node_modules/protobufjs/src/util/longbits.js
var require_longbits = __commonJS({
  "node_modules/protobufjs/src/util/longbits.js"(exports2, module2) {
    "use strict";
    module2.exports = LongBits;
    var util = require_minimal();
    function LongBits(lo, hi) {
      this.lo = lo >>> 0;
      this.hi = hi >>> 0;
    }
    var zero = LongBits.zero = new LongBits(0, 0);
    zero.toNumber = function() {
      return 0;
    };
    zero.zzEncode = zero.zzDecode = function() {
      return this;
    };
    zero.length = function() {
      return 1;
    };
    var zeroHash = LongBits.zeroHash = "\0\0\0\0\0\0\0\0";
    LongBits.fromNumber = function fromNumber(value) {
      if (value === 0)
        return zero;
      var sign = value < 0;
      if (sign)
        value = -value;
      var lo = value >>> 0, hi = (value - lo) / 4294967296 >>> 0;
      if (sign) {
        hi = ~hi >>> 0;
        lo = ~lo >>> 0;
        if (++lo > 4294967295) {
          lo = 0;
          if (++hi > 4294967295)
            hi = 0;
        }
      }
      return new LongBits(lo, hi);
    };
    LongBits.from = function from(value) {
      if (typeof value === "number")
        return LongBits.fromNumber(value);
      if (util.isString(value)) {
        if (util.Long)
          value = util.Long.fromString(value);
        else
          return LongBits.fromNumber(parseInt(value, 10));
      }
      return value.low || value.high ? new LongBits(value.low >>> 0, value.high >>> 0) : zero;
    };
    LongBits.prototype.toNumber = function toNumber(unsigned) {
      if (!unsigned && this.hi >>> 31) {
        var lo = ~this.lo + 1 >>> 0, hi = ~this.hi >>> 0;
        if (!lo)
          hi = hi + 1 >>> 0;
        return -(lo + hi * 4294967296);
      }
      return this.lo + this.hi * 4294967296;
    };
    LongBits.prototype.toLong = function toLong(unsigned) {
      return util.Long ? new util.Long(this.lo | 0, this.hi | 0, Boolean(unsigned)) : { low: this.lo | 0, high: this.hi | 0, unsigned: Boolean(unsigned) };
    };
    var charCodeAt = String.prototype.charCodeAt;
    LongBits.fromHash = function fromHash(hash) {
      if (hash === zeroHash)
        return zero;
      return new LongBits(
        (charCodeAt.call(hash, 0) | charCodeAt.call(hash, 1) << 8 | charCodeAt.call(hash, 2) << 16 | charCodeAt.call(hash, 3) << 24) >>> 0,
        (charCodeAt.call(hash, 4) | charCodeAt.call(hash, 5) << 8 | charCodeAt.call(hash, 6) << 16 | charCodeAt.call(hash, 7) << 24) >>> 0
      );
    };
    LongBits.prototype.toHash = function toHash() {
      return String.fromCharCode(
        this.lo & 255,
        this.lo >>> 8 & 255,
        this.lo >>> 16 & 255,
        this.lo >>> 24,
        this.hi & 255,
        this.hi >>> 8 & 255,
        this.hi >>> 16 & 255,
        this.hi >>> 24
      );
    };
    LongBits.prototype.zzEncode = function zzEncode() {
      var mask = this.hi >> 31;
      this.hi = ((this.hi << 1 | this.lo >>> 31) ^ mask) >>> 0;
      this.lo = (this.lo << 1 ^ mask) >>> 0;
      return this;
    };
    LongBits.prototype.zzDecode = function zzDecode() {
      var mask = -(this.lo & 1);
      this.lo = ((this.lo >>> 1 | this.hi << 31) ^ mask) >>> 0;
      this.hi = (this.hi >>> 1 ^ mask) >>> 0;
      return this;
    };
    LongBits.prototype.length = function length() {
      var part0 = this.lo, part1 = (this.lo >>> 28 | this.hi << 4) >>> 0, part2 = this.hi >>> 24;
      return part2 === 0 ? part1 === 0 ? part0 < 16384 ? part0 < 128 ? 1 : 2 : part0 < 2097152 ? 3 : 4 : part1 < 16384 ? part1 < 128 ? 5 : 6 : part1 < 2097152 ? 7 : 8 : part2 < 128 ? 9 : 10;
    };
  }
});

// node_modules/protobufjs/src/util/minimal.js
var require_minimal = __commonJS({
  "node_modules/protobufjs/src/util/minimal.js"(exports2) {
    "use strict";
    var util = exports2;
    util.asPromise = require_aspromise();
    util.base64 = require_base64();
    util.EventEmitter = require_eventemitter();
    util.float = require_float();
    util.inquire = require_inquire();
    util.utf8 = require_utf8();
    util.pool = require_pool();
    util.LongBits = require_longbits();
    util.isNode = Boolean(typeof global !== "undefined" && global && global.process && global.process.versions && global.process.versions.node);
    util.global = util.isNode && global || typeof window !== "undefined" && window || typeof self !== "undefined" && self || exports2;
    util.emptyArray = Object.freeze ? Object.freeze([]) : (
      /* istanbul ignore next */
      []
    );
    util.emptyObject = Object.freeze ? Object.freeze({}) : (
      /* istanbul ignore next */
      {}
    );
    util.isInteger = Number.isInteger || /* istanbul ignore next */
    function isInteger(value) {
      return typeof value === "number" && isFinite(value) && Math.floor(value) === value;
    };
    util.isString = function isString(value) {
      return typeof value === "string" || value instanceof String;
    };
    util.isObject = function isObject(value) {
      return value && typeof value === "object";
    };
    util.isset = /**
     * Checks if a property on a message is considered to be present.
     * @param {Object} obj Plain object or message instance
     * @param {string} prop Property name
     * @returns {boolean} `true` if considered to be present, otherwise `false`
     */
    util.isSet = function isSet(obj, prop) {
      var value = obj[prop];
      if (value != null && obj.hasOwnProperty(prop))
        return typeof value !== "object" || (Array.isArray(value) ? value.length : Object.keys(value).length) > 0;
      return false;
    };
    util.Buffer = function() {
      try {
        var Buffer = util.inquire("buffer").Buffer;
        return Buffer.prototype.utf8Write ? Buffer : (
          /* istanbul ignore next */
          null
        );
      } catch (e) {
        return null;
      }
    }();
    util._Buffer_from = null;
    util._Buffer_allocUnsafe = null;
    util.newBuffer = function newBuffer(sizeOrArray) {
      return typeof sizeOrArray === "number" ? util.Buffer ? util._Buffer_allocUnsafe(sizeOrArray) : new util.Array(sizeOrArray) : util.Buffer ? util._Buffer_from(sizeOrArray) : typeof Uint8Array === "undefined" ? sizeOrArray : new Uint8Array(sizeOrArray);
    };
    util.Array = typeof Uint8Array !== "undefined" ? Uint8Array : Array;
    util.Long = /* istanbul ignore next */
    util.global.dcodeIO && /* istanbul ignore next */
    util.global.dcodeIO.Long || /* istanbul ignore next */
    util.global.Long || util.inquire("long");
    util.key2Re = /^true|false|0|1$/;
    util.key32Re = /^-?(?:0|[1-9][0-9]*)$/;
    util.key64Re = /^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;
    util.longToHash = function longToHash(value) {
      return value ? util.LongBits.from(value).toHash() : util.LongBits.zeroHash;
    };
    util.longFromHash = function longFromHash(hash, unsigned) {
      var bits = util.LongBits.fromHash(hash);
      if (util.Long)
        return util.Long.fromBits(bits.lo, bits.hi, unsigned);
      return bits.toNumber(Boolean(unsigned));
    };
    function merge(dst, src, ifNotSet) {
      for (var keys = Object.keys(src), i = 0; i < keys.length; ++i)
        if (dst[keys[i]] === void 0 || !ifNotSet)
          dst[keys[i]] = src[keys[i]];
      return dst;
    }
    util.merge = merge;
    util.lcFirst = function lcFirst(str) {
      return str.charAt(0).toLowerCase() + str.substring(1);
    };
    function newError(name) {
      function CustomError(message, properties) {
        if (!(this instanceof CustomError))
          return new CustomError(message, properties);
        Object.defineProperty(this, "message", { get: function() {
          return message;
        } });
        if (Error.captureStackTrace)
          Error.captureStackTrace(this, CustomError);
        else
          Object.defineProperty(this, "stack", { value: new Error().stack || "" });
        if (properties)
          merge(this, properties);
      }
      CustomError.prototype = Object.create(Error.prototype, {
        constructor: {
          value: CustomError,
          writable: true,
          enumerable: false,
          configurable: true
        },
        name: {
          get: function get() {
            return name;
          },
          set: void 0,
          enumerable: false,
          // configurable: false would accurately preserve the behavior of
          // the original, but I'm guessing that was not intentional.
          // For an actual error subclass, this property would
          // be configurable.
          configurable: true
        },
        toString: {
          value: function value() {
            return this.name + ": " + this.message;
          },
          writable: true,
          enumerable: false,
          configurable: true
        }
      });
      return CustomError;
    }
    util.newError = newError;
    util.ProtocolError = newError("ProtocolError");
    util.oneOfGetter = function getOneOf(fieldNames) {
      var fieldMap = {};
      for (var i = 0; i < fieldNames.length; ++i)
        fieldMap[fieldNames[i]] = 1;
      return function() {
        for (var keys = Object.keys(this), i2 = keys.length - 1; i2 > -1; --i2)
          if (fieldMap[keys[i2]] === 1 && this[keys[i2]] !== void 0 && this[keys[i2]] !== null)
            return keys[i2];
      };
    };
    util.oneOfSetter = function setOneOf(fieldNames) {
      return function(name) {
        for (var i = 0; i < fieldNames.length; ++i)
          if (fieldNames[i] !== name)
            delete this[fieldNames[i]];
      };
    };
    util.toJSONOptions = {
      longs: String,
      enums: String,
      bytes: String,
      json: true
    };
    util._configure = function() {
      var Buffer = util.Buffer;
      if (!Buffer) {
        util._Buffer_from = util._Buffer_allocUnsafe = null;
        return;
      }
      util._Buffer_from = Buffer.from !== Uint8Array.from && Buffer.from || /* istanbul ignore next */
      function Buffer_from(value, encoding) {
        return new Buffer(value, encoding);
      };
      util._Buffer_allocUnsafe = Buffer.allocUnsafe || /* istanbul ignore next */
      function Buffer_allocUnsafe(size) {
        return new Buffer(size);
      };
    };
  }
});

// node_modules/protobufjs/src/writer.js
var require_writer = __commonJS({
  "node_modules/protobufjs/src/writer.js"(exports2, module2) {
    "use strict";
    module2.exports = Writer;
    var util = require_minimal();
    var BufferWriter;
    var LongBits = util.LongBits;
    var base64 = util.base64;
    var utf8 = util.utf8;
    function Op(fn, len, val) {
      this.fn = fn;
      this.len = len;
      this.next = void 0;
      this.val = val;
    }
    function noop() {
    }
    function State(writer) {
      this.head = writer.head;
      this.tail = writer.tail;
      this.len = writer.len;
      this.next = writer.states;
    }
    function Writer() {
      this.len = 0;
      this.head = new Op(noop, 0, 0);
      this.tail = this.head;
      this.states = null;
    }
    var create = function create2() {
      return util.Buffer ? function create_buffer_setup() {
        return (Writer.create = function create_buffer() {
          return new BufferWriter();
        })();
      } : function create_array() {
        return new Writer();
      };
    };
    Writer.create = create();
    Writer.alloc = function alloc(size) {
      return new util.Array(size);
    };
    if (util.Array !== Array)
      Writer.alloc = util.pool(Writer.alloc, util.Array.prototype.subarray);
    Writer.prototype._push = function push(fn, len, val) {
      this.tail = this.tail.next = new Op(fn, len, val);
      this.len += len;
      return this;
    };
    function writeByte(val, buf, pos) {
      buf[pos] = val & 255;
    }
    function writeVarint32(val, buf, pos) {
      while (val > 127) {
        buf[pos++] = val & 127 | 128;
        val >>>= 7;
      }
      buf[pos] = val;
    }
    function VarintOp(len, val) {
      this.len = len;
      this.next = void 0;
      this.val = val;
    }
    VarintOp.prototype = Object.create(Op.prototype);
    VarintOp.prototype.fn = writeVarint32;
    Writer.prototype.uint32 = function write_uint32(value) {
      this.len += (this.tail = this.tail.next = new VarintOp(
        (value = value >>> 0) < 128 ? 1 : value < 16384 ? 2 : value < 2097152 ? 3 : value < 268435456 ? 4 : 5,
        value
      )).len;
      return this;
    };
    Writer.prototype.int32 = function write_int32(value) {
      return value < 0 ? this._push(writeVarint64, 10, LongBits.fromNumber(value)) : this.uint32(value);
    };
    Writer.prototype.sint32 = function write_sint32(value) {
      return this.uint32((value << 1 ^ value >> 31) >>> 0);
    };
    function writeVarint64(val, buf, pos) {
      while (val.hi) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = (val.lo >>> 7 | val.hi << 25) >>> 0;
        val.hi >>>= 7;
      }
      while (val.lo > 127) {
        buf[pos++] = val.lo & 127 | 128;
        val.lo = val.lo >>> 7;
      }
      buf[pos++] = val.lo;
    }
    Writer.prototype.uint64 = function write_uint64(value) {
      var bits = LongBits.from(value);
      return this._push(writeVarint64, bits.length(), bits);
    };
    Writer.prototype.int64 = Writer.prototype.uint64;
    Writer.prototype.sint64 = function write_sint64(value) {
      var bits = LongBits.from(value).zzEncode();
      return this._push(writeVarint64, bits.length(), bits);
    };
    Writer.prototype.bool = function write_bool(value) {
      return this._push(writeByte, 1, value ? 1 : 0);
    };
    function writeFixed32(val, buf, pos) {
      buf[pos] = val & 255;
      buf[pos + 1] = val >>> 8 & 255;
      buf[pos + 2] = val >>> 16 & 255;
      buf[pos + 3] = val >>> 24;
    }
    Writer.prototype.fixed32 = function write_fixed32(value) {
      return this._push(writeFixed32, 4, value >>> 0);
    };
    Writer.prototype.sfixed32 = Writer.prototype.fixed32;
    Writer.prototype.fixed64 = function write_fixed64(value) {
      var bits = LongBits.from(value);
      return this._push(writeFixed32, 4, bits.lo)._push(writeFixed32, 4, bits.hi);
    };
    Writer.prototype.sfixed64 = Writer.prototype.fixed64;
    Writer.prototype.float = function write_float(value) {
      return this._push(util.float.writeFloatLE, 4, value);
    };
    Writer.prototype.double = function write_double(value) {
      return this._push(util.float.writeDoubleLE, 8, value);
    };
    var writeBytes = util.Array.prototype.set ? function writeBytes_set(val, buf, pos) {
      buf.set(val, pos);
    } : function writeBytes_for(val, buf, pos) {
      for (var i = 0; i < val.length; ++i)
        buf[pos + i] = val[i];
    };
    Writer.prototype.bytes = function write_bytes(value) {
      var len = value.length >>> 0;
      if (!len)
        return this._push(writeByte, 1, 0);
      if (util.isString(value)) {
        var buf = Writer.alloc(len = base64.length(value));
        base64.decode(value, buf, 0);
        value = buf;
      }
      return this.uint32(len)._push(writeBytes, len, value);
    };
    Writer.prototype.string = function write_string(value) {
      var len = utf8.length(value);
      return len ? this.uint32(len)._push(utf8.write, len, value) : this._push(writeByte, 1, 0);
    };
    Writer.prototype.fork = function fork() {
      this.states = new State(this);
      this.head = this.tail = new Op(noop, 0, 0);
      this.len = 0;
      return this;
    };
    Writer.prototype.reset = function reset() {
      if (this.states) {
        this.head = this.states.head;
        this.tail = this.states.tail;
        this.len = this.states.len;
        this.states = this.states.next;
      } else {
        this.head = this.tail = new Op(noop, 0, 0);
        this.len = 0;
      }
      return this;
    };
    Writer.prototype.ldelim = function ldelim() {
      var head = this.head, tail = this.tail, len = this.len;
      this.reset().uint32(len);
      if (len) {
        this.tail.next = head.next;
        this.tail = tail;
        this.len += len;
      }
      return this;
    };
    Writer.prototype.finish = function finish() {
      var head = this.head.next, buf = this.constructor.alloc(this.len), pos = 0;
      while (head) {
        head.fn(head.val, buf, pos);
        pos += head.len;
        head = head.next;
      }
      return buf;
    };
    Writer._configure = function(BufferWriter_) {
      BufferWriter = BufferWriter_;
      Writer.create = create();
      BufferWriter._configure();
    };
  }
});

// node_modules/protobufjs/src/writer_buffer.js
var require_writer_buffer = __commonJS({
  "node_modules/protobufjs/src/writer_buffer.js"(exports2, module2) {
    "use strict";
    module2.exports = BufferWriter;
    var Writer = require_writer();
    (BufferWriter.prototype = Object.create(Writer.prototype)).constructor = BufferWriter;
    var util = require_minimal();
    function BufferWriter() {
      Writer.call(this);
    }
    BufferWriter._configure = function() {
      BufferWriter.alloc = util._Buffer_allocUnsafe;
      BufferWriter.writeBytesBuffer = util.Buffer && util.Buffer.prototype instanceof Uint8Array && util.Buffer.prototype.set.name === "set" ? function writeBytesBuffer_set(val, buf, pos) {
        buf.set(val, pos);
      } : function writeBytesBuffer_copy(val, buf, pos) {
        if (val.copy)
          val.copy(buf, pos, 0, val.length);
        else
          for (var i = 0; i < val.length; )
            buf[pos++] = val[i++];
      };
    };
    BufferWriter.prototype.bytes = function write_bytes_buffer(value) {
      if (util.isString(value))
        value = util._Buffer_from(value, "base64");
      var len = value.length >>> 0;
      this.uint32(len);
      if (len)
        this._push(BufferWriter.writeBytesBuffer, len, value);
      return this;
    };
    function writeStringBuffer(val, buf, pos) {
      if (val.length < 40)
        util.utf8.write(val, buf, pos);
      else if (buf.utf8Write)
        buf.utf8Write(val, pos);
      else
        buf.write(val, pos);
    }
    BufferWriter.prototype.string = function write_string_buffer(value) {
      var len = util.Buffer.byteLength(value);
      this.uint32(len);
      if (len)
        this._push(writeStringBuffer, len, value);
      return this;
    };
    BufferWriter._configure();
  }
});

// node_modules/protobufjs/src/reader.js
var require_reader = __commonJS({
  "node_modules/protobufjs/src/reader.js"(exports2, module2) {
    "use strict";
    module2.exports = Reader;
    var util = require_minimal();
    var BufferReader;
    var LongBits = util.LongBits;
    var utf8 = util.utf8;
    function indexOutOfRange(reader, writeLength) {
      return RangeError("index out of range: " + reader.pos + " + " + (writeLength || 1) + " > " + reader.len);
    }
    function Reader(buffer) {
      this.buf = buffer;
      this.pos = 0;
      this.len = buffer.length;
    }
    var create_array = typeof Uint8Array !== "undefined" ? function create_typed_array(buffer) {
      if (buffer instanceof Uint8Array || Array.isArray(buffer))
        return new Reader(buffer);
      throw Error("illegal buffer");
    } : function create_array2(buffer) {
      if (Array.isArray(buffer))
        return new Reader(buffer);
      throw Error("illegal buffer");
    };
    var create = function create2() {
      return util.Buffer ? function create_buffer_setup(buffer) {
        return (Reader.create = function create_buffer(buffer2) {
          return util.Buffer.isBuffer(buffer2) ? new BufferReader(buffer2) : create_array(buffer2);
        })(buffer);
      } : create_array;
    };
    Reader.create = create();
    Reader.prototype._slice = util.Array.prototype.subarray || /* istanbul ignore next */
    util.Array.prototype.slice;
    Reader.prototype.uint32 = function read_uint32_setup() {
      var value = 4294967295;
      return function read_uint32() {
        value = (this.buf[this.pos] & 127) >>> 0;
        if (this.buf[this.pos++] < 128)
          return value;
        value = (value | (this.buf[this.pos] & 127) << 7) >>> 0;
        if (this.buf[this.pos++] < 128)
          return value;
        value = (value | (this.buf[this.pos] & 127) << 14) >>> 0;
        if (this.buf[this.pos++] < 128)
          return value;
        value = (value | (this.buf[this.pos] & 127) << 21) >>> 0;
        if (this.buf[this.pos++] < 128)
          return value;
        value = (value | (this.buf[this.pos] & 15) << 28) >>> 0;
        if (this.buf[this.pos++] < 128)
          return value;
        if ((this.pos += 5) > this.len) {
          this.pos = this.len;
          throw indexOutOfRange(this, 10);
        }
        return value;
      };
    }();
    Reader.prototype.int32 = function read_int32() {
      return this.uint32() | 0;
    };
    Reader.prototype.sint32 = function read_sint32() {
      var value = this.uint32();
      return value >>> 1 ^ -(value & 1) | 0;
    };
    function readLongVarint() {
      var bits = new LongBits(0, 0);
      var i = 0;
      if (this.len - this.pos > 4) {
        for (; i < 4; ++i) {
          bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
        bits.lo = (bits.lo | (this.buf[this.pos] & 127) << 28) >>> 0;
        bits.hi = (bits.hi | (this.buf[this.pos] & 127) >> 4) >>> 0;
        if (this.buf[this.pos++] < 128)
          return bits;
        i = 0;
      } else {
        for (; i < 3; ++i) {
          if (this.pos >= this.len)
            throw indexOutOfRange(this);
          bits.lo = (bits.lo | (this.buf[this.pos] & 127) << i * 7) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
        bits.lo = (bits.lo | (this.buf[this.pos++] & 127) << i * 7) >>> 0;
        return bits;
      }
      if (this.len - this.pos > 4) {
        for (; i < 5; ++i) {
          bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
      } else {
        for (; i < 5; ++i) {
          if (this.pos >= this.len)
            throw indexOutOfRange(this);
          bits.hi = (bits.hi | (this.buf[this.pos] & 127) << i * 7 + 3) >>> 0;
          if (this.buf[this.pos++] < 128)
            return bits;
        }
      }
      throw Error("invalid varint encoding");
    }
    Reader.prototype.bool = function read_bool() {
      return this.uint32() !== 0;
    };
    function readFixed32_end(buf, end) {
      return (buf[end - 4] | buf[end - 3] << 8 | buf[end - 2] << 16 | buf[end - 1] << 24) >>> 0;
    }
    Reader.prototype.fixed32 = function read_fixed32() {
      if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
      return readFixed32_end(this.buf, this.pos += 4);
    };
    Reader.prototype.sfixed32 = function read_sfixed32() {
      if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
      return readFixed32_end(this.buf, this.pos += 4) | 0;
    };
    function readFixed64() {
      if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 8);
      return new LongBits(readFixed32_end(this.buf, this.pos += 4), readFixed32_end(this.buf, this.pos += 4));
    }
    Reader.prototype.float = function read_float() {
      if (this.pos + 4 > this.len)
        throw indexOutOfRange(this, 4);
      var value = util.float.readFloatLE(this.buf, this.pos);
      this.pos += 4;
      return value;
    };
    Reader.prototype.double = function read_double() {
      if (this.pos + 8 > this.len)
        throw indexOutOfRange(this, 4);
      var value = util.float.readDoubleLE(this.buf, this.pos);
      this.pos += 8;
      return value;
    };
    Reader.prototype.bytes = function read_bytes() {
      var length = this.uint32(), start = this.pos, end = this.pos + length;
      if (end > this.len)
        throw indexOutOfRange(this, length);
      this.pos += length;
      if (Array.isArray(this.buf))
        return this.buf.slice(start, end);
      if (start === end) {
        var nativeBuffer = util.Buffer;
        return nativeBuffer ? nativeBuffer.alloc(0) : new this.buf.constructor(0);
      }
      return this._slice.call(this.buf, start, end);
    };
    Reader.prototype.string = function read_string() {
      var bytes = this.bytes();
      return utf8.read(bytes, 0, bytes.length);
    };
    Reader.prototype.skip = function skip(length) {
      if (typeof length === "number") {
        if (this.pos + length > this.len)
          throw indexOutOfRange(this, length);
        this.pos += length;
      } else {
        do {
          if (this.pos >= this.len)
            throw indexOutOfRange(this);
        } while (this.buf[this.pos++] & 128);
      }
      return this;
    };
    Reader.prototype.skipType = function(wireType) {
      switch (wireType) {
        case 0:
          this.skip();
          break;
        case 1:
          this.skip(8);
          break;
        case 2:
          this.skip(this.uint32());
          break;
        case 3:
          while ((wireType = this.uint32() & 7) !== 4) {
            this.skipType(wireType);
          }
          break;
        case 5:
          this.skip(4);
          break;
        default:
          throw Error("invalid wire type " + wireType + " at offset " + this.pos);
      }
      return this;
    };
    Reader._configure = function(BufferReader_) {
      BufferReader = BufferReader_;
      Reader.create = create();
      BufferReader._configure();
      var fn = util.Long ? "toLong" : (
        /* istanbul ignore next */
        "toNumber"
      );
      util.merge(Reader.prototype, {
        int64: function read_int64() {
          return readLongVarint.call(this)[fn](false);
        },
        uint64: function read_uint64() {
          return readLongVarint.call(this)[fn](true);
        },
        sint64: function read_sint64() {
          return readLongVarint.call(this).zzDecode()[fn](false);
        },
        fixed64: function read_fixed64() {
          return readFixed64.call(this)[fn](true);
        },
        sfixed64: function read_sfixed64() {
          return readFixed64.call(this)[fn](false);
        }
      });
    };
  }
});

// node_modules/protobufjs/src/reader_buffer.js
var require_reader_buffer = __commonJS({
  "node_modules/protobufjs/src/reader_buffer.js"(exports2, module2) {
    "use strict";
    module2.exports = BufferReader;
    var Reader = require_reader();
    (BufferReader.prototype = Object.create(Reader.prototype)).constructor = BufferReader;
    var util = require_minimal();
    function BufferReader(buffer) {
      Reader.call(this, buffer);
    }
    BufferReader._configure = function() {
      if (util.Buffer)
        BufferReader.prototype._slice = util.Buffer.prototype.slice;
    };
    BufferReader.prototype.string = function read_string_buffer() {
      var len = this.uint32();
      return this.buf.utf8Slice ? this.buf.utf8Slice(this.pos, this.pos = Math.min(this.pos + len, this.len)) : this.buf.toString("utf-8", this.pos, this.pos = Math.min(this.pos + len, this.len));
    };
    BufferReader._configure();
  }
});

// node_modules/protobufjs/src/rpc/service.js
var require_service = __commonJS({
  "node_modules/protobufjs/src/rpc/service.js"(exports2, module2) {
    "use strict";
    module2.exports = Service;
    var util = require_minimal();
    (Service.prototype = Object.create(util.EventEmitter.prototype)).constructor = Service;
    function Service(rpcImpl, requestDelimited, responseDelimited) {
      if (typeof rpcImpl !== "function")
        throw TypeError("rpcImpl must be a function");
      util.EventEmitter.call(this);
      this.rpcImpl = rpcImpl;
      this.requestDelimited = Boolean(requestDelimited);
      this.responseDelimited = Boolean(responseDelimited);
    }
    Service.prototype.rpcCall = function rpcCall(method, requestCtor, responseCtor, request, callback) {
      if (!request)
        throw TypeError("request must be specified");
      var self2 = this;
      if (!callback)
        return util.asPromise(rpcCall, self2, method, requestCtor, responseCtor, request);
      if (!self2.rpcImpl) {
        setTimeout(function() {
          callback(Error("already ended"));
        }, 0);
        return void 0;
      }
      try {
        return self2.rpcImpl(
          method,
          requestCtor[self2.requestDelimited ? "encodeDelimited" : "encode"](request).finish(),
          function rpcCallback(err, response) {
            if (err) {
              self2.emit("error", err, method);
              return callback(err);
            }
            if (response === null) {
              self2.end(
                /* endedByRPC */
                true
              );
              return void 0;
            }
            if (!(response instanceof responseCtor)) {
              try {
                response = responseCtor[self2.responseDelimited ? "decodeDelimited" : "decode"](response);
              } catch (err2) {
                self2.emit("error", err2, method);
                return callback(err2);
              }
            }
            self2.emit("data", response, method);
            return callback(null, response);
          }
        );
      } catch (err) {
        self2.emit("error", err, method);
        setTimeout(function() {
          callback(err);
        }, 0);
        return void 0;
      }
    };
    Service.prototype.end = function end(endedByRPC) {
      if (this.rpcImpl) {
        if (!endedByRPC)
          this.rpcImpl(null, null, null);
        this.rpcImpl = null;
        this.emit("end").off();
      }
      return this;
    };
  }
});

// node_modules/protobufjs/src/rpc.js
var require_rpc = __commonJS({
  "node_modules/protobufjs/src/rpc.js"(exports2) {
    "use strict";
    var rpc = exports2;
    rpc.Service = require_service();
  }
});

// node_modules/protobufjs/src/roots.js
var require_roots = __commonJS({
  "node_modules/protobufjs/src/roots.js"(exports2, module2) {
    "use strict";
    module2.exports = {};
  }
});

// node_modules/protobufjs/src/index-minimal.js
var require_index_minimal = __commonJS({
  "node_modules/protobufjs/src/index-minimal.js"(exports2) {
    "use strict";
    var protobuf = exports2;
    protobuf.build = "minimal";
    protobuf.Writer = require_writer();
    protobuf.BufferWriter = require_writer_buffer();
    protobuf.Reader = require_reader();
    protobuf.BufferReader = require_reader_buffer();
    protobuf.util = require_minimal();
    protobuf.rpc = require_rpc();
    protobuf.roots = require_roots();
    protobuf.configure = configure;
    function configure() {
      protobuf.util._configure();
      protobuf.Writer._configure(protobuf.BufferWriter);
      protobuf.Reader._configure(protobuf.BufferReader);
    }
    configure();
  }
});

// node_modules/protobufjs/minimal.js
var require_minimal2 = __commonJS({
  "node_modules/protobufjs/minimal.js"(exports2, module2) {
    "use strict";
    module2.exports = require_index_minimal();
  }
});

// node_modules/zego-express-logger/ZegoExpressLogger.js
var require_ZegoExpressLogger = __commonJS({
  "node_modules/zego-express-logger/ZegoExpressLogger.js"(exports2, module2) {
    ((t, n) => {
      if ("object" == typeof exports2 && "object" == typeof module2)
        module2.exports = n(require_minimal2(), require_umd());
      else if ("function" == typeof define && define.amd)
        define(["protobufjs/minimal", "long"], n);
      else {
        var i, e = "object" == typeof exports2 ? n(require_minimal2(), require_umd()) : n(t["protobufjs/minimal"], t.long);
        for (i in e)
          ("object" == typeof exports2 ? exports2 : t)[i] = e[i];
      }
    })("undefined" != typeof self ? self : exports2, function(i, e) {
      return s = [function(t, n) {
        t.exports = i;
      }, function(t, n) {
        t.exports = e;
      }, function(N, t, n) {
        n.r(t), n.d(t, "ZegoLogger", function() {
          return vs;
        }), n.d(t, "ZegoDataReport", function() {
          return M;
        }), n.d(t, "createZegoWebSocket", function() {
          return F;
        }), n.d(t, "LoggerStateCenter", function() {
          return D;
        });
        i2.getInstance = function() {
          return i2.instance || (i2.instance = new i2()).u(), i2.instance;
        }, i2.prototype.u = function() {
        }, Object.defineProperty(i2.prototype, "testEnvironment", { get: function() {
          return this.h;
        }, set: function(t2) {
          this.h = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "ENV", { get: function() {
          return this.v;
        }, set: function(t2) {
          this.v = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(i2.prototype, "debug", { get: function() {
          return this._;
        }, set: function(t2) {
          this._ = t2;
        }, enumerable: false, configurable: true }), i2.instance = new i2();
        var o2, r2, D = i2;
        function i2() {
          this.h = false, this.v = 0, this._ = false;
        }
        (t = c = c || {})[t.IE = 0] = "IE", t[t.FIREFOX = 1] = "FIREFOX", t[t.CHROME = 2] = "CHROME", t[t.SAFARI = 3] = "SAFARI", t[t.OPERA = 4] = "OPERA", t[t.WEIXIN = 5] = "WEIXIN", t[t.WEIXINMINI = 6] = "WEIXINMINI", t[t.UNKOWN = 7] = "UNKOWN", (c = o2 = o2 || {})[c.BROWSER = 0] = "BROWSER", c[c.WEIXINMINI = 1] = "WEIXINMINI", (t = r2 = r2 || {})[t.DISABLE = 0] = "DISABLE", t[t.WEBSOCKET = 1] = "WEBSOCKET", t[t.HTTPS = 2] = "HTTPS";
        var Z, U, s2 = { DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, REPORT: 99, DISABLE: 100, debug: 0, info: 1, warn: 2, error: 3, report: 99, disable: 100 }, L = (0, 0, 0, (c = Z = Z || {})[c.IPv4Only = 0] = "IPv4Only", c[c.IPv4Prefer = 1] = "IPv4Prefer", c[c.IPv6Prefer = 2] = "IPv6Prefer", (t = U = U || {})[t.offline = 0] = "offline", t[t.online = 1] = "online", P.prototype.init = function() {
          var n2 = this;
          this.g && (this.readyState = 0, this.g.onOpen(function(t2) {
            n2.readyState = n2.g.readyState, "function" == typeof n2.onopen && (n2.onopen(t2), n2.g.onClose(function(t3) {
              n2.readyState = n2.g.readyState, "function" == typeof n2.onclose && n2.onclose(t3);
            }), n2.g.onMessage(function(t3) {
              "function" == typeof n2.onmessage && n2.onmessage(t3);
            }));
          }), this.g.onError(function(t2) {
            n2.readyState = n2.g.readyState, "function" == typeof n2.onerror && n2.onerror(t2);
          }));
        }, P.prototype.onopen = function(t2) {
        }, P.prototype.onerror = function(t2) {
        }, P.prototype.onclose = function(t2) {
        }, P.prototype.onmessage = function(t2) {
        }, P.prototype.send = function(t2) {
          this.g && this.g.send({ data: t2 });
        }, P.prototype.close = function() {
          this.g && this.g.close();
        }, P);
        function P(t2, n2) {
          this.url = t2, this.readyState = 3, this.init();
        }
        function F(t2, n2, i3) {
          return n2 % 2 === o2.BROWSER ? (n2 = t2, (i3 = i3) ? i3.createSocket(n2, 1) : new WebSocket(n2)) : new L(t2);
        }
        var z = function() {
          return (z = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, M = (e2.prototype.newReport = function(t2, n2) {
          this.dataStatistics[t2] = { event_time: Date.now(), time_consumed: 0, seq: t2, error: 0, message: "success", event: n2, events: [] };
        }, e2.prototype.addMsgExt = function(t2, n2) {
          this.dataStatistics[t2] ? this.dataStatistics[t2].msg_ext = n2 : console.warn("".concat(t2, " not exist"));
        }, e2.prototype.addMsgInfo = function(t2, n2) {
          this.dataStatistics[t2] ? Object.assign(this.dataStatistics[t2], n2) : console.warn("".concat(t2, " not exist"));
        }, e2.prototype.eventStart = function(t2, n2) {
          this.dataStatistics[t2] ? null == this.dataStatistics[t2].events ? this.logger.warn("zd.es.0 no events") : this.dataStatistics[t2].events.push({ event: n2, event_time: Date.now(), time_consumed: 0 }) : this.logger.warn("zd.es.0 no seq match");
        }, e2.prototype.eventEnd = function(t2, n2, i3) {
          if (this.dataStatistics[t2]) {
            var e3 = this.dataStatistics[t2].events;
            if (e3 && 0 !== e3.length) {
              for (var r3 = e3.length - 1; 0 <= r3; r3--)
                if (e3[r3].event == n2 && 0 == e3[r3].time_consumed) {
                  e3[r3].time_consumed = Date.now() - e3[r3].event_time;
                  break;
                }
            } else
              this.logger.info("zd.ee.0 no events");
          } else
            this.logger.info("zd.ee.0 no seq match");
        }, e2.prototype.eventEndWithMsg = function(t2, n2, i3) {
          if (this.dataStatistics[t2]) {
            var e3 = this.dataStatistics[t2].events;
            if (e3) {
              for (var r3 = e3.length - 1; 0 <= r3; r3--)
                if (e3[r3].event == n2 && 0 == e3[r3].time_consumed) {
                  e3[r3].time_consumed = Date.now() - e3[r3].event_time, null == e3[r3].msg_ext && (e3[r3].msg_ext = {}), e3[r3].msg_ext = z({}, i3);
                  break;
                }
            } else
              this.logger.warn("zd.ee.0 no events");
          } else
            this.logger.warn("zd.ee.0 no seq match");
        }, e2.prototype.eventEndWithMsgInfo = function(t2, n2, i3) {
          if (this.dataStatistics[t2]) {
            var e3 = this.dataStatistics[t2].events;
            if (e3) {
              for (var r3 = e3.length - 1; 0 <= r3; r3--)
                if (e3[r3].event == n2 && 0 == e3[r3].time_consumed) {
                  e3[r3].time_consumed = Date.now() - e3[r3].event_time, Object.assign(e3[r3], i3);
                  break;
                }
            } else
              this.logger.warn("zd.ee.0 no events");
          } else
            this.logger.warn("zd.ee.0 no seq match");
        }, e2.prototype.addEventInfo = function(t2, n2, i3, e3) {
          if (this.dataStatistics[t2]) {
            var r3 = this.dataStatistics[t2].events;
            if (null == r3)
              this.logger.warn("zd.aei.0 no events");
            else
              for (var s3 = r3.length - 1; 0 <= s3; s3--)
                if (r3[s3].event == n2 && null != r3[s3].time_consumed) {
                  null == r3[s3].msg_ext ? r3[s3].msg_ext = {} : r3[s3].msg_ext && (r3[s3].msg_ext[i3] = e3);
                  break;
                }
          } else
            this.logger.warn("zd.aei.0 no seq match");
        }, e2.prototype.addEventMsg = function(t2, n2, i3, e3) {
          if (this.dataStatistics[t2]) {
            var r3 = this.dataStatistics[t2].events;
            if (null == r3)
              this.logger.warn("zd.aem.0 no events");
            else
              for (var s3 = r3.length - 1; 0 <= s3; s3--)
                if (r3[s3].event == n2) {
                  r3[s3][i3] = e3;
                  break;
                }
          } else
            this.logger.warn("zd.aem.0 no seq match");
        }, e2.prototype.addEvent = function(t2, n2, i3) {
          this.dataStatistics[t2] ? this.dataStatistics[t2].events && (i3 ? this.dataStatistics[t2].events.push({ event: n2, event_time: Date.now(), msg_ext: i3 }) : this.dataStatistics[t2].events.push({ event: n2, event_time: Date.now() })) : this.logger.warn("zd.ae.0 no seq match");
        }, e2.prototype.uploadReport = function(t2, n2, i3, e3) {
          var r3 = this.dataStatistics[t2];
          null != r3 && (n2 && (r3.event = n2), r3.time_consumed = Date.now() - r3.event_time, i3 && this.addMsgInfo(t2, { error: i3.code, message: i3.message || i3.msg + " " + (e3 || "") }), this.logger.report(r3), delete this.dataStatistics[t2]);
        }, e2);
        function e2(t2) {
          this.dataStatistics = {}, this.logger = t2;
        }
        var B, C = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"];
        function H() {
          var t2 = /* @__PURE__ */ new Date();
          return [t2.getFullYear() + "/", (C[t2.getMonth() + 1] || t2.getMonth() + 1) + "/", (C[t2.getDate()] || t2.getDate()) + " ", (C[t2.getHours()] || t2.getHours()) + ":", (C[t2.getMinutes()] || t2.getMinutes()) + ":", C[t2.getSeconds()] || t2.getSeconds(), "." + ("" + t2.getTime()).slice(-3)].join("");
        }
        (c = B = B || {}).WEBSOCKET_STATE_CHANGE = "zl.net.wsc", c.OPEN_WS = "zl.net.opws";
        var a = n(0), t = n(1);
        (a = a.default || a).util.Long = t.default || t, a.util.Long.fromBits = a.util.Long.fromBits || function() {
          return 0;
        };
        for (var l = a.roots, q = a.types ? a.types.basic : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0, string: 2, bytes: 2 }, J = a.types ? a.types.packed : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0 }, K = Object.keys(q), Y = { $: function(t2) {
          return Y[t2] ? Y[t2].call(this) : l[t2].decode ? l[t2].decode(this, this.uint32()) : Y.$.call(this, "int32");
        } }, Q = { $: function(t2, n2, i3) {
          var e3 = q[t2];
          return void 0 === e3 ? l[t2].encode ? (this.uint32((i3 << 3 | 2) >> 0).fork(), l[t2].encode(n2, this).ldelim()) : Q.$.call(this, "int32", n2, i3) : Q[t2].call(this.uint32(i3 << 3 | e3), n2);
        } }, V = 0; V < K.length; V++)
          Y[K[V]] = a.Reader.prototype[K[V]], Q[K[V]] = a.Writer.prototype[K[V]];
        !function s3(t2, o3, n2, i3) {
          for (var e3 = 0, r3 = Object.keys(t2); e3 < r3.length; e3++) {
            var u2 = r3[e3];
            if (t2[u2].$m && Object.keys(t2[u2].$m).every(function(t3) {
              return Number(t3);
            })) {
              if (n2[u2])
                throw Error(`nested type ${n2}.${u2} has already exist`);
              n2[u2] = ((f2, t3) => {
                function h2(t4) {
                  for (var n4 in f2) {
                    n4 = f2[n4];
                    "{" === n4[1].charAt(0) ? this[n4[0]] = {} : "[" !== n4[1].charAt(0) && "<" !== n4[1].charAt(0) || (this[n4[0]] = []);
                  }
                  if (t4)
                    for (var i5 = Object.keys(t4), e5 = 0; e5 < i5.length; ++e5)
                      null != t4[i5[e5]] && (this[i5[e5]] = t4[i5[e5]]);
                }
                var n3, i4 = {};
                for (n3 in f2) {
                  var e4 = f2[n3], r4 = e4[1];
                  "{" === r4.charAt(0) ? (h2.prototype[e4[0]] = a.util.emptyObject, i4[r4] = { $m: r4.substring(1).split(",").map(function(t4, n4) {
                    return ["$" + (n4 + 1), t4, null];
                  }).reduce(function(t4, n4, i5) {
                    return t4[i5 + 1] = n4, t4;
                  }, {}) }) : "[" === r4.charAt(0) || "<" === r4.charAt(0) ? h2.prototype[e4[0]] = a.util.emptyArray : "bytes" === r4 ? h2.prototype[e4[0]] = a.util.newBuffer([]) : e4[2] && e4[2].hasOwnProperty("low") && e4[2].hasOwnProperty("high") ? h2.prototype[e4[0]] = a.util.Long.fromBits(e4[2].low, e4[2].high, e4[2].unsigned) : h2.prototype[e4[0]] = e4[2];
                }
                return h2.create = function(t4) {
                  return new h2(t4);
                }, h2.decode = function(t4, n4) {
                  t4 instanceof a.Reader || (t4 = a.Reader.create(t4));
                  for (var i5 = void 0 === n4 ? t4.len : t4.pos + n4, e5 = new h2(); t4.pos < i5; ) {
                    var r5 = t4.uint32(), s4 = r5 >>> 3;
                    if (0 < s4 && f2[s4]) {
                      var o4 = f2[s4][0];
                      if ("{" === (u3 = f2[s4][1]).charAt(0)) {
                        e5[o4] === a.util.emptyObject && (e5[o4] = {});
                        s4 = h2.$namespace[u3].decode(t4, t4.uint32());
                        e5[o4][s4.$1] = s4.$2;
                      } else if ("[" === u3.charAt(0) || "<" === u3.charAt(0)) {
                        u3 = u3.substring(1), e5[o4] && e5[o4].length || (e5[o4] = []);
                        var u3, s4 = !Y[u3] && !l[u3].decode;
                        if (void 0 !== J[u3 = s4 ? "int32" : u3] && 2 == (7 & r5))
                          for (var c2 = t4.uint32() + t4.pos; t4.pos < c2; )
                            e5[o4].push(Y.$.call(t4, u3));
                        else
                          e5[o4].push(Y.$.call(t4, u3));
                      } else
                        e5[o4] = Y.$.call(t4, u3);
                    } else
                      t4.skipType(7 & r5);
                  }
                  return e5;
                }, h2.encode = function(t4, n4) {
                  for (var i5 in n4 = n4 || a.Writer.create(), f2) {
                    var e5 = f2[i5][0];
                    if ("{" === (c2 = f2[i5][1]).charAt(0)) {
                      if (null != t4[e5] && t4.hasOwnProperty(e5))
                        for (var r5 = 0, s4 = Object.keys(t4[e5]); r5 < s4.length; ++r5)
                          n4.uint32((i5 << 3 | 2) >> 0).fork(), h2.$namespace[c2].encode({ $1: s4[r5], $2: t4[e5][s4[r5]] }, n4).ldelim();
                    } else if ("[" === c2.charAt(0) || "<" === c2.charAt(0)) {
                      var o4 = "<" === c2.charAt(0), u3 = (c2 = c2.substring(1), t4[e5]);
                      if (null != u3 && u3.length) {
                        var c2 = void 0 === q[c2] && !l[c2].encode ? "int32" : c2;
                        if (o4 && void 0 !== J[c2]) {
                          n4.uint32((i5 << 3 | 2) >> 0).fork();
                          for (r5 = 0; r5 < u3.length; r5++)
                            Q[c2].call(n4, u3[r5]);
                          n4.ldelim();
                        } else
                          for (r5 = 0; r5 < u3.length; r5++)
                            Q.$.call(n4, c2, u3[r5], i5);
                      }
                    } else
                      null != t4[e5] && t4.hasOwnProperty(e5) && Q.$.call(n4, c2, t4[e5], i5);
                  }
                  return n4;
                }, Object.keys(i4).length && (h2.$namespace = s3(i4, o3 + "." + t3, h2.$namespace || {}, true)), h2;
              })(t2[u2].$m, u2);
            } else
              t2[u2].$s ? n2[u2] = ((n3, r4) => {
                function s4(t3, n4, i4) {
                  a.rpc.Service.call(this, t3, n4, i4);
                }
                return ((s4.prototype = Object.create(a.rpc.Service.prototype)).constructor = s4).create = function(t3, n4, i4) {
                  return new s4(t3, n4, i4);
                }, Object.keys(n3).forEach(function(t3) {
                  var i4 = n3[t3];
                  function e4(t4, n4) {
                    return this.rpcCall(e4, l[i4[0]], l[i4[1]], t4, n4);
                  }
                  Object.defineProperty(e4, "name", { value: t3 }), Object.defineProperty(e4, "path", { value: o3 + "." + r4 }), s4.prototype[t3] = e4;
                }), s4;
              })(t2[u2].$s, u2) : t2[u2].$e && Object.values(t2[u2].$e).every(function(t3) {
                return Number(t3) === t3;
              }) && (n2[u2] = ((t3) => {
                for (var n3 = Object.keys(t3), i4 = {}, e4 = 0; e4 < n3.length; e4++)
                  i4[i4[n3[e4]] = t3[n3[e4]]] = n3[e4];
                return i4;
              })(t2[u2].$e));
            n2[u2] && !i3 && (l[o3 + "." + u2] = n2[u2]), delete t2[u2].$m, delete t2[u2].$s, delete t2[u2].$e, n2[u2] = s3(t2[u2], Boolean(o3) ? o3 + "." + u2 : u2, n2[u2] || {});
          }
          return n2;
        }({ report: { rtcreport: { DetailLogRequest: { $m: { 1: ["appid", "uint32", 0], 2: ["product", "uint32", 0], 3: ["id_name", "string", ""], 4: ["timestamp", "uint64", { low: 0, high: 0, unsigned: true }], 5: ["litesign", "string", ""], 6: ["detail_data", "bytes", []] } }, DetailLogResponse: { $m: { 1: ["code", "uint32", 0] } } } } }, "", l, false);
        var tt = l.report;
        let nt = 0, it = 1;
        function et(t2) {
          let n2 = t2.length;
          for (; 0 <= --n2; )
            t2[n2] = 0;
        }
        let rt = 29, st = 256, ot = st + 1 + rt, ut = 30, ct = 19, ft = 2 * ot + 1, ht = 15, at = 16, lt = 7, vt = 256, dt = 16, wt = 17, bt = 18, yt = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0]), mt = new Uint8Array([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13]), _t = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 2, 3, 7]), gt = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
        let u = new Array(2 * (ot + 2)), pt = (et(u), new Array(2 * ut)), Ot = (et(pt), new Array(512)), St = (et(Ot), new Array(256)), kt = (et(St), new Array(rt)), Et = (et(kt), new Array(ut));
        function At(t2, n2, i3, e3, r3) {
          this.static_tree = t2, this.extra_bits = n2, this.extra_base = i3, this.elems = e3, this.max_length = r3, this.has_stree = t2 && t2.length;
        }
        et(Et);
        let jt, Tt, xt;
        function Rt(t2, n2) {
          this.dyn_tree = t2, this.max_code = 0, this.stat_desc = n2;
        }
        let It = (t2) => t2 < 256 ? Ot[t2] : Ot[256 + (t2 >>> 7)], Nt = (t2, n2) => {
          t2.pending_buf[t2.pending++] = 255 & n2, t2.pending_buf[t2.pending++] = n2 >>> 8 & 255;
        }, h = (t2, n2, i3) => {
          t2.bi_valid > at - i3 ? (t2.bi_buf |= n2 << t2.bi_valid & 65535, Nt(t2, t2.bi_buf), t2.bi_buf = n2 >> at - t2.bi_valid, t2.bi_valid += i3 - at) : (t2.bi_buf |= n2 << t2.bi_valid & 65535, t2.bi_valid += i3);
        }, v = (t2, n2, i3) => {
          h(t2, i3[2 * n2], i3[2 * n2 + 1]);
        }, Dt = (t2, n2) => {
          let i3 = 0;
          for (; i3 |= 1 & t2, t2 >>>= 1, i3 <<= 1, 0 < --n2; )
            ;
          return i3 >>> 1;
        }, Zt = (t2, n2) => {
          var i3, e3 = n2.dyn_tree, r3 = n2.max_code, s3 = n2.stat_desc.static_tree, o3 = n2.stat_desc.has_stree, u2 = n2.stat_desc.extra_bits, c2 = n2.stat_desc.extra_base, f2 = n2.stat_desc.max_length;
          let h2, a2, l2, v2, d2, w2 = 0;
          for (v2 = 0; v2 <= ht; v2++)
            t2.bl_count[v2] = 0;
          for (e3[2 * t2.heap[t2.heap_max] + 1] = 0, h2 = t2.heap_max + 1; h2 < ft; h2++)
            a2 = t2.heap[h2], (v2 = e3[2 * e3[2 * a2 + 1] + 1] + 1) > f2 && (v2 = f2, w2++), e3[2 * a2 + 1] = v2, a2 > r3 || (t2.bl_count[v2]++, d2 = 0, a2 >= c2 && (d2 = u2[a2 - c2]), i3 = e3[2 * a2], t2.opt_len += i3 * (v2 + d2), o3 && (t2.static_len += i3 * (s3[2 * a2 + 1] + d2)));
          if (0 !== w2) {
            do {
              for (v2 = f2 - 1; 0 === t2.bl_count[v2]; )
                v2--;
            } while (t2.bl_count[v2]--, t2.bl_count[v2 + 1] += 2, t2.bl_count[f2]--, 0 < (w2 -= 2));
            for (v2 = f2; 0 !== v2; v2--)
              for (a2 = t2.bl_count[v2]; 0 !== a2; )
                r3 < (l2 = t2.heap[--h2]) || (e3[2 * l2 + 1] !== v2 && (t2.opt_len += (v2 - e3[2 * l2 + 1]) * e3[2 * l2], e3[2 * l2 + 1] = v2), a2--);
          }
        }, Ut = (t2, n2, i3) => {
          var e3 = new Array(ht + 1);
          let r3 = 0, s3, o3;
          for (s3 = 1; s3 <= ht; s3++)
            r3 = r3 + i3[s3 - 1] << 1, e3[s3] = r3;
          for (o3 = 0; o3 <= n2; o3++) {
            var u2 = t2[2 * o3 + 1];
            0 !== u2 && (t2[2 * o3] = Dt(e3[u2]++, u2));
          }
        }, Lt = (t2) => {
          let n2;
          for (n2 = 0; n2 < ot; n2++)
            t2.dyn_ltree[2 * n2] = 0;
          for (n2 = 0; n2 < ut; n2++)
            t2.dyn_dtree[2 * n2] = 0;
          for (n2 = 0; n2 < ct; n2++)
            t2.bl_tree[2 * n2] = 0;
          t2.dyn_ltree[2 * vt] = 1, t2.opt_len = t2.static_len = 0, t2.sym_next = t2.matches = 0;
        }, Pt = (t2) => {
          8 < t2.bi_valid ? Nt(t2, t2.bi_buf) : 0 < t2.bi_valid && (t2.pending_buf[t2.pending++] = t2.bi_buf), t2.bi_buf = 0, t2.bi_valid = 0;
        }, Ft = (t2, n2, i3, e3) => {
          var r3 = 2 * n2, s3 = 2 * i3;
          return t2[r3] < t2[s3] || t2[r3] === t2[s3] && e3[n2] <= e3[i3];
        }, zt = (t2, n2, i3) => {
          var e3 = t2.heap[i3];
          let r3 = i3 << 1;
          for (; r3 <= t2.heap_len && (r3 < t2.heap_len && Ft(n2, t2.heap[r3 + 1], t2.heap[r3], t2.depth) && r3++, !Ft(n2, e3, t2.heap[r3], t2.depth)); )
            t2.heap[i3] = t2.heap[r3], i3 = r3, r3 <<= 1;
          t2.heap[i3] = e3;
        }, Mt = (t2, n2, i3) => {
          var e3, r3, s3, o3;
          let u2 = 0;
          if (0 !== t2.sym_next)
            for (; e3 = 255 & t2.pending_buf[t2.sym_buf + u2++], e3 += (255 & t2.pending_buf[t2.sym_buf + u2++]) << 8, r3 = t2.pending_buf[t2.sym_buf + u2++], 0 == e3 ? v(t2, r3, n2) : (s3 = St[r3], v(t2, s3 + st + 1, n2), 0 !== (o3 = yt[s3]) && (r3 -= kt[s3], h(t2, r3, o3)), e3--, s3 = It(e3), v(t2, s3, i3), 0 !== (o3 = mt[s3]) && (e3 -= Et[s3], h(t2, e3, o3))), u2 < t2.sym_next; )
              ;
          v(t2, vt, n2);
        }, Bt = (t2, n2) => {
          var i3 = n2.dyn_tree, e3 = n2.stat_desc.static_tree, r3 = n2.stat_desc.has_stree, s3 = n2.stat_desc.elems;
          let o3, u2, c2 = -1, f2;
          for (t2.heap_len = 0, t2.heap_max = ft, o3 = 0; o3 < s3; o3++)
            0 !== i3[2 * o3] ? (t2.heap[++t2.heap_len] = c2 = o3, t2.depth[o3] = 0) : i3[2 * o3 + 1] = 0;
          for (; t2.heap_len < 2; )
            i3[2 * (f2 = t2.heap[++t2.heap_len] = c2 < 2 ? ++c2 : 0)] = 1, t2.depth[f2] = 0, t2.opt_len--, r3 && (t2.static_len -= e3[2 * f2 + 1]);
          for (n2.max_code = c2, o3 = t2.heap_len >> 1; 1 <= o3; o3--)
            zt(t2, i3, o3);
          for (f2 = s3; o3 = t2.heap[1], t2.heap[1] = t2.heap[t2.heap_len--], zt(t2, i3, 1), u2 = t2.heap[1], t2.heap[--t2.heap_max] = o3, t2.heap[--t2.heap_max] = u2, i3[2 * f2] = i3[2 * o3] + i3[2 * u2], t2.depth[f2] = (t2.depth[o3] >= t2.depth[u2] ? t2.depth[o3] : t2.depth[u2]) + 1, i3[2 * o3 + 1] = i3[2 * u2 + 1] = f2, t2.heap[1] = f2++, zt(t2, i3, 1), 2 <= t2.heap_len; )
            ;
          t2.heap[--t2.heap_max] = t2.heap[1], Zt(t2, n2), Ut(i3, c2, t2.bl_count);
        }, Ct = (t2, n2, i3) => {
          let e3, r3 = -1;
          var s3;
          let o3 = n2[1], u2 = 0, c2 = 7, f2 = 4;
          for (0 === o3 && (c2 = 138, f2 = 3), n2[2 * (i3 + 1) + 1] = 65535, e3 = 0; e3 <= i3; e3++)
            s3 = o3, o3 = n2[2 * (e3 + 1) + 1], ++u2 < c2 && s3 === o3 || (u2 < f2 ? t2.bl_tree[2 * s3] += u2 : 0 !== s3 ? (s3 !== r3 && t2.bl_tree[2 * s3]++, t2.bl_tree[2 * dt]++) : u2 <= 10 ? t2.bl_tree[2 * wt]++ : t2.bl_tree[2 * bt]++, u2 = 0, r3 = s3, f2 = 0 === o3 ? (c2 = 138, 3) : s3 === o3 ? (c2 = 6, 3) : (c2 = 7, 4));
        }, Ht = (t2, n2, i3) => {
          let e3, r3 = -1;
          var s3;
          let o3 = n2[1], u2 = 0, c2 = 7, f2 = 4;
          for (0 === o3 && (c2 = 138, f2 = 3), e3 = 0; e3 <= i3; e3++)
            if (s3 = o3, o3 = n2[2 * (e3 + 1) + 1], !(++u2 < c2 && s3 === o3)) {
              if (u2 < f2)
                for (; v(t2, s3, t2.bl_tree), 0 != --u2; )
                  ;
              else
                0 !== s3 ? (s3 !== r3 && (v(t2, s3, t2.bl_tree), u2--), v(t2, dt, t2.bl_tree), h(t2, u2 - 3, 2)) : u2 <= 10 ? (v(t2, wt, t2.bl_tree), h(t2, u2 - 3, 3)) : (v(t2, bt, t2.bl_tree), h(t2, u2 - 11, 7));
              u2 = 0, r3 = s3, f2 = 0 === o3 ? (c2 = 138, 3) : s3 === o3 ? (c2 = 6, 3) : (c2 = 7, 4);
            }
        }, qt = false;
        let Jt = (t2, n2, i3, e3) => {
          h(t2, 0 + (e3 ? 1 : 0), 3), Pt(t2), Nt(t2, i3), Nt(t2, ~i3), i3 && t2.pending_buf.set(t2.window.subarray(n2, n2 + i3), t2.pending), t2.pending += i3;
        };
        var c = { O: (t2) => {
          qt || ((() => {
            let t3, n2, i3, e3, r3;
            var s3 = new Array(ht + 1);
            for (i3 = 0, e3 = 0; e3 < rt - 1; e3++)
              for (kt[e3] = i3, t3 = 0; t3 < 1 << yt[e3]; t3++)
                St[i3++] = e3;
            for (St[i3 - 1] = e3, r3 = 0, e3 = 0; e3 < 16; e3++)
              for (Et[e3] = r3, t3 = 0; t3 < 1 << mt[e3]; t3++)
                Ot[r3++] = e3;
            for (r3 >>= 7; e3 < ut; e3++)
              for (Et[e3] = r3 << 7, t3 = 0; t3 < 1 << mt[e3] - 7; t3++)
                Ot[256 + r3++] = e3;
            for (n2 = 0; n2 <= ht; n2++)
              s3[n2] = 0;
            for (t3 = 0; t3 <= 143; )
              u[2 * t3 + 1] = 8, t3++, s3[8]++;
            for (; t3 <= 255; )
              u[2 * t3 + 1] = 9, t3++, s3[9]++;
            for (; t3 <= 279; )
              u[2 * t3 + 1] = 7, t3++, s3[7]++;
            for (; t3 <= 287; )
              u[2 * t3 + 1] = 8, t3++, s3[8]++;
            for (Ut(u, ot + 1, s3), t3 = 0; t3 < ut; t3++)
              pt[2 * t3 + 1] = 5, pt[2 * t3] = Dt(t3, 5);
            jt = new At(u, yt, st + 1, ot, ht), Tt = new At(pt, mt, 0, ut, ht), xt = new At(new Array(0), _t, 0, ct, lt);
          })(), qt = true), t2.l_desc = new Rt(t2.dyn_ltree, jt), t2.d_desc = new Rt(t2.dyn_dtree, Tt), t2.bl_desc = new Rt(t2.bl_tree, xt), t2.bi_buf = 0, t2.bi_valid = 0, Lt(t2);
        }, S: Jt, k: (t2, n2, i3, e3) => {
          let r3, s3, o3 = 0;
          0 < t2.level ? (2 === t2.strm.data_type && (t2.strm.data_type = ((t3) => {
            let n3 = 4093624447, i4;
            for (i4 = 0; i4 <= 31; i4++, n3 >>>= 1)
              if (1 & n3 && 0 !== t3.dyn_ltree[2 * i4])
                return nt;
            if (0 !== t3.dyn_ltree[18] || 0 !== t3.dyn_ltree[20] || 0 !== t3.dyn_ltree[26])
              return it;
            for (i4 = 32; i4 < st; i4++)
              if (0 !== t3.dyn_ltree[2 * i4])
                return it;
            return nt;
          })(t2)), Bt(t2, t2.l_desc), Bt(t2, t2.d_desc), o3 = ((t3) => {
            let n3;
            for (Ct(t3, t3.dyn_ltree, t3.l_desc.max_code), Ct(t3, t3.dyn_dtree, t3.d_desc.max_code), Bt(t3, t3.bl_desc), n3 = ct - 1; 3 <= n3 && 0 === t3.bl_tree[2 * gt[n3] + 1]; n3--)
              ;
            return t3.opt_len += 3 * (n3 + 1) + 5 + 5 + 4, n3;
          })(t2), r3 = t2.opt_len + 3 + 7 >>> 3, (s3 = t2.static_len + 3 + 7 >>> 3) <= r3 && (r3 = s3)) : r3 = s3 = i3 + 5, i3 + 4 <= r3 && -1 !== n2 ? Jt(t2, n2, i3, e3) : 4 === t2.strategy || s3 === r3 ? (h(t2, 2 + (e3 ? 1 : 0), 3), Mt(t2, u, pt)) : (h(t2, 4 + (e3 ? 1 : 0), 3), ((t3, n3, i4, e4) => {
            let r4;
            for (h(t3, n3 - 257, 5), h(t3, i4 - 1, 5), h(t3, e4 - 4, 4), r4 = 0; r4 < e4; r4++)
              h(t3, t3.bl_tree[2 * gt[r4] + 1], 3);
            Ht(t3, t3.dyn_ltree, n3 - 1), Ht(t3, t3.dyn_dtree, i4 - 1);
          })(t2, t2.l_desc.max_code + 1, t2.d_desc.max_code + 1, o3 + 1), Mt(t2, t2.dyn_ltree, t2.dyn_dtree)), Lt(t2), e3 && Pt(t2);
        }, A: (t2, n2, i3) => (t2.pending_buf[t2.sym_buf + t2.sym_next++] = n2, t2.pending_buf[t2.sym_buf + t2.sym_next++] = n2 >> 8, t2.pending_buf[t2.sym_buf + t2.sym_next++] = i3, 0 === n2 ? t2.dyn_ltree[2 * i3]++ : (t2.matches++, n2--, t2.dyn_ltree[2 * (St[i3] + st + 1)]++, t2.dyn_dtree[2 * It(n2)]++), t2.sym_next === t2.sym_end), j: (t2) => {
          h(t2, 2, 3), v(t2, vt, u), 16 === (t2 = t2).bi_valid ? (Nt(t2, t2.bi_buf), t2.bi_buf = 0, t2.bi_valid = 0) : 8 <= t2.bi_valid && (t2.pending_buf[t2.pending++] = 255 & t2.bi_buf, t2.bi_buf >>= 8, t2.bi_valid -= 8);
        } }, Kt = (t2, n2, i3, e3) => {
          let r3 = 65535 & t2 | 0, s3 = t2 >>> 16 & 65535 | 0, o3 = 0;
          for (; 0 !== i3; ) {
            for (i3 -= o3 = 2e3 < i3 ? 2e3 : i3; r3 = r3 + n2[e3++] | 0, s3 = s3 + r3 | 0, --o3; )
              ;
            r3 %= 65521, s3 %= 65521;
          }
          return r3 | s3 << 16 | 0;
        };
        let Gt = new Uint32Array((() => {
          let t2, n2 = [];
          for (var i3 = 0; i3 < 256; i3++) {
            t2 = i3;
            for (var e3 = 0; e3 < 8; e3++)
              t2 = 1 & t2 ? 3988292384 ^ t2 >>> 1 : t2 >>> 1;
            n2[i3] = t2;
          }
          return n2;
        })());
        var G = (n2, i3, t2, e3) => {
          var r3 = Gt, s3 = e3 + t2;
          n2 ^= -1;
          for (let t3 = e3; t3 < s3; t3++)
            n2 = n2 >>> 8 ^ r3[255 & (n2 ^ i3[t3])];
          return -1 ^ n2;
        }, Wt = { 2: "need dictionary", 1: "stream end", 0: "", "-1": "file error", "-2": "stream error", "-3": "data error", "-4": "insufficient memory", "-5": "buffer error", "-6": "incompatible version" }, n = { Z_NO_FLUSH: 0, Z_PARTIAL_FLUSH: 1, Z_SYNC_FLUSH: 2, Z_FULL_FLUSH: 3, Z_FINISH: 4, Z_BLOCK: 5, Z_TREES: 6, Z_OK: 0, Z_STREAM_END: 1, Z_NEED_DICT: 2, Z_ERRNO: -1, Z_STREAM_ERROR: -2, Z_DATA_ERROR: -3, Z_MEM_ERROR: -4, Z_BUF_ERROR: -5, Z_NO_COMPRESSION: 0, Z_BEST_SPEED: 1, Z_BEST_COMPRESSION: 9, Z_DEFAULT_COMPRESSION: -1, Z_FILTERED: 1, Z_HUFFMAN_ONLY: 2, Z_RLE: 3, Z_FIXED: 4, Z_DEFAULT_STRATEGY: 0, Z_BINARY: 0, Z_TEXT: 1, Z_UNKNOWN: 2, Z_DEFLATED: 8 };
        let { O: Xt, S: $t, k: Yt, A: Qt, j: Vt } = c, { Z_NO_FLUSH: tn, Z_PARTIAL_FLUSH: nn, Z_FULL_FLUSH: en, Z_FINISH: f, Z_BLOCK: rn, Z_OK: d, Z_STREAM_END: sn, Z_STREAM_ERROR: w, Z_DATA_ERROR: on, Z_BUF_ERROR: un, Z_DEFAULT_COMPRESSION: cn, Z_FILTERED: fn, Z_HUFFMAN_ONLY: hn, Z_RLE: an, Z_FIXED: ln, Z_DEFAULT_STRATEGY: vn, Z_UNKNOWN: dn, Z_DEFLATED: wn } = n, bn = 9;
        let yn = 286, mn = 30, _n = 19, gn = 2 * yn + 1, pn = 15, b = 3, On = 258, y = On + b + 1, Sn = 42, kn = 57, En = 69, An = 73, jn = 91, Tn = 103, xn = 113, Rn = 666, m = 1, In = 2, Nn = 3, Dn = 4, Zn = (t2, n2) => (t2.msg = Wt[n2], n2), Un = (t2) => 2 * t2 - (4 < t2 ? 9 : 0), Ln = (t2) => {
          let n2 = t2.length;
          for (; 0 <= --n2; )
            t2[n2] = 0;
        }, Pn = (t2) => {
          let n2, i3, e3;
          var r3 = t2.w_size;
          for (n2 = t2.hash_size, e3 = n2; i3 = t2.head[--e3], t2.head[e3] = i3 >= r3 ? i3 - r3 : 0, --n2; )
            ;
          for (n2 = r3, e3 = n2; i3 = t2.prev[--e3], t2.prev[e3] = i3 >= r3 ? i3 - r3 : 0, --n2; )
            ;
        };
        let Fn = (t2, n2, i3) => (n2 << t2.hash_shift ^ i3) & t2.hash_mask, _ = (t2) => {
          var n2 = t2.state;
          let i3 = n2.pending;
          0 !== (i3 = i3 > t2.avail_out ? t2.avail_out : i3) && (t2.output.set(n2.pending_buf.subarray(n2.pending_out, n2.pending_out + i3), t2.next_out), t2.next_out += i3, n2.pending_out += i3, t2.total_out += i3, t2.avail_out -= i3, n2.pending -= i3, 0 === n2.pending) && (n2.pending_out = 0);
        }, g = (t2, n2) => {
          Yt(t2, 0 <= t2.block_start ? t2.block_start : -1, t2.strstart - t2.block_start, n2), t2.block_start = t2.strstart, _(t2.strm);
        }, p = (t2, n2) => {
          t2.pending_buf[t2.pending++] = n2;
        }, zn = (t2, n2) => {
          t2.pending_buf[t2.pending++] = n2 >>> 8 & 255, t2.pending_buf[t2.pending++] = 255 & n2;
        }, Mn = (t2, n2, i3, e3) => {
          let r3 = t2.avail_in;
          return 0 === (r3 = r3 > e3 ? e3 : r3) ? 0 : (t2.avail_in -= r3, n2.set(t2.input.subarray(t2.next_in, t2.next_in + r3), i3), 1 === t2.state.wrap ? t2.adler = Kt(t2.adler, n2, r3, i3) : 2 === t2.state.wrap && (t2.adler = G(t2.adler, n2, r3, i3)), t2.next_in += r3, t2.total_in += r3, r3);
        }, Bn = (t2, n2) => {
          let i3 = t2.max_chain_length, e3 = t2.strstart, r3;
          var s3;
          let o3 = t2.prev_length, u2 = t2.nice_match;
          var c2 = t2.strstart > t2.w_size - y ? t2.strstart - (t2.w_size - y) : 0, f2 = t2.window, h2 = t2.w_mask, a2 = t2.prev, l2 = t2.strstart + On;
          let v2 = f2[e3 + o3 - 1], d2 = f2[e3 + o3];
          t2.good_match <= t2.prev_length && (i3 >>= 2), u2 > t2.lookahead && (u2 = t2.lookahead);
          do {
            if (f2[(r3 = n2) + o3] === d2 && f2[r3 + o3 - 1] === v2 && f2[r3] === f2[e3] && f2[++r3] === f2[e3 + 1]) {
              for (e3 += 2, r3++; f2[++e3] === f2[++r3] && f2[++e3] === f2[++r3] && f2[++e3] === f2[++r3] && f2[++e3] === f2[++r3] && f2[++e3] === f2[++r3] && f2[++e3] === f2[++r3] && f2[++e3] === f2[++r3] && f2[++e3] === f2[++r3] && e3 < l2; )
                ;
              if (s3 = On - (l2 - e3), e3 = l2 - On, s3 > o3) {
                if (t2.match_start = n2, (o3 = s3) >= u2)
                  break;
                v2 = f2[e3 + o3 - 1], d2 = f2[e3 + o3];
              }
            }
          } while ((n2 = a2[n2 & h2]) > c2 && 0 != --i3);
          return o3 <= t2.lookahead ? o3 : t2.lookahead;
        }, Cn = (t2) => {
          var n2 = t2.w_size;
          let i3, e3, r3;
          do {
            if (e3 = t2.window_size - t2.lookahead - t2.strstart, t2.strstart >= n2 + (n2 - y) && (t2.window.set(t2.window.subarray(n2, n2 + n2 - e3), 0), t2.match_start -= n2, t2.strstart -= n2, t2.block_start -= n2, t2.strstart < t2.insert && (t2.insert = t2.strstart), Pn(t2), e3 += n2), 0 === t2.strm.avail_in)
              break;
            if (i3 = Mn(t2.strm, t2.window, t2.strstart + t2.lookahead, e3), t2.lookahead += i3, t2.lookahead + t2.insert >= b)
              for (r3 = t2.strstart - t2.insert, t2.ins_h = t2.window[r3], t2.ins_h = Fn(t2, t2.ins_h, t2.window[r3 + 1]); t2.insert && (t2.ins_h = Fn(t2, t2.ins_h, t2.window[r3 + b - 1]), t2.prev[r3 & t2.w_mask] = t2.head[t2.ins_h], t2.head[t2.ins_h] = r3, r3++, t2.insert--, !(t2.lookahead + t2.insert < b)); )
                ;
          } while (t2.lookahead < y && 0 !== t2.strm.avail_in);
        }, Hn = (t2, n2) => {
          let i3 = t2.pending_buf_size - 5 > t2.w_size ? t2.w_size : t2.pending_buf_size - 5, e3, r3, s3, o3 = 0;
          for (var u2 = t2.strm.avail_in; e3 = 65535, s3 = t2.bi_valid + 42 >> 3, !(t2.strm.avail_out < s3 || (s3 = t2.strm.avail_out - s3, r3 = t2.strstart - t2.block_start, (e3 = (e3 = e3 > r3 + t2.strm.avail_in ? r3 + t2.strm.avail_in : e3) > s3 ? s3 : e3) < i3 && (0 === e3 && n2 !== f || n2 === tn || e3 !== r3 + t2.strm.avail_in)) || (o3 = n2 === f && e3 === r3 + t2.strm.avail_in ? 1 : 0, $t(t2, 0, 0, o3), t2.pending_buf[t2.pending - 4] = e3, t2.pending_buf[t2.pending - 3] = e3 >> 8, t2.pending_buf[t2.pending - 2] = ~e3, t2.pending_buf[t2.pending - 1] = ~e3 >> 8, _(t2.strm), r3 && (r3 > e3 && (r3 = e3), t2.strm.output.set(t2.window.subarray(t2.block_start, t2.block_start + r3), t2.strm.next_out), t2.strm.next_out += r3, t2.strm.avail_out -= r3, t2.strm.total_out += r3, t2.block_start += r3, e3 -= r3), e3 && (Mn(t2.strm, t2.strm.output, t2.strm.next_out, e3), t2.strm.next_out += e3, t2.strm.avail_out -= e3, t2.strm.total_out += e3), 0 !== o3)); )
            ;
          return (u2 -= t2.strm.avail_in) && (u2 >= t2.w_size ? (t2.matches = 2, t2.window.set(t2.strm.input.subarray(t2.strm.next_in - t2.w_size, t2.strm.next_in), 0), t2.strstart = t2.w_size, t2.insert = t2.strstart) : (t2.window_size - t2.strstart <= u2 && (t2.strstart -= t2.w_size, t2.window.set(t2.window.subarray(t2.w_size, t2.w_size + t2.strstart), 0), t2.matches < 2 && t2.matches++, t2.strstart < t2.insert) && (t2.insert = t2.strstart), t2.window.set(t2.strm.input.subarray(t2.strm.next_in - u2, t2.strm.next_in), t2.strstart), t2.strstart += u2, t2.insert += t2.w_size - t2.insert < u2 ? t2.w_size - t2.insert : u2), t2.block_start = t2.strstart), t2.high_water < t2.strstart && (t2.high_water = t2.strstart), o3 ? Dn : n2 !== tn && n2 !== f && 0 === t2.strm.avail_in && t2.strstart === t2.block_start ? In : (s3 = t2.window_size - t2.strstart, t2.strm.avail_in > s3 && t2.block_start >= t2.w_size && (t2.block_start -= t2.w_size, t2.strstart -= t2.w_size, t2.window.set(t2.window.subarray(t2.w_size, t2.w_size + t2.strstart), 0), t2.matches < 2 && t2.matches++, s3 += t2.w_size, t2.strstart < t2.insert) && (t2.insert = t2.strstart), (s3 = s3 > t2.strm.avail_in ? t2.strm.avail_in : s3) && (Mn(t2.strm, t2.window, t2.strstart, s3), t2.strstart += s3, t2.insert += s3 > t2.w_size - t2.insert ? t2.w_size - t2.insert : s3), t2.high_water < t2.strstart && (t2.high_water = t2.strstart), s3 = t2.bi_valid + 42 >> 3, s3 = 65535 < t2.pending_buf_size - s3 ? 65535 : t2.pending_buf_size - s3, i3 = s3 > t2.w_size ? t2.w_size : s3, ((r3 = t2.strstart - t2.block_start) >= i3 || (r3 || n2 === f) && n2 !== tn && 0 === t2.strm.avail_in && r3 <= s3) && (e3 = r3 > s3 ? s3 : r3, o3 = n2 === f && 0 === t2.strm.avail_in && e3 === r3 ? 1 : 0, $t(t2, t2.block_start, e3, o3), t2.block_start += e3, _(t2.strm)), o3 ? Nn : m);
        };
        t = (t2, n2) => {
          let i3, e3;
          for (; ; ) {
            if (t2.lookahead < y) {
              if (Cn(t2), t2.lookahead < y && n2 === tn)
                return m;
              if (0 === t2.lookahead)
                break;
            }
            if (i3 = 0, t2.lookahead >= b && (t2.ins_h = Fn(t2, t2.ins_h, t2.window[t2.strstart + b - 1]), i3 = t2.prev[t2.strstart & t2.w_mask] = t2.head[t2.ins_h], t2.head[t2.ins_h] = t2.strstart), 0 !== i3 && t2.strstart - i3 <= t2.w_size - y && (t2.match_length = Bn(t2, i3)), t2.match_length >= b)
              if (e3 = Qt(t2, t2.strstart - t2.match_start, t2.match_length - b), t2.lookahead -= t2.match_length, t2.match_length <= t2.max_lazy_match && t2.lookahead >= b) {
                for (t2.match_length--; t2.strstart++, t2.ins_h = Fn(t2, t2.ins_h, t2.window[t2.strstart + b - 1]), i3 = t2.prev[t2.strstart & t2.w_mask] = t2.head[t2.ins_h], t2.head[t2.ins_h] = t2.strstart, 0 != --t2.match_length; )
                  ;
                t2.strstart++;
              } else
                t2.strstart += t2.match_length, t2.match_length = 0, t2.ins_h = t2.window[t2.strstart], t2.ins_h = Fn(t2, t2.ins_h, t2.window[t2.strstart + 1]);
            else
              e3 = Qt(t2, 0, t2.window[t2.strstart]), t2.lookahead--, t2.strstart++;
            if (e3 && (g(t2, false), 0 === t2.strm.avail_out))
              return m;
          }
          return t2.insert = t2.strstart < b - 1 ? t2.strstart : b - 1, n2 === f ? (g(t2, true), 0 === t2.strm.avail_out ? Nn : Dn) : t2.sym_next && (g(t2, false), 0 === t2.strm.avail_out) ? m : In;
        }, c = (t2, n2) => {
          let i3, e3;
          for (var r3; ; ) {
            if (t2.lookahead < y) {
              if (Cn(t2), t2.lookahead < y && n2 === tn)
                return m;
              if (0 === t2.lookahead)
                break;
            }
            if (i3 = 0, t2.lookahead >= b && (t2.ins_h = Fn(t2, t2.ins_h, t2.window[t2.strstart + b - 1]), i3 = t2.prev[t2.strstart & t2.w_mask] = t2.head[t2.ins_h], t2.head[t2.ins_h] = t2.strstart), t2.prev_length = t2.match_length, t2.prev_match = t2.match_start, t2.match_length = b - 1, 0 !== i3 && t2.prev_length < t2.max_lazy_match && t2.strstart - i3 <= t2.w_size - y && (t2.match_length = Bn(t2, i3), t2.match_length <= 5) && (t2.strategy === fn || t2.match_length === b && 4096 < t2.strstart - t2.match_start) && (t2.match_length = b - 1), t2.prev_length >= b && t2.match_length <= t2.prev_length) {
              for (r3 = t2.strstart + t2.lookahead - b, e3 = Qt(t2, t2.strstart - 1 - t2.prev_match, t2.prev_length - b), t2.lookahead -= t2.prev_length - 1, t2.prev_length -= 2; ++t2.strstart <= r3 && (t2.ins_h = Fn(t2, t2.ins_h, t2.window[t2.strstart + b - 1]), i3 = t2.prev[t2.strstart & t2.w_mask] = t2.head[t2.ins_h], t2.head[t2.ins_h] = t2.strstart), 0 != --t2.prev_length; )
                ;
              if (t2.match_available = 0, t2.match_length = b - 1, t2.strstart++, e3 && (g(t2, false), 0 === t2.strm.avail_out))
                return m;
            } else if (t2.match_available) {
              if ((e3 = Qt(t2, 0, t2.window[t2.strstart - 1])) && g(t2, false), t2.strstart++, t2.lookahead--, 0 === t2.strm.avail_out)
                return m;
            } else
              t2.match_available = 1, t2.strstart++, t2.lookahead--;
          }
          return t2.match_available && (e3 = Qt(t2, 0, t2.window[t2.strstart - 1]), t2.match_available = 0), t2.insert = t2.strstart < b - 1 ? t2.strstart : b - 1, n2 === f ? (g(t2, true), 0 === t2.strm.avail_out ? Nn : Dn) : t2.sym_next && (g(t2, false), 0 === t2.strm.avail_out) ? m : In;
        };
        function O(t2, n2, i3, e3, r3) {
          this.good_length = t2, this.max_lazy = n2, this.nice_length = i3, this.max_chain = e3, this.func = r3;
        }
        let qn = [new O(0, 0, 0, 0, Hn), new O(4, 4, 8, 4, t), new O(4, 5, 16, 8, t), new O(4, 6, 32, 32, t), new O(4, 4, 16, 16, c), new O(8, 16, 32, 32, c), new O(8, 16, 128, 128, c), new O(8, 32, 128, 256, c), new O(32, 128, 258, 1024, c), new O(32, 258, 258, 4096, c)], Jn = (t2) => {
          t2.window_size = 2 * t2.w_size, Ln(t2.head), t2.max_lazy_match = qn[t2.level].max_lazy, t2.good_match = qn[t2.level].good_length, t2.nice_match = qn[t2.level].nice_length, t2.max_chain_length = qn[t2.level].max_chain, t2.strstart = 0, t2.block_start = 0, t2.lookahead = 0, t2.insert = 0, t2.match_length = t2.prev_length = b - 1, t2.match_available = 0, t2.ins_h = 0;
        };
        function Kn() {
          this.strm = null, this.status = 0, this.pending_buf = null, this.pending_buf_size = 0, this.pending_out = 0, this.pending = 0, this.wrap = 0, this.gzhead = null, this.gzindex = 0, this.method = wn, this.last_flush = -1, this.w_size = 0, this.w_bits = 0, this.w_mask = 0, this.window = null, this.window_size = 0, this.prev = null, this.head = null, this.ins_h = 0, this.hash_size = 0, this.hash_bits = 0, this.hash_mask = 0, this.hash_shift = 0, this.block_start = 0, this.match_length = 0, this.prev_match = 0, this.match_available = 0, this.strstart = 0, this.match_start = 0, this.lookahead = 0, this.prev_length = 0, this.max_chain_length = 0, this.max_lazy_match = 0, this.level = 0, this.strategy = 0, this.good_match = 0, this.nice_match = 0, this.dyn_ltree = new Uint16Array(2 * gn), this.dyn_dtree = new Uint16Array(2 * (2 * mn + 1)), this.bl_tree = new Uint16Array(2 * (2 * _n + 1)), Ln(this.dyn_ltree), Ln(this.dyn_dtree), Ln(this.bl_tree), this.l_desc = null, this.d_desc = null, this.bl_desc = null, this.bl_count = new Uint16Array(pn + 1), this.heap = new Uint16Array(2 * yn + 1), Ln(this.heap), this.heap_len = 0, this.heap_max = 0, this.depth = new Uint16Array(2 * yn + 1), Ln(this.depth), this.sym_buf = 0, this.lit_bufsize = 0, this.sym_next = 0, this.sym_end = 0, this.opt_len = 0, this.static_len = 0, this.matches = 0, this.insert = 0, this.bi_buf = 0, this.bi_valid = 0;
        }
        let Gn = (t2) => {
          var n2;
          return !t2 || !(n2 = t2.state) || n2.strm !== t2 || n2.status !== Sn && n2.status !== kn && n2.status !== En && n2.status !== An && n2.status !== jn && n2.status !== Tn && n2.status !== xn && n2.status !== Rn ? 1 : 0;
        }, Wn = (t2) => {
          if (Gn(t2))
            return Zn(t2, w);
          t2.total_in = t2.total_out = 0, t2.data_type = dn;
          var n2 = t2.state;
          return n2.pending = 0, n2.pending_out = 0, n2.wrap < 0 && (n2.wrap = -n2.wrap), n2.status = 2 === n2.wrap ? kn : n2.wrap ? Sn : xn, t2.adler = 2 === n2.wrap ? 0 : 1, n2.last_flush = -2, Xt(n2), d;
        }, Xn = (t2) => {
          var n2 = Wn(t2);
          return n2 === d && Jn(t2.state), n2;
        };
        let $n = (t2, n2, i3, e3, r3, s3) => {
          if (!t2)
            return w;
          let o3 = 1;
          if (n2 === cn && (n2 = 6), e3 < 0 ? (o3 = 0, e3 = -e3) : 15 < e3 && (o3 = 2, e3 -= 16), r3 < 1 || r3 > bn || i3 !== wn || e3 < 8 || 15 < e3 || n2 < 0 || 9 < n2 || s3 < 0 || s3 > ln || 8 === e3 && 1 !== o3)
            return Zn(t2, w);
          8 === e3 && (e3 = 9);
          var u2 = new Kn();
          return (t2.state = u2).strm = t2, u2.status = Sn, u2.wrap = o3, u2.gzhead = null, u2.w_bits = e3, u2.w_size = 1 << u2.w_bits, u2.w_mask = u2.w_size - 1, u2.hash_bits = r3 + 7, u2.hash_size = 1 << u2.hash_bits, u2.hash_mask = u2.hash_size - 1, u2.hash_shift = ~~((u2.hash_bits + b - 1) / b), u2.window = new Uint8Array(2 * u2.w_size), u2.head = new Uint16Array(u2.hash_size), u2.prev = new Uint16Array(u2.w_size), u2.lit_bufsize = 1 << r3 + 6, u2.pending_buf_size = 4 * u2.lit_bufsize, u2.pending_buf = new Uint8Array(u2.pending_buf_size), u2.sym_buf = u2.lit_bufsize, u2.sym_end = 3 * (u2.lit_bufsize - 1), u2.level = n2, u2.strategy = s3, u2.method = i3, Xn(t2);
        };
        var Yn = { deflateInit: (t2, n2) => $n(t2, n2, wn, 15, 8, vn), deflateInit2: $n, deflateReset: Xn, deflateResetKeep: Wn, deflateSetHeader: (t2, n2) => Gn(t2) || 2 !== t2.state.wrap ? w : (t2.state.gzhead = n2, d), deflate: (i3, t2) => {
          if (Gn(i3) || t2 > rn || t2 < 0)
            return i3 ? Zn(i3, w) : w;
          var e3 = i3.state;
          if (!i3.output || 0 !== i3.avail_in && !i3.input || e3.status === Rn && t2 !== f)
            return Zn(i3, 0 === i3.avail_out ? un : w);
          var r3 = e3.last_flush;
          if (e3.last_flush = t2, 0 !== e3.pending) {
            if (_(i3), 0 === i3.avail_out)
              return e3.last_flush = -1, d;
          } else if (0 === i3.avail_in && Un(t2) <= Un(r3) && t2 !== f)
            return Zn(i3, un);
          if (e3.status === Rn && 0 !== i3.avail_in)
            return Zn(i3, un);
          if (e3.status === Sn && 0 === e3.wrap && (e3.status = xn), e3.status === Sn) {
            let t3 = wn + (e3.w_bits - 8 << 4) << 8, n2 = -1;
            if (n2 = e3.strategy >= hn || e3.level < 2 ? 0 : e3.level < 6 ? 1 : 6 === e3.level ? 2 : 3, t3 |= n2 << 6, 0 !== e3.strstart && (t3 |= 32), t3 += 31 - t3 % 31, zn(e3, t3), 0 !== e3.strstart && (zn(e3, i3.adler >>> 16), zn(e3, 65535 & i3.adler)), i3.adler = 1, e3.status = xn, _(i3), 0 !== e3.pending)
              return e3.last_flush = -1, d;
          }
          if (e3.status === kn) {
            if (i3.adler = 0, p(e3, 31), p(e3, 139), p(e3, 8), e3.gzhead)
              p(e3, (e3.gzhead.text ? 1 : 0) + (e3.gzhead.hcrc ? 2 : 0) + (e3.gzhead.extra ? 4 : 0) + (e3.gzhead.name ? 8 : 0) + (e3.gzhead.comment ? 16 : 0)), p(e3, 255 & e3.gzhead.time), p(e3, e3.gzhead.time >> 8 & 255), p(e3, e3.gzhead.time >> 16 & 255), p(e3, e3.gzhead.time >> 24 & 255), p(e3, 9 === e3.level ? 2 : e3.strategy >= hn || e3.level < 2 ? 4 : 0), p(e3, 255 & e3.gzhead.os), e3.gzhead.extra && e3.gzhead.extra.length && (p(e3, 255 & e3.gzhead.extra.length), p(e3, e3.gzhead.extra.length >> 8 & 255)), e3.gzhead.hcrc && (i3.adler = G(i3.adler, e3.pending_buf, e3.pending, 0)), e3.gzindex = 0, e3.status = En;
            else if (p(e3, 0), p(e3, 0), p(e3, 0), p(e3, 0), p(e3, 0), p(e3, 9 === e3.level ? 2 : e3.strategy >= hn || e3.level < 2 ? 4 : 0), p(e3, 3), e3.status = xn, _(i3), 0 !== e3.pending)
              return e3.last_flush = -1, d;
          }
          if (e3.status === En) {
            if (e3.gzhead.extra) {
              let t3 = e3.pending, n2 = (65535 & e3.gzhead.extra.length) - e3.gzindex;
              for (; e3.pending + n2 > e3.pending_buf_size; ) {
                var s3 = e3.pending_buf_size - e3.pending;
                if (e3.pending_buf.set(e3.gzhead.extra.subarray(e3.gzindex, e3.gzindex + s3), e3.pending), e3.pending = e3.pending_buf_size, e3.gzhead.hcrc && e3.pending > t3 && (i3.adler = G(i3.adler, e3.pending_buf, e3.pending - t3, t3)), e3.gzindex += s3, _(i3), 0 !== e3.pending)
                  return e3.last_flush = -1, d;
                t3 = 0, n2 -= s3;
              }
              r3 = new Uint8Array(e3.gzhead.extra);
              e3.pending_buf.set(r3.subarray(e3.gzindex, e3.gzindex + n2), e3.pending), e3.pending += n2, e3.gzhead.hcrc && e3.pending > t3 && (i3.adler = G(i3.adler, e3.pending_buf, e3.pending - t3, t3)), e3.gzindex = 0;
            }
            e3.status = An;
          }
          if (e3.status === An) {
            if (e3.gzhead.name) {
              let t3 = e3.pending, n2;
              do {
                if (e3.pending === e3.pending_buf_size) {
                  if (e3.gzhead.hcrc && e3.pending > t3 && (i3.adler = G(i3.adler, e3.pending_buf, e3.pending - t3, t3)), _(i3), 0 !== e3.pending)
                    return e3.last_flush = -1, d;
                  t3 = 0;
                }
              } while (n2 = e3.gzindex < e3.gzhead.name.length ? 255 & e3.gzhead.name.charCodeAt(e3.gzindex++) : 0, p(e3, n2), 0 !== n2);
              e3.gzhead.hcrc && e3.pending > t3 && (i3.adler = G(i3.adler, e3.pending_buf, e3.pending - t3, t3)), e3.gzindex = 0;
            }
            e3.status = jn;
          }
          if (e3.status === jn) {
            if (e3.gzhead.comment) {
              let t3 = e3.pending, n2;
              do {
                if (e3.pending === e3.pending_buf_size) {
                  if (e3.gzhead.hcrc && e3.pending > t3 && (i3.adler = G(i3.adler, e3.pending_buf, e3.pending - t3, t3)), _(i3), 0 !== e3.pending)
                    return e3.last_flush = -1, d;
                  t3 = 0;
                }
              } while (n2 = e3.gzindex < e3.gzhead.comment.length ? 255 & e3.gzhead.comment.charCodeAt(e3.gzindex++) : 0, p(e3, n2), 0 !== n2);
              e3.gzhead.hcrc && e3.pending > t3 && (i3.adler = G(i3.adler, e3.pending_buf, e3.pending - t3, t3));
            }
            e3.status = Tn;
          }
          if (e3.status === Tn) {
            if (e3.gzhead.hcrc) {
              if (e3.pending + 2 > e3.pending_buf_size && (_(i3), 0 !== e3.pending))
                return e3.last_flush = -1, d;
              p(e3, 255 & i3.adler), p(e3, i3.adler >> 8 & 255), i3.adler = 0;
            }
            if (e3.status = xn, _(i3), 0 !== e3.pending)
              return e3.last_flush = -1, d;
          }
          if (0 !== i3.avail_in || 0 !== e3.lookahead || t2 !== tn && e3.status !== Rn) {
            r3 = 0 === e3.level ? Hn(e3, t2) : e3.strategy === hn ? ((t3, n2) => {
              for (var i4; ; ) {
                if (0 === t3.lookahead && (Cn(t3), 0 === t3.lookahead)) {
                  if (n2 === tn)
                    return m;
                  break;
                }
                if (t3.match_length = 0, i4 = Qt(t3, 0, t3.window[t3.strstart]), t3.lookahead--, t3.strstart++, i4 && (g(t3, false), 0 === t3.strm.avail_out))
                  return m;
              }
              return t3.insert = 0, n2 === f ? (g(t3, true), 0 === t3.strm.avail_out ? Nn : Dn) : t3.sym_next && (g(t3, false), 0 === t3.strm.avail_out) ? m : In;
            })(e3, t2) : e3.strategy === an ? ((t3, n2) => {
              let i4;
              var e4;
              let r4, s4;
              for (var o3 = t3.window; ; ) {
                if (t3.lookahead <= On) {
                  if (Cn(t3), t3.lookahead <= On && n2 === tn)
                    return m;
                  if (0 === t3.lookahead)
                    break;
                }
                if (t3.match_length = 0, t3.lookahead >= b && 0 < t3.strstart && (e4 = o3[r4 = t3.strstart - 1]) === o3[++r4] && e4 === o3[++r4] && e4 === o3[++r4]) {
                  for (s4 = t3.strstart + On; e4 === o3[++r4] && e4 === o3[++r4] && e4 === o3[++r4] && e4 === o3[++r4] && e4 === o3[++r4] && e4 === o3[++r4] && e4 === o3[++r4] && e4 === o3[++r4] && r4 < s4; )
                    ;
                  t3.match_length = On - (s4 - r4), t3.lookahead < t3.match_length && (t3.match_length = t3.lookahead);
                }
                if (t3.match_length >= b ? (i4 = Qt(t3, 1, t3.match_length - b), t3.lookahead -= t3.match_length, t3.strstart += t3.match_length, t3.match_length = 0) : (i4 = Qt(t3, 0, t3.window[t3.strstart]), t3.lookahead--, t3.strstart++), i4 && (g(t3, false), 0 === t3.strm.avail_out))
                  return m;
              }
              return t3.insert = 0, n2 === f ? (g(t3, true), 0 === t3.strm.avail_out ? Nn : Dn) : t3.sym_next && (g(t3, false), 0 === t3.strm.avail_out) ? m : In;
            })(e3, t2) : qn[e3.level].func(e3, t2);
            if (r3 !== Nn && r3 !== Dn || (e3.status = Rn), r3 === m || r3 === Nn)
              return 0 === i3.avail_out && (e3.last_flush = -1), d;
            if (r3 === In && (t2 === nn ? Vt(e3) : t2 !== rn && ($t(e3, 0, 0, false), t2 === en) && (Ln(e3.head), 0 === e3.lookahead) && (e3.strstart = 0, e3.block_start = 0, e3.insert = 0), _(i3), 0 === i3.avail_out))
              return e3.last_flush = -1, d;
          }
          return t2 !== f || !(e3.wrap <= 0) && (2 === e3.wrap ? (p(e3, 255 & i3.adler), p(e3, i3.adler >> 8 & 255), p(e3, i3.adler >> 16 & 255), p(e3, i3.adler >> 24 & 255), p(e3, 255 & i3.total_in), p(e3, i3.total_in >> 8 & 255), p(e3, i3.total_in >> 16 & 255), p(e3, i3.total_in >> 24 & 255)) : (zn(e3, i3.adler >>> 16), zn(e3, 65535 & i3.adler)), _(i3), 0 < e3.wrap && (e3.wrap = -e3.wrap), 0 !== e3.pending) ? d : sn;
        }, deflateEnd: (t2) => {
          var n2;
          return Gn(t2) ? w : (n2 = t2.state.status, t2.state = null, n2 === xn ? Zn(t2, on) : d);
        }, deflateSetDictionary: (t2, n2) => {
          let i3 = n2.length;
          if (Gn(t2))
            return w;
          var e3 = t2.state, r3 = e3.wrap;
          if (2 === r3 || 1 === r3 && e3.status !== Sn || e3.lookahead)
            return w;
          1 === r3 && (t2.adler = Kt(t2.adler, n2, i3, 0)), e3.wrap = 0, i3 >= e3.w_size && (0 === r3 && (Ln(e3.head), e3.strstart = 0, e3.block_start = 0, e3.insert = 0), (s3 = new Uint8Array(e3.w_size)).set(n2.subarray(i3 - e3.w_size, i3), 0), n2 = s3, i3 = e3.w_size);
          var s3 = t2.avail_in, o3 = t2.next_in, u2 = t2.input;
          for (t2.avail_in = i3, t2.next_in = 0, t2.input = n2, Cn(e3); e3.lookahead >= b; ) {
            let t3 = e3.strstart, n3 = e3.lookahead - (b - 1);
            for (; e3.ins_h = Fn(e3, e3.ins_h, e3.window[t3 + b - 1]), e3.prev[t3 & e3.w_mask] = e3.head[e3.ins_h], e3.head[e3.ins_h] = t3, t3++, --n3; )
              ;
            e3.strstart = t3, e3.lookahead = b - 1, Cn(e3);
          }
          return e3.strstart += e3.lookahead, e3.block_start = e3.strstart, e3.insert = e3.lookahead, e3.lookahead = 0, e3.match_length = e3.prev_length = b - 1, e3.match_available = 0, t2.next_in = o3, t2.input = u2, t2.avail_in = s3, e3.wrap = r3, d;
        }, deflateInfo: "pako deflate (from Nodeca project)" };
        var Qn = function(t2) {
          for (var n2, i3, e3 = Array.prototype.slice.call(arguments, 1); e3.length; ) {
            var r3 = e3.shift();
            if (r3) {
              if ("object" != typeof r3)
                throw new TypeError(r3 + "must be non-object");
              for (var s3 in r3)
                n2 = r3, i3 = s3, Object.prototype.hasOwnProperty.call(n2, i3) && (t2[s3] = r3[s3]);
            }
          }
          return t2;
        }, Vn = (e3) => {
          let i3 = 0;
          for (let t2 = 0, n2 = e3.length; t2 < n2; t2++)
            i3 += e3[t2].length;
          var r3 = new Uint8Array(i3);
          for (let t2 = 0, n2 = 0, i4 = e3.length; t2 < i4; t2++) {
            var s3 = e3[t2];
            r3.set(s3, n2), n2 += s3.length;
          }
          return r3;
        };
        let ti = true;
        try {
          String.fromCharCode.apply(null, new Uint8Array(1));
        } catch (t2) {
          ti = false;
        }
        let ni = new Uint8Array(256);
        for (let t2 = 0; t2 < 256; t2++)
          ni[t2] = 252 <= t2 ? 6 : 248 <= t2 ? 5 : 240 <= t2 ? 4 : 224 <= t2 ? 3 : 192 <= t2 ? 2 : 1;
        ni[254] = ni[254] = 1;
        var ii = (t2) => {
          if ("function" == typeof TextEncoder && TextEncoder.prototype.encode)
            return new TextEncoder().encode(t2);
          let n2, i3, e3, r3, s3, o3 = t2.length, u2 = 0;
          for (r3 = 0; r3 < o3; r3++)
            55296 == (64512 & (i3 = t2.charCodeAt(r3))) && r3 + 1 < o3 && 56320 == (64512 & (e3 = t2.charCodeAt(r3 + 1))) && (i3 = 65536 + (i3 - 55296 << 10) + (e3 - 56320), r3++), u2 += i3 < 128 ? 1 : i3 < 2048 ? 2 : i3 < 65536 ? 3 : 4;
          for (n2 = new Uint8Array(u2), s3 = 0, r3 = 0; s3 < u2; r3++)
            55296 == (64512 & (i3 = t2.charCodeAt(r3))) && r3 + 1 < o3 && 56320 == (64512 & (e3 = t2.charCodeAt(r3 + 1))) && (i3 = 65536 + (i3 - 55296 << 10) + (e3 - 56320), r3++), i3 < 128 ? n2[s3++] = i3 : (i3 < 2048 ? n2[s3++] = 192 | i3 >>> 6 : (i3 < 65536 ? n2[s3++] = 224 | i3 >>> 12 : (n2[s3++] = 240 | i3 >>> 18, n2[s3++] = 128 | i3 >>> 12 & 63), n2[s3++] = 128 | i3 >>> 6 & 63), n2[s3++] = 128 | 63 & i3);
          return n2;
        }, ei = (i3, t2) => {
          var e3 = t2 || i3.length;
          if ("function" == typeof TextDecoder && TextDecoder.prototype.decode)
            return new TextDecoder().decode(i3.subarray(0, t2));
          let r3, s3;
          var o3 = new Array(2 * e3);
          for (s3 = 0, r3 = 0; r3 < e3; ) {
            let n2 = i3[r3++];
            if (n2 < 128)
              o3[s3++] = n2;
            else {
              let t3 = ni[n2];
              if (4 < t3)
                o3[s3++] = 65533, r3 += t3 - 1;
              else {
                for (n2 &= 2 === t3 ? 31 : 3 === t3 ? 15 : 7; 1 < t3 && r3 < e3; )
                  n2 = n2 << 6 | 63 & i3[r3++], t3--;
                1 < t3 ? o3[s3++] = 65533 : n2 < 65536 ? o3[s3++] = n2 : (n2 -= 65536, o3[s3++] = 55296 | n2 >> 10 & 1023, o3[s3++] = 56320 | 1023 & n2);
              }
            }
          }
          return ((n2, i4) => {
            if (i4 < 65534 && n2.subarray && ti)
              return String.fromCharCode.apply(null, n2.length === i4 ? n2 : n2.subarray(0, i4));
            let e4 = "";
            for (let t3 = 0; t3 < i4; t3++)
              e4 += String.fromCharCode(n2[t3]);
            return e4;
          })(o3, s3);
        }, ri = (t2, n2) => {
          let i3 = (n2 = (n2 = n2 || t2.length) > t2.length ? t2.length : n2) - 1;
          for (; 0 <= i3 && 128 == (192 & t2[i3]); )
            i3--;
          return !(i3 < 0) && 0 !== i3 && i3 + ni[t2[i3]] > n2 ? i3 : n2;
        };
        var si = function() {
          this.input = null, this.next_in = 0, this.avail_in = 0, this.total_in = 0, this.output = null, this.next_out = 0, this.avail_out = 0, this.total_out = 0, this.msg = "", this.state = null, this.data_type = 2, this.adler = 0;
        };
        let oi = Object.prototype.toString, { Z_NO_FLUSH: ui, Z_SYNC_FLUSH: ci, Z_FULL_FLUSH: fi, Z_FINISH: hi, Z_OK: ai, Z_STREAM_END: li, Z_DEFAULT_COMPRESSION: vi, Z_DEFAULT_STRATEGY: di, Z_DEFLATED: wi } = n;
        function bi(n2) {
          this.options = Qn({ level: vi, method: wi, chunkSize: 16384, windowBits: 15, memLevel: 8, strategy: di }, n2 || {});
          var n2 = this.options, i3 = (n2.raw && 0 < n2.windowBits ? n2.windowBits = -n2.windowBits : n2.gzip && 0 < n2.windowBits && n2.windowBits < 16 && (n2.windowBits += 16), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new si(), this.strm.avail_out = 0, Yn.deflateInit2(this.strm, n2.level, n2.method, n2.windowBits, n2.memLevel, n2.strategy));
          if (i3 !== ai)
            throw new Error(Wt[i3]);
          if (n2.header && Yn.deflateSetHeader(this.strm, n2.header), n2.dictionary) {
            let t2;
            if (t2 = "string" == typeof n2.dictionary ? ii(n2.dictionary) : "[object ArrayBuffer]" === oi.call(n2.dictionary) ? new Uint8Array(n2.dictionary) : n2.dictionary, (i3 = Yn.deflateSetDictionary(this.strm, t2)) !== ai)
              throw new Error(Wt[i3]);
            this.T = true;
          }
        }
        function yi(t2, n2) {
          n2 = new bi(n2);
          if (n2.push(t2, true), n2.err)
            throw n2.msg || Wt[n2.err];
          return n2.result;
        }
        bi.prototype.push = function(t2, n2) {
          var i3 = this.strm, e3 = this.options.chunkSize;
          let r3, s3;
          if (this.ended)
            return false;
          for (s3 = n2 === ~~n2 ? n2 : true === n2 ? hi : ui, "string" == typeof t2 ? i3.input = ii(t2) : "[object ArrayBuffer]" === oi.call(t2) ? i3.input = new Uint8Array(t2) : i3.input = t2, i3.next_in = 0, i3.avail_in = i3.input.length; ; )
            if (0 === i3.avail_out && (i3.output = new Uint8Array(e3), i3.next_out = 0, i3.avail_out = e3), (s3 === ci || s3 === fi) && i3.avail_out <= 6)
              this.onData(i3.output.subarray(0, i3.next_out)), i3.avail_out = 0;
            else {
              if (Yn.deflate(i3, s3) === li)
                return 0 < i3.next_out && this.onData(i3.output.subarray(0, i3.next_out)), r3 = Yn.deflateEnd(this.strm), this.onEnd(r3), this.ended = true, r3 === ai;
              if (0 === i3.avail_out)
                this.onData(i3.output);
              else if (0 < s3 && 0 < i3.next_out)
                this.onData(i3.output.subarray(0, i3.next_out)), i3.avail_out = 0;
              else if (0 === i3.avail_in)
                break;
            }
          return true;
        }, bi.prototype.onData = function(t2) {
          this.chunks.push(t2);
        }, bi.prototype.onEnd = function(t2) {
          t2 === ai && (this.result = Vn(this.chunks)), this.chunks = [], this.err = t2, this.msg = this.strm.msg;
        };
        function mi(t2, n2) {
          return (n2 = n2 || {}).raw = true, yi(t2, n2);
        }
        function _i(t2, n2) {
          return (n2 = n2 || {}).gzip = true, yi(t2, n2);
        }
        let gi = bi, pi = yi, Oi = n, Si = { Deflate: gi, deflate: pi, deflateRaw: mi, gzip: _i, constants: Oi }, ki = 16209, Ei = 16191;
        let Ai = new Uint16Array([3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0]), ji = new Uint8Array([16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18, 19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78]), Ti = new Uint16Array([1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 0, 0]), xi = new Uint8Array([16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27, 28, 28, 29, 29, 64, 64]);
        var Ri = (t2, n2, i3, e3, r3, s3, o3, u2) => {
          var c2, f2 = u2.bits;
          let h2 = 0, a2 = 0, l2 = 0, v2 = 0, d2 = 0, w2 = 0, b2 = 0, y2 = 0, m2 = 0, _2 = 0, g2, p2, O2, S2, k2 = null, E2;
          var A2 = new Uint16Array(16), j2 = new Uint16Array(16);
          let T2 = null, x2, R2, I2;
          for (h2 = 0; h2 <= 15; h2++)
            A2[h2] = 0;
          for (a2 = 0; a2 < e3; a2++)
            A2[n2[i3 + a2]]++;
          for (d2 = f2, v2 = 15; 1 <= v2 && 0 === A2[v2]; v2--)
            ;
          if (d2 > v2 && (d2 = v2), 0 === v2)
            r3[s3++] = 20971520, r3[s3++] = 20971520, u2.bits = 1;
          else {
            for (l2 = 1; l2 < v2 && 0 === A2[l2]; l2++)
              ;
            for (d2 < l2 && (d2 = l2), y2 = 1, h2 = 1; h2 <= 15; h2++)
              if ((y2 = (y2 <<= 1) - A2[h2]) < 0)
                return -1;
            if (0 < y2 && (0 === t2 || 1 !== v2))
              return -1;
            for (j2[1] = 0, h2 = 1; h2 < 15; h2++)
              j2[h2 + 1] = j2[h2] + A2[h2];
            for (a2 = 0; a2 < e3; a2++)
              0 !== n2[i3 + a2] && (o3[j2[n2[i3 + a2]]++] = a2);
            if (E2 = 0 === t2 ? (k2 = T2 = o3, 20) : 1 === t2 ? (k2 = Ai, T2 = ji, 257) : (k2 = Ti, T2 = xi, 0), _2 = 0, a2 = 0, h2 = l2, S2 = s3, w2 = d2, b2 = 0, O2 = -1, c2 = (m2 = 1 << d2) - 1, 1 === t2 && 852 < m2 || 2 === t2 && 592 < m2)
              return 1;
            for (; ; ) {
              for (x2 = h2 - b2, I2 = o3[a2] + 1 < E2 ? (R2 = 0, o3[a2]) : o3[a2] >= E2 ? (R2 = T2[o3[a2] - E2], k2[o3[a2] - E2]) : (R2 = 96, 0), g2 = 1 << h2 - b2, p2 = 1 << w2, l2 = p2; p2 -= g2, r3[S2 + (_2 >> b2) + p2] = x2 << 24 | R2 << 16 | I2 | 0, 0 !== p2; )
                ;
              for (g2 = 1 << h2 - 1; _2 & g2; )
                g2 >>= 1;
              if (_2 = 0 !== g2 ? (_2 &= g2 - 1) + g2 : 0, a2++, 0 == --A2[h2]) {
                if (h2 === v2)
                  break;
                h2 = n2[i3 + o3[a2]];
              }
              if (h2 > d2 && (_2 & c2) !== O2) {
                for (0 === b2 && (b2 = d2), S2 += l2, w2 = h2 - b2, y2 = 1 << w2; w2 + b2 < v2 && !((y2 -= A2[w2 + b2]) <= 0); )
                  w2++, y2 <<= 1;
                if (m2 += 1 << w2, 1 === t2 && 852 < m2 || 2 === t2 && 592 < m2)
                  return 1;
                r3[O2 = _2 & c2] = d2 << 24 | w2 << 16 | S2 - s3 | 0;
              }
            }
            0 !== _2 && (r3[S2 + _2] = h2 - b2 << 24 | 64 << 16 | 0), u2.bits = d2;
          }
          return 0;
        };
        let Ii = 1, Ni = 2, { Z_FINISH: Di, Z_BLOCK: Zi, Z_TREES: Ui, Z_OK: Li, Z_STREAM_END: Pi, Z_NEED_DICT: Fi, Z_STREAM_ERROR: W, Z_DATA_ERROR: zi, Z_MEM_ERROR: Mi, Z_BUF_ERROR: Bi, Z_DEFLATED: Ci } = n, Hi = 16180, qi = 16190, X = 16191, Ji = 16199, Ki = 16200, $ = 16209, Gi = 16211, Wi = 852, Xi = 592;
        let $i = (t2) => (t2 >>> 24 & 255) + (t2 >>> 8 & 65280) + ((65280 & t2) << 8) + ((255 & t2) << 24);
        function Yi() {
          this.strm = null, this.mode = 0, this.last = false, this.wrap = 0, this.havedict = false, this.flags = 0, this.dmax = 0, this.check = 0, this.total = 0, this.head = null, this.wbits = 0, this.wsize = 0, this.whave = 0, this.wnext = 0, this.window = null, this.hold = 0, this.bits = 0, this.length = 0, this.offset = 0, this.extra = 0, this.lencode = null, this.distcode = null, this.lenbits = 0, this.distbits = 0, this.ncode = 0, this.nlen = 0, this.ndist = 0, this.have = 0, this.next = null, this.lens = new Uint16Array(320), this.work = new Uint16Array(288), this.lendyn = null, this.distdyn = null, this.sane = 0, this.back = 0, this.was = 0;
        }
        let Qi = (t2) => {
          var n2;
          return !t2 || !(n2 = t2.state) || n2.strm !== t2 || n2.mode < Hi || n2.mode > Gi ? 1 : 0;
        }, Vi = (t2) => {
          var n2;
          return Qi(t2) ? W : (n2 = t2.state, t2.total_in = t2.total_out = n2.total = 0, t2.msg = "", n2.wrap && (t2.adler = 1 & n2.wrap), n2.mode = Hi, n2.last = 0, n2.havedict = 0, n2.flags = -1, n2.dmax = 32768, n2.head = null, n2.hold = 0, n2.bits = 0, n2.lencode = n2.lendyn = new Int32Array(Wi), n2.distcode = n2.distdyn = new Int32Array(Xi), n2.sane = 1, n2.back = -1, Li);
        }, te = (t2) => {
          var n2;
          return Qi(t2) ? W : ((n2 = t2.state).wsize = 0, n2.whave = 0, n2.wnext = 0, Vi(t2));
        }, ne = (t2, n2) => {
          let i3;
          var e3;
          return Qi(t2) || (e3 = t2.state, n2 < 0 ? (i3 = 0, n2 = -n2) : (i3 = 5 + (n2 >> 4), n2 < 48 && (n2 &= 15)), n2 && (n2 < 8 || 15 < n2)) ? W : (null !== e3.window && e3.wbits !== n2 && (e3.window = null), e3.wrap = i3, e3.wbits = n2, te(t2));
        }, ie = (t2, n2) => {
          var i3;
          return t2 ? (i3 = new Yi(), (t2.state = i3).strm = t2, i3.window = null, i3.mode = Hi, (i3 = ne(t2, n2)) !== Li && (t2.state = null), i3) : W;
        };
        let ee = true, re, se, oe = (t2, n2, i3, e3) => {
          let r3;
          t2 = t2.state;
          return null === t2.window && (t2.wsize = 1 << t2.wbits, t2.wnext = 0, t2.whave = 0, t2.window = new Uint8Array(t2.wsize)), t2.wsize <= e3 ? (t2.window.set(n2.subarray(i3 - t2.wsize, i3), 0), t2.wnext = 0, t2.whave = t2.wsize) : ((r3 = t2.wsize - t2.wnext) > e3 && (r3 = e3), t2.window.set(n2.subarray(i3 - e3, i3 - e3 + r3), t2.wnext), (e3 -= r3) ? (t2.window.set(n2.subarray(i3 - e3, i3), 0), t2.wnext = e3, t2.whave = t2.wsize) : (t2.wnext += r3, t2.wnext === t2.wsize && (t2.wnext = 0), t2.whave < t2.wsize && (t2.whave += r3))), 0;
        };
        var S = { inflateReset: te, inflateReset2: ne, inflateResetKeep: Vi, inflateInit: (t2) => ie(t2, 15), inflateInit2: ie, inflate: (f2, t2) => {
          var n2;
          let i3, e3, r3, s3, o3, u2, c2, h2, a2, l2, v2, L2, P2, d2 = 0, w2, b2, y2, m2, _2, g2, p2, O2;
          var S2 = new Uint8Array(4);
          let k2, E2;
          var A2, F2, j2, z2, T2, M2, x2, R2, B2, C2, H2, q2, I2, N2, D2, J2 = new Uint8Array([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);
          if (Qi(f2) || !f2.output || !f2.input && 0 !== f2.avail_in)
            return W;
          (n2 = f2.state).mode === X && (n2.mode = 16192), s3 = f2.next_out, e3 = f2.output, u2 = f2.avail_out, r3 = f2.next_in, i3 = f2.input, o3 = f2.avail_in, c2 = n2.hold, h2 = n2.bits, a2 = o3, l2 = u2, O2 = Li;
          t:
            for (; ; )
              switch (n2.mode) {
                case Hi:
                  if (0 === n2.wrap)
                    n2.mode = 16192;
                  else {
                    for (; h2 < 16; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    2 & n2.wrap && 35615 === c2 ? (0 === n2.wbits && (n2.wbits = 15), S2[n2.check = 0] = 255 & c2, S2[1] = c2 >>> 8 & 255, n2.check = G(n2.check, S2, 2, 0), c2 = 0, h2 = 0, n2.mode = 16181) : (n2.head && (n2.head.done = false), !(1 & n2.wrap) || (((255 & c2) << 8) + (c2 >> 8)) % 31 ? (f2.msg = "incorrect header check", n2.mode = $) : (15 & c2) !== Ci ? (f2.msg = "unknown compression method", n2.mode = $) : (c2 >>>= 4, h2 -= 4, p2 = 8 + (15 & c2), 0 === n2.wbits && (n2.wbits = p2), 15 < p2 || p2 > n2.wbits ? (f2.msg = "invalid window size", n2.mode = $) : (n2.dmax = 1 << n2.wbits, n2.flags = 0, f2.adler = n2.check = 1, n2.mode = 512 & c2 ? 16189 : X, c2 = 0, h2 = 0)));
                  }
                  break;
                case 16181:
                  for (; h2 < 16; ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  if (n2.flags = c2, (255 & n2.flags) !== Ci) {
                    f2.msg = "unknown compression method", n2.mode = $;
                    break;
                  }
                  if (57344 & n2.flags) {
                    f2.msg = "unknown header flags set", n2.mode = $;
                    break;
                  }
                  n2.head && (n2.head.text = c2 >> 8 & 1), 512 & n2.flags && 4 & n2.wrap && (S2[0] = 255 & c2, S2[1] = c2 >>> 8 & 255, n2.check = G(n2.check, S2, 2, 0)), c2 = 0, h2 = 0, n2.mode = 16182;
                case 16182:
                  for (; h2 < 32; ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  n2.head && (n2.head.time = c2), 512 & n2.flags && 4 & n2.wrap && (S2[0] = 255 & c2, S2[1] = c2 >>> 8 & 255, S2[2] = c2 >>> 16 & 255, S2[3] = c2 >>> 24 & 255, n2.check = G(n2.check, S2, 4, 0)), c2 = 0, h2 = 0, n2.mode = 16183;
                case 16183:
                  for (; h2 < 16; ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  n2.head && (n2.head.xflags = 255 & c2, n2.head.os = c2 >> 8), 512 & n2.flags && 4 & n2.wrap && (S2[0] = 255 & c2, S2[1] = c2 >>> 8 & 255, n2.check = G(n2.check, S2, 2, 0)), c2 = 0, h2 = 0, n2.mode = 16184;
                case 16184:
                  if (1024 & n2.flags) {
                    for (; h2 < 16; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    n2.length = c2, n2.head && (n2.head.extra_len = c2), 512 & n2.flags && 4 & n2.wrap && (S2[0] = 255 & c2, S2[1] = c2 >>> 8 & 255, n2.check = G(n2.check, S2, 2, 0)), c2 = 0, h2 = 0;
                  } else
                    n2.head && (n2.head.extra = null);
                  n2.mode = 16185;
                case 16185:
                  if (1024 & n2.flags && ((v2 = (v2 = n2.length) > o3 ? o3 : v2) && (n2.head && (p2 = n2.head.extra_len - n2.length, n2.head.extra || (n2.head.extra = new Uint8Array(n2.head.extra_len)), n2.head.extra.set(i3.subarray(r3, r3 + v2), p2)), 512 & n2.flags && 4 & n2.wrap && (n2.check = G(n2.check, i3, v2, r3)), o3 -= v2, r3 += v2, n2.length -= v2), n2.length))
                    break t;
                  n2.length = 0, n2.mode = 16186;
                case 16186:
                  if (2048 & n2.flags) {
                    if (0 === o3)
                      break t;
                    for (v2 = 0; p2 = i3[r3 + v2++], n2.head && p2 && n2.length < 65536 && (n2.head.name += String.fromCharCode(p2)), p2 && v2 < o3; )
                      ;
                    if (512 & n2.flags && 4 & n2.wrap && (n2.check = G(n2.check, i3, v2, r3)), o3 -= v2, r3 += v2, p2)
                      break t;
                  } else
                    n2.head && (n2.head.name = null);
                  n2.length = 0, n2.mode = 16187;
                case 16187:
                  if (4096 & n2.flags) {
                    if (0 === o3)
                      break t;
                    for (v2 = 0; p2 = i3[r3 + v2++], n2.head && p2 && n2.length < 65536 && (n2.head.comment += String.fromCharCode(p2)), p2 && v2 < o3; )
                      ;
                    if (512 & n2.flags && 4 & n2.wrap && (n2.check = G(n2.check, i3, v2, r3)), o3 -= v2, r3 += v2, p2)
                      break t;
                  } else
                    n2.head && (n2.head.comment = null);
                  n2.mode = 16188;
                case 16188:
                  if (512 & n2.flags) {
                    for (; h2 < 16; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    if (4 & n2.wrap && c2 !== (65535 & n2.check)) {
                      f2.msg = "header crc mismatch", n2.mode = $;
                      break;
                    }
                    c2 = 0, h2 = 0;
                  }
                  n2.head && (n2.head.hcrc = n2.flags >> 9 & 1, n2.head.done = true), f2.adler = n2.check = 0, n2.mode = X;
                  break;
                case 16189:
                  for (; h2 < 32; ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  f2.adler = n2.check = $i(c2), c2 = 0, h2 = 0, n2.mode = qi;
                case qi:
                  if (0 === n2.havedict)
                    return f2.next_out = s3, f2.avail_out = u2, f2.next_in = r3, f2.avail_in = o3, n2.hold = c2, n2.bits = h2, Fi;
                  f2.adler = n2.check = 1, n2.mode = X;
                case X:
                  if (t2 === Zi || t2 === Ui)
                    break t;
                case 16192:
                  if (n2.last)
                    c2 >>>= 7 & h2, h2 -= 7 & h2, n2.mode = 16206;
                  else {
                    for (; h2 < 3; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    switch (n2.last = 1 & c2, c2 >>>= 1, --h2, 3 & c2) {
                      case 0:
                        n2.mode = 16193;
                        break;
                      case 1:
                        if (((n3) => {
                          if (ee) {
                            re = new Int32Array(512), se = new Int32Array(32);
                            let t3 = 0;
                            for (; t3 < 144; )
                              n3.lens[t3++] = 8;
                            for (; t3 < 256; )
                              n3.lens[t3++] = 9;
                            for (; t3 < 280; )
                              n3.lens[t3++] = 7;
                            for (; t3 < 288; )
                              n3.lens[t3++] = 8;
                            for (Ri(Ii, n3.lens, 0, 288, re, 0, n3.work, { bits: 9 }), t3 = 0; t3 < 32; )
                              n3.lens[t3++] = 5;
                            Ri(Ni, n3.lens, 0, 32, se, 0, n3.work, { bits: 5 }), ee = false;
                          }
                          n3.lencode = re, n3.lenbits = 9, n3.distcode = se, n3.distbits = 5;
                        })(n2), n2.mode = Ji, t2 !== Ui)
                          break;
                        c2 >>>= 2, h2 -= 2;
                        break t;
                      case 2:
                        n2.mode = 16196;
                        break;
                      case 3:
                        f2.msg = "invalid block type", n2.mode = $;
                    }
                    c2 >>>= 2, h2 -= 2;
                  }
                  break;
                case 16193:
                  for (c2 >>>= 7 & h2, h2 -= 7 & h2; h2 < 32; ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  if ((65535 & c2) != (c2 >>> 16 ^ 65535)) {
                    f2.msg = "invalid stored block lengths", n2.mode = $;
                    break;
                  }
                  if (n2.length = 65535 & c2, c2 = 0, h2 = 0, n2.mode = 16194, t2 === Ui)
                    break t;
                case 16194:
                  n2.mode = 16195;
                case 16195:
                  if (v2 = n2.length) {
                    if (0 === (v2 = (v2 = v2 > o3 ? o3 : v2) > u2 ? u2 : v2))
                      break t;
                    e3.set(i3.subarray(r3, r3 + v2), s3), o3 -= v2, r3 += v2, u2 -= v2, s3 += v2, n2.length -= v2;
                  } else
                    n2.mode = X;
                  break;
                case 16196:
                  for (; h2 < 14; ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  if (n2.nlen = 257 + (31 & c2), c2 >>>= 5, h2 -= 5, n2.ndist = 1 + (31 & c2), c2 >>>= 5, h2 -= 5, n2.ncode = 4 + (15 & c2), c2 >>>= 4, h2 -= 4, 286 < n2.nlen || 30 < n2.ndist) {
                    f2.msg = "too many length or distance symbols", n2.mode = $;
                    break;
                  }
                  n2.have = 0, n2.mode = 16197;
                case 16197:
                  for (; n2.have < n2.ncode; ) {
                    for (; h2 < 3; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    n2.lens[J2[n2.have++]] = 7 & c2, c2 >>>= 3, h2 -= 3;
                  }
                  for (; n2.have < 19; )
                    n2.lens[J2[n2.have++]] = 0;
                  if (n2.lencode = n2.lendyn, n2.lenbits = 7, k2 = { bits: n2.lenbits }, O2 = Ri(0, n2.lens, 0, 19, n2.lencode, 0, n2.work, k2), n2.lenbits = k2.bits, O2) {
                    f2.msg = "invalid code lengths set", n2.mode = $;
                    break;
                  }
                  n2.have = 0, n2.mode = 16198;
                case 16198:
                  for (; n2.have < n2.nlen + n2.ndist; ) {
                    for (; d2 = n2.lencode[c2 & (1 << n2.lenbits) - 1], w2 = d2 >>> 24, b2 = d2 >>> 16 & 255, y2 = 65535 & d2, !(w2 <= h2); ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    if (y2 < 16)
                      c2 >>>= w2, h2 -= w2, n2.lens[n2.have++] = y2;
                    else {
                      if (16 === y2) {
                        for (E2 = w2 + 2; h2 < E2; ) {
                          if (0 === o3)
                            break t;
                          o3--, c2 += i3[r3++] << h2, h2 += 8;
                        }
                        if (c2 >>>= w2, h2 -= w2, 0 === n2.have) {
                          f2.msg = "invalid bit length repeat", n2.mode = $;
                          break;
                        }
                        p2 = n2.lens[n2.have - 1], v2 = 3 + (3 & c2), c2 >>>= 2, h2 -= 2;
                      } else if (17 === y2) {
                        for (E2 = w2 + 3; h2 < E2; ) {
                          if (0 === o3)
                            break t;
                          o3--, c2 += i3[r3++] << h2, h2 += 8;
                        }
                        c2 >>>= w2, h2 -= w2, p2 = 0, v2 = 3 + (7 & c2), c2 >>>= 3, h2 -= 3;
                      } else {
                        for (E2 = w2 + 7; h2 < E2; ) {
                          if (0 === o3)
                            break t;
                          o3--, c2 += i3[r3++] << h2, h2 += 8;
                        }
                        c2 >>>= w2, h2 -= w2, p2 = 0, v2 = 11 + (127 & c2), c2 >>>= 7, h2 -= 7;
                      }
                      if (n2.have + v2 > n2.nlen + n2.ndist) {
                        f2.msg = "invalid bit length repeat", n2.mode = $;
                        break;
                      }
                      for (; v2--; )
                        n2.lens[n2.have++] = p2;
                    }
                  }
                  if (n2.mode === $)
                    break;
                  if (0 === n2.lens[256]) {
                    f2.msg = "invalid code -- missing end-of-block", n2.mode = $;
                    break;
                  }
                  if (n2.lenbits = 9, k2 = { bits: n2.lenbits }, O2 = Ri(Ii, n2.lens, 0, n2.nlen, n2.lencode, 0, n2.work, k2), n2.lenbits = k2.bits, O2) {
                    f2.msg = "invalid literal/lengths set", n2.mode = $;
                    break;
                  }
                  if (n2.distbits = 6, n2.distcode = n2.distdyn, k2 = { bits: n2.distbits }, O2 = Ri(Ni, n2.lens, n2.nlen, n2.ndist, n2.distcode, 0, n2.work, k2), n2.distbits = k2.bits, O2) {
                    f2.msg = "invalid distances set", n2.mode = $;
                    break;
                  }
                  if (n2.mode = Ji, t2 === Ui)
                    break t;
                case Ji:
                  n2.mode = Ki;
                case Ki:
                  if (6 <= o3 && 258 <= u2) {
                    f2.next_out = s3, f2.avail_out = u2, f2.next_in = r3, f2.avail_in = o3, n2.hold = c2, n2.bits = h2;
                    {
                      Z2 = void 0;
                      K2 = void 0;
                      A2 = void 0;
                      F2 = void 0;
                      j2 = void 0;
                      z2 = void 0;
                      T2 = void 0;
                      M2 = void 0;
                      x2 = void 0;
                      R2 = void 0;
                      B2 = void 0;
                      C2 = void 0;
                      H2 = void 0;
                      q2 = void 0;
                      I2 = void 0;
                      N2 = void 0;
                      D2 = void 0;
                      U2 = void 0;
                      var Z2 = f2;
                      var K2 = l2;
                      let t3;
                      let n3, i4, e4, r4, s4, o4, u3, c3;
                      var U2 = Z2.state;
                      t3 = Z2.next_in, N2 = Z2.input, A2 = t3 + (Z2.avail_in - 5), n3 = Z2.next_out, D2 = Z2.output, F2 = n3 - (K2 - Z2.avail_out), j2 = n3 + (Z2.avail_out - 257), z2 = U2.dmax, T2 = U2.wsize, M2 = U2.whave, x2 = U2.wnext, R2 = U2.window, i4 = U2.hold, e4 = U2.bits, B2 = U2.lencode, C2 = U2.distcode, H2 = (1 << U2.lenbits) - 1, q2 = (1 << U2.distbits) - 1;
                      n:
                        do {
                          for (e4 < 15 && (i4 += N2[t3++] << e4, e4 += 8, i4 += N2[t3++] << e4, e4 += 8), r4 = B2[i4 & H2]; ; ) {
                            if (s4 = r4 >>> 24, i4 >>>= s4, e4 -= s4, 0 === (s4 = r4 >>> 16 & 255))
                              D2[n3++] = 65535 & r4;
                            else {
                              if (!(16 & s4)) {
                                if (0 == (64 & s4)) {
                                  r4 = B2[(65535 & r4) + (i4 & (1 << s4) - 1)];
                                  continue;
                                }
                                if (32 & s4) {
                                  U2.mode = Ei;
                                  break n;
                                }
                                Z2.msg = "invalid literal/length code", U2.mode = ki;
                                break n;
                              }
                              for (o4 = 65535 & r4, (s4 &= 15) && (e4 < s4 && (i4 += N2[t3++] << e4, e4 += 8), o4 += i4 & (1 << s4) - 1, i4 >>>= s4, e4 -= s4), e4 < 15 && (i4 += N2[t3++] << e4, e4 += 8, i4 += N2[t3++] << e4, e4 += 8), r4 = C2[i4 & q2]; ; ) {
                                if (s4 = r4 >>> 24, i4 >>>= s4, e4 -= s4, !(16 & (s4 = r4 >>> 16 & 255))) {
                                  if (0 == (64 & s4)) {
                                    r4 = C2[(65535 & r4) + (i4 & (1 << s4) - 1)];
                                    continue;
                                  }
                                  Z2.msg = "invalid distance code", U2.mode = ki;
                                  break n;
                                }
                                if (I2 = 65535 & r4, s4 &= 15, e4 < s4 && (i4 += N2[t3++] << e4, (e4 += 8) < s4) && (i4 += N2[t3++] << e4, e4 += 8), z2 < (I2 += i4 & (1 << s4) - 1)) {
                                  Z2.msg = "invalid distance too far back", U2.mode = ki;
                                  break n;
                                }
                                if (i4 >>>= s4, e4 -= s4, I2 > (s4 = n3 - F2)) {
                                  if ((s4 = I2 - s4) > M2 && U2.sane) {
                                    Z2.msg = "invalid distance too far back", U2.mode = ki;
                                    break n;
                                  }
                                  if (u3 = 0, c3 = R2, 0 === x2) {
                                    if (u3 += T2 - s4, s4 < o4) {
                                      for (o4 -= s4; D2[n3++] = R2[u3++], --s4; )
                                        ;
                                      u3 = n3 - I2, c3 = D2;
                                    }
                                  } else if (x2 < s4) {
                                    if (u3 += T2 + x2 - s4, (s4 -= x2) < o4) {
                                      for (o4 -= s4; D2[n3++] = R2[u3++], --s4; )
                                        ;
                                      if (u3 = 0, x2 < o4) {
                                        for (s4 = x2, o4 -= s4; D2[n3++] = R2[u3++], --s4; )
                                          ;
                                        u3 = n3 - I2, c3 = D2;
                                      }
                                    }
                                  } else if (u3 += x2 - s4, s4 < o4) {
                                    for (o4 -= s4; D2[n3++] = R2[u3++], --s4; )
                                      ;
                                    u3 = n3 - I2, c3 = D2;
                                  }
                                  for (; 2 < o4; )
                                    D2[n3++] = c3[u3++], D2[n3++] = c3[u3++], D2[n3++] = c3[u3++], o4 -= 3;
                                  o4 && (D2[n3++] = c3[u3++], 1 < o4) && (D2[n3++] = c3[u3++]);
                                } else {
                                  for (u3 = n3 - I2; D2[n3++] = D2[u3++], D2[n3++] = D2[u3++], D2[n3++] = D2[u3++], 2 < (o4 -= 3); )
                                    ;
                                  o4 && (D2[n3++] = D2[u3++], 1 < o4) && (D2[n3++] = D2[u3++]);
                                }
                                break;
                              }
                            }
                            break;
                          }
                        } while (t3 < A2 && n3 < j2);
                      o4 = e4 >> 3, t3 -= o4, e4 -= o4 << 3, i4 &= (1 << e4) - 1, Z2.next_in = t3, Z2.next_out = n3, Z2.avail_in = t3 < A2 ? A2 - t3 + 5 : 5 - (t3 - A2), Z2.avail_out = n3 < j2 ? j2 - n3 + 257 : 257 - (n3 - j2), U2.hold = i4, U2.bits = e4;
                    }
                    s3 = f2.next_out, e3 = f2.output, u2 = f2.avail_out, r3 = f2.next_in, i3 = f2.input, o3 = f2.avail_in, c2 = n2.hold, h2 = n2.bits, n2.mode === X && (n2.back = -1);
                    break;
                  }
                  for (n2.back = 0; d2 = n2.lencode[c2 & (1 << n2.lenbits) - 1], w2 = d2 >>> 24, b2 = d2 >>> 16 & 255, y2 = 65535 & d2, !(w2 <= h2); ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  if (b2 && 0 == (240 & b2)) {
                    for (m2 = w2, _2 = b2, g2 = y2; d2 = n2.lencode[g2 + ((c2 & (1 << m2 + _2) - 1) >> m2)], w2 = d2 >>> 24, b2 = d2 >>> 16 & 255, y2 = 65535 & d2, !(m2 + w2 <= h2); ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    c2 >>>= m2, h2 -= m2, n2.back += m2;
                  }
                  if (c2 >>>= w2, h2 -= w2, n2.back += w2, n2.length = y2, 0 === b2) {
                    n2.mode = 16205;
                    break;
                  }
                  if (32 & b2) {
                    n2.back = -1, n2.mode = X;
                    break;
                  }
                  if (64 & b2) {
                    f2.msg = "invalid literal/length code", n2.mode = $;
                    break;
                  }
                  n2.extra = 15 & b2, n2.mode = 16201;
                case 16201:
                  if (n2.extra) {
                    for (E2 = n2.extra; h2 < E2; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    n2.length += c2 & (1 << n2.extra) - 1, c2 >>>= n2.extra, h2 -= n2.extra, n2.back += n2.extra;
                  }
                  n2.was = n2.length, n2.mode = 16202;
                case 16202:
                  for (; d2 = n2.distcode[c2 & (1 << n2.distbits) - 1], w2 = d2 >>> 24, b2 = d2 >>> 16 & 255, y2 = 65535 & d2, !(w2 <= h2); ) {
                    if (0 === o3)
                      break t;
                    o3--, c2 += i3[r3++] << h2, h2 += 8;
                  }
                  if (0 == (240 & b2)) {
                    for (m2 = w2, _2 = b2, g2 = y2; d2 = n2.distcode[g2 + ((c2 & (1 << m2 + _2) - 1) >> m2)], w2 = d2 >>> 24, b2 = d2 >>> 16 & 255, y2 = 65535 & d2, !(m2 + w2 <= h2); ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    c2 >>>= m2, h2 -= m2, n2.back += m2;
                  }
                  if (c2 >>>= w2, h2 -= w2, n2.back += w2, 64 & b2) {
                    f2.msg = "invalid distance code", n2.mode = $;
                    break;
                  }
                  n2.offset = y2, n2.extra = 15 & b2, n2.mode = 16203;
                case 16203:
                  if (n2.extra) {
                    for (E2 = n2.extra; h2 < E2; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    n2.offset += c2 & (1 << n2.extra) - 1, c2 >>>= n2.extra, h2 -= n2.extra, n2.back += n2.extra;
                  }
                  if (n2.offset > n2.dmax) {
                    f2.msg = "invalid distance too far back", n2.mode = $;
                    break;
                  }
                  n2.mode = 16204;
                case 16204:
                  if (0 === u2)
                    break t;
                  if (v2 = l2 - u2, n2.offset > v2) {
                    if ((v2 = n2.offset - v2) > n2.whave && n2.sane) {
                      f2.msg = "invalid distance too far back", n2.mode = $;
                      break;
                    }
                    L2 = v2 > n2.wnext ? (v2 -= n2.wnext, n2.wsize - v2) : n2.wnext - v2, v2 > n2.length && (v2 = n2.length), P2 = n2.window;
                  } else
                    P2 = e3, L2 = s3 - n2.offset, v2 = n2.length;
                  for (v2 > u2 && (v2 = u2), u2 -= v2, n2.length -= v2; e3[s3++] = P2[L2++], --v2; )
                    ;
                  0 === n2.length && (n2.mode = Ki);
                  break;
                case 16205:
                  if (0 === u2)
                    break t;
                  e3[s3++] = n2.length, u2--, n2.mode = Ki;
                  break;
                case 16206:
                  if (n2.wrap) {
                    for (; h2 < 32; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 |= i3[r3++] << h2, h2 += 8;
                    }
                    if (l2 -= u2, f2.total_out += l2, n2.total += l2, 4 & n2.wrap && l2 && (f2.adler = n2.check = (n2.flags ? G : Kt)(n2.check, e3, l2, s3 - l2)), l2 = u2, 4 & n2.wrap && (n2.flags ? c2 : $i(c2)) !== n2.check) {
                      f2.msg = "incorrect data check", n2.mode = $;
                      break;
                    }
                    c2 = 0, h2 = 0;
                  }
                  n2.mode = 16207;
                case 16207:
                  if (n2.wrap && n2.flags) {
                    for (; h2 < 32; ) {
                      if (0 === o3)
                        break t;
                      o3--, c2 += i3[r3++] << h2, h2 += 8;
                    }
                    if (4 & n2.wrap && c2 !== (4294967295 & n2.total)) {
                      f2.msg = "incorrect length check", n2.mode = $;
                      break;
                    }
                    c2 = 0, h2 = 0;
                  }
                  n2.mode = 16208;
                case 16208:
                  O2 = Pi;
                  break t;
                case $:
                  O2 = zi;
                  break t;
                case 16210:
                  return Mi;
                default:
                  Gi;
                  return W;
              }
          return f2.next_out = s3, f2.avail_out = u2, f2.next_in = r3, f2.avail_in = o3, n2.hold = c2, n2.bits = h2, (n2.wsize || l2 !== f2.avail_out && n2.mode < $ && (n2.mode < 16206 || t2 !== Di)) && oe(f2, f2.output, f2.next_out, l2 - f2.avail_out), a2 -= f2.avail_in, l2 -= f2.avail_out, f2.total_in += a2, f2.total_out += l2, n2.total += l2, 4 & n2.wrap && l2 && (f2.adler = n2.check = (n2.flags ? G : Kt)(n2.check, e3, l2, f2.next_out - l2)), f2.data_type = n2.bits + (n2.last ? 64 : 0) + (n2.mode === X ? 128 : 0) + (n2.mode === Ji || 16194 === n2.mode ? 256 : 0), O2 = (0 == a2 && 0 === l2 || t2 === Di) && O2 === Li ? Bi : O2;
        }, inflateEnd: (t2) => {
          var n2;
          return Qi(t2) ? W : ((n2 = t2.state).window && (n2.window = null), t2.state = null, Li);
        }, inflateGetHeader: (t2, n2) => Qi(t2) || 0 == (2 & (t2 = t2.state).wrap) ? W : ((t2.head = n2).done = false, Li), inflateSetDictionary: (t2, n2) => {
          var i3, e3 = n2.length;
          return Qi(t2) || 0 !== (i3 = t2.state).wrap && i3.mode !== qi ? W : i3.mode === qi && Kt(1, n2, e3, 0) !== i3.check ? zi : oe(t2, n2, e3, e3) ? (i3.mode = 16210, Mi) : (i3.havedict = 1, Li);
        }, inflateInfo: "pako inflate (from Nodeca project)" };
        var ue = function() {
          this.text = 0, this.time = 0, this.xflags = 0, this.os = 0, this.extra = null, this.extra_len = 0, this.name = "", this.comment = "", this.hcrc = 0, this.done = false;
        };
        let ce = Object.prototype.toString, { Z_NO_FLUSH: fe, Z_FINISH: he, Z_OK: ae, Z_STREAM_END: le, Z_NEED_DICT: ve, Z_STREAM_ERROR: de, Z_DATA_ERROR: we, Z_MEM_ERROR: be } = n;
        function ye(t2) {
          this.options = Qn({ chunkSize: 65536, windowBits: 15, to: "" }, t2 || {});
          var n2 = this.options, t2 = (n2.raw && 0 <= n2.windowBits && n2.windowBits < 16 && (n2.windowBits = -n2.windowBits, 0 === n2.windowBits) && (n2.windowBits = -15), !(0 <= n2.windowBits && n2.windowBits < 16) || t2 && t2.windowBits || (n2.windowBits += 32), 15 < n2.windowBits && n2.windowBits < 48 && 0 == (15 & n2.windowBits) && (n2.windowBits |= 15), this.err = 0, this.msg = "", this.ended = false, this.chunks = [], this.strm = new si(), this.strm.avail_out = 0, S.inflateInit2(this.strm, n2.windowBits));
          if (t2 !== ae)
            throw new Error(Wt[t2]);
          if (this.header = new ue(), S.inflateGetHeader(this.strm, this.header), n2.dictionary && ("string" == typeof n2.dictionary ? n2.dictionary = ii(n2.dictionary) : "[object ArrayBuffer]" === ce.call(n2.dictionary) && (n2.dictionary = new Uint8Array(n2.dictionary)), n2.raw) && (t2 = S.inflateSetDictionary(this.strm, n2.dictionary)) !== ae)
            throw new Error(Wt[t2]);
        }
        function me(t2, n2) {
          n2 = new ye(n2);
          if (n2.push(t2), n2.err)
            throw n2.msg || Wt[n2.err];
          return n2.result;
        }
        ye.prototype.push = function(t2, n2) {
          var i3, e3, r3, s3 = this.strm, o3 = this.options.chunkSize, u2 = this.options.dictionary;
          let c2, f2, h2;
          if (this.ended)
            return false;
          for (f2 = n2 === ~~n2 ? n2 : true === n2 ? he : fe, "[object ArrayBuffer]" === ce.call(t2) ? s3.input = new Uint8Array(t2) : s3.input = t2, s3.next_in = 0, s3.avail_in = s3.input.length; ; ) {
            for (0 === s3.avail_out && (s3.output = new Uint8Array(o3), s3.next_out = 0, s3.avail_out = o3), (c2 = S.inflate(s3, f2)) === ve && u2 && ((c2 = S.inflateSetDictionary(s3, u2)) === ae ? c2 = S.inflate(s3, f2) : c2 === we && (c2 = ve)); 0 < s3.avail_in && c2 === le && 0 < s3.state.wrap && 0 !== t2[s3.next_in]; )
              S.inflateReset(s3), c2 = S.inflate(s3, f2);
            switch (c2) {
              case de:
              case we:
              case ve:
              case be:
                return this.onEnd(c2), !(this.ended = true);
            }
            if (h2 = s3.avail_out, !s3.next_out || 0 !== s3.avail_out && c2 !== le || ("string" === this.options.to ? (i3 = ri(s3.output, s3.next_out), e3 = s3.next_out - i3, r3 = ei(s3.output, i3), s3.next_out = e3, s3.avail_out = o3 - e3, e3 && s3.output.set(s3.output.subarray(i3, i3 + e3), 0), this.onData(r3)) : this.onData(s3.output.length === s3.next_out ? s3.output : s3.output.subarray(0, s3.next_out))), c2 !== ae || 0 !== h2) {
              if (c2 === le)
                return c2 = S.inflateEnd(this.strm), this.onEnd(c2), this.ended = true;
              if (0 === s3.avail_in)
                break;
            }
          }
          return true;
        }, ye.prototype.onData = function(t2) {
          this.chunks.push(t2);
        }, ye.prototype.onEnd = function(t2) {
          t2 === ae && ("string" === this.options.to ? this.result = this.chunks.join("") : this.result = Vn(this.chunks)), this.chunks = [], this.err = t2, this.msg = this.strm.msg;
        };
        var t = Si.deflate, c = { inflate: me }.inflate, _e = t, ge = c, pe = (Oe.prototype.add = function(t2) {
          this.isStarting && (this.count += t2);
        }, Oe.prototype.stop = function() {
          return this.isStarting = false, this.reset();
        }, Oe.prototype.start = function(n2) {
          var i3 = this;
          void 0 === n2 && (n2 = 0), this.isStarting = true, this.count = 0, clearInterval(this.timer), n2 && (this.timer = window.setInterval(function() {
            var t2 = i3.count;
            i3.speed = t2 / n2, i3.count = 0;
          }, n2));
        }, Oe.prototype.reset = function() {
          this.count = 0, clearInterval(this.timer), this.timer = 0, this.speed = 0;
        }, Oe);
        function Oe(t2) {
          this.R = t2 = void 0 === t2 ? "" : t2, this.count = 0, this.isStarting = false, this.timer = 0, this.lastLogTime = 0, this.speed = 0, this.lastTime = 0;
        }
        var Se = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, ke = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        };
        function Ee(r3, s3, o3) {
          return Se(this, void 0, void 0, function() {
            var n2, i3, e3;
            return ke(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return n2 = "", i3 = ((t3) => {
                    t3 = t3 || 32;
                    for (var n3 = "abcdefhijkmnprstwxyz0123456789", i4 = n3.length, e4 = "", r4 = 0; r4 < t3; r4++)
                      e4 += n3.charAt(Math.floor(Math.random() * i4));
                    return e4;
                  })(16), [4, function(e4) {
                    var r4;
                    return Se(this, void 0, void 0, function() {
                      var n3, i4;
                      return ke(this, function(t3) {
                        switch (t3.label) {
                          case 0:
                            return n3 = new TextEncoder().encode(e4), [4, null == (r4 = crypto.subtle) ? void 0 : r4.digest("SHA-256", n3)];
                          case 1:
                            return n3 = t3.sent(), i4 = Array.from(new Uint8Array(n3)), [2, i4.map(function(t4) {
                              return t4.toString(16).padStart(2, "0");
                            }).join("")];
                        }
                      });
                    });
                  }("".concat(r3).concat("DPIV9g5X2zvTD4Zj").concat(i3).concat(o3))];
                case 1:
                  return (e3 = (e3 = t2.sent()).toLocaleLowerCase()) && (e3 = { ver: s3, hash: e3, nonce: i3, expire: o3 }, e3 = JSON.stringify(e3), n2 = btoa(e3)), [2, n2];
              }
            });
          });
        }
        function Ae(e3) {
          return Se(this, void 0, void 0, function() {
            var n2, i3;
            return ke(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return n2 = "", i3 = Math.floor((Date.now() + 7776e6) / 1e3), [4, Ee(e3, 2, i3)];
                case 1:
                  return i3 = t2.sent(), [2, n2 = 0 < i3.length ? i3 : n2];
              }
            });
          });
        }
        var je = function() {
          return (je = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, Te = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, xe = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, Re = function(t2, n2, i3) {
          if (i3 || 2 === arguments.length)
            for (var e3, r3 = 0, s3 = n2.length; r3 < s3; r3++)
              !e3 && r3 in n2 || ((e3 = e3 || Array.prototype.slice.call(n2, 0, r3))[r3] = n2[r3]);
          return t2.concat(e3 || Array.prototype.slice.call(n2));
        }, Ie = (Object.defineProperty(k.prototype, "speed", { get: function() {
          return this.I.speed;
        }, enumerable: false, configurable: true }), Object.defineProperty(k.prototype, "url", { get: function() {
          return this.N.url;
        }, set: function(t2) {
          this.N.url = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(k.prototype, "strategy", { get: function() {
          return this.D.strategy;
        }, enumerable: false, configurable: true }), k.prototype.setStrategy = function(t2) {
          var n2;
          0 === t2 ? (this.D.setStrategy(t2), null != (n2 = this.Z) && n2.destroy(), this.Z = null) : this.D.strategy != t2 && (null != (n2 = this.Z) && n2.destroy(), this.D.setStrategy(t2), this.Z = this.D.build());
        }, k.prototype.addRemoteWsLog = function(t2) {
          if (this.N.env != o2.BROWSER)
            throw new Error("cannot use net strategy on  mini program");
          for (this.U.push(t2); this.U.size() > this.U.logCacheMax; )
            this.U.removeALog();
          this.connected() && this.Z && this.Z.active();
        }, k.prototype.stopWebSocketServer = function() {
          this.clearHbTimer(), this.L = void 0, this.g && (this.g.onclose = null, this.g.onerror = null, this.g.close(), this.g = null);
        }, k.prototype.P = function() {
          this.g && this.N.useStrategy && (this.Z = this.D.build());
        }, k.prototype.F = function(t2) {
          for (var n2 = [], i3 = 1; i3 < arguments.length; i3++)
            n2[i3 - 1] = arguments[i3];
          var e3 = this.M = this.B, r3 = "";
          switch (t2) {
            case "onconnecting":
              "never_opened" === this.B ? this.B = "first_connecting" : this.B = "reconnecting";
              break;
            case "onopen":
              this.B = "connected", this.I.start(3e3), this.onSocketConnect();
              break;
            case "onclosed":
              this.B = "closed";
              var s3 = n2[0];
              s3 && (r3 += " close code=".concat(s3.code)), this.I.stop(), this.onSocketClose();
              break;
            case "onerror":
              this.B = "error", this.I.stop(), this.onSocketError();
          }
          t2 = B.WEBSOCKET_STATE_CHANGE + " log ws state change: ".concat(e3, " -> ").concat(this.B);
          r3 && (t2 += r3), "error" === this.B ? this.C.warn(t2) : this.C.info(t2);
        }, k.prototype.onSocketConnect = function() {
        }, k.prototype.onSocketClose = function() {
        }, k.prototype.onSocketError = function() {
        }, k.prototype.onHeartBeatTimeout = function() {
        }, k.prototype.openWebSocketLogServer = function(t2, n2, i3, e3) {
          var r3 = this;
          void 0 === n2 && (n2 = false), void 0 === i3 && (i3 = false), "" === t2 || !i3 && this.url == t2 || ((this.url && "" !== this.url || "never_opened" === this.B) && this.C.info(B.OPEN_WS + " log url change to: ".concat(t2, " , ").concat(this.enabled)), (this.url = t2) && this.enabled && (i3 = function() {
            r3.H && (clearTimeout(r3.H), r3.H = null), r3.stopWebSocketServer(), r3.g = F(t2, r3.N.env, r3.q), r3.g instanceof WebSocket && (r3.g.binaryType = "arraybuffer"), r3.P(), r3.F("onconnecting"), r3.g.onopen = function() {
              var t3;
              r3.J = false, r3.L = void 0, r3.N.useStrategy && null != (t3 = r3.Z) && t3.active(), r3.F("onopen");
            }, r3.g.onclose = function() {
              for (var t3 = [], n3 = 0; n3 < arguments.length; n3++)
                t3[n3] = arguments[n3];
              r3.J = false, r3.F.apply(r3, Re(["onclosed"], t3, false));
            }, r3.g.onmessage = r3.K.bind(r3), r3.g.onerror = function() {
              for (var t3 = 0; t3 < arguments.length; t3++)
                t3, 0;
              r3.F("onerror");
            };
          }, n2 ? i3() : (n2 = "error" === this.B || "error" === this.M, this.H || (this.H = setTimeout(i3, e3 || (n2 ? 5e3 : 3e3))))));
        }, k.prototype.resetSocketTimer = function() {
          this.H && (clearTimeout(this.H), this.H = null);
        }, k.prototype.closed = function() {
          return null == this.g || 2 == this.g.readyState || 3 == this.g.readyState;
        }, k.prototype.connected = function() {
          return null !== this.g && 1 == this.g.readyState;
        }, k.prototype.connecting = function() {
          return null !== this.g && 0 == this.g.readyState;
        }, Object.defineProperty(k.prototype, "canSendWs", { get: function() {
          var t2 = this.L, t2 = !t2 || performance.now() - t2 < 5e3;
          return !(!this.g || 1 !== this.g.readyState) && t2;
        }, enumerable: false, configurable: true }), k.prototype.sendLogFrame = function(i3) {
          var e3;
          return Te(this, void 0, void 0, function() {
            var n2;
            return xe(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return t2.trys.push([0, 2, , 3]), [4, this.makeLogFrame(i3)];
                case 1:
                  return n2 = t2.sent(), this.I.add(8 * n2.byteLength), this.connected() ? (null != (e3 = this.g) && e3.send(n2), [2, true]) : [2, false];
                case 2:
                  return t2.sent(), [2, true];
                case 3:
                  return [2];
              }
            });
          });
        }, k.prototype.makeLogFrame = function(o3) {
          return Te(this, void 0, void 0, function() {
            var n2, i3, e3, r3, s3;
            return xe(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return r3 = _e(o3), i3 = this.N, n2 = i3.appid, i3 = i3.userid, e3 = this.seq++, r3 = { detail_data: r3 }, this.J ? [3, 2] : [4, Ae(n2)];
                case 1:
                  if (!(s3 = t2.sent()))
                    throw new Error("litesign error");
                  r3 = je(je({}, r3), { appid: n2, product: 2, id_name: i3, timestamp: Math.floor(Date.now() / 1e3), litesign: s3 }), t2.label = 2;
                case 2:
                  return s3 = tt.rtcreport.DetailLogRequest.encode(r3).finish(), this.J = true, [2, this.G(e3, 7, s3)];
              }
            });
          });
        }, k.prototype.G = function(t2, n2, i3) {
          var e3 = (null == i3 ? void 0 : i3.length) || 0, r3 = new Uint8Array(10 + e3);
          return r3[0] = 64, r3[1] = n2, r3[2] = t2 >> 24 & 255, r3[3] = t2 >> 16 & 255, r3[4] = t2 >> 8 & 255, r3[5] = 255 & t2, r3[6] = e3 >> 24 & 255, r3[7] = e3 >> 16 & 255, r3[8] = e3 >> 8 & 255, r3[9] = 255 & e3, i3 && r3.set(i3, 10), r3;
        }, k.prototype.K = function(t2) {
          var t2 = new Uint8Array(t2.data), n2 = t2[0];
          this.L = performance.now(), this.startHbTimer(), 64 === n2 && 8 === t2[1] && (t2[2], t2[3], t2[4], t2[5], n2 = t2[6] << 24 | t2[7] << 16 | t2[8] << 8 | t2[9], t2 = new Uint8Array(t2.slice(10, 10 + n2)), 101 === tt.rtcreport.DetailLogResponse.decode(t2).code) && (this.J = false);
        }, k.prototype.clearLogCacheAndUpload = function() {
          var n2 = this;
          this.connected() && this.U.clear().forEach(function(t2) {
            n2.sendLogFrame(t2);
          });
        }, k.prototype.clearHbTimer = function() {
          this.checkHbTimer && (clearTimeout(this.checkHbTimer), this.checkHbTimer = void 0);
        }, k.prototype.startHbTimer = function() {
          var n2 = this;
          this.clearHbTimer(), void 0 !== this.L && 15e3 < performance.now() - this.L ? this.onHeartBeatTimeout() : this.checkHbTimer = setTimeout(function() {
            var t2;
            n2.g && (t2 = n2.G(n2.seq++, 5), n2.I.add(8 * t2.byteLength), n2.g.send(t2), n2.startHbTimer());
          }, 5e3);
        }, k.prototype.setUpBitrate = function(t2) {
          t2 /= 8, t2 = 2e3 <= t2 ? 5 : 200 <= t2 ? 4 : 100 <= t2 ? 3 : 10 <= t2 ? 2 : 1 <= t2 ? 1 : 0;
          return this.setStrategy(t2), t2;
        }, k.prototype.destroy = function() {
          this.g = null, this.I.stop();
        }, k);
        function k(t2, n2, i3, e3) {
          this.U = t2, this.N = n2, this.C = i3, this.q = e3, this.g = null, this.B = "never_opened", this.M = "never_opened", this.D = new ur(this), this.Z = null, this.J = false, this.H = null, this.enabled = true, this.seq = 1, this.L = void 0, this.checkHbTimer = void 0, this.I = new pe("detail log"), this.D.setCache(this.U);
        }
        De.prototype.active = function() {
          var i3 = this;
          this.W.canSendWs && 0 !== this.U.size() && this.X.canSendLog() && (this.X.getLog().forEach(function(n2) {
            i3.W.sendLogFrame(n2).then(function(t2) {
              !t2 && i3.W.enabled && i3.X.cacheLog(n2);
            });
          }), this.X.onSendLog());
        }, De.prototype.destroy = function() {
          this.X.onCanSendActive = void 0, this.X.destroy();
        };
        var Ne = De;
        function De(t2, n2, i3) {
          this.W = t2, this.U = n2, this.X = i3, this.X.onCanSendActive = this.active.bind(this);
        }
        function Ze(t2) {
          this.cache = t2;
        }
        Ue = function(t2, n2) {
          return (Ue = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        var Ue, Le;
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          Ue(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(Pe, Le = Ze), Pe.prototype.getLog = function() {
          return this.cache.clear();
        }, Pe.prototype.canSendLog = function() {
          return 0 < this.cache.size();
        }, Pe.prototype.onSendLog = function() {
        }, Pe.prototype.cacheLog = function(t2) {
          this.cache.push(t2);
        }, Pe.prototype.destroy = function() {
        };
        function Pe(t2) {
          return Le.call(this, t2) || this;
        }
        Fe = function(t2, n2) {
          return (Fe = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          Fe(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(Me, ze = Ze), Me.prototype.canSendLog = function() {
          return !this.locked && 0 < this.cache.size();
        }, Me.prototype.getLog = function() {
          for (var t2 = [], n2 = 0, i3 = false; !i3; ) {
            var e3 = this.cache.getOneLogPacket(this.maxPacketLen);
            if (!e3 || e3.length <= 0)
              break;
            var r3 = n2 + (e3.length || 0);
            r3 + this.cache.getOnePackMaxPacketLen(this.maxPacketLen) > this.maxPacketLen && (i3 = true), t2.push(e3), n2 = r3;
          }
          return this.lastTime = Date.now(), t2;
        }, Me.prototype.onSendLog = function() {
          var t2 = this;
          this.locked = true, this.timer = setTimeout(function() {
            t2.locked = false, t2.onCanSendActive && t2.onCanSendActive();
          }, this.maxDelay);
        }, Me.prototype.cacheLog = function(t2) {
          this.cache.cacheLogPacket(t2);
        }, Me.prototype.destroy = function() {
          this.timer && (clearTimeout(this.timer), this.timer = 0);
        };
        var Fe, ze, n = Me;
        function Me() {
          var t2 = null !== ze && ze.apply(this, arguments) || this;
          return t2.name = "NetworkFrequency", t2.maxDelay = 10, t2.maxPacketLen = 2e4, t2.locked = false, t2.lastTime = 0, t2.timer = 0, t2;
        }
        Be = function(t2, n2) {
          return (Be = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          Be(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(qe, Ce = n);
        var Be, Ce, He = qe;
        function qe(t2) {
          t2 = Ce.call(this, t2) || this;
          return t2.name = "MaxBW", t2.maxDelay = 10, t2.maxPacketLen = 2e4, t2;
        }
        Je = function(t2, n2) {
          return (Je = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          Je(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(We, Ke = n);
        var Je, Ke, Ge = We;
        function We(t2) {
          t2 = Ke.call(this, t2) || this;
          return t2.name = "HighBig", t2.maxDelay = 100, t2.maxPacketLen = 2e4, t2;
        }
        Xe = function(t2, n2) {
          return (Xe = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          Xe(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(Qe, $e = n);
        var Xe, $e, Ye = Qe;
        function Qe(t2) {
          t2 = $e.call(this, t2) || this;
          return t2.name = "HighSmall", t2.maxDelay = 100, t2.maxPacketLen = 1e4, t2;
        }
        Ve = function(t2, n2) {
          return (Ve = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          Ve(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(ir, tr = n);
        var Ve, tr, nr = ir;
        function ir(t2) {
          t2 = tr.call(this, t2) || this;
          return t2.name = "LowBig", t2.maxDelay = 500, t2.maxPacketLen = 5e3, t2;
        }
        er = function(t2, n2) {
          return (er = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          er(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(or, rr = n);
        var er, rr, sr = or;
        function or(t2) {
          t2 = rr.call(this, t2) || this;
          return t2.name = "LowSmall", t2.maxDelay = 1e3, t2.maxPacketLen = 1e3, t2;
        }
        Object.defineProperty(cr.prototype, "strategy", { get: function() {
          return this.X;
        }, enumerable: false, configurable: true }), cr.prototype.setCache = function(t2) {
          this.U = t2;
        }, cr.prototype.setStrategy = function(t2) {
          isNaN(t2) || (this.X = t2);
        }, cr.prototype.build = function() {
          if (!this.U)
            throw new Error("cannot build log sender");
          switch (this.X) {
            case 1:
              return new Ne(this.W, this.U, new sr(this.U));
            case 2:
              return new Ne(this.W, this.U, new nr(this.U));
            case 3:
              return new Ne(this.W, this.U, new Ye(this.U));
            case 4:
              return new Ne(this.W, this.U, new Ge(this.U));
            default:
              return new Ne(this.W, this.U, new He(this.U));
          }
        };
        var ur = cr;
        function cr(t2) {
          this.W = t2, this.X = 5;
        }
        E.Y = function() {
          return !(!window || !window.localStorage);
        }, E.bin2hex = function(t2) {
          for (var n2, i3 = "", e3 = 0, r3 = (t2 += "").length; e3 < r3; e3++)
            i3 += (n2 = t2.charCodeAt(e3).toString(16)).length < 2 ? "0" + n2 : n2;
          return i3;
        }, E.getCanvasFingerprint = function(t2) {
          var n2 = document.createElement("canvas"), i3 = n2.getContext("2d"), i3 = (i3.textBaseline = "top", i3.font = "14px 'Arial'", i3.fillStyle = "#f60", i3.fillRect(125, 1, 62, 20), i3.fillStyle = "#069", i3.fillText(t2, 2, 15), i3.fillStyle = "rgba(102, 204, 0, 0.7)", i3.fillText(t2, 4, 17), n2.toDataURL().replace("data:image/png;base64,", "")), t2 = atob(i3);
          return this.bin2hex(t2.slice(-16, -12));
        }, E.generateUUID = function() {
          var i3, t2, n2 = localStorage.getItem(this.V);
          return n2 || (i3 = (/* @__PURE__ */ new Date()).getTime(), n2 = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t3) {
            var n3 = (i3 + 16 * Math.random()) % 16 | 0;
            return i3 = Math.floor(i3 / 16), ("x" == t3 ? n3 : 3 & n3 | 8).toString(36);
          }), t2 = this.getCanvasFingerprint("hello, zego") + n2.slice(8), localStorage.setItem(this.V, t2), n2);
        }, E.id = function() {
          var t2;
          return E.Y() ? ((t2 = localStorage.getItem(this.V)) || (t2 = E.generateUUID(), localStorage.setItem(this.V, t2)), t2) : "";
        }, E.V = "z_deviceID";
        var fr = E;
        function E() {
        }
        var hr = function() {
          this.url = "", this.env = o2.BROWSER, this.useStrategy = true, this.token = "", this.deviceid = fr.id(), this.ipStackMode = Z.IPv4Prefer, this.networkState = U.online;
        };
        Object.defineProperty(ar.prototype, "buffer", { get: function() {
          return this.queue;
        }, set: function(t2) {
          this.queue = t2;
        }, enumerable: false, configurable: true }), ar.prototype.push = function(t2) {
          if (!t2)
            throw new Error("item null!");
          this.cacheByteLength += t2.length, t2 && this.queue.push(t2), this.cacheByteLength += t2.length;
        }, ar.prototype.pop = function() {
          var t2 = this.queue[0] || "";
          return this.cacheByteLength -= t2.length, this.queue.shift();
        }, ar.prototype.front = function() {
          return this.queue[0];
        }, ar.prototype.getFrontList = function(t2) {
          return this.queue.slice(0, t2 = void 0 === t2 ? 1 : t2);
        }, ar.prototype.removeFrontList = function(t2) {
          var n2 = this.getFrontList(t2 = void 0 === t2 ? 1 : t2).reduce(function(t3, n3) {
            return t3 += n3.length;
          }, 0);
          return this.cacheByteLength -= n2, this.queue.splice(0, t2);
        }, ar.prototype.clear = function() {
          this.timer && (console.warn("clear cache" + this.name), clearInterval(this.timer)), this.queue = [];
        };
        t = ar;
        function ar(t2) {
          this.name = t2 = void 0 === t2 ? "" : t2, this.queue = [], this.timer = 0, this.cacheByteLength = 0;
        }
        lr = function(t2, n2) {
          return (lr = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        var lr, vr, dr = function() {
          return (dr = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, wr = function(t2, n2, i3) {
          if (i3 || 2 === arguments.length)
            for (var e3, r3 = 0, s3 = n2.length; r3 < s3; r3++)
              !e3 && r3 in n2 || ((e3 = e3 || Array.prototype.slice.call(n2, 0, r3))[r3] = n2[r3]);
          return t2.concat(e3 || Array.prototype.slice.call(n2));
        }, br = (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          lr(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        }(yr, vr = t), yr.prototype.size = function() {
          return this.queue.length;
        }, yr.prototype.getOnePackMaxPacketLen = function(t2) {
          return t2 && t2 < this.tt ? t2 : this.tt;
        }, yr.prototype.getOneLogPacket = function(t2) {
          var n2 = [], i3 = 0, e3 = "";
          if (this.size()) {
            var r3 = JSON.parse(this.queue[this.queue.length - 1]).userid, s3 = this.N.userid || r3;
            if (s3) {
              for (var o3 = this.getOnePackMaxPacketLen(t2); 0 < this.queue.length && (!t2 || 0 === i3 || i3 < t2); ) {
                var u2 = this.queue[0].length;
                if (i3 && o3 < i3 + u2)
                  return e3 = JSON.stringify(n2);
                var c2 = JSON.parse(this.queue[0]), c2 = dr(dr({}, c2), { userid: c2.userid || s3, roomid: c2.roomid || this.N.roomid });
                i3 += u2, n2.push(c2), this.pop();
              }
              return "" === (e3 = JSON.stringify(n2)) ? void 0 : e3;
            }
          }
        }, yr.prototype.cacheLogPacket = function(t2) {
          var t2 = JSON.parse(t2);
          this.size() + t2.length < this.logCacheMax && (t2 = t2.map(function(t3) {
            return JSON.stringify(t3);
          }), this.queue = wr(wr([], t2, true), this.queue, true));
        }, yr.prototype.clear = function() {
          for (var t2 = []; 0 < this.queue.length; ) {
            var n2 = this.getOneLogPacket();
            if (!n2)
              break;
            t2.push(n2);
          }
          return t2;
        }, yr.prototype.removeALog = function() {
          for (var t2 = this.queue, n2 = 0; n2 < t2.length; n2++) {
            var i3 = void 0;
            try {
              i3 = JSON.parse(t2[n2]);
            } catch (t3) {
            }
            if (!i3 || i3.level < 2)
              return void (this.queue = wr(wr([], t2.slice(0, n2), true), t2.slice(n2 + 1), true));
          }
          this.pop();
        }, yr);
        function yr(t2, n2) {
          void 0 === n2 && (n2 = 1 / 0);
          var i3 = vr.call(this, "ws cache") || this;
          return i3.logCacheMax = n2, i3.tt = 64e3, i3.N = t2, i3;
        }
        var mr = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, _r = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, gr = (A.fetchWhitelist = function(a2, l2) {
          return mr(this, void 0, void 0, function() {
            var n2, i3, e3, r3, s3, o3, u2, c2, f2, h2;
            return _r(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return (s3 = a2.product, n2 = a2.appID, h2 = a2.userID, i3 = a2.token, e3 = a2.deviceID, u2 = a2.bizType, r3 = (r3 = this.domains[this.activeIndex]) || "detaillog-global.zego.im", r3 = "https://".concat(r3, "/zglog/whitelist"), s3 = { product: s3, biz_type: "" + u2, appid: "" + n2, uin: h2, timestamp: "" + Date.now(), deviceid: e3 }, i3) ? (s3.token = i3, [3, 3]) : [3, 1];
                case 1:
                  return o3 = s3, [4, Ae(n2)];
                case 2:
                  o3.litesign = t2.sent(), t2.label = 3;
                case 3:
                  return (u2 = new URLSearchParams(s3), c2 = "".concat(r3, "?").concat(u2.toString()), l2) ? [4, new Promise(function(n3, i4) {
                    l2.startHttpRequest({ location: c2, method_no: 1, serviceType: 2 }, function(t3) {
                      200 === t3.status_code ? n3(t3.body) : i4("request fail. status=" + t3.status_code);
                    }, function(t3) {
                      i4("request fail. result: " + JSON.stringify(t3));
                    });
                  })] : [3, 5];
                case 4:
                  return [2, t2.sent()];
                case 5:
                  return t2.trys.push([5, 10, , 14]), [4, fetch(c2, { method: "GET" })];
                case 6:
                  return (f2 = t2.sent()).ok ? [4, f2.json()] : [3, 8];
                case 7:
                  return [2, t2.sent()];
                case 8:
                  throw "get list fail. status=" + f2.status + "msg=" + f2.statusText;
                case 9:
                  return [3, 14];
                case 10:
                  if (h2 = t2.sent(), A.activeIndex !== A.domains.length - 1)
                    return [3, 11];
                  throw A.activeIndex = 0, "get list fail. error ".concat(h2, " ").concat(JSON.stringify(h2));
                case 11:
                  return A.activeIndex++, [4, A.fetchWhitelist(a2, l2)];
                case 12:
                  return [2, t2.sent()];
                case 13:
                  return [3, 14];
                case 14:
                  return [2];
              }
            });
          });
        }, A.domains = [], A.activeIndex = 0, A);
        function A() {
        }
        var pr = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, Or = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, Sr = (kr.prototype.nt = function(t2) {
          return "file_" + t2;
        }, kr.prototype.saveLogs = function(t2, n2, i3, e3) {
          n2 = n2.map(function(t3) {
            return { log: t3, instanceId: i3 };
          });
          return this.it.addList(this.nt(t2), n2);
        }, kr.prototype.queryList = function(t2, n2, i3) {
          n2 = [{ field: "instanceId", value: n2 }];
          return this.it.queryByCursor(this.nt(t2), { maxCount: i3, conditions: n2 });
        }, kr.prototype.storedBytesSize = function(s3) {
          var t2 = this;
          return new Promise(function(e3, r3) {
            return pr(t2, void 0, void 0, function() {
              var n2, i3;
              return Or(this, function(t3) {
                return n2 = this.it.openCursor(this.nt(s3)), i3 = 0, n2.onsuccess = function(t4) {
                  var n3, t4 = null == (t4 = t4.target) ? void 0 : t4.result;
                  t4 ? (n3 = t4.value, i3 += n3.log.length, t4.continue()) : e3(i3);
                }, n2.onerror = function(t4) {
                  r3(t4);
                }, [2];
              });
            });
          });
        }, kr.prototype.lines = function(t2, n2) {
          return this.it.lines(this.nt(t2), isNaN(n2) ? void 0 : [{ field: "instanceId", value: n2 }]);
        }, kr.prototype.deleteAll = function(t2, n2) {
          return this.it.deleteAll(this.nt(t2), n2);
        }, kr);
        function kr(t2) {
          this.it = t2;
        }
        var Er = function() {
          return (Er = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, Ar = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, jr = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, Tr = (xr.prototype.save = function(t2, n2) {
          return this.it.save(this.et, t2, n2);
        }, xr.prototype.queryList = function(t2, n2) {
          return this.it.getAll(this.et, t2, n2);
        }, xr.prototype.delete = function(t2, n2) {
          return this.it.deleteItems(this.et, t2, n2);
        }, xr.prototype.lines = function() {
          return this.it.lines(this.et);
        }, xr.prototype.deleteByCount = function(t2) {
          return this.it.deleteByCount(this.et, t2);
        }, xr.prototype.deleteAll = function() {
          return this.it.deleteAll(this.et);
        }, xr.prototype.getItem = function(t2, n2) {
          return this.it.queryById(this.et, t2, n2);
        }, xr.prototype.update = function(i3, e3) {
          return Ar(this, void 0, void 0, function() {
            var n2;
            return jr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return [4, this.getItem(i3.id, e3)];
                case 1:
                  return (n2 = t2.sent()) ? (n2 = Er(Er({}, n2), i3), [2, this.it.update(this.et, n2, e3)]) : [2];
              }
            });
          });
        }, xr);
        function xr(t2) {
          this.it = t2, this.et = "log_instance";
        }
        Ir.prototype.save = function(t2, n2) {
          return this.it.save(this.et, t2, n2);
        }, Ir.prototype.update = function(t2, n2) {
          return this.it.update(this.et, t2, n2);
        }, Ir.prototype.delete = function(t2, n2) {
          return this.it.deleteItems(this.et, [t2], n2);
        }, Ir.prototype.queryList = function(t2) {
          return this.it.queryByCursor(this.et, { transaction: t2 });
        };
        var Rr = Ir;
        function Ir(t2) {
          this.it = t2, this.et = "file_usage";
        }
        var Nr = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, Dr = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, Zr = (j.prototype.openDB = function(n2, s3) {
          return Nr(this, void 0, void 0, function() {
            var e3, r3 = this;
            return Dr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return e3 = window.indexedDB.open(s3.database + "_" + n2, s3.version), [4, new Promise(function(i3) {
                    e3.onupgradeneeded = function(t3) {
                      var i4 = t3.target.result;
                      s3.tableList.forEach(function(t4) {
                        var n3;
                        i4.objectStoreNames.contains(t4.tableName) || (n3 = i4.createObjectStore(t4.tableName, { keyPath: "id", autoIncrement: true }), t4.tableItems.forEach(function(t5) {
                          t5.index && n3.createIndex(t5.itemName, t5.itemName, { unique: t5.unique });
                        }));
                      });
                    }, e3.onsuccess = function(t3) {
                      var n3 = null == (t3 = t3.target) ? void 0 : t3.result;
                      (r3.rt = n3).onclose = function() {
                        r3.onDBClose && r3.onDBClose(), r3.rt = void 0, e3.onsuccess = null, e3.onupgradeneeded = null, n3.onclose = null;
                      }, i3(e3);
                    };
                  })];
                case 1:
                  return t2.sent(), [2];
              }
            });
          });
        }, j.prototype.closeDB = function() {
          var n2;
          return Nr(this, void 0, void 0, function() {
            return Dr(this, function(t2) {
              return this.rt && (null != (n2 = this.rt) && n2.close(), this.rt = void 0), [2];
            });
          });
        }, j.prototype.st = function() {
          if (!this.rt)
            throw new Error("indexDB not open");
        }, j.prototype.getTransaction = function(t2, n2) {
          return void 0 === n2 && (n2 = false), this.st(), this.rt.transaction(t2, n2 ? "readwrite" : void 0);
        }, j.prototype.save = function(i3, e3, r3) {
          var s3 = this;
          return new Promise(function(t2) {
            var n2 = (r3 = r3 || s3.getTransaction([i3], true)).objectStore(i3).add(e3);
            n2.onsuccess = function() {
              return t2(n2.result);
            };
          });
        }, j.prototype.addList = function(i3, e3, s3) {
          return Nr(this, void 0, void 0, function() {
            var r3, n2;
            return Dr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return s3 = s3 || this.getTransaction([i3], true), r3 = s3.objectStore(i3), n2 = [], e3.forEach(function(e4) {
                    var t3 = new Promise(function(t4, n3) {
                      var i4 = r3.add(e4);
                      i4.onsuccess = function() {
                        return t4();
                      }, i4.onerror = function(t5) {
                        return n3(i4.error);
                      };
                    });
                    n2.push(t3);
                  }), [4, Promise.all(n2)];
                case 1:
                  return t2.sent(), [2];
              }
            });
          });
        }, j.prototype.update = function(n2, i3, e3) {
          var r3 = this;
          return new Promise(function(t2) {
            (e3 = e3 || r3.getTransaction([n2], true)).objectStore(n2).put(i3).onsuccess = function() {
              return t2();
            };
          });
        }, j.prototype.queryById = function(i3, e3, r3) {
          var s3 = this;
          return new Promise(function(t2) {
            var n2 = (r3 = r3 || s3.getTransaction([i3])).objectStore(i3).get(e3);
            n2.onsuccess = function() {
              return t2(n2.result || null);
            };
          });
        }, j.prototype.queryByCursor = function(c2, f2) {
          var h2 = this;
          return new Promise(function(i3, n2) {
            var e3 = f2.maxCount, r3 = f2.conditions, t2 = f2.transaction, t2 = (t2 || h2.getTransaction([c2])).objectStore(c2), s3 = [], o3 = null, u2 = (o3 = r3 && 0 < r3.length && (u2 = r3[0], t2.indexNames.contains(u2.field)) ? t2.index(u2.field) : o3) && null != r3 && r3.length ? o3.openCursor(h2.ot(r3[0])) : t2.openCursor();
            u2.onsuccess = function(t3) {
              var n3, t3 = t3.target.result;
              t3 && (!e3 || s3.length < e3) ? (n3 = t3.value, null != r3 && r3.length && !h2.ut(n3, r3) || s3.push(n3), t3.continue()) : i3(s3);
            }, u2.onerror = function(t3) {
              n2(t3.target.error);
            };
          });
        }, j.prototype.getAll = function(e3, r3, s3) {
          var o3 = this;
          return new Promise(function(t2, n2) {
            var i3 = (s3 = s3 || o3.getTransaction([e3])).objectStore(e3).getAll(void 0, r3);
            i3.onsuccess = function() {
              return t2(i3.result);
            }, i3.onerror = function(t3) {
              n2(t3);
            };
          });
        }, j.prototype.lines = function(c2, f2, h2) {
          var a2 = this;
          return new Promise(function(i3, n2) {
            var t2, e3 = (h2 = h2 || a2.getTransaction([c2])).objectStore(c2), r3 = 0, s3 = !(null == f2 || !f2.length), o3 = void 0, u2 = null;
            f2 && 0 < f2.length ? (o3 = f2[0], (u2 = (s3 = e3.indexNames.contains(o3.field) && (u2 = e3.index(o3.field)) && 1 === f2.length ? false : s3) ? u2 && o3 ? u2.openCursor(a2.ot(o3)) : e3.openCursor(void 0) : u2 && o3 ? u2.openKeyCursor(a2.ot(o3)) : e3.openKeyCursor(void 0)).onsuccess = function(t3) {
              var n3, t3 = t3.target.result;
              t3 ? (s3 && (n3 = t3.value, null != f2) && f2.length && !a2.ut(n3, f2) || r3++, t3.continue()) : i3(r3);
            }, u2.onerror = function(t3) {
              n2(t3.target.error);
            }) : ((t2 = e3.count()).onsuccess = function() {
              return i3(t2.result);
            }, t2.onerror = function() {
              return n2(t2.error);
            });
          });
        }, j.prototype.openCursor = function(t2, n2) {
          return (n2 = n2 || this.getTransaction([t2])).objectStore(t2).openCursor();
        }, j.prototype.deleteById = function(e3, r3, s3) {
          var o3 = this;
          return new Promise(function(t2, n2) {
            var i3 = (s3 = s3 || o3.getTransaction([e3], true)).objectStore(e3).delete(r3);
            i3.onsuccess = function() {
              return t2();
            }, i3.onerror = function() {
              n2();
            };
          });
        }, j.prototype.deleteByCount = function(r3, s3) {
          var n2 = this;
          return new Promise(function(e3, t2) {
            return Nr(n2, void 0, void 0, function() {
              var n3, i3;
              return Dr(this, function(t3) {
                switch (t3.label) {
                  case 0:
                    n3 = 8192, t3.label = 1;
                  case 1:
                    return 0 < s3 ? [4, this.queryByCursor(r3, { maxCount: Math.min(s3, n3) })] : [3, 4];
                  case 2:
                    return 0 === (i3 = t3.sent()).length ? [3, 4] : (s3 -= i3.length, [4, this.deleteItems(r3, i3)]);
                  case 3:
                    return t3.sent(), [3, 1];
                  case 4:
                    return e3(), [2];
                }
              });
            });
          });
        }, j.prototype.deleteAll = function(r3, s3) {
          var t2 = this;
          return new Promise(function(i3, e3) {
            return Nr(t2, void 0, void 0, function() {
              var n2;
              return Dr(this, function(t3) {
                return s3 = s3 || this.getTransaction([r3], true), n2 = s3.objectStore(r3), (n2 = n2.clear()).onsuccess = function() {
                  return i3();
                }, n2.onerror = function(t4) {
                  e3();
                }, [2];
              });
            });
          });
        }, j.prototype.deleteItems = function(e3, r3, s3) {
          var t2 = this;
          return new Promise(function(n2) {
            return Nr(t2, void 0, void 0, function() {
              var i3;
              return Dr(this, function(t3) {
                switch (t3.label) {
                  case 0:
                    return s3 = s3 || this.getTransaction([e3], true), i3 = s3.objectStore(e3), [4, Promise.all(r3.map(function(n3) {
                      return new Promise(function(t4) {
                        i3.delete(n3.id).onsuccess = function() {
                          return t4();
                        };
                      });
                    }))];
                  case 1:
                    return t3.sent(), n2(), [2];
                }
              });
            });
          });
        }, j.prototype.ut = function(e3, t2) {
          return t2.every(function(t3) {
            var n2 = e3[t3.field], i3 = t3.value, t3 = t3.operator;
            switch (void 0 === t3 ? 1 : t3) {
              case 1:
                return n2 === i3;
              case 2:
                return n2 !== i3;
              case 3:
                return n2 < i3;
              case 4:
                return i3 < n2;
              case 5:
                return n2 <= i3;
              case 6:
                return i3 <= n2;
              default:
                return false;
            }
          });
        }, j.prototype.ot = function(t2) {
          var n2 = t2.value, t2 = t2.operator;
          switch (void 0 === t2 ? 1 : t2) {
            case 1:
              return IDBKeyRange.only(n2);
            case 3:
              return IDBKeyRange.upperBound(n2, true);
            case 5:
              return IDBKeyRange.upperBound(n2);
            case 4:
              return IDBKeyRange.lowerBound(n2, true);
            case 6:
              return IDBKeyRange.lowerBound(n2);
            default:
              return;
          }
        }, j);
        function j() {
        }
        var c = function(t2, n2, i3) {
          if (i3 || 2 === arguments.length)
            for (var e3, r3 = 0, s3 = n2.length; r3 < s3; r3++)
              !e3 && r3 in n2 || ((e3 = e3 || Array.prototype.slice.call(n2, 0, r3))[r3] = n2[r3]);
          return t2.concat(e3 || Array.prototype.slice.call(n2));
        }, Ur = { version: 1, database: "zego_rtc_logger", tableList: c(c([{ tableName: "log_instance", tableItems: [] }], new Array(20).fill(void 0).map(function(t2, n2) {
          return { tableName: "file_" + (n2 + 1), tableItems: [{ itemName: "log", index: false, unique: false }, { itemName: "instanceId", index: true, unique: false }] };
        }), true), [{ tableName: "file_usage", tableItems: [] }], false) }, Lr = Ur.tableList.map(function(t2) {
          return t2.tableName;
        });
        Pr = function(t2, n2) {
          return (Pr = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? function(t3, n3) {
            t3.__proto__ = n3;
          } : function(t3, n3) {
            for (var i3 in n3)
              Object.prototype.hasOwnProperty.call(n3, i3) && (t3[i3] = n3[i3]);
          }))(t2, n2);
        };
        (function(t2, n2) {
          if ("function" != typeof n2 && null !== n2)
            throw new TypeError("Class extends value " + String(n2) + " is not a constructor or null");
          function i3() {
            this.constructor = t2;
          }
          Pr(t2, n2), t2.prototype = null === n2 ? Object.create(n2) : (i3.prototype = n2.prototype, new i3());
        })(Mr, Fr = t), Mr.prototype.size = function() {
          return this.queue.length;
        };
        var Pr, Fr, zr = Mr;
        function Mr(t2) {
          void 0 === t2 && (t2 = 1 / 0);
          var n2 = Fr.call(this, "zzziplog storage_" + Date.now()) || this;
          return n2.logCacheMax = t2, n2;
        }
        var Br = function() {
          return (Br = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, Cr = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, Hr = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, qr = (Jr.prototype.pushTask = function(t2, n2, i3, e3, r3) {
          t2 = { task: t2 };
          n2 && (t2 = Br(Br({}, t2), { args: n2 })), i3 && (t2 = Br(Br({}, t2), { successCallback: i3 })), e3 && (t2 = Br(Br({}, t2), { errorCallback: e3 })), r3 && (t2 = Br(Br({}, t2), { completeCallback: r3 })), this.ct.push(t2);
        }, Jr.prototype.ft = function(e3, r3) {
          return Cr(this, void 0, void 0, function() {
            var n2, i3;
            return Hr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  n2 = null, t2.label = 1;
                case 1:
                  return (t2.trys.push([1, 4, 5, 6]), e3 && e3.args ? n2 = e3.task.apply(e3, e3.args) : e3 && (n2 = e3.task()), n2 instanceof Promise) ? [4, n2] : [3, 3];
                case 2:
                  n2 = t2.sent(), t2.label = 3;
                case 3:
                  return e3.successCallback && e3.successCallback(n2), [3, 6];
                case 4:
                  if (i3 = t2.sent(), e3.errorCallback)
                    return e3.errorCallback(i3), [3, 6];
                  throw i3;
                case 5:
                  return r3(), e3.completeCallback && e3.completeCallback(), [7];
                case 6:
                  return [2];
              }
            });
          });
        }, Jr.prototype.runATask = function() {
          return Cr(this, void 0, void 0, function() {
            var n2, i3 = this;
            return Hr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return this.ct.length <= 0 ? [2] : (n2 = this.ct[0], n2 ? [4, this.ft(n2, function() {
                    i3.ct.shift();
                  })] : [3, 2]);
                case 1:
                  t2.sent(), t2.label = 2;
                case 2:
                  return [2];
              }
            });
          });
        }, Jr.prototype.runAllTask = function() {
          return Cr(this, void 0, void 0, function() {
            return Hr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return 0 < this.ct.length ? [4, this.runATask()] : [3, 2];
                case 1:
                  return t2.sent(), [3, 0];
                case 2:
                  return [2];
              }
            });
          });
        }, Jr.prototype.size = function() {
          return this.ct.length;
        }, Jr);
        function Jr() {
          this.ct = [];
        }
        Gr.prototype.writeLine = function(t2) {
          t2 && "" !== t2 && this.ht.push(t2);
        }, Gr.prototype.saveAs = function(t2, n2) {
          var i3 = document.createElement("a");
          i3.href = URL.createObjectURL(t2), i3.download = n2, i3.click();
        }, Gr.prototype.createZip = function() {
          var t2 = "";
          0 < this.ht.length && (t2 = this.ht.join("\n"), this.ht = []);
          t2 = ((t3) => {
            for (var n2, i3 = 0, e3 = t3.length, r3 = ""; i3 < e3; )
              n2 = t3.subarray(i3, Math.min(i3 + 32768, e3)), r3 += String.fromCharCode.apply(null, Array.from(n2)), i3 += 32768;
            return btoa(r3);
          })(_e(t2));
          return new Blob([t2], { type: "text/plain;charset=utf-8" });
        };
        var Kr = Gr;
        function Gr() {
          this.ht = [];
        }
        var Wr = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, Xr = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, $r = (Yr.prototype.setUploadUrl = function(t2) {
          this.lt = t2, this.vt = 0, this.dt = this.lt[this.vt];
        }, Yr.prototype.sendRequest = function(e3, r3) {
          return void 0 === r3 && (r3 = false), Wr(this, void 0, void 0, function() {
            var n2, i3;
            return Xr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  if (!this.dt)
                    throw new Error("upload url is empty");
                  t2.label = 1;
                case 1:
                  return t2.trys.push([1, 3, , 7]), [4, ts.post("https://".concat(this.dt, "/log/").concat(r3 ? "userupload" : "upload"), e3, this.proxyCtrl)];
                case 2:
                  if (0 !== (n2 = t2.sent()).code)
                    throw n2;
                  return this.C.info("zl.zlu.sr zip log ".concat(this.dt)), [3, 7];
                case 3:
                  if (101 !== (null == (n2 = t2.sent()) ? void 0 : n2.code) && this.lt.length && this.vt !== this.lt.length - 1)
                    return [3, 4];
                  throw i3 = this.dt, this.vt = 0, this.dt = this.lt[this.vt], new Error("upload logs ".concat(i3, " failed, error=").concat(JSON.stringify(n2)));
                case 4:
                  return this.vt < this.lt.length - 1 && this.vt++, this.dt = this.lt[this.vt], [4, this.sendRequest(e3, r3)];
                case 5:
                  t2.sent(), t2.label = 6;
                case 6:
                  return [3, 7];
                case 7:
                  return [2];
              }
            });
          });
        }, Yr.prototype.upload = function(i3, h2, a2) {
          return Wr(this, void 0, void 0, function() {
            var s3, o3, u2, c2, f2, n2 = this;
            return Xr(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return s3 = i3.appId, o3 = i3.userId, u2 = i3.deviceId, c2 = i3.token, [4, Ae(s3)];
                case 1:
                  if (f2 = t2.sent(), !(!s3 || !o3 && !u2 || !f2 && !c2))
                    return [2, new Promise(function(e3, r3) {
                      return Wr(n2, void 0, void 0, function() {
                        var n3, i4 = this;
                        return Xr(this, function(t3) {
                          switch (t3.label) {
                            case 0:
                              return (n3 = function() {
                                return Wr(i4, void 0, void 0, function() {
                                  var n4, i5, e4 = this;
                                  return Xr(this, function(t4) {
                                    switch (t4.label) {
                                      case 0:
                                        this.wt = true, (n4 = new FormData()).append("logs", h2), n4.append("appid", s3.toString()), o3 && n4.append("uin", null == o3 ? void 0 : o3.toString()), n4.append("timestamp", (/* @__PURE__ */ new Date()).getTime().toString()), u2 && n4.append("deviceid", u2), f2 ? n4.append("litesign", f2) : c2 && n4.append("token", c2), t4.label = 1;
                                      case 1:
                                        return t4.trys.push([1, 3, 4, 5]), [4, this.sendRequest(n4, a2)];
                                      case 2:
                                        return t4.sent(), [3, 5];
                                      case 3:
                                        return i5 = t4.sent(), r3(i5), [3, 5];
                                      case 4:
                                        return setTimeout(function() {
                                          return Wr(e4, void 0, void 0, function() {
                                            return Xr(this, function(t5) {
                                              switch (t5.label) {
                                                case 0:
                                                  return this.wt = false, [4, this.bt.runATask()];
                                                case 1:
                                                  return t5.sent(), [2];
                                              }
                                            });
                                          });
                                        }, 100), [7];
                                      case 5:
                                        return [2];
                                    }
                                  });
                                });
                              }, this.wt) ? (this.bt.pushTask(n3, [], function() {
                                e3();
                              }, function(t4) {
                                r3(t4);
                              }), [3, 3]) : [3, 1];
                            case 1:
                              return [4, n3()];
                            case 2:
                              t3.sent(), e3(), t3.label = 3;
                            case 3:
                              return [2];
                          }
                        });
                      });
                    })];
                  throw new Error("cannot upload logs, please login room before you upload logs.");
              }
            });
          });
        }, Yr);
        function Yr(t2, n2) {
          this.C = t2, this.proxyCtrl = n2, this.yt = "detaillog-global.zego.im", this.dt = this.yt, this.lt = [], this.vt = 0, this.bt = new qr(), this.wt = false;
        }
        var Qr = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, Vr = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, ts = (ns.post = function(r3, s3, o3) {
          var t2 = this;
          return new Promise(function(i3, e3) {
            return Qr(t2, void 0, void 0, function() {
              var n2;
              return Vr(this, function(t3) {
                try {
                  o3 ? o3.startHttpRequest({ location: r3, body: s3, method_no: 2, headers: [{ name: "Content-Type", val: "multipart/form-data" }], serviceType: 2 }, function(t4) {
                    200 === t4.status_code ? i3(t4.body) : e3("request fail. status=" + t4.status_code);
                  }, function(t4) {
                    e3("request fail. result: " + JSON.stringify(t4));
                  }) : ((n2 = new XMLHttpRequest()).open("POST", r3, true), n2.responseType = "json", n2.send(s3), n2.onreadystatechange = function() {
                    n2.readyState === XMLHttpRequest.DONE && (200 === n2.status ? i3(n2.response) : e3("request fail. status=" + n2.status));
                  });
                } catch (t4) {
                  e3(t4);
                }
                return [2];
              });
            });
          });
        }, ns);
        function ns() {
        }
        var is = function() {
          return (is = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, es = (rs.prototype.build = function(t2) {
          for (var n2 = is({}, t2), i3 = [], e3 = 0, r3 = this._t; e3 < r3.length; e3++) {
            var s3 = r3[e3];
            i3.push(n2[s3]);
          }
          for (var o3 = 0, u2 = this.gt; o3 < u2.length; o3++) {
            var c2 = n2[s3 = u2[o3]];
            c2 !== this.Ot[s3] && (this.Ot[s3] = c2, i3.push("".concat(s3, ": ").concat(c2)));
          }
          return i3.join(" @ ");
        }, rs.prototype.buildFullMessageLog = function(t2) {
          t2 = JSON.parse(t2), t2 = is(is({}, this.Ot), t2);
          return JSON.stringify(t2);
        }, rs);
        function rs(t2) {
          this.N = t2, this.Ot = {}, this._t = ["level", "time", "action", "content", "streamid"], this.gt = ["appid", "userid", "roomid", "sessionid"], this.St = 0;
        }
        var ss = function() {
          return (ss = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, T = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, x = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        }, os = new TextEncoder();
        function us(t2) {
          return os.encode(t2).length;
        }
        function cs(t2) {
          var t2 = new Date(t2), n2 = t2.getFullYear(), i3 = String(t2.getMonth() + 1).padStart(2, "0"), e3 = String(t2.getDate()).padStart(2, "0"), r3 = String(t2.getHours()).padStart(2, "0"), s3 = String(t2.getMinutes()).padStart(2, "0"), t2 = String(t2.getSeconds()).padStart(2, "0");
          return "".concat(n2).concat(i3).concat(e3).concat(r3).concat(s3).concat(t2);
        }
        R.prototype.setFileConfig = function(t2, n2) {
          "number" == typeof t2 && (t2 = t2 < 3 ? 3 : 20 < t2 ? 20 : Math.round(t2), this.fileConfig.count = t2), "number" == typeof n2 && 0 <= n2 && (this.fileConfig.size = n2);
        }, Object.defineProperty(R.prototype, "dbOpened", { get: function() {
          return this.kt;
        }, enumerable: false, configurable: true }), Object.defineProperty(R.prototype, "Et", { get: function() {
          return this.N.appid;
        }, enumerable: false, configurable: true }), R.prototype.At = function(t2) {
          return T(this, void 0, void 0, function() {
            var o3, u2, n2 = this;
            return x(this, function(t3) {
              switch (t3.label) {
                case 0:
                  return o3 = [], [4, new Promise(function(r3, s3) {
                    return T(n2, void 0, void 0, function() {
                      var n3, i3, e3;
                      return x(this, function(t4) {
                        switch (t4.label) {
                          case 0:
                            return (n3 = this.it.getTransaction(Lr, true)).oncomplete = function() {
                              r3();
                            }, n3.onerror = function(t5) {
                              s3(n3.error);
                            }, n3.onabort = function(t5) {
                              s3(n3.error);
                            }, [4, this.jt.queryList(n3)];
                          case 1:
                            return i3 = t4.sent(), [4, this.Tt.queryList(void 0, n3)];
                          case 2:
                            return e3 = t4.sent(), (u2 = i3[0]) && (e3.forEach(function(t5) {
                              t5.lastLogTime < u2.lastTime && o3.push(t5);
                            }), this.xt.deleteAll(u2.fileId, n3), this.Tt.delete(o3, n3)), [2];
                        }
                      });
                    });
                  })];
                case 1:
                  return t3.sent(), [2];
              }
            });
          });
        }, R.prototype.checkUsingFile = function() {
          return T(this, void 0, void 0, function() {
            var h2, a2, l2, n2, i3 = this;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return h2 = [], l2 = !(a2 = []), [4, new Promise(function(c2, f2) {
                    return T(i3, void 0, void 0, function() {
                      var n3, i4, e3, r3, s3, o3, u2 = this;
                      return x(this, function(t3) {
                        switch (t3.label) {
                          case 0:
                            return (n3 = this.it.getTransaction(Lr, true)).oncomplete = function() {
                              c2();
                            }, n3.onerror = function(t4) {
                              f2(n3.error);
                            }, n3.onabort = function(t4) {
                              f2(n3.error);
                            }, [4, this.jt.queryList(n3)];
                          case 1:
                            return i4 = t3.sent(), [4, this.Tt.queryList(void 0, n3)];
                          case 2:
                            if (e3 = t3.sent(), o3 = i4[i4.length - 1], 0 < (s3 = i4.length - this.fileConfig.count) && (a2 = i4.splice(0, s3)), o3 && o3.byteLength >= this.fileConfig.size ? (l2 = true, i4.length === this.fileConfig.count && (s3 = i4.shift()) && a2.push(s3)) : o3 || (l2 = true), a2.length && ((r3 = a2[a2.length - 1]) && e3.forEach(function(t4) {
                              (!t4.active || 3e5 < Date.now() - t4.lastLogTime) && t4.lastLogTime < r3.lastTime && h2.push(t4);
                            }), a2.forEach(function(t4) {
                              u2.xt.deleteAll(t4.fileId, n3), u2.jt.delete(t4, n3);
                            }), this.Tt.delete(h2, n3)), l2) {
                              if (s3 = Date.now(), !(o3 = new Array(20).fill(1).map(function(t4, n4) {
                                return n4 + 1;
                              }).find(function(n4) {
                                return !i4.find(function(t4) {
                                  return t4.fileId === n4;
                                });
                              })))
                                throw "not found can use file";
                              this.jt.save({ fileId: o3, byteLength: 0, startTime: s3, lastTime: s3 }, n3);
                            }
                            return [2];
                        }
                      });
                    });
                  })];
                case 1:
                  return t2.sent(), [4, this.jt.queryList()];
                case 2:
                  return n2 = t2.sent(), [2, n2[n2.length - 1]];
              }
            });
          });
        }, R.prototype.uploadLegacyLog = function(o3, i3, s3) {
          return void 0 === i3 && (i3 = true), void 0 === s3 && (s3 = 5), T(this, void 0, void 0, function() {
            var e3, n2, r3 = this;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return this.Rt ? [4, this.Tt.queryList()] : [2];
                case 1:
                  return n2 = (n2 = t2.sent()).filter(function(t3) {
                    return !(t3.id === r3.It || !t3.userIds.length || t3.active && !(3e5 < Date.now() - t3.lastLogTime) || i3 && t3.userIds.includes(r3.N.userid));
                  }), e3 = n2.reduce(function(t3, n3) {
                    var i4 = n3.userIds[n3.userIds.length - 1];
                    return i4 && (t3[i4] = t3[i4] || [], t3[i4].push(n3)), t3;
                  }, {}), n2 = Object.keys(e3), n2 = n2.map(function(i4) {
                    return T(r3, void 0, void 0, function() {
                      var n3, r4, s4 = this;
                      return x(this, function(t3) {
                        return n3 = e3[i4], r4 = function() {
                          return T(s4, void 0, void 0, function() {
                            return x(this, function(t4) {
                              switch (t4.label) {
                                case 0:
                                  return [4, this.Nt(i4, o3, n3)];
                                case 1:
                                  return t4.sent(), [2];
                              }
                            });
                          });
                        }, [2, new Promise(function(i5, e4) {
                          return T(s4, void 0, void 0, function() {
                            var n4;
                            return x(this, function(t4) {
                              switch (t4.label) {
                                case 0:
                                  return this.dbOpened ? [3, 1] : (this.Dt.pushTask(r4, [], function() {
                                    i5();
                                  }, function(t5) {
                                    e4(t5);
                                  }), [3, 5]);
                                case 1:
                                  return t4.trys.push([1, 3, , 4]), [4, r4()];
                                case 2:
                                  return t4.sent(), [3, 4];
                                case 3:
                                  return n4 = t4.sent(), e4(n4), [2];
                                case 4:
                                  i5(), t4.label = 5;
                                case 5:
                                  return [2];
                              }
                            });
                          });
                        }).catch(function(t4) {
                          return { error: t4, index: 0 };
                        })];
                      });
                    });
                  }), s3--, [4, Promise.all(n2)];
                case 2:
                  return (n2 = t2.sent(), n2.find(function(t3) {
                    return null == t3 ? void 0 : t3.error;
                  }) && s3) ? [4, this.uploadLegacyLog(o3, i3, s3)] : [3, 4];
                case 3:
                  t2.sent(), t2.label = 4;
                case 4:
                  return [2];
              }
            });
          });
        }, R.prototype.openDB = function() {
          return T(this, void 0, void 0, function() {
            var n2;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return n2 = false, this.Zt || (this.Zt = this.it.openDB(this.Et, Ur), n2 = true), [4, this.Zt];
                case 1:
                  return t2.sent(), [4, this.Ut()];
                case 2:
                  return (t2.sent(), this.Zt = void 0, this.kt = true, n2) ? [4, this.Dt.runAllTask()] : [3, 5];
                case 3:
                  return t2.sent(), [4, this.Lt.runATask()];
                case 4:
                  t2.sent(), this.Pt(), t2.label = 5;
                case 5:
                  return [2];
              }
            });
          });
        }, R.prototype.Ut = function(s3) {
          return T(this, void 0, void 0, function() {
            var n2, i3, e3, r3;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return (n2 = this.It, i3 = false, void 0 !== n2) ? [3, 1] : (i3 = true, [3, 3]);
                case 1:
                  return [4, this.Tt.getItem(n2, s3)];
                case 2:
                  (e3 = t2.sent()) ? e3.active || this.Tt.update({ id: e3.id, active: 1 }, s3) : i3 = true, t2.label = 3;
                case 3:
                  return i3 ? (e3 = Date.now(), r3 = { appId: this.Et, userIds: this.Ft, active: 1, lastLogTime: e3, createdAt: e3, logQuantity: 0, byteLength: 0 }, this.N.userid && !this.Ft.includes(this.N.userid) && this.Ft.push(this.N.userid), [4, this.Tt.save(r3, s3)]) : [3, 5];
                case 4:
                  r3 = t2.sent(), this.It = r3, t2.label = 5;
                case 5:
                  return [2];
              }
            });
          });
        }, R.prototype.zt = function() {
          return this.Rt && R.isEnvSupport() && !this.kt && !this.Zt;
        }, R.prototype.enable = function() {
          this.Rt || (this.Rt = true, this.zt() && this.openDB());
        }, R.prototype.saveLog = function(t2) {
          this.zt() && this.openDB();
          t2 = JSON.parse(t2);
          for (this.Ft && t2.userid && !this.Ft.includes(t2.userid) && (this.Ft.push(t2.userid), this.dbOpened) && this.Tt.update({ id: this.It, userIds: this.Ft }), this.U.push(this.Mt.build(t2)); this.U.size() > this.U.logCacheMax; )
            this.U.pop();
          this.Bt || this.Pt();
        }, R.prototype.Pt = function(w2) {
          return void 0 === w2 && (w2 = false), T(this, void 0, void 0, function() {
            var n2, i3 = this;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return this.Rt ? this.dbOpened ? (n2 = false, this.Bt || (n2 = true, this.Bt = new Promise(function(l2, v2) {
                    function d2() {
                      T(i3, void 0, void 0, function() {
                        var n3, i4, e3, r3, s3, o3, u2, c2, f2, h2, a2 = this;
                        return x(this, function(t3) {
                          switch (t3.label) {
                            case 0:
                              if (!(n3 = this.It))
                                return l2(), [2];
                              if (!this.dbOpened || !this.fileConfig.size)
                                return l2(), [2];
                              if ((i4 = this.U.getFrontList(100)).length < 100 && (s3 = Date.now(), s3 = this.Ct && 1e4 <= s3 - this.Ct, h2 = 0 !== i4.length, !h2 || !w2 && !s3))
                                return h2 ? this.Ht || (this.Ht = window.setTimeout(function() {
                                  a2.Pt();
                                }, 1e4)) : (this.Ht && window.clearTimeout(this.Ht), this.Ht = void 0), l2(), [2];
                              e3 = function(t4) {
                                var n4 = "QuotaExceededError";
                                (null == t4 ? void 0 : t4.name) === n4 || t4 + "" == n4 ? a2.At().finally(function() {
                                  setTimeout(function() {
                                    d2();
                                  }, 5e3);
                                }) : v2(t4);
                              }, t3.label = 1;
                            case 1:
                              return t3.trys.push([1, 3, , 4]), [4, this.checkUsingFile()];
                            case 2:
                              return r3 = t3.sent(), [3, 4];
                            case 3:
                              return s3 = t3.sent(), e3(s3), [2];
                            case 4:
                              return (o3 = r3.fileId, u2 = i4.reduce(function(t4, n4) {
                                return t4 += us(n4);
                              }, 0), (c2 = this.it.getTransaction(Lr, true)).oncomplete = function() {
                                a2.U.removeFrontList(i4.length), d2();
                              }, c2.onerror = function(t4) {
                                e3(c2.error);
                              }, c2.onabort = function(t4) {
                                e3(c2.error);
                              }, f2 = Date.now(), this.It) ? [4, this.Tt.getItem(this.It, c2)] : [3, 6];
                            case 5:
                              (h2 = t3.sent()) ? (this.Ct = f2, i4.length, this.Tt.update({ id: this.It, byteLength: h2.byteLength + u2, logQuantity: h2.logQuantity + i4.length, lastLogTime: f2 }, c2)) : this.Ut(c2), t3.label = 6;
                            case 6:
                              return this.xt.saveLogs(o3, i4, n3, c2), r3.byteLength += u2, r3.lastTime = f2, this.jt.update(r3, c2), [2];
                          }
                        });
                      });
                    }
                    d2();
                  }), this.Bt.finally(function() {
                    i3.Bt = void 0;
                  })), [4, this.Bt]) : [2] : [2];
                case 1:
                  return t2.sent(), !w2 || n2 ? [3, 3] : [4, this.Pt(w2)];
                case 2:
                  t2.sent(), t2.label = 3;
                case 3:
                  return [2];
              }
            });
          });
        }, R.isEnvSupport = function() {
          return !!(window && "indexedDB" in window);
        }, R.prototype.qt = function(a2, l2, p2) {
          return T(this, void 0, void 0, function() {
            var n2, h2, d2, w2, b2, y2, m2, i3, _2, e3, g2 = this;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return p2 ? [3, 2] : [4, this.Tt.queryList()];
                case 1:
                  n2 = t2.sent(), p2 = n2.filter(function(t3) {
                    return t3.userIds.includes(a2);
                  }), t2.label = 2;
                case 2:
                  h2 = new Kr(), d2 = 0, w2 = [], b2 = this.fileConfig.size, y2 = function() {
                    return T(g2, void 0, void 0, function() {
                      var n3, i4, e4, r3, s3, o3, u2, c2, f2;
                      return x(this, function(t3) {
                        switch (t3.label) {
                          case 0:
                            n3 = h2.createZip(), i4 = { appId: this.Et, deviceId: this.N.deviceid }, a2 === this.N.userid && (i4.token = this.N.token), i4.userId = a2, s3 = w2.reduce(function(t4, n4) {
                              return n4.startTime < e4 && (t4.startTime = n4.startTime), r3 < n4.endTime && (t4.endTime = n4.endTime), t4;
                            }, { startTime: 0, endTime: 0 }), e4 = s3.startTime, r3 = s3.endTime, t3.label = 1;
                          case 1:
                            return t3.trys.push([1, 3, , 4]), [4, this.Jt.upload(i4, n3, l2)];
                          case 2:
                            return t3.sent(), [3, 4];
                          case 3:
                            throw s3 = t3.sent(), this.onUploadLog(n3.size, "".concat(a2, "_").concat(cs(e4), "_").concat(cs(r3)), { code: -1, message: "" + s3 + JSON.stringify(s3) }), s3;
                          case 4:
                            h2 = new Kr(), d2 = 0, o3 = this.it.getTransaction(Lr, true), u2 = 0, t3.label = 5;
                          case 5:
                            return u2 < w2.length ? (c2 = w2[u2], [4, this.Tt.getItem(c2.id, o3)]) : [3, 8];
                          case 6:
                            (f2 = t3.sent()) && ((f2 = f2.byteLength - c2.uploadByteLength) < 0 && (f2 = 0), this.Tt.update({ id: c2.id, lastUploadInfo: { logId: c2.logId, usageId: c2.usageId }, byteLength: f2 }, o3)), t3.label = 7;
                          case 7:
                            return u2++, [3, 5];
                          case 8:
                            return this.onUploadLog(n3.size, "".concat(a2, "_").concat(cs(e4), "_").concat(cs(r3))), w2 = [], [2];
                        }
                      });
                    });
                  }, m2 = function(t3) {
                    h2.writeLine(t3);
                    t3 = us(t3);
                    return b2 < (d2 += t3) ? { byteLength: t3, hasLeft: false } : { byteLength: t3, hasLeft: true };
                  }, i3 = function(n3) {
                    var r3, i4, s3, o3, e4, u2, c2, f2, h3, a3, l3, v2;
                    return x(this, function(t3) {
                      switch (t3.label) {
                        case 0:
                          return r3 = p2[n3], [4, _2.Tt.getItem(r3.id)];
                        case 1:
                          return i4 = t3.sent(), i4 = (i4 || r3).lastUploadInfo, s3 = ss(ss({ id: r3.id, logId: 0, usageId: 0 }, i4 || {}), { uploadByteLength: 0, startTime: r3.createdAt, endTime: r3.lastLogTime }), w2.push(s3), o3 = 0, m2("#start# " + r3.id), m2(JSON.stringify(r3)), [4, _2.jt.queryList()];
                        case 2:
                          e4 = t3.sent(), u2 = 0, t3.label = 3;
                        case 3:
                          return u2 < e4.length ? (c2 = e4[u2], c2 = c2.fileId, !i4 || c2 >= i4.usageId ? (s3.usageId = c2, [4, _2.xt.queryList(c2, r3.id)]) : [3, 11]) : [3, 12];
                        case 4:
                          f2 = t3.sent(), h3 = function(e5) {
                            return T(g2, void 0, void 0, function() {
                              var n4, i5;
                              return x(this, function(t4) {
                                switch (t4.label) {
                                  case 0:
                                    return (i5 = m2(e5.log), n4 = i5.hasLeft, i5 = i5.byteLength, o3++, s3.logId = e5.id, s3.uploadByteLength += i5, n4) ? [3, 2] : (m2("#end# " + r3.id + " " + o3), o3 = 0, [4, y2()]);
                                  case 1:
                                    t4.sent(), m2("#start# " + r3.id), t4.label = 2;
                                  case 2:
                                    return [2];
                                }
                              });
                            });
                          }, a3 = 0, t3.label = 5;
                        case 5:
                          return a3 < f2.length ? (l3 = f2[a3], c2 !== (null == i4 ? void 0 : i4.usageId) ? [3, 8] : l3.id > i4.logId ? [4, h3(l3)] : [3, 7]) : [3, 11];
                        case 6:
                          t3.sent(), t3.label = 7;
                        case 7:
                          return [3, 10];
                        case 8:
                          return l3.log, [4, h3(l3)];
                        case 9:
                          t3.sent(), t3.label = 10;
                        case 10:
                          return a3++, [3, 5];
                        case 11:
                          return u2++, [3, 3];
                        case 12:
                          return (m2("#end# " + r3.id + " " + o3), o3 = 0, !(v2 = p2[n3 + 1]) || 0 < d2 && d2 + v2.byteLength > b2) ? [4, y2()] : [3, 14];
                        case 13:
                          t3.sent(), t3.label = 14;
                        case 14:
                          return [2];
                      }
                    });
                  }, _2 = this, e3 = 0, t2.label = 3;
                case 3:
                  return e3 < p2.length ? [5, i3(e3)] : [3, 6];
                case 4:
                  t2.sent(), t2.label = 5;
                case 5:
                  return e3++, [3, 3];
                case 6:
                  return [2];
              }
            });
          });
        }, R.prototype.Nt = function(s3, o3, u2) {
          return T(this, void 0, void 0, function() {
            var n2 = this;
            return x(this, function(t2) {
              return [2, new Promise(function(e3, r3) {
                return T(n2, void 0, void 0, function() {
                  var n3, i3 = this;
                  return x(this, function(t3) {
                    return n3 = function() {
                      return T(i3, void 0, void 0, function() {
                        return x(this, function(t4) {
                          switch (t4.label) {
                            case 0:
                              return [4, this.qt(s3, o3, u2)];
                            case 1:
                              return t4.sent(), [2];
                          }
                        });
                      });
                    }, this.Lt.pushTask(n3, [], function() {
                      e3();
                    }, function(t4) {
                      r3(t4);
                    }, function() {
                      0 < i3.Lt.size() && i3.Lt.runATask();
                    }), this.dbOpened && 1 === this.Lt.size() && this.Lt.runATask(), [2];
                  });
                });
              })];
            });
          });
        }, R.prototype.Kt = function(i3) {
          return T(this, void 0, void 0, function() {
            var n2;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return this.It ? [4, this.Pt(true)] : [2];
                case 1:
                  t2.sent(), this.Gt = false, t2.label = 2;
                case 2:
                  return t2.trys.push([2, 4, , 5]), [4, this.Nt(this.N.userid, i3)];
                case 3:
                  return t2.sent(), this.Gt = true, [3, 5];
                case 4:
                  throw n2 = t2.sent(), this.Gt = false, n2;
                case 5:
                  return [2];
              }
            });
          });
        }, R.prototype.setUploadUrl = function(t2) {
          this.Jt.setUploadUrl(t2);
        }, R.prototype.startUpload = function(i3, e3) {
          return void 0 === e3 && (e3 = false), T(this, void 0, void 0, function() {
            var n2;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  if (!this.Rt)
                    throw new Error("zip logs upload is not enabled.");
                  if (!e3 && 0 !== this.Wt && performance.now() - this.Wt < 6e4 && this.Gt || this.Xt)
                    throw new Error("Do not uplaod frequently.");
                  t2.label = 1;
                case 1:
                  return t2.trys.push([1, 6, , 7]), this.Wt = performance.now(), this.Xt = true, this.dbOpened ? [3, 3] : [4, this.openDB()];
                case 2:
                  t2.sent(), t2.label = 3;
                case 3:
                  return [4, this.Kt(i3)];
                case 4:
                  return t2.sent(), [4, this.uploadLegacyLog(i3)];
                case 5:
                  return t2.sent(), this.Xt = false, [3, 7];
                case 6:
                  throw n2 = t2.sent(), this.Xt = false, n2;
                case 7:
                  return [2];
              }
            });
          });
        }, R.prototype.disable = function() {
          return T(this, void 0, void 0, function() {
            var n2;
            return x(this, function(t2) {
              switch (t2.label) {
                case 0:
                  if (n2 = this.It, !this.Rt || isNaN(n2) || !this.kt)
                    return [3, 6];
                  t2.label = 1;
                case 1:
                  return t2.trys.push([1, 3, , 4]), [4, this.Tt.update({ active: 0, id: n2 })];
                case 2:
                  return t2.sent(), [3, 4];
                case 3:
                  return t2.sent(), [3, 4];
                case 4:
                  return [4, this.Pt(true)];
                case 5:
                  return t2.sent(), this.it.closeDB(), this.kt = false, this.U.clear(), [2, !(this.Rt = false)];
                case 6:
                  return this.U.clear(), [2, this.Rt = false];
              }
            });
          });
        }, R.prototype.onUploadLog = function(t2, n2, i3) {
        }, R.prototype.destroy = function() {
          this.It ? this.disable() : (this.Ht && (window.clearTimeout(this.Ht), this.Ht = void 0), this.U.clear());
        };
        var fs = R;
        function R(t2, n2, i3) {
          var e3 = this;
          this.N = t2, this.C = n2, this.proxyCtrl = i3, this.fileConfig = { count: 3, size: 5242880 }, this.it = new Zr(), this.xt = new Sr(this.it), this.Tt = new Tr(this.it), this.jt = new Rr(this.it), this.kt = false, this.U = new zr(8e3), this.Dt = new qr(), this.Lt = new qr(), this.Rt = false, this.Wt = 0, this.Gt = false, this.Xt = false, this.Ft = [], this.Zt = void 0, this.Jt = new $r(n2, i3), this.Mt = new es(this.N), this.it.onDBClose = function() {
            e3.kt = false;
          };
        }
        var hs = function() {
          return (hs = Object.assign || function(t2) {
            for (var n2, i3 = 1, e3 = arguments.length; i3 < e3; i3++)
              for (var r3 in n2 = arguments[i3])
                Object.prototype.hasOwnProperty.call(n2, r3) && (t2[r3] = n2[r3]);
            return t2;
          }).apply(this, arguments);
        }, as = function(t2, o3, u2, c2) {
          return new (u2 = u2 || Promise)(function(i3, n2) {
            function e3(t3) {
              try {
                s3(c2.next(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function r3(t3) {
              try {
                s3(c2.throw(t3));
              } catch (t4) {
                n2(t4);
              }
            }
            function s3(t3) {
              var n3;
              t3.done ? i3(t3.value) : ((n3 = t3.value) instanceof u2 ? n3 : new u2(function(t4) {
                t4(n3);
              })).then(e3, r3);
            }
            s3((c2 = c2.apply(t2, o3 || [])).next());
          });
        }, ls = function(e3, r3) {
          var s3, o3, u2, c2 = { label: 0, sent: function() {
            if (1 & u2[0])
              throw u2[1];
            return u2[1];
          }, trys: [], ops: [] }, f2 = { next: t2(0), throw: t2(1), return: t2(2) };
          return "function" == typeof Symbol && (f2[Symbol.iterator] = function() {
            return this;
          }), f2;
          function t2(i3) {
            return function(t3) {
              var n2 = [i3, t3];
              if (s3)
                throw new TypeError("Generator is already executing.");
              for (; c2 = f2 && n2[f2 = 0] ? 0 : c2; )
                try {
                  if (s3 = 1, o3 && (u2 = 2 & n2[0] ? o3.return : n2[0] ? o3.throw || ((u2 = o3.return) && u2.call(o3), 0) : o3.next) && !(u2 = u2.call(o3, n2[1])).done)
                    return u2;
                  switch (o3 = 0, (n2 = u2 ? [2 & n2[0], u2.value] : n2)[0]) {
                    case 0:
                    case 1:
                      u2 = n2;
                      break;
                    case 4:
                      return c2.label++, { value: n2[1], done: false };
                    case 5:
                      c2.label++, o3 = n2[1], n2 = [0];
                      continue;
                    case 7:
                      n2 = c2.ops.pop(), c2.trys.pop();
                      continue;
                    default:
                      if (!(u2 = 0 < (u2 = c2.trys).length && u2[u2.length - 1]) && (6 === n2[0] || 2 === n2[0])) {
                        c2 = 0;
                        continue;
                      }
                      if (3 === n2[0] && (!u2 || n2[1] > u2[0] && n2[1] < u2[3]))
                        c2.label = n2[1];
                      else if (6 === n2[0] && c2.label < u2[1])
                        c2.label = u2[1], u2 = n2;
                      else {
                        if (!(u2 && c2.label < u2[2])) {
                          u2[2] && c2.ops.pop(), c2.trys.pop();
                          continue;
                        }
                        c2.label = u2[2], c2.ops.push(n2);
                      }
                  }
                  n2 = r3.call(e3, c2);
                } catch (t4) {
                  n2 = [6, t4], o3 = 0;
                } finally {
                  s3 = u2 = 0;
                }
              if (5 & n2[0])
                throw n2[1];
              return { value: n2[0] ? n2[1] : void 0, done: true };
            };
          }
        };
        Object.defineProperty(I.prototype, "url", { get: function() {
          return this.N.url || "";
        }, set: function(t2) {
          this.N.url = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "logType", { get: function() {
          return this.N.logType || r2.DISABLE;
        }, set: function(t2) {
          this.N.logType = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "env", { get: function() {
          return this.N.env;
        }, set: function(t2) {
          this.N.env = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "appid", { get: function() {
          return this.N.appid;
        }, set: function(t2) {
          this.N.appid = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "roomid", { get: function() {
          return this.N.roomid;
        }, set: function(t2) {
          this.N.roomid = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "sessionid", { get: function() {
          return this.N.sessionid;
        }, set: function(t2) {
          this.N.sessionid = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "userid", { get: function() {
          return this.N.userid;
        }, set: function(t2) {
          this.N.userid = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "version", { get: function() {
          return this.N.version;
        }, set: function(t2) {
          this.N.version = t2;
        }, enumerable: false, configurable: true }), Object.defineProperty(I.prototype, "wsSpeed", { get: function() {
          var t2;
          return null != (t2 = null == (t2 = this.$t) ? void 0 : t2.speed) ? t2 : 0;
        }, enumerable: false, configurable: true }), I.prototype.setLogLevel = function(t2) {
          t2 = s2[t2];
          return void 0 !== t2 && (this.logLevel = t2, true);
        }, I.prototype.setRemoteLogLevel = function(t2) {
          t2 = s2[t2];
          return void 0 !== t2 && (this.logRemoteLevel = t2, true);
        }, I.prototype.setSessionInfo = function(t2, n2, i3, e3, r3, s3) {
          this.appid = t2, this.roomid = n2, this.sessionid = i3, this.userid = e3, this.version = s3;
        }, I.prototype.setTokenInfo = function(t2, n2) {
          this.N.token = t2 || "", n2 && (this.N.userid = n2);
        }, I.prototype.setZipLogConfig = function(t2, n2) {
          var i3;
          void 0 === n2 && (n2 = false), 1 === t2 ? (!this.Yt && this.env == o2.BROWSER && fs.isEnvSupport() && (this.Yt = new fs(this.N, this.C, this.proxyCtrl)), null != (i3 = this.Yt) && i3.enable()) : 0 == t2 && n2 && this.Yt && (this.Yt.destroy(), this.Yt = null);
        }, I.prototype.setStorageConfig = function(t2) {
          this.Yt && this.Yt.setFileConfig(t2.count, t2.size);
        }, I.prototype.setZipLogDomains = function(t2, n2) {
          t2 = this.getLogUrlsByIPStackMode(t2, n2);
          this.Yt && this.Yt.setUploadUrl(t2), gr.domains = t2;
        }, I.prototype.makeZipLogSpaceUpload = function() {
          return as(this, void 0, void 0, function() {
            return ls(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return this.Yt ? [4, this.Yt.uploadLegacyLog(false, false)] : [3, 2];
                case 1:
                  t2.sent(), t2.label = 2;
                case 2:
                  return [2];
              }
            });
          });
        }, I.prototype.uploadStorageLog = function(n2) {
          return void 0 === n2 && (n2 = false), as(this, void 0, void 0, function() {
            return ls(this, function(t2) {
              switch (t2.label) {
                case 0:
                  return this.Yt ? [4, this.Yt.startUpload(n2)] : [3, 2];
                case 1:
                  return t2.sent(), [3, 3];
                case 2:
                  throw new Error("cannot use zip log module");
                case 3:
                  return [2];
              }
            });
          });
        }, I.prototype.report = function(t2) {
          t2 = this.Qt(s2.REPORT, t2);
          this.logLevel !== s2.DISABLE && this.logLevel <= s2.REPORT && !this.isDestroy && console.debug(t2), this.Vt(s2.REPORT, t2, true);
        }, I.prototype.debug = function(t2, n2) {
          var i3 = {}, n2 = ("string" == typeof (n2 = void 0 === n2 ? {} : n2) ? t2 = Array.from(arguments).join("") : i3 = n2, this.tn(s2.DEBUG, t2, i3));
          this.logLevel !== s2.DISABLE && this.logLevel <= s2.DEBUG && !this.isDestroy && console.debug(n2), this.nn(s2.DEBUG, n2);
        }, I.prototype.info = function(t2, n2) {
          var i3 = {}, n2 = ("string" == typeof (n2 = void 0 === n2 ? {} : n2) ? t2 = Array.from(arguments).join("") : i3 = n2, this.tn(s2.INFO, t2, i3));
          this.logLevel !== s2.DISABLE && this.logLevel <= s2.INFO && !this.isDestroy && console.info(n2), this.nn(s2.INFO, n2);
        }, I.prototype.warn = function(t2, n2) {
          var i3 = {}, n2 = ("string" == typeof (n2 = void 0 === n2 ? {} : n2) ? t2 = Array.from(arguments).join("") : i3 = n2, this.tn(s2.WARN, t2, i3));
          this.logLevel !== s2.DISABLE && this.logLevel <= s2.WARN && !this.isDestroy && console.warn(n2), this.nn(s2.WARN, n2);
        }, I.prototype.remoteReport = function() {
          for (var t2 = [], n2 = 0; n2 < arguments.length; n2++)
            t2[n2] = arguments[n2];
          var i3 = this.tn(s2.INFO, t2.join(""));
          this.nn(s2.INFO, i3);
        }, I.prototype.error = function(t2, n2) {
          var i3 = {}, n2 = ("string" == typeof (n2 = void 0 === n2 ? {} : n2) ? t2 = Array.from(arguments).join("") : i3 = n2, this.tn(s2.ERROR, t2, i3));
          this.logLevel !== s2.DISABLE && this.logLevel <= s2.ERROR && !this.isDestroy && (console.error(n2), this.env % 2 === o2.BROWSER && window ? this.stateCenter.debug && window.alert(t2.substr(t2.indexOf(" ") + 1, 4500)) : (this.env, o2.WEIXINMINI)), this.nn(s2.ERROR, n2);
        }, I.prototype.nn = function(t2, n2) {
          this.logRemoteLevel !== s2.DISABLE && this.logRemoteLevel <= t2 && (this.Vt(t2, n2), this.Yt) && this.Yt.saveLog(n2);
        }, I.prototype.setSettingConfig = function(t2) {
          this.N.ipStackMode = t2.ipStackMode;
        }, I.prototype.getLogUrlsByIPStackMode = function(t2, n2) {
          var i3 = [];
          switch (this.N.ipStackMode) {
            case Z.IPv4Only:
              i3.push.apply(i3, t2);
              break;
            case Z.IPv4Prefer:
              i3.push.apply(i3, t2), i3.push.apply(i3, n2);
              break;
            case Z.IPv6Prefer:
              i3.push.apply(i3, n2), i3.push.apply(i3, t2);
              break;
            default:
              i3.push.apply(i3, t2);
          }
          return i3;
        }, I.prototype.onConnected = function(t2) {
        }, I.prototype.onUploadLog = function(t2, n2, i3) {
        }, I.prototype.setLogServer = function(t2, n2) {
          var i3;
          if (this.isDestroy)
            return false;
          if (this.logConnected)
            return false;
          n2 = 0 === this.N.env ? (this.N.connectURLs = this.getLogUrlsByIPStackMode(t2, n2), this.N.connectURLs[this.urlIndex]) : (this.N.connectURLs = t2, this.url !== this.N.connectURLs[0] && (this.logConnected = false), this.N.connectURLs[0]);
          try {
            return n2.startsWith("wss:") ? (this.logType = r2.WEBSOCKET, null != (i3 = this.$t) && i3.openWebSocketLogServer(n2, true)) : n2.startsWith("https:") ? (this.logType = r2.HTTPS, this.en(n2)) : this.logType = r2.DISABLE, true;
          } catch (t3) {
            return this.error(JSON.stringify(t3)), false;
          }
        }, I.prototype.rn = function() {
          this.logType == r2.WEBSOCKET ? this.sn() : this.logType == r2.HTTPS && (this.on(), this.un()), this.logType = r2.DISABLE;
        }, I.prototype.sn = function() {
          var t2;
          null != (t2 = this.$t) && t2.stopWebSocketServer();
        }, I.prototype.en = function(t2) {
          var n2 = this;
          (this.url = t2) && (this.un(), this.logUploadTimer || (this.logUploadTimer = setInterval(function() {
            n2.on();
          }, this.logUploadInterval)));
        }, I.prototype.un = function() {
          this.logUploadTimer && (clearInterval(this.logUploadTimer), this.logUploadTimer = null);
        }, I.prototype.Vt = function(n2, i3, e3) {
          return void 0 === e3 && (e3 = false), as(this, void 0, void 0, function() {
            return ls(this, function(t2) {
              if (!this.isDestroy) {
                if (this.logType == r2.WEBSOCKET)
                  this.cn && this.fn(n2, i3);
                else if (this.logType == r2.HTTPS)
                  this.hn(n2, i3, e3);
                else if (this.logLevel !== s2.DISABLE && this.logLevel <= n2) {
                  if (4e3 < i3.length)
                    return [2];
                  for (this.an.push(i3); this.an.size() > this.ln; )
                    this.an.removeALog();
                }
              }
              return [2];
            });
          });
        }, I.prototype.clearCache = function() {
          var t2;
          0 !== this.an.size() && null != (t2 = this.$t) && t2.clearLogCacheAndUpload();
        }, I.prototype.fn = function(r3, n2) {
          var s3;
          return as(this, void 0, void 0, function() {
            var i3, e3 = this;
            return ls(this, function(t2) {
              return "string" == typeof n2 && 4e3 < n2.length ? ((t3, n3) => {
                void 0 === n3 && (n3 = 2e3);
                for (var i4 = [], e4 = 0; e4 < t3.length; )
                  i4.push(t3.substring(e4, e4 + n3)), e4 += n3;
                return i4;
              })((i3 = JSON.parse(n2)).content, 3e3).forEach(function(t3, n3) {
                3 < n3 || (i3.content = "s".concat(n3 + 1, ": ").concat(t3), e3.fn(r3, JSON.stringify(i3)));
              }) : this.N.useStrategy && this.env == o2.BROWSER && null != (s3 = this.$t) && s3.addRemoteWsLog(n2), [2];
            });
          });
        }, I.prototype.hn = function(t2, n2, i3) {
          this.an.push(n2), (this.an.size() >= this.ln || true === i3) && this.on();
        }, I.prototype.tn = function(t2, n2, i3) {
          void 0 === i3 && (i3 = {});
          var e3 = H(), n2 = [n2.substr(0, n2.indexOf(" ")) || n2, n2.substr(n2.indexOf(" ") + 1, 8e3) || n2], r3 = n2[0], n2 = n2[1], i3 = hs(hs({}, i3), { time: e3, level: t2, action: r3, content: n2, appid: this.appid, roomid: this.roomid || void 0, userid: this.userid, sessionid: this.sessionid || void 0 });
          return JSON.stringify(i3);
        }, I.prototype.Qt = function(t2, n2) {
          var i3 = H(), e3 = "", e3 = this.env % 2 === o2.BROWSER ? "rtc" : "ali";
          return n2 = hs(hs({}, n2), { time: i3, level: t2, console: e3, appid: this.appid, room_id: this.roomid, roomid: this.roomid, userid: this.userid, id_name: this.userid, sessionid: this.sessionid, sdk_version: this.version, test_environment: this.stateCenter.testEnvironment, version: this.version, event_id: this.appid + "_" + this.userid + "_" + n2.event_time + "_" + n2.seq }), JSON.stringify(n2);
        }, I.prototype.on = function() {
          0 != this.an.size() && (this.env % 2 === o2.BROWSER ? this.vn() : this.SendHttpsLogWeChatMini());
        }, I.prototype.vn = function() {
          var n2 = this, t2 = this.an.buffer.join("\n"), i3 = this.an.buffer, e3 = new XMLHttpRequest();
          e3.onreadystatechange = function() {
            if (4 == e3.readyState) {
              if (200 == e3.status) {
                if (n2.logConnected = true, 0 == e3.responseText.length)
                  return;
                try {
                  var t3 = JSON.parse(e3.responseText).interval;
                  "number" == typeof t3 && n2.logUploadInterval !== t3 && (n2.timeInterval = t3, n2.en(n2.url));
                } catch (t4) {
                  n2.an.buffer = i3.concat(n2.an.buffer), console.log("send result failed " + t4);
                }
              } else
                n2.an.buffer = i3.concat(n2.an.buffer);
              i3 = null;
            }
          }, e3.open("POST", this.url, true), 0 == this.env ? e3.send(t2) : 1 == this.env && (e3.setRequestHeader("content-type", "application/json"), e3.send(JSON.stringify({ user_id: this.userid, log: t2 }))), this.an.buffer = [];
        }, I.prototype.SendHttpsLogWeChatMini = function() {
        }, I.prototype.retryConnectSocket = function() {
          var t2, n2;
          100 < performance.now() - this.wsConnectFailTime && (this.tryIndex++, t2 = this.N.networkState === U.offline, n2 = void this.C.info("zl.rcs.0 ".concat(JSON.stringify(this.N.connectURLs), " ").concat(this.tryIndex, " ").concat(this.urlIndex)), n2 = this.tryIndex < this.urlTryMaxCount ? this.url : (this.tryIndex = 0, this.urlIndex++, this.N.connectURLs[this.urlIndex % this.N.connectURLs.length]), t2 ? null != (t2 = this.$t) && t2.openWebSocketLogServer(n2, false, true, this.dn) : null != (t2 = this.$t) && t2.openWebSocketLogServer(n2, false, true, this.wn)), this.wsConnectFailTime = performance.now();
        }, I.prototype.listener = function() {
          var t2 = this;
          this.env == o2.BROWSER && (window.addEventListener("online", function() {
            t2.N.networkState = U.online, t2.reconnectLogServer();
          }), window.addEventListener("offline", function() {
            t2.N.networkState = U.offline;
          })), this.$t && (this.$t.onSocketConnect = function() {
            t2.logConnected = true, t2.N.networkState = U.online, t2.onConnected({ url: t2.url });
          }, this.$t.onSocketClose = function() {
            t2.retryConnectSocket();
          }, this.$t.onSocketError = function() {
            t2.retryConnectSocket();
          }, this.$t.onHeartBeatTimeout = function() {
            t2.reconnectLogServer();
          });
        }, I.prototype.reconnectLogServer = function() {
          var t2, n2;
          this.logType === r2.WEBSOCKET && (this.C.info("zl.rcs.1 call"), this.tryIndex = 0, this.urlIndex = 0, n2 = this.N.connectURLs[this.urlIndex], this.url = "", null != (t2 = this.$t) && t2.resetSocketTimer(), null != (t2 = this.$t)) && t2.openWebSocketLogServer(n2, false, true, this.wn);
        }, I.prototype.enableWebSocketLog = function(t2) {
          this.$t && t2 !== this.$t.enabled && (t2 ? (this.$t.enabled = true, this.$t.openWebSocketLogServer(this.url, true, true)) : (this.$t.enabled = false, this.sn(), this.an.clear()));
        }, I.prototype.stopStorageLog = function() {
          return as(this, void 0, void 0, function() {
            return ls(this, function(t2) {
              return this.Yt ? [2, this.Yt.disable()] : [2, false];
            });
          });
        }, I.prototype.setUpBitrate = function(t2) {
          var n2;
          return null == (n2 = this.$t) || !n2.enabled || null == (n2 = this.$t) ? void 0 : n2.setUpBitrate(t2);
        }, I.prototype.setUploadStrategy = function(t2) {
          var n2;
          null != (n2 = this.$t) && n2.enabled && this.$t.setStrategy(t2);
        }, I.prototype.getWhiteList = function(t2, n2) {
          return gr.fetchWhitelist({ appID: this.appid, product: t2 = void 0 === t2 ? "rtc" : t2, userID: this.N.userid, token: this.N.token, deviceID: this.N.deviceid, bizType: n2 = void 0 === n2 ? 0 : n2 }, this.proxyCtrl);
        }, Object.defineProperty(I.prototype, "cn", { get: function() {
          var t2;
          return !(null == (t2 = this.$t) || !t2.enabled);
        }, enumerable: false, configurable: true }), I.prototype.destroy = function() {
          var t2;
          this.rn(), this.logUploadTimer && clearTimeout(this.logUploadTimer), D.instance = void 0, null != (t2 = this.$t) && t2.destroy(), this.Yt && this.Yt.destroy(), this.url = "", this.isDestroy = true, this.tryIndex = 0, this.urlIndex = 0;
        }, I.logVersion = "1.4.15";
        var vs = I;
        function I(t2, n2) {
          var e3 = this;
          this.proxyCtrl = n2, this.logLevel = s2.INFO, this.logRemoteLevel = 0, this.logUploadTimer = null, this.logUploadInterval = 1e4, this.existUserID = false, this.isDestroy = false, this.ln = 8192, this.wn = 2e3, this.dn = 5e3, this.C = { debug: this.debug.bind(this), info: this.info.bind(this), warn: this.warn.bind(this), error: this.error.bind(this) }, this.logConnected = false, this.tryIndex = 0, this.urlIndex = 0, this.urlTryMaxCount = 3, this.wsConnectFailTime = 0, this.urlGroups = { v4: [], v6: [] }, this.inflate = ge, this.deflate = _e, this.stateCenter = D.getInstance(), this.N = new hr(), this.N.env = t2, this.an = new br(this.N, this.ln), this.$t = new Ie(this.an, this.N, this.C, this.proxyCtrl), this.listener(), this.env == o2.BROWSER && fs.isEnvSupport() && (this.Yt = new fs(this.N, this.C, this.proxyCtrl), this.Yt.onUploadLog = function(t3, n3, i3) {
            e3.onUploadLog(t3, n3, i3);
          });
        }
      }], o = {}, r.m = s, r.c = o, r.d = function(t, n, i2) {
        r.o(t, n) || Object.defineProperty(t, n, { enumerable: true, get: i2 });
      }, r.r = function(t) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t, "bn", { value: true });
      }, r.t = function(n, t) {
        if (1 & t && (n = r(n)), 8 & t)
          return n;
        if (4 & t && "object" == typeof n && n && n.bn)
          return n;
        var i2 = /* @__PURE__ */ Object.create(null);
        if (r.r(i2), Object.defineProperty(i2, "default", { enumerable: true, value: n }), 2 & t && "string" != typeof n)
          for (var e2 in n)
            r.d(i2, e2, (function(t2) {
              return n[t2];
            }).bind(null, e2));
        return i2;
      }, r.n = function(t) {
        var n = t && t.bn ? function() {
          return t.default;
        } : function() {
          return t;
        };
        return r.d(n, "a", n), n;
      }, r.o = function(t, n) {
        return Object.prototype.hasOwnProperty.call(t, n);
      }, r.p = "", r(r.s = 2);
      function r(t) {
        var n;
        return (o[t] || (n = o[t] = { i: t, l: false, exports: {} }, s[t].call(n.exports, n, n.exports, r), n.l = true, n)).exports;
      }
      var s, o;
    });
  }
});

// node_modules/localforage/dist/localforage.js
var require_localforage = __commonJS({
  "node_modules/localforage/dist/localforage.js"(exports2, module2) {
    (function(f) {
      if (typeof exports2 === "object" && typeof module2 !== "undefined") {
        module2.exports = f();
      } else if (typeof define === "function" && define.amd) {
        define([], f);
      } else {
        var g;
        if (typeof window !== "undefined") {
          g = window;
        } else if (typeof global !== "undefined") {
          g = global;
        } else if (typeof self !== "undefined") {
          g = self;
        } else {
          g = this;
        }
        g.localforage = f();
      }
    })(function() {
      var define2, module3, exports3;
      return function e(t, n, r) {
        function s(o2, u) {
          if (!n[o2]) {
            if (!t[o2]) {
              var a = typeof __require == "function" && __require;
              if (!u && a)
                return a(o2, true);
              if (i)
                return i(o2, true);
              var f = new Error("Cannot find module '" + o2 + "'");
              throw f.code = "MODULE_NOT_FOUND", f;
            }
            var l = n[o2] = { exports: {} };
            t[o2][0].call(l.exports, function(e2) {
              var n2 = t[o2][1][e2];
              return s(n2 ? n2 : e2);
            }, l, l.exports, e, t, n, r);
          }
          return n[o2].exports;
        }
        var i = typeof __require == "function" && __require;
        for (var o = 0; o < r.length; o++)
          s(r[o]);
        return s;
      }({ 1: [function(_dereq_, module4, exports4) {
        (function(global2) {
          "use strict";
          var Mutation = global2.MutationObserver || global2.WebKitMutationObserver;
          var scheduleDrain;
          {
            if (Mutation) {
              var called = 0;
              var observer = new Mutation(nextTick);
              var element = global2.document.createTextNode("");
              observer.observe(element, {
                characterData: true
              });
              scheduleDrain = function() {
                element.data = called = ++called % 2;
              };
            } else if (!global2.setImmediate && typeof global2.MessageChannel !== "undefined") {
              var channel = new global2.MessageChannel();
              channel.port1.onmessage = nextTick;
              scheduleDrain = function() {
                channel.port2.postMessage(0);
              };
            } else if ("document" in global2 && "onreadystatechange" in global2.document.createElement("script")) {
              scheduleDrain = function() {
                var scriptEl = global2.document.createElement("script");
                scriptEl.onreadystatechange = function() {
                  nextTick();
                  scriptEl.onreadystatechange = null;
                  scriptEl.parentNode.removeChild(scriptEl);
                  scriptEl = null;
                };
                global2.document.documentElement.appendChild(scriptEl);
              };
            } else {
              scheduleDrain = function() {
                setTimeout(nextTick, 0);
              };
            }
          }
          var draining;
          var queue = [];
          function nextTick() {
            draining = true;
            var i, oldQueue;
            var len = queue.length;
            while (len) {
              oldQueue = queue;
              queue = [];
              i = -1;
              while (++i < len) {
                oldQueue[i]();
              }
              len = queue.length;
            }
            draining = false;
          }
          module4.exports = immediate;
          function immediate(task) {
            if (queue.push(task) === 1 && !draining) {
              scheduleDrain();
            }
          }
        }).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
      }, {}], 2: [function(_dereq_, module4, exports4) {
        "use strict";
        var immediate = _dereq_(1);
        function INTERNAL() {
        }
        var handlers = {};
        var REJECTED = ["REJECTED"];
        var FULFILLED = ["FULFILLED"];
        var PENDING = ["PENDING"];
        module4.exports = Promise2;
        function Promise2(resolver) {
          if (typeof resolver !== "function") {
            throw new TypeError("resolver must be a function");
          }
          this.state = PENDING;
          this.queue = [];
          this.outcome = void 0;
          if (resolver !== INTERNAL) {
            safelyResolveThenable(this, resolver);
          }
        }
        Promise2.prototype["catch"] = function(onRejected) {
          return this.then(null, onRejected);
        };
        Promise2.prototype.then = function(onFulfilled, onRejected) {
          if (typeof onFulfilled !== "function" && this.state === FULFILLED || typeof onRejected !== "function" && this.state === REJECTED) {
            return this;
          }
          var promise = new this.constructor(INTERNAL);
          if (this.state !== PENDING) {
            var resolver = this.state === FULFILLED ? onFulfilled : onRejected;
            unwrap(promise, resolver, this.outcome);
          } else {
            this.queue.push(new QueueItem(promise, onFulfilled, onRejected));
          }
          return promise;
        };
        function QueueItem(promise, onFulfilled, onRejected) {
          this.promise = promise;
          if (typeof onFulfilled === "function") {
            this.onFulfilled = onFulfilled;
            this.callFulfilled = this.otherCallFulfilled;
          }
          if (typeof onRejected === "function") {
            this.onRejected = onRejected;
            this.callRejected = this.otherCallRejected;
          }
        }
        QueueItem.prototype.callFulfilled = function(value) {
          handlers.resolve(this.promise, value);
        };
        QueueItem.prototype.otherCallFulfilled = function(value) {
          unwrap(this.promise, this.onFulfilled, value);
        };
        QueueItem.prototype.callRejected = function(value) {
          handlers.reject(this.promise, value);
        };
        QueueItem.prototype.otherCallRejected = function(value) {
          unwrap(this.promise, this.onRejected, value);
        };
        function unwrap(promise, func, value) {
          immediate(function() {
            var returnValue;
            try {
              returnValue = func(value);
            } catch (e) {
              return handlers.reject(promise, e);
            }
            if (returnValue === promise) {
              handlers.reject(promise, new TypeError("Cannot resolve promise with itself"));
            } else {
              handlers.resolve(promise, returnValue);
            }
          });
        }
        handlers.resolve = function(self2, value) {
          var result = tryCatch(getThen, value);
          if (result.status === "error") {
            return handlers.reject(self2, result.value);
          }
          var thenable = result.value;
          if (thenable) {
            safelyResolveThenable(self2, thenable);
          } else {
            self2.state = FULFILLED;
            self2.outcome = value;
            var i = -1;
            var len = self2.queue.length;
            while (++i < len) {
              self2.queue[i].callFulfilled(value);
            }
          }
          return self2;
        };
        handlers.reject = function(self2, error) {
          self2.state = REJECTED;
          self2.outcome = error;
          var i = -1;
          var len = self2.queue.length;
          while (++i < len) {
            self2.queue[i].callRejected(error);
          }
          return self2;
        };
        function getThen(obj) {
          var then = obj && obj.then;
          if (obj && (typeof obj === "object" || typeof obj === "function") && typeof then === "function") {
            return function appyThen() {
              then.apply(obj, arguments);
            };
          }
        }
        function safelyResolveThenable(self2, thenable) {
          var called = false;
          function onError(value) {
            if (called) {
              return;
            }
            called = true;
            handlers.reject(self2, value);
          }
          function onSuccess(value) {
            if (called) {
              return;
            }
            called = true;
            handlers.resolve(self2, value);
          }
          function tryToUnwrap() {
            thenable(onSuccess, onError);
          }
          var result = tryCatch(tryToUnwrap);
          if (result.status === "error") {
            onError(result.value);
          }
        }
        function tryCatch(func, value) {
          var out = {};
          try {
            out.value = func(value);
            out.status = "success";
          } catch (e) {
            out.status = "error";
            out.value = e;
          }
          return out;
        }
        Promise2.resolve = resolve;
        function resolve(value) {
          if (value instanceof this) {
            return value;
          }
          return handlers.resolve(new this(INTERNAL), value);
        }
        Promise2.reject = reject;
        function reject(reason) {
          var promise = new this(INTERNAL);
          return handlers.reject(promise, reason);
        }
        Promise2.all = all;
        function all(iterable) {
          var self2 = this;
          if (Object.prototype.toString.call(iterable) !== "[object Array]") {
            return this.reject(new TypeError("must be an array"));
          }
          var len = iterable.length;
          var called = false;
          if (!len) {
            return this.resolve([]);
          }
          var values = new Array(len);
          var resolved = 0;
          var i = -1;
          var promise = new this(INTERNAL);
          while (++i < len) {
            allResolver(iterable[i], i);
          }
          return promise;
          function allResolver(value, i2) {
            self2.resolve(value).then(resolveFromAll, function(error) {
              if (!called) {
                called = true;
                handlers.reject(promise, error);
              }
            });
            function resolveFromAll(outValue) {
              values[i2] = outValue;
              if (++resolved === len && !called) {
                called = true;
                handlers.resolve(promise, values);
              }
            }
          }
        }
        Promise2.race = race;
        function race(iterable) {
          var self2 = this;
          if (Object.prototype.toString.call(iterable) !== "[object Array]") {
            return this.reject(new TypeError("must be an array"));
          }
          var len = iterable.length;
          var called = false;
          if (!len) {
            return this.resolve([]);
          }
          var i = -1;
          var promise = new this(INTERNAL);
          while (++i < len) {
            resolver(iterable[i]);
          }
          return promise;
          function resolver(value) {
            self2.resolve(value).then(function(response) {
              if (!called) {
                called = true;
                handlers.resolve(promise, response);
              }
            }, function(error) {
              if (!called) {
                called = true;
                handlers.reject(promise, error);
              }
            });
          }
        }
      }, { "1": 1 }], 3: [function(_dereq_, module4, exports4) {
        (function(global2) {
          "use strict";
          if (typeof global2.Promise !== "function") {
            global2.Promise = _dereq_(2);
          }
        }).call(this, typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {});
      }, { "2": 2 }], 4: [function(_dereq_, module4, exports4) {
        "use strict";
        var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function(obj) {
          return typeof obj;
        } : function(obj) {
          return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
        };
        function _classCallCheck(instance, Constructor) {
          if (!(instance instanceof Constructor)) {
            throw new TypeError("Cannot call a class as a function");
          }
        }
        function getIDB() {
          try {
            if (typeof indexedDB !== "undefined") {
              return indexedDB;
            }
            if (typeof webkitIndexedDB !== "undefined") {
              return webkitIndexedDB;
            }
            if (typeof mozIndexedDB !== "undefined") {
              return mozIndexedDB;
            }
            if (typeof OIndexedDB !== "undefined") {
              return OIndexedDB;
            }
            if (typeof msIndexedDB !== "undefined") {
              return msIndexedDB;
            }
          } catch (e) {
            return;
          }
        }
        var idb = getIDB();
        function isIndexedDBValid() {
          try {
            if (!idb || !idb.open) {
              return false;
            }
            var isSafari = typeof openDatabase !== "undefined" && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);
            var hasFetch = typeof fetch === "function" && fetch.toString().indexOf("[native code") !== -1;
            return (!isSafari || hasFetch) && typeof indexedDB !== "undefined" && // some outdated implementations of IDB that appear on Samsung
            // and HTC Android devices <4.4 are missing IDBKeyRange
            // See: https://github.com/mozilla/localForage/issues/128
            // See: https://github.com/mozilla/localForage/issues/272
            typeof IDBKeyRange !== "undefined";
          } catch (e) {
            return false;
          }
        }
        function createBlob(parts, properties) {
          parts = parts || [];
          properties = properties || {};
          try {
            return new Blob(parts, properties);
          } catch (e) {
            if (e.name !== "TypeError") {
              throw e;
            }
            var Builder = typeof BlobBuilder !== "undefined" ? BlobBuilder : typeof MSBlobBuilder !== "undefined" ? MSBlobBuilder : typeof MozBlobBuilder !== "undefined" ? MozBlobBuilder : WebKitBlobBuilder;
            var builder = new Builder();
            for (var i = 0; i < parts.length; i += 1) {
              builder.append(parts[i]);
            }
            return builder.getBlob(properties.type);
          }
        }
        if (typeof Promise === "undefined") {
          _dereq_(3);
        }
        var Promise$1 = Promise;
        function executeCallback(promise, callback) {
          if (callback) {
            promise.then(function(result) {
              callback(null, result);
            }, function(error) {
              callback(error);
            });
          }
        }
        function executeTwoCallbacks(promise, callback, errorCallback) {
          if (typeof callback === "function") {
            promise.then(callback);
          }
          if (typeof errorCallback === "function") {
            promise["catch"](errorCallback);
          }
        }
        function normalizeKey(key2) {
          if (typeof key2 !== "string") {
            console.warn(key2 + " used as a key, but it is not a string.");
            key2 = String(key2);
          }
          return key2;
        }
        function getCallback() {
          if (arguments.length && typeof arguments[arguments.length - 1] === "function") {
            return arguments[arguments.length - 1];
          }
        }
        var DETECT_BLOB_SUPPORT_STORE = "local-forage-detect-blob-support";
        var supportsBlobs = void 0;
        var dbContexts = {};
        var toString = Object.prototype.toString;
        var READ_ONLY = "readonly";
        var READ_WRITE = "readwrite";
        function _binStringToArrayBuffer(bin) {
          var length2 = bin.length;
          var buf = new ArrayBuffer(length2);
          var arr = new Uint8Array(buf);
          for (var i = 0; i < length2; i++) {
            arr[i] = bin.charCodeAt(i);
          }
          return buf;
        }
        function _checkBlobSupportWithoutCaching(idb2) {
          return new Promise$1(function(resolve) {
            var txn = idb2.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);
            var blob = createBlob([""]);
            txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, "key");
            txn.onabort = function(e) {
              e.preventDefault();
              e.stopPropagation();
              resolve(false);
            };
            txn.oncomplete = function() {
              var matchedChrome = navigator.userAgent.match(/Chrome\/(\d+)/);
              var matchedEdge = navigator.userAgent.match(/Edge\//);
              resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);
            };
          })["catch"](function() {
            return false;
          });
        }
        function _checkBlobSupport(idb2) {
          if (typeof supportsBlobs === "boolean") {
            return Promise$1.resolve(supportsBlobs);
          }
          return _checkBlobSupportWithoutCaching(idb2).then(function(value) {
            supportsBlobs = value;
            return supportsBlobs;
          });
        }
        function _deferReadiness(dbInfo) {
          var dbContext = dbContexts[dbInfo.name];
          var deferredOperation = {};
          deferredOperation.promise = new Promise$1(function(resolve, reject) {
            deferredOperation.resolve = resolve;
            deferredOperation.reject = reject;
          });
          dbContext.deferredOperations.push(deferredOperation);
          if (!dbContext.dbReady) {
            dbContext.dbReady = deferredOperation.promise;
          } else {
            dbContext.dbReady = dbContext.dbReady.then(function() {
              return deferredOperation.promise;
            });
          }
        }
        function _advanceReadiness(dbInfo) {
          var dbContext = dbContexts[dbInfo.name];
          var deferredOperation = dbContext.deferredOperations.pop();
          if (deferredOperation) {
            deferredOperation.resolve();
            return deferredOperation.promise;
          }
        }
        function _rejectReadiness(dbInfo, err) {
          var dbContext = dbContexts[dbInfo.name];
          var deferredOperation = dbContext.deferredOperations.pop();
          if (deferredOperation) {
            deferredOperation.reject(err);
            return deferredOperation.promise;
          }
        }
        function _getConnection(dbInfo, upgradeNeeded) {
          return new Promise$1(function(resolve, reject) {
            dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();
            if (dbInfo.db) {
              if (upgradeNeeded) {
                _deferReadiness(dbInfo);
                dbInfo.db.close();
              } else {
                return resolve(dbInfo.db);
              }
            }
            var dbArgs = [dbInfo.name];
            if (upgradeNeeded) {
              dbArgs.push(dbInfo.version);
            }
            var openreq = idb.open.apply(idb, dbArgs);
            if (upgradeNeeded) {
              openreq.onupgradeneeded = function(e) {
                var db = openreq.result;
                try {
                  db.createObjectStore(dbInfo.storeName);
                  if (e.oldVersion <= 1) {
                    db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);
                  }
                } catch (ex) {
                  if (ex.name === "ConstraintError") {
                    console.warn('The database "' + dbInfo.name + '" has been upgraded from version ' + e.oldVersion + " to version " + e.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                  } else {
                    throw ex;
                  }
                }
              };
            }
            openreq.onerror = function(e) {
              e.preventDefault();
              reject(openreq.error);
            };
            openreq.onsuccess = function() {
              var db = openreq.result;
              db.onversionchange = function(e) {
                e.target.close();
              };
              resolve(db);
              _advanceReadiness(dbInfo);
            };
          });
        }
        function _getOriginalConnection(dbInfo) {
          return _getConnection(dbInfo, false);
        }
        function _getUpgradedConnection(dbInfo) {
          return _getConnection(dbInfo, true);
        }
        function _isUpgradeNeeded(dbInfo, defaultVersion) {
          if (!dbInfo.db) {
            return true;
          }
          var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
          var isDowngrade = dbInfo.version < dbInfo.db.version;
          var isUpgrade = dbInfo.version > dbInfo.db.version;
          if (isDowngrade) {
            if (dbInfo.version !== defaultVersion) {
              console.warn('The database "' + dbInfo.name + `" can't be downgraded from version ` + dbInfo.db.version + " to version " + dbInfo.version + ".");
            }
            dbInfo.version = dbInfo.db.version;
          }
          if (isUpgrade || isNewStore) {
            if (isNewStore) {
              var incVersion = dbInfo.db.version + 1;
              if (incVersion > dbInfo.version) {
                dbInfo.version = incVersion;
              }
            }
            return true;
          }
          return false;
        }
        function _encodeBlob(blob) {
          return new Promise$1(function(resolve, reject) {
            var reader = new FileReader();
            reader.onerror = reject;
            reader.onloadend = function(e) {
              var base64 = btoa(e.target.result || "");
              resolve({
                __local_forage_encoded_blob: true,
                data: base64,
                type: blob.type
              });
            };
            reader.readAsBinaryString(blob);
          });
        }
        function _decodeBlob(encodedBlob) {
          var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));
          return createBlob([arrayBuff], { type: encodedBlob.type });
        }
        function _isEncodedBlob(value) {
          return value && value.__local_forage_encoded_blob;
        }
        function _fullyReady(callback) {
          var self2 = this;
          var promise = self2._initReady().then(function() {
            var dbContext = dbContexts[self2._dbInfo.name];
            if (dbContext && dbContext.dbReady) {
              return dbContext.dbReady;
            }
          });
          executeTwoCallbacks(promise, callback, callback);
          return promise;
        }
        function _tryReconnect(dbInfo) {
          _deferReadiness(dbInfo);
          var dbContext = dbContexts[dbInfo.name];
          var forages = dbContext.forages;
          for (var i = 0; i < forages.length; i++) {
            var forage = forages[i];
            if (forage._dbInfo.db) {
              forage._dbInfo.db.close();
              forage._dbInfo.db = null;
            }
          }
          dbInfo.db = null;
          return _getOriginalConnection(dbInfo).then(function(db) {
            dbInfo.db = db;
            if (_isUpgradeNeeded(dbInfo)) {
              return _getUpgradedConnection(dbInfo);
            }
            return db;
          }).then(function(db) {
            dbInfo.db = dbContext.db = db;
            for (var i2 = 0; i2 < forages.length; i2++) {
              forages[i2]._dbInfo.db = db;
            }
          })["catch"](function(err) {
            _rejectReadiness(dbInfo, err);
            throw err;
          });
        }
        function createTransaction(dbInfo, mode, callback, retries) {
          if (retries === void 0) {
            retries = 1;
          }
          try {
            var tx = dbInfo.db.transaction(dbInfo.storeName, mode);
            callback(null, tx);
          } catch (err) {
            if (retries > 0 && (!dbInfo.db || err.name === "InvalidStateError" || err.name === "NotFoundError")) {
              return Promise$1.resolve().then(function() {
                if (!dbInfo.db || err.name === "NotFoundError" && !dbInfo.db.objectStoreNames.contains(dbInfo.storeName) && dbInfo.version <= dbInfo.db.version) {
                  if (dbInfo.db) {
                    dbInfo.version = dbInfo.db.version + 1;
                  }
                  return _getUpgradedConnection(dbInfo);
                }
              }).then(function() {
                return _tryReconnect(dbInfo).then(function() {
                  createTransaction(dbInfo, mode, callback, retries - 1);
                });
              })["catch"](callback);
            }
            callback(err);
          }
        }
        function createDbContext() {
          return {
            // Running localForages sharing a database.
            forages: [],
            // Shared database.
            db: null,
            // Database readiness (promise).
            dbReady: null,
            // Deferred operations on the database.
            deferredOperations: []
          };
        }
        function _initStorage(options) {
          var self2 = this;
          var dbInfo = {
            db: null
          };
          if (options) {
            for (var i in options) {
              dbInfo[i] = options[i];
            }
          }
          var dbContext = dbContexts[dbInfo.name];
          if (!dbContext) {
            dbContext = createDbContext();
            dbContexts[dbInfo.name] = dbContext;
          }
          dbContext.forages.push(self2);
          if (!self2._initReady) {
            self2._initReady = self2.ready;
            self2.ready = _fullyReady;
          }
          var initPromises = [];
          function ignoreErrors() {
            return Promise$1.resolve();
          }
          for (var j = 0; j < dbContext.forages.length; j++) {
            var forage = dbContext.forages[j];
            if (forage !== self2) {
              initPromises.push(forage._initReady()["catch"](ignoreErrors));
            }
          }
          var forages = dbContext.forages.slice(0);
          return Promise$1.all(initPromises).then(function() {
            dbInfo.db = dbContext.db;
            return _getOriginalConnection(dbInfo);
          }).then(function(db) {
            dbInfo.db = db;
            if (_isUpgradeNeeded(dbInfo, self2._defaultConfig.version)) {
              return _getUpgradedConnection(dbInfo);
            }
            return db;
          }).then(function(db) {
            dbInfo.db = dbContext.db = db;
            self2._dbInfo = dbInfo;
            for (var k = 0; k < forages.length; k++) {
              var forage2 = forages[k];
              if (forage2 !== self2) {
                forage2._dbInfo.db = dbInfo.db;
                forage2._dbInfo.version = dbInfo.version;
              }
            }
          });
        }
        function getItem(key2, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  var req = store.get(key2);
                  req.onsuccess = function() {
                    var value = req.result;
                    if (value === void 0) {
                      value = null;
                    }
                    if (_isEncodedBlob(value)) {
                      value = _decodeBlob(value);
                    }
                    resolve(value);
                  };
                  req.onerror = function() {
                    reject(req.error);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function iterate(iterator, callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  var req = store.openCursor();
                  var iterationNumber = 1;
                  req.onsuccess = function() {
                    var cursor = req.result;
                    if (cursor) {
                      var value = cursor.value;
                      if (_isEncodedBlob(value)) {
                        value = _decodeBlob(value);
                      }
                      var result = iterator(value, cursor.key, iterationNumber++);
                      if (result !== void 0) {
                        resolve(result);
                      } else {
                        cursor["continue"]();
                      }
                    } else {
                      resolve();
                    }
                  };
                  req.onerror = function() {
                    reject(req.error);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function setItem(key2, value, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = new Promise$1(function(resolve, reject) {
            var dbInfo;
            self2.ready().then(function() {
              dbInfo = self2._dbInfo;
              if (toString.call(value) === "[object Blob]") {
                return _checkBlobSupport(dbInfo.db).then(function(blobSupport) {
                  if (blobSupport) {
                    return value;
                  }
                  return _encodeBlob(value);
                });
              }
              return value;
            }).then(function(value2) {
              createTransaction(self2._dbInfo, READ_WRITE, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  if (value2 === null) {
                    value2 = void 0;
                  }
                  var req = store.put(value2, key2);
                  transaction.oncomplete = function() {
                    if (value2 === void 0) {
                      value2 = null;
                    }
                    resolve(value2);
                  };
                  transaction.onabort = transaction.onerror = function() {
                    var err2 = req.error ? req.error : req.transaction.error;
                    reject(err2);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function removeItem(key2, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              createTransaction(self2._dbInfo, READ_WRITE, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  var req = store["delete"](key2);
                  transaction.oncomplete = function() {
                    resolve();
                  };
                  transaction.onerror = function() {
                    reject(req.error);
                  };
                  transaction.onabort = function() {
                    var err2 = req.error ? req.error : req.transaction.error;
                    reject(err2);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function clear(callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              createTransaction(self2._dbInfo, READ_WRITE, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  var req = store.clear();
                  transaction.oncomplete = function() {
                    resolve();
                  };
                  transaction.onabort = transaction.onerror = function() {
                    var err2 = req.error ? req.error : req.transaction.error;
                    reject(err2);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function length(callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  var req = store.count();
                  req.onsuccess = function() {
                    resolve(req.result);
                  };
                  req.onerror = function() {
                    reject(req.error);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function key(n, callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            if (n < 0) {
              resolve(null);
              return;
            }
            self2.ready().then(function() {
              createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  var advanced = false;
                  var req = store.openKeyCursor();
                  req.onsuccess = function() {
                    var cursor = req.result;
                    if (!cursor) {
                      resolve(null);
                      return;
                    }
                    if (n === 0) {
                      resolve(cursor.key);
                    } else {
                      if (!advanced) {
                        advanced = true;
                        cursor.advance(n);
                      } else {
                        resolve(cursor.key);
                      }
                    }
                  };
                  req.onerror = function() {
                    reject(req.error);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function keys(callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              createTransaction(self2._dbInfo, READ_ONLY, function(err, transaction) {
                if (err) {
                  return reject(err);
                }
                try {
                  var store = transaction.objectStore(self2._dbInfo.storeName);
                  var req = store.openKeyCursor();
                  var keys2 = [];
                  req.onsuccess = function() {
                    var cursor = req.result;
                    if (!cursor) {
                      resolve(keys2);
                      return;
                    }
                    keys2.push(cursor.key);
                    cursor["continue"]();
                  };
                  req.onerror = function() {
                    reject(req.error);
                  };
                } catch (e) {
                  reject(e);
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function dropInstance(options, callback) {
          callback = getCallback.apply(this, arguments);
          var currentConfig = this.config();
          options = typeof options !== "function" && options || {};
          if (!options.name) {
            options.name = options.name || currentConfig.name;
            options.storeName = options.storeName || currentConfig.storeName;
          }
          var self2 = this;
          var promise;
          if (!options.name) {
            promise = Promise$1.reject("Invalid arguments");
          } else {
            var isCurrentDb = options.name === currentConfig.name && self2._dbInfo.db;
            var dbPromise = isCurrentDb ? Promise$1.resolve(self2._dbInfo.db) : _getOriginalConnection(options).then(function(db) {
              var dbContext = dbContexts[options.name];
              var forages = dbContext.forages;
              dbContext.db = db;
              for (var i = 0; i < forages.length; i++) {
                forages[i]._dbInfo.db = db;
              }
              return db;
            });
            if (!options.storeName) {
              promise = dbPromise.then(function(db) {
                _deferReadiness(options);
                var dbContext = dbContexts[options.name];
                var forages = dbContext.forages;
                db.close();
                for (var i = 0; i < forages.length; i++) {
                  var forage = forages[i];
                  forage._dbInfo.db = null;
                }
                var dropDBPromise = new Promise$1(function(resolve, reject) {
                  var req = idb.deleteDatabase(options.name);
                  req.onerror = function() {
                    var db2 = req.result;
                    if (db2) {
                      db2.close();
                    }
                    reject(req.error);
                  };
                  req.onblocked = function() {
                    console.warn('dropInstance blocked for database "' + options.name + '" until all open connections are closed');
                  };
                  req.onsuccess = function() {
                    var db2 = req.result;
                    if (db2) {
                      db2.close();
                    }
                    resolve(db2);
                  };
                });
                return dropDBPromise.then(function(db2) {
                  dbContext.db = db2;
                  for (var i2 = 0; i2 < forages.length; i2++) {
                    var _forage = forages[i2];
                    _advanceReadiness(_forage._dbInfo);
                  }
                })["catch"](function(err) {
                  (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function() {
                  });
                  throw err;
                });
              });
            } else {
              promise = dbPromise.then(function(db) {
                if (!db.objectStoreNames.contains(options.storeName)) {
                  return;
                }
                var newVersion = db.version + 1;
                _deferReadiness(options);
                var dbContext = dbContexts[options.name];
                var forages = dbContext.forages;
                db.close();
                for (var i = 0; i < forages.length; i++) {
                  var forage = forages[i];
                  forage._dbInfo.db = null;
                  forage._dbInfo.version = newVersion;
                }
                var dropObjectPromise = new Promise$1(function(resolve, reject) {
                  var req = idb.open(options.name, newVersion);
                  req.onerror = function(err) {
                    var db2 = req.result;
                    db2.close();
                    reject(err);
                  };
                  req.onupgradeneeded = function() {
                    var db2 = req.result;
                    db2.deleteObjectStore(options.storeName);
                  };
                  req.onsuccess = function() {
                    var db2 = req.result;
                    db2.close();
                    resolve(db2);
                  };
                });
                return dropObjectPromise.then(function(db2) {
                  dbContext.db = db2;
                  for (var j = 0; j < forages.length; j++) {
                    var _forage2 = forages[j];
                    _forage2._dbInfo.db = db2;
                    _advanceReadiness(_forage2._dbInfo);
                  }
                })["catch"](function(err) {
                  (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function() {
                  });
                  throw err;
                });
              });
            }
          }
          executeCallback(promise, callback);
          return promise;
        }
        var asyncStorage = {
          _driver: "asyncStorage",
          _initStorage,
          _support: isIndexedDBValid(),
          iterate,
          getItem,
          setItem,
          removeItem,
          clear,
          length,
          key,
          keys,
          dropInstance
        };
        function isWebSQLValid() {
          return typeof openDatabase === "function";
        }
        var BASE_CHARS = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
        var BLOB_TYPE_PREFIX = "~~local_forage_type~";
        var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;
        var SERIALIZED_MARKER = "__lfsc__:";
        var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;
        var TYPE_ARRAYBUFFER = "arbf";
        var TYPE_BLOB = "blob";
        var TYPE_INT8ARRAY = "si08";
        var TYPE_UINT8ARRAY = "ui08";
        var TYPE_UINT8CLAMPEDARRAY = "uic8";
        var TYPE_INT16ARRAY = "si16";
        var TYPE_INT32ARRAY = "si32";
        var TYPE_UINT16ARRAY = "ur16";
        var TYPE_UINT32ARRAY = "ui32";
        var TYPE_FLOAT32ARRAY = "fl32";
        var TYPE_FLOAT64ARRAY = "fl64";
        var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;
        var toString$1 = Object.prototype.toString;
        function stringToBuffer(serializedString) {
          var bufferLength = serializedString.length * 0.75;
          var len = serializedString.length;
          var i;
          var p = 0;
          var encoded1, encoded2, encoded3, encoded4;
          if (serializedString[serializedString.length - 1] === "=") {
            bufferLength--;
            if (serializedString[serializedString.length - 2] === "=") {
              bufferLength--;
            }
          }
          var buffer = new ArrayBuffer(bufferLength);
          var bytes = new Uint8Array(buffer);
          for (i = 0; i < len; i += 4) {
            encoded1 = BASE_CHARS.indexOf(serializedString[i]);
            encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);
            encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);
            encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);
            bytes[p++] = encoded1 << 2 | encoded2 >> 4;
            bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
            bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
          }
          return buffer;
        }
        function bufferToString(buffer) {
          var bytes = new Uint8Array(buffer);
          var base64String = "";
          var i;
          for (i = 0; i < bytes.length; i += 3) {
            base64String += BASE_CHARS[bytes[i] >> 2];
            base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];
            base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];
            base64String += BASE_CHARS[bytes[i + 2] & 63];
          }
          if (bytes.length % 3 === 2) {
            base64String = base64String.substring(0, base64String.length - 1) + "=";
          } else if (bytes.length % 3 === 1) {
            base64String = base64String.substring(0, base64String.length - 2) + "==";
          }
          return base64String;
        }
        function serialize(value, callback) {
          var valueType = "";
          if (value) {
            valueType = toString$1.call(value);
          }
          if (value && (valueType === "[object ArrayBuffer]" || value.buffer && toString$1.call(value.buffer) === "[object ArrayBuffer]")) {
            var buffer;
            var marker = SERIALIZED_MARKER;
            if (value instanceof ArrayBuffer) {
              buffer = value;
              marker += TYPE_ARRAYBUFFER;
            } else {
              buffer = value.buffer;
              if (valueType === "[object Int8Array]") {
                marker += TYPE_INT8ARRAY;
              } else if (valueType === "[object Uint8Array]") {
                marker += TYPE_UINT8ARRAY;
              } else if (valueType === "[object Uint8ClampedArray]") {
                marker += TYPE_UINT8CLAMPEDARRAY;
              } else if (valueType === "[object Int16Array]") {
                marker += TYPE_INT16ARRAY;
              } else if (valueType === "[object Uint16Array]") {
                marker += TYPE_UINT16ARRAY;
              } else if (valueType === "[object Int32Array]") {
                marker += TYPE_INT32ARRAY;
              } else if (valueType === "[object Uint32Array]") {
                marker += TYPE_UINT32ARRAY;
              } else if (valueType === "[object Float32Array]") {
                marker += TYPE_FLOAT32ARRAY;
              } else if (valueType === "[object Float64Array]") {
                marker += TYPE_FLOAT64ARRAY;
              } else {
                callback(new Error("Failed to get type for BinaryArray"));
              }
            }
            callback(marker + bufferToString(buffer));
          } else if (valueType === "[object Blob]") {
            var fileReader = new FileReader();
            fileReader.onload = function() {
              var str = BLOB_TYPE_PREFIX + value.type + "~" + bufferToString(this.result);
              callback(SERIALIZED_MARKER + TYPE_BLOB + str);
            };
            fileReader.readAsArrayBuffer(value);
          } else {
            try {
              callback(JSON.stringify(value));
            } catch (e) {
              console.error("Couldn't convert value into a JSON string: ", value);
              callback(null, e);
            }
          }
        }
        function deserialize(value) {
          if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
            return JSON.parse(value);
          }
          var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
          var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);
          var blobType;
          if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
            var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
            blobType = matcher[1];
            serializedString = serializedString.substring(matcher[0].length);
          }
          var buffer = stringToBuffer(serializedString);
          switch (type) {
            case TYPE_ARRAYBUFFER:
              return buffer;
            case TYPE_BLOB:
              return createBlob([buffer], { type: blobType });
            case TYPE_INT8ARRAY:
              return new Int8Array(buffer);
            case TYPE_UINT8ARRAY:
              return new Uint8Array(buffer);
            case TYPE_UINT8CLAMPEDARRAY:
              return new Uint8ClampedArray(buffer);
            case TYPE_INT16ARRAY:
              return new Int16Array(buffer);
            case TYPE_UINT16ARRAY:
              return new Uint16Array(buffer);
            case TYPE_INT32ARRAY:
              return new Int32Array(buffer);
            case TYPE_UINT32ARRAY:
              return new Uint32Array(buffer);
            case TYPE_FLOAT32ARRAY:
              return new Float32Array(buffer);
            case TYPE_FLOAT64ARRAY:
              return new Float64Array(buffer);
            default:
              throw new Error("Unkown type: " + type);
          }
        }
        var localforageSerializer = {
          serialize,
          deserialize,
          stringToBuffer,
          bufferToString
        };
        function createDbTable(t, dbInfo, callback, errorCallback) {
          t.executeSql("CREATE TABLE IF NOT EXISTS " + dbInfo.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], callback, errorCallback);
        }
        function _initStorage$1(options) {
          var self2 = this;
          var dbInfo = {
            db: null
          };
          if (options) {
            for (var i in options) {
              dbInfo[i] = typeof options[i] !== "string" ? options[i].toString() : options[i];
            }
          }
          var dbInfoPromise = new Promise$1(function(resolve, reject) {
            try {
              dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
            } catch (e) {
              return reject(e);
            }
            dbInfo.db.transaction(function(t) {
              createDbTable(t, dbInfo, function() {
                self2._dbInfo = dbInfo;
                resolve();
              }, function(t2, error) {
                reject(error);
              });
            }, reject);
          });
          dbInfo.serializer = localforageSerializer;
          return dbInfoPromise;
        }
        function tryExecuteSql(t, dbInfo, sqlStatement, args, callback, errorCallback) {
          t.executeSql(sqlStatement, args, callback, function(t2, error) {
            if (error.code === error.SYNTAX_ERR) {
              t2.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [dbInfo.storeName], function(t3, results) {
                if (!results.rows.length) {
                  createDbTable(t3, dbInfo, function() {
                    t3.executeSql(sqlStatement, args, callback, errorCallback);
                  }, errorCallback);
                } else {
                  errorCallback(t3, error);
                }
              }, errorCallback);
            } else {
              errorCallback(t2, error);
            }
          }, errorCallback);
        }
        function getItem$1(key2, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              dbInfo.db.transaction(function(t) {
                tryExecuteSql(t, dbInfo, "SELECT * FROM " + dbInfo.storeName + " WHERE key = ? LIMIT 1", [key2], function(t2, results) {
                  var result = results.rows.length ? results.rows.item(0).value : null;
                  if (result) {
                    result = dbInfo.serializer.deserialize(result);
                  }
                  resolve(result);
                }, function(t2, error) {
                  reject(error);
                });
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function iterate$1(iterator, callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              dbInfo.db.transaction(function(t) {
                tryExecuteSql(t, dbInfo, "SELECT * FROM " + dbInfo.storeName, [], function(t2, results) {
                  var rows = results.rows;
                  var length2 = rows.length;
                  for (var i = 0; i < length2; i++) {
                    var item = rows.item(i);
                    var result = item.value;
                    if (result) {
                      result = dbInfo.serializer.deserialize(result);
                    }
                    result = iterator(result, item.key, i + 1);
                    if (result !== void 0) {
                      resolve(result);
                      return;
                    }
                  }
                  resolve();
                }, function(t2, error) {
                  reject(error);
                });
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function _setItem(key2, value, callback, retriesLeft) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              if (value === void 0) {
                value = null;
              }
              var originalValue = value;
              var dbInfo = self2._dbInfo;
              dbInfo.serializer.serialize(value, function(value2, error) {
                if (error) {
                  reject(error);
                } else {
                  dbInfo.db.transaction(function(t) {
                    tryExecuteSql(t, dbInfo, "INSERT OR REPLACE INTO " + dbInfo.storeName + " (key, value) VALUES (?, ?)", [key2, value2], function() {
                      resolve(originalValue);
                    }, function(t2, error2) {
                      reject(error2);
                    });
                  }, function(sqlError) {
                    if (sqlError.code === sqlError.QUOTA_ERR) {
                      if (retriesLeft > 0) {
                        resolve(_setItem.apply(self2, [key2, originalValue, callback, retriesLeft - 1]));
                        return;
                      }
                      reject(sqlError);
                    }
                  });
                }
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function setItem$1(key2, value, callback) {
          return _setItem.apply(this, [key2, value, callback, 1]);
        }
        function removeItem$1(key2, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              dbInfo.db.transaction(function(t) {
                tryExecuteSql(t, dbInfo, "DELETE FROM " + dbInfo.storeName + " WHERE key = ?", [key2], function() {
                  resolve();
                }, function(t2, error) {
                  reject(error);
                });
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function clear$1(callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              dbInfo.db.transaction(function(t) {
                tryExecuteSql(t, dbInfo, "DELETE FROM " + dbInfo.storeName, [], function() {
                  resolve();
                }, function(t2, error) {
                  reject(error);
                });
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function length$1(callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              dbInfo.db.transaction(function(t) {
                tryExecuteSql(t, dbInfo, "SELECT COUNT(key) as c FROM " + dbInfo.storeName, [], function(t2, results) {
                  var result = results.rows.item(0).c;
                  resolve(result);
                }, function(t2, error) {
                  reject(error);
                });
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function key$1(n, callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              dbInfo.db.transaction(function(t) {
                tryExecuteSql(t, dbInfo, "SELECT key FROM " + dbInfo.storeName + " WHERE id = ? LIMIT 1", [n + 1], function(t2, results) {
                  var result = results.rows.length ? results.rows.item(0).key : null;
                  resolve(result);
                }, function(t2, error) {
                  reject(error);
                });
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function keys$1(callback) {
          var self2 = this;
          var promise = new Promise$1(function(resolve, reject) {
            self2.ready().then(function() {
              var dbInfo = self2._dbInfo;
              dbInfo.db.transaction(function(t) {
                tryExecuteSql(t, dbInfo, "SELECT key FROM " + dbInfo.storeName, [], function(t2, results) {
                  var keys2 = [];
                  for (var i = 0; i < results.rows.length; i++) {
                    keys2.push(results.rows.item(i).key);
                  }
                  resolve(keys2);
                }, function(t2, error) {
                  reject(error);
                });
              });
            })["catch"](reject);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function getAllStoreNames(db) {
          return new Promise$1(function(resolve, reject) {
            db.transaction(function(t) {
              t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function(t2, results) {
                var storeNames = [];
                for (var i = 0; i < results.rows.length; i++) {
                  storeNames.push(results.rows.item(i).name);
                }
                resolve({
                  db,
                  storeNames
                });
              }, function(t2, error) {
                reject(error);
              });
            }, function(sqlError) {
              reject(sqlError);
            });
          });
        }
        function dropInstance$1(options, callback) {
          callback = getCallback.apply(this, arguments);
          var currentConfig = this.config();
          options = typeof options !== "function" && options || {};
          if (!options.name) {
            options.name = options.name || currentConfig.name;
            options.storeName = options.storeName || currentConfig.storeName;
          }
          var self2 = this;
          var promise;
          if (!options.name) {
            promise = Promise$1.reject("Invalid arguments");
          } else {
            promise = new Promise$1(function(resolve) {
              var db;
              if (options.name === currentConfig.name) {
                db = self2._dbInfo.db;
              } else {
                db = openDatabase(options.name, "", "", 0);
              }
              if (!options.storeName) {
                resolve(getAllStoreNames(db));
              } else {
                resolve({
                  db,
                  storeNames: [options.storeName]
                });
              }
            }).then(function(operationInfo) {
              return new Promise$1(function(resolve, reject) {
                operationInfo.db.transaction(function(t) {
                  function dropTable(storeName) {
                    return new Promise$1(function(resolve2, reject2) {
                      t.executeSql("DROP TABLE IF EXISTS " + storeName, [], function() {
                        resolve2();
                      }, function(t2, error) {
                        reject2(error);
                      });
                    });
                  }
                  var operations = [];
                  for (var i = 0, len = operationInfo.storeNames.length; i < len; i++) {
                    operations.push(dropTable(operationInfo.storeNames[i]));
                  }
                  Promise$1.all(operations).then(function() {
                    resolve();
                  })["catch"](function(e) {
                    reject(e);
                  });
                }, function(sqlError) {
                  reject(sqlError);
                });
              });
            });
          }
          executeCallback(promise, callback);
          return promise;
        }
        var webSQLStorage = {
          _driver: "webSQLStorage",
          _initStorage: _initStorage$1,
          _support: isWebSQLValid(),
          iterate: iterate$1,
          getItem: getItem$1,
          setItem: setItem$1,
          removeItem: removeItem$1,
          clear: clear$1,
          length: length$1,
          key: key$1,
          keys: keys$1,
          dropInstance: dropInstance$1
        };
        function isLocalStorageValid() {
          try {
            return typeof localStorage !== "undefined" && "setItem" in localStorage && // in IE8 typeof localStorage.setItem === 'object'
            !!localStorage.setItem;
          } catch (e) {
            return false;
          }
        }
        function _getKeyPrefix(options, defaultConfig) {
          var keyPrefix = options.name + "/";
          if (options.storeName !== defaultConfig.storeName) {
            keyPrefix += options.storeName + "/";
          }
          return keyPrefix;
        }
        function checkIfLocalStorageThrows() {
          var localStorageTestKey = "_localforage_support_test";
          try {
            localStorage.setItem(localStorageTestKey, true);
            localStorage.removeItem(localStorageTestKey);
            return false;
          } catch (e) {
            return true;
          }
        }
        function _isLocalStorageUsable() {
          return !checkIfLocalStorageThrows() || localStorage.length > 0;
        }
        function _initStorage$2(options) {
          var self2 = this;
          var dbInfo = {};
          if (options) {
            for (var i in options) {
              dbInfo[i] = options[i];
            }
          }
          dbInfo.keyPrefix = _getKeyPrefix(options, self2._defaultConfig);
          if (!_isLocalStorageUsable()) {
            return Promise$1.reject();
          }
          self2._dbInfo = dbInfo;
          dbInfo.serializer = localforageSerializer;
          return Promise$1.resolve();
        }
        function clear$2(callback) {
          var self2 = this;
          var promise = self2.ready().then(function() {
            var keyPrefix = self2._dbInfo.keyPrefix;
            for (var i = localStorage.length - 1; i >= 0; i--) {
              var key2 = localStorage.key(i);
              if (key2.indexOf(keyPrefix) === 0) {
                localStorage.removeItem(key2);
              }
            }
          });
          executeCallback(promise, callback);
          return promise;
        }
        function getItem$2(key2, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = self2.ready().then(function() {
            var dbInfo = self2._dbInfo;
            var result = localStorage.getItem(dbInfo.keyPrefix + key2);
            if (result) {
              result = dbInfo.serializer.deserialize(result);
            }
            return result;
          });
          executeCallback(promise, callback);
          return promise;
        }
        function iterate$2(iterator, callback) {
          var self2 = this;
          var promise = self2.ready().then(function() {
            var dbInfo = self2._dbInfo;
            var keyPrefix = dbInfo.keyPrefix;
            var keyPrefixLength = keyPrefix.length;
            var length2 = localStorage.length;
            var iterationNumber = 1;
            for (var i = 0; i < length2; i++) {
              var key2 = localStorage.key(i);
              if (key2.indexOf(keyPrefix) !== 0) {
                continue;
              }
              var value = localStorage.getItem(key2);
              if (value) {
                value = dbInfo.serializer.deserialize(value);
              }
              value = iterator(value, key2.substring(keyPrefixLength), iterationNumber++);
              if (value !== void 0) {
                return value;
              }
            }
          });
          executeCallback(promise, callback);
          return promise;
        }
        function key$2(n, callback) {
          var self2 = this;
          var promise = self2.ready().then(function() {
            var dbInfo = self2._dbInfo;
            var result;
            try {
              result = localStorage.key(n);
            } catch (error) {
              result = null;
            }
            if (result) {
              result = result.substring(dbInfo.keyPrefix.length);
            }
            return result;
          });
          executeCallback(promise, callback);
          return promise;
        }
        function keys$2(callback) {
          var self2 = this;
          var promise = self2.ready().then(function() {
            var dbInfo = self2._dbInfo;
            var length2 = localStorage.length;
            var keys2 = [];
            for (var i = 0; i < length2; i++) {
              var itemKey = localStorage.key(i);
              if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {
                keys2.push(itemKey.substring(dbInfo.keyPrefix.length));
              }
            }
            return keys2;
          });
          executeCallback(promise, callback);
          return promise;
        }
        function length$2(callback) {
          var self2 = this;
          var promise = self2.keys().then(function(keys2) {
            return keys2.length;
          });
          executeCallback(promise, callback);
          return promise;
        }
        function removeItem$2(key2, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = self2.ready().then(function() {
            var dbInfo = self2._dbInfo;
            localStorage.removeItem(dbInfo.keyPrefix + key2);
          });
          executeCallback(promise, callback);
          return promise;
        }
        function setItem$2(key2, value, callback) {
          var self2 = this;
          key2 = normalizeKey(key2);
          var promise = self2.ready().then(function() {
            if (value === void 0) {
              value = null;
            }
            var originalValue = value;
            return new Promise$1(function(resolve, reject) {
              var dbInfo = self2._dbInfo;
              dbInfo.serializer.serialize(value, function(value2, error) {
                if (error) {
                  reject(error);
                } else {
                  try {
                    localStorage.setItem(dbInfo.keyPrefix + key2, value2);
                    resolve(originalValue);
                  } catch (e) {
                    if (e.name === "QuotaExceededError" || e.name === "NS_ERROR_DOM_QUOTA_REACHED") {
                      reject(e);
                    }
                    reject(e);
                  }
                }
              });
            });
          });
          executeCallback(promise, callback);
          return promise;
        }
        function dropInstance$2(options, callback) {
          callback = getCallback.apply(this, arguments);
          options = typeof options !== "function" && options || {};
          if (!options.name) {
            var currentConfig = this.config();
            options.name = options.name || currentConfig.name;
            options.storeName = options.storeName || currentConfig.storeName;
          }
          var self2 = this;
          var promise;
          if (!options.name) {
            promise = Promise$1.reject("Invalid arguments");
          } else {
            promise = new Promise$1(function(resolve) {
              if (!options.storeName) {
                resolve(options.name + "/");
              } else {
                resolve(_getKeyPrefix(options, self2._defaultConfig));
              }
            }).then(function(keyPrefix) {
              for (var i = localStorage.length - 1; i >= 0; i--) {
                var key2 = localStorage.key(i);
                if (key2.indexOf(keyPrefix) === 0) {
                  localStorage.removeItem(key2);
                }
              }
            });
          }
          executeCallback(promise, callback);
          return promise;
        }
        var localStorageWrapper = {
          _driver: "localStorageWrapper",
          _initStorage: _initStorage$2,
          _support: isLocalStorageValid(),
          iterate: iterate$2,
          getItem: getItem$2,
          setItem: setItem$2,
          removeItem: removeItem$2,
          clear: clear$2,
          length: length$2,
          key: key$2,
          keys: keys$2,
          dropInstance: dropInstance$2
        };
        var sameValue = function sameValue2(x, y) {
          return x === y || typeof x === "number" && typeof y === "number" && isNaN(x) && isNaN(y);
        };
        var includes = function includes2(array, searchElement) {
          var len = array.length;
          var i = 0;
          while (i < len) {
            if (sameValue(array[i], searchElement)) {
              return true;
            }
            i++;
          }
          return false;
        };
        var isArray = Array.isArray || function(arg) {
          return Object.prototype.toString.call(arg) === "[object Array]";
        };
        var DefinedDrivers = {};
        var DriverSupport = {};
        var DefaultDrivers = {
          INDEXEDDB: asyncStorage,
          WEBSQL: webSQLStorage,
          LOCALSTORAGE: localStorageWrapper
        };
        var DefaultDriverOrder = [DefaultDrivers.INDEXEDDB._driver, DefaultDrivers.WEBSQL._driver, DefaultDrivers.LOCALSTORAGE._driver];
        var OptionalDriverMethods = ["dropInstance"];
        var LibraryMethods = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(OptionalDriverMethods);
        var DefaultConfig = {
          description: "",
          driver: DefaultDriverOrder.slice(),
          name: "localforage",
          // Default DB size is _JUST UNDER_ 5MB, as it's the highest size
          // we can use without a prompt.
          size: 4980736,
          storeName: "keyvaluepairs",
          version: 1
        };
        function callWhenReady(localForageInstance, libraryMethod) {
          localForageInstance[libraryMethod] = function() {
            var _args = arguments;
            return localForageInstance.ready().then(function() {
              return localForageInstance[libraryMethod].apply(localForageInstance, _args);
            });
          };
        }
        function extend() {
          for (var i = 1; i < arguments.length; i++) {
            var arg = arguments[i];
            if (arg) {
              for (var _key in arg) {
                if (arg.hasOwnProperty(_key)) {
                  if (isArray(arg[_key])) {
                    arguments[0][_key] = arg[_key].slice();
                  } else {
                    arguments[0][_key] = arg[_key];
                  }
                }
              }
            }
          }
          return arguments[0];
        }
        var LocalForage = function() {
          function LocalForage2(options) {
            _classCallCheck(this, LocalForage2);
            for (var driverTypeKey in DefaultDrivers) {
              if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {
                var driver = DefaultDrivers[driverTypeKey];
                var driverName = driver._driver;
                this[driverTypeKey] = driverName;
                if (!DefinedDrivers[driverName]) {
                  this.defineDriver(driver);
                }
              }
            }
            this._defaultConfig = extend({}, DefaultConfig);
            this._config = extend({}, this._defaultConfig, options);
            this._driverSet = null;
            this._initDriver = null;
            this._ready = false;
            this._dbInfo = null;
            this._wrapLibraryMethodsWithReady();
            this.setDriver(this._config.driver)["catch"](function() {
            });
          }
          LocalForage2.prototype.config = function config(options) {
            if ((typeof options === "undefined" ? "undefined" : _typeof(options)) === "object") {
              if (this._ready) {
                return new Error("Can't call config() after localforage has been used.");
              }
              for (var i in options) {
                if (i === "storeName") {
                  options[i] = options[i].replace(/\W/g, "_");
                }
                if (i === "version" && typeof options[i] !== "number") {
                  return new Error("Database version must be a number.");
                }
                this._config[i] = options[i];
              }
              if ("driver" in options && options.driver) {
                return this.setDriver(this._config.driver);
              }
              return true;
            } else if (typeof options === "string") {
              return this._config[options];
            } else {
              return this._config;
            }
          };
          LocalForage2.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {
            var promise = new Promise$1(function(resolve, reject) {
              try {
                var driverName = driverObject._driver;
                var complianceError = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
                if (!driverObject._driver) {
                  reject(complianceError);
                  return;
                }
                var driverMethods = LibraryMethods.concat("_initStorage");
                for (var i = 0, len = driverMethods.length; i < len; i++) {
                  var driverMethodName = driverMethods[i];
                  var isRequired = !includes(OptionalDriverMethods, driverMethodName);
                  if ((isRequired || driverObject[driverMethodName]) && typeof driverObject[driverMethodName] !== "function") {
                    reject(complianceError);
                    return;
                  }
                }
                var configureMissingMethods = function configureMissingMethods2() {
                  var methodNotImplementedFactory = function methodNotImplementedFactory2(methodName) {
                    return function() {
                      var error = new Error("Method " + methodName + " is not implemented by the current driver");
                      var promise2 = Promise$1.reject(error);
                      executeCallback(promise2, arguments[arguments.length - 1]);
                      return promise2;
                    };
                  };
                  for (var _i = 0, _len = OptionalDriverMethods.length; _i < _len; _i++) {
                    var optionalDriverMethod = OptionalDriverMethods[_i];
                    if (!driverObject[optionalDriverMethod]) {
                      driverObject[optionalDriverMethod] = methodNotImplementedFactory(optionalDriverMethod);
                    }
                  }
                };
                configureMissingMethods();
                var setDriverSupport = function setDriverSupport2(support) {
                  if (DefinedDrivers[driverName]) {
                    console.info("Redefining LocalForage driver: " + driverName);
                  }
                  DefinedDrivers[driverName] = driverObject;
                  DriverSupport[driverName] = support;
                  resolve();
                };
                if ("_support" in driverObject) {
                  if (driverObject._support && typeof driverObject._support === "function") {
                    driverObject._support().then(setDriverSupport, reject);
                  } else {
                    setDriverSupport(!!driverObject._support);
                  }
                } else {
                  setDriverSupport(true);
                }
              } catch (e) {
                reject(e);
              }
            });
            executeTwoCallbacks(promise, callback, errorCallback);
            return promise;
          };
          LocalForage2.prototype.driver = function driver() {
            return this._driver || null;
          };
          LocalForage2.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {
            var getDriverPromise = DefinedDrivers[driverName] ? Promise$1.resolve(DefinedDrivers[driverName]) : Promise$1.reject(new Error("Driver not found."));
            executeTwoCallbacks(getDriverPromise, callback, errorCallback);
            return getDriverPromise;
          };
          LocalForage2.prototype.getSerializer = function getSerializer(callback) {
            var serializerPromise = Promise$1.resolve(localforageSerializer);
            executeTwoCallbacks(serializerPromise, callback);
            return serializerPromise;
          };
          LocalForage2.prototype.ready = function ready(callback) {
            var self2 = this;
            var promise = self2._driverSet.then(function() {
              if (self2._ready === null) {
                self2._ready = self2._initDriver();
              }
              return self2._ready;
            });
            executeTwoCallbacks(promise, callback, callback);
            return promise;
          };
          LocalForage2.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {
            var self2 = this;
            if (!isArray(drivers)) {
              drivers = [drivers];
            }
            var supportedDrivers = this._getSupportedDrivers(drivers);
            function setDriverToConfig() {
              self2._config.driver = self2.driver();
            }
            function extendSelfWithDriver(driver) {
              self2._extend(driver);
              setDriverToConfig();
              self2._ready = self2._initStorage(self2._config);
              return self2._ready;
            }
            function initDriver(supportedDrivers2) {
              return function() {
                var currentDriverIndex = 0;
                function driverPromiseLoop() {
                  while (currentDriverIndex < supportedDrivers2.length) {
                    var driverName = supportedDrivers2[currentDriverIndex];
                    currentDriverIndex++;
                    self2._dbInfo = null;
                    self2._ready = null;
                    return self2.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop);
                  }
                  setDriverToConfig();
                  var error = new Error("No available storage method found.");
                  self2._driverSet = Promise$1.reject(error);
                  return self2._driverSet;
                }
                return driverPromiseLoop();
              };
            }
            var oldDriverSetDone = this._driverSet !== null ? this._driverSet["catch"](function() {
              return Promise$1.resolve();
            }) : Promise$1.resolve();
            this._driverSet = oldDriverSetDone.then(function() {
              var driverName = supportedDrivers[0];
              self2._dbInfo = null;
              self2._ready = null;
              return self2.getDriver(driverName).then(function(driver) {
                self2._driver = driver._driver;
                setDriverToConfig();
                self2._wrapLibraryMethodsWithReady();
                self2._initDriver = initDriver(supportedDrivers);
              });
            })["catch"](function() {
              setDriverToConfig();
              var error = new Error("No available storage method found.");
              self2._driverSet = Promise$1.reject(error);
              return self2._driverSet;
            });
            executeTwoCallbacks(this._driverSet, callback, errorCallback);
            return this._driverSet;
          };
          LocalForage2.prototype.supports = function supports(driverName) {
            return !!DriverSupport[driverName];
          };
          LocalForage2.prototype._extend = function _extend(libraryMethodsAndProperties) {
            extend(this, libraryMethodsAndProperties);
          };
          LocalForage2.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {
            var supportedDrivers = [];
            for (var i = 0, len = drivers.length; i < len; i++) {
              var driverName = drivers[i];
              if (this.supports(driverName)) {
                supportedDrivers.push(driverName);
              }
            }
            return supportedDrivers;
          };
          LocalForage2.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {
            for (var i = 0, len = LibraryMethods.length; i < len; i++) {
              callWhenReady(this, LibraryMethods[i]);
            }
          };
          LocalForage2.prototype.createInstance = function createInstance(options) {
            return new LocalForage2(options);
          };
          return LocalForage2;
        }();
        var localforage_js = new LocalForage();
        module4.exports = localforage_js;
      }, { "3": 3 }] }, {}, [4])(4);
    });
  }
});

// node_modules/zego-express-engine-webrtc/ZegoExpressWebRTC.js
var require_ZegoExpressWebRTC = __commonJS({
  "node_modules/zego-express-engine-webrtc/ZegoExpressWebRTC.js"(exports2, module2) {
    !function(t, i) {
      if ("object" == typeof exports2 && "object" == typeof module2)
        module2.exports = i(require_umd(), require_minimal2(), require_ZegoExpressLogger(), require_localforage());
      else if ("function" == typeof define && define.amd)
        define(["long", "protobufjs/minimal", "zego-express-logger", "localforage"], i);
      else {
        var n = "object" == typeof exports2 ? i(require_umd(), require_minimal2(), require_ZegoExpressLogger(), require_localforage()) : i(t.long, t["protobufjs/minimal"], t["zego-express-logger"], t.localforage);
        for (var e in n)
          ("object" == typeof exports2 ? exports2 : t)[e] = n[e];
      }
    }("undefined" != typeof self ? self : exports2, function(t, i, n, e) {
      return function() {
        var r = { 166: function(t2, i2, n2) {
          "use strict";
          var e2, r2, s2, o2;
          n2.d(i2, { PP: function() {
            return o2;
          }, SC: function() {
            return s2;
          } }), function(t3) {
            t3[t3.NONE = 0] = "NONE", t3[t3.MEN_TO_CHILD = 1] = "MEN_TO_CHILD", t3[t3.MEN_TO_WOMEN = 2] = "MEN_TO_WOMEN", t3[t3.WOMEN_TO_CHILD = 3] = "WOMEN_TO_CHILD", t3[t3.WOMEN_TO_MEN = 4] = "WOMEN_TO_MEN", t3[t3.FOREIGNER = 5] = "FOREIGNER", t3[t3.OPTIMUS_PRIME = 6] = "OPTIMUS_PRIME", t3[t3.ANDROID = 7] = "ANDROID", t3[t3.ETHEREAL = 8] = "ETHEREAL", t3[t3.MALE_MAGNETIC = 9] = "MALE_MAGNETIC", t3[t3.FEMALE_FRESH = 10] = "FEMALE_FRESH", t3[t3.MAJOR_C = 11] = "MAJOR_C", t3[t3.MINOR_A = 12] = "MINOR_A", t3[t3.HARMONIC_MINOR = 13] = "HARMONIC_MINOR", t3[t3.FEMALE_ENERGETIC = 14] = "FEMALE_ENERGETIC", t3[t3.RICHNESS = 15] = "RICHNESS", t3[t3.MUFFLED = 16] = "MUFFLED", t3[t3.ROUNDNESS = 17] = "ROUNDNESS", t3[t3.FALSETTO = 18] = "FALSETTO", t3[t3.FULLNESS = 19] = "FULLNESS", t3[t3.CLEAR = 20] = "CLEAR", t3[t3.HIGHLY_RESONANT = 21] = "HIGHLY_RESONANT", t3[t3.LOUD_CLEAR = 22] = "LOUD_CLEAR";
          }(e2 || (e2 = {})), function(t3) {
            t3[t3.None = 0] = "None", t3[t3.SoftRoom = 1] = "SoftRoom", t3[t3.LargeRoom = 2] = "LargeRoom", t3[t3.ConcertHall = 3] = "ConcertHall", t3[t3.Valley = 4] = "Valley", t3[t3.RecordingStudio = 5] = "RecordingStudio", t3[t3.Basement = 6] = "Basement", t3[t3.KTV = 7] = "KTV", t3[t3.Popular = 8] = "Popular", t3[t3.Rock = 9] = "Rock", t3[t3.VocalConcert = 10] = "VocalConcert", t3[t3.GramoPhone = 11] = "GramoPhone", t3[t3.EnhancedKTV = 12] = "EnhancedKTV";
          }(r2 || (r2 = {})), function(t3) {
            t3[t3.None = 0] = "None", t3[t3.Local = 1] = "Local", t3[t3.Publish = 2] = "Publish", t3[t3.All = 3] = "All";
          }(s2 || (s2 = {})), function(t3) {
            t3[t3.AI = 0] = "AI", t3[t3.AIBalanced = 1] = "AIBalanced", t3[t3.AIAggressive = 2] = "AIAggressive";
          }(o2 || (o2 = {}));
        }, 327: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { L: function() {
            return r2;
          } });
          var e2 = n2(4872);
          function r2(t3, i3) {
            if (t3 && !(0, e2.dr)(t3) && t3.zegoStream) {
              if (i3.info("cu.gs type:zego"), (0, e2.dr)(t3.stream))
                return t3.stream;
              throw new Error("The ZegoLocalStream type requires first calling the capture api to capture the stream");
            }
            return t3;
          }
        }, 477: function() {
        }, 743: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { RangeAudio: function() {
            return tt;
          } });
          var e2 = n2(8899), r2 = n2(8866), s2 = function() {
            function t3() {
            }
            return t3.generateEls = function(t4) {
              if (void 0 === t4 && (t4 = 30), this.elements.length >= t4)
                this.elements.forEach(function(t5) {
                  t5.dom.play().catch(function(t6) {
                  });
                });
              else {
                var i3 = Array(t4 - this.elements.length).fill(0).map(function(t5, i4) {
                  var n3 = r2.VJ.createElement("audio");
                  return n3.muted = true, n3.setAttribute("autoplay", "autoplay"), n3.setAttribute("playsInline", "playsInline"), n3.id = "audio" + i4, { dom: n3, id: i4, used: false };
                });
                this.elements = this.elements.concat(i3);
              }
            }, t3.useAudioEl = function() {
              0 === this.elements.length && this.generateEls();
              var t4 = this.elements.find(function(t5) {
                return !t5.used;
              });
              return t4 && (t4.used = true), t4;
            }, t3.stopUsingAudioEl = function(t4) {
              var i3 = this.elements[t4];
              i3 && (i3.dom.onpause = null, i3.dom.onerror = null, i3.dom.muted = true, i3.used = false);
            }, t3.elements = [], t3;
          }(), o2 = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, u2 = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, a = "zc.ra.3", c = function() {
            function t3(t4, i3) {
              this.un = t4, this.an = i3, this.rtcConn = null, this.loopbackConn = null, this.destStream = new MediaStream(), this.onError = null;
            }
            return t3.prototype.bindStream = function(t4, i3) {
              var n3, e3;
              return o2(this, void 0, void 0, function() {
                var r3, s3, o3, c2, h2, f2, l2 = this;
                return u2(this, function(u3) {
                  switch (u3.label) {
                    case 0:
                      return i3 && (this.un = i3), r3 = ["completed", "connected"], this.rtcConn && this.loopbackConn && r3.includes(this.rtcConn.connectionState) ? (s3 = null === (n3 = this.rtcConn) || void 0 === n3 ? void 0 : n3.getSenders().find(function(t5) {
                        var i4;
                        return "audio" === (null === (i4 = t5.track) || void 0 === i4 ? void 0 : i4.kind);
                      }), t4.getTracks().forEach(function(t5) {
                        "audio" === t5.kind && (null == s3 || s3.replaceTrack(t5));
                      }), [3, 10]) : [3, 1];
                    case 1:
                      this.rtcConn = new RTCPeerConnection(), this.loopbackConn = new RTCPeerConnection(), o3 = { offerVideo: true, offerAudio: true, offerToReceiveAudio: false, offerToReceiveVideo: false }, this.rtcConn.onicecandidateerror = function(t5) {
                        l2.an.warn(a + " ".concat(l2.un, " loopback in ice error: ").concat(JSON.stringify(t5)));
                      }, this.loopbackConn.onicecandidateerror = function(t5) {
                        l2.an.warn(a + " ".concat(l2.un, " loopback out ice error: ").concat(JSON.stringify(t5)));
                      }, this.rtcConn.onicecandidate = function(t5) {
                        var i4, n4 = t5.candidate;
                        n4 && (l2.an.info(a + " ".concat(l2.un, " loopback add out candidate: ").concat(n4)), null === (i4 = l2.loopbackConn) || void 0 === i4 || i4.addIceCandidate(new RTCIceCandidate(n4)));
                      }, this.loopbackConn.onicecandidate = function(t5) {
                        var i4, n4 = t5.candidate;
                        n4 && (l2.an.info(a + " ".concat(l2.un, " loopback add in candidate: ").concat(n4)), null === (i4 = l2.rtcConn) || void 0 === i4 || i4.addIceCandidate(new RTCIceCandidate(n4)));
                      }, window.setTimeout(function() {
                        l2.rtcConn && l2.loopbackConn && (r3.includes(l2.rtcConn.iceConnectionState) && r3.includes(l2.loopbackConn.iceConnectionState) ? l2.an.info(a + " ".concat(l2.un, " loopback connect ok.")) : (l2.an.warn(a + " ".concat(l2.un, " loopback connect failed. in state: ").concat(l2.rtcConn.iceConnectionState, ", out state: ").concat(l2.loopbackConn.iceConnectionState)), l2.close(), l2.onError && l2.onError("time out")));
                      }, 2e3), this.loopbackConn.ontrack = function(t5) {
                        var i4 = t5.track;
                        l2.an.info(a + " ".concat(l2.un, " loopback receive track")), l2.replaceTrack(i4);
                      }, t4.getTracks().find(function(i4) {
                        var n4;
                        if ("audio" === i4.kind)
                          return null === (n4 = l2.rtcConn) || void 0 === n4 || n4.addTrack(i4, t4), true;
                      }), u3.label = 2;
                    case 2:
                      return u3.trys.push([2, 9, , 10]), [4, this.rtcConn.createOffer(o3)];
                    case 3:
                      return c2 = u3.sent(), [4, this.rtcConn.setLocalDescription(c2)];
                    case 4:
                      return u3.sent(), [4, this.loopbackConn.setRemoteDescription(c2)];
                    case 5:
                      return u3.sent(), [4, this.loopbackConn.createAnswer()];
                    case 6:
                      return (h2 = u3.sent()).sdp = null === (e3 = h2.sdp) || void 0 === e3 ? void 0 : e3.replace(/useinbandfec=/, "stereo=1;useinbandfec="), [4, this.loopbackConn.setLocalDescription(h2)];
                    case 7:
                      return u3.sent(), [4, this.rtcConn.setRemoteDescription(h2)];
                    case 8:
                      return u3.sent(), this.an.info(a + " ".concat(this.un, " loopback set sdp completed.")), [3, 10];
                    case 9:
                      return f2 = u3.sent(), this.an.error(a + " ".concat(this.un, " loopback connect failed.").concat(f2)), this.close(), this.onError && this.onError("connect failed"), this.onError = null, [3, 10];
                    case 10:
                      return [2, this.destStream];
                  }
                });
              });
            }, t3.prototype.replaceTrack = function(t4) {
              var i3 = this;
              "audio" === t4.kind && (this.destStream.getTracks().forEach(function(t5) {
                i3.destStream.removeTrack(t5);
              }), this.destStream.addTrack(t4));
            }, t3.prototype.close = function() {
              var t4 = this, i3 = this.rtcConn, n3 = this.loopbackConn;
              this.destStream.getTracks().forEach(function(i4) {
                t4.destStream.removeTrack(i4);
              }), null == i3 || i3.close(), null == n3 || n3.close(), this.rtcConn = null, this.loopbackConn = null;
            }, t3;
          }();
          var h = n2(4872), f = n2(6493), l = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, d = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, v = "zc.ra.5";
          var m, p = function() {
            function t3(t4, i3) {
              this.an = t4, this.userID = "base" + (/* @__PURE__ */ new Date()).getTime(), this.isHide = false, this.distance = null, this.maxDistance = 1e3, this.position = null, this.speaker = "", this.audioEl = null, this.sourceNode = null, this.isPlaying = false, this.config = { needLoopback: true, useGain: true, playOnAudioContext: false, useWebAudio: true }, this.volume = 1, this.gainNode = null, this.isSpatial = false, this.panner = null, this.audioCtx = i3.audioCtx, this.isSpatial = i3.isSpatial, this.setMaxDistance((0, h.Cs)(i3.maxDistance) ? i3.maxDistance : 1e5), this.destNode = this.audioCtx.createMediaStreamDestination(), this.setVolume(i3.volume), this.setSpeaker(i3.speaker).catch(function(t5) {
              }), this.inBackground(i3.isHide);
            }
            return t3.prototype.setPosition = function(t4) {
              this.an.info(v + " ".concat(this.userID, " set position: ") + t4), this.position = t4, this.panner && (void 0 !== this.panner.positionX ? (this.panner.positionX.value = t4[1], this.panner.positionY.value = t4[2], this.panner.positionZ.value = -t4[0]) : this.panner.setPosition(t4[1], t4[2], -t4[0]));
            }, t3.prototype.getDistanceFromListener = function(t4) {
              return this.distance = function(t5, i3) {
                if (!i3 || !t5)
                  return null;
                var n3 = [t5[0] - i3[0], t5[1] - i3[1], t5[2] - i3[2]];
                return Math.sqrt(Math.pow(n3[0], 2) + Math.pow(n3[1], 2) + Math.pow(n3[2], 2));
              }(this.position, t4.position), this.distance;
            }, t3.prototype.setMaxDistance = function(t4) {
              this.maxDistance = t4, this.panner && (t4 < 10 && (t4 = 10), this.panner.maxDistance = 2.6 * t4);
            }, t3.prototype.setVolume = function(t4) {
              isNaN(t4) || (this.volume = t4, this.gainNode && (this.gainNode.gain.value = this.volume));
            }, t3.prototype.setSpeaker = function(t4) {
              var i3;
              return l(this, void 0, void 0, function() {
                var n3, e3, r3;
                return d(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      if (!(0, h.QP)(t4))
                        return [2];
                      if (this.speaker = t4, !(n3 = null === (i3 = this.audioEl) || void 0 === i3 ? void 0 : i3.dom))
                        return [3, 10];
                      if (!(e3 = n3.setSinkId))
                        return [3, 8];
                      s3.label = 1;
                    case 1:
                      return s3.trys.push([1, 6, , 7]), this.config.playOnAudioContext ? [3, 3] : [4, e3.call(n3, t4 || "")];
                    case 2:
                      return s3.sent(), [3, 5];
                    case 3:
                      return [4, e3.call(n3, "")];
                    case 4:
                      s3.sent(), s3.label = 5;
                    case 5:
                      return this.an.info(v + " ".concat(this.userID, " set speaker success. id: ").concat(t4, ".")), [3, 7];
                    case 6:
                      throw r3 = s3.sent(), this.an.error(v + " ".concat(this.userID, " set speaker failed. id: ").concat(t4, "  error: ").concat(r3, ".")), r3;
                    case 7:
                      return [3, 9];
                    case 8:
                      throw "setting speaker not support.";
                    case 9:
                      return [3, 11];
                    case 10:
                      this.an.info(v + " ".concat(this.userID, " no element for set speaker.")), s3.label = 11;
                    case 11:
                      return [2];
                  }
                });
              });
            }, t3.prototype.initPanner = function() {
              if (!this.panner) {
                var t4 = function(t5, i4, n3) {
                  var e3 = n3 || [0, 0, 0], r3 = t5.createPanner(), s3 = t5.createGain();
                  return r3.panningModel = "HRTF", r3.distanceModel = "linear", r3.refDistance = 1, r3.maxDistance = 2.6 * i4 || 1, r3.rolloffFactor = 1, r3.coneOuterGain = 0.4, void 0 !== r3.positionX ? (r3.positionX.value = e3[1], r3.positionY.value = e3[2], r3.positionZ.value = -e3[0]) : r3.setPosition(e3[1], e3[2], -e3[0]), { panner: r3, gainNode: s3 };
                }(this.audioCtx, this.maxDistance, this.position), i3 = t4.gainNode;
                this.panner = t4.panner, this.gainNode = i3, i3.gain.value = this.volume;
              }
            }, t3.prototype.changeRenderConfig = function(t4, i3, n3, e3) {
              var r3, s3, o3, u3, a2;
              return void 0 === i3 && (i3 = false), void 0 === n3 && (n3 = false), void 0 === e3 && (e3 = true), l(this, void 0, void 0, function() {
                var h2, l2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2 = this;
                return d(this, function(d2) {
                  switch (d2.label) {
                    case 0:
                      return i3 || this.isSpatial !== t4 ? (this.isSpatial = t4, h2 = (0, f.H8)() && (0, f.Fr)(), [4, Y()]) : [2];
                    case 1:
                      return l2 = d2.sent(), m2 = "Windows" === l2.platform && l2.majorPlatformVersion >= 13, p2 = this.isHide && (m2 || h2), g2 = "running" !== this.audioCtx.state, e3 && (p2 || g2) && (this.an.warn("".concat(v, " ").concat(this.userID, " stop web audio. system: ").concat(l2.platform, " ").concat(l2.majorPlatformVersion)), e3 = false), this.config.useWebAudio = e3, b2 = (0, f.$t)(), _2 = b2.includes("safari") && !b2.includes("chrome"), y2 = b2.includes("micromessenger") && new RegExp(/(iphone|ipad|ipod|ios)/i).test(b2), e3 || this.stream || (n3 = true), this.config.playOnAudioContext = n3, this.initPanner(), this.isPlaying && this.sourceNode ? (this.lastNode && this.lastNode.disconnect(), w2 = this.sourceNode, this.sourceNode.disconnect(), null === (r3 = this.panner) || void 0 === r3 || r3.disconnect(), null === (s3 = this.gainNode) || void 0 === s3 || s3.disconnect(), this.gainNode ? (e3 && (this.config.useGain && (w2 = this.sourceNode.connect(this.gainNode)), this.panner && t4 && (w2 = w2.connect(this.panner))), w2.connect(n3 ? this.audioCtx.destination : this.destNode), this.lastNode = w2, this.position && this.setPosition(this.position), this.an.info(v + " '".concat(this.userID, "' play ").concat(t4 ? "3d" : "normal", " stream on ").concat(n3 ? "audio ctx" : "element")), (S2 = null === (o3 = this.audioEl) || void 0 === o3 ? void 0 : o3.dom) ? (S2.onpause = function() {
                        O2.an.warn(v + " ".concat(O2.streamID, " audio paused"));
                      }, S2.onerror = function(t5) {
                        O2.an.warn(v + " ".concat(O2.streamID, " audio error, ").concat(t5));
                      }, n3 ? (this.stream && S2.srcObject !== this.stream && (S2.srcObject = this.stream, S2.muted = true, S2.oncanplay = function() {
                        S2.play().then(function() {
                          O2.an.info(v + " ".concat(O2.userID, " ctx autoplay success.")), O2.checkPlayStatus();
                        }).catch(function(t5) {
                          O2.an.warn(v + " ".concat(O2.userID, " ctx autoplay failed."));
                        });
                      }), [3, 6]) : [3, 2]) : [3, 6]) : [3, 6]) : [3, 6];
                    case 2:
                      return E2 = this.destNode.stream, (k2 = this.config.needLoopback && !y2 && !_2) && this.loopbackConn && (this.loopbackConn.close(), this.loopbackConn.onError = null), e3 || !this.stream ? [3, 3] : (this.an.info("".concat(v, " ").concat(this.userID, " stop audio api")), this.sourceNode.disconnect(), null === (u3 = this.panner) || void 0 === u3 || u3.disconnect(), null === (a2 = this.gainNode) || void 0 === a2 || a2.disconnect(), E2 = this.stream, [3, 5]);
                    case 3:
                      return k2 && E2 ? (this.loopbackConn = this.loopbackConn || new c(this.streamID || "", this.an), this.loopbackConn.onError = function(t5) {
                        O2.an.warn(v + " ".concat(O2.userID, " loopback failed! ").concat(t5)), O2.changeRenderConfig(O2.isSpatial, true, true);
                      }, [4, this.loopbackConn.bindStream(E2, this.streamID || void 0)]) : [3, 5];
                    case 4:
                      return E2 = d2.sent(), [3, 5];
                    case 5:
                      S2.muted = true, S2.srcObject = E2, this.setSpeaker(this.speaker).catch(function(t5) {
                      }), S2.oncanplay = function() {
                        if (S2) {
                          S2.muted = false;
                          var t5 = function(t6) {
                            O2.an.error(v + " ".concat(O2.userID, " autoplay failed. error: ").concat(t6)), O2.changeRenderConfig(O2.isSpatial, true, true);
                          };
                          S2.play().then(function() {
                            (null == S2 ? void 0 : S2.paused) ? t5("audio paused") : (O2.an.info(v + " ".concat(O2.userID, " element autoplay success.")), O2.checkPlayStatus());
                          }).catch(function(i4) {
                            t5(i4);
                          });
                        }
                      }, d2.label = 6;
                    case 6:
                      return [2];
                  }
                });
              });
            }, t3.prototype.checkPlayStatus = function() {
              var t4 = this;
              setTimeout(function() {
                var i3;
                if (t4.isPlaying) {
                  var n3 = null === (i3 = t4.audioEl) || void 0 === i3 ? void 0 : i3.dom, e3 = t4.audioCtx.state;
                  !n3 || n3.paused || n3.muted && !t4.config.playOnAudioContext || "running" !== e3 ? (t4.an.warn("".concat(v, " ").concat(t4.userID, " play detection is abnormal. audio ctx:").concat(e3, ", paused:").concat(null == n3 ? void 0 : n3.paused, ", muted:").concat(null == n3 ? void 0 : n3.muted)), "running" !== e3 && (t4.audioCtx.resume(), setTimeout(function() {
                    t4.an.warn("".concat(v, " ").concat(t4.userID, " play resume. audio ctx:").concat(e3, ", paused:").concat(null == n3 ? void 0 : n3.paused, ", muted:").concat(null == n3 ? void 0 : n3.muted));
                  }, 1e3))) : t4.an.info("".concat(v, " ").concat(t4.userID, " play detection is fine"));
                }
              }, 2e3);
            }, t3.prototype.inBackground = function(t4, i3) {
              void 0 === t4 && (t4 = false), void 0 === i3 && (i3 = false), this.isHide !== t4 && (this.isHide = t4, t4 || this.config.useWebAudio || this.changeRenderConfig(this.isSpatial, true));
            }, t3;
          }(), g = (m = function(t3, i3) {
            return m = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
              t4.__proto__ = i4;
            } || function(t4, i4) {
              for (var n3 in i4)
                Object.prototype.hasOwnProperty.call(i4, n3) && (t4[n3] = i4[n3]);
            }, m(t3, i3);
          }, function(t3, i3) {
            if ("function" != typeof i3 && null !== i3)
              throw new TypeError("Class extends value " + String(i3) + " is not a constructor or null");
            function n3() {
              this.constructor = t3;
            }
            m(t3, i3), t3.prototype = null === i3 ? Object.create(i3) : (n3.prototype = i3.prototype, new n3());
          }), b = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, _ = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, y = "zc.ra.1", w = function(t3) {
            function i3(i4, n3, r3) {
              var s3 = t3.call(this, i4, r3) || this;
              return s3.an = i4, s3.audioTrack = null, s3.zegoRTC = r3.zegoRTC, s3.userID = n3.userID, s3.teamID = n3.teamID, s3.raMode = void 0 !== n3.raMode ? n3.raMode : e2.kf.World, n3.position && (s3.position = n3.position), s3;
            }
            return g(i3, t3), Object.defineProperty(i3.prototype, "sendMode", { get: function() {
              return void 0 !== this._sendMode ? this._sendMode : this.raMode === e2.kf.World ? e2.UF.All : e2.UF.Team;
            }, set: function(t4) {
              this._sendMode = t4;
            }, enumerable: false, configurable: true }), i3.prototype.checkTrackChanged = function() {
              var t4;
              if (this.stream) {
                var i4 = this.stream.getAudioTracks()[0];
                i4 && i4 !== this.audioTrack && (this.an.info(y + " retry play success, render stream."), null === (t4 = this.sourceNode) || void 0 === t4 || t4.disconnect(), this.sourceNode = this.audioCtx.createMediaStreamSource(this.stream), this.changeRenderConfig(this.isSpatial, true), this.audioTrack = i4);
              }
            }, i3.prototype.startPlayingAudio = function(t4) {
              var i4, n3;
              return b(this, void 0, void 0, function() {
                var e3, o3, u3;
                return _(this, function(a2) {
                  switch (a2.label) {
                    case 0:
                      if (!this.streamID)
                        return [2];
                      a2.label = 1;
                    case 1:
                      return a2.trys.push([1, 3, , 4]), t4 && this.an.info(y + " ".concat(this.streamID, " ") + t4), this.isPlaying = true, e3 = this, [4, this.zegoRTC.startPlayingStream(this.streamID)];
                    case 2:
                      return e3.stream = a2.sent(), this.audioTrack = this.stream.getAudioTracks()[0], [3, 4];
                    case 3:
                      if (o3 = a2.sent(), this.isPlaying = false, 1103049 === o3.code)
                        return [2];
                      throw o3;
                    case 4:
                      return this.audioEl = this.audioEl || s2.useAudioEl() || null, this.an.info(y + " ".concat(this.streamID, " start using audio el ").concat(null === (i4 = this.audioEl) || void 0 === i4 ? void 0 : i4.id)), (u3 = null === (n3 = this.audioEl) || void 0 === n3 ? void 0 : n3.dom) || (this.an.error(y + " not enough audio elements"), u3 = r2.VJ.createElement("audio"), this.audioEl = { id: -1, dom: u3, used: true }, u3.setAttribute("autoplay", "autoplay")), u3.muted = true, this.stream && (this.sourceNode = this.audioCtx.createMediaStreamSource(this.stream)), this.sourceNode ? [4, this.changeRenderConfig(this.isSpatial, true)] : [3, 6];
                    case 5:
                      a2.sent(), a2.label = 6;
                    case 6:
                      return "suspended" === this.audioCtx.state && this.audioCtx.resume(), [2];
                  }
                });
              });
            }, i3.prototype.stopPlayingAudio = function(t4) {
              this.isPlaying && this.streamID ? (this.an.info(y + " ".concat(this.streamID, " ") + t4), this.zegoRTC.stopPlayingStream(this.streamID), this.isPlaying = false) : this.streamID && this.an.info(y + " ".concat(this.streamID, " not playing, ") + t4), this.stream = void 0, this.sourceNode && (this.sourceNode.disconnect(), this.sourceNode = null);
              var i4 = this.audioEl, n3 = null == i4 ? void 0 : i4.dom;
              n3 && (n3.srcObject = null, n3.parentNode && n3.parentNode.removeChild(n3));
              var e3 = (null == i4 ? void 0 : i4.id) || -1;
              i4 && e3 >= 0 && (s2.stopUsingAudioEl(e3), this.an.info(y + " ".concat(this.streamID, " stop using audio el ").concat(e3))), this.audioEl = null, this.loopbackConn && (this.loopbackConn.close(), this.loopbackConn.onError = null);
            }, i3.prototype.isSpeakInTeam = function(t4) {
              var i4 = ![this.teamID, t4].includes(void 0) && "" !== this.teamID && this.teamID === t4, n3 = [e2.UF.Team, e2.UF.All].includes(this.sendMode);
              return i4 && n3;
            }, i3;
          }(p), S = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), E = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, k = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, O = "zc.ra.4", I = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, e3) || this;
              return r3.an = i4, r3.media = n3.media, r3.position = n3.position || null, r3.createSource(), r3.userID = "custom" + (/* @__PURE__ */ new Date()).getTime(), r3.config = { needLoopback: false, useGain: false, playOnAudioContext: false, useWebAudio: true }, r3;
            }
            return S(i3, t3), i3.prototype.createSource = function() {
              var t4 = this;
              if ((0, f.Fr)())
                return this.an.info("".concat((0, f.Fr)(), " ").concat(this.userID, " not create src.")), void (this.changeRenderConfig = function() {
                  return E(t4, void 0, void 0, function() {
                    return k(this, function(t5) {
                      return [2];
                    });
                  });
                });
              this.media && (this.an.info(O + " create el source."), this.sourceNode || (this.sourceNode = this.audioCtx.createMediaElementSource(this.media)), null !== this.distance && this.distance < this.maxDistance && this.startPlayingAudio("in range"));
            }, i3.prototype.startPlayingAudio = function(t4) {
              var i4, n3;
              return E(this, void 0, void 0, function() {
                var e3;
                return k(this, function(o3) {
                  switch (o3.label) {
                    case 0:
                      return this.isPlaying ? (this.an.info(O + " ".concat(this.userID, " is already playing")), [2]) : (t4 && this.an.info(O + " vocal ".concat(this.userID, " play for ").concat(t4)), this.isPlaying = true, (0, f.Fr)() ? (this.media.muted = false, [2]) : (this.audioEl = this.audioEl || s2.useAudioEl() || null, this.an.info(O + " ".concat(this.userID, " start using audio el ").concat(null === (i4 = this.audioEl) || void 0 === i4 ? void 0 : i4.id)), (e3 = null === (n3 = this.audioEl) || void 0 === n3 ? void 0 : n3.dom) || (this.an.error(O + " ".concat(this.userID, " not enough audio elements")), e3 = r2.VJ.createElement("audio"), this.audioEl = { id: -1, dom: e3, used: true }, e3.setAttribute("autoplay", "autoplay")), e3.muted = true, e3.setAttribute("autoplay", "autoplay"), e3.setAttribute("id", "zg-audio-source-" + this.userID), this.sourceNode ? [4, this.changeRenderConfig(this.isSpatial, true)] : [3, 2]));
                    case 1:
                      o3.sent(), o3.label = 2;
                    case 2:
                      return "suspended" === this.audioCtx.state && this.audioCtx.resume(), [2];
                  }
                });
              });
            }, i3.prototype.stopPlayingAudio = function(t4) {
              if (void 0 === t4 && (t4 = ""), this.isPlaying && (this.an.info(O + " vocal ".concat(this.userID, " stop for ") + t4), this.isPlaying = false), (0, f.Fr)())
                this.media.muted = true;
              else {
                this.sourceNode && this.sourceNode.disconnect();
                var i4 = this.audioEl, n3 = null == i4 ? void 0 : i4.dom;
                n3 && (n3.srcObject = null, n3.parentNode && n3.parentNode.removeChild(n3));
                var e3 = (null == i4 ? void 0 : i4.id) || -1;
                i4 && e3 >= 0 && (s2.stopUsingAudioEl(e3), this.an.info(O + " ".concat(this.userID, " stop using audio el ").concat(e3))), this.audioEl = null;
              }
            }, i3.prototype.checkIfCanPlay = function(t4) {
              var i4 = this.distance = this.getDistanceFromListener(t4);
              null === i4 || i4 > this.maxDistance || 0 === this.maxDistance ? this.stopPlayingAudio("out of range. ".concat(i4, " > ").concat(this.maxDistance)) : this.startPlayingAudio("in range");
            }, i3;
          }(p), R = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), T = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, C = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, A = "zc.ra.4", z = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, e3) || this;
              return r3.an = i4, r3.streamView = n3.streamView, r3.position = n3.position || null, r3.createSource(), r3.userID = "stream" + (/* @__PURE__ */ new Date()).getTime(), r3.config = { needLoopback: false, useGain: false, playOnAudioContext: false, useWebAudio: true }, r3.streamView.on("_trackChange", function(t4, i5) {
                "audio" === t4 && (i5 ? r3.createSource(true) : r3.an.error("".concat(A, " ").concat(r3.userID, " audio track lost")));
              }), r3;
            }
            return R(i3, t3), i3.prototype.createSource = function(t4) {
              var i4 = this;
              if (void 0 === t4 && (t4 = false), (0, f.Fr)())
                return this.an.info("".concat(A, " ").concat(this.userID, " not create src.")), this.changeRenderConfig = function() {
                  return T(i4, void 0, void 0, function() {
                    return C(this, function(t5) {
                      return [2];
                    });
                  });
                }, false;
              if (!this.streamView)
                return false;
              if (this.an.info(A + " create view source. trackChanged: " + t4), !this.sourceNode || t4) {
                var n3 = this.streamView.v.getAudioNodeAndStopRender();
                if (!n3)
                  return this.an.error(A + " create view source failed."), false;
                this.sourceNode && this.sourceNode.disconnect(), this.sourceNode = n3, this.changeRenderConfig(this.isSpatial, true);
              }
              return null !== this.distance && this.distance < this.maxDistance && this.startPlayingAudio("in range"), true;
            }, i3.prototype.startPlayingAudio = function(t4) {
              var i4, n3;
              return T(this, void 0, void 0, function() {
                var e3;
                return C(this, function(o3) {
                  switch (o3.label) {
                    case 0:
                      return this.isPlaying ? (this.an.info(A + " ".concat(this.userID, " is already playing")), [2]) : (t4 && this.an.info(A + " vocal ".concat(this.userID, " play for ").concat(t4)), this.isPlaying = true, (0, f.Fr)() ? (this.streamView.setAudioMuted(false), [2]) : (this.audioEl = this.audioEl || s2.useAudioEl() || null, this.an.info(A + " ".concat(this.userID, " start using audio el ").concat(null === (i4 = this.audioEl) || void 0 === i4 ? void 0 : i4.id)), (e3 = null === (n3 = this.audioEl) || void 0 === n3 ? void 0 : n3.dom) || (this.an.error(A + " ".concat(this.userID, " not enough audio elements")), e3 = r2.VJ.createElement("audio"), this.audioEl = { id: -1, dom: e3, used: true }, e3.setAttribute("autoplay", "autoplay")), e3.muted = true, e3.setAttribute("autoplay", "autoplay"), e3.setAttribute("id", "zg-audio-source-" + this.userID), this.sourceNode ? [4, this.changeRenderConfig(this.isSpatial, true)] : [3, 2]));
                    case 1:
                      o3.sent(), o3.label = 2;
                    case 2:
                      return "suspended" === this.audioCtx.state && this.audioCtx.resume(), [2];
                  }
                });
              });
            }, i3.prototype.stopPlayingAudio = function(t4) {
              if (void 0 === t4 && (t4 = ""), this.isPlaying && (this.an.info(A + " vocal ".concat(this.userID, " stop for ") + t4), this.isPlaying = false), (0, f.Fr)())
                this.streamView.setAudioMuted(true);
              else {
                this.sourceNode && this.sourceNode.disconnect();
                var i4 = this.audioEl, n3 = null == i4 ? void 0 : i4.dom;
                n3 && (n3.srcObject = null, n3.parentNode && n3.parentNode.removeChild(n3));
                var e3 = (null == i4 ? void 0 : i4.id) || -1;
                i4 && e3 >= 0 && (s2.stopUsingAudioEl(e3), this.an.info(A + " ".concat(this.userID, " stop using audio el ").concat(e3))), this.audioEl = null;
              }
            }, i3.prototype.checkIfCanPlay = function(t4) {
              var i4 = this.distance = this.getDistanceFromListener(t4);
              null === i4 || i4 > this.maxDistance || 0 === this.maxDistance ? this.stopPlayingAudio("out of range. ".concat(i4, " > ").concat(this.maxDistance)) : this.startPlayingAudio("in range");
            }, i3;
          }(p), D = n2(166), N = function() {
            function t3() {
              this.cn = {};
            }
            return t3.getInstance = function() {
              return t3.instance || (t3.instance = new t3()), t3.instance;
            }, t3.prototype.addEventHandler = function(t4, i3) {
              if (this.cn[t4] || (this.cn[t4] = []), !(0, h.JO)(i3))
                throw new Error("Params callBack is not a Function");
              return -1 == this.cn[t4].indexOf(i3) && this.cn[t4].push(i3), true;
            }, t3.prototype.removeEventHandler = function(t4, i3) {
              return !!this.cn[t4] && (this.cn[t4] = i3 ? this.cn[t4].filter(function(t5) {
                return t5 !== i3;
              }) : [], true);
            }, t3.prototype.emit = function(t4) {
              for (var i3 = [], n3 = 1; n3 < arguments.length; n3++)
                i3[n3 - 1] = arguments[n3];
              this.cn[t4] && this.cn[t4].forEach(function(n4) {
                try {
                  setTimeout(function() {
                    n4.apply(void 0, i3);
                  }, 0);
                } catch (i4) {
                  console.error('Fail to execute callback of event "'.concat(t4, '" : ').concat(i4));
                }
              });
            }, t3.prototype.reset = function() {
              this.cn = {};
            }, t3;
          }(), P = N, M = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, x = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          };
          var j, q = function() {
            function t3(t4, i3) {
              var n3 = this;
              this.raMode = e2.kf.World, this.recvRange = null, this.position = null, this.forwardAxis = [1, 0, 0], this.upAxis = [0, 0, 1], this.audioStream = null, this.enableMic = false, this.isPublishing = false, this.streamID = null, this.isDenoise = false, this.denoiseMode = D.PP.AI, this.voiceChanger = null, this.voiceParam = null, this.isUpdated = true, this.zegoRTC = i3, this.audioCtx = t4, this.audioListener = this.audioCtx.listener, this.eventHandler = P.getInstance(), this.zegoRTC.on("publisherStateUpdate", function(t5) {
                var i4 = t5.state, r3 = t5.errorCode, s3 = t5.extendedData, o3 = t5.streamID.match(/(.*)_(.*)/);
                if (3 === (null == o3 ? void 0 : o3.length)) {
                  if (n3.userID !== o3[1])
                    return;
                  "NO_PUBLISH" === i4 ? (n3.isPublishing = false, n3.stopPublishingStream()) : (n3.isPublishing = true, n3.isUpdated || (n3.an.info(y + " resend stream info"), n3.updateSteamExtraInfo())), n3.eventHandler.emit("microphoneStateUpdate", { NO_PUBLISH: e2.eI.Off, PUBLISH_REQUESTING: e2.eI.TurningOn, PUBLISHING: e2.eI.On }[i4], r3, s3);
                }
              }), this.zegoRTC.on("deviceError", function(t5, i4) {
                return M(n3, void 0, void 0, function() {
                  var n4, e3;
                  return x(this, function(r3) {
                    switch (r3.label) {
                      case 0:
                        return this.an.info(y + " device fail ".concat(t5, " ").concat(i4, " ").concat(!!this.audioStream, " ").concat(this.micID)), this.audioStream ? [4, this.zegoRTC.enumDevices()] : [2];
                      case 1:
                        return n4 = r3.sent(), e3 = n4.microphones, this.micID || 0 !== e3.length ? 1106009 !== t5 ? [3, 3] : [4, this.zegoRTC.useAudioDevice(this.audioStream, this.micID || e3[0].deviceID)] : [2];
                      case 2:
                        r3.sent(), r3.label = 3;
                      case 3:
                        return [2];
                    }
                  });
                });
              });
            }
            return Object.defineProperty(t3.prototype, "recvMode", { get: function() {
              return void 0 !== this._recvMode ? this._recvMode : [e2.kf.World, e2.kf.SecretTeam].includes(this.raMode) ? e2.ju.All : e2.ju.Team;
            }, set: function(t4) {
              this._recvMode = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sendMode", { get: function() {
              return void 0 !== this._sendMode ? this._sendMode : this.raMode === e2.kf.World ? e2.UF.All : e2.UF.Team;
            }, set: function(t4) {
              this._sendMode = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "an", { get: function() {
              return this.zegoRTC.logger;
            }, enumerable: false, configurable: true }), t3.getInstance = function(i3, n3) {
              return t3.instance || (t3.instance = new t3(i3, n3)), t3.instance;
            }, t3.prototype.updateSelfPosition = function(t4, i3, n3) {
              this.position = t4, this.forwardAxis = i3, Array.isArray(n3) && (this.upAxis = n3), this.updateListenerEffect();
            }, t3.prototype.updateListenerEffect = function() {
              this.position && (this.audioListener.positionX ? (this.audioListener.positionX.value = this.position[1], this.audioListener.positionY.value = this.position[2], this.audioListener.positionZ.value = -this.position[0]) : this.audioListener.setPosition(this.position[1], this.position[2], -this.position[0]), this.audioListener.forwardX ? (this.audioListener.forwardX.value = this.forwardAxis[1], this.audioListener.forwardY.value = this.forwardAxis[2], this.audioListener.forwardZ.value = -this.forwardAxis[0], this.audioListener.upX.value = this.upAxis[1], this.audioListener.upY.value = this.upAxis[2], this.audioListener.upZ.value = -this.upAxis[0]) : this.audioListener.setOrientation(this.forwardAxis[1], this.forwardAxis[2], -this.forwardAxis[0], this.upAxis[1], this.upAxis[2], -this.upAxis[0]));
            }, t3.prototype.startPublishingStream = function() {
              var t4 = this;
              this.enableMic ? this.an.warn(y + " mic is already enabled") : (this.enableMic = true, this.zegoRTC.createStream({ camera: { video: false, audio: true, audioInput: this.micID || void 0, audioBitrate: 30 } }).then(function(i3) {
                return M(t4, void 0, void 0, function() {
                  return x(this, function(t5) {
                    if (!this.userID)
                      throw this.zegoRTC.destroyStream(i3), this.enableMic = false, Error("Enable mic failed. Please log in room first.");
                    return this.audioStream && this.audioStream !== i3 && this.zegoRTC.destroyStream(this.audioStream), this.audioStream = i3, this.isDenoise && (this.enableDenoise(this.isDenoise), this.denoiseMode !== D.PP.AIBalanced && this.denoiseMode != D.PP.AIAggressive || this.setAiDenoiseMode(this.denoiseMode)), null !== this.voiceChanger && this.setVoiceChangerPreset({ voiceChanger: this.voiceChanger }), null !== this.voiceParam && this.setVoiceChangerPreset({ voiceParam: this.voiceParam }), this.streamID = this.userID + "_" + Date.now(), this.zegoRTC.startPublishingStream(this.streamID, i3, { extraInfo: JSON.stringify(this.getExtraInfo()) }), [2];
                  });
                });
              }).catch(function(i3) {
                throw t4.audioStream = null, t4.enableMic = false, i3;
              }));
            }, t3.prototype.stopPublishingStream = function() {
              this.isPublishing && this.streamID && this.zegoRTC.stopPublishingStream(this.streamID), this.isPublishing = false, this.audioStream && (this.zegoRTC.destroyStream(this.audioStream), this.audioStream = null), this.enableMic = false;
            }, t3.prototype.setCustomMode = function(t4, i3) {
              var n3 = false, e3 = false, r3 = false;
              return i3 !== this.recvMode && (this.recvMode = i3, r3 = true), t4 !== this.sendMode && (this.sendMode = t4, n3 = true, e3 = true), n3 && this.updateSteamExtraInfo(), { sendChange: e3, recvChange: r3 };
            }, t3.prototype.setNormalMode = function(t4) {
              this.raMode = t4, this.updateSteamExtraInfo();
            }, t3.prototype.setTeamID = function(t4) {
              this.teamID = t4, this.updateSteamExtraInfo();
            }, t3.prototype.updateSteamExtraInfo = function() {
              var t4 = this;
              this.streamID && this.isPublishing && (this.isUpdated = false, this.an.info(y + " update stream info"), this.zegoRTC.setStreamExtraInfo(this.streamID, JSON.stringify(this.getExtraInfo())).then(function(i3) {
                0 === i3.errorCode && (t4.an.info(y + " update stream info success"), t4.isUpdated = true);
              }));
            }, t3.prototype.getExtraInfo = function() {
              var t4, i3 = { range_audio_team_id: this.teamID || "", range_audio_mode: (t4 = this.raMode, { 0: 1, 1: 2, 2: 3 }[t4]), r_a_s_flag: 1 };
              return void 0 === this._sendMode && this.raMode !== e2.kf.World || (i3.r_a_speak = this.sendMode), i3;
            }, t3.prototype.reset = function() {
              this.audioStream && this.stopPublishingStream(), this.userID = void 0, this.streamID = null;
            }, t3.prototype.enableDenoise = function(t4) {
              var i3 = this;
              return this.audioStream && this.zegoRTC._enableAiDenoise(this.audioStream, t4).catch(function(t5) {
                i3.isDenoise = false;
                var n3 = t5 || {};
                i3.eventHandler.emit("aiDenoiseError", n3.errorCode, n3.extendedData);
              }), this.isDenoise = t4, true;
            }, t3.prototype.setAiDenoiseMode = function(t4) {
              var i3 = this;
              return this.audioStream && this.zegoRTC.setAiDenoiseMode(this.audioStream, t4).catch(function(t5) {
                i3.denoiseMode = D.PP.AI;
                var n3 = t5 || {};
                i3.eventHandler.emit("aiDenoiseError", n3.errorCode, n3.extendedData);
              }), this.denoiseMode = t4, true;
            }, t3.prototype.setVoiceChangerPreset = function(t4) {
              var i3 = this;
              return this.audioStream && this.zegoRTC.setVoiceChangerPreset(this.audioStream, t4).catch(function(t5) {
                i3.voiceChanger = null;
                var n3 = t5 || {};
                i3.eventHandler.emit("voiceChangerError", n3.errorCode, n3.extendedData);
              }), "voiceChanger" in t4 && void 0 !== t4.voiceChanger ? (this.voiceChanger = t4.voiceChanger, this.voiceParam = null) : "voiceParam" in t4 && void 0 !== t4.voiceParam && (this.voiceParam = t4.voiceParam, this.voiceChanger = null), true;
            }, t3;
          }(), L = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, B = "zc.ra.2", U = function() {
            function t3(t4, i3) {
              this.an = t4, this.isEnable = false, this.interval = 100, this.timer = null, this.audioSourceList = [], this.hasChanged = false, this.userChanged = false, this.updateUserInterval = 1e3, this.updateUserTimer = null, this.audioSourceUpdate = false, this._maxPlayingQuantity = 20, this.allAudioSourceList = [], this.audioSourceWithinRangeList = [], this.localUserList = [], this.hn = i3;
            }
            return t3.getInstance = function(i3, n3) {
              return t3.instance || (t3.instance = new t3(i3, n3)), t3.instance;
            }, t3.prototype.setAudioSourceUpdate = function(t4) {
              this.audioSourceUpdate = t4;
            }, t3.prototype.setListener = function(t4) {
              this.hn = t4, this.hasChanged = true, this.userChanged = true;
            }, t3.prototype.setAudioSourceList = function(t4) {
              this.audioSourceList = t4, this.an.info("".concat(B, " set src list: [").concat(t4.map(function(t5) {
                return t5.userID;
              }).join(","), "]")), this.hasChanged = true;
            }, t3.prototype.setAllAudioSourceList = function(t4) {
              t4 && (this.allAudioSourceList = t4), this.userChanged = true;
            }, t3.prototype.startPlayingAudioStream = function() {
              this.timer && (clearTimeout(this.timer), this.timer = null), this.hasChanged = true, this.playAudioTask();
            }, t3.prototype.playAudioTask = function() {
              var t4 = this;
              this.hasChanged && (this.hasChanged = false, this.handlePlayAudioTask()), this.timer = window.setTimeout(function() {
                t4.playAudioTask();
              }, this.interval);
            }, t3.prototype.handlePlayAudioTask = function() {
              var t4 = this;
              if (this.isEnable) {
                this.an.info("".concat(B, " handler task start"));
                var i3 = L([], this.audioSourceList, true), n3 = 0, r3 = this.hn.recvMode;
                if ([e2.ju.Team, e2.ju.All].includes(r3)) {
                  var s3 = this.getTeamAudioSourceGroup();
                  i3 = s3.otherList, s3.teamList.forEach(function(i4) {
                    n3 < t4._maxPlayingQuantity && (i4.isPlaying || i4.startPlayingAudio("play for team"), n3++);
                  });
                }
                var o3 = [e2.ju.World, e2.ju.All].includes(r3);
                o3 && (i3.forEach(function(i4) {
                  i4.distance = i4.getDistanceFromListener(t4.hn);
                }), i3.sort(function(t5, i4) {
                  return null === t5.distance ? 1 : null === i4.distance || t5.distance < i4.distance ? -1 : t5.distance > i4.distance ? 1 : 0;
                })), i3.forEach(function(i4) {
                  var r4 = [e2.UF.All, e2.UF.World].includes(i4.sendMode) && null !== i4.distance && (null === t4.hn.recvRange || i4.distance <= t4.hn.recvRange);
                  if (o3 && n3 < t4._maxPlayingQuantity && r4)
                    i4.isPlaying || i4.startPlayingAudio("play for range"), n3++;
                  else {
                    var s4 = "stop for mode or range. mode: ".concat(i4.sendMode, ", range: ").concat(i4.distance, " > ").concat(t4.hn.recvRange);
                    i4.stopPlayingAudio(s4);
                  }
                }), this.an.info(B + " playing quantity: ".concat(n3, "."));
              } else
                this.stopPlayingAudioStream();
            }, t3.prototype.startCheckUserInRange = function() {
              this.an.info(B + " start user check"), this.updateUserTimer && (clearTimeout(this.updateUserTimer), this.updateUserTimer = null), this.userChanged = true, this.userCheckTask();
            }, t3.prototype.stopCheckUserInRange = function() {
              this.an.info(B + " stop user check"), this.updateUserTimer && (clearTimeout(this.updateUserTimer), this.updateUserTimer = null);
            }, t3.prototype.userCheckTask = function() {
              var t4 = this;
              this.userChanged && (this.userChanged = false, this.handleUserCheckTask()), this.updateUserTimer = window.setTimeout(function() {
                t4.userCheckTask();
              }, this.updateUserInterval);
            }, t3.prototype.handleUserCheckTask = function() {
              var t4 = this;
              if (this.audioSourceUpdate) {
                var i3 = [];
                this.allAudioSourceList.forEach(function(n3) {
                  n3.distance = n3.getDistanceFromListener(t4.hn);
                  var e3 = null !== n3.distance && (null === t4.hn.recvRange || n3.distance <= t4.hn.recvRange), r3 = !!t4.localUserList.find(function(t5) {
                    return t5.userID === n3.userID;
                  });
                  e3 && r3 && i3.push({ userID: n3.userID, position: n3.position });
                }), this.checkAudioSourceListDiff(i3, this.audioSourceWithinRangeList) && this.hn.eventHandler.emit("audioSourceWithinRangeUpdate", i3), this.audioSourceWithinRangeList = i3;
              }
            }, t3.prototype.getTeamAudioSourceGroup = function() {
              var t4 = this, i3 = [], n3 = [];
              return this.audioSourceList.forEach(function(e3) {
                e3.isSpeakInTeam(t4.hn.teamID) ? i3.push(e3) : n3.push(e3);
              }), { teamList: i3, otherList: n3 };
            }, t3.prototype.stopPlayingAudioStream = function() {
              this.timer && (clearTimeout(this.timer), this.timer = null);
              this.audioSourceList.forEach(function(t4) {
                t4.stopPlayingAudio("stop for all stream");
              });
            }, t3.prototype.setLocalUserList = function(t4) {
              this.localUserList = t4, this.userChanged = true;
            }, t3.prototype.checkAudioSourceListDiff = function(t4, i3) {
              for (var n3, e3 = 0; e3 < t4.length; e3++) {
                n3 = false;
                for (var r3 = 0; r3 < i3.length; r3++)
                  if (t4[e3].userID === i3[r3].userID) {
                    n3 = true;
                    break;
                  }
                if (!n3)
                  return true;
              }
              for (var s3 = 0; s3 < i3.length; s3++) {
                n3 = false;
                for (var o3 = 0; o3 < t4.length; o3++)
                  if (i3[s3].userID === t4[o3].userID) {
                    n3 = true;
                    break;
                  }
                if (!n3)
                  return true;
              }
              return false;
            }, t3;
          }();
          function G(t3) {
            return !isNaN(Number(t3)) && "" !== t3 && Number.MAX_SAFE_INTEGER >= Number(t3) && Number(t3) >= -Number.MAX_SAFE_INTEGER;
          }
          function J(t3) {
            if (Array.isArray(t3)) {
              for (var i3 = 0; i3 < 3; i3++) {
                if (!G(t3[i3]))
                  return false;
              }
              return true;
            }
            return false;
          }
          !function(t3) {
            t3[t3.Normal = 0] = "Normal", t3[t3.Custom = 1] = "Custom";
          }(j || (j = {}));
          var F = function() {
            return F = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, F.apply(this, arguments);
          }, H = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, V = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, Q = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          };
          function Y() {
            var t3;
            return H(this, void 0, void 0, function() {
              var i3, n3, e3;
              return V(this, function(r3) {
                switch (r3.label) {
                  case 0:
                    return (i3 = null === navigator || void 0 === navigator ? void 0 : navigator.userAgentData) ? [4, i3.getHighEntropyValues(["platformVersion"]).catch(function() {
                    })] : [2, { platform: "", majorPlatformVersion: 0 }];
                  case 1:
                    return n3 = r3.sent() || {}, e3 = parseInt(null === (t3 = n3.platformVersion) || void 0 === t3 ? void 0 : t3.split(".")[0]), [2, { platform: n3.platform, majorPlatformVersion: e3 }];
                }
              });
            });
          }
          var K = "zc.ra.0";
          var Z = function() {
            function t3(t4, i3) {
              var n3 = this;
              this.an = i3, this.isSpatial = false, this.audioSourceList = [], this.audioSourceUpdate = false, this.localUserList = [], this.speakingUserIdList = [], this.vocalSourceMap = /* @__PURE__ */ new Map(), this.volume = 1, this.speaker = "", this.ln = null, this.supportSpeakerSet = false, this.isHide = false, this.eventHandler = { visibilitychange: function() {
                return H(n3, void 0, void 0, function() {
                  var t5, i4, n4, e3, s3, o3 = this;
                  return V(this, function(u3) {
                    switch (u3.label) {
                      case 0:
                        return Q(Q([], this.vocalSourceList, true), this.audioSourceList, true).forEach(function(t6) {
                          t6.inBackground(r2.VJ.hidden), o3.isHide = r2.VJ.hidden;
                        }), t5 = function() {
                          Q(Q([], o3.vocalSourceList, true), o3.audioSourceList, true).forEach(function(t6) {
                            t6.changeRenderConfig(o3.isOpen3D(t6), true, false, false);
                          });
                        }, r2.VJ.hidden ? (i4 = (0, f.H8)() && (0, f.Fr)(), [4, Y()]) : [3, 2];
                      case 1:
                        return n4 = u3.sent(), e3 = "Windows" === n4.platform && n4.majorPlatformVersion >= 13, i4 || e3 ? (this.an.warn("".concat(K, " mobile chrome hide page and stop web audio.")), t5(), [2]) : ("running" !== (s3 = this.audioCtx.state) ? (this.an.info("".concat(K, " hidden ctx: ").concat(s3, ", resume ctx")), this.audioCtx.resume(), setTimeout(function() {
                          var i5 = o3.audioCtx.state;
                          o3.isHide && ("running" === i5 ? o3.an.info("".concat(K, " hidden ctx: ").concat(i5, ".")) : (o3.an.warn("".concat(K, " hidden ctx: ").concat(i5, ", ctx resume failed. stop web audio.")), t5()));
                        }, 2e3)) : this.an.info("".concat(K, " hidden ctx: ").concat(s3, ".")), [3, 3]);
                      case 2:
                        this.audioCtx.resume(), this.audioSourceList.forEach(function(t6) {
                          var i5, n5;
                          t6.isPlaying && (null === (i5 = t6.audioEl) || void 0 === i5 || i5.dom.pause(), null === (n5 = t6.audioEl) || void 0 === n5 || n5.dom.play().catch(function() {
                            o3.an.warn("".concat(K, " show page and  ").concat(t6.userID, " replay failed."));
                          }));
                        }), u3.label = 3;
                      case 3:
                        return [2];
                    }
                  });
                });
              } }, this.zegoRTC = t4, r2.VJ.addEventListener("visibilitychange", this.eventHandler.visibilitychange, false), this.zegoRTC.on("roomStreamUpdate", function(t5, i4, e3) {
                var r3 = e3.map(function(t6) {
                  var i5 = n3.getStreamInfo(t6.extraInfo, t6.streamID), e4 = i5.isRangeAudioStream, r4 = i5.teamID, s4 = i5.raMode, o3 = i5.sendMode;
                  return F(F({}, t6), { isRangeAudioStream: e4, teamID: r4, raMode: s4, sendMode: o3 });
                }).filter(function(t6) {
                  return t6.isRangeAudioStream;
                }), s3 = r3.map(function(t6) {
                  return t6.user.userID;
                });
                "DELETE" === i4 ? n3.speakingUserIdList = n3.speakingUserIdList.filter(function(t6) {
                  var i5 = !s3.includes(t6);
                  if (!i5) {
                    var e4 = n3.audioSourceMap[t6];
                    if (e4) {
                      e4.stopPlayingAudio("stop for stream delete");
                    }
                  }
                  return i5;
                }) : "ADD" === i4 && (n3.speakingUserIdList = n3.speakingUserIdList.concat(s3), r3.forEach(function(t6) {
                  var i5 = t6.user.userID, e4 = n3.audioSourceMap[i5], r4 = t6.teamID, s4 = t6.raMode, o3 = t6.sendMode;
                  if (e4)
                    e4.streamID !== t6.streamID && (e4.stopPlayingAudio("stop for old stream"), e4.streamID = t6.streamID), void 0 !== s4 && (e4.raMode = s4), r4 !== e4.teamID && (e4.teamID = r4), e4.changeRenderConfig(n3.isOpen3D(e4));
                  else {
                    var u3 = new w(n3.an, { userID: i5, teamID: r4, raMode: s4, sendMode: o3 }, { audioCtx: n3.audioCtx, zegoRTC: n3.zegoRTC, isSpatial: n3.isSpatial, maxDistance: n3.hn.recvRange, volume: n3.volume, speaker: n3.speaker, isHide: n3.isHide });
                    u3.streamID = t6.streamID, n3.audioSourceList.push(u3), n3.playStreamHandler.hasChanged = true;
                  }
                })), n3.playStreamHandler.setAudioSourceList(n3.speakingAudioSourceList);
              }), this.zegoRTC.on("playerStateUpdate", function(t5) {
                var i4 = n3.audioSourceList.find(function(i5) {
                  return i5.streamID === t5.streamID;
                });
                i4 && ("NO_PLAY" === t5.state ? i4.isPlaying = false : ("PLAYING" === t5.state && i4.checkTrackChanged(), i4.isPlaying = true));
              }), this.zegoRTC.on("streamExtraInfoUpdate", function(t5, i4) {
                n3.an.info(K + " recv extra info: " + JSON.stringify(i4));
                var e3 = false;
                i4.forEach(function(t6) {
                  var i5 = n3.audioSourceMap[t6.user.userID];
                  if (i5 && i5.streamID) {
                    var r3 = n3.getStreamInfo(t6.extraInfo, t6.streamID), s3 = r3.teamID, o3 = r3.raMode, u3 = r3.sendMode;
                    s3 !== i5.teamID && (i5.teamID = s3, e3 = true), void 0 !== o3 && (i5.raMode = o3, e3 = true), i5.sendMode !== u3 && (i5.sendMode = u3, e3 = true), n3.playStreamHandler.hasChanged = true;
                  }
                }), e3 && n3.enableSpatializer(n3.isSpatial);
              }), this.zegoRTC.RTM._on("_roomStateUpdate", function(t5, i4) {
                "CONNECTED" === i4 ? (n3.roomID = t5, n3.hn.userID = n3.zegoRTC.RTM.getUserID(), n3.playStreamHandler.hasChanged = true, n3.playStreamHandler.userChanged = true) : "DISCONNECTED" === i4 && (n3.roomID = void 0, n3.hn.reset(), n3.enableSpeaker(false), n3.audioSourceList = [], n3.playStreamHandler.setAudioSourceList([]), n3.localUserList = [], n3.playStreamHandler.setLocalUserList([]));
              }), this.zegoRTC.RTM.on("roomUserUpdate", function(t5, i4, e3) {
                var r3;
                n3.an.info(K + " roomUserUpdate: " + t5 + i4 + JSON.stringify(e3)), "ADD" === i4 ? (r3 = n3.localUserList).push.apply(r3, e3) : "DELETE" === i4 && e3.forEach(function(t6) {
                  n3.localUserList = n3.localUserList.filter(function(i5) {
                    return i5.userID !== t6.userID;
                  });
                }), n3.playStreamHandler.setLocalUserList(n3.localUserList);
              }), this.zegoRTC.on("publishQualityUpdate", function(t5, i4) {
                var e3 = t5.match(/(.*)_(.*)/);
                if (3 === (null == e3 ? void 0 : e3.length)) {
                  var r3 = e3[1];
                  if (n3.hn.userID !== r3)
                    return;
                  var s3 = F({}, i4.audio);
                  n3.eventManager.emit("publishQualityUpdate", r3, s3);
                }
              }), this.zegoRTC.on("playQualityUpdate", function(t5, i4) {
                var e3, r3 = t5.match(/(.*)_(.*)/);
                if (3 === (null == r3 ? void 0 : r3.length)) {
                  var s3 = r3[1], o3 = i4.audio, u3 = i4.peerToPeerDelay, a2 = i4.peerToPeerPacketLostRate;
                  if (!(null === (e3 = n3.audioSourceList) || void 0 === e3 ? void 0 : e3.some(function(t6) {
                    return t6.userID === s3;
                  })))
                    return;
                  var c2 = F(F({}, o3), { peerToPeerDelay: u3, peerToPeerPacketLostRate: a2 });
                  n3.eventManager.emit("playQualityUpdate", s3, c2);
                }
              }), this.ln = this.dn(), this.hn = q.getInstance(this.audioCtx, this.zegoRTC), this.playStreamHandler = U.getInstance(this.an, this.hn), this.eventManager = P.getInstance();
            }
            return Object.defineProperty(t3.prototype, "audioSourceMap", { get: function() {
              return this.audioSourceList.reduce(function(t4, i3) {
                return i3.userID && (t4[i3.userID] = i3), t4;
              }, {});
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "speakingAudioSourceList", { get: function() {
              var t4 = this;
              return this.audioSourceList.filter(function(i3) {
                return t4.speakingUserIdList.includes(i3.userID);
              });
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "vocalSourceList", { get: function() {
              for (var t4 = [], i3 = this.vocalSourceMap.values(), n3 = 0; n3 < this.vocalSourceMap.size; n3++)
                t4.push(i3.next().value);
              return t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "playingAudioSourceList", { get: function() {
              return this.audioSourceList.filter(function(t4) {
                return t4.isPlaying;
              });
            }, enumerable: false, configurable: true }), t3.prototype.dn = function() {
              var t4 = this, i3 = new (window.AudioContext || window.webkitAudioContext)();
              return i3.addEventListener("statechange", function() {
                "suspended" === i3.state && (t4.an.info(K + " audio context suspended"), i3.resume());
              }), i3;
            }, Object.defineProperty(t3.prototype, "audioCtx", { get: function() {
              return this.ln || (this.ln = this.dn()), this.ln;
            }, enumerable: false, configurable: true }), t3.getInstance = function(i3, n3) {
              return t3.instance || (t3.instance = new t3(i3, n3)), t3.instance;
            }, t3.prototype.resumeAudioContext = function() {
              return H(this, void 0, void 0, function() {
                var t4 = this;
                return V(this, function(i3) {
                  return [2, new r2.l3(function(i4) {
                    s2.generateEls(), "running" === t4.audioCtx.state && i4(true), t4.audioCtx.onstatechange = function() {
                      "running" === t4.audioCtx.state && i4(true);
                    }, t4.audioCtx.resume(), t4.an.info(K + " resume audio ctx"), setTimeout(function() {
                      i4(false);
                    }, 3e3);
                  })];
                });
              });
            }, t3.prototype.getAudioContextState = function() {
              return this.audioCtx.state;
            }, t3.prototype.getStreamInfo = function(t4, i3) {
              var n3 = void 0, e3 = null;
              try {
                e3 = JSON.parse(t4);
              } catch (t5) {
                return this.an.warn(K + " parse room extra info failed. ".concat(i3, " is not ra stream.")), { isRangeAudioStream: false };
              }
              if (!e3.hasOwnProperty("range_audio_team_id") || !e3.hasOwnProperty("range_audio_mode"))
                return this.an.warn(K + " extra info has no mode. ".concat(i3, " is not ra stream.")), { isRangeAudioStream: false };
              n3 = { 1: 0, 2: 1, 3: 2 }[e3.range_audio_mode];
              var r3 = e3.r_a_s_flag, s3 = { teamID: e3.range_audio_team_id || void 0, raMode: n3, isRangeAudioStream: void 0 === r3 || 1 === r3 };
              return e3.hasOwnProperty("r_a_speak") && (s3.sendMode = e3.r_a_speak), this.an.info("".concat(K, " ").concat(i3, " parse extra info: ").concat(JSON.stringify(s3), ".")), s3;
            }, t3.prototype.setAudioReceiveRange = function(t4) {
              if (!G(t4))
                throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' requires to be type number.");
              if (t4 = Number(t4), (t4 = Number(t4)) < 0)
                throw Error("Failed to execute 'setAudioReceiveRange': Argument 'range' can not be less than 0.");
              this.an.info(K + " set receive range: " + t4), this.hn.recvRange = t4, this.audioSourceList.forEach(function(i3) {
                i3.setMaxDistance(t4);
              }), this.playStreamHandler.hasChanged = true, this.playStreamHandler.userChanged = true;
            }, t3.prototype.updateSelfPosition = function(t4, i3, n3, e3) {
              var r3 = this, s3 = function(t5) {
                return "Failed to execute 'updateSelfPosition': Argument '".concat(t5, `' requires an array of type number."`);
              };
              if (!J(t4))
                throw new Error(s3("position"));
              if (!J(i3))
                throw new Error(s3("axisForward"));
              if (!J(n3))
                throw new Error(s3("axisRight"));
              if (!J(e3))
                throw new Error(s3("axisUp"));
              this.an.info(K + " set self position [".concat(t4, "]")), this.hn && (this.hn.updateSelfPosition(t4, i3, e3), this.vocalSourceMap.forEach(function(t5) {
                t5.checkIfCanPlay(r3.hn);
              })), this.playStreamHandler.setListener(this.hn);
            }, t3.prototype.updateAudioSource = function(t4, i3) {
              if (t4 = String(t4), !J(i3))
                throw new Error("Failed to execute 'updateAudioSource': parameter 'position' must be an array of type number.");
              var n3 = this.audioSourceMap[t4];
              n3 ? n3.setPosition(i3) : (n3 = new w(this.an, { userID: t4, position: i3 }, { audioCtx: this.audioCtx, zegoRTC: this.zegoRTC, isSpatial: this.isSpatial, maxDistance: this.hn.recvRange, volume: this.volume, speaker: this.speaker, isHide: this.isHide }), this.enableSpatializer(this.isSpatial), this.audioSourceList.push(n3)), this.playStreamHandler.setAudioSourceList(this.speakingAudioSourceList), this.playStreamHandler.setAllAudioSourceList(this.audioSourceList);
            }, t3.prototype.enableMicrophone = function(t4) {
              if (void 0 === t4 && (t4 = true), !this.hn.userID)
                throw new Error("Enable mic failed. Please log in room first.");
              return t4 ? this.hn.startPublishingStream() : this.hn.stopPublishingStream();
            }, t3.prototype.selectMic = function(t4) {
              return H(this, void 0, void 0, function() {
                var i3, n3, e3, r3;
                return V(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      if (!(0, h.QP)(t4) && !(0, h.TE)(t4))
                        throw new Error("Select mic failed. DeviceID error.");
                      if (n3 = (i3 = this.hn).audioStream, e3 = i3.isPublishing, this.an.info(K + " select mic: " + t4), !n3 || !e3)
                        return [3, 5];
                      r3 = { errorCode: 0 }, s3.label = 1;
                    case 1:
                      return s3.trys.push([1, 3, , 4]), [4, this.zegoRTC.useAudioDevice(n3, t4 || "")];
                    case 2:
                      return r3 = s3.sent(), [3, 4];
                    case 3:
                      return s3.sent(), [2, false];
                    case 4:
                      return 0 === r3.errorCode ? (this.hn.micID = t4, [2, true]) : [2, false];
                    case 5:
                      return this.hn.micID = t4, [2, true];
                    case 6:
                      return [2];
                  }
                });
              });
            }, t3.prototype.enableSpeaker = function(t4) {
              if (void 0 === t4 && (t4 = true), t4 && !this.roomID)
                throw new Error("Enable speaker failed. Please log in room first.");
              this.playStreamHandler.isEnable = t4, this.an.info(K + " enable speaker: " + t4), t4 ? (s2.generateEls(), this.playStreamHandler.startPlayingAudioStream()) : this.playStreamHandler.stopPlayingAudioStream();
            }, t3.prototype.enableSpatializer = function(t4) {
              var i3 = this;
              void 0 === t4 && (t4 = true), this.an.info(K + " set spatializer: " + t4), this.isSpatial = !!t4, this.audioSourceList.forEach(function(t5) {
                t5.changeRenderConfig(i3.isOpen3D(t5));
              }), this.vocalSourceList.forEach(function(i4) {
                i4.changeRenderConfig(t4);
              }), t4 && this.hn.updateListenerEffect();
            }, t3.prototype.enableAiDenoise = function(t4) {
              if (this.an.info(K + " set ai denoise: " + t4), !(0, h.dd)(t4))
                return false;
              var i3 = (0, f.Fr)();
              return (i3 || window.AudioWorklet) && window.WebAssembly && (window.AudioContext || (null === window || void 0 === window ? void 0 : window.webkitAudioContext)).prototype.createScriptProcessor ? this.hn.enableDenoise(!!t4) : (this.an.error(K + "".concat(i3 && " mobile", " browser dose not support ai denoise.")), false);
            }, t3.prototype.setAiDenoiseMode = function(t4) {
              return void 0 === t4 && (t4 = D.PP.AI), this.hn.setAiDenoiseMode(t4);
            }, t3.prototype.setVoiceChangerPreset = function(t4) {
              this.an.info(K + " set voice changer preset: " + JSON.stringify(t4));
              var i3 = (0, f.Fr)();
              return (i3 || window.AudioWorklet) && window.WebAssembly && (window.AudioContext || (null === window || void 0 === window ? void 0 : window.webkitAudioContext)).prototype.createScriptProcessor ? this.hn.setVoiceChangerPreset(t4) : (this.an.error(K + "".concat(i3 && " mobile", " browser dose not support voice changer.")), false);
            }, t3.prototype.setRangeAudioTeamID = function(t4) {
              this.an.info(K + " set team id: " + t4), this.hn.setTeamID(t4), this.enableSpatializer(this.isSpatial), this.playStreamHandler.hasChanged = true;
            }, t3.prototype.setRangeAudioMode = function(t4) {
              if (this.modeType === j.Custom)
                throw new Error("Failed to execute 'setRangeAudioMode': already use 'setRangeAudioCustomMode'.");
              this.modeType = j.Normal, this.an.info(K + " set mode " + t4), this.hn.setNormalMode(t4), this.playStreamHandler.hasChanged = true;
            }, t3.prototype.setCustomMode = function(t4, i3) {
              if (this.modeType === j.Normal)
                throw new Error("Failed to execute 'setRangeAudioCustomMode': already use 'setRangeAudioMode'.");
              this.modeType = j.Custom, this.an.info(K + " set custom mode: ".concat(t4, ", ").concat(i3));
              var n3 = this.hn.setCustomMode(t4, i3).recvChange;
              this.playStreamHandler.hasChanged = true, n3 && this.enableSpatializer(this.isSpatial);
            }, t3.prototype.setAudioVolume = function(t4) {
              var i3 = this;
              if (this.an.info(K + " set volume ".concat(t4)), t4 < 0)
                throw new Error("Failed to execute 'setVolume': The volume provided is outside the range [0, 200].");
              this.volume = t4 / 100, this.audioSourceList.forEach(function(t5) {
                t5.setVolume(i3.volume);
              });
            }, t3.prototype.selectSpeaker = function(t4) {
              var i3 = this;
              if (void 0 === t4 && (t4 = ""), !(0, h.QP)(t4))
                throw new Error("Select speaker failed. Device ID error.");
              if (!this.supportSpeakerSet) {
                if (!!!r2.VJ.createElement("audio").setSinkId)
                  throw new Error("Failed to execute 'selectSpeaker': browser not support.");
                this.supportSpeakerSet = true;
              }
              this.speaker = t4, this.an.info(K + " set speaker: " + t4), "" === t4 && this.an.warn(K + " set speaker to be default. ");
              this.audioSourceList.find(function(n3) {
                return H(i3, void 0, void 0, function() {
                  var i4;
                  return V(this, function(e3) {
                    switch (e3.label) {
                      case 0:
                        return e3.trys.push([0, 2, , 3]), [4, n3.setSpeaker(t4)];
                      case 1:
                        return e3.sent(), [3, 3];
                      case 2:
                        return i4 = e3.sent(), this.an.warn(K + " set speaker failed. id: ".concat(t4, ", error: ").concat(i4)), [2, true];
                      case 3:
                        return [2, false];
                    }
                  });
                });
              });
            }, t3.prototype.setPositionUpdateFrequency = function(t4) {
              if (!(t4 >= 15))
                throw new Error("Failed to execute 'setPositionUpdateFrequency': The frequency provided is outside the range [15, +].");
              this.playStreamHandler.interval = Number(t4) || 100, this.an.info(K + " set interval: " + t4);
            }, t3.prototype.on = function(t4, i3) {
              return this.eventManager.addEventHandler(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this.eventManager.removeEventHandler(t4, i3);
            }, t3.prototype.enableAudioSourceUpdateChecker = function(t4, i3) {
              if (this.an.info(K + " set source update: " + t4), this.audioSourceUpdate = t4, this.playStreamHandler.setAudioSourceUpdate(t4), i3 && (0, h.Cs)(i3.frequency)) {
                if (i3.frequency < 50)
                  throw new Error("Failed to execute 'enableAudioSourceUpdateChecker': The frequency provided is outside the range [50, +].");
                this.playStreamHandler.updateUserInterval = Number(i3.frequency) || 1e3, this.an.info(K + " set interval: " + i3.frequency);
              }
              t4 ? this.playStreamHandler.startCheckUserInRange() : this.playStreamHandler.stopCheckUserInRange();
            }, t3.prototype.getVocalSource = function(t4, i3) {
              var n3 = this.vocalSourceMap.get(t4);
              if (!n3) {
                var e3 = { audioCtx: this.audioCtx, isSpatial: this.isSpatial, maxDistance: i3 || 0, volume: this.volume, speaker: this.speaker, isHide: this.isHide };
                n3 = (0, h.Si)(t4) ? new I(this.an, { media: t4 }, e3) : new z(this.an, { streamView: t4 }, e3);
              }
              return this.vocalSourceMap.set(t4, n3), n3;
            }, t3.prototype.setStreamVocalRange = function(t4, i3) {
              var n3 = (0, h.Si)(t4);
              if (!n3 && !(null == t4 ? void 0 : t4.v))
                throw new Error("Failed to execute 'setVocalRange': type of parameter 1 error.");
              if (!G(i3))
                throw Error("Failed to execute 'setVocalRange': parameter 2 requires to be type number.");
              i3 = Number(i3), this.an.info(K + " ".concat(n3 ? "custom" : "stream", " set range: ") + i3);
              var e3 = this.getVocalSource(t4, i3);
              e3.setMaxDistance(i3), e3.checkIfCanPlay(this.hn);
            }, t3.prototype.updateStreamPosition = function(t4, i3) {
              if (!(0, h.Si)(t4) && !(null == t4 ? void 0 : t4.v))
                throw new Error("Failed to execute 'updatePosition': type of parameter 1 error.");
              if (!J(i3))
                throw new Error("Failed to execute 'updatePosition': parameter 'position' must be an array of type number.");
              var n3 = this.getVocalSource(t4);
              n3.setPosition(i3), n3.checkIfCanPlay(this.hn);
            }, t3.prototype.isOpen3D = function(t4) {
              return t4 instanceof w ? (!(this.hn.recvMode !== e2.ju.World) || !t4.isSpeakInTeam(this.hn.teamID)) && this.isSpatial : this.isSpatial;
            }, t3;
          }(), X = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, W = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, $ = function() {
            function t3(t4, i3) {
              this.vn = Z.getInstance(t4, i3);
            }
            return t3.getInstance = function(i3, n3) {
              if (!t3.instance) {
                if (!i3)
                  throw Error("create instance failed.");
                t3.instance = new t3(i3, n3);
              }
              return t3.instance;
            }, t3.prototype.enableAiDenoise = function(t4) {
              return this.vn.enableAiDenoise(t4);
            }, t3.prototype.setAiDenoiseMode = function(t4) {
              return this.vn.setAiDenoiseMode(t4);
            }, t3.prototype.enableAudioSourceUpdateChecker = function(t4, i3) {
              this.vn.enableAudioSourceUpdateChecker(t4, i3);
            }, t3.prototype.on = function(t4, i3) {
              return this.vn.on(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this.vn.off(t4, i3);
            }, t3.prototype.setAudioReceiveRange = function(t4) {
              this.vn.setAudioReceiveRange(t4);
            }, t3.prototype.updateSelfPosition = function(t4, i3, n3, e3) {
              this.vn.updateSelfPosition(t4, i3, n3, e3);
            }, t3.prototype.updateAudioSource = function(t4, i3) {
              this.vn.updateAudioSource(t4, i3);
            }, t3.prototype.enableSpatializer = function(t4) {
              return this.vn.enableSpatializer(t4);
            }, t3.prototype.enableMicrophone = function(t4) {
              return this.vn.enableMicrophone(t4);
            }, t3.prototype.selectMicrophone = function(t4) {
              return X(this, void 0, void 0, function() {
                return W(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return [4, this.vn.selectMic(t4)];
                    case 1:
                      return [2, i3.sent()];
                  }
                });
              });
            }, t3.prototype.selectSpeaker = function(t4) {
              return this.vn.selectSpeaker(t4);
            }, t3.prototype.enableSpeaker = function(t4) {
              return this.vn.enableSpeaker(t4);
            }, t3.prototype.setRangeAudioCustomMode = function(t4, i3) {
              this.vn.setCustomMode(t4, i3);
            }, t3.prototype.setRangeAudioMode = function(t4) {
              this.vn.setRangeAudioMode(t4);
            }, t3.prototype.setTeamID = function(t4) {
              this.vn.setRangeAudioTeamID(t4);
            }, t3.prototype.setPositionUpdateFrequency = function(t4) {
              return this.vn.setPositionUpdateFrequency(t4);
            }, t3.prototype.setRangeAudioVolume = function(t4) {
              return this.vn.setAudioVolume(t4);
            }, t3.prototype.setVoiceChangerPreset = function(t4) {
              return this.vn.setVoiceChangerPreset({ voiceChanger: t4 });
            }, t3.prototype.setVoiceChangerParam = function(t4) {
              return this.vn.setVoiceChangerPreset({ voiceParam: t4 });
            }, t3.prototype.isAudioContextRunning = function() {
              return "running" === this.vn.getAudioContextState();
            }, t3.prototype.resumeAudioContext = function() {
              return this.vn.resumeAudioContext();
            }, t3.prototype.setStreamVocalRange = function(t4, i3) {
              this.vn.setStreamVocalRange(t4, i3);
            }, t3.prototype.updateStreamPosition = function(t4, i3) {
              this.vn.updateStreamPosition(t4, i3);
            }, t3.prototype.setCustomSourceVocalRange = function(t4, i3) {
              this.vn.setStreamVocalRange(t4, i3);
            }, t3.prototype.updateCustomSourcePosition = function(t4, i3) {
              this.vn.updateStreamPosition(t4, i3);
            }, t3;
          }(), tt = { type: "RangeAudio", install: function(t3) {
            Object.defineProperty(t3.prototype, "createRangeAudioInstance", { value: function() {
              return this.rangeAudio || (this.rangeAudio = $.getInstance(this, this.logger)), this.rangeAudio;
            }, writable: false });
          } };
        }, 754: function(t2, i2, n2) {
          var e2;
          t2.exports = (e2 = n2(9021), function() {
            var t3 = e2.lib.WordArray;
            function i3(i4, n3, e3) {
              for (var r2 = [], s2 = 0, o2 = 0; o2 < n3; o2++)
                if (o2 % 4) {
                  var u2 = e3[i4.charCodeAt(o2 - 1)] << o2 % 4 * 2, a = e3[i4.charCodeAt(o2)] >>> 6 - o2 % 4 * 2;
                  r2[s2 >>> 2] |= (u2 | a) << 24 - s2 % 4 * 8, s2++;
                }
              return t3.create(r2, s2);
            }
            e2.enc.Base64 = { stringify: function(t4) {
              var i4 = t4.words, n3 = t4.sigBytes, e3 = this._map;
              t4.clamp();
              for (var r2 = [], s2 = 0; s2 < n3; s2 += 3)
                for (var o2 = (i4[s2 >>> 2] >>> 24 - s2 % 4 * 8 & 255) << 16 | (i4[s2 + 1 >>> 2] >>> 24 - (s2 + 1) % 4 * 8 & 255) << 8 | i4[s2 + 2 >>> 2] >>> 24 - (s2 + 2) % 4 * 8 & 255, u2 = 0; u2 < 4 && s2 + 0.75 * u2 < n3; u2++)
                  r2.push(e3.charAt(o2 >>> 6 * (3 - u2) & 63));
              var a = e3.charAt(64);
              if (a)
                for (; r2.length % 4; )
                  r2.push(a);
              return r2.join("");
            }, parse: function(t4) {
              var n3 = t4.length, e3 = this._map, r2 = this._reverseMap;
              if (!r2) {
                r2 = this._reverseMap = [];
                for (var s2 = 0; s2 < e3.length; s2++)
                  r2[e3.charCodeAt(s2)] = s2;
              }
              var o2 = e3.charAt(64);
              if (o2) {
                var u2 = t4.indexOf(o2);
                -1 !== u2 && (n3 = u2);
              }
              return i3(t4, n3, r2);
            }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" };
          }(), e2.enc.Base64);
        }, 757: function(t2, i2, n2) {
          "undefined" != typeof self && self, t2.exports = function(t3, i3, n3, e2) {
            return s2 = [function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.LinkedList = i4.ListNode = i4.ENUM_NETWORK_STATE = i4.SOCKET_DISCONNECT = i4.errorList = i4.Queue = i4.getSeq = i4.E_CLIENT_TYPE = i4.ENUM_LOG_LEVEL = i4.ZEGO_BROWSER_TYPE = i4.ZEGO_ENV = i4.PROTO_VERSION = void 0, i4.PROTO_VERSION = "1.0.8", (r3 = i4.ZEGO_ENV || (i4.ZEGO_ENV = {}))[r3.BROWSER = 0] = "BROWSER", r3[r3.WEIXINMINI = 1] = "WEIXINMINI", (r3 = i4.ZEGO_BROWSER_TYPE || (i4.ZEGO_BROWSER_TYPE = {}))[r3.IE = 0] = "IE", r3[r3.FIREFOX = 1] = "FIREFOX", r3[r3.CHROME = 2] = "CHROME", r3[r3.SAFARI = 3] = "SAFARI", r3[r3.OPERA = 4] = "OPERA", r3[r3.WEIXIN = 5] = "WEIXIN", r3[r3.WEIXINMINI = 6] = "WEIXINMINI", r3[r3.UNKOWN = 7] = "UNKOWN", i4.ENUM_LOG_LEVEL = { DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, REPORT: 99, DISABLE: 100, debug: 0, info: 1, warn: 2, error: 3, report: 99, disable: 100 }, (r3 = i4.E_CLIENT_TYPE || (i4.E_CLIENT_TYPE = {}))[r3.ClientType_None = 0] = "ClientType_None", r3[r3.ClientType_H5 = 1] = "ClientType_H5", r3[r3.ClientType_SmallPragram = 2] = "ClientType_SmallPragram", r3[r3.ClientType_Webrtc = 3] = "ClientType_Webrtc", i4.getSeq = (e3 = 1, function() {
                return e3++;
              }), s3.prototype.isEmpty = function() {
                return 0 == this.items.length;
              }, s3.prototype.enqueue = function(t5) {
                this.items.push(t5);
              }, s3.prototype.dequeue = function() {
                return this.isEmpty() ? "Underflow" : this.items.shift();
              }, s3.prototype.front = function() {
                return this.isEmpty() ? "No elements in Queue" : this.items[0];
              }, s3.prototype.size = function() {
                return this.items.length;
              }, s3.prototype.clear = function() {
                this.items = [];
              }, s3.prototype.all = function() {
                return this.items;
              };
              var e3, r3 = s3;
              function s3() {
                this.items = [], this.items = [];
              }
              i4.Queue = r3, i4.errorList = { TIMEOUT: { code: 100001, msg: "network timeout" }, DATAEXIST: { code: 100002, msg: "data exist" }, BROKEN: { code: 100003, msg: "network broken" } }, i4.SOCKET_DISCONNECT = -1, (r3 = i4.ENUM_NETWORK_STATE || (i4.ENUM_NETWORK_STATE = {}))[r3.offline = 0] = "offline", r3[r3.online = 1] = "online", Object.defineProperty(u2.prototype, "id", { get: function() {
                return this.h || null;
              }, set: function(t5) {
                this.h = t5;
              }, enumerable: false, configurable: true }), Object.defineProperty(u2.prototype, "data", { get: function() {
                return this.v;
              }, set: function(t5) {
                this.v = t5;
              }, enumerable: false, configurable: true }), u2.prototype.hasNext = function() {
                return this.next && this.next.id;
              }, u2.prototype.hasPrev = function() {
                return this.prev && this.prev.id;
              };
              var o3 = u2;
              function u2(t5, i5) {
                void 0 === t5 && (t5 = null), void 0 === i5 && (i5 = null), this.next = null, this.prev = null, this.h = t5, this.v = i5;
              }
              function a() {
                this.start = new o3(), this.end = new o3(), this.g = 0, this.O = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null;
              }
              i4.ListNode = o3, a.prototype.insertBefore = function(t5, i5) {
                return (i5 = new o3(this.g, i5)).next = t5, i5.prev = t5.prev, t5.prev && (t5.prev.next = i5), t5.prev = i5, ++this.g, ++this.O, i5;
              }, a.prototype.addLast = function(t5) {
                return this.insertBefore(this.end, t5);
              }, a.prototype.add = function(t5) {
                return this.addLast(t5);
              }, a.prototype.getFirst = function() {
                return 0 === this.O ? null : this.start.next;
              }, a.prototype.getLast = function() {
                return 0 === this.O ? null : this.end.prev;
              }, a.prototype.size = function() {
                return this.O;
              }, a.prototype.getFromFirst = function(t5) {
                var i5 = 0, n5 = this.start.next;
                if (0 <= t5)
                  for (; i5 < t5 && null !== n5; )
                    n5 = n5.next, ++i5;
                else
                  n5 = null;
                if (null === n5)
                  throw "Index out of bounds.";
                return n5;
              }, a.prototype.get = function(t5) {
                return 0 === t5 ? this.getFirst() : t5 === this.O - 1 ? this.getLast() : this.getFromFirst(t5);
              }, a.prototype.remove = function(t5) {
                return t5.prev && (t5.prev.next = t5.next), t5.next && (t5.next.prev = t5.prev), --this.O, t5;
              }, a.prototype.removeFirst = function() {
                return 0 < this.O && this.start.next ? this.remove(this.start.next) : null;
              }, a.prototype.removeLast = function() {
                return 0 < this.O && this.end.prev ? this.remove(this.end.prev) : null;
              }, a.prototype.removeAll = function() {
                this.start.next = this.end, this.end.prev = this.start, this.O = 0, this.g = 0;
              }, a.prototype.each = function(t5) {
                for (var i5 = this.start; i5.hasNext(); )
                  t5(i5 = i5.next);
              }, a.prototype.find = function(t5) {
                for (var i5 = this.start, n5 = false, e4 = null; i5.hasNext() && !n5; )
                  t5(i5 = i5.next) && (e4 = i5, n5 = true);
                return e4;
              }, a.prototype.map = function(t5) {
                for (var i5 = this.start, n5 = []; i5.hasNext(); )
                  t5(i5 = i5.next) && n5.push(i5);
                return n5;
              }, a.prototype.push = function(t5) {
                return this.addLast(t5);
              }, a.prototype.unshift = function(t5) {
                this.insertBefore(0 < this.O ? this.start.next : this.end, t5);
              }, a.prototype.pop = function() {
                return this.removeLast();
              }, a.prototype.shift = function() {
                return this.removeFirst();
              }, i4.LinkedList = a;
            }, function(t4, i4, n4) {
              var e3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, r3 = this && this.__spread || function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5 = t5.concat(e3(arguments[i5]));
                return t5;
              }, s3 = (Object.defineProperty(i4, "u", { value: true }), i4.ContextAPI = i4.suppressInstrumentation = i4.ROOT_CONTEXT = i4.BaseContext = i4.setSpan = i4.getSpanContext = i4.getSpan = i4.createContextKey = void 0, n4(17));
              function o3(t5) {
                return Symbol.for(t5);
              }
              var u2 = (i4.createContextKey = o3)("OpenTelemetry Context Key SUPPRESS_INSTRUMENTATION"), a = o3("OpenTelemetry Context Key SPAN");
              function c(t5) {
                return t5.getValue(a) || void 0;
              }
              function h(t5) {
                this._ = t5, this.S = new s3.StackContextManager();
              }
              i4.getSpan = c, i4.getSpanContext = function(t5) {
                return null == (t5 = c(t5)) ? void 0 : t5.context();
              }, i4.setSpan = function(t5, i5) {
                return t5.setValue(a, i5);
              }, i4.BaseContext = n4 = function t5(i5) {
                var n5 = this;
                n5.M = i5 ? new Map(i5) : /* @__PURE__ */ new Map(), n5.getValue = function(t6) {
                  return n5.M.get(t6);
                }, n5.setValue = function(i6, e4) {
                  var r4 = new t5(n5.M);
                  return r4.M.set(i6, e4), r4;
                }, n5.deleteValue = function(i6) {
                  var e4 = new t5(n5.M);
                  return e4.M.delete(i6), e4;
                };
              }, i4.ROOT_CONTEXT = new n4(), i4.suppressInstrumentation = function(t5) {
                return t5.setValue(u2, true);
              }, h.getInstance = function(t5) {
                return void 0 === t5 && (t5 = "context"), this.j || (this.j = new h(t5)), this.j;
              }, h.prototype.active = function() {
                return this.S.active();
              }, h.prototype.with = function(t5, i5, n5) {
                for (var e4, s4 = [], o4 = 3; o4 < arguments.length; o4++)
                  s4[o4 - 3] = arguments[o4];
                return (e4 = this.T()).with.apply(e4, r3([t5, i5, n5], s4));
              }, h.prototype.T = function() {
                return this.S;
              }, i4.ContextAPI = h;
            }, function(t4, i4, n4) {
              var e3, r3;
              Object.defineProperty(i4, "u", { value: true }), i4.INVALID_SPAN_CONTEXT = i4.INVALID_TRACEID = i4.INVALID_SPANID = i4.TraceFlags = i4.SpanKind = i4.SpanStatusCode = void 0, (e3 = i4.SpanStatusCode || (i4.SpanStatusCode = {}))[e3.UNSET = 0] = "UNSET", e3[e3.OK = 1] = "OK", e3[e3.ERROR = 2] = "ERROR", (e3 = i4.SpanKind || (i4.SpanKind = {}))[e3.INTERNAL = 0] = "INTERNAL", e3[e3.SERVER = 1] = "SERVER", e3[e3.CLIENT = 2] = "CLIENT", e3[e3.PRODUCER = 3] = "PRODUCER", e3[e3.CONSUMER = 4] = "CONSUMER", (r3 = e3 = i4.TraceFlags || (i4.TraceFlags = {}))[r3.NONE = 0] = "NONE", r3[r3.SAMPLED = 1] = "SAMPLED", i4.INVALID_SPANID = "0000000000000000", i4.INVALID_TRACEID = "00000000000000000000000000000000", i4.INVALID_SPAN_CONTEXT = { traceId: i4.INVALID_TRACEID, spanId: i4.INVALID_SPANID, traceFlags: e3.NONE };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.log = i4.ZegoLog = void 0, r3.prototype.log = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join("");
                console.log(n5);
              }, r3.prototype.debug = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join("");
                console.debug(n5);
              }, r3.prototype.info = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join("");
                console.info(n5);
              }, r3.prototype.warn = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join("");
                console.warn(n5);
              }, r3.prototype.error = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join("");
                console.error(n5);
              };
              var e3 = r3;
              function r3() {
              }
              e3 = new (i4.ZegoLog = e3)(), i4.log = e3;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.FAIL_TIME = i4.FAIL_MAX_COUNT = i4.FAIL_COUNT = i4.STORE_SIZE = i4.CACHE_SIZE = i4.BUCKET_CONFIG = i4.DEFAULT_CONFIG = void 0, i4.DEFAULT_CONFIG = { importantLevel: 0, reportSize: 3e3, reportNum: 10, bps: 16e3, netTimeout: 10 }, i4.BUCKET_CONFIG = { bucketSize: 1e4, tokensPerInterval: 1600 }, i4.CACHE_SIZE = { totalAvailCache: 102400, cacheMaxSize: 2e4, cacheDelPer: 0.2 }, i4.STORE_SIZE = { totalDBSize: 2048e3, storeDelPer: 0.2 }, i4.FAIL_COUNT = 5, i4.FAIL_MAX_COUNT = 10, i4.FAIL_TIME = 30;
            }, function(t4, i4, n4) {
              var e3 = this && this.__importDefault || function(t5) {
                return t5 && t5.u ? t5 : { default: t5 };
              }, r3 = (Object.defineProperty(i4, "u", { value: true }), i4.uuid = i4.calculateMemSize = i4.analyzeKey = i4.getCurrentTime = i4.getCurrentEnv = i4.getBrowser = void 0, n4(0)), s3 = e3(n4(31)), o3 = (i4.getBrowser = function() {
                var t5 = window.navigator.userAgent, i5 = null != window.ActiveXObject && -1 != t5.indexOf("MSIE"), n5 = -1 != t5.indexOf("Firefox"), e4 = null != window.opr, s4 = t5.indexOf("Chrome") && window.chrome, o4 = -1 != t5.indexOf("Safari") && -1 != t5.indexOf("Version");
                return t5 = t5.toLowerCase().match(/MicroMessenger/i) && "micromessenger" === t5.toLowerCase().match(/MicroMessenger/i)[0], i5 ? r3.ZEGO_BROWSER_TYPE.IE : n5 ? r3.ZEGO_BROWSER_TYPE.FIREFOX : e4 ? r3.ZEGO_BROWSER_TYPE.OPERA : s4 ? r3.ZEGO_BROWSER_TYPE.CHROME : o4 ? r3.ZEGO_BROWSER_TYPE.SAFARI : t5 ? r3.ZEGO_BROWSER_TYPE.WEIXIN : r3.ZEGO_BROWSER_TYPE.UNKOWN;
              }, i4.getCurrentEnv = function() {
                var t5 = window.navigator.userAgent;
                return new Promise(function(i5) {
                  -1 == t5.indexOf("MicroMessage") ? i5(r3.ZEGO_ENV.BROWSER) : wx.miniProgram.getEnv(function(t6) {
                  });
                });
              }, ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"]);
              i4.getCurrentTime = function() {
                var t5 = /* @__PURE__ */ new Date();
                return [t5.getFullYear() + "/", (o3[t5.getMonth() + 1] || t5.getMonth() + 1) + "/", (o3[t5.getDate()] || t5.getDate()) + " ", (o3[t5.getHours()] || t5.getHours()) + ":", (o3[t5.getMinutes()] || t5.getMinutes()) + ":", o3[t5.getSeconds()] || t5.getSeconds(), "." + t5.getTime() % 1e3].join("");
              }, i4.analyzeKey = function(t5) {
                return t5 = t5.split("_"), { level: Number(t5[0]), timestamp: t5[1], seq: t5[2] };
              }, i4.calculateMemSize = function(t5) {
                return s3.default(t5);
              }, i4.uuid = function(t5, i5) {
                var n5, e4, r4 = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), s4 = [];
                if (i5 = i5 || r4.length, t5)
                  for (n5 = 0; n5 < t5; n5++)
                    s4[n5] = r4[0 | Math.random() * i5];
                else
                  for (s4[8] = s4[13] = s4[18] = s4[23] = "-", s4[14] = "4", n5 = 0; n5 < 36; n5++)
                    s4[n5] || (e4 = 0 | 16 * Math.random(), s4[n5] = r4[19 == n5 ? 3 & e4 | 8 : e4]);
                return s4.join("");
              };
            }, function(t4, i4, n4) {
              var e3 = this && this.__values || function(t5) {
                var i5 = "function" == typeof Symbol && Symbol.iterator, n5 = i5 && t5[i5], e4 = 0;
                if (n5)
                  return n5.call(t5);
                if (t5 && "number" == typeof t5.length)
                  return { next: function() {
                    return { value: (t5 = t5 && e4 >= t5.length ? void 0 : t5) && t5[e4++], done: !t5 };
                  } };
                throw new TypeError(i5 ? "Object is not iterable." : "Symbol.iterator is not defined.");
              }, r3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o3 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o3.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o3;
              };
              function s3(t5) {
                var i5, n5, r4;
                if (null != t5 && Array.isArray(t5))
                  try {
                    for (var s4 = e3(t5), o3 = s4.next(); !o3.done; o3 = s4.next()) {
                      var u2 = o3.value;
                      if (null != u2)
                        if (r4) {
                          if (typeof u2 !== r4)
                            return false;
                        } else
                          r4 = typeof u2;
                    }
                  } catch (t6) {
                    i5 = { error: t6 };
                  } finally {
                    try {
                      o3 && !o3.done && (n5 = s4.return) && n5.call(s4);
                    } finally {
                      if (i5)
                        throw i5.error;
                    }
                  }
                return true;
              }
              Object.defineProperty(i4, "u", { value: true }), i4.sanitizeAttributes = i4.isAttributeValue = void 0, i4.isAttributeValue = s3, i4.sanitizeAttributes = function(t5) {
                var i5, n5, o3 = {};
                if (null != t5 && "object" == typeof t5)
                  try {
                    for (var u2 = e3(Object.entries(t5)), a = u2.next(); !a.done; a = u2.next()) {
                      var c = r3(a.value, 2), h = c[0], f = c[1];
                      s3(f) && (o3[h] = Array.isArray(f) ? f.slice() : f);
                    }
                  } catch (t6) {
                    i5 = { error: t6 };
                  } finally {
                    try {
                      a && !a.done && (n5 = u2.return) && n5.call(u2);
                    } finally {
                      if (i5)
                        throw i5.error;
                    }
                  }
                return o3;
              };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.IdGenerator = void 0;
              var e3 = Array(32);
              function r3(t5) {
                return function() {
                  for (var i5 = 0; i5 < 2 * t5; i5++)
                    e3[i5] = Math.floor(16 * Math.random()) + 48, 58 <= e3[i5] && (e3[i5] += 39);
                  return String.fromCharCode.apply(null, e3.slice(0, 2 * t5));
                };
              }
              i4.IdGenerator = function() {
                this.generateTraceId = r3(16), this.generateSpanId = r3(8), this.generateEventId = r3(4);
              };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.Resource = i4.SDK_INFO = i4.SemanticResourceAttributes = void 0, i4.SemanticResourceAttributes = { PROCESS_RUNTIME_NAME: "process.runtime.name", TELEMETRY_SDK_NAME: "telemetry.sdk.name", TELEMETRY_SDK_LANGUAGE: "telemetry.sdk.language", TELEMETRY_SDK_VERSION: "telemetry.sdk.version" }, i4.SDK_INFO = ((e3 = {})[i4.SemanticResourceAttributes.TELEMETRY_SDK_NAME] = "opentelemetry", e3[i4.SemanticResourceAttributes.PROCESS_RUNTIME_NAME] = "browser", e3[i4.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = "webjs", e3[i4.SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = i4.VERSION, e3), r3.empty = function() {
                return r3.EMPTY;
              }, r3.createTelemetrySDKResource = function() {
                var t5;
                return new r3(((t5 = {})[i4.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE] = i4.SDK_INFO[i4.SemanticResourceAttributes.TELEMETRY_SDK_LANGUAGE], t5[i4.SemanticResourceAttributes.TELEMETRY_SDK_NAME] = i4.SDK_INFO[i4.SemanticResourceAttributes.TELEMETRY_SDK_NAME], t5[i4.SemanticResourceAttributes.TELEMETRY_SDK_VERSION] = i4.SDK_INFO[i4.SemanticResourceAttributes.TELEMETRY_SDK_VERSION], t5));
              }, r3.prototype.merge = function(t5) {
                return t5 && Object.keys(t5.attributes).length ? new r3(Object.assign({}, this.attributes, t5.attributes)) : this;
              }, r3.EMPTY = new r3({});
              var e3 = r3;
              function r3(t5) {
                this.attributes = t5;
              }
              i4.Resource = e3;
            }, function(t4, i4, n4) {
              var e3 = this && this.__values || function(t5) {
                var i5 = "function" == typeof Symbol && Symbol.iterator, n5 = i5 && t5[i5], e4 = 0;
                if (n5)
                  return n5.call(t5);
                if (t5 && "number" == typeof t5.length)
                  return { next: function() {
                    return { value: (t5 = t5 && e4 >= t5.length ? void 0 : t5) && t5[e4++], done: !t5 };
                  } };
                throw new TypeError(i5 ? "Object is not iterable." : "Symbol.iterator is not defined.");
              }, r3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, s3 = (Object.defineProperty(i4, "u", { value: true }), i4.Span = void 0, n4(6)), o3 = n4(1), u2 = n4(2), a = n4(7), c = n4(18);
              function h(t5, i5, n5, e4, r4, s4, o4, c2) {
                void 0 === c2 && (c2 = []), this.attributes = {}, this.links = [], this.events = [], this.status = { code: u2.SpanStatusCode.UNSET }, this.endTime = 0, this.N = false, this.A = 0, this.exported = true, this.R = t5.context, this.reporter = t5.reporter, this.spanProcessor = t5.spanProcessor, this.parentTracer = t5, this.name = n5, this.level = e4, this.spanContext = r4, this.parentSpanId = o4, this.kind = s4, this.links = c2, this.startTime = Date.now(), this.resource = t5.resource, this.instrumentationLibrary = t5.instrumentationLibrary, this.I = t5.getActiveTraceParams(), this.k = new a.IdGenerator();
              }
              h.prototype.context = function() {
                return this.spanContext;
              }, h.prototype.setAttribute = function(t5, i5) {
                return null == i5 || 0 === t5.length || !s3.isAttributeValue(i5) || Object.keys(this.attributes).length >= this.I.numberOfAttributesPerSpan && !Object.prototype.hasOwnProperty.call(this.attributes, t5) || (this.attributes[t5] = i5), this;
              }, h.prototype.appendAttribute = function(t5, i5) {
                return null == i5 || 0 === t5.length || !s3.isAttributeValue(i5) || Object.keys(this.attributes).length >= this.I.numberOfAttributesPerSpan && !Object.prototype.hasOwnProperty.call(this.attributes, t5) || (this.attributes[t5] && Array.isArray(this.attributes[t5]) ? this.attributes[t5].push(i5) : this.attributes[t5] = [i5]), this;
              }, h.prototype.setAttributes = function(t5) {
                var i5, n5;
                try {
                  for (var s4 = e3(Object.entries(t5)), o4 = s4.next(); !o4.done; o4 = s4.next()) {
                    var u3 = r3(o4.value, 2);
                    this.setAttribute(u3[0], u3[1]);
                  }
                } catch (t6) {
                  i5 = { error: t6 };
                } finally {
                  try {
                    o4 && !o4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (i5)
                      throw i5.error;
                  }
                }
                return this;
              }, h.prototype.addEvent = function(t5, i5, n5) {
                this.events.length >= this.I.numberOfEventsPerSpan && this.events.shift();
                var e4 = this.k.generateEventId();
                return c.isTimeInput(i5) && (void 0 === n5 && (n5 = i5), i5 = void 0), void 0 === n5 && (n5 = c.hrTime()), this.events.push({ name: t5, attributes: i5, time: c.timeInputToHrTime(n5), event_id: e4 }), this;
              }, h.prototype.setStatus = function(t5) {
                return this.status = t5, this;
              }, h.prototype.updateName = function(t5) {
                return this.name = t5, this;
              }, h.prototype.end = function(t5) {
                var i5, n5 = this;
                this.D() || (this.N = true, this.resource = this.parentTracer.resource, this.spanProcessor.spanBeforeEnd && this.spanProcessor.spanBeforeEnd(this), i5 = c.getCurrentTime(), this.setAttribute("e_time_s", i5), this.endTime = Date.now(), this.A = this.endTime - this.startTime, this.R.with(o3.suppressInstrumentation(this.R.active()), function() {
                  var i6 = n5.P(n5);
                  n5.spanProcessor.spanEnd && n5.spanProcessor.spanEnd(i6, n5.level), i6.droped || false === t5 || (delete i6.droped, n5.reporter.report(JSON.stringify(i6), n5.level));
                }));
              }, h.prototype.spanReport = function() {
                var t5 = this.P(this);
                this.reporter.report(JSON.stringify(t5), this.level);
              }, h.prototype.isRecording = function() {
                return false === this.N;
              }, Object.defineProperty(h.prototype, "duration", { get: function() {
                return this.A;
              }, enumerable: false, configurable: true }), Object.defineProperty(h.prototype, "ended", { get: function() {
                return this.N;
              }, enumerable: false, configurable: true }), h.prototype.D = function() {
                return this.N;
              }, h.prototype.P = function(t5) {
                var i5 = [], n5 = (t5.events.forEach(function(t6) {
                  var n6 = {};
                  Object.keys(t6).forEach(function(i6) {
                    "name" === i6 && (n6[i6] = t6[i6]), "time" === i6 && (n6.timestamp = c.hrTimeToMilliseconds(t6[i6])), "attributes" === i6 && (n6.tags = t6[i6]);
                  }), i5.push(n6);
                }), []);
                return t5.links.forEach(function(t6) {
                  n5.push({ span_id: t6.context.spanId, trace_id: t6.context.traceId });
                }), { trace_id: t5.spanContext.traceId, parent_span_id: t5.parentSpanId, name: t5.name, span_id: t5.spanContext.spanId, kind: t5.kind, start_time: t5.startTime, end_time: t5.endTime, duration: t5.duration, logs: i5, tags: t5.attributes, links: n5 };
              }, i4.Span = h;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.ZegoSpan = void 0;
              var e3 = n4(3), r3 = n4(9);
              function s3(t5, i5) {
                this.spanId = t5, this.span = i5;
              }
              s3.prototype.setAttribute = function(t5, i5) {
                var n5 = this;
                return this.span ? this.span.setAttribute(t5, i5) : this.B().then(function() {
                  n5.span && n5.span.setAttribute(t5, i5);
                }), this;
              }, s3.prototype.setAttributes = function(t5) {
                var i5 = this;
                return this.span ? this.span.setAttributes(t5) : this.B().then(function() {
                  i5.span && i5.span.setAttributes(t5);
                }), this;
              }, s3.prototype.appendAttribute = function(t5, i5) {
                var n5 = this;
                return this.span ? this.span.appendAttribute(t5, i5) : this.B().then(function() {
                  n5.span && n5.span.appendAttribute(t5, i5);
                }), this;
              }, s3.prototype.addEvent = function(t5, i5, n5) {
                var e4 = this;
                return this.span ? this.span.addEvent(t5, i5, n5) : this.B().then(function() {
                  e4.span && e4.span.addEvent(t5, i5, n5);
                }), this;
              }, s3.prototype.setStatus = function(t5) {
                var i5 = this;
                return this.span ? this.span.setStatus(t5) : this.B().then(function() {
                  i5.span && i5.span.setStatus(t5);
                }), this;
              }, s3.prototype.updateName = function(t5) {
                var i5 = this;
                return this.span ? this.span.updateName(t5) : this.B().then(function() {
                  i5.span && i5.span.updateName(t5);
                }), this;
              }, s3.prototype.end = function(t5) {
                var i5 = this;
                void 0 === t5 && (t5 = true), this.span ? this.span.end(t5) : this.B(true).then(function() {
                  i5.span && i5.span.end(t5), i5.U();
                });
              }, s3.prototype.setSpanActive = function(t5) {
                this.activeCallback = t5;
              }, s3.prototype.setSpanEnd = function(t5) {
                this.endCallback = t5;
              }, s3.prototype.spanReport = function() {
                var t5;
                null != (t5 = this.span) && t5.spanReport();
              }, s3.prototype.U = function() {
                this.L() || (this.J(this.spanId), this.endCallback && this.endCallback(this.spanInfo));
              }, s3.prototype.L = function() {
                return "noop" === this.spanId;
              }, s3.prototype.B = function(t5) {
                var i5 = this;
                return void 0 === t5 && (t5 = false), new Promise(function(n5, e4) {
                  i5.store.getItem(i5.spanId).then(function(e5) {
                    var o3 = new r3.Span(s3.tracer, s3.tracer.context.active(), e5.name, e5.level, e5.spanContext, e5.kind, e5.parentSpanId, e5.links);
                    o3.setStatus(e5.status), o3.setAttributes(e5.attributes), i5.span = o3, i5.activeCallback && i5.activeCallback(i5.spanId, t5), n5();
                  }).catch(function(t6) {
                    e4(t6);
                  });
                });
              }, s3.prototype.J = function(t5) {
                var i5 = this;
                this.store.getItem(t5).then(function(n5) {
                  n5 && i5.store.removeItem(t5).then(function() {
                    e3.log.log("remove suc");
                  }).catch(function(t6) {
                    e3.log.warn("remove fail");
                  });
                });
              }, i4.ZegoSpan = s3;
            }, function(t4, i4, n4) {
              function e3(t5) {
                this.q = t5 = void 0 === t5 ? "" : t5, this.count = 0, this.isStarting = false, this.timer = 0, this.lastLogTime = 0, this.speed = 0, this.lastTime = 0;
              }
              Object.defineProperty(i4, "u", { value: true }), i4.SpeedUtil = void 0, e3.prototype.add = function(t5) {
                this.isStarting && (this.count += t5);
              }, e3.prototype.stop = function() {
                return this.isStarting = false, this.reset();
              }, e3.prototype.start = function(t5) {
                var i5 = this;
                void 0 === t5 && (t5 = 0), this.isStarting = true, this.count = 0, clearInterval(this.timer), t5 && (this.timer = window.setInterval(function() {
                  i5.speed = i5.count / t5, i5.count = 0;
                }, t5));
              }, e3.prototype.reset = function() {
                this.count = 0, clearInterval(this.timer), this.timer = 0, this.speed = 0;
              }, i4.SpeedUtil = e3;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.createZegoStore = i4.ZegoWechatMiniStore = i4.ZEGO_ENV = void 0;
              var e3, r3, s3 = n4(13), o3 = ((r3 = e3 = i4.ZEGO_ENV || (i4.ZEGO_ENV = {}))[r3.BROWSER = 0] = "BROWSER", r3[r3.WEIXINMINI = 1] = "WEIXINMINI", n4(3)), u2 = (a.prototype.getItem = function(t5) {
                var i5 = this;
                return new Promise(function(n5, e4) {
                  try {
                    n5(wx.getStorageSync(i5.keyPrefix + t5));
                  } catch (n6) {
                    e4(n6);
                  }
                });
              }, a.prototype.setItem = function(t5, i5) {
                var n5 = this;
                return new Promise(function(e4, r4) {
                  try {
                    wx.setStorageSync(n5.keyPrefix + t5, i5), e4();
                  } catch (e5) {
                    r4(e5);
                  }
                });
              }, a.prototype.removeItem = function(t5) {
                var i5 = this;
                return new Promise(function(n5, e4) {
                  try {
                    n5(wx.removeStorageSync(i5.keyPrefix + t5));
                  } catch (n6) {
                    e4(n6);
                  }
                });
              }, a.prototype.clear = function() {
                return new Promise(function(t5, i5) {
                  try {
                    wx.clearStorageSync(), t5();
                  } catch (t6) {
                    i5(t6);
                  }
                });
              }, a.prototype.keys = function() {
                var t5 = this;
                return new Promise(function(i5, n5) {
                  try {
                    var e4 = wx.getStorageInfoSync().keys, r4 = (o3.log.warn("keys", e4), []);
                    e4.forEach(function(i6) {
                      0 == i6.indexOf(t5.keyPrefix) && r4.push(i6.replace(t5.keyPrefix, ""));
                    }), o3.log.warn("keyArr", JSON.stringify(r4)), r4.sort(), i5(r4);
                  } catch (i6) {
                    n5(i6);
                  }
                });
              }, a);
              function a(t5) {
                this.storeName = t5, this.keyPrefix = t5 + "/";
              }
              i4.ZegoWechatMiniStore = u2, i4.createZegoStore = function(t5, i5, n5) {
                return i5 === e3.BROWSER ? s3.createInstance({ name: t5 + ":" + (n5 || "store") }) : new u2(t5);
              };
            }, function(i4, n4) {
              i4.exports = t3;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.DynamicCode = i4.ZegoTracer = i4.ZegoSpan = void 0;
              var e3 = n4(15), r3 = (Object.defineProperty(i4, "ZegoTracer", { enumerable: true, get: function() {
                return e3.ZegoTracer;
              } }), n4(46)), s3 = (Object.defineProperty(i4, "DynamicCode", { enumerable: true, get: function() {
                return r3.DynamicCode;
              } }), n4(10));
              Object.defineProperty(i4, "ZegoSpan", { enumerable: true, get: function() {
                return s3.ZegoSpan;
              } });
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.ZegoTracer = void 0;
              var e3 = n4(16), r3 = n4(22), s3 = n4(10), o3 = n4(23), u2 = n4(3), a = n4(1), c = n4(8), h = n4(24), f = n4(39), l = n4(12), d = n4(44), v = n4(45);
              function m(t5) {
                this.C = o3.DEFAULT_MAX_SPAN_SIZE, this.level = 0, this.log = new d.ZegoLog(), this.stateCenter = new v.StateCenter(this.log), this.stateCenter.proxyCtrl = t5;
              }
              m.prototype.init = function(t5) {
                t5.deflate ? (this.stateCenter.deflate = t5.deflate, "boolean" == typeof t5.keepLive && (this.stateCenter.keepLive = t5.keepLive), this.options = t5, this.name = t5.product, this.reporter = new h.ZegoDataReport(this.name, this.stateCenter), this.reporter.init({ appID: t5.appID, env: t5.env || 0, importantLevel: t5.importantLevel, levels: t5.levels, deviceID: t5.deviceID, bps: t5.bps, serverUrl: t5.serverUrl }), this.tracer = new e3.Tracer({ name: this.name, version: t5.version }, { resource: new c.Resource(t5.resources) }, this.reporter, { spanStart: t5.spanStart, spanBeforeEnd: t5.spanBeforeEnd, spanEnd: t5.spanEnd }), this.reporter.setProcessData(this.tracer.resource.attributes), this.F(this.options), this.dyStore = l.createZegoStore(t5.product + "_" + t5.appID + "_dy", t5.env || 0)) : console.error("init tracer failed. need input pako inflate function");
              }, m.prototype.F = function(t5) {
                this.rootSpan = this.tracer.startSpan("root", 0);
                var i5 = a.setSpan(this.tracer.context.active(), this.rootSpan);
                this.tracer.context.T().M = i5, this.rootSpan.end();
              }, m.prototype.createSpan = function(t5, i5, n5) {
                var e4, c2;
                return t5 <= this.level ? (e4 = a.setSpan(this.tracer.context.active(), n5 && n5.parent ? n5.parent.span : this.rootSpan), c2 = [], n5 && n5.linkSpans && (n5.linkSpans.forEach(function(t6) {
                  c2.push({ context: t6.span.context() });
                }), delete n5.linkSpans), i5 = this.tracer.startSpan(i5, t5, Object.assign({}, n5, { links: c2 }), e4), t5 = new s3.ZegoSpan(i5.spanContext.spanId, i5), s3.ZegoSpan.tracer = this.tracer, t5) : (u2.log.warn("createSpan level not fix"), new s3.ZegoSpan(o3.NOOP_SPAN_ID, new r3.NoopSpan()));
              }, m.prototype.setLogger = function(t5) {
                this.stateCenter.logger = t5;
              }, m.prototype.setTimeOffset = function(t5) {
                this.reporter.setTimeOffset(t5);
              }, m.prototype.setWaitNtpTimeout = function(t5) {
                this.reporter.setWaitNtpTimeout(t5);
              }, m.prototype.setLogLevel = function(t5) {
                return this.stateCenter.W.setLogLevel(t5);
              }, m.prototype.startReport = function(t5) {
                return this.reporter.startReport(t5);
              }, m.prototype.setConfig = function(t5) {
                this.reporter.setConfig(t5);
              }, m.prototype.loadJs = function(t5, i5, n5, e4, r4, s4) {
                return f.loadJS(t5, this.dyStore, i5, n5, e4, r4, s4);
              }, m.prototype.flush = function(t5) {
                this.reporter.flush(t5);
              }, m.prototype.setUnloadState = function(t5) {
                this.reporter.setUnloadState(t5);
              }, m.prototype.shutdown = function() {
                this.reporter.saveDataBeforeUnload();
              }, m.prototype.destroy = function() {
                this.reporter.uninit();
              }, m.prototype.setSampleConfig = function(t5) {
                this.level = t5.level || this.level;
              }, m.prototype.setResource = function(t5) {
                this.tracer.setResource(t5), this.reporter.setProcessData(this.tracer.resource.attributes);
              }, m.prototype.setNetStateCheck = function() {
                this.reporter.setNetStateCheck();
              }, m.prototype.getUnloadStatus = function() {
                return { uploadSpeed: this.reporter.uploadSpeed, increaseSpeed: this.reporter.speed, unreportLength: this.reporter.unreportDataByteLen };
              }, m.prototype.reportSize = function() {
                return this.reporter.traceType.MEM_I_API;
              }, i4.ZegoTracer = m;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.Tracer = void 0;
              var e3 = n4(6), r3 = n4(1), s3 = n4(2), o3 = n4(7), u2 = n4(8), a = n4(9), c = n4(19), h = n4(20);
              function f(t5, i5, n5, e4) {
                var s4 = h.mergeConfig(i5);
                this.I = s4.traceParams, this.k = new o3.IdGenerator(), this.resource = null != (s4 = i5.resource) ? s4 : u2.Resource.createTelemetrySDKResource(), this.instrumentationLibrary = t5, i5 = Math.random().toString(36).slice(-6), this.context = new r3.ContextAPI(i5), this.reporter = n5, this.spanProcessor = e4 || {};
              }
              f.prototype.startSpan = function(t5, i5, n5, o4) {
                var u3, h2, f2, l = ((t6, i6) => {
                  if (!t6.root)
                    return r3.getSpanContext(i6);
                })(n5 = void 0 === n5 ? {} : n5, o4 = void 0 === o4 ? this.context.active() : o4), d = this.k.generateSpanId(), v = (l && c.isSpanContextValid(l) ? (u3 = l.traceId, h2 = l.traceState, f2 = l.spanId) : u3 = this.k.generateTraceId(), l = null != (l = n5.kind) ? l : s3.SpanKind.INTERNAL, null != (v = n5.links) ? v : []);
                return n5 = e3.sanitizeAttributes(n5.attributes), (o4 = new a.Span(this, o4, t5, i5, { traceId: u3, spanId: d, traceFlags: s3.TraceFlags.NONE, traceState: h2 }, l, f2, v)).setAttributes(n5), this.spanProcessor.spanStart && this.spanProcessor.spanStart(o4), o4;
              }, f.prototype.setResource = function(t5) {
                this.resource = this.resource.merge(new u2.Resource(t5));
              }, f.prototype.getActiveTraceParams = function() {
                return this.I;
              }, i4.Tracer = f;
            }, function(t4, i4, n4) {
              var e3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, r3 = this && this.__spread || function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5 = t5.concat(e3(arguments[i5]));
                return t5;
              }, s3 = (Object.defineProperty(i4, "u", { value: true }), i4.StackContextManager = void 0, n4(1));
              function o3() {
                this.X = false, this.M = s3.ROOT_CONTEXT;
              }
              o3.prototype.K = function(t5, i5) {
                function n5() {
                  for (var n6 = this, r4 = [], s4 = 0; s4 < arguments.length; s4++)
                    r4[s4] = arguments[s4];
                  return e4.with(i5, function() {
                    return t5.apply(n6, r4);
                  });
                }
                void 0 === i5 && (i5 = s3.ROOT_CONTEXT);
                var e4 = this;
                return Object.defineProperty(n5, "length", { enumerable: false, configurable: true, writable: false, value: t5.length }), n5;
              }, o3.prototype.active = function() {
                return this.M;
              }, o3.prototype.bind = function(t5, i5) {
                return void 0 === (i5 = void 0 === i5 ? s3.ROOT_CONTEXT : i5) && (i5 = this.active()), "function" == typeof t5 ? this.K(t5, i5) : t5;
              }, o3.prototype.disable = function() {
                return this.M = s3.ROOT_CONTEXT, this.X = false, this;
              }, o3.prototype.enable = function() {
                return this.X || (this.X = true, this.M = s3.ROOT_CONTEXT), this;
              }, o3.prototype.with = function(t5, i5, n5) {
                for (var e4 = [], o4 = 3; o4 < arguments.length; o4++)
                  e4[o4 - 3] = arguments[o4];
                var u2 = this.M;
                this.M = t5 || s3.ROOT_CONTEXT;
                try {
                  return i5.call.apply(i5, r3([n5], e4));
                } finally {
                  this.M = u2;
                }
              }, i4.StackContextManager = o3;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.getCurrentTime = i4.isTimeInput = i4.hrTimeToMilliseconds = i4.hrTimeDuration = i4.timeInputToHrTime = i4.isTimeInputHrTime = i4.hrTime = void 0;
              var e3 = 9, r3 = Math.pow(10, e3), s3 = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"];
              function o3(t5) {
                t5 /= 1e3;
                var i5 = Math.trunc(t5);
                return [i5, Number((t5 - i5).toFixed(e3)) * r3];
              }
              function u2() {
                var t5, i5 = performance.timeOrigin;
                return "number" != typeof i5 ? (t5 = performance).timing && t5.timing.fetchStart : i5;
              }
              function a(t5) {
                var i5 = o3(u2()), n5 = (t5 = o3("number" == typeof t5 ? t5 : performance.now()), i5[0] + t5[0]);
                return r3 < (i5 = i5[1] + t5[1]) && (i5 -= r3, n5 += 1), [n5, i5];
              }
              function c(t5) {
                return Array.isArray(t5) && 2 === t5.length && "number" == typeof t5[0] && "number" == typeof t5[1];
              }
              i4.hrTime = a, i4.isTimeInputHrTime = c, i4.timeInputToHrTime = function(t5) {
                if (c(t5))
                  return t5;
                if ("number" == typeof t5)
                  return (t5 < u2() ? a : o3)(t5);
                if (t5 instanceof Date)
                  return o3(t5.getTime());
                throw TypeError("Invalid input type");
              }, i4.hrTimeDuration = function(t5, i5) {
                var n5 = i5[0] - t5[0];
                return (i5 = i5[1] - t5[1]) < 0 && (--n5, i5 += r3), [n5, i5];
              }, i4.hrTimeToMilliseconds = function(t5) {
                return Math.round(1e3 * t5[0] + t5[1] / 1e6);
              }, i4.isTimeInput = function(t5) {
                return c(t5) || "number" == typeof t5 || t5 instanceof Date;
              }, i4.getCurrentTime = function() {
                var t5 = /* @__PURE__ */ new Date();
                return [t5.getFullYear() + "/", (s3[t5.getMonth() + 1] || t5.getMonth() + 1) + "/", (s3[t5.getDate()] || t5.getDate()) + " ", (s3[t5.getHours()] || t5.getHours()) + ":", (s3[t5.getMinutes()] || t5.getMinutes()) + ":", s3[t5.getSeconds()] || t5.getSeconds(), "." + ("" + t5.getTime()).slice(-3)].join("");
              };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.isSpanContextValid = i4.isValidSpanId = i4.isValidTraceId = i4.INVALID_SPAN_CONTEXT = i4.INVALID_TRACEID = i4.INVALID_SPANID = void 0, n4 = n4(2);
              var e3 = /^([0-9a-f]{32})$/i, r3 = /^[0-9a-f]{16}$/i;
              function s3(t5) {
                return e3.test(t5) && t5 !== i4.INVALID_TRACEID;
              }
              function o3(t5) {
                return r3.test(t5) && t5 !== i4.INVALID_SPANID;
              }
              i4.INVALID_SPANID = "0000000000000000", i4.INVALID_TRACEID = "00000000000000000000000000000000", i4.INVALID_SPAN_CONTEXT = { traceId: i4.INVALID_TRACEID, spanId: i4.INVALID_SPANID, traceFlags: n4.TraceFlags.NONE }, i4.isValidTraceId = s3, i4.isValidSpanId = o3, i4.isSpanContextValid = function(t5) {
                return s3(t5.traceId) && o3(t5.spanId);
              };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.mergeConfig = void 0;
              var e3 = n4(21);
              i4.mergeConfig = function(t5) {
                var i5 = Object.assign({}, e3.DEFAULT_CONFIG, t5);
                return i5.traceParams = Object.assign({}, e3.DEFAULT_CONFIG.traceParams, t5.traceParams || {}), i5;
              };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.DEFAULT_CONFIG = void 0, i4.DEFAULT_CONFIG = { traceParams: { numberOfAttributesPerSpan: 128, numberOfLinksPerSpan: 128, numberOfEventsPerSpan: 128 } };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.NoopSpan = void 0;
              var e3 = n4(2);
              function r3(t5) {
                void 0 === t5 && (t5 = e3.INVALID_SPAN_CONTEXT), this.G = t5;
              }
              r3.prototype.context = function() {
                return this.G;
              }, r3.prototype.setAttribute = function(t5, i5) {
                return this;
              }, r3.prototype.appendAttribute = function(t5, i5) {
                return this;
              }, r3.prototype.setAttributes = function(t5) {
                return this;
              }, r3.prototype.addEvent = function(t5, i5, n5) {
                return this;
              }, r3.prototype.setStatus = function(t5) {
                return this;
              }, r3.prototype.updateName = function(t5) {
                return this;
              }, r3.prototype.end = function(t5) {
              }, r3.prototype.isRecording = function() {
                return false;
              }, r3.prototype.spanReport = function() {
              }, r3.prototype.recordException = function(t5, i5) {
              }, i4.NoopSpan = r3;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.NOOP_SPAN_ID = i4.SCHEDULED_DELAY_MILLIS = i4.DEFAULT_MAX_SPAN_SIZE = i4.readSpanKeys = void 0, i4.readSpanKeys = ["name", "level", "kind", "spanContext", "parentSpanId", "startTime", "endTime", "status", "attributes", "links", "events", "duration", "ended", "resource", "instrumentationLibrary"], i4.DEFAULT_MAX_SPAN_SIZE = 1e3, i4.SCHEDULED_DELAY_MILLIS = 3e3, i4.NOOP_SPAN_ID = "noop";
            }, function(t4, i4, n4) {
              var e3 = this && this.__assign || function() {
                return (e3 = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e4 = arguments.length; n5 < e4; n5++)
                    for (var r4 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r4) && (t5[r4] = i5[r4]);
                  return t5;
                }).apply(this, arguments);
              }, r3 = this && this.__awaiter || function(t5, i5, n5, e4) {
                return new (n5 = n5 || Promise)(function(r4, s4) {
                  function o4(t6) {
                    try {
                      a2(e4.next(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function u3(t6) {
                    try {
                      a2(e4.throw(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function a2(t6) {
                    var i6;
                    t6.done ? r4(t6.value) : ((i6 = t6.value) instanceof n5 ? i6 : new n5(function(t7) {
                      t7(i6);
                    })).then(o4, u3);
                  }
                  a2((e4 = e4.apply(t5, i5 || [])).next());
                });
              }, s3 = this && this.__generator || function(t5, i5) {
                var n5, e4, r4, s4 = { label: 0, sent: function() {
                  if (1 & r4[0])
                    throw r4[1];
                  return r4[1];
                }, trys: [], ops: [] }, o4 = { next: u3(0), throw: u3(1), return: u3(2) };
                return "function" == typeof Symbol && (o4[Symbol.iterator] = function() {
                  return this;
                }), o4;
                function u3(o5) {
                  return function(u4) {
                    var a2 = [o5, u4];
                    if (n5)
                      throw new TypeError("Generator is already executing.");
                    for (; s4; )
                      try {
                        if (n5 = 1, e4 && (r4 = 2 & a2[0] ? e4.return : a2[0] ? e4.throw || ((r4 = e4.return) && r4.call(e4), 0) : e4.next) && !(r4 = r4.call(e4, a2[1])).done)
                          return r4;
                        switch (e4 = 0, (a2 = r4 ? [2 & a2[0], r4.value] : a2)[0]) {
                          case 0:
                          case 1:
                            r4 = a2;
                            break;
                          case 4:
                            return s4.label++, { value: a2[1], done: false };
                          case 5:
                            s4.label++, e4 = a2[1], a2 = [0];
                            continue;
                          case 7:
                            a2 = s4.ops.pop(), s4.trys.pop();
                            continue;
                          default:
                            if (!(r4 = 0 < (r4 = s4.trys).length && r4[r4.length - 1]) && (6 === a2[0] || 2 === a2[0])) {
                              s4 = 0;
                              continue;
                            }
                            if (3 === a2[0] && (!r4 || a2[1] > r4[0] && a2[1] < r4[3]))
                              s4.label = a2[1];
                            else if (6 === a2[0] && s4.label < r4[1])
                              s4.label = r4[1], r4 = a2;
                            else {
                              if (!(r4 && s4.label < r4[2])) {
                                r4[2] && s4.ops.pop(), s4.trys.pop();
                                continue;
                              }
                              s4.label = r4[2], s4.ops.push(a2);
                            }
                        }
                        a2 = i5.call(t5, s4);
                      } catch (u5) {
                        a2 = [6, u5], e4 = 0;
                      } finally {
                        n5 = r4 = 0;
                      }
                    if (5 & a2[0])
                      throw a2[1];
                    return { value: a2[0] ? a2[1] : void 0, done: true };
                  };
                }
              }, o3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, u2 = this && this.__spread || function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5 = t5.concat(o3(arguments[i5]));
                return t5;
              }, a = this && this.__values || function(t5) {
                var i5 = "function" == typeof Symbol && Symbol.iterator, n5 = i5 && t5[i5], e4 = 0;
                if (n5)
                  return n5.call(t5);
                if (t5 && "number" == typeof t5.length)
                  return { next: function() {
                    return { value: (t5 = t5 && e4 >= t5.length ? void 0 : t5) && t5[e4++], done: !t5 };
                  } };
                throw new TypeError(i5 ? "Object is not iterable." : "Symbol.iterator is not defined.");
              }, c = (Object.defineProperty(i4, "u", { value: true }), i4.ZegoDataReport = void 0, n4(0)), h = n4(25), f = n4(30), l = n4(38), d = n4(5), v = n4(4), m = n4(11);
              function p(t5, i5) {
                this.H = i5, this.QUEUE_MAX = 100, this.cacheMaxSize = v.CACHE_SIZE.cacheMaxSize, this.cacheDelPer = v.CACHE_SIZE.cacheDelPer, this.state = "normal", this.forceDataTotalLen = 0, this.reportPackagesSize = 0, this.staticConfig = { totalAvailCache: v.CACHE_SIZE.totalAvailCache, totalDBSize: v.STORE_SIZE.totalDBSize, bps: 1600 }, this.dataInDb = [], this.listenerList = { progressUpdate: [], forceResult: [], postFail: [], dataDroped: [] }, this.tempBuffer = [], this.traceType = { MEM_I_API: 0, MEM_O_DONE: 0, MEM_O_DUMP: 0, MEM_I_LOAD: 0, DB_O_DROP: 0, DB_O_DONE: 0, DB_I_BACKUP: 0 }, this.isPaused = false, this.pro = "json", this.isLoadReportData = false, this.dropCount = 0, this.timeInterval = false, this.isWaitNtpTimeout = false, this.waitNtpTimeout = 2e3, this.postDataState = "", this.product = t5, this.reportMap = /* @__PURE__ */ new Map(), this.Y = new m.SpeedUtil("tracer increase"), null != (i5 = this.Y) && i5.start(3e3);
              }
              Object.defineProperty(p.prototype, "speed", { get: function() {
                return this.Y.speed;
              }, enumerable: false, configurable: true }), Object.defineProperty(p.prototype, "uploadSpeed", { get: function() {
                return this.zegoService.speed;
              }, enumerable: false, configurable: true }), Object.defineProperty(p.prototype, "unreportDataByteLen", { get: function() {
                return this.traceType.MEM_I_API + this.traceType.MEM_I_LOAD - this.traceType.MEM_O_DONE - this.traceType.MEM_O_DUMP;
              }, enumerable: false, configurable: true }), p.prototype.init = function(t5) {
                return r3(this, void 0, void 0, function() {
                  var i5 = this;
                  return s3(this, function(n5) {
                    switch (n5.label) {
                      case 0:
                        return this.config = e3(e3({}, v.DEFAULT_CONFIG), t5), this.config.env % 2 != 1 && this.V(), this.zegoService = new h.ZegoService(this.config.env || c.ZEGO_ENV.BROWSER, this.config.bps || v.DEFAULT_CONFIG.bps, this.product, this.pro, this.H), this.zegoService.setLogUrlParams({ product: this.product, signature: this.config.token || "", appid: this.config.appID, id_name: this.config.userID || "", deviceid: this.config.deviceID || "" }), this.config.serverUrl && this.zegoService.setLogServer(this.config.serverUrl), this.zegoService.setPostSucCallback(this.product, this.Z.bind(this)), this.zegoService.setPostFailCallback(this.product, function(t6) {
                          return r3(i5, void 0, void 0, function() {
                            return s3(this, function(i6) {
                              switch (i6.label) {
                                case 0:
                                  return this.H.logger.warn("zt.zd.i fail"), this.postDataState = "fail", this.dropCount++, this.$(t6), [4, this.tt(1)];
                                case 1:
                                  return i6.sent(), this.it("postFail"), [2];
                              }
                            });
                          });
                        }), this.nt(), this.storeHandler = new f.ZegoStoreHandler(this.product + "_" + this.config.appID + "_datareporter", d.uuid(6), this.config, this.traceType, this.staticConfig, this.H, this.product), this.storeHandler.setDropCallBack(function(t6) {
                          i5.traceType.DB_O_DROP += d.calculateMemSize(t6), i5.it("dataDroped", t6);
                        }), [4, this.storeHandler.loadPendingData()];
                      case 1:
                        return n5.sent(), this.storeHandler.init().then(function() {
                          i5.rt();
                        }).catch(function(t6) {
                          console.warn(t6);
                        }), this.et(), this.st(), this.ut(), [2];
                    }
                  });
                });
              }, p.prototype.uninit = function() {
                this.isWaitNtpTimeout = false, this.ntpTimer && (clearTimeout(this.ntpTimer), this.ntpTimer = null), this.Y.stop(), this.zegoService.destroy();
              }, p.prototype.setConfig = function(t5) {
                "object" == typeof t5 && "number" == typeof t5.bps && (this.config.bps = t5.bps, this.zegoService.setBps(this.config.bps)), "object" == typeof t5 && "number" == typeof t5.totalDBSize && (this.staticConfig.totalDBSize = t5.totalDBSize), "object" == typeof t5 && "string" == typeof t5.serverUrl && "" !== t5.serverUrl && (this.config.serverUrl = t5.serverUrl, this.zegoService.setLogServer(this.config.serverUrl));
              }, p.prototype.pause = function() {
                this.isPaused = true;
              }, p.prototype.resume = function() {
                this.isPaused = false;
                var t5 = this.pendingQueue.getPendingDataInfo();
                this.ot(t5.pendingDataSize, t5.size);
              }, p.prototype.startReport = function(t5) {
                var i5 = t5.get("userID"), n5 = t5.get("token");
                return !(!i5 || "string" != typeof i5 || !n5 || "string" != typeof n5 || (this.startCommonField = t5, this.config.userID = i5, this.config.token = n5, this.zegoService.setLogUrlParams({ product: this.product, signature: this.config.token, appid: this.config.appID, id_name: this.config.userID || "", deviceid: this.config.deviceID || "" }), this.ht() && this.ct(), (i5 = t5.get("serverUrl")) && (this.config.serverUrl = i5, this.zegoService.setLogServer(this.config.serverUrl)), this.isConfigOK(this.config) && (t5 = (n5 = this.pendingQueue.getPendingDataInfo()).pendingDataSize, this.ot(t5, n5.size)), 0));
              }, p.prototype.setTimeOffset = function(t5) {
                var i5 = this;
                this.clientTimeOffset = t5, this.tempBuffer.forEach(function(t6) {
                  (t6 = t6.data).tags.time_offset || (t6.tags.time_offset = i5.clientTimeOffset);
                }), this.config.userID && this.ct();
              }, p.prototype.setProcessData = function(t5) {
                this.H.processData = t5;
              }, p.prototype.on = function(t5, i5) {
                return this.ft(t5, i5);
              }, p.prototype.off = function(t5, i5) {
                return this.lt(t5, i5);
              }, p.prototype.report = function(t5, i5) {
                var n5;
                if (15e3 < t5.length)
                  return false;
                try {
                  n5 = JSON.parse(t5);
                } catch (t6) {
                  return false;
                }
                return this.H.W.debug(t5 + " " + i5), (null != n5 && n5.id_name || null != (t5 = null == n5 ? void 0 : n5.tags) && t5.id_name || this.config.userID) && this.ht() ? (null != n5 && n5.id_name || null != (t5 = null == n5 ? void 0 : n5.tags) && t5.id_name ? this.clientTimeOffset && (n5.tags.time_offset = this.clientTimeOffset) : (this.clientTimeOffset && (n5.tags.time_offset = this.clientTimeOffset), n5.tags.id_name = this.config.userID), this.vt(JSON.stringify(n5), i5)) : this.tempBuffer.push({ data: n5, level: i5 }), true;
              }, p.prototype.setUnloadState = function(t5) {
                this.unloadLevel = t5, this.state = "unload";
              }, p.prototype.vt = function(t5, i5) {
                var n5 = this, e4 = d.calculateMemSize(t5), r4 = (this.traceType.MEM_I_API += e4, this.Y.add(8 * e4), c.getSeq()), s4 = (/* @__PURE__ */ new Date()).getTime(), o4 = { seq: r4, content: t5, level: i5, timestamp: s4 };
                "unload" === this.state ? void 0 !== this.unloadLevel && i5 <= this.unloadLevel ? (this.storeHandler.saveDataToStorage(o4), this.pendingQueue.enqueue(o4, i5)) : this.H.W.debug("level is low") : i5 <= this.config.importantLevel ? (o4.key = i5 + "_" + s4 + "_" + r4, this.dataInDb.push(o4.key), this.storeHandler.storeData(o4).then(function(t6) {
                  n5.pendingQueue.enqueue(o4, i5), n5.traceType.DB_I_BACKUP += e4;
                }).catch(function(t6) {
                  var e5 = n5.dataInDb.findIndex(function(t7) {
                    return t7 === o4.key;
                  });
                  -1 < e5 && n5.dataInDb.splice(e5, 1), n5.pendingQueue.enqueue(o4, i5);
                })) : this.pendingQueue.enqueue(o4, i5), "force" === this.state && (s4 = d.calculateMemSize(t5), this.forceDataTotalLen += s4);
              }, p.prototype.ht = function() {
                return this.isWaitNtpTimeout || void 0 !== this.clientTimeOffset;
              }, p.prototype.ct = function() {
                var t5, i5 = this.tempBuffer.shift();
                i5 && (t5 = i5.data, i5 = i5.level, t5.tags.id_name = this.config.userID, this.vt(JSON.stringify(t5), i5), this.ct());
              }, p.prototype.isConfigOK = function(t5) {
                return "" !== t5.userID && "" !== t5.token && "" !== t5.server;
              }, p.prototype.testSize = function(t5) {
              }, p.prototype.flush = function(t5) {
                var i5;
                "force" !== this.state && (this.state = "force", i5 = 16e6, "object" == typeof t5 && "number" == typeof t5.bps && (i5 = t5.bps), this.zegoService.setBps(i5), this.forceDataTotalLen = this.storeHandler.storeSize + this.pendingQueue.pendingDataSize + this.reportPackagesSize, 0 < (i5 = (t5 = this.pendingQueue.getPendingDataInfo()).pendingDataSize) ? this.ot(i5, t5.size) : this.rt());
              }, p.prototype.setWaitNtpTimeout = function(t5) {
                this.waitNtpTimeout = t5;
              }, p.prototype.st = function() {
                var t5 = this;
                this.ntpTimer = setTimeout(function() {
                  t5.isWaitNtpTimeout = true, t5.config.userID && t5.ct();
                }, this.waitNtpTimeout);
              }, p.prototype.et = function() {
                var t5 = this, i5 = (this.H.W.debug("startReportTimer " + /* @__PURE__ */ new Date()), this.timeInterval = true, this.pendingQueue.getPendingDataInfo());
                this.ot(i5.pendingDataSize, i5.size), this.reportTimer = window.setTimeout(function() {
                  t5.et();
                }, 3e4);
              }, p.prototype.ut = function() {
                return r3(this, void 0, void 0, function() {
                  var t5, i5, n5 = this;
                  return s3(this, function(e4) {
                    switch (e4.label) {
                      case 0:
                        return i5 = this.pendingQueue.getPendingDataInfo(), t5 = i5.pendingDataSize, i5 = i5.size, t5 > this.config.reportSize || i5 > this.config.reportNum ? [4, this.ot(t5, i5)] : [3, 2];
                      case 1:
                        return e4.sent(), [3, 3];
                      case 2:
                        this.rt(), e4.label = 3;
                      case 3:
                        return this.checkDataTimer = window.setTimeout(function() {
                          n5.ut();
                        }, 15e3), [2];
                    }
                  });
                });
              }, p.prototype.V = function() {
                var t5 = this, i5 = navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i);
                navigator.userAgent.indexOf("Firefox"), window.addEventListener(i5 ? "pagehide" : "beforeunload", function() {
                  window.event && (window.event.cancelBubble = true), t5.saveDataBeforeUnload();
                });
              }, p.prototype.saveDataBeforeUnload = function() {
                var t5 = (t5 = this.pendingQueue.readStoreData(1)).storeArr, i5 = (this.storeHandler.resetCommonStore(), []);
                i5.push.apply(i5, u2(t5)), t5 = this.zegoService.readReportQueueData(), i5.push.apply(i5, u2(t5)), 0 < i5.length && this.storeHandler.storePendingData(i5);
              }, p.prototype.setNetStateCheck = function() {
                "fail" === this.postDataState && this.zegoService.handleNetConnect();
              }, p.prototype.Z = function(t5, i5, n5) {
                return r3(this, void 0, void 0, function() {
                  var n6, e4, r4, o4, u3, a2 = this;
                  return s3(this, function(s4) {
                    switch (s4.label) {
                      case 0:
                        for (this.H.W.debug("post suc"), this.postDataState = "suc", t5.forEach(function(t6) {
                          a2.traceType.MEM_O_DONE += d.calculateMemSize(t6.content);
                        }), n6 = function(i6) {
                          var n7 = t5[i6];
                          e4.storeHandler.removeDataItem(n7).then(function(t6) {
                            n7.key && a2.reportMap.delete(n7.key);
                          }).catch(function(t6) {
                          });
                        }, e4 = this, r4 = 0; r4 < t5.length; r4++)
                          n6(r4);
                        return this.reportPackagesSize -= i5, u3 = this.pendingQueue.getPendingDataInfo(), o4 = u3.pendingDataSize, u3 = u3.size, o4 > this.config.reportSize || u3 > this.config.reportNum ? [4, this.ot(o4, u3)] : [3, 2];
                      case 1:
                        return s4.sent(), [3, 3];
                      case 2:
                        this.rt(), s4.label = 3;
                      case 3:
                        return "force" === this.state && 0 == this.reportPackagesSize && (o4 = this.reportPackagesSize + this.pendingQueue.pendingDataSize + this.storeHandler.storeSize, u3 = 1 - Number((o4 / this.forceDataTotalLen).toFixed(2)), this.listenerList.progressUpdate && this.it("progressUpdate", u3), 0 < this.storeHandler.storeSize) && this.rt(function(t6) {
                          0 === t6 && (a2.state = "normal", a2.zegoService.setBps(a2.config.bps || v.DEFAULT_CONFIG.bps), a2.listenerList.forceSuccessCallback) && a2.it("forceResult", "SUCCESS");
                        }), [2];
                    }
                  });
                });
              }, p.prototype.ot = function(t5, i5) {
                return r3(this, void 0, void 0, function() {
                  var n5, e4, r4, o4, u3;
                  return s3(this, function(s4) {
                    switch (s4.label) {
                      case 0:
                        return t5 > this.config.reportSize || i5 > this.config.reportNum || ["force", "unload"].includes(this.state) || this.timeInterval ? (this.timeInterval = false, !this.isPaused && this.config.userID && this.config.token && this.config.serverUrl ? [3, 3] : (this.H.W.debug("isPaused " + this.isPaused + " " + this.userID + " " + this.config.token + " " + this.config.serverUrl), t5 >= this.cacheMaxSize || this.staticConfig.totalAvailCache <= 0 ? [4, this.tt(this.cacheDelPer)] : [3, 2])) : [3, 7];
                      case 1:
                        s4.sent(), s4.label = 2;
                      case 2:
                        return [2];
                      case 3:
                        return this.zegoService.reportAllowed() ? [3, 6] : (this.zegoService.resumeReport(), t5 >= this.cacheMaxSize || this.staticConfig.totalAvailCache <= 0 ? [4, this.tt(this.cacheDelPer)] : [3, 5]);
                      case 4:
                        s4.sent(), s4.label = 5;
                      case 5:
                        return [2];
                      case 6:
                        if (r4 = this.pendingQueue.readReportData(this.config.reportSize), n5 = r4.totalLen, r4 = r4.reportDataArr, n5 <= 0)
                          return [2];
                        for (r4 = this.dt(r4), this.zegoService.report(e4 = r4.packageArr, r4 = r4.packageLen, this.product, "unload" === this.state), o4 = 0; o4 < e4.length; o4++)
                          this.reportMap.set((u3 = e4[o4]).key, u3);
                        this.reportPackagesSize += r4, this.pendingQueue.refresh(n5), s4.label = 7;
                      case 7:
                        return [2];
                    }
                  });
                });
              }, p.prototype.nt = function() {
                var t5 = this;
                this.pendingQueue = new l.PendingQueue(this.config.levels, this.product, this.staticConfig, this.H), this.pendingQueue.setListener({ enCallback: function(i5, n5, e4) {
                  return r3(t5, void 0, void 0, function() {
                    return s3(this, function(t6) {
                      switch (t6.label) {
                        case 0:
                          return [4, this.ot(e4, n5)];
                        case 1:
                          return t6.sent(), [2];
                      }
                    });
                  });
                } });
              }, p.prototype.yt = function() {
                var t5 = this;
                this.storeHandler.readStoreDataItem().then(function(i5) {
                  var n5 = d.calculateMemSize(i5.content);
                  t5.traceType.MEM_I_LOAD += n5, t5.pendingQueue.enqueue(i5, i5.level);
                }).catch(function(t6) {
                });
              }, p.prototype.tt = function(t5) {
                return r3(this, void 0, void 0, function() {
                  var i5, n5, e4, r4, o4, u3, c2, h2, f2;
                  return s3(this, function(l2) {
                    switch (l2.label) {
                      case 0:
                        n5 = this.pendingQueue.readStoreData(t5), i5 = n5.totalLen, n5 = n5.storeArr, e4 = function(t6) {
                          var n6, e5;
                          return s3(this, function(s4) {
                            switch (s4.label) {
                              case 0:
                                return s4.trys.push([0, 2, , 3]), [4, r4.wt(t6, i5)];
                              case 1:
                                return s4.sent(), n6 = t6.level + "_" + t6.timestamp + "_" + t6.seq, -1 < (e5 = r4.dataInDb.findIndex(function(t7) {
                                  return t7 === n6;
                                })) && r4.dataInDb.splice(e5, 1), [3, 3];
                              case 2:
                                return s4.sent(), [3, 3];
                              case 3:
                                return [2];
                            }
                          });
                        }, r4 = this, l2.label = 1;
                      case 1:
                        l2.trys.push([1, 6, 7, 8]), o4 = a(n5), u3 = o4.next(), l2.label = 2;
                      case 2:
                        return u3.done ? [3, 5] : [5, e4(c2 = u3.value)];
                      case 3:
                        l2.sent(), l2.label = 4;
                      case 4:
                        return u3 = o4.next(), [3, 2];
                      case 5:
                        return [3, 8];
                      case 6:
                        return c2 = l2.sent(), h2 = { error: c2 }, [3, 8];
                      case 7:
                        try {
                          u3 && !u3.done && (f2 = o4.return) && f2.call(o4);
                        } finally {
                          if (h2)
                            throw h2.error;
                        }
                        return [7];
                      case 8:
                        return [2];
                    }
                  });
                });
              }, p.prototype.$ = function(t5) {
                var i5 = this;
                t5.length && t5.forEach(function(t6) {
                  i5.storeHandler.storeData(t6).then(function(n5) {
                    var e4 = d.calculateMemSize(t6.content);
                    i5.traceType.MEM_O_DUMP += e4;
                  }).catch(function(t7) {
                  });
                });
              }, p.prototype.wt = function(t5, i5) {
                var n5 = this;
                return new Promise(function(i6, e4) {
                  return r3(n5, void 0, void 0, function() {
                    var n6;
                    return s3(this, function(r4) {
                      switch (r4.label) {
                        case 0:
                          return r4.trys.push([0, 2, , 3]), [4, this.storeHandler.storeData(t5)];
                        case 1:
                          return r4.sent(), n6 = d.calculateMemSize(t5.content), this.traceType.MEM_O_DUMP += n6, i6(), [3, 3];
                        case 2:
                          return n6 = r4.sent(), e4(n6), [3, 3];
                        case 3:
                          return [2];
                      }
                    });
                  });
                });
              }, p.prototype.rt = function(t5) {
                var i5 = this;
                this.storeHandler.storeSize <= 0 || this.isLoadReportData || (this.isLoadReportData = true, this.storeHandler.loadDBData(this.config.reportSize, 5, Math.floor(this.cacheMaxSize / 3), function(t6) {
                  return -1 < i5.dataInDb.indexOf(t6);
                }).then(function(n5) {
                  i5.isLoadReportData = false, n5.datas.forEach(function(t6) {
                    var n6;
                    i5.reportMap.has(t6.key) || i5.pendingQueue.findInQueue(t6) || (n6 = d.calculateMemSize(t6.content), i5.traceType.MEM_I_LOAD += n6, i5.pendingQueue.enqueue(t6, t6.level), i5.dataInDb.push(t6.key));
                  }), t5 && t5(n5.len);
                }).catch(function(t6) {
                  i5.isLoadReportData = false;
                }));
              }, p.prototype.dt = function(t5) {
                var i5 = this, n5 = 0;
                return t5.forEach(function(t6) {
                  var e4, r4, s4 = JSON.parse(t6.content);
                  if (i5.startCommonField)
                    try {
                      for (var u3 = a(i5.startCommonField), c2 = u3.next(); !c2.done; c2 = u3.next()) {
                        var h2 = o3(c2.value, 2), f2 = h2[0];
                        "userID" !== f2 && "token" !== f2 && "serverUrl" !== f2 && (s4[f2] = h2[1]);
                      }
                    } catch (t7) {
                      e4 = { error: t7 };
                    } finally {
                      try {
                        c2 && !c2.done && (r4 = u3.return) && r4.call(u3);
                      } finally {
                        if (e4)
                          throw e4.error;
                      }
                    }
                  n5 += d.calculateMemSize(s4), t6.content = JSON.stringify(s4);
                }), { packageArr: t5, packageLen: n5 };
              }, p.prototype.ft = function(t5, i5) {
                return !!this.listenerList[t5] && "function" == typeof i5 && (-1 == this.listenerList[t5].indexOf(i5) && this.listenerList[t5].push(i5), true);
              }, p.prototype.lt = function(t5, i5) {
                var n5;
                return !!this.listenerList[t5] && (n5 = this.listenerList[t5], i5 ? n5.splice(n5.indexOf(i5), 1) : this.listenerList[t5] = [], true);
              }, p.prototype.it = function(t5) {
                for (var i5 = [], n5 = 1; n5 < arguments.length; n5++)
                  i5[n5 - 1] = arguments[n5];
                this.listenerList[t5] && this.listenerList[t5].forEach(function(t6) {
                  try {
                    t6.apply(void 0, u2(i5));
                  } catch (t7) {
                  }
                });
              }, i4.ZegoDataReport = p;
            }, function(t4, i4, n4) {
              var e3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, r3 = this && this.__spread || function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5 = t5.concat(e3(arguments[i5]));
                return t5;
              }, s3 = (Object.defineProperty(i4, "u", { value: true }), i4.ZegoService = void 0, n4(0)), o3 = n4(26), u2 = n4(29), a = n4(4);
              function c(t5, i5, n5, e4, r4) {
                var u3, a2, c2, h = this;
                this.bt = t5, this.gt = n5, this.Ot = e4, this.H = r4, this.isDestroy = false, this.packageLen = 0, this.packagesDataSize = 0, this.PACKAGE_MAX_LEN = 5, this.msgID = 0, this.logUploadTimer = null, this.logUploadInterval = 1e4, this.logCacheSend = [], this.logCacheMax = 100, this._t = 1e3, this.postSucCallbackList = {}, this.postFailCallbackList = {}, this.failCount = 0, this.failStartTime = 0, this.netWorkFail = false, this.networkState = s3.ENUM_NETWORK_STATE.online, this.state = 0, this.St = (a2 = u3 = 0, c2 = function() {
                  a2 = u3 = 0;
                }, { onOpen: function() {
                  u3 = performance.now();
                }, onClose: function() {
                  0 < u3 && (performance.now() - u3 < 100 ? (a2++, h.H.logger.info("zt.rzs.wfsc frequently shutdown.")) : c2());
                }, isOutOfMaxTimes: function() {
                  return 10 <= a2;
                } }), this.Mt = { offline: function() {
                  h.networkState = s3.ENUM_NETWORK_STATE.offline;
                }, online: function(t6) {
                  h.handleNetConnect();
                } }, this.bindWindowListener(), this.networkState = s3.ENUM_NETWORK_STATE.online, this.service = new o3.LogService(t5, n5, e4, r4), this.service.onHbTimeout = function() {
                  h.H.logger.warn("zt.rzs.ohbto hb timeout."), h.socketReconnect(true, true);
                }, this.setBps(i5), this.reportQueue = new s3.Queue();
              }
              Object.defineProperty(c.prototype, "speed", { get: function() {
                return this.service.speed;
              }, enumerable: false, configurable: true }), c.prototype.destroy = function() {
                this.Et(), this.logUploadTimer && clearTimeout(this.logUploadTimer), this.reportQueue.clear(), window.removeEventListener("offline", this.Mt.offline), window.removeEventListener("online", this.Mt.online), this.isDestroy = true;
              }, c.prototype.bindWindowListener = function() {
                window.addEventListener("offline", this.Mt.offline), window.addEventListener("online", this.Mt.online);
              }, c.prototype.handleNetConnect = function() {
                var t5;
                this.networkState = s3.ENUM_NETWORK_STATE.online, 1 === this.logType ? this.socketReconnect() : (t5 = this.url, this.url = "", this.setLogServer(t5)), this.netWorkFail = false;
              }, c.prototype.setLogServer = function(t5) {
                try {
                  return t5.startsWith("wss:") || t5.startsWith("ws:") ? (this.logType = 1, this.jt(t5)) : t5.startsWith("https:") || t5.startsWith("http:") ? (this.logType = 2, this.Tt(t5)) : this.logType = 0, true;
                } catch (t6) {
                  return false;
                }
              }, c.prototype.setLogUrlParams = function(t5) {
                this.logParams = t5;
              }, c.prototype.jt = function(t5) {
                var i5, n5 = this;
                this.url != t5 && (this.url = t5) && (this.Et(), this.logParams.id_name) && (this.St.isOutOfMaxTimes() ? (this.H.logger.warn("zt.rzs.owsls frequently shutdown too many times. cannot create socket anymore."), this.state = 0) : (this.state = 1, i5 = t5 + "?product=" + this.logParams.product + "&appid=" + this.logParams.appid + "&token=" + encodeURIComponent(this.logParams.signature) + "&deviceid=" + this.logParams.deviceid + "&id_name=" + this.logParams.id_name, this.service.createSocket(i5), this.H.logger.info("zt.rzs.owsls socket start " + t5), this.service.openHandler(function() {
                  n5.service.onPush(), n5.service.startCheck(), n5.H.logger.info("zt.rzs.owsls socket open"), n5.openHandler(), n5.St.onOpen();
                }), this.service.closeHandler(function(t6) {
                  n5.H.logger.warn("zt.rzs.owsls socket close " + JSON.stringify(t6.code || t6)), n5.state = 0, n5.service.closeSocket(), n5.St.onClose(), n5.service.url && n5.H.keepLive && n5.socketReconnect(false);
                }), this.service.errorHandler(function(t6) {
                  n5.H.logger.warn("zt.rzs.owsls socket error " + JSON.stringify(t6.code || t6)), n5.state = 0, n5.service.closeSocket(), n5.service.url && n5.H.keepLive && n5.socketReconnect(false);
                })));
              }, c.prototype.Et = function() {
                this.service.closeSocket(true), this.Nt && (clearTimeout(this.Nt), this.Nt = void 0);
              }, c.prototype.Tt = function(t5) {
                (this.url = t5) && this.At();
              }, c.prototype.At = function() {
                this.logUploadTimer && (clearInterval(this.logUploadTimer), this.logUploadTimer = null);
              }, c.prototype.Rt = function(t5, i5, n5, e4) {
                this.bt === s3.ZEGO_ENV.BROWSER ? this.It(t5, i5, n5, e4) : this.SendHttpsLogWeChatMini(t5, i5, n5, e4);
              }, c.prototype.It = function(t5, i5, n5, e4) {
                var r4 = this, s4 = (t5 = JSON.stringify({ body: { data: t5 } }), new XMLHttpRequest());
                s4.onreadystatechange = function() {
                  if (4 == s4.readyState)
                    if (200 == s4.status) {
                      if (0 != s4.responseText.length)
                        try {
                          var t6 = JSON.parse(s4.responseText).interval;
                          "number" == typeof t6 && r4.logUploadInterval !== t6 && r4.Tt(r4.url), n5 && n5();
                        } catch (t7) {
                          e4 && e4();
                        }
                    } else
                      e4 && e4();
                }, s4.open("POST", this.url, true), s4.send(t5);
              }, c.prototype.SendHttpsLogWeChatMini = function(t5, i5, n5, e4) {
                var r4 = this;
                t5 = { appid: this.logParams.appid + "", timestamp: (/* @__PURE__ */ new Date()).getTime() + "", token: this.logParams.signature, id_name: this.logParams.id_name, product: this.logParams.product, message_id: ++this.msgID, req_sdk: 1, s: JSON.stringify({ speed_detail: t5 }) }, wx.request({ url: this.url, data: JSON.stringify(t5), method: "POST", success: function(t6) {
                  0 != t6.data.length && ("number" == typeof (t6 = t6 && t6.data && t6.data.interval) && r4.logUploadInterval !== t6 && r4.Tt(r4.url), n5) && n5();
                }, fail: function(t6) {
                  e4 && e4();
                } });
              }, c.prototype.openHandler = function() {
                this.state = 2, this.startReport();
              }, c.prototype.setPostSucCallback = function(t5, i5) {
                this.postSucCallbackList[t5] = i5;
              }, c.prototype.setPostFailCallback = function(t5, i5) {
                this.postFailCallbackList[t5] = i5;
              }, c.prototype.reportAllowed = function() {
                return this.packageLen < this.PACKAGE_MAX_LEN;
              }, c.prototype.report = function(t5, i5, n5, e4) {
                this.packageLen++, this.packagesDataSize += i5, this.reportQueue.enqueue({ reportDatas: t5, dataLen: i5, product: n5 }), this.netWorkFail = false, this.failCount = 0, this.failStartTime = 0, this.startReport(e4);
              }, c.prototype.setBps = function(t5) {
                this.tokenBucket = new u2.TokenBucket(a.BUCKET_CONFIG.bucketSize, t5 / 8, "sec");
              }, c.prototype.startReport = function(t5) {
                var i5, n5, e4, r4, s4 = this;
                this.isDestroy || 1 === this.logType && this.socketReconnect() || 0 < this.reportQueue.size() && (i5 = this.reportQueue.dequeue(), n5 = i5.reportDatas, e4 = i5.dataLen, r4 = i5.product, /* @__PURE__ */ new Date(), t5 ? this.sendReport(n5, e4, r4) : this.tokenBucket.removeTokens(e4, function() {
                  s4.sendReport(n5, e4, r4);
                }));
              }, c.prototype.kt = function() {
                if (this.failCount <= 0)
                  return false;
                1 == this.failCount && (this.failStartTime = Date.now());
                var t5 = (Date.now() - this.failStartTime) / 1e3;
                return this.failCount >= a.FAIL_COUNT && t5 > a.FAIL_TIME || this.failCount >= a.FAIL_MAX_COUNT;
              }, c.prototype.sendReport = function(t5, i5, n5) {
                var e4 = this;
                this.reportData(t5, i5, n5, function() {
                  e4.failCount = 0, e4.failStartTime = 0, e4.packageLen--, e4.packagesDataSize -= i5, e4.postSucCallbackList[n5] && e4.postSucCallbackList[n5](t5, i5, n5);
                }, function(r4) {
                  var s4;
                  e4.reportQueue.enqueue({ reportDatas: t5, dataLen: i5, product: n5 }), e4.failCount++, e4.kt() ? (e4.netWorkFail = true, s4 = e4.decodeReportQueue(), Object.keys(e4.postFailCallbackList).forEach(function(t6) {
                    e4.postFailCallbackList[n5](s4[t6]);
                  })) : e4.startReport();
                });
              }, c.prototype.resumeReport = function() {
                true === this.netWorkFail && this.networkState === s3.ENUM_NETWORK_STATE.online && (this.netWorkFail = false, this.startReport());
              }, c.prototype.reportData = function(t5, i5, n5, e4, r4) {
                var o4 = this, u3 = [];
                t5.forEach(function(t6) {
                  u3.push(JSON.parse(t6.content));
                }), 1 == this.logType ? this.networkState === s3.ENUM_NETWORK_STATE.offline ? r4 && r4(s3.errorList.BROKEN) : this.service.sendMessage("report", u3, e4, function(t6) {
                  var i6;
                  0 === o4.state && t6 === s3.SOCKET_DISCONNECT && (i6 = o4.url, o4.url = "", o4.setLogServer(i6)), r4 && r4(t6);
                }) : 2 == this.logType && this.Rt(u3, i5, e4, function() {
                  r4 && r4();
                });
              }, c.prototype.unsigned2signed = function(t5) {
                var i5 = parseInt(t5, 10);
                if (256 < i5)
                  return i5 % 256;
                for (var n5 = []; 0 < i5; )
                  n5.push(i5 % 2 != 0 ? 1 : 0), i5 = Number(i5 / 2);
                for (n5.reverse(); n5.length < 8; )
                  n5.unshift(0);
                var e4 = "";
                if (1 == (n5 = n5.join("")).substr(0, 1)) {
                  for (var r4 = 1; r4 < n5.length; r4++)
                    1 == n5.substr(r4, 1) ? e4 += 0 : e4 += 1;
                  return "-" + (parseInt(e4, 2) + 1);
                }
                for (r4 = 0; r4 < n5.length; r4++)
                  e4 += n5.substr(r4, 1);
                return parseInt(e4, 2);
              }, c.prototype.decodeReportQueue = function() {
                for (var t5 = {}, i5 = this.reportQueue.size(), n5 = 0; n5 < i5; n5++) {
                  var e4 = this.reportQueue.dequeue(), s4 = e4.reportDatas, o4 = e4.dataLen;
                  t5[e4 = e4.product] || (t5[e4] = []), t5[e4] = r3(t5[e4], s4), this.reportQueue.enqueue({ reportDatas: s4, dataLen: o4, product: e4 });
                }
                return t5;
              }, c.prototype.readReportQueueData = function() {
                for (var t5 = [], i5 = this.reportQueue.size(), n5 = 0; n5 < i5; n5++) {
                  var e4 = this.reportQueue.dequeue().reportDatas;
                  t5.push.apply(t5, r3(e4));
                }
                return t5;
              }, c.prototype.socketReconnect = function(t5, i5) {
                var n5 = this, e4 = (void 0 === t5 && (t5 = true), (i5 = void 0 !== i5 && i5) || 0 === this.state);
                return this.Nt && !t5 || e4 && (t5 && this.Nt && (clearTimeout(this.Nt), this.Nt = void 0), this.Nt || (this.Nt = setTimeout(function() {
                  var t6;
                  !n5.isDestroy && (n5.Nt && (clearTimeout(n5.Nt), n5.Nt = void 0), i5 || 0 === n5.state) && (t6 = n5.url, n5.url = "", n5.setLogServer(t6));
                }, t5 ? 0 : 5e3))), e4;
              }, i4.ZegoService = c;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.LogService = void 0;
              var e3 = n4(27), r3 = n4(4), s3 = n4(0);
              function o3(t5, i5, n5, r4) {
                this.bt = t5, this.gt = i5, this.Ot = n5, this.H = r4, this.Dt = new e3.ZegoSocketService(this.bt, this.gt, this.Ot, this.H), this.xt = 0, this.Pt = {}, this.Bt = void 0, this.checkHbTimer = void 0;
              }
              Object.defineProperty(o3.prototype, "url", { get: function() {
                return this.Ut;
              }, enumerable: false, configurable: true }), Object.defineProperty(o3.prototype, "speed", { get: function() {
                return this.Dt.speed;
              }, enumerable: false, configurable: true }), o3.prototype.zt = function(t5) {
                var i5, n5, e4 = this, r4 = this.Dt.sendCommandMap[t5.messageId || (null == (r4 = null == t5 ? void 0 : t5.data) ? void 0 : r4.message_id)];
                null != r4 && (n5 = r4.v, delete this.Dt.sendCommandMap[t5.messageId || (null == (i5 = null == t5 ? void 0 : t5.data) ? void 0 : i5.message_id)], this.Dt.sendCommandList.remove(r4), 0 === t5.code ? setTimeout(function() {
                  n5 && null != n5.success && n5.success(t5, e4.xt);
                }, 0) : setTimeout(function() {
                  n5 && null != n5.error && n5.error(t5, e4.xt);
                }, 0));
              }, o3.prototype.onPush = function() {
                var t5 = this;
                this.Dt.onMessage = function(i5) {
                  t5.H.keepLive && (t5.Bt = performance.now(), t5.startHbTimer()), t5.zt(i5);
                };
              }, o3.prototype.closeHandler = function(t5) {
                this.Dt.closeHandler(function(i5) {
                  t5(i5);
                });
              }, o3.prototype.openHandler = function(t5) {
                var i5 = this;
                this.Dt.openHandler(function() {
                  i5.H.keepLive && (i5.Bt = performance.now(), i5.startHbTimer()), t5 && t5();
                });
              }, o3.prototype.errorHandler = function(t5) {
                this.Dt.errorHandler(function(i5) {
                  t5(i5);
                });
              }, o3.prototype.Lt = function(t5) {
                return { Protocol: "req", cmd: t5, appid: 123, seq: ++this.xt, session_id: "" };
              }, o3.prototype.startCheck = function() {
                this.Dt.startCheck();
              }, o3.prototype.stopCheck = function() {
                this.Dt.stopCheck();
              }, o3.prototype.isDisConnect = function() {
                return !this.Dt || this.Dt.isDisConnect();
              }, o3.prototype.createSocket = function(t5) {
                this.Dt.createSocket(t5), this.Pt = {}, this.Ut = t5;
              }, o3.prototype.closeSocket = function(t5) {
                void 0 === t5 && (t5 = false), this.Bt = void 0, this.clearHbTimer(), this.Dt.closeSocket(), t5 && (this.Ut = void 0);
              }, o3.prototype.sendMessage = function(t5, i5, n5, e4, o4) {
                return this.Dt.isDisConnect() ? (e4 && e4(s3.SOCKET_DISCONNECT), 0) : (o4 = o4 || this.Lt(t5), this.Dt.sendMessage(o4, i5, n5, e4, { timeOut: 1e3 * r3.DEFAULT_CONFIG.netTimeout }));
              }, o3.prototype.on = function(t5, i5) {
                this.Pt[t5] = i5;
              }, o3.prototype.clearHbTimer = function() {
                this.checkHbTimer && (clearTimeout(this.checkHbTimer), this.checkHbTimer = void 0);
              }, o3.prototype.startHbTimer = function() {
                var t5 = this;
                this.clearHbTimer(), this.Dt.isDisConnect() || (void 0 !== this.Bt && 15e3 < performance.now() - this.Bt ? this.Ut && this.onHbTimeout() : this.checkHbTimer = setTimeout(function() {
                  t5.Dt.isDisConnect() || (t5.sendMessage("report", []), t5.startHbTimer());
                }, 5e3));
              }, o3.prototype.onHbTimeout = function() {
              }, i4.LogService = o3;
            }, function(t4, i4, n4) {
              var e3 = this && this.__assign || function() {
                return (e3 = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e4 = arguments.length; n5 < e4; n5++)
                    for (var r4 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r4) && (t5[r4] = i5[r4]);
                  return t5;
                }).apply(this, arguments);
              }, r3 = (Object.defineProperty(i4, "u", { value: true }), i4.ZegoSocketService = void 0, n4(28)), s3 = n4(0), o3 = n4(11);
              function u2(t5, i5, n5, e4) {
                this.gt = i5, this.Ot = n5, this.H = e4, this.Jt = null, this.sendCommandList = new s3.LinkedList(), this.sendCommandMap = {}, this.qt = 100, this.Ct = 3e4, this.Ft = 2e3, this.Mt = {}, this.ENV = t5, this.Y = new o3.SpeedUtil("tracer upload");
              }
              Object.defineProperty(u2.prototype, "speed", { get: function() {
                return this.Y.speed;
              }, enumerable: false, configurable: true }), u2.prototype.createSocket = function(t5) {
                var i5 = this;
                this.Jt = r3.createZegoWebSocket(t5, this.ENV, this.H.proxyCtrl), this.Jt.onclose = function(t6) {
                  i5.Mt.close && i5.Mt.close(t6);
                }, this.Jt.onerror = function(t6) {
                  i5.Mt.error && i5.Mt.error(t6);
                }, this.Jt.binaryType = "arraybuffer", this.Y.start(3e3);
              }, u2.prototype.closeSocket = function() {
                this.Jt && (this.Jt.onclose = null, this.Jt.onerror = null, this.Jt.close(), this.Jt = null, this.Y.stop());
              }, u2.prototype.isDisConnect = function() {
                return !this.Jt || 1 !== this.Jt.readyState;
              }, u2.prototype.sendMessage = function(t5, i5, n5, r4, s4) {
                void 0 === s4 && (s4 = { timeOut: 6e3 });
                var o4 = e3(e3({}, this.H.processData), { time_upload: Date.now() });
                return o4 = { data: i5 = { message_id: t5.seq, product: this.gt, s: JSON.stringify({ speed_detail: i5, process: o4 }) }, seq: t5.seq, deleted: false, sendTime: Date.parse(/* @__PURE__ */ new Date() + ""), timeOut: s4.timeOut, success: n5, error: r4 }, s4 = this.sendCommandList.push(o4), this.sendCommandMap[o4.seq] = s4, this.Jt && "pb" !== this.Ot && (n5 = JSON.stringify(i5), this.H.W.debug("zt.zss.sm upload data: " + n5), r4 = this.H.deflate(n5), this.Y.add(8 * n5.length), this.Jt.send(r4)), t5.seq;
              }, u2.prototype.Wt = function(t5) {
                for (var i5 = t5.getFirst(); null != i5; )
                  t5.remove(i5), i5.v && i5.v.error && setTimeout(function() {
                    i5 && i5.v && i5.v.error && i5.v.error(s3.errorList.TIMEOUT, i5.v.data.message_id, i5.v.data.s);
                  }, 0), i5 = t5.getFirst();
              }, u2.prototype.Xt = function(t5, i5) {
                for (var n5 = t5.getFirst(), e4 = Date.parse(/* @__PURE__ */ new Date() + ""), r4 = 0; !(null == n5 || n5.v && n5.v.sendTime + n5.v.timeOut > e4 || (n5.v && delete i5[n5.v.data.message_id], t5.remove(n5), !(n5.v && null == n5.v.error || n5.v && n5.v.sendTime + this.Ct < e4) && n5 && n5.v && n5.v.error && n5.v.error(s3.errorList.TIMEOUT, n5.v.data.message_id, n5.v.data.s), ++r4 >= this.qt)); )
                  n5 = t5.getFirst();
              }, u2.prototype.startCheck = function() {
                var t5 = this;
                this.Xt(this.sendCommandList, this.sendCommandMap), this.Kt = setTimeout(function() {
                  t5.startCheck();
                }, this.Ft);
              }, u2.prototype.stopCheck = function() {
                this.Wt(this.sendCommandList), clearTimeout(this.Kt);
              }, u2.prototype.openHandler = function(t5) {
                var i5 = this;
                this.Jt && (this.Jt.onopen = function(n5) {
                  i5.responseHandler(), t5(n5);
                });
              }, u2.prototype.responseHandler = function() {
                var t5 = this;
                this.Jt && (this.Jt.onmessage = function(i5) {
                  i5 = "string" == typeof i5.data ? JSON.parse(i5.data) : JSON.parse(String.fromCharCode.apply(null, new Uint8Array(i5.data))), t5.onMessage(i5);
                });
              }, u2.prototype.closeHandler = function(t5) {
                this.Mt.close = t5;
              }, u2.prototype.errorHandler = function(t5) {
                this.Mt.error = t5;
              }, u2.prototype.onMessage = function(t5) {
              }, i4.ZegoSocketService = u2;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "u", { value: true }), i4.createZegoWebSocket = i4.ZegoWeiXinMiniWebSocket = void 0;
              var e3 = n4(0), r3 = (s3.prototype.init = function() {
                var t5 = this;
                this.Gt && (this.readyState = 0, this.Gt.onOpen(function(i5) {
                  t5.readyState = t5.Gt.readyState, "function" == typeof t5.onopen && (t5.onopen(i5), t5.Gt.onClose(function(i6) {
                    t5.readyState = t5.Gt.readyState, "function" == typeof t5.onclose && t5.onclose(i6);
                  }), t5.Gt.onMessage(function(i6) {
                    "function" == typeof t5.onmessage && t5.onmessage(i6);
                  }));
                }), this.Gt.onError(function(i5) {
                  t5.readyState = t5.Gt.readyState, "function" == typeof t5.onerror && t5.onerror(i5);
                }));
              }, s3.prototype.onopen = function(t5) {
              }, s3.prototype.onerror = function(t5) {
              }, s3.prototype.onclose = function(t5) {
              }, s3.prototype.onmessage = function(t5) {
              }, s3.prototype.send = function(t5) {
                this.Gt && this.Gt.send({ data: t5 });
              }, s3.prototype.close = function() {
                this.Gt && this.Gt.close();
              }, s3);
              function s3(t5, i5) {
                this.url = t5, this.readyState = 3, this.Gt = wx.connectSocket({ url: t5 }), this.init();
              }
              i4.ZegoWeiXinMiniWebSocket = r3, i4.createZegoWebSocket = function(t5, i5, n5) {
                return i5 % 2 === e3.ZEGO_ENV.BROWSER ? (i5 = t5, n5 ? n5.createSocket(i5, 1) : new WebSocket(i5)) : new r3(t5);
              };
            }, function(t4, i4, n4) {
              function e3(t5, i5, n5, e4) {
                if (this.bucketSize = 1, this.tokensPerInterval = 1, this.interval = 1e3, this.parentBucket = null, this.content = 0, this.lastDrip = 0, this.bucketSize = t5, this.tokensPerInterval = i5, "string" == typeof n5)
                  switch (n5) {
                    case "sec":
                    case "second":
                      this.interval = 1e3;
                      break;
                    case "min":
                    case "minute":
                      this.interval = 6e4;
                      break;
                    case "hr":
                    case "hour":
                      this.interval = 36e5;
                      break;
                    case "day":
                      this.interval = 864e5;
                      break;
                    default:
                      throw new Error("Invaid interval " + n5);
                  }
                else
                  this.interval = n5;
                this.parentBucket = e4, this.content = 0, this.lastDrip = +/* @__PURE__ */ new Date();
              }
              Object.defineProperty(i4, "u", { value: true }), i4.TokenBucket = void 0, e3.prototype.removeTokens = function(t5, i5) {
                var n5 = this;
                return this.bucketSize ? t5 > this.bucketSize ? (setTimeout(i5.bind(null, "Requested tokens " + t5 + " exceeds bucket size " + this.bucketSize, null), 0), false) : (this.drip(), t5 > this.content ? e4() : this.parentBucket ? this.parentBucket.removeTokens(t5, function(r3, s3) {
                  return r3 ? i5(r3, null) : t5 > n5.content ? e4() : (n5.content -= t5, void i5(null, Math.min(s3, n5.content)));
                }) : (this.content -= t5, setTimeout(i5.bind(null, null, this.content), 0), true)) : (setTimeout(i5.bind(null, null, t5, Number.POSITIVE_INFINITY), 0), true);
                function e4() {
                  var e5 = Math.ceil(n5.interval / n5.tokensPerInterval * (t5 - n5.content));
                  return setTimeout(function() {
                    n5.removeTokens(t5, i5);
                  }, e5), false;
                }
              }, e3.prototype.tryRemoveTokens = function(t5) {
                if (this.bucketSize) {
                  if (t5 > this.bucketSize)
                    return false;
                  if (this.drip(), t5 > this.content)
                    return false;
                  if (this.parentBucket && !this.parentBucket.tryRemoveTokens(t5))
                    return false;
                  this.content -= t5;
                }
                return true;
              }, e3.prototype.drip = function() {
                var t5, i5;
                this.tokensPerInterval ? (i5 = +/* @__PURE__ */ new Date(), t5 = Math.max(i5 - this.lastDrip, 0), this.lastDrip = i5, i5 = t5 * (this.tokensPerInterval / this.interval), this.content = Math.min(this.content + i5, this.bucketSize)) : this.content = this.bucketSize;
              }, i4.TokenBucket = e3;
            }, function(t4, i4, n4) {
              var e3 = this && this.__awaiter || function(t5, i5, n5, e4) {
                return new (n5 = n5 || Promise)(function(r4, s4) {
                  function o4(t6) {
                    try {
                      a2(e4.next(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function u3(t6) {
                    try {
                      a2(e4.throw(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function a2(t6) {
                    var i6;
                    t6.done ? r4(t6.value) : ((i6 = t6.value) instanceof n5 ? i6 : new n5(function(t7) {
                      t7(i6);
                    })).then(o4, u3);
                  }
                  a2((e4 = e4.apply(t5, i5 || [])).next());
                });
              }, r3 = this && this.__generator || function(t5, i5) {
                var n5, e4, r4, s4 = { label: 0, sent: function() {
                  if (1 & r4[0])
                    throw r4[1];
                  return r4[1];
                }, trys: [], ops: [] }, o4 = { next: u3(0), throw: u3(1), return: u3(2) };
                return "function" == typeof Symbol && (o4[Symbol.iterator] = function() {
                  return this;
                }), o4;
                function u3(o5) {
                  return function(u4) {
                    var a2 = [o5, u4];
                    if (n5)
                      throw new TypeError("Generator is already executing.");
                    for (; s4; )
                      try {
                        if (n5 = 1, e4 && (r4 = 2 & a2[0] ? e4.return : a2[0] ? e4.throw || ((r4 = e4.return) && r4.call(e4), 0) : e4.next) && !(r4 = r4.call(e4, a2[1])).done)
                          return r4;
                        switch (e4 = 0, (a2 = r4 ? [2 & a2[0], r4.value] : a2)[0]) {
                          case 0:
                          case 1:
                            r4 = a2;
                            break;
                          case 4:
                            return s4.label++, { value: a2[1], done: false };
                          case 5:
                            s4.label++, e4 = a2[1], a2 = [0];
                            continue;
                          case 7:
                            a2 = s4.ops.pop(), s4.trys.pop();
                            continue;
                          default:
                            if (!(r4 = 0 < (r4 = s4.trys).length && r4[r4.length - 1]) && (6 === a2[0] || 2 === a2[0])) {
                              s4 = 0;
                              continue;
                            }
                            if (3 === a2[0] && (!r4 || a2[1] > r4[0] && a2[1] < r4[3]))
                              s4.label = a2[1];
                            else if (6 === a2[0] && s4.label < r4[1])
                              s4.label = r4[1], r4 = a2;
                            else {
                              if (!(r4 && s4.label < r4[2])) {
                                r4[2] && s4.ops.pop(), s4.trys.pop();
                                continue;
                              }
                              s4.label = r4[2], s4.ops.push(a2);
                            }
                        }
                        a2 = i5.call(t5, s4);
                      } catch (u5) {
                        a2 = [6, u5], e4 = 0;
                      } finally {
                        n5 = r4 = 0;
                      }
                    if (5 & a2[0])
                      throw a2[1];
                    return { value: a2[0] ? a2[1] : void 0, done: true };
                  };
                }
              }, s3 = this && this.__importDefault || function(t5) {
                return t5 && t5.u ? t5 : { default: t5 };
              }, o3 = (Object.defineProperty(i4, "u", { value: true }), i4.ZegoStoreHandler = void 0, n4(12)), u2 = n4(5), a = n4(4), c = s3(n4(13));
              function h(t5, i5, n5, e4, r4, s4, u3) {
                this._ = t5, this.Ht = i5, this.Yt = n5, this.Vt = e4, this.Zt = r4, this.H = s4, this.gt = u3, this.storeSize = 0, this.storeTime = 0, this.storeDelPer = a.STORE_SIZE.storeDelPer, this.updateTimeFreq = 6e4, this.storeSleepInterval = 6e5, this.droping = false, this.bufferData = [], this.updateTimer = null, this.interSymbol = "#", this.drops = [], this.storesKeys = "", this.transStores = [], this.store = o3.createZegoStore(t5, n5.env, i5), this.commonStore = o3.createZegoStore("data_common", n5.env, "reporter");
              }
              Object.defineProperty(h.prototype, "Qt", { get: function() {
                return "z_t_" + this.gt + "_" + this.Yt.appID;
              }, enumerable: false, configurable: true }), Object.defineProperty(h.prototype, "$t", { get: function() {
                return "z_store_keys";
              }, enumerable: false, configurable: true }), h.prototype.init = function() {
                return e3(this, void 0, void 0, function() {
                  var t5, i5;
                  return r3(this, function(n5) {
                    switch (n5.label) {
                      case 0:
                        return n5.trys.push([0, 6, , 7]), this.setCommonStoreState(), [4, this.transferStoreData()];
                      case 1:
                        return n5.sent(), [4, this.commonStore.getItem(this._ + this.interSymbol + this.Ht)];
                      case 2:
                        return (t5 = n5.sent()) ? [3, 4] : [4, this.commonStore.setItem(this._ + this.interSymbol + this.Ht, i5 = { storeSize: this.storeSize, lock: 0, pros: 1 })];
                      case 3:
                        return n5.sent(), [3, 5];
                      case 4:
                        i5 = "string" == typeof t5 ? JSON.parse(t5) : t5, this.storeSize = i5.storeSize, n5.label = 5;
                      case 5:
                        return [3, 7];
                      case 6:
                        return n5.sent(), [3, 7];
                      case 7:
                        return [2];
                    }
                  });
                });
              }, h.prototype.uninit = function() {
                this.updateTimer && (clearTimeout(this.updateTimer), this.updateTimer = null);
              }, h.prototype.setCommonStoreState = function() {
                var t5 = this, i5 = (this.getStorage(this.$t) || "").split(";");
                this.transStores = i5.filter(function(i6) {
                  return i6.includes(t5.Yt.appID + "") && i6.includes(t5.gt);
                }), i5 = i5.filter(function(i6) {
                  return !i6.includes(t5.Yt.appID + "") || !i6.includes(t5.gt);
                }), this.storesKeys = i5.join(";");
              }, h.prototype.resetCommonStore = function() {
                return e3(this, void 0, void 0, function() {
                  return r3(this, function(t5) {
                    switch (t5.label) {
                      case 0:
                        return this.saveStorage(this.$t, this.storesKeys + (0 < this.storesKeys.length ? ";" : "") + this._ + this.interSymbol + this.Ht), [4, this.commonStore.setItem(this._ + this.interSymbol + this.Ht, { storeSize: this.storeSize, lock: 0, pros: 0 })];
                      case 1:
                        return t5.sent(), [2];
                    }
                  });
                });
              }, h.prototype.transferStoreData = function() {
                return e3(this, void 0, void 0, function() {
                  var t5, i5, n5, s4, a2 = this;
                  return r3(this, function(c2) {
                    switch (c2.label) {
                      case 0:
                        return [4, this.commonStore.keys()];
                      case 1:
                        t5 = c2.sent(), i5 = function(i6) {
                          var s5, c3, h2, f, l, d, v, m;
                          return r3(this, function(p) {
                            switch (p.label) {
                              case 0:
                                return (s5 = t5[i6]) === n5._ + n5.interSymbol + n5.Ht ? [3, 9] : [4, n5.commonStore.getItem(s5)];
                              case 1:
                                return (c3 = "string" == typeof (c3 = p.sent()) ? JSON.parse(c3) : c3).lock || c3.pros && !n5.transStores.includes(s5) ? [3, 9] : (f = s5.split(n5.interSymbol), [4, (l = o3.createZegoStore(h2 = f[0], n5.Yt.env, f = f[1])).keys()]);
                              case 2:
                                return 0 != (d = p.sent()).length ? [3, 3] : [3, 8];
                              case 3:
                                return c3.lock = 1, [4, n5.commonStore.setItem(s5, c3)];
                              case 4:
                                p.sent(), v = function(t6) {
                                  var i7, s6, o4;
                                  return r3(this, function(c4) {
                                    switch (c4.label) {
                                      case 0:
                                        return [4, l.getItem(i7 = d[t6])];
                                      case 1:
                                        return s6 = c4.sent(), -1 !== i7.indexOf("pending") ? s6 && JSON.parse(s6).forEach(function(t7) {
                                          return e3(a2, void 0, void 0, function() {
                                            return r3(this, function(i8) {
                                              switch (i8.label) {
                                                case 0:
                                                  return [4, this.storeData(t7)];
                                                case 1:
                                                  return i8.sent(), [2];
                                              }
                                            });
                                          });
                                        }) : (o4 = u2.analyzeKey(i7), n5.storeData({ level: o4.level, timestamp: o4.timestamp, seq: o4 = o4.seq, content: s6 })), setTimeout(function() {
                                          return e3(a2, void 0, void 0, function() {
                                            return r3(this, function(t7) {
                                              switch (t7.label) {
                                                case 0:
                                                  return [4, l.removeItem(i7)];
                                                case 1:
                                                  return t7.sent(), [2];
                                              }
                                            });
                                          });
                                        }, 300), [2];
                                    }
                                  });
                                }, m = 0, p.label = 5;
                              case 5:
                                return m < d.length ? [5, v(m)] : [3, 8];
                              case 6:
                                p.sent(), p.label = 7;
                              case 7:
                                return m++, [3, 5];
                              case 8:
                                n5.drops.push({ name: h2, storeName: f }), p.label = 9;
                              case 9:
                                return [2];
                            }
                          });
                        }, n5 = this, s4 = 0, c2.label = 2;
                      case 2:
                        return s4 < t5.length ? [5, i5(s4)] : [3, 5];
                      case 3:
                        c2.sent(), c2.label = 4;
                      case 4:
                        return s4++, [3, 2];
                      case 5:
                        return this.transportStorageData(), setTimeout(function() {
                          return e3(a2, void 0, void 0, function() {
                            var t6, i6, n6;
                            return r3(this, function(e4) {
                              switch (e4.label) {
                                case 0:
                                  t6 = 0, e4.label = 1;
                                case 1:
                                  if (!(t6 < this.drops.length))
                                    return [3, 7];
                                  i6 = (n6 = this.drops[t6]).name, n6 = n6.storeName, e4.label = 2;
                                case 2:
                                  return e4.trys.push([2, 5, , 6]), [4, this.dropInstance(i6, n6)];
                                case 3:
                                  return e4.sent(), [4, this.commonStore.removeItem(i6 + this.interSymbol + n6)];
                                case 4:
                                case 5:
                                  return e4.sent(), [3, 6];
                                case 6:
                                  return t6++, [3, 1];
                                case 7:
                                  return [2];
                              }
                            });
                          });
                        }, 1e3), [2];
                    }
                  });
                });
              }, h.prototype.dropInstance = function(t5, i5) {
                return new Promise(function(n5, e4) {
                  c.default.dropInstance({ name: t5 + ":" + i5 }).then(function() {
                    n5();
                  }).catch(function(t6) {
                    e4(t6);
                  });
                });
              }, h.prototype.setDropCallBack = function(t5) {
                this.dropCallBack = t5;
              }, h.prototype.storeData = function(t5) {
                var i5 = this;
                return new Promise(function(n5, s4) {
                  return e3(i5, void 0, void 0, function() {
                    var i6, e4, s5, o4, a2 = this;
                    return r3(this, function(r4) {
                      switch (r4.label) {
                        case 0:
                          e4 = t5.content, s5 = (i6 = t5.level) + "_" + t5.timestamp + "_" + t5.seq, r4.label = 1;
                        case 1:
                          return r4.trys.push([1, 3, , 4]), [4, this.store.getItem(s5)];
                        case 2:
                          return r4.sent() ? (n5(), [2]) : [3, 4];
                        case 3:
                          return r4.sent(), [3, 4];
                        case 4:
                          if (this.droping)
                            return this.bufferData.push(t5), [2];
                          if (o4 = u2.calculateMemSize(s5) + u2.calculateMemSize(e4), this.Zt.totalDBSize - o4 <= 0)
                            return this.dropDBData(i6, s5, e4).then(function() {
                              a2.droping = false, a2.bufferDump();
                            }).catch(function(t6) {
                            }), n5(), [2];
                          r4.label = 5;
                        case 5:
                          return r4.trys.push([5, 8, , 9]), [4, this.store.setItem(s5, e4)];
                        case 6:
                          return r4.sent(), this.storeSize += o4, this.Zt.totalDBSize -= o4, [4, this.ti()];
                        case 7:
                          return r4.sent(), n5(), [3, 9];
                        case 8:
                          return "QuotaExceededError" === r4.sent().name && this.dropDBData(i6, s5, e4).then(function() {
                            a2.droping = false, a2.bufferDump();
                          }).catch(function(t6) {
                          }), [3, 9];
                        case 9:
                          return [2];
                      }
                    });
                  });
                });
              }, h.prototype.loadPendingData = function() {
                return e3(this, void 0, void 0, function() {
                  var t5 = this;
                  return r3(this, function(i5) {
                    switch (i5.label) {
                      case 0:
                        return [4, this.store.keys()];
                      case 1:
                        return i5.sent().forEach(function(i6) {
                          return e3(t5, void 0, void 0, function() {
                            var t6, n5 = this;
                            return r3(this, function(s4) {
                              switch (s4.label) {
                                case 0:
                                  return -1 === i6.indexOf("pending") ? [3, 3] : [4, this.store.getItem(i6)];
                                case 1:
                                  return (t6 = s4.sent()) ? (JSON.parse(t6).forEach(function(t7) {
                                    return e3(n5, void 0, void 0, function() {
                                      return r3(this, function(i7) {
                                        switch (i7.label) {
                                          case 0:
                                            return [4, this.storeData(t7)];
                                          case 1:
                                            return i7.sent(), [2];
                                        }
                                      });
                                    });
                                  }), [4, this.store.removeItem(i6)]) : [3, 3];
                                case 2:
                                  s4.sent(), s4.label = 3;
                                case 3:
                                  return [2];
                              }
                            });
                          });
                        }), [2];
                    }
                  });
                });
              }, h.prototype.storePendingData = function(t5) {
                return e3(this, void 0, void 0, function() {
                  return r3(this, function(i5) {
                    switch (i5.label) {
                      case 0:
                        return [4, this.store.setItem("pending" + (/* @__PURE__ */ new Date()).getTime(), JSON.stringify(t5))];
                      case 1:
                        return i5.sent(), [2];
                    }
                  });
                });
              }, h.prototype.bufferDump = function() {
                return e3(this, void 0, void 0, function() {
                  var t5;
                  return r3(this, function(i5) {
                    switch (i5.label) {
                      case 0:
                        return (t5 = this.bufferData.pop()) ? [4, this.storeData(t5)] : [3, 2];
                      case 1:
                        i5.sent(), this.bufferDump(), i5.label = 2;
                      case 2:
                        return [2];
                    }
                  });
                });
              }, h.prototype.dropDBData = function(t5, i5, n5) {
                return e3(this, void 0, void 0, function() {
                  var t6 = this;
                  return r3(this, function(s4) {
                    return this.droping = true, [2, new Promise(function(s5, o4) {
                      return e3(t6, void 0, void 0, function() {
                        var t7, e4, a2, c2, h2;
                        return r3(this, function(r4) {
                          switch (r4.label) {
                            case 0:
                              return r4.trys.push([0, 10, , 11]), [4, this.store.keys()];
                            case 1:
                              (t7 = r4.sent()).reverse(), e4 = Math.ceil(t7.length * this.storeDelPer), a2 = 0, r4.label = 2;
                            case 2:
                              return a2 < e4 ? [4, this.store.getItem(t7[a2])] : [3, 7];
                            case 3:
                              return null == (c2 = r4.sent()) ? [3, 6] : [4, this.store.removeItem(t7[a2])];
                            case 4:
                              return r4.sent(), h2 = u2.calculateMemSize(t7[a2]) + u2.calculateMemSize(c2), this.Zt.totalDBSize += h2, this.storeSize -= h2, [4, this.ti()];
                            case 5:
                              r4.sent(), this.dropCallBack(c2), r4.label = 6;
                            case 6:
                              return a2++, [3, 2];
                            case 7:
                              return [4, this.store.setItem(i5, n5)];
                            case 8:
                              return r4.sent(), this.storeSize += u2.calculateMemSize(i5) + u2.calculateMemSize(n5), [4, this.ti()];
                            case 9:
                              return r4.sent(), s5(), [3, 11];
                            case 10:
                              return h2 = r4.sent(), o4(h2), [3, 11];
                            case 11:
                              return [2];
                          }
                        });
                      });
                    })];
                  });
                });
              }, h.prototype.removeDataItem = function(t5) {
                var i5 = this;
                return new Promise(function(n5, s4) {
                  return e3(i5, void 0, void 0, function() {
                    var i6, e4, o4;
                    return r3(this, function(r4) {
                      switch (r4.label) {
                        case 0:
                          i6 = (i6 = t5.level) + "_" + t5.timestamp + "_" + t5.seq, r4.label = 1;
                        case 1:
                          return r4.trys.push([1, 6, , 7]), [4, this.store.getItem(i6)];
                        case 2:
                          return (e4 = r4.sent()) ? [4, this.store.removeItem(i6)] : [3, 5];
                        case 3:
                          return r4.sent(), o4 = u2.calculateMemSize(1 == this.Yt.env ? JSON.parse(e4) : e4), o4 = u2.calculateMemSize(i6) + o4, this.storeSize -= o4, this.Zt.totalDBSize += o4, this.Vt.DB_O_DONE += o4, [4, this.ti()];
                        case 4:
                          r4.sent(), n5(), r4.label = 5;
                        case 5:
                          return [3, 7];
                        case 6:
                          return o4 = r4.sent(), s4(o4), [3, 7];
                        case 7:
                          return [2];
                      }
                    });
                  });
                });
              }, h.prototype.ti = function() {
                return e3(this, void 0, void 0, function() {
                  return r3(this, function(t5) {
                    switch (t5.label) {
                      case 0:
                        return t5.trys.push([0, 4, , 5]), [4, this.commonStore.getItem(this._ + this.interSymbol + this.Ht)];
                      case 1:
                        return t5.sent() ? [4, this.commonStore.setItem(this._ + this.interSymbol + this.Ht, { storeSize: this.storeSize, lock: 0, pros: 1 })] : [3, 3];
                      case 2:
                        t5.sent(), t5.label = 3;
                      case 3:
                        return [3, 5];
                      case 4:
                        return t5.sent(), [3, 5];
                      case 5:
                        return [2];
                    }
                  });
                });
              }, h.prototype.readStoreDataItem = function() {
                var t5 = this;
                return new Promise(function(i5, n5) {
                  return e3(t5, void 0, void 0, function() {
                    var t6, e4, s4, o4;
                    return r3(this, function(r4) {
                      switch (r4.label) {
                        case 0:
                          return r4.trys.push([0, 3, , 4]), [4, this.store.keys()];
                        case 1:
                          return t6 = r4.sent(), [4, this.store.getItem(t6[0])];
                        case 2:
                          return e4 = r4.sent(), s4 = u2.analyzeKey(t6[0]), i5({ level: o4 = s4.level, timestamp: s4.timestamp, seq: s4.seq, content: e4 }), [3, 4];
                        case 3:
                          return o4 = r4.sent(), n5(o4), [3, 4];
                        case 4:
                          return [2];
                      }
                    });
                  });
                });
              }, h.prototype.loadDBData = function(t5, i5, n5, s4) {
                var o4 = this;
                return new Promise(function(a2, c2) {
                  return e3(o4, void 0, void 0, function() {
                    var e4, o5, h2, f, l, d, v, m, p, g;
                    return r3(this, function(r4) {
                      switch (r4.label) {
                        case 0:
                          return r4.trys.push([0, 6, , 7]), [4, this.store.keys()];
                        case 1:
                          e4 = r4.sent(), o5 = [], d = l = f = h2 = 0, r4.label = 2;
                        case 2:
                          return d < e4.length ? s4(e4[d]) ? [3, 4] : [4, this.store.getItem(e4[d])] : [3, 5];
                        case 3:
                          if (null == (v = r4.sent()))
                            return [3, 4];
                          if (m = u2.analyzeKey(e4[d]), o5.push({ level: p = m.level, timestamp: g = m.timestamp, seq: m = m.seq, content: v, key: e4[d] }), p = u2.calculateMemSize(v), f += p, t5 <= (h2 += p) && (h2 = 0, l++), i5 <= l && n5 <= f)
                            return [3, 5];
                          r4.label = 4;
                        case 4:
                          return d++, [3, 2];
                        case 5:
                          return a2({ datas: o5, len: f }), [3, 7];
                        case 6:
                          return g = r4.sent(), c2(g), [3, 7];
                        case 7:
                          return [2];
                      }
                    });
                  });
                });
              }, h.prototype.sortKeys = function(t5, i5) {
                void 0 === i5 && (i5 = false), t5.sort(function(t6, i6) {
                  return t6 = t6.split("_"), +(i6 = i6.split("_"))[0] - +t6[0] || +i6[1] - +t6[1] || +i6[2] - +t6[2];
                }), i5 && t5.reverse();
              }, h.prototype.saveStorage = function(t5, i5) {
                try {
                  localStorage.setItem(t5, i5);
                } catch (t6) {
                  this.H.W.debug("storage set err");
                }
              }, h.prototype.getStorage = function(t5) {
                try {
                  return localStorage.getItem(t5);
                } catch (t6) {
                  this.H.W.debug("storage get err");
                }
              }, h.prototype.saveDataToStorage = function(t5) {
                try {
                  this.saveStorage(this.Qt + "_" + t5.level + "_" + t5.timestamp + "_" + t5.seq, t5.content);
                } catch (t6) {
                  this.H.W.debug("saveDataToStorage " + JSON.stringify(t6));
                }
              }, h.prototype.transportStorageData = function() {
                for (var t5 = [], i5 = 0; i5 < localStorage.length; i5++) {
                  var n5, e4, r4, s4, o4 = localStorage.key(i5);
                  this.H.W.debug("transportStorageData " + o4), null != o4 && o4.startsWith(this.Qt) && (r4 = o4.replace(this.Qt + "_", ""), n5 = (r4 = u2.analyzeKey(r4)).level, e4 = r4.timestamp, r4 = r4.seq, "string" == typeof (s4 = this.getStorage(o4)) && this.storeData({ level: n5, timestamp: e4, seq: r4, content: s4 }), t5.push(o4));
                }
                setTimeout(function() {
                  for (var i6 = 0; i6 < t5.length; i6++)
                    localStorage.removeItem(t5[i6]);
                }, 100);
              }, i4.ZegoStoreHandler = h;
            }, function(t4, i4, n4) {
              var e3 = n4(32), r3 = n4(33).Buffer;
              function s3(t5) {
                return function(i5) {
                  if (r3.isBuffer(i5))
                    return i5.length;
                  switch (typeof i5) {
                    case "string":
                      return i5.length * e3.STRING;
                    case "boolean":
                      return e3.BOOLEAN;
                    case "number":
                      return e3.NUMBER;
                    case "symbol":
                      return Symbol.keyFor && Symbol.keyFor(i5) ? Symbol.keyFor(i5).length * e3.STRING : (i5.toString().length - 8) * e3.STRING;
                    case "object":
                      if (Array.isArray(i5))
                        return i5.map(s3(t5)).reduce(function(t6, i6) {
                          return t6 + i6;
                        }, 0);
                      var n5 = t5, o3 = i5;
                      if (null == o3)
                        return 0;
                      for (var u2 = 0, a = ((t6) => {
                        var i6, n6 = [];
                        for (i6 in t6)
                          n6.push(i6);
                        return Object.getOwnPropertySymbols && (t6 = Object.getOwnPropertySymbols(t6), Array.prototype.push.apply(n6, t6)), n6;
                      })(o3), c = 0; c < a.length; c++) {
                        var h = a[c];
                        if ("object" == typeof o3[h] && null !== o3[h]) {
                          if (n5.has(o3[h]))
                            continue;
                          n5.add(o3[h]);
                        }
                        u2 += s3(n5)(h);
                        try {
                          u2 += s3(n5)(o3[h]);
                        } catch (n6) {
                          n6 instanceof RangeError && (u2 = 0);
                        }
                      }
                      return u2;
                    default:
                      return 0;
                  }
                };
              }
              t4.exports = function(t5) {
                return s3(/* @__PURE__ */ new WeakSet())(t5);
              };
            }, function(t4, i4) {
              t4.exports = { STRING: 2, BOOLEAN: 4, NUMBER: 8 };
            }, function(t4, i4, n4) {
              (function(t5) {
                var e3 = n4(35), r3 = n4(36), s3 = n4(37);
                function o3() {
                  return a.TYPED_ARRAY_SUPPORT ? 2147483647 : 1073741823;
                }
                function u2(t6, i5) {
                  if (o3() < i5)
                    throw new RangeError("Invalid typed array length");
                  return a.TYPED_ARRAY_SUPPORT ? (t6 = new Uint8Array(i5)).__proto__ = a.prototype : (t6 = null === t6 ? new a(i5) : t6).length = i5, t6;
                }
                function a(t6, i5, n5) {
                  if (!(a.TYPED_ARRAY_SUPPORT || this instanceof a))
                    return new a(t6, i5, n5);
                  if ("number" != typeof t6)
                    return c(this, t6, i5, n5);
                  if ("string" == typeof i5)
                    throw new Error("If encoding is specified then the first argument must be a string");
                  return f(this, t6);
                }
                function c(t6, i5, n5, e4) {
                  if ("number" == typeof i5)
                    throw new TypeError('"value" argument must not be a number');
                  if ("undefined" != typeof ArrayBuffer && i5 instanceof ArrayBuffer) {
                    var r4 = t6, o4 = i5, c2 = n5;
                    if (c2 < 0 || o4.byteLength < c2)
                      throw new RangeError("'offset' is out of bounds");
                    if (o4.byteLength < c2 + (e4 || 0))
                      throw new RangeError("'length' is out of bounds");
                    return o4 = void 0 === c2 && void 0 === e4 ? new Uint8Array(o4) : void 0 === e4 ? new Uint8Array(o4, c2) : new Uint8Array(o4, c2, e4), a.TYPED_ARRAY_SUPPORT ? (r4 = o4).__proto__ = a.prototype : r4 = l(r4, o4), r4;
                  }
                  if ("string" != typeof i5) {
                    if (c2 = t6, a.isBuffer(e4 = i5))
                      return 0 !== (c2 = u2(c2, o4 = 0 | d(e4.length))).length && e4.copy(c2, 0, 0, o4), c2;
                    if (e4) {
                      if ("undefined" != typeof ArrayBuffer && e4.buffer instanceof ArrayBuffer || "length" in e4)
                        return "number" != typeof e4.length || (o4 = e4.length) != o4 ? u2(c2, 0) : l(c2, e4);
                      if ("Buffer" === e4.type && s3(e4.data))
                        return l(c2, e4.data);
                    }
                    throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");
                  }
                  if (r4 = t6, e4 = i5, a.isEncoding(t6 = "string" == typeof (t6 = n5) && "" !== t6 ? t6 : "utf8"))
                    return (e4 = (r4 = u2(r4, i5 = 0 | v(e4, t6))).write(e4, t6)) !== i5 ? r4.slice(0, e4) : r4;
                  throw new TypeError('"encoding" must be a valid string encoding');
                }
                function h(t6) {
                  if ("number" != typeof t6)
                    throw new TypeError('"size" argument must be a number');
                  if (t6 < 0)
                    throw new RangeError('"size" argument must not be negative');
                }
                function f(t6, i5) {
                  if (h(i5), t6 = u2(t6, i5 < 0 ? 0 : 0 | d(i5)), !a.TYPED_ARRAY_SUPPORT)
                    for (var n5 = 0; n5 < i5; ++n5)
                      t6[n5] = 0;
                  return t6;
                }
                function l(t6, i5) {
                  var n5 = i5.length < 0 ? 0 : 0 | d(i5.length);
                  t6 = u2(t6, n5);
                  for (var e4 = 0; e4 < n5; e4 += 1)
                    t6[e4] = 255 & i5[e4];
                  return t6;
                }
                function d(t6) {
                  if (o3() <= t6)
                    throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x" + o3().toString(16) + " bytes");
                  return 0 | t6;
                }
                function v(t6, i5) {
                  if (a.isBuffer(t6))
                    return t6.length;
                  if ("undefined" != typeof ArrayBuffer && "function" == typeof ArrayBuffer.isView && (ArrayBuffer.isView(t6) || t6 instanceof ArrayBuffer))
                    return t6.byteLength;
                  var n5 = (t6 = "string" != typeof t6 ? "" + t6 : t6).length;
                  if (0 === n5)
                    return 0;
                  for (var e4 = false; ; )
                    switch (i5) {
                      case "ascii":
                      case "latin1":
                      case "binary":
                        return n5;
                      case "utf8":
                      case "utf-8":
                      case void 0:
                        return C(t6).length;
                      case "ucs2":
                      case "ucs-2":
                      case "utf16le":
                      case "utf-16le":
                        return 2 * n5;
                      case "hex":
                        return n5 >>> 1;
                      case "base64":
                        return A(t6).length;
                      default:
                        if (e4)
                          return C(t6).length;
                        i5 = ("" + i5).toLowerCase(), e4 = true;
                    }
                }
                function m(t6, i5, n5) {
                  var e4 = t6[i5];
                  t6[i5] = t6[n5], t6[n5] = e4;
                }
                function p(t6, i5, n5, e4, r4) {
                  if (0 === t6.length)
                    return -1;
                  if ("string" == typeof n5 ? (e4 = n5, n5 = 0) : 2147483647 < n5 ? n5 = 2147483647 : n5 < -2147483648 && (n5 = -2147483648), n5 = +n5, (n5 = (n5 = isNaN(n5) ? r4 ? 0 : t6.length - 1 : n5) < 0 ? t6.length + n5 : n5) >= t6.length) {
                    if (r4)
                      return -1;
                    n5 = t6.length - 1;
                  } else if (n5 < 0) {
                    if (!r4)
                      return -1;
                    n5 = 0;
                  }
                  if ("string" == typeof i5 && (i5 = a.from(i5, e4)), a.isBuffer(i5))
                    return 0 === i5.length ? -1 : g(t6, i5, n5, e4, r4);
                  if ("number" == typeof i5)
                    return i5 &= 255, a.TYPED_ARRAY_SUPPORT && "function" == typeof Uint8Array.prototype.indexOf ? (r4 ? Uint8Array.prototype.indexOf : Uint8Array.prototype.lastIndexOf).call(t6, i5, n5) : g(t6, [i5], n5, e4, r4);
                  throw new TypeError("val must be string, number or Buffer");
                }
                function g(t6, i5, n5, e4, r4) {
                  var s4 = 1, o4 = t6.length, u3 = i5.length;
                  if (void 0 !== e4 && ("ucs2" === (e4 = String(e4).toLowerCase()) || "ucs-2" === e4 || "utf16le" === e4 || "utf-16le" === e4)) {
                    if (t6.length < 2 || i5.length < 2)
                      return -1;
                    o4 /= s4 = 2, u3 /= 2, n5 /= 2;
                  }
                  function a2(t7, i6) {
                    return 1 === s4 ? t7[i6] : t7.readUInt16BE(i6 * s4);
                  }
                  if (r4)
                    for (var c2 = -1, h2 = n5; h2 < o4; h2++)
                      if (a2(t6, h2) === a2(i5, -1 === c2 ? 0 : h2 - c2)) {
                        if (h2 - (c2 = -1 === c2 ? h2 : c2) + 1 === u3)
                          return c2 * s4;
                      } else
                        -1 !== c2 && (h2 -= h2 - c2), c2 = -1;
                  else
                    for (h2 = n5 = o4 < n5 + u3 ? o4 - u3 : n5; 0 <= h2; h2--) {
                      for (var f2 = true, l2 = 0; l2 < u3; l2++)
                        if (a2(t6, h2 + l2) !== a2(i5, l2)) {
                          f2 = false;
                          break;
                        }
                      if (f2)
                        return h2;
                    }
                  return -1;
                }
                function b(t6, i5, n5, e4) {
                  return z(((t7) => {
                    for (var i6 = [], n6 = 0; n6 < t7.length; ++n6)
                      i6.push(255 & t7.charCodeAt(n6));
                    return i6;
                  })(i5), t6, n5, e4);
                }
                function _(t6, i5, n5) {
                  n5 = Math.min(t6.length, n5);
                  for (var e4 = [], r4 = i5; r4 < n5; ) {
                    var s4, o4, u3, a2, c2 = t6[r4], h2 = null, f2 = 239 < c2 ? 4 : 223 < c2 ? 3 : 191 < c2 ? 2 : 1;
                    if (r4 + f2 <= n5)
                      switch (f2) {
                        case 1:
                          c2 < 128 && (h2 = c2);
                          break;
                        case 2:
                          128 == (192 & (s4 = t6[r4 + 1])) && 127 < (a2 = (31 & c2) << 6 | 63 & s4) && (h2 = a2);
                          break;
                        case 3:
                          o4 = t6[r4 + 2], 128 == (192 & (s4 = t6[r4 + 1])) && 128 == (192 & o4) && 2047 < (a2 = (15 & c2) << 12 | (63 & s4) << 6 | 63 & o4) && (a2 < 55296 || 57343 < a2) && (h2 = a2);
                          break;
                        case 4:
                          o4 = t6[r4 + 2], u3 = t6[r4 + 3], 128 == (192 & (s4 = t6[r4 + 1])) && 128 == (192 & o4) && 128 == (192 & u3) && 65535 < (a2 = (15 & c2) << 18 | (63 & s4) << 12 | (63 & o4) << 6 | 63 & u3) && a2 < 1114112 && (h2 = a2);
                      }
                    null === h2 ? (h2 = 65533, f2 = 1) : 65535 < h2 && (e4.push((h2 -= 65536) >>> 10 & 1023 | 55296), h2 = 56320 | 1023 & h2), e4.push(h2), r4 += f2;
                  }
                  var l2 = e4, d2 = l2.length;
                  if (d2 <= y)
                    return String.fromCharCode.apply(String, l2);
                  for (var v2 = "", m2 = 0; m2 < d2; )
                    v2 += String.fromCharCode.apply(String, l2.slice(m2, m2 += y));
                  return v2;
                }
                i4.Buffer = a, i4.SlowBuffer = function(t6) {
                  return a.alloc(+(t6 = +t6 != t6 ? 0 : t6));
                }, i4.INSPECT_MAX_BYTES = 50, a.TYPED_ARRAY_SUPPORT = void 0 !== t5.TYPED_ARRAY_SUPPORT ? t5.TYPED_ARRAY_SUPPORT : (() => {
                  try {
                    var t6 = new Uint8Array(1);
                    return t6.__proto__ = { __proto__: Uint8Array.prototype, foo: function() {
                      return 42;
                    } }, 42 === t6.foo() && "function" == typeof t6.subarray && 0 === t6.subarray(1, 1).byteLength;
                  } catch (t7) {
                    return false;
                  }
                })(), i4.kMaxLength = o3(), a.poolSize = 8192, a.ii = function(t6) {
                  return t6.__proto__ = a.prototype, t6;
                }, a.from = function(t6, i5, n5) {
                  return c(null, t6, i5, n5);
                }, a.TYPED_ARRAY_SUPPORT && (a.prototype.__proto__ = Uint8Array.prototype, a.__proto__ = Uint8Array, "undefined" != typeof Symbol) && Symbol.species && a[Symbol.species] === a && Object.defineProperty(a, Symbol.species, { value: null, configurable: true }), a.alloc = function(t6, i5, n5) {
                  return h(t6), t6 <= 0 || void 0 === i5 ? u2(null, t6) : "string" == typeof n5 ? u2(null, t6).fill(i5, n5) : u2(null, t6).fill(i5);
                }, a.allocUnsafe = function(t6) {
                  return f(null, t6);
                }, a.allocUnsafeSlow = function(t6) {
                  return f(null, t6);
                }, a.isBuffer = function(t6) {
                  return !(null == t6 || !t6.ni);
                }, a.compare = function(t6, i5) {
                  if (!a.isBuffer(t6) || !a.isBuffer(i5))
                    throw new TypeError("Arguments must be Buffers");
                  if (t6 === i5)
                    return 0;
                  for (var n5 = t6.length, e4 = i5.length, r4 = 0, s4 = Math.min(n5, e4); r4 < s4; ++r4)
                    if (t6[r4] !== i5[r4]) {
                      n5 = t6[r4], e4 = i5[r4];
                      break;
                    }
                  return n5 < e4 ? -1 : e4 < n5 ? 1 : 0;
                }, a.isEncoding = function(t6) {
                  switch (String(t6).toLowerCase()) {
                    case "hex":
                    case "utf8":
                    case "utf-8":
                    case "ascii":
                    case "latin1":
                    case "binary":
                    case "base64":
                    case "ucs2":
                    case "ucs-2":
                    case "utf16le":
                    case "utf-16le":
                      return true;
                    default:
                      return false;
                  }
                }, a.concat = function(t6, i5) {
                  if (!s3(t6))
                    throw new TypeError('"list" argument must be an Array of Buffers');
                  if (0 === t6.length)
                    return a.alloc(0);
                  if (void 0 === i5)
                    for (r4 = i5 = 0; r4 < t6.length; ++r4)
                      i5 += t6[r4].length;
                  for (var n5 = a.allocUnsafe(i5), e4 = 0, r4 = 0; r4 < t6.length; ++r4) {
                    var o4 = t6[r4];
                    if (!a.isBuffer(o4))
                      throw new TypeError('"list" argument must be an Array of Buffers');
                    o4.copy(n5, e4), e4 += o4.length;
                  }
                  return n5;
                }, a.byteLength = v, a.prototype.ni = true, a.prototype.swap16 = function() {
                  var t6 = this.length;
                  if (t6 % 2 != 0)
                    throw new RangeError("Buffer size must be a multiple of 16-bits");
                  for (var i5 = 0; i5 < t6; i5 += 2)
                    m(this, i5, i5 + 1);
                  return this;
                }, a.prototype.swap32 = function() {
                  var t6 = this.length;
                  if (t6 % 4 != 0)
                    throw new RangeError("Buffer size must be a multiple of 32-bits");
                  for (var i5 = 0; i5 < t6; i5 += 4)
                    m(this, i5, i5 + 3), m(this, i5 + 1, i5 + 2);
                  return this;
                }, a.prototype.swap64 = function() {
                  var t6 = this.length;
                  if (t6 % 8 != 0)
                    throw new RangeError("Buffer size must be a multiple of 64-bits");
                  for (var i5 = 0; i5 < t6; i5 += 8)
                    m(this, i5, i5 + 7), m(this, i5 + 1, i5 + 6), m(this, i5 + 2, i5 + 5), m(this, i5 + 3, i5 + 4);
                  return this;
                }, a.prototype.toString = function() {
                  var t6 = 0 | this.length;
                  return 0 == t6 ? "" : 0 === arguments.length ? _(this, 0, t6) : (function(t7, i5, n5) {
                    var r4, s4, o4 = false;
                    if ((i5 = void 0 === i5 || i5 < 0 ? 0 : i5) > this.length)
                      return "";
                    if ((n5 = void 0 === n5 || n5 > this.length ? this.length : n5) <= 0)
                      return "";
                    if ((n5 >>>= 0) <= (i5 >>>= 0))
                      return "";
                    for (t7 = t7 || "utf8"; ; )
                      switch (t7) {
                        case "hex":
                          var u3 = n5, a2 = this.length;
                          (!u3 || u3 < 0 || a2 < u3) && (u3 = a2);
                          for (var c2 = "", h2 = v2 = !(v2 = i5) || v2 < 0 ? 0 : v2; h2 < u3; ++h2)
                            c2 += (s4 = this[h2]) < 16 ? "0" + s4.toString(16) : s4.toString(16);
                          return c2;
                        case "utf8":
                        case "utf-8":
                          return _(this, i5, n5);
                        case "ascii":
                          a2 = i5;
                          for (var f2 = n5, l2 = "", d2 = (f2 = Math.min(this.length, f2), a2); d2 < f2; ++d2)
                            l2 += String.fromCharCode(127 & this[d2]);
                          return l2;
                        case "latin1":
                        case "binary":
                          for (var v2 = i5, m2 = n5, p2 = "", g2 = (m2 = Math.min(this.length, m2), v2); g2 < m2; ++g2)
                            p2 += String.fromCharCode(this[g2]);
                          return p2;
                        case "base64":
                          return b2 = this, r4 = n5, 0 === (y2 = i5) && r4 === b2.length ? e3.fromByteArray(b2) : e3.fromByteArray(b2.slice(y2, r4));
                        case "ucs2":
                        case "ucs-2":
                        case "utf16le":
                        case "utf-16le":
                          for (var b2 = i5, y2 = n5, w2 = this.slice(b2, y2), S2 = "", E2 = 0; E2 < w2.length; E2 += 2)
                            S2 += String.fromCharCode(w2[E2] + 256 * w2[E2 + 1]);
                          return S2;
                        default:
                          if (o4)
                            throw new TypeError("Unknown encoding: " + t7);
                          t7 = (t7 + "").toLowerCase(), o4 = true;
                      }
                  }).apply(this, arguments);
                }, a.prototype.equals = function(t6) {
                  if (a.isBuffer(t6))
                    return this === t6 || 0 === a.compare(this, t6);
                  throw new TypeError("Argument must be a Buffer");
                }, a.prototype.inspect = function() {
                  var t6 = "", n5 = i4.INSPECT_MAX_BYTES;
                  return 0 < this.length && (t6 = this.toString("hex", 0, n5).match(/.{2}/g).join(" "), this.length > n5) && (t6 += " ... "), "<Buffer " + t6 + ">";
                }, a.prototype.compare = function(t6, i5, n5, e4, r4) {
                  if (!a.isBuffer(t6))
                    throw new TypeError("Argument must be a Buffer");
                  if (void 0 === n5 && (n5 = t6 ? t6.length : 0), void 0 === e4 && (e4 = 0), void 0 === r4 && (r4 = this.length), (i5 = void 0 === i5 ? 0 : i5) < 0 || n5 > t6.length || e4 < 0 || r4 > this.length)
                    throw new RangeError("out of range index");
                  if (r4 <= e4 && n5 <= i5)
                    return 0;
                  if (r4 <= e4)
                    return -1;
                  if (n5 <= i5)
                    return 1;
                  if (this === t6)
                    return 0;
                  for (var s4 = (r4 >>>= 0) - (e4 >>>= 0), o4 = (n5 >>>= 0) - (i5 >>>= 0), u3 = Math.min(s4, o4), c2 = this.slice(e4, r4), h2 = t6.slice(i5, n5), f2 = 0; f2 < u3; ++f2)
                    if (c2[f2] !== h2[f2]) {
                      s4 = c2[f2], o4 = h2[f2];
                      break;
                    }
                  return s4 < o4 ? -1 : o4 < s4 ? 1 : 0;
                }, a.prototype.includes = function(t6, i5, n5) {
                  return -1 !== this.indexOf(t6, i5, n5);
                }, a.prototype.indexOf = function(t6, i5, n5) {
                  return p(this, t6, i5, n5, true);
                }, a.prototype.lastIndexOf = function(t6, i5, n5) {
                  return p(this, t6, i5, n5, false);
                }, a.prototype.write = function(t6, i5, n5, e4) {
                  if (void 0 === i5)
                    e4 = "utf8", n5 = this.length, i5 = 0;
                  else if (void 0 === n5 && "string" == typeof i5)
                    e4 = i5, n5 = this.length, i5 = 0;
                  else {
                    if (!isFinite(i5))
                      throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");
                    i5 |= 0, isFinite(n5) ? (n5 |= 0, void 0 === e4 && (e4 = "utf8")) : (e4 = n5, n5 = void 0);
                  }
                  var r4 = this.length - i5;
                  if ((void 0 === n5 || r4 < n5) && (n5 = r4), 0 < t6.length && (n5 < 0 || i5 < 0) || i5 > this.length)
                    throw new RangeError("Attempt to write outside buffer bounds");
                  e4 = e4 || "utf8";
                  for (var s4, o4, u3, a2, c2, h2 = false; ; )
                    switch (e4) {
                      case "hex":
                        var f2, l2 = t6, d2 = n5, v2 = (f2 = Number(i5) || 0, this.length - f2);
                        if ((!d2 || v2 < (d2 = Number(d2))) && (d2 = v2), (v2 = l2.length) % 2 != 0)
                          throw new TypeError("Invalid hex string");
                        v2 / 2 < d2 && (d2 = v2 / 2);
                        for (var m2 = 0; m2 < d2; ++m2) {
                          var p2 = parseInt(l2.substr(2 * m2, 2), 16);
                          if (isNaN(p2))
                            return m2;
                          this[f2 + m2] = p2;
                        }
                        return m2;
                      case "utf8":
                      case "utf-8":
                        return o4 = n5, z(C(t6, (s4 = this).length - (v2 = i5)), s4, v2, o4);
                      case "ascii":
                      case "latin1":
                      case "binary":
                        return b(this, t6, i5, n5);
                      case "base64":
                        return s4 = this, o4 = i5, a2 = n5, z(A(t6), s4, o4, a2);
                      case "ucs2":
                      case "ucs-2":
                      case "utf16le":
                      case "utf-16le":
                        return c2 = n5, z(((t7, i6) => {
                          for (var n6, e5, r5 = [], s5 = 0; s5 < t7.length && !((i6 -= 2) < 0); ++s5)
                            e5 = (n6 = t7.charCodeAt(s5)) >> 8, r5.push(n6 % 256), r5.push(e5);
                          return r5;
                        })(t6, (u3 = this).length - (a2 = i5)), u3, a2, c2);
                      default:
                        if (h2)
                          throw new TypeError("Unknown encoding: " + e4);
                        e4 = ("" + e4).toLowerCase(), h2 = true;
                    }
                }, a.prototype.toJSON = function() {
                  return { type: "Buffer", data: Array.prototype.slice.call(this._arr || this, 0) };
                };
                var y = 4096;
                function w(t6, i5, n5) {
                  if (t6 % 1 != 0 || t6 < 0)
                    throw new RangeError("offset is not uint");
                  if (n5 < t6 + i5)
                    throw new RangeError("Trying to access beyond buffer length");
                }
                function S(t6, i5, n5, e4, r4, s4) {
                  if (!a.isBuffer(t6))
                    throw new TypeError('"buffer" argument must be a Buffer instance');
                  if (r4 < i5 || i5 < s4)
                    throw new RangeError('"value" argument is out of bounds');
                  if (n5 + e4 > t6.length)
                    throw new RangeError("Index out of range");
                }
                function E(t6, i5, n5, e4) {
                  i5 < 0 && (i5 = 65535 + i5 + 1);
                  for (var r4 = 0, s4 = Math.min(t6.length - n5, 2); r4 < s4; ++r4)
                    t6[n5 + r4] = (i5 & 255 << 8 * (e4 ? r4 : 1 - r4)) >>> 8 * (e4 ? r4 : 1 - r4);
                }
                function k(t6, i5, n5, e4) {
                  i5 < 0 && (i5 = 4294967295 + i5 + 1);
                  for (var r4 = 0, s4 = Math.min(t6.length - n5, 4); r4 < s4; ++r4)
                    t6[n5 + r4] = i5 >>> 8 * (e4 ? r4 : 3 - r4) & 255;
                }
                function O(t6, i5, n5, e4) {
                  if (n5 + e4 > t6.length)
                    throw new RangeError("Index out of range");
                  if (n5 < 0)
                    throw new RangeError("Index out of range");
                }
                function I(t6, i5, n5, e4, s4) {
                  return s4 || O(t6, 0, n5, 4), r3.write(t6, i5, n5, e4, 23, 4), n5 + 4;
                }
                function R(t6, i5, n5, e4, s4) {
                  return s4 || O(t6, 0, n5, 8), r3.write(t6, i5, n5, e4, 52, 8), n5 + 8;
                }
                a.prototype.slice = function(t6, i5) {
                  var n5 = this.length;
                  if ((t6 = ~~t6) < 0 ? (t6 += n5) < 0 && (t6 = 0) : n5 < t6 && (t6 = n5), (i5 = void 0 === i5 ? n5 : ~~i5) < 0 ? (i5 += n5) < 0 && (i5 = 0) : n5 < i5 && (i5 = n5), i5 < t6 && (i5 = t6), a.TYPED_ARRAY_SUPPORT)
                    (r4 = this.subarray(t6, i5)).__proto__ = a.prototype;
                  else
                    for (var e4 = i5 - t6, r4 = new a(e4, void 0), s4 = 0; s4 < e4; ++s4)
                      r4[s4] = this[s4 + t6];
                  return r4;
                }, a.prototype.readUIntLE = function(t6, i5, n5) {
                  t6 |= 0, i5 |= 0, n5 || w(t6, i5, this.length);
                  for (var e4 = this[t6], r4 = 1, s4 = 0; ++s4 < i5 && (r4 *= 256); )
                    e4 += this[t6 + s4] * r4;
                  return e4;
                }, a.prototype.readUIntBE = function(t6, i5, n5) {
                  t6 |= 0, i5 |= 0, n5 || w(t6, i5, this.length);
                  for (var e4 = this[t6 + --i5], r4 = 1; 0 < i5 && (r4 *= 256); )
                    e4 += this[t6 + --i5] * r4;
                  return e4;
                }, a.prototype.readUInt8 = function(t6, i5) {
                  return i5 || w(t6, 1, this.length), this[t6];
                }, a.prototype.readUInt16LE = function(t6, i5) {
                  return i5 || w(t6, 2, this.length), this[t6] | this[t6 + 1] << 8;
                }, a.prototype.readUInt16BE = function(t6, i5) {
                  return i5 || w(t6, 2, this.length), this[t6] << 8 | this[t6 + 1];
                }, a.prototype.readUInt32LE = function(t6, i5) {
                  return i5 || w(t6, 4, this.length), (this[t6] | this[t6 + 1] << 8 | this[t6 + 2] << 16) + 16777216 * this[t6 + 3];
                }, a.prototype.readUInt32BE = function(t6, i5) {
                  return i5 || w(t6, 4, this.length), 16777216 * this[t6] + (this[t6 + 1] << 16 | this[t6 + 2] << 8 | this[t6 + 3]);
                }, a.prototype.readIntLE = function(t6, i5, n5) {
                  t6 |= 0, i5 |= 0, n5 || w(t6, i5, this.length);
                  for (var e4 = this[t6], r4 = 1, s4 = 0; ++s4 < i5 && (r4 *= 256); )
                    e4 += this[t6 + s4] * r4;
                  return (r4 *= 128) <= e4 && (e4 -= Math.pow(2, 8 * i5)), e4;
                }, a.prototype.readIntBE = function(t6, i5, n5) {
                  t6 |= 0, i5 |= 0, n5 || w(t6, i5, this.length);
                  for (var e4 = i5, r4 = 1, s4 = this[t6 + --e4]; 0 < e4 && (r4 *= 256); )
                    s4 += this[t6 + --e4] * r4;
                  return (r4 *= 128) <= s4 && (s4 -= Math.pow(2, 8 * i5)), s4;
                }, a.prototype.readInt8 = function(t6, i5) {
                  return i5 || w(t6, 1, this.length), 128 & this[t6] ? -1 * (255 - this[t6] + 1) : this[t6];
                }, a.prototype.readInt16LE = function(t6, i5) {
                  return i5 || w(t6, 2, this.length), 32768 & (i5 = this[t6] | this[t6 + 1] << 8) ? 4294901760 | i5 : i5;
                }, a.prototype.readInt16BE = function(t6, i5) {
                  return i5 || w(t6, 2, this.length), 32768 & (i5 = this[t6 + 1] | this[t6] << 8) ? 4294901760 | i5 : i5;
                }, a.prototype.readInt32LE = function(t6, i5) {
                  return i5 || w(t6, 4, this.length), this[t6] | this[t6 + 1] << 8 | this[t6 + 2] << 16 | this[t6 + 3] << 24;
                }, a.prototype.readInt32BE = function(t6, i5) {
                  return i5 || w(t6, 4, this.length), this[t6] << 24 | this[t6 + 1] << 16 | this[t6 + 2] << 8 | this[t6 + 3];
                }, a.prototype.readFloatLE = function(t6, i5) {
                  return i5 || w(t6, 4, this.length), r3.read(this, t6, true, 23, 4);
                }, a.prototype.readFloatBE = function(t6, i5) {
                  return i5 || w(t6, 4, this.length), r3.read(this, t6, false, 23, 4);
                }, a.prototype.readDoubleLE = function(t6, i5) {
                  return i5 || w(t6, 8, this.length), r3.read(this, t6, true, 52, 8);
                }, a.prototype.readDoubleBE = function(t6, i5) {
                  return i5 || w(t6, 8, this.length), r3.read(this, t6, false, 52, 8);
                }, a.prototype.writeUIntLE = function(t6, i5, n5, e4) {
                  t6 = +t6, i5 |= 0, n5 |= 0, e4 || S(this, t6, i5, n5, Math.pow(2, 8 * n5) - 1, 0);
                  var r4 = 1, s4 = 0;
                  for (this[i5] = 255 & t6; ++s4 < n5 && (r4 *= 256); )
                    this[i5 + s4] = t6 / r4 & 255;
                  return i5 + n5;
                }, a.prototype.writeUIntBE = function(t6, i5, n5, e4) {
                  t6 = +t6, i5 |= 0, n5 |= 0, e4 || S(this, t6, i5, n5, Math.pow(2, 8 * n5) - 1, 0);
                  var r4 = n5 - 1, s4 = 1;
                  for (this[i5 + r4] = 255 & t6; 0 <= --r4 && (s4 *= 256); )
                    this[i5 + r4] = t6 / s4 & 255;
                  return i5 + n5;
                }, a.prototype.writeUInt8 = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 1, 255, 0), a.TYPED_ARRAY_SUPPORT || (t6 = Math.floor(t6)), this[i5] = 255 & t6, i5 + 1;
                }, a.prototype.writeUInt16LE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 2, 65535, 0), a.TYPED_ARRAY_SUPPORT ? (this[i5] = 255 & t6, this[i5 + 1] = t6 >>> 8) : E(this, t6, i5, true), i5 + 2;
                }, a.prototype.writeUInt16BE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 2, 65535, 0), a.TYPED_ARRAY_SUPPORT ? (this[i5] = t6 >>> 8, this[i5 + 1] = 255 & t6) : E(this, t6, i5, false), i5 + 2;
                }, a.prototype.writeUInt32LE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 4, 4294967295, 0), a.TYPED_ARRAY_SUPPORT ? (this[i5 + 3] = t6 >>> 24, this[i5 + 2] = t6 >>> 16, this[i5 + 1] = t6 >>> 8, this[i5] = 255 & t6) : k(this, t6, i5, true), i5 + 4;
                }, a.prototype.writeUInt32BE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 4, 4294967295, 0), a.TYPED_ARRAY_SUPPORT ? (this[i5] = t6 >>> 24, this[i5 + 1] = t6 >>> 16, this[i5 + 2] = t6 >>> 8, this[i5 + 3] = 255 & t6) : k(this, t6, i5, false), i5 + 4;
                }, a.prototype.writeIntLE = function(t6, i5, n5, e4) {
                  t6 = +t6, i5 |= 0, e4 || S(this, t6, i5, n5, (e4 = Math.pow(2, 8 * n5 - 1)) - 1, -e4);
                  var r4 = 0, s4 = 1, o4 = 0;
                  for (this[i5] = 255 & t6; ++r4 < n5 && (s4 *= 256); )
                    t6 < 0 && 0 === o4 && 0 !== this[i5 + r4 - 1] && (o4 = 1), this[i5 + r4] = (t6 / s4 | 0) - o4 & 255;
                  return i5 + n5;
                }, a.prototype.writeIntBE = function(t6, i5, n5, e4) {
                  t6 = +t6, i5 |= 0, e4 || S(this, t6, i5, n5, (e4 = Math.pow(2, 8 * n5 - 1)) - 1, -e4);
                  var r4 = n5 - 1, s4 = 1, o4 = 0;
                  for (this[i5 + r4] = 255 & t6; 0 <= --r4 && (s4 *= 256); )
                    t6 < 0 && 0 === o4 && 0 !== this[i5 + r4 + 1] && (o4 = 1), this[i5 + r4] = (t6 / s4 | 0) - o4 & 255;
                  return i5 + n5;
                }, a.prototype.writeInt8 = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 1, 127, -128), a.TYPED_ARRAY_SUPPORT || (t6 = Math.floor(t6)), this[i5] = 255 & (t6 = t6 < 0 ? 255 + t6 + 1 : t6), i5 + 1;
                }, a.prototype.writeInt16LE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 2, 32767, -32768), a.TYPED_ARRAY_SUPPORT ? (this[i5] = 255 & t6, this[i5 + 1] = t6 >>> 8) : E(this, t6, i5, true), i5 + 2;
                }, a.prototype.writeInt16BE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 2, 32767, -32768), a.TYPED_ARRAY_SUPPORT ? (this[i5] = t6 >>> 8, this[i5 + 1] = 255 & t6) : E(this, t6, i5, false), i5 + 2;
                }, a.prototype.writeInt32LE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 4, 2147483647, -2147483648), a.TYPED_ARRAY_SUPPORT ? (this[i5] = 255 & t6, this[i5 + 1] = t6 >>> 8, this[i5 + 2] = t6 >>> 16, this[i5 + 3] = t6 >>> 24) : k(this, t6, i5, true), i5 + 4;
                }, a.prototype.writeInt32BE = function(t6, i5, n5) {
                  return t6 = +t6, i5 |= 0, n5 || S(this, t6, i5, 4, 2147483647, -2147483648), t6 < 0 && (t6 = 4294967295 + t6 + 1), a.TYPED_ARRAY_SUPPORT ? (this[i5] = t6 >>> 24, this[i5 + 1] = t6 >>> 16, this[i5 + 2] = t6 >>> 8, this[i5 + 3] = 255 & t6) : k(this, t6, i5, false), i5 + 4;
                }, a.prototype.writeFloatLE = function(t6, i5, n5) {
                  return I(this, t6, i5, true, n5);
                }, a.prototype.writeFloatBE = function(t6, i5, n5) {
                  return I(this, t6, i5, false, n5);
                }, a.prototype.writeDoubleLE = function(t6, i5, n5) {
                  return R(this, t6, i5, true, n5);
                }, a.prototype.writeDoubleBE = function(t6, i5, n5) {
                  return R(this, t6, i5, false, n5);
                }, a.prototype.copy = function(t6, i5, n5, e4) {
                  if (n5 = n5 || 0, e4 || 0 === e4 || (e4 = this.length), i5 >= t6.length && (i5 = t6.length), (e4 = 0 < e4 && e4 < n5 ? n5 : e4) === n5)
                    return 0;
                  if (0 === t6.length || 0 === this.length)
                    return 0;
                  if ((i5 = i5 || 0) < 0)
                    throw new RangeError("targetStart out of bounds");
                  if (n5 < 0 || n5 >= this.length)
                    throw new RangeError("sourceStart out of bounds");
                  if (e4 < 0)
                    throw new RangeError("sourceEnd out of bounds");
                  e4 > this.length && (e4 = this.length);
                  var r4, s4 = (e4 = t6.length - i5 < e4 - n5 ? t6.length - i5 + n5 : e4) - n5;
                  if (this === t6 && n5 < i5 && i5 < e4)
                    for (r4 = s4 - 1; 0 <= r4; --r4)
                      t6[r4 + i5] = this[r4 + n5];
                  else if (s4 < 1e3 || !a.TYPED_ARRAY_SUPPORT)
                    for (r4 = 0; r4 < s4; ++r4)
                      t6[r4 + i5] = this[r4 + n5];
                  else
                    Uint8Array.prototype.set.call(t6, this.subarray(n5, n5 + s4), i5);
                  return s4;
                }, a.prototype.fill = function(t6, i5, n5, e4) {
                  if ("string" == typeof t6) {
                    var r4;
                    if ("string" == typeof i5 ? (e4 = i5, i5 = 0, n5 = this.length) : "string" == typeof n5 && (e4 = n5, n5 = this.length), 1 === t6.length && (r4 = t6.charCodeAt(0)) < 256 && (t6 = r4), void 0 !== e4 && "string" != typeof e4)
                      throw new TypeError("encoding must be a string");
                    if ("string" == typeof e4 && !a.isEncoding(e4))
                      throw new TypeError("Unknown encoding: " + e4);
                  } else
                    "number" == typeof t6 && (t6 &= 255);
                  if (i5 < 0 || this.length < i5 || this.length < n5)
                    throw new RangeError("Out of range index");
                  if (!(n5 <= i5))
                    if (i5 >>>= 0, n5 = void 0 === n5 ? this.length : n5 >>> 0, "number" == typeof (t6 = t6 || 0))
                      for (u3 = i5; u3 < n5; ++u3)
                        this[u3] = t6;
                    else
                      for (var s4 = a.isBuffer(t6) ? t6 : C(new a(t6, e4).toString()), o4 = s4.length, u3 = 0; u3 < n5 - i5; ++u3)
                        this[u3 + i5] = s4[u3 % o4];
                  return this;
                };
                var T = /[^+\/0-9A-Za-z-_]/g;
                function C(t6, i5) {
                  i5 = i5 || 1 / 0;
                  for (var n5, e4 = t6.length, r4 = null, s4 = [], o4 = 0; o4 < e4; ++o4) {
                    if (55295 < (n5 = t6.charCodeAt(o4)) && n5 < 57344) {
                      if (!r4) {
                        if (56319 < n5) {
                          -1 < (i5 -= 3) && s4.push(239, 191, 189);
                          continue;
                        }
                        if (o4 + 1 === e4) {
                          -1 < (i5 -= 3) && s4.push(239, 191, 189);
                          continue;
                        }
                        r4 = n5;
                        continue;
                      }
                      if (n5 < 56320) {
                        -1 < (i5 -= 3) && s4.push(239, 191, 189), r4 = n5;
                        continue;
                      }
                      n5 = 65536 + (r4 - 55296 << 10 | n5 - 56320);
                    } else
                      r4 && -1 < (i5 -= 3) && s4.push(239, 191, 189);
                    if (r4 = null, n5 < 128) {
                      if (--i5 < 0)
                        break;
                      s4.push(n5);
                    } else if (n5 < 2048) {
                      if ((i5 -= 2) < 0)
                        break;
                      s4.push(n5 >> 6 | 192, 63 & n5 | 128);
                    } else if (n5 < 65536) {
                      if ((i5 -= 3) < 0)
                        break;
                      s4.push(n5 >> 12 | 224, n5 >> 6 & 63 | 128, 63 & n5 | 128);
                    } else {
                      if (!(n5 < 1114112))
                        throw new Error("Invalid code point");
                      if ((i5 -= 4) < 0)
                        break;
                      s4.push(n5 >> 18 | 240, n5 >> 12 & 63 | 128, n5 >> 6 & 63 | 128, 63 & n5 | 128);
                    }
                  }
                  return s4;
                }
                function A(t6) {
                  return e3.toByteArray(((t7) => {
                    var i5;
                    if ((t7 = ((i5 = t7).trim ? i5.trim() : i5.replace(/^\s+|\s+$/g, "")).replace(T, "")).length < 2)
                      return "";
                    for (; t7.length % 4 != 0; )
                      t7 += "=";
                    return t7;
                  })(t6));
                }
                function z(t6, i5, n5, e4) {
                  for (var r4 = 0; r4 < e4 && !(r4 + n5 >= i5.length || r4 >= t6.length); ++r4)
                    i5[r4 + n5] = t6[r4];
                  return r4;
                }
              }).call(this, n4(34));
            }, function(t4, i4) {
              var n4 = function() {
                return this;
              }();
              try {
                n4 = n4 || new Function("return this")();
              } catch (t5) {
                "object" == typeof window && (n4 = window);
              }
              t4.exports = n4;
            }, function(t4, i4, n4) {
              i4.byteLength = function(t5) {
                return 3 * ((t5 = c(t5))[0] + (t5 = t5[1])) / 4 - t5;
              }, i4.toByteArray = function(t5) {
                for (var i5, n5 = c(t5), e4 = n5[0], o4 = new s3(3 * (e4 + (n5 = n5[1])) / 4 - n5), u3 = 0, a2 = 0 < n5 ? e4 - 4 : e4, h = 0; h < a2; h += 4)
                  i5 = r3[t5.charCodeAt(h)] << 18 | r3[t5.charCodeAt(h + 1)] << 12 | r3[t5.charCodeAt(h + 2)] << 6 | r3[t5.charCodeAt(h + 3)], o4[u3++] = i5 >> 16 & 255, o4[u3++] = i5 >> 8 & 255, o4[u3++] = 255 & i5;
                return 2 === n5 && (i5 = r3[t5.charCodeAt(h)] << 2 | r3[t5.charCodeAt(h + 1)] >> 4, o4[u3++] = 255 & i5), 1 === n5 && (i5 = r3[t5.charCodeAt(h)] << 10 | r3[t5.charCodeAt(h + 1)] << 4 | r3[t5.charCodeAt(h + 2)] >> 2, o4[u3++] = i5 >> 8 & 255, o4[u3++] = 255 & i5), o4;
              }, i4.fromByteArray = function(t5) {
                for (var i5, n5 = t5.length, r4 = n5 % 3, s4 = [], o4 = 0, u3 = n5 - r4; o4 < u3; o4 += 16383)
                  s4.push(((t6, i6) => {
                    for (var n6, r5 = [], s5 = o4; s5 < i6; s5 += 3)
                      r5.push(e3[(n6 = (t6[s5] << 16 & 16711680) + (t6[s5 + 1] << 8 & 65280) + (255 & t6[s5 + 2])) >> 18 & 63] + e3[n6 >> 12 & 63] + e3[n6 >> 6 & 63] + e3[63 & n6]);
                    return r5.join("");
                  })(t5, u3 < o4 + 16383 ? u3 : o4 + 16383));
                return 1 == r4 ? s4.push(e3[(i5 = t5[n5 - 1]) >> 2] + e3[i5 << 4 & 63] + "==") : 2 == r4 && s4.push(e3[(i5 = (t5[n5 - 2] << 8) + t5[n5 - 1]) >> 10] + e3[i5 >> 4 & 63] + e3[i5 << 2 & 63] + "="), s4.join("");
              };
              for (var e3 = [], r3 = [], s3 = "undefined" != typeof Uint8Array ? Uint8Array : Array, o3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", u2 = 0, a = o3.length; u2 < a; ++u2)
                e3[u2] = o3[u2], r3[o3.charCodeAt(u2)] = u2;
              function c(t5) {
                var i5 = t5.length;
                if (0 < i5 % 4)
                  throw new Error("Invalid string. Length must be a multiple of 4");
                return i5 = (t5 = -1 === (t5 = t5.indexOf("=")) ? i5 : t5) === i5 ? 0 : 4 - t5 % 4, [t5, i5];
              }
              r3["-".charCodeAt(0)] = 62, r3["_".charCodeAt(0)] = 63;
            }, function(t4, i4) {
              i4.read = function(t5, i5, n4, e3, r3) {
                var s3, o3, u2 = 8 * r3 - e3 - 1, a = (1 << u2) - 1, c = a >> 1, h = -7, f = n4 ? r3 - 1 : 0, l = n4 ? -1 : 1;
                for (r3 = t5[i5 + f], f += l, s3 = r3 & (1 << -h) - 1, r3 >>= -h, h += u2; 0 < h; s3 = 256 * s3 + t5[i5 + f], f += l, h -= 8)
                  ;
                for (o3 = s3 & (1 << -h) - 1, s3 >>= -h, h += e3; 0 < h; o3 = 256 * o3 + t5[i5 + f], f += l, h -= 8)
                  ;
                if (0 === s3)
                  s3 = 1 - c;
                else {
                  if (s3 === a)
                    return o3 ? NaN : 1 / 0 * (r3 ? -1 : 1);
                  o3 += Math.pow(2, e3), s3 -= c;
                }
                return (r3 ? -1 : 1) * o3 * Math.pow(2, s3 - e3);
              }, i4.write = function(t5, i5, n4, e3, r3, s3) {
                var o3, u2, a = 8 * s3 - r3 - 1, c = (1 << a) - 1, h = c >> 1, f = 23 === r3 ? Math.pow(2, -24) - Math.pow(2, -77) : 0, l = e3 ? 0 : s3 - 1, d = e3 ? 1 : -1;
                for (s3 = i5 < 0 || 0 === i5 && 1 / i5 < 0 ? 1 : 0, i5 = Math.abs(i5), isNaN(i5) || i5 === 1 / 0 ? (u2 = isNaN(i5) ? 1 : 0, o3 = c) : (o3 = Math.floor(Math.log(i5) / Math.LN2), i5 * (e3 = Math.pow(2, -o3)) < 1 && (o3--, e3 *= 2), 2 <= (i5 += 1 <= o3 + h ? f / e3 : f * Math.pow(2, 1 - h)) * e3 && (o3++, e3 /= 2), c <= o3 + h ? (u2 = 0, o3 = c) : 1 <= o3 + h ? (u2 = (i5 * e3 - 1) * Math.pow(2, r3), o3 += h) : (u2 = i5 * Math.pow(2, h - 1) * Math.pow(2, r3), o3 = 0)); 8 <= r3; t5[n4 + l] = 255 & u2, l += d, u2 /= 256, r3 -= 8)
                  ;
                for (o3 = o3 << r3 | u2, a += r3; 0 < a; t5[n4 + l] = 255 & o3, l += d, o3 /= 256, a -= 8)
                  ;
                t5[n4 + l - d] |= 128 * s3;
              };
            }, function(t4, i4) {
              var n4 = {}.toString;
              t4.exports = Array.isArray || function(t5) {
                return "[object Array]" == n4.call(t5);
              };
            }, function(t4, i4, n4) {
              var e3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, r3 = this && this.__spread || function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5 = t5.concat(e3(arguments[i5]));
                return t5;
              }, s3 = (Object.defineProperty(i4, "u", { value: true }), i4.PendingQueue = void 0, n4(0)), o3 = n4(5);
              function u2(t5, i5, n5, e4) {
                var r4 = this;
                this.ri = t5, this.gt = i5, this.Zt = n5, this.H = e4, this.byteLength = 0, this.size = 0, this.pendingDataSize = 0, this.cacheMap = /* @__PURE__ */ new Map(), t5.forEach(function(t6) {
                  r4.cacheMap.set(t6, new s3.Queue());
                });
              }
              u2.prototype.enqueue = function(t5, i5) {
                (i5 = this.cacheMap.get(i5)) && !i5.all().find(function(i6) {
                  return i6.content == t5.content;
                }) && (i5.enqueue(t5), i5 = o3.calculateMemSize(t5.content), this.pendingDataSize += i5, this.size++, this.Zt.totalAvailCache -= i5, this.enCallback) && this.enCallback(this.byteLength, this.size, this.pendingDataSize);
              }, u2.prototype.dequeue = function(t5) {
                return t5 = null == (t5 = this.cacheMap.get(t5)) ? void 0 : t5.dequeue(), this.size--, this.deCallback && this.deCallback(), t5;
              }, u2.prototype.findInQueue = function(t5) {
                var i5 = null == (i5 = this.cacheMap.get(t5.level)) ? void 0 : i5.all();
                return null == i5 ? void 0 : i5.find(function(i6) {
                  return i6.key === t5.key;
                });
              }, u2.prototype.readReportData = function(t5) {
                var i5 = r3(this.cacheMap.entries());
                return i5 = this.readData(i5, t5, true), this.reset(), { totalLen: i5.totalLen, reportDataArr: i5.resArr };
              }, u2.prototype.readStoreData = function(t5) {
                t5 = Math.ceil(this.pendingDataSize * t5);
                var i5 = r3(this.cacheMap.entries()).reverse();
                return i5 = this.readData(i5, t5, false), this.refresh(i5.totalLen), { totalLen: i5.totalLen, storeArr: i5.resArr };
              }, u2.prototype.readData = function(t5, i5, n5) {
                var r4 = [], s4 = 0;
                t:
                  for (var u3 = 0; u3 < t5.length; u3++)
                    for (var a = e3(t5[u3], 2), c = a[0], h = a[1]; h.size(); ) {
                      var f = this.dequeue(c);
                      if (r4.push(f), i5 < (s4 += o3.calculateMemSize(f.content)))
                        break t;
                    }
                return { totalLen: s4, resArr: r4 };
              }, u2.prototype.decodeReportData = function(t5) {
                var i5 = this;
                t5.forEach(function(t6) {
                  i5.enqueue(t6, t6.level);
                });
              }, u2.prototype.setListener = function(t5) {
                this.enCallback = t5.enCallback, this.deCallback = t5.deCallback;
              }, u2.prototype.getPendingDataInfo = function() {
                return { pendingDataSize: this.pendingDataSize, size: this.size };
              }, u2.prototype.refresh = function(t5) {
                this.pendingDataSize -= t5, this.Zt.totalAvailCache += t5;
              }, u2.prototype.reset = function() {
                this.byteLength = 0;
              }, i4.PendingQueue = u2;
            }, function(t4, i4, n4) {
              var e3 = this && this.__awaiter || function(t5, i5, n5, e4) {
                return new (n5 = n5 || Promise)(function(r4, s4) {
                  function o4(t6) {
                    try {
                      a(e4.next(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function u2(t6) {
                    try {
                      a(e4.throw(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function a(t6) {
                    var i6;
                    t6.done ? r4(t6.value) : ((i6 = t6.value) instanceof n5 ? i6 : new n5(function(t7) {
                      t7(i6);
                    })).then(o4, u2);
                  }
                  a((e4 = e4.apply(t5, i5 || [])).next());
                });
              }, r3 = this && this.__generator || function(t5, i5) {
                var n5, e4, r4, s4 = { label: 0, sent: function() {
                  if (1 & r4[0])
                    throw r4[1];
                  return r4[1];
                }, trys: [], ops: [] }, o4 = { next: u2(0), throw: u2(1), return: u2(2) };
                return "function" == typeof Symbol && (o4[Symbol.iterator] = function() {
                  return this;
                }), o4;
                function u2(o5) {
                  return function(u3) {
                    var a = [o5, u3];
                    if (n5)
                      throw new TypeError("Generator is already executing.");
                    for (; s4; )
                      try {
                        if (n5 = 1, e4 && (r4 = 2 & a[0] ? e4.return : a[0] ? e4.throw || ((r4 = e4.return) && r4.call(e4), 0) : e4.next) && !(r4 = r4.call(e4, a[1])).done)
                          return r4;
                        switch (e4 = 0, (a = r4 ? [2 & a[0], r4.value] : a)[0]) {
                          case 0:
                          case 1:
                            r4 = a;
                            break;
                          case 4:
                            return s4.label++, { value: a[1], done: false };
                          case 5:
                            s4.label++, e4 = a[1], a = [0];
                            continue;
                          case 7:
                            a = s4.ops.pop(), s4.trys.pop();
                            continue;
                          default:
                            if (!(r4 = 0 < (r4 = s4.trys).length && r4[r4.length - 1]) && (6 === a[0] || 2 === a[0])) {
                              s4 = 0;
                              continue;
                            }
                            if (3 === a[0] && (!r4 || a[1] > r4[0] && a[1] < r4[3]))
                              s4.label = a[1];
                            else if (6 === a[0] && s4.label < r4[1])
                              s4.label = r4[1], r4 = a;
                            else {
                              if (!(r4 && s4.label < r4[2])) {
                                r4[2] && s4.ops.pop(), s4.trys.pop();
                                continue;
                              }
                              s4.label = r4[2], s4.ops.push(a);
                            }
                        }
                        a = i5.call(t5, s4);
                      } catch (u4) {
                        a = [6, u4], e4 = 0;
                      } finally {
                        n5 = r4 = 0;
                      }
                    if (5 & a[0])
                      throw a[1];
                    return { value: a[0] ? a[1] : void 0, done: true };
                  };
                }
              }, s3 = (Object.defineProperty(i4, "u", { value: true }), i4.loadJS = void 0, n4(40));
              function o3(t5, i5, n5) {
                return (t5 = s3.decrypt(t5, i5)) && s3.hashMd5(t5) === n5 ? t5 : "";
              }
              i4.loadJS = function(t5, i5, n5, s4, u2, a, c) {
                var h = this;
                return new Promise(function(f, l) {
                  return e3(h, void 0, void 0, function() {
                    var h2, d, v, m, p;
                    return r3(this, function(g) {
                      switch (g.label) {
                        case 0:
                          if (h2 = "dy", t5)
                            return [3, 7];
                          g.label = 1;
                        case 1:
                          return g.trys.push([1, 5, , 6]), [4, i5.getItem("code")];
                        case 2:
                          return d = g.sent(), [4, i5.getItem("key")];
                        case 3:
                          return v = g.sent(), [4, i5.getItem("hash")];
                        case 4:
                          m = g.sent();
                          var b = o3(d, v, m) || a, _ = h2, y = c, w = document.getElementsByTagName("HEAD").item(0), S = document.createElement("script");
                          S.language = "javascript", S.type = "text/javascript", S.id = _, S.param = y;
                          try {
                            S.appendChild(document.createTextNode(b));
                          } catch (_2) {
                            S.text = b;
                          }
                          return w.appendChild(S), f(), [3, 6];
                        case 5:
                          return g.sent(), l(), [3, 6];
                        case 6:
                          return [2];
                        case 7:
                          if (window.ActiveXObject)
                            try {
                              p = new ActiveXObject("Msxml2.XMLHTTP");
                            } catch (g2) {
                              p = new ActiveXObject("Microsoft.XMLHTTP");
                            }
                          else
                            window.XMLHttpRequest && (p = new XMLHttpRequest());
                          return p.open("GET", n5, true), p.send(null), p.onreadystatechange = function() {
                            return e3(this, void 0, void 0, function() {
                              return r3(this, function(t6) {
                                switch (t6.label) {
                                  case 0:
                                    if (4 != p.readyState)
                                      return [3, 10];
                                    if (!(200 <= p.status && p.status < 300 || 0 == p.status || 304 == p.status))
                                      return [3, 8];
                                    t6.label = 1;
                                  case 1:
                                    return t6.trys.push([1, 6, , 7]), o3(p.responseText, s4, u2) ? [4, i5.setItem("code", p.responseText)] : [3, 5];
                                  case 2:
                                    return t6.sent(), [4, i5.setItem("key", s4)];
                                  case 3:
                                    return t6.sent(), [4, i5.setItem("hash", u2)];
                                  case 4:
                                    t6.sent(), t6.label = 5;
                                  case 5:
                                    return f(), [3, 7];
                                  case 6:
                                    return t6.sent(), l(), [3, 7];
                                  case 7:
                                    return [2];
                                  case 8:
                                    return l(), [2];
                                  case 9:
                                    return [3, 11];
                                  case 10:
                                  case 11:
                                    return [2];
                                }
                              });
                            });
                          }, [2];
                      }
                    });
                  });
                });
              };
            }, function(t4, i4, n4) {
              var e3 = this && this.__importDefault || function(t5) {
                return t5 && t5.u ? t5 : { default: t5 };
              }, r3 = (Object.defineProperty(i4, "u", { value: true }), i4.hashMd5 = i4.decrypt = void 0, e3(n4(41))), s3 = e3(n4(42)), o3 = e3(n4(43));
              i4.decrypt = function(t5, i5) {
                var n5 = "";
                try {
                  n5 = s3.default.decrypt(t5, i5).toString(o3.default);
                } catch (t6) {
                }
                return n5;
              }, i4.hashMd5 = function(t5) {
                return r3.default(t5).toString();
              };
            }, function(t4, n4) {
              t4.exports = i3;
            }, function(t4, i4) {
              t4.exports = n3;
            }, function(t4, i4) {
              t4.exports = e2;
            }, function(t4, i4, n4) {
              function e3() {
                this.logLevel = i4.ENUM_LOG_LEVEL.DISABLE;
              }
              Object.defineProperty(i4, "u", { value: true }), i4.ZegoLog = i4.ENUM_LOG_LEVEL = void 0, i4.ENUM_LOG_LEVEL = { DEBUG: 0, INFO: 1, WARN: 2, ERROR: 3, REPORT: 99, DISABLE: 100, debug: 0, info: 1, warn: 2, error: 3, report: 99, disable: 100 }, e3.prototype.setLogLevel = function(t5) {
                return void 0 !== (t5 = i4.ENUM_LOG_LEVEL[t5]) && (this.logLevel = t5, true);
              }, e3.prototype.debug = function() {
                for (var t5 = [], n5 = 0; n5 < arguments.length; n5++)
                  t5[n5] = arguments[n5];
                var e4 = t5.join(" ");
                this.logLevel !== i4.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i4.ENUM_LOG_LEVEL.DEBUG && console.debug(e4);
              }, e3.prototype.log = function() {
                for (var t5 = [], n5 = 0; n5 < arguments.length; n5++)
                  t5[n5] = arguments[n5];
                var e4 = t5.join(" ");
                this.logLevel !== i4.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i4.ENUM_LOG_LEVEL.INFO && console.log(e4);
              }, e3.prototype.info = function() {
                for (var t5 = [], n5 = 0; n5 < arguments.length; n5++)
                  t5[n5] = arguments[n5];
                var e4 = t5.join(" ");
                this.logLevel !== i4.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i4.ENUM_LOG_LEVEL.INFO && console.info(e4);
              }, e3.prototype.warn = function() {
                for (var t5 = [], n5 = 0; n5 < arguments.length; n5++)
                  t5[n5] = arguments[n5];
                var e4 = t5.join(" ");
                this.logLevel !== i4.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i4.ENUM_LOG_LEVEL.WARN && console.warn(e4);
              }, e3.prototype.error = function() {
                for (var t5 = [], n5 = 0; n5 < arguments.length; n5++)
                  t5[n5] = arguments[n5];
                var e4 = t5.join(" ");
                this.logLevel !== i4.ENUM_LOG_LEVEL.DISABLE && this.logLevel <= i4.ENUM_LOG_LEVEL.ERROR && console.error(e4);
              }, i4.ZegoLog = e3;
            }, function(t4, i4, n4) {
              function e3(t5) {
                this.keepLive = true, this.logger = t5, this.W = t5;
              }
              Object.defineProperty(i4, "u", { value: true }), i4.StateCenter = void 0, e3.prototype.isLogin = function() {
                return true;
              }, i4.StateCenter = e3;
            }, function(t4, i4, n4) {
              var e3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, r3 = this && this.__spread || function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5 = t5.concat(e3(arguments[i5]));
                return t5;
              }, s3 = (Object.defineProperty(i4, "u", { value: true }), i4.DynamicCode = void 0, n4(3));
              function o3() {
                this.init();
              }
              o3.prototype.init = function() {
                window.dyObj = {};
              }, o3.prototype.runExecution = function(t5, i5, n5) {
                t5 = new (Function.bind.apply(Function, r3([void 0], t5, [n5])))();
                try {
                  t5.apply(void 0, r3(i5));
                } catch (t6) {
                  s3.log.error(t6);
                }
              }, i4.DynamicCode = o3;
            }], o2 = {}, r2.m = s2, r2.c = o2, r2.d = function(t4, i4, n4) {
              r2.o(t4, i4) || Object.defineProperty(t4, i4, { enumerable: true, get: n4 });
            }, r2.r = function(t4) {
              "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t4, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t4, "u", { value: true });
            }, r2.t = function(t4, i4) {
              if (1 & i4 && (t4 = r2(t4)), 8 & i4)
                return t4;
              if (4 & i4 && "object" == typeof t4 && t4 && t4.u)
                return t4;
              var n4 = /* @__PURE__ */ Object.create(null);
              if (r2.r(n4), Object.defineProperty(n4, "default", { enumerable: true, value: t4 }), 2 & i4 && "string" != typeof t4)
                for (var e3 in t4)
                  r2.d(n4, e3, (function(i5) {
                    return t4[i5];
                  }).bind(null, e3));
              return n4;
            }, r2.n = function(t4) {
              var i4 = t4 && t4.u ? function() {
                return t4.default;
              } : function() {
                return t4;
              };
              return r2.d(i4, "a", i4), i4;
            }, r2.o = function(t4, i4) {
              return Object.prototype.hasOwnProperty.call(t4, i4);
            }, r2.p = "", r2(r2.s = 14);
            function r2(t4) {
              var i4;
              return (o2[t4] || (i4 = o2[t4] = { i: t4, l: false, exports: {} }, s2[t4].call(i4.exports, i4, i4.exports, r2), i4.l = true, i4)).exports;
            }
            var s2, o2;
          }(n2(6361), n2(4636), n2(955), n2(5178));
        }, 955: function(t2, i2, n2) {
          var e2;
          t2.exports = (e2 = n2(9021), n2(754), n2(4636), n2(9506), n2(7165), function() {
            var t3 = e2, i3 = t3.lib.BlockCipher, n3 = t3.algo, r2 = [], s2 = [], o2 = [], u2 = [], a = [], c = [], h = [], f = [], l = [], d = [];
            !function() {
              for (var t4 = [], i4 = 0; i4 < 256; i4++)
                t4[i4] = i4 < 128 ? i4 << 1 : i4 << 1 ^ 283;
              var n4 = 0, e3 = 0;
              for (i4 = 0; i4 < 256; i4++) {
                var v2 = e3 ^ e3 << 1 ^ e3 << 2 ^ e3 << 3 ^ e3 << 4;
                r2[n4] = v2 = v2 >>> 8 ^ 255 & v2 ^ 99, s2[v2] = n4;
                var m2, p = t4[n4], g = t4[p], b = t4[g];
                o2[n4] = (m2 = 257 * t4[v2] ^ 16843008 * v2) << 24 | m2 >>> 8, u2[n4] = m2 << 16 | m2 >>> 16, a[n4] = m2 << 8 | m2 >>> 24, c[n4] = m2, h[v2] = (m2 = 16843009 * b ^ 65537 * g ^ 257 * p ^ 16843008 * n4) << 24 | m2 >>> 8, f[v2] = m2 << 16 | m2 >>> 16, l[v2] = m2 << 8 | m2 >>> 24, d[v2] = m2, n4 ? (n4 = p ^ t4[t4[t4[b ^ p]]], e3 ^= t4[t4[e3]]) : n4 = e3 = 1;
              }
            }();
            var v = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], m = n3.AES = i3.extend({ _doReset: function() {
              if (!this._nRounds || this._keyPriorReset !== this._key) {
                for (var t4 = this._keyPriorReset = this._key, i4 = t4.words, n4 = t4.sigBytes / 4, e3 = 4 * ((this._nRounds = n4 + 6) + 1), s3 = this._keySchedule = [], o3 = 0; o3 < e3; o3++)
                  o3 < n4 ? s3[o3] = i4[o3] : (c2 = s3[o3 - 1], o3 % n4 ? n4 > 6 && o3 % n4 == 4 && (c2 = r2[c2 >>> 24] << 24 | r2[c2 >>> 16 & 255] << 16 | r2[c2 >>> 8 & 255] << 8 | r2[255 & c2]) : (c2 = r2[(c2 = c2 << 8 | c2 >>> 24) >>> 24] << 24 | r2[c2 >>> 16 & 255] << 16 | r2[c2 >>> 8 & 255] << 8 | r2[255 & c2], c2 ^= v[o3 / n4 | 0] << 24), s3[o3] = s3[o3 - n4] ^ c2);
                for (var u3 = this._invKeySchedule = [], a2 = 0; a2 < e3; a2++) {
                  if (o3 = e3 - a2, a2 % 4)
                    var c2 = s3[o3];
                  else
                    c2 = s3[o3 - 4];
                  u3[a2] = a2 < 4 || o3 <= 4 ? c2 : h[r2[c2 >>> 24]] ^ f[r2[c2 >>> 16 & 255]] ^ l[r2[c2 >>> 8 & 255]] ^ d[r2[255 & c2]];
                }
              }
            }, encryptBlock: function(t4, i4) {
              this._doCryptBlock(t4, i4, this._keySchedule, o2, u2, a, c, r2);
            }, decryptBlock: function(t4, i4) {
              var n4 = t4[i4 + 1];
              t4[i4 + 1] = t4[i4 + 3], t4[i4 + 3] = n4, this._doCryptBlock(t4, i4, this._invKeySchedule, h, f, l, d, s2), n4 = t4[i4 + 1], t4[i4 + 1] = t4[i4 + 3], t4[i4 + 3] = n4;
            }, _doCryptBlock: function(t4, i4, n4, e3, r3, s3, o3, u3) {
              for (var a2 = this._nRounds, c2 = t4[i4] ^ n4[0], h2 = t4[i4 + 1] ^ n4[1], f2 = t4[i4 + 2] ^ n4[2], l2 = t4[i4 + 3] ^ n4[3], d2 = 4, v2 = 1; v2 < a2; v2++) {
                var m2 = e3[c2 >>> 24] ^ r3[h2 >>> 16 & 255] ^ s3[f2 >>> 8 & 255] ^ o3[255 & l2] ^ n4[d2++], p = e3[h2 >>> 24] ^ r3[f2 >>> 16 & 255] ^ s3[l2 >>> 8 & 255] ^ o3[255 & c2] ^ n4[d2++], g = e3[f2 >>> 24] ^ r3[l2 >>> 16 & 255] ^ s3[c2 >>> 8 & 255] ^ o3[255 & h2] ^ n4[d2++], b = e3[l2 >>> 24] ^ r3[c2 >>> 16 & 255] ^ s3[h2 >>> 8 & 255] ^ o3[255 & f2] ^ n4[d2++];
                c2 = m2, h2 = p, f2 = g, l2 = b;
              }
              m2 = (u3[c2 >>> 24] << 24 | u3[h2 >>> 16 & 255] << 16 | u3[f2 >>> 8 & 255] << 8 | u3[255 & l2]) ^ n4[d2++], p = (u3[h2 >>> 24] << 24 | u3[f2 >>> 16 & 255] << 16 | u3[l2 >>> 8 & 255] << 8 | u3[255 & c2]) ^ n4[d2++], g = (u3[f2 >>> 24] << 24 | u3[l2 >>> 16 & 255] << 16 | u3[c2 >>> 8 & 255] << 8 | u3[255 & h2]) ^ n4[d2++], b = (u3[l2 >>> 24] << 24 | u3[c2 >>> 16 & 255] << 16 | u3[h2 >>> 8 & 255] << 8 | u3[255 & f2]) ^ n4[d2++], t4[i4] = m2, t4[i4 + 1] = p, t4[i4 + 2] = g, t4[i4 + 3] = b;
            }, keySize: 8 });
            t3.AES = i3._createHelper(m);
          }(), e2.AES);
        }, 1025: function(t2, i2, n2) {
          var e2, r2;
          t2.exports = (e2 = n2(9021), r2 = e2.enc.Utf8, void (e2.algo.HMAC = e2.lib.Base.extend({ init: function(t3, i3) {
            t3 = this._hasher = new t3.init(), "string" == typeof i3 && (i3 = r2.parse(i3));
            var n3 = t3.blockSize, e3 = 4 * n3;
            i3.sigBytes > e3 && (i3 = t3.finalize(i3)), i3.clamp();
            for (var s2 = this._oKey = i3.clone(), o2 = this._iKey = i3.clone(), u2 = s2.words, a = o2.words, c = 0; c < n3; c++)
              u2[c] ^= 1549556828, a[c] ^= 909522486;
            s2.sigBytes = o2.sigBytes = e3, this.reset();
          }, reset: function() {
            var t3 = this._hasher;
            t3.reset(), t3.update(this._iKey);
          }, update: function(t3) {
            return this._hasher.update(t3), this;
          }, finalize: function(t3) {
            var i3 = this._hasher, n3 = i3.finalize(t3);
            return i3.reset(), i3.finalize(this._oKey.clone().concat(n3));
          } })));
        }, 1290: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { BBG: function() {
            return e2;
          }, Bnp: function() {
            return U;
          }, BsE: function() {
            return ft;
          }, CLV: function() {
            return vt;
          }, CcO: function() {
            return Z;
          }, E8q: function() {
            return C;
          }, EPo: function() {
            return wi;
          }, E_I: function() {
            return Ct;
          }, Eb9: function() {
            return Gt;
          }, Ehk: function() {
            return et;
          }, FGD: function() {
            return Qi;
          }, FSV: function() {
            return y;
          }, GV2: function() {
            return mt;
          }, HGP: function() {
            return dt;
          }, HHW: function() {
            return a;
          }, I2V: function() {
            return nt;
          }, I8R: function() {
            return Pi;
          }, IGr: function() {
            return di;
          }, IRO: function() {
            return Xt;
          }, ISq: function() {
            return Yt;
          }, Ifp: function() {
            return H;
          }, JFd: function() {
            return Si;
          }, JGn: function() {
            return rt;
          }, JX$: function() {
            return li;
          }, Jli: function() {
            return V;
          }, K15: function() {
            return ht;
          }, K4A: function() {
            return f;
          }, K74: function() {
            return oi;
          }, KBL: function() {
            return ni;
          }, KWc: function() {
            return A;
          }, KY4: function() {
            return g;
          }, Kw2: function() {
            return Vt;
          }, LBe: function() {
            return ji;
          }, La0: function() {
            return N;
          }, Lji: function() {
            return Ut;
          }, Loj: function() {
            return ct;
          }, M9m: function() {
            return w;
          }, MDS: function() {
            return Nt;
          }, MSI: function() {
            return ri;
          }, N$A: function() {
            return Yi;
          }, NYT: function() {
            return Li;
          }, Nw2: function() {
            return Dt;
          }, O2K: function() {
            return q;
          }, OKY: function() {
            return T;
          }, OYv: function() {
            return Gi;
          }, Ox5: function() {
            return Zt;
          }, Q4K: function() {
            return Y;
          }, Q4y: function() {
            return yt;
          }, Q9_: function() {
            return vi;
          }, QRg: function() {
            return D;
          }, QU$: function() {
            return lt;
          }, Qld: function() {
            return W;
          }, QpU: function() {
            return Ui;
          }, Qu8: function() {
            return I;
          }, R46: function() {
            return It;
          }, RM$: function() {
            return ii;
          }, Rbr: function() {
            return Mt;
          }, Rfl: function() {
            return it;
          }, RnN: function() {
            return Ai;
          }, SK: function() {
            return fi;
          }, SKc: function() {
            return Lt;
          }, SPm: function() {
            return E;
          }, Szn: function() {
            return o2;
          }, Tk2: function() {
            return $t;
          }, TlX: function() {
            return gi;
          }, Toj: function() {
            return jt;
          }, UY3: function() {
            return Pt;
          }, V9q: function() {
            return v;
          }, VMq: function() {
            return B;
          }, VdQ: function() {
            return ci;
          }, W0Q: function() {
            return Et;
          }, W8t: function() {
            return xt;
          }, WaK: function() {
            return z;
          }, Wgj: function() {
            return r2;
          }, WuQ: function() {
            return Vi;
          }, XLj: function() {
            return P;
          }, XO3: function() {
            return S;
          }, XQ0: function() {
            return s2;
          }, XR3: function() {
            return at;
          }, Y9k: function() {
            return Hi;
          }, YNv: function() {
            return Ni;
          }, YOg: function() {
            return Ht;
          }, Ywv: function() {
            return ki;
          }, ZIe: function() {
            return _;
          }, Ze2: function() {
            return Qt;
          }, _2$: function() {
            return Jt;
          }, _ny: function() {
            return ei;
          }, aSL: function() {
            return X;
          }, amU: function() {
            return pt;
          }, aww: function() {
            return Bt;
          }, b9b: function() {
            return $;
          }, bp1: function() {
            return Oi;
          }, bzn: function() {
            return Tt;
          }, c2i: function() {
            return gt;
          }, cDv: function() {
            return St;
          }, cIs: function() {
            return Kt;
          }, cuT: function() {
            return qt;
          }, d0o: function() {
            return st;
          }, d8C: function() {
            return tt;
          }, d9R: function() {
            return xi;
          }, de8: function() {
            return Q;
          }, dk2: function() {
            return d;
          }, dnG: function() {
            return m;
          }, dw7: function() {
            return zt;
          }, fcT: function() {
            return Fi;
          }, fgh: function() {
            return x;
          }, fjj: function() {
            return kt;
          }, fkL: function() {
            return O;
          }, gPJ: function() {
            return qi;
          }, gkP: function() {
            return c;
          }, hkn: function() {
            return At;
          }, iMZ: function() {
            return Bi;
          }, ibZ: function() {
            return _i;
          }, ifL: function() {
            return hi;
          }, it$: function() {
            return b;
          }, ivM: function() {
            return ai;
          }, kEb: function() {
            return si;
          }, kEs: function() {
            return Rt;
          }, kNG: function() {
            return Di;
          }, kVV: function() {
            return zi;
          }, kc8: function() {
            return p;
          }, kkS: function() {
            return ti;
          }, lWs: function() {
            return J;
          }, mLk: function() {
            return u2;
          }, mMR: function() {
            return bi;
          }, msE: function() {
            return R;
          }, n9B: function() {
            return G;
          }, n9u: function() {
            return K;
          }, nkr: function() {
            return Ri;
          }, ny0: function() {
            return ot;
          }, oLS: function() {
            return k;
          }, p1K: function() {
            return Wt;
          }, qPT: function() {
            return ut;
          }, rGc: function() {
            return h;
          }, rS5: function() {
            return j;
          }, rp8: function() {
            return Ft;
          }, ruA: function() {
            return Ot;
          }, s1U: function() {
            return l;
          }, sk8: function() {
            return yi;
          }, t6w: function() {
            return mi;
          }, u7D: function() {
            return wt;
          }, v$W: function() {
            return Ii;
          }, vBC: function() {
            return L;
          }, wQ8: function() {
            return bt;
          }, wT7: function() {
            return pi;
          }, x_Q: function() {
            return Ji;
          }, xcT: function() {
            return Mi;
          }, xcY: function() {
            return Ei;
          }, y4U: function() {
            return ui;
          }, z3d: function() {
            return M;
          }, zC0: function() {
            return F;
          }, zUi: function() {
            return Ti;
          }, z_2: function() {
            return _t;
          }, zub: function() {
            return Ci;
          } });
          var e2 = "zc.0", r2 = "zc.1", s2 = "zc.csr", o2 = "zc.cs", u2 = "zc.ds", a = "zc.hvc.0", c = "zc.sps.0", h = "zc.sps.1", f = "zc.sps.0.0", l = "zc.spsr.0.0", d = "zc.sps.1.0", v = "zc.spsr.1.0", m = "zc.smsi.0", p = "zc.opsu", g = "zc.opur", b = "zc.sao", _ = "zc.stoto", y = "zc.psh.0", w = "zc.psh.1", S = "zc.tsh.rngn.0", E = "zc.tsh.rngn.1", k = "zc.tsh.dgnb", O = "zc.sc.al", I = "zc.s.cmt", R = "zc.s.sss", T = "zsc.ssgn", C = "zsc.ccgl", A = "zsc.ccns", z = "zsc.ucgl", D = "zc.p.0.sp.0", N = "zc.p.ps", P = "zc.p.0.ocpss", M = "zc.p.cps.0", x = "zc.p.0.ocos", j = "zc.p.0.oslds", q = "zc.p.0.ogrd", L = "zc.p.0.orpe", B = "zc.p.0.orci.1", U = "zc.p.0.oic", G = "zc.p.0.ocsc", J = "zc.p.0.oicsc", F = "zc.p.0.rp", H = "zc.p.0.spqt", V = "zc.p.0.upq", Q = "zc.p.0.orrs", Y = "zc.p.0.orcs", K = "zc.p.0.sci", Z = "zc.p.0.psr", X = "zc.p.0.sp.1", W = "zc.p.0.od", $ = "zc.p.0.ssl.0", tt = "zc.p.0.ssl.1", it = "zc.p.0.heb", nt = "zc.p.0.ss", et = "zc.p.0.rgn", rt = "zc.p.0.sgn", st = "zc.p.0.hdgn", ot = "zc.p.0.sb.0", ut = "zc.p.0.scd", at = "zc.p.0.scg", ct = "zc.p.0.rsi", ht = "zc.p.0.croic", ft = "zc.p.0.tc", lt = "zc.p.1.sp.0", dt = "zc.p.ocpss.1", vt = "zc.p.cps.1", mt = "zc.p.hcsws.1", pt = "zc.p.ocos.1", gt = "zc.p.oslds.1", bt = "zc.p.ormd.1", _t = "zc.p.orpe.1", yt = "zc.p.orci.1.1", wt = "zc.p.oic.1", St = "zc.p.ocsc.1", Et = "zc.p.oicsc.1", kt = "zc.p.opcsc.1", Ot = "zc.p.rp.1", It = "zc.p.spqt.1", Rt = "zc.p.upq.1", Tt = "zc.p.gs.1", Ct = "zc.p.orrs.1", At = "zc.p.orcs.1", zt = "zc.p.orss.1", Dt = "zc.p.ogrs.1", Nt = "zc.p.gvc", Pt = "zc.p.sci.1", Mt = "zc.p.psr.1", xt = "zc.p.1.sp.1", jt = "zc.p.od.1", qt = "zc.p.ssl.1", Lt = "zc.p.ssl.1.1", Bt = "zc.p.1.nqi", Ut = "zc.p.1.rgn", Gt = "zc.p.1.sgn", Jt = "zc.p.1.hdgn", Ft = "zc.p.1.scd", Ht = "zc.p.1.scg", Vt = "zc.p.1.oce", Qt = "zc.p.1.smsbpm", Yt = "zc.p.1.sms", Kt = "zc.p.1.mst", Zt = "zc.p.1.spsf", Xt = "zc.p.1.rsi", Wt = "zc.p.1.croic", $t = "zc.uslq", ti = "zc.sr.uud", ii = "zc.hpqd.pl", ni = "zc.hpqd.pu", ei = "zc.hcid.pu", ri = "zc.sr.sd", si = "zc.sr.cisn", oi = "zc.sr.chdtr", ui = "zc.sr.sprd", ai = "zc.sr.rrp.0", ci = "zc.sr.ccptr", hi = "zc.sr.srptc.0", fi = "zc.sr.sct.0", li = "zc.sr.csi.0", di = "zc.sr.cic.0", vi = "zc.sr.cnia.0", mi = "zc.p.scv", pi = "zc.sh.msbss", gi = "zc.sh.ms", bi = "zc.sh.psl", _i = "zc.srs", yi = "zc.irs", wi = "zc.ssh", Si = "zc.s.nqga", Ei = "zc.ups.0", ki = "zc.p.0.gqs", Oi = "zc.p.1.gqs", Ii = "zc.crh.a.0", Ri = "zc.ctcc.a.0", Ti = "zc.hrh.smt.0", Ci = "zc.hrh.smt.1", Ai = "zc.hrh.grdbc", zi = "zc.vam.rv", Di = "zc.vam.iwg", Ni = "zc.vam.vam", Pi = "zc.svc", Mi = "zc.sac", xi = "zc.rp", ji = "zc.emo", qi = "zc.asi", Li = "zc.mpsv.0", Bi = "zc.mpsa.0", Ui = "zc.mm", Gi = "zc.mpsv.1", Ji = "zc.mpsa.1", Fi = "zc.mapa.1", Hi = "zc.mapv.1", Vi = "zc.at", Qi = "zc.rt", Yi = "zc.ht";
        }, 1350: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { E: function() {
            return s2;
          } });
          var e2 = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, r2 = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a]);
              };
            }
          }, s2 = function() {
            function t3() {
              this.isFirstNode = true, this.isLastNode = true, this.hasAnother = false;
            }
            return t3.prototype.connect = function(t4) {
              return e2(this, void 0, void 0, function() {
                return r2(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return this.next = t4, this.output ? [4, t4.setInput(this.output)] : [3, 2];
                    case 1:
                      i3.sent(), i3.label = 2;
                    case 2:
                      return [2, t4];
                  }
                });
              });
            }, t3.prototype.disconnect = function(t4) {
              return e2(this, void 0, void 0, function() {
                return r2(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return this.next ? [4, this.next.setInput(null, t4)] : [3, 2];
                    case 1:
                      i3.sent(), this.next = void 0, i3.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }, t3.prototype.setNodePos = function(t4, i3, n3) {
              void 0 !== t4 && (this.isFirstNode = t4), void 0 !== i3 && (this.isLastNode = i3), "boolean" == typeof n3 && (this.hasAnother = !n3);
            }, t3;
          }();
        }, 2638: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { Am: function() {
            return A;
          }, B7: function() {
            return j;
          }, B8: function() {
            return V;
          }, Bl: function() {
            return U;
          }, D2: function() {
            return B;
          }, Dg: function() {
            return p;
          }, EA: function() {
            return M;
          }, EN: function() {
            return J;
          }, Es: function() {
            return D;
          }, F1: function() {
            return u2;
          }, FV: function() {
            return y;
          }, Hb: function() {
            return h;
          }, Kk: function() {
            return k;
          }, Ks: function() {
            return c;
          }, LO: function() {
            return g;
          }, Lx: function() {
            return S;
          }, Mo: function() {
            return T;
          }, NI: function() {
            return P;
          }, NP: function() {
            return I;
          }, T_: function() {
            return O;
          }, UP: function() {
            return x;
          }, UV: function() {
            return z;
          }, X5: function() {
            return m;
          }, Xb: function() {
            return v;
          }, ZV: function() {
            return E;
          }, b3: function() {
            return G;
          }, bD: function() {
            return o2;
          }, d7: function() {
            return _;
          }, di: function() {
            return w;
          }, eZ: function() {
            return F;
          }, ey: function() {
            return q;
          }, h7: function() {
            return H;
          }, jZ: function() {
            return R;
          }, ku: function() {
            return N;
          }, qP: function() {
            return L;
          }, qt: function() {
            return s2;
          }, t0: function() {
            return r2.t0;
          }, uv: function() {
            return b;
          }, wN: function() {
            return C;
          }, wl: function() {
            return K;
          }, xb: function() {
            return d;
          } });
          var e2, r2 = n2(3052), s2 = "3.11.0", o2 = "2025-10-24 20:49:13", u2 = void 0;
          !function(t3) {
            t3[t3.debug = 0] = "debug", t3[t3.info = 1] = "info", t3[t3.warn = 2] = "warn", t3[t3.error = 3] = "error", t3[t3.report = 99] = "report", t3[t3.disable = 100] = "disable";
          }(e2 || (e2 = {}));
          var a, c, h;
          !function(t3) {
            t3[t3.disable = 0] = "disable", t3[t3.websocket = 1] = "websocket", t3[t3.https = 2] = "https";
          }(a || (a = {})), function(t3) {
            t3[t3.SDKProject_ZegoWebRTC = 6] = "SDKProject_ZegoWebRTC", t3[t3.SDKProject_ZegoMiniProgram = 7] = "SDKProject_ZegoMiniProgram";
          }(c || (c = {})), function(t3) {
            t3[t3.UDP = 0] = "UDP", t3[t3.RTMP = 1] = "RTMP", t3[t3.FLV = 2] = "FLV", t3[t3.HLS = 3] = "HLS", t3[t3.WEBRTC = 4] = "WEBRTC";
          }(h || (h = {}));
          var f, l, d = { disconnected: 0, connecting: 1, connected: 2 }, v = 1, m = 2, p = 3, g = 256, b = 1024, _ = 1e3, y = 1, w = 50, S = 1, E = 3600, k = 52e6, O = { waiting_url: 1, tryPublish: 2, update_info: 3, publishing: 4, stop: 5, retryPublish: 6 }, I = { liveNone: 0, liveBegin: 2001, liveEnd: 2002, liveUpdate: 2003 }, R = 101, T = (f = 1, function() {
            return f++;
          }), C = function() {
            var t3 = 1;
            return function() {
              return t3++;
            };
          }();
          !function(t3) {
            t3[t3.ClientType_None = 0] = "ClientType_None", t3[t3.ClientType_H5 = 1] = "ClientType_H5", t3[t3.ClientType_SmallPragram = 2] = "ClientType_SmallPragram", t3[t3.ClientType_Webrtc = 3] = "ClientType_Webrtc";
          }(l || (l = {}));
          var A, z, D, N, P, M, x, j, q, L, B, U, G, J = { added: 12001, deleted: 12002, updated: 12003 }, F = { start: 0, error: 1, retry: 2 }, H = { start: 0, error: 1, retry: 2, stop: 3 };
          !function(t3) {
            t3[t3.Default = 0] = "Default", t3[t3.Extranet = 1] = "Extranet", t3[t3.Intranet = 2] = "Intranet";
          }(A || (A = {})), function(t3) {
            t3[t3.logout = 0] = "logout", t3[t3.trylogin = 1] = "trylogin", t3[t3.login = 2] = "login";
          }(z || (z = {})), function(t3) {
            t3[t3.logout = 0] = "logout", t3[t3.trylogin = 1] = "trylogin", t3[t3.login = 2] = "login", t3[t3.reconnect = 3] = "reconnect";
          }(D || (D = {})), function(t3) {
            t3[t3.stop = 0] = "stop", t3[t3.start = 1] = "start";
          }(N || (N = {})), function(t3) {
            t3[t3.CDN = 0] = "CDN", t3[t3.RTC = 1] = "RTC", t3[t3.L3 = 2] = "L3", t3[t3.DG = 3] = "DG";
          }(P || (P = {})), function(t3) {
            t3[t3.useAnalyzer = 0] = "useAnalyzer", t3[t3.useWorklet = 1] = "useWorklet";
          }(M || (M = {})), function(t3) {
            t3[t3.Default = 3] = "Default", t3[t3.StandardVideoCall = 4] = "StandardVideoCall", t3[t3.HighVideoCall = 5] = "HighVideoCall", t3[t3.StandardChatroom = 6] = "StandardChatroom", t3[t3.HighQualityChatroom = 7] = "HighQualityChatroom", t3[t3.Broadcast = 8] = "Broadcast", t3[t3.Karaoke = 9] = "Karaoke", t3[t3.UNKNOWN = 100] = "UNKNOWN";
          }(x || (x = {})), function(t3) {
            t3.WIN32 = "WIN32", t3.MAC = "Mac", t3.ANDROID = "Android", t3.LINUX = "Linux", t3.IOS = "iOS", t3.Harmony = "Harmony", t3.UNKNOWN = "WTF";
          }(j || (j = {})), function(t3) {
            t3.CDN = "cdn", t3.L3 = "l3", t3.RTC = "rtc";
          }(q || (q = {})), function(t3) {
            t3[t3.RTC = 0] = "RTC", t3[t3.CDN = 1] = "CDN", t3[t3.L3 = 2] = "L3", t3[t3.DG = 3] = "DG", t3[t3.CUSTOM = 5] = "CUSTOM";
          }(L || (L = {})), function(t3) {
            t3[t3.offline = 0] = "offline", t3[t3.online = 1] = "online";
          }(B || (B = {})), function(t3) {
            t3[t3.MinQuality = 0] = "MinQuality", t3[t3.DieQuality = 0] = "DieQuality", t3[t3.PoorMinQuality = 1] = "PoorMinQuality", t3[t3.MiddleMinQuality = 30] = "MiddleMinQuality", t3[t3.GoodMinQuality = 60] = "GoodMinQuality", t3[t3.ExcellentMinQuality = 85] = "ExcellentMinQuality", t3[t3.MaxQuality = 100] = "MaxQuality";
          }(U || (U = {})), function(t3) {
            t3[t3.Unknown = -1] = "Unknown", t3[t3.Excellent = 0] = "Excellent", t3[t3.Good = 1] = "Good", t3[t3.Middle = 2] = "Middle", t3[t3.Poor = 3] = "Poor", t3[t3.Die = 4] = "Die";
          }(G || (G = {}));
          var V, Q, Y = function() {
            function t3(t4, i3) {
              void 0 === t4 && (t4 = null), void 0 === i3 && (i3 = null), this.next = null, this.prev = null, this._id = t4, this._data = i3;
            }
            return Object.defineProperty(t3.prototype, "id", { get: function() {
              return this._id ? this._id : null;
            }, set: function(t4) {
              this._id = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "data", { get: function() {
              return this._data;
            }, set: function(t4) {
              this._data = t4;
            }, enumerable: false, configurable: true }), t3.prototype.hasNext = function() {
              return this.next && this.next.id;
            }, t3.prototype.hasPrev = function() {
              return this.prev && this.prev.id;
            }, t3;
          }(), K = function() {
            function t3() {
              this.start = new Y(), this.end = new Y(), this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null;
            }
            return t3.prototype.insertBefore = function(t4, i3) {
              var n3 = new Y(this._idCounter, i3);
              return n3.next = t4, n3.prev = t4.prev, t4.prev && (t4.prev.next = n3), t4.prev = n3, ++this._idCounter, ++this._numNodes, n3;
            }, t3.prototype.addLast = function(t4) {
              return this.insertBefore(this.end, t4);
            }, t3.prototype.add = function(t4) {
              return this.addLast(t4);
            }, t3.prototype.getFirst = function() {
              return 0 === this._numNodes ? null : this.start.next;
            }, t3.prototype.getLast = function() {
              return 0 === this._numNodes ? null : this.end.prev;
            }, t3.prototype.size = function() {
              return this._numNodes;
            }, t3.prototype.getFromFirst = function(t4) {
              var i3 = 0, n3 = this.start.next;
              if (t4 >= 0)
                for (; i3 < t4 && null !== n3; )
                  n3 = n3.next, ++i3;
              else
                n3 = null;
              if (null === n3)
                throw "Index out of bounds.";
              return n3;
            }, t3.prototype.get = function(t4) {
              return 0 === t4 ? this.getFirst() : t4 === this._numNodes - 1 ? this.getLast() : this.getFromFirst(t4);
            }, t3.prototype.remove = function(t4) {
              return t4.prev && (t4.prev.next = t4.next), t4.next && (t4.next.prev = t4.prev), --this._numNodes, t4;
            }, t3.prototype.removeFirst = function() {
              var t4 = null;
              return this._numNodes > 0 && this.start.next && (t4 = this.remove(this.start.next)), t4;
            }, t3.prototype.removeLast = function() {
              var t4 = null;
              return this._numNodes > 0 && this.end.prev && (t4 = this.remove(this.end.prev)), t4;
            }, t3.prototype.removeAll = function() {
              this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0;
            }, t3.prototype.each = function(t4) {
              for (var i3 = this.start; i3.hasNext(); )
                t4(i3 = i3.next);
            }, t3.prototype.find = function(t4) {
              for (var i3 = this.start, n3 = false, e3 = null; i3.hasNext() && !n3; )
                t4(i3 = i3.next) && (e3 = i3, n3 = true);
              return e3;
            }, t3.prototype.map = function(t4) {
              for (var i3 = this.start, n3 = []; i3.hasNext(); )
                t4(i3 = i3.next) && n3.push(i3);
              return n3;
            }, t3.prototype.push = function(t4) {
              return this.addLast(t4);
            }, t3.prototype.unshift = function(t4) {
              this.insertBefore(this._numNodes > 0 ? this.start.next : this.end, t4);
            }, t3.prototype.pop = function() {
              return this.removeLast();
            }, t3.prototype.shift = function() {
              return this.removeFirst();
            }, t3;
          }();
          !function(t3) {
            t3.ONLY_BASELINE = "only_baseline", t3.HARD_SOFT_ENCODEC_FIRST = "hard_or_soft_encodec_first", t3.HIGH_PROFILE_FIRST = "high_profile_first";
          }(V || (V = {})), function(t3) {
            t3[t3.None = 0] = "None", t3[t3.Vocalist = 1] = "Vocalist", t3[t3.BackingSinging = 2] = "BackingSinging";
          }(Q || (Q = {}));
        }, 2799: function(t2, i2, n2) {
          var e2;
          "undefined" != typeof self && self, e2 = (t3, i3) => (() => {
            var n3 = { 955: function(t4, i4, n4) {
              var e4;
              t4.exports = (e4 = n4(21), n4(754), n4(636), n4(506), n4(165), function() {
                var t5 = e4, i5 = t5.lib.BlockCipher, n5 = t5.algo, r3 = [], s3 = [], o2 = [], u2 = [], a = [], c = [], h = [], f = [], l = [], d = [];
                !function() {
                  for (var t6 = [], i6 = 0; i6 < 256; i6++)
                    t6[i6] = i6 < 128 ? i6 << 1 : i6 << 1 ^ 283;
                  var n6 = 0, e5 = 0;
                  for (i6 = 0; i6 < 256; i6++) {
                    var v2 = e5 ^ e5 << 1 ^ e5 << 2 ^ e5 << 3 ^ e5 << 4;
                    r3[n6] = v2 = v2 >>> 8 ^ 255 & v2 ^ 99, s3[v2] = n6;
                    var m2 = t6[n6], p = t6[m2], g = t6[p], b = 257 * t6[v2] ^ 16843008 * v2;
                    o2[n6] = b << 24 | b >>> 8, u2[n6] = b << 16 | b >>> 16, a[n6] = b << 8 | b >>> 24, c[n6] = b, h[v2] = (b = 16843009 * g ^ 65537 * p ^ 257 * m2 ^ 16843008 * n6) << 24 | b >>> 8, f[v2] = b << 16 | b >>> 16, l[v2] = b << 8 | b >>> 24, d[v2] = b, n6 ? (n6 = m2 ^ t6[t6[t6[g ^ m2]]], e5 ^= t6[t6[e5]]) : n6 = e5 = 1;
                  }
                }();
                var v = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54], m = n5.AES = i5.extend({ t: function() {
                  if (!this.i || this.u !== this.h) {
                    for (var t6 = this.u = this.h, i6 = t6.words, n6 = t6.sigBytes / 4, e5 = 4 * ((this.i = n6 + 6) + 1), s4 = this._ = [], o3 = 0; o3 < e5; o3++)
                      o3 < n6 ? s4[o3] = i6[o3] : (c2 = s4[o3 - 1], o3 % n6 ? n6 > 6 && o3 % n6 == 4 && (c2 = r3[c2 >>> 24] << 24 | r3[c2 >>> 16 & 255] << 16 | r3[c2 >>> 8 & 255] << 8 | r3[255 & c2]) : (c2 = r3[(c2 = c2 << 8 | c2 >>> 24) >>> 24] << 24 | r3[c2 >>> 16 & 255] << 16 | r3[c2 >>> 8 & 255] << 8 | r3[255 & c2], c2 ^= v[o3 / n6 | 0] << 24), s4[o3] = s4[o3 - n6] ^ c2);
                    for (var u3 = this.l = [], a2 = 0; a2 < e5; a2++) {
                      if (o3 = e5 - a2, a2 % 4)
                        var c2 = s4[o3];
                      else
                        c2 = s4[o3 - 4];
                      u3[a2] = a2 < 4 || o3 <= 4 ? c2 : h[r3[c2 >>> 24]] ^ f[r3[c2 >>> 16 & 255]] ^ l[r3[c2 >>> 8 & 255]] ^ d[r3[255 & c2]];
                    }
                  }
                }, encryptBlock: function(t6, i6) {
                  this.v(t6, i6, this._, o2, u2, a, c, r3);
                }, decryptBlock: function(t6, i6) {
                  var n6 = t6[i6 + 1];
                  t6[i6 + 1] = t6[i6 + 3], t6[i6 + 3] = n6, this.v(t6, i6, this.l, h, f, l, d, s3), n6 = t6[i6 + 1], t6[i6 + 1] = t6[i6 + 3], t6[i6 + 3] = n6;
                }, v: function(t6, i6, n6, e5, r4, s4, o3, u3) {
                  for (var a2 = this.i, c2 = t6[i6] ^ n6[0], h2 = t6[i6 + 1] ^ n6[1], f2 = t6[i6 + 2] ^ n6[2], l2 = t6[i6 + 3] ^ n6[3], d2 = 4, v2 = 1; v2 < a2; v2++) {
                    var m2 = e5[c2 >>> 24] ^ r4[h2 >>> 16 & 255] ^ s4[f2 >>> 8 & 255] ^ o3[255 & l2] ^ n6[d2++], p = e5[h2 >>> 24] ^ r4[f2 >>> 16 & 255] ^ s4[l2 >>> 8 & 255] ^ o3[255 & c2] ^ n6[d2++], g = e5[f2 >>> 24] ^ r4[l2 >>> 16 & 255] ^ s4[c2 >>> 8 & 255] ^ o3[255 & h2] ^ n6[d2++], b = e5[l2 >>> 24] ^ r4[c2 >>> 16 & 255] ^ s4[h2 >>> 8 & 255] ^ o3[255 & f2] ^ n6[d2++];
                    c2 = m2, h2 = p, f2 = g, l2 = b;
                  }
                  m2 = (u3[c2 >>> 24] << 24 | u3[h2 >>> 16 & 255] << 16 | u3[f2 >>> 8 & 255] << 8 | u3[255 & l2]) ^ n6[d2++], p = (u3[h2 >>> 24] << 24 | u3[f2 >>> 16 & 255] << 16 | u3[l2 >>> 8 & 255] << 8 | u3[255 & c2]) ^ n6[d2++], g = (u3[f2 >>> 24] << 24 | u3[l2 >>> 16 & 255] << 16 | u3[c2 >>> 8 & 255] << 8 | u3[255 & h2]) ^ n6[d2++], b = (u3[l2 >>> 24] << 24 | u3[c2 >>> 16 & 255] << 16 | u3[h2 >>> 8 & 255] << 8 | u3[255 & f2]) ^ n6[d2++], t6[i6] = m2, t6[i6 + 1] = p, t6[i6 + 2] = g, t6[i6 + 3] = b;
                }, keySize: 8 });
                t5.AES = i5.p(m);
              }(), e4.AES);
            }, 165: function(t4, i4, n4) {
              var e4;
              t4.exports = (e4 = n4(21), n4(506), void (e4.lib.Cipher || function() {
                var t5 = e4, i5 = t5.lib, n5 = i5.Base, r3 = i5.WordArray, s3 = i5.BufferedBlockAlgorithm, o2 = t5.enc, u2 = o2.Base64, a = t5.algo.EvpKDF, c = i5.Cipher = s3.extend({ cfg: n5.extend(), createEncryptor: function(t6, i6) {
                  return this.create(this.S, t6, i6);
                }, createDecryptor: function(t6, i6) {
                  return this.create(this.T, t6, i6);
                }, init: function(t6, i6, n6) {
                  this.cfg = this.cfg.extend(n6), this.C = t6, this.h = i6, this.reset();
                }, reset: function() {
                  s3.reset.call(this), this.t();
                }, process: function(t6) {
                  return this.m(t6), this.O();
                }, finalize: function(t6) {
                  return t6 && this.m(t6), this.R();
                }, keySize: 4, ivSize: 4, S: 1, T: 2, p: function() {
                  function t6(t7) {
                    return "string" == typeof t7 ? b : p;
                  }
                  return function(i6) {
                    return { encrypt: function(n6, e5, r4) {
                      return t6(e5).encrypt(i6, n6, e5, r4);
                    }, decrypt: function(n6, e5, r4) {
                      return t6(e5).decrypt(i6, n6, e5, r4);
                    } };
                  };
                }() }), h = (i5.StreamCipher = c.extend({ R: function() {
                  return this.O(true);
                }, blockSize: 1 }), t5.mode = {}), f = i5.BlockCipherMode = n5.extend({ createEncryptor: function(t6, i6) {
                  return this.Encryptor.create(t6, i6);
                }, createDecryptor: function(t6, i6) {
                  return this.Decryptor.create(t6, i6);
                }, init: function(t6, i6) {
                  this.A = t6, this.P = i6;
                } }), l = h.CBC = function() {
                  var t6 = f.extend();
                  function i6(t7, i7, n6) {
                    var e5, r4 = this.P;
                    r4 ? (e5 = r4, this.P = void 0) : e5 = this.I;
                    for (var s4 = 0; s4 < n6; s4++)
                      t7[i7 + s4] ^= e5[s4];
                  }
                  return t6.Encryptor = t6.extend({ processBlock: function(t7, n6) {
                    var e5 = this.A, r4 = e5.blockSize;
                    i6.call(this, t7, n6, r4), e5.encryptBlock(t7, n6), this.I = t7.slice(n6, n6 + r4);
                  } }), t6.Decryptor = t6.extend({ processBlock: function(t7, n6) {
                    var e5 = this.A, r4 = e5.blockSize, s4 = t7.slice(n6, n6 + r4);
                    e5.decryptBlock(t7, n6), i6.call(this, t7, n6, r4), this.I = s4;
                  } }), t6;
                }(), d = (t5.pad = {}).Pkcs7 = { pad: function(t6, i6) {
                  for (var n6 = 4 * i6, e5 = n6 - t6.sigBytes % n6, s4 = e5 << 24 | e5 << 16 | e5 << 8 | e5, o3 = [], u3 = 0; u3 < e5; u3 += 4)
                    o3.push(s4);
                  var a2 = r3.create(o3, e5);
                  t6.concat(a2);
                }, unpad: function(t6) {
                  t6.sigBytes -= 255 & t6.words[t6.sigBytes - 1 >>> 2];
                } }, v = (i5.BlockCipher = c.extend({ cfg: c.cfg.extend({ mode: l, padding: d }), reset: function() {
                  var t6;
                  c.reset.call(this);
                  var i6 = this.cfg, n6 = i6.iv, e5 = i6.mode;
                  this.C == this.S ? t6 = e5.createEncryptor : (t6 = e5.createDecryptor, this.N = 1), this.D && this.D.M == t6 ? this.D.init(this, n6 && n6.words) : (this.D = t6.call(e5, this, n6 && n6.words), this.D.M = t6);
                }, H: function(t6, i6) {
                  this.D.processBlock(t6, i6);
                }, R: function() {
                  var t6, i6 = this.cfg.padding;
                  return this.C == this.S ? (i6.pad(this.U, this.blockSize), t6 = this.O(true)) : (t6 = this.O(true), i6.unpad(t6)), t6;
                }, blockSize: 4 }), i5.CipherParams = n5.extend({ init: function(t6) {
                  this.mixIn(t6);
                }, toString: function(t6) {
                  return (t6 || this.formatter).stringify(this);
                } })), m = (t5.format = {}).OpenSSL = { stringify: function(t6) {
                  var i6 = t6.ciphertext, n6 = t6.salt;
                  return (n6 ? r3.create([1398893684, 1701076831]).concat(n6).concat(i6) : i6).toString(u2);
                }, parse: function(t6) {
                  var i6, n6 = u2.parse(t6), e5 = n6.words;
                  return 1398893684 == e5[0] && 1701076831 == e5[1] && (i6 = r3.create(e5.slice(2, 4)), e5.splice(0, 4), n6.sigBytes -= 16), v.create({ ciphertext: n6, salt: i6 });
                } }, p = i5.SerializableCipher = n5.extend({ cfg: n5.extend({ format: m }), encrypt: function(t6, i6, n6, e5) {
                  e5 = this.cfg.extend(e5);
                  var r4 = t6.createEncryptor(n6, e5), s4 = r4.finalize(i6), o3 = r4.cfg;
                  return v.create({ ciphertext: s4, key: n6, iv: o3.iv, algorithm: t6, mode: o3.mode, padding: o3.padding, blockSize: t6.blockSize, formatter: e5.format });
                }, decrypt: function(t6, i6, n6, e5) {
                  return e5 = this.cfg.extend(e5), i6 = this.G(i6, e5.format), t6.createDecryptor(n6, e5).finalize(i6.ciphertext);
                }, G: function(t6, i6) {
                  return "string" == typeof t6 ? i6.parse(t6, this) : t6;
                } }), g = (t5.kdf = {}).OpenSSL = { execute: function(t6, i6, n6, e5) {
                  e5 || (e5 = r3.random(8));
                  var s4 = a.create({ keySize: i6 + n6 }).compute(t6, e5), o3 = r3.create(s4.words.slice(i6), 4 * n6);
                  return s4.sigBytes = 4 * i6, v.create({ key: s4, iv: o3, salt: e5 });
                } }, b = i5.PasswordBasedCipher = p.extend({ cfg: p.cfg.extend({ kdf: g }), encrypt: function(t6, i6, n6, e5) {
                  var r4 = (e5 = this.cfg.extend(e5)).kdf.execute(n6, t6.keySize, t6.ivSize);
                  e5.iv = r4.iv;
                  var s4 = p.encrypt.call(this, t6, i6, r4.key, e5);
                  return s4.mixIn(r4), s4;
                }, decrypt: function(t6, i6, n6, e5) {
                  e5 = this.cfg.extend(e5), i6 = this.G(i6, e5.format);
                  var r4 = e5.kdf.execute(n6, t6.keySize, t6.ivSize, i6.salt);
                  return e5.iv = r4.iv, p.decrypt.call(this, t6, i6, r4.key, e5);
                } });
              }()));
            }, 21: function(t4, i4, n4) {
              var e4;
              t4.exports = (e4 = e4 || function(t5) {
                var i5;
                if ("undefined" != typeof window && window.crypto && (i5 = window.crypto), "undefined" != typeof self && self.crypto && (i5 = self.crypto), "undefined" != typeof globalThis && globalThis.crypto && (i5 = globalThis.crypto), !i5 && "undefined" != typeof window && window.msCrypto && (i5 = window.msCrypto), !i5 && void 0 !== n4.g && n4.g.crypto && (i5 = n4.g.crypto), !i5)
                  try {
                    i5 = n4(477);
                  } catch (t6) {
                  }
                var e5 = function() {
                  if (i5) {
                    if ("function" == typeof i5.getRandomValues)
                      try {
                        return i5.getRandomValues(new Uint32Array(1))[0];
                      } catch (t6) {
                      }
                    if ("function" == typeof i5.randomBytes)
                      try {
                        return i5.randomBytes(4).readInt32LE();
                      } catch (t6) {
                      }
                  }
                  throw new Error("Native crypto module could not be used to get secure random number.");
                }, r3 = Object.create || function() {
                  function t6() {
                  }
                  return function(i6) {
                    var n5;
                    return t6.prototype = i6, n5 = new t6(), t6.prototype = null, n5;
                  };
                }(), s3 = {}, o2 = s3.lib = {}, u2 = o2.Base = { extend: function(t6) {
                  var i6 = r3(this);
                  return t6 && i6.mixIn(t6), i6.hasOwnProperty("init") && this.init !== i6.init || (i6.init = function() {
                    i6.$super.init.apply(this, arguments);
                  }), i6.init.prototype = i6, i6.$super = this, i6;
                }, create: function() {
                  var t6 = this.extend();
                  return t6.init.apply(t6, arguments), t6;
                }, init: function() {
                }, mixIn: function(t6) {
                  for (var i6 in t6)
                    t6.hasOwnProperty(i6) && (this[i6] = t6[i6]);
                  t6.hasOwnProperty("toString") && (this.toString = t6.toString);
                }, clone: function() {
                  return this.init.prototype.extend(this);
                } }, a = o2.WordArray = u2.extend({ init: function(t6, i6) {
                  t6 = this.words = t6 || [], this.sigBytes = null != i6 ? i6 : 4 * t6.length;
                }, toString: function(t6) {
                  return (t6 || h).stringify(this);
                }, concat: function(t6) {
                  var i6 = this.words, n5 = t6.words, e6 = this.sigBytes, r4 = t6.sigBytes;
                  if (this.clamp(), e6 % 4)
                    for (var s4 = 0; s4 < r4; s4++)
                      i6[e6 + s4 >>> 2] |= (n5[s4 >>> 2] >>> 24 - s4 % 4 * 8 & 255) << 24 - (e6 + s4) % 4 * 8;
                  else
                    for (var o3 = 0; o3 < r4; o3 += 4)
                      i6[e6 + o3 >>> 2] = n5[o3 >>> 2];
                  return this.sigBytes += r4, this;
                }, clamp: function() {
                  var i6 = this.words, n5 = this.sigBytes;
                  i6[n5 >>> 2] &= 4294967295 << 32 - n5 % 4 * 8, i6.length = t5.ceil(n5 / 4);
                }, clone: function() {
                  var t6 = u2.clone.call(this);
                  return t6.words = this.words.slice(0), t6;
                }, random: function(t6) {
                  for (var i6 = [], n5 = 0; n5 < t6; n5 += 4)
                    i6.push(e5());
                  return new a.init(i6, t6);
                } }), c = s3.enc = {}, h = c.Hex = { stringify: function(t6) {
                  for (var i6 = t6.words, n5 = t6.sigBytes, e6 = [], r4 = 0; r4 < n5; r4++) {
                    var s4 = i6[r4 >>> 2] >>> 24 - r4 % 4 * 8 & 255;
                    e6.push((s4 >>> 4).toString(16)), e6.push((15 & s4).toString(16));
                  }
                  return e6.join("");
                }, parse: function(t6) {
                  for (var i6 = t6.length, n5 = [], e6 = 0; e6 < i6; e6 += 2)
                    n5[e6 >>> 3] |= parseInt(t6.substr(e6, 2), 16) << 24 - e6 % 8 * 4;
                  return new a.init(n5, i6 / 2);
                } }, f = c.Latin1 = { stringify: function(t6) {
                  for (var i6 = t6.words, n5 = t6.sigBytes, e6 = [], r4 = 0; r4 < n5; r4++)
                    e6.push(String.fromCharCode(i6[r4 >>> 2] >>> 24 - r4 % 4 * 8 & 255));
                  return e6.join("");
                }, parse: function(t6) {
                  for (var i6 = t6.length, n5 = [], e6 = 0; e6 < i6; e6++)
                    n5[e6 >>> 2] |= (255 & t6.charCodeAt(e6)) << 24 - e6 % 4 * 8;
                  return new a.init(n5, i6);
                } }, l = c.Utf8 = { stringify: function(t6) {
                  try {
                    return decodeURIComponent(escape(f.stringify(t6)));
                  } catch (t7) {
                    throw new Error("Malformed UTF-8 data");
                  }
                }, parse: function(t6) {
                  return f.parse(unescape(encodeURIComponent(t6)));
                } }, d = o2.BufferedBlockAlgorithm = u2.extend({ reset: function() {
                  this.U = new a.init(), this.k = 0;
                }, m: function(t6) {
                  "string" == typeof t6 && (t6 = l.parse(t6)), this.U.concat(t6), this.k += t6.sigBytes;
                }, O: function(i6) {
                  var n5, e6 = this.U, r4 = e6.words, s4 = e6.sigBytes, o3 = this.blockSize, u3 = s4 / (4 * o3), c2 = (u3 = i6 ? t5.ceil(u3) : t5.max((0 | u3) - this.N, 0)) * o3, h2 = t5.min(4 * c2, s4);
                  if (c2) {
                    for (var f2 = 0; f2 < c2; f2 += o3)
                      this.H(r4, f2);
                    n5 = r4.splice(0, c2), e6.sigBytes -= h2;
                  }
                  return new a.init(n5, h2);
                }, clone: function() {
                  var t6 = u2.clone.call(this);
                  return t6.U = this.U.clone(), t6;
                }, N: 0 }), v = (o2.Hasher = d.extend({ cfg: u2.extend(), init: function(t6) {
                  this.cfg = this.cfg.extend(t6), this.reset();
                }, reset: function() {
                  d.reset.call(this), this.t();
                }, update: function(t6) {
                  return this.m(t6), this.O(), this;
                }, finalize: function(t6) {
                  return t6 && this.m(t6), this.R();
                }, blockSize: 16, p: function(t6) {
                  return function(i6, n5) {
                    return new t6.init(n5).finalize(i6);
                  };
                }, V: function(t6) {
                  return function(i6, n5) {
                    return new v.HMAC.init(t6, n5).finalize(i6);
                  };
                } }), s3.algo = {});
                return s3;
              }(Math), e4);
            }, 754: function(t4, i4, n4) {
              var e4;
              t4.exports = (e4 = n4(21), function() {
                var t5 = e4.lib.WordArray;
                function i5(i6, n5, e5) {
                  for (var r3 = [], s3 = 0, o2 = 0; o2 < n5; o2++)
                    if (o2 % 4) {
                      var u2 = e5[i6.charCodeAt(o2 - 1)] << o2 % 4 * 2 | e5[i6.charCodeAt(o2)] >>> 6 - o2 % 4 * 2;
                      r3[s3 >>> 2] |= u2 << 24 - s3 % 4 * 8, s3++;
                    }
                  return t5.create(r3, s3);
                }
                e4.enc.Base64 = { stringify: function(t6) {
                  var i6 = t6.words, n5 = t6.sigBytes, e5 = this.B;
                  t6.clamp();
                  for (var r3 = [], s3 = 0; s3 < n5; s3 += 3)
                    for (var o2 = (i6[s3 >>> 2] >>> 24 - s3 % 4 * 8 & 255) << 16 | (i6[s3 + 1 >>> 2] >>> 24 - (s3 + 1) % 4 * 8 & 255) << 8 | i6[s3 + 2 >>> 2] >>> 24 - (s3 + 2) % 4 * 8 & 255, u2 = 0; u2 < 4 && s3 + 0.75 * u2 < n5; u2++)
                      r3.push(e5.charAt(o2 >>> 6 * (3 - u2) & 63));
                  var a = e5.charAt(64);
                  if (a)
                    for (; r3.length % 4; )
                      r3.push(a);
                  return r3.join("");
                }, parse: function(t6) {
                  var n5 = t6.length, e5 = this.B, r3 = this.Y;
                  if (!r3) {
                    r3 = this.Y = [];
                    for (var s3 = 0; s3 < e5.length; s3++)
                      r3[e5.charCodeAt(s3)] = s3;
                  }
                  var o2 = e5.charAt(64);
                  if (o2) {
                    var u2 = t6.indexOf(o2);
                    -1 !== u2 && (n5 = u2);
                  }
                  return i5(t6, n5, r3);
                }, B: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=" };
              }(), e4.enc.Base64);
            }, 178: function(t4, i4, n4) {
              t4.exports = n4(21).enc.Utf8;
            }, 506: function(t4, i4, n4) {
              var e4, r3, s3, o2, u2, a, c;
              t4.exports = (c = n4(21), n4(471), n4(25), r3 = (e4 = c).lib, o2 = r3.WordArray, a = (u2 = e4.algo).EvpKDF = (s3 = r3.Base).extend({ cfg: s3.extend({ keySize: 4, hasher: u2.MD5, iterations: 1 }), init: function(t5) {
                this.cfg = this.cfg.extend(t5);
              }, compute: function(t5, i5) {
                for (var n5, e5 = this.cfg, r4 = e5.hasher.create(), s4 = o2.create(), u3 = s4.words, a2 = e5.keySize, c2 = e5.iterations; u3.length < a2; ) {
                  n5 && r4.update(n5), n5 = r4.update(t5).finalize(i5), r4.reset();
                  for (var h = 1; h < c2; h++)
                    n5 = r4.finalize(n5), r4.reset();
                  s4.concat(n5);
                }
                return s4.sigBytes = 4 * a2, s4;
              } }), e4.EvpKDF = function(t5, i5, n5) {
                return a.create(n5).compute(t5, i5);
              }, c.EvpKDF);
            }, 25: function(t4, i4, n4) {
              var e4, r3, s3;
              t4.exports = (r3 = (e4 = n4(21)).lib.Base, s3 = e4.enc.Utf8, void (e4.algo.HMAC = r3.extend({ init: function(t5, i5) {
                t5 = this.L = new t5.init(), "string" == typeof i5 && (i5 = s3.parse(i5));
                var n5 = t5.blockSize, e5 = 4 * n5;
                i5.sigBytes > e5 && (i5 = t5.finalize(i5)), i5.clamp();
                for (var r4 = this.j = i5.clone(), o2 = this.q = i5.clone(), u2 = r4.words, a = o2.words, c = 0; c < n5; c++)
                  u2[c] ^= 1549556828, a[c] ^= 909522486;
                r4.sigBytes = o2.sigBytes = e5, this.reset();
              }, reset: function() {
                var t5 = this.L;
                t5.reset(), t5.update(this.q);
              }, update: function(t5) {
                return this.L.update(t5), this;
              }, finalize: function(t5) {
                var i5 = this.L, n5 = i5.finalize(t5);
                return i5.reset(), i5.finalize(this.j.clone().concat(n5));
              } })));
            }, 636: function(t4, i4, n4) {
              var e4;
              t4.exports = (e4 = n4(21), function(t5) {
                var i5 = e4, n5 = i5.lib, r3 = n5.WordArray, s3 = n5.Hasher, o2 = i5.algo, u2 = [];
                !function() {
                  for (var i6 = 0; i6 < 64; i6++)
                    u2[i6] = 4294967296 * t5.abs(t5.sin(i6 + 1)) | 0;
                }();
                var a = o2.MD5 = s3.extend({ t: function() {
                  this.F = new r3.init([1732584193, 4023233417, 2562383102, 271733878]);
                }, H: function(t6, i6) {
                  for (var n6 = 0; n6 < 16; n6++) {
                    var e5 = i6 + n6, r4 = t6[e5];
                    t6[e5] = 16711935 & (r4 << 8 | r4 >>> 24) | 4278255360 & (r4 << 24 | r4 >>> 8);
                  }
                  var s4 = this.F.words, o3 = t6[i6 + 0], a2 = t6[i6 + 1], d = t6[i6 + 2], v = t6[i6 + 3], m = t6[i6 + 4], p = t6[i6 + 5], g = t6[i6 + 6], b = t6[i6 + 7], _ = t6[i6 + 8], y = t6[i6 + 9], w = t6[i6 + 10], S = t6[i6 + 11], E = t6[i6 + 12], k = t6[i6 + 13], O = t6[i6 + 14], I = t6[i6 + 15], R = s4[0], T = s4[1], C = s4[2], A = s4[3];
                  R = c(R, T, C, A, o3, 7, u2[0]), A = c(A, R, T, C, a2, 12, u2[1]), C = c(C, A, R, T, d, 17, u2[2]), T = c(T, C, A, R, v, 22, u2[3]), R = c(R, T, C, A, m, 7, u2[4]), A = c(A, R, T, C, p, 12, u2[5]), C = c(C, A, R, T, g, 17, u2[6]), T = c(T, C, A, R, b, 22, u2[7]), R = c(R, T, C, A, _, 7, u2[8]), A = c(A, R, T, C, y, 12, u2[9]), C = c(C, A, R, T, w, 17, u2[10]), T = c(T, C, A, R, S, 22, u2[11]), R = c(R, T, C, A, E, 7, u2[12]), A = c(A, R, T, C, k, 12, u2[13]), C = c(C, A, R, T, O, 17, u2[14]), R = h(R, T = c(T, C, A, R, I, 22, u2[15]), C, A, a2, 5, u2[16]), A = h(A, R, T, C, g, 9, u2[17]), C = h(C, A, R, T, S, 14, u2[18]), T = h(T, C, A, R, o3, 20, u2[19]), R = h(R, T, C, A, p, 5, u2[20]), A = h(A, R, T, C, w, 9, u2[21]), C = h(C, A, R, T, I, 14, u2[22]), T = h(T, C, A, R, m, 20, u2[23]), R = h(R, T, C, A, y, 5, u2[24]), A = h(A, R, T, C, O, 9, u2[25]), C = h(C, A, R, T, v, 14, u2[26]), T = h(T, C, A, R, _, 20, u2[27]), R = h(R, T, C, A, k, 5, u2[28]), A = h(A, R, T, C, d, 9, u2[29]), C = h(C, A, R, T, b, 14, u2[30]), R = f(R, T = h(T, C, A, R, E, 20, u2[31]), C, A, p, 4, u2[32]), A = f(A, R, T, C, _, 11, u2[33]), C = f(C, A, R, T, S, 16, u2[34]), T = f(T, C, A, R, O, 23, u2[35]), R = f(R, T, C, A, a2, 4, u2[36]), A = f(A, R, T, C, m, 11, u2[37]), C = f(C, A, R, T, b, 16, u2[38]), T = f(T, C, A, R, w, 23, u2[39]), R = f(R, T, C, A, k, 4, u2[40]), A = f(A, R, T, C, o3, 11, u2[41]), C = f(C, A, R, T, v, 16, u2[42]), T = f(T, C, A, R, g, 23, u2[43]), R = f(R, T, C, A, y, 4, u2[44]), A = f(A, R, T, C, E, 11, u2[45]), C = f(C, A, R, T, I, 16, u2[46]), R = l(R, T = f(T, C, A, R, d, 23, u2[47]), C, A, o3, 6, u2[48]), A = l(A, R, T, C, b, 10, u2[49]), C = l(C, A, R, T, O, 15, u2[50]), T = l(T, C, A, R, p, 21, u2[51]), R = l(R, T, C, A, E, 6, u2[52]), A = l(A, R, T, C, v, 10, u2[53]), C = l(C, A, R, T, w, 15, u2[54]), T = l(T, C, A, R, a2, 21, u2[55]), R = l(R, T, C, A, _, 6, u2[56]), A = l(A, R, T, C, I, 10, u2[57]), C = l(C, A, R, T, g, 15, u2[58]), T = l(T, C, A, R, k, 21, u2[59]), R = l(R, T, C, A, m, 6, u2[60]), A = l(A, R, T, C, S, 10, u2[61]), C = l(C, A, R, T, d, 15, u2[62]), T = l(T, C, A, R, y, 21, u2[63]), s4[0] = s4[0] + R | 0, s4[1] = s4[1] + T | 0, s4[2] = s4[2] + C | 0, s4[3] = s4[3] + A | 0;
                }, R: function() {
                  var i6 = this.U, n6 = i6.words, e5 = 8 * this.k, r4 = 8 * i6.sigBytes;
                  n6[r4 >>> 5] |= 128 << 24 - r4 % 32;
                  var s4 = t5.floor(e5 / 4294967296), o3 = e5;
                  n6[15 + (r4 + 64 >>> 9 << 4)] = 16711935 & (s4 << 8 | s4 >>> 24) | 4278255360 & (s4 << 24 | s4 >>> 8), n6[14 + (r4 + 64 >>> 9 << 4)] = 16711935 & (o3 << 8 | o3 >>> 24) | 4278255360 & (o3 << 24 | o3 >>> 8), i6.sigBytes = 4 * (n6.length + 1), this.O();
                  for (var u3 = this.F, a2 = u3.words, c2 = 0; c2 < 4; c2++) {
                    var h2 = a2[c2];
                    a2[c2] = 16711935 & (h2 << 8 | h2 >>> 24) | 4278255360 & (h2 << 24 | h2 >>> 8);
                  }
                  return u3;
                }, clone: function() {
                  var t6 = s3.clone.call(this);
                  return t6.F = this.F.clone(), t6;
                } });
                function c(t6, i6, n6, e5, r4, s4, o3) {
                  var u3 = t6 + (i6 & n6 | ~i6 & e5) + r4 + o3;
                  return (u3 << s4 | u3 >>> 32 - s4) + i6;
                }
                function h(t6, i6, n6, e5, r4, s4, o3) {
                  var u3 = t6 + (i6 & e5 | n6 & ~e5) + r4 + o3;
                  return (u3 << s4 | u3 >>> 32 - s4) + i6;
                }
                function f(t6, i6, n6, e5, r4, s4, o3) {
                  var u3 = t6 + (i6 ^ n6 ^ e5) + r4 + o3;
                  return (u3 << s4 | u3 >>> 32 - s4) + i6;
                }
                function l(t6, i6, n6, e5, r4, s4, o3) {
                  var u3 = t6 + (n6 ^ (i6 | ~e5)) + r4 + o3;
                  return (u3 << s4 | u3 >>> 32 - s4) + i6;
                }
                i5.MD5 = s3.p(a), i5.HmacMD5 = s3.V(a);
              }(Math), e4.MD5);
            }, 471: function(t4, i4, n4) {
              var e4, r3, s3, o2, u2, a, c;
              t4.exports = (r3 = (e4 = c = n4(21)).lib, s3 = r3.WordArray, u2 = [], a = e4.algo.SHA1 = (o2 = r3.Hasher).extend({ t: function() {
                this.F = new s3.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
              }, H: function(t5, i5) {
                for (var n5 = this.F.words, e5 = n5[0], r4 = n5[1], s4 = n5[2], o3 = n5[3], a2 = n5[4], c2 = 0; c2 < 80; c2++) {
                  if (c2 < 16)
                    u2[c2] = 0 | t5[i5 + c2];
                  else {
                    var h = u2[c2 - 3] ^ u2[c2 - 8] ^ u2[c2 - 14] ^ u2[c2 - 16];
                    u2[c2] = h << 1 | h >>> 31;
                  }
                  var f = (e5 << 5 | e5 >>> 27) + a2 + u2[c2];
                  f += c2 < 20 ? 1518500249 + (r4 & s4 | ~r4 & o3) : c2 < 40 ? 1859775393 + (r4 ^ s4 ^ o3) : c2 < 60 ? (r4 & s4 | r4 & o3 | s4 & o3) - 1894007588 : (r4 ^ s4 ^ o3) - 899497514, a2 = o3, o3 = s4, s4 = r4 << 30 | r4 >>> 2, r4 = e5, e5 = f;
                }
                n5[0] = n5[0] + e5 | 0, n5[1] = n5[1] + r4 | 0, n5[2] = n5[2] + s4 | 0, n5[3] = n5[3] + o3 | 0, n5[4] = n5[4] + a2 | 0;
              }, R: function() {
                var t5 = this.U, i5 = t5.words, n5 = 8 * this.k, e5 = 8 * t5.sigBytes;
                return i5[e5 >>> 5] |= 128 << 24 - e5 % 32, i5[14 + (e5 + 64 >>> 9 << 4)] = Math.floor(n5 / 4294967296), i5[15 + (e5 + 64 >>> 9 << 4)] = n5, t5.sigBytes = 4 * i5.length, this.O(), this.F;
              }, clone: function() {
                var t5 = o2.clone.call(this);
                return t5.F = this.F.clone(), t5;
              } }), e4.SHA1 = o2.p(a), e4.HmacSHA1 = o2.V(a), c.SHA1);
            }, 994: (i4) => {
              "use strict";
              i4.exports = t3;
            }, 788: (t4) => {
              "use strict";
              t4.exports = i3;
            }, 477: () => {
            } }, e3 = {};
            function r2(t4) {
              var i4 = e3[t4];
              if (void 0 !== i4)
                return i4.exports;
              var s3 = e3[t4] = { exports: {} };
              return n3[t4].call(s3.exports, s3, s3.exports, r2), s3.exports;
            }
            r2.n = (t4) => {
              var i4 = t4 && t4.J ? () => t4.default : () => t4;
              return r2.d(i4, { a: i4 }), i4;
            }, r2.d = (t4, i4) => {
              for (var n4 in i4)
                r2.o(i4, n4) && !r2.o(t4, n4) && Object.defineProperty(t4, n4, { enumerable: true, get: i4[n4] });
            }, r2.g = function() {
              if ("object" == typeof globalThis)
                return globalThis;
              try {
                return this || new Function("return this")();
              } catch (t4) {
                if ("object" == typeof window)
                  return window;
              }
            }(), r2.o = (t4, i4) => Object.prototype.hasOwnProperty.call(t4, i4), r2.r = (t4) => {
              "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t4, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t4, "J", { value: true });
            };
            var s2 = {};
            return (() => {
              "use strict";
              var t4, i4, n4, e4, o2, u2, a, c, h, f, l, d, v, m, p, g, b, _, y;
              r2.r(s2), r2.d(s2, { BrokenType: () => I, BusinessService: () => m, ConnectedType: () => O, DisconnectedType: () => k, Method: () => E, Mode: () => g, NET_ACCESS_CONFIG: () => Ot, NetAgentHttpRequest: () => pi, NetAgentPCRequest: () => ci, ZegoConnectionAgent: () => Ei }), function(t5) {
                t5[t5.Normal = 0] = "Normal", t5[t5.Private = 1] = "Private";
              }(t4 || (t4 = {})), function(t5) {
                t5[t5.IPv4Only = 0] = "IPv4Only", t5[t5.IPv4Prefer = 1] = "IPv4Prefer", t5[t5.IPv6Prefer = 2] = "IPv6Prefer";
              }(i4 || (i4 = {})), function(t5) {
                t5[t5.Default = 0] = "Default", t5[t5.Detail = 1] = "Detail";
              }(n4 || (n4 = {})), function(t5) {
                t5[t5.IPv4 = 0] = "IPv4", t5[t5.IPv6 = 1] = "IPv6";
              }(e4 || (e4 = {})), function(t5) {
                t5[t5.unreachable = 0] = "unreachable", t5[t5.unknown = 1] = "unknown", t5[t5.reachable = 2] = "reachable";
              }(o2 || (o2 = {})), function(t5) {
                t5[t5.probed = 0] = "probed", t5[t5.noProbe = 1] = "noProbe", t5[t5.probing = 2] = "probing";
              }(u2 || (u2 = {})), function(t5) {
                t5[t5.fail = 0] = "fail", t5[t5.connecting = 1] = "connecting", t5[t5.success = 2] = "success", t5[t5.timeout = 3] = "timeout";
              }(a || (a = {})), function(t5) {
                t5[t5.WebSocket = 0] = "WebSocket", t5[t5.WebTransport = 1] = "WebTransport";
              }(c || (c = {})), function(t5) {
                t5[t5.CONNECTING = 0] = "CONNECTING", t5[t5.OPEN = 1] = "OPEN", t5[t5.CLOSING = 2] = "CLOSING", t5[t5.CLOSED = 3] = "CLOSED";
              }(h || (h = {})), function(t5) {
                t5[t5.offline = 0] = "offline", t5[t5.online = 1] = "online";
              }(f || (f = {})), function(t5) {
                t5[t5.PB = 0] = "PB", t5[t5.JSON = 1] = "JSON";
              }(l || (l = {})), function(t5) {
                t5[t5.MSG_TYPE_STREAM_CLOSED = 2] = "MSG_TYPE_STREAM_CLOSED", t5[t5.MSG_TYPE_CLOSE_CONNECTION = 3] = "MSG_TYPE_CLOSE_CONNECTION", t5[t5.MSG_TYPE_HTTP_REQUEST = 4] = "MSG_TYPE_HTTP_REQUEST", t5[t5.MSG_TYPE_HTTP_RESPONSE = 5] = "MSG_TYPE_HTTP_RESPONSE", t5[t5.MSG_TYPE_HB_REQUEST = 12] = "MSG_TYPE_HB_REQUEST", t5[t5.MSG_TYPE_HB_RESPONSE = 13] = "MSG_TYPE_HB_RESPONSE", t5[t5.MSG_TYPE_GET_CONFIG_REQUEST = 14] = "MSG_TYPE_GET_CONFIG_REQUEST", t5[t5.MSG_TYPE_GET_CONFIG_RESPONSE = 15] = "MSG_TYPE_GET_CONFIG_RESPONSE", t5[t5.MSG_TYPE_HTTP_REQUEST_ACK = 16] = "MSG_TYPE_HTTP_REQUEST_ACK", t5[t5.MSG_TYPE_PC_UPWARD_MESSAGE = 17] = "MSG_TYPE_PC_UPWARD_MESSAGE", t5[t5.MSG_TYPE_PC_UPWARD_MESSAGE_ACK = 18] = "MSG_TYPE_PC_UPWARD_MESSAGE_ACK", t5[t5.MSG_TYPE_PC_ESTABLISHED = 19] = "MSG_TYPE_PC_ESTABLISHED", t5[t5.MSG_TYPE_PC_BROKEN = 20] = "MSG_TYPE_PC_BROKEN", t5[t5.MSG_TYPE_PC_DOWNWARD_MESSAGE = 21] = "MSG_TYPE_PC_DOWNWARD_MESSAGE", t5[t5.MSG_TYPE_REDIRECT = 22] = "MSG_TYPE_REDIRECT", t5[t5.MSG_TYPE_GET_APPCONFIG_REQUEST = 23] = "MSG_TYPE_GET_APPCONFIG_REQUEST", t5[t5.MSG_TYPE_GET_APPCONFIG_RESPONSE = 24] = "MSG_TYPE_GET_APPCONFIG_RESPONSE", t5[t5.MSG_TYPE_PUSH_APPCONFIG = 25] = "MSG_TYPE_PUSH_APPCONFIG", t5[t5.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST = 26] = "MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST", t5[t5.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE = 27] = "MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE", t5[t5.MSG_TYPE_PUSH_EXCEPTION = 30] = "MSG_TYPE_PUSH_EXCEPTION", t5[t5.MSG_TYPE_HTTP_REQUEST2 = 33] = "MSG_TYPE_HTTP_REQUEST2", t5[t5.MSG_TYPE_REDIRECT2 = 34] = "MSG_TYPE_REDIRECT2", t5[t5.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2 = 35] = "MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2", t5[t5.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2 = 36] = "MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2", t5[t5.MSG_TYPE_GET_SVRADDR_REQUEST = 39] = "MSG_TYPE_GET_SVRADDR_REQUEST", t5[t5.MSG_TYPE_GET_SVRADDR_RESPONSE = 40] = "MSG_TYPE_GET_SVRADDR_RESPONSE";
              }(d || (d = {})), function(t5) {
                t5[t5.ACCESSHUB_INVALID_FRAME = 2e4] = "ACCESSHUB_INVALID_FRAME", t5[t5.ACCESSHUB_NEED_ENCRYPT = 20001] = "ACCESSHUB_NEED_ENCRYPT", t5[t5.ACCESSHUB_DECRYPT = 20002] = "ACCESSHUB_DECRYPT", t5[t5.ACCESSHUB_MSGTYPE = 20003] = "ACCESSHUB_MSGTYPE", t5[t5.ACCESSHUB_UNMARSHAL = 20004] = "ACCESSHUB_UNMARSHAL", t5[t5.ACCESSHUB_TIMEOUT = 20005] = "ACCESSHUB_TIMEOUT", t5[t5.ACCESSHUB_CONNECT = 20006] = "ACCESSHUB_CONNECT", t5[t5.ACCESSHUB_BROKEN = 20007] = "ACCESSHUB_BROKEN", t5[t5.ACCESSHUB_INTERNAL_ERROR = 20008] = "ACCESSHUB_INTERNAL_ERROR", t5[t5.ACCESSHUB_MARSHAL = 20009] = "ACCESSHUB_MARSHAL", t5[t5.ACCESSHUB_UNSUPPORTED_SERVICE = 20010] = "ACCESSHUB_UNSUPPORTED_SERVICE", t5[t5.ACCESSHUB_TOO_FREQUENTLY = 20011] = "ACCESSHUB_TOO_FREQUENTLY", t5[t5.ACCESSHUB_INVALID_APPID = 20012] = "ACCESSHUB_INVALID_APPID", t5[t5.ACCESSHUB_HB_TIMEOUT = 20013] = "ACCESSHUB_HB_TIMEOUT", t5[t5.ACCESSHUB_INVALID_SIGNATURE = 20014] = "ACCESSHUB_INVALID_SIGNATURE";
              }(v || (v = {})), function(t5) {
                t5[t5.SERVICE_UNSET = 0] = "SERVICE_UNSET", t5[t5.SERVICE_MEDIAGW = 1] = "SERVICE_MEDIAGW", t5[t5.SERVICE_LIVEROOM = 2] = "SERVICE_LIVEROOM", t5[t5.SERVICE_MIX = 3] = "SERVICE_MIX", t5[t5.SERVICE_ZEUS = 4] = "SERVICE_ZEUS", t5[t5.SERVICE_ZPUSH = 5] = "SERVICE_ZPUSH", t5[t5.SERVICE_L3 = 6] = "SERVICE_L3", t5[t5.SERVICE_TALKLINE = 7] = "SERVICE_TALKLINE", t5[t5.SERVICE_EDUSUITE = 8] = "SERVICE_EDUSUITE", t5[t5.SERVICE_ZIM = 9] = "SERVICE_ZIM", t5[t5.SERVICE_ClOUD_SETTING = 10] = "SERVICE_ClOUD_SETTING", t5[t5.SERVICE_ZEUSHB = 11] = "SERVICE_ZEUSHB", t5[t5.SERVICE_USER_LOGIC = 12] = "SERVICE_USER_LOGIC", t5[t5.SERVICE_UNIFYDISPATCH = 13] = "SERVICE_UNIFYDISPATCH", t5[t5.SERVICE_QUALITY = 14] = "SERVICE_QUALITY", t5[t5.SERVICE_SECURITY = 15] = "SERVICE_SECURITY", t5[t5.SERVICE_KTVCPR = 16] = "SERVICE_KTVCPR", t5[t5.SERVICE_SWITCH4LIVEROOM = 17] = "SERVICE_SWITCH4LIVEROOM", t5[t5.SERVICE_WEBRTC_SIGNAL = 18] = "SERVICE_WEBRTC_SIGNAL", t5[t5.SERVICE_L3_WEBRTC_SIGNAL = 19] = "SERVICE_L3_WEBRTC_SIGNAL", t5[t5.SERVICE_VIDEOCPR = 20] = "SERVICE_VIDEOCPR", t5[t5.SERVICE_CDN = 21] = "SERVICE_CDN", t5[t5.SERVICE_CLOUDRECORD = 22] = "SERVICE_CLOUDRECORD", t5[t5.SERVICE_INNER_ECHO = 23] = "SERVICE_INNER_ECHO", t5[t5.SERVICE_OUTER_ECHO = 24] = "SERVICE_OUTER_ECHO", t5[t5.SERVICE_LOCALHOST_ECHO = 25] = "SERVICE_LOCALHOST_ECHO", t5[t5.SERVICE_ECHO = 26] = "SERVICE_ECHO", t5[t5.SERVICE_DOCSERVICE = 27] = "SERVICE_DOCSERVICE", t5[t5.SERVICE_AUTHSVR = 28] = "SERVICE_AUTHSVR";
              }(m || (m = {})), function(t5) {
                t5[t5.ZEGOCONN_RUN_ENV_UNSET = 0] = "ZEGOCONN_RUN_ENV_UNSET", t5[t5.ZEGOCONN_RUN_ENV_BROWSER = 1] = "ZEGOCONN_RUN_ENV_BROWSER", t5[t5.ZEGOCONN_RUN_ENV_APPLET = 2] = "ZEGOCONN_RUN_ENV_APPLET";
              }(p || (p = {})), function(t5) {
                t5[t5.Mode_UNSET = 0] = "Mode_UNSET", t5[t5.MODE_ONLINE = 1] = "MODE_ONLINE", t5[t5.MODE_TEST = 2] = "MODE_TEST", t5[t5.MODE_ALPHA = 3] = "MODE_ALPHA";
              }(g || (g = {})), function(t5) {
                t5[t5.HTTP = 0] = "HTTP", t5[t5.PC = 1] = "PC", t5[t5.OTHER = 2] = "OTHER";
              }(b || (b = {})), function(t5) {
                t5[t5.NONE = 0] = "NONE", t5[t5.BROKEN = 1] = "BROKEN", t5[t5.DISCONNECT = 2] = "DISCONNECT";
              }(_ || (_ = {})), function(t5) {
                t5[t5.CONNECTED = 0] = "CONNECTED", t5[t5.DISCONNECT = 1] = "DISCONNECT", t5[t5.BROKEN = 2] = "BROKEN";
              }(y || (y = {}));
              var w, S, E, k, O, I, R, T = [v.ACCESSHUB_INVALID_APPID, v.ACCESSHUB_INVALID_SIGNATURE];
              !function(t5) {
                t5[t5.offline = 0] = "offline", t5[t5.online = 1] = "online";
              }(w || (w = {})), function(t5) {
                t5[t5.ACTION_RESERVED = 0] = "ACTION_RESERVED", t5[t5.ACTION_DISPATCH = 1] = "ACTION_DISPATCH", t5[t5.ACTION_RETRY = 2] = "ACTION_RETRY", t5[t5.ACTION_NEXT_NODE = 3] = "ACTION_NEXT_NODE", t5[t5.ACTION_ABORT = 4] = "ACTION_ABORT", t5[t5.ACTION_NEXT_GROUP = 5] = "ACTION_NEXT_GROUP", t5[t5.ACTION_IDLE = 6] = "ACTION_IDLE";
              }(S || (S = {})), function(t5) {
                t5[t5.METHOD_UNSET = 0] = "METHOD_UNSET", t5[t5.METHOD_GET = 1] = "METHOD_GET", t5[t5.METHOD_POST = 2] = "METHOD_POST", t5[t5.METHOD_PUT = 3] = "METHOD_PUT", t5[t5.METHOD_PATCH = 4] = "METHOD_PATCH", t5[t5.METHOD_DELETE = 5] = "METHOD_DELETE", t5[t5.METHOD_HEAD = 6] = "METHOD_HEAD", t5[t5.METHOD_OPTIONS = 7] = "METHOD_OPTIONS";
              }(E || (E = {})), function(t5) {
                t5[t5.CLOSE = 0] = "CLOSE", t5[t5.TEMP = 1] = "TEMP", t5[t5.TIMEOUT = 2] = "TIMEOUT";
              }(k || (k = {})), function(t5) {
                t5[t5.AUTO = 0] = "AUTO", t5[t5.MANUAL = 1] = "MANUAL";
              }(O || (O = {})), function(t5) {
                t5[t5.EMPTY = 0] = "EMPTY", t5[t5.CLOSE = 1] = "CLOSE";
              }(I || (I = {})), function(t5) {
                t5[t5.single = 0] = "single", t5[t5.detail = 1] = "detail";
              }(R || (R = {}));
              var C = { 2: "stream_closed", 3: "close_connection", 4: "http_request", 5: "http_response", 12: "hb_request", 13: "hb_response", 14: "get_config_request", 15: "get_config_response", 16: "http_request_ack", 17: "pc_upward_message", 18: "pc_upward_message_ack", 19: "pc_established", 20: "pc_broken", 21: "pc_downward_message", 22: "redirect", 23: "get_appconfig_request", 24: "get_appconfig_response", 25: "push_appconfig", 26: "accesshub_dispatch_request", 27: "accesshub_dispatch_response", 30: "push_exception", 33: "http_request2", 34: "redirect2", 35: "accesshub_dispatch_request2", 36: "accesshub_dispatch_response2", 39: "get_svraddr_request", 40: "get_svraddr_response" }, A = r2(994);
              const z = A.default || A;
              var D = r2(788), N = r2(788);
              const P = r2(994);
              (N = N.default || N).util.Long = P.default || P, N.util.Long.fromBits = N.util.Long.fromBits || function() {
                return 0;
              };
              for (var M = N.roots, x = N.types ? N.types.basic : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0, string: 2, bytes: 2 }, j = N.types ? N.types.packed : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0 }, q = Object.keys(x), L = { $: function(t5) {
                return L[t5] ? L[t5].call(this) : M[t5].decode ? M[t5].decode(this, this.uint32()) : L.$.call(this, "int32");
              } }, B = { $: function(t5, i5, n5) {
                var e5 = x[t5];
                return void 0 === e5 ? M[t5].encode ? (this.uint32(n5 << 3 | 2).fork(), M[t5].encode(i5, this).ldelim()) : B.$.call(this, "int32", i5, n5) : B[t5].call(this.uint32(n5 << 3 | e5), i5);
              } }, U = 0; U < q.length; U++)
                L[q[U]] = N.Reader.prototype[q[U]], B[q[U]] = N.Writer.prototype[q[U]];
              !function t5(i5, n5, e5, r3) {
                for (var s3 = 0, o3 = Object.keys(i5); s3 < o3.length; s3++) {
                  var u3 = o3[s3];
                  i5[u3].$m && Object.keys(i5[u3].$m).every(function(t6) {
                    return Number(t6);
                  }) ? e5[u3] = function(i6, e6) {
                    function r4(t6) {
                      for (var n6 in i6) {
                        var e7 = i6[n6];
                        "{" === e7[1].charAt(0) ? this[e7[0]] = {} : "[" !== e7[1].charAt(0) && "<" !== e7[1].charAt(0) || (this[e7[0]] = []);
                      }
                      if (t6)
                        for (var r5 = Object.keys(t6), s5 = 0; s5 < r5.length; ++s5)
                          null != t6[r5[s5]] && (this[r5[s5]] = t6[r5[s5]]);
                    }
                    var s4 = {};
                    for (var o4 in i6) {
                      var u4 = i6[o4], a2 = u4[1];
                      "{" === a2.charAt(0) ? (r4.prototype[u4[0]] = N.util.emptyObject, s4[a2] = { $m: a2.substring(1).split(",").map(function(t6, i7) {
                        return [`$${i7 + 1}`, t6, null];
                      }).reduce(function(t6, i7, n6) {
                        return t6[n6 + 1] = i7, t6;
                      }, {}) }) : r4.prototype[u4[0]] = "[" === a2.charAt(0) || "<" === a2.charAt(0) ? N.util.emptyArray : "bytes" === a2 ? N.util.newBuffer([]) : u4[2] && u4[2].hasOwnProperty("low") && u4[2].hasOwnProperty("high") ? N.util.Long.fromBits(u4[2].low, u4[2].high, u4[2].unsigned) : u4[2];
                    }
                    return r4.create = function(t6) {
                      return new r4(t6);
                    }, r4.decode = function(t6, n6) {
                      t6 instanceof N.Reader || (t6 = N.Reader.create(t6));
                      for (var e7 = void 0 === n6 ? t6.len : t6.pos + n6, s5 = new r4(); t6.pos < e7; ) {
                        var o5 = t6.uint32(), u5 = o5 >>> 3;
                        if (u5 > 0 && i6[u5]) {
                          var a3 = i6[u5][0], c2 = i6[u5][1];
                          if ("{" === c2.charAt(0)) {
                            s5[a3] === N.util.emptyObject && (s5[a3] = {});
                            var h2 = r4.$namespace[c2].decode(t6, t6.uint32());
                            s5[a3][h2.$1] = h2.$2;
                          } else if ("[" === c2.charAt(0) || "<" === c2.charAt(0))
                            if (c2 = c2.substring(1), s5[a3] && s5[a3].length || (s5[a3] = []), void 0 !== j[c2 = L[c2] || M[c2].decode ? c2 : "int32"] && 2 == (7 & o5))
                              for (var f2 = t6.uint32() + t6.pos; t6.pos < f2; )
                                s5[a3].push(L.$.call(t6, c2));
                            else
                              s5[a3].push(L.$.call(t6, c2));
                          else
                            s5[a3] = L.$.call(t6, c2);
                        } else
                          t6.skipType(7 & o5);
                      }
                      return s5;
                    }, r4.encode = function(t6, n6) {
                      for (var e7 in n6 || (n6 = N.Writer.create()), i6) {
                        var s5 = i6[e7][0], o5 = i6[e7][1];
                        if ("{" === o5.charAt(0)) {
                          if (null != t6[s5] && t6.hasOwnProperty(s5))
                            for (var u5 = 0, a3 = Object.keys(t6[s5]); u5 < a3.length; ++u5)
                              n6.uint32(e7 << 3 | 2).fork(), r4.$namespace[o5].encode({ $1: a3[u5], $2: t6[s5][a3[u5]] }, n6).ldelim();
                        } else if ("[" === o5.charAt(0) || "<" === o5.charAt(0)) {
                          var c2 = "<" === o5.charAt(0);
                          o5 = o5.substring(1);
                          var h2 = t6[s5];
                          if (null != h2 && h2.length)
                            if (o5 = void 0 !== x[o5] || M[o5].encode ? o5 : "int32", c2 && void 0 !== j[o5]) {
                              for (n6.uint32(e7 << 3 | 2).fork(), u5 = 0; u5 < h2.length; u5++)
                                B[o5].call(n6, h2[u5]);
                              n6.ldelim();
                            } else
                              for (u5 = 0; u5 < h2.length; u5++)
                                B.$.call(n6, o5, h2[u5], e7);
                        } else
                          null != t6[s5] && t6.hasOwnProperty(s5) && B.$.call(n6, o5, t6[s5], e7);
                      }
                      return n6;
                    }, Object.keys(s4).length && (r4.$namespace = t5(s4, n5 + "." + e6, r4.$namespace || {}, true)), r4;
                  }(i5[u3].$m, u3) : i5[u3].$s ? e5[u3] = function(t6, i6) {
                    function e6(t7, i7, n6) {
                      N.rpc.Service.call(this, t7, i7, n6);
                    }
                    return (e6.prototype = Object.create(N.rpc.Service.prototype)).constructor = e6, e6.create = function(t7, i7, n6) {
                      return new e6(t7, i7, n6);
                    }, Object.keys(t6).forEach(function(r4) {
                      var s4 = t6[r4];
                      function o4(t7, i7) {
                        return this.rpcCall(o4, M[s4[0]], M[s4[1]], t7, i7);
                      }
                      Object.defineProperty(o4, "name", { value: r4 }), Object.defineProperty(o4, "path", { value: `${n5}.${i6}` }), e6.prototype[r4] = o4;
                    }), e6;
                  }(i5[u3].$s, u3) : i5[u3].$e && Object.values(i5[u3].$e).every(function(t6) {
                    return Number(t6) === t6;
                  }) && (e5[u3] = function(t6) {
                    for (var i6 = Object.keys(t6), n6 = {}, e6 = 0; e6 < i6.length; e6++)
                      n6[n6[i6[e6]] = t6[i6[e6]]] = i6[e6];
                    return n6;
                  }(i5[u3].$e)), e5[u3] && !r3 && (M[`${n5}.${u3}`] = e5[u3]), delete i5[u3].$m, delete i5[u3].$s, delete i5[u3].$e, e5[u3] = t5(i5[u3], Boolean(n5) ? `${n5}.${u3}` : u3, e5[u3] || {});
                }
                return e5;
              }({ zego_connection: { proto_accesshub: { AccesshubAddr: { $m: { 1: ["ipv4", "fixed32", 0], 2: ["ipv6", "zego_connection.proto_accesshub.IPV6Addr", null], 3: ["quic_port", "uint32", 0], 4: ["wss_port", "uint32", 0] } }, AccesshubDispatchGroup: { $m: { 1: ["group", "string", ""], 2: ["quic_nodes", "<string", null], 3: ["mtcp_nodes", "<string", null], 4: ["wss_nodes", "<string", null] } }, AccesshubDispatchGroup2: { $m: { 1: ["group", "string", ""], 2: ["nodes", "<zego_connection.proto_accesshub.AccesshubAddr", null], 3: ["nodes_dual", "<zego_connection.proto_accesshub.AccesshubAddr", null], 4: ["weight", "uint32", 0], 5: ["gid", "uint32", 0] } }, AccesshubDispatchRequest2: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode_no", "zego_connection.proto_accesshub.Mode", 0], 5: ["id_name", "string", ""], 6: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 7: ["zegoconn_version", "uint32", 0], 8: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 9: ["device_id", "string", ""], 10: ["client_ip", "string", ""], 11: ["geofencing_type", "uint32", 0], 12: ["geofencings", "[uint32", null], 13: ["addr_type", "uint32", 0], 14: ["net_mode", "uint32", 0], 15: ["dispatch_tag", "uint32", 0] } }, AccesshubDispatchResponse2: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""], 3: ["data", "zego_connection.proto_accesshub.AccesshubDispatchResponseData2", null] } }, AccesshubDispatchResponseData2: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["rand", "string", ""], 3: ["secret", "string", ""], 4: ["groups", "<zego_connection.proto_accesshub.AccesshubDispatchGroup2", null], 5: ["wss_groups", "<zego_connection.proto_accesshub.WssAccesshubDispatchGroup", null], 6: ["ttl", "uint32", 0], 7: ["http3_groups", "<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup", null], 8: ["wss_v6_groups", "<zego_connection.proto_accesshub.WssAccesshubDispatchGroup", null], 9: ["http3_v6_groups", "<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup", null] } }, BackendConnType: { $e: { BACKEND_CONN_TYPE_UNSET: 0, BACKEND_CONN_TYPE_TCP: 1, BACKEND_CONN_TYPE_WSS: 2 } }, CheckServiceAreaRequest: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode", "zego_connection.proto_accesshub.Mode", 0], 5: ["id_name", "string", ""], 6: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 7: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 8: ["zegoconn_version", "uint32", 0], 9: ["device_id", "string", ""], 10: ["user_agent", "string", ""], 11: ["language", "string", ""], 12: ["timezone", "string", ""], 13: ["carrier", "string", ""], 14: ["dns_result", "zego_connection.proto_accesshub.IPAddr", null] } }, CheckServiceAreaResponse: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""], 3: ["data", "zego_connection.proto_accesshub.CheckServiceAreaResponseData", null] } }, CheckServiceAreaResponseData: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }] } }, CloseConnection: { $m: { 1: ["reason", "int32", 0], 2: ["msg", "string", ""], 3: ["action", "int32", 0] }, Action: { $e: { ACTION_RESERVED: 0, ACTION_DISPATCH: 1, ACTION_RETRY: 2, ACTION_NEXT_NODE: 3, ACTION_ABORT: 4, ACTION_NEXT_GROUP: 5, ACTION_IDLE: 6 } } }, ConnectionClosed: { $m: { 1: ["code", "int32", 0], 2: ["msg", "string", ""] } }, ErrorCode: { $e: { OK: 0, DISPATCH_NO_AVAILABLE_NODE: 1e4, DISPATCH_INTERNAL_ERROR: 10001, DISPATCH_INVALID_FRAME: 10002, DISPATCH_UNMARSHAL: 10003, DISPATCH_MSGTYPE: 10004, DISPATCH_MARSHAL: 10005, DISPATCH_TOO_FREQUENTLY: 10006, DISPATCH_EMPTY_GEOFENCING: 10007, ACCESSHUB_INVALID_FRAME: 2e4, ACCESSHUB_NEED_ENCRYPT: 20001, ACCESSHUB_DECRYPT: 20002, ACCESSHUB_MSGTYPE: 20003, ACCESSHUB_UNMARSHAL: 20004, ACCESSHUB_TIMEOUT: 20005, ACCESSHUB_CONNECT: 20006, ACCESSHUB_BROKEN: 20007, ACCESSHUB_INTERNAL_ERROR: 20008, ACCESSHUB_MARSHAL: 20009, ACCESSHUB_UNSUPPORTED_SERVICE: 20010, ACCESSHUB_TOO_FREQUENTLY: 20011, ACCESSHUB_INVALID_APPID: 20012, ACCESSHUB_HB_TIMEOUT: 20013, ACCESSHUB_INVALID_SIGNATURE: 20014, ACCESSHUB_AUTH_FAILED: 20015, ACCESSHUB_UNSUPPORTED_INTERFACE: 20016, ACCESSHUB_EMPTY_GEOFENCING: 20017, ACCESSHUB_ACCESS_DENIED: 20018, ACCESSHUB_SPECIAL_CUSTOMER: 20019, ACCESSHUB_IDLE_CONNECTION: 20020, ACCESSHUB_APPID_OFFLINE: 20021, ACCESSHUB_GET_STREAM_FAILED: 3e4, ACCESSHUB_GET_CONN_FAILED: 30001, ACCESSHUB_DO_HTTP_REQUEST_FAILED: 30002, ACCESSHUB_UNMARSHAL_HB_FAILED: 30003, ACCESSHUB_DO_BACKEND_DISPATCH_FAILED: 30004 } }, GeoFencing: { $e: { CN: 2, NA: 3, EU: 4, AS: 5, IN: 6, NCN: 7 } }, GeoFencingType: { $e: { NONE: 0, UNION: 1, EXCLUDE: 2 } }, GetAppConfigRequest: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode_no", "zego_connection.proto_accesshub.Mode", 0], 5: ["id_name", "string", ""], 6: ["config_key", "string", ""], 7: ["ts", "uint64", { low: 0, high: 0, unsigned: true }], 8: ["signature", "bytes", []], 9: ["lite_sign", "string", ""], 10: ["token", "string", ""], 11: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 12: ["zegoconn_version", "uint32", 0], 13: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 14: ["device_id", "string", ""], 15: ["etag", "uint32", 0], 16: ["is_special_customer", "uint32", 0] } }, GetAppConfigResponse: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""], 3: ["data", "zego_connection.proto_accesshub.GetAppConfigResponseData", null] } }, GetAppConfigResponseData: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["data", "bytes", []], 3: ["ts", "uint64", { low: 0, high: 0, unsigned: true }], 4: ["etag", "uint32", 0] } }, GetConfigRequest: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode", "string", ""], 5: ["id_name", "string", ""], 6: ["reqid", "string", ""], 7: ["zegoconn_version", "uint32", 0], 8: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 9: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 10: ["device_id", "string", ""], 11: ["mode_no", "zego_connection.proto_accesshub.Mode", 0], 12: ["geofencing_type", "uint32", 0], 13: ["geofencings", "[uint32", null], 14: ["dispatch_tag", "uint32", 0] } }, GetConfigResponse: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""], 3: ["data", "zego_connection.proto_accesshub.GetConfigResponseData", null] } }, GetConfigResponseData: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["quic_hb_interval", "uint32", 0], 3: ["quic_hb_timeout", "uint32", 0], 4: ["logic_hb_interval", "uint32", 0], 5: ["logic_hb_timeout", "uint32", 0], 6: ["pc_establish_timeout", "uint32", 0], 7: ["sdk_link_detect_interval", "uint32", 0], 8: ["sdk_link_detect_duration", "uint32", 0], 9: ["client_outer_ip", "string", ""], 10: ["ntp_time", "uint64", { low: 0, high: 0, unsigned: true }], 11: ["root_rsa_certs_ver", "uint32", 0], 12: ["geofencing_id", "uint32", 0], 13: ["svraddr_ver", "uint32", 0], 14: ["root_ecc_certs_ver", "uint32", 0] } }, GetSvraddrRequest: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode", "zego_connection.proto_accesshub.Mode", 0], 5: ["id_name", "string", ""], 6: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 7: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 8: ["zegoconn_version", "uint32", 0], 9: ["device_id", "string", ""], 10: ["geofencing_type", "uint32", 0], 11: ["geofencings", "[uint32", null], 12: ["addr_type", "uint32", 0], 13: ["dispatch_tag", "uint32", 0] } }, GetSvraddrResponse: { $m: { 1: ["code", "int32", 0], 2: ["msg", "string", ""], 3: ["data", "zego_connection.proto_accesshub.GetSvraddrResponseData", null] } }, GetSvraddrResponseData: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["geofencing_id", "uint32", 0], 3: ["svraddr_ver", "uint32", 0], 4: ["anycast_ips", "<zego_connection.proto_accesshub.IPAddr", null], 5: ["zegons_domain", "string", ""], 6: ["zegons_ips", "<zego_connection.proto_accesshub.IPAddr", null], 7: ["accesshub_domain", "string", ""], 8: ["accesshub_ips", "<zego_connection.proto_accesshub.IPAddr", null], 9: ["logreport_domain", "string", ""], 10: ["logreport_ips", "<zego_connection.proto_accesshub.IPAddr", null], 11: ["detaillog_domain", "string", ""], 12: ["detaillog_ips", "<zego_connection.proto_accesshub.IPAddr", null], 13: ["stunsvr_domain", "string", ""], 14: ["stunsvr_ips", "<zego_connection.proto_accesshub.IPAddr", null], 15: ["zimfile_domain", "string", ""], 16: ["zimfile_ips", "<zego_connection.proto_accesshub.IPAddr", null], 17: ["accesshub_sni", "string", ""], 18: ["detectsvr_domain", "string", ""], 19: ["accesscube_domain", "string", ""], 20: ["wslog_domain", "string", ""], 21: ["wslog_ips", "<zego_connection.proto_accesshub.IPAddr", null], 22: ["http3_domain", "string", ""], 23: ["accesshub_v6_domain", "string", ""], 24: ["http3_v6_domain", "string", ""], 25: ["logreport_v6_domain", "string", ""], 26: ["detaillog_v6_domain", "string", ""] } }, HBRequest: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["ts", "int64", { low: 0, high: 0, unsigned: false }] } }, HBResponse: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["ts", "int64", { low: 0, high: 0, unsigned: false }], 3: ["ntp_time", "uint64", { low: 0, high: 0, unsigned: true }] } }, Http3AccesshubDispatchGroup: { $m: { 1: ["group", "string", ""], 2: ["host", "string", ""] } }, HTTPRequest: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode", "string", ""], 5: ["id_name", "string", ""], 6: ["reqid", "string", ""], 7: ["stick", "string", ""], 8: ["service", "string", ""], 9: ["location", "string", ""], 10: ["method", "string", ""], 11: ["headers", "<zego_connection.proto_accesshub.HTTPRequest.HTTPHeader", null], 12: ["body", "bytes", []], 13: ["ack", "bool", false], 14: ["mode_no", "zego_connection.proto_accesshub.Mode", 0], 15: ["service_no", "zego_connection.proto_accesshub.Service", 0], 16: ["method_no", "zego_connection.proto_accesshub.Method", 0], 17: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 18: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 19: ["zegoconn_version", "uint32", 0], 20: ["device_id", "string", ""], 21: ["reduce_resp_header", "uint32", 0] }, HTTPHeader: { $m: { 1: ["name", "string", ""], 2: ["val", "string", ""] } } }, HTTPRequest2: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode", "zego_connection.proto_accesshub.Mode", 0], 5: ["id_name", "string", ""], 6: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 7: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 8: ["zegoconn_version", "uint32", 0], 9: ["headers", "<zego_connection.proto_accesshub.HTTPRequest.HTTPHeader", null], 10: ["method", "zego_connection.proto_accesshub.Method", 0], 11: ["interface_id", "uint32", 0], 12: ["res_id", "string", ""], 13: ["params", "string", ""], 14: ["body", "bytes", []], 15: ["ack", "bool", false], 16: ["device_id", "string", ""], 17: ["ts", "uint64", { low: 0, high: 0, unsigned: true }], 18: ["signature", "bytes", []], 19: ["token", "string", ""], 20: ["lite_sign", "string", ""], 21: ["reduce_resp_header", "uint32", 0] } }, HTTPRequestAck: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }] } }, HTTPRequestDroped: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["reason", "int32", 0], 3: ["msg", "string", ""] } }, HTTPResponse: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["headers", "<zego_connection.proto_accesshub.HTTPRequest.HTTPHeader", null], 3: ["status_code", "int32", 0], 4: ["body", "bytes", []] } }, IPAddr: { $m: { 1: ["ipv4", "fixed32", 0], 2: ["ipv6", "zego_connection.proto_accesshub.IPV6Addr", null] } }, IPV6Addr: { $m: { 1: ["high", "fixed64", { low: 0, high: 0, unsigned: false }], 2: ["low", "fixed64", { low: 0, high: 0, unsigned: false }] } }, MessageType: { $e: { MSG_TYPE_EMPTY: 0, MSG_TYPE_CONNECTION_CLOSED: 1, MSG_TYPE_STREAM_CLOSED: 2, MSG_TYPE_CLOSE_CONNECTION: 3, MSG_TYPE_HTTP_REQUEST: 4, MSG_TYPE_HTTP_RESPONSE: 5, MSG_TYPE_HTTP_REQUEST_DROPED: 6, MSG_TYPE_PROXY_CONNECT: 7, MSG_TYPE_PROXY_CONNECTED: 8, MSG_TYPE_PROXY_CONNECTION_CLOSED: 9, MSG_TYPE_PROXY_SEND_DATA: 10, MSG_TYPE_PROXY_RECV_DATA: 11, MSG_TYPE_HB_REQUEST: 12, MSG_TYPE_HB_RESPONSE: 13, MSG_TYPE_GET_CONFIG_REQUEST: 14, MSG_TYPE_GET_CONFIG_RESPONSE: 15, MSG_TYPE_HTTP_REQUEST_ACK: 16, MSG_TYPE_PC_UPWARD_MESSAGE: 17, MSG_TYPE_PC_UPWARD_MESSAGE_ACK: 18, MSG_TYPE_PC_ESTABLISHED: 19, MSG_TYPE_PC_BROKEN: 20, MSG_TYPE_PC_DOWNWARD_MESSAGE: 21, MSG_TYPE_REDIRECT: 22, MSG_TYPE_GET_APPCONFIG_REQUEST: 23, MSG_TYPE_GET_APPCONFIG_RESPONSE: 24, MSG_TYPE_PUSH_APPCONFIG: 25, MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST: 26, MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE: 27, MSG_TYPE_GET_IM_CONFIG_REQUEST: 28, MSG_TYPE_GET_IM_CONFIG_RESPONSE: 29, MSG_TYPE_PUSH_EXCEPTION: 30, MSG_TYPE_RESOLVE_DOMAIN_REQUEST: 31, MSG_TYPE_RESOLVE_DOMAIN_RESPONSE: 32, MSG_TYPE_HTTP_REQUEST2: 33, MSG_TYPE_REDIRECT2: 34, MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2: 35, MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2: 36, MSG_TYPE_GET_ROOTCERTS_REQUEST: 37, MSG_TYPE_GET_ROOTCERTS_RESPONSE: 38, MSG_TYPE_GET_SVRADDR_REQUEST: 39, MSG_TYPE_GET_SVRADDR_RESPONSE: 40, MSG_TYPE_CHECK_SERVICEAREA_REQUEST: 41, MSG_TYPE_CHECK_SERVICEAREA_RESPONSE: 42, MSG_TYPE_UA_DISPATCH_REQUEST: 50, MSG_TYPE_UA_DISPATCH_RESPONSE: 51, MSG_TYPE_UA_ECHO_REQUEST: 52, MSG_TYPE_UA_ECHO_RESPONSE: 53, MSG_TYPE_NODE_REGISTER_REQUEST: 100, MSG_TYPE_NODE_REGISTER_RESPONSE: 101, MSG_TYPE_NODE_HB_REQUEST: 102, MSG_TYPE_NODE_HB_RESPONSE: 103 } }, Method: { $e: { METHOD_UNSET: 0, METHOD_GET: 1, METHOD_POST: 2, METHOD_PUT: 3, METHOD_PATCH: 4, METHOD_DELETE: 5, METHOD_HEAD: 6, METHOD_OPTIONS: 7 } }, Mode: { $e: { Mode_UNSET: 0, MODE_ONLINE: 1, MODE_TEST: 2, MODE_ALPHA: 3 } }, PCBroken: { $m: {} }, PCDownwardMessage: { $m: { 1: ["payload", "bytes", []], 2: ["wss_message_type", "uint32", 0], 3: ["ts", "uint64", { low: 0, high: 0, unsigned: true }] } }, PCEstablished: { $m: { 1: ["elapse", "uint32", 0], 2: ["from", "uint32", 0] } }, PCUpwardMessage: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["appid", "uint32", 0], 3: ["biz_type", "uint32", 0], 4: ["mode_no", "zego_connection.proto_accesshub.Mode", 0], 5: ["id_name", "string", ""], 6: ["service_no", "zego_connection.proto_accesshub.Service", 0], 7: ["ack", "bool", false], 8: ["payload", "bytes", []], 9: ["sdk_type", "zego_connection.proto_accesshub.SdkType", 0], 10: ["wss_message_type", "uint32", 0], 11: ["wss_path", "string", ""], 12: ["wss_raw_query", "string", ""], 13: ["zegoconn_version", "uint32", 0], 14: ["zegoconn_run_env", "zego_connection.proto_accesshub.ZegoconnRunEnv", 0], 15: ["backend_conn_type", "zego_connection.proto_accesshub.BackendConnType", 0], 16: ["device_id", "string", ""], 17: ["geofencing_type", "uint32", 0], 18: ["geofencings", "[uint32", null], 19: ["addr_type", "uint32", 0], 20: ["net_mode", "uint32", 0] } }, PCUpwardMessageAck: { $m: { 1: ["txid", "uint64", { low: 0, high: 0, unsigned: true }] } }, ProxyConnectionClosed: { $m: { 1: ["code", "int32", 0], 2: ["msg", "string", ""], 3: ["connected", "int32", 0] } }, PushAppConfig: { $m: { 1: ["config_key", "string", ""], 2: ["data", "bytes", []] } }, PushException: { $m: { 1: ["reason", "int32", 0], 2: ["msg", "string", ""], 3: ["txid", "uint64", { low: 0, high: 0, unsigned: true }] } }, Redirect2: { $m: { 1: ["rand", "string", ""], 2: ["secret", "string", ""], 3: ["groups", "<zego_connection.proto_accesshub.AccesshubDispatchGroup2", null], 4: ["wss_groups", "<zego_connection.proto_accesshub.WssAccesshubDispatchGroup", null], 5: ["ttl", "uint32", 0], 6: ["http3_groups", "<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup", null], 7: ["wss_v6_groups", "<zego_connection.proto_accesshub.WssAccesshubDispatchGroup", null], 8: ["http3_v6_groups", "<zego_connection.proto_accesshub.Http3AccesshubDispatchGroup", null] } }, SdkType: { $e: { SDK_TYPE_UNSET: 0, SDK_TYPE_NATIVE: 1, SDK_TYPE_WSS_WEB: 3, SDK_TYPE_ZIM_WEB: 4 } }, Service: { $e: { SERVICE_UNSET: 0, SERVICE_MEDIAGW: 1, SERVICE_LIVEROOM: 2, SERVICE_MIX: 3, SERVICE_ZEUS: 4, SERVICE_ZPUSH: 5, SERVICE_L3: 6, SERVICE_TALKLINE: 7, SERVICE_EDUSUITE: 8, SERVICE_ZIM: 9, SERVICE_ClOUD_SETTING: 10, SERVICE_ZEUSHB: 11, SERVICE_USER_LOGIC: 12, SERVICE_UNIFYDISPATCH: 13, SERVICE_QUALITY: 14, SERVICE_SECURITY: 15, SERVICE_KTVCPR: 16, SERVICE_SWITCH4LIVEROOM: 17, SERVICE_WEBRTC_SIGNAL: 18, SERVICE_L3_WEBRTC_SIGNAL: 19, SERVICE_VIDEOCPR: 20, SERVICE_CDN: 21, SERVICE_CLOUDRECORD: 22, SERVICE_INNER_ECHO: 23, SERVICE_OUTER_ECHO: 24, SERVICE_LOCALHOST_ECHO: 25, SERVICE_ECHO: 26, SERVICE_DOCSERVICE: 27, SERVICE_AUTHSVR: 28, SERVICE_WEBLIVEROOM: 29, SERVICE_WHITEBOARD: 30, SERVICE_METAWORLD: 31, SERVICE_ZEGOLAND: 32 } }, StreamClosed: { $m: { 1: ["code", "int32", 0], 2: ["msg", "string", ""] } }, WssAccesshubDispatchGroup: { $m: { 1: ["group", "string", ""], 2: ["host", "string", ""], 3: ["main_domain", "string", ""] } }, ZegoconnRunEnv: { $e: { ZEGOCONN_RUN_ENV_UNSET: 0, ZEGOCONN_RUN_ENV_BROWSER: 1, ZEGOCONN_RUN_ENV_APPLET: 2 } } }, proto_initconfig: { AppConfig: { $m: { 1: ["test_id", "int32", 0], 2: ["domain", "string", ""], 3: ["flexible_domain", "string", ""], 4: ["replace_flexible_domain", "string", ""] } }, InitConfig: { $m: { 1: ["app_config", "zego_connection.proto_initconfig.AppConfig", null], 4: ["speedlog_config", "zego_connection.proto_initconfig.SpeedlogConfig", null], 5: ["media_config", "zego_connection.proto_initconfig.MediaConfig", null], 9: ["log_config", "zego_connection.proto_initconfig.LogConfig", null] } }, LogConfig: { $m: { 1: ["ws_log", "int32", 0] } }, MediaConfig: { $m: { 1: ["play_config", "zego_connection.proto_initconfig.MediaPlayConfig", null], 2: ["publish_config", "zego_connection.proto_initconfig.MediaPublishConfig", null] } }, MediaPlayConfig: { $m: { 5: ["resource_info", "<zego_connection.proto_initconfig.MediaResourceInfo", null], 16: ["transcoding", "zego_connection.proto_initconfig.TranscodingConfig", null], 19: ["enable_codec_template", "int32", 0], 20: ["codec_template_postfix_pattern", "string", ""] } }, MediaPublishConfig: { $m: { 2: ["resource_info", "<zego_connection.proto_initconfig.MediaResourceInfo", null], 5: ["enable_subject_segmentation", "int32", 0], 6: ["object_segmentation_platform", "int32", 0] } }, MediaResourceInfo: { $m: { 1: ["resource_type", "zego_connection.proto_initconfig.ResourceType", 0], 2: ["service_info", "<zego_connection.proto_initconfig.MediaServiceProtocolInfo", null] } }, MediaServiceProtocolInfo: { $m: { 1: ["config_id", "string", ""], 2: ["protocol", "zego_connection.proto_initconfig.ProtocolType", 0], 3: ["url_template", "string", ""], 4: ["resolve_type", "zego_connection.proto_initconfig.ResolveType", 0], 5: ["push_cdn_authentication", "int32", 0], 6: ["cdn_quic_version", "<int32", null] } }, ProtocolType: { $e: { UDP: 0, RTMP: 1, FLV: 2, HLS: 3, WEBRTC: 4 } }, ResolveType: { $e: { LOCAL_DNS: 0, DISPATCH: 1 } }, ResourceType: { $e: { CDN: 0, RTC: 1, L3: 2, CDN_PLUS: 3, CDN_PLUS_BACKUP: 4 } }, SpeedlogConfig: { $m: { 1: ["report_count", "int32", 0], 2: ["report_retry_interval", "int32", 0], 3: ["push_quality_sample_count", "int32", 0], 4: ["pull_quality_sample_count", "int32", 0], 5: ["hardware_report_cycle", "int32", 0], 6: ["room_user_max_count", "int32", 0], 7: ["room_stream_max_count", "int32", 0], 8: ["charge_info_report_cycle", "int32", 0], 9: ["charge_info_report_mode", "int32", 0], 10: ["disable_report_pull", "<zego_connection.proto_initconfig.ResourceType", null], 11: ["report_max_bytes", "int32", 0], 12: ["push_quality_report_freq", "int32", 0], 13: ["pull_quality_report_freq", "int32", 0], 14: ["charge_info_report_no_playing", "int32", 0] } }, TranscodingConfig: { $m: { 1: ["video_codec_h264", "string", ""] } } } } }, "", M, false);
              const G = M.zego_connection;
              var J = function() {
                return J = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e5 = arguments.length; n5 < e5; n5++)
                    for (var r3 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r3) && (t5[r3] = i5[r3]);
                  return t5;
                }, J.apply(this, arguments);
              };
              D.util.Long = z, D.configure();
              var F, H = function() {
                function i5(t5) {
                  var i6;
                  this.stateCenter = t5, this.W = G, this.K = ((i6 = {})[d.MSG_TYPE_STREAM_CLOSED] = ["proto_accesshub", "ConnectionClosed"], i6[d.MSG_TYPE_CLOSE_CONNECTION] = ["proto_accesshub", "CloseConnection"], i6[d.MSG_TYPE_HTTP_REQUEST] = ["proto_accesshub", "HTTPRequest"], i6[d.MSG_TYPE_HTTP_RESPONSE] = ["proto_accesshub", "HTTPResponse"], i6[d.MSG_TYPE_HTTP_REQUEST2] = ["proto_accesshub", "HTTPRequest2"], i6[d.MSG_TYPE_HB_REQUEST] = ["proto_accesshub", "HBRequest"], i6[d.MSG_TYPE_HB_RESPONSE] = ["proto_accesshub", "HBResponse"], i6[d.MSG_TYPE_GET_CONFIG_REQUEST] = ["proto_accesshub", "GetConfigRequest"], i6[d.MSG_TYPE_GET_CONFIG_RESPONSE] = ["proto_accesshub", "GetConfigResponse"], i6[d.MSG_TYPE_GET_SVRADDR_REQUEST] = ["proto_accesshub", "GetSvraddrRequest"], i6[d.MSG_TYPE_GET_SVRADDR_RESPONSE] = ["proto_accesshub", "GetSvraddrResponse"], i6[d.MSG_TYPE_HTTP_REQUEST_ACK] = ["proto_accesshub", "HTTPRequestAck"], i6[d.MSG_TYPE_PC_UPWARD_MESSAGE] = ["proto_accesshub", "PCUpwardMessage"], i6[d.MSG_TYPE_PC_UPWARD_MESSAGE_ACK] = ["proto_accesshub", "PCUpwardMessageAck"], i6[d.MSG_TYPE_PC_ESTABLISHED] = ["proto_accesshub", "PCEstablished"], i6[d.MSG_TYPE_PC_BROKEN] = ["proto_accesshub", "PCBroken"], i6[d.MSG_TYPE_PC_DOWNWARD_MESSAGE] = ["proto_accesshub", "PCDownwardMessage"], i6[d.MSG_TYPE_REDIRECT] = ["proto_accesshub", "Redirect"], i6[d.MSG_TYPE_REDIRECT2] = ["proto_accesshub", "Redirect2"], i6[d.MSG_TYPE_GET_APPCONFIG_REQUEST] = ["proto_accesshub", "GetAppConfigRequest"], i6[d.MSG_TYPE_GET_APPCONFIG_RESPONSE] = ["proto_accesshub", "GetAppConfigResponse"], i6[d.MSG_TYPE_PUSH_APPCONFIG] = ["proto_accesshub", "PushAppConfig"], i6[d.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST] = ["proto_accesshub", "AccesshubDispatchRequest"], i6[d.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE] = ["proto_accesshub", "AccesshubDispatchResponse"], i6[d.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2] = ["proto_accesshub", "AccesshubDispatchRequest2"], i6[d.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2] = ["proto_accesshub", "AccesshubDispatchResponse2"], i6[d.MSG_TYPE_PUSH_EXCEPTION] = ["proto_accesshub", "PushException"], i6);
                }
                return i5.prototype.encodeRequest = function(i6, n5, e5, r3) {
                  var s3, o3 = this.K[i6], u3 = this.Z(this.W[o3[0]][o3[1]], n5), a2 = u3.length, h2 = 13;
                  return this.stateCenter.appInfo.model === t4.Private ? ((s3 = new Uint8Array(13 + a2))[0] = 172, s3[1] = 0, s3[2] = 0, s3.set(new Uint8Array(Int32Array.from([e5]).buffer).reverse(), 3), s3[7] = i6 >> 8, s3[8] = i6 - (s3[2] << 8), s3.set(new Uint8Array(Int32Array.from([a2]).buffer).reverse(), 9)) : r3 === c.WebTransport ? ((s3 = new Uint8Array(9 + a2))[0] = 175, s3[1] = 0, s3[2] = i6 >> 8, s3[3] = i6 - (s3[2] << 8), s3.set(new Uint8Array(Int32Array.from([a2]).buffer).reverse(), 4), s3[8] = 0, h2 = 9) : ((s3 = new Uint8Array(13 + a2))[0] = 175, s3[1] = 0, s3[2] = i6 >> 8, s3[3] = i6 - (s3[2] << 8), s3.set(new Uint8Array(Int32Array.from([a2]).buffer).reverse(), 4), s3.set(new Uint8Array(Int32Array.from([e5]).buffer).reverse(), 8), s3[12] = 0), s3.set(u3, h2), s3;
                }, i5.prototype.decodeResponse = function(i6, n5) {
                  var e5, r3, s3, o3 = 13, u3 = 0;
                  if (this.stateCenter.appInfo.model === t4.Private)
                    e5 = (i6[7] << 8) + i6[8], s3 = (r3 = new DataView(i6.buffer)).getUint32(3), u3 = r3.getUint32(9);
                  else if (n5 === c.WebTransport) {
                    if (i6.length < 9)
                      return [0, 0, null, 0];
                    if (e5 = (i6[2] << 8) + i6[3], s3 = 0, o3 = 9, u3 = i6[4] * Math.pow(256, 3) + i6[5] * Math.pow(256, 2) + 256 * i6[6] + i6[7], i6.length - o3 < u3)
                      return [0, 0, null, 0];
                  } else
                    e5 = (i6[2] << 8) + i6[3], u3 = (r3 = new DataView(i6.buffer)).getUint32(4), s3 = r3.getUint32(8);
                  var a2 = o3 + u3, h2 = i6.slice(o3, a2);
                  return [s3, e5, this.decodeBody(h2, e5), a2];
                }, i5.prototype.decodeBody = function(t5, i6) {
                  try {
                    var n5 = this.K[i6];
                    return this.X(this.W[n5[0]][n5[1]], t5);
                  } catch (t6) {
                    return { code: 1 };
                  }
                }, i5.prototype.decodeConfigMessage = function(t5) {
                  return this.X(this.W.proto_initconfig.InitConfig, t5);
                }, i5.prototype.Z = function(t5, i6) {
                  return t5.encode(new t5(i6)).finish();
                }, i5.prototype.X = function(t5, i6) {
                  return J({}, t5.decode(i6));
                }, i5;
              }(), V = function() {
                function t5(t6, i5) {
                  void 0 === t6 && (t6 = null), void 0 === i5 && (i5 = null), this.next = null, this.prev = null, this.tt = t6, this.U = i5;
                }
                return Object.defineProperty(t5.prototype, "id", { get: function() {
                  return this.tt ? this.tt : null;
                }, set: function(t6) {
                  this.tt = t6;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "data", { get: function() {
                  return this.U;
                }, set: function(t6) {
                  this.U = t6;
                }, enumerable: false, configurable: true }), t5.prototype.hasNext = function() {
                  return this.next && this.next.id;
                }, t5.prototype.hasPrev = function() {
                  return this.prev && this.prev.id;
                }, t5;
              }(), Q = function() {
                function t5() {
                  this.start = new V(), this.end = new V(), this.it = 1, this.nt = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null;
                }
                return t5.prototype.insertBefore = function(t6, i5) {
                  var n5 = new V(this.it, i5);
                  return n5.next = t6, n5.prev = t6.prev, t6.prev && (t6.prev.next = n5), t6.prev = n5, ++this.it, ++this.nt, n5;
                }, t5.prototype.addLast = function(t6) {
                  return this.insertBefore(this.end, t6);
                }, t5.prototype.add = function(t6) {
                  return this.addLast(t6);
                }, t5.prototype.getFirst = function() {
                  return 0 === this.nt ? null : this.start.next;
                }, t5.prototype.getLast = function() {
                  return 0 === this.nt ? null : this.end.prev;
                }, t5.prototype.size = function() {
                  return this.nt;
                }, t5.prototype.getFromFirst = function(t6) {
                  var i5 = 0, n5 = this.start.next;
                  if (t6 >= 0)
                    for (; i5 < t6 && null !== n5; )
                      n5 = n5.next, ++i5;
                  else
                    n5 = null;
                  if (null === n5)
                    throw "Index out of bounds.";
                  return n5;
                }, t5.prototype.get = function(t6) {
                  return 0 === t6 ? this.getFirst() : t6 === this.nt - 1 ? this.getLast() : this.getFromFirst(t6);
                }, t5.prototype.remove = function(t6) {
                  return t6.prev && (t6.prev.next = t6.next), t6.next && (t6.next.prev = t6.prev), --this.nt, t6;
                }, t5.prototype.removeFirst = function() {
                  var t6 = null;
                  return this.nt > 0 && this.start.next && (t6 = this.remove(this.start.next)), t6;
                }, t5.prototype.removeLast = function() {
                  var t6 = null;
                  return this.nt > 0 && this.end.prev && (t6 = this.remove(this.end.prev)), t6;
                }, t5.prototype.removeAll = function() {
                  this.start.next = this.end, this.end.prev = this.start, this.nt = 0, this.it = 1;
                }, t5.prototype.each = function(t6) {
                  for (var i5 = this.start; i5.hasNext(); )
                    t6(i5 = i5.next);
                }, t5.prototype.forEach = function(t6) {
                  for (var i5 = this.start; i5.hasNext() && !t6(i5 = i5.next); )
                    ;
                }, t5.prototype.find = function(t6) {
                  for (var i5 = this.start, n5 = false, e5 = null; i5.hasNext() && !n5; )
                    t6(i5 = i5.next) && (e5 = i5, n5 = true);
                  return e5;
                }, t5.prototype.map = function(t6) {
                  for (var i5 = this.start, n5 = []; i5.hasNext(); )
                    t6(i5 = i5.next) && n5.push(i5);
                  return n5;
                }, t5.prototype.push = function(t6) {
                  return this.addLast(t6);
                }, t5.prototype.unshift = function(t6) {
                  this.insertBefore(this.nt > 0 ? this.start.next : this.end, t6);
                }, t5.prototype.pop = function() {
                  return this.removeLast();
                }, t5.prototype.shift = function() {
                  return this.removeFirst();
                }, t5;
              }(), Y = "zn.zca.gc", K = "zn.zca.oce", Z = "zn.zca.gac", X = "zn.zca.rd", W = "zn.zca.cc", $ = "zn.zca.ir.0", tt = "zn.sai.0", it = "zn.shq.0", nt = "zn.nab.gsa", et = "zn.nab.du", rt = "zn.nab.gac", st = "zn.nhb.s", ot = "zn.rlh.at", ut = "zn.rlh.sm", at = "zn.wl.cs.0", ct = "zn.wl.om", ht = "zn.wl.h3.g", ft = "zn.wl.h3.t.2", lt = "zn.wl.h3.s", dt = "zn.wl.h3.s.0", vt = "zn.wl.sls", mt = "zn.wl.sidr", pt = "zn.wl.c.0", gt = "zn.wl.gbi.0", bt = "zn.sm.cs.0", _t = "zn.sm.bsh", yt = "zn.sm.cps", wt = "zn.napr.sr", St = "zn.napr.ope", Et = "zn.nahr.sr", kt = "zn.nahr.sr2", Ot = { domains: ["accesshub-wss.zego.im"], mode: "online", modeNo: g.MODE_ONLINE, sdkType: 3, connectVer: 33, pcEstablishTimeout: 15, scheme: "wss", location: "accesshub", wssMessageType: 1, model: t4.Normal }, It = "0c9e6e0f8c0a8f4e", Rt = 2e4, Tt = r2(955), Ct = r2.n(Tt), At = r2(178), zt = r2.n(At), Dt = new TextDecoder("utf-8"), Nt = new TextEncoder(), Pt = function(t5) {
                return Nt.encode(t5);
              }, Mt = function(t5) {
                return Dt.decode(t5);
              }, xt = function() {
                return new Promise(function(t5, i5) {
                  t5(Math.random());
                });
              };
              function jt(t5, i5, n5) {
                var e5 = function(t6, i6) {
                  try {
                    return localStorage.getItem(i6);
                  } catch (t7) {
                  }
                }(0, "".concat(t5, "_").concat(n5, "_").concat(i5));
                if (!e5)
                  return null;
                var r3 = function(t6, i6) {
                  try {
                    return Ct().decrypt(t6, i6).toString(zt());
                  } catch (t7) {
                    return "";
                  }
                }(e5, It);
                return r3 && JSON.parse(r3) || null;
              }
              function qt(t5, i5, n5, e5, r3) {
                var s3 = e5;
                if (r3) {
                  var o3 = jt(t5, i5, n5);
                  o3 && (s3 = Object.assign(o3, e5));
                }
                var u3, a2, c2 = JSON.stringify(s3);
                0 === i5 && (u3 = JSON.stringify(s3), a2 = It, c2 = Ct().encrypt(u3, a2).toString()), function(t6, i6, n6) {
                  try {
                    localStorage.setItem(i6, n6);
                  } catch (t7) {
                  }
                }(0, "".concat(t5, "_").concat(n5, "_").concat(i5), c2);
              }
              function Lt(t5) {
                return (null == t5 ? void 0 : t5.includes("https")) ? 1 : 3;
              }
              !function(t5) {
                t5[t5.NotSupport = 0] = "NotSupport", t5[t5.LinkFailed = 1] = "LinkFailed", t5[t5.CreateStreamFailed = 2] = "CreateStreamFailed", t5[t5.WriteDataFailed = 3] = "WriteDataFailed", t5[t5.ReadDataFailed = 4] = "ReadDataFailed", t5[t5.GetConfigFailed = 5] = "GetConfigFailed", t5[t5.NoUseableHttp3Server = 6] = "NoUseableHttp3Server", t5[t5.ClosedTooOften = 7] = "ClosedTooOften", t5[t5.LinkTimeout = 8] = "LinkTimeout", t5[t5.Unknown = 100] = "Unknown";
              }(F || (F = {}));
              var Bt, Ut = { code: 1100002, msg: "network timeout." }, Gt = { code: 1100004, msg: "net agent timeout" }, Jt = { code: 1100006, msg: "net connect timeout" }, Ft = { code: 1100007, msg: "the user breaks the network connection" }, Ht = 1100009, Vt = 1100011, Qt = { code: 1100012, msg: "the socket is idle" };
              !function(t5) {
                t5[t5.BROWSER = 0] = "BROWSER", t5[t5.WEIXINMINI = 1] = "WEIXINMINI";
              }(Bt || (Bt = {}));
              var Yt = function() {
                function t5(t6, i5) {
                  this.url = t6, this.readyState = h.CLOSED, this.et = wx.connectSocket({ url: t6 }), this.init();
                }
                return t5.prototype.init = function() {
                  var t6 = this;
                  this.et && (this.readyState = h.CONNECTING, this.et.onOpen(function(i5) {
                    t6.readyState = t6.et.readyState, "function" == typeof t6.onopen && (t6.onopen(i5), t6.et.onClose(function(i6) {
                      t6.readyState = t6.et.readyState, "function" == typeof t6.onclose && t6.onclose(i6);
                    }), t6.et.onMessage(function(i6) {
                      "function" == typeof t6.onmessage && t6.onmessage(i6);
                    }));
                  }), this.et.onError(function(i5) {
                    t6.readyState = t6.et.readyState, "function" == typeof t6.onerror && t6.onerror(i5);
                  }));
                }, t5.prototype.onopen = function(t6) {
                }, t5.prototype.onerror = function(t6) {
                }, t5.prototype.onclose = function(t6) {
                }, t5.prototype.onmessage = function(t6) {
                }, t5.prototype.send = function(t6, i5, n5, e5) {
                  t6 instanceof Uint8Array && (t6 = new Uint8Array(t6).buffer), this.et && this.et.send({ data: t6 });
                }, t5.prototype.close = function() {
                  this.et && this.et.close();
                }, t5;
              }(), Kt = function() {
                function t5(t6) {
                  void 0 === t6 && (t6 = ""), this.st = t6, this.count = 0, this.isStarting = false, this.timer = 0, this.lastLogTime = 0, this.speed = 0, this.lastTime = 0;
                }
                return t5.prototype.add = function(t6) {
                  this.isStarting && (this.count += t6);
                }, t5.prototype.stop = function() {
                  return this.isStarting = false, this.reset();
                }, t5.prototype.start = function(t6) {
                  var i5 = this;
                  void 0 === t6 && (t6 = 0), this.isStarting = true, this.count = 0, clearInterval(this.timer), t6 && (this.timer = window.setInterval(function() {
                    i5.speed = i5.count / t6, i5.count = 0;
                  }, t6));
                }, t5.prototype.reset = function() {
                  this.count = 0, clearInterval(this.timer), this.timer = 0, this.speed = 0;
                }, t5;
              }(), Zt = function() {
                function t5() {
                  this.ot = {};
                }
                return t5.prototype.addEventHandler = function(t6, i5) {
                  if (this.ot[t6] || (this.ot[t6] = []), "function" != typeof i5)
                    throw new Error("Params callBack is not a Function");
                  return this.ot[t6] && -1 == this.ot[t6].indexOf(i5) && this.ot[t6].push(i5), true;
                }, t5.prototype.removeEventHandler = function(t6, i5) {
                  return !!this.ot[t6] && (this.ot[t6] = i5 ? this.ot[t6].filter(function(t7) {
                    return t7 !== i5;
                  }) : [], true);
                }, t5.prototype.emit = function(t6) {
                  for (var i5 = [], n5 = 1; n5 < arguments.length; n5++)
                    i5[n5 - 1] = arguments[n5];
                  this.ot[t6] && this.ot[t6].forEach(function(n6) {
                    try {
                      n6.apply(void 0, i5);
                    } catch (i6) {
                      console.error('Fail to execute callback of event "'.concat(t6, '" : ').concat(i6));
                    }
                  });
                }, t5;
              }(), Xt = function(t5, i5, n5, e5) {
                return new (n5 || (n5 = Promise))(function(r3, s3) {
                  function o3(t6) {
                    try {
                      a2(e5.next(t6));
                    } catch (t7) {
                      s3(t7);
                    }
                  }
                  function u3(t6) {
                    try {
                      a2(e5.throw(t6));
                    } catch (t7) {
                      s3(t7);
                    }
                  }
                  function a2(t6) {
                    var i6;
                    t6.done ? r3(t6.value) : (i6 = t6.value, i6 instanceof n5 ? i6 : new n5(function(t7) {
                      t7(i6);
                    })).then(o3, u3);
                  }
                  a2((e5 = e5.apply(t5, i5 || [])).next());
                });
              }, Wt = function(t5, i5) {
                var n5, e5, r3, s3, o3 = { label: 0, sent: function() {
                  if (1 & r3[0])
                    throw r3[1];
                  return r3[1];
                }, trys: [], ops: [] };
                return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
                  return this;
                }), s3;
                function u3(u4) {
                  return function(a2) {
                    return function(u5) {
                      if (n5)
                        throw new TypeError("Generator is already executing.");
                      for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                        try {
                          if (n5 = 1, e5 && (r3 = 2 & u5[0] ? e5.return : u5[0] ? e5.throw || ((r3 = e5.return) && r3.call(e5), 0) : e5.next) && !(r3 = r3.call(e5, u5[1])).done)
                            return r3;
                          switch (e5 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                            case 0:
                            case 1:
                              r3 = u5;
                              break;
                            case 4:
                              return o3.label++, { value: u5[1], done: false };
                            case 5:
                              o3.label++, e5 = u5[1], u5 = [0];
                              continue;
                            case 7:
                              u5 = o3.ops.pop(), o3.trys.pop();
                              continue;
                            default:
                              if (!((r3 = (r3 = o3.trys).length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                                o3 = 0;
                                continue;
                              }
                              if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                                o3.label = u5[1];
                                break;
                              }
                              if (6 === u5[0] && o3.label < r3[1]) {
                                o3.label = r3[1], r3 = u5;
                                break;
                              }
                              if (r3 && o3.label < r3[2]) {
                                o3.label = r3[2], o3.ops.push(u5);
                                break;
                              }
                              r3[2] && o3.ops.pop(), o3.trys.pop();
                              continue;
                          }
                          u5 = i5.call(t5, o3);
                        } catch (t6) {
                          u5 = [6, t6], e5 = 0;
                        } finally {
                          n5 = r3 = 0;
                        }
                      if (5 & u5[0])
                        throw u5[1];
                      return { value: u5[0] ? u5[1] : void 0, done: true };
                    }([u4, a2]);
                  };
                }
              };
              const $t = function() {
                function t5(t6) {
                  this.rt = t6, this.readyState = h.CLOSED, this.ct = null, this.ut = [], this.ht = [], this.ft = {};
                }
                return t5.isSupport = function() {
                  var t6, i5;
                  return window && !!window.WebTransport && !!(null === (i5 = null === (t6 = window.WebTransport) || void 0 === t6 ? void 0 : t6.prototype) || void 0 === i5 ? void 0 : i5.createBidirectionalStream);
                }, t5.prototype.getStreamByID = function(t6) {
                  return this.ut.find(function(i5) {
                    return i5.streamID === t6;
                  }) || null;
                }, t5.prototype.startConnect = function(t6) {
                  var i5 = this;
                  try {
                    this.ct = new WebTransport(t6), this.readyState = h.CONNECTING, this.ct.ready.then(function(t7) {
                      i5.readyState = h.OPEN, i5.onopen(t7), i5.onTransportClosed();
                    }).catch(function(t7) {
                      i5.readyState = h.CLOSED, i5._t(F.LinkFailed, t7), i5.close();
                    });
                  } catch (t7) {
                    this.readyState = h.CLOSED, this._t(F.NotSupport, t7);
                  }
                }, t5.prototype.onTransportClosed = function() {
                  return Xt(this, void 0, void 0, function() {
                    var t6;
                    return Wt(this, function(i5) {
                      switch (i5.label) {
                        case 0:
                          return i5.trys.push([0, 2, , 3]), [4, this.ct.closed];
                        case 1:
                          return i5.sent(), this.readyState !== h.CLOSED && this.onclose && this.onclose({ code: 0, message: "server-side h3 closed" }), [3, 3];
                        case 2:
                          return t6 = i5.sent(), this.readyState !== h.CLOSED && this.onclose && this.onclose(t6), [3, 3];
                        case 3:
                          return this.readyState = h.CLOSED, this.ct = null, this.ut = [], this.ht = [], this.ft = {}, [2];
                      }
                    });
                  });
                }, t5.prototype.onopen = function(t6) {
                }, t5.prototype.onerror = function(t6) {
                }, t5.prototype.onclose = function(t6) {
                }, t5.prototype.onmessage = function(t6, i5) {
                }, t5.prototype.onBackToWebSocket = function(t6, i5) {
                }, t5.prototype._t = function(t6, i5) {
                  this.ct && this.onBackToWebSocket(t6, i5);
                }, t5.prototype.send = function(t6, i5, n5, e5) {
                  var r3;
                  return Xt(this, void 0, void 0, function() {
                    var s3, o3 = this;
                    return Wt(this, function(u3) {
                      switch (u3.label) {
                        case 0:
                          return this.ct && i5 ? (null == (s3 = this.getStreamByID(i5)) ? void 0 : s3.stream) ? [3, 2] : (null == s3 ? void 0 : s3.isCreating) ? (this.ht.push({ msg: t6, streamID: i5, type: n5, streamType: e5 }), [2]) : [4, this.createStream(e5, i5)] : [2];
                        case 1:
                          s3 = u3.sent(), u3.label = 2;
                        case 2:
                          if (s3 && (null == s3 ? void 0 : s3.stream))
                            try {
                              null === (r3 = null == s3 ? void 0 : s3.writer) || void 0 === r3 || r3.write(t6).then(function() {
                                n5 === d.MSG_TYPE_STREAM_CLOSED && o3.closeStream(s3.streamID), o3.ht = o3.ht.filter(function(t7) {
                                  var e6;
                                  return t7.streamID !== i5 || (null === (e6 = null == s3 ? void 0 : s3.writer) || void 0 === e6 || e6.write(t7.msg).then(function() {
                                  }).catch(function(t8) {
                                    o3.rt.info("zn.zwt.s.0 unsend write fail ".concat(null == t8 ? void 0 : t8.message));
                                  }), n5 === d.MSG_TYPE_STREAM_CLOSED && o3.closeStream(t7.streamID), false);
                                });
                              }).catch(function(t7) {
                                var i6;
                                o3.rt.info("zn.zwt.s.0 write fail ".concat(null == t7 ? void 0 : t7.message)), -1 === (null === (i6 = null == t7 ? void 0 : t7.message) || void 0 === i6 ? void 0 : i6.indexOf("Connection lost")) && (o3._t(F.WriteDataFailed, t7), o3.close());
                              });
                            } catch (t7) {
                              this._t(F.WriteDataFailed, t7), this.close();
                            }
                          return [2];
                      }
                    });
                  });
                }, t5.prototype.close = function() {
                  return Xt(this, void 0, void 0, function() {
                    var t6, i5, n5 = this;
                    return Wt(this, function(e5) {
                      return this.readyState = h.CLOSED, this.ct && (t6 = Object.values(this.ft), i5 = function() {
                        var t7;
                        null === (t7 = n5.ct) || void 0 === t7 || t7.close(), n5.ct = null, n5.ft = {};
                      }, t6.length > 0 ? Promise.all(t6).then(function() {
                        i5();
                      }).catch(function(t7) {
                        i5();
                      }) : i5()), this.ut = [], this.ht = [], [2];
                    });
                  });
                }, t5.prototype.createStream = function(t6, i5) {
                  return Xt(this, void 0, void 0, function() {
                    var n5, e5, r3;
                    return Wt(this, function(s3) {
                      switch (s3.label) {
                        case 0:
                          if (!this.ct)
                            return [2, null];
                          (n5 = this.getStreamByID(i5)) || this.ut.push(n5 = { streamID: i5, streamType: t6, stream: null, writer: null, reader: null, isCreating: true }), s3.label = 1;
                        case 1:
                          return s3.trys.push([1, 3, , 4]), [4, this.ct.createBidirectionalStream()];
                        case 2:
                          return e5 = s3.sent(), n5.stream = e5, n5.writer = e5.writable.getWriter(), n5.reader = e5.readable.getReader(), n5.isCreating = false, this.initReader(n5.reader, n5.streamID), [2, n5];
                        case 3:
                          return r3 = s3.sent(), this._t(F.CreateStreamFailed, r3), this.close(), [3, 4];
                        case 4:
                          return [2, null];
                      }
                    });
                  });
                }, t5.prototype.closeStream = function(t6) {
                  var i5;
                  return Xt(this, void 0, void 0, function() {
                    var n5, e5;
                    return Wt(this, function(r3) {
                      switch (r3.label) {
                        case 0:
                          if (n5 = this.getStreamByID(t6), this.ut = this.ut.filter(function(i6) {
                            return i6.streamID !== t6;
                          }), !(null == n5 ? void 0 : n5.stream))
                            return [3, 4];
                          r3.label = 1;
                        case 1:
                          return r3.trys.push([1, 3, , 4]), n5.stream.writable.locked && (null === (i5 = n5.writer) || void 0 === i5 || i5.releaseLock()), e5 = n5.stream.writable.close(), this.ft[t6] = e5, [4, e5];
                        case 2:
                          return r3.sent(), delete this.ft[t6], [3, 4];
                        case 3:
                          return r3.sent(), [3, 4];
                        case 4:
                          return [2];
                      }
                    });
                  });
                }, t5.prototype.initReader = function(t6, i5) {
                  var n5, e5;
                  return Xt(this, void 0, void 0, function() {
                    var r3, s3, o3, u3, a2;
                    return Wt(this, function(c2) {
                      switch (c2.label) {
                        case 0:
                          c2.label = 1;
                        case 1:
                          return c2.trys.push([1, 3, , 4]), [4, t6.read()];
                        case 2:
                          return r3 = c2.sent(), s3 = r3.value, o3 = r3.done, u3 = this.getStreamByID(i5), o3 || !u3 ? (this.rt.info("zn.zwt.rd h3 stream not found ".concat(i5, " ").concat(!!o3, " ").concat(!u3)), this.closeStream(i5), t6.releaseLock(), [2]) : (this.onmessage && this.onmessage(s3, u3.streamID), [3, 4]);
                        case 3:
                          return a2 = c2.sent(), -1 !== (null === (n5 = null == a2 ? void 0 : a2.message) || void 0 === n5 ? void 0 : n5.indexOf("RESET_STREAM")) ? (this.ut = this.ut.filter(function(t7) {
                            return t7.streamID !== i5;
                          }), [2]) : (-1 === (null === (e5 = null == a2 ? void 0 : a2.message) || void 0 === e5 ? void 0 : e5.indexOf("closed")) && (this.rt.warn("zn.zwt.rd error ".concat(null == a2 ? void 0 : a2.message)), this._t(F.ReadDataFailed, a2), this.close()), [2]);
                        case 4:
                          return [3, 0];
                        case 5:
                          return [2];
                      }
                    });
                  });
                }, t5;
              }();
              var ti, ii = function() {
                function t5(t6, i5, n5) {
                  this.lt = t6, this.rt = i5, this.proxyCtrl = n5, this.dt = null, this.server = "", this.type = c.WebSocket, this.vt = null, this.retryTimer = null, this.ENV = t6.env, this.eventManager = new Zt(), this.Et = new Kt("connection send");
                }
                return Object.defineProperty(t5.prototype, "speed", { get: function() {
                  return this.Et.speed;
                }, enumerable: false, configurable: true }), t5.prototype.createSocket = function(t6, i5, n5) {
                  var e5 = this;
                  this.rt.info("zn.nss.0 ".concat(t6, " ").concat(n5)), this.server = t6, this.type = i5, this.type === c.WebTransport ? (this.dt = new $t(this.rt), this.dt.onBackToWebSocket = function(t7, i6) {
                    e5.type === c.WebTransport && (e5.resetConnectTimer(), e5.onBackToWebSocket && e5.onBackToWebSocket(t7, i6));
                  }, this.dt.startConnect(t6)) : (this.type = c.WebSocket, this.dt = function(t7, i6, n6) {
                    return i6 % 2 === Bt.BROWSER ? function(t8, i7) {
                      return i7 ? i7.createSocket(t8, 0) : new WebSocket(t8);
                    }(t7, n6) : new Yt(t7);
                  }(t6, this.ENV % 2, this.proxyCtrl)), this.bindSocketHandler(), this.startConnectCheck(n5);
                }, t5.prototype.bindSocketHandler = function() {
                  var t6 = this;
                  this.dt && (this.dt.onopen = function(i5) {
                    var n5;
                    t6.type === c.WebSocket && (t6.dt.binaryType = "arraybuffer"), t6.responseHandler(), t6.resetConnectTimer(), null === (n5 = t6.Et) || void 0 === n5 || n5.start(3e3), t6.eventManager.emit("open", i5);
                  }, this.dt.onclose = function(i5) {
                    var n5;
                    t6.resetConnectTimer(), null === (n5 = t6.Et) || void 0 === n5 || n5.stop(), t6.eventManager.emit("close", i5);
                  }, this.dt.onerror = function(i5) {
                    t6.resetConnectTimer(), t6.eventManager.emit("error", i5);
                  });
                }, t5.prototype.startConnectCheck = function(t6) {
                  var i5 = this;
                  this.resetConnectTimer(), this.vt = setTimeout(function() {
                    i5.type === c.WebTransport && i5.lt.networkState === f.online ? (i5.resetConnectTimer(), i5.onBackToWebSocket && i5.onBackToWebSocket(F.LinkTimeout, { message: "connect timeout" })) : i5.eventManager.emit("timeout");
                  }, t6);
                }, t5.prototype.resetConnectTimer = function() {
                  this.vt && (clearTimeout(this.vt), this.vt = null);
                }, t5.prototype.responseHandler = function() {
                  var t6 = this;
                  this.dt && (this.dt.onmessage = function(i5, n5, e5) {
                    var r3 = i5;
                    t6.type === c.WebSocket && (r3 = "string" == typeof i5.data ? JSON.parse(i5.data) : i5.data), t6.eventManager.emit("message", r3, n5, e5);
                  });
                }, t5.prototype.closeSocket = function() {
                  var t6;
                  this.dt && (this.dt.onclose = null, this.dt.onerror = null, this.dt.close(), this.dt = null, null === (t6 = this.Et) || void 0 === t6 || t6.stop()), this.resetConnectTimer();
                }, t5.prototype.isNotConnected = function() {
                  return !this.dt || this.dt.readyState !== h.OPEN;
                }, t5.prototype.sendMessage = function(t6, i5, n5, e5) {
                  this.isNotConnected() || this.dt && (this.Et.add(8 * t6.byteLength), this.dt.send(t6, i5, n5, e5));
                }, t5.prototype.onBackToWebSocket = function(t6, i5) {
                }, t5.prototype.closeStream = function(t6) {
                  var i5;
                  this.type === c.WebTransport && (null === (i5 = this.dt) || void 0 === i5 || i5.closeStream(t6));
                }, t5.prototype.hasStream = function(t6) {
                  var i5, n5;
                  return this.type === c.WebTransport && !!(null === (n5 = null === (i5 = this.dt) || void 0 === i5 ? void 0 : i5.getStreamByID(t6)) || void 0 === n5 ? void 0 : n5.stream);
                }, t5.prototype.on = function(t6, i5) {
                  return this.eventManager.addEventHandler(t6, i5);
                }, t5.prototype.off = function(t6, i5) {
                  this.eventManager.removeEventHandler(t6, i5);
                }, t5;
              }(), ni = function() {
                function t5(t6, i5, n5) {
                  this.lt = t6, this.gt = i5, this.proxyCtrl = n5, this.ipStackRules = [], this.St = null, this.Tt = u2.noProbe, this.Ct = 2;
                }
                return Object.defineProperty(t5.prototype, "bt", { get: function() {
                  var t6 = this.lt.customConfig, e5 = t6.accesshubBypassConnectTime;
                  return "number" == typeof e5 && 0 !== e5 ? e5 : t6.probeByPassStrategy === n4.Default || t6.ipStackMode === i4.IPv4Prefer ? 3e3 : 500;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "isIpv4Prefer", { get: function() {
                  return this.lt.customConfig.ipStackMode === i4.IPv4Prefer;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "Ot", { get: function() {
                  return this.lt.logger;
                }, enumerable: false, configurable: true }), t5.prototype.createSockets = function(t6, i5) {
                  var n5 = this;
                  this.Ot.info("".concat(bt, " call ").concat(JSON.stringify(t6), " ").concat(JSON.stringify(i5))), this.Tt = u2.noProbe;
                  var r3 = this.lt.isIpStackDetected ? 1e4 : Rt;
                  this.Ot.info("".concat(bt, " interval ").concat(r3)), (null == t6 ? void 0 : t6.server) && (this.Rt = t6, this.At || (this.At = new ii(this.lt, this.Ot, this.proxyCtrl)), this.bindServiceHandler(this.At, this.Rt), this.At.createSocket(t6.server, t6.linkType, r3)), (null == i5 ? void 0 : i5.server) ? (this.Pt = i5, this.It || (this.It = new ii(this.lt, this.Ot, this.proxyCtrl)), this.Ot.info("".concat(yt, " bypass time ").concat(this.bt)), this.St = setTimeout(function() {
                    n5.bindServiceHandler(n5.It, n5.Pt), n5.It.createSocket(i5.server, i5.linkType, Rt);
                  }, this.bt)) : this.onIPStackDetection({ ipStackType: this.Rt.ipStackType === e4.IPv4 ? e4.IPv6 : e4.IPv4, detection: o2.unreachable }), this.Tt = u2.probing;
                }, t5.prototype.bindServiceHandler = function(t6, i5) {
                  var r3 = this;
                  this.Ot.info("".concat(_t, " call ").concat(i5.server));
                  var s3 = function(t7) {
                    r3.onIPStackDetection({ ipStackType: i5.ipStackType, detection: t7 });
                  }, c2 = function(n5, c3) {
                    var h2 = performance.now();
                    if (r3.Ot.info("".concat(_t, " fail ").concat(i5.server, " ").concat(n5, " ").concat(c3.massage ? JSON.stringify(c3.massage) : JSON.stringify(c3.code))), !(h2 - i5.failTime < 100)) {
                      var f2;
                      if (i5.failTime = h2, i5.tryCount++, r3.isIpv4Prefer && i5.ipStackType === e4.IPv6 && r3.lt.retryLevel === R.single && r3.Rt.svrConnectState === a.success)
                        r3.Ot.info("".concat(_t, " only retry once"));
                      else if (r3.gt.Nt == u2.probing && i5.tryCount < r3.Ct)
                        return r3.Ot.info("".concat(_t, " server ").concat(i5.server, " retry ").concat(i5.tryCount)), t6.retryTimer && (clearTimeout(t6.retryTimer), t6.retryTimer = null), void (t6.retryTimer = setTimeout(function() {
                          t6.createSocket(i5.server, i5.linkType, Rt);
                        }, 3e3));
                      (null == c3 ? void 0 : c3.code) === Jt.code ? (f2 = o2.unknown, i5.svrConnectState = a.timeout) : (f2 = o2.unreachable, i5.svrConnectState = a.fail), s3(f2), r3.removeServiceListener(t6), t6.closeSocket(), r3.checkProbeState();
                    }
                  };
                  t6.off("open"), t6.on("open", function() {
                    r3.Ot.info("".concat(_t, " ").concat(i5.server, " open ").concat(u2[r3.Tt])), i5.svrConnectState = a.success, s3(o2.reachable), r3.Tt === u2.probing ? (r3.Tt = u2.probed, r3.removeServiceListener(t6), r3.onSocketOpen && r3.onSocketOpen(t6, i5)) : r3.onNextSocketOpen && r3.onNextSocketOpen(t6, i5), r3.lt.customConfig.probeByPassStrategy === n4.Default && r3.isIpv4Prefer && i5.ipStackType === e4.IPv4 && r3.St && r3.clearByPassProbe();
                  }), t6.off("close"), t6.on("close", function(t7) {
                    c2("close", t7);
                  }), t6.off("error"), t6.on("error", function(t7) {
                    c2("error", t7);
                  }), t6.off("timeout"), t6.on("timeout", function() {
                    c2("timeout", Jt);
                  }), t6.onBackToWebSocket = function(n5, e5) {
                    if (r3.lt.networkState === f.online) {
                      var s4 = { message: e5.message || "" };
                      r3.Ot.info("".concat(_t, " back to wss reason: ").concat(n5, " ").concat(s4.message)), s4.message.includes("Connection lost") ? c2("error", s4) : (t6.closeSocket(), i5.backToWss = true, i5.backToWssInfo = { reason: n5, error: s4 }, r3.checkIfBackToWss());
                    } else
                      c2("error", e5);
                  };
                }, t5.prototype.checkProbeState = function() {
                  var t6, i5;
                  void 0 !== (null === (t6 = this.Rt) || void 0 === t6 ? void 0 : t6.svrConnectState) && [a.fail, a.timeout].includes(this.Rt.svrConnectState) && (!this.Pt || void 0 !== (null === (i5 = this.Pt) || void 0 === i5 ? void 0 : i5.svrConnectState) && [a.fail, a.timeout].includes(this.Pt.svrConnectState)) && (this.Ot.info("".concat(yt, " sockets fail")), this.onSocketsFail && this.onSocketsFail());
                }, t5.prototype.checkIfBackToWss = function() {
                  var t6, i5, n5, e5, r3, s3, o3, u3;
                  this.Rt && this.Rt.backToWss && (this.onSocketBackToWebSocket && this.onSocketBackToWebSocket(this.Rt, (null === (i5 = null === (t6 = this.Rt) || void 0 === t6 ? void 0 : t6.backToWssInfo) || void 0 === i5 ? void 0 : i5.reason) || F.Unknown, (null === (e5 = null === (n5 = this.Rt) || void 0 === n5 ? void 0 : n5.backToWssInfo) || void 0 === e5 ? void 0 : e5.error) || {}), this.Pt && this.Pt.backToWss && this.onSocketBackToWebSocket && this.onSocketBackToWebSocket(this.Pt, (null === (s3 = null === (r3 = this.Pt) || void 0 === r3 ? void 0 : r3.backToWssInfo) || void 0 === s3 ? void 0 : s3.reason) || F.Unknown, (null === (u3 = null === (o3 = this.Pt) || void 0 === o3 ? void 0 : o3.backToWssInfo) || void 0 === u3 ? void 0 : u3.error) || {}));
                }, t5.prototype.removeServiceListener = function(t6) {
                  t6.off("open"), t6.off("close"), t6.off("error"), t6.off("timeout"), t6.onBackToWebSocket = function() {
                  }, t6.retryTimer && (clearTimeout(t6.retryTimer), t6.retryTimer = null);
                }, t5.prototype.stopTask = function() {
                  this.Tt == u2.probing && this.destroySockets();
                }, t5.prototype.destroySockets = function() {
                  var t6;
                  this.Ot.info("".concat("zn.sm.ds.0", " call")), this.At && (this.removeServiceListener(this.At), this.At.closeSocket()), this.It && (this.removeServiceListener(this.It), null === (t6 = this.It) || void 0 === t6 || t6.closeSocket()), this.clearByPassProbe();
                }, t5.prototype.clearByPassProbe = function() {
                  this.St && (clearTimeout(this.St), this.St = null);
                }, t5.prototype.onSocketOpen = function(t6, i5) {
                }, t5.prototype.onNextSocketOpen = function(t6, i5) {
                }, t5.prototype.onSocketBackToWebSocket = function(t6, i5, n5) {
                }, t5.prototype.onSocketsFail = function() {
                }, t5.prototype.onIPStackDetection = function(t6) {
                }, t5;
              }(), ei = function() {
                return ei = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e5 = arguments.length; n5 < e5; n5++)
                    for (var r3 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r3) && (t5[r3] = i5[r3]);
                  return t5;
                }, ei.apply(this, arguments);
              }, ri = function(t5, i5, n5) {
                if (n5 || 2 === arguments.length)
                  for (var e5, r3 = 0, s3 = i5.length; r3 < s3; r3++)
                    !e5 && r3 in i5 || (e5 || (e5 = Array.prototype.slice.call(i5, 0, r3)), e5[r3] = i5[r3]);
                return t5.concat(e5 || Array.prototype.slice.call(i5));
              }, si = function() {
                function i5(t5, i6, n5) {
                  var r3, s3 = this;
                  this.Dt = t5, this.lt = i6, this.proxyCtrl = n5, this.txid = 0, this.linkRetryTime = 60, this.updatedMsgTime = 0, this.connectServer = "", this.ipStackRules = [], this.urlIndex = 0, this.http3Servers = [], this.byPassUrlIndex = 0, this.Nt = u2.noProbe, this.serversGroup = { wss: [], http3: [], wssV6: [], http3V6: [] }, this.unUpdateMsgTimeTypes = [d.MSG_TYPE_HB_REQUEST, d.MSG_TYPE_HB_RESPONSE, d.MSG_TYPE_GET_CONFIG_REQUEST, d.MSG_TYPE_GET_CONFIG_RESPONSE, d.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2, d.MSG_TYPE_ACCESSHUB_DISPATCH_RESPONSE2, d.MSG_TYPE_GET_SVRADDR_REQUEST, d.MSG_TYPE_GET_SVRADDR_RESPONSE, d.MSG_TYPE_GET_APPCONFIG_REQUEST, d.MSG_TYPE_GET_APPCONFIG_RESPONSE, d.MSG_TYPE_CLOSE_CONNECTION], this.netLinkState = 0, this.sendCommandList = new Q(), this.unSendCommandList = new Q(), this.sendCommandMap = {}, this.unSendCommandMap = {}, this.yt = 100, this.wt = 15e3, this.zt = 1e3, this.Mt = 5e3, this.connectInterval = 1e4, this.connectRsp = {}, this.unlogTypes = [12, 13], this.tryServers = [], this.connectStartTime = 0, this.isTestedWebTransport = ((r3 = {})[e4.IPv4] = false, r3[e4.IPv6] = false, r3), this.msgCache = {}, this.Ht = 0, this.bt = 500, this.Ut = "", this.Gt = function() {
                    var t6, i7;
                    s3.Ot.info("zn.wl.ssoh.0 server connected: ".concat(null === (t6 = s3.socketService) || void 0 === t6 ? void 0 : t6.server, " open time: ").concat(Date.now() - s3.Ht)), s3.socketService && s3.connectServer !== (null === (i7 = s3.socketService) || void 0 === i7 ? void 0 : i7.server) && (s3.connectServer = s3.socketService.server, s3.tryServers.pop(), s3.tryServers.push(s3.connectServer)), 2 !== s3.netLinkState && s3.kt();
                  }, this.Vt = function(t6) {
                    s3.closeCallback("close", t6);
                  }, this.Bt = function(t6) {
                    s3.closeCallback("error", t6);
                  }, this.Yt = function() {
                    var t6;
                    s3.Ot.info(at + " timeout"), s3.Lt(1, s3.connectServer, Jt.code), null === (t6 = s3.$t) || void 0 === t6 || t6.call(s3, true, { code: Jt.code, msg: "" }), s3.netLinkState = 0, s3.connectRsp.fail && s3.connectRsp.fail();
                  }, this.onUpdateMsgTimeChanged = void 0, this.updatedMsgTime = Date.now(), this.socketDetectManager = new ni(this.lt, this, this.proxyCtrl), this.socketDetectManager.onSocketOpen = function(t6, i7) {
                    s3.Ot.info("".concat(pt, " main server ").concat(i7.server, " open socket")), s3.socketService = t6, s3.setIPStackDetectedInfo(i7), s3.bindSocketServiceEvent(), s3.Gt();
                  }, this.socketDetectManager.onIPStackDetection = function(t6) {
                    s3.Ot.info("".concat(pt, " ip stack detection ").concat(JSON.stringify(t6))), s3.xt(t6);
                  }, this.socketDetectManager.onNextSocketOpen = function(t6, i7) {
                    s3.Ot.info("".concat(pt, " next server ").concat(i7.server, " open socket")), s3.getByPassIp(t6, i7);
                  }, this.socketDetectManager.onSocketBackToWebSocket = function(t6, i7, n6) {
                    var e5, r4 = { message: n6.message || "" };
                    if (s3.Ot.info("".concat(pt, " backToWss reason: ").concat(i7, ", error: ").concat(r4.message)), s3.lt.enableHttp3) {
                      var o3 = t6.server, u3 = t6.ipStackType, a2 = s3.jt(u3), c2 = jt(a2, s3.lt.env, s3.lt.appID);
                      if (s3.Ot.info("".concat(pt, " backToWss server: ").concat(o3, " stack: ").concat(u3)), s3.lt.enableHttp3 = false, c2) {
                        var h2 = false;
                        if (Object.keys(c2).find(function(t7) {
                          return t7 === o3;
                        })) {
                          var f2 = c2[o3].time;
                          Date.now() - f2 > 864e5 && (h2 = true);
                        } else
                          h2 = true;
                        h2 && (s3.Ot.info("".concat(pt, " backToWss http3 fail")), qt(a2, s3.lt.env, s3.lt.appID, ((e5 = {})[o3] = { status: false, time: i7 === F.LinkTimeout ? 0 : Date.now() }, e5), true));
                      }
                      s3.closeSocket(), s3.netLinkState = 0, s3.clearMessageList(s3.sendCommandList, s3.sendCommandMap), s3.clearMessageList(s3.unSendCommandList, s3.unSendCommandMap), s3.Lt(1, s3.connectServer, Vt, i7, r4), s3._t && s3._t(i7, r4);
                    }
                  }, this.socketDetectManager.onSocketsFail = function() {
                    s3.Ot.info("".concat(pt, " socket fail")), s3.Nt = u2.noProbe, s3.netLinkState = 0, s3.connectRsp.fail && s3.connectRsp.fail();
                  };
                }
                return Object.defineProperty(i5.prototype, "linkServerStorageKey", { get: function() {
                  return this.jt(this.lt.currentIpStackType);
                }, enumerable: false, configurable: true }), Object.defineProperty(i5.prototype, "byPassStackType", { get: function() {
                  return this.lt.currentIpStackType === e4.IPv4 ? e4.IPv6 : e4.IPv4;
                }, enumerable: false, configurable: true }), Object.defineProperty(i5.prototype, "Ot", { get: function() {
                  return this.lt.logger;
                }, enumerable: false, configurable: true }), Object.defineProperty(i5.prototype, "speed", { get: function() {
                  var t5, i6;
                  return null !== (i6 = null === (t5 = this.socketService) || void 0 === t5 ? void 0 : t5.speed) && void 0 !== i6 ? i6 : 0;
                }, enumerable: false, configurable: true }), i5.prototype.setIPStackDetectedInfo = function(t5) {
                  this.lt.isIpStackDetected = true;
                  var i6 = t5.ipStackType;
                  this.lt.currentIpStackType = i6, i6 === e4.IPv4 ? (this.servers = this.serversGroup.wss, this.http3Servers = this.serversGroup.http3) : (this.servers = this.serversGroup.wssV6, this.http3Servers = this.serversGroup.http3V6);
                }, Object.defineProperty(i5.prototype, "HBHandler", { set: function(t5) {
                  this.qt = t5;
                }, enumerable: false, configurable: true }), i5.prototype.initEvent = function(t5, i6, n5, e5, r3, s3) {
                  this.Ft = t5, this.$t = i6, this.Jt = n5, this.Wt = e5, this._t = r3, this.Qt = s3;
                }, i5.prototype.onSocketClose = function() {
                }, i5.prototype.setServers = function(t5, i6, n5, e5) {
                  void 0 === t5 && (t5 = []), void 0 === i6 && (i6 = []), void 0 === n5 && (n5 = []), void 0 === e5 && (e5 = []), this.Ot.info("".concat("zn.wl.ss", " ").concat(JSON.stringify(t5), " ").concat(JSON.stringify(i6), " ").concat(JSON.stringify(n5), " ").concat(JSON.stringify(e5))), this.serversGroup.wss = t5, this.serversGroup.http3 = i6, this.serversGroup.wssV6 = n5, this.serversGroup.http3V6 = e5, this.urlIndex = 0, this.ipStackRules.length > 0 && this.setLinkServers();
                }, i5.prototype.setHttp3Servers = function(t5, i6) {
                  this.Ot.info("".concat("zn.wl.shs", " ").concat(JSON.stringify(t5), " ").concat(JSON.stringify(i6))), (null == t5 ? void 0 : t5.length) > 0 && (this.serversGroup.http3 = t5), (null == i6 ? void 0 : i6.length) > 0 && (this.serversGroup.http3V6 = i6), this.ipStackRules.length > 0 && this.setLinkServers();
                }, i5.prototype.setIpStrategy = function(t5) {
                  t5.length > 0 && (this.Ot.info("".concat("zn.wl.sis", " rules: ").concat(JSON.stringify(t5))), this.ipStackRules = t5, this.setLinkServers());
                }, i5.prototype.setLinkServers = function() {
                  this.ipStackRules.length > 0 && this.ipStackRules[0] === e4.IPv6 ? (this.Ot.info("".concat(vt, " set ipv6")), this.servers = this.serversGroup.wssV6, this.http3Servers = this.serversGroup.http3V6, this.lt.currentIpStackType = e4.IPv6) : (this.Ot.info("".concat(vt, " set ipv4")), this.servers = this.serversGroup.wss, this.http3Servers = this.serversGroup.http3, this.lt.currentIpStackType = e4.IPv4);
                }, i5.prototype.isNeedTestWebTransport = function(t5, i6) {
                  return !!this.isEnableHttp3() && 0 !== (null == t5 ? void 0 : t5.length) && !this.isTestedWebTransport[i6];
                }, i5.prototype.destroySocket = function(t5, i6) {
                  this.Ot.info("zn.wl.ds.0 call " + t5), this.closeSocket(), t5 !== _.NONE && (i6 && this.Lt(1, this.connectServer, null == i6 ? void 0 : i6.code), this.$t && this.$t(t5 === _.BROKEN, i6, this.tryServers));
                }, i5.prototype.refreshServers = function(t5) {
                  this.servers = ri(ri([], t5, true), this.servers, true);
                }, i5.prototype.isEnableHttp3 = function() {
                  return !!this.lt.enableHttp3 && !!this.lt.customConfig.enableHttp3 && this.lt.appInfo.model !== t4.Private && !this.proxyCtrl;
                }, i5.prototype.connectSocket = function(t5, i6, n5) {
                  var e5, r3, s3 = this;
                  if (void 0 === t5 && (t5 = true), this.Ot.info(at + " call"), !this.servers || !(null === (e5 = this.servers) || void 0 === e5 ? void 0 : e5.length))
                    return this.Ot.warn(at + " no servers"), false;
                  this.connectRsp.suc = i6;
                  var o3 = false;
                  this.connectRsp.fail = function() {
                    n5 && (o3 ? s3.Ot.info(at + " fail cb has exec") : (n5(), o3 = true));
                  }, t5 && (this.urlIndex = (this.urlIndex + 1) % this.servers.length), this.closeSocket(), this.connectStartTime = Date.now(), this.Lt(0), this.netLinkState = 1, this.Ht = Date.now();
                  var a2 = this.getConnectServers(), c2 = a2.mainSvrInfo, h2 = a2.byPassSvrInfo;
                  return this.Nt === u2.noProbe ? (this.Ot.info("".concat(at, " probe")), this.socketDetectManager.createSockets(c2, h2), this.Nt = u2.probing) : (this.Ot.info("".concat(at, " createSocket")), null === (r3 = this.socketService) || void 0 === r3 || r3.createSocket(c2.server, c2.linkType, 1e4)), this.connectServer = c2.server, this.tryServers.push(this.connectServer), this.Jt && this.Jt(true), true;
                }, i5.prototype.Lt = function(t5, i6, n5, e5, r3) {
                }, i5.prototype.getServersByStackType = function(t5) {
                  var i6, n5;
                  return t5 === e4.IPv4 ? (i6 = this.serversGroup.wss, n5 = this.serversGroup.http3) : (i6 = this.serversGroup.wssV6, n5 = this.serversGroup.http3V6), [i6, n5];
                }, i5.prototype.getConnectServers = function() {
                  var t5, i6 = this.Kt(this.servers, this.http3Servers, this.lt.currentIpStackType, this.urlIndex, "main");
                  if (this.ipStackRules.length > 1) {
                    var n5 = this.getServersByStackType(this.byPassStackType), e5 = n5[0];
                    (null == e5 ? void 0 : e5.length) > 0 && (t5 = this.Kt(e5, n5[1], this.byPassStackType, this.byPassUrlIndex, "bypass"));
                  }
                  return { mainSvrInfo: i6, byPassSvrInfo: t5 };
                }, i5.prototype.Kt = function(t5, i6, n5, e5, r3) {
                  var s3, o3 = "", u3 = c.WebSocket;
                  return this.Ot.info(at + " " + r3 + " enableHttp3:" + this.isEnableHttp3()), (s3 = this.isEnableHttp3() ? this.getUseableHttp3Server(i6, n5) : "").length > 0 && (u3 = c.WebTransport, o3 = s3, this.Ot.info("".concat(at, " h3 connect ").concat(r3, " server ").concat(o3))), s3 || (u3 = c.WebSocket, o3 = t5[e5], this.Ot.info("".concat(at, " wss connect ").concat(r3, " server ").concat(o3))), { server: o3, linkType: u3, ipStackType: n5, tryCount: 0, failTime: 0 };
                }, i5.prototype.xt = function(t5) {
                  this.Ot.info("".concat(mt, " ").concat(JSON.stringify(t5)));
                  var i6 = t5.ipStackType, n5 = t5.detection, r3 = false;
                  i6 === e4.IPv4 ? (this.lt.linkIpStackDetection.IPv4 !== n5 && (r3 = true), this.lt.linkIpStackDetection.IPv4 = n5) : i6 === e4.IPv6 && (this.lt.linkIpStackDetection.IPv6 !== n5 && (r3 = true), this.lt.linkIpStackDetection.IPv6 = n5), r3 && (this.Ot.info("".concat(mt, " res ").concat(JSON.stringify(this.lt.linkIpStackDetection))), this.Qt(ei({}, this.lt.linkIpStackDetection)));
                  var s3 = this.lt.linkIpStackDetection;
                  this.Nt === u2.probing && s3.IPv4 !== o2.unknown && s3.IPv6 !== o2.unknown && (this.Nt = u2.probed);
                }, i5.prototype.getByPassIp = function(t5, i6) {
                  var n5 = this, e5 = Date.now(), r3 = i6.server, s3 = i6.linkType, o3 = i6.ipStackType;
                  null == t5 || t5.on("message", function(i7) {
                    var u4, a2;
                    try {
                      if (Date.now() - e5 > n5.connectInterval)
                        n5.Ot.info("".concat(gt, " failed:").concat(r3, " reason:").concat(F.LinkTimeout, " time:").concat(Date.now() - e5, "ms"));
                      else {
                        var h2 = new Uint8Array(i7), f2 = n5.Dt.decodeResponse(h2, s3), l2 = f2[2];
                        if (f2[1] === d.MSG_TYPE_GET_CONFIG_RESPONSE && 0 === l2.code) {
                          n5.Ot.info("".concat(gt, " success:").concat(r3, " time: ").concat(Date.now() - e5, "ms")), (null === (u4 = l2.data) || void 0 === u4 ? void 0 : u4.client_outer_ip) && (n5.lt.byPassClientIP = null === (a2 = l2.data) || void 0 === a2 ? void 0 : a2.client_outer_ip);
                          var v2 = n5.getServersByStackType(o3), m2 = v2[1];
                          s3 === c.WebSocket && n5.isNeedTestWebTransport(m2, o3) && n5.testWebTransport(m2, o3);
                        }
                        n5.Qt(ei({}, n5.lt.linkIpStackDetection)), n5.socketDetectManager.removeServiceListener(t5), t5.off("message"), t5.closeSocket();
                      }
                    } catch (t6) {
                      n5.Ot.info("".concat(gt, " failed:").concat(r3, " reason:").concat(F.GetConfigFailed, " error:").concat(JSON.stringify(t6), "  time:").concat(Date.now() - e5, "ms"));
                    }
                  });
                  var u3 = this.Zt(s3);
                  null == t5 || t5.sendMessage(u3.buf, u3.streamID, u3.type, b.OTHER);
                }, i5.prototype.closeCallback = function(t5, i6) {
                  var n5;
                  this.Ot.info("".concat("zn.wl.cc.0", " ").concat(t5, " ").concat(JSON.stringify(i6)));
                  var e5 = (null === (n5 = this.socketService) || void 0 === n5 ? void 0 : n5.type) === c.WebTransport ? "zn.wl.bse.h3" : "zn.wl.bse.wss";
                  this.Ot.warn("".concat(e5, " ").concat(t5, " ").concat(JSON.stringify(i6.code ? i6.code : i6))), this.Xt(i6);
                }, i5.prototype.Xt = function(t5) {
                  var i6 = (null == t5 ? void 0 : t5.code) || Jt.code;
                  this.Lt(1, this.connectServer, i6), this.$t && this.$t(true, { code: i6, msg: "" }), this.netLinkState = 0, this.connectRsp.fail && this.connectRsp.fail();
                }, i5.prototype.bindSocketServiceEvent = function() {
                  var t5 = this;
                  this.socketService ? (this.socketService.on("open", this.Gt.bind(this)), this.socketService.on("close", this.Vt.bind(this)), this.socketService.on("error", this.Bt.bind(this)), this.socketService.on("timeout", this.Yt.bind(this)), this.socketService.onBackToWebSocket = function(i6, n5) {
                    var e5, r3 = { message: n5.message || "" };
                    if (t5.Ot.info(dt + " call reason:" + i6 + " error:" + r3.message + " h3 " + t5.lt.enableHttp3 + " service: " + !!t5.socketService), t5.lt.networkState === f.online)
                      if (r3.message.includes("Connection lost"))
                        t5.closeCallback("error", r3);
                      else {
                        if (!t5.lt.enableHttp3)
                          return;
                        if (!t5.socketService)
                          return;
                        t5.Ot.info(lt + " server ".concat(t5.socketService.server, " fail")), t5.lt.enableHttp3 = false;
                        var s3 = jt(t5.linkServerStorageKey, t5.lt.env, t5.lt.appID);
                        if (s3) {
                          var o3 = false;
                          if (Object.keys(s3).find(function(i7) {
                            return i7 === t5.socketService.server;
                          })) {
                            var u3 = s3[t5.socketService.server].time;
                            Date.now() - u3 > 864e5 && (o3 = true);
                          } else
                            o3 = true;
                          o3 && (t5.Ot.info(lt + " http3 fail"), qt(t5.linkServerStorageKey, t5.lt.env, t5.lt.appID, ((e5 = {})[t5.socketService.server] = { status: false, time: i6 === F.LinkTimeout ? 0 : Date.now() }, e5), true));
                        }
                        t5.closeSocket(), t5.netLinkState = 0, t5.clearMessageList(t5.sendCommandList, t5.sendCommandMap), t5.clearMessageList(t5.unSendCommandList, t5.unSendCommandMap), t5.Lt(1, t5.connectServer, Vt, i6, r3), t5._t && t5._t(i6, r3);
                      }
                    else
                      t5.closeCallback("error", r3);
                  }) : this.Ot.warn(dt + " no service");
                }, i5.prototype.removeSocketServiceEvent = function() {
                  this.Ot.info("zn.wl.rsse.0 call ".concat(!!this.socketService)), this.socketService && (this.socketService.off("open"), this.socketService.off("close"), this.socketService.off("error"), this.socketService.off("timeout"), this.socketService.off("message"), this.socketService = null);
                }, i5.prototype.releaseSocketDetectTask = function() {
                  this.Ot.info("zn.wl.rsdt.0 call"), this.socketDetectManager && this.socketDetectManager.stopTask(), this.closeSocket(), this.netLinkState = 0;
                }, i5.prototype.kt = function() {
                  this.Ot.info("zn.wl.osso.0 call"), this.connectRsp.suc && this.connectRsp.suc(), this.netLinkState = 2, this.Lt(1, this.connectServer, 0), this.Ft && this.Ft(this.tryServers, 0), this.tryServers = [], this.checkUnSendMsgs(this.unSendCommandList, this.unSendCommandMap), this.onMessage();
                }, i5.prototype.closeSocket = function() {
                  var t5, i6, n5 = null === (t5 = this.socketService) || void 0 === t5 ? void 0 : t5.isNotConnected();
                  return this.Ot.info("zn.wl.cs.1" + " call ".concat(n5, " ").concat(this.netLinkState)), !(n5 && 0 === this.netLinkState || (null === (i6 = this.socketService) || void 0 === i6 || i6.closeSocket(), this.netLinkState = 0, this.onSocketClose && this.onSocketClose(), 0));
                }, i5.prototype.release = function() {
                  this.socketDetectManager.destroySockets(), this.stopCheck(), this.sendCommandList = new Q(), this.unSendCommandList = new Q(), this.sendCommandMap = {}, this.unSendCommandMap = {}, this.msgCache = {};
                }, i5.prototype.isConnect = function() {
                  return 2 === this.netLinkState;
                }, i5.prototype.isDisConnect = function() {
                  return !this.socketService || this.socketService.isNotConnected();
                }, i5.prototype.isConnecting = function() {
                  return 1 === this.netLinkState;
                }, i5.prototype.setState = function(t5) {
                  this.netLinkState = t5;
                }, i5.prototype.sendMessage = function(t5, i6, n5, e5, r3, s3, o3, u3, a2) {
                  var h2, f2, l2;
                  void 0 === e5 && (e5 = true), void 0 === r3 && (r3 = null), void 0 === s3 && (s3 = null), void 0 === o3 && (o3 = null), void 0 === u3 && (u3 = {}), (void 0 === u3.timeout || u3.timeout <= 0) && (u3.timeout = this.Mt), void 0 === u3.isInSendMap && (u3.isInSendMap = true), void 0 === u3.isMsgCache && (u3.isMsgCache = true), this.txid++;
                  var v2 = { appid: this.lt.appID, biz_type: 0, mode_no: this.lt.appInfo.mode, sdk_type: Ot.sdkType, zegoconn_run_env: 0 === this.lt.env ? p.ZEGOCONN_RUN_ENV_BROWSER : p.ZEGOCONN_RUN_ENV_APPLET, zegoconn_version: this.lt.appInfo.connVer };
                  (null === (h2 = this.lt.appInfo) || void 0 === h2 ? void 0 : h2.deviceID) && (v2.device_id = this.lt.appInfo.deviceID), (null === (f2 = this.socketService) || void 0 === f2 ? void 0 : f2.type) === c.WebTransport && ((null === (l2 = this.socketService) || void 0 === l2 ? void 0 : l2.hasStream(i6)) || (e5 = true));
                  var m2 = ei({ id_name: this.lt.userId }, e5 ? v2 : {}), g2 = ei(ei({ txid: this.txid }, m2), n5), b2 = Date.now(), _2 = { data: g2, txid: this.txid, sendTime: b2, streamID: i6, type: t5, timeOut: b2 + u3.timeout, ack: n5.ack, success: r3, error: s3, ackFunc: o3, isSend: true, isCheck: t5 !== d.MSG_TYPE_PC_UPWARD_MESSAGE, extras: u3.extras, streamType: a2 };
                  if (u3.isInSendMap) {
                    var y2 = this.sendCommandList.push(_2);
                    this.sendCommandMap[this.txid] = y2, !this.ti && this.startCheck();
                  }
                  if (!(10 === g2.service || 14 === g2.interface_id) && this.unUpdateMsgTimeTypes.includes(t5) || (this.updatedMsgTime = Date.now(), this.onUpdateMsgTimeChanged && this.onUpdateMsgTimeChanged(this.updatedMsgTime)), -1 === this.unlogTypes.indexOf(t5) && this.Ot.info("zn.wl.sm type: " + t5 + "-" + C[t5] + " streamID: " + i6 + " txid: " + this.txid + " no1: ".concat(e5)), this.isConnect())
                    this.sendUint8Data(t5, g2, i6, a2);
                  else if (u3.isMsgCache) {
                    _2.isSend = false;
                    var w2 = this.unSendCommandList.push(_2);
                    this.unSendCommandMap[this.txid] = w2;
                  }
                }, i5.prototype.checkUnSendMsgs = function(t5, i6) {
                  var n5 = this;
                  t5.forEach(function(e5) {
                    return !e5 || (t5.remove(e5), !!e5.U && (delete i6[e5.U.txid], false === e5.U.isSend && e5.U.type && e5.U.streamID && e5.U.data && (n5.sendUint8Data(e5.U.type, e5.U.data, e5.U.streamID, e5.U.streamType), e5.U.isSend = true), false));
                  });
                }, i5.prototype.clearUnsentMsgs = function(t5) {
                  var i6 = this;
                  this.unSendCommandList.forEach(function(n5) {
                    var e5;
                    (null === (e5 = null == n5 ? void 0 : n5.U) || void 0 === e5 ? void 0 : e5.streamID) === t5 && (i6.unSendCommandList.remove(n5), delete i6.unSendCommandMap[n5.U.txid]);
                  });
                }, i5.prototype.ii = function(t5) {
                  return t5.buffer.slice(t5.byteOffset, t5.byteLength + t5.byteOffset);
                }, i5.prototype.sendUint8Data = function(t5, i6, n5, e5) {
                  var r3, s3, o3 = this.Dt.encodeRequest(t5, i6, n5, this.socketService.type);
                  null === (r3 = this.socketService) || void 0 === r3 || r3.sendMessage(this.ii(o3), n5, t5, e5), null === (s3 = this.qt) || void 0 === s3 || s3.startHB();
                }, i5.prototype.notifyMessage = function(t5, i6, n5, e5) {
                  var r3;
                  (null == t5 ? void 0 : t5.txid) && z.isLong(t5.txid) && t5.txid.toNumber && (t5.txid = t5.txid.toNumber()), this.unUpdateMsgTimeTypes.includes(i6) || (this.updatedMsgTime = Date.now(), this.onUpdateMsgTimeChanged && this.onUpdateMsgTimeChanged(this.updatedMsgTime));
                  var s3 = (null == t5 ? void 0 : t5.txid) || (null === (r3 = null == t5 ? void 0 : t5.data) || void 0 === r3 ? void 0 : r3.txid);
                  if (-1 === this.unlogTypes.indexOf(i6)) {
                    var o3 = s3 ? ", txid: ".concat(s3) : "";
                    this.Ot.info(ct + " streamID: ".concat(e5, ", msgType: ").concat(i6, "-").concat(C[i6]) + o3);
                  }
                  s3 && this.isRspMsg(s3) ? this.handleSendCommandMsgRsp(i6, s3, t5, { size: n5 }) : this.Wt(e5, i6, t5, { size: n5 });
                }, i5.prototype.onMessage = function() {
                  var t5 = this;
                  this.msgCache = {}, this.socketService && (this.socketService.off("message"), this.socketService.on("message", function(i6, n5) {
                    var e5;
                    t5.lt.lastRecvMsgTime = Date.now();
                    var r3, s3 = new Uint8Array(i6), o3 = t5.msgCache[n5];
                    if (o3) {
                      var u3 = new Uint8Array(o3.data.byteLength + s3.byteLength);
                      u3.set(o3.data, 0), u3.set(s3, o3.data.byteLength), s3 = u3, r3 = o3.streamID, delete t5.msgCache[n5];
                    }
                    for (; s3.byteLength; ) {
                      var a2 = t5.Dt.decodeResponse(s3, t5.socketService.type), h2 = a2[0], f2 = a2[1], l2 = a2[2], v2 = a2[3];
                      if (r3 = 0 === h2 ? n5 : h2, !(v2 > 0)) {
                        t5.msgCache[n5] = { streamID: n5, data: s3 };
                        break;
                      }
                      v2 > s3.byteLength && t5.Ot.warn(ct + " streamID: ".concat(r3, ", msg decode error, ").concat(s3.byteLength, " ").concat(v2)), s3 = s3.slice(v2, s3.byteLength), (null === (e5 = t5.socketService) || void 0 === e5 ? void 0 : e5.type) === c.WebSocket && f2 === d.MSG_TYPE_GET_CONFIG_RESPONSE && t5.isNeedTestWebTransport(t5.http3Servers, t5.lt.currentIpStackType) && t5.testWebTransport(t5.http3Servers, t5.lt.currentIpStackType), t5.notifyMessage(l2, f2, v2, r3);
                    }
                  }));
                }, i5.prototype.isRspMsg = function(t5) {
                  return void 0 !== this.sendCommandMap[t5];
                }, i5.prototype.startCheck = function() {
                  var t5 = this;
                  this.ni(this.sendCommandList, this.sendCommandMap, this.unSendCommandList, this.unSendCommandMap), this.ti = setTimeout(function() {
                    t5.startCheck();
                  }, this.zt);
                }, i5.prototype.stopCheck = function() {
                  this.ei(this.sendCommandList), this.ti && (clearTimeout(this.ti), this.ti = null);
                }, i5.prototype.ni = function(t5, i6, n5, e5) {
                  var r3 = this, s3 = Date.now(), o3 = 0;
                  t5.forEach(function(u3) {
                    if (!u3)
                      return true;
                    if (!u3.U)
                      return false;
                    if (u3.U.timeOut <= s3) {
                      t5.remove(u3), delete i6[u3.U.txid];
                      var a2 = e5[u3.U.txid];
                      if (a2 && (n5.remove(a2), delete e5[u3.U.txid]), null == u3.U.error || u3.U.sendTime + r3.wt < s3)
                        ;
                      else {
                        var c2 = u3.U.error;
                        u3.U.isCheck && c2 && c2({}, u3.U.txid, Ut);
                      }
                      if (++o3 >= r3.yt)
                        return true;
                    }
                    return false;
                  });
                }, i5.prototype.ei = function(t5) {
                  t5.forEach(function(i6) {
                    if (!i6)
                      return true;
                    if (t5.remove(i6), !i6.U)
                      return false;
                    if (i6.U.isSend && i6.U.error) {
                      var n5 = i6.U.error, e5 = i6.U.txid;
                      i6.U.isCheck && setTimeout(function() {
                        n5({}, e5, Ut);
                      }, 0);
                    }
                    return false;
                  });
                }, i5.prototype.clearMessageList = function(t5, i6) {
                  t5.forEach(function(n5) {
                    if (!n5)
                      return true;
                    if (t5.remove(n5), !n5.U)
                      return false;
                    if (n5.U.error) {
                      var e5 = n5.U.error, r3 = n5.U.txid;
                      n5.U.isCheck && setTimeout(function() {
                        i6[n5.U.txid] && delete i6[n5.U.txid], e5({}, r3, Ut);
                      }, 0);
                    }
                    return false;
                  });
                }, i5.prototype.handleSendCommandMsgRsp = function(t5, i6, n5, e5) {
                  var r3 = this.sendCommandMap[i6];
                  if (null != r3) {
                    var s3 = r3.U;
                    (null == s3 ? void 0 : s3.ack) || (delete this.sendCommandMap[i6], this.sendCommandList.remove(r3)), n5.code && 0 !== n5.code ? s3 && null != s3.error && (s3.error(n5, i6), s3.success = null, s3.error = null) : t5 === d.MSG_TYPE_PUSH_EXCEPTION ? (n5.code = n5.reason, n5.message = n5.msg, delete n5.reason, delete n5.msg, s3 && null != s3.error && (s3.error(n5, i6), s3.success = null, s3.error = null)) : t5 === d.MSG_TYPE_HTTP_REQUEST_ACK ? s3 && null != s3.ackFunc && s3.ackFunc(n5, i6) : s3 && null != s3.success && (s3.success(n5, i6, e5), s3.success = null, s3.error = null);
                  }
                }, i5.prototype._t = function(t5, i6) {
                }, i5.prototype.Qt = function(t5) {
                }, i5.prototype.jt = function(t5) {
                  return t5 === e4.IPv4 ? "z_net_http3_servers_status" : "z_net_http3_v6_servers_status";
                }, i5.prototype.Zt = function(t5) {
                  var i6, n5;
                  this.txid++;
                  var e5 = { appid: this.lt.appID, biz_type: 0, mode_no: this.lt.appInfo.mode, sdk_type: Ot.sdkType, zegoconn_run_env: 0 === this.lt.env ? p.ZEGOCONN_RUN_ENV_BROWSER : p.ZEGOCONN_RUN_ENV_APPLET, zegoconn_version: this.lt.appInfo.connVer };
                  (null === (i6 = this.lt.appInfo) || void 0 === i6 ? void 0 : i6.deviceID) && (e5.device_id = null === (n5 = this.lt.appInfo) || void 0 === n5 ? void 0 : n5.deviceID);
                  var r3 = ei({ id_name: this.lt.userId }, e5), s3 = this.lt.appInfo.geoFencing, o3 = ei(ei({ txid: this.txid }, r3), { geofencing_type: null == s3 ? void 0 : s3.type, geofencings: null == s3 ? void 0 : s3.list }), u3 = d.MSG_TYPE_GET_CONFIG_REQUEST, a2 = Date.now(), c2 = this.Dt.encodeRequest(u3, o3, a2, t5);
                  return { buf: this.ii(c2), streamID: a2, type: u3 };
                }, i5.prototype.getUseableHttp3Server = function(t5, i6) {
                  var n5 = "", e5 = jt(this.jt(i6), this.lt.env, this.lt.appID);
                  if (this.Ot.info(ht + " cache:" + JSON.stringify(e5)), e5)
                    for (var r3 = 0, s3 = Object.keys(e5); r3 < s3.length; r3++) {
                      var o3 = s3[r3];
                      if (e5[o3].status && t5.includes(o3)) {
                        n5 = o3;
                        break;
                      }
                    }
                  return this.Ot.info(ht + " " + n5), n5;
                }, i5.prototype.si = function(t5, i6) {
                  if (!t5.length)
                    return [];
                  var n5 = t5, e5 = jt(i6, this.lt.env, this.lt.appID);
                  if (e5) {
                    for (var r3 = 0, s3 = Object.keys(e5); r3 < s3.length; r3++) {
                      var o3 = s3[r3];
                      if (t5.includes(o3)) {
                        var u3 = e5[o3].time;
                        Date.now() - u3 > 864e5 && delete e5[o3];
                      } else
                        delete e5[o3];
                    }
                    qt(i6, this.lt.env, this.lt.appID, e5), n5 = t5.filter(function(t6) {
                      return !e5[t6];
                    });
                  }
                  return Array.from(new Set(n5));
                }, i5.prototype.testWebTransport = function(t5, i6) {
                  this.isTestedWebTransport[i6] = true;
                  var n5 = this.jt(i6), e5 = this.si(t5, n5);
                  this.Ot.info("zn.wl.h3.t servers:" + JSON.stringify(e5) + " ip " + i6), this.startTestHttp3Server(e5, n5);
                }, i5.prototype.startTestHttp3Server = function(t5, i6) {
                  var n5 = this;
                  if (t5.length) {
                    var e5 = t5.shift();
                    this.Ot.info("zn.wl.h3.t.0 start:" + e5);
                    var r3 = new $t(this.Ot), s3 = Date.now();
                    r3.onBackToWebSocket = function(r4) {
                      var o3;
                      n5.Ot.info("".concat(ft, " failed:").concat(e5, " reason:").concat(r4, " time:").concat(Date.now() - s3, "ms")), qt(i6, n5.lt.env, n5.lt.appID, ((o3 = {})[e5] = { status: false, time: Date.now() }, o3), true), n5.startTestHttp3Server(t5, i6);
                    }, r3.onopen = function(t6) {
                      var i7 = n5.Zt(c.WebTransport);
                      r3.send(i7.buf, i7.streamID, i7.type, b.OTHER);
                    }, r3.onmessage = function(o3) {
                      var u3, a2;
                      try {
                        if (Date.now() - s3 > n5.connectInterval)
                          n5.Ot.info("".concat(ft, " failed:").concat(e5, " reason:").concat(F.LinkTimeout, " time:").concat(Date.now() - s3, "ms"));
                        else {
                          var h2 = new Uint8Array(o3), f2 = n5.Dt.decodeResponse(h2, c.WebTransport);
                          if (f2[1] === d.MSG_TYPE_GET_CONFIG_RESPONSE && 0 === f2[2].code)
                            return n5.Ot.info("".concat("zn.wl.h3.t.1", " success:").concat(e5, " time: ").concat(Date.now() - s3, "ms storageKey: ").concat(i6)), qt(i6, n5.lt.env, n5.lt.appID, ((u3 = {})[e5] = { status: true, time: Date.now() }, u3), true), void r3.close();
                        }
                      } catch (t6) {
                        n5.Ot.info("".concat(ft, " failed:").concat(e5, " reason:").concat(F.GetConfigFailed, " error:").concat(JSON.stringify(t6), "  time:").concat(Date.now() - s3, "ms"));
                      }
                      r3.close(), r3 = null, qt(i6, n5.lt.env, n5.lt.appID, ((a2 = {})[e5] = { status: false, time: Date.now() }, a2), true), n5.startTestHttp3Server(t5, i6);
                    }, r3.startConnect(e5);
                  }
                }, i5;
              }(), oi = function() {
                function t5(t6, i5, n5) {
                  this.oi = t6, this.Dt = i5, this.stateCenter = n5;
                }
                return Object.defineProperty(t5.prototype, "appInfo", { get: function() {
                  return this.stateCenter.appInfo;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "Ot", { get: function() {
                  return this.stateCenter.logger;
                }, enumerable: false, configurable: true }), t5.prototype.getConfig = function(t6, i5) {
                  this.Ot.info("zn.nab.gc call");
                  var n5 = this.oi.getFreeStream(b.OTHER), e5 = this.appInfo.geoFencing;
                  n5.sendMessage(d.MSG_TYPE_GET_CONFIG_REQUEST, { geofencing_type: null == e5 ? void 0 : e5.type, geofencings: null == e5 ? void 0 : e5.list, dispatch_tag: this.stateCenter.customConfig.dispatchTag }, t6, i5);
                }, t5.prototype.dispatchURL = function(t6, i5) {
                  var n5 = this;
                  this.Ot.info(et + " call");
                  var e5 = this.oi.getFreeStream(b.OTHER), r3 = this.appInfo.geoFencing;
                  e5.sendMessage(d.MSG_TYPE_ACCESSHUB_DISPATCH_REQUEST2, { geofencing_type: null == r3 ? void 0 : r3.type, geofencings: null == r3 ? void 0 : r3.list, dispatch_tag: this.stateCenter.customConfig.dispatchTag, addr_type: 0 === this.stateCenter.customConfig.ipStackMode ? 0 : 1 }, function(i6) {
                    n5.Ot.info(et + " suc "), t6 && t6(i6);
                  }, function(t7, e6, r4) {
                    n5.Ot.info(et + " fail"), i5 && i5(r4 || t7);
                  });
                }, t5.prototype.getAppConfig = function(t6, i5, n5, e5, r3, s3) {
                  var o3 = this;
                  return new Promise(function(u3, a2) {
                    o3.Ot.info(rt + " call");
                    var c2 = { id_name: i5, config_key: t6, token: n5, mode_no: o3.appInfo.mode, etag: r3, is_special_customer: (null == s3 ? void 0 : s3.isSpecial) ? 1 : 0 }, h2 = function(t7, i6, n6) {
                      if (n6)
                        return o3.Ot.error(rt + " fail " + JSON.stringify(n6)), void a2(n6);
                      if (0 === t7.code) {
                        o3.Ot.info(rt + " suc");
                        var e6 = o3.decodeConfigMessage(t7.data.data);
                        u3({ code: 0, data: e6, etag: t7.data.etag });
                      } else
                        o3.Ot.error(rt + " fail " + t7.code), a2({ code: t7.code });
                    };
                    o3.oi.getFreeStream(b.OTHER).sendMessage(d.MSG_TYPE_GET_APPCONFIG_REQUEST, c2, h2, h2, null, { timeout: e5 });
                  });
                }, t5.prototype.decodeConfigMessage = function(t6) {
                  return this.Dt.decodeConfigMessage(t6);
                }, t5.prototype.getSvrAddr = function() {
                  var t6 = this;
                  return new Promise(function(i5, n5) {
                    t6.Ot.info("".concat(nt, " call"));
                    var e5 = t6.oi.getFreeStream(b.OTHER), r3 = t6.appInfo.geoFencing;
                    e5.sendMessage(d.MSG_TYPE_GET_SVRADDR_REQUEST, { geofencing_type: null == r3 ? void 0 : r3.type, geofencings: null == r3 ? void 0 : r3.list, dispatch_tag: t6.stateCenter.customConfig.dispatchTag, addr_type: 0 === t6.stateCenter.customConfig.ipStackMode ? 0 : 2 }, function(n6) {
                      t6.Ot.info("".concat(nt, " suc")), i5(n6);
                    }, function(i6, e6, r4) {
                      t6.Ot.info("".concat(nt, " fail")), n5(r4 || i6);
                    });
                  });
                }, t5;
              }();
              !function(t5) {
                t5.Lazy = "lazy", t5.Periodic = "periodic";
              }(ti || (ti = {}));
              var ui = function() {
                function t5(t6, i5) {
                  this.oi = t6, this.lt = i5, this.ri = null, this.ci = 5, this.ui = 10, this.hi = 0, this.ai = 0, this.fi = 0, this.mode = ti.Lazy;
                }
                return Object.defineProperty(t5.prototype, "_i", { get: function() {
                  return this.oi.getHbStream();
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "Ot", { get: function() {
                  return this.lt.logger;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "li", { get: function() {
                  var t6 = this.lt.lastRecvMsgTime;
                  return !!t6 && Date.now() - t6 > 1e3 * this.ci;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "di", { get: function() {
                  var t6 = this.fi;
                  return !!t6 && Date.now() - t6 > 1e3 * this.ui;
                }, enumerable: false, configurable: true }), t5.prototype.init = function(t6) {
                  this.Ot.info("zn.nhb.ii call. "), t6.data.logic_hb_interval >= 1 && t6.data.logic_hb_interval <= 10 && (this.ci = t6.data.logic_hb_interval), t6.data.logic_hb_timeout >= 3 && t6.data.logic_hb_timeout <= 30 && (this.ui = t6.data.logic_hb_timeout), this.ai = 0, this.hi = this.ui / this.ci, this.startHB();
                }, t5.prototype.startHB = function() {
                  var t6 = this;
                  if (this._i) {
                    var i5 = this.li;
                    if (this.Ot.debug("zn.nhb.rs call " + i5), !i5 && this.fi && (this.Ot.info(st + " stop check."), this.fi = 0), null !== this.ri) {
                      if (i5 || this.mode === ti.Periodic)
                        return;
                      clearTimeout(this.ri);
                    }
                    var n5 = this.ri = setTimeout(function() {
                      t6.ri === n5 && (t6.ri = null), t6.li && !t6.fi && (t6.Ot.info(st + " start check."), t6.fi = Date.now()), t6.di && (t6.Ot.warn(st + " over max hb timeout. "), t6.onHBTimeout && t6.onHBTimeout()), t6.Ei();
                    }, 1e3 * this.ci);
                  }
                }, t5.prototype.Ei = function() {
                  var t6 = this;
                  if (this._i) {
                    this.Ot.debug(st + " call " + this.ai++);
                    var i5 = (/* @__PURE__ */ new Date()).getTime(), n5 = function(n6, e6, r3) {
                      var s3 = (/* @__PURE__ */ new Date()).getTime() - i5;
                      if (t6.Ot.debug(st + " hb callback " + s3), r3 && 0 !== (null == r3 ? void 0 : r3.code))
                        t6.Ot.warn(st + " fail " + JSON.stringify(r3));
                      else {
                        if (t6.fi && (t6.Ot.info(st + " hb rsp to stop check."), t6.fi = 0), null == n6 ? void 0 : n6.ntp_time) {
                          var o3 = n6.ntp_time, u3 = "number" == typeof o3 ? o3 : o3.toNumber(), a2 = (/* @__PURE__ */ new Date()).getTime();
                          0 === t6.lt.appInfo.env && t6.lt.updateNTP(i5, u3, a2);
                        }
                        t6.ai = 0;
                      }
                    }, e5 = { ts: Date.now() };
                    this._i.sendMessage(d.MSG_TYPE_HB_REQUEST, e5, n5, n5, null);
                  }
                }, t5.prototype.onHBTimeout = function() {
                }, t5.prototype.stop = function() {
                  this.ri && (clearTimeout(this.ri), this.ri = null), this.ai = 0;
                }, t5;
              }(), ai = function() {
                return ai = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e5 = arguments.length; n5 < e5; n5++)
                    for (var r3 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r3) && (t5[r3] = i5[r3]);
                  return t5;
                }, ai.apply(this, arguments);
              }, ci = function() {
                function t5(t6, i5, n5, e5, r3, s3) {
                  this.Ot = t6, this.pi = i5, this.oi = n5, this.gi = e5, this.lt = r3, this.Si = s3, this.connectState = y.DISCONNECT, this.lastConnectState = y.DISCONNECT, this.brokenTimer = null, this.listenerList = { connected: [], broken: [] }, this.pcEmitState = -1, this.Ti = null, this.eventManager = new Zt(), this.Si && (this.Si.isMsgCache = false);
                }
                return Object.defineProperty(t5.prototype, "service", { get: function() {
                  return this.pi;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "netPcStream", { get: function() {
                  return this.Ti || this.createPcStream();
                }, enumerable: false, configurable: true }), t5.prototype.createPcStream = function() {
                  var t6 = this.oi.createStream(b.PC);
                  return this.Ti = t6, t6.onPushEvent = this.onPushEvent.bind(this), t6;
                }, t5.prototype.sendRequest = function(t6, i5, n5, e5) {
                  var r3, s3, o3, u3, a2, c2, h2 = this;
                  this.Ti || this.Ot.info(wt + " create pc ".concat(this.pi, " ").concat(this.netPcStream.StreamID));
                  var f2 = t6.payload;
                  (null === (r3 = this.Si) || void 0 === r3 ? void 0 : r3.encode) && (f2 = Pt(t6.payload));
                  var l2 = { service_no: this.pi, ack: t6.ack, payload: f2, wss_message_type: null !== (o3 = null === (s3 = this.Si) || void 0 === s3 ? void 0 : s3.messageType) && void 0 !== o3 ? o3 : Ot.wssMessageType, wss_path: null === (u3 = this.Si) || void 0 === u3 ? void 0 : u3.path, wss_raw_query: null === (a2 = this.Si) || void 0 === a2 ? void 0 : a2.query, zegoconn_version: Ot.connectVer, addr_type: 0 === this.lt.customConfig.ipStackMode ? 0 : 1 };
                  this.netPcStream.isConnect() || (this.Ot.info(wt + " pc is not connect"), this.eventManager.emit("connectStart")), this.netPcStream.sendMessage(d.MSG_TYPE_PC_UPWARD_MESSAGE, l2, function() {
                    h2.Ot.info(wt + " suc"), n5 && n5();
                  }, function(t7) {
                    h2.Ot.error(wt + " fail"), i5 && i5(t7);
                  }, null, { isInSendMap: "boolean" == typeof t6.isInSendMap && t6.isInSendMap, extras: e5, isMsgCache: null === (c2 = this.Si) || void 0 === c2 ? void 0 : c2.isMsgCache });
                }, t5.prototype.onPushEvent = function(t6, i5, n5) {
                  var e5;
                  switch (this.Ot.info(St + " msgType: ".concat(t6)), t6) {
                    case d.MSG_TYPE_PC_ESTABLISHED:
                      this.netPcStream.isFirst = false, this.pcEstablished(i5, this.netPcStream.StreamID);
                      break;
                    case d.MSG_TYPE_PC_BROKEN:
                      this.pcBroken();
                      break;
                    case d.MSG_TYPE_PC_DOWNWARD_MESSAGE:
                      this.Ot.info(St + " ".concat(this.pi, " down ").concat((null == i5 ? void 0 : i5.ts) && i5.ts.toNumber && i5.ts.toNumber() || i5.ts));
                      var r3 = i5.payload;
                      (null === (e5 = this.Si) || void 0 === e5 ? void 0 : e5.encode) && (r3 = Mt(i5.payload)), this.eventManager.emit("downLoadMessage", r3, n5);
                      break;
                    case d.MSG_TYPE_PUSH_EXCEPTION:
                      this.Ot.info(St + " ".concat(this.pi, " exception ").concat(JSON.stringify(i5))), this.eventManager.emit("exception", i5, n5);
                  }
                }, t5.prototype.on = function(t6, i5) {
                  return this.eventManager.addEventHandler(t6, i5);
                }, t5.prototype.off = function(t6, i5) {
                  this.eventManager.removeEventHandler(t6, i5);
                }, t5.prototype.pcEstablished = function(t6, i5) {
                  this.Ot.info("zn.napr.pe call " + JSON.stringify(t6)), this.setConnectState(y.CONNECTED);
                  var n5 = O.MANUAL;
                  this.lastConnectState === y.BROKEN && this.connectState === y.CONNECTED && (n5 = O.AUTO), this.stateChanged(y.CONNECTED, n5, void 0, { proxy_link_sources: null == t6 ? void 0 : t6.from, connect_stream: i5 }), this.brokenTimer && clearTimeout(this.brokenTimer);
                }, t5.prototype.pcBroken = function() {
                  var t6 = this;
                  this.Ot.info("zn.napr.pb call"), this.setConnectState(y.BROKEN), this.stateChanged(y.BROKEN), this.brokenTimer = setTimeout(function() {
                    t6.stateChanged(y.DISCONNECT, k.TEMP, void 0, { code: Ht });
                  }, 1e3 * this.gi);
                }, t5.prototype.resetBrokenTimer = function() {
                  this.brokenTimer && clearTimeout(this.brokenTimer);
                }, t5.prototype.Ci = function(t6, i5, n5) {
                  var e5;
                  this.Ot.info("zn.napr.cr" + " close pc ".concat(this.pi, " ").concat((null === (e5 = this.Ti) || void 0 === e5 ? void 0 : e5.StreamID) || -1, " ").concat(t6, " ").concat(this.connectState, " ").concat(i5, " ").concat(n5 || "")), this.connectState === y.DISCONNECT && "disconnected" !== t6 || (this.Ti && (this.Ti.closeStream(0, ""), this.Ti.destroyed(), this.Ti = null), this.resetBrokenTimer(), "broken" === t6 ? this.stateChanged(y.BROKEN, n5, void 0, { code: i5 }) : "disconnected" === t6 && this.stateChanged(y.DISCONNECT, void 0, void 0, { code: i5 }), this.setConnectState(y.DISCONNECT));
                }, t5.prototype.closePc = function(t6, i5) {
                  this.connectState !== y.DISCONNECT && this.Ci("broken", t6, i5);
                }, t5.prototype.closeRequest = function() {
                  this.Ci("disconnected", 0, k.CLOSE);
                }, t5.prototype.setConnectState = function(t6) {
                  this.connectState !== t6 && (this.lastConnectState = this.connectState, this.connectState = t6);
                }, t5.prototype.reportEvent = function(t6, i5) {
                  this.eventManager.emit(t6, ai({ service_no: this.pi }, i5));
                }, t5.prototype.stateChanged = function(t6, i5, n5, e5) {
                  this.Ot.info("zn.napr.sc ".concat(t6, " ").concat(i5, " ").concat(JSON.stringify(n5))), this.pcEmitState === t6 ? this.Ot.info("zn.napr.sc same") : (this.pcEmitState = t6, t6 === y.BROKEN ? (this.eventManager.emit("broken"), this.reportEvent("pcBrokenEvent", e5)) : t6 === y.DISCONNECT ? (this.eventManager.emit("disconnected", i5, { code: null == n5 ? void 0 : n5.code }), this.reportEvent("pcDisconnectedEvent", e5)) : t6 === y.CONNECTED && (this.eventManager.emit("connected", i5), this.reportEvent("pcConnectedEvent", e5)));
                }, t5;
              }(), hi = function() {
                function t5(t6, i5) {
                  this.oi = t6, this.lt = i5, this.pcStreamRequests = [], this.pcEstablishTimeout = Ot.pcEstablishTimeout;
                }
                return Object.defineProperty(t5.prototype, "Ot", { get: function() {
                  return this.lt.logger;
                }, enumerable: false, configurable: true }), t5.prototype.getRequest = function(t6, i5) {
                  var n5 = new ci(this.Ot, t6, this.oi, this.pcEstablishTimeout, this.lt, i5);
                  return this.pcStreamRequests.push(n5), n5;
                }, t5.prototype.updateConnectState = function(t6, i5, n5) {
                  this.Ot.info("zn.naprm.ucs call " + t6 + " " + i5), this.pcStreamRequests.forEach(function(e5) {
                    e5.stateChanged(t6, i5, n5, { code: (null == n5 ? void 0 : n5.code) || 0 });
                  });
                }, t5.prototype.closePCs = function(t6, i5) {
                  this.pcStreamRequests.forEach(function(n5) {
                    n5.closePc(t6, i5);
                  });
                }, t5.prototype.setEstablishTimeout = function(t6) {
                  this.pcEstablishTimeout = t6;
                }, t5;
              }(), fi = function() {
                function t5(t6, i5) {
                  this.Ot = t6, this.lt = i5, this.RETRY_START_TIME_INTERVAL = 4, this.RETRY_CONTINUE_COUNT = 2, this.RETRY_MAX_TIME_INTERVAL = 32, this.retryTimer = null, this.maxTimer = null, this.bi = 1, this.mi = 0, this.Oi = 3, this.isOverTime = false, this.RETRY_MAX_TIME = 90, this.h3ClosedTimes = [], this.retryIPMaxTimes = 2;
                }
                return t5.prototype.initLink = function(t6) {
                  this.link = t6;
                }, t5.prototype.startMaxTime = function() {
                  var t6 = this;
                  this.Ot.info(ut + " call"), this.maxTimer || (this.Ot.info(ut + " start max timer"), this.maxTimer = setTimeout(function() {
                    t6.Ot.warn(ut + " over max time ".concat(t6.RETRY_MAX_TIME, "s, stop retry")), t6.isOverTime = true, t6.link.destroySocket(_.NONE), t6.stopMaxTime(), t6.invalid(), t6.onactive(false, Gt);
                  }, 1e3 * this.RETRY_MAX_TIME));
                }, t5.prototype.stopMaxTime = function() {
                  this.Ot.info("zn.rlh.sm.1 call"), this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null;
                }, t5.prototype.active = function(t6, i5, n5) {
                  var e5 = this;
                  if (void 0 === i5 && (i5 = false), void 0 === n5 && (n5 = false), this.Ot.info(ot + " call " + t6 + " " + i5 + " " + n5 + " " + this.bi), this.lt.isDestroyed)
                    return false;
                  if (this.retryTimer)
                    return this.Ot.info(ot + " has actived, ignore"), false;
                  var r3 = this.lt.networkState == f.offline;
                  if (r3) {
                    if (this.Ot.info(ot + " check if really offline. " + this.mi), this.mi >= this.Oi)
                      return this.Ot.warn(ot + " network is broken, stop retry"), false;
                  } else
                    this.mi = 0;
                  if (this.link.isConnecting() && !n5)
                    return this.Ot.info(ot + " link is connecting, ignore"), false;
                  if (this.isOverTime)
                    return this.Ot.info(ot + " retry over time, stop retry"), false;
                  if (this.bi > this.retryIPMaxTimes)
                    return this.invalid(), this.onRetryBeyondLimit(), false;
                  var s3 = function() {
                    e5.Ot.info(ot + " interval " + e5.Ri), e5.retryTimer = setTimeout(function() {
                      i5 || e5.link.destroySocket(_.BROKEN), e5.link.connectSocket(t6, function() {
                        e5.Ot.info(ot + " suc"), e5.lt.networkState = f.online, e5.stopMaxTime(), e5.invalid(), e5.onactive(true);
                      }, function() {
                        var t7, i6;
                        if ((null === (i6 = e5.link.socketService) || void 0 === i6 ? void 0 : i6.type) === c.WebTransport && e5.lt.networkState === f.online && (e5.h3ClosedTimes.push(Date.now()), 3 === e5.h3ClosedTimes.length)) {
                          if (e5.h3ClosedTimes[2] - e5.h3ClosedTimes[0] <= 15e3)
                            return e5.h3ClosedTimes = [], e5.Ot.info(lt + " reason:" + F.ClosedTooOften + " error:Links break too often"), qt(e5.link.linkServerStorageKey, e5.lt.env, e5.lt.appID, ((t7 = {})[e5.link.connectServer] = { status: false, time: Date.now() }, t7), true), e5.lt.enableHttp3 = false, !e5.maxTimer && e5.startMaxTime(), void e5.active(false, true);
                          e5.h3ClosedTimes.shift();
                        }
                        e5.Ot.info(ot + " fail"), !e5.maxTimer && e5.startMaxTime(), e5.active(true, false, true);
                      }), e5.retryTimer && clearTimeout(e5.retryTimer), e5.retryTimer = null, r3 ? e5.mi++ : e5.bi++;
                    }, i5 ? 0 : 1e3 * e5.Ri);
                  };
                  if (1 == this.bi)
                    xt().then(function(t7) {
                      e5.Ri = Math.floor(t7 * (1 - e5.RETRY_START_TIME_INTERVAL) + e5.RETRY_START_TIME_INTERVAL), s3();
                    }).catch(function() {
                      e5.Ri = 0.5 * e5.RETRY_START_TIME_INTERVAL, s3();
                    });
                  else {
                    var o3 = Math.pow(2, Math.round(this.bi / this.RETRY_CONTINUE_COUNT + 1));
                    this.Ri = o3 > this.RETRY_MAX_TIME_INTERVAL ? this.RETRY_MAX_TIME_INTERVAL : o3, s3();
                  }
                  return true;
                }, t5.prototype.onactive = function() {
                  for (var t6 = [], i5 = 0; i5 < arguments.length; i5++)
                    t6[i5] = arguments[i5];
                }, t5.prototype.onRetryBeyondLimit = function() {
                }, t5.prototype.init = function(t6, i5, n5, e5) {
                  this.invalid(), this.stopMaxTime(), this.isOverTime = false, "number" == typeof t6 && t6 < 3600 && (this.RETRY_MAX_TIME = t6), "number" == typeof i5 && (this.RETRY_START_TIME_INTERVAL = i5), "number" == typeof n5 && (this.RETRY_CONTINUE_COUNT = n5), "number" == typeof e5 && (this.RETRY_MAX_TIME_INTERVAL = e5);
                }, t5.prototype.invalid = function() {
                  this.Ot.info("zn.rlh.ivd end retry"), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.bi = 1, this.mi = 0;
                }, t5;
              }(), li = function() {
                function t5() {
                  this.networkState = f.online, this.appInfo = { appID: 0, env: 0, mode: Ot.modeNo, model: Ot.model, connVer: Ot.connectVer }, this.useNetAgent = true, this.specified = false, this.clientIP = "", this.byPassClientIP = "", this.timeOffset = 0, this.networkRTT = 0, this.enableHttp3 = false, this.isDestroyed = false, this.lastRecvMsgTime = 0, this.customConfig = { enableHttp3: false, ipStackMode: 1, probeByPassStrategy: 0 }, this.linkIpStackDetection = { IPv4: o2.unknown, IPv6: o2.unknown }, this.isIpStackDetected = false, this.currentIpStackType = e4.IPv4, this.ipList = { ipv4: [], ipv6: [] }, this.enableHttp3 = $t.isSupport();
                }
                return Object.defineProperty(t5.prototype, "appID", { get: function() {
                  return this.appInfo.appID;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "env", { get: function() {
                  return this.appInfo.env;
                }, enumerable: false, configurable: true }), t5.prototype.updateNTP = function(t6, i5, n5) {
                  if (!(t6 > n5)) {
                    var e5 = n5 - t6;
                    this.timeOffset = Math.round((i5 - t6 + (i5 - n5)) / 2);
                    var r3 = Math.round(i5 + e5 / 2);
                    (!this.networkRTT || e5 < this.networkRTT) && (this.networkRTT = e5, this.ntpTimeInfo = { performanceTime: Math.round(performance.now()), ntp: r3 });
                  }
                }, t5;
              }(), di = function() {
                function t5() {
                  this.level = 1;
                }
                return t5.prototype.setLogLevel = function(t6) {
                  var i5;
                  return this.level = null !== (i5 = vi[t6]) && void 0 !== i5 ? i5 : this.level, true;
                }, t5.prototype.log = function() {
                  for (var t6 = [], i5 = 0; i5 < arguments.length; i5++)
                    t6[i5] = arguments[i5];
                  if (!(this.level > 1)) {
                    var n5 = t6.join(" ");
                    console.log(n5);
                  }
                }, t5.prototype.debug = function() {
                  for (var t6 = [], i5 = 0; i5 < arguments.length; i5++)
                    t6[i5] = arguments[i5];
                  if (!(this.level > 0)) {
                    var n5 = t6.join(" ");
                    console.debug(n5);
                  }
                }, t5.prototype.info = function() {
                  for (var t6 = [], i5 = 0; i5 < arguments.length; i5++)
                    t6[i5] = arguments[i5];
                  if (!(this.level > 1)) {
                    var n5 = t6.join(" ");
                    console.info(n5);
                  }
                }, t5.prototype.warn = function() {
                  for (var t6 = [], i5 = 0; i5 < arguments.length; i5++)
                    t6[i5] = arguments[i5];
                  if (!(this.level > 2)) {
                    var n5 = t6.join(" ");
                    console.warn(n5);
                  }
                }, t5.prototype.error = function() {
                  for (var t6 = [], i5 = 0; i5 < arguments.length; i5++)
                    t6[i5] = arguments[i5];
                  if (!(this.level > 3)) {
                    var n5 = t6.join(" ");
                    console.error(n5);
                  }
                }, t5;
              }(), vi = { debug: 0, info: 1, warn: 2, error: 3, report: 99, disable: 100 }, mi = function() {
                return mi = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e5 = arguments.length; n5 < e5; n5++)
                    for (var r3 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r3) && (t5[r3] = i5[r3]);
                  return t5;
                }, mi.apply(this, arguments);
              }, pi = function() {
                function t5(t6, i5, n5) {
                  this.Ot = t6, this.oi = i5, this.pi = n5;
                }
                return Object.defineProperty(t5.prototype, "netHttpStream", { get: function() {
                  return this.oi.getFreeStream(b.HTTP);
                }, enumerable: false, configurable: true }), t5.prototype.sendRequest = function(t6, i5, n5, e5, r3) {
                  var s3 = this, o3 = t6.disableLog, u3 = { service_no: this.pi, ack: t6.ack, headers: t6.headers, body: Pt(JSON.stringify(t6.body)), id_name: t6.idName, method_no: t6.method_no, stick: t6.stick, location: t6.location, reduce_resp_header: t6.reduceRspHeaders ? 1 : 0 };
                  this.netHttpStream.sendMessage(d.MSG_TYPE_HTTP_REQUEST, u3, function(t7) {
                    var n6 = (null == t7 ? void 0 : t7.headers).find(function(t8) {
                      return "Content-Encoding" === (null == t8 ? void 0 : t8.name);
                    });
                    if ("gzip" === (null == n6 ? void 0 : n6.val))
                      !o3 && s3.Ot.info(Et + " gzip");
                    else if (t7.body) {
                      var e6 = Mt(t7.body);
                      t7.body = e6;
                    }
                    var r4 = mi(mi({}, t7), { body: void 0 });
                    !o3 && s3.Ot.info(Et + " suc " + JSON.stringify(r4)), i5 && i5(t7);
                  }, function(t7, i6, e6) {
                    !o3 && s3.Ot.error(Et + " fail"), n5 && n5(e6 || t7);
                  }, function(t7) {
                    !o3 && s3.Ot.error(Et + " ack"), e5 && e5(t7);
                  }, r3);
                }, t5.prototype.sendRequest2 = function(t6, i5, n5, e5, r3) {
                  var s3 = this, o3 = 1 === t6.format ? Pt(JSON.stringify(t6.body)) : t6.body, u3 = { ack: t6.ack, body: o3, id_name: t6.idName, method: t6.method, interface_id: t6.interfaceID, token: t6.token, reduce_resp_header: t6.reduceRspHeaders ? 1 : 0 };
                  t6.headers && (u3.headers = t6.headers), t6.resID && (u3.res_id = t6.resID), t6.urlParams && (u3.params = t6.urlParams), t6.mode && (u3.mode = t6.mode), this.netHttpStream.sendMessage(d.MSG_TYPE_HTTP_REQUEST2, u3, function(e6, r4) {
                    var o4 = (null == e6 ? void 0 : e6.headers).find(function(t7) {
                      return "Content-Encoding" === (null == t7 ? void 0 : t7.name);
                    });
                    if (200 === e6.status_code) {
                      if ("gzip" === (null == o4 ? void 0 : o4.val))
                        s3.Ot.info(kt + " gzip");
                      else if (e6.body && 1 === t6.format)
                        try {
                          a2 = Mt(e6.body), e6.body = a2;
                        } catch (t7) {
                          s3.Ot.info(kt + " decode " + JSON.stringify(t7));
                        }
                      var u4 = mi(mi({}, e6), { body: void 0 });
                      s3.Ot.info(kt + " suc " + JSON.stringify(u4)), i5 && i5(e6, r4);
                    } else {
                      try {
                        var a2 = Mt(e6.body);
                        e6.body = a2;
                      } catch (t7) {
                        s3.Ot.info(kt + " status " + e6.status_code + " " + JSON.stringify(t7));
                      }
                      n5 && n5(e6);
                    }
                  }, function(t7, i6, e6) {
                    s3.Ot.error(kt + " fail"), n5 && n5(e6 || t7);
                  }, function(t7) {
                    s3.Ot.error(kt + " ack"), e5 && e5(t7);
                  }, r3);
                }, t5;
              }(), gi = function() {
                function t5(t6, i5, n5) {
                  this.type = t6, this.Ai = i5, this.gt = n5, this.isFree = false, this.isFirst = true, this.timestamp = 0, this.id = Date.now();
                }
                return Object.defineProperty(t5.prototype, "StreamID", { get: function() {
                  return this.Ai;
                }, enumerable: false, configurable: true }), t5.prototype.Pi = function() {
                  this.timestamp = Date.now();
                }, t5.prototype.refresh = function(t6) {
                  this.Ai = t6, this.isFirst = true, this.Pi();
                }, t5.prototype.sendMessage = function(t6, i5, n5, e5, r3, s3) {
                  var o3 = this;
                  void 0 === n5 && (n5 = null), void 0 === e5 && (e5 = null), void 0 === r3 && (r3 = null), void 0 === s3 && (s3 = { timeout: 5e3, isInSendMap: true }), this.isFree = false, this.Pi();
                  var u3 = this.Ai;
                  this.gt.sendMessage(t6, u3, i5, this.isFirst, function(t7, i6, e6) {
                    o3.type !== b.PC && (o3.isFree = true, o3.Pi()), o3.isFirst && u3 === o3.StreamID && (o3.isFirst = false), n5 && n5(t7, e6);
                  }, function(t7, i6, n6) {
                    o3.type !== b.PC && (o3.isFree = true, o3.Pi()), 1100002 === (null == n6 ? void 0 : n6.code) ? o3.destroyed() : o3.isFirst && u3 === o3.StreamID && (o3.isFirst = false), e5 && e5(t7, i6, n6);
                  }, r3, s3, this.type);
                }, t5.prototype.onPushEvent = function(t6, i5, n5) {
                }, t5.prototype.closeStream = function(t6, i5) {
                  this.gt.sendMessage(d.MSG_TYPE_STREAM_CLOSED, this.Ai, { code: t6, msg: i5 }, void 0, void 0, void 0, void 0, { isInSendMap: false }, this.type);
                }, t5.prototype.destroyed = function() {
                  var t6, i5;
                  (null === (i5 = null === (t6 = this.gt) || void 0 === t6 ? void 0 : t6.socketService) || void 0 === i5 ? void 0 : i5.type) === c.WebTransport && this.gt.socketService.closeStream(this.Ai), this.onDestroyed();
                }, t5.prototype.isConnect = function() {
                  return this.gt.isConnect();
                }, t5.prototype.onDestroyed = function() {
                }, t5;
              }(), bi = function(t5, i5, n5) {
                if (n5 || 2 === arguments.length)
                  for (var e5, r3 = 0, s3 = i5.length; r3 < s3; r3++)
                    !e5 && r3 in i5 || (e5 || (e5 = Array.prototype.slice.call(i5, 0, r3)), e5[r3] = i5[r3]);
                return t5.concat(e5 || Array.prototype.slice.call(i5));
              }, _i = function() {
                function t5(t6, i5) {
                  var n5 = this;
                  this.gt = t6, this.lt = i5, this.streamID = 1, this.pcStreams = [], this.streams = [], this.gt.onSocketClose = function() {
                    n5.refreshAllStream();
                  };
                }
                return Object.defineProperty(t5.prototype, "Ot", { get: function() {
                  return this.lt.logger;
                }, enumerable: false, configurable: true }), t5.prototype.destroy = function() {
                  this.clearStreams();
                }, t5.prototype.createStream = function(t6) {
                  var i5 = this, n5 = this.getNextStreamID(), e5 = new gi(t6, n5, this.gt);
                  return t6 === b.PC ? this.pcStreams.push(e5) : this.streams.push(e5), e5.onDestroyed = function() {
                    t6 === b.PC ? i5.pcStreams = i5.pcStreams.filter(function(t7) {
                      return t7.StreamID !== n5;
                    }) : i5.streams = i5.streams.filter(function(t7) {
                      return t7.StreamID !== n5;
                    });
                  }, e5;
                }, t5.prototype.getHbStream = function() {
                  var t6 = this;
                  if (this.hbStream)
                    return this.hbStream;
                  var i5 = new gi(b.OTHER, this.getNextStreamID(), this.gt);
                  return i5.onDestroyed = function() {
                    t6.hbStream = void 0;
                  }, this.hbStream = i5, i5;
                }, t5.prototype.getFreeStream = function(t6) {
                  if (t6 !== b.PC) {
                    var i5 = this.streams.find(function(t7) {
                      return t7.isFree && t7.type !== b.PC;
                    });
                    if (i5)
                      return i5.isFree = false, i5;
                  }
                  return this.createStream(t6);
                }, t5.prototype.onPushEvent = function(t6, i5, n5, e5) {
                  var r3 = this.pcStreams.find(function(i6) {
                    return i6.StreamID === t6;
                  });
                  r3 && r3.onPushEvent(i5, n5, e5);
                }, t5.prototype.getNextStreamID = function() {
                  return this.streamID = this.streamID + 2, this.streamID;
                }, t5.prototype.refreshAllStream = function() {
                  var t6 = this;
                  this.Ot.info("zn.sm.ras call"), bi(bi(bi([], this.streams, true), this.pcStreams, true), [this.hbStream], false).forEach(function(i5) {
                    return null == i5 ? void 0 : i5.refresh(t6.getNextStreamID());
                  });
                }, t5.prototype.clearStreams = function() {
                  this.streams = [], this.pcStreams = [], this.hbStream = void 0;
                }, t5;
              }(), yi = function() {
                return yi = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e5 = arguments.length; n5 < e5; n5++)
                    for (var r3 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r3) && (t5[r3] = i5[r3]);
                  return t5;
                }, yi.apply(this, arguments);
              }, wi = function(t5, i5, n5) {
                if (n5 || 2 === arguments.length)
                  for (var e5, r3 = 0, s3 = i5.length; r3 < s3; r3++)
                    !e5 && r3 in i5 || (e5 || (e5 = Array.prototype.slice.call(i5, 0, r3)), e5[r3] = i5[r3]);
                return t5.concat(e5 || Array.prototype.slice.call(i5));
              };
              function Si(t5, i5) {
                return void 0 === i5 && (i5 = "setAppInfo"), Error("Failed to execute ".concat(t5, " before ").concat(i5, "."));
              }
              var Ei = function() {
                function t5(t6) {
                  var i5 = this;
                  this.proxyCtrl = t6, this.Ii = null, this.connectServers = [], this.http3Servers = [], this.wssV6Servers = [], this.http3V6Servers = [], this.specifiedServers = [], this.getAppConfigFailCount = 0, this.getAppConfigTime = 0, this.linkMsgMaxInterval = 90, this.connectedTime = 0, this.connectid = "", this.reportSeq = 1, this.connectSeq = 0, this.Ni = 0, this.listenNetworkState = true, this.defaultConnectServers = [], this.Di = 0, this.lastLinkConnectState = 0, this._t = function(t7, n5) {
                    i5.logger.warn("zn.zca.btws h333 back to ws. ".concat(t7)), i5.$t(true, { code: Vt, msg: (null == n5 ? void 0 : n5.message) || JSON.stringify(n5) }), i5.yi();
                  }, this.Qt = function(t7) {
                    var n5 = i5.stateCenter.ipList;
                    i5.stateCenter.clientIP && i5.wi(i5.stateCenter.clientIP), i5.stateCenter.byPassClientIP && i5.wi(i5.stateCenter.byPassClientIP);
                    var e5 = { linkConnectDetection: t7 };
                    (n5.ipv4.length > 0 || n5.ipv6.length > 0) && (e5.ipList = n5), i5.eventManager.emit("ipDetection", e5);
                  }, this.Ft = function(t7, n5) {
                    if (i5.linkConnectState = 2, i5.zi(), 0 === i5.appInfo.env) {
                      var e5 = i5.reportSeq++;
                      i5.eventManager.emit("dispatchEvent", e5, "start"), i5.Mi().then(function(t8) {
                        var n6, r3, s3 = t8.servers, o3 = t8.http3Servers, u3 = t8.http3Domains, a2 = t8.wssV6Servers, c2 = t8.http3V6Servers, h2 = t8.wssV6Domains, f2 = t8.http3V6Domains, l2 = t8.domains.map(function(t9) {
                          return t9.host;
                        }), d2 = u3.map(function(t9) {
                          return t9.host;
                        }), v2 = h2.map(function(t9) {
                          return t9.host;
                        }), m2 = f2.map(function(t9) {
                          return t9.host;
                        });
                        i5.http3Servers && i5.http3Servers.length || (i5.http3Servers = o3, null === (n6 = i5.zegoLink) || void 0 === n6 || n6.setHttp3Servers(o3, [])), i5.http3V6Servers && i5.http3V6Servers.length || (i5.http3V6Servers = c2, null === (r3 = i5.zegoLink) || void 0 === r3 || r3.setHttp3Servers([], c2)), i5.eventManager.emit("dispatchEvent", e5, "end", { servers: s3, domains: l2, http3Servers: o3, http3Domains: d2, wssV6Domains: v2, http3V6Domains: m2 }), s3.length > 0 && i5.eventManager.emit("dispatchResultUpdate", { servers: s3, http3Servers: o3, domains: l2, http3Domains: d2, wssV6Servers: a2, http3V6Servers: c2 });
                      }).catch(function(t8) {
                      }), i5.Hi().then(function(t8) {
                        i5.eventManager.emit("svrAddrResultUpdate", { accesshub_domain: t8.accesshub_domain, logreport_domain: t8.logreport_domain, detaillog_domain: t8.detaillog_domain, geofencing_id: t8.geofencing_id, accesshub_v6_domain: t8.accesshub_v6_domain, http3_v6_domain: t8.http3_v6_domain, logreport_v6_domain: t8.logreport_v6_domain, detaillog_v6_domain: t8.detaillog_v6_domain });
                      }).catch(function(t8) {
                      });
                    }
                    i5.eventManager.emit("connected"), i5.Ui(t7, n5);
                  }, this.Jt = function() {
                    i5.logger.info(K + " call"), i5.linkConnectState = 1;
                  }, this.$t = function(t7, n5, e5) {
                    i5.logger.info("zn.zca.ode" + " ".concat(t7, " ").concat(JSON.stringify(n5)));
                    var r3 = i5.linkConnectState;
                    i5.linkConnectState = 0, t7 ? i5.Gi(null == n5 ? void 0 : n5.code, k.TEMP) : (1 === r3 && e5 && i5.Ui(e5, null == n5 ? void 0 : n5.code), 0 !== r3 && (i5.eventManager.emit("disconnected"), i5.netAgentPCRequestMgr.updateConnectState(y.DISCONNECT, k.CLOSE, n5), i5.ki((null == n5 ? void 0 : n5.code) || 0)));
                  }, this.Wt = function(t7, n5, e5, r3) {
                    switch (n5) {
                      case d.MSG_TYPE_REDIRECT:
                      case d.MSG_TYPE_REDIRECT2:
                        i5.Vi(e5);
                        break;
                      case d.MSG_TYPE_CLOSE_CONNECTION:
                        i5.Bi(e5);
                        break;
                      case d.MSG_TYPE_PC_BROKEN:
                      case d.MSG_TYPE_PC_ESTABLISHED:
                      case d.MSG_TYPE_PC_DOWNWARD_MESSAGE:
                      case d.MSG_TYPE_PUSH_EXCEPTION:
                        i5.streamManager.onPushEvent(t7, n5, e5, r3);
                        break;
                      case d.MSG_TYPE_PUSH_APPCONFIG:
                        i5.businessRequestMgr.decodeConfigMessage(e5.data);
                    }
                  }, this.logger = new di(), this.stateCenter = new li(), this.stateCenter.logger = this.logger, this.protobuf = new H(this.stateCenter), this.eventManager = new Zt(), this.zegoLink = new si(this.protobuf, this.stateCenter, this.proxyCtrl), this.Yi(), this.streamManager = new _i(this.zegoLink, this.stateCenter), this.businessRequestMgr = new oi(this.streamManager, this.protobuf, this.stateCenter), this.zegoLink.HBHandler = this.netHeartBeatHandler = new ui(this.streamManager, this.stateCenter), this.netAgentPCRequestMgr = new hi(this.streamManager, this.stateCenter), this.zegoLink.initEvent(this.Ft, this.$t, this.Jt, this.Wt, this._t, this.Qt), this.zegoLink.onUpdateMsgTimeChanged = function(t7) {
                    i5.Li();
                  }, this.Li(), this.$i();
                }
                return t5.prototype.Yi = function() {
                  var t6 = this;
                  this.zegoLink.Lt = function(i5, n5, e5, r3, s3) {
                    if (0 == t6.Ni && 0 == i5) {
                      var o3 = t6.reportSeq++;
                      t6.Ni = o3, t6.eventManager.emit("onceConnectEvent", o3, "start");
                    } else if (0 != t6.Ni && 1 == i5) {
                      var u3 = Lt(n5);
                      t6.eventManager.emit("onceConnectEvent", t6.Ni, "end", { server: n5, error: e5, connect_type: u3, h3_reason: r3, message: null == s3 ? void 0 : s3.message }), t6.Ni = 0;
                    }
                  };
                }, Object.defineProperty(t5.prototype, "speed", { get: function() {
                  return this.zegoLink.speed;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "isDestroy", { get: function() {
                  return this.stateCenter.isDestroyed;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "xi", { get: function() {
                  return this.stateCenter.useNetAgent;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "clientIP", { get: function() {
                  return this.stateCenter.clientIP;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "timeOffset", { get: function() {
                  return this.stateCenter.timeOffset;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "connectIPStackType", { get: function() {
                  return this.stateCenter.currentIpStackType;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "linkConnectState", { get: function() {
                  return this.Di;
                }, set: function(t6) {
                  this.lastLinkConnectState = this.Di, this.Di = t6;
                }, enumerable: false, configurable: true }), Object.defineProperty(t5.prototype, "appInfo", { get: function() {
                  return this.stateCenter.appInfo;
                }, enumerable: false, configurable: true }), t5.prototype.init = function() {
                  if (this.isDestroy)
                    throw Error("instance have destroyed, invalid call");
                }, t5.prototype.unInit = function() {
                  this.zegoLink.release();
                }, t5.prototype.setAppInfo = function(t6) {
                  var i5 = tt + " ".concat(JSON.stringify(t6), " ; ");
                  if (this.stateCenter.appID > 0)
                    this.logger.warn(tt + " appInfo has exist, appID: ".concat(this.stateCenter.appID));
                  else {
                    if (t6.appID <= 0)
                      throw Error("setAppInfo, invalid appID: ".concat(t6.appID));
                    this.stateCenter.appInfo = yi(yi({}, this.stateCenter.appInfo), t6), navigator && (this.stateCenter.networkState = navigator.onLine ? f.online : f.offline, i5 += " oline: ".concat(navigator.onLine)), 0 === t6.env ? this.ji() : 1 === t6.env && this.qi(), this.logger.info(i5);
                  }
                }, t5.prototype.checkAndConnect = function(t6) {
                  if (!this.stateCenter.appID)
                    throw Si(t6, "setAppInfo");
                  if (this.connectServers.length <= 0)
                    throw Si(t6, "setNetAgentDefaultServers or setDispatchConnectServers");
                  if (this.isDestroy)
                    throw Error("instance have destroyed, invalid call");
                  this.retryLinkHandler || this.yi();
                }, t5.prototype.setUserInfo = function(t6) {
                  this.stateCenter.userId = t6;
                }, t5.prototype.setSettingConfig = function(t6) {
                  this.logger.info("zn.zca.ssc" + " ".concat(JSON.stringify(t6))), void 0 !== t6.enableHttp3 && (this.stateCenter.customConfig.enableHttp3 = t6.enableHttp3, $t.isSupport()), void 0 !== t6.dispatchTag && (this.stateCenter.customConfig.dispatchTag = t6.dispatchTag), void 0 !== t6.ipStackMode && (this.stateCenter.customConfig.ipStackMode = t6.ipStackMode), void 0 !== t6.accesshubBypassConnectTime && (this.stateCenter.customConfig.accesshubBypassConnectTime = t6.accesshubBypassConnectTime), void 0 !== t6.probeByPassStrategy && (this.stateCenter.customConfig.probeByPassStrategy = t6.probeByPassStrategy);
                }, t5.prototype.setNetAgentDefaultServers = function(t6, i5) {
                  void 0 === i5 && (i5 = []), 0 === this.connectServers.length && (this.connectServers = wi([], t6, true)), 0 === this.wssV6Servers.length && 0 !== i5.length && (this.wssV6Servers = wi([], i5, true));
                }, t5.prototype.setNetAgentSpecifiedServers = function(t6) {
                  throw Error("not support");
                }, t5.prototype.setBackupDomains = function(t6) {
                  throw Error("not support");
                }, t5.prototype.setDispatchConnectServers = function(t6, i5, n5, e5) {
                  void 0 === i5 && (i5 = []), void 0 === n5 && (n5 = []), void 0 === e5 && (e5 = []), t6.length > 0 && (this.connectServers = wi([], t6, true)), i5.length > 0 && (this.http3Servers = wi([], i5, true)), n5.length > 0 && (this.wssV6Servers = wi([], n5, true)), e5.length > 0 && (this.http3V6Servers = wi([], e5, true)), this.stateCenter.appID > 0 && this.yi();
                }, t5.prototype.startHttpRequest = function(t6, i5, n5, e5, r3) {
                  var s3 = this;
                  if (this.checkAndConnect("startHttpRequest"), r3 && "number" == typeof (null == r3 ? void 0 : r3.timeout) && ((null == r3 ? void 0 : r3.timeout) < 1e3 || (null == r3 ? void 0 : r3.timeout) > 1e4))
                    throw Error("timeout must between 1 and 10 second");
                  var o3 = this.reportSeq++;
                  this.eventManager.emit("requestEvent", o3, "start"), this.isConnect() || (this.logger.info(it + " link is not connect"), this.innerReconnect()), new pi(this.logger, this.streamManager, t6.service).sendRequest(t6, function(n6) {
                    s3.eventManager.emit("requestEvent", o3, "end", { na_req_location: t6.location, status_code: n6.status_code, err_code: 0 }), i5 && i5(n6);
                  }, function(i6) {
                    s3.eventManager.emit("requestEvent", o3, "end", { na_req_location: t6.location, err_code: i6.code || 0 }), n5 && n5(i6);
                  }, e5, r3);
                }, t5.prototype.startHttpRequest2 = function(t6, i5, n5, e5, r3) {
                  var s3 = this;
                  this.checkAndConnect("startHttpRequest2");
                  var o3 = this.reportSeq++;
                  this.eventManager.emit("requestEvent", o3, "start"), this.isConnect() || (this.logger.info(it + " link is not connect"), this.innerReconnect()), new pi(this.logger, this.streamManager).sendRequest2(t6, function(n6, e6) {
                    s3.eventManager.emit("requestEvent", o3, "end", { na_req_interface: t6.interfaceID, status_code: n6.status_code, err_code: 0 }), i5 && i5(n6, e6);
                  }, function(i6) {
                    s3.eventManager.emit("requestEvent", o3, "end", { na_req_interface: t6.interfaceID, err_code: i6.code || 0 }), n5 && n5(i6);
                  }, e5, r3);
                }, t5.prototype.getAppConfigByAgent = function(t6, i5, n5, e5, r3) {
                  if (this.checkAndConnect("getAppConfigByAgent"), !this.stateCenter.userId)
                    throw Si("getAppConfigByAgent", "setUserInfo");
                  return this.isConnect() || (this.logger.info("zn.gab.0 link is not connect"), this.innerReconnect()), this.Fi(t6, this.stateCenter.userId, i5, n5, e5, r3);
                }, t5.prototype.getPCRequest = function(t6, i5) {
                  var n5 = this;
                  if (!this.stateCenter.appInfo)
                    throw Si("getPCRequest");
                  var e5 = this.netAgentPCRequestMgr.getRequest(t6, i5);
                  return e5.on("disconnected", function(i6) {
                    n5.logger.warn("zn.zca.gpr " + t6 + " disconnect " + i6), i6 === k.TEMP && (n5.Gi(Ht), n5.Ji());
                  }), e5.on("connectStart", function() {
                    n5.innerReconnect();
                  }), e5;
                }, t5.prototype.connectUa = function() {
                  this.checkAndConnect("connectUa"), this.logger.info("zn.zca.cua call"), this.retryLinkHandler && (this.retryLinkHandler.init(), this.Wi(true));
                }, t5.prototype.destroyConnect = function(t6) {
                  this.logger.info("zn.zca.dc.0 call"), this.Qi(t6);
                }, t5.prototype.destroy = function() {
                  this.logger.info("zn.zca.dy.0 call"), this.destroyConnect(1 === this.linkConnectState ? Ft : void 0), this.Ii && clearTimeout(this.Ii), this.retryLinkHandler && this.retryLinkHandler.invalid(), this.retryLinkHandler && this.retryLinkHandler.stopMaxTime(), this.zegoLink.onUpdateMsgTimeChanged = void 0, this.stateCenter.isDestroyed = true, this.streamManager.destroy(), this.zegoLink.release();
                }, t5.prototype.isConnect = function() {
                  return this.zegoLink.isConnect();
                }, t5.prototype.isDisConnect = function() {
                  return this.zegoLink.isDisConnect();
                }, t5.prototype.on = function(t6, i5) {
                  return this.logger.debug("zn.zca.o.0 " + t6), !!this.eventManager.addEventHandler(t6, i5);
                }, t5.prototype.off = function(t6, i5) {
                  this.logger.debug("zn.zca.o.1 " + t6), this.eventManager.removeEventHandler(t6, i5);
                }, t5.prototype.setLogger = function(t6) {
                  this.logger = t6, this.stateCenter.logger = t6;
                }, t5.prototype.setAccess = function(t6) {
                  this.stateCenter.useNetAgent = t6;
                }, t5.prototype.getVersion = function() {
                  return "1.2.10";
                }, t5.prototype.reconnectUA = function() {
                  this.retryLinkHandler && (this.retryLinkHandler.startMaxTime(), this.Gi(), this.Wi(false, R.detail));
                }, t5.prototype.$i = function() {
                  var t6 = this;
                  this.netHeartBeatHandler.onHBTimeout = function() {
                    t6.eventManager.emit("heartBeatTimeout");
                  };
                }, t5.prototype.ji = function() {
                  var t6 = this;
                  this.listenNetworkState && (window.addEventListener("offline", function() {
                    t6.Ki();
                  }), window.addEventListener("online", function() {
                    t6.Zi();
                  }));
                }, t5.prototype.qi = function() {
                  var t6 = this;
                  wx.onNetworkStatusChange(function(i5) {
                    i5.isConnected ? t6.Zi() : t6.Ki();
                  });
                }, t5.prototype.Zi = function() {
                  this.logger.info("zn.zca.noh.0 network is online"), this.stateCenter.networkState = f.online, this.xi && this.Xi();
                }, t5.prototype.Ki = function() {
                  this.logger.info("zn.zca.noh.1 network is broken"), this.stateCenter.networkState = f.offline, this.xi && this.tn();
                }, t5.prototype.Li = function() {
                  var t6 = this;
                  this.stateCenter.useNetAgent && (this.Ii && clearTimeout(this.Ii), this.Ii = setTimeout(function() {
                    t6.logger.info("zn.zca.clm interval: " + t6.linkMsgMaxInterval + " ; start time:" + t6.zegoLink.updatedMsgTime), t6.Qi(Qt);
                  }, 1e3 * this.linkMsgMaxInterval));
                }, t5.prototype.yi = function() {
                  var t6 = this;
                  this.connectServers.length <= 0 ? this.logger.error(K + " #### not server url") : (this.zegoLink.setServers(this.connectServers, this.http3Servers, this.wssV6Servers, this.http3V6Servers), this.retryLinkHandler || (this.retryLinkHandler = new fi(this.logger, this.stateCenter)), this.retryLinkHandler.init(), this.retryLinkHandler.initLink(this.zegoLink), this.retryLinkHandler.onactive = function(i5, n5) {
                    n5 === Gt && (t6.eventManager.emit("disconnected", n5), t6.ki((null == n5 ? void 0 : n5.code) || 0), t6.netAgentPCRequestMgr.updateConnectState(y.DISCONNECT, k.TIMEOUT, n5));
                  }, this.retryLinkHandler.onRetryBeyondLimit = function() {
                    t6.Wi(true);
                  }, this.Wi(true));
                }, t5.prototype.Wi = function(t6, i5) {
                  void 0 === i5 && (i5 = R.single), this.logger.info("zn.cna.cbd call"), this.zegoLink.releaseSocketDetectTask(), this.resetIPDetection();
                  var n5 = this.getIpConnectRule();
                  this.logger.info("zn.cna.cbd rules " + JSON.stringify(n5)), this.stateCenter.retryLevel = i5, this.zegoLink.setIpStrategy(n5), this.Ji(false, t6);
                }, t5.prototype.resetIPDetection = function() {
                  this.stateCenter.linkIpStackDetection = { IPv4: o2.unknown, IPv6: o2.unknown }, this.stateCenter.ipList = { ipv4: [], ipv6: [] }, this.stateCenter.clientIP = "", this.stateCenter.byPassClientIP = "", this.stateCenter.isIpStackDetected = false, this.zegoLink.Nt = u2.noProbe, this.zegoLink.removeSocketServiceEvent();
                }, t5.prototype.wi = function(t6) {
                  var i5 = function(t7) {
                    return function(t8) {
                      return /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t8);
                    }(t7) ? e4.IPv4 : function(t8) {
                      var i6 = t8.trim().replace(/^$$|$$$/g, "");
                      return /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|(:[0-9a-fA-F]{1,4}){1,7}|[0-9a-fA-F]{1,4}(:[0-9a-fA-F]{1,4}){1,7}:|::([0-9a-fA-F]{1,4}:){0,6}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:)$/.test(i6);
                    }(t7) ? e4.IPv6 : -1;
                  }(t6), n5 = this.stateCenter.ipList, r3 = n5.ipv4, s3 = n5.ipv6;
                  i5 === e4.IPv4 ? !r3.includes(t6) && r3.push(t6) : i5 === e4.IPv6 && !s3.includes(t6) && s3.push(t6);
                }, t5.prototype.Qi = function(t6) {
                  var i5;
                  this.netHeartBeatHandler && this.netHeartBeatHandler.stop(), null === (i5 = this.retryLinkHandler) || void 0 === i5 || i5.invalid(), this.zegoLink && this.zegoLink.destroySocket(_.DISCONNECT, t6);
                }, t5.prototype.zi = function() {
                  var t6 = this, i5 = (/* @__PURE__ */ new Date()).getTime(), n5 = function(n6, e5, r3) {
                    var s3, o3;
                    if (r3)
                      return t6.logger.info(Y + " fail " + JSON.stringify(r3)), void ((null === (o3 = t6.zegoLink.socketService) || void 0 === o3 ? void 0 : o3.type) === c.WebTransport && t6.stateCenter.networkState === f.online && (t6.logger.info(lt + " reason:" + F.GetConfigFailed + " error: get config error "), t6.stateCenter.enableHttp3 = false, qt(t6.zegoLink.linkServerStorageKey, t6.stateCenter.env, t6.stateCenter.appID, ((s3 = {})[t6.zegoLink.connectServer] = { status: false, time: Date.now() }, s3), true), t6._t(F.GetConfigFailed, "get config error")));
                    0 === n6.code ? (t6.logger.info(Y + " suc " + JSON.stringify(n6)), t6.nn(n6, i5)) : t6.logger.info(Y + " fail " + JSON.stringify(n6));
                  };
                  this.businessRequestMgr.getConfig(n5, n5);
                }, t5.prototype.nn = function(t6, i5) {
                  var n5, e5;
                  if (this.netHeartBeatHandler.init(t6), this.netAgentPCRequestMgr.setEstablishTimeout(t6.data.pc_establish_timeout), (null === (n5 = null == t6 ? void 0 : t6.data) || void 0 === n5 ? void 0 : n5.client_outer_ip) && (this.stateCenter.clientIP = t6.data.client_outer_ip, 0 === this.stateCenter.ipList.ipv4.length && 0 === this.stateCenter.ipList.ipv6.length && (this.stateCenter.clientIP && this.wi(this.stateCenter.clientIP), this.eventManager.emit("ipDetection", { ipList: this.stateCenter.ipList }))), null === (e5 = null == t6 ? void 0 : t6.data) || void 0 === e5 ? void 0 : e5.ntp_time) {
                    var r3 = t6.data.ntp_time, s3 = "number" == typeof r3 ? r3 : r3.toNumber(), o3 = (/* @__PURE__ */ new Date()).getTime();
                    0 === this.stateCenter.appInfo.env && this.stateCenter.updateNTP(i5, s3, o3);
                  }
                  this.eventManager.emit("clientInfo", { clientIP: this.clientIP, timeOffset: this.timeOffset, geofencingID: t6.data.geofencing_id });
                }, t5.prototype.Mi = function() {
                  var t6 = this;
                  return new Promise(function(i5, n5) {
                    t6.businessRequestMgr.dispatchURL(function(n6) {
                      var e5, r3 = n6.data, s3 = r3.wss_groups, o3 = r3.http3_groups, u3 = r3.wss_v6_groups, a2 = r3.http3_v6_groups;
                      t6.logger.info("".concat(et, " wss_groups: ").concat(JSON.stringify(s3), " http3_groups:").concat(JSON.stringify(o3), " wss_v6_groups:").concat(JSON.stringify(u3), " http3_v6_groups:").concat(JSON.stringify(a2)));
                      var c2 = s3.some(function(t7) {
                        return t7.host.includes("geo");
                      }), h2 = o3.some(function(t7) {
                        return t7.host.includes("geo");
                      }), f2 = null == u3 ? void 0 : u3.some(function(t7) {
                        return t7.host.includes("geo");
                      }), l2 = null == a2 ? void 0 : a2.some(function(t7) {
                        return t7.host.includes("geo");
                      }), d2 = null === (e5 = t6.appInfo) || void 0 === e5 ? void 0 : e5.geoFencing, v2 = d2 || c2 ? s3 : t6.en(s3), m2 = d2 || h2 ? o3 : t6.en(o3), p2 = d2 || f2 ? u3 : t6.en(u3), g2 = d2 || l2 ? a2 : t6.en(a2), b2 = t6.sn(v2), _2 = t6.sn(m2, "https"), y2 = t6.sn(p2), w2 = t6.sn(g2, "https");
                      i5({ servers: b2, http3Servers: _2, wssV6Servers: y2, http3V6Servers: w2, domains: v2, http3Domains: m2, wssV6Domains: p2, http3V6Domains: g2 });
                    }, function(t7) {
                      n5(t7);
                    });
                  });
                }, t5.prototype.Hi = function() {
                  var t6 = this;
                  return new Promise(function(i5, n5) {
                    t6.businessRequestMgr.getSvrAddr().then(function(e5) {
                      var r3 = e5.code, s3 = e5.msg, o3 = e5.data;
                      if (0 === r3) {
                        var u3 = o3.accesshub_domain, a2 = o3.logreport_domain, c2 = o3.detaillog_domain, h2 = o3.accesshub_v6_domain, f2 = o3.http3_v6_domain, l2 = o3.logreport_v6_domain, d2 = o3.detaillog_v6_domain, v2 = o3.geofencing_id;
                        t6.logger.info("".concat(nt, " domains: ").concat(u3, " ").concat(a2, " ").concat(c2, " ").concat(h2, " ").concat(f2, " ").concat(l2, " ").concat(d2)), i5({ accesshub_domain: u3, logreport_domain: a2, detaillog_domain: c2, geofencing_id: v2, accesshub_v6_domain: h2, http3_v6_domain: f2, logreport_v6_domain: l2, detaillog_v6_domain: d2 });
                      } else
                        n5({ code: r3, msg: s3 });
                    }).catch(function(t7) {
                      n5(t7);
                    });
                  });
                }, t5.prototype.sn = function(t6, i5) {
                  return void 0 === i5 && (i5 = Ot.scheme), Array.isArray(t6) && t6.length > 0 ? t6.map(function(t7) {
                    return i5 + "://" + t7.host + "/" + Ot.location;
                  }) : [];
                }, t5.prototype.en = function(t6) {
                  var i5 = wi([], t6, true);
                  return i5.filter(function(t7) {
                    return !!t7.host;
                  });
                }, t5.prototype.Fi = function(t6, i5, n5, e5, r3, s3) {
                  var o3 = this;
                  return new Promise(function(u3, a2) {
                    "string" == typeof i5 && "string" == typeof n5 ? o3.businessRequestMgr.getAppConfig(t6, i5, n5, e5, r3, s3).then(function(t7) {
                      u3(yi(yi({}, t7), { retryCount: o3.getAppConfigFailCount }));
                    }).catch(function(e6) {
                      if (o3.logger.error(Z + " " + JSON.stringify(e6)), T.indexOf(e6.code) > -1) {
                        var s4 = o3.getAppConfigFailCount;
                        return o3.getAppConfigFailCount = 0, void a2(yi(yi({}, e6), { retryCount: s4 }));
                      }
                      o3.getAppConfigFailCount++, (20008 === e6.code || 1100002 === e6.code) && o3.getAppConfigFailCount < 3 ? o3.Fi(t6, i5, n5, r3).then(function(t7) {
                        return u3(t7);
                      }).catch(function(t7) {
                        return a2(t7);
                      }) : (s4 = o3.getAppConfigFailCount, o3.getAppConfigFailCount = 0, a2(yi(yi({}, e6), { retryCount: s4 })));
                    }) : o3.logger.error(Z + " userID or token must be string");
                  });
                }, t5.prototype.ki = function(t6) {
                  var i5 = (/* @__PURE__ */ new Date()).getTime() - this.connectedTime;
                  this.connectid && this.eventManager.emit("disConnectedEvent", { duration: i5, server: this.zegoLink.connectServer, connectid: this.connectid, error: t6 });
                }, t5.prototype.Vi = function(t6) {
                  var i5 = t6.wss_groups, n5 = t6.http3_groups, e5 = t6.wss_v6_groups, r3 = t6.http3_v6_groups;
                  this.logger.info("".concat(X, " wss_groups: ").concat(JSON.stringify(i5), " http3_groups:").concat(JSON.stringify(n5), " wss_v6_groups:").concat(JSON.stringify(e5), " http3_v6_groups:").concat(JSON.stringify(r3)));
                  var s3 = this.sn(i5), o3 = this.sn(n5, "https"), u3 = this.sn(e5), a2 = this.sn(r3, "https");
                  s3 && Array.isArray(s3) && s3.length > 0 ? (this.Gi(1100010), this.stateCenter.specified && (this.logger.info(X + " specified"), s3 = this.specifiedServers), this.zegoLink.setServers(s3, o3, u3, a2), this.Ji(false, true)) : this.logger.warn(X + " wss_groups null");
                }, t5.prototype.Bi = function(t6) {
                  var i5 = this;
                  switch (this.logger.info(W + " ".concat(t6.reason, " ").concat(t6.msg, " ").concat(t6.action)), t6.action) {
                    case S.ACTION_DISPATCH:
                      var n5 = this.reportSeq++;
                      this.eventManager.emit("dispatchEvent", n5, "start"), this.Mi().then(function(e5) {
                        var r3 = e5.servers, s3 = e5.domains, o3 = e5.http3Servers, u3 = e5.http3Domains, a2 = e5.wssV6Servers, c2 = e5.http3V6Servers, h2 = e5.wssV6Domains, f2 = e5.http3V6Domains;
                        if (i5.eventManager.emit("dispatchEvent", n5, "end", { domains: s3.map(function(t7) {
                          return t7.host;
                        }), http3Domains: u3.map(function(t7) {
                          return t7.host;
                        }), wssV6Domains: h2.map(function(t7) {
                          return t7.host;
                        }), http3V6Domains: f2.map(function(t7) {
                          return t7.host;
                        }), reason: "ConnectClosed" }), Array.isArray(r3) && r3.length > 0) {
                          i5.eventManager.emit("dispatchResultUpdate", { servers: r3, http3Servers: o3, domains: s3.map(function(t7) {
                            return t7.host;
                          }), http3Domains: u3.map(function(t7) {
                            return t7.host;
                          }), wssV6Servers: a2, http3V6Servers: c2 });
                          var l2 = i5.stateCenter.specified ? i5.specifiedServers : r3;
                          i5.Gi(t6.reason), i5.zegoLink.setServers(l2, o3, a2, c2), i5.Ji(false, true);
                        }
                      }).catch(function(t7) {
                        i5.logger.info(W + " dispatch fail");
                      });
                      break;
                    case S.ACTION_IDLE:
                      20020 === t6.reason && (this.Gi(t6.reason), this.Ji(false));
                      break;
                    case S.ACTION_RETRY:
                      this.Gi(t6.reason), this.Ji(false);
                      break;
                    case S.ACTION_NEXT_GROUP:
                      this.netAgentPCRequestMgr.closePCs(t6.reason), this.eventManager.emit("broken", I.CLOSE), this.Ji();
                  }
                }, t5.prototype.Xi = function() {
                  this.retryLinkHandler && (this.zegoLink.isConnect() ? this.retryLinkHandler.stopMaxTime() : this.Wi(false, R.detail));
                }, t5.prototype.tn = function() {
                  this.Gi(1100003), this.retryLinkHandler && (this.retryLinkHandler.invalid(), this.retryLinkHandler.startMaxTime(), this.zegoLink.setState(0));
                }, t5.prototype.innerReconnect = function() {
                  this.logger.info($ + " call ".concat(!!this.retryLinkHandler)), this.isDestroy ? this.logger.info($ + " destroy") : this.retryLinkHandler && (this.retryLinkHandler.startMaxTime(), this.Ji());
                }, t5.prototype.Ji = function(t6, i5) {
                  var n5;
                  (null === (n5 = this.retryLinkHandler) || void 0 === n5 ? void 0 : n5.active(t6, i5)) && this.rn();
                }, t5.prototype.rn = function() {
                  if (0 === this.connectSeq) {
                    var t6 = this.reportSeq++;
                    this.connectSeq = t6, this.eventManager.emit("connectedEvent", t6, "start");
                  }
                }, t5.prototype.Ui = function(t6, i5) {
                  var n5, e5 = this;
                  this.connectedTime = (/* @__PURE__ */ new Date()).getTime(), function(t7, i6, n6, e6) {
                    return new (n6 || (n6 = Promise))(function(r3, s3) {
                      function o3(t8) {
                        try {
                          a2(e6.next(t8));
                        } catch (t9) {
                          s3(t9);
                        }
                      }
                      function u3(t8) {
                        try {
                          a2(e6.throw(t8));
                        } catch (t9) {
                          s3(t9);
                        }
                      }
                      function a2(t8) {
                        var i7;
                        t8.done ? r3(t8.value) : (i7 = t8.value, i7 instanceof n6 ? i7 : new n6(function(t9) {
                          t9(i7);
                        })).then(o3, u3);
                      }
                      a2((e6 = e6.apply(t7, i6 || [])).next());
                    });
                  }(void 0, void 0, void 0, function() {
                    var t7, i6, e6, r3, s3, o3;
                    return function(t8, i7) {
                      var n6, e7, r4, s4, o4 = { label: 0, sent: function() {
                        if (1 & r4[0])
                          throw r4[1];
                        return r4[1];
                      }, trys: [], ops: [] };
                      return s4 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s4[Symbol.iterator] = function() {
                        return this;
                      }), s4;
                      function u3(u4) {
                        return function(a2) {
                          return function(u5) {
                            if (n6)
                              throw new TypeError("Generator is already executing.");
                            for (; s4 && (s4 = 0, u5[0] && (o4 = 0)), o4; )
                              try {
                                if (n6 = 1, e7 && (r4 = 2 & u5[0] ? e7.return : u5[0] ? e7.throw || ((r4 = e7.return) && r4.call(e7), 0) : e7.next) && !(r4 = r4.call(e7, u5[1])).done)
                                  return r4;
                                switch (e7 = 0, r4 && (u5 = [2 & u5[0], r4.value]), u5[0]) {
                                  case 0:
                                  case 1:
                                    r4 = u5;
                                    break;
                                  case 4:
                                    return o4.label++, { value: u5[1], done: false };
                                  case 5:
                                    o4.label++, e7 = u5[1], u5 = [0];
                                    continue;
                                  case 7:
                                    u5 = o4.ops.pop(), o4.trys.pop();
                                    continue;
                                  default:
                                    if (!((r4 = (r4 = o4.trys).length > 0 && r4[r4.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                                      o4 = 0;
                                      continue;
                                    }
                                    if (3 === u5[0] && (!r4 || u5[1] > r4[0] && u5[1] < r4[3])) {
                                      o4.label = u5[1];
                                      break;
                                    }
                                    if (6 === u5[0] && o4.label < r4[1]) {
                                      o4.label = r4[1], r4 = u5;
                                      break;
                                    }
                                    if (r4 && o4.label < r4[2]) {
                                      o4.label = r4[2], o4.ops.push(u5);
                                      break;
                                    }
                                    r4[2] && o4.ops.pop(), o4.trys.pop();
                                    continue;
                                }
                                u5 = i7.call(t8, o4);
                              } catch (t9) {
                                u5 = [6, t9], e7 = 0;
                              } finally {
                                n6 = r4 = 0;
                              }
                            if (5 & u5[0])
                              throw u5[1];
                            return { value: u5[0] ? u5[1] : void 0, done: true };
                          }([u4, a2]);
                        };
                      }
                    }(this, function(u3) {
                      switch (u3.label) {
                        case 0:
                          t7 = "0123456789".split(""), i6 = [], n5 = t7.length, e6 = 0, u3.label = 1;
                        case 1:
                          return e6 < 16 ? [4, xt()] : [3, 4];
                        case 2:
                          r3 = u3.sent(), i6[e6] = t7[0 | r3 * n5], u3.label = 3;
                        case 3:
                          return e6++, [3, 1];
                        case 4:
                          return [3, 9];
                        case 5:
                          s3 = void 0, i6[8] = i6[13] = i6[18] = i6[23] = "-", i6[14] = "4", e6 = 0, u3.label = 6;
                        case 6:
                          return e6 < 36 ? i6[e6] ? [3, 8] : [4, xt()] : [3, 9];
                        case 7:
                          o3 = u3.sent(), s3 = 0 | 16 * o3, i6[e6] = t7[19 == e6 ? 3 & s3 | 8 : s3], u3.label = 8;
                        case 8:
                          return e6++, [3, 6];
                        case 9:
                          return [2, i6.join("")];
                      }
                    });
                  }).then(function(n6) {
                    e5.connectid = n6;
                    var r3 = Lt(t6[0]), s3 = Lt(e5.zegoLink.connectServer);
                    e5.eventManager.emit("connectedEvent", e5.connectSeq, "end", { first_connect_type: r3, connect_type: s3, count: t6.length, connectid: e5.connectid, server: e5.zegoLink.connectServer, error: i5 }), e5.connectSeq = 0;
                  });
                }, t5.prototype.Gi = function(t6, i5) {
                  void 0 === t6 && (t6 = 0), this.logger.info("zn.zca.dc.1 call"), this.netAgentPCRequestMgr.closePCs(t6, i5), this.zegoLink.closeSocket(), this.linkConnectState = 0, this.eventManager.emit("broken"), 2 === this.lastLinkConnectState && 0 === this.linkConnectState && this.ki(t6);
                }, t5.prototype.getNetworkTimeInfo = function() {
                  var t6 = Date.now() + this.stateCenter.timeOffset, i5 = Math.round(this.stateCenter.networkRTT / 2), n5 = this.stateCenter.ntpTimeInfo;
                  if (n5) {
                    var e5 = performance.now() - n5.performanceTime;
                    t6 = Math.round(n5.ntp + e5);
                  }
                  return { timestamp: t6, maxDeviation: i5 };
                }, t5.prototype.setHeartBeatMode = function(t6) {
                  var i5 = this.netHeartBeatHandler.mode;
                  i5 !== t6 && (this.logger.info("zn.shbm" + " change mode from ".concat(i5, " to ").concat(t6)), this.netHeartBeatHandler.mode = t6);
                }, t5.prototype.setLogLevel = function(t6) {
                  return this.logger.setLogLevel(t6);
                }, t5.prototype.getIpConnectRule = function() {
                  var t6, i5, n5 = [];
                  if (this.proxyCtrl)
                    n5.push(e4.IPv4);
                  else {
                    var r3 = 0 !== (null === (t6 = this.connectServers) || void 0 === t6 ? void 0 : t6.length), s3 = 0 !== (null === (i5 = this.wssV6Servers) || void 0 === i5 ? void 0 : i5.length);
                    switch (this.stateCenter.customConfig.ipStackMode) {
                      case 0:
                      default:
                        r3 && n5.push(e4.IPv4);
                        break;
                      case 1:
                        r3 && n5.push(e4.IPv4), s3 && n5.push(e4.IPv6);
                        break;
                      case 2:
                        s3 && n5.push(e4.IPv6), r3 && n5.push(e4.IPv4);
                    }
                    0 === n5.length && n5.push(e4.IPv4);
                  }
                  return n5;
                }, t5;
              }();
            })(), s2;
          })(), t2.exports = e2(n2(6994), n2(3788));
        }, 3052: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { AF: function() {
            return p;
          }, D2: function() {
            return f;
          }, GG: function() {
            return l;
          }, I2: function() {
            return e2;
          }, OQ: function() {
            return a;
          }, UV: function() {
            return c;
          }, XV: function() {
            return d;
          }, Xs: function() {
            return v;
          }, b$: function() {
            return s2;
          }, t0: function() {
            return h;
          }, t3: function() {
            return o2;
          }, zD: function() {
            return m;
          } });
          var e2, r2, s2 = "NORMAL";
          !function(t3) {
            t3[t3.SWITCH_ONE = 1] = "SWITCH_ONE", t3[t3.SWITCH_TWO = 2] = "SWITCH_TWO";
          }(e2 || (e2 = {})), function(t3) {
            t3[t3.ZegoGeoFenceTypeNone = 0] = "ZegoGeoFenceTypeNone", t3[t3.ZegoGeoFenceTypeInclude = 1] = "ZegoGeoFenceTypeInclude", t3[t3.ZegoGeoFenceTypeExclude = 2] = "ZegoGeoFenceTypeExclude";
          }(r2 || (r2 = {}));
          var o2, u2, a = { ROOM_SESSION_ID_ERR: 1000000152 };
          !function(t3) {
            t3[t3.TT_NONE = 0] = "TT_NONE", t3[t3.TT_PC = 1] = "TT_PC", t3[t3.TT_IOS = 2] = "TT_IOS", t3[t3.TT_ANDROID = 3] = "TT_ANDROID", t3[t3.TT_MAC = 4] = "TT_MAC", t3[t3.TT_LINUX = 5] = "TT_LINUX", t3[t3.TT_WEB = 6] = "TT_WEB", t3[t3.TT_MINIPROGRAM = 7] = "TT_MINIPROGRAM", t3[t3.TT_UNKNOWN = 32] = "TT_UNKNOWN";
          }(o2 || (o2 = {})), function(t3) {
            t3[t3.disconnected = 0] = "disconnected", t3[t3.connecting = 1] = "connecting", t3[t3.connected = 2] = "connected";
          }(u2 || (u2 = {}));
          var c, h, f, l;
          !function(t3) {
            t3[t3.logout = 0] = "logout", t3[t3.trylogin = 1] = "trylogin", t3[t3.login = 2] = "login";
          }(c || (c = {})), function(t3) {
            t3[t3.I = 0] = "I", t3[t3.H = 10] = "H", t3[t3.M = 100] = "M", t3[t3.L = 1e3] = "L";
          }(h || (h = {})), function(t3) {
            t3[t3.offline = 0] = "offline", t3[t3.online = 1] = "online";
          }(f || (f = {})), function(t3) {
            t3[t3.NT_NONE = 0] = "NT_NONE", t3[t3.NT_LINE = 1] = "NT_LINE", t3[t3.NT_WIFI = 2] = "NT_WIFI", t3[t3.NT_2G = 3] = "NT_2G", t3[t3.NT_3G = 4] = "NT_3G", t3[t3.NT_4G = 5] = "NT_4G", t3[t3.NT_UNKNOWN = 32] = "NT_UNKNOWN";
          }(l || (l = {}));
          var d = 3e3, v = 3e4, m = 1e5, p = { MESSAGE: "" };
        }, 3509: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { AudioMix: function() {
            return z;
          } });
          var e2 = "zc.pe.0", r2 = "zc.pe.1", s2 = "zc.aep", o2 = "zc.sev", u2 = "zc.sma.0", a = "zc.sma.1", c = "zc.mb", h = "zc.smb", f = "zc.p.0.pe.0", l = "zc.p.0.pe.1", d = "zc.p.0.re", v = "zc.p.0.se", m = "zc.p.0.sma.0", p = "zc.smav", g = "zc.p.0.mb", b = "zc.p.0.smav", _ = n2(8627), y = n2(5794), w = n2(6493), S = function() {
            function t3(t4, i3, n3, e3, r3) {
              this.an = t4, this.ac = i3, this.localStream = n3, this.destination = e3, this.rtcViewer = r3, this.audioBufferList = [], this.replace = false, this.effectEndedCallBack = null, this.effectEndedListener = null, this.startTimes = 0, this.startOffset = 0, this.pauseTimes = 0, this.resumeOffset = 0, this.paused = false, this.isMixAudio = false, this.isMixingBuffer = false, this.loop = false;
            }
            return t3.prototype.playEffect = function(t4, i3, n3, e3, r3) {
              var s3 = this;
              true !== this.isMixAudio ? this.audioBuffer ? (this.startOffset = t4 || 0, this.loop = i3 || false, this.replace = n3 || false, this.effectEndedCallBack = r3, this.mixEffect(this.audioBuffer, function() {
                s3.buffSource.loop = !!i3, t4 ? s3.buffSource.start(0, t4 / 1e3) : s3.buffSource.start(0), (0, w.HR)() && (0, y.r)(), s3.startTimes = Date.now(), s3.effectEndedListener = s3.effectEndedHandler.bind(s3), s3.buffSource.addEventListener("ended", s3.effectEndedListener), e3 && e3();
              })) : this.an.error("amu.pe.1 no audio buffer found") : this.an.warn("amu.pe.1 audio is mixing");
            }, t3.prototype.stopMixingBuffer = function() {
              return this.isMixingBuffer = false, this.stopMixingAudio();
            }, t3.prototype.playRealTimeEffect = function(t4) {
              var i3 = this;
              this.mixEffect(t4, function() {
                i3.buffSource && i3.buffSource.start(0), i3.buffSource && i3.buffSource.addEventListener("ended", function() {
                  i3.audioBufferList.shift(), i3.audioBufferList.length > 0 && i3.isMixAudio && i3.playRealTimeEffect(i3.audioBufferList[0]);
                });
              });
            }, t3.prototype.pauseEffect = function() {
              this.audioBufferList.length > 0 ? this.an.error("amu.pe.0 real time buffer can not be paused") : (this.stopMixingAudio(true), this.resumeOffset = (this.pauseTimes - this.startTimes + this.startOffset) % (1e3 * this.audioBuffer.duration), this.paused = true);
            }, t3.prototype.resumeEffect = function() {
              return this.audioBufferList.length > 0 ? (this.an.error("amu.pe.0 real time buffer can not be resume"), false) : (this.playEffect(this.resumeOffset, this.loop, this.replace, void 0, this.effectEndedCallBack), this.startOffset = this.resumeOffset, this.paused = false, true);
            }, t3.prototype.mixEffect = function(t4, i3) {
              this.localStream ? (this.gainNode = this.ac.createGain(), this.delayNode = this.ac.createDelay(1), this.delayNode.delayTime.value = 0, this.buffSource = this.ac.createBufferSource(), this.buffSource.buffer = t4, this.buffSource.connect(this.gainNode), this.gainNode.connect(this.ac.destination), this.replaceTrack() && i3()) : this.an.error("amu.me.0 localStream can not be found");
            }, t3.prototype.replaceTrack = function() {
              if (!this.destination)
                return false;
              this.gainNode.connect(this.delayNode), this.delayNode.connect(this.destination);
              var t4 = this.destination.stream.getAudioTracks()[0], i3 = this.localStream.getTracks();
              return this.micTrack = this.localStream.getAudioTracks()[0], this.micTrack !== t4 && (this.micTrack ? i3.includes(this.micTrack) && this.localStream.removeTrack(this.micTrack) : this.an.warn("amu.rt.0 origin track not fonud"), i3.includes(t4) || (this.localStream.addTrack(t4), this.rtcViewer && this.rtcViewer.setAudio(t4))), this.isMixAudio = true, true;
            }, t3.prototype.effectEndedHandler = function() {
              this.stopMixingAudio(), this.effectEndedCallBack && this.effectEndedCallBack(), this.effectEndedCallBack = null;
            }, t3.prototype.stopMixingAudio = function(t4) {
              return void 0 === t4 && (t4 = false), this.paused ? (this.an.info("amu.sma.1 audioEffect is paused"), !t4 && this.effectEndedListener && (this.effectEndedCallBack && this.effectEndedCallBack(), this.effectEndedCallBack = null), true) : this.isMixAudio ? this.localStream ? (this.buffSource && (this.buffSource.removeEventListener("ended", this.effectEndedListener), this.buffSource.stop(), this.pauseTimes = Date.now(), this.buffSource.disconnect(this.gainNode), this.buffSource = null), this.gainNode.disconnect(), this.delayNode.disconnect(), this.isMixAudio = false, this.audioBufferList = [], !t4 && this.effectEndedListener && (this.effectEndedCallBack && this.effectEndedCallBack(), this.effectEndedCallBack = null), true) : (this.an.error("amu.sma.1 localStream can not be found"), false) : (this.an.warn("amu.sma.1 no mixing audio found"), true);
            }, t3.prototype.getProcess = function() {
              var t4 = Date.now();
              return this.paused && (t4 = this.pauseTimes), (t4 - this.startTimes + this.startOffset) % (1e3 * this.audioBuffer.duration);
            }, t3.prototype.seekTo = function(t4) {
              void 0 === t4 && (t4 = 0), this.startOffset = t4, this.paused ? this.resumeOffset = t4 : (this.stopMixingAudio(true), this.playEffect(t4, this.loop, this.replace, void 0, this.effectEndedCallBack));
            }, t3.prototype.mixingBuffer = function(t4, i3) {
              var n3 = this;
              true !== this.isMixAudio || 0 != this.audioBufferList.length || 0 != this.isMixingBuffer ? (this.ac.resume(), this.ac.decodeAudioData(t4, function(t5) {
                n3.audioBufferList.push(t5), 1 == n3.audioBufferList.length && n3.playRealTimeEffect(n3.audioBufferList[0]), n3.isMixingBuffer = true, i3 && i3();
              }, function(t5) {
                n3.an.error("amu.mb.0 " + t5), i3 && i3({ code: _.S6t.code, message: _.S6t.message + " " + t5 });
              })) : this.an.error("amu.mb.0 audio is mixing");
            }, t3.prototype.setMixingAudioVolume = function(t4) {
              return this.gainNode ? (console.error("ktv setVolume", t4), this.gainNode.gain.value = t4, true) : (this.an.error("amu.sma.2 no mixing audio found"), false);
            }, t3.prototype.setDelay = function(t4) {
              return this.delayNode ? (this.an.info("amu.sma.2 set delay: " + t4), this.delayNode.delayTime.value = t4, true) : (this.an.warn("amu.sma.2 no mixing audio found"), false);
            }, t3;
          }(), E = function() {
            function t3(t4, i3, n3, e3, r3, s3, o3) {
              void 0 === o3 && (o3 = 1);
              var u3 = this;
              this.an = t4, this.acMgr = i3, this.localStream = n3, this.browser = e3, this.destination = r3, this.rtcViewer = s3, this.volumeFactor = o3, this.isMixAudio = false, this.maxDelay = 1, this.audioCurrentTimer = null, this.audioResumedTimer = null, this.audioEl = null, this.eventHandler = { volumechange: function(t5) {
                var i4 = t5.target;
                i4 && u3.audioNode && u3.isMediaElSrc && (i4.muted || i4.paused ? (u3.an.info("amu.sma.0 ".concat(u3.id, " ").concat(null == t5 ? void 0 : t5.type, ": audio muted disconnect")), u3.audioNode.disconnect()) : (u3.an.info("amu.sma.0 ".concat(u3.id, " ").concat(null == t5 ? void 0 : t5.type, ": audio is connected")), u3.audioNode.connect(u3.gainNode)));
              }, canplay: function(t5) {
                var i4 = t5.target;
                i4 && !u3.isMediaElSrc && u3.isMixAudio && (u3.an.info("amu.sma.1 ".concat(u3.id, " ").concat(i4.id, " canplay, remixing audio")), u3.stopMixingAudio(), u3.startMixingAudio(i4));
              } }, this.isMediaElSrc = false, this.volume = 1, this.delay = 0, this.id = Date.now() % 1e5 + Math.floor(10 * Math.random()), t4.info("amu.sma.0 ".concat(this.id, " init audio mix"));
            }
            return Object.defineProperty(t3.prototype, "ac", { get: function() {
              return this.acMgr.ac;
            }, enumerable: false, configurable: true }), t3.prototype.startMixingAudio = function(t4) {
              if (this.isMixAudio)
                return this.an.error("amu.sma.0 audio is mixing"), false;
              if (!this.localStream)
                return this.an.error("amu.sma.0 localStream can not be found"), false;
              var i3;
              t4.captureStream = t4.captureStream || t4.mozCaptureStream || t4.webkitCaptureStream, this.isMixAudio = true, this.gainNode || (this.gainNode = this.ac.createGain(), this.setMixingAudioVolume()), this.delayNode || (this.delayNode = this.ac.createDelay(this.maxDelay), this.an.info("amu.sma.1 ".concat(this.id, " init set delay: ") + this.delay), this.delayNode.delayTime.value = this.delay);
              var n3 = "safari" === this.browser;
              this.isMediaElSrc = true;
              try {
                var e3 = this.acMgr.getMediaElementRenderer(t4);
                if (!e3)
                  return false;
                this.audioNode = e3.getMixNode().mixOutputNode, this.audioEl = t4;
              } catch (t5) {
                i3 = t5;
              }
              t4.addEventListener("volumechange", this.eventHandler.volumechange), t4.addEventListener("pause", this.eventHandler.volumechange), t4.addEventListener("play", this.eventHandler.volumechange);
              var r3 = this.getBrowserInfo(), s3 = false;
              return n3 && "10.15.6" === (null == r3 ? void 0 : r3.sysVer) && "13.1.2" === (null == r3 ? void 0 : r3.ver) && (s3 = true), s3 && (this.audioResumedTimer = setInterval(function() {
                t4.currentTime = t4.currentTime + 0.45;
              }, 6e3)), i3 ? (this.an.info("amu.sma.1 ".concat(this.id, " create source failed: ") + i3), true) : (this.audioNode && (this.audioNode.connect(this.gainNode), this.an.info("amu.sma.1 ".concat(this.id, " mix audio success."))), this.replaceTrack());
            }, t3.prototype.getBrowserInfo = function() {
              var t4, i3 = {}, n3 = (0, w.$t)().toLowerCase();
              t4 = (n3.match(/x [\d._]+/gi) + "").replace(/[^0-9|_.]/gi, "").replace(/_/gi, "."), i3.sysVer = t4;
              var e3 = n3.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);
              return e3 && (i3.browser = e3[1].replace(/version/, "'safari"), i3.ver = e3[2]), i3;
            }, t3.prototype.replaceTrack = function() {
              if (!this.destination)
                return false;
              this.gainNode.connect(this.delayNode), this.delayNode.connect(this.destination);
              var t4 = this.destination.stream.getAudioTracks()[0], i3 = this.localStream.getTracks();
              return this.micTrack = this.localStream.getAudioTracks()[0], this.micTrack !== t4 && (this.micTrack ? i3.includes(this.micTrack) && this.localStream.removeTrack(this.micTrack) : this.an.warn("amu.rt.1 origin track not fonud"), i3.includes(t4) || (this.localStream.addTrack(t4), this.rtcViewer && this.rtcViewer.setAudio(t4))), true;
            }, t3.prototype.stopMixingAudio = function() {
              return this.isMixAudio ? this.localStream ? (this.audioEl && (this.audioEl.removeEventListener("volumechange", this.eventHandler.volumechange), this.audioEl.removeEventListener("pause", this.eventHandler.volumechange), this.audioEl.removeEventListener("play", this.eventHandler.volumechange), this.audioEl.removeEventListener("canplay", this.eventHandler.canplay), this.audioEl = null), this.audioNode && (this.audioNode.disconnect(), this.audioNode = null, this.audioCurrentTimer && (clearInterval(this.audioCurrentTimer), this.audioCurrentTimer = null), this.audioResumedTimer && (clearInterval(this.audioResumedTimer), this.audioResumedTimer = null)), this.gainNode.disconnect(), this.delayNode.disconnect(), this.isMixAudio = false, this.an.info("amu.sma.1 ".concat(this.id, " stop mix audio success.")), true) : (this.an.error("amu.sma.1 localStream can not be found"), false) : (this.an.warn("amu.sma.1 no mixing audio found"), true);
            }, t3.prototype.setMixingAudioVolume = function(t4, i3) {
              if (void 0 === t4 ? t4 = this.volume : this.volume = t4, void 0 === i3 ? i3 = this.volumeFactor : this.volumeFactor = i3, !this.gainNode)
                return this.an.error("amu.sma.2 no mixing audio found"), false;
              var n3 = t4 * this.volumeFactor;
              return this.an.info("amu.sma.2 " + this.id + " set volume: " + n3), this.gainNode.gain.value = n3, true;
            }, t3.prototype.setDelay = function(t4) {
              return this.delayNode ? (t4 /= 1e3, !isNaN(t4) && (t4 > this.maxDelay && (t4 = this.maxDelay), t4 < 0 && (t4 = 0), this.an.info("amu.sma.1 ".concat(this.id, " set delay: ") + t4), this.delayNode.delayTime.value = t4, this.delay = t4, true)) : (this.an.warn("amu.sma.1 no mixing audio found"), false);
            }, t3;
          }(), k = n2(4872), O = function() {
            function t3(t4) {
              this.mn = t4, this.audioDestNode = void 0, this._audioMixList = [], this._arrayBufferMap = {}, this._effectList = [], this.volumeFactor = 1;
            }
            return Object.defineProperty(t3.prototype, "delay", { get: function() {
              return this.pn.engineConfig.mixingAudioDelay + this.pn.engineConfig.baseMixingAudioDelay;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "an", { get: function() {
              return this.mn.logger;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "_localStream", { get: function() {
              return this.mn.localStream;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "gn", { get: function() {
              return this.mn.streamCenter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "pn", { get: function() {
              return this.mn.stateCenter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "ac", { get: function() {
              return this.acMgr.ac;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "acMgr", { get: function() {
              return this.mn.acMgr;
            }, enumerable: false, configurable: true }), t3.prototype.startMixingAudio = function(t4) {
              var i3 = this;
              if (this.an.info(m + " call"), !this._localStream)
                return this.an.error(m + " localStream not found"), false;
              var n3 = true;
              return t4.forEach(function(t5) {
                if (i3._audioMixList.find(function(i4) {
                  return i4.media == t5;
                }))
                  i3.an.warn(m + " mix audio already exist");
                else if (i3._localStream) {
                  i3.gn.soundLevelDelegate && i3.mn.stopSoundLevel();
                  var e3 = i3.createDestNode(), r3 = new E(i3.an, i3.acMgr, i3._localStream, i3.pn.browser, e3, i3.mn.rtcViewer, i3.volumeFactor);
                  i3._audioMixList.push({ audioMix: r3, media: t5 }), r3.startMixingAudio(t5) || (n3 = false), r3.setDelay(i3.delay), i3.gn.soundLevelDelegate && i3.mn.startSoundLevel();
                }
              }), n3;
            }, t3.prototype.stopMixingAudio = function(t4) {
              var i3 = this;
              return this.an.info("zc.p.0.sma.1 call"), t4 ? t4.forEach(function(t5) {
                for (var n3 = 0; n3 < i3._audioMixList.length; n3++)
                  if (i3._audioMixList[n3].media == t5) {
                    i3._audioMixList[n3].audioMix.stopMixingAudio() && i3._audioMixList.splice(n3--, 1);
                    break;
                  }
              }) : (this._audioMixList.forEach(function(t5) {
                return t5.audioMix.stopMixingAudio();
              }), this._audioMixList = []), true;
            }, t3.prototype.setVolumeFactor = function(t4) {
              this.an.info(b + " set factor: " + t4), isNaN(t4) && this.an.error(b + " set factor failed"), this.volumeFactor = t4, this._audioMixList.forEach(function(i3) {
                i3.audioMix.setMixingAudioVolume(void 0, t4);
              });
            }, t3.prototype.setMixingAudioVolume = function(t4, i3) {
              this.an.info(b + " call");
              var n3 = this._audioMixList.find(function(t5) {
                return t5.media === i3;
              });
              return n3 ? (n3.audioMix.setMixingAudioVolume(t4), this.an.info(b + " call success"), true) : (this.an.error(b + " audio is not mixing"), false);
            }, t3.prototype.playEffect = function(t4, i3, n3, e3) {
              var r3 = this;
              if (this.an.info(f + " call"), this._localStream)
                if (this._effectList.find(function(n4) {
                  return n4.effectID == t4.effectID && n4.audioBuffer == i3;
                }))
                  this.an.warn(f + " effect already exist ");
                else {
                  this.gn.soundLevelDelegate && this.mn.stopSoundLevel();
                  var s3 = this.createDestNode(), o3 = new S(this.an, this.ac, this._localStream, s3, this.mn.rtcViewer);
                  o3.audioBuffer = i3;
                  var u3 = { processor: o3, effectID: t4.effectID, audioBuffer: i3 };
                  this._effectList.push(u3);
                  o3.playEffect(t4.playTime, t4.loop, false, function() {
                    n3 && n3();
                  }, function() {
                    for (var t5 = [], i4 = 0; i4 < arguments.length; i4++)
                      t5[i4] = arguments[i4];
                    r3._effectList = r3._effectList.filter(function(t6) {
                      return t6 !== u3;
                    }), e3 && e3.apply(void 0, t5);
                  }), this.gn.soundLevelDelegate && this.mn.startSoundLevel(), this.an.info(f + " play effect " + t4.effectID + " success");
                }
              else
                this.an.warn(f + " stream not found");
            }, t3.prototype.pauseEffect = function(t4) {
              var i3 = this._effectList.find(function(i4) {
                return i4.effectID == t4;
              });
              if (i3)
                this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), i3.processor.pauseEffect(), this.gn.soundLevelDelegate && this.mn.startSoundLevel(), this.an.info(l + " pause " + t4 + " success");
              else {
                if (!(0, k.TE)(t4))
                  return this.an.error(l + " effect not found"), false;
                this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), this._effectList.forEach(function(t5) {
                  return t5.processor.pauseEffect();
                }), this.gn.soundLevelDelegate && this.mn.startSoundLevel();
              }
              return true;
            }, t3.prototype.resumeEffect = function(t4) {
              var i3 = this._effectList.find(function(i4) {
                return i4.effectID == t4;
              });
              if (i3) {
                this.gn.soundLevelDelegate && this.mn.stopSoundLevel();
                var n3 = i3.processor.resumeEffect();
                return this.gn.soundLevelDelegate && this.mn.startSoundLevel(), this.an.info(d + " resume " + t4 + " success"), n3;
              }
              return (0, k.TE)(t4) ? (this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), this._effectList.forEach(function(t5) {
                return t5.processor.resumeEffect();
              }), this.gn.soundLevelDelegate && this.mn.startSoundLevel(), true) : (this.an.error(d + " no effect found"), false);
            }, t3.prototype.stopEffect = function(t4) {
              var i3 = this._effectList.find(function(i4) {
                return i4.effectID == t4;
              });
              if (i3)
                this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), i3.processor.stopMixingAudio(), this._effectList = this._effectList.filter(function(t5) {
                  return t5 !== i3;
                }), this.gn.soundLevelDelegate && this.mn.startSoundLevel(), this.an.info(v + " pause " + t4 + " success");
              else {
                if (!(0, k.TE)(t4))
                  return this.an.error(v + " effect not found"), false;
                this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), this._effectList.forEach(function(t5) {
                  return t5.processor.stopMixingAudio();
                }), this._effectList = [], this.gn.soundLevelDelegate && this.mn.startSoundLevel();
              }
              return true;
            }, t3.prototype.setEffectVolume = function(t4, i3, n3) {
              var e3 = this._effectList.find(function(t5) {
                return t5.effectID == i3;
              });
              if (e3)
                e3.processor.setMixingAudioVolume(t4), e3.processor.setDelay(n3 || 1e-7), this.an.info("zp.sev.0 set volume " + i3 + " success");
              else {
                if (!(0, k.TE)(i3))
                  return this.an.error("zp.sev.0 effect not found"), false;
                this._effectList.forEach(function(i4) {
                  return i4.processor.setMixingAudioVolume(t4);
                });
              }
              return true;
            }, t3.prototype.mixingBuffer = function(t4, i3, n3) {
              var e3 = this;
              if (this.an.info(g + " call"), this._localStream)
                if (this._arrayBufferMap[t4])
                  this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), this._arrayBufferMap[t4].mixingBuffer(i3, function() {
                    e3.gn.soundLevelDelegate && e3.mn.startSoundLevel(), n3 && n3();
                  });
                else {
                  this.gn.soundLevelDelegate && this.mn.stopSoundLevel();
                  var r3 = this.createDestNode(), s3 = new S(this.an, this.ac, this._localStream, r3, this.mn.rtcViewer);
                  this._arrayBufferMap[t4] = s3, s3.mixingBuffer(i3, function() {
                    e3.gn.soundLevelDelegate && e3.mn.startSoundLevel(), n3 && n3();
                  });
                }
            }, t3.prototype.stopMixingBuffer = function(t4) {
              if (t4 && this._arrayBufferMap[t4])
                return this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), this._arrayBufferMap[t4].stopMixingBuffer(), delete this._arrayBufferMap[t4], this.gn.soundLevelDelegate && this.mn.startSoundLevel(), true;
              if ((0, k.TE)(t4)) {
                for (var i3 in this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), this._arrayBufferMap)
                  this._arrayBufferMap[i3].stopMixingBuffer();
                return this.gn.soundLevelDelegate && this.mn.startSoundLevel(), true;
              }
              return this.an.warn(g + " arrayBuffer no found"), false;
            }, t3.prototype.getEffectProgress = function(t4) {
              var i3 = this._effectList.find(function(i4) {
                return i4.effectID == t4;
              });
              return i3 ? i3.processor.getProcess() : (this.an.error(s2 + "  effect not found"), 0);
            }, t3.prototype.seekAudioEffect = function(t4, i3) {
              var n3 = this._effectList.find(function(i4) {
                return i4.effectID == t4;
              });
              return n3 ? (this.gn.soundLevelDelegate && this.mn.stopSoundLevel(), n3.processor.seekTo(i3), this.gn.soundLevelDelegate && this.mn.startSoundLevel(), true) : (this.an.error(s2 + " effect not found"), false);
            }, t3.prototype.stopAudioManager = function() {
              this.stopMixingAudio(), this.stopMixingBuffer(), this.stopEffect();
            }, t3.prototype.createDestNode = function() {
              var t4 = null, i3 = this.mn.createDestNode(this._localStream);
              return this.mn.audioNodeQueue || ((t4 = this.mn.createSrcNode()).disconnect(), t4.connect(i3)), i3;
            }, t3.prototype.setMixingDelay = function(t4) {
              this._audioMixList.forEach(function(i3) {
                i3.audioMix.setDelay(t4);
              });
            }, t3;
          }(), I = n2(8866), R = n2(327), T = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, C = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, A = function() {
            function t3(t4, i3, n3, e3, r3, s3) {
              var o3 = this;
              this.an = t4, this.dataReport = i3, this.pn = n3, this.gn = e3, this.ac = r3, this.rtcModules = s3, this.buffer = null, this.blank = null, this.mixingDelay = 0, (0, w.nr)() && null == this.blank && null == this.buffer && (this.buffer = this.ac.createBuffer(1, 1, this.ac.sampleRate), this.blank = this.ac.createBufferSource(), this.blank.buffer = this.buffer, this.blank.connect(this.ac.destination), this.blank.start()), this.rtcModules.bindListener("_engineConfigUpdate", function(t5) {
                var i4 = t5.mixingAudioDelay + t5.baseMixingAudioDelay;
                isNaN(i4) || i4 === o3.mixingDelay || (o3.an.info("zc.am.mdu delay update:" + i4 + ", origin:" + o3.mixingDelay), o3.mixingDelay = i4, o3.gn.previewStreamList.forEach(function(t6) {
                  t6.audioMixManager && t6.audioMixManager.setMixingDelay(i4);
                }));
              });
            }
            return t3.prototype.preloadEffect = function(t4, i3, n3) {
              if (this.checkPreviewer(e2, { effectID: t4 }, { effectID: true }))
                if (i3 && (0, k.QP)(i3)) {
                  if (this.pn.audioEffectBuffer[t4])
                    return this.an.warn(e2 + " audio buffer already exists"), void (n3 && n3());
                  this.an.info(e2 + " start preload effect"), this._preloadEffect(this.ac, t4, i3, n3);
                } else
                  this.an.error(e2 + " params error");
            }, t3.prototype.checkPreviewer = function(t4, i3, n3) {
              void 0 === i3 && (i3 = {});
              var e3 = !!(null == n3 ? void 0 : n3.effectID), r3 = !!(null == n3 ? void 0 : n3.streamID), s3 = !!(null == n3 ? void 0 : n3.previewer), o3 = i3.effectID, u3 = i3.streamID, a2 = u3 && ((0, k.QP)(u3) ? u3 : (0, R.L)(u3, this.an));
              if ((r3 || a2) && !(0, k.QP)(a2) && !(0, k.dr)(a2))
                return this.an.error(t4 + " stream type error"), false;
              if (e3 && !o3)
                return this.an.error(t4 + " effectID required"), false;
              if (o3 && !(0, k.QP)(o3))
                return this.an.error(t4 + " effectID type error"), false;
              if (s3) {
                var c2 = this.gn.getPreviewer(a2);
                return c2 || ((0, k.QP)(a2) ? this.an.error(t4 + " stream is not publishing", { streamid: a2 }) : this.an.error(t4 + " stream doesn't exist"), false);
              }
              return true;
            }, t3.prototype.getEffectDuration = function(t4) {
              if (!this.checkPreviewer(s2, { effectID: t4 }, { effectID: true }))
                return 0;
              var i3 = this.pn.audioEffectBuffer[t4];
              return i3 ? i3.duration ? Math.floor(1e3 * i3.duration) : 0 : (this.an.error(s2 + " effect not found"), 0);
            }, t3.prototype.getEffectProgress = function(t4, i3) {
              var n3 = this.checkPreviewer(s2, { streamID: t4, effectID: i3 }, { effectID: true, streamID: true, previewer: true });
              return (0, k.dd)(n3) ? 0 : this.getAudioManager(n3).getEffectProgress(i3);
            }, t3.prototype.seekAudioEffect = function(t4, i3, n3) {
              if (n3 < 0)
                return this.an.error(s2 + " param time error "), false;
              var e3 = this.checkPreviewer(s2, { streamID: t4, effectID: i3 }, { effectID: true, streamID: true, previewer: true });
              return !(0, k.dd)(e3) && this.getAudioManager(e3).seekAudioEffect(i3, n3);
            }, t3.prototype.playEffect = function(t4, i3, n3) {
              return T(this, void 0, void 0, function() {
                var e3, s3, o3, u3, a2 = this;
                return C(this, function(c2) {
                  switch (c2.label) {
                    case 0:
                      return e3 = (0, R.L)(t4.stream, this.an) || t4.streamID, s3 = t4.path, this.checkPreviewer(r2, { streamID: e3, effectID: o3 = t4.effectID }, { streamID: true, effectID: true }) ? (u3 = this.pn.audioEffectBuffer[o3], s3 ? u3 ? (this.an.warn(r2 + " audio effect already exists"), [3, 3]) : [3, 1] : [3, 4]) : [2];
                    case 1:
                      return [4, new I.l3(function(t5, i4) {
                        a2.preloadEffect(o3, s3, function(n4) {
                          n4 ? (a2.an.error(r2 + " preload audio effect failed"), i4(n4)) : t5(void 0);
                        });
                      })];
                    case 2:
                      c2.sent(), c2.label = 3;
                    case 3:
                      return [3, 5];
                    case 4:
                      if (!u3)
                        return this.an.error(r2 + " audio effect doesn't exists"), [2];
                      c2.label = 5;
                    case 5:
                      return this._playEffect(t4, i3, n3), [2];
                  }
                });
              });
            }, t3.prototype.pauseEffect = function(t4, i3) {
              var n3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              return this._pauseEffect(n3, i3);
            }, t3.prototype.resumeEffect = function(t4, i3) {
              var n3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              return this._resumeEffect(n3, i3);
            }, t3.prototype.stopEffect = function(t4, i3) {
              var n3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              return this._stopEffect(n3, i3);
            }, t3.prototype.unloadEffect = function(t4) {
              return !!this.checkPreviewer("zc.ue", { effectID: t4 }, { effectID: true }) && (delete this.pn.audioEffectBuffer[t4], true);
            }, t3.prototype.setEffectVolume = function(t4, i3, n3, e3) {
              if (!(0, k.Cs)(i3) || i3 < 0 || i3 > 200)
                return this.an.error(o2 + " volume must be a number between 0 and 200"), false;
              var r3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an), s3 = this.checkPreviewer(o2, { streamID: r3, effectID: n3 }, { streamID: true, previewer: true });
              return !(0, k.dd)(s3) && this.getAudioManager(s3).setEffectVolume(i3 / 100, n3, e3);
            }, t3.prototype.startMixingAudio = function(t4, i3) {
              var n3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              return this.an.info(u2 + " call " + n3), n3 ? i3 ? (this.an.info(u2 + " end " + n3), Array.isArray(i3) && 0 !== i3.length && i3.every(function(t5) {
                return (0, k.Si)(t5);
              }) ? this.bn(n3, i3) : (this.an.error(u2 + " audio list param type error"), false)) : (this.an.error(u2 + " no audio"), false) : (this.an.error(u2 + " stream not found"), false);
            }, t3.prototype.stopMixingAudio = function(t4, i3) {
              var n3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              return n3 ? Array.isArray(i3) && 0 !== i3.length || (0, k.TE)(i3) ? this._stopMixingAudio(n3, i3) : (this.an.error(a + " audio param type error"), false) : (this.an.error(a + " stream not found"), false);
            }, t3.prototype.mixingBuffer = function(t4, i3, n3, e3) {
              var r3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              this.an.info(c + " call streamID: " + JSON.stringify(r3) + " sourceID:" + i3), r3 ? i3 && (0, k.QP)(i3) ? (this._mixingBuffer(r3, i3, n3, e3), this.an.info(c + " end")) : this.an.error(c + " param source id format error") : this.an.error(c + " param streamid format error");
            }, t3.prototype.stopMixingBuffer = function(t4, i3) {
              var n3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              return this._stopMixingBuffer(n3, i3);
            }, t3.prototype.setMixingAudioVolume = function(t4, i3, n3) {
              if (this.an.info(p + " call"), !t4)
                return this.an.error(p + " stream not found"), false;
              if (!(0, k.Cs)(i3) || i3 < 0 || i3 > 200)
                return this.an.error(p + " volume must be a number between 0 and 200"), false;
              if (!n3 || !(0, k.Si)(n3))
                return this.an.error(p + " no audio"), false;
              var e3 = (0, k.QP)(t4) ? t4 : (0, R.L)(t4, this.an);
              return this._setMixingAudioVolume(e3, i3, n3);
            }, t3.prototype.getSoundLevel = function(t4, i3, n3) {
              var e3 = "zc.gsl";
              (0, I.rA)(this.an, e3);
              var r3 = this.gn.getCloudSoundInterval();
              try {
                var s3 = this.gn.createSoundLevel(this.ac, t4, this.gn.soundLevelInterval, r3, function(t5) {
                  i3(t5);
                });
                this.pn.audioStreamList[t4.id] = { mic: s3.mic, script: s3.soundMeter };
              } catch (t5) {
                n3(t5);
              }
              (0, I.EK)(this.an, e3);
            }, t3.prototype.stopSoundLevel = function(t4) {
              this.an.info("zc.ssl call");
              var i3 = this.pn.audioStreamList[t4.id];
              i3.mic.disconnect(), i3.script.destroy(), delete this.pn.audioStreamList[t4.id];
            }, t3.prototype._preloadEffect = function(t4, i3, n3, e3) {
              var r3 = this, s3 = new XMLHttpRequest();
              s3.open("GET", n3, true), s3.setRequestHeader("Range", "none"), s3.responseType = "arraybuffer", s3.onload = function() {
                if (200 == s3.status || 304 == s3.status) {
                  t4.decodeAudioData(s3.response, function(t5) {
                    r3.an.info("zc.pe.0 effect '".concat(i3, "' preload success")), r3.pn.audioEffectBuffer[i3] = t5, e3 && e3();
                  }, function(t5) {
                    r3.an.error("zc.pe.0 effect '".concat(i3, "' preload fail. ") + t5), e3 && e3(t5);
                  });
                } else {
                  var n4 = s3.statusText;
                  r3.an.error("zc.pe.0 effect '".concat(i3, "' preload fail.") + n4), e3 && e3(n4);
                }
              }, s3.send();
            }, t3.prototype._playEffect = function(t4, i3, n3) {
              var e3 = (0, R.L)(t4.stream, this.an) || t4.streamID, s3 = this.pn.audioEffectBuffer[t4.effectID];
              if (s3) {
                var o3 = this.checkPreviewer(r2, { streamID: e3, effectID: t4.effectID }, { streamID: true, effectID: true, previewer: true });
                (0, k.dd)(o3) || this.getAudioManager(o3).playEffect(t4, s3, i3, n3);
              } else
                this.an.error(r2 + " no audio buffer found");
            }, t3.prototype._pauseEffect = function(t4, i3) {
              var n3 = this.checkPreviewer("zc.pe.2", { streamID: t4, effectID: i3 }, { streamID: true, previewer: true });
              return !(0, k.dd)(n3) && this.getAudioManager(n3).pauseEffect(i3);
            }, t3.prototype._resumeEffect = function(t4, i3) {
              var n3 = this.checkPreviewer("zc.re", { streamID: t4, effectID: i3 }, { streamID: true, previewer: true });
              return !(0, k.dd)(n3) && this.getAudioManager(n3).resumeEffect(i3);
            }, t3.prototype._stopEffect = function(t4, i3) {
              var n3 = this.checkPreviewer("zc.se", { streamID: t4, effectID: i3 }, { streamID: true, previewer: true });
              return !(0, k.dd)(n3) && this.getAudioManager(n3).stopEffect(i3);
            }, t3.prototype._setMixingAudioVolume = function(t4, i3, n3) {
              var e3 = this.gn.getPreviewer(t4);
              return e3 ? this.getAudioManager(e3).setMixingAudioVolume(i3 / 100, n3) : (this.an.error("zc.sma.2 publisher doesn't exist"), false);
            }, t3.prototype.bn = function(t4, i3) {
              var n3 = this.gn.getPreviewer(t4);
              return n3 ? this.getAudioManager(n3).startMixingAudio(i3) : ((0, k.QP)(t4) ? this.an.error("zc.sma.0 " + t4 + " stream is not publishing") : this.an.error("zc.sma.0 stream doesn't exist"), false);
            }, t3.prototype._stopMixingAudio = function(t4, i3) {
              var n3 = this.gn.getPreviewer(t4);
              return n3 ? this.getAudioManager(n3).stopMixingAudio(i3) : (this.an.error("zc.sma.0 stream doesn't exist"), false);
            }, t3.prototype._mixingBuffer = function(t4, i3, n3, e3) {
              var r3 = this.checkPreviewer(h, { streamID: t4, effectID: i3 }, { effectID: true, streamID: true, previewer: true });
              (0, k.dd)(r3) || ((0, k.SY)(n3) ? this.getAudioManager(r3).mixingBuffer(i3, n3, e3) : this.an.error("zc.mb.0 array buffer not found"));
            }, t3.prototype._stopMixingBuffer = function(t4, i3) {
              var n3 = this.checkPreviewer(h, { streamID: t4, effectID: i3 }, { effectID: true, streamID: true, previewer: true });
              return !(0, k.dd)(n3) && this.getAudioManager(n3).stopMixingBuffer(i3);
            }, t3.prototype.getAudioManager = function(t4) {
              var i3 = t4.audioMixManager;
              return i3 || (i3 = new O(t4), 1 === this.pn.engineConfig.choirRole && i3.setVolumeFactor(0.6), t4.audioMixManager = i3), i3;
            }, t3;
          }(), z = { type: "AudioMix", install: function(t3) {
            Object.defineProperty(t3.prototype, "initAudioMix", { value: function() {
              this.audioMixModule = new A(this.logger, this.dataReport, this.stateCenter, this.streamCenter, this.ac, this);
            } });
          } };
        }, 3788: function(t2) {
          "use strict";
          t2.exports = i;
        }, 4636: function(t2, i2, n2) {
          var e2;
          t2.exports = (e2 = n2(9021), function(t3) {
            var i3 = e2, n3 = i3.lib, r2 = n3.WordArray, s2 = n3.Hasher, o2 = i3.algo, u2 = [];
            !function() {
              for (var i4 = 0; i4 < 64; i4++)
                u2[i4] = 4294967296 * t3.abs(t3.sin(i4 + 1)) | 0;
            }();
            var a = o2.MD5 = s2.extend({ _doReset: function() {
              this._hash = new r2.init([1732584193, 4023233417, 2562383102, 271733878]);
            }, _doProcessBlock: function(t4, i4) {
              for (var n4 = 0; n4 < 16; n4++) {
                var e3 = i4 + n4, r3 = t4[e3];
                t4[e3] = 16711935 & (r3 << 8 | r3 >>> 24) | 4278255360 & (r3 << 24 | r3 >>> 8);
              }
              var s3 = this._hash.words, o3 = t4[i4 + 0], a2 = t4[i4 + 1], d = t4[i4 + 2], v = t4[i4 + 3], m = t4[i4 + 4], p = t4[i4 + 5], g = t4[i4 + 6], b = t4[i4 + 7], _ = t4[i4 + 8], y = t4[i4 + 9], w = t4[i4 + 10], S = t4[i4 + 11], E = t4[i4 + 12], k = t4[i4 + 13], O = t4[i4 + 14], I = t4[i4 + 15], R = s3[0], T = s3[1], C = s3[2], A = s3[3];
              R = c(R, T, C, A, o3, 7, u2[0]), A = c(A, R, T, C, a2, 12, u2[1]), C = c(C, A, R, T, d, 17, u2[2]), T = c(T, C, A, R, v, 22, u2[3]), R = c(R, T, C, A, m, 7, u2[4]), A = c(A, R, T, C, p, 12, u2[5]), C = c(C, A, R, T, g, 17, u2[6]), T = c(T, C, A, R, b, 22, u2[7]), R = c(R, T, C, A, _, 7, u2[8]), A = c(A, R, T, C, y, 12, u2[9]), C = c(C, A, R, T, w, 17, u2[10]), T = c(T, C, A, R, S, 22, u2[11]), R = c(R, T, C, A, E, 7, u2[12]), A = c(A, R, T, C, k, 12, u2[13]), C = c(C, A, R, T, O, 17, u2[14]), R = h(R, T = c(T, C, A, R, I, 22, u2[15]), C, A, a2, 5, u2[16]), A = h(A, R, T, C, g, 9, u2[17]), C = h(C, A, R, T, S, 14, u2[18]), T = h(T, C, A, R, o3, 20, u2[19]), R = h(R, T, C, A, p, 5, u2[20]), A = h(A, R, T, C, w, 9, u2[21]), C = h(C, A, R, T, I, 14, u2[22]), T = h(T, C, A, R, m, 20, u2[23]), R = h(R, T, C, A, y, 5, u2[24]), A = h(A, R, T, C, O, 9, u2[25]), C = h(C, A, R, T, v, 14, u2[26]), T = h(T, C, A, R, _, 20, u2[27]), R = h(R, T, C, A, k, 5, u2[28]), A = h(A, R, T, C, d, 9, u2[29]), C = h(C, A, R, T, b, 14, u2[30]), R = f(R, T = h(T, C, A, R, E, 20, u2[31]), C, A, p, 4, u2[32]), A = f(A, R, T, C, _, 11, u2[33]), C = f(C, A, R, T, S, 16, u2[34]), T = f(T, C, A, R, O, 23, u2[35]), R = f(R, T, C, A, a2, 4, u2[36]), A = f(A, R, T, C, m, 11, u2[37]), C = f(C, A, R, T, b, 16, u2[38]), T = f(T, C, A, R, w, 23, u2[39]), R = f(R, T, C, A, k, 4, u2[40]), A = f(A, R, T, C, o3, 11, u2[41]), C = f(C, A, R, T, v, 16, u2[42]), T = f(T, C, A, R, g, 23, u2[43]), R = f(R, T, C, A, y, 4, u2[44]), A = f(A, R, T, C, E, 11, u2[45]), C = f(C, A, R, T, I, 16, u2[46]), R = l(R, T = f(T, C, A, R, d, 23, u2[47]), C, A, o3, 6, u2[48]), A = l(A, R, T, C, b, 10, u2[49]), C = l(C, A, R, T, O, 15, u2[50]), T = l(T, C, A, R, p, 21, u2[51]), R = l(R, T, C, A, E, 6, u2[52]), A = l(A, R, T, C, v, 10, u2[53]), C = l(C, A, R, T, w, 15, u2[54]), T = l(T, C, A, R, a2, 21, u2[55]), R = l(R, T, C, A, _, 6, u2[56]), A = l(A, R, T, C, I, 10, u2[57]), C = l(C, A, R, T, g, 15, u2[58]), T = l(T, C, A, R, k, 21, u2[59]), R = l(R, T, C, A, m, 6, u2[60]), A = l(A, R, T, C, S, 10, u2[61]), C = l(C, A, R, T, d, 15, u2[62]), T = l(T, C, A, R, y, 21, u2[63]), s3[0] = s3[0] + R | 0, s3[1] = s3[1] + T | 0, s3[2] = s3[2] + C | 0, s3[3] = s3[3] + A | 0;
            }, _doFinalize: function() {
              var i4 = this._data, n4 = i4.words, e3 = 8 * this._nDataBytes, r3 = 8 * i4.sigBytes;
              n4[r3 >>> 5] |= 128 << 24 - r3 % 32;
              var s3 = t3.floor(e3 / 4294967296), o3 = e3;
              n4[15 + (r3 + 64 >>> 9 << 4)] = 16711935 & (s3 << 8 | s3 >>> 24) | 4278255360 & (s3 << 24 | s3 >>> 8), n4[14 + (r3 + 64 >>> 9 << 4)] = 16711935 & (o3 << 8 | o3 >>> 24) | 4278255360 & (o3 << 24 | o3 >>> 8), i4.sigBytes = 4 * (n4.length + 1), this._process();
              for (var u3 = this._hash, a2 = u3.words, c2 = 0; c2 < 4; c2++) {
                var h2 = a2[c2];
                a2[c2] = 16711935 & (h2 << 8 | h2 >>> 24) | 4278255360 & (h2 << 24 | h2 >>> 8);
              }
              return u3;
            }, clone: function() {
              var t4 = s2.clone.call(this);
              return t4._hash = this._hash.clone(), t4;
            } });
            function c(t4, i4, n4, e3, r3, s3, o3) {
              var u3 = t4 + (i4 & n4 | ~i4 & e3) + r3 + o3;
              return (u3 << s3 | u3 >>> 32 - s3) + i4;
            }
            function h(t4, i4, n4, e3, r3, s3, o3) {
              var u3 = t4 + (i4 & e3 | n4 & ~e3) + r3 + o3;
              return (u3 << s3 | u3 >>> 32 - s3) + i4;
            }
            function f(t4, i4, n4, e3, r3, s3, o3) {
              var u3 = t4 + (i4 ^ n4 ^ e3) + r3 + o3;
              return (u3 << s3 | u3 >>> 32 - s3) + i4;
            }
            function l(t4, i4, n4, e3, r3, s3, o3) {
              var u3 = t4 + (n4 ^ (i4 | ~e3)) + r3 + o3;
              return (u3 << s3 | u3 >>> 32 - s3) + i4;
            }
            i3.MD5 = s2._createHelper(a), i3.HmacMD5 = s2._createHmacHelper(a);
          }(Math), e2.MD5);
        }, 4872: function(t2, i2, n2) {
          "use strict";
          function e2(t3) {
            return "number" == typeof t3;
          }
          function r2(t3) {
            return "string" == typeof t3;
          }
          function s2(t3) {
            return "boolean" == typeof t3;
          }
          function o2(t3) {
            return void 0 === t3;
          }
          function u2(t3) {
            return null !== t3 && t3 instanceof Object;
          }
          function a(t3) {
            return null === t3;
          }
          function c(t3) {
            return "function" == typeof t3;
          }
          function h(t3) {
            return t3 instanceof Array;
          }
          function f(t3) {
            return t3 instanceof Float32Array;
          }
          function l(t3) {
            return t3 instanceof Int16Array;
          }
          function d(t3) {
            return t3 instanceof Uint8Array;
          }
          function v(t3) {
            return t3 instanceof MediaStream;
          }
          function m(t3) {
            return t3 instanceof HTMLElement;
          }
          function p(t3) {
            return t3 instanceof HTMLMediaElement;
          }
          function g(t3) {
            return t3 instanceof ArrayBuffer;
          }
          function b(t3) {
            return (t3.startsWith("preset-id://") || t3.startsWith("http") || t3.startsWith("https")) && (t3.endsWith(".jpg") || t3.endsWith(".jpeg") || t3.endsWith(".png"));
          }
          function _(t3) {
            return e2(t3) && 0 !== t3;
          }
          n2.d(i2, { $C: function() {
            return b;
          }, C9: function() {
            return h;
          }, Cp: function() {
            return l;
          }, Cs: function() {
            return e2;
          }, G0: function() {
            return d;
          }, JO: function() {
            return c;
          }, QP: function() {
            return r2;
          }, SY: function() {
            return g;
          }, Si: function() {
            return p;
          }, TE: function() {
            return o2;
          }, dd: function() {
            return s2;
          }, dr: function() {
            return v;
          }, j5: function() {
            return f;
          }, kb: function() {
            return _;
          }, qi: function() {
            return m;
          }, uy: function() {
            return a;
          }, w: function() {
            return u2;
          } });
        }, 4883: function(t2, i2, n2) {
          "undefined" != typeof self && self, t2.exports = function(t3, i3, n3, e2, r2) {
            return o2 = [function(t4, i4, n4) {
              Object.defineProperty(i4, "__esModule", { value: true }), i4.SETTINGFETCHHANDLER_FETCHSETTING = i4.SETTINGCACHEHANDLER_STORE_SETTING = i4.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC = i4.SETTINGCACHEHANDLER_GET_CACHE_SETTING = i4.SETTING_POLLING_SETTING = i4.SETTING_GET_CLOUD_SETTING = i4.SETTING__FETCH_SETTING = i4.SETTING_FETCH_SETTING = i4.SETTING_INIT = i4.constRUCTOR = void 0, i4.constRUCTOR = "zs.0", i4.SETTING_INIT = "zs.ii.0", i4.SETTING_FETCH_SETTING = "zs.fs.0", i4.SETTING__FETCH_SETTING = "zs.fs.1", i4.SETTING_GET_CLOUD_SETTING = "zs.gcs.0", i4.SETTING_POLLING_SETTING = "zs.ps.0", i4.SETTINGCACHEHANDLER_GET_CACHE_SETTING = "zs.sch.gcs.0", i4.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC = "zs.sch.gcss.0", i4.SETTINGCACHEHANDLER_STORE_SETTING = "zs.sch.ss.0", i4.SETTINGFETCHHANDLER_FETCHSETTING = "zs.sfh.fs.0";
            }, function(t4, i4, n4) {
              var e3 = this && this.__read || function(t5, i5) {
                var n5 = "function" == typeof Symbol && t5[Symbol.iterator];
                if (!n5)
                  return t5;
                var e4, r4, s4 = n5.call(t5), o4 = [];
                try {
                  for (; (void 0 === i5 || 0 < i5--) && !(e4 = s4.next()).done; )
                    o4.push(e4.value);
                } catch (t6) {
                  r4 = { error: t6 };
                } finally {
                  try {
                    e4 && !e4.done && (n5 = s4.return) && n5.call(s4);
                  } finally {
                    if (r4)
                      throw r4.error;
                  }
                }
                return o4;
              }, r3 = this && this.__spread || function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5 = t5.concat(e3(arguments[i5]));
                return t5;
              }, s3 = this && this.__importDefault || function(t5) {
                return t5 && t5.__esModule ? t5 : { default: t5 };
              }, o3 = (Object.defineProperty(i4, "__esModule", { value: true }), i4.decryptStores = i4.encryptStores = i4.decodeString = i4.generateUUID = i4.checkValidNumber = i4.analyzeKey = i4.getCurrentTime = i4.getBrowser = void 0, s3(n4(13))), u3 = s3(n4(14));
              i4.getBrowser = function() {
                var t5 = window.navigator.userAgent, i5 = null != window.ActiveXObject && -1 != t5.indexOf("MSIE"), n5 = -1 != t5.indexOf("Firefox"), e4 = null != window.opr, r4 = t5.indexOf("Chrome") && window.chrome, s4 = -1 != t5.indexOf("Safari") && -1 != t5.indexOf("Version");
                return t5 = t5.toLowerCase().match(/MicroMessenger/i) && "micromessenger" === t5.toLowerCase().match(/MicroMessenger/i)[0], i5 ? "IE" : n5 ? "FIREFOX" : e4 ? "OPERA" : r4 ? "CHROME" : s4 ? "SAFARI" : t5 ? "WEIXIN" : "UNKOWN";
              };
              var a = ["00", "01", "02", "03", "04", "05", "06", "07", "08", "09"];
              i4.getCurrentTime = function() {
                var t5 = /* @__PURE__ */ new Date();
                return [t5.getFullYear() + "/", (a[t5.getMonth() + 1] || t5.getMonth() + 1) + "/", (a[t5.getDate()] || t5.getDate()) + " ", (a[t5.getHours()] || t5.getHours()) + ":", (a[t5.getMinutes()] || t5.getMinutes()) + ":", a[t5.getSeconds()] || t5.getSeconds(), "." + t5.getTime() % 1e3].join("");
              }, i4.analyzeKey = function(t5) {
                return t5 = t5.split("_"), { level: Number(t5[0]), timestamp: t5[1], seq: t5[2] };
              }, i4.checkValidNumber = function(t5, i5, n5) {
                return i5 = i5 || 1, n5 = n5 || 1e4, "number" == typeof t5 && t5 % 1 == 0 && i5 <= t5 && t5 <= n5;
              }, i4.generateUUID = function(t5) {
                if (0 === (t5 = void 0 === t5 ? 0 : t5))
                  try {
                    n5 = localStorage.getItem("z_deviceID");
                  } catch (t6) {
                  }
                else
                  wx.getStorageSync("z_deviceID");
                if (!n5) {
                  var i5 = (/* @__PURE__ */ new Date()).getTime(), n5 = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t6) {
                    var n6 = (i5 + 16 * Math.random()) % 16 | 0;
                    return i5 = Math.floor(i5 / 16), ("x" == t6 ? n6 : 3 & n6 | 8).toString(36);
                  });
                  if (0 === t5)
                    try {
                      localStorage.setItem("z_deviceID", n5);
                    } catch (t6) {
                    }
                  else
                    wx.setStorageSync("z_deviceID", n5);
                }
                return n5;
              }, i4.decodeString = function(t5) {
                return decodeURIComponent(window.escape(String.fromCharCode.apply(String, r3(Array.from(t5)))));
              }, i4.encryptStores = function(t5, i5) {
                return o3.default.encrypt(t5, i5).toString();
              }, i4.decryptStores = function(t5, i5) {
                try {
                  return o3.default.decrypt(t5, i5).toString(u3.default);
                } catch (t6) {
                  return "";
                }
              };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "__esModule", { value: true }), i4.AUTH_FAIL = i4.MULTI_FILE_NOT_EXIST = i4.INFLATE_DATA_FAIL = i4.FILE_REQUEST_FAIL = i4.NOT_INIT = void 0, i4.NOT_INIT = { code: 1001, msg: "not init" }, i4.FILE_REQUEST_FAIL = { code: 1002, msg: "fetch request fail" }, i4.INFLATE_DATA_FAIL = { code: 1003, msg: "inflate fail" }, i4.MULTI_FILE_NOT_EXIST = { code: 1004, msg: "get multi file fail" }, i4.AUTH_FAIL = { code: 1005, msg: "auth failed" };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "__esModule", { value: true }), n4 = (n4 = n4(4)).default || n4, i4.default = n4;
            }, function(i4, n4) {
              i4.exports = t3;
            }, function(t4, n4) {
              t4.exports = i3;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "__esModule", { value: true }), i4.INIT_CONFIG = void 0, i4.INIT_CONFIG = { env: 0, compress: true, p_version: 1, unify: true };
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "__esModule", { value: true }), i4.ZegoSetting = void 0;
              var e3 = n4(8);
              Object.defineProperty(i4, "ZegoSetting", { enumerable: true, get: function() {
                return e3.ZegoSetting;
              } });
            }, function(t4, i4, n4) {
              var e3 = this && this.__assign || function() {
                return (e3 = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e4 = arguments.length; n5 < e4; n5++)
                    for (var r4 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r4) && (t5[r4] = i5[r4]);
                  return t5;
                }).apply(this, arguments);
              }, r3 = this && this.__awaiter || function(t5, i5, n5, e4) {
                return new (n5 = n5 || Promise)(function(r4, s4) {
                  function o4(t6) {
                    try {
                      a2(e4.next(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function u4(t6) {
                    try {
                      a2(e4.throw(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function a2(t6) {
                    var i6;
                    t6.done ? r4(t6.value) : ((i6 = t6.value) instanceof n5 ? i6 : new n5(function(t7) {
                      t7(i6);
                    })).then(o4, u4);
                  }
                  a2((e4 = e4.apply(t5, i5 || [])).next());
                });
              }, s3 = this && this.__generator || function(t5, i5) {
                var n5, e4, r4, s4 = { label: 0, sent: function() {
                  if (1 & r4[0])
                    throw r4[1];
                  return r4[1];
                }, trys: [], ops: [] }, o4 = { next: u4(0), throw: u4(1), return: u4(2) };
                return "function" == typeof Symbol && (o4[Symbol.iterator] = function() {
                  return this;
                }), o4;
                function u4(o5) {
                  return function(u5) {
                    var a2 = [o5, u5];
                    if (n5)
                      throw new TypeError("Generator is already executing.");
                    for (; s4; )
                      try {
                        if (n5 = 1, e4 && (r4 = 2 & a2[0] ? e4.return : a2[0] ? e4.throw || ((r4 = e4.return) && r4.call(e4), 0) : e4.next) && !(r4 = r4.call(e4, a2[1])).done)
                          return r4;
                        switch (e4 = 0, (a2 = r4 ? [2 & a2[0], r4.value] : a2)[0]) {
                          case 0:
                          case 1:
                            r4 = a2;
                            break;
                          case 4:
                            return s4.label++, { value: a2[1], done: false };
                          case 5:
                            s4.label++, e4 = a2[1], a2 = [0];
                            continue;
                          case 7:
                            a2 = s4.ops.pop(), s4.trys.pop();
                            continue;
                          default:
                            if (!(r4 = 0 < (r4 = s4.trys).length && r4[r4.length - 1]) && (6 === a2[0] || 2 === a2[0])) {
                              s4 = 0;
                              continue;
                            }
                            if (3 === a2[0] && (!r4 || a2[1] > r4[0] && a2[1] < r4[3]))
                              s4.label = a2[1];
                            else if (6 === a2[0] && s4.label < r4[1])
                              s4.label = r4[1], r4 = a2;
                            else {
                              if (!(r4 && s4.label < r4[2])) {
                                r4[2] && s4.ops.pop(), s4.trys.pop();
                                continue;
                              }
                              s4.label = r4[2], s4.ops.push(a2);
                            }
                        }
                        a2 = i5.call(t5, s4);
                      } catch (u6) {
                        a2 = [6, u6], e4 = 0;
                      } finally {
                        n5 = r4 = 0;
                      }
                    if (5 & a2[0])
                      throw a2[1];
                    return { value: a2[0] ? a2[1] : void 0, done: true };
                  };
                }
              }, o3 = (Object.defineProperty(i4, "__esModule", { value: true }), i4.ZegoSetting = void 0, n4(2)), u3 = n4(9), a = n4(10), c = n4(11), h = n4(15), f = n4(6), l = n4(1), d = n4(0);
              function v() {
                this.u = [], this.h = {}, this.v = {}, this.g = null, this._ = 300, this.O = false, this.j = 0, this.S = false, this.log = new a.ZegoLog();
              }
              Object.defineProperty(v.prototype, "envVariable", { get: function() {
                return Object.assign({}, this.h, this.v);
              }, enumerable: false, configurable: true }), v.prototype.init = function(t5) {
                var i5, n5 = this;
                return t5.pollingFreq && !l.checkValidNumber(t5.pollingFreq) ? (this.log.error(d.SETTING_INIT + " pollingFreq must be integer number"), false) : t5.inflate ? (this.D = Object.assign({}, f.INIT_CONFIG, t5), this.N(), this.I = new h.SettingFetchHandler(this.D, this.log), this.I.setDataReport(this.D.reportNotify), t5 = Math.round(60 * Math.random()), this.log.info(d.SETTING_INIT + " delay " + t5), this.M && (clearTimeout(this.M), this.M = null), this.D.pollingFreq && 60 <= this.D.pollingFreq && (this._ = this.D.pollingFreq), this.M = setTimeout(function() {
                  n5.T(1e3 * n5._, false);
                }, 1e3 * t5), this.R = new c.SettingCacheHandler("setting_" + (this.D.online ? "online_" : "test_") + (t5 = this.D.product || this.D.productNum) + "_" + this.D.appID, this.log, this.D), [0, 1, 2, 3, 4, 5].includes(t5) && (i5 = u3.ProductMap[t5]) && (1 === t5 && this.R.dropOldStore("setting_" + (this.D.online ? "online_" : "test_") + "undefined_" + this.D.appID), this.R.dropOldStore("setting_" + (this.D.online ? "online_" : "test_") + i5 + "_" + this.D.appID)), null != (t5 = this.D) && t5.unify && this.D.connection && null != (t5 = null == (i5 = this.D) ? void 0 : i5.connection) && t5.on("connected", function() {
                  n5.I.checkUnSendMsgs(n5.I.unSendCommandList);
                }), this.C(), this.O = true) : (this.log.error(d.SETTING_INIT + " need input pako inflate function"), false);
              }, v.prototype.uninit = function() {
                this.g && (clearTimeout(this.g), this.g = null);
              }, v.prototype.setEnvVariable = function(t5, i5) {
                this.v[t5] = String(i5);
              }, v.prototype.getEnvVariable = function(t5) {
                return this.envVariable[t5];
              }, v.prototype.setEnvVariables = function(t5) {
                var i5 = this;
                Object.keys(t5).forEach(function(n5) {
                  "string" != typeof t5[n5] && "number" != typeof t5[n5] && i5.log.error("zs.sev env " + n5 + " type error"), i5.v[n5] = String(t5[n5]);
                });
              }, v.prototype.getEnvVariables = function() {
                return this.envVariable;
              }, v.prototype.enablePolling = function(t5, i5) {
                var n5 = this;
                i5 ? i5.forEach(function(i6) {
                  var e4 = n5.u.find(function(t6) {
                    return t6.fileName === i6;
                  });
                  e4 && (e4.needPolling = t5);
                }) : this.u.forEach(function(i6) {
                  return i6.needPolling = t5;
                });
              }, v.prototype.setToken = function(t5) {
                this.P !== t5 && this.C(), this.P = t5;
              }, v.prototype.setUserID = function(t5) {
                this.q !== t5 && this.C(), this.q = t5;
              }, v.prototype.getSettingCache = function(t5) {
                return r3(this, void 0, void 0, function() {
                  var i5, n5;
                  return s3(this, function(e4) {
                    switch (e4.label) {
                      case 0:
                        return this.O ? (i5 = this.u.find(function(i6) {
                          return i6.fileName === t5;
                        })) ? [2, Promise.resolve({ setting: i5.setting, versions: i5.versions })] : [3, 1] : [2, Promise.reject(o3.NOT_INIT)];
                      case 1:
                        return [4, this.R.getCacheSetting(t5)];
                      case 2:
                        return (i5 = e4.sent()) && (this.u.find(function(i6) {
                          return i6.fileName === t5;
                        }) || this.u.push({ fileName: t5, fetchedTime: 0, needPolling: false, setting: i5.setting, versions: i5.versions }), n5 = { setting: i5.setting, versions: i5.versions }), [2, Promise.resolve(n5)];
                    }
                  });
                });
              }, v.prototype.fetchSetting = function(t5, i5, n5) {
                return void 0 === i5 && (i5 = {}), void 0 === n5 && (n5 = true), this.log.info(d.SETTING_FETCH_SETTING + " call " + t5), this.O ? (this.activePolling(), 0 < Object.keys(i5).length ? (this.log.info(d.SETTING_FETCH_SETTING + " get file with params"), this.A(t5, e3(e3({}, this.envVariable), i5))) : (i5 = this.u.find(function(i6) {
                  return i6.fileName === t5;
                })) ? (this.log.info(d.SETTING_FETCH_SETTING + " file exist"), (/* @__PURE__ */ new Date()).getTime() - i5.fetchedTime < 1e3 * this._ ? (this.log.info(d.SETTING_FETCH_SETTING + " fetch time interval in freq"), i5.needPolling = n5, Promise.resolve({ setting: i5.setting, versions: i5.versions })) : this.k(t5, i5, n5)) : (this.log.info(d.SETTING_FETCH_SETTING + " file not found"), this.k(t5, i5, n5))) : Promise.reject(o3.NOT_INIT);
              }, v.prototype.fetchMultiSetting = function(t5, i5, n5) {
                var u4 = this;
                return void 0 === i5 && (i5 = {}), void 0 === n5 && (n5 = true), this.log.info(d.SETTING_FETCH_SETTING + " call " + JSON.stringify(t5)), this.O ? (this.activePolling(), 0 < Object.keys(i5).length ? (this.log.info(d.SETTING_FETCH_SETTING + " get file with params"), this.A(t5, e3(e3({}, this.envVariable), i5))) : new Promise(function(i6, e4) {
                  var o4 = {}, a2 = [];
                  if (t5.forEach(function(t6) {
                    return r3(u4, void 0, void 0, function() {
                      var i7;
                      return s3(this, function(n6) {
                        return (i7 = this.u.find(function(i8) {
                          return i8.fileName === t6;
                        })) && (/* @__PURE__ */ new Date()).getTime() - i7.fetchedTime < 1e3 * this._ ? (this.log.info(d.SETTING_FETCH_SETTING + " fetch time interval in freq"), o4[t6] = { setting: i7.setting, versions: i7.versions }) : a2.push(t6), [2];
                      });
                    });
                  }), !(0 < a2.length))
                    return i6(o4);
                  u4.A(a2, u4.envVariable).then(function(t6) {
                    return u4.J(t6, n5), Object.assign(o4, t6), i6(o4);
                  }).catch(function(t6) {
                    a2.forEach(function(t7) {
                      return r3(u4, void 0, void 0, function() {
                        var i7;
                        return s3(this, function(e5) {
                          switch (e5.label) {
                            case 0:
                              return (i7 = this.u.find(function(i8) {
                                return i8.fileName == t7;
                              })) ? i7.fetchedTime = (/* @__PURE__ */ new Date()).getTime() : this.u.find(function(i8) {
                                return i8.fileName === t7;
                              }) || this.u.push({ fileName: t7, fetchedTime: (/* @__PURE__ */ new Date()).getTime(), needPolling: n5, setting: {}, versions: {} }), [4, this.R.getCacheSetting(t7)];
                            case 1:
                              return i7 = e5.sent(), o4[t7] = { setting: i7.setting, versions: i7.versions }, [2];
                          }
                        });
                      });
                    }), 0 < Object.keys(o4).length ? i6(o4) : e4(t6);
                  });
                })) : (this.log.info(d.SETTING_FETCH_SETTING + " not init"), Promise.reject(o3.NOT_INIT));
              }, v.prototype.setOptions = function(t5) {
                t5 && "boolean" == typeof t5.unify && (this.D.unify = t5.unify, this.I.setOptions(this.D));
              }, v.prototype.setLog = function(t5) {
                this.log = t5;
              }, v.prototype.A = function(t5, i5) {
                var n5 = this;
                return new Promise(function(e4, u4) {
                  return r3(n5, void 0, void 0, function() {
                    var n6, r4, a2, c2, h2, f2, l2, v2, m, p = this;
                    return s3(this, function(s4) {
                      switch (s4.label) {
                        case 0:
                          if (s4.trys.push([0, 6, , 7]), this.S)
                            return this.log.warn(d.SETTING_GET_CLOUD_SETTING + " check fail"), u4(o3.AUTH_FAIL), [2];
                          r4 = (n6 = t5 instanceof Array) ? t5 : [t5], a2 = [], c2 = {}, h2 = function(t6) {
                            return t6 = t6.map(function(t7) {
                              return p.R.getCacheSetting(t7);
                            }), Promise.all(t6);
                          }, s4.label = 1;
                        case 1:
                          return s4.trys.push([1, 3, , 4]), [4, h2(r4)];
                        case 2:
                          return f2 = s4.sent(), r4.forEach(function(t6, i6) {
                            var n7 = "string" == typeof (n7 = null == (n7 = f2[i6].versions) ? void 0 : n7.hash) ? new Uint8Array(n7.split(",").map(function(t7) {
                              return parseInt(t7);
                            })) : new Uint8Array();
                            a2.push({ file_name: t6, hash: n7, g_version: null == (n7 = f2[i6].versions) ? void 0 : n7.g_version }), c2[t6] = f2[i6];
                          }), [3, 4];
                        case 3:
                          return s4.sent(), r4.forEach(function(t6) {
                            a2.push({ file_name: t6 });
                          }), [3, 4];
                        case 4:
                          return [4, this.I.fetchSetting(a2, i5, this.P, this.q, false)];
                        case 5:
                          return m = s4.sent(), l2 = m.data, m = m.polling_interval, this.j = 0, this.log.info(d.SETTING_GET_CLOUD_SETTING + " suc"), "number" == typeof m && 5 <= m && this._ !== 60 * m && (this.log.warn(d.SETTING_GET_CLOUD_SETTING + " polling interval change"), this._ = 60 * m, this.uninit(), this.activePolling()), n6 ? (v2 = {}, t5.forEach(function(t6) {
                            var i6;
                            0 == (null == (i6 = l2[t6]) ? void 0 : i6.code) && (l2[t6].hashChange ? (p.log.info(d.SETTING_GET_CLOUD_SETTING + " file " + t6 + " changed"), v2[t6] = { setting: null == (i6 = l2[t6]) ? void 0 : i6.data, versions: null == (i6 = l2[t6]) ? void 0 : i6.versions }) : c2[t6] && (v2[t6] = { setting: null == (i6 = c2[t6]) ? void 0 : i6.setting, versions: null == (i6 = c2[t6]) ? void 0 : i6.versions }));
                          }), 0 < Object.keys(v2).length ? e4(v2) : u4(o3.MULTI_FILE_NOT_EXIST)) : 0 === (null == (m = l2[t5]) ? void 0 : m.code) && null != (m = l2[t5]) && m.data ? e4({ setting: null == (m = l2[t5]) ? void 0 : m.data, versions: null == (m = l2[t5]) ? void 0 : m.versions }) : u4({ code: null == (m = l2[t5]) ? void 0 : m.code, msg: null == (m = l2[t5]) ? void 0 : m.message }), [3, 7];
                        case 6:
                          return m = s4.sent(), this.log.error(d.SETTING_GET_CLOUD_SETTING + " fail " + JSON.stringify(m)), 21002 !== (null == m ? void 0 : m.code) && 401 !== (null == m ? void 0 : m.status_code) || (this.j += 1), 2 <= this.j && (this.S = true), u4(m), [3, 7];
                        case 7:
                          return [2];
                      }
                    });
                  });
                });
              }, v.prototype.J = function(t5, i5) {
                var n5 = this;
                Object.keys(t5).forEach(function(e4) {
                  var r4 = ((r4 = n5.u.find(function(t6) {
                    return t6.fileName == e4;
                  })) ? (r4.fetchedTime = (/* @__PURE__ */ new Date()).getTime(), r4.setting = t5[e4].setting, r4.versions = t5[e4].versions, r4.needPolling = i5) : n5.u.find(function(t6) {
                    return t6.fileName === e4;
                  }) || n5.u.push({ fileName: e4, fetchedTime: (/* @__PURE__ */ new Date()).getTime(), needPolling: i5, setting: t5[e4].setting, versions: t5[e4].versions }), e4);
                  n5.R.storeSetting(r4, t5[e4]);
                });
              }, v.prototype.k = function(t5, i5, n5) {
                var e4 = this;
                return new Promise(function(o4, u4) {
                  e4.log.info(d.SETTING__FETCH_SETTING + " call"), e4.A(t5, e4.envVariable).then(function(r4) {
                    i5 ? (i5.fetchedTime = (/* @__PURE__ */ new Date()).getTime(), i5.setting = r4.setting, i5.versions = r4.versions, i5.needPolling = n5) : e4.u.find(function(i6) {
                      return i6.fileName === t5;
                    }) || e4.u.push({ fileName: t5, fetchedTime: (/* @__PURE__ */ new Date()).getTime(), needPolling: n5, setting: r4.setting, versions: r4.versions }), e4.R.storeSetting(t5, r4), o4(r4), e4.log.info(d.SETTING__FETCH_SETTING + " call suc");
                  }).catch(function(a2) {
                    return r3(e4, void 0, void 0, function() {
                      var e5, r4;
                      return s3(this, function(s4) {
                        switch (s4.label) {
                          case 0:
                            i5 ? i5.fetchedTime = (/* @__PURE__ */ new Date()).getTime() : this.u.find(function(i6) {
                              return i6.fileName === t5;
                            }) || this.u.push({ fileName: t5, fetchedTime: (/* @__PURE__ */ new Date()).getTime(), needPolling: n5, setting: {}, versions: {} }), e5 = t5, s4.label = 1;
                          case 1:
                            return s4.trys.push([1, 3, , 4]), [4, this.R.getCacheSetting(e5)];
                          case 2:
                            return r4 = s4.sent(), o4(r4), [3, 4];
                          case 3:
                            return s4.sent(), u4(a2), [3, 4];
                          case 4:
                            return this.log.info(d.SETTING__FETCH_SETTING + " setting not contain or fetch file fail"), [2];
                        }
                      });
                    });
                  });
                });
              }, v.prototype.N = function() {
                var t5;
                0 == this.D.env ? (this.h.userAgent = navigator.userAgent, this.h.platform = navigator.platform, this.h.browser = l.getBrowser(), this.h.deviceid = l.generateUUID()) : 1 == this.D.env && (t5 = wx.getSystemInfoSync(), this.h.brand = t5.brand, this.h.model = t5.model, this.h.system = t5.system, this.h.platform = t5.platform, this.h.wechatVersion = t5.version, this.h.wechatSDKVersion = t5.SDKVersion, this.h.deviceid = l.generateUUID(this.D.env));
              }, v.prototype.T = function(t5, i5) {
                return void 0 === i5 && (i5 = true), r3(this, void 0, void 0, function() {
                  var n5, e4, o4, u4, a2 = this;
                  return s3(this, function(c2) {
                    switch (c2.label) {
                      case 0:
                        if (this.log.info(d.SETTING_POLLING_SETTING + " call " + t5 + " " + i5), n5 = t5, i5) {
                          if (e4 = [], this.u.forEach(function(t6) {
                            var i6, n6;
                            t6.needPolling && (n6 = "string" == typeof (null == (i6 = t6.versions) ? void 0 : i6.hash) ? new Uint8Array(null == (i6 = t6.versions) ? void 0 : i6.hash.split(",").map(function(t7) {
                              return parseInt(t7);
                            })) : new Uint8Array(), e4.push({ file_name: t6.fileName, hash: n6, g_version: t6.versions.g_version }));
                          }), !this.S)
                            return [3, 1];
                          this.log.warn(d.SETTING_GET_CLOUD_SETTING + " has checked fail");
                        }
                        return [3, 7];
                      case 1:
                        if (!(0 < e4.length))
                          return [3, 6];
                        c2.label = 2;
                      case 2:
                        return c2.trys.push([2, 4, , 5]), [4, this.I.fetchSetting(e4, this.envVariable, this.P, this.q)];
                      case 3:
                        return u4 = c2.sent(), o4 = u4.data, u4 = u4.polling_interval, this.log.info(d.SETTING_POLLING_SETTING + " fetch suc"), this.j = 0, "number" == typeof u4 && 5 <= u4 && this._ !== 60 * u4 && (this.log.warn(d.SETTING_POLLING_SETTING + " polling interval change"), this._ = 60 * u4, n5 = 1e3 * this._), this.u.forEach(function(t6) {
                          return r3(a2, void 0, void 0, function() {
                            var i6, n6, e5, r4, u5, a3, c3, h2, f2;
                            return s3(this, function(s4) {
                              switch (s4.label) {
                                case 0:
                                  return t6.fetchedTime = (/* @__PURE__ */ new Date()).getTime(), i6 = t6.fileName, f2 = (r4 = o4[t6.fileName]).code, c3 = r4.data, h2 = r4.versions, n6 = r4.message, e5 = r4.hashChange, r4 && 0 === f2 && c3 ? (r4 = JSON.stringify(c3), u5 = JSON.stringify(t6.setting), a3 = { setting: c3, versions: h2, code: f2, message: n6 }, e5 && u5 !== r4 && (this.log.info(d.SETTING_POLLING_SETTING + " " + t6.fileName + " setting changed"), t6.setting = a3.setting, t6.versions = a3.versions, this.D.pollingNotify(t6.fileName, a3)), [4, this.R.getCacheSetting(i6)]) : [3, 2];
                                case 1:
                                  c3 = s4.sent(), h2 = JSON.stringify(c3), f2 = JSON.stringify(a3), e5 && h2 !== f2 && this.R.storeSetting(i6, a3), s4.label = 2;
                                case 2:
                                  return [2];
                              }
                            });
                          });
                        }), [3, 5];
                      case 4:
                        return u4 = c2.sent(), this.log.error(d.SETTING_POLLING_SETTING + " fetch fail " + JSON.stringify(u4)), 21002 !== (null == u4 ? void 0 : u4.code) && 401 !== (null == u4 ? void 0 : u4.status_code) || (this.j += 1), 2 <= this.j && (this.S = true), [3, 5];
                      case 5:
                        return [3, 7];
                      case 6:
                        this.log.info(d.SETTING_POLLING_SETTING + " polling no file"), c2.label = 7;
                      case 7:
                        return this.g && clearTimeout(this.g), this.g = setTimeout(function() {
                          a2.T(n5);
                        }, n5), [2];
                    }
                  });
                });
              }, v.prototype.activePolling = function() {
                this.g || this.T(1e3 * this._);
              }, v.prototype.C = function() {
                this.j = 0, this.S = false;
              }, i4.ZegoSetting = v;
            }, function(t4, i4, n4) {
              var e3;
              Object.defineProperty(i4, "__esModule", { value: true }), i4.ProductMap = i4.Product = i4.SOCKET_DISCONNECT = i4.ENUM_REMOTE_TYPE = i4.ZEGO_BROWSER_TYPE = i4.ZEGO_ENV = i4.PROTO_VERSION = void 0, i4.PROTO_VERSION = "1.1.8", (e3 = i4.ZEGO_ENV || (i4.ZEGO_ENV = {}))[e3.BROWSER = 0] = "BROWSER", e3[e3.WEIXINMINI = 1] = "WEIXINMINI", (e3 = i4.ZEGO_BROWSER_TYPE || (i4.ZEGO_BROWSER_TYPE = {}))[e3.IE = 0] = "IE", e3[e3.FIREFOX = 1] = "FIREFOX", e3[e3.CHROME = 2] = "CHROME", e3[e3.SAFARI = 3] = "SAFARI", e3[e3.OPERA = 4] = "OPERA", e3[e3.WEIXIN = 5] = "WEIXIN", e3[e3.WEIXINMINI = 6] = "WEIXINMINI", e3[e3.UNKOWN = 7] = "UNKOWN", (e3 = i4.ENUM_REMOTE_TYPE || (i4.ENUM_REMOTE_TYPE = {}))[e3.DISABLE = 0] = "DISABLE", e3[e3.WEBSOCKET = 1] = "WEBSOCKET", e3[e3.HTTPS = 2] = "HTTPS", i4.SOCKET_DISCONNECT = -1, (e3 = i4.Product || (i4.Product = {}))[e3.RTC = 0] = "RTC", e3[e3.WEB_RTC = 1] = "WEB_RTC", e3[e3.ZIM = 2] = "ZIM", e3[e3.ROOM_KIT = 3] = "ROOM_KIT", e3[e3.DOC_SHARE = 4] = "DOC_SHARE", e3[e3.WHITE_BOARD = 5] = "WHITE_BOARD", e3[e3.SELF_CHECK = 999] = "SELF_CHECK", e3[e3.TEST_ANOOUS = 1e3] = "TEST_ANOOUS", i4.ProductMap = { 0: "rtc_sdk_native", 1: "Web_SDK", 2: "ZIM", 3: "roomkitWeb", 4: "docsshare", 5: "WhiteBoard" };
            }, function(t4, i4, n4) {
              function e3() {
              }
              Object.defineProperty(i4, "__esModule", { value: true }), i4.ZegoLog = void 0, e3.prototype.log = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join(" ");
                console.log(n5);
              }, e3.prototype.debug = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join(" ");
                console.debug(n5);
              }, e3.prototype.info = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join(" ");
                console.info(n5);
              }, e3.prototype.warn = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join(" ");
                console.warn(n5);
              }, e3.prototype.error = function() {
                for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                  t5[i5] = arguments[i5];
                var n5 = t5.join(" ");
                console.error(n5);
              }, i4.ZegoLog = e3;
            }, function(t4, i4, n4) {
              var e3 = this && this.__awaiter || function(t5, i5, n5, e4) {
                return new (n5 = n5 || Promise)(function(r4, s4) {
                  function o4(t6) {
                    try {
                      a2(e4.next(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function u4(t6) {
                    try {
                      a2(e4.throw(t6));
                    } catch (t7) {
                      s4(t7);
                    }
                  }
                  function a2(t6) {
                    var i6;
                    t6.done ? r4(t6.value) : ((i6 = t6.value) instanceof n5 ? i6 : new n5(function(t7) {
                      t7(i6);
                    })).then(o4, u4);
                  }
                  a2((e4 = e4.apply(t5, i5 || [])).next());
                });
              }, r3 = this && this.__generator || function(t5, i5) {
                var n5, e4, r4, s4 = { label: 0, sent: function() {
                  if (1 & r4[0])
                    throw r4[1];
                  return r4[1];
                }, trys: [], ops: [] }, o4 = { next: u4(0), throw: u4(1), return: u4(2) };
                return "function" == typeof Symbol && (o4[Symbol.iterator] = function() {
                  return this;
                }), o4;
                function u4(o5) {
                  return function(u5) {
                    var a2 = [o5, u5];
                    if (n5)
                      throw new TypeError("Generator is already executing.");
                    for (; s4; )
                      try {
                        if (n5 = 1, e4 && (r4 = 2 & a2[0] ? e4.return : a2[0] ? e4.throw || ((r4 = e4.return) && r4.call(e4), 0) : e4.next) && !(r4 = r4.call(e4, a2[1])).done)
                          return r4;
                        switch (e4 = 0, (a2 = r4 ? [2 & a2[0], r4.value] : a2)[0]) {
                          case 0:
                          case 1:
                            r4 = a2;
                            break;
                          case 4:
                            return s4.label++, { value: a2[1], done: false };
                          case 5:
                            s4.label++, e4 = a2[1], a2 = [0];
                            continue;
                          case 7:
                            a2 = s4.ops.pop(), s4.trys.pop();
                            continue;
                          default:
                            if (!(r4 = 0 < (r4 = s4.trys).length && r4[r4.length - 1]) && (6 === a2[0] || 2 === a2[0])) {
                              s4 = 0;
                              continue;
                            }
                            if (3 === a2[0] && (!r4 || a2[1] > r4[0] && a2[1] < r4[3]))
                              s4.label = a2[1];
                            else if (6 === a2[0] && s4.label < r4[1])
                              s4.label = r4[1], r4 = a2;
                            else {
                              if (!(r4 && s4.label < r4[2])) {
                                r4[2] && s4.ops.pop(), s4.trys.pop();
                                continue;
                              }
                              s4.label = r4[2], s4.ops.push(a2);
                            }
                        }
                        a2 = i5.call(t5, s4);
                      } catch (u6) {
                        a2 = [6, u6], e4 = 0;
                      } finally {
                        n5 = r4 = 0;
                      }
                    if (5 & a2[0])
                      throw a2[1];
                    return { value: a2[0] ? a2[1] : void 0, done: true };
                  };
                }
              }, s3 = this && this.__importDefault || function(t5) {
                return t5 && t5.__esModule ? t5 : { default: t5 };
              }, o3 = (Object.defineProperty(i4, "__esModule", { value: true }), i4.SettingCacheHandler = void 0, s3(n4(12))), u3 = n4(0), a = n4(1), c = "0c9e6e0f8c0a8f4e";
              function h(t5, i5, n5) {
                this._storeName = t5, this._log = i5;
              }
              h.prototype.getStore = function() {
                this.store || (this.store = o3.default.createInstance({ name: this._storeName }));
              }, h.prototype.getCacheSetting = function(t5) {
                return e3(this, void 0, void 0, function() {
                  var i5, n5;
                  return r3(this, function(e4) {
                    switch (e4.label) {
                      case 0:
                        if (this._log.info(u3.SETTINGCACHEHANDLER_GET_CACHE_SETTING + " call " + t5), i5 = void 0, !(n5 = localStorage.getItem(this._storeName + "_" + t5)))
                          return [3, 1];
                        if (n5 = a.decryptStores(n5, c))
                          try {
                            i5 = JSON.parse(n5), this._log.info(u3.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC + " res " + t5);
                          } catch (e5) {
                            this._log.info(u3.SETTINGCACHEHANDLER_GET_CACHE_SETTING_SYNC + " fail " + t5 + " " + (null == e5 ? void 0 : e5.message));
                          }
                        return [3, 3];
                      case 1:
                        return this._log.info(u3.SETTINGCACHEHANDLER_GET_CACHE_SETTING + " get cache from db " + t5), this.getStore(), [4, this.store.getItem(t5)];
                      case 2:
                        i5 = e4.sent(), e4.label = 3;
                      case 3:
                        return this._log.info(u3.SETTINGCACHEHANDLER_GET_CACHE_SETTING + " res " + t5), [2, i5];
                    }
                  });
                });
              }, h.prototype.storeSetting = function(t5, i5) {
                return e3(this, void 0, void 0, function() {
                  var n5;
                  return r3(this, function(e4) {
                    switch (e4.label) {
                      case 0:
                        this._log.info(u3.SETTINGCACHEHANDLER_STORE_SETTING + " call " + t5), e4.label = 1;
                      case 1:
                        return e4.trys.push([1, 2, , 4]), n5 = JSON.stringify(i5), n5 = a.encryptStores(n5, c), localStorage.setItem(this._storeName + "_" + t5, n5), [3, 4];
                      case 2:
                        return n5 = e4.sent(), this._log.info(u3.SETTINGCACHEHANDLER_STORE_SETTING + " fail " + t5 + " " + (null == n5 ? void 0 : n5.message)), localStorage.removeItem(this._storeName + "_" + t5), this._log.info(u3.SETTINGCACHEHANDLER_STORE_SETTING + " set data to db " + t5), this.getStore(), [4, this.store.setItem(t5, i5)];
                      case 3:
                        return e4.sent(), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              }, h.prototype.dropOldStore = function(t5) {
                o3.default.dropInstance({ name: t5 }).then(function() {
                  console.debug("Dropped ", t5);
                }).catch(function(t6) {
                  console.warn(t6);
                });
              }, i4.SettingCacheHandler = h;
            }, function(t4, i4) {
              t4.exports = n3;
            }, function(t4, i4) {
              t4.exports = e2;
            }, function(t4, i4) {
              t4.exports = r2;
            }, function(t4, i4, n4) {
              var e3, r3, s3 = this && this.__assign || function() {
                return (s3 = Object.assign || function(t5) {
                  for (var i5, n5 = 1, e4 = arguments.length; n5 < e4; n5++)
                    for (var r4 in i5 = arguments[n5])
                      Object.prototype.hasOwnProperty.call(i5, r4) && (t5[r4] = i5[r4]);
                  return t5;
                }).apply(this, arguments);
              }, o3 = this && this.__importDefault || function(t5) {
                return t5 && t5.__esModule ? t5 : { default: t5 };
              }, u3 = (Object.defineProperty(i4, "__esModule", { value: true }), i4.SettingFetchHandler = void 0, n4(16)), a = n4(1), c = n4(17), h = n4(6), f = o3(n4(3)), l = n4(0), d = n4(2);
              function v(t5, i5) {
                this._options = t5, this._log = i5, this.seq = 0, this.userID = "", this.unSendCommandList = new u3.LinkedList(), this.testNetPackageSize = false, this.protobuf = new c.CloudSettingProtoBuf();
              }
              (e3 = e3 || {})[e3.SERVICE_ClOUD_SETTING = 10] = "SERVICE_ClOUD_SETTING", (o3 = r3 = r3 || {})[o3.METHOD_UNSET = 0] = "METHOD_UNSET", o3[o3.METHOD_GET = 1] = "METHOD_GET", o3[o3.METHOD_POST = 2] = "METHOD_POST", v.prototype.setOptions = function(t5) {
                this._options = t5;
              }, v.prototype.setDataReport = function(t5) {
                this.W = t5;
              }, v.prototype.setUserID = function(t5) {
                this.userID = t5;
              }, v.prototype.fetchSetting = function(t5, i5, n5, e4, r4) {
                var o4 = this;
                return void 0 === r4 && (r4 = true), new Promise(function(u4, c2) {
                  function f2(t6) {
                    var i6, n6 = t6.code, e5 = t6.data, s4 = t6.polling_interval;
                    t6 = t6.reportData, o4._log.info(l.SETTINGFETCHHANDLER_FETCHSETTING + " suc " + n6), e5 && (i6 = [], Object.keys(e5).forEach(function(t7) {
                      var n7;
                      i6.push({ name: t7, code: e5[t7].code, message: null == (n7 = e5[t7]) ? void 0 : n7.message, versions: JSON.stringify(null == (n7 = e5[t7]) ? void 0 : n7.versions), content: JSON.stringify(null == (n7 = e5[t7]) ? void 0 : n7.data) });
                    })), o4.W && o4.W(g, "request_end", { code: n6, reportData: t6, params: p, requestKV: m, files: i6, polling: r4 }), u4({ data: e5, polling_interval: s4 });
                  }
                  function d2(t6) {
                    var i6 = t6.code, n6 = t6.msg, e5 = t6.status_code;
                    t6 = t6.reportData, o4._log.warn(l.SETTINGFETCHHANDLER_FETCHSETTING + " fail " + i6), o4.W && o4.W(g, "request_end", { code: i6, params: p, requestKV: m, reportData: t6, polling: r4 }), c2({ code: i6, msg: n6, status_code: e5 });
                  }
                  var v2 = { product: o4._options.product, files: t5.map(function(t6) {
                    return t6.file_name;
                  }), param: s3(s3({}, i5), { deviceid: void 0 }), appid: o4._options.appID, token: n5, id_name: e4, timestamp: (/* @__PURE__ */ new Date()).getTime(), biztype: 0, deviceid: i5.deviceid || a.generateUUID(o4._options.env), compress: false, mode: o4._options.online ? "online" : "test" }, m = v2.param, p = { appid: v2.appid, token: v2.token, id_name: v2.id_name, deviceid: v2.deviceid }, g = o4.seq++;
                  if (o4.W && o4.W(g, "request_start", { polling: r4 }), !o4._options.connection)
                    throw Error("connection required");
                  if (void 0 !== o4._options.productNum) {
                    var b, _ = [];
                    for (b in v2.param)
                      void 0 !== v2.param[b] && _.push({ key: b, value: v2.param[b] });
                    var y = { product: o4._options.productNum, response_compress: h.INIT_CONFIG.compress ? 0 : 1, files: t5, param_list: _, p_version: h.INIT_CONFIG.p_version }, w = (o4._log.info(l.SETTINGFETCHHANDLER_FETCHSETTING + " files " + JSON.stringify(y.files) + " compress " + y.response_compress), o4._options.online ? 1 : 2);
                    o4.sendCloudPBRequest(e4, y, n5, w, f2, d2);
                  } else
                    o4.sendCloudRequest(e4, v2, "/cloud-setting/get", function(t6) {
                      f2(t6);
                    }, function(t6) {
                      d2(t6);
                    });
                });
              }, v.prototype.sendCloudRequest = function(t5, i5, n5, o4, u4, a2, c2) {
                var h2 = this, f2 = (void 0 === a2 && (a2 = 3), void 0 === c2 && (c2 = []), (/* @__PURE__ */ new Date()).getTime());
                this.sendNetAgentHttpRequest({ service: e3.SERVICE_ClOUD_SETTING, body: i5, ack: false, idName: t5, method_no: r3.METHOD_POST, location: n5 }, function(e4) {
                  var r4, l2, v2, m, p;
                  200 === (null == e4 ? void 0 : e4.status_code) ? (r4 = (m = JSON.parse(e4.body)).code, l2 = m.message, v2 = m.data, m = m.polling_interval, p = (/* @__PURE__ */ new Date()).getTime() - f2, c2.push({ timestamp: f2, url: n5, error: r4, duration: p }), 0 === r4 ? o4({ code: r4, msg: l2, data: v2, polling_interval: m, reportData: c2 }) : u4({ code: r4, msg: l2, reportData: c2 })) : (p = (/* @__PURE__ */ new Date()).getTime() - f2, c2.push({ timestamp: f2, url: n5, error: null == e4 ? void 0 : e4.status_code, duration: p }), 0 < a2 ? (a2--, h2.sendCloudRequest(t5, i5, n5, o4, u4, a2, c2)) : u4(s3(s3({}, d.FILE_REQUEST_FAIL), { reportData: c2 })));
                }, function(e4) {
                  var r4 = (/* @__PURE__ */ new Date()).getTime() - f2;
                  c2.push({ timestamp: f2, url: n5, error: e4.code, duration: r4 }), !h2._options.connection || null != (r4 = h2._options.connection) && r4.isDestroy ? u4(s3(s3({}, d.FILE_REQUEST_FAIL), { reportData: c2, status_code: null == e4 ? void 0 : e4.status_code })) : 0 < a2 ? (a2--, h2.sendCloudRequest(t5, i5, n5, o4, u4, a2, c2)) : u4(s3(s3({}, d.FILE_REQUEST_FAIL), { reportData: c2 }));
                }, null, { timeout: 4e3 });
              }, v.prototype.sendNetAgentHttpRequest = function(t5, i5, n5, e4, r4) {
                t5 = { param: t5, suc: i5, err: n5, ack: e4, option: r4 }, null != (i5 = this._options.connection) && i5.isConnect() ? this.sendNetUintData(t5) : this.unSendCommandList.push(t5);
              }, v.prototype.sendNetUintData = function(t5) {
                var i5;
                null != (i5 = this._options.connection) && i5.startHttpRequest(t5.param, t5.suc, t5.err, t5.ack, t5.option);
              }, v.prototype.checkUnSendMsgs = function(t5) {
                for (var i5 = t5.getFirst(); null != i5; )
                  t5.remove(i5), i5._data && i5._data.param && this.sendNetUintData(i5._data), i5 = t5.getFirst();
              }, v.prototype.sendCloudPBRequest = function(t5, i5, n5, e4, o4, u4, c2, h2) {
                var v2, m = this, p = (void 0 === c2 && (c2 = 3), void 0 === h2 && (h2 = []), (/* @__PURE__ */ new Date()).getTime()), g = this.protobuf.encodeCloudSettingReq(i5);
                null != (v2 = this._options.connection) && v2.startHttpRequest2({ interfaceID: 14, body: g, ack: false, idName: t5, method: r3.METHOD_POST, token: n5, mode: e4, reduceRspHeaders: true }, function(r4, v3) {
                  if (200 === (null == r4 ? void 0 : r4.status_code)) {
                    var g2 = m.protobuf.decodeCloudSettingRsp(r4.body), b = g2.message, _ = g2.polling_interval, y = g2.code || 0, w = (f.default.isLong(y) && (y = y.toNumber()), (/* @__PURE__ */ new Date()).getTime() - p);
                    if (h2.push({ timestamp: p, error: y, duration: w }), 0 === y) {
                      for (var S = {}, E = 0; E < g2.file_response.length; E++) {
                        var k = (C = g2.file_response[E]).message, O = C.file_name, I = C.hash, R = C.g_version, T = C.json_data, C = (m._log.info(l.SETTINGFETCHHANDLER_FETCHSETTING + " file rsp " + O + " " + R + " " + I.toString()), C.code || 0), A = (f.default.isLong(C) && (C = C.toNumber()), {}), z = "";
                        if (0 < (null == I ? void 0 : I.byteLength) && 0 < (null == T ? void 0 : T.byteLength))
                          try {
                            var D = 0 === i5.response_compress ? m._options.inflate(T, { to: "string" }) : a.decodeString(T);
                            A = JSON.parse(D), z = I.toString();
                          } catch (r5) {
                            m._log.info(l.SETTINGFETCHHANDLER_FETCHSETTING + " decode fail " + (null == r5 ? void 0 : r5.message) ? r5.message : JSON.stringify(r5));
                          }
                        S[O] = { code: C, message: k, versions: { hash: z, g_version: R }, data: A, hashChange: 0 === I.byteLength ? 0 : 1 };
                      }
                      o4({ code: y, msg: b, data: S, polling_interval: _, reportData: h2 });
                    } else
                      u4({ code: y, msg: b, reportData: h2 });
                  } else
                    w = (/* @__PURE__ */ new Date()).getTime() - p, h2.push({ timestamp: p, error: null == r4 ? void 0 : r4.status_code, duration: w }), 0 < c2 ? (c2--, m.sendCloudPBRequest(t5, i5, n5, e4, o4, u4, c2, h2)) : u4(s3(s3({}, d.FILE_REQUEST_FAIL), { reportData: h2, status_code: null == r4 ? void 0 : r4.status_code }));
                }, function(r4) {
                  var a2 = (/* @__PURE__ */ new Date()).getTime() - p;
                  h2.push({ timestamp: p, error: r4.code, duration: a2 }), m._options.connection && (null == (a2 = m._options.connection) || !a2.isDestroy) && 0 < c2 ? (c2--, m.sendCloudPBRequest(t5, i5, n5, e4, o4, u4, c2, h2)) : u4(s3(s3({}, d.FILE_REQUEST_FAIL), { reportData: h2, status_code: null == r4 ? void 0 : r4.status_code }));
                }, null, { timeout: 4e3, extras: { protoCmd: "GetCloudSettingConfigRequest" } });
              }, i4.SettingFetchHandler = n4 = v;
            }, function(t4, i4, n4) {
              Object.defineProperty(i4, "__esModule", { value: true }), i4.LinkedList = i4.ListNode = void 0, Object.defineProperty(r3.prototype, "id", { get: function() {
                return this._id || null;
              }, set: function(t5) {
                this._id = t5;
              }, enumerable: false, configurable: true }), Object.defineProperty(r3.prototype, "data", { get: function() {
                return this._data;
              }, set: function(t5) {
                this._data = t5;
              }, enumerable: false, configurable: true }), r3.prototype.hasNext = function() {
                return this.next && this.next.id;
              }, r3.prototype.hasPrev = function() {
                return this.prev && this.prev.id;
              };
              var e3 = r3;
              function r3(t5, i5) {
                void 0 === t5 && (t5 = null), void 0 === i5 && (i5 = null), this.next = null, this.prev = null, this._id = t5, this._data = i5;
              }
              function s3() {
                this.start = new e3(), this.end = new e3(), this._idCounter = 0, this._numNodes = 0, this.start.next = this.end, this.start.prev = null, this.end.prev = this.start, this.end.next = null;
              }
              i4.ListNode = e3, s3.prototype.insertBefore = function(t5, i5) {
                return (i5 = new e3(this._idCounter, i5)).next = t5, i5.prev = t5.prev, t5.prev && (t5.prev.next = i5), t5.prev = i5, ++this._idCounter, ++this._numNodes, i5;
              }, s3.prototype.addLast = function(t5) {
                return this.insertBefore(this.end, t5);
              }, s3.prototype.add = function(t5) {
                return this.addLast(t5);
              }, s3.prototype.getFirst = function() {
                return 0 === this._numNodes ? null : this.start.next;
              }, s3.prototype.getLast = function() {
                return 0 === this._numNodes ? null : this.end.prev;
              }, s3.prototype.size = function() {
                return this._numNodes;
              }, s3.prototype.getFromFirst = function(t5) {
                var i5 = 0, n5 = this.start.next;
                if (0 <= t5)
                  for (; i5 < t5 && null !== n5; )
                    n5 = n5.next, ++i5;
                else
                  n5 = null;
                if (null === n5)
                  throw "Index out of bounds.";
                return n5;
              }, s3.prototype.get = function(t5) {
                return 0 === t5 ? this.getFirst() : t5 === this._numNodes - 1 ? this.getLast() : this.getFromFirst(t5);
              }, s3.prototype.remove = function(t5) {
                return t5.prev && (t5.prev.next = t5.next), t5.next && (t5.next.prev = t5.prev), --this._numNodes, t5;
              }, s3.prototype.removeFirst = function() {
                var t5 = null;
                return 0 < this._numNodes && this.start.next ? this.remove(this.start.next) : t5;
              }, s3.prototype.removeLast = function() {
                var t5 = null;
                return 0 < this._numNodes && this.end.prev ? this.remove(this.end.prev) : t5;
              }, s3.prototype.removeAll = function() {
                this.start.next = this.end, this.end.prev = this.start, this._numNodes = 0, this._idCounter = 0;
              }, s3.prototype.each = function(t5) {
                for (var i5 = this.start; i5.hasNext(); )
                  t5(i5 = i5.next);
              }, s3.prototype.find = function(t5) {
                for (var i5 = this.start, n5 = false, e4 = null; i5.hasNext() && !n5; )
                  t5(i5 = i5.next) && (e4 = i5, n5 = true);
                return e4;
              }, s3.prototype.map = function(t5) {
                for (var i5 = this.start, n5 = []; i5.hasNext(); )
                  t5(i5 = i5.next) && n5.push(i5);
                return n5;
              }, s3.prototype.push = function(t5) {
                return this.addLast(t5);
              }, s3.prototype.unshift = function(t5) {
                this.insertBefore(0 < this._numNodes ? this.start.next : this.end, t5);
              }, s3.prototype.pop = function() {
                return this.removeLast();
              }, s3.prototype.shift = function() {
                return this.removeFirst();
              }, i4.LinkedList = s3;
            }, function(t4, i4, n4) {
              var e3 = this && this.__createBinding || (Object.create ? function(t5, i5, n5, e4) {
                void 0 === e4 && (e4 = n5), Object.defineProperty(t5, e4, { enumerable: true, get: function() {
                  return i5[n5];
                } });
              } : function(t5, i5, n5, e4) {
                t5[e4 = void 0 === e4 ? n5 : e4] = i5[n5];
              }), r3 = this && this.__setModuleDefault || (Object.create ? function(t5, i5) {
                Object.defineProperty(t5, "default", { enumerable: true, value: i5 });
              } : function(t5, i5) {
                t5.default = i5;
              }), s3 = this && this.__importStar || function(t5) {
                if (t5 && t5.__esModule)
                  return t5;
                var i5 = {};
                if (null != t5)
                  for (var n5 in t5)
                    "default" !== n5 && Object.hasOwnProperty.call(t5, n5) && e3(i5, t5, n5);
                return r3(i5, t5), i5;
              }, o3 = this && this.__importDefault || function(t5) {
                return t5 && t5.__esModule ? t5 : { default: t5 };
              }, u3 = (Object.defineProperty(i4, "__esModule", { value: true }), i4.CloudSettingProtoBuf = void 0, o3(n4(3))), a = (s3 = s3(n4(5)), o3(n4(18)).default.cloudsetting);
              function c() {
              }
              s3.util.Long = u3.default, s3.configure(), c.prototype.encodeCloudSettingReq = function(t5) {
                var i5 = a.GetCloudSettingConfigRequest;
                return t5 = i5.create(t5), i5.encode(t5).finish();
              }, c.prototype.decodeCloudSettingRsp = function(t5) {
                return a.GetCloudSettingConfigResponse.decode(t5);
              }, i4.CloudSettingProtoBuf = c;
            }, function(t4, i4, n4) {
              n4.r(i4);
              var e3 = n4(5);
              n4 = n4(4), (e3 = e3.default || e3).util.Long = n4.default || n4;
              let r3 = e3.util.Long.fromBits || function() {
                return 0;
              };
              for (var s3 = e3.roots, o3 = e3.types ? e3.types.basic : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0, string: 2, bytes: 2 }, u3 = e3.types ? e3.types.packed : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0 }, a = Object.keys(o3), c = { $: function(t5) {
                return c[t5] ? c[t5].call(this) : s3[t5].decode ? s3[t5].decode(this, this.uint32()) : c.$.call(this, "int32");
              } }, h = { $: function(t5, i5, n5) {
                var e4 = o3[t5];
                return void 0 === e4 ? s3[t5].encode ? (this.uint32(n5 << 3 | 2).fork(), s3[t5].encode(i5, this).ldelim()) : h.$.call(this, "int32", i5, n5) : h[t5].call(this.uint32(n5 << 3 | e4), i5);
              } }, f = 0; f < a.length; f++)
                c[a[f]] = e3.Reader.prototype[a[f]], h[a[f]] = e3.Writer.prototype[a[f]];
              !function t5(i5, n5, a2, f2) {
                for (var l = 0, d = Object.keys(i5); l < d.length; l++) {
                  var v = d[l];
                  if (i5[v].$m && Object.keys(i5[v].$m).every(function(t6) {
                    return Number(t6);
                  })) {
                    if (a2[v])
                      throw Error(`nested type ${a2}.${v} has already exist`);
                    a2[v] = ((i6, a3) => {
                      function f3(t6) {
                        for (var n6 in i6)
                          "{" === (n6 = i6[n6])[1].charAt(0) ? this[n6[0]] = {} : "[" !== n6[1].charAt(0) && "<" !== n6[1].charAt(0) || (this[n6[0]] = []);
                        if (t6)
                          for (var e4 = Object.keys(t6), r4 = 0; r4 < e4.length; ++r4)
                            null != t6[e4[r4]] && (this[e4[r4]] = t6[e4[r4]]);
                      }
                      var l2, d2 = {};
                      for (l2 in i6) {
                        var v2 = i6[l2], m = v2[1];
                        "{" === m.charAt(0) ? (f3.prototype[v2[0]] = e3.util.emptyObject, d2[m] = { $m: m.substring(1).split(",").map(function(t6, i7) {
                          return ["$" + (i7 + 1), t6, null];
                        }).reduce(function(t6, i7, n6) {
                          return t6[n6 + 1] = i7, t6;
                        }, {}) }) : f3.prototype[v2[0]] = "[" === m.charAt(0) || "<" === m.charAt(0) ? e3.util.emptyArray : "bytes" === m ? e3.util.newBuffer([]) : v2[2] && v2[2].hasOwnProperty("low") && v2[2].hasOwnProperty("high") ? r3(v2[2].low, v2[2].high, v2[2].unsigned) : v2[2];
                      }
                      return f3.create = function(t6) {
                        return new f3(t6);
                      }, f3.decode = function(t6, n6) {
                        t6 instanceof e3.Reader || (t6 = e3.Reader.create(t6));
                        for (var r4 = void 0 === n6 ? t6.len : t6.pos + n6, o4 = new f3(); t6.pos < r4; ) {
                          var a4 = t6.uint32();
                          if (0 < (d3 = a4 >>> 3) && i6[d3]) {
                            var h2 = i6[d3][0];
                            if ("{" === (l3 = i6[d3][1]).charAt(0))
                              o4[h2] === e3.util.emptyObject && (o4[h2] = {}), d3 = f3.$namespace[l3].decode(t6, t6.uint32()), o4[h2][d3.$1] = d3.$2;
                            else if ("[" === l3.charAt(0) || "<" === l3.charAt(0)) {
                              l3 = l3.substring(1), o4[h2] && o4[h2].length || (o4[h2] = []);
                              var l3, d3 = !c[l3] && !s3[l3].decode;
                              if (void 0 !== u3[l3 = d3 ? "int32" : l3] && 2 == (7 & a4))
                                for (var v3 = t6.uint32() + t6.pos; t6.pos < v3; )
                                  o4[h2].push(c.$.call(t6, l3));
                              else
                                o4[h2].push(c.$.call(t6, l3));
                            } else
                              o4[h2] = c.$.call(t6, l3);
                          } else
                            t6.skipType(7 & a4);
                        }
                        return o4;
                      }, f3.encode = function(t6, n6) {
                        for (var r4 in n6 = n6 || e3.Writer.create(), i6) {
                          var a4 = i6[r4][0];
                          if ("{" === (m2 = i6[r4][1]).charAt(0)) {
                            if (null != t6[a4] && t6.hasOwnProperty(a4))
                              for (var c2 = 0, l3 = Object.keys(t6[a4]); c2 < l3.length; ++c2)
                                n6.uint32(r4 << 3 | 2).fork(), f3.$namespace[m2].encode({ $1: l3[c2], $2: t6[a4][l3[c2]] }, n6).ldelim();
                          } else if ("[" === m2.charAt(0) || "<" === m2.charAt(0)) {
                            var d3 = "<" === m2.charAt(0), v3 = (m2 = m2.substring(1), t6[a4]);
                            if (null != v3 && v3.length) {
                              var m2 = void 0 !== o3[m2] || s3[m2].encode ? m2 : "int32";
                              if (d3 && void 0 !== u3[m2]) {
                                for (n6.uint32(r4 << 3 | 2).fork(), c2 = 0; c2 < v3.length; c2++)
                                  h[m2].call(n6, v3[c2]);
                                n6.ldelim();
                              } else
                                for (c2 = 0; c2 < v3.length; c2++)
                                  h.$.call(n6, m2, v3[c2], r4);
                            }
                          } else
                            null != t6[a4] && t6.hasOwnProperty(a4) && h.$.call(n6, m2, t6[a4], r4);
                        }
                        return n6;
                      }, Object.keys(d2).length && (f3.$namespace = t5(d2, n5 + "." + a3, f3.$namespace || {}, true)), f3;
                    })(i5[v].$m, v);
                  } else
                    i5[v].$s ? a2[v] = ((t6, i6) => {
                      function r4(t7, i7, n6) {
                        e3.rpc.Service.call(this, t7, i7, n6);
                      }
                      return ((r4.prototype = Object.create(e3.rpc.Service.prototype)).constructor = r4).create = function(t7, i7, n6) {
                        return new r4(t7, i7, n6);
                      }, Object.keys(t6).forEach(function(e4) {
                        var o4 = t6[e4];
                        function u4(t7, i7) {
                          return this.rpcCall(u4, s3[o4[0]], s3[o4[1]], t7, i7);
                        }
                        Object.defineProperty(u4, "name", { value: e4 }), Object.defineProperty(u4, "path", { value: n5 + "." + i6 }), r4.prototype[e4] = u4;
                      }), r4;
                    })(i5[v].$s, v) : i5[v].$e && Object.values(i5[v].$e).every(function(t6) {
                      return Number(t6) === t6;
                    }) && (a2[v] = ((t6) => {
                      for (var i6 = Object.keys(t6), n6 = {}, e4 = 0; e4 < i6.length; e4++)
                        n6[n6[i6[e4]] = t6[i6[e4]]] = i6[e4];
                      return n6;
                    })(i5[v].$e));
                  a2[v] && !f2 && (s3[n5 + "." + v] = a2[v]), delete i5[v].$m, delete i5[v].$s, delete i5[v].$e, a2[v] = t5(i5[v], Boolean(n5) ? n5 + "." + v : v, a2[v] || {});
                }
                return a2;
              }({ cloudsetting: { cloudsetting: { CloudSettingFileResponse: { $m: { 1: ["code", "int64", { low: 0, high: 0, unsigned: false }], 2: ["message", "string", ""], 3: ["file_name", "string", ""], 4: ["global_version", "string", ""], 5: ["version", "string", ""], 6: ["app_version", "string", ""], 7: ["json_data", "bytes", []], 8: ["hash", "bytes", []], 9: ["g_version", "uint32", 0] } }, File: { $m: { 1: ["file_name", "string", ""], 2: ["hash", "bytes", []], 3: ["g_version", "uint32", 0] } }, GetCloudSettingConfigRequest: { $m: { 1: ["product", "cloudsetting.cloudsetting.Product", 0], 2: ["response_compress", "int32", 0], 3: ["file_list", "<string", null], 4: ["param_list", "<cloudsetting.cloudsetting.Param", null], 5: ["files", "<cloudsetting.cloudsetting.File", null], 6: ["p_version", "uint32", 0] } }, GetCloudSettingConfigResponse: { $m: { 1: ["code", "int64", { low: 0, high: 0, unsigned: false }], 2: ["message", "string", ""], 3: ["polling_interval", "int32", 0], 4: ["file_response", "<cloudsetting.cloudsetting.CloudSettingFileResponse", null] } }, Param: { $m: { 1: ["key", "string", ""], 2: ["value", "string", ""] } }, Product: { $e: { RTC: 0, WEB_RTC: 1, ZIM: 2, ROOM_KIT: 3, DOC_SHARE: 4, WHITE_BOARD: 5, SELF_CHECK: 999, TEST_ANOOUS: 1e3 } } } } }, "", s3, false), e3.util.global.cloudsetting = s3.cloudsetting, i4.default = s3.cloudsetting;
            }], u2 = {}, s2.m = o2, s2.c = u2, s2.d = function(t4, i4, n4) {
              s2.o(t4, i4) || Object.defineProperty(t4, i4, { enumerable: true, get: n4 });
            }, s2.r = function(t4) {
              "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t4, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t4, "__esModule", { value: true });
            }, s2.t = function(t4, i4) {
              if (1 & i4 && (t4 = s2(t4)), 8 & i4)
                return t4;
              if (4 & i4 && "object" == typeof t4 && t4 && t4.__esModule)
                return t4;
              var n4 = /* @__PURE__ */ Object.create(null);
              if (s2.r(n4), Object.defineProperty(n4, "default", { enumerable: true, value: t4 }), 2 & i4 && "string" != typeof t4)
                for (var e3 in t4)
                  s2.d(n4, e3, (function(i5) {
                    return t4[i5];
                  }).bind(null, e3));
              return n4;
            }, s2.n = function(t4) {
              var i4 = t4 && t4.__esModule ? function() {
                return t4.default;
              } : function() {
                return t4;
              };
              return s2.d(i4, "a", i4), i4;
            }, s2.o = function(t4, i4) {
              return Object.prototype.hasOwnProperty.call(t4, i4);
            }, s2.p = "", s2(s2.s = 7);
            function s2(t4) {
              var i4;
              return (u2[t4] || (i4 = u2[t4] = { i: t4, l: false, exports: {} }, o2[t4].call(i4.exports, i4, i4.exports, s2), i4.l = true, i4)).exports;
            }
            var o2, u2;
          }(n2(6994), n2(3788), n2(6361), n2(955), n2(5178));
        }, 4908: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { $7: function() {
            return Bt;
          }, $9: function() {
            return bt;
          }, $H: function() {
            return ii;
          }, $Q: function() {
            return Yt;
          }, $g: function() {
            return L;
          }, AJ: function() {
            return P;
          }, AW: function() {
            return ct;
          }, B$: function() {
            return u2;
          }, BY: function() {
            return Xt;
          }, Bc: function() {
            return kt;
          }, CK: function() {
            return _t;
          }, Cp: function() {
            return W;
          }, D1: function() {
            return Dt;
          }, E$: function() {
            return $;
          }, EV: function() {
            return Ot;
          }, F: function() {
            return It;
          }, FQ: function() {
            return Et;
          }, Fv: function() {
            return ti;
          }, GV: function() {
            return Rt;
          }, HF: function() {
            return Zt;
          }, Hu: function() {
            return Ct;
          }, Io: function() {
            return Gt;
          }, J8: function() {
            return J;
          }, Jd: function() {
            return St;
          }, Jv: function() {
            return T;
          }, KG: function() {
            return N;
          }, KZ: function() {
            return G;
          }, Kt: function() {
            return Kt;
          }, Lk: function() {
            return st;
          }, MJ: function() {
            return Y;
          }, Mc: function() {
            return Jt;
          }, Mu: function() {
            return E;
          }, Mw: function() {
            return pt;
          }, N7: function() {
            return v;
          }, Nr: function() {
            return z;
          }, ON: function() {
            return K;
          }, Of: function() {
            return xt;
          }, Og: function() {
            return w;
          }, Oq: function() {
            return d;
          }, Ov: function() {
            return vt;
          }, Pe: function() {
            return dt;
          }, RI: function() {
            return Ht;
          }, S2: function() {
            return Nt;
          }, Sb: function() {
            return Ut;
          }, TW: function() {
            return at;
          }, Ux: function() {
            return gt;
          }, V0: function() {
            return ut;
          }, Vz: function() {
            return C;
          }, We: function() {
            return F;
          }, Wg: function() {
            return R;
          }, Xk: function() {
            return ot;
          }, YO: function() {
            return I;
          }, Yu: function() {
            return s2;
          }, Z1: function() {
            return g;
          }, _F: function() {
            return ht;
          }, _T: function() {
            return A;
          }, _g: function() {
            return lt;
          }, _u: function() {
            return At;
          }, aH: function() {
            return wt;
          }, aT: function() {
            return M;
          }, bs: function() {
            return Mt;
          }, ch: function() {
            return S;
          }, co: function() {
            return et;
          }, e7: function() {
            return l;
          }, eH: function() {
            return m;
          }, eU: function() {
            return h;
          }, er: function() {
            return j;
          }, es: function() {
            return Qt;
          }, fF: function() {
            return U;
          }, fj: function() {
            return mt;
          }, fn: function() {
            return it;
          }, fo: function() {
            return k;
          }, gf: function() {
            return B;
          }, i6: function() {
            return a;
          }, iJ: function() {
            return jt;
          }, k1: function() {
            return Z;
          }, kA: function() {
            return rt;
          }, kn: function() {
            return zt;
          }, lZ: function() {
            return $t;
          }, li: function() {
            return Vt;
          }, nO: function() {
            return f;
          }, ns: function() {
            return qt;
          }, ny: function() {
            return V;
          }, oI: function() {
            return q;
          }, oW: function() {
            return x;
          }, oe: function() {
            return Ft;
          }, oq: function() {
            return c;
          }, ov: function() {
            return H;
          }, pR: function() {
            return Pt;
          }, pT: function() {
            return p;
          }, r2: function() {
            return yt;
          }, rH: function() {
            return nt;
          }, rP: function() {
            return Q;
          }, r_: function() {
            return y;
          }, tH: function() {
            return ni;
          }, tI: function() {
            return tt;
          }, tp: function() {
            return _;
          }, v2: function() {
            return O;
          }, vB: function() {
            return Tt;
          }, vW: function() {
            return o2;
          }, wH: function() {
            return ft;
          }, w_: function() {
            return Wt;
          }, wd: function() {
            return Lt;
          }, x6: function() {
            return X;
          }, xp: function() {
            return b;
          }, zF: function() {
            return D;
          } });
          var e2 = n2(8627), r2 = n2(5095), s2 = "/sdk/init", o2 = { event: s2, error: { _n: e2.ZEp }, system_info: r2.tK, servers: r2.yp }, u2 = { event: "/sdk/login" }, a = { event: "listener" }, c = { event: s2 }, h = { event: "/sdk/create_stream", error: { yn: e2.OrZ, wn: e2.LLz, Sn: e2.t85, En: e2.yK, In: e2.L8E, Rn: e2.FB3, Tn: e2.mrK, Cn: e2.zs3, An: e2.Be2, zn: e2.JSm }, stream_type: r2.tK, screen: r2.Gq, camera: r2.Gq, custom: r2.Gq, preview_conf: r2.Gq, media_stream_id: r2.tK }, f = { event: "/sdk/create_zego_stream", local_stream_id: r2.tK, stream_options: r2.Gq }, l = { event: "/sdk/start_capture_mic", local_stream_id: r2.tK, stream_options: r2.Gq }, d = { event: "/sdk/start_capture_camera", local_stream_id: r2.tK, stream_options: r2.Gq }, v = { event: "/sdk/start_capture_camera_mic", local_stream_id: r2.tK, stream_options: r2.Gq }, m = { event: "/sdk/start_capture_custom_audio", local_stream_id: r2.tK, stream_options: r2.Gq }, p = { event: "/sdk/start_capture_custom_video", local_stream_id: r2.tK, stream_options: r2.Gq }, g = { event: "/sdk/start_capture_custom_video_audio", local_stream_id: r2.tK, stream_options: r2.Gq }, b = { event: "/sdk/start_capture_screen_video", local_stream_id: r2.tK, stream_options: r2.Gq }, _ = { event: "/sdk/start_capture_screen_video_audio", local_stream_id: r2.tK, stream_options: r2.Gq }, y = { event: "/sdk/update_publish_stream", local_stream_id: r2.tK, update_type: r2.Tr }, w = { event: "/sdk/start_publish", error: { Dn: e2.LLz, Nn: e2.Q9p, Pn: e2.xfZ, Mn: e2.gSF, xn: e2.PA0, jn: e2.fzq, qn: e2.f43, Ln: e2.qvY, Bn: e2.S4u, Un: e2.SRE, Gn: e2.Xxx, Jn: e2.g9p, Fn: e2.jZ$, Hn: e2.$wo, Vn: e2.SmZ, Qn: e2.VU9, Yn: e2.MrD, Kn: e2.ZpF, Zn: e2.iei, Xn: e2.aa2, Wn: e2.HCP, $n: e2.dg1, te: e2._68, ie: e2.kbF, ne: e2.kOd, ee: e2.WP4, re: e2.JDv, se: e2.Q3v, ue: e2.RBR, ae: e2.NCg, ce: e2.xbZ, he: e2.OdW, fe: e2.sJH, le: e2.MrS }, urls: r2.yp, server_url: r2.tK, publish_option: r2.Gq, message: r2.tK, stream_id: r2.tK, stream_sid: r2.Tr, room_id: r2.tK, video_en_codec_id: r2.Tr, cap_w: r2.Tr, cap_h: r2.Tr, w: r2.Tr, h: r2.Tr, video_en_fps: r2.Tr, video_en_bps: r2.Tr, audio_c_channel_count: r2.Tr, audio_en_bps: r2.Tr, aec_level: r2.Tr, ans_level: r2.Tr, agc: r2.yS, traffic_control_min_video_bitrate: { bitrate: r2.Tr, mode: r2.Tr }, cap_volume: r2.Tr, enable_camera: r2.yS, enable_mic: r2.yS, video_activate: r2.yS, audio_activate: r2.yS, gw_version: r2.Tr, is_dual_stream: r2.Tr, is_mini: r2.yS, is_peer: r2.yS }, S = { event: "/publish/start", is_peer: r2.yS, reason: r2.tK, url: r2.tK, ip: r2.tK, peer_id: r2.Tr, source_type: r2.tK, net_protocol: r2.tK, wait_consume: r2.Tr, dispatch_consume: r2.Tr, signal_consume: r2.Tr, is_dual_stream: r2.Tr, is_mini: r2.yS, mini_error: r2.Tr, port: r2.Tr }, E = { event: "/publish/rtc_dispatch", ip_mode: r2.Tr, gw_nodes: r2.yp, ip_infos: r2.Gq, ip_v6_infos: r2.Gq }, k = { event: "/publish/restart", stream_id: r2.tK, server_url: r2.tK, reason_code: r2.Tr, is_dual_stream: r2.Tr, is_mini: r2.yS, mini_error: r2.Tr }, O = { event: "/sdk/publish", room_id: r2.tK, room_sid_string: r2.tK, retry_btime: r2.Tr, max_retry_interval: r2.Tr, fail_cnt: r2.Tr, continuous_fail_cnt: r2.Tr, probe_ip_cnt: r2.Tr, valid_probe_ip_cnt: r2.Tr, poor_quality_retry_cnt: r2.Tr, use_resource_type: r2.yp, probe_not_trigger_retry_info: r2.Gq, stop_reason: r2.tK, child_error: r2.Tr, try_time: r2.Tr, try_cnt: r2.Tr, server_url: r2.tK, publish_begin_time: r2.Tr, publish_state_time: r2.Tr, bitrate: r2.Tr, h: r2.Tr, w: r2.Tr, cap_w: r2.Tr, cap_h: r2.Tr, fps: r2.Tr, use_na: r2.Tr, env: r2.Tr, webrtc_sid: r2.Tr, stream_id: r2.tK, itemtype: r2.tK, total_d: r2.Tr, valid_d: r2.Tr, tempbroken_cnt: r2.Tr }, I = { event: "/sdk/api/publish_video_c_size", webrtc_sid: r2.Tr, w: r2.Tr, h: r2.Tr }, R = { event: "/sdk/play_video_size_changed", webrtc_sid: r2.Tr, w: r2.Tr, h: r2.Tr }, T = { event: "/rtc/publish", tryidx: r2.Tr, url: r2.tK, ip: r2.tK, net_protocol: r2.tK, lsttime: r2.Tr, denied_info: r2.tK, dispatch_external_ip: r2.tK, total_stat: r2.Gq, room_id: r2.tK, room_sid_string: r2.tK, resource_type: r2.tK, protocol: r2.tK, stop_reason: r2.tK, try_time: r2.Tr }, C = { event: "/sdk/stop_publish", error: { wn: e2.LLz }, stream_id: r2.tK, stream_sid: r2.Tr, room_id: r2.tK }, A = { event: "/rtc/publish_stream_state_error" }, z = { event: "/sdk/start_play", error: { de: e2.d49, ve: e2.ann, me: e2.clM, pe: e2.J79, ge: e2.S4u, be: e2.RfS, _e: e2.Q9p, ye: e2.xfZ, we: e2.gSF, Se: e2.PA0, Ee: e2.b1q, ke: e2.RZs, Oe: e2.XHx, Ie: e2.cMG, Re: e2.zML, Te: e2.ekj, Vn: e2.dqB, Qn: e2.gHA, Kn: e2.MK1, Yn: e2.dXc, Zn: e2.hje, Xn: e2.Zws, Wn: e2.SB8, te: e2.B3d, $n: e2.wxm, Ce: e2.Arx, ne: e2.lgu, ee: e2.Tij, Ae: e2.pWJ, ze: e2.MuX, De: e2.I4J, he: e2.OdW, Ne: e2.ckD, Me: e2.hYx, xe: e2.T_8 }, room_id: r2.tK, urls: r2.yp, server_url: r2.tK, video_layer: r2.Tr, play_option: r2.Gq, message: r2.tK, stream_id: r2.tK, stream_sid: r2.Tr, resource_mode: r2.Tr, src: r2.tK, video_codec_id: r2.tK, room_sid_string: r2.tK, is_multi: r2.yS, audio_activate: r2.yS, video_activate: r2.yS, gw_version: r2.Tr, use_na: r2.Tr, biz_product: r2.Tr, is_peer: r2.yS, is_mini: r2.yS }, D = { event: "/play/start", tryidx: r2.Tr, is_peer: r2.yS, reason: r2.tK, url: r2.tK, ip: r2.tK, port: r2.Tr, peer_id: r2.Tr, source_type: r2.tK, net_protocol: r2.tK, wait_consume: r2.Tr, dispatch_consume: r2.Tr, signal_consume: r2.Tr, biz_product: r2.Tr, is_mini: r2.yS }, N = { event: "/play/rtc_dispatch", ip_mode: r2.Tr, gw_nodes: r2.yp, ip_infos: r2.Gq, ip_v6_infos: r2.Gq }, P = { event: "/play/l3_dispatch", ip_mode: r2.Tr, gw_nodes: r2.yp, ip_infos: r2.Gq, ip_v6_infos: r2.Gq }, M = { event: "/play/restart", stream_id: r2.tK, server_url: r2.tK, reason_code: r2.Tr, ip: r2.tK, is_mini: r2.yS }, x = { event: "/sdk/play", audio_cumulative_break_time: r2.Tr, audio_cumulative_decode_time: r2.Tr, video_cumulative_break_time: r2.Tr, video_cumulative_decode_time: r2.Tr, l3_a_break_time: r2.Tr, l3_a_decode_time: r2.Tr, l3_v_break_time: r2.Tr, l3_v_decode_time: r2.Tr, rtc_a_break_time: r2.Tr, rtc_a_decode_time: r2.Tr, rtc_v_break_time: r2.Tr, rtc_v_decode_time: r2.Tr, fft_audio: r2.Tr, fft_video: r2.Tr, room_id: r2.tK, room_sid_string: r2.tK, retry_btime: r2.Tr, max_retry_interval: r2.Tr, use_na: r2.Tr, fail_cnt: r2.Tr, continuous_fail_cnt: r2.Tr, probe_ip_cnt: r2.Tr, valid_probe_ip_cnt: r2.Tr, poor_quality_retry_cnt: r2.Tr, probe_not_trigger_retry_info: r2.Gq, use_resource_type: r2.yp, stop_reason: r2.tK, child_error: r2.Tr, try_time: r2.Tr, try_cnt: r2.Tr, webrtc_sid: r2.Tr, itemtype: r2.tK, server_url: r2.tK, play_begin_time: r2.Tr, play_state_time: r2.Tr, play_state_cnt: r2.Tr, first_frame_time: r2.Tr, protocol: r2.tK, dispatch_external_ip: r2.tK, total_stat: r2.Gq, w: r2.Tr, h: r2.Tr, abrc: r2.Tr, vbrc: r2.Tr, vinfo: r2.Gq, total_d: r2.Tr, valid_d: r2.Tr, tempbroken_cnt: r2.Tr }, j = { event: "/rtc/play", tryidx: r2.Tr, url: r2.tK, ip: r2.tK, stream_id: r2.tK, room_id: r2.tK, room_sid_string: r2.tK, net_protocol: r2.tK, lsttime: r2.Tr, denied_info: r2.tK, stop_reason: r2.tK, dispatch_external_ip: r2.tK, env: r2.Tr, resource_type: r2.tK, protocol: r2.tK, total_stat: r2.Gq, vinfo: r2.Gq, try_time: r2.Tr }, q = { event: "/sdk/stop_play", error: { wn: e2.LLz }, room_id: r2.tK, stream_id: r2.tK, webrtc_sid: r2.Tr, stream_sid: r2.Tr, biz_product: r2.Tr }, L = { event: "/rtc/play_stream_state_error" }, B = { event: "/device/list", error: { yn: e2.OrZ, je: e2.s_m }, dev_list: r2.Gq, dev_kind: r2.tK }, U = { event: "/device/audio_device_changed", error: { yn: e2.OrZ, je: e2.s_m }, interrupt: r2.Tr, device: r2.tK, device_name: r2.tK }, G = { event: "/device/video_device_changed", error: { yn: e2.OrZ, je: e2.s_m }, interrupt: r2.Tr, device: r2.tK, device_name: r2.tK }, J = { event: "/sdk/check_system", capability: r2.Gq }, F = { event: "/sdk/remote_camera_update", stream_id: r2.tK, camera_status: r2.tK, status_code: r2.Tr }, H = { event: "/sdk/remote_mic_update", stream_id: r2.tK, mic_status: r2.tK, status_code: r2.Tr }, V = { event: "/sdk/destroy_stream", error: { qe: e2.S5f }, stop_reason: r2.tK }, Q = { event: "/device/api/audio_output", device: r2.tK, device_name: r2.tK, reason_type: r2.tK }, Y = { event: "/liveroom/recv_stream_update_info", stream_update_type: r2.tK, stream_seq: r2.Tr, stream_list: r2.Gq, error: { Le: e2.sVF } }, K = { event: "/liveroom/send_stream_update_info", stream_update_type: r2.tK, stream_extra_info: r2.tK, stream_id: r2.tK, send_seq: r2.Tr, use_na: r2.Tr }, Z = { event: "/liveroom/get_current_stream_list", room_id: r2.tK, room_sid_string: r2.tK, stream_seq: r2.Tr, stream_size: r2.Tr, stream_list: r2.Gq, use_ua: r2.Tr, error: { wn: e2.LLz, NOT_LOGIN: e2.S4u } }, X = { event: "/sdk/net_first_video_frame", webrtc_sid: r2.Tr, fft_consumed: r2.Gq, resource_type: r2.tK, reliability: r2.Tr, push_consumed: r2.Tr, prepare_recv_consumed: r2.Tr, connected_consumed: r2.Tr, protocol: r2.tK, biz_product: r2.Tr, dev_changed: r2.yS }, W = { event: "/sdk/net_first_audio_frame", webrtc_sid: r2.Tr, fft_consumed: r2.Gq, resource_type: r2.tK, reliability: r2.Tr, push_consumed: r2.Tr, prepare_recv_consumed: r2.Tr, connected_consumed: r2.Tr, protocol: r2.tK, biz_product: r2.Tr, dev_changed: r2.yS }, $ = { event: "/app/lifecycle", state: r2.tK }, tt = { event: "/sdk/publish_volume_changed", old_cap_volume: r2.Tr, cap_volume: r2.Tr, change_duration: r2.Tr, error: { wn: e2.ZEp } }, it = { event: "/sdk/listener" }, nt = { event: "/sdk/network_change", current_client_ip: r2.tK, last_client_ip: r2.tK }, et = { event: "/sdk/network_first_ntp_sync", ntp_source: r2.Tr, ntp_offset: r2.Tr }, rt = { event: "/sdk/net_probe", net_quality: r2.Tr, node_list: r2.yp }, st = { event: "/sdk/net_probe_result", is_switch: r2.yS, is_publish: r2.yS, stream_id: r2.tK, result: r2.Tr, node: r2.tK, net_quality: r2.Tr, probe_net_quality: r2.Tr }, ot = { event: "/cloud_setting/cache", files: r2.Gq }, ut = { event: "/cdn/play", protocol: r2.tK, tryidx: r2.Tr, url: r2.tK, stop_reason: r2.tK, biz_product: r2.Tr }, at = { event: "/l3/play", protocol: r2.tK, tryidx: r2.Tr, url: r2.tK, stop_reason: r2.tK, biz_product: r2.Tr, try_time: r2.Tr }, ct = { event: "/sdk/play_src_changed", last_src: r2.tK, src: r2.tK, biz_product: r2.Tr }, ht = { event: "/publish/create_offer", sdp: r2.tK, stream_type: r2.tK, is_mini: r2.yS, is_dual_stream: r2.Tr }, ft = { event: "/publish/set_local_sdp", sdp: r2.tK, stream_type: r2.tK, is_mini: r2.yS, is_dual_stream: r2.Tr }, lt = { event: "/publish/create_session", sdp: r2.tK, is_mini: r2.yS, gw_nodes: r2.yp, gw_nodes_ttl: r2.Tr, gw_version: r2.Tr, webrtc_sid: r2.Tr }, dt = { event: "/publish/set_remote_sdp", sdp: r2.tK, is_mini: r2.yS, webrtc_sid: r2.Tr, is_dual_stream: r2.Tr }, vt = { event: "/publish/ice_connected", webrtc_sid: r2.Tr }, mt = { event: "/publish/rtc_publish_event", event_state: r2.Tr, webrtc_sid: r2.Tr }, pt = { event: "/rtc/play_event_message", event_state: r2.Tr, webrtc_sid: r2.Tr }, gt = { event: "/rtc/recv_close_session", err_info: r2.Gq }, bt = { event: "/rtc/recv_reset_session" }, _t = { event: "/rtc/ice_connection_state_changed", ice_state: r2.tK }, yt = { event: "/publish/send_media_desc", webrtc_sid: r2.Tr, remote_sdp: r2.tK }, wt = { event: "/publish/send_ice_candidate", candidate_info: r2.Gq }, St = { event: "/play/create_offer", sdp: r2.tK, is_mini: r2.yS, stream_type: r2.tK }, Et = { event: "/play/set_local_sdp", sdp: r2.tK, is_mini: r2.yS, stream_type: r2.tK }, kt = { event: "/play/create_session", sdp: r2.tK, is_mini: r2.yS, gw_nodes: r2.yp, gw_nodes_ttl: r2.Tr, gw_version: r2.Tr, webrtc_sid: r2.Tr }, Ot = { event: "/play/set_remote_sdp", sdp: r2.tK, is_mini: r2.yS, webrtc_sid: r2.Tr }, It = { event: "/play/ice_connected", webrtc_sid: r2.Tr }, Rt = { event: "/play/send_media_desc", webrtc_sid: r2.Tr, remote_sdp: r2.tK }, Tt = { event: "/play/send_ice_candidate", candidate_info: r2.Gq }, Ct = { event: "/zegoconn/connect" }, At = { event: "/sdk/net_ip_stack", ipv4: r2.tK, ipv6: r2.tK }, zt = { event: "/sdk/media_login_req" }, Dt = { event: "/zegoconn/proxy_connect", service_no: r2.Tr, proxy_link_sources: r2.Tr, recv_time: r2.Tr, connect_stream: r2.Tr }, Nt = { event: "/zegoconn/proxy_broken", service_no: r2.Tr }, Pt = { event: "/zegoconn/proxy_disconnect", service_no: r2.Tr }, Mt = { event: "/rtc/exception_update", stream: r2.tK, code: r2.Tr, message: r2.tK }, xt = { event: "/sdk/publish_target", error: { wn: e2.ZEp, Be: e2.xU2, Ue: e2.S4u, Ge: e2.I7C, Je: e2.HO9, Fe: e2.aUw, He: e2.Oy0 } }, jt = { event: "/mss/pushadd", error: { wn: e2.ZEp }, stream_id: r2.tK, url: r2.tK }, qt = { event: "/mss/pushdel", error: { wn: e2.ZEp }, stream_id: r2.tK, url: r2.tK }, Lt = { event: "/sdk/set_video_config", error: { wn: e2.ZEp, qe: e2.S5f }, video_params: r2.Gq, video_conf: r2.Gq }, Bt = { event: "/sdk/set_audio_config", error: { wn: e2.ZEp, qe: e2.S5f }, audio_params: r2.Gq, audio_conf: r2.Gq }, Ut = { event: "/sdk/api/publish_video_en_size", w: r2.Tr, h: r2.Tr }, Gt = { event: "/sdk/api/publish_video_en_bps", bitrate: r2.Tr }, Jt = { event: "/sdk/api/publish_video_en_fps", fps: r2.Tr }, Ft = { event: "/sdk/replace_track", error: { wn: e2.ZEp }, track_kind: r2.tK }, Ht = { event: "/device/api/video_c", error: { wn: e2.ZEp, Ve: e2.ckg, qe: e2.S5f, Qe: e2.jut }, device: r2.tK, device_name: r2.tK, facing_mode: r2.tK }, Vt = { event: "/device/api/audio_c", error: { wn: e2.ZEp, Ve: e2.ckg, qe: e2.S5f }, device: r2.tK, device_name: r2.tK }, Qt = { event: "/sdk/play_content_changed", webrtc_sid: r2.Tr, video_activate: r2.yS, audio_activate: r2.yS, video_layer: r2.Tr }, Yt = { event: "/sdk/mute_publish_video", mute_type: r2.Tr, retain: r2.yS }, Kt = { event: "/sdk/mute_publish_audio", mute_type: r2.Tr }, Zt = { event: "/device/enable_mic", enable: r2.yS, stream_list: r2.Gq }, Xt = { event: "/device/enable_camera", enable: r2.yS, stream_list: r2.Gq }, Wt = { event: "/sdk/mute_play_video", mute_type: r2.Tr }, $t = { event: "/sdk/mute_play_audio", mute_type: r2.Tr }, ti = { event: "/liveroom/send_stream_extra_info", error: { wn: e2.ZEp, Ye: e2.PTE, Ue: e2.S4u, Be: e2.xU2, Ke: e2.m6U, _zpg_kExtraInfoNull: e2.PTE, _zpg_kExtraInfoTooLong: e2.V2t }, stream_id: r2.tK, send_seq: r2.Tr, stream_extra_info: r2.Gq, room_id: r2.tK, room_sid_string: r2.tK, use_na: r2.Tr }, ii = { event: "/active/sei", action: r2.Tr, info_type: r2.Tr }, ni = ["sdp", "remote_sdp"];
        }, 5095: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { Gq: function() {
            return e2;
          }, Tr: function() {
            return o2;
          }, tK: function() {
            return r2;
          }, yS: function() {
            return u2;
          }, yp: function() {
            return s2;
          } });
          var e2 = function(t3) {
            return t3;
          }, r2 = function(t3) {
            return t3;
          }, s2 = function(t3) {
            return t3;
          }, o2 = function(t3) {
            return t3;
          }, u2 = function(t3) {
            return t3;
          };
        }, 5178: function(t2, i2, n2) {
          var e2;
          t2.exports = (e2 = n2(9021), e2.enc.Utf8);
        }, 5471: function(t2, i2, n2) {
          var e2, r2, s2, o2, u2, a, c;
          t2.exports = (c = n2(9021), s2 = (r2 = (e2 = c).lib).WordArray, u2 = [], a = e2.algo.SHA1 = (o2 = r2.Hasher).extend({ _doReset: function() {
            this._hash = new s2.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520]);
          }, _doProcessBlock: function(t3, i3) {
            for (var n3 = this._hash.words, e3 = n3[0], r3 = n3[1], s3 = n3[2], o3 = n3[3], a2 = n3[4], c2 = 0; c2 < 80; c2++) {
              if (c2 < 16)
                u2[c2] = 0 | t3[i3 + c2];
              else {
                var h = u2[c2 - 3] ^ u2[c2 - 8] ^ u2[c2 - 14] ^ u2[c2 - 16];
                u2[c2] = h << 1 | h >>> 31;
              }
              var f = (e3 << 5 | e3 >>> 27) + a2 + u2[c2];
              f += c2 < 20 ? 1518500249 + (r3 & s3 | ~r3 & o3) : c2 < 40 ? 1859775393 + (r3 ^ s3 ^ o3) : c2 < 60 ? (r3 & s3 | r3 & o3 | s3 & o3) - 1894007588 : (r3 ^ s3 ^ o3) - 899497514, a2 = o3, o3 = s3, s3 = r3 << 30 | r3 >>> 2, r3 = e3, e3 = f;
            }
            n3[0] = n3[0] + e3 | 0, n3[1] = n3[1] + r3 | 0, n3[2] = n3[2] + s3 | 0, n3[3] = n3[3] + o3 | 0, n3[4] = n3[4] + a2 | 0;
          }, _doFinalize: function() {
            var t3 = this._data, i3 = t3.words, n3 = 8 * this._nDataBytes, e3 = 8 * t3.sigBytes;
            return i3[e3 >>> 5] |= 128 << 24 - e3 % 32, i3[14 + (e3 + 64 >>> 9 << 4)] = Math.floor(n3 / 4294967296), i3[15 + (e3 + 64 >>> 9 << 4)] = n3, t3.sigBytes = 4 * i3.length, this._process(), this._hash;
          }, clone: function() {
            var t3 = o2.clone.call(this);
            return t3._hash = this._hash.clone(), t3;
          } }), e2.SHA1 = o2._createHelper(a), e2.HmacSHA1 = o2._createHmacHelper(a), c.SHA1);
        }, 5733: function(t2) {
          "use strict";
          t2.exports = n;
        }, 5772: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { BeautyEffect: function() {
            return H;
          } });
          var e2 = n2(8627), r2 = n2(8866), s2 = n2(4872), o2 = n2(327), u2 = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, a = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, c = "zc.p.0.sbe.3", h = function() {
            function t3(t4) {
              this.an = t4, this.recordedFrameCount = 0, this.targetFrameRate = 0, this.recordingDuration = 0;
            }
            return t3.prototype.startRecordBeautyEffectOutput = function(t4) {
              return u2(this, void 0, void 0, function() {
                var i3, n3, e3, s3 = this;
                return a(this, function(o3) {
                  switch (o3.label) {
                    case 0:
                      return i3 = 6, this.recordID ? (this.an.warn(c + " detector is already recording"), [2, { result: true }]) : (n3 = (/* @__PURE__ */ new Date()).getTime(), this.recordID = n3, this.targetFrameRate = t4, this.recordedFrameCount = 0, this.recordingDuration = i3, [4, new r2.l3(function(t5) {
                        window.setTimeout(t5, 1e3 * s3.recordingDuration);
                      })]);
                    case 1:
                      return o3.sent(), this.recordID !== n3 ? (this.recordID = void 0, [2, { result: true }]) : (this.recordID = void 0, e3 = this.recordedFrameCount / i3, this.recordedFrameCount < this.targetFrameRate * this.recordingDuration / 2 ? (this.an.warn(c + " detect effect overload: current fps: " + e3), [2, { result: false, targetFPS: this.targetFrameRate, currentFPS: e3 }]) : (this.an.info(c + " detect effect current fps: " + e3), [2, { result: true }]));
                  }
                });
              });
            }, t3.prototype.stopRecordBeautyEffectOutput = function() {
              this.recordedFrameCount = this.targetFrameRate = 0, this.recordID = void 0;
            }, t3.prototype.addFrame = function() {
              this.recordID && (this.recordedFrameCount += 1);
            }, t3;
          }();
          function f(t3) {
            for (var i3 = t3, n3 = "", e3 = 0; e3 < i3.length; e3++) {
              var r3 = i3.charCodeAt(e3), s3 = r3;
              r3 >= 65 && r3 <= 90 && (s3 = (r3 - 65 - 13 + 26) % 26 + 65), r3 >= 97 && r3 <= 122 && (s3 = (r3 - 97 - 13 + 26) % 26 + 97), n3 += String.fromCharCode(s3);
            }
            return n3;
          }
          var l, d = function() {
            function t3(t4, i3, n3) {
              this.gl = t4, this.width = i3, this.height = n3, this.type = "baseShader", this.program = null, this.program = null;
            }
            return t3.prototype.setEffectConfig = function(t4) {
            }, t3.prototype.setConstUniforms = function() {
            }, t3.prototype.resetResolution = function(t4, i3) {
              this.width = t4 || this.width, this.height = i3 || this.height;
            }, t3.prototype.render = function() {
            }, t3.prototype.renderPreTextures = function(t4, i3, n3) {
            }, t3.prototype.makeProgram = function(t4, i3) {
              var n3 = this.gl, e3 = f(t4), r3 = f(i3), s3 = this.makeShader(e3, n3.VERTEX_SHADER), o3 = this.makeShader(r3, n3.FRAGMENT_SHADER), u3 = n3.createProgram();
              return n3.attachShader(u3, s3), n3.attachShader(u3, o3), n3.linkProgram(u3), n3.getProgramParameter(u3, n3.LINK_STATUS), u3;
            }, t3.prototype.release = function() {
            }, t3.prototype.makeShader = function(t4, i3) {
              var n3 = this.gl, e3 = n3.createShader(i3);
              return n3.shaderSource(e3, t4), n3.compileShader(e3), n3.getShaderParameter(e3, n3.COMPILE_STATUS), e3;
            }, t3;
          }(), v = "nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez uvtuc sybng grkOyheJvqguBssfrg;\nhavsbez uvtuc sybng grkOyheUrvtugBssfrg;\ninelvat irp2 i_grkpbbeq0;\ninelvat irp4 grkgherFuvsg_1;\ninelvat irp4 grkgherFuvsg_2;\ninelvat irp4 grkgherFuvsg_3;\ninelvat irp4 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n\n  irp2 fvatyrFgrcBssfrg = irp2(grkOyheJvqguBssfrg, grkOyheUrvtugBssfrg)*2.5;\n\n  grkgherFuvsg_1 = irp4(nGrkPbbeqvangr.kl - fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + fvatyrFgrcBssfrg);\n  grkgherFuvsg_2 = irp4(nGrkPbbeqvangr.kl - 2.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 2.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_3 = irp4(nGrkPbbeqvangr.kl - 3.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 3.0 * fvatyrFgrcBssfrg);\n  grkgherFuvsg_4 = irp4(nGrkPbbeqvangr.kl - 4.0 * fvatyrFgrcBssfrg, nGrkPbbeqvangr.kl + 4.0 * fvatyrFgrcBssfrg);\n}", m = "cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\ninelvat uvtuc irp4 grkgherFuvsg_1;\ninelvat uvtuc irp4 grkgherFuvsg_2;\ninelvat uvtuc irp4 grkgherFuvsg_3;\ninelvat uvtuc irp4 grkgherFuvsg_4;\nibvq znva(ibvq) { \n  zrqvhzc irp3 fhz = grkgher2Q(hGrkgher, i_grkpbbeq0).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_1.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_2.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_3.mj).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.kl).eto;\n  fhz += grkgher2Q(hGrkgher, grkgherFuvsg_4.mj).eto;\n  ty_SentPbybe = irp4(fhz * 0.1111, 1.0); \n}", p = (l = function(t3, i3) {
            return l = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
              t4.__proto__ = i4;
            } || function(t4, i4) {
              for (var n3 in i4)
                Object.prototype.hasOwnProperty.call(i4, n3) && (t4[n3] = i4[n3]);
            }, l(t3, i3);
          }, function(t3, i3) {
            if ("function" != typeof i3 && null !== i3)
              throw new TypeError("Class extends value " + String(i3) + " is not a constructor or null");
            function n3() {
              this.constructor = t3;
            }
            l(t3, i3), t3.prototype = null === i3 ? Object.create(i3) : (n3.prototype = i3.prototype, new n3());
          }), g = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, n3, e3) || this;
              return r3.width = n3, r3.height = e3, r3.type = "BlurShader", r3.blurXProgram = null, r3.blurYProgram = null, r3.diffProgram = null, r3.uIntensity = null, r3.smoothIntensity = 0.5, r3.blurTextureList = [], r3.blurBufferList = [], r3.blurXProgram = r3.makeProgram(v, m), r3.setBorderBlurProgram(r3.blurXProgram, 1 / (n3 || 1), 0), r3.blurYProgram = r3.makeProgram(v, m), r3.setBorderBlurProgram(r3.blurYProgram, 0, 1 / (e3 || 1)), r3.diffProgram = r3.makeProgram("nggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 i_grkpbbeq0;\nibvq znva()\n{\n  // ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n}", "cerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nibvq znva(ibvq) {\n  irp4 vPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  irp4 zrnaPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  irp4 qvssPbybe = vPbybe - zrnaPbybe;\n  qvssPbybe.e = zva(qvssPbybe.e * 50.0 * qvssPbybe.e, 1.0);\n  qvssPbybe.t = zva(qvssPbybe.t * 50.0 * qvssPbybe.t, 1.0);\n  qvssPbybe.o = zva(qvssPbybe.o * 50.0 * qvssPbybe.o, 1.0);\n  ty_SentPbybe = irp4(qvssPbybe.eto, 1.0);\n}"), r3.setDiffBlurProgram(r3.diffProgram), r3.program = r3.makeProgram("\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\ninelvat irp2 i_grkpbbeq0;\nhavsbez sybng jvqguBssfrg;\nhavsbez sybng urvtugBssfrg;\ninelvat irp2 grkgherFuvsg_1;\ninelvat irp2 grkgherFuvsg_2;\ninelvat irp2 grkgherFuvsg_3;\ninelvat irp2 grkgherFuvsg_4;\nibvq znva()\n{\n  ty_Cbfvgvba = nCbfvgvba;\n  i_grkpbbeq0 = nGrkPbbeqvangr.kl;\n  grkgherFuvsg_1 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_2 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,-urvtugBssfrg));\n  grkgherFuvsg_3 = irp2(i_grkpbbeq0 + 0.5 * irp2(-jvqguBssfrg,urvtugBssfrg));\n  grkgherFuvsg_4 = irp2(i_grkpbbeq0 + 0.5 * irp2(jvqguBssfrg,-urvtugBssfrg));\n}\n", "\ncerpvfvba zrqvhzc sybng;\nhavsbez fnzcyre2Q hGrkgher;\ninelvat irp2 i_grkpbbeq0;\nhavsbez fnzcyre2Q oyheGrkgher;\nhavsbez fnzcyre2Q oyheQvssGrkgher;\nhavsbez ybjc sybng oyheNycun;\nibvq znva(ibvq) {\n  ybjc irp4 vPbybe = grkgher2Q(hGrkgher, i_grkpbbeq0);\n  ybjc irp4 zrnaPbybe = grkgher2Q(oyheGrkgher, i_grkpbbeq0);\n  ybjc irp4 inePbybe = grkgher2Q(oyheQvssGrkgher, i_grkpbbeq0);\n  ybjc sybng nycun = oyheNycun * 1.0;\n  ybjc sybng gurgn = 0.1;\n  zrqvhzc sybng c = pynzc((zva(vPbybe.e, zrnaPbybe.e - 0.1) - 0.2) * 4.0, 0.0, 1.0);\n  zrqvhzc sybng zrnaIne = znk(znk(inePbybe.e, inePbybe.t), inePbybe.o);\n  zrqvhzc sybng xZva = 0.1;\n  ybjc irp3 erfhygPbybe;\n  xZva = (1.0 - zrnaIne / (zrnaIne + gurgn)) * c * nycun;\n  erfhygPbybe = zvk(vPbybe.eto, zrnaPbybe.eto, xZva);\n  erfhygPbybe = zvk(vPbybe.eto, erfhygPbybe, zva(1.0,nycun));\n  ty_SentPbybe = irp4(erfhygPbybe,1.0);\n}"), r3.initBlurBuffer(), r3;
            }
            return p(i3, t3), i3.prototype.setEffectConfig = function(t4) {
              isNaN(t4.smoothIntensity) || (this.smoothIntensity = t4.smoothIntensity / 100);
            }, i3.prototype.render = function() {
              this.gl.uniform1f(this.uIntensity, this.smoothIntensity);
            }, i3.prototype.initBlurBuffer = function() {
              var t4 = this, i4 = this.gl;
              this.blurTextureList.forEach(function(i5) {
                var n4;
                i5 && (null === (n4 = t4.gl) || void 0 === n4 || n4.deleteTexture(i5));
              }), this.blurBufferList.forEach(function(i5) {
                var n4;
                i5 && (null === (n4 = t4.gl) || void 0 === n4 || n4.deleteFramebuffer(i5));
              }), this.blurTextureList = [], this.blurBufferList = [];
              for (var n3 = 0; n3 < 3; n3++) {
                var e3 = i4.createTexture();
                if (!e3)
                  return;
                i4.bindTexture(i4.TEXTURE_2D, e3), i4.texParameteri(i4.TEXTURE_2D, i4.TEXTURE_WRAP_S, i4.CLAMP_TO_EDGE), i4.texParameteri(i4.TEXTURE_2D, i4.TEXTURE_WRAP_T, i4.CLAMP_TO_EDGE), i4.texParameteri(i4.TEXTURE_2D, i4.TEXTURE_MIN_FILTER, i4.LINEAR), i4.pixelStorei(i4.UNPACK_FLIP_Y_WEBGL, true), i4.texImage2D(i4.TEXTURE_2D, 0, i4.RGBA, this.width, this.height, 0, i4.RGBA, i4.UNSIGNED_BYTE, null);
                var r3 = i4.createFramebuffer();
                if (!r3)
                  return;
                i4.bindFramebuffer(i4.FRAMEBUFFER, r3), i4.framebufferTexture2D(i4.FRAMEBUFFER, i4.COLOR_ATTACHMENT0, i4.TEXTURE_2D, e3, 0), this.blurTextureList.push(e3), this.blurBufferList.push(r3);
              }
            }, i3.prototype.renderPreTextures = function(t4, i4, n3) {
              var e3 = this, r3 = this.gl, s3 = [0, 1, 0], o3 = [1, 1, 2];
              [this.blurXProgram, this.blurYProgram, this.diffProgram].forEach(function(u3, a2) {
                if (u3) {
                  r3.useProgram(u3);
                  var c2 = r3.getUniformLocation(u3, "uTexture");
                  r3.uniform1i(c2, s3[a2]);
                  var h2 = r3.createBuffer();
                  r3.bindBuffer(r3.ARRAY_BUFFER, h2), r3.bufferData(r3.ARRAY_BUFFER, new Float32Array(t4), r3.STATIC_DRAW);
                  var f2 = r3.createBuffer();
                  r3.bindBuffer(r3.ELEMENT_ARRAY_BUFFER, f2), r3.bufferData(r3.ELEMENT_ARRAY_BUFFER, new Uint16Array(i4), r3.STATIC_DRAW);
                  var l2 = r3.getAttribLocation(u3, "aPosition");
                  r3.enableVertexAttribArray(l2), r3.vertexAttribPointer(l2, 3, r3.FLOAT, false, 0, 0);
                  var d2 = r3.createBuffer();
                  r3.bindBuffer(r3.ARRAY_BUFFER, d2), r3.bufferData(r3.ARRAY_BUFFER, new Float32Array(n3), r3.STATIC_DRAW);
                  var v2 = r3.getAttribLocation(u3, "aTexCoordinate");
                  r3.enableVertexAttribArray(v2), r3.vertexAttribPointer(v2, 2, r3.FLOAT, false, 0, 0), r3.bindFramebuffer(r3.FRAMEBUFFER, e3.blurBufferList[a2]), r3.clearColor(0, 0, 0, 1), r3.clear(r3.COLOR_BUFFER_BIT), r3.drawElements(r3.TRIANGLES, 6, r3.UNSIGNED_SHORT, 0), r3.activeTexture(r3.TEXTURE0 + o3[a2]), r3.bindTexture(r3.TEXTURE_2D, e3.blurTextureList[a2]);
                }
              });
            }, i3.prototype.setConstUniforms = function() {
              var t4 = this.width, i4 = this.height, n3 = this.program;
              if (n3) {
                var e3 = this.gl;
                e3.useProgram(n3);
                var r3 = e3.getUniformLocation(n3, "widthOffset");
                e3.uniform1f(r3, 1 / t4);
                var s3 = e3.getUniformLocation(n3, "heightOffset");
                e3.uniform1f(s3, 1 / i4), this.uIntensity = e3.getUniformLocation(n3, "blurAlpha"), e3.uniform1f(this.uIntensity, this.smoothIntensity);
                var o3 = e3.getUniformLocation(n3, "blurTexture");
                e3.uniform1i(o3, 1);
                var u3 = e3.getUniformLocation(n3, "blurDiffTexture");
                e3.uniform1i(u3, 2);
              }
            }, i3.prototype.resetResolution = function(t4, i4) {
              this.width = t4 || this.width, this.height = i4 || this.height, this.blurXProgram && this.setBorderBlurProgram(this.blurXProgram, 1 / (t4 || 1), 0), this.blurYProgram && this.setBorderBlurProgram(this.blurYProgram, 0, 1 / (i4 || 1)), this.setConstUniforms(), this.initBlurBuffer();
            }, i3.prototype.setBorderBlurProgram = function(t4, i4, n3) {
              var e3 = this.gl;
              e3.useProgram(t4);
              var r3 = e3.getUniformLocation(t4, "texBlurWidthOffset");
              e3.uniform1f(r3, i4);
              var s3 = e3.getUniformLocation(t4, "texBlurHeightOffset");
              e3.uniform1f(s3, n3);
            }, i3.prototype.setDiffBlurProgram = function(t4) {
              var i4 = this.gl;
              i4.useProgram(t4);
              var n3 = i4.getUniformLocation(t4, "blurTexture");
              i4.uniform1i(n3, 1);
            }, i3;
          }(d), b = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), _ = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, n3, e3) || this;
              return r3.width = n3, r3.height = e3, r3.type = "LightShader", r3.uLightIntensity = null, r3.uRedIntensity = null, r3.whitenIntensity = 0.5, r3.rosyIntensity = 0.5, r3.program = r3.makeProgram("cerpvfvba uvtuc sybng;\nnggevohgr irp2 nGrkPbbeqvangr;\nnggevohgr irp4 nCbfvgvba;\nhavsbez zng4 hCZIZngevk;\ninelvat irp2 iGrkPbbeq;\nibvq znva() {\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    iGrkPbbeq = nGrkPbbeqvangr;\n}", "cerpvfvba uvtuc sybng;\ninelvat irp2 iGrkPbbeq;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez sybng vagrafvgl;\nhavsbez sybng ebflVagrafvgl;\nirp3 oevtugarffNaqPbagenfg(irp3 pbybe){\n  sybng v = vagrafvgl * 1.0;\n  sybng CV = 3.1415926;\n  sybng O = 0.12 * v;\n  sybng p = 0.1 * v;\n  sybng x = gna((45. + 44. * p) / 180.0 * CV);\n  pbybe = ((pbybe*255.0 - 127.5 * (1.0 - O)) * x + 127.5 * (1.0 + O)) / 255.0;\n  erghea pbybe;\n}\nibvq znva() {\n  irp4 grkgherPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  grkgherPbybe = irp4(oevtugarffNaqPbagenfg(grkgherPbybe.eto), grkgherPbybe.j);\n  grkgherPbybe.e = zva(grkgherPbybe.e + 0.06 * ebflVagrafvgl, 1.0);\n  ty_SentPbybe = grkgherPbybe;\n}"), r3;
            }
            return b(i3, t3), i3.prototype.setEffectConfig = function(t4) {
              isNaN(t4.whitenIntensity) || (this.whitenIntensity = t4.whitenIntensity / 100), isNaN(t4.rosyIntensity) || (this.rosyIntensity = t4.rosyIntensity / 100);
            }, i3.prototype.render = function() {
              var t4 = this.gl;
              t4.uniform1f(this.uLightIntensity, this.whitenIntensity), t4.uniform1f(this.uRedIntensity, this.rosyIntensity);
            }, i3.prototype.setConstUniforms = function() {
              var t4 = this.program;
              if (t4) {
                var i4 = this.gl;
                i4.useProgram(t4), this.uLightIntensity = i4.getUniformLocation(t4, "intensity"), i4.uniform1f(this.uLightIntensity, this.whitenIntensity), this.uRedIntensity = i4.getUniformLocation(t4, "rosyIntensity"), i4.uniform1f(this.uRedIntensity, this.rosyIntensity);
                var n3 = i4.getUniformLocation(t4, "uPMVMatrix");
                i4.uniformMatrix4fv(n3, false, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
              }
            }, i3;
          }(d), y = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), w = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, S = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, E = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, n3, e3) || this;
              return r3.width = n3, r3.height = e3, r3.type = "LowLightShader", r3.uIntensity = null, r3.lowlightEnhancement = false, r3.lutTex = null, r3.lutImg = null, r3.lutTexIdx = 10, r3.uLutTex = null, r3.program = r3.makeProgram("\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng grkryJvqgu;\nhavsbez sybng grkryUrvtug;\ninelvat irp2 grkgherPbbeqvangr[9];\ninelvat irp2 grkgherPbbeqvangr2;\nhavsbez zng4 hCZIZngevk;\nibvq znva(){\n    ty_Cbfvgvba = hCZIZngevk * nCbfvgvba;\n    grkgherPbbeqvangr2 = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    irp2 jvqguFgrc = irp2(grkryJvqgu, 0.0);\n    irp2 urvtugFgrc = irp2(0.0, grkryUrvtug);\n    irp2 jvqguUrvtugFgrc = irp2(grkryJvqgu, grkryUrvtug);\n    irp2 jvqguArtngvirUrvtugFgrc = irp2(grkryJvqgu, -grkryUrvtug);\n    \n    grkgherPbbeqvangr[0] = nGrkPbbeqvangr.kl;\n    grkgherPbbeqvangr[1] = nGrkPbbeqvangr.kl - jvqguFgrc;\n    grkgherPbbeqvangr[2] = nGrkPbbeqvangr.kl + jvqguFgrc;\n    \n    grkgherPbbeqvangr[3] = nGrkPbbeqvangr.kl - urvtugFgrc;\n    grkgherPbbeqvangr[4] = nGrkPbbeqvangr.kl - jvqguUrvtugFgrc;\n    grkgherPbbeqvangr[5] = nGrkPbbeqvangr.kl + jvqguArtngvirUrvtugFgrc;\n    \n    grkgherPbbeqvangr[6] = nGrkPbbeqvangr.kl + urvtugFgrc;\n    grkgherPbbeqvangr[7] = nGrkPbbeqvangr.kl - jvqguArtngvirUrvtugFgrc;\n    grkgherPbbeqvangr[8] = nGrkPbbeqvangr.kl + jvqguUrvtugFgrc;\n}\n", "cerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 grkgherPbbeqvangr[9];\ninelvat uvtuc irp2 grkgherPbbeqvangr2;\nhavsbez fnzcyre2Q hGrkgher;\nhavsbez fnzcyre2Q vachgVzntrGrkgher2;\nhavsbez uvtuc zng3 zngLHIgbETO;\nhavsbez uvtuc zng3 zngETOgbLHI;\nhavsbez sybng hVagrafvgl;\npbafg irp3 pbzcIrp = irp3(-0.0/255.0, -128.0/255.0, -128.0/255.0);\nirp4 eto2lhi(irp4 vachgETO) {\n    irp3 bhgchgLHI;\n    bhgchgLHI = zngETOgbLHI * vachgETO.eto;\n    bhgchgLHI -= pbzcIrp;\n    erghea irp4(pynzc(bhgchgLHI,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgETO.n);\n}\nirp2 fnghengvba(irp2 bet, sybng snpgbe) {\n    irp2 zbq = irp2((bet.k - 128.0/255.0) * snpgbe + 128.0/255.0,\n                    (bet.l - 128.0/255.0) * snpgbe + 128.0/255.0);\n    erghea pynzc(zbq, irp2(0.0, 0.0), irp2(1.0, 1.0));\n}\nirp4 lhi2eto(irp4 vachgLHI) {\n    irp3 bhgchgETO;\n    vachgLHI.eto += pbzcIrp;\n    bhgchgETO = zngLHIgbETO * vachgLHI.eto;\n    erghea irp4(pynzc(bhgchgETO,\n                        irp3(0.0, 0.0, 0.0),\n                        irp3(1.0, 1.0, 1.0)),\n                        vachgLHI.n);\n}\nibvq znva(){\n    irp4 lhi[9];\n    sbe(vag v = 0; v < 9; v++){\n        lhi[v] = eto2lhi(grkgher2Q(hGrkgher, grkgherPbbeqvangr[v]));\n    }\n    sybng fzbbguL = 0.0;\n    fzbbguL += 1.0*lhi[4].e + 2.0*lhi[3].e + 1.0*lhi[5].e;\n    fzbbguL += 2.0*lhi[1].e + 4.0*lhi[0].e + 2.0*lhi[2].e;\n    fzbbguL += 1.0*lhi[7].e + 2.0*lhi[6].e + 1.0*lhi[8].e;\n    fzbbguL = fzbbguL / 16.0;\n    sybng bhgchgL = grkgher2Q(vachgVzntrGrkgher2, irp2(fzbbguL, lhi[0].e)).e;\n    irp3 arjLHI = irp3(zvk(fzbbguL, bhgchgL, hVagrafvgl), lhi[0].to);\n    ty_SentPbybe = lhi2eto(irp4(arjLHI.eto, lhi[0].n));\n}\n"), r3;
            }
            return y(i3, t3), i3.prototype.setEffectConfig = function(t4) {
              this.lowlightEnhancement = 1 === t4.lowlightEnhancement;
            }, i3.prototype.release = function() {
              this.gl.deleteTexture(this.lutTex);
            }, i3.prototype.render = function() {
              var t4 = this.gl;
              t4.uniform1f(this.uIntensity, this.lowlightEnhancement ? 0.6 : 0);
              var i4 = this, n3 = i4.program, e3 = i4.width, r3 = i4.height, s3 = i4.lutTex;
              if (n3) {
                var o3 = t4.getUniformLocation(n3, "texelWidth");
                t4.uniform1f(o3, 1 / e3);
                var u3 = t4.getUniformLocation(n3, "texelHeight");
                t4.uniform1f(u3, 1 / r3), t4.activeTexture(t4.TEXTURE0 + this.lutTexIdx), t4.bindTexture(t4.TEXTURE_2D, s3);
              }
            }, i3.prototype.setConstUniforms = function() {
              return w(this, void 0, void 0, function() {
                var t4, i4, n3, e3, s3, o3, u3, a2, c2, h2, f2 = this;
                return S(this, function(l2) {
                  switch (l2.label) {
                    case 0:
                      return t4 = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], i4 = [1, 1, 1, 0, -0.344, 1.772, 1.402, -0.714, 0], n3 = [0.298973, -0.168721, 0.500019, 0.58706, -0.331298, -0.41873, 0.113967, 0.500019, -0.081289], (e3 = this.program) ? ((s3 = this.gl).useProgram(e3), this.uIntensity = s3.getUniformLocation(e3, "uIntensity"), o3 = s3.getUniformLocation(e3, "matYUVtoRGB"), s3.uniformMatrix3fv(o3, false, i4), u3 = s3.getUniformLocation(e3, "matRGBtoYUV"), s3.uniformMatrix3fv(u3, false, n3), a2 = s3.getUniformLocation(e3, "uPMVMatrix"), s3.uniformMatrix4fv(a2, false, t4), c2 = s3.getUniformLocation(e3, "inputImageTexture2"), h2 = this, [4, new r2.l3(function(t5) {
                        var i5 = s3.createTexture(), n4 = f2.lutTexIdx, r3 = f2.lutImg;
                        r3 || (r3 = new Image());
                        r3.onload = function() {
                          s3.useProgram(e3), f2.lutImg = r3, s3.activeTexture(s3.TEXTURE0 + n4), s3.bindTexture(s3.TEXTURE_2D, i5), s3.pixelStorei(s3.UNPACK_FLIP_Y_WEBGL, false), s3.texImage2D(s3.TEXTURE_2D, 0, s3.LUMINANCE, s3.LUMINANCE, s3.UNSIGNED_BYTE, r3), s3.texParameteri(s3.TEXTURE_2D, s3.TEXTURE_WRAP_S, s3.CLAMP_TO_EDGE), s3.texParameteri(s3.TEXTURE_2D, s3.TEXTURE_WRAP_T, s3.CLAMP_TO_EDGE), s3.texParameteri(s3.TEXTURE_2D, s3.TEXTURE_MIN_FILTER, s3.NEAREST), s3.texParameteri(s3.TEXTURE_2D, s3.TEXTURE_MAG_FILTER, s3.NEAREST), s3.uniform1i(c2, n4), i5 && t5(i5);
                        }, r3.src = "\ndata:image/png;base64,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";
                      })]) : [2];
                    case 1:
                      return h2.lutTex = l2.sent(), [2];
                  }
                });
              });
            }, i3;
          }(d), k = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), O = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, n3, e3) || this;
              return r3.width = n3, r3.height = e3, r3.type = "SharpnessShader", r3.uIntensity = null, r3.sharpenIntensity = 0.5, r3.program = r3.makeProgram("\nnggevohgr irp4 nCbfvgvba;\nnggevohgr irp4 nGrkPbbeqvangr;\nhavsbez sybng vzntrJvqguSnpgbe;\nhavsbez sybng vzntrUrvtugSnpgbe;\nhavsbez sybng funecarff; \ninelvat irp2 iGrkPbbeq;\ninelvat irp2 yrsgGrkgherPbbeqvangr;\ninelvat irp2 evtugGrkgherPbbeqvangr;\ninelvat irp2 gbcGrkgherPbbeqvangr;\ninelvat irp2 obggbzGrkgherPbbeqvangr;\ninelvat sybng pragreZhygvcyvre;\ninelvat sybng rqtrZhygvcyvre;\nibvq znva() {\n  ty_Cbfvgvba = nCbfvgvba;\n  irp2 jvqguFgrc = irp2(vzntrJvqguSnpgbe, 0.0);\n  irp2 urvtugFgrc = irp2(0.0, vzntrUrvtugSnpgbe);\n  iGrkPbbeq = nGrkPbbeqvangr.kl;\n  yrsgGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - jvqguFgrc;\n  evtugGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + jvqguFgrc;\n  gbcGrkgherPbbeqvangr = nGrkPbbeqvangr.kl + urvtugFgrc;\n  obggbzGrkgherPbbeqvangr = nGrkPbbeqvangr.kl - urvtugFgrc;\n  pragreZhygvcyvre = 1.0 + 4.0 * funecarff;\n  rqtrZhygvcyvre = funecarff;\n}\n", "\ncerpvfvba uvtuc sybng;\ninelvat uvtuc irp2 iGrkPbbeq;\ninelvat uvtuc irp2 yrsgGrkgherPbbeqvangr;\ninelvat uvtuc irp2 evtugGrkgherPbbeqvangr;\ninelvat uvtuc irp2 gbcGrkgherPbbeqvangr;\ninelvat uvtuc irp2 obggbzGrkgherPbbeqvangr;\ninelvat uvtuc sybng pragreZhygvcyvre;\ninelvat uvtuc sybng rqtrZhygvcyvre;\nhavsbez fnzcyre2Q hGrkgher;\nibvq znva() {\n  zrqvhzc irp4 nPbybe = grkgher2Q(hGrkgher, iGrkPbbeq);\n  zrqvhzc irp3 grkgherPbybe = nPbybe.eto;\n  zrqvhzc irp3 yrsgGrkgherPbybe = grkgher2Q(hGrkgher, yrsgGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 evtugGrkgherPbybe = grkgher2Q(hGrkgher, evtugGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 gbcGrkgherPbybe = grkgher2Q(hGrkgher, gbcGrkgherPbbeqvangr).eto;\n  zrqvhzc irp3 obggbzGrkgherPbybe = grkgher2Q(hGrkgher, obggbzGrkgherPbbeqvangr).eto;\n  ty_SentPbybe = irp4((grkgherPbybe * pragreZhygvcyvre - (yrsgGrkgherPbybe * rqtrZhygvcyvre + evtugGrkgherPbybe * rqtrZhygvcyvre + gbcGrkgherPbybe * rqtrZhygvcyvre + obggbzGrkgherPbybe * rqtrZhygvcyvre)), nPbybe.n);\n}"), r3;
            }
            return k(i3, t3), i3.prototype.setEffectConfig = function(t4) {
              isNaN(t4.sharpenIntensity) || (this.sharpenIntensity = t4.sharpenIntensity / 100);
            }, i3.prototype.render = function() {
              this.gl.uniform1f(this.uIntensity, 0.5 * this.sharpenIntensity);
            }, i3.prototype.resetResolution = function(t4, i4) {
              this.width = t4 || this.width, this.height = i4 || this.height, this.setConstUniforms();
            }, i3.prototype.setConstUniforms = function() {
              var t4 = this.width, i4 = this.height, n3 = this.program;
              if (n3) {
                var e3 = this.gl;
                e3.useProgram(n3);
                var r3 = e3.getUniformLocation(n3, "imageWidthFactor");
                e3.uniform1f(r3, 1 / t4);
                var s3 = e3.getUniformLocation(n3, "imageHeightFactor");
                e3.uniform1f(s3, 1 / i4), this.uIntensity = e3.getUniformLocation(n3, "sharpness"), e3.uniform1f(this.uIntensity, 0.5 * this.sharpenIntensity);
              }
            }, i3;
          }(d), I = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, R = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, T = "zc.p.0.sbe.2", C = { errorCode: e2.QYE.code, extendedData: e2.QYE.message }, A = function() {
            function t3(t4, i3) {
              this.an = t4, this.vcMgr = i3, this.gl = null, this.shouldClear = true, this.effectConfig = { sharpenIntensity: 0.5, whitenIntensity: 0.5, rosyIntensity: 0.5, smoothIntensity: 0.5, lowlightEnhancement: 0 }, this._originResolution = { width: 0, height: 0 }, this._shaderList = [], this._frameBufferList = [], this.Ze = [], this.Xe = null, this.isNoInput = true, this.failedTimes = 0, this.onRenderError = function(t5) {
              }, this.enableBeauty = false;
            }
            return t3.prototype.setEnableBeauty = function(t4) {
              this.enableBeauty = !!t4;
            }, t3.prototype.handleInitError = function() {
              this.failedTimes++, this.failedTimes > 30 && (this.failedTimes = 0, this.an.error(T + " get webgl context failed"), this.onRenderError(C));
            }, t3.prototype.init = function(t4, i3) {
              return I(this, void 0, void 0, function() {
                var n3, e3, r3, s3, o3, u3, a2, c2, h2;
                return R(this, function(f2) {
                  switch (f2.label) {
                    case 0:
                      return this.vcMgr ? (r3 = (n3 = this.vcMgr).gl, s3 = n3.originWidth, o3 = n3.originHeight, (e3 = n3.canvasEl) && r3 && s3 && o3 ? (this._canvasEl = e3, this.gl = r3, this.initGL(t4 = t4 || s3, i3 = i3 || o3), this.Xe ? [4, (u3 = new E(this.gl, t4, i3)).setConstUniforms()] : (this.an.error(T + " input texture not found"), this.handleInitError(), [2])) : (this.handleInitError(), [2])) : (this.handleInitError(), [2]);
                    case 1:
                      return f2.sent(), (a2 = new g(this.gl, t4, i3)).setConstUniforms(), (c2 = new _(this.gl, t4, i3)).setConstUniforms(), (h2 = new O(this.gl, t4, i3)).setConstUniforms(), this._shaderList = [u3, a2, c2, h2], this.setEffectConfig(this.effectConfig), [2];
                  }
                });
              });
            }, t3.prototype.render = function(t4) {
              return I(this, void 0, void 0, function() {
                var i3, n3, e3, r3, s3 = this;
                return R(this, function(o3) {
                  switch (o3.label) {
                    case 0:
                      return (i3 = this.gl) && this._canvasEl && !i3.isContextLost() ? [3, 4] : this._canvasEl ? (this.an.warn(T + " gl lost, restart effect"), this.release(), [4, this.init(t4.videoWidth, t4.videoHeight)]) : [3, 2];
                    case 1:
                      return o3.sent(), [3, 3];
                    case 2:
                      this.an.error(T + " canvas lost"), this.onRenderError(C), o3.label = 3;
                    case 3:
                      return [2];
                    case 4:
                      return (this._originResolution.height !== t4.videoHeight || this._originResolution.width !== t4.videoWidth) && (Math.abs(this._originResolution.height - t4.videoHeight) > 2 || Math.abs(this._originResolution.width - t4.videoWidth) > 2) ? 0 === t4.videoHeight || 0 === t4.videoWidth ? [2] : (this._canvasEl.width = t4.videoWidth, this._canvasEl.height = t4.videoHeight, t4.setAttribute("width", t4.videoWidth.toString()), t4.setAttribute("height", t4.videoHeight.toString()), !this.gl || this.gl.isContextLost() ? [3, 5] : (this.an.info(T + " resolution changed to ".concat(t4.videoWidth, "x").concat(t4.videoHeight, ", reset resolution.")), this.resetResolution(t4.videoWidth, t4.videoHeight), this._shaderList.forEach(function(i4) {
                        i4.resetResolution(t4.videoWidth, t4.videoHeight);
                      }), [3, 7])) : [3, 7];
                    case 5:
                      return this.an.warn(T + " resolution changed and gl context lost, restart effect"), this.release(), [4, this.init(t4.videoWidth, t4.videoHeight)];
                    case 6:
                      o3.sent(), o3.label = 7;
                    case 7:
                      return n3 = [-1, -1, 0, 1, -1, 0, 1, 1, 0, -1, 1, 0], e3 = [0, 1, 2, 0, 2, 3], r3 = [0, 0, 1, 0, 1, 1, 0, 1], i3.viewport(0, 0, t4.width, t4.height), i3.activeTexture(i3.TEXTURE0), i3.bindTexture(i3.TEXTURE_2D, this.Xe), this.isNoInput && i3.texImage2D(i3.TEXTURE_2D, 0, i3.RGBA, i3.RGBA, i3.UNSIGNED_BYTE, t4), this._shaderList.forEach(function(t5, o4) {
                        var u3 = t5.program;
                        if (u3) {
                          t5.renderPreTextures && t5.renderPreTextures(n3, e3, r3), i3.useProgram(u3), t5.render();
                          var a2 = i3.getUniformLocation(u3, "uTexture"), c2 = i3.createBuffer();
                          i3.bindBuffer(i3.ARRAY_BUFFER, c2), i3.bufferData(i3.ARRAY_BUFFER, new Float32Array(n3), i3.STATIC_DRAW);
                          var h2 = i3.createBuffer();
                          i3.bindBuffer(i3.ELEMENT_ARRAY_BUFFER, h2), i3.bufferData(i3.ELEMENT_ARRAY_BUFFER, new Uint16Array(e3), i3.STATIC_DRAW);
                          var f2 = i3.getAttribLocation(u3, "aPosition");
                          i3.enableVertexAttribArray(f2), i3.vertexAttribPointer(f2, 3, i3.FLOAT, false, 0, 0);
                          var l2 = i3.createBuffer();
                          i3.bindBuffer(i3.ARRAY_BUFFER, l2), i3.bufferData(i3.ARRAY_BUFFER, new Float32Array(r3), i3.STATIC_DRAW);
                          var d2 = i3.getAttribLocation(u3, "aTexCoordinate");
                          i3.enableVertexAttribArray(d2), i3.vertexAttribPointer(d2, 2, i3.FLOAT, false, 0, 0);
                          var v2 = o4 === s3._shaderList.length - 1 ? null : s3.Ze[o4];
                          i3.bindFramebuffer(i3.FRAMEBUFFER, o4 === s3._shaderList.length - 1 ? null : s3._frameBufferList[o4]), s3.shouldClear && (i3.clearColor(0, 0, 0, 1), i3.clear(i3.COLOR_BUFFER_BIT)), i3.drawElements(i3.TRIANGLES, 6, i3.UNSIGNED_SHORT, 0), i3.activeTexture(i3.TEXTURE0), v2 && i3.bindTexture(i3.TEXTURE_2D, v2), i3.uniform1i(a2, 0);
                        }
                      }), [2];
                  }
                });
              });
            }, t3.prototype.setEffectConfig = function(t4) {
              var i3 = this;
              isNaN(t4.sharpenIntensity) || (this.effectConfig.sharpenIntensity = t4.sharpenIntensity), isNaN(t4.whitenIntensity) || (this.effectConfig.whitenIntensity = t4.whitenIntensity), isNaN(t4.rosyIntensity) || (this.effectConfig.rosyIntensity = t4.rosyIntensity), isNaN(t4.smoothIntensity) || (this.effectConfig.smoothIntensity = t4.smoothIntensity), isNaN(t4.lowlightEnhancement) || (this.effectConfig.lowlightEnhancement = t4.lowlightEnhancement), this._shaderList.forEach(function(t5) {
                t5.setEffectConfig(i3.effectConfig);
              });
            }, t3.prototype.release = function() {
              var t4 = this;
              this._shaderList.forEach(function(i3) {
                var n3;
                i3.program && (null === (n3 = t4.gl) || void 0 === n3 || n3.deleteProgram(i3.program));
              }), this.Ze.forEach(function(i3) {
                var n3;
                i3 && (null === (n3 = t4.gl) || void 0 === n3 || n3.deleteTexture(i3));
              }), this._frameBufferList.forEach(function(i3) {
                var n3;
                i3 && (null === (n3 = t4.gl) || void 0 === n3 || n3.deleteFramebuffer(i3));
              }), this._shaderList.forEach(function(t5) {
                t5.release();
              }), this._shaderList = [], this.Ze = [], this._frameBufferList = [];
            }, t3.prototype.initGL = function(t4, i3) {
              var n3 = this.gl;
              if (!n3)
                return this.an.error(T + " webgl context not found");
              this.isNoInput && (this.Xe = n3.createTexture(), n3.bindTexture(n3.TEXTURE_2D, this.Xe), n3.texParameteri(n3.TEXTURE_2D, n3.TEXTURE_WRAP_S, n3.CLAMP_TO_EDGE), n3.texParameteri(n3.TEXTURE_2D, n3.TEXTURE_WRAP_T, n3.CLAMP_TO_EDGE), n3.texParameteri(n3.TEXTURE_2D, n3.TEXTURE_MIN_FILTER, n3.LINEAR), n3.texParameteri(n3.TEXTURE_2D, n3.TEXTURE_MAG_FILTER, n3.LINEAR));
              for (var e3 = 0; 4 > e3; e3++) {
                var r3 = n3.createTexture();
                if (!r3)
                  return this.an.warn(T + " create texture failed");
                n3.bindTexture(n3.TEXTURE_2D, r3), n3.texParameteri(n3.TEXTURE_2D, n3.TEXTURE_WRAP_S, n3.CLAMP_TO_EDGE), n3.texParameteri(n3.TEXTURE_2D, n3.TEXTURE_WRAP_T, n3.CLAMP_TO_EDGE), n3.texParameteri(n3.TEXTURE_2D, n3.TEXTURE_MIN_FILTER, n3.LINEAR), n3.texImage2D(n3.TEXTURE_2D, 0, n3.RGBA, t4, i3, 0, n3.RGBA, n3.UNSIGNED_BYTE, null);
                var s3 = n3.createFramebuffer();
                if (!s3)
                  return this.an.warn(T + " create frame buffer failed");
                n3.bindFramebuffer(n3.FRAMEBUFFER, s3), n3.framebufferTexture2D(n3.FRAMEBUFFER, n3.COLOR_ATTACHMENT0, n3.TEXTURE_2D, r3, 0), this.Ze.push(r3), this._frameBufferList.push(s3);
              }
              n3.viewport(0, 0, t4, i3), this._originResolution.width = t4, this._originResolution.height = i3;
            }, t3.prototype.setInputInfo = function(t4, i3) {
              if (this.isNoInput = t4, i3) {
                var n3 = i3.texture;
                n3 && (this.Xe = n3);
              }
            }, t3.prototype.resetResolution = function(t4, i3) {
              var n3, e3 = this.gl;
              if (!e3)
                return this.an.warn(T + " can not find webgl context");
              for (var r3 = 0; r3 < this.Ze.length; r3++) {
                e3.bindTexture(e3.TEXTURE_2D, this.Ze[r3]), e3.texImage2D(e3.TEXTURE_2D, 0, e3.RGBA, t4, i3, 0, e3.RGBA, e3.UNSIGNED_BYTE, null);
              }
              null === (n3 = this.vcMgr) || void 0 === n3 || n3.resetResolution(t4, i3), this.onResolutionChange(), e3.viewport(0, 0, t4, i3), this._originResolution.width = t4, this._originResolution.height = i3;
            }, t3.prototype.onResolutionChange = function() {
            }, t3;
          }(), z = n2(1350), D = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), N = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, P = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, M = { errorCode: e2.zgL.code, extendedData: e2.zgL.message }, x = "zc.p.0.sbe.1", j = function(t3) {
            function i3(i4, n3, e3, r3) {
              var s3 = t3.call(this) || this;
              return s3.an = i4, s3.preview = e3, s3.pn = r3, s3.kind = "video", s3._enabled = false, s3.effectTrack = null, s3.lastRenderTime = 0, s3.renderCount = 0, s3.tr = 0, s3.stateFlag = { base: false, lowLight: false }, s3.isStarting = false, s3.animationFrameId = 0, s3.fps = 15, s3.detector = new h(i4), s3.lastRenderTime = 0, s3.manager = new A(i4, s3.vcMgr), s3.manager.onRenderError = function(t4) {
                1103072 === t4.errorCode && s3.stopEffect(), s3.onError(t4);
              }, s3.manager.onResolutionChange = function() {
              }, s3.setVcMgrInfo(), s3;
            }
            return D(i3, t3), Object.defineProperty(i3.prototype, "enabled", { get: function() {
              return this._enabled;
            }, set: function(t4) {
              this._enabled = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "output", { get: function() {
              return { track: this._output || this.input || null };
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "vcMgr", { get: function() {
              return this.preview.vcMgr;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "ir", { get: function() {
              return this.pn.browser;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "options", { get: function() {
              return this.manager.effectConfig || {};
            }, enumerable: false, configurable: true }), i3.prototype.setBeautyEffectOptions = function(t4, i4) {
              return void 0 === i4 && (i4 = {}), N(this, void 0, void 0, function() {
                return P(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return t4 && this.manager.setEffectConfig(i4), this.enabled === t4 ? [3, 5] : (this.manager.setEnableBeauty(t4), this.enabled !== t4 && this.an.info(x + " effect enabled " + t4 + "; options: " + JSON.stringify(i4)), this.enabled = t4, t4 ? [4, this.startEffect()] : [3, 2]);
                    case 1:
                      return n3.sent(), [3, 4];
                    case 2:
                      return [4, this.stopEffect()];
                    case 3:
                      n3.sent(), n3.label = 4;
                    case 4:
                      n3.label = 5;
                    case 5:
                      return [2];
                  }
                });
              });
            }, i3.prototype.startEffect = function(t4) {
              return void 0 === t4 && (t4 = true), N(this, void 0, void 0, function() {
                var i4, n3 = this;
                return P(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return this.isStarting = true, this.an.info(x + " call start effect"), this.input ? (i4 = this, [4, this.startWebGLProcessor().catch(function(t5) {
                        throw n3.stopEffect(), t5;
                      })]) : (this.an.error(x + " start effect failed, input track is null"), [2]);
                    case 1:
                      return i4.effectTrack = e3.sent(), this.startEffectTask(t4), [4, new r2.l3(function(t5) {
                        n3.waitForOutputTrack = function() {
                          n3.waitForOutputTrack = void 0, t5(void 0);
                        };
                      })];
                    case 2:
                      return e3.sent(), this.an.info(x + " start effect success"), [2];
                  }
                });
              });
            }, i3.prototype.startEffectTask = function(t4) {
              var i4, n3 = this;
              void 0 === t4 && (t4 = true), this.enabled = true, this.detector.startRecordBeautyEffectOutput(this.fps).then(function(t5) {
                !t5.result && n3.onError && n3.onError(M, { targetFPS: t5.targetFPS, currentFPS: t5.currentFPS });
              }), t4 && (null === (i4 = this.vcMgr) || void 0 === i4 || i4.setRenderTask(true, "beauty")), this.isStarting = false;
            }, i3.prototype.stopEffect = function(t4) {
              var i4, n3;
              return void 0 === t4 && (t4 = true), N(this, void 0, void 0, function() {
                var e3 = this;
                return P(this, function(r3) {
                  return this.enabled = false, this.an.info(x + " call stop effect"), t4 && (null === (i4 = this.vcMgr) || void 0 === i4 || i4.setRenderTask(false, "beauty")), null === (n3 = this.vcMgr) || void 0 === n3 || n3.off("renderFrame"), this.detector.stopRecordBeautyEffectOutput(), this.manager.release(), this.renderCount = 0, void 0 === this.removeDomTimer && (this.removeDomTimer = window.setTimeout(function() {
                    false === e3.enabled && e3.destroy();
                  }, 18e4)), [2];
                });
              });
            }, i3.prototype.destroy = function() {
              this.an.info(x + " destroy hidden elements"), this.canvasEl && this.canvasEl.remove(), this.videoEl && this.videoEl.remove(), this.videoEl = this.canvasEl = void 0, this.removeDomTimer && (clearTimeout(this.removeDomTimer), this.removeDomTimer = void 0);
            }, i3.prototype.startWebGLProcessor = function() {
              var t4;
              return N(this, void 0, void 0, function() {
                return P(this, function(i4) {
                  switch (i4.label) {
                    case 0:
                      return this.an.info(x + " start webgl processor"), this.removeDomTimer && (clearTimeout(this.removeDomTimer), this.removeDomTimer = void 0), [4, this.videoRendering()];
                    case 1:
                      return i4.sent(), this.setVcMgrInfo(), [2, null === (t4 = this.vcMgr) || void 0 === t4 ? void 0 : t4.getCanvasTrack()];
                  }
                });
              });
            }, i3.prototype.setInput = function(t4, i4) {
              var n3, e3, r3, s3, o3, u3;
              return N(this, void 0, void 0, function() {
                var i5, a2, c2 = this;
                return P(this, function(h2) {
                  return this.an.info(x + " input call"), i5 = false, (null == t4 ? void 0 : t4.track) && (a2 = false, this.trackWidth === (null === (n3 = this.vcMgr) || void 0 === n3 ? void 0 : n3.originWidth) && this.trackHeight === (null === (e3 = this.vcMgr) || void 0 === e3 ? void 0 : e3.originHeight) || (a2 = true, this.an.info(x + " input track wh change")), !a2 && this.input === (null == t4 ? void 0 : t4.track) || "safari" !== this.ir || (this.an.info(x + " input track change"), this.effectTrack = null, this.stopEffect(false), i5 = true), this.input = null == t4 ? void 0 : t4.track, this.trackWidth = null === (r3 = this.vcMgr) || void 0 === r3 ? void 0 : r3.originWidth, this.trackHeight = null === (s3 = this.vcMgr) || void 0 === s3 ? void 0 : s3.originHeight), t4 && (this.manager.setInputInfo(this.isFirstNode, t4.frameInfo), null === (o3 = this.vcMgr) || void 0 === o3 || o3.off("renderFrame"), null === (u3 = this.vcMgr) || void 0 === u3 || u3.on("renderFrame", function() {
                    c2.renderOutput();
                  }), i5 && this.startEffect()), 1 == this.tr && (this.setVcMgrInfo(), this.tr = 0, this.startEffect()), [2];
                });
              });
            }, i3.prototype.renderOutput = function() {
              this.renderCount++, this.manager.render(this.videoEl), this.detector.addFrame(), this.renderCount >= 3 && this.updateOutput(this.effectTrack);
            }, i3.prototype.setVcMgrInfo = function() {
              var t4;
              if (this.vcMgr && (null === (t4 = this.vcMgr) || void 0 === t4 ? void 0 : t4.inited)) {
                var i4 = this.vcMgr, n3 = i4.canvasEl, e3 = i4.videoEl, r3 = i4.originWidth, s3 = i4.originHeight;
                e3 && (this.videoEl = e3), n3 && (this.canvasEl = n3, this.manager.setInputInfo(this.isFirstNode), this.manager.init(r3, s3));
              }
            }, i3.prototype.videoRendering = function() {
              return N(this, void 0, void 0, function() {
                var t4 = this;
                return P(this, function(i4) {
                  return [2, new Promise(function(i5, n3) {
                    var e3;
                    t4.vcMgr && !(null === (e3 = t4.vcMgr) || void 0 === e3 ? void 0 : e3.inited) ? (t4.vcMgr.onInited = function() {
                      i5();
                    }, t4.vcMgr.onRenderFail = function(i6) {
                      t4.tr = 1, n3(i6);
                    }) : i5();
                  })];
                });
              });
            }, i3.prototype.removeInput = function() {
              return N(this, void 0, void 0, function() {
                return P(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return this.input = void 0, [4, this.stopEffect()];
                    case 1:
                      return t4.sent(), [2];
                  }
                });
              });
            }, i3.prototype.updateOutput = function(t4) {
              return N(this, void 0, void 0, function() {
                return P(this, function(i4) {
                  switch (i4.label) {
                    case 0:
                      return this._output === t4 ? [3, 3] : (this._output = t4, this.onOutputChange ? [4, this.onOutputChange(this._output)] : [3, 2]);
                    case 1:
                      i4.sent(), i4.label = 2;
                    case 2:
                      i4.label = 3;
                    case 3:
                      return this.waitForOutputTrack && this.waitForOutputTrack(), [2];
                  }
                });
              });
            }, i3.prototype.onOutputChange = function(t4) {
              var i4;
              return N(this, void 0, void 0, function() {
                return P(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return [4, null === (i4 = this.next) || void 0 === i4 ? void 0 : i4.setInput({ track: t4 || this.input || null })];
                    case 1:
                      return n3.sent(), [2];
                  }
                });
              });
            }, i3.prototype.onError = function(t4, i4) {
            }, i3;
          }(z.E), q = j, L = function() {
            return L = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, L.apply(this, arguments);
          }, B = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, U = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, G = "zc.p.0.sbe.0", J = { setBeautyEffect: function(t3, i3, n3, u3) {
            var a2 = this;
            return void 0 === u3 && (u3 = true), new r2.l3(function(r3, c2) {
              var h2, f2, l2 = (0, o2.L)(t3, a2.logger);
              if (!(0, s2.dr)(l2))
                return a2.logger.error(G + " localStream not found"), void c2({ errorCode: 1100001, extendedData: " localStream no found" });
              var d2 = function(t4) {
                r3(t4);
              }, v2 = a2.streamCenter.checkPreview(l2);
              if (!v2)
                return a2.logger.error("zc.sbe.0 preview no found"), void d2({ errorCode: e2.fzq.code, extendedData: e2.fzq.message });
              var m2 = (null === (h2 = v2.videoEffect) || void 0 === h2 ? void 0 : h2.stateFlag) || { base: false, lowLight: false };
              if (u3)
                !(i3 = !!i3) && m2.lowLight ? n3 = { sharpenIntensity: 0, whitenIntensity: 0, rosyIntensity: 0, smoothIntensity: 0, lowlightEnhancement: m2.lowLight ? 1 : 0 } : i3 && (n3 = L({ lowlightEnhancement: m2.lowLight ? 1 : 0 }, n3)), m2.base = i3;
              else {
                var p2 = n3.lowlightEnhancement;
                n3 = (null === (f2 = v2.videoEffect) || void 0 === f2 ? void 0 : f2.enabled) || 1 !== p2 ? { lowlightEnhancement: p2 } : { sharpenIntensity: 0, whitenIntensity: 0, rosyIntensity: 0, smoothIntensity: 0, lowlightEnhancement: p2 }, m2.lowLight = 1 === p2;
              }
              v2.setBeautyEffect(m2.base || m2.lowLight, n3, m2).then(function() {
                d2({ errorCode: 0, extendedData: "" });
              }).catch(function(t4) {
                c2({ errorCode: t4.errorCode || t4.code || -1, extendedData: t4.extendedData || t4.message || t4.toString() });
              });
            });
          }, setLowlightEnhance: function(t3, i3) {
            return this.setBeautyEffect(t3, true, { lowlightEnhancement: i3 }, false);
          } }, F = { setBeautyEffect: function(t3, i3, n3) {
            var r3;
            return B(this, void 0, void 0, function() {
              var o3, u3, a2, c2 = this;
              return U(this, function(h2) {
                switch (h2.label) {
                  case 0:
                    if (!this.videoTrack)
                      return this.logger.error(G + " video track no found"), [2];
                    if (!!(0, s2.TE)(WebGLRenderingContext))
                      throw { errorCode: o3 = e2.QYE.code, extendedData: u3 = e2.QYE.message };
                    return a2 = function() {
                      var t4;
                      try {
                        null === (t4 = c2.vcMgr) || void 0 === t4 || t4.init(c2.videoTrack);
                      } catch (t5) {
                        if (1001 == t5.code)
                          throw { errorCode: o3, extendedData: u3 };
                      }
                    }, q ? (this.videoEffect || (a2(), this.videoEffect = new q(this.logger, this.videoTrack, this, this.stateCenter), this.videoEffect.onError = function(t4, i4) {
                      c2.stateCenter.actionListener("beautyEffectError", c2.localStream, t4.errorCode, t4.extendedData, i4);
                    }), t3 ? this.videoNodeQueue.isConnected(this.videoEffect) ? [3, 4] : this.videoTrack && (null === (r3 = this.vcMgr) || void 0 === r3 ? void 0 : r3.renderTrack) !== this.videoTrack ? [4, this.videoNodeQueue.replaceNewSourceByTrack(this.videoTrack)] : [3, 2] : [3, 5]) : [3, 9];
                  case 1:
                    h2.sent(), h2.label = 2;
                  case 2:
                    return [4, this.videoNodeQueue.pushBack(this.videoEffect)];
                  case 3:
                    h2.sent(), h2.label = 4;
                  case 4:
                    return [3, 7];
                  case 5:
                    return [4, this.videoNodeQueue.remove(this.videoEffect)];
                  case 6:
                    h2.sent(), h2.label = 7;
                  case 7:
                    return [4, this.videoEffect.setBeautyEffectOptions(t3, i3)];
                  case 8:
                    return h2.sent(), this.videoEffect.stateFlag = n3, [3, 10];
                  case 9:
                    this.logger.error(G + " beauty effect module no found"), h2.label = 10;
                  case 10:
                    return [2];
                }
              });
            });
          } }, H = { type: "BeautyEffect", install: function(t3, i3) {
            for (var n3 in F)
              Object.defineProperty(i3.prototype, n3, { value: F[n3], writable: false });
            for (var n3 in J)
              Object.defineProperty(t3.prototype, n3, { value: J[n3], writable: false });
          } };
        }, 5794: function(t2, i2, n2) {
          "use strict";
          function e2() {
            var t3 = document.createElement("audio");
            t3.src = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=", t3.play(), setTimeout(function() {
              t3.pause(), t3.remove();
            }, 1e3);
          }
          n2.d(i2, { r: function() {
            return e2;
          } });
        }, 5830: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { StreamCDN: function() {
            return M;
          } });
          var e2, r2 = n2(8627), s2 = n2(4908), o2 = n2(4872), u2 = n2(1290), a = n2(8866), c = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o3(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u3(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o3, u3);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, h = function(t3, i3) {
            var n3, e3, r3, s3, o3 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u3(0), throw: u3(1), return: u3(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u3(u4) {
              return function(a2) {
                return function(u5) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u5[0] && (o3 = 0)), o3; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u5[0] ? e3.return : u5[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u5[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u5 = [2 & u5[0], r3.value]), u5[0]) {
                        case 0:
                        case 1:
                          r3 = u5;
                          break;
                        case 4:
                          return o3.label++, { value: u5[1], done: false };
                        case 5:
                          o3.label++, e3 = u5[1], u5 = [0];
                          continue;
                        case 7:
                          u5 = o3.ops.pop(), o3.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o3.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u5[0] && 2 !== u5[0])) {
                            o3 = 0;
                            continue;
                          }
                          if (3 === u5[0] && (!r3 || u5[1] > r3[0] && u5[1] < r3[3])) {
                            o3.label = u5[1];
                            break;
                          }
                          if (6 === u5[0] && o3.label < r3[1]) {
                            o3.label = r3[1], r3 = u5;
                            break;
                          }
                          if (r3 && o3.label < r3[2]) {
                            o3.label = r3[2], o3.ops.push(u5);
                            break;
                          }
                          r3[2] && o3.ops.pop(), o3.trys.pop();
                          continue;
                      }
                      u5 = i3.call(t3, o3);
                    } catch (t4) {
                      u5 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u5[0])
                    throw u5[1];
                  return { value: u5[0] ? u5[1] : void 0, done: true };
                }([u4, a2]);
              };
            }
          }, f = function() {
            function t3(t4, i3) {
              this.an = t4, this.pn = i3, this.attempt = 0, this.rr = 0.3, this.sr = 4.8, this.ur = 0, this.retryTimer = null, this.maxTimer = null, this.isOverTime = false, this.RETRY_MAX_TIME = 60;
            }
            return t3.prototype.setRetryRule = function(t4) {
              switch (this.ur = t4, t4) {
                case 1:
                  this.rr = 0.3, this.sr = 32;
                  break;
                case 0:
                  this.rr = 0.3, this.sr = 4.8;
              }
            }, t3.prototype.getRetryDelayByCount = function(t4) {
              return c(this, void 0, void 0, function() {
                var i3, n3, e3, r3;
                return h(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      return i3 = 1 === this.ur ? t4 + 2 : t4 < 2 ? 0 : t4, n3 = Math.min(this.sr, this.rr * Math.pow(2, i3)), [4, (0, a.UY)()];
                    case 1:
                      return e3 = s3.sent(), r3 = Math.floor(e3 * (1e3 * n3 + 1)), this.an.info("".concat(u2.RnN, " ").concat(this.attempt, " ").concat(n3, " ").concat(r3)), [2, r3];
                  }
                });
              });
            }, t3.prototype.initCallback = function(t4, i3) {
              this.sucCallBack = t4, this.failCallBack = i3;
            }, t3.prototype.startMaxTime = function() {
              var t4, i3 = this;
              this.an.info("".concat(u2.zUi, " ").concat(null === (t4 = this.requestInfo) || void 0 === t4 ? void 0 : t4.streamID, " call")), this.maxTimer ? this.an.warn("".concat(u2.zUi, " max timer")) : (this.maxTimer = setTimeout(function() {
                var t5;
                i3.an.warn("".concat(u2.zUi, " ").concat(null === (t5 = i3.requestInfo) || void 0 === t5 ? void 0 : t5.streamID, " over max time ").concat(i3.RETRY_MAX_TIME, "s, stop retry")), i3.isOverTime = true, i3.requestFail(i3._err);
              }, 1e3 * this.RETRY_MAX_TIME), this.an.info("".concat(u2.zUi, " maxTimer=").concat(this.maxTimer)));
            }, t3.prototype.invalid = function() {
              this.clearRetryTimer(), this.attempt = 0;
            }, t3.prototype.clearRetryTimer = function() {
              this.retryTimer && (clearTimeout(this.retryTimer), this.retryTimer = null);
            }, t3.prototype.requestFail = function(t4) {
              this.invalid(), this.stopMaxTime(), this.failCallBack && (this.failCallBack(t4), this.resetCallback());
            }, t3.prototype.stopMaxTime = function() {
              this.an.info("".concat(u2.zub, " stop max timer")), this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null;
            }, t3.prototype.resetCallback = function() {
              this.sucCallBack = void 0, this.failCallBack = void 0;
            }, t3;
          }(), l = (e2 = function(t3, i3) {
            return e2 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
              t4.__proto__ = i4;
            } || function(t4, i4) {
              for (var n3 in i4)
                Object.prototype.hasOwnProperty.call(i4, n3) && (t4[n3] = i4[n3]);
            }, e2(t3, i3);
          }, function(t3, i3) {
            if ("function" != typeof i3 && null !== i3)
              throw new TypeError("Class extends value " + String(i3) + " is not a constructor or null");
            function n3() {
              this.constructor = t3;
            }
            e2(t3, i3), t3.prototype = null === i3 ? Object.create(i3) : (n3.prototype = i3.prototype, new n3());
          }), d = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, n3) || this;
              return r3.an = i4, r3.pn = n3, r3.ar = e3, r3.RETRY_MAX_TIME = 8, r3;
            }
            return l(i3, t3), i3.prototype.initReqParams = function(t4, i4) {
              this.streamId = t4, this.cdnPushConfig = i4;
            }, i3.prototype.active = function(t4) {
              var i4 = this;
              if (void 0 === t4 && (t4 = false), this.retryTimer)
                this.an.warn("".concat(u2.v$W, " was actived, ignore"));
              else if (this.isOverTime)
                this.an.warn("".concat(u2.v$W, " retry over time, stop retry"));
              else {
                var n3 = function() {
                  i4.clearRetryTimer(), i4.ar.sendCDNRequest(i4.streamId, i4.cdnPushConfig, function(t5, n4) {
                    var e3 = t5.body;
                    i4.invalid(), i4.stopMaxTime(), i4.sucCallBack && (i4.sucCallBack && i4.sucCallBack(e3, n4), i4.resetCallback());
                  }, function(t5) {
                    i4._err = t5;
                    var n4 = t5.status_code;
                    i4.isOverTime ? i4.requestFail(t5) : ((429 === n4 || n4 >= 500 && n4 < 600) && i4.setRetryRule(1), i4.active());
                  }), t4 || i4.attempt++;
                };
                t4 ? n3() : this.getRetryDelayByCount(this.attempt).then(function(t5) {
                  i4.retryTimer = setTimeout(n3, t5);
                });
              }
            }, i3;
          }(f), v = n2(3788);
          const m = n2(6994);
          (v = v.default || v).util.Long = m.default || m, v.util.Long.fromBits = v.util.Long.fromBits || function() {
            return 0;
          };
          for (var p = v.roots, g = v.types ? v.types.basic : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0, string: 2, bytes: 2 }, b = v.types ? v.types.packed : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0 }, _ = Object.keys(g), y = { $: function(t3) {
            return y[t3] ? y[t3].call(this) : p[t3].decode ? p[t3].decode(this, this.uint32()) : y.$.call(this, "int32");
          } }, w = { $: function(t3, i3, n3) {
            var e3 = g[t3];
            return void 0 === e3 ? p[t3].encode ? (this.uint32(n3 << 3 | 2).fork(), p[t3].encode(i3, this).ldelim()) : w.$.call(this, "int32", i3, n3) : w[t3].call(this.uint32(n3 << 3 | e3), i3);
          } }, S = 0; S < _.length; S++)
            y[_[S]] = v.Reader.prototype[_[S]], w[_[S]] = v.Writer.prototype[_[S]];
          !function t3(i3, n3, e3, r3) {
            for (var s3 = 0, o3 = Object.keys(i3); s3 < o3.length; s3++) {
              var u3 = o3[s3];
              if (i3[u3].$m && Object.keys(i3[u3].$m).every(function(t4) {
                return Number(t4);
              })) {
                if (e3[u3])
                  throw Error(`nested type ${e3}.${u3} has already exist`);
                e3[u3] = function(i4, e4) {
                  function r4(t4) {
                    for (var n4 in i4) {
                      var e5 = i4[n4];
                      "{" === e5[1].charAt(0) ? this[e5[0]] = {} : "[" !== e5[1].charAt(0) && "<" !== e5[1].charAt(0) || (this[e5[0]] = []);
                    }
                    if (t4)
                      for (var r5 = Object.keys(t4), s5 = 0; s5 < r5.length; ++s5)
                        null != t4[r5[s5]] && (this[r5[s5]] = t4[r5[s5]]);
                  }
                  var s4 = {};
                  for (var o4 in i4) {
                    var u4 = i4[o4], a2 = u4[1];
                    "{" === a2.charAt(0) ? (r4.prototype[u4[0]] = v.util.emptyObject, s4[a2] = { $m: a2.substring(1).split(",").map(function(t4, i5) {
                      return [`$${i5 + 1}`, t4, null];
                    }).reduce(function(t4, i5, n4) {
                      return t4[n4 + 1] = i5, t4;
                    }, {}) }) : r4.prototype[u4[0]] = "[" === a2.charAt(0) || "<" === a2.charAt(0) ? v.util.emptyArray : "bytes" === a2 ? v.util.newBuffer([]) : u4[2] && u4[2].hasOwnProperty("low") && u4[2].hasOwnProperty("high") ? v.util.Long.fromBits(u4[2].low, u4[2].high, u4[2].unsigned) : u4[2];
                  }
                  return r4.create = function(t4) {
                    return new r4(t4);
                  }, r4.decode = function(t4, n4) {
                    t4 instanceof v.Reader || (t4 = v.Reader.create(t4));
                    for (var e5 = void 0 === n4 ? t4.len : t4.pos + n4, s5 = new r4(); t4.pos < e5; ) {
                      var o5 = t4.uint32(), u5 = o5 >>> 3;
                      if (u5 > 0 && i4[u5]) {
                        var a3 = i4[u5][0], c2 = i4[u5][1];
                        if ("{" === c2.charAt(0)) {
                          s5[a3] === v.util.emptyObject && (s5[a3] = {});
                          var h2 = r4.$namespace[c2].decode(t4, t4.uint32());
                          s5[a3][h2.$1] = h2.$2;
                        } else if ("[" === c2.charAt(0) || "<" === c2.charAt(0)) {
                          c2 = c2.substring(1), s5[a3] && s5[a3].length || (s5[a3] = []);
                          if (void 0 !== b[c2 = !y[c2] && !p[c2].decode ? "int32" : c2] && 2 == (7 & o5))
                            for (var f2 = t4.uint32() + t4.pos; t4.pos < f2; )
                              s5[a3].push(y.$.call(t4, c2));
                          else
                            s5[a3].push(y.$.call(t4, c2));
                        } else
                          s5[a3] = y.$.call(t4, c2);
                      } else
                        t4.skipType(7 & o5);
                    }
                    return s5;
                  }, r4.encode = function(t4, n4) {
                    for (var e5 in n4 || (n4 = v.Writer.create()), i4) {
                      var s5 = i4[e5][0], o5 = i4[e5][1];
                      if ("{" === o5.charAt(0)) {
                        if (null != t4[s5] && t4.hasOwnProperty(s5))
                          for (var u5 = 0, a3 = Object.keys(t4[s5]); u5 < a3.length; ++u5)
                            n4.uint32(e5 << 3 | 2).fork(), r4.$namespace[o5].encode({ $1: a3[u5], $2: t4[s5][a3[u5]] }, n4).ldelim();
                      } else if ("[" === o5.charAt(0) || "<" === o5.charAt(0)) {
                        var c2 = "<" === o5.charAt(0);
                        o5 = o5.substring(1);
                        var h2 = t4[s5];
                        if (null != h2 && h2.length) {
                          if (o5 = void 0 === g[o5] && !p[o5].encode ? "int32" : o5, c2 && void 0 !== b[o5]) {
                            n4.uint32(e5 << 3 | 2).fork();
                            for (u5 = 0; u5 < h2.length; u5++)
                              w[o5].call(n4, h2[u5]);
                            n4.ldelim();
                          } else
                            for (u5 = 0; u5 < h2.length; u5++)
                              w.$.call(n4, o5, h2[u5], e5);
                        }
                      } else
                        null != t4[s5] && t4.hasOwnProperty(s5) && w.$.call(n4, o5, t4[s5], e5);
                    }
                    return n4;
                  }, Object.keys(s4).length && (r4.$namespace = t3(s4, n3 + "." + e4, r4.$namespace || {}, true)), r4;
                }(i3[u3].$m, u3);
              } else
                i3[u3].$s ? e3[u3] = function(t4, i4) {
                  function e4(t5, i5, n4) {
                    v.rpc.Service.call(this, t5, i5, n4);
                  }
                  return (e4.prototype = Object.create(v.rpc.Service.prototype)).constructor = e4, e4.create = function(t5, i5, n4) {
                    return new e4(t5, i5, n4);
                  }, Object.keys(t4).forEach(function(r4) {
                    var s4 = t4[r4];
                    function o4(t5, i5) {
                      return this.rpcCall(o4, p[s4[0]], p[s4[1]], t5, i5);
                    }
                    Object.defineProperty(o4, "name", { value: r4 }), Object.defineProperty(o4, "path", { value: `${n3}.${i4}` }), e4.prototype[r4] = o4;
                  }), e4;
                }(i3[u3].$s, u3) : i3[u3].$e && Object.values(i3[u3].$e).every(function(t4) {
                  return Number(t4) === t4;
                }) && (e3[u3] = function(t4) {
                  for (var i4 = Object.keys(t4), n4 = {}, e4 = 0; e4 < i4.length; e4++)
                    n4[n4[i4[e4]] = t4[i4[e4]]] = i4[e4];
                  return n4;
                }(i3[u3].$e));
              e3[u3] && !r3 && (p[`${n3}.${u3}`] = e3[u3]), delete i3[u3].$m, delete i3[u3].$s, delete i3[u3].$e, e3[u3] = t3(i3[u3], Boolean(n3) ? `${n3}.${u3}` : u3, e3[u3] || {});
            }
            return e3;
          }({ media: { proto_media: { MediaServerCommonResponse: { $m: { 1: ["code", "uint32", 0], 2: ["message", "string", ""] } }, NotifySdkNeedStreamRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["stream_id", "string", ""], 3: ["playAddr", "string", ""], 4: ["transCodecId", "int32", 0], 5: ["transCodecSuffix", "string", ""], 6: ["cdnType", "int32", 0], 7: ["retry", "int32", 0] } }, NotifySdkNeedStreamResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["response", "media.proto_media.MediaServerCommonResponse", null], 3: ["transCodecSuffix", "string", ""], 4: ["action", "int32", 0], 5: ["action_delay", "int32", 0], 6: ["ttl", "int32", 0] } }, RelayPublishCdnRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["request_cmd", "int32", 0], 3: ["streamid", "string", ""], 4: ["cdn_server", "string", ""], 5: ["publish_timeout", "uint32", 0], 6: ["request_seq_v2", "uint64", { low: 0, high: 0, unsigned: true }] } }, RelayPublishCdnResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["response", "media.proto_media.MediaServerCommonResponse", null], 3: ["request_seq_v2", "uint64", { low: 0, high: 0, unsigned: true }] } } } } }, "", p, false);
          var E = p.media, k = n2(3788), O = n2.n(k), I = n2(7202);
          O().util.Long = I.A, O().configure();
          var R, T = E.proto_media, C = function() {
            function t3() {
            }
            return t3.prototype.encodeRelayPublishCdnReq = function(t4) {
              var i3 = T.RelayPublishCdnRequest.create(t4);
              return T.RelayPublishCdnRequest.encode(i3).finish();
            }, t3.prototype.decodeRelayPublishCdnRsp = function(t4) {
              var i3 = T.RelayPublishCdnResponse.decode(t4);
              return i3.request_seq_v2 && I.A.isLong(i3.request_seq_v2) && (i3.request_seq_v2 = i3.request_seq_v2.toNumber()), i3;
            }, t3.prototype.encodeNotifySdkNeedStreamReq = function(t4) {
              var i3 = T.NotifySdkNeedStreamRequest.create(t4);
              return T.NotifySdkNeedStreamRequest.encode(i3).finish();
            }, t3.prototype.decodeNotifySdkNeedStreamRsp = function(t4) {
              return T.NotifySdkNeedStreamResponse.decode(t4);
            }, t3;
          }(), A = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), z = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, n3) || this;
              return r3.an = i4, r3.pn = n3, r3.ar = e3, r3.RETRY_MAX_TIME = 90, r3;
            }
            return A(i3, t3), i3.prototype.initReqParams = function(t4, i4) {
              this.streamID = t4, this.transCodecConfig = i4;
            }, i3.prototype.active = function(t4) {
              var i4 = this;
              if (void 0 === t4 && (t4 = false), this.an.info("".concat(u2.nkr, " call")), this.retryTimer)
                this.an.warn("".concat(u2.nkr, " was active, ignore"));
              else if (this.isOverTime)
                this.an.warn("".concat(u2.nkr, " retry over time, stop retry"));
              else {
                var n3 = function() {
                  i4.clearRetryTimer(), i4.ar.sendNotifySdkNeedStreamHttpRes(i4.streamID, i4.transCodecConfig, function(t5, n4) {
                    var e3 = t5.body;
                    i4.invalid(), i4.stopMaxTime(), i4.sucCallBack && (i4.sucCallBack && i4.sucCallBack(e3, n4), i4.resetCallback());
                  }, function(t5) {
                    i4._err = t5;
                    var n4 = t5.status_code;
                    i4.isOverTime ? i4.requestFail(t5) : ((429 === n4 || n4 >= 500 && n4 < 600) && i4.setRetryRule(1), i4.active());
                  }), t4 || i4.attempt++;
                };
                t4 ? n3() : this.getRetryDelayByCount(this.attempt).then(function(t5) {
                  i4.retryTimer = setTimeout(n3, t5);
                });
              }
            }, i3;
          }(f);
          !function(t3) {
            t3[t3.I = 0] = "I", t3[t3.H = 10] = "H", t3[t3.M = 100] = "M", t3[t3.L = 1e3] = "L";
          }(R || (R = {}));
          var D = {}, N = { _sendCDNPublishByAccessHub: function(t3, i3, n3, e3) {
            var u3 = this;
            this.mediaProtoBuf || (this.mediaProtoBuf = new C());
            var a2 = new d(this.logger, this.stateCenter, this);
            a2.initReqParams(t3, i3);
            var c2 = function(t4, i4) {
              try {
                var n4 = u3.mediaProtoBuf.decodeRelayPublishCdnRsp(t4);
                u3.logger.info("zb.sh.pt rsp decode ".concat(JSON.stringify(n4)));
                var e4 = (null == n4 ? void 0 : n4.response) || {};
                return { code: e4.code, msg: e4.message };
              } catch (t5) {
                return { code: -1 };
              }
            };
            a2.initCallback(function(t4, s3) {
              var o3 = c2(t4), a3 = o3.code, h2 = o3.msg;
              a3 && 0 != a3 ? (u3.logger.error("zb.sh.pt " + i3.type + " error code: " + a3 + " " + h2), e3(5004 === a3 ? r2.yTe : r2.Oy0, " cmd: ".concat(i3.type, " ").concat(a3, " ").concat(h2))) : (u3.logger.info("zb.sh.pt " + i3.type + " success"), n3 && n3({ errorCode: 0, extendedData: "" }));
            }, function(t4) {
              var n4 = t4.status_code, r3 = t4.body, a3 = t4.code, h2 = t4.msg, f2 = JSON.parse(JSON.stringify(s2.Of.error.He)), l2 = "";
              if (a3)
                f2 = { code: a3, msg: h2 }, l2 = h2;
              else if (200 === n4)
                u3.logger.info("zb.sh.pt error: "), f2 = s2.Of.error.He, l2 = "cmd: ".concat(i3.type);
              else {
                var d2 = "";
                if ((0, o2.QP)(r3))
                  d2 = r3;
                else {
                  var v2 = c2(r3);
                  d2 = v2.code + " " + v2.msg;
                }
                l2 = "request media server fail, error: " + n4 + " " + d2;
              }
              u3.logger.error("zb.sh.pt " + l2), e3 && e3(f2, l2);
            }), a2.startMaxTime(), a2.active(true);
          }, sendCDNRequest: function(t3, i3, n3, e3) {
            var r3 = this, s3 = "addpush" === i3.type ? 1 : 2, o3 = { request_seq: this.stateCenter.cdnSeq++, request_cmd: s3, streamid: t3, cdn_server: i3.pushUrl, request_seq_v2: this.stateCenter.cdnSeqV2++ };
            this.logger.info("zb.sh.scpba " + JSON.stringify(o3));
            var u3 = this.mediaProtoBuf.encodeRelayPublishCdnReq(o3);
            this.sendHttpPBRequest({ interfaceID: 6, resID: this.stateCenter.appid + "/" + t3 }, u3, function(t4, i4) {
              r3.logger.info("zb.sh.pt receive message " + (null == t4 ? void 0 : t4.status_code)), n3 && n3(t4, i4);
            }, function(t4) {
              e3 && e3(t4);
            }, { timeout: 4e3 });
          }, _publishTarget: function(t3, i3, n3) {
            this.logger.info("zb.sh.pt call");
            var e3 = t3.streamID;
            this.stateCenter.testEnvironment && (e3 = "zegotest-" + this.stateCenter.appid + "-" + t3.streamID), this._sendCDNPublishByAccessHub(e3, t3, i3, n3);
          }, notifySdkNeedStream: function(t3, i3, n3, e3) {
            var r3 = this;
            this.mediaProtoBuf || (this.mediaProtoBuf = new C());
            var s3 = new z(this.logger, this.stateCenter, this);
            return s3.initReqParams(t3, i3), s3.initCallback(function(t4) {
              try {
                var i4 = r3.mediaProtoBuf.decodeNotifySdkNeedStreamRsp(t4);
                r3.logger.info("zb.sh.nsns receive message:" + JSON.stringify(i4));
                var s4 = (null == i4 ? void 0 : i4.response) || {}, o3 = s4.code;
                o3 && 0 != o3 ? e3({ code: o3, message: s4.message || "" }, i4) : n3 && n3(i4);
              } catch (t5) {
                t5({ code: -1 });
              }
            }, function(t4) {
              r3.logger.error("zb.sh.nsns err:" + JSON.stringify(t4)), e3 && e3(t4);
            }), s3.startMaxTime(), s3.active(true), s3;
          }, sendNotifySdkNeedStreamHttpRes: function(t3, i3, n3, e3) {
            this.mediaProtoBuf || (this.mediaProtoBuf = new C());
            var r3 = i3.playAddr, s3 = i3.transCodecID, o3 = i3.transCodecSuffix, u3 = i3.retry, a2 = { request_seq: this.stateCenter.cdnSeq++, stream_id: t3, playAddr: r3, transCodecId: s3, transCodecSuffix: o3, cdnType: 0, retry: u3 };
            this.logger.info("zb.sh.nsns request body:" + JSON.stringify(a2));
            var c2 = this.mediaProtoBuf.encodeNotifySdkNeedStreamReq(a2);
            this.sendHttpPBRequest({ interfaceID: 19, resID: this.stateCenter.appid + "/" + t3 }, c2, function(t4, i4) {
              n3 && n3(t4, i4);
            }, function(t4) {
              e3 && e3(t4);
            }, { timeout: 4e3 });
          } }, P = function() {
            function t3(t4, i3, n3, e3) {
              this.an = t4, this.dataReport = i3, this.gn = n3, this.pn = e3, this.screenShotReady = false;
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.publishTarget = function(t4) {
              var i3 = this, n3 = "";
              switch (t4.type) {
                case "addpush":
                  n3 = s2.iJ.event;
                  break;
                case "delpush":
                case "clearpush":
                  n3 = s2.ns.event;
              }
              var e3 = this.cr.createSpan(R.H, { key: s2.Og.event, par: t4.streamID }, { key: "" }, n3);
              return e3.setAttributes({ url: s2.ns.url(t4.pushUrl) }), new a.l3(function(n4, u3) {
                var a2 = function(t5, n5) {
                  i3.an.error("zb.pt " + (n5 || t5.message)), i3.cr.setError(e3, t5, n5), u3({ errorCode: t5.code, extendedData: t5.message + (n5 ? " " + n5 : "") });
                };
                if (-1 == ["addpush", "delpush", "clearpush"].indexOf(t4.type))
                  return i3.an.error("zb.sh.pt cdn push type error"), void a2(r2.rBJ, "type error");
                if (t4.streamID && (0, o2.QP)(t4.streamID))
                  if (t4.pushUrl && (0, o2.QP)(t4.pushUrl))
                    if (i3.pn.publishStreamList[t4.streamID]) {
                      var c2 = i3.gn.getRoomByStreamID(t4.streamID);
                      if (c2) {
                        c2.streamHandler._publishTarget(t4, function(t5) {
                          e3.end(), n4(t5);
                        }, a2);
                      } else
                        a2(s2.Of.error.Ue);
                    } else
                      a2(s2.Of.error.Be);
                  else
                    a2(s2.Of.error.wn, "push url error");
                else
                  a2(s2.Of.error.wn, "stream id type error");
              });
            }, t3;
          }(), M = { type: "StreamCDN", install: function(t3, i3, n3) {
            for (var e3 in Object.defineProperty(i3.prototype, "initStreamCDN", { value: function() {
              this.streamCDNModule = new P(this.logger, this.dataReport, this.streamCenter, this.stateCenter);
            }, writable: false }), D)
              Object.defineProperty(t3.prototype, e3, { value: D[e3], writable: false });
            for (var e3 in N)
              Object.defineProperty(n3.prototype, e3, { value: N[e3], writable: false });
          } };
        }, 6361: function(t2) {
          "use strict";
          t2.exports = e;
        }, 6440: function(t2, i2, n2) {
          var e2;
          t2.exports = (e2 = n2(9021), function() {
            if ("function" == typeof ArrayBuffer) {
              var t3 = e2.lib.WordArray, i3 = t3.init, n3 = t3.init = function(t4) {
                if (t4 instanceof ArrayBuffer && (t4 = new Uint8Array(t4)), (t4 instanceof Int8Array || "undefined" != typeof Uint8ClampedArray && t4 instanceof Uint8ClampedArray || t4 instanceof Int16Array || t4 instanceof Uint16Array || t4 instanceof Int32Array || t4 instanceof Uint32Array || t4 instanceof Float32Array || t4 instanceof Float64Array) && (t4 = new Uint8Array(t4.buffer, t4.byteOffset, t4.byteLength)), t4 instanceof Uint8Array) {
                  for (var n4 = t4.byteLength, e3 = [], r2 = 0; r2 < n4; r2++)
                    e3[r2 >>> 2] |= t4[r2] << 24 - r2 % 4 * 8;
                  i3.call(this, e3, n4);
                } else
                  i3.apply(this, arguments);
              };
              n3.prototype = t3;
            }
          }(), e2.lib.WordArray);
        }, 6493: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { $t: function() {
            return r2;
          }, Fr: function() {
            return v;
          }, H8: function() {
            return f;
          }, HR: function() {
            return u2;
          }, UN: function() {
            return p;
          }, Wu: function() {
            return a;
          }, _Z: function() {
            return c;
          }, aR: function() {
            return s2;
          }, e8: function() {
            return d;
          }, gm: function() {
            return l;
          }, hL: function() {
            return m;
          }, hU: function() {
            return g;
          }, m0: function() {
            return o2;
          }, nr: function() {
            return h;
          } });
          var e2 = n2(2638);
          function r2() {
            return navigator.userAgent || "";
          }
          function s2() {
            return null !== navigator.platform.match(/iPhone|iPod|iPad|ios/i);
          }
          function o2() {
            return null !== r2().match(/Android|android/i);
          }
          function u2() {
            return null !== r2().match(/OpenHarmony|HarmonyOS/i);
          }
          function a() {
            return u2() && null !== r2().match(/ArkWeb/i);
          }
          function c() {
            var t3, i3 = navigator.userAgent, n3 = i3.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i) || [];
            return /trident/i.test(n3[1]) ? { name: "IE", version: (t3 = /\brv[ :]+([\d\.]+)/g.exec(i3) || [])[1] || "" } : "Chrome" === n3[1] && null != (t3 = i3.match(/\bOPR|Edge\/([\d\.]+)/)) ? { name: "Opera", version: t3[1] } : (n3 = n3[2] ? [n3[1], n3[2]] : [navigator.appName, navigator.appVersion, "-?"], null != (t3 = i3.match(/version\/([\d+\.]+)/i)) && n3.splice(1, 1, t3[1]), { name: n3[0], version: n3[1] });
          }
          function h() {
            return "safari" == c().name.toLowerCase();
          }
          function f() {
            return "chrome" == c().name.toLowerCase();
          }
          function l() {
            return "firefox" == c().name.toLowerCase();
          }
          function d() {
            return f() && !!navigator.userAgent.toLocaleLowerCase().match(/redmi\snote\s8/);
          }
          function v() {
            var t3 = r2();
            return !!(t3.match(/Mobi/i) || t3.match(/Android/i) || t3.match(/iPhone/i));
          }
          function m() {
            var t3, i3;
            return !!(null === (i3 = null === (t3 = r2()) || void 0 === t3 ? void 0 : t3.toLowerCase()) || void 0 === i3 ? void 0 : i3.match(/MicroMessenger/i));
          }
          function p() {
            var t3 = r2().toLowerCase().match(/cpu iphone os (.*?) like mac os/);
            return t3 && t3[1] || "";
          }
          function g() {
            return s2() ? e2.B7.IOS : o2() ? e2.B7.ANDROID : null !== navigator.platform.match(/Mac|Mac68K|MacPPC|MacIntel/i) ? e2.B7.MAC : null !== navigator.platform.match("Win32") && null === r2().match(/WOW64|Win64|x86_64|x86-64|x64;|amd64|AMD64|x64_64/i) ? e2.B7.WIN32 : u2() ? e2.B7.Harmony : e2.B7.UNKNOWN;
          }
        }, 6794: function(t2) {
          t2.exports = function() {
            function t3(i2, n2, e2) {
              function r2(o3, u2) {
                if (!n2[o3]) {
                  if (!i2[o3]) {
                    if (s2)
                      return s2(o3, true);
                    var a = new Error("Cannot find module '" + o3 + "'");
                    throw a.code = "MODULE_NOT_FOUND", a;
                  }
                  var c = n2[o3] = { exports: {} };
                  i2[o3][0].call(c.exports, function(t4) {
                    return r2(i2[o3][1][t4] || t4);
                  }, c, c.exports, t3, i2, n2, e2);
                }
                return n2[o3].exports;
              }
              for (var s2 = void 0, o2 = 0; o2 < e2.length; o2++)
                r2(e2[o2]);
              return r2;
            }
            return t3;
          }()({ 1: [function(t3, i2, n2) {
            "use strict";
            var e2 = (0, t3("./adapter_factory.js").adapterFactory)({ window });
            i2.exports = e2;
          }, { "./adapter_factory.js": 2 }], 2: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true }), n2.adapterFactory = h;
            var e2 = c(t3("./utils")), r2 = c(t3("./chrome/chrome_shim")), s2 = c(t3("./edge/edge_shim")), o2 = c(t3("./firefox/firefox_shim")), u2 = c(t3("./safari/safari_shim")), a = c(t3("./common_shim"));
            function c(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function h() {
              var t4 = (arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}).window, i3 = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : { shimChrome: true, shimFirefox: true, shimEdge: true, shimSafari: true }, n3 = e2.log, c2 = e2.detectBrowser(t4), h2 = { browserDetails: c2, commonShim: a, extractVersion: e2.extractVersion, disableLog: e2.disableLog, disableWarnings: e2.disableWarnings };
              switch (c2.browser) {
                case "chrome":
                  if (!r2 || !r2.shimPeerConnection || !i3.shimChrome)
                    return n3("Chrome shim is not included in this adapter release."), h2;
                  n3("adapter.js shimming chrome."), h2.browserShim = r2, r2.shimGetUserMedia(t4), r2.shimMediaStream(t4), r2.shimPeerConnection(t4), r2.shimOnTrack(t4), r2.shimAddTrackRemoveTrack(t4), r2.shimGetSendersWithDtmf(t4), r2.shimGetStats(t4), r2.shimSenderReceiverGetStats(t4), r2.fixNegotiationNeeded(t4), a.shimRTCIceCandidate(t4), a.shimConnectionState(t4), a.shimMaxMessageSize(t4), a.shimSendThrowTypeError(t4), a.removeAllowExtmapMixed(t4);
                  break;
                case "firefox":
                  if (!o2 || !o2.shimPeerConnection || !i3.shimFirefox)
                    return n3("Firefox shim is not included in this adapter release."), h2;
                  n3("adapter.js shimming firefox."), h2.browserShim = o2, o2.shimGetUserMedia(t4), o2.shimPeerConnection(t4), o2.shimOnTrack(t4), o2.shimRemoveStream(t4), o2.shimSenderGetStats(t4), o2.shimReceiverGetStats(t4), o2.shimRTCDataChannel(t4), a.shimRTCIceCandidate(t4), a.shimConnectionState(t4), a.shimMaxMessageSize(t4), a.shimSendThrowTypeError(t4);
                  break;
                case "edge":
                  if (!s2 || !s2.shimPeerConnection || !i3.shimEdge)
                    return n3("MS edge shim is not included in this adapter release."), h2;
                  n3("adapter.js shimming edge."), h2.browserShim = s2, s2.shimGetUserMedia(t4), s2.shimGetDisplayMedia(t4), s2.shimPeerConnection(t4), s2.shimReplaceTrack(t4), a.shimMaxMessageSize(t4), a.shimSendThrowTypeError(t4);
                  break;
                case "safari":
                  if (!u2 || !i3.shimSafari)
                    return n3("Safari shim is not included in this adapter release."), h2;
                  n3("adapter.js shimming safari."), h2.browserShim = u2, u2.shimRTCIceServerUrls(t4), u2.shimCreateOfferLegacy(t4), u2.shimCallbacksAPI(t4), u2.shimLocalStreamsAPI(t4), u2.shimRemoteStreamsAPI(t4), u2.shimTrackEventTransceiver(t4), u2.shimGetUserMedia(t4), a.shimRTCIceCandidate(t4), a.shimMaxMessageSize(t4), a.shimSendThrowTypeError(t4), a.removeAllowExtmapMixed(t4);
                  break;
                default:
                  n3("Unsupported browser!");
              }
              return h2;
            }
          }, { "./chrome/chrome_shim": 3, "./common_shim": 6, "./edge/edge_shim": 7, "./firefox/firefox_shim": 11, "./safari/safari_shim": 14, "./utils": 15 }], 3: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true }), n2.shimGetDisplayMedia = n2.shimGetUserMedia = void 0;
            var e2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            }, r2 = t3("./getusermedia");
            Object.defineProperty(n2, "shimGetUserMedia", { enumerable: true, get: function() {
              return r2.shimGetUserMedia;
            } });
            var s2 = t3("./getdisplaymedia");
            Object.defineProperty(n2, "shimGetDisplayMedia", { enumerable: true, get: function() {
              return s2.shimGetDisplayMedia;
            } }), n2.shimMediaStream = a, n2.shimOnTrack = c, n2.shimGetSendersWithDtmf = h, n2.shimGetStats = f, n2.shimSenderReceiverGetStats = l, n2.shimAddTrackRemoveTrackWithNative = d, n2.shimAddTrackRemoveTrack = v, n2.shimPeerConnection = m, n2.fixNegotiationNeeded = p;
            var o2 = u2(t3("../utils.js"));
            function u2(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function a(t4) {
              t4.MediaStream = t4.MediaStream || t4.webkitMediaStream;
            }
            function c(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && !("ontrack" in t4.RTCPeerConnection.prototype)) {
                Object.defineProperty(t4.RTCPeerConnection.prototype, "ontrack", { get: function() {
                  return this._ontrack;
                }, set: function(t5) {
                  this._ontrack && this.removeEventListener("track", this._ontrack), this.addEventListener("track", this._ontrack = t5);
                }, enumerable: true, configurable: true });
                var i3 = t4.RTCPeerConnection.prototype.setRemoteDescription;
                t4.RTCPeerConnection.prototype.setRemoteDescription = function() {
                  var n3 = this;
                  return this._ontrackpoly || (this._ontrackpoly = function(i4) {
                    i4.stream.addEventListener("addtrack", function(e3) {
                      var r3 = void 0;
                      r3 = t4.RTCPeerConnection.prototype.getReceivers ? n3.getReceivers().find(function(t5) {
                        return t5.track && t5.track.id === e3.track.id;
                      }) : { track: e3.track };
                      var s3 = new Event("track");
                      s3.track = e3.track, s3.receiver = r3, s3.transceiver = { receiver: r3 }, s3.streams = [i4.stream], n3.dispatchEvent(s3);
                    }), i4.stream.getTracks().forEach(function(e3) {
                      var r3 = void 0;
                      r3 = t4.RTCPeerConnection.prototype.getReceivers ? n3.getReceivers().find(function(t5) {
                        return t5.track && t5.track.id === e3.id;
                      }) : { track: e3 };
                      var s3 = new Event("track");
                      s3.track = e3, s3.receiver = r3, s3.transceiver = { receiver: r3 }, s3.streams = [i4.stream], n3.dispatchEvent(s3);
                    });
                  }, this.addEventListener("addstream", this._ontrackpoly)), i3.apply(this, arguments);
                };
              } else
                o2.wrapPeerConnectionEvent(t4, "track", function(t5) {
                  return t5.transceiver || Object.defineProperty(t5, "transceiver", { value: { receiver: t5.receiver } }), t5;
                });
            }
            function h(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && !("getSenders" in t4.RTCPeerConnection.prototype) && "createDTMFSender" in t4.RTCPeerConnection.prototype) {
                var i3 = function(t5, i4) {
                  return { track: i4, get dtmf() {
                    return void 0 === this._dtmf && (this._dtmf = "audio" === i4.kind ? t5.createDTMFSender(i4) : null), this._dtmf;
                  }, _pc: t5 };
                };
                if (!t4.RTCPeerConnection.prototype.getSenders) {
                  t4.RTCPeerConnection.prototype.getSenders = function() {
                    return this._senders = this._senders || [], this._senders.slice();
                  };
                  var n3 = t4.RTCPeerConnection.prototype.addTrack;
                  t4.RTCPeerConnection.prototype.addTrack = function(t5, e3) {
                    var r4 = n3.apply(this, arguments);
                    return r4 || (r4 = i3(this, t5), this._senders.push(r4)), r4;
                  };
                  var r3 = t4.RTCPeerConnection.prototype.removeTrack;
                  t4.RTCPeerConnection.prototype.removeTrack = function(t5) {
                    r3.apply(this, arguments);
                    var i4 = this._senders.indexOf(t5);
                    -1 !== i4 && this._senders.splice(i4, 1);
                  };
                }
                var s3 = t4.RTCPeerConnection.prototype.addStream;
                t4.RTCPeerConnection.prototype.addStream = function(t5) {
                  var n4 = this;
                  this._senders = this._senders || [], s3.apply(this, [t5]), t5.getTracks().forEach(function(t6) {
                    n4._senders.push(i3(n4, t6));
                  });
                };
                var o3 = t4.RTCPeerConnection.prototype.removeStream;
                t4.RTCPeerConnection.prototype.removeStream = function(t5) {
                  var i4 = this;
                  this._senders = this._senders || [], o3.apply(this, [t5]), t5.getTracks().forEach(function(t6) {
                    var n4 = i4._senders.find(function(i5) {
                      return i5.track === t6;
                    });
                    n4 && i4._senders.splice(i4._senders.indexOf(n4), 1);
                  });
                };
              } else if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && "getSenders" in t4.RTCPeerConnection.prototype && "createDTMFSender" in t4.RTCPeerConnection.prototype && t4.RTCRtpSender && !("dtmf" in t4.RTCRtpSender.prototype)) {
                var u3 = t4.RTCPeerConnection.prototype.getSenders;
                t4.RTCPeerConnection.prototype.getSenders = function() {
                  var t5 = this, i4 = u3.apply(this, []);
                  return i4.forEach(function(i5) {
                    return i5._pc = t5;
                  }), i4;
                }, Object.defineProperty(t4.RTCRtpSender.prototype, "dtmf", { get: function() {
                  return void 0 === this._dtmf && (this._dtmf = "audio" === this.track.kind ? this._pc.createDTMFSender(this.track) : null), this._dtmf;
                } });
              }
            }
            function f(t4) {
              if (t4.RTCPeerConnection) {
                var i3 = t4.RTCPeerConnection.prototype.getStats;
                t4.RTCPeerConnection.prototype.getStats = function(t5, n3, e3) {
                  var r3 = this, s3 = arguments;
                  if (arguments.length > 0 && "function" == typeof t5)
                    return i3.apply(this, arguments);
                  if (0 === i3.length && (0 === arguments.length || "function" != typeof arguments[0]))
                    return i3.apply(this, []);
                  var o3 = function(t6) {
                    var i4 = {};
                    return t6.result().forEach(function(t7) {
                      var n4 = { id: t7.id, timestamp: t7.timestamp, type: { localcandidate: "local-candidate", remotecandidate: "remote-candidate" }[t7.type] || t7.type };
                      t7.names().forEach(function(i5) {
                        n4[i5] = t7.stat(i5);
                      }), i4[n4.id] = n4;
                    }), i4;
                  }, u3 = function(t6) {
                    return new Map(Object.keys(t6).map(function(i4) {
                      return [i4, t6[i4]];
                    }));
                  };
                  return arguments.length >= 2 ? i3.apply(this, [function(t6) {
                    s3[1](u3(o3(t6)));
                  }, arguments[0]]) : new Promise(function(t6, n4) {
                    i3.apply(r3, [function(i4) {
                      t6(u3(o3(i4)));
                    }, n4]);
                  }).then(n3, e3);
                };
              }
            }
            function l(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && t4.RTCRtpSender && t4.RTCRtpReceiver) {
                if (!("getStats" in t4.RTCRtpSender.prototype)) {
                  var i3 = t4.RTCPeerConnection.prototype.getSenders;
                  i3 && (t4.RTCPeerConnection.prototype.getSenders = function() {
                    var t5 = this, n4 = i3.apply(this, []);
                    return n4.forEach(function(i4) {
                      return i4._pc = t5;
                    }), n4;
                  });
                  var n3 = t4.RTCPeerConnection.prototype.addTrack;
                  n3 && (t4.RTCPeerConnection.prototype.addTrack = function() {
                    var t5 = n3.apply(this, arguments);
                    return t5._pc = this, t5;
                  }), t4.RTCRtpSender.prototype.getStats = function() {
                    var t5 = this;
                    return this._pc.getStats().then(function(i4) {
                      return o2.filterStats(i4, t5.track, true);
                    });
                  };
                }
                if (!("getStats" in t4.RTCRtpReceiver.prototype)) {
                  var r3 = t4.RTCPeerConnection.prototype.getReceivers;
                  r3 && (t4.RTCPeerConnection.prototype.getReceivers = function() {
                    var t5 = this, i4 = r3.apply(this, []);
                    return i4.forEach(function(i5) {
                      return i5._pc = t5;
                    }), i4;
                  }), o2.wrapPeerConnectionEvent(t4, "track", function(t5) {
                    return t5.receiver._pc = t5.srcElement, t5;
                  }), t4.RTCRtpReceiver.prototype.getStats = function() {
                    var t5 = this;
                    return this._pc.getStats().then(function(i4) {
                      return o2.filterStats(i4, t5.track, false);
                    });
                  };
                }
                if ("getStats" in t4.RTCRtpSender.prototype && "getStats" in t4.RTCRtpReceiver.prototype) {
                  var s3 = t4.RTCPeerConnection.prototype.getStats;
                  t4.RTCPeerConnection.prototype.getStats = function() {
                    if (arguments.length > 0 && arguments[0] instanceof t4.MediaStreamTrack) {
                      var i4 = arguments[0], n4 = void 0, e3 = void 0, r4 = void 0;
                      return this.getSenders().forEach(function(t5) {
                        t5.track === i4 && (n4 ? r4 = true : n4 = t5);
                      }), this.getReceivers().forEach(function(t5) {
                        return t5.track === i4 && (e3 ? r4 = true : e3 = t5), t5.track === i4;
                      }), r4 || n4 && e3 ? Promise.reject(new DOMException("There are more than one sender or receiver for the track.", "InvalidAccessError")) : n4 ? n4.getStats() : e3 ? e3.getStats() : Promise.reject(new DOMException("There is no sender or receiver for the track.", "InvalidAccessError"));
                    }
                    return s3.apply(this, arguments);
                  };
                }
              }
            }
            function d(t4) {
              t4.RTCPeerConnection.prototype.getLocalStreams = function() {
                var t5 = this;
                return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, Object.keys(this._shimmedLocalStreams).map(function(i4) {
                  return t5._shimmedLocalStreams[i4][0];
                });
              };
              var i3 = t4.RTCPeerConnection.prototype.addTrack;
              t4.RTCPeerConnection.prototype.addTrack = function(t5, n4) {
                if (!n4)
                  return i3.apply(this, arguments);
                this._shimmedLocalStreams = this._shimmedLocalStreams || {};
                var e4 = i3.apply(this, arguments);
                return this._shimmedLocalStreams[n4.id] ? -1 === this._shimmedLocalStreams[n4.id].indexOf(e4) && this._shimmedLocalStreams[n4.id].push(e4) : this._shimmedLocalStreams[n4.id] = [n4, e4], e4;
              };
              var n3 = t4.RTCPeerConnection.prototype.addStream;
              t4.RTCPeerConnection.prototype.addStream = function(t5) {
                var i4 = this;
                this._shimmedLocalStreams = this._shimmedLocalStreams || {}, t5.getTracks().forEach(function(t6) {
                  if (i4.getSenders().find(function(i5) {
                    return i5.track === t6;
                  }))
                    throw new DOMException("Track already exists.", "InvalidAccessError");
                });
                var e4 = this.getSenders();
                n3.apply(this, arguments);
                var r4 = this.getSenders().filter(function(t6) {
                  return -1 === e4.indexOf(t6);
                });
                this._shimmedLocalStreams[t5.id] = [t5].concat(r4);
              };
              var e3 = t4.RTCPeerConnection.prototype.removeStream;
              t4.RTCPeerConnection.prototype.removeStream = function(t5) {
                return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, delete this._shimmedLocalStreams[t5.id], e3.apply(this, arguments);
              };
              var r3 = t4.RTCPeerConnection.prototype.removeTrack;
              t4.RTCPeerConnection.prototype.removeTrack = function(t5) {
                var i4 = this;
                return this._shimmedLocalStreams = this._shimmedLocalStreams || {}, t5 && Object.keys(this._shimmedLocalStreams).forEach(function(n4) {
                  var e4 = i4._shimmedLocalStreams[n4].indexOf(t5);
                  -1 !== e4 && i4._shimmedLocalStreams[n4].splice(e4, 1), 1 === i4._shimmedLocalStreams[n4].length && delete i4._shimmedLocalStreams[n4];
                }), r3.apply(this, arguments);
              };
            }
            function v(t4) {
              if (t4.RTCPeerConnection) {
                var i3 = o2.detectBrowser(t4);
                if (t4.RTCPeerConnection.prototype.addTrack && i3.version >= 65)
                  return d(t4);
                var n3 = t4.RTCPeerConnection.prototype.getLocalStreams;
                t4.RTCPeerConnection.prototype.getLocalStreams = function() {
                  var t5 = this, i4 = n3.apply(this);
                  return this._reverseStreams = this._reverseStreams || {}, i4.map(function(i5) {
                    return t5._reverseStreams[i5.id];
                  });
                };
                var e3 = t4.RTCPeerConnection.prototype.addStream;
                t4.RTCPeerConnection.prototype.addStream = function(i4) {
                  var n4 = this;
                  if (this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, i4.getTracks().forEach(function(t5) {
                    if (n4.getSenders().find(function(i5) {
                      return i5.track === t5;
                    }))
                      throw new DOMException("Track already exists.", "InvalidAccessError");
                  }), !this._reverseStreams[i4.id]) {
                    var r4 = new t4.MediaStream(i4.getTracks());
                    this._streams[i4.id] = r4, this._reverseStreams[r4.id] = i4, i4 = r4;
                  }
                  e3.apply(this, [i4]);
                };
                var r3 = t4.RTCPeerConnection.prototype.removeStream;
                t4.RTCPeerConnection.prototype.removeStream = function(t5) {
                  this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {}, r3.apply(this, [this._streams[t5.id] || t5]), delete this._reverseStreams[this._streams[t5.id] ? this._streams[t5.id].id : t5.id], delete this._streams[t5.id];
                }, t4.RTCPeerConnection.prototype.addTrack = function(i4, n4) {
                  var e4 = this;
                  if ("closed" === this.signalingState)
                    throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
                  var r4 = [].slice.call(arguments, 1);
                  if (1 !== r4.length || !r4[0].getTracks().find(function(t5) {
                    return t5 === i4;
                  }))
                    throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.", "NotSupportedError");
                  if (this.getSenders().find(function(t5) {
                    return t5.track === i4;
                  }))
                    throw new DOMException("Track already exists.", "InvalidAccessError");
                  this._streams = this._streams || {}, this._reverseStreams = this._reverseStreams || {};
                  var s4 = this._streams[n4.id];
                  if (s4)
                    s4.addTrack(i4), Promise.resolve().then(function() {
                      e4.dispatchEvent(new Event("negotiationneeded"));
                    });
                  else {
                    var o3 = new t4.MediaStream([i4]);
                    this._streams[n4.id] = o3, this._reverseStreams[o3.id] = n4, this.addStream(o3);
                  }
                  return this.getSenders().find(function(t5) {
                    return t5.track === i4;
                  });
                }, ["createOffer", "createAnswer"].forEach(function(i4) {
                  var n4 = t4.RTCPeerConnection.prototype[i4];
                  t4.RTCPeerConnection.prototype[i4] = function() {
                    var t5 = this, i5 = arguments;
                    return arguments.length && "function" == typeof arguments[0] ? n4.apply(this, [function(n5) {
                      var e4 = a2(t5, n5);
                      i5[0].apply(null, [e4]);
                    }, function(t6) {
                      i5[1] && i5[1].apply(null, t6);
                    }, arguments[2]]) : n4.apply(this, arguments).then(function(i6) {
                      return a2(t5, i6);
                    });
                  };
                });
                var s3 = t4.RTCPeerConnection.prototype.setLocalDescription;
                t4.RTCPeerConnection.prototype.setLocalDescription = function() {
                  return arguments.length && arguments[0].type ? (arguments[0] = c2(this, arguments[0]), s3.apply(this, arguments)) : s3.apply(this, arguments);
                };
                var u3 = Object.getOwnPropertyDescriptor(t4.RTCPeerConnection.prototype, "localDescription");
                Object.defineProperty(t4.RTCPeerConnection.prototype, "localDescription", { get: function() {
                  var t5 = u3.get.apply(this);
                  return "" === t5.type ? t5 : a2(this, t5);
                } }), t4.RTCPeerConnection.prototype.removeTrack = function(t5) {
                  var i4 = this;
                  if ("closed" === this.signalingState)
                    throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.", "InvalidStateError");
                  if (!t5._pc)
                    throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.", "TypeError");
                  if (t5._pc !== this)
                    throw new DOMException("Sender was not created by this connection.", "InvalidAccessError");
                  this._streams = this._streams || {};
                  var n4 = void 0;
                  Object.keys(this._streams).forEach(function(e4) {
                    i4._streams[e4].getTracks().find(function(i5) {
                      return t5.track === i5;
                    }) && (n4 = i4._streams[e4]);
                  }), n4 && (1 === n4.getTracks().length ? this.removeStream(this._reverseStreams[n4.id]) : n4.removeTrack(t5.track), this.dispatchEvent(new Event("negotiationneeded")));
                };
              }
              function a2(t5, i4) {
                var n4 = i4.sdp;
                return Object.keys(t5._reverseStreams || []).forEach(function(i5) {
                  var e4 = t5._reverseStreams[i5];
                  n4 = n4.replace(new RegExp(t5._streams[e4.id].id, "g"), e4.id);
                }), new RTCSessionDescription({ type: i4.type, sdp: n4 });
              }
              function c2(t5, i4) {
                var n4 = i4.sdp;
                return Object.keys(t5._reverseStreams || []).forEach(function(i5) {
                  var e4 = t5._reverseStreams[i5], r4 = t5._streams[e4.id];
                  n4 = n4.replace(new RegExp(e4.id, "g"), r4.id);
                }), new RTCSessionDescription({ type: i4.type, sdp: n4 });
              }
            }
            function m(t4) {
              if (!t4.RTCPeerConnection && t4.webkitRTCPeerConnection && (t4.RTCPeerConnection = t4.webkitRTCPeerConnection), t4.RTCPeerConnection) {
                ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function(i4) {
                  var n3 = t4.RTCPeerConnection.prototype[i4];
                  t4.RTCPeerConnection.prototype[i4] = function() {
                    return arguments[0] = new ("addIceCandidate" === i4 ? t4.RTCIceCandidate : t4.RTCSessionDescription)(arguments[0]), n3.apply(this, arguments);
                  };
                });
                var i3 = t4.RTCPeerConnection.prototype.addIceCandidate;
                t4.RTCPeerConnection.prototype.addIceCandidate = function() {
                  return arguments[0] ? i3.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve());
                };
              }
            }
            function p(t4) {
              o2.wrapPeerConnectionEvent(t4, "negotiationneeded", function(t5) {
                if ("stable" === t5.target.signalingState)
                  return t5;
              });
            }
          }, { "../utils.js": 15, "./getdisplaymedia": 4, "./getusermedia": 5 }], 4: [function(t3, i2, n2) {
            "use strict";
            function e2(t4, i3) {
              t4.navigator.mediaDevices && "getDisplayMedia" in t4.navigator.mediaDevices || t4.navigator.mediaDevices && ("function" == typeof i3 ? t4.navigator.mediaDevices.getDisplayMedia = function(n3) {
                return i3(n3).then(function(i4) {
                  var e3 = n3.video && n3.video.width, r2 = n3.video && n3.video.height;
                  return n3.video = { mandatory: { chromeMediaSource: "desktop", chromeMediaSourceId: i4, maxFrameRate: n3.video && n3.video.frameRate || 3 } }, e3 && (n3.video.mandatory.maxWidth = e3), r2 && (n3.video.mandatory.maxHeight = r2), t4.navigator.mediaDevices.getUserMedia(n3);
                });
              } : console.error("shimGetDisplayMedia: getSourceId argument is not a function"));
            }
            Object.defineProperty(n2, "__esModule", { value: true }), n2.shimGetDisplayMedia = e2;
          }, {}], 5: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true });
            var e2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            };
            n2.shimGetUserMedia = u2;
            var r2 = s2(t3("../utils.js"));
            function s2(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            var o2 = r2.log;
            function u2(t4) {
              var i3 = t4 && t4.navigator;
              if (i3.mediaDevices) {
                var n3 = r2.detectBrowser(t4), s3 = function(t5) {
                  if ("object" !== (void 0 === t5 ? "undefined" : e2(t5)) || t5.mandatory || t5.optional)
                    return t5;
                  var i4 = {};
                  return Object.keys(t5).forEach(function(n4) {
                    if ("require" !== n4 && "advanced" !== n4 && "mediaSource" !== n4) {
                      var r3 = "object" === e2(t5[n4]) ? t5[n4] : { ideal: t5[n4] };
                      void 0 !== r3.exact && "number" == typeof r3.exact && (r3.min = r3.max = r3.exact);
                      var s4 = function(t6, i5) {
                        return t6 ? t6 + i5.charAt(0).toUpperCase() + i5.slice(1) : "deviceId" === i5 ? "sourceId" : i5;
                      };
                      if (void 0 !== r3.ideal) {
                        i4.optional = i4.optional || [];
                        var o3 = {};
                        "number" == typeof r3.ideal ? (o3[s4("min", n4)] = r3.ideal, i4.optional.push(o3), (o3 = {})[s4("max", n4)] = r3.ideal, i4.optional.push(o3)) : (o3[s4("", n4)] = r3.ideal, i4.optional.push(o3));
                      }
                      void 0 !== r3.exact && "number" != typeof r3.exact ? (i4.mandatory = i4.mandatory || {}, i4.mandatory[s4("", n4)] = r3.exact) : ["min", "max"].forEach(function(t6) {
                        void 0 !== r3[t6] && (i4.mandatory = i4.mandatory || {}, i4.mandatory[s4(t6, n4)] = r3[t6]);
                      });
                    }
                  }), t5.advanced && (i4.optional = (i4.optional || []).concat(t5.advanced)), i4;
                }, u3 = function(t5, r3) {
                  if (n3.version >= 61)
                    return r3(t5);
                  if ((t5 = JSON.parse(JSON.stringify(t5))) && "object" === e2(t5.audio)) {
                    var u4 = function(t6, i4, n4) {
                      i4 in t6 && !(n4 in t6) && (t6[n4] = t6[i4], delete t6[i4]);
                    };
                    u4((t5 = JSON.parse(JSON.stringify(t5))).audio, "autoGainControl", "googAutoGainControl"), u4(t5.audio, "noiseSuppression", "googNoiseSuppression"), t5.audio = s3(t5.audio);
                  }
                  if (t5 && "object" === e2(t5.video)) {
                    var a2 = t5.video.facingMode;
                    a2 = a2 && ("object" === (void 0 === a2 ? "undefined" : e2(a2)) ? a2 : { ideal: a2 });
                    var c2 = n3.version < 66;
                    if (a2 && ("user" === a2.exact || "environment" === a2.exact || "user" === a2.ideal || "environment" === a2.ideal) && (!i3.mediaDevices.getSupportedConstraints || !i3.mediaDevices.getSupportedConstraints().facingMode || c2)) {
                      delete t5.video.facingMode;
                      var h2 = void 0;
                      if ("environment" === a2.exact || "environment" === a2.ideal ? h2 = ["back", "rear"] : "user" !== a2.exact && "user" !== a2.ideal || (h2 = ["front"]), h2)
                        return i3.mediaDevices.enumerateDevices().then(function(i4) {
                          var n4 = (i4 = i4.filter(function(t6) {
                            return "videoinput" === t6.kind;
                          })).find(function(t6) {
                            return h2.some(function(i5) {
                              return t6.label.toLowerCase().includes(i5);
                            });
                          });
                          return !n4 && i4.length && h2.includes("back") && (n4 = i4[i4.length - 1]), n4 && (t5.video.deviceId = a2.exact ? { exact: n4.deviceId } : { ideal: n4.deviceId }), t5.video = s3(t5.video), o2("chrome: " + JSON.stringify(t5)), r3(t5);
                        });
                    }
                    t5.video = s3(t5.video);
                  }
                  return o2("chrome: " + JSON.stringify(t5)), r3(t5);
                }, a = function(t5) {
                  return n3.version >= 64 ? t5 : { name: { PermissionDeniedError: "NotAllowedError", PermissionDismissedError: "NotAllowedError", InvalidStateError: "NotAllowedError", DevicesNotFoundError: "NotFoundError", ConstraintNotSatisfiedError: "OverconstrainedError", TrackStartError: "NotReadableError", MediaDeviceFailedDueToShutdown: "NotAllowedError", MediaDeviceKillSwitchOn: "NotAllowedError", TabCaptureError: "AbortError", ScreenCaptureError: "AbortError", DeviceCaptureError: "AbortError" }[t5.name] || t5.name, message: t5.message, constraint: t5.constraint || t5.constraintName, toString: function() {
                    return this.name + (this.message && ": ") + this.message;
                  } };
                }, c = function(t5, n4, e3) {
                  u3(t5, function(t6) {
                    i3.webkitGetUserMedia(t6, n4, function(t7) {
                      e3 && e3(a(t7));
                    });
                  });
                };
                if (i3.getUserMedia = c.bind(i3), i3.mediaDevices.getUserMedia) {
                  var h = i3.mediaDevices.getUserMedia.bind(i3.mediaDevices);
                  i3.mediaDevices.getUserMedia = function(t5) {
                    return u3(t5, function(t6) {
                      return h(t6).then(function(i4) {
                        if (t6.audio && !i4.getAudioTracks().length || t6.video && !i4.getVideoTracks().length)
                          throw i4.getTracks().forEach(function(t7) {
                            t7.stop();
                          }), new DOMException("", "NotFoundError");
                        return i4;
                      }, function(t7) {
                        return Promise.reject(a(t7));
                      });
                    });
                  };
                }
              }
            }
          }, { "../utils.js": 15 }], 6: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true });
            var e2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            };
            n2.shimRTCIceCandidate = a, n2.shimMaxMessageSize = c, n2.shimSendThrowTypeError = h, n2.shimConnectionState = f, n2.removeAllowExtmapMixed = l;
            var r2 = u2(t3("sdp")), s2 = o2(t3("./utils"));
            function o2(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function u2(t4) {
              return t4 && t4.__esModule ? t4 : { default: t4 };
            }
            function a(t4) {
              if (!(!t4.RTCIceCandidate || t4.RTCIceCandidate && "foundation" in t4.RTCIceCandidate.prototype)) {
                var i3 = t4.RTCIceCandidate;
                t4.RTCIceCandidate = function(t5) {
                  if ("object" === (void 0 === t5 ? "undefined" : e2(t5)) && t5.candidate && 0 === t5.candidate.indexOf("a=") && ((t5 = JSON.parse(JSON.stringify(t5))).candidate = t5.candidate.substr(2)), t5.candidate && t5.candidate.length) {
                    var n3 = new i3(t5), s3 = r2.default.parseCandidate(t5.candidate), o3 = Object.assign(n3, s3);
                    return o3.toJSON = function() {
                      return { candidate: o3.candidate, sdpMid: o3.sdpMid, sdpMLineIndex: o3.sdpMLineIndex, usernameFragment: o3.usernameFragment };
                    }, o3;
                  }
                  return new i3(t5);
                }, t4.RTCIceCandidate.prototype = i3.prototype, s2.wrapPeerConnectionEvent(t4, "icecandidate", function(i4) {
                  return i4.candidate && Object.defineProperty(i4, "candidate", { value: new t4.RTCIceCandidate(i4.candidate), writable: "false" }), i4;
                });
              }
            }
            function c(t4) {
              if (!t4.RTCSctpTransport && t4.RTCPeerConnection) {
                var i3 = s2.detectBrowser(t4);
                "sctp" in t4.RTCPeerConnection.prototype || Object.defineProperty(t4.RTCPeerConnection.prototype, "sctp", { get: function() {
                  return void 0 === this._sctp ? null : this._sctp;
                } });
                var n3 = function(t5) {
                  if (!t5 || !t5.sdp)
                    return false;
                  var i4 = r2.default.splitSections(t5.sdp);
                  return i4.shift(), i4.some(function(t6) {
                    var i5 = r2.default.parseMLine(t6);
                    return i5 && "application" === i5.kind && -1 !== i5.protocol.indexOf("SCTP");
                  });
                }, e3 = function(t5) {
                  var i4 = t5.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);
                  if (null === i4 || i4.length < 2)
                    return -1;
                  var n4 = parseInt(i4[1], 10);
                  return n4 != n4 ? -1 : n4;
                }, o3 = function(t5) {
                  var n4 = 65536;
                  return "firefox" === i3.browser && (n4 = i3.version < 57 ? -1 === t5 ? 16384 : 2147483637 : i3.version < 60 ? 57 === i3.version ? 65535 : 65536 : 2147483637), n4;
                }, u3 = function(t5, n4) {
                  var e4 = 65536;
                  "firefox" === i3.browser && 57 === i3.version && (e4 = 65535);
                  var s3 = r2.default.matchPrefix(t5.sdp, "a=max-message-size:");
                  return s3.length > 0 ? e4 = parseInt(s3[0].substr(19), 10) : "firefox" === i3.browser && -1 !== n4 && (e4 = 2147483637), e4;
                }, a2 = t4.RTCPeerConnection.prototype.setRemoteDescription;
                t4.RTCPeerConnection.prototype.setRemoteDescription = function() {
                  if (this._sctp = null, n3(arguments[0])) {
                    var t5 = e3(arguments[0]), i4 = o3(t5), r3 = u3(arguments[0], t5), s3 = void 0;
                    s3 = 0 === i4 && 0 === r3 ? Number.POSITIVE_INFINITY : 0 === i4 || 0 === r3 ? Math.max(i4, r3) : Math.min(i4, r3);
                    var c2 = {};
                    Object.defineProperty(c2, "maxMessageSize", { get: function() {
                      return s3;
                    } }), this._sctp = c2;
                  }
                  return a2.apply(this, arguments);
                };
              }
            }
            function h(t4) {
              if (t4.RTCPeerConnection && "createDataChannel" in t4.RTCPeerConnection.prototype) {
                var i3 = t4.RTCPeerConnection.prototype.createDataChannel;
                t4.RTCPeerConnection.prototype.createDataChannel = function() {
                  var t5 = i3.apply(this, arguments);
                  return n3(t5, this), t5;
                }, s2.wrapPeerConnectionEvent(t4, "datachannel", function(t5) {
                  return n3(t5.channel, t5.target), t5;
                });
              }
              function n3(t5, i4) {
                var n4 = t5.send;
                t5.send = function() {
                  var e3 = arguments[0];
                  if ("open" === t5.readyState && i4.sctp && (e3.length || e3.size || e3.byteLength) > i4.sctp.maxMessageSize)
                    throw new TypeError("Message too large (can send a maximum of " + i4.sctp.maxMessageSize + " bytes)");
                  return n4.apply(t5, arguments);
                };
              }
            }
            function f(t4) {
              if (t4.RTCPeerConnection && !("connectionState" in t4.RTCPeerConnection.prototype)) {
                var i3 = t4.RTCPeerConnection.prototype;
                Object.defineProperty(i3, "connectionState", { get: function() {
                  return { completed: "connected", checking: "connecting" }[this.iceConnectionState] || this.iceConnectionState;
                }, enumerable: true, configurable: true }), Object.defineProperty(i3, "onconnectionstatechange", { get: function() {
                  return this._onconnectionstatechange || null;
                }, set: function(t5) {
                  this._onconnectionstatechange && (this.removeEventListener("connectionstatechange", this._onconnectionstatechange), delete this._onconnectionstatechange), t5 && this.addEventListener("connectionstatechange", this._onconnectionstatechange = t5);
                }, enumerable: true, configurable: true }), ["setLocalDescription", "setRemoteDescription"].forEach(function(t5) {
                  var n3 = i3[t5];
                  i3[t5] = function() {
                    return this._connectionstatechangepoly || (this._connectionstatechangepoly = function(t6) {
                      var i4 = t6.target;
                      if (i4._lastConnectionState !== i4.connectionState) {
                        i4._lastConnectionState = i4.connectionState;
                        var n4 = new Event("connectionstatechange", t6);
                        i4.dispatchEvent(n4);
                      }
                      return t6;
                    }, this.addEventListener("iceconnectionstatechange", this._connectionstatechangepoly)), n3.apply(this, arguments);
                  };
                });
              }
            }
            function l(t4) {
              if (t4.RTCPeerConnection) {
                var i3 = s2.detectBrowser(t4);
                if (!("chrome" === i3.browser && i3.version >= 71)) {
                  var n3 = t4.RTCPeerConnection.prototype.setRemoteDescription;
                  t4.RTCPeerConnection.prototype.setRemoteDescription = function(t5) {
                    return t5 && t5.sdp && -1 !== t5.sdp.indexOf("\na=extmap-allow-mixed") && (t5.sdp = t5.sdp.split("\n").filter(function(t6) {
                      return "a=extmap-allow-mixed" !== t6.trim();
                    }).join("\n")), n3.apply(this, arguments);
                  };
                }
              }
            }
          }, { "./utils": 15, sdp: 17 }], 7: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true }), n2.shimGetDisplayMedia = n2.shimGetUserMedia = void 0;
            var e2 = t3("./getusermedia");
            Object.defineProperty(n2, "shimGetUserMedia", { enumerable: true, get: function() {
              return e2.shimGetUserMedia;
            } });
            var r2 = t3("./getdisplaymedia");
            Object.defineProperty(n2, "shimGetDisplayMedia", { enumerable: true, get: function() {
              return r2.shimGetDisplayMedia;
            } }), n2.shimPeerConnection = h, n2.shimReplaceTrack = f;
            var s2 = c(t3("../utils")), o2 = t3("./filtericeservers"), u2 = a(t3("rtcpeerconnection-shim"));
            function a(t4) {
              return t4 && t4.__esModule ? t4 : { default: t4 };
            }
            function c(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function h(t4) {
              var i3 = s2.detectBrowser(t4);
              if (t4.RTCIceGatherer && (t4.RTCIceCandidate || (t4.RTCIceCandidate = function(t5) {
                return t5;
              }), t4.RTCSessionDescription || (t4.RTCSessionDescription = function(t5) {
                return t5;
              }), i3.version < 15025)) {
                var n3 = Object.getOwnPropertyDescriptor(t4.MediaStreamTrack.prototype, "enabled");
                Object.defineProperty(t4.MediaStreamTrack.prototype, "enabled", { set: function(t5) {
                  n3.set.call(this, t5);
                  var i4 = new Event("enabled");
                  i4.enabled = t5, this.dispatchEvent(i4);
                } });
              }
              t4.RTCRtpSender && !("dtmf" in t4.RTCRtpSender.prototype) && Object.defineProperty(t4.RTCRtpSender.prototype, "dtmf", { get: function() {
                return void 0 === this._dtmf && ("audio" === this.track.kind ? this._dtmf = new t4.RTCDtmfSender(this) : "video" === this.track.kind && (this._dtmf = null)), this._dtmf;
              } }), t4.RTCDtmfSender && !t4.RTCDTMFSender && (t4.RTCDTMFSender = t4.RTCDtmfSender);
              var e3 = (0, u2.default)(t4, i3.version);
              t4.RTCPeerConnection = function(t5) {
                return t5 && t5.iceServers && (t5.iceServers = (0, o2.filterIceServers)(t5.iceServers, i3.version), s2.log("ICE servers after filtering:", t5.iceServers)), new e3(t5);
              }, t4.RTCPeerConnection.prototype = e3.prototype;
            }
            function f(t4) {
              t4.RTCRtpSender && !("replaceTrack" in t4.RTCRtpSender.prototype) && (t4.RTCRtpSender.prototype.replaceTrack = t4.RTCRtpSender.prototype.setTrack);
            }
          }, { "../utils": 15, "./filtericeservers": 8, "./getdisplaymedia": 9, "./getusermedia": 10, "rtcpeerconnection-shim": 16 }], 8: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true }), n2.filterIceServers = s2;
            var e2 = r2(t3("../utils"));
            function r2(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function s2(t4, i3) {
              var n3 = false;
              return (t4 = JSON.parse(JSON.stringify(t4))).filter(function(t5) {
                if (t5 && (t5.urls || t5.url)) {
                  var i4 = t5.urls || t5.url;
                  t5.url && !t5.urls && e2.deprecated("RTCIceServer.url", "RTCIceServer.urls");
                  var r3 = "string" == typeof i4;
                  return r3 && (i4 = [i4]), i4 = i4.filter(function(t6) {
                    if (0 === t6.indexOf("stun:"))
                      return false;
                    var i5 = t6.startsWith("turn") && !t6.startsWith("turn:[") && t6.includes("transport=udp");
                    return i5 && !n3 ? (n3 = true, true) : i5 && !n3;
                  }), delete t5.url, t5.urls = r3 ? i4[0] : i4, !!i4.length;
                }
              });
            }
          }, { "../utils": 15 }], 9: [function(t3, i2, n2) {
            "use strict";
            function e2(t4) {
              "getDisplayMedia" in t4.navigator && t4.navigator.mediaDevices && (t4.navigator.mediaDevices && "getDisplayMedia" in t4.navigator.mediaDevices || (t4.navigator.mediaDevices.getDisplayMedia = t4.navigator.getDisplayMedia.bind(t4.navigator)));
            }
            Object.defineProperty(n2, "__esModule", { value: true }), n2.shimGetDisplayMedia = e2;
          }, {}], 10: [function(t3, i2, n2) {
            "use strict";
            function e2(t4) {
              var i3 = t4 && t4.navigator, n3 = function(t5) {
                return { name: { PermissionDeniedError: "NotAllowedError" }[t5.name] || t5.name, message: t5.message, constraint: t5.constraint, toString: function() {
                  return this.name;
                } };
              }, e3 = i3.mediaDevices.getUserMedia.bind(i3.mediaDevices);
              i3.mediaDevices.getUserMedia = function(t5) {
                return e3(t5).catch(function(t6) {
                  return Promise.reject(n3(t6));
                });
              };
            }
            Object.defineProperty(n2, "__esModule", { value: true }), n2.shimGetUserMedia = e2;
          }, {}], 11: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true }), n2.shimGetDisplayMedia = n2.shimGetUserMedia = void 0;
            var e2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            }, r2 = t3("./getusermedia");
            Object.defineProperty(n2, "shimGetUserMedia", { enumerable: true, get: function() {
              return r2.shimGetUserMedia;
            } });
            var s2 = t3("./getdisplaymedia");
            Object.defineProperty(n2, "shimGetDisplayMedia", { enumerable: true, get: function() {
              return s2.shimGetDisplayMedia;
            } }), n2.shimOnTrack = a, n2.shimPeerConnection = c, n2.shimSenderGetStats = h, n2.shimReceiverGetStats = f, n2.shimRemoveStream = l, n2.shimRTCDataChannel = d;
            var o2 = u2(t3("../utils"));
            function u2(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function a(t4) {
              "object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCTrackEvent && "receiver" in t4.RTCTrackEvent.prototype && !("transceiver" in t4.RTCTrackEvent.prototype) && Object.defineProperty(t4.RTCTrackEvent.prototype, "transceiver", { get: function() {
                return { receiver: this.receiver };
              } });
            }
            function c(t4) {
              var i3 = o2.detectBrowser(t4);
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && (t4.RTCPeerConnection || t4.mozRTCPeerConnection)) {
                !t4.RTCPeerConnection && t4.mozRTCPeerConnection && (t4.RTCPeerConnection = t4.mozRTCPeerConnection), ["setLocalDescription", "setRemoteDescription", "addIceCandidate"].forEach(function(i4) {
                  var n4 = t4.RTCPeerConnection.prototype[i4];
                  t4.RTCPeerConnection.prototype[i4] = function() {
                    return arguments[0] = new ("addIceCandidate" === i4 ? t4.RTCIceCandidate : t4.RTCSessionDescription)(arguments[0]), n4.apply(this, arguments);
                  };
                });
                var n3 = t4.RTCPeerConnection.prototype.addIceCandidate;
                t4.RTCPeerConnection.prototype.addIceCandidate = function() {
                  return arguments[0] ? n3.apply(this, arguments) : (arguments[1] && arguments[1].apply(null), Promise.resolve());
                };
                var r3 = { inboundrtp: "inbound-rtp", outboundrtp: "outbound-rtp", candidatepair: "candidate-pair", localcandidate: "local-candidate", remotecandidate: "remote-candidate" }, s3 = t4.RTCPeerConnection.prototype.getStats;
                t4.RTCPeerConnection.prototype.getStats = function(t5, n4, e3) {
                  return s3.apply(this, [t5 || null]).then(function(t6) {
                    if (i3.version < 53 && !n4)
                      try {
                        t6.forEach(function(t7) {
                          t7.type = r3[t7.type] || t7.type;
                        });
                      } catch (i4) {
                        if ("TypeError" !== i4.name)
                          throw i4;
                        t6.forEach(function(i5, n5) {
                          t6.set(n5, Object.assign({}, i5, { type: r3[i5.type] || i5.type }));
                        });
                      }
                    return t6;
                  }).then(n4, e3);
                };
              }
            }
            function h(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && t4.RTCRtpSender && (!t4.RTCRtpSender || !("getStats" in t4.RTCRtpSender.prototype))) {
                var i3 = t4.RTCPeerConnection.prototype.getSenders;
                i3 && (t4.RTCPeerConnection.prototype.getSenders = function() {
                  var t5 = this, n4 = i3.apply(this, []);
                  return n4.forEach(function(i4) {
                    return i4._pc = t5;
                  }), n4;
                });
                var n3 = t4.RTCPeerConnection.prototype.addTrack;
                n3 && (t4.RTCPeerConnection.prototype.addTrack = function() {
                  var t5 = n3.apply(this, arguments);
                  return t5._pc = this, t5;
                }), t4.RTCRtpSender.prototype.getStats = function() {
                  return this.track ? this._pc.getStats(this.track) : Promise.resolve(/* @__PURE__ */ new Map());
                };
              }
            }
            function f(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && t4.RTCRtpSender && (!t4.RTCRtpSender || !("getStats" in t4.RTCRtpReceiver.prototype))) {
                var i3 = t4.RTCPeerConnection.prototype.getReceivers;
                i3 && (t4.RTCPeerConnection.prototype.getReceivers = function() {
                  var t5 = this, n3 = i3.apply(this, []);
                  return n3.forEach(function(i4) {
                    return i4._pc = t5;
                  }), n3;
                }), o2.wrapPeerConnectionEvent(t4, "track", function(t5) {
                  return t5.receiver._pc = t5.srcElement, t5;
                }), t4.RTCRtpReceiver.prototype.getStats = function() {
                  return this._pc.getStats(this.track);
                };
              }
            }
            function l(t4) {
              t4.RTCPeerConnection && !("removeStream" in t4.RTCPeerConnection.prototype) && (t4.RTCPeerConnection.prototype.removeStream = function(t5) {
                var i3 = this;
                o2.deprecated("removeStream", "removeTrack"), this.getSenders().forEach(function(n3) {
                  n3.track && t5.getTracks().includes(n3.track) && i3.removeTrack(n3);
                });
              });
            }
            function d(t4) {
              t4.DataChannel && !t4.RTCDataChannel && (t4.RTCDataChannel = t4.DataChannel);
            }
          }, { "../utils": 15, "./getdisplaymedia": 12, "./getusermedia": 13 }], 12: [function(t3, i2, n2) {
            "use strict";
            function e2(t4, i3) {
              t4.navigator.mediaDevices && "getDisplayMedia" in t4.navigator.mediaDevices || t4.navigator.mediaDevices && (t4.navigator.mediaDevices.getDisplayMedia = function(n3) {
                if (!n3 || !n3.video) {
                  var e3 = new DOMException("getDisplayMedia without video constraints is undefined");
                  return e3.name = "NotFoundError", e3.code = 8, Promise.reject(e3);
                }
                return true === n3.video ? n3.video = { mediaSource: i3 } : n3.video.mediaSource = i3, t4.navigator.mediaDevices.getUserMedia(n3);
              });
            }
            Object.defineProperty(n2, "__esModule", { value: true }), n2.shimGetDisplayMedia = e2;
          }, {}], 13: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true });
            var e2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            };
            n2.shimGetUserMedia = o2;
            var r2 = s2(t3("../utils"));
            function s2(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function o2(t4) {
              var i3 = r2.detectBrowser(t4), n3 = t4 && t4.navigator, s3 = t4 && t4.MediaStreamTrack;
              if (n3.getUserMedia = function(t5, i4, e3) {
                r2.deprecated("navigator.getUserMedia", "navigator.mediaDevices.getUserMedia"), n3.mediaDevices.getUserMedia(t5).then(i4, e3);
              }, !(i3.version > 55 && "autoGainControl" in n3.mediaDevices.getSupportedConstraints())) {
                var o3 = function(t5, i4, n4) {
                  i4 in t5 && !(n4 in t5) && (t5[n4] = t5[i4], delete t5[i4]);
                }, u2 = n3.mediaDevices.getUserMedia.bind(n3.mediaDevices);
                if (n3.mediaDevices.getUserMedia = function(t5) {
                  return "object" === (void 0 === t5 ? "undefined" : e2(t5)) && "object" === e2(t5.audio) && (t5 = JSON.parse(JSON.stringify(t5)), o3(t5.audio, "autoGainControl", "mozAutoGainControl"), o3(t5.audio, "noiseSuppression", "mozNoiseSuppression")), u2(t5);
                }, s3 && s3.prototype.getSettings) {
                  var a = s3.prototype.getSettings;
                  s3.prototype.getSettings = function() {
                    var t5 = a.apply(this, arguments);
                    return o3(t5, "mozAutoGainControl", "autoGainControl"), o3(t5, "mozNoiseSuppression", "noiseSuppression"), t5;
                  };
                }
                if (s3 && s3.prototype.applyConstraints) {
                  var c = s3.prototype.applyConstraints;
                  s3.prototype.applyConstraints = function(t5) {
                    return "audio" === this.kind && "object" === (void 0 === t5 ? "undefined" : e2(t5)) && (t5 = JSON.parse(JSON.stringify(t5)), o3(t5, "autoGainControl", "mozAutoGainControl"), o3(t5, "noiseSuppression", "mozNoiseSuppression")), c.apply(this, [t5]);
                  };
                }
              }
            }
          }, { "../utils": 15 }], 14: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true });
            var e2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            };
            n2.shimLocalStreamsAPI = o2, n2.shimRemoteStreamsAPI = u2, n2.shimCallbacksAPI = a, n2.shimGetUserMedia = c, n2.shimConstraints = h, n2.shimRTCIceServerUrls = f, n2.shimTrackEventTransceiver = l, n2.shimCreateOfferLegacy = d;
            var r2 = s2(t3("../utils"));
            function s2(t4) {
              if (t4 && t4.__esModule)
                return t4;
              var i3 = {};
              if (null != t4)
                for (var n3 in t4)
                  Object.prototype.hasOwnProperty.call(t4, n3) && (i3[n3] = t4[n3]);
              return i3.default = t4, i3;
            }
            function o2(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection) {
                if ("getLocalStreams" in t4.RTCPeerConnection.prototype || (t4.RTCPeerConnection.prototype.getLocalStreams = function() {
                  return this._localStreams || (this._localStreams = []), this._localStreams;
                }), !("addStream" in t4.RTCPeerConnection.prototype)) {
                  var i3 = t4.RTCPeerConnection.prototype.addTrack;
                  t4.RTCPeerConnection.prototype.addStream = function(t5) {
                    var n3 = this;
                    this._localStreams || (this._localStreams = []), this._localStreams.includes(t5) || this._localStreams.push(t5), t5.getTracks().forEach(function(e3) {
                      return i3.call(n3, e3, t5);
                    });
                  }, t4.RTCPeerConnection.prototype.addTrack = function(t5, n3) {
                    return n3 && (this._localStreams ? this._localStreams.includes(n3) || this._localStreams.push(n3) : this._localStreams = [n3]), i3.call(this, t5, n3);
                  };
                }
                "removeStream" in t4.RTCPeerConnection.prototype || (t4.RTCPeerConnection.prototype.removeStream = function(t5) {
                  var i4 = this;
                  this._localStreams || (this._localStreams = []);
                  var n3 = this._localStreams.indexOf(t5);
                  if (-1 !== n3) {
                    this._localStreams.splice(n3, 1);
                    var e3 = t5.getTracks();
                    this.getSenders().forEach(function(t6) {
                      e3.includes(t6.track) && i4.removeTrack(t6);
                    });
                  }
                });
              }
            }
            function u2(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && ("getRemoteStreams" in t4.RTCPeerConnection.prototype || (t4.RTCPeerConnection.prototype.getRemoteStreams = function() {
                return this._remoteStreams ? this._remoteStreams : [];
              }), !("onaddstream" in t4.RTCPeerConnection.prototype))) {
                Object.defineProperty(t4.RTCPeerConnection.prototype, "onaddstream", { get: function() {
                  return this._onaddstream;
                }, set: function(t5) {
                  var i4 = this;
                  this._onaddstream && (this.removeEventListener("addstream", this._onaddstream), this.removeEventListener("track", this._onaddstreampoly)), this.addEventListener("addstream", this._onaddstream = t5), this.addEventListener("track", this._onaddstreampoly = function(t6) {
                    t6.streams.forEach(function(t7) {
                      if (i4._remoteStreams || (i4._remoteStreams = []), !i4._remoteStreams.includes(t7)) {
                        i4._remoteStreams.push(t7);
                        var n3 = new Event("addstream");
                        n3.stream = t7, i4.dispatchEvent(n3);
                      }
                    });
                  });
                } });
                var i3 = t4.RTCPeerConnection.prototype.setRemoteDescription;
                t4.RTCPeerConnection.prototype.setRemoteDescription = function() {
                  var t5 = this;
                  return this._onaddstreampoly || this.addEventListener("track", this._onaddstreampoly = function(i4) {
                    i4.streams.forEach(function(i5) {
                      if (t5._remoteStreams || (t5._remoteStreams = []), !(t5._remoteStreams.indexOf(i5) >= 0)) {
                        t5._remoteStreams.push(i5);
                        var n3 = new Event("addstream");
                        n3.stream = i5, t5.dispatchEvent(n3);
                      }
                    });
                  }), i3.apply(t5, arguments);
                };
              }
            }
            function a(t4) {
              if ("object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection) {
                var i3 = t4.RTCPeerConnection.prototype, n3 = i3.createOffer, r3 = i3.createAnswer, s3 = i3.setLocalDescription, o3 = i3.setRemoteDescription, u3 = i3.addIceCandidate;
                i3.createOffer = function(t5, i4) {
                  var e3 = n3.apply(this, [arguments.length >= 2 ? arguments[2] : arguments[0]]);
                  return i4 ? (e3.then(t5, i4), Promise.resolve()) : e3;
                }, i3.createAnswer = function(t5, i4) {
                  var n4 = r3.apply(this, [arguments.length >= 2 ? arguments[2] : arguments[0]]);
                  return i4 ? (n4.then(t5, i4), Promise.resolve()) : n4;
                };
                var a2 = function(t5, i4, n4) {
                  var e3 = s3.apply(this, [t5]);
                  return n4 ? (e3.then(i4, n4), Promise.resolve()) : e3;
                };
                i3.setLocalDescription = a2, i3.setRemoteDescription = a2 = function(t5, i4, n4) {
                  var e3 = o3.apply(this, [t5]);
                  return n4 ? (e3.then(i4, n4), Promise.resolve()) : e3;
                }, i3.addIceCandidate = a2 = function(t5, i4, n4) {
                  var e3 = u3.apply(this, [t5]);
                  return n4 ? (e3.then(i4, n4), Promise.resolve()) : e3;
                };
              }
            }
            function c(t4) {
              var i3 = t4 && t4.navigator;
              if (i3.mediaDevices && i3.mediaDevices.getUserMedia) {
                var n3 = i3.mediaDevices, e3 = n3.getUserMedia.bind(n3);
                i3.mediaDevices.getUserMedia = function(t5) {
                  return e3(h(t5));
                };
              }
              !i3.getUserMedia && i3.mediaDevices && i3.mediaDevices.getUserMedia && (i3.getUserMedia = (function(t5, n4, e4) {
                i3.mediaDevices.getUserMedia(t5).then(n4, e4);
              }).bind(i3));
            }
            function h(t4) {
              return t4 && void 0 !== t4.video ? Object.assign({}, t4, { video: r2.compactObject(t4.video) }) : t4;
            }
            function f(t4) {
              var i3 = t4.RTCPeerConnection;
              t4.RTCPeerConnection = function(t5, n3) {
                if (t5 && t5.iceServers) {
                  for (var e3 = [], s3 = 0; s3 < t5.iceServers.length; s3++) {
                    var o3 = t5.iceServers[s3];
                    !o3.hasOwnProperty("urls") && o3.hasOwnProperty("url") ? (r2.deprecated("RTCIceServer.url", "RTCIceServer.urls"), (o3 = JSON.parse(JSON.stringify(o3))).urls = o3.url, delete o3.url, e3.push(o3)) : e3.push(t5.iceServers[s3]);
                  }
                  t5.iceServers = e3;
                }
                return new i3(t5, n3);
              }, t4.RTCPeerConnection.prototype = i3.prototype, "generateCertificate" in t4.RTCPeerConnection && Object.defineProperty(t4.RTCPeerConnection, "generateCertificate", { get: function() {
                return i3.generateCertificate;
              } });
            }
            function l(t4) {
              "object" === (void 0 === t4 ? "undefined" : e2(t4)) && t4.RTCPeerConnection && "receiver" in t4.RTCTrackEvent.prototype && !t4.RTCTransceiver && Object.defineProperty(t4.RTCTrackEvent.prototype, "transceiver", { get: function() {
                return { receiver: this.receiver };
              } });
            }
            function d(t4) {
              var i3 = t4.RTCPeerConnection.prototype.createOffer;
              t4.RTCPeerConnection.prototype.createOffer = function(t5) {
                if (t5) {
                  void 0 !== t5.offerToReceiveAudio && (t5.offerToReceiveAudio = !!t5.offerToReceiveAudio);
                  var n3 = this.getTransceivers().find(function(t6) {
                    return "audio" === t6.receiver.track.kind;
                  });
                  false === t5.offerToReceiveAudio && n3 ? "sendrecv" === n3.direction ? n3.setDirection ? n3.setDirection("sendonly") : n3.direction = "sendonly" : "recvonly" === n3.direction && (n3.setDirection ? n3.setDirection("inactive") : n3.direction = "inactive") : true !== t5.offerToReceiveAudio || n3 || this.addTransceiver("audio"), void 0 !== t5.offerToReceiveVideo && (t5.offerToReceiveVideo = !!t5.offerToReceiveVideo);
                  var e3 = this.getTransceivers().find(function(t6) {
                    return "video" === t6.receiver.track.kind;
                  });
                  false === t5.offerToReceiveVideo && e3 ? "sendrecv" === e3.direction ? e3.setDirection ? e3.setDirection("sendonly") : e3.direction = "sendonly" : "recvonly" === e3.direction && (e3.setDirection ? e3.setDirection("inactive") : e3.direction = "inactive") : true !== t5.offerToReceiveVideo || e3 || this.addTransceiver("video");
                }
                return i3.apply(this, arguments);
              };
            }
          }, { "../utils": 15 }], 15: [function(t3, i2, n2) {
            "use strict";
            Object.defineProperty(n2, "__esModule", { value: true });
            var e2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(t4) {
              return typeof t4;
            } : function(t4) {
              return t4 && "function" == typeof Symbol && t4.constructor === Symbol && t4 !== Symbol.prototype ? "symbol" : typeof t4;
            };
            function r2(t4, i3, n3) {
              return i3 in t4 ? Object.defineProperty(t4, i3, { value: n3, enumerable: true, configurable: true, writable: true }) : t4[i3] = n3, t4;
            }
            n2.extractVersion = u2, n2.wrapPeerConnectionEvent = a, n2.disableLog = c, n2.disableWarnings = h, n2.log = f, n2.deprecated = l, n2.detectBrowser = d, n2.compactObject = v, n2.walkStats = m, n2.filterStats = p;
            var s2 = true, o2 = true;
            function u2(t4, i3, n3) {
              var e3 = t4.match(i3);
              return e3 && e3.length >= n3 && parseInt(e3[n3], 10);
            }
            function a(t4, i3, n3) {
              if (t4.RTCPeerConnection) {
                var e3 = t4.RTCPeerConnection.prototype, r3 = e3.addEventListener;
                e3.addEventListener = function(t5, e4) {
                  if (t5 !== i3)
                    return r3.apply(this, arguments);
                  var s4 = function(t6) {
                    var i4 = n3(t6);
                    i4 && e4(i4);
                  };
                  return this._eventMap = this._eventMap || {}, this._eventMap[e4] = s4, r3.apply(this, [t5, s4]);
                };
                var s3 = e3.removeEventListener;
                e3.removeEventListener = function(t5, n4) {
                  if (t5 !== i3 || !this._eventMap || !this._eventMap[n4])
                    return s3.apply(this, arguments);
                  var e4 = this._eventMap[n4];
                  return delete this._eventMap[n4], s3.apply(this, [t5, e4]);
                }, Object.defineProperty(e3, "on" + i3, { get: function() {
                  return this["_on" + i3];
                }, set: function(t5) {
                  this["_on" + i3] && (this.removeEventListener(i3, this["_on" + i3]), delete this["_on" + i3]), t5 && this.addEventListener(i3, this["_on" + i3] = t5);
                }, enumerable: true, configurable: true });
              }
            }
            function c(t4) {
              return "boolean" != typeof t4 ? new Error("Argument type: " + (void 0 === t4 ? "undefined" : e2(t4)) + ". Please use a boolean.") : (s2 = t4, t4 ? "adapter.js logging disabled" : "adapter.js logging enabled");
            }
            function h(t4) {
              return "boolean" != typeof t4 ? new Error("Argument type: " + (void 0 === t4 ? "undefined" : e2(t4)) + ". Please use a boolean.") : (o2 = !t4, "adapter.js deprecation warnings " + (t4 ? "disabled" : "enabled"));
            }
            function f() {
              if ("object" === ("undefined" == typeof window ? "undefined" : e2(window))) {
                if (s2)
                  return;
                "undefined" != typeof console && "function" == typeof console.log && console.log.apply(console, arguments);
              }
            }
            function l(t4, i3) {
              o2 && console.warn(t4 + " is deprecated, please use " + i3 + " instead.");
            }
            function d(t4) {
              var i3 = t4.navigator, n3 = { browser: null, version: null };
              if (void 0 === t4 || !t4.navigator)
                return n3.browser = "Not a browser.", n3;
              if (i3.mozGetUserMedia)
                n3.browser = "firefox", n3.version = u2(i3.userAgent, /Firefox\/(\d+)\./, 1);
              else if (i3.webkitGetUserMedia || false === t4.isSecureContext && t4.webkitRTCPeerConnection && !t4.RTCIceGatherer)
                n3.browser = "chrome", n3.version = u2(i3.userAgent, /Chrom(e|ium)\/(\d+)\./, 2);
              else if (i3.mediaDevices && i3.userAgent.match(/Edge\/(\d+).(\d+)$/))
                n3.browser = "edge", n3.version = u2(i3.userAgent, /Edge\/(\d+).(\d+)$/, 2);
              else {
                if (!t4.RTCPeerConnection || !i3.userAgent.match(/AppleWebKit\/(\d+)\./))
                  return n3.browser = "Not a supported browser.", n3;
                n3.browser = "safari", n3.version = u2(i3.userAgent, /AppleWebKit\/(\d+)\./, 1);
              }
              return n3;
            }
            function v(t4) {
              return "object" !== (void 0 === t4 ? "undefined" : e2(t4)) ? t4 : Object.keys(t4).reduce(function(i3, n3) {
                var s3 = "object" === e2(t4[n3]), o3 = s3 ? v(t4[n3]) : t4[n3], u3 = s3 && !Object.keys(o3).length;
                return void 0 === o3 || u3 ? i3 : Object.assign(i3, r2({}, n3, o3));
              }, {});
            }
            function m(t4, i3, n3) {
              i3 && !n3.has(i3.id) && (n3.set(i3.id, i3), Object.keys(i3).forEach(function(e3) {
                e3.endsWith("Id") ? m(t4, t4.get(i3[e3]), n3) : e3.endsWith("Ids") && i3[e3].forEach(function(i4) {
                  m(t4, t4.get(i4), n3);
                });
              }));
            }
            function p(t4, i3, n3) {
              var e3 = n3 ? "outbound-rtp" : "inbound-rtp", r3 = /* @__PURE__ */ new Map();
              if (null === i3)
                return r3;
              var s3 = [];
              return t4.forEach(function(t5) {
                "track" === t5.type && t5.trackIdentifier === i3.id && s3.push(t5);
              }), s3.forEach(function(i4) {
                t4.forEach(function(n4) {
                  n4.type === e3 && n4.trackId === i4.id && m(t4, n4, r3);
                });
              }), r3;
            }
          }, {}], 16: [function(t3, i2, n2) {
            "use strict";
            var e2 = t3("sdp");
            function r2(t4) {
              return { inboundrtp: "inbound-rtp", outboundrtp: "outbound-rtp", candidatepair: "candidate-pair", localcandidate: "local-candidate", remotecandidate: "remote-candidate" }[t4.type] || t4.type;
            }
            function s2(t4, i3, n3, r3, s3) {
              var o3 = e2.writeRtpDescription(t4.kind, i3);
              if (o3 += e2.writeIceParameters(t4.iceGatherer.getLocalParameters()), o3 += e2.writeDtlsParameters(t4.dtlsTransport.getLocalParameters(), "offer" === n3 ? "actpass" : s3 || "active"), o3 += "a=mid:" + t4.mid + "\r\n", o3 += t4.rtpSender && t4.rtpReceiver ? "a=sendrecv\r\n" : t4.rtpSender ? "a=sendonly\r\n" : t4.rtpReceiver ? "a=recvonly\r\n" : "a=inactive\r\n", t4.rtpSender) {
                var u3 = t4.rtpSender._initialTrackId || t4.rtpSender.track.id;
                t4.rtpSender._initialTrackId = u3;
                var a2 = "msid:" + (r3 ? r3.id : "-") + " " + u3 + "\r\n";
                o3 += "a=" + a2, o3 += "a=ssrc:" + t4.sendEncodingParameters[0].ssrc + " " + a2, t4.sendEncodingParameters[0].rtx && (o3 += "a=ssrc:" + t4.sendEncodingParameters[0].rtx.ssrc + " " + a2, o3 += "a=ssrc-group:FID " + t4.sendEncodingParameters[0].ssrc + " " + t4.sendEncodingParameters[0].rtx.ssrc + "\r\n");
              }
              return o3 += "a=ssrc:" + t4.sendEncodingParameters[0].ssrc + " cname:" + e2.localCName + "\r\n", t4.rtpSender && t4.sendEncodingParameters[0].rtx && (o3 += "a=ssrc:" + t4.sendEncodingParameters[0].rtx.ssrc + " cname:" + e2.localCName + "\r\n"), o3;
            }
            function o2(t4, i3) {
              var n3 = false;
              return (t4 = JSON.parse(JSON.stringify(t4))).filter(function(t5) {
                if (t5 && (t5.urls || t5.url)) {
                  var e3 = t5.urls || t5.url;
                  t5.url && !t5.urls && console.warn("RTCIceServer.url is deprecated! Use urls instead.");
                  var r3 = "string" == typeof e3;
                  return r3 && (e3 = [e3]), e3 = e3.filter(function(t6) {
                    return 0 !== t6.indexOf("turn:") || -1 === t6.indexOf("transport=udp") || -1 !== t6.indexOf("turn:[") || n3 ? 0 === t6.indexOf("stun:") && i3 >= 14393 && -1 === t6.indexOf("?transport=udp") : (n3 = true, true);
                  }), delete t5.url, t5.urls = r3 ? e3[0] : e3, !!e3.length;
                }
              });
            }
            function u2(t4, i3) {
              var n3 = { codecs: [], headerExtensions: [], fecMechanisms: [] }, e3 = function(t5, i4) {
                t5 = parseInt(t5, 10);
                for (var n4 = 0; n4 < i4.length; n4++)
                  if (i4[n4].payloadType === t5 || i4[n4].preferredPayloadType === t5)
                    return i4[n4];
              }, r3 = function(t5, i4, n4, r4) {
                var s3 = e3(t5.parameters.apt, n4), o3 = e3(i4.parameters.apt, r4);
                return s3 && o3 && s3.name.toLowerCase() === o3.name.toLowerCase();
              };
              return t4.codecs.forEach(function(e4) {
                for (var s3 = 0; s3 < i3.codecs.length; s3++) {
                  var o3 = i3.codecs[s3];
                  if (e4.name.toLowerCase() === o3.name.toLowerCase() && e4.clockRate === o3.clockRate) {
                    if ("rtx" === e4.name.toLowerCase() && e4.parameters && o3.parameters.apt && !r3(e4, o3, t4.codecs, i3.codecs))
                      continue;
                    (o3 = JSON.parse(JSON.stringify(o3))).numChannels = Math.min(e4.numChannels, o3.numChannels), n3.codecs.push(o3), o3.rtcpFeedback = o3.rtcpFeedback.filter(function(t5) {
                      for (var i4 = 0; i4 < e4.rtcpFeedback.length; i4++)
                        if (e4.rtcpFeedback[i4].type === t5.type && e4.rtcpFeedback[i4].parameter === t5.parameter)
                          return true;
                      return false;
                    });
                    break;
                  }
                }
              }), t4.headerExtensions.forEach(function(t5) {
                for (var e4 = 0; e4 < i3.headerExtensions.length; e4++) {
                  var r4 = i3.headerExtensions[e4];
                  if (t5.uri === r4.uri) {
                    n3.headerExtensions.push(r4);
                    break;
                  }
                }
              }), n3;
            }
            function a(t4, i3, n3) {
              return -1 !== { offer: { setLocalDescription: ["stable", "have-local-offer"], setRemoteDescription: ["stable", "have-remote-offer"] }, answer: { setLocalDescription: ["have-remote-offer", "have-local-pranswer"], setRemoteDescription: ["have-local-offer", "have-remote-pranswer"] } }[i3][t4].indexOf(n3);
            }
            function c(t4, i3) {
              var n3 = t4.getRemoteCandidates().find(function(t5) {
                return i3.foundation === t5.foundation && i3.ip === t5.ip && i3.port === t5.port && i3.priority === t5.priority && i3.protocol === t5.protocol && i3.type === t5.type;
              });
              return n3 || t4.addRemoteCandidate(i3), !n3;
            }
            function h(t4, i3) {
              var n3 = new Error(i3);
              return n3.name = t4, n3.code = { NotSupportedError: 9, InvalidStateError: 11, InvalidAccessError: 15, TypeError: void 0, OperationError: void 0 }[t4], n3;
            }
            i2.exports = function(t4, i3) {
              function n3(i4, n4) {
                n4.addTrack(i4), n4.dispatchEvent(new t4.MediaStreamTrackEvent("addtrack", { track: i4 }));
              }
              function f(i4, n4) {
                n4.removeTrack(i4), n4.dispatchEvent(new t4.MediaStreamTrackEvent("removetrack", { track: i4 }));
              }
              function l(i4, n4, e3, r3) {
                var s3 = new Event("track");
                s3.track = n4, s3.receiver = e3, s3.transceiver = { receiver: e3 }, s3.streams = r3, t4.setTimeout(function() {
                  i4._dispatchEvent("track", s3);
                });
              }
              var d = function(n4) {
                var r3 = this, s3 = document.createDocumentFragment();
                if (["addEventListener", "removeEventListener", "dispatchEvent"].forEach(function(t5) {
                  r3[t5] = s3[t5].bind(s3);
                }), this.canTrickleIceCandidates = null, this.needNegotiation = false, this.localStreams = [], this.remoteStreams = [], this._localDescription = null, this._remoteDescription = null, this.signalingState = "stable", this.iceConnectionState = "new", this.connectionState = "new", this.iceGatheringState = "new", n4 = JSON.parse(JSON.stringify(n4 || {})), this.usingBundle = "max-bundle" === n4.bundlePolicy, "negotiate" === n4.rtcpMuxPolicy)
                  throw h("NotSupportedError", "rtcpMuxPolicy 'negotiate' is not supported");
                switch (n4.rtcpMuxPolicy || (n4.rtcpMuxPolicy = "require"), n4.iceTransportPolicy) {
                  case "all":
                  case "relay":
                    break;
                  default:
                    n4.iceTransportPolicy = "all";
                }
                switch (n4.bundlePolicy) {
                  case "balanced":
                  case "max-compat":
                  case "max-bundle":
                    break;
                  default:
                    n4.bundlePolicy = "balanced";
                }
                if (n4.iceServers = o2(n4.iceServers || [], i3), this._iceGatherers = [], n4.iceCandidatePoolSize)
                  for (var u3 = n4.iceCandidatePoolSize; u3 > 0; u3--)
                    this._iceGatherers.push(new t4.RTCIceGatherer({ iceServers: n4.iceServers, gatherPolicy: n4.iceTransportPolicy }));
                else
                  n4.iceCandidatePoolSize = 0;
                this._config = n4, this.transceivers = [], this._sdpSessionId = e2.generateSessionId(), this._sdpSessionVersion = 0, this._dtlsRole = void 0, this._isClosed = false;
              };
              Object.defineProperty(d.prototype, "localDescription", { configurable: true, get: function() {
                return this._localDescription;
              } }), Object.defineProperty(d.prototype, "remoteDescription", { configurable: true, get: function() {
                return this._remoteDescription;
              } }), d.prototype.onicecandidate = null, d.prototype.onaddstream = null, d.prototype.ontrack = null, d.prototype.onremovestream = null, d.prototype.onsignalingstatechange = null, d.prototype.oniceconnectionstatechange = null, d.prototype.onconnectionstatechange = null, d.prototype.onicegatheringstatechange = null, d.prototype.onnegotiationneeded = null, d.prototype.ondatachannel = null, d.prototype._dispatchEvent = function(t5, i4) {
                this._isClosed || (this.dispatchEvent(i4), "function" == typeof this["on" + t5] && this["on" + t5](i4));
              }, d.prototype._emitGatheringStateChange = function() {
                var t5 = new Event("icegatheringstatechange");
                this._dispatchEvent("icegatheringstatechange", t5);
              }, d.prototype.getConfiguration = function() {
                return this._config;
              }, d.prototype.getLocalStreams = function() {
                return this.localStreams;
              }, d.prototype.getRemoteStreams = function() {
                return this.remoteStreams;
              }, d.prototype._createTransceiver = function(t5, i4) {
                var n4 = { track: null, iceGatherer: null, iceTransport: null, dtlsTransport: null, localCapabilities: null, remoteCapabilities: null, rtpSender: null, rtpReceiver: null, kind: t5, mid: null, sendEncodingParameters: null, recvEncodingParameters: null, stream: null, associatedRemoteMediaStreams: [], wantReceive: true };
                if (this.usingBundle && this.transceivers.length > 0)
                  n4.iceTransport = this.transceivers[0].iceTransport, n4.dtlsTransport = this.transceivers[0].dtlsTransport;
                else {
                  var e3 = this._createIceAndDtlsTransports();
                  n4.iceTransport = e3.iceTransport, n4.dtlsTransport = e3.dtlsTransport;
                }
                return i4 || this.transceivers.push(n4), n4;
              }, d.prototype.addTrack = function(i4, n4) {
                if (this._isClosed)
                  throw h("InvalidStateError", "Attempted to call addTrack on a closed peerconnection.");
                var e3;
                if (this.transceivers.find(function(t5) {
                  return t5.track === i4;
                }))
                  throw h("InvalidAccessError", "Track already exists.");
                for (var r3 = 0; r3 < this.transceivers.length; r3++)
                  this.transceivers[r3].track || this.transceivers[r3].kind !== i4.kind || (e3 = this.transceivers[r3]);
                return e3 || (e3 = this._createTransceiver(i4.kind)), this._maybeFireNegotiationNeeded(), -1 === this.localStreams.indexOf(n4) && this.localStreams.push(n4), e3.track = i4, e3.stream = n4, e3.rtpSender = new t4.RTCRtpSender(i4, e3.dtlsTransport), e3.rtpSender;
              }, d.prototype.addStream = function(t5) {
                var n4 = this;
                if (i3 >= 15025)
                  t5.getTracks().forEach(function(i4) {
                    n4.addTrack(i4, t5);
                  });
                else {
                  var e3 = t5.clone();
                  t5.getTracks().forEach(function(t6, i4) {
                    var n5 = e3.getTracks()[i4];
                    t6.addEventListener("enabled", function(t7) {
                      n5.enabled = t7.enabled;
                    });
                  }), e3.getTracks().forEach(function(t6) {
                    n4.addTrack(t6, e3);
                  });
                }
              }, d.prototype.removeTrack = function(i4) {
                if (this._isClosed)
                  throw h("InvalidStateError", "Attempted to call removeTrack on a closed peerconnection.");
                if (!(i4 instanceof t4.RTCRtpSender))
                  throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");
                var n4 = this.transceivers.find(function(t5) {
                  return t5.rtpSender === i4;
                });
                if (!n4)
                  throw h("InvalidAccessError", "Sender was not created by this connection.");
                var e3 = n4.stream;
                n4.rtpSender.stop(), n4.rtpSender = null, n4.track = null, n4.stream = null, -1 === this.transceivers.map(function(t5) {
                  return t5.stream;
                }).indexOf(e3) && this.localStreams.indexOf(e3) > -1 && this.localStreams.splice(this.localStreams.indexOf(e3), 1), this._maybeFireNegotiationNeeded();
              }, d.prototype.removeStream = function(t5) {
                var i4 = this;
                t5.getTracks().forEach(function(t6) {
                  var n4 = i4.getSenders().find(function(i5) {
                    return i5.track === t6;
                  });
                  n4 && i4.removeTrack(n4);
                });
              }, d.prototype.getSenders = function() {
                return this.transceivers.filter(function(t5) {
                  return !!t5.rtpSender;
                }).map(function(t5) {
                  return t5.rtpSender;
                });
              }, d.prototype.getReceivers = function() {
                return this.transceivers.filter(function(t5) {
                  return !!t5.rtpReceiver;
                }).map(function(t5) {
                  return t5.rtpReceiver;
                });
              }, d.prototype._createIceGatherer = function(i4, n4) {
                var e3 = this;
                if (n4 && i4 > 0)
                  return this.transceivers[0].iceGatherer;
                if (this._iceGatherers.length)
                  return this._iceGatherers.shift();
                var r3 = new t4.RTCIceGatherer({ iceServers: this._config.iceServers, gatherPolicy: this._config.iceTransportPolicy });
                return Object.defineProperty(r3, "state", { value: "new", writable: true }), this.transceivers[i4].bufferedCandidateEvents = [], this.transceivers[i4].bufferCandidates = function(t5) {
                  var n5 = !t5.candidate || 0 === Object.keys(t5.candidate).length;
                  r3.state = n5 ? "completed" : "gathering", null !== e3.transceivers[i4].bufferedCandidateEvents && e3.transceivers[i4].bufferedCandidateEvents.push(t5);
                }, r3.addEventListener("localcandidate", this.transceivers[i4].bufferCandidates), r3;
              }, d.prototype._gather = function(i4, n4) {
                var r3 = this, s3 = this.transceivers[n4].iceGatherer;
                if (!s3.onlocalcandidate) {
                  var o3 = this.transceivers[n4].bufferedCandidateEvents;
                  this.transceivers[n4].bufferedCandidateEvents = null, s3.removeEventListener("localcandidate", this.transceivers[n4].bufferCandidates), s3.onlocalcandidate = function(t5) {
                    if (!(r3.usingBundle && n4 > 0)) {
                      var o4 = new Event("icecandidate");
                      o4.candidate = { sdpMid: i4, sdpMLineIndex: n4 };
                      var u3 = t5.candidate, a2 = !u3 || 0 === Object.keys(u3).length;
                      if (a2)
                        "new" !== s3.state && "gathering" !== s3.state || (s3.state = "completed");
                      else {
                        "new" === s3.state && (s3.state = "gathering"), u3.component = 1, u3.ufrag = s3.getLocalParameters().usernameFragment;
                        var c2 = e2.writeCandidate(u3);
                        o4.candidate = Object.assign(o4.candidate, e2.parseCandidate(c2)), o4.candidate.candidate = c2, o4.candidate.toJSON = function() {
                          return { candidate: o4.candidate.candidate, sdpMid: o4.candidate.sdpMid, sdpMLineIndex: o4.candidate.sdpMLineIndex, usernameFragment: o4.candidate.usernameFragment };
                        };
                      }
                      var h2 = e2.getMediaSections(r3._localDescription.sdp);
                      h2[o4.candidate.sdpMLineIndex] += a2 ? "a=end-of-candidates\r\n" : "a=" + o4.candidate.candidate + "\r\n", r3._localDescription.sdp = e2.getDescription(r3._localDescription.sdp) + h2.join("");
                      var f2 = r3.transceivers.every(function(t6) {
                        return t6.iceGatherer && "completed" === t6.iceGatherer.state;
                      });
                      "gathering" !== r3.iceGatheringState && (r3.iceGatheringState = "gathering", r3._emitGatheringStateChange()), a2 || r3._dispatchEvent("icecandidate", o4), f2 && (r3._dispatchEvent("icecandidate", new Event("icecandidate")), r3.iceGatheringState = "complete", r3._emitGatheringStateChange());
                    }
                  }, t4.setTimeout(function() {
                    o3.forEach(function(t5) {
                      s3.onlocalcandidate(t5);
                    });
                  }, 0);
                }
              }, d.prototype._createIceAndDtlsTransports = function() {
                var i4 = this, n4 = new t4.RTCIceTransport(null);
                n4.onicestatechange = function() {
                  i4._updateIceConnectionState(), i4._updateConnectionState();
                };
                var e3 = new t4.RTCDtlsTransport(n4);
                return e3.ondtlsstatechange = function() {
                  i4._updateConnectionState();
                }, e3.onerror = function() {
                  Object.defineProperty(e3, "state", { value: "failed", writable: true }), i4._updateConnectionState();
                }, { iceTransport: n4, dtlsTransport: e3 };
              }, d.prototype._disposeIceAndDtlsTransports = function(t5) {
                var i4 = this.transceivers[t5].iceGatherer;
                i4 && (delete i4.onlocalcandidate, delete this.transceivers[t5].iceGatherer);
                var n4 = this.transceivers[t5].iceTransport;
                n4 && (delete n4.onicestatechange, delete this.transceivers[t5].iceTransport);
                var e3 = this.transceivers[t5].dtlsTransport;
                e3 && (delete e3.ondtlsstatechange, delete e3.onerror, delete this.transceivers[t5].dtlsTransport);
              }, d.prototype._transceive = function(t5, n4, r3) {
                var s3 = u2(t5.localCapabilities, t5.remoteCapabilities);
                n4 && t5.rtpSender && (s3.encodings = t5.sendEncodingParameters, s3.rtcp = { cname: e2.localCName, compound: t5.rtcpParameters.compound }, t5.recvEncodingParameters.length && (s3.rtcp.ssrc = t5.recvEncodingParameters[0].ssrc), t5.rtpSender.send(s3)), r3 && t5.rtpReceiver && s3.codecs.length > 0 && ("video" === t5.kind && t5.recvEncodingParameters && i3 < 15019 && t5.recvEncodingParameters.forEach(function(t6) {
                  delete t6.rtx;
                }), s3.encodings = t5.recvEncodingParameters.length ? t5.recvEncodingParameters : [{}], s3.rtcp = { compound: t5.rtcpParameters.compound }, t5.rtcpParameters.cname && (s3.rtcp.cname = t5.rtcpParameters.cname), t5.sendEncodingParameters.length && (s3.rtcp.ssrc = t5.sendEncodingParameters[0].ssrc), t5.rtpReceiver.receive(s3));
              }, d.prototype.setLocalDescription = function(t5) {
                var i4, n4, r3 = this;
                if (-1 === ["offer", "answer"].indexOf(t5.type))
                  return Promise.reject(h("TypeError", 'Unsupported type "' + t5.type + '"'));
                if (!a("setLocalDescription", t5.type, r3.signalingState) || r3._isClosed)
                  return Promise.reject(h("InvalidStateError", "Can not set local " + t5.type + " in state " + r3.signalingState));
                if ("offer" === t5.type)
                  i4 = e2.splitSections(t5.sdp), n4 = i4.shift(), i4.forEach(function(t6, i5) {
                    var n5 = e2.parseRtpParameters(t6);
                    r3.transceivers[i5].localCapabilities = n5;
                  }), r3.transceivers.forEach(function(t6, i5) {
                    r3._gather(t6.mid, i5);
                  });
                else if ("answer" === t5.type) {
                  i4 = e2.splitSections(r3._remoteDescription.sdp), n4 = i4.shift();
                  var s3 = e2.matchPrefix(n4, "a=ice-lite").length > 0;
                  i4.forEach(function(t6, i5) {
                    var o3 = r3.transceivers[i5], a2 = o3.iceGatherer, c2 = o3.iceTransport, h2 = o3.dtlsTransport, f2 = o3.localCapabilities, l2 = o3.remoteCapabilities;
                    if (!(e2.isRejected(t6) && 0 === e2.matchPrefix(t6, "a=bundle-only").length || o3.rejected)) {
                      var d2 = e2.getIceParameters(t6, n4), v2 = e2.getDtlsParameters(t6, n4);
                      s3 && (v2.role = "server"), r3.usingBundle && 0 !== i5 || (r3._gather(o3.mid, i5), "new" === c2.state && c2.start(a2, d2, s3 ? "controlling" : "controlled"), "new" === h2.state && h2.start(v2));
                      var m = u2(f2, l2);
                      r3._transceive(o3, m.codecs.length > 0, false);
                    }
                  });
                }
                return r3._localDescription = { type: t5.type, sdp: t5.sdp }, r3._updateSignalingState("offer" === t5.type ? "have-local-offer" : "stable"), Promise.resolve();
              }, d.prototype.setRemoteDescription = function(r3) {
                var s3 = this;
                if (-1 === ["offer", "answer"].indexOf(r3.type))
                  return Promise.reject(h("TypeError", 'Unsupported type "' + r3.type + '"'));
                if (!a("setRemoteDescription", r3.type, s3.signalingState) || s3._isClosed)
                  return Promise.reject(h("InvalidStateError", "Can not set remote " + r3.type + " in state " + s3.signalingState));
                var o3 = {};
                s3.remoteStreams.forEach(function(t5) {
                  o3[t5.id] = t5;
                });
                var d2 = [], v2 = e2.splitSections(r3.sdp), m = v2.shift(), p = e2.matchPrefix(m, "a=ice-lite").length > 0, g = e2.matchPrefix(m, "a=group:BUNDLE ").length > 0;
                s3.usingBundle = g;
                var b = e2.matchPrefix(m, "a=ice-options:")[0];
                return s3.canTrickleIceCandidates = !!b && b.substr(14).split(" ").indexOf("trickle") >= 0, v2.forEach(function(a2, h2) {
                  var l2 = e2.splitLines(a2), v3 = e2.getKind(a2), b2 = e2.isRejected(a2) && 0 === e2.matchPrefix(a2, "a=bundle-only").length, _ = l2[0].substr(2).split(" ")[2], y = e2.getDirection(a2, m), w = e2.parseMsid(a2), S = e2.getMid(a2) || e2.generateIdentifier();
                  if (b2 || "application" === v3 && ("DTLS/SCTP" === _ || "UDP/DTLS/SCTP" === _))
                    s3.transceivers[h2] = { mid: S, kind: v3, protocol: _, rejected: true };
                  else {
                    var E, k, O, I, R, T, C, A, z;
                    !b2 && s3.transceivers[h2] && s3.transceivers[h2].rejected && (s3.transceivers[h2] = s3._createTransceiver(v3, true));
                    var D, N, P = e2.parseRtpParameters(a2);
                    b2 || (D = e2.getIceParameters(a2, m), (N = e2.getDtlsParameters(a2, m)).role = "client"), C = e2.parseRtpEncodingParameters(a2);
                    var M = e2.parseRtcpParameters(a2), x = e2.matchPrefix(a2, "a=end-of-candidates", m).length > 0, j = e2.matchPrefix(a2, "a=candidate:").map(function(t5) {
                      return e2.parseCandidate(t5);
                    }).filter(function(t5) {
                      return 1 === t5.component;
                    });
                    if (("offer" === r3.type || "answer" === r3.type) && !b2 && g && h2 > 0 && s3.transceivers[h2] && (s3._disposeIceAndDtlsTransports(h2), s3.transceivers[h2].iceGatherer = s3.transceivers[0].iceGatherer, s3.transceivers[h2].iceTransport = s3.transceivers[0].iceTransport, s3.transceivers[h2].dtlsTransport = s3.transceivers[0].dtlsTransport, s3.transceivers[h2].rtpSender && s3.transceivers[h2].rtpSender.setTransport(s3.transceivers[0].dtlsTransport), s3.transceivers[h2].rtpReceiver && s3.transceivers[h2].rtpReceiver.setTransport(s3.transceivers[0].dtlsTransport)), "offer" !== r3.type || b2)
                      "answer" !== r3.type || b2 || (k = (E = s3.transceivers[h2]).iceGatherer, O = E.iceTransport, I = E.dtlsTransport, R = E.rtpReceiver, T = E.sendEncodingParameters, A = E.localCapabilities, s3.transceivers[h2].recvEncodingParameters = C, s3.transceivers[h2].remoteCapabilities = P, s3.transceivers[h2].rtcpParameters = M, j.length && "new" === O.state && (!p && !x || g && 0 !== h2 ? j.forEach(function(t5) {
                        c(E.iceTransport, t5);
                      }) : O.setRemoteCandidates(j)), g && 0 !== h2 || ("new" === O.state && O.start(k, D, "controlling"), "new" === I.state && I.start(N)), !u2(E.localCapabilities, E.remoteCapabilities).codecs.filter(function(t5) {
                        return "rtx" === t5.name.toLowerCase();
                      }).length && E.sendEncodingParameters[0].rtx && delete E.sendEncodingParameters[0].rtx, s3._transceive(E, "sendrecv" === y || "recvonly" === y, "sendrecv" === y || "sendonly" === y), !R || "sendrecv" !== y && "sendonly" !== y ? delete E.rtpReceiver : (z = R.track, w ? (o3[w.stream] || (o3[w.stream] = new t4.MediaStream()), n3(z, o3[w.stream]), d2.push([z, R, o3[w.stream]])) : (o3.default || (o3.default = new t4.MediaStream()), n3(z, o3.default), d2.push([z, R, o3.default]))));
                    else {
                      (E = s3.transceivers[h2] || s3._createTransceiver(v3)).mid = S, E.iceGatherer || (E.iceGatherer = s3._createIceGatherer(h2, g)), j.length && "new" === E.iceTransport.state && (!x || g && 0 !== h2 ? j.forEach(function(t5) {
                        c(E.iceTransport, t5);
                      }) : E.iceTransport.setRemoteCandidates(j)), A = t4.RTCRtpReceiver.getCapabilities(v3), i3 < 15019 && (A.codecs = A.codecs.filter(function(t5) {
                        return "rtx" !== t5.name;
                      })), T = E.sendEncodingParameters || [{ ssrc: 1001 * (2 * h2 + 2) }];
                      var q, L = false;
                      "sendrecv" === y || "sendonly" === y ? (L = !E.rtpReceiver, R = E.rtpReceiver || new t4.RTCRtpReceiver(E.dtlsTransport, v3), L && (z = R.track, w && "-" === w.stream || (w ? (o3[w.stream] || (o3[w.stream] = new t4.MediaStream(), Object.defineProperty(o3[w.stream], "id", { get: function() {
                        return w.stream;
                      } })), Object.defineProperty(z, "id", { get: function() {
                        return w.track;
                      } }), q = o3[w.stream]) : (o3.default || (o3.default = new t4.MediaStream()), q = o3.default)), q && (n3(z, q), E.associatedRemoteMediaStreams.push(q)), d2.push([z, R, q]))) : E.rtpReceiver && E.rtpReceiver.track && (E.associatedRemoteMediaStreams.forEach(function(t5) {
                        var i4 = t5.getTracks().find(function(t6) {
                          return t6.id === E.rtpReceiver.track.id;
                        });
                        i4 && f(i4, t5);
                      }), E.associatedRemoteMediaStreams = []), E.localCapabilities = A, E.remoteCapabilities = P, E.rtpReceiver = R, E.rtcpParameters = M, E.sendEncodingParameters = T, E.recvEncodingParameters = C, s3._transceive(s3.transceivers[h2], false, L);
                    }
                  }
                }), void 0 === s3._dtlsRole && (s3._dtlsRole = "offer" === r3.type ? "active" : "passive"), s3._remoteDescription = { type: r3.type, sdp: r3.sdp }, s3._updateSignalingState("offer" === r3.type ? "have-remote-offer" : "stable"), Object.keys(o3).forEach(function(i4) {
                  var n4 = o3[i4];
                  if (n4.getTracks().length) {
                    if (-1 === s3.remoteStreams.indexOf(n4)) {
                      s3.remoteStreams.push(n4);
                      var e3 = new Event("addstream");
                      e3.stream = n4, t4.setTimeout(function() {
                        s3._dispatchEvent("addstream", e3);
                      });
                    }
                    d2.forEach(function(t5) {
                      n4.id === t5[2].id && l(s3, t5[0], t5[1], [n4]);
                    });
                  }
                }), d2.forEach(function(t5) {
                  t5[2] || l(s3, t5[0], t5[1], []);
                }), t4.setTimeout(function() {
                  s3 && s3.transceivers && s3.transceivers.forEach(function(t5) {
                    t5.iceTransport && "new" === t5.iceTransport.state && t5.iceTransport.getRemoteCandidates().length > 0 && (console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"), t5.iceTransport.addRemoteCandidate({}));
                  });
                }, 4e3), Promise.resolve();
              }, d.prototype.close = function() {
                this.transceivers.forEach(function(t5) {
                  t5.iceTransport && t5.iceTransport.stop(), t5.dtlsTransport && t5.dtlsTransport.stop(), t5.rtpSender && t5.rtpSender.stop(), t5.rtpReceiver && t5.rtpReceiver.stop();
                }), this._isClosed = true, this._updateSignalingState("closed");
              }, d.prototype._updateSignalingState = function(t5) {
                this.signalingState = t5;
                var i4 = new Event("signalingstatechange");
                this._dispatchEvent("signalingstatechange", i4);
              }, d.prototype._maybeFireNegotiationNeeded = function() {
                var i4 = this;
                "stable" === this.signalingState && true !== this.needNegotiation && (this.needNegotiation = true, t4.setTimeout(function() {
                  if (i4.needNegotiation) {
                    i4.needNegotiation = false;
                    var t5 = new Event("negotiationneeded");
                    i4._dispatchEvent("negotiationneeded", t5);
                  }
                }, 0));
              }, d.prototype._updateIceConnectionState = function() {
                var t5, i4 = { new: 0, closed: 0, checking: 0, connected: 0, completed: 0, disconnected: 0, failed: 0 };
                if (this.transceivers.forEach(function(t6) {
                  t6.iceTransport && !t6.rejected && i4[t6.iceTransport.state]++;
                }), t5 = "new", i4.failed > 0 ? t5 = "failed" : i4.checking > 0 ? t5 = "checking" : i4.disconnected > 0 ? t5 = "disconnected" : i4.new > 0 ? t5 = "new" : i4.connected > 0 ? t5 = "connected" : i4.completed > 0 && (t5 = "completed"), t5 !== this.iceConnectionState) {
                  this.iceConnectionState = t5;
                  var n4 = new Event("iceconnectionstatechange");
                  this._dispatchEvent("iceconnectionstatechange", n4);
                }
              }, d.prototype._updateConnectionState = function() {
                var t5, i4 = { new: 0, closed: 0, connecting: 0, connected: 0, completed: 0, disconnected: 0, failed: 0 };
                if (this.transceivers.forEach(function(t6) {
                  t6.iceTransport && t6.dtlsTransport && !t6.rejected && (i4[t6.iceTransport.state]++, i4[t6.dtlsTransport.state]++);
                }), i4.connected += i4.completed, t5 = "new", i4.failed > 0 ? t5 = "failed" : i4.connecting > 0 ? t5 = "connecting" : i4.disconnected > 0 ? t5 = "disconnected" : i4.new > 0 ? t5 = "new" : i4.connected > 0 && (t5 = "connected"), t5 !== this.connectionState) {
                  this.connectionState = t5;
                  var n4 = new Event("connectionstatechange");
                  this._dispatchEvent("connectionstatechange", n4);
                }
              }, d.prototype.createOffer = function() {
                var n4 = this;
                if (n4._isClosed)
                  return Promise.reject(h("InvalidStateError", "Can not call createOffer after close"));
                var r3 = n4.transceivers.filter(function(t5) {
                  return "audio" === t5.kind;
                }).length, o3 = n4.transceivers.filter(function(t5) {
                  return "video" === t5.kind;
                }).length, u3 = arguments[0];
                if (u3) {
                  if (u3.mandatory || u3.optional)
                    throw new TypeError("Legacy mandatory/optional constraints not supported.");
                  void 0 !== u3.offerToReceiveAudio && (r3 = true === u3.offerToReceiveAudio ? 1 : false === u3.offerToReceiveAudio ? 0 : u3.offerToReceiveAudio), void 0 !== u3.offerToReceiveVideo && (o3 = true === u3.offerToReceiveVideo ? 1 : false === u3.offerToReceiveVideo ? 0 : u3.offerToReceiveVideo);
                }
                for (n4.transceivers.forEach(function(t5) {
                  "audio" === t5.kind ? --r3 < 0 && (t5.wantReceive = false) : "video" === t5.kind && --o3 < 0 && (t5.wantReceive = false);
                }); r3 > 0 || o3 > 0; )
                  r3 > 0 && (n4._createTransceiver("audio"), r3--), o3 > 0 && (n4._createTransceiver("video"), o3--);
                var a2 = e2.writeSessionBoilerplate(n4._sdpSessionId, n4._sdpSessionVersion++);
                n4.transceivers.forEach(function(r4, s3) {
                  var o4 = r4.track, u4 = r4.kind, a3 = r4.mid || e2.generateIdentifier();
                  r4.mid = a3, r4.iceGatherer || (r4.iceGatherer = n4._createIceGatherer(s3, n4.usingBundle));
                  var c3 = t4.RTCRtpSender.getCapabilities(u4);
                  i3 < 15019 && (c3.codecs = c3.codecs.filter(function(t5) {
                    return "rtx" !== t5.name;
                  })), c3.codecs.forEach(function(t5) {
                    "H264" === t5.name && void 0 === t5.parameters["level-asymmetry-allowed"] && (t5.parameters["level-asymmetry-allowed"] = "1"), r4.remoteCapabilities && r4.remoteCapabilities.codecs && r4.remoteCapabilities.codecs.forEach(function(i4) {
                      t5.name.toLowerCase() === i4.name.toLowerCase() && t5.clockRate === i4.clockRate && (t5.preferredPayloadType = i4.payloadType);
                    });
                  }), c3.headerExtensions.forEach(function(t5) {
                    (r4.remoteCapabilities && r4.remoteCapabilities.headerExtensions || []).forEach(function(i4) {
                      t5.uri === i4.uri && (t5.id = i4.id);
                    });
                  });
                  var h2 = r4.sendEncodingParameters || [{ ssrc: 1001 * (2 * s3 + 1) }];
                  o4 && i3 >= 15019 && "video" === u4 && !h2[0].rtx && (h2[0].rtx = { ssrc: h2[0].ssrc + 1 }), r4.wantReceive && (r4.rtpReceiver = new t4.RTCRtpReceiver(r4.dtlsTransport, u4)), r4.localCapabilities = c3, r4.sendEncodingParameters = h2;
                }), "max-compat" !== n4._config.bundlePolicy && (a2 += "a=group:BUNDLE " + n4.transceivers.map(function(t5) {
                  return t5.mid;
                }).join(" ") + "\r\n"), a2 += "a=ice-options:trickle\r\n", n4.transceivers.forEach(function(t5, i4) {
                  a2 += s2(t5, t5.localCapabilities, "offer", t5.stream, n4._dtlsRole), a2 += "a=rtcp-rsize\r\n", !t5.iceGatherer || "new" === n4.iceGatheringState || 0 !== i4 && n4.usingBundle || (t5.iceGatherer.getLocalCandidates().forEach(function(t6) {
                    t6.component = 1, a2 += "a=" + e2.writeCandidate(t6) + "\r\n";
                  }), "completed" === t5.iceGatherer.state && (a2 += "a=end-of-candidates\r\n"));
                });
                var c2 = new t4.RTCSessionDescription({ type: "offer", sdp: a2 });
                return Promise.resolve(c2);
              }, d.prototype.createAnswer = function() {
                var n4 = this;
                if (n4._isClosed)
                  return Promise.reject(h("InvalidStateError", "Can not call createAnswer after close"));
                if ("have-remote-offer" !== n4.signalingState && "have-local-pranswer" !== n4.signalingState)
                  return Promise.reject(h("InvalidStateError", "Can not call createAnswer in signalingState " + n4.signalingState));
                var r3 = e2.writeSessionBoilerplate(n4._sdpSessionId, n4._sdpSessionVersion++);
                n4.usingBundle && (r3 += "a=group:BUNDLE " + n4.transceivers.map(function(t5) {
                  return t5.mid;
                }).join(" ") + "\r\n"), r3 += "a=ice-options:trickle\r\n";
                var o3 = e2.getMediaSections(n4._remoteDescription.sdp).length;
                n4.transceivers.forEach(function(t5, e3) {
                  if (!(e3 + 1 > o3)) {
                    if (t5.rejected)
                      return "application" === t5.kind ? r3 += "DTLS/SCTP" === t5.protocol ? "m=application 0 DTLS/SCTP 5000\r\n" : "m=application 0 " + t5.protocol + " webrtc-datachannel\r\n" : "audio" === t5.kind ? r3 += "m=audio 0 UDP/TLS/RTP/SAVPF 0\r\na=rtpmap:0 PCMU/8000\r\n" : "video" === t5.kind && (r3 += "m=video 0 UDP/TLS/RTP/SAVPF 120\r\na=rtpmap:120 VP8/90000\r\n"), void (r3 += "c=IN IP4 0.0.0.0\r\na=inactive\r\na=mid:" + t5.mid + "\r\n");
                    var a3;
                    t5.stream && ("audio" === t5.kind ? a3 = t5.stream.getAudioTracks()[0] : "video" === t5.kind && (a3 = t5.stream.getVideoTracks()[0]), a3 && i3 >= 15019 && "video" === t5.kind && !t5.sendEncodingParameters[0].rtx && (t5.sendEncodingParameters[0].rtx = { ssrc: t5.sendEncodingParameters[0].ssrc + 1 }));
                    var c2 = u2(t5.localCapabilities, t5.remoteCapabilities);
                    !c2.codecs.filter(function(t6) {
                      return "rtx" === t6.name.toLowerCase();
                    }).length && t5.sendEncodingParameters[0].rtx && delete t5.sendEncodingParameters[0].rtx, r3 += s2(t5, c2, "answer", t5.stream, n4._dtlsRole), t5.rtcpParameters && t5.rtcpParameters.reducedSize && (r3 += "a=rtcp-rsize\r\n");
                  }
                });
                var a2 = new t4.RTCSessionDescription({ type: "answer", sdp: r3 });
                return Promise.resolve(a2);
              }, d.prototype.addIceCandidate = function(t5) {
                var i4, n4 = this;
                return t5 && void 0 === t5.sdpMLineIndex && !t5.sdpMid ? Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")) : new Promise(function(r3, s3) {
                  if (!n4._remoteDescription)
                    return s3(h("InvalidStateError", "Can not add ICE candidate without a remote description"));
                  if (t5 && "" !== t5.candidate) {
                    var o3 = t5.sdpMLineIndex;
                    if (t5.sdpMid) {
                      for (var u3 = 0; u3 < n4.transceivers.length; u3++)
                        if (n4.transceivers[u3].mid === t5.sdpMid) {
                          o3 = u3;
                          break;
                        }
                    }
                    var a2 = n4.transceivers[o3];
                    if (!a2)
                      return s3(h("OperationError", "Can not add ICE candidate"));
                    if (a2.rejected)
                      return r3();
                    var f2 = Object.keys(t5.candidate).length > 0 ? e2.parseCandidate(t5.candidate) : {};
                    if ("tcp" === f2.protocol && (0 === f2.port || 9 === f2.port))
                      return r3();
                    if (f2.component && 1 !== f2.component)
                      return r3();
                    if ((0 === o3 || o3 > 0 && a2.iceTransport !== n4.transceivers[0].iceTransport) && !c(a2.iceTransport, f2))
                      return s3(h("OperationError", "Can not add ICE candidate"));
                    var l2 = t5.candidate.trim();
                    0 === l2.indexOf("a=") && (l2 = l2.substr(2)), (i4 = e2.getMediaSections(n4._remoteDescription.sdp))[o3] += "a=" + (f2.type ? l2 : "end-of-candidates") + "\r\n", n4._remoteDescription.sdp = e2.getDescription(n4._remoteDescription.sdp) + i4.join("");
                  } else
                    for (var d2 = 0; d2 < n4.transceivers.length && (n4.transceivers[d2].rejected || (n4.transceivers[d2].iceTransport.addRemoteCandidate({}), (i4 = e2.getMediaSections(n4._remoteDescription.sdp))[d2] += "a=end-of-candidates\r\n", n4._remoteDescription.sdp = e2.getDescription(n4._remoteDescription.sdp) + i4.join(""), !n4.usingBundle)); d2++)
                      ;
                  r3();
                });
              }, d.prototype.getStats = function(i4) {
                if (i4 && i4 instanceof t4.MediaStreamTrack) {
                  var n4 = null;
                  if (this.transceivers.forEach(function(t5) {
                    t5.rtpSender && t5.rtpSender.track === i4 ? n4 = t5.rtpSender : t5.rtpReceiver && t5.rtpReceiver.track === i4 && (n4 = t5.rtpReceiver);
                  }), !n4)
                    throw h("InvalidAccessError", "Invalid selector.");
                  return n4.getStats();
                }
                var e3 = [];
                return this.transceivers.forEach(function(t5) {
                  ["rtpSender", "rtpReceiver", "iceGatherer", "iceTransport", "dtlsTransport"].forEach(function(i5) {
                    t5[i5] && e3.push(t5[i5].getStats());
                  });
                }), Promise.all(e3).then(function(t5) {
                  var i5 = /* @__PURE__ */ new Map();
                  return t5.forEach(function(t6) {
                    t6.forEach(function(t7) {
                      i5.set(t7.id, t7);
                    });
                  }), i5;
                });
              }, ["RTCRtpSender", "RTCRtpReceiver", "RTCIceGatherer", "RTCIceTransport", "RTCDtlsTransport"].forEach(function(i4) {
                var n4 = t4[i4];
                if (n4 && n4.prototype && n4.prototype.getStats) {
                  var e3 = n4.prototype.getStats;
                  n4.prototype.getStats = function() {
                    return e3.apply(this).then(function(t5) {
                      var i5 = /* @__PURE__ */ new Map();
                      return Object.keys(t5).forEach(function(n5) {
                        t5[n5].type = r2(t5[n5]), i5.set(n5, t5[n5]);
                      }), i5;
                    });
                  };
                }
              });
              var v = ["createOffer", "createAnswer"];
              return v.forEach(function(t5) {
                var i4 = d.prototype[t5];
                d.prototype[t5] = function() {
                  var t6 = arguments;
                  return "function" == typeof t6[0] || "function" == typeof t6[1] ? i4.apply(this, [arguments[2]]).then(function(i5) {
                    "function" == typeof t6[0] && t6[0].apply(null, [i5]);
                  }, function(i5) {
                    "function" == typeof t6[1] && t6[1].apply(null, [i5]);
                  }) : i4.apply(this, arguments);
                };
              }), (v = ["setLocalDescription", "setRemoteDescription", "addIceCandidate"]).forEach(function(t5) {
                var i4 = d.prototype[t5];
                d.prototype[t5] = function() {
                  var t6 = arguments;
                  return "function" == typeof t6[1] || "function" == typeof t6[2] ? i4.apply(this, arguments).then(function() {
                    "function" == typeof t6[1] && t6[1].apply(null);
                  }, function(i5) {
                    "function" == typeof t6[2] && t6[2].apply(null, [i5]);
                  }) : i4.apply(this, arguments);
                };
              }), ["getStats"].forEach(function(t5) {
                var i4 = d.prototype[t5];
                d.prototype[t5] = function() {
                  var t6 = arguments;
                  return "function" == typeof t6[1] ? i4.apply(this, arguments).then(function() {
                    "function" == typeof t6[1] && t6[1].apply(null);
                  }) : i4.apply(this, arguments);
                };
              }), d;
            };
          }, { sdp: 17 }], 17: [function(t3, i2, n2) {
            "use strict";
            var e2 = { generateIdentifier: function() {
              return Math.random().toString(36).substr(2, 10);
            } };
            e2.localCName = e2.generateIdentifier(), e2.splitLines = function(t4) {
              return t4.trim().split("\n").map(function(t5) {
                return t5.trim();
              });
            }, e2.splitSections = function(t4) {
              return t4.split("\nm=").map(function(t5, i3) {
                return (i3 > 0 ? "m=" + t5 : t5).trim() + "\r\n";
              });
            }, e2.getDescription = function(t4) {
              var i3 = e2.splitSections(t4);
              return i3 && i3[0];
            }, e2.getMediaSections = function(t4) {
              var i3 = e2.splitSections(t4);
              return i3.shift(), i3;
            }, e2.matchPrefix = function(t4, i3) {
              return e2.splitLines(t4).filter(function(t5) {
                return 0 === t5.indexOf(i3);
              });
            }, e2.parseCandidate = function(t4) {
              for (var i3, n3 = { foundation: (i3 = 0 === t4.indexOf("a=candidate:") ? t4.substring(12).split(" ") : t4.substring(10).split(" "))[0], component: parseInt(i3[1], 10), protocol: i3[2].toLowerCase(), priority: parseInt(i3[3], 10), ip: i3[4], address: i3[4], port: parseInt(i3[5], 10), type: i3[7] }, e3 = 8; e3 < i3.length; e3 += 2)
                switch (i3[e3]) {
                  case "raddr":
                    n3.relatedAddress = i3[e3 + 1];
                    break;
                  case "rport":
                    n3.relatedPort = parseInt(i3[e3 + 1], 10);
                    break;
                  case "tcptype":
                    n3.tcpType = i3[e3 + 1];
                    break;
                  case "ufrag":
                    n3.ufrag = i3[e3 + 1], n3.usernameFragment = i3[e3 + 1];
                    break;
                  default:
                    n3[i3[e3]] = i3[e3 + 1];
                }
              return n3;
            }, e2.writeCandidate = function(t4) {
              var i3 = [];
              i3.push(t4.foundation), i3.push(t4.component), i3.push(t4.protocol.toUpperCase()), i3.push(t4.priority), i3.push(t4.address || t4.ip), i3.push(t4.port);
              var n3 = t4.type;
              return i3.push("typ"), i3.push(n3), "host" !== n3 && t4.relatedAddress && t4.relatedPort && (i3.push("raddr"), i3.push(t4.relatedAddress), i3.push("rport"), i3.push(t4.relatedPort)), t4.tcpType && "tcp" === t4.protocol.toLowerCase() && (i3.push("tcptype"), i3.push(t4.tcpType)), (t4.usernameFragment || t4.ufrag) && (i3.push("ufrag"), i3.push(t4.usernameFragment || t4.ufrag)), "candidate:" + i3.join(" ");
            }, e2.parseIceOptions = function(t4) {
              return t4.substr(14).split(" ");
            }, e2.parseRtpMap = function(t4) {
              var i3 = t4.substr(9).split(" "), n3 = { payloadType: parseInt(i3.shift(), 10) };
              return i3 = i3[0].split("/"), n3.name = i3[0], n3.clockRate = parseInt(i3[1], 10), n3.channels = 3 === i3.length ? parseInt(i3[2], 10) : 1, n3.numChannels = n3.channels, n3;
            }, e2.writeRtpMap = function(t4) {
              var i3 = t4.payloadType;
              void 0 !== t4.preferredPayloadType && (i3 = t4.preferredPayloadType);
              var n3 = t4.channels || t4.numChannels || 1;
              return "a=rtpmap:" + i3 + " " + t4.name + "/" + t4.clockRate + (1 !== n3 ? "/" + n3 : "") + "\r\n";
            }, e2.parseExtmap = function(t4) {
              var i3 = t4.substr(9).split(" ");
              return { id: parseInt(i3[0], 10), direction: i3[0].indexOf("/") > 0 ? i3[0].split("/")[1] : "sendrecv", uri: i3[1] };
            }, e2.writeExtmap = function(t4) {
              return "a=extmap:" + (t4.id || t4.preferredId) + (t4.direction && "sendrecv" !== t4.direction ? "/" + t4.direction : "") + " " + t4.uri + "\r\n";
            }, e2.parseFmtp = function(t4) {
              for (var i3, n3 = {}, e3 = t4.substr(t4.indexOf(" ") + 1).split(";"), r2 = 0; r2 < e3.length; r2++)
                n3[(i3 = e3[r2].trim().split("="))[0].trim()] = i3[1];
              return n3;
            }, e2.writeFmtp = function(t4) {
              var i3 = "", n3 = t4.payloadType;
              if (void 0 !== t4.preferredPayloadType && (n3 = t4.preferredPayloadType), t4.parameters && Object.keys(t4.parameters).length) {
                var e3 = [];
                Object.keys(t4.parameters).forEach(function(i4) {
                  e3.push(t4.parameters[i4] ? i4 + "=" + t4.parameters[i4] : i4);
                }), i3 += "a=fmtp:" + n3 + " " + e3.join(";") + "\r\n";
              }
              return i3;
            }, e2.parseRtcpFb = function(t4) {
              var i3 = t4.substr(t4.indexOf(" ") + 1).split(" ");
              return { type: i3.shift(), parameter: i3.join(" ") };
            }, e2.writeRtcpFb = function(t4) {
              var i3 = "", n3 = t4.payloadType;
              return void 0 !== t4.preferredPayloadType && (n3 = t4.preferredPayloadType), t4.rtcpFeedback && t4.rtcpFeedback.length && t4.rtcpFeedback.forEach(function(t5) {
                i3 += "a=rtcp-fb:" + n3 + " " + t5.type + (t5.parameter && t5.parameter.length ? " " + t5.parameter : "") + "\r\n";
              }), i3;
            }, e2.parseSsrcMedia = function(t4) {
              var i3 = t4.indexOf(" "), n3 = { ssrc: parseInt(t4.substr(7, i3 - 7), 10) }, e3 = t4.indexOf(":", i3);
              return e3 > -1 ? (n3.attribute = t4.substr(i3 + 1, e3 - i3 - 1), n3.value = t4.substr(e3 + 1)) : n3.attribute = t4.substr(i3 + 1), n3;
            }, e2.parseSsrcGroup = function(t4) {
              var i3 = t4.substr(13).split(" ");
              return { semantics: i3.shift(), ssrcs: i3.map(function(t5) {
                return parseInt(t5, 10);
              }) };
            }, e2.getMid = function(t4) {
              var i3 = e2.matchPrefix(t4, "a=mid:")[0];
              if (i3)
                return i3.substr(6);
            }, e2.parseFingerprint = function(t4) {
              var i3 = t4.substr(14).split(" ");
              return { algorithm: i3[0].toLowerCase(), value: i3[1] };
            }, e2.getDtlsParameters = function(t4, i3) {
              return { role: "auto", fingerprints: e2.matchPrefix(t4 + i3, "a=fingerprint:").map(e2.parseFingerprint) };
            }, e2.writeDtlsParameters = function(t4, i3) {
              var n3 = "a=setup:" + i3 + "\r\n";
              return t4.fingerprints.forEach(function(t5) {
                n3 += "a=fingerprint:" + t5.algorithm + " " + t5.value + "\r\n";
              }), n3;
            }, e2.getIceParameters = function(t4, i3) {
              var n3 = e2.splitLines(t4);
              return { usernameFragment: (n3 = n3.concat(e2.splitLines(i3))).filter(function(t5) {
                return 0 === t5.indexOf("a=ice-ufrag:");
              })[0].substr(12), password: n3.filter(function(t5) {
                return 0 === t5.indexOf("a=ice-pwd:");
              })[0].substr(10) };
            }, e2.writeIceParameters = function(t4) {
              return "a=ice-ufrag:" + t4.usernameFragment + "\r\na=ice-pwd:" + t4.password + "\r\n";
            }, e2.parseRtpParameters = function(t4) {
              for (var i3 = { codecs: [], headerExtensions: [], fecMechanisms: [], rtcp: [] }, n3 = e2.splitLines(t4)[0].split(" "), r2 = 3; r2 < n3.length; r2++) {
                var s2 = n3[r2], o2 = e2.matchPrefix(t4, "a=rtpmap:" + s2 + " ")[0];
                if (o2) {
                  var u2 = e2.parseRtpMap(o2), a = e2.matchPrefix(t4, "a=fmtp:" + s2 + " ");
                  switch (u2.parameters = a.length ? e2.parseFmtp(a[0]) : {}, u2.rtcpFeedback = e2.matchPrefix(t4, "a=rtcp-fb:" + s2 + " ").map(e2.parseRtcpFb), i3.codecs.push(u2), u2.name.toUpperCase()) {
                    case "RED":
                    case "ULPFEC":
                      i3.fecMechanisms.push(u2.name.toUpperCase());
                  }
                }
              }
              return e2.matchPrefix(t4, "a=extmap:").forEach(function(t5) {
                i3.headerExtensions.push(e2.parseExtmap(t5));
              }), i3;
            }, e2.writeRtpDescription = function(t4, i3) {
              var n3 = "";
              n3 += "m=" + t4 + " ", n3 += i3.codecs.length > 0 ? "9" : "0", n3 += " UDP/TLS/RTP/SAVPF ", n3 += i3.codecs.map(function(t5) {
                return void 0 !== t5.preferredPayloadType ? t5.preferredPayloadType : t5.payloadType;
              }).join(" ") + "\r\n", n3 += "c=IN IP4 0.0.0.0\r\n", n3 += "a=rtcp:9 IN IP4 0.0.0.0\r\n", i3.codecs.forEach(function(t5) {
                n3 += e2.writeRtpMap(t5), n3 += e2.writeFmtp(t5), n3 += e2.writeRtcpFb(t5);
              });
              var r2 = 0;
              return i3.codecs.forEach(function(t5) {
                t5.maxptime > r2 && (r2 = t5.maxptime);
              }), r2 > 0 && (n3 += "a=maxptime:" + r2 + "\r\n"), n3 += "a=rtcp-mux\r\n", i3.headerExtensions && i3.headerExtensions.forEach(function(t5) {
                n3 += e2.writeExtmap(t5);
              }), n3;
            }, e2.parseRtpEncodingParameters = function(t4) {
              var i3, n3 = [], r2 = e2.parseRtpParameters(t4), s2 = -1 !== r2.fecMechanisms.indexOf("RED"), o2 = -1 !== r2.fecMechanisms.indexOf("ULPFEC"), u2 = e2.matchPrefix(t4, "a=ssrc:").map(function(t5) {
                return e2.parseSsrcMedia(t5);
              }).filter(function(t5) {
                return "cname" === t5.attribute;
              }), a = u2.length > 0 && u2[0].ssrc, c = e2.matchPrefix(t4, "a=ssrc-group:FID").map(function(t5) {
                return t5.substr(17).split(" ").map(function(t6) {
                  return parseInt(t6, 10);
                });
              });
              c.length > 0 && c[0].length > 1 && c[0][0] === a && (i3 = c[0][1]), r2.codecs.forEach(function(t5) {
                if ("RTX" === t5.name.toUpperCase() && t5.parameters.apt) {
                  var e3 = { ssrc: a, codecPayloadType: parseInt(t5.parameters.apt, 10) };
                  a && i3 && (e3.rtx = { ssrc: i3 }), n3.push(e3), s2 && ((e3 = JSON.parse(JSON.stringify(e3))).fec = { ssrc: a, mechanism: o2 ? "red+ulpfec" : "red" }, n3.push(e3));
                }
              }), 0 === n3.length && a && n3.push({ ssrc: a });
              var h = e2.matchPrefix(t4, "b=");
              return h.length && (h = 0 === h[0].indexOf("b=TIAS:") ? parseInt(h[0].substr(7), 10) : 0 === h[0].indexOf("b=AS:") ? 1e3 * parseInt(h[0].substr(5), 10) * 0.95 - 16e3 : void 0, n3.forEach(function(t5) {
                t5.maxBitrate = h;
              })), n3;
            }, e2.parseRtcpParameters = function(t4) {
              var i3 = {}, n3 = e2.matchPrefix(t4, "a=ssrc:").map(function(t5) {
                return e2.parseSsrcMedia(t5);
              }).filter(function(t5) {
                return "cname" === t5.attribute;
              })[0];
              n3 && (i3.cname = n3.value, i3.ssrc = n3.ssrc);
              var r2 = e2.matchPrefix(t4, "a=rtcp-rsize");
              i3.reducedSize = r2.length > 0, i3.compound = 0 === r2.length;
              var s2 = e2.matchPrefix(t4, "a=rtcp-mux");
              return i3.mux = s2.length > 0, i3;
            }, e2.parseMsid = function(t4) {
              var i3, n3 = e2.matchPrefix(t4, "a=msid:");
              if (1 === n3.length)
                return { stream: (i3 = n3[0].substr(7).split(" "))[0], track: i3[1] };
              var r2 = e2.matchPrefix(t4, "a=ssrc:").map(function(t5) {
                return e2.parseSsrcMedia(t5);
              }).filter(function(t5) {
                return "msid" === t5.attribute;
              });
              return r2.length > 0 ? { stream: (i3 = r2[0].value.split(" "))[0], track: i3[1] } : void 0;
            }, e2.generateSessionId = function() {
              return Math.random().toString().substr(2, 21);
            }, e2.writeSessionBoilerplate = function(t4, i3, n3) {
              var r2 = void 0 !== i3 ? i3 : 2;
              return "v=0\r\no=" + (n3 || "thisisadapterortc") + " " + (t4 || e2.generateSessionId()) + " " + r2 + " IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n";
            }, e2.writeMediaSection = function(t4, i3, n3, r2) {
              var s2 = e2.writeRtpDescription(t4.kind, i3);
              if (s2 += e2.writeIceParameters(t4.iceGatherer.getLocalParameters()), s2 += e2.writeDtlsParameters(t4.dtlsTransport.getLocalParameters(), "offer" === n3 ? "actpass" : "active"), s2 += "a=mid:" + t4.mid + "\r\n", s2 += t4.direction ? "a=" + t4.direction + "\r\n" : t4.rtpSender && t4.rtpReceiver ? "a=sendrecv\r\n" : t4.rtpSender ? "a=sendonly\r\n" : t4.rtpReceiver ? "a=recvonly\r\n" : "a=inactive\r\n", t4.rtpSender) {
                var o2 = "msid:" + r2.id + " " + t4.rtpSender.track.id + "\r\n";
                s2 += "a=" + o2, s2 += "a=ssrc:" + t4.sendEncodingParameters[0].ssrc + " " + o2, t4.sendEncodingParameters[0].rtx && (s2 += "a=ssrc:" + t4.sendEncodingParameters[0].rtx.ssrc + " " + o2, s2 += "a=ssrc-group:FID " + t4.sendEncodingParameters[0].ssrc + " " + t4.sendEncodingParameters[0].rtx.ssrc + "\r\n");
              }
              return s2 += "a=ssrc:" + t4.sendEncodingParameters[0].ssrc + " cname:" + e2.localCName + "\r\n", t4.rtpSender && t4.sendEncodingParameters[0].rtx && (s2 += "a=ssrc:" + t4.sendEncodingParameters[0].rtx.ssrc + " cname:" + e2.localCName + "\r\n"), s2;
            }, e2.getDirection = function(t4, i3) {
              for (var n3 = e2.splitLines(t4), r2 = 0; r2 < n3.length; r2++)
                switch (n3[r2]) {
                  case "a=sendrecv":
                  case "a=sendonly":
                  case "a=recvonly":
                  case "a=inactive":
                    return n3[r2].substr(2);
                }
              return i3 ? e2.getDirection(i3) : "sendrecv";
            }, e2.getKind = function(t4) {
              return e2.splitLines(t4)[0].split(" ")[0].substr(2);
            }, e2.isRejected = function(t4) {
              return "0" === t4.split(" ", 2)[1];
            }, e2.parseMLine = function(t4) {
              var i3 = e2.splitLines(t4)[0].substr(2).split(" ");
              return { kind: i3[0], port: parseInt(i3[1], 10), protocol: i3[2], fmt: i3.slice(3).join(" ") };
            }, e2.parseOLine = function(t4) {
              var i3 = e2.matchPrefix(t4, "o=")[0].substr(2).split(" ");
              return { username: i3[0], sessionId: i3[1], sessionVersion: parseInt(i3[2], 10), netType: i3[3], addressType: i3[4], address: i3[5] };
            }, e2.isValidSDP = function(t4) {
              if ("string" != typeof t4 || 0 === t4.length)
                return false;
              for (var i3 = e2.splitLines(t4), n3 = 0; n3 < i3.length; n3++)
                if (i3[n3].length < 2 || "=" !== i3[n3].charAt(1))
                  return false;
              return true;
            }, "object" == typeof i2 && (i2.exports = e2);
          }, {}] }, {}, [1])(1);
        }, 6994: function(i2) {
          "use strict";
          i2.exports = t;
        }, 7165: function(t2, i2, n2) {
          var e2;
          t2.exports = (e2 = n2(9021), n2(9506), void (e2.lib.Cipher || function(t3) {
            var i3 = e2, n3 = i3.lib, r2 = n3.Base, s2 = n3.WordArray, o2 = n3.BufferedBlockAlgorithm, u2 = i3.enc, a = u2.Base64, c = i3.algo.EvpKDF, h = n3.Cipher = o2.extend({ cfg: r2.extend(), createEncryptor: function(t4, i4) {
              return this.create(this._ENC_XFORM_MODE, t4, i4);
            }, createDecryptor: function(t4, i4) {
              return this.create(this._DEC_XFORM_MODE, t4, i4);
            }, init: function(t4, i4, n4) {
              this.cfg = this.cfg.extend(n4), this._xformMode = t4, this._key = i4, this.reset();
            }, reset: function() {
              o2.reset.call(this), this._doReset();
            }, process: function(t4) {
              return this._append(t4), this._process();
            }, finalize: function(t4) {
              return t4 && this._append(t4), this._doFinalize();
            }, keySize: 4, ivSize: 4, _ENC_XFORM_MODE: 1, _DEC_XFORM_MODE: 2, _createHelper: function() {
              function t4(t5) {
                return "string" == typeof t5 ? _ : g;
              }
              return function(i4) {
                return { encrypt: function(n4, e3, r3) {
                  return t4(e3).encrypt(i4, n4, e3, r3);
                }, decrypt: function(n4, e3, r3) {
                  return t4(e3).decrypt(i4, n4, e3, r3);
                } };
              };
            }() }), f = (n3.StreamCipher = h.extend({ _doFinalize: function() {
              return this._process(true);
            }, blockSize: 1 }), i3.mode = {}), l = n3.BlockCipherMode = r2.extend({ createEncryptor: function(t4, i4) {
              return this.Encryptor.create(t4, i4);
            }, createDecryptor: function(t4, i4) {
              return this.Decryptor.create(t4, i4);
            }, init: function(t4, i4) {
              this._cipher = t4, this._iv = i4;
            } }), d = f.CBC = function() {
              var i4 = l.extend();
              function n4(i5, n5, e3) {
                var r3, s3 = this._iv;
                s3 ? (r3 = s3, this._iv = t3) : r3 = this._prevBlock;
                for (var o3 = 0; o3 < e3; o3++)
                  i5[n5 + o3] ^= r3[o3];
              }
              return i4.Encryptor = i4.extend({ processBlock: function(t4, i5) {
                var e3 = this._cipher, r3 = e3.blockSize;
                n4.call(this, t4, i5, r3), e3.encryptBlock(t4, i5), this._prevBlock = t4.slice(i5, i5 + r3);
              } }), i4.Decryptor = i4.extend({ processBlock: function(t4, i5) {
                var e3 = this._cipher, r3 = e3.blockSize, s3 = t4.slice(i5, i5 + r3);
                e3.decryptBlock(t4, i5), n4.call(this, t4, i5, r3), this._prevBlock = s3;
              } }), i4;
            }(), v = (i3.pad = {}).Pkcs7 = { pad: function(t4, i4) {
              for (var n4 = 4 * i4, e3 = n4 - t4.sigBytes % n4, r3 = e3 << 24 | e3 << 16 | e3 << 8 | e3, o3 = [], u3 = 0; u3 < e3; u3 += 4)
                o3.push(r3);
              var a2 = s2.create(o3, e3);
              t4.concat(a2);
            }, unpad: function(t4) {
              t4.sigBytes -= 255 & t4.words[t4.sigBytes - 1 >>> 2];
            } }, m = (n3.BlockCipher = h.extend({ cfg: h.cfg.extend({ mode: d, padding: v }), reset: function() {
              var t4;
              h.reset.call(this);
              var i4 = this.cfg, n4 = i4.iv, e3 = i4.mode;
              this._xformMode == this._ENC_XFORM_MODE ? t4 = e3.createEncryptor : (t4 = e3.createDecryptor, this._minBufferSize = 1), this._mode && this._mode.__creator == t4 ? this._mode.init(this, n4 && n4.words) : (this._mode = t4.call(e3, this, n4 && n4.words), this._mode.__creator = t4);
            }, _doProcessBlock: function(t4, i4) {
              this._mode.processBlock(t4, i4);
            }, _doFinalize: function() {
              var t4, i4 = this.cfg.padding;
              return this._xformMode == this._ENC_XFORM_MODE ? (i4.pad(this._data, this.blockSize), t4 = this._process(true)) : (t4 = this._process(true), i4.unpad(t4)), t4;
            }, blockSize: 4 }), n3.CipherParams = r2.extend({ init: function(t4) {
              this.mixIn(t4);
            }, toString: function(t4) {
              return (t4 || this.formatter).stringify(this);
            } })), p = (i3.format = {}).OpenSSL = { stringify: function(t4) {
              var i4 = t4.ciphertext, n4 = t4.salt;
              return (n4 ? s2.create([1398893684, 1701076831]).concat(n4).concat(i4) : i4).toString(a);
            }, parse: function(t4) {
              var i4, n4 = a.parse(t4), e3 = n4.words;
              return 1398893684 == e3[0] && 1701076831 == e3[1] && (i4 = s2.create(e3.slice(2, 4)), e3.splice(0, 4), n4.sigBytes -= 16), m.create({ ciphertext: n4, salt: i4 });
            } }, g = n3.SerializableCipher = r2.extend({ cfg: r2.extend({ format: p }), encrypt: function(t4, i4, n4, e3) {
              e3 = this.cfg.extend(e3);
              var r3 = t4.createEncryptor(n4, e3), s3 = r3.finalize(i4), o3 = r3.cfg;
              return m.create({ ciphertext: s3, key: n4, iv: o3.iv, algorithm: t4, mode: o3.mode, padding: o3.padding, blockSize: t4.blockSize, formatter: e3.format });
            }, decrypt: function(t4, i4, n4, e3) {
              return e3 = this.cfg.extend(e3), i4 = this._parse(i4, e3.format), t4.createDecryptor(n4, e3).finalize(i4.ciphertext);
            }, _parse: function(t4, i4) {
              return "string" == typeof t4 ? i4.parse(t4, this) : t4;
            } }), b = (i3.kdf = {}).OpenSSL = { execute: function(t4, i4, n4, e3, r3) {
              if (e3 || (e3 = s2.random(8)), r3)
                o3 = c.create({ keySize: i4 + n4, hasher: r3 }).compute(t4, e3);
              else
                var o3 = c.create({ keySize: i4 + n4 }).compute(t4, e3);
              var u3 = s2.create(o3.words.slice(i4), 4 * n4);
              return o3.sigBytes = 4 * i4, m.create({ key: o3, iv: u3, salt: e3 });
            } }, _ = n3.PasswordBasedCipher = g.extend({ cfg: g.cfg.extend({ kdf: b }), encrypt: function(t4, i4, n4, e3) {
              var r3 = (e3 = this.cfg.extend(e3)).kdf.execute(n4, t4.keySize, t4.ivSize, e3.salt, e3.hasher);
              e3.iv = r3.iv;
              var s3 = g.encrypt.call(this, t4, i4, r3.key, e3);
              return s3.mixIn(r3), s3;
            }, decrypt: function(t4, i4, n4, e3) {
              e3 = this.cfg.extend(e3), i4 = this._parse(i4, e3.format);
              var r3 = e3.kdf.execute(n4, t4.keySize, t4.ivSize, i4.salt, e3.hasher);
              return e3.iv = r3.iv, g.decrypt.call(this, t4, i4, r3.key, e3);
            } });
          }()));
        }, 7202: function(t2, i2, n2) {
          "use strict";
          var e2 = n2(6994);
          i2.A = e2.default || e2;
        }, 8627: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { $wo: function() {
            return $;
          }, A1v: function() {
            return Ai;
          }, Arx: function() {
            return Lt;
          }, B3d: function() {
            return Pt;
          }, BMv: function() {
            return qi;
          }, Be2: function() {
            return gt;
          }, E9Y: function() {
            return S;
          }, F$4: function() {
            return T;
          }, FB3: function() {
            return ut;
          }, GY7: function() {
            return li;
          }, H6b: function() {
            return Xt;
          }, HCP: function() {
            return st;
          }, HED: function() {
            return E;
          }, HO9: function() {
            return I;
          }, I4J: function() {
            return ti;
          }, I7C: function() {
            return mt;
          }, J79: function() {
            return a;
          }, JDv: function() {
            return _t;
          }, JSm: function() {
            return bt;
          }, KbN: function() {
            return xi;
          }, L8E: function() {
            return it;
          }, LBO: function() {
            return Yt;
          }, LLz: function() {
            return L;
          }, MK1: function() {
            return Ct;
          }, MrD: function() {
            return lt;
          }, MrS: function() {
            return x;
          }, MuX: function() {
            return $t;
          }, NCg: function() {
            return Mi;
          }, NJN: function() {
            return Ri;
          }, O2H: function() {
            return Oi;
          }, OdW: function() {
            return ii;
          }, OrZ: function() {
            return B;
          }, Oy0: function() {
            return m;
          }, PA0: function() {
            return c;
          }, PTE: function() {
            return P;
          }, Q3v: function() {
            return yt;
          }, Q9p: function() {
            return d;
          }, QYE: function() {
            return Di;
          }, Qo5: function() {
            return _;
          }, R54: function() {
            return ki;
          }, RBR: function() {
            return St;
          }, RZs: function() {
            return Vt;
          }, RfS: function() {
            return rt;
          }, S4u: function() {
            return s2;
          }, S5f: function() {
            return h;
          }, S6t: function() {
            return _i;
          }, SB8: function() {
            return xt;
          }, SCx: function() {
            return Wt;
          }, SQb: function() {
            return pi;
          }, SRE: function() {
            return ot;
          }, SmZ: function() {
            return V;
          }, Srw: function() {
            return w;
          }, T1C: function() {
            return ci;
          }, T_8: function() {
            return It;
          }, TgN: function() {
            return ji;
          }, Tij: function() {
            return Ut;
          }, UZK: function() {
            return g;
          }, V2t: function() {
            return M;
          }, VEp: function() {
            return mi;
          }, VU9: function() {
            return Q;
          }, WP4: function() {
            return ft;
          }, WgV: function() {
            return Ti;
          }, XHx: function() {
            return qt;
          }, Xxx: function() {
            return z;
          }, YDn: function() {
            return Qt;
          }, ZEp: function() {
            return l;
          }, ZpF: function() {
            return H;
          }, Zws: function() {
            return Mt;
          }, _5H: function() {
            return Zt;
          }, _68: function() {
            return Z;
          }, _9F: function() {
            return vi;
          }, _HD: function() {
            return b;
          }, aUw: function() {
            return C;
          }, aa2: function() {
            return W;
          }, akY: function() {
            return Pi;
          }, akb: function() {
            return Et;
          }, ann: function() {
            return Rt;
          }, aq0: function() {
            return zi;
          }, b1q: function() {
            return Ht;
          }, bVX: function() {
            return j;
          }, cGQ: function() {
            return Tt;
          }, cMG: function() {
            return Kt;
          }, ckD: function() {
            return ei;
          }, ckg: function() {
            return Si;
          }, clM: function() {
            return o2;
          }, d49: function() {
            return u2;
          }, dNl: function() {
            return Li;
          }, dU8: function() {
            return gi;
          }, dXc: function() {
            return Jt;
          }, dg1: function() {
            return Y;
          }, dqB: function() {
            return At;
          }, drM: function() {
            return si;
          }, ekj: function() {
            return jt;
          }, f43: function() {
            return et;
          }, f5Z: function() {
            return ui;
          }, fFX: function() {
            return wi;
          }, fzq: function() {
            return nt;
          }, g9p: function() {
            return O;
          }, gHA: function() {
            return zt;
          }, gSF: function() {
            return k;
          }, hYx: function() {
            return ri;
          }, hje: function() {
            return Nt;
          }, iei: function() {
            return K;
          }, jZ$: function() {
            return X;
          }, jut: function() {
            return J;
          }, kOd: function() {
            return ht;
          }, kbF: function() {
            return ct;
          }, lgu: function() {
            return Bt;
          }, lph: function() {
            return p;
          }, lwJ: function() {
            return Ci;
          }, m6U: function() {
            return vt;
          }, mHY: function() {
            return f;
          }, mrK: function() {
            return dt;
          }, oCq: function() {
            return ni;
          }, p7L: function() {
            return fi;
          }, pGN: function() {
            return oi;
          }, pWJ: function() {
            return Ft;
          }, ph7: function() {
            return Ii;
          }, pn5: function() {
            return D;
          }, pzL: function() {
            return v;
          }, qvY: function() {
            return wt;
          }, rBJ: function() {
            return bi;
          }, rV9: function() {
            return q;
          }, sJH: function() {
            return F;
          }, sP3: function() {
            return di;
          }, sVF: function() {
            return A;
          }, s_m: function() {
            return G;
          }, t85: function() {
            return tt;
          }, tlN: function() {
            return ai;
          }, ton: function() {
            return Ei;
          }, ulL: function() {
            return y;
          }, wxm: function() {
            return Dt;
          }, xU2: function() {
            return at;
          }, xbZ: function() {
            return kt;
          }, xfZ: function() {
            return R;
          }, yK: function() {
            return U;
          }, yTe: function() {
            return N;
          }, z0D: function() {
            return Ot;
          }, zML: function() {
            return Gt;
          }, zcJ: function() {
            return yi;
          }, zgL: function() {
            return Ni;
          }, zgf: function() {
            return hi;
          }, zs3: function() {
            return pt;
          } });
          var e2 = n2(8866), r2 = "the user cancels the stream request.", s2 = { code: 1000002, message: "not login room" }, o2 = { code: 1000014, message: "stream ID is too long" }, u2 = { code: 1000015, message: "streamID is empty" }, a = { code: 1000016, message: "stream ID contains illegal characters" }, c = { code: 1000017, message: e2.Rl }, h = { code: 1000018, message: e2.qC }, f = { code: 1001021, message: "set geoFence fail" }, l = { code: 1100001, message: e2.dO }, d = { code: 1100002, message: "network timeout." }, v = { code: 1100003, msg: "socket close" }, m = { code: 1100999, message: "unknown server error" }, p = { code: 1101002, message: "get app config fail" }, g = { code: 1101003, message: "Module not imported" }, b = { code: 1101005, message: "signal hb fail" }, _ = { code: 1002011, message: "room ID is empty" }, y = { code: 1002012, message: "room ID contains illegal characters" }, w = { code: 1002013, message: "room ID is too long" }, S = { code: 1002099, message: "room inner error" }, E = { code: 1102016, message: "token error" }, k = { code: 1102017, message: "dispatch error" }, O = { code: 1102018, message: "token expired" }, I = { code: 1102021, message: "biz channel error." }, R = { code: 1102022, message: "dispatch request timeout" }, T = { code: 1102023, message: "connect signal fail" }, C = { code: 1102024, message: "invalid channel" }, A = { code: 1102026, msg: e2.fT }, z = { code: 1003025, message: "stream is forbided by media server" }, D = { code: 1003028, message: "There are duplicate stream ids in the room" }, N = { code: 1003040, message: "Pushing CDN status failed. It may be an error in the CDN url" }, P = { code: 1003050, message: "the extra info of the stream is null" }, M = { code: 1003051, message: "the extra info of the stream is too long" }, x = { code: 1003080, message: "browser does not support the codec" }, j = { code: 1003099, message: "publish inner error" }, q = { code: 1003081, message: "B-frames detected in the video stream" }, L = { code: 1103001, message: e2.dO }, B = { code: 1103002, message: "browser do not support" }, U = { code: 1103010, message: "screen fail" }, G = { code: 1103011, message: "enumerate devices fail" }, J = { code: 1103012, message: "use camera device fail" }, F = { code: 1103019, message: "publish streams auth fail" }, H = { code: 1103021, message: "session request fail" }, V = { code: 1103022, message: "create offer error" }, Q = { code: 1103023, message: "setLocalDescription error" }, Y = { code: 1103024, message: "mediaDesc error" }, K = { code: 1103025, message: "other side offer error" }, Z = { code: 1103026, message: "candidate error" }, X = { code: 1103027, message: "server session closed" }, W = { code: 1103028, message: "ice connection error" }, $ = { code: 1103030, message: "negotiation timeout" }, tt = { code: 1103042, message: "screen canceled" }, it = { code: 1103043, message: "screen not support" }, nt = { code: 1103044, message: e2.aw }, et = { code: 1103099, message: "stream is not capturing" }, rt = { code: 1103049, message: "repeated pull same stream" }, st = { code: 1103050, message: "websocket disconnected" }, ot = { code: 1103051, message: "publisher retry timeout" }, ut = { code: 1103053, message: "https is required" }, at = { code: 1103055, message: e2.Wk }, ct = { code: 1103056, message: "publish is publishing" }, ht = { code: 1103058, message: "client ip changed" }, ft = { code: 1103059, message: "ttl over time" }, lt = { code: 1103060, message: "session request timeout" }, dt = { code: 1103061, message: "get media fail" }, vt = { code: 1103062, message: "update stream info fail" }, mt = { code: 1103063, message: "publish target no response" }, pt = { code: 1103064, message: "get device not allowed" }, gt = { code: 1103065, message: "device is not readable" }, bt = { code: 1103066, message: "device does not meet constraints" }, _t = { code: 1103067, message: "update sdp time out" }, yt = { code: 1103068, message: "update sdp fail" }, wt = { code: 1103073, message: "video effect is starting, please operate after video effect is started" }, St = { code: 1103078, message: "publish stream poor and net probe poor" }, Et = { code: 1103103, message: "remote sdp no candidate " }, kt = { code: 1103089, message: r2 }, Ot = { code: 1103093, message: "set audio out put error" }, It = { code: 1004099, message: "internal exeception" }, Rt = { code: 1104001, message: "input parm error" }, Tt = { code: 1104020, message: "dispatch request fail" }, Ct = { code: 1104021, message: "session request fail" }, At = { code: 1104022, message: "create offer error" }, zt = { code: 1104023, message: "setLocalDescription error" }, Dt = { code: 1104024, message: "mediaDesc error" }, Nt = { code: 1104025, message: "other side offer error" }, Pt = { code: 1104026, message: "candidate error" }, Mt = { code: 1104028, message: "ice connection error" }, xt = { code: 1104029, message: "websocket disconnected" }, jt = { code: 1104030, message: "negotiation timeout" }, qt = { code: 1104031, message: "player retry timeout" }, Lt = { code: 1104032, message: "player is playing" }, Bt = { code: 1104033, message: "client ip changed" }, Ut = { code: 1104034, message: "ttl is over time" }, Gt = { code: 1104035, message: "reset session push" }, Jt = { code: 1104036, message: "session request timeout" }, Ft = { code: 1104037, message: "probe time out" }, Ht = { code: 1104038, message: "resource mode is not supported" }, Vt = { code: 1104039, message: "play stream not found" }, Qt = { code: 1104027, message: "server session closed" }, Yt = { code: 1004002, message: "play stream not found" }, Kt = { code: 1004020, message: "play stream interrupted" }, Zt = { code: 1004025, message: "stream is forbided by media server" }, Xt = { code: 1004080, message: "browser does not support the codec" }, Wt = { code: 1004081, message: "decode video failed" }, $t = { code: 1104041, message: "stream quality poor and net probe poor" }, ti = { code: 1104042, message: r2 }, ii = { code: 1104043, message: "mini sdp error" }, ni = { code: 1104044, message: "stream is not playing" }, ei = { code: 1104045, message: "play streams is out limit" }, ri = { code: 1104046, message: "play streams auth fail" }, si = { code: 1104047, message: "remote sdp no candidate " }, oi = { code: 1006006, message: "the device is unplugged" }, ui = { code: 1106007, message: "the microphone may be loose, and audio data collection is abnormal." }, ai = { code: 1106008, message: "the camera may be loose, and video data collection is abnormal." }, ci = { code: 1106009, message: "mic track ended." }, hi = { code: 1106010, message: "camera track ended." }, fi = { code: 1000067, message: "Logged in room, setting scenario is not supported" }, li = { code: 1103083, message: "sdp wrong format" }, di = { code: 1103084, message: "mini sdp buffer size exceeded" }, vi = { code: 1103085, message: "url size exceeded" }, mi = { code: 1103086, message: "this publish stream id is not created by CreateZegoStream" }, pi = { code: 1103087, message: "the zego stream does not capture audio" }, gi = { code: 1103088, message: "the zego stream does not capture video" }, bi = { code: 1103052, message: "publisher cdn push error" }, _i = { code: 1103057, message: "decode audio data fail" }, yi = { code: 1103074, message: "video track is not readable" }, wi = { code: 1103047, message: "track is not found" }, Si = { code: 1103048, message: e2.pt }, Ei = { code: 1103029, message: "constraint error" }, ki = { code: 1103045, message: "video is false" }, Oi = { code: 1103046, message: "audio is false" }, Ii = { code: 1103101, message: "only stream which have one track and kind no exist can add track" }, Ri = { code: 1103069, message: "publisher state wrong" }, Ti = { code: 1103070, message: "not support handle track" }, Ci = { code: 1103071, message: "video effect processor is running" }, Ai = { code: 1103071, message: "background processor is running" }, zi = { code: 1103079, message: "replace track fail" }, Di = { code: 1103072, message: "not support beauty effect" }, Ni = { code: 1103075, message: "beauty effect overload" }, Pi = { code: 1103076, message: "audio track is not readable" }, Mi = { code: 1103100, message: "background process is start, but not subscribe yet" }, xi = { code: 1017130, message: "get mini sdp error" }, ji = { code: 1017131, message: "parse mini sdp error" }, qi = { code: 1017132, message: "worker is invalid" }, Li = { code: 1017133, message: "mini trans timeout" };
        }, 8754: function() {
          var t2 = function() {
            "use strict";
            function i2(t3, i3) {
              postMessage({ action: Bt, cbn: i3, result: t3 });
            }
            function n2(t3) {
              var i3 = [];
              return i3[t3 - 1] = void 0, i3;
            }
            function e2(t3, i3) {
              return o2(t3[0] + i3[0], t3[1] + i3[1]);
            }
            function r2(t3, i3) {
              return function(t4, i4) {
                var n3, e3;
                return n3 = t4 * Gt, e3 = i4, 0 > i4 && (e3 += Gt), [e3, n3];
              }(Math.max(Math.min(t3[1] / Gt, 2147483647), -2147483648) & Math.max(Math.min(i3[1] / Gt, 2147483647), -2147483648), c(t3) & c(i3));
            }
            function s2(t3, i3) {
              var n3, e3;
              return t3[0] == i3[0] && t3[1] == i3[1] ? 0 : (e3 = 0 > i3[1], (n3 = 0 > t3[1]) && !e3 ? -1 : !n3 && e3 ? 1 : d(t3, i3)[1] < 0 ? -1 : 1);
            }
            function o2(t3, i3) {
              var n3, e3;
              for (t3 %= 18446744073709552e3, i3 = (i3 %= 18446744073709552e3) - (n3 = i3 % Gt) + (e3 = Math.floor(t3 / Gt) * Gt), t3 = t3 - e3 + n3; 0 > t3; )
                t3 += Gt, i3 -= Gt;
              for (; t3 > 4294967295; )
                t3 -= Gt, i3 += Gt;
              for (i3 %= 18446744073709552e3; i3 > 9223372032559809e3; )
                i3 -= 18446744073709552e3;
              for (; -9223372036854776e3 > i3; )
                i3 += 18446744073709552e3;
              return [t3, i3];
            }
            function u2(t3, i3) {
              return t3[0] == i3[0] && t3[1] == i3[1];
            }
            function a(t3) {
              return t3 >= 0 ? [t3, 0] : [t3 + Gt, -Gt];
            }
            function c(t3) {
              return t3[0] >= 2147483648 ? ~~Math.max(Math.min(t3[0] - Gt, 2147483647), -2147483648) : ~~Math.max(Math.min(t3[0], 2147483647), -2147483648);
            }
            function h(t3) {
              return 30 >= t3 ? 1 << t3 : h(30) * h(t3 - 30);
            }
            function f(t3, i3) {
              var n3, e3, r3, s3;
              if (i3 &= 63, u2(t3, Ft))
                return i3 ? Ht : t3;
              if (0 > t3[1])
                throw Error("Neg");
              return s3 = h(i3), e3 = t3[1] * s3 % 18446744073709552e3, (e3 += n3 = (r3 = t3[0] * s3) - r3 % Gt) >= 9223372036854776e3 && (e3 -= 18446744073709552e3), [r3 -= n3, e3];
            }
            function l(t3, i3) {
              var n3;
              return n3 = h(i3 &= 63), o2(Math.floor(t3[0] / n3), t3[1] / n3);
            }
            function d(t3, i3) {
              return o2(t3[0] - i3[0], t3[1] - i3[1]);
            }
            function v(t3, i3) {
              return t3.Mc = i3, t3.Lc = 0, t3.Yb = i3.length, t3;
            }
            function m(t3) {
              return t3.Lc >= t3.Yb ? -1 : 255 & t3.Mc[t3.Lc++];
            }
            function p(t3, i3, n3, e3) {
              return t3.Lc >= t3.Yb ? -1 : (e3 = Math.min(e3, t3.Yb - t3.Lc), w(t3.Mc, t3.Lc, i3, n3, e3), t3.Lc += e3, e3);
            }
            function g(t3) {
              return t3.Mc = n2(32), t3.Yb = 0, t3;
            }
            function b(t3) {
              var i3 = t3.Mc;
              return i3.length = t3.Yb, i3;
            }
            function _(t3, i3) {
              t3.Mc[t3.Yb++] = i3 << 24 >> 24;
            }
            function y(t3, i3, n3, e3) {
              w(i3, n3, t3.Mc, t3.Yb, e3), t3.Yb += e3;
            }
            function w(t3, i3, n3, e3, r3) {
              for (var s3 = 0; r3 > s3; ++s3)
                n3[e3 + s3] = t3[i3 + s3];
            }
            function S(i3, n3, e3, r3, o3) {
              var u3, a2;
              if (s2(r3, Jt) < 0)
                throw Error("invalid length " + r3);
              for (i3.Tb = r3, function(t3, i4) {
                (function(t4, i5) {
                  t4.ab = i5;
                  for (var n4 = 0; i5 > 1 << n4; ++n4)
                    ;
                  t4.$b = 2 * n4;
                })(i4, 1 << t3.s), i4.n = t3.f, function(t4, i5) {
                  var n4 = t4.X;
                  t4.X = i5, t4.b && n4 != t4.X && (t4.wb = -1, t4.b = null);
                }(i4, t3.m), i4.eb = 0, i4.fb = 3, i4.Y = 2, i4.y = 3;
              }(o3, u3 = K({})), u3.Gc = void 0 === t2.disableEndMark, function(t3, i4) {
                t3.fc[0] = 9 * (5 * t3.Y + t3.eb) + t3.fb << 24 >> 24;
                for (var n4 = 0; 4 > n4; ++n4)
                  t3.fc[1 + n4] = t3.ab >> 8 * n4 << 24 >> 24;
                y(i4, t3.fc, 0, 5);
              }(u3, e3), a2 = 0; 64 > a2; a2 += 8)
                _(e3, 255 & c(l(r3, a2)));
              i3.yb = (u3.W = 0, u3.oc = n3, u3.pc = 0, function(t3) {
                var i4, n4;
                t3.b || (i4 = {}, n4 = 4, t3.X || (n4 = 2), function(t4, i5) {
                  t4.qb = i5 > 2, t4.qb ? (t4.w = 0, t4.xb = 4, t4.R = 66560) : (t4.w = 2, t4.xb = 3, t4.R = 0);
                }(i4, n4), t3.b = i4), lt(t3.A, t3.eb, t3.fb), (t3.ab != t3.wb || t3.Hb != t3.n) && (z(t3.b, t3.ab, 4096, t3.n, 274), t3.wb = t3.ab, t3.Hb = t3.n);
              }(u3), u3.d.Ab = e3, function(t3) {
                (function(t4) {
                  t4.l = 0, t4.J = 0;
                  for (var i5 = 0; 4 > i5; ++i5)
                    t4.v[i5] = 0;
                })(t3), function(t4) {
                  t4.mc = Ht, t4.xc = Ht, t4.E = -1, t4.Jb = 1, t4.Oc = 0;
                }(t3.d), Ct(t3.C), Ct(t3._), Ct(t3.bb), Ct(t3.hb), Ct(t3.Ub), Ct(t3.vc), Ct(t3.Sb), function(t4) {
                  var i5, n4 = 1 << t4.u + t4.I;
                  for (i5 = 0; n4 > i5; ++i5)
                    Ct(t4.V[i5].tb);
                }(t3.A);
                for (var i4 = 0; 4 > i4; ++i4)
                  Ct(t3.K[i4].G);
                ot(t3.$, 1 << t3.Y), ot(t3.i, 1 << t3.Y), Ct(t3.S.G), t3.N = 0, t3.jb = 0, t3.q = 0, t3.s = 0;
              }(u3), X(u3), Z(u3), u3.$.rb = u3.n + 1 - 2, ft(u3.$, 1 << u3.Y), u3.i.rb = u3.n + 1 - 2, ft(u3.i, 1 << u3.Y), u3.g = Ht, function(t3, i4) {
                return t3.cb = i4, t3.Z = null, t3.zc = 1, t3;
              }({}, u3));
            }
            function E(t3, i3, n3) {
              return t3.Nb = g({}), S(t3, v({}, i3), t3.Nb, a(i3.length), n3), t3;
            }
            function k(t3, i3, n3) {
              var e3, r3, s3, o3, u3 = "", c2 = [];
              for (r3 = 0; 5 > r3; ++r3) {
                if (-1 == (s3 = m(i3)))
                  throw Error("truncated input");
                c2[r3] = s3 << 24 >> 24;
              }
              if (!function(t4, i4) {
                var n4, e4, r4, s4, o4, u4, a2;
                if (5 > i4.length)
                  return 0;
                for (r4 = (a2 = 255 & i4[0]) % 9, s4 = (u4 = ~~(a2 / 9)) % 5, o4 = ~~(u4 / 5), n4 = 0, e4 = 0; 4 > e4; ++e4)
                  n4 += (255 & i4[1 + e4]) << 8 * e4;
                return n4 > 99999999 || !function(t5, i5, n5, e5) {
                  if (i5 > 8 || n5 > 4 || e5 > 4)
                    return 0;
                  V(t5.gb, n5, i5);
                  var r5 = 1 << e5;
                  return G(t5.Rb, r5), G(t5.sb, r5), t5.Dc = r5 - 1, 1;
                }(t4, r4, s4, o4) ? 0 : function(t5, i5) {
                  return 0 > i5 ? 0 : (t5.Ob != i5 && (t5.Ob = i5, t5.nb = Math.max(t5.Ob, 1), P(t5.B, Math.max(t5.nb, 4096))), 1);
                }(t4, n4);
              }(e3 = U({}), c2))
                throw Error("corrupted input");
              for (r3 = 0; 64 > r3; r3 += 8) {
                if (-1 == (s3 = m(i3)))
                  throw Error("truncated input");
                1 == (s3 = s3.toString(16)).length && (s3 = "0" + s3), u3 = s3 + "" + u3;
              }
              /^0+$|^f+$/i.test(u3) ? t3.Tb = Jt : (o3 = parseInt(u3, 16), t3.Tb = o3 > 4294967295 ? Jt : a(o3)), t3.yb = function(t4, i4, n4, e4) {
                return t4.e.Ab = i4, j(t4.B), t4.B.cc = n4, function(t5) {
                  t5.B.h = 0, t5.B.o = 0, Ct(t5.Gb), Ct(t5.pb), Ct(t5.Zb), Ct(t5.Cb), Ct(t5.Db), Ct(t5.Eb), Ct(t5.kc), function(t6) {
                    var i6, n5;
                    for (n5 = 1 << t6.u + t6.I, i6 = 0; n5 > i6; ++i6)
                      Ct(t6.V[i6].Ib);
                  }(t5.gb);
                  for (var i5 = 0; 4 > i5; ++i5)
                    Ct(t5.kb[i5].G);
                  H(t5.Rb), H(t5.sb), Ct(t5.Fb.G), function(t6) {
                    t6.Bb = 0, t6.E = -1;
                    for (var i6 = 0; 5 > i6; ++i6)
                      t6.Bb = t6.Bb << 8 | m(t6.Ab);
                  }(t5.e);
                }(t4), t4.U = 0, t4.ib = 0, t4.Jc = 0, t4.Ic = 0, t4.Qc = 0, t4.Nc = e4, t4.g = Ht, t4.jc = 0, function(t5, i5) {
                  return t5.Z = i5, t5.cb = null, t5.zc = 1, t5;
                }({}, t4);
              }(e3, i3, n3, t3.Tb);
            }
            function O(t3, i3) {
              return t3.Nb = g({}), k(t3, v({}, i3), t3.Nb), t3;
            }
            function I(t3, i3) {
              return t3.c[t3.f + t3.o + i3];
            }
            function R(t3, i3, n3, e3) {
              var r3, s3;
              for (t3.T && t3.o + i3 + e3 > t3.h && (e3 = t3.h - (t3.o + i3)), ++n3, s3 = t3.f + t3.o + i3, r3 = 0; e3 > r3 && t3.c[s3 + r3] == t3.c[s3 + r3 - n3]; ++r3)
                ;
              return r3;
            }
            function T(t3) {
              return t3.h - t3.o;
            }
            function C(t3) {
              var i3, n3;
              if (!t3.T)
                for (; ; ) {
                  if (!(n3 = -t3.f + t3.Kb - t3.h))
                    return;
                  if (-1 == (i3 = p(t3.cc, t3.c, t3.f + t3.h, n3)))
                    return t3.zb = t3.h, t3.f + t3.zb > t3.H && (t3.zb = t3.H - t3.f), void (t3.T = 1);
                  t3.h += i3, t3.h >= t3.o + t3._b && (t3.zb = t3.h - t3._b);
                }
            }
            function A(t3, i3) {
              t3.f += i3, t3.zb -= i3, t3.o -= i3, t3.h -= i3;
            }
            function z(t3, i3, e3, r3, s3) {
              var o3, u3;
              1073741567 > i3 && (t3.Fc = 16 + (r3 >> 1), function(t4, i4, e4, r4) {
                var s4;
                t4.Bc = i4, t4._b = e4, s4 = i4 + e4 + r4, (null == t4.c || t4.Kb != s4) && (t4.c = null, t4.Kb = s4, t4.c = n2(t4.Kb)), t4.H = t4.Kb - e4;
              }(t3, i3 + e3, r3 + s3, 256 + ~~((i3 + e3 + r3 + s3) / 2)), t3.ob = r3, t3.p != (o3 = i3 + 1) && (t3.L = n2(2 * (t3.p = o3))), u3 = 65536, t3.qb && (u3 = i3 - 1, u3 |= u3 >> 1, u3 |= u3 >> 2, u3 |= u3 >> 4, u3 |= u3 >> 8, u3 >>= 1, (u3 |= 65535) > 16777216 && (u3 >>= 1), t3.Ec = u3, ++u3, u3 += t3.R), u3 != t3.rc && (t3.ub = n2(t3.rc = u3)));
            }
            function D(t3) {
              var i3;
              ++t3.k >= t3.p && (t3.k = 0), function(t4) {
                ++t4.o, t4.o > t4.zb && (t4.f + t4.o > t4.H && function(t5) {
                  var i4, n3, e3;
                  for ((e3 = t5.f + t5.o - t5.Bc) > 0 && --e3, n3 = t5.f + t5.h - e3, i4 = 0; n3 > i4; ++i4)
                    t5.c[i4] = t5.c[e3 + i4];
                  t5.f -= e3;
                }(t4), C(t4));
              }(t3), 1073741823 == t3.o && (N(t3.L, 2 * t3.p, i3 = t3.o - t3.p), N(t3.ub, t3.rc, i3), A(t3, i3));
            }
            function N(t3, i3, n3) {
              var e3, r3;
              for (e3 = 0; i3 > e3; ++e3)
                n3 >= (r3 = t3[e3] || 0) ? r3 = 0 : r3 -= n3, t3[e3] = r3;
            }
            function P(t3, i3) {
              (null == t3.Lb || t3.M != i3) && (t3.Lb = n2(i3)), t3.M = i3, t3.o = 0, t3.h = 0;
            }
            function M(t3) {
              var i3 = t3.o - t3.h;
              i3 && (y(t3.cc, t3.Lb, t3.h, i3), t3.o >= t3.M && (t3.o = 0), t3.h = t3.o);
            }
            function x(t3, i3) {
              var n3 = t3.o - i3 - 1;
              return 0 > n3 && (n3 += t3.M), t3.Lb[n3];
            }
            function j(t3) {
              M(t3), t3.cc = null;
            }
            function q(t3) {
              return 4 > (t3 -= 2) ? t3 : 3;
            }
            function L(t3) {
              return 4 > t3 ? 0 : 10 > t3 ? t3 - 3 : t3 - 6;
            }
            function B(t3) {
              if (!t3.zc)
                throw Error("bad state");
              return t3.cb ? function(t4) {
                (function(t5, i3, n3, r3) {
                  var o3, h2, f2, l2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2;
                  if (i3[0] = Ht, n3[0] = Ht, r3[0] = 1, t5.oc && (t5.b.cc = t5.oc, function(t6) {
                    t6.f = 0, t6.o = 0, t6.h = 0, t6.T = 0, C(t6), t6.k = 0, A(t6, -1);
                  }(t5.b), t5.W = 1, t5.oc = null), !t5.pc) {
                    if (t5.pc = 1, E2 = t5.g, u2(t5.g, Ht)) {
                      if (!T(t5.b))
                        return void W(t5, c(t5.g));
                      et(t5), S2 = c(t5.g) & t5.y, At(t5.d, t5.C, (t5.l << 4) + S2, 0), t5.l = L(t5.l), f2 = I(t5.b, -t5.s), vt(dt(t5.A, c(t5.g), t5.J), t5.d, f2), t5.J = f2, --t5.s, t5.g = e2(t5.g, Vt);
                    }
                    if (!T(t5.b))
                      return void W(t5, c(t5.g));
                    for (; ; ) {
                      if (p2 = $(t5, c(t5.g)), _2 = t5.mb, S2 = c(t5.g) & t5.y, h2 = (t5.l << 4) + S2, 1 == p2 && -1 == _2)
                        At(t5.d, t5.C, h2, 0), f2 = I(t5.b, -t5.s), k2 = dt(t5.A, c(t5.g), t5.J), 7 > t5.l ? vt(k2, t5.d, f2) : (b2 = I(t5.b, -t5.v[0] - 1 - t5.s), mt(k2, t5.d, b2, f2)), t5.J = f2, t5.l = L(t5.l);
                      else {
                        if (At(t5.d, t5.C, h2, 1), 4 > _2) {
                          if (At(t5.d, t5.bb, t5.l, 1), _2 ? (At(t5.d, t5.hb, t5.l, 1), 1 == _2 ? At(t5.d, t5.Ub, t5.l, 0) : (At(t5.d, t5.Ub, t5.l, 1), At(t5.d, t5.vc, t5.l, _2 - 2))) : (At(t5.d, t5.hb, t5.l, 0), At(t5.d, t5._, h2, 1 == p2 ? 0 : 1)), 1 == p2 ? t5.l = 7 > t5.l ? 9 : 11 : (at(t5.i, t5.d, p2 - 2, S2), t5.l = 7 > t5.l ? 8 : 11), l2 = t5.v[_2], 0 != _2) {
                            for (m2 = _2; m2 >= 1; --m2)
                              t5.v[m2] = t5.v[m2 - 1];
                            t5.v[0] = l2;
                          }
                        } else {
                          for (At(t5.d, t5.bb, t5.l, 0), t5.l = 7 > t5.l ? 7 : 10, at(t5.$, t5.d, p2 - 2, S2), w2 = st(_2 -= 4), g2 = q(p2), St(t5.K[g2], t5.d, w2), w2 >= 4 && (y2 = _2 - (o3 = (2 | 1 & w2) << (v2 = (w2 >> 1) - 1)), 14 > w2 ? It(t5.Sb, o3 - w2 - 1, t5.d, v2, y2) : (zt(t5.d, y2 >> 4, v2 - 4), kt(t5.S, t5.d, 15 & y2), ++t5.Qb)), l2 = _2, m2 = 3; m2 >= 1; --m2)
                            t5.v[m2] = t5.v[m2 - 1];
                          t5.v[0] = l2, ++t5.Mb;
                        }
                        t5.J = I(t5.b, p2 - 1 - t5.s);
                      }
                      if (t5.s -= p2, t5.g = e2(t5.g, a(p2)), !t5.s) {
                        if (t5.Mb >= 128 && X(t5), t5.Qb >= 16 && Z(t5), i3[0] = t5.g, n3[0] = Dt(t5.d), !T(t5.b))
                          return void W(t5, c(t5.g));
                        if (s2(d(t5.g, E2), [4096, 0]) >= 0)
                          return t5.pc = 0, void (r3[0] = 0);
                      }
                    }
                  }
                })(t4.cb, t4.cb.Xb, t4.cb.uc, t4.cb.Kc), t4.Pb = t4.cb.Xb[0], t4.cb.Kc[0] && (function(t5) {
                  rt(t5), t5.d.Ab = null;
                }(t4.cb), t4.zc = 0);
              }(t3) : function(t4) {
                var i3 = function(t5) {
                  var i4, n3, r3, o3, u3, h2;
                  if (h2 = c(t5.g) & t5.Dc, Tt(t5.e, t5.Gb, (t5.U << 4) + h2)) {
                    if (Tt(t5.e, t5.Zb, t5.U))
                      r3 = 0, Tt(t5.e, t5.Cb, t5.U) ? (Tt(t5.e, t5.Db, t5.U) ? (Tt(t5.e, t5.Eb, t5.U) ? (n3 = t5.Qc, t5.Qc = t5.Ic) : n3 = t5.Ic, t5.Ic = t5.Jc) : n3 = t5.Jc, t5.Jc = t5.ib, t5.ib = n3) : Tt(t5.e, t5.pb, (t5.U << 4) + h2) || (t5.U = 7 > t5.U ? 9 : 11, r3 = 1), r3 || (r3 = J(t5.sb, t5.e, h2) + 2, t5.U = 7 > t5.U ? 8 : 11);
                    else if (t5.Qc = t5.Ic, t5.Ic = t5.Jc, t5.Jc = t5.ib, r3 = 2 + J(t5.Rb, t5.e, h2), t5.U = 7 > t5.U ? 7 : 10, (u3 = yt(t5.kb[q(r3)], t5.e)) >= 4) {
                      if (t5.ib = (2 | 1 & u3) << (o3 = (u3 >> 1) - 1), 14 > u3)
                        t5.ib += function(t6, i5, n4, e3) {
                          var r4, s3, o4 = 1, u4 = 0;
                          for (s3 = 0; e3 > s3; ++s3)
                            r4 = Tt(n4, t6, i5 + o4), o4 <<= 1, o4 += r4, u4 |= r4 << s3;
                          return u4;
                        }(t5.kc, t5.ib - u3 - 1, t5.e, o3);
                      else if (t5.ib += function(t6, i5) {
                        var n4, e3, r4 = 0;
                        for (n4 = i5; 0 != n4; --n4)
                          t6.E >>>= 1, t6.Bb -= t6.E & (e3 = t6.Bb - t6.E >>> 31) - 1, r4 = r4 << 1 | 1 - e3, -16777216 & t6.E || (t6.Bb = t6.Bb << 8 | m(t6.Ab), t6.E <<= 8);
                        return r4;
                      }(t5.e, o3 - 4) << 4, t5.ib += function(t6, i5) {
                        var n4, e3, r4 = 1, s3 = 0;
                        for (e3 = 0; t6.F > e3; ++e3)
                          n4 = Tt(i5, t6.G, r4), r4 <<= 1, r4 += n4, s3 |= n4 << e3;
                        return s3;
                      }(t5.Fb, t5.e), 0 > t5.ib)
                        return -1 == t5.ib ? 1 : -1;
                    } else
                      t5.ib = u3;
                    if (s2(a(t5.ib), t5.g) >= 0 || t5.ib >= t5.nb)
                      return -1;
                    (function(t6, i5, n4) {
                      var e3 = t6.o - i5 - 1;
                      for (0 > e3 && (e3 += t6.M); 0 != n4; --n4)
                        e3 >= t6.M && (e3 = 0), t6.Lb[t6.o++] = t6.Lb[e3++], t6.o >= t6.M && M(t6);
                    })(t5.B, t5.ib, r3), t5.g = e2(t5.g, a(r3)), t5.jc = x(t5.B, 0);
                  } else
                    i4 = function(t6, i5, n4) {
                      return t6.V[((i5 & t6.qc) << t6.u) + ((255 & n4) >>> 8 - t6.u)];
                    }(t5.gb, c(t5.g), t5.jc), t5.jc = 7 > t5.U ? function(t6, i5) {
                      var n4 = 1;
                      do {
                        n4 = n4 << 1 | Tt(i5, t6.Ib, n4);
                      } while (256 > n4);
                      return n4 << 24 >> 24;
                    }(i4, t5.e) : function(t6, i5, n4) {
                      var e3, r4, s3 = 1;
                      do {
                        if (r4 = n4 >> 7 & 1, n4 <<= 1, e3 = Tt(i5, t6.Ib, (1 + r4 << 8) + s3), s3 = s3 << 1 | e3, r4 != e3) {
                          for (; 256 > s3; )
                            s3 = s3 << 1 | Tt(i5, t6.Ib, s3);
                          break;
                        }
                      } while (256 > s3);
                      return s3 << 24 >> 24;
                    }(i4, t5.e, x(t5.B, t5.ib)), function(t6, i5) {
                      t6.Lb[t6.o++] = i5, t6.o >= t6.M && M(t6);
                    }(t5.B, t5.jc), t5.U = L(t5.U), t5.g = e2(t5.g, Vt);
                  return 0;
                }(t4.Z);
                if (-1 == i3)
                  throw Error("corrupted input");
                t4.Pb = Jt, t4.Pc = t4.Z.g, (i3 || s2(t4.Z.Nc, Ht) >= 0 && s2(t4.Z.g, t4.Z.Nc) >= 0) && (M(t4.Z.B), j(t4.Z.B), t4.Z.e.Ab = null, t4.zc = 0);
              }(t3), t3.zc;
            }
            function U(t3) {
              t3.B = {}, t3.e = {}, t3.Gb = n2(192), t3.Zb = n2(12), t3.Cb = n2(12), t3.Db = n2(12), t3.Eb = n2(12), t3.pb = n2(192), t3.kb = n2(4), t3.kc = n2(114), t3.Fb = _t({}, 4), t3.Rb = F({}), t3.sb = F({}), t3.gb = {};
              for (var i3 = 0; 4 > i3; ++i3)
                t3.kb[i3] = _t({}, 6);
              return t3;
            }
            function G(t3, i3) {
              for (; i3 > t3.O; ++t3.O)
                t3.ec[t3.O] = _t({}, 3), t3.hc[t3.O] = _t({}, 3);
            }
            function J(t3, i3, n3) {
              return Tt(i3, t3.wc, 0) ? 8 + (Tt(i3, t3.wc, 1) ? 8 + yt(t3.tc, i3) : yt(t3.hc[n3], i3)) : yt(t3.ec[n3], i3);
            }
            function F(t3) {
              return t3.wc = n2(2), t3.ec = n2(16), t3.hc = n2(16), t3.tc = _t({}, 8), t3.O = 0, t3;
            }
            function H(t3) {
              Ct(t3.wc);
              for (var i3 = 0; t3.O > i3; ++i3)
                Ct(t3.ec[i3].G), Ct(t3.hc[i3].G);
              Ct(t3.tc.G);
            }
            function V(t3, i3, e3) {
              var r3, s3;
              if (null == t3.V || t3.u != e3 || t3.I != i3)
                for (t3.I = i3, t3.qc = (1 << i3) - 1, t3.u = e3, t3.V = n2(s3 = 1 << t3.u + t3.I), r3 = 0; s3 > r3; ++r3)
                  t3.V[r3] = Q({});
            }
            function Q(t3) {
              return t3.Ib = n2(768), t3;
            }
            function Y(t3, i3) {
              var n3, e3, r3, s3;
              t3.jb = i3, r3 = t3.a[i3].r, e3 = t3.a[i3].j;
              do {
                t3.a[i3].t && (bt(t3.a[r3]), t3.a[r3].r = r3 - 1, t3.a[i3].Ac && (t3.a[r3 - 1].t = 0, t3.a[r3 - 1].r = t3.a[i3].r2, t3.a[r3 - 1].j = t3.a[i3].j2)), n3 = e3, e3 = t3.a[s3 = r3].j, r3 = t3.a[s3].r, t3.a[s3].j = n3, t3.a[s3].r = i3, i3 = s3;
              } while (i3 > 0);
              return t3.mb = t3.a[0].j, t3.q = t3.a[0].r;
            }
            function K(t3) {
              var i3;
              for (t3.v = n2(4), t3.a = [], t3.d = {}, t3.C = n2(192), t3.bb = n2(12), t3.hb = n2(12), t3.Ub = n2(12), t3.vc = n2(12), t3._ = n2(192), t3.K = [], t3.Sb = n2(114), t3.S = wt({}, 4), t3.$ = ct({}), t3.i = ct({}), t3.A = {}, t3.m = [], t3.P = [], t3.lb = [], t3.nc = n2(16), t3.x = n2(4), t3.Q = n2(4), t3.Xb = [Ht], t3.uc = [Ht], t3.Kc = [0], t3.fc = n2(5), t3.yc = n2(128), t3.vb = 0, t3.X = 1, t3.D = 0, t3.Hb = -1, t3.mb = 0, i3 = 0; 4096 > i3; ++i3)
                t3.a[i3] = {};
              for (i3 = 0; 4 > i3; ++i3)
                t3.K[i3] = wt({}, 6);
              return t3;
            }
            function Z(t3) {
              for (var i3 = 0; 16 > i3; ++i3)
                t3.nc[i3] = Ot(t3.S, i3);
              t3.Qb = 0;
            }
            function X(t3) {
              var i3, n3, e3, r3, s3, o3, u3, a2;
              for (r3 = 4; 128 > r3; ++r3)
                o3 = st(r3), t3.yc[r3] = Rt(t3.Sb, (i3 = (2 | 1 & o3) << (e3 = (o3 >> 1) - 1)) - o3 - 1, e3, r3 - i3);
              for (s3 = 0; 4 > s3; ++s3) {
                for (n3 = t3.K[s3], u3 = s3 << 6, o3 = 0; t3.$b > o3; ++o3)
                  t3.P[u3 + o3] = Et(n3, o3);
                for (o3 = 14; t3.$b > o3; ++o3)
                  t3.P[u3 + o3] += (o3 >> 1) - 1 - 4 << 6;
                for (a2 = 128 * s3, r3 = 0; 4 > r3; ++r3)
                  t3.lb[a2 + r3] = t3.P[u3 + r3];
                for (; 128 > r3; ++r3)
                  t3.lb[a2 + r3] = t3.P[u3 + st(r3)] + t3.yc[r3];
              }
              t3.Mb = 0;
            }
            function W(t3, i3) {
              rt(t3), function(t4, i4) {
                if (t4.Gc) {
                  At(t4.d, t4.C, (t4.l << 4) + i4, 1), At(t4.d, t4.bb, t4.l, 0), t4.l = 7 > t4.l ? 7 : 10, at(t4.$, t4.d, 0, i4);
                  var n4 = q(2);
                  St(t4.K[n4], t4.d, 63), zt(t4.d, 67108863, 26), kt(t4.S, t4.d, 15);
                }
              }(t3, i3 & t3.y);
              for (var n3 = 0; 5 > n3; ++n3)
                Nt(t3.d);
            }
            function $(t3, i3) {
              var n3, e3, r3, s3, o3, u3, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2, C2, A2, z2, D2, N2, P2, M2, x2, j2, q2, B2, U2, G2, J2, F2, H2, V2, Q2, K2, Z2;
              if (t3.jb != t3.q)
                return v2 = t3.a[t3.q].r - t3.q, t3.mb = t3.a[t3.q].j, t3.q = t3.a[t3.q].r, v2;
              if (t3.q = t3.jb = 0, t3.N ? (d2 = t3.vb, t3.N = 0) : d2 = et(t3), A2 = t3.D, 2 > (O2 = T(t3.b) + 1))
                return t3.mb = -1, 1;
              for (O2 > 273 && (O2 = 273), F2 = 0, h2 = 0; 4 > h2; ++h2)
                t3.x[h2] = t3.v[h2], t3.Q[h2] = R(t3.b, -1, t3.x[h2], 273), t3.Q[h2] > t3.Q[F2] && (F2 = h2);
              if (t3.Q[F2] >= t3.n)
                return t3.mb = F2, nt(t3, (v2 = t3.Q[F2]) - 1), v2;
              if (d2 >= t3.n)
                return t3.mb = t3.m[A2 - 1] + 4, nt(t3, d2 - 1), d2;
              if (a2 = I(t3.b, -1), b2 = I(t3.b, -t3.v[0] - 1 - 1), 2 > d2 && a2 != b2 && 2 > t3.Q[F2])
                return t3.mb = -1, 1;
              if (t3.a[0].Hc = t3.l, t3.a[1].z = Kt[t3.C[(t3.l << 4) + (j2 = i3 & t3.y)] >>> 2] + gt(dt(t3.A, i3, t3.J), t3.l >= 7, b2, a2), bt(t3.a[1]), J2 = (_2 = Kt[2048 - t3.C[(t3.l << 4) + j2] >>> 2]) + Kt[2048 - t3.bb[t3.l] >>> 2], b2 == a2 && (H2 = J2 + function(t4, i4, n4) {
                return Kt[t4.hb[i4] >>> 2] + Kt[t4._[(i4 << 4) + n4] >>> 2];
              }(t3, t3.l, j2), t3.a[1].z > H2 && (t3.a[1].z = H2, function(t4) {
                t4.j = 0, t4.t = 0;
              }(t3.a[1]))), 2 > (l2 = d2 >= t3.Q[F2] ? d2 : t3.Q[F2]))
                return t3.mb = t3.a[1].j, 1;
              t3.a[1].r = 0, t3.a[0].bc = t3.x[0], t3.a[0].ac = t3.x[1], t3.a[0].dc = t3.x[2], t3.a[0].lc = t3.x[3], f2 = l2;
              do {
                t3.a[f2--].z = 268435455;
              } while (f2 >= 2);
              for (h2 = 0; 4 > h2; ++h2)
                if (!(2 > (G2 = t3.Q[h2]))) {
                  B2 = J2 + it(t3, h2, t3.l, j2);
                  do {
                    s3 = B2 + ht(t3.i, G2 - 2, j2), (P2 = t3.a[G2]).z > s3 && (P2.z = s3, P2.r = 0, P2.j = h2, P2.t = 0);
                  } while (--G2 >= 2);
                }
              if (k2 = _2 + Kt[t3.bb[t3.l] >>> 2], d2 >= (f2 = t3.Q[0] >= 2 ? t3.Q[0] + 1 : 2)) {
                for (z2 = 0; f2 > t3.m[z2]; )
                  z2 += 2;
                for (; s3 = k2 + tt(t3, c2 = t3.m[z2 + 1], f2, j2), (P2 = t3.a[f2]).z > s3 && (P2.z = s3, P2.r = 0, P2.j = c2 + 4, P2.t = 0), f2 != t3.m[z2] || (z2 += 2) != A2; ++f2)
                  ;
              }
              for (n3 = 0; ; ) {
                if (++n3 == l2)
                  return Y(t3, n3);
                if (y2 = et(t3), A2 = t3.D, y2 >= t3.n)
                  return t3.vb = y2, t3.N = 1, Y(t3, n3);
                if (++i3, x2 = t3.a[n3].r, t3.a[n3].t ? (--x2, t3.a[n3].Ac ? (Q2 = t3.a[t3.a[n3].r2].Hc, Q2 = 4 > t3.a[n3].j2 ? 7 > Q2 ? 8 : 11 : 7 > Q2 ? 7 : 10) : Q2 = t3.a[x2].Hc, Q2 = L(Q2)) : Q2 = t3.a[x2].Hc, x2 == n3 - 1 ? Q2 = t3.a[n3].j ? L(Q2) : 7 > Q2 ? 9 : 11 : (t3.a[n3].t && t3.a[n3].Ac ? (x2 = t3.a[n3].r2, M2 = t3.a[n3].j2, Q2 = 7 > Q2 ? 8 : 11) : Q2 = 4 > (M2 = t3.a[n3].j) ? 7 > Q2 ? 8 : 11 : 7 > Q2 ? 7 : 10, N2 = t3.a[x2], 4 > M2 ? M2 ? 1 == M2 ? (t3.x[0] = N2.ac, t3.x[1] = N2.bc, t3.x[2] = N2.dc, t3.x[3] = N2.lc) : 2 == M2 ? (t3.x[0] = N2.dc, t3.x[1] = N2.bc, t3.x[2] = N2.ac, t3.x[3] = N2.lc) : (t3.x[0] = N2.lc, t3.x[1] = N2.bc, t3.x[2] = N2.ac, t3.x[3] = N2.dc) : (t3.x[0] = N2.bc, t3.x[1] = N2.ac, t3.x[2] = N2.dc, t3.x[3] = N2.lc) : (t3.x[0] = M2 - 4, t3.x[1] = N2.bc, t3.x[2] = N2.ac, t3.x[3] = N2.dc)), t3.a[n3].Hc = Q2, t3.a[n3].bc = t3.x[0], t3.a[n3].ac = t3.x[1], t3.a[n3].dc = t3.x[2], t3.a[n3].lc = t3.x[3], u3 = t3.a[n3].z, a2 = I(t3.b, -1), b2 = I(t3.b, -t3.x[0] - 1 - 1), e3 = u3 + Kt[t3.C[(Q2 << 4) + (j2 = i3 & t3.y)] >>> 2] + gt(dt(t3.A, i3, I(t3.b, -2)), Q2 >= 7, b2, a2), w2 = 0, (S2 = t3.a[n3 + 1]).z > e3 && (S2.z = e3, S2.r = n3, S2.j = -1, S2.t = 0, w2 = 1), J2 = (_2 = u3 + Kt[2048 - t3.C[(Q2 << 4) + j2] >>> 2]) + Kt[2048 - t3.bb[Q2] >>> 2], b2 != a2 || n3 > S2.r && !S2.j || S2.z >= (H2 = J2 + (Kt[t3.hb[Q2] >>> 2] + Kt[t3._[(Q2 << 4) + j2] >>> 2])) && (S2.z = H2, S2.r = n3, S2.j = 0, S2.t = 0, w2 = 1), !(2 > (O2 = C2 = (C2 = T(t3.b) + 1) > 4095 - n3 ? 4095 - n3 : C2))) {
                  if (O2 > t3.n && (O2 = t3.n), !w2 && b2 != a2 && (Z2 = Math.min(C2 - 1, t3.n), (p2 = R(t3.b, 0, t3.x[0], Z2)) >= 2)) {
                    for (K2 = L(Q2), E2 = e3 + Kt[2048 - t3.C[(K2 << 4) + (q2 = i3 + 1 & t3.y)] >>> 2] + Kt[2048 - t3.bb[K2] >>> 2], D2 = n3 + 1 + p2; D2 > l2; )
                      t3.a[++l2].z = 268435455;
                    s3 = E2 + (ht(t3.i, p2 - 2, q2) + it(t3, 0, K2, q2)), (P2 = t3.a[D2]).z > s3 && (P2.z = s3, P2.r = n3 + 1, P2.j = 0, P2.t = 1, P2.Ac = 0);
                  }
                  for (V2 = 2, U2 = 0; 4 > U2; ++U2)
                    if (!(2 > (m2 = R(t3.b, -1, t3.x[U2], O2)))) {
                      g2 = m2;
                      do {
                        for (; n3 + m2 > l2; )
                          t3.a[++l2].z = 268435455;
                        s3 = J2 + (ht(t3.i, m2 - 2, j2) + it(t3, U2, Q2, j2)), (P2 = t3.a[n3 + m2]).z > s3 && (P2.z = s3, P2.r = n3, P2.j = U2, P2.t = 0);
                      } while (--m2 >= 2);
                      if (m2 = g2, U2 || (V2 = m2 + 1), C2 > m2 && (Z2 = Math.min(C2 - 1 - m2, t3.n), (p2 = R(t3.b, m2, t3.x[U2], Z2)) >= 2)) {
                        for (K2 = 7 > Q2 ? 8 : 11, q2 = i3 + m2 & t3.y, r3 = J2 + (ht(t3.i, m2 - 2, j2) + it(t3, U2, Q2, j2)) + Kt[t3.C[(K2 << 4) + q2] >>> 2] + gt(dt(t3.A, i3 + m2, I(t3.b, m2 - 1 - 1)), 1, I(t3.b, m2 - 1 - (t3.x[U2] + 1)), I(t3.b, m2 - 1)), K2 = L(K2), E2 = r3 + Kt[2048 - t3.C[(K2 << 4) + (q2 = i3 + m2 + 1 & t3.y)] >>> 2] + Kt[2048 - t3.bb[K2] >>> 2], D2 = m2 + 1 + p2; n3 + D2 > l2; )
                          t3.a[++l2].z = 268435455;
                        s3 = E2 + (ht(t3.i, p2 - 2, q2) + it(t3, 0, K2, q2)), (P2 = t3.a[n3 + D2]).z > s3 && (P2.z = s3, P2.r = n3 + m2 + 1, P2.j = 0, P2.t = 1, P2.Ac = 1, P2.r2 = n3, P2.j2 = U2);
                      }
                    }
                  if (y2 > O2) {
                    for (y2 = O2, A2 = 0; y2 > t3.m[A2]; A2 += 2)
                      ;
                    t3.m[A2] = y2, A2 += 2;
                  }
                  if (y2 >= V2) {
                    for (k2 = _2 + Kt[t3.bb[Q2] >>> 2]; n3 + y2 > l2; )
                      t3.a[++l2].z = 268435455;
                    for (z2 = 0; V2 > t3.m[z2]; )
                      z2 += 2;
                    for (m2 = V2; ; ++m2)
                      if (s3 = k2 + tt(t3, o3 = t3.m[z2 + 1], m2, j2), (P2 = t3.a[n3 + m2]).z > s3 && (P2.z = s3, P2.r = n3, P2.j = o3 + 4, P2.t = 0), m2 == t3.m[z2]) {
                        if (C2 > m2 && (Z2 = Math.min(C2 - 1 - m2, t3.n), (p2 = R(t3.b, m2, o3, Z2)) >= 2)) {
                          for (r3 = s3 + Kt[t3.C[((K2 = 7 > Q2 ? 7 : 10) << 4) + (q2 = i3 + m2 & t3.y)] >>> 2] + gt(dt(t3.A, i3 + m2, I(t3.b, m2 - 1 - 1)), 1, I(t3.b, m2 - (o3 + 1) - 1), I(t3.b, m2 - 1)), K2 = L(K2), E2 = r3 + Kt[2048 - t3.C[(K2 << 4) + (q2 = i3 + m2 + 1 & t3.y)] >>> 2] + Kt[2048 - t3.bb[K2] >>> 2], D2 = m2 + 1 + p2; n3 + D2 > l2; )
                            t3.a[++l2].z = 268435455;
                          s3 = E2 + (ht(t3.i, p2 - 2, q2) + it(t3, 0, K2, q2)), (P2 = t3.a[n3 + D2]).z > s3 && (P2.z = s3, P2.r = n3 + m2 + 1, P2.j = 0, P2.t = 1, P2.Ac = 1, P2.r2 = n3, P2.j2 = o3 + 4);
                        }
                        if ((z2 += 2) == A2)
                          break;
                      }
                  }
                }
              }
            }
            function tt(t3, i3, n3, e3) {
              var r3 = q(n3);
              return (128 > i3 ? t3.lb[128 * r3 + i3] : t3.P[(r3 << 6) + function(t4) {
                return 131072 > t4 ? Yt[t4 >> 6] + 12 : 134217728 > t4 ? Yt[t4 >> 16] + 32 : Yt[t4 >> 26] + 52;
              }(i3)] + t3.nc[15 & i3]) + ht(t3.$, n3 - 2, e3);
            }
            function it(t3, i3, n3, e3) {
              var r3;
              return i3 ? (r3 = Kt[2048 - t3.hb[n3] >>> 2], 1 == i3 ? r3 += Kt[t3.Ub[n3] >>> 2] : (r3 += Kt[2048 - t3.Ub[n3] >>> 2], r3 += Pt(t3.vc[n3], i3 - 2))) : (r3 = Kt[t3.hb[n3] >>> 2], r3 += Kt[2048 - t3._[(n3 << 4) + e3] >>> 2]), r3;
            }
            function nt(t3, i3) {
              i3 > 0 && (function(t4, i4) {
                var n3, e3, r3, s3, o3, u3, a2, c2, h2, f2, l2, d2, v2, m2, p2;
                do {
                  if (t4.h >= t4.o + t4.ob)
                    f2 = t4.ob;
                  else if (t4.xb > (f2 = t4.h - t4.o)) {
                    D(t4);
                    continue;
                  }
                  for (l2 = t4.o > t4.p ? t4.o - t4.p : 0, e3 = t4.f + t4.o, t4.qb ? (t4.ub[1023 & (p2 = Qt[255 & t4.c[e3]] ^ 255 & t4.c[e3 + 1])] = t4.o, t4.ub[1024 + (65535 & (p2 ^= (255 & t4.c[e3 + 2]) << 8))] = t4.o, u3 = (p2 ^ Qt[255 & t4.c[e3 + 3]] << 5) & t4.Ec) : u3 = 255 & t4.c[e3] ^ (255 & t4.c[e3 + 1]) << 8, r3 = t4.ub[t4.R + u3], t4.ub[t4.R + u3] = t4.o, v2 = 1 + (t4.k << 1), m2 = t4.k << 1, c2 = h2 = t4.w, n3 = t4.Fc; ; ) {
                    if (l2 >= r3 || 0 == n3--) {
                      t4.L[v2] = t4.L[m2] = 0;
                      break;
                    }
                    if (s3 = (t4.k >= (o3 = t4.o - r3) ? t4.k - o3 : t4.k - o3 + t4.p) << 1, t4.c[(d2 = t4.f + r3) + (a2 = h2 > c2 ? c2 : h2)] == t4.c[e3 + a2]) {
                      for (; ++a2 != f2 && t4.c[d2 + a2] == t4.c[e3 + a2]; )
                        ;
                      if (a2 == f2) {
                        t4.L[m2] = t4.L[s3], t4.L[v2] = t4.L[s3 + 1];
                        break;
                      }
                    }
                    (255 & t4.c[e3 + a2]) > (255 & t4.c[d2 + a2]) ? (t4.L[m2] = r3, r3 = t4.L[m2 = s3 + 1], h2 = a2) : (t4.L[v2] = r3, r3 = t4.L[v2 = s3], c2 = a2);
                  }
                  D(t4);
                } while (0 != --i4);
              }(t3.b, i3), t3.s += i3);
            }
            function et(t3) {
              var i3 = 0;
              return t3.D = function(t4, i4) {
                var n3, e3, r3, s3, o3, u3, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2;
                if (t4.h >= t4.o + t4.ob)
                  m2 = t4.ob;
                else if (t4.xb > (m2 = t4.h - t4.o))
                  return D(t4), 0;
                for (b2 = 0, p2 = t4.o > t4.p ? t4.o - t4.p : 0, e3 = t4.f + t4.o, g2 = 1, c2 = 0, h2 = 0, t4.qb ? (c2 = 1023 & (S2 = Qt[255 & t4.c[e3]] ^ 255 & t4.c[e3 + 1]), h2 = 65535 & (S2 ^= (255 & t4.c[e3 + 2]) << 8), f2 = (S2 ^ Qt[255 & t4.c[e3 + 3]] << 5) & t4.Ec) : f2 = 255 & t4.c[e3] ^ (255 & t4.c[e3 + 1]) << 8, r3 = t4.ub[t4.R + f2] || 0, t4.qb && (s3 = t4.ub[c2] || 0, o3 = t4.ub[1024 + h2] || 0, t4.ub[c2] = t4.o, t4.ub[1024 + h2] = t4.o, s3 > p2 && t4.c[t4.f + s3] == t4.c[e3] && (i4[b2++] = g2 = 2, i4[b2++] = t4.o - s3 - 1), o3 > p2 && t4.c[t4.f + o3] == t4.c[e3] && (o3 == s3 && (b2 -= 2), i4[b2++] = g2 = 3, i4[b2++] = t4.o - o3 - 1, s3 = o3), 0 != b2 && s3 == r3 && (b2 -= 2, g2 = 1)), t4.ub[t4.R + f2] = t4.o, y2 = 1 + (t4.k << 1), w2 = t4.k << 1, d2 = v2 = t4.w, 0 != t4.w && r3 > p2 && t4.c[t4.f + r3 + t4.w] != t4.c[e3 + t4.w] && (i4[b2++] = g2 = t4.w, i4[b2++] = t4.o - r3 - 1), n3 = t4.Fc; ; ) {
                  if (p2 >= r3 || 0 == n3--) {
                    t4.L[y2] = t4.L[w2] = 0;
                    break;
                  }
                  if (u3 = (t4.k >= (a2 = t4.o - r3) ? t4.k - a2 : t4.k - a2 + t4.p) << 1, t4.c[(_2 = t4.f + r3) + (l2 = v2 > d2 ? d2 : v2)] == t4.c[e3 + l2]) {
                    for (; ++l2 != m2 && t4.c[_2 + l2] == t4.c[e3 + l2]; )
                      ;
                    if (l2 > g2 && (i4[b2++] = g2 = l2, i4[b2++] = a2 - 1, l2 == m2)) {
                      t4.L[w2] = t4.L[u3], t4.L[y2] = t4.L[u3 + 1];
                      break;
                    }
                  }
                  (255 & t4.c[e3 + l2]) > (255 & t4.c[_2 + l2]) ? (t4.L[w2] = r3, r3 = t4.L[w2 = u3 + 1], v2 = l2) : (t4.L[y2] = r3, r3 = t4.L[y2 = u3], d2 = l2);
                }
                return D(t4), b2;
              }(t3.b, t3.m), t3.D > 0 && ((i3 = t3.m[t3.D - 2]) == t3.n && (i3 += R(t3.b, i3 - 1, t3.m[t3.D - 1], 273 - i3))), ++t3.s, i3;
            }
            function rt(t3) {
              t3.b && t3.W && (t3.b.cc = null, t3.W = 0);
            }
            function st(t3) {
              return 2048 > t3 ? Yt[t3] : 2097152 > t3 ? Yt[t3 >> 10] + 20 : Yt[t3 >> 20] + 40;
            }
            function ot(t3, i3) {
              Ct(t3.db);
              for (var n3 = 0; i3 > n3; ++n3)
                Ct(t3.Vb[n3].G), Ct(t3.Wb[n3].G);
              Ct(t3.ic.G);
            }
            function ut(t3, i3, n3, e3, r3) {
              var s3, o3, u3, a2, c2;
              for (s3 = Kt[t3.db[0] >>> 2], u3 = (o3 = Kt[2048 - t3.db[0] >>> 2]) + Kt[t3.db[1] >>> 2], a2 = o3 + Kt[2048 - t3.db[1] >>> 2], c2 = 0, c2 = 0; 8 > c2; ++c2) {
                if (c2 >= n3)
                  return;
                e3[r3 + c2] = s3 + Et(t3.Vb[i3], c2);
              }
              for (; 16 > c2; ++c2) {
                if (c2 >= n3)
                  return;
                e3[r3 + c2] = u3 + Et(t3.Wb[i3], c2 - 8);
              }
              for (; n3 > c2; ++c2)
                e3[r3 + c2] = a2 + Et(t3.ic, c2 - 8 - 8);
            }
            function at(t3, i3, n3, e3) {
              (function(t4, i4, n4, e4) {
                8 > n4 ? (At(i4, t4.db, 0, 0), St(t4.Vb[e4], i4, n4)) : (n4 -= 8, At(i4, t4.db, 0, 1), 8 > n4 ? (At(i4, t4.db, 1, 0), St(t4.Wb[e4], i4, n4)) : (At(i4, t4.db, 1, 1), St(t4.ic, i4, n4 - 8)));
              })(t3, i3, n3, e3), 0 == --t3.sc[e3] && (ut(t3, e3, t3.rb, t3.Cc, 272 * e3), t3.sc[e3] = t3.rb);
            }
            function ct(t3) {
              return function(t4) {
                t4.db = n2(2), t4.Vb = n2(16), t4.Wb = n2(16), t4.ic = wt({}, 8);
                for (var i3 = 0; 16 > i3; ++i3)
                  t4.Vb[i3] = wt({}, 3), t4.Wb[i3] = wt({}, 3);
              }(t3), t3.Cc = [], t3.sc = [], t3;
            }
            function ht(t3, i3, n3) {
              return t3.Cc[272 * n3 + i3];
            }
            function ft(t3, i3) {
              for (var n3 = 0; i3 > n3; ++n3)
                ut(t3, n3, t3.rb, t3.Cc, 272 * n3), t3.sc[n3] = t3.rb;
            }
            function lt(t3, i3, e3) {
              var r3, s3;
              if (null == t3.V || t3.u != e3 || t3.I != i3)
                for (t3.I = i3, t3.qc = (1 << i3) - 1, t3.u = e3, t3.V = n2(s3 = 1 << t3.u + t3.I), r3 = 0; s3 > r3; ++r3)
                  t3.V[r3] = pt({});
            }
            function dt(t3, i3, n3) {
              return t3.V[((i3 & t3.qc) << t3.u) + ((255 & n3) >>> 8 - t3.u)];
            }
            function vt(t3, i3, n3) {
              var e3, r3, s3 = 1;
              for (r3 = 7; r3 >= 0; --r3)
                At(i3, t3.tb, s3, e3 = n3 >> r3 & 1), s3 = s3 << 1 | e3;
            }
            function mt(t3, i3, n3, e3) {
              var r3, s3, o3, u3, a2 = 1, c2 = 1;
              for (s3 = 7; s3 >= 0; --s3)
                r3 = e3 >> s3 & 1, u3 = c2, a2 && (u3 += 1 + (o3 = n3 >> s3 & 1) << 8, a2 = o3 == r3), At(i3, t3.tb, u3, r3), c2 = c2 << 1 | r3;
            }
            function pt(t3) {
              return t3.tb = n2(768), t3;
            }
            function gt(t3, i3, n3, e3) {
              var r3, s3, o3 = 1, u3 = 7, a2 = 0;
              if (i3) {
                for (; u3 >= 0; --u3)
                  if (a2 += Pt(t3.tb[(1 + (s3 = n3 >> u3 & 1) << 8) + o3], r3 = e3 >> u3 & 1), o3 = o3 << 1 | r3, s3 != r3) {
                    --u3;
                    break;
                  }
              }
              for (; u3 >= 0; --u3)
                a2 += Pt(t3.tb[o3], r3 = e3 >> u3 & 1), o3 = o3 << 1 | r3;
              return a2;
            }
            function bt(t3) {
              t3.j = -1, t3.t = 0;
            }
            function _t(t3, i3) {
              return t3.F = i3, t3.G = n2(1 << i3), t3;
            }
            function yt(t3, i3) {
              var n3, e3 = 1;
              for (n3 = t3.F; 0 != n3; --n3)
                e3 = (e3 << 1) + Tt(i3, t3.G, e3);
              return e3 - (1 << t3.F);
            }
            function wt(t3, i3) {
              return t3.F = i3, t3.G = n2(1 << i3), t3;
            }
            function St(t3, i3, n3) {
              var e3, r3, s3 = 1;
              for (r3 = t3.F; 0 != r3; )
                --r3, At(i3, t3.G, s3, e3 = n3 >>> r3 & 1), s3 = s3 << 1 | e3;
            }
            function Et(t3, i3) {
              var n3, e3, r3 = 1, s3 = 0;
              for (e3 = t3.F; 0 != e3; )
                --e3, s3 += Pt(t3.G[r3], n3 = i3 >>> e3 & 1), r3 = (r3 << 1) + n3;
              return s3;
            }
            function kt(t3, i3, n3) {
              var e3, r3, s3 = 1;
              for (r3 = 0; t3.F > r3; ++r3)
                At(i3, t3.G, s3, e3 = 1 & n3), s3 = s3 << 1 | e3, n3 >>= 1;
            }
            function Ot(t3, i3) {
              var n3, e3, r3 = 1, s3 = 0;
              for (e3 = t3.F; 0 != e3; --e3)
                n3 = 1 & i3, i3 >>>= 1, s3 += Pt(t3.G[r3], n3), r3 = r3 << 1 | n3;
              return s3;
            }
            function It(t3, i3, n3, e3, r3) {
              var s3, o3, u3 = 1;
              for (o3 = 0; e3 > o3; ++o3)
                At(n3, t3, i3 + u3, s3 = 1 & r3), u3 = u3 << 1 | s3, r3 >>= 1;
            }
            function Rt(t3, i3, n3, e3) {
              var r3, s3, o3 = 1, u3 = 0;
              for (s3 = n3; 0 != s3; --s3)
                r3 = 1 & e3, e3 >>>= 1, u3 += Kt[(2047 & (t3[i3 + o3] - r3 ^ -r3)) >>> 2], o3 = o3 << 1 | r3;
              return u3;
            }
            function Tt(t3, i3, n3) {
              var e3, r3 = i3[n3];
              return (-2147483648 ^ (e3 = (t3.E >>> 11) * r3)) > (-2147483648 ^ t3.Bb) ? (t3.E = e3, i3[n3] = r3 + (2048 - r3 >>> 5) << 16 >> 16, -16777216 & t3.E || (t3.Bb = t3.Bb << 8 | m(t3.Ab), t3.E <<= 8), 0) : (t3.E -= e3, t3.Bb -= e3, i3[n3] = r3 - (r3 >>> 5) << 16 >> 16, -16777216 & t3.E || (t3.Bb = t3.Bb << 8 | m(t3.Ab), t3.E <<= 8), 1);
            }
            function Ct(t3) {
              for (var i3 = t3.length - 1; i3 >= 0; --i3)
                t3[i3] = 1024;
            }
            function At(t3, i3, n3, s3) {
              var o3, u3 = i3[n3];
              o3 = (t3.E >>> 11) * u3, s3 ? (t3.xc = e2(t3.xc, r2(a(o3), [4294967295, 0])), t3.E -= o3, i3[n3] = u3 - (u3 >>> 5) << 16 >> 16) : (t3.E = o3, i3[n3] = u3 + (2048 - u3 >>> 5) << 16 >> 16), -16777216 & t3.E || (t3.E <<= 8, Nt(t3));
            }
            function zt(t3, i3, n3) {
              for (var r3 = n3 - 1; r3 >= 0; --r3)
                t3.E >>>= 1, 1 == (i3 >>> r3 & 1) && (t3.xc = e2(t3.xc, a(t3.E))), -16777216 & t3.E || (t3.E <<= 8, Nt(t3));
            }
            function Dt(t3) {
              return e2(e2(a(t3.Jb), t3.mc), [4, 0]);
            }
            function Nt(t3) {
              var i3, n3 = c(function(t4, i4) {
                var n4;
                return n4 = l(t4, i4 &= 63), 0 > t4[1] && (n4 = e2(n4, f([2, 0], 63 - i4))), n4;
              }(t3.xc, 32));
              if (0 != n3 || s2(t3.xc, [4278190080, 0]) < 0) {
                t3.mc = e2(t3.mc, a(t3.Jb)), i3 = t3.Oc;
                do {
                  _(t3.Ab, i3 + n3), i3 = 255;
                } while (0 != --t3.Jb);
                t3.Oc = c(t3.xc) >>> 24;
              }
              ++t3.Jb, t3.xc = f(r2(t3.xc, [16777215, 0]), 8);
            }
            function Pt(t3, i3) {
              return Kt[(2047 & (t3 - i3 ^ -i3)) >>> 2];
            }
            function Mt(t3) {
              for (var i3, n3, e3, r3 = 0, s3 = 0, o3 = t3.length, u3 = [], a2 = []; o3 > r3; ++r3, ++s3) {
                if (128 & (i3 = 255 & t3[r3]))
                  if (192 == (224 & i3)) {
                    if (r3 + 1 >= o3)
                      return t3;
                    if (128 != (192 & (n3 = 255 & t3[++r3])))
                      return t3;
                    a2[s3] = (31 & i3) << 6 | 63 & n3;
                  } else {
                    if (224 != (240 & i3))
                      return t3;
                    if (r3 + 2 >= o3)
                      return t3;
                    if (128 != (192 & (n3 = 255 & t3[++r3])))
                      return t3;
                    if (128 != (192 & (e3 = 255 & t3[++r3])))
                      return t3;
                    a2[s3] = (15 & i3) << 12 | (63 & n3) << 6 | 63 & e3;
                  }
                else {
                  if (!i3)
                    return t3;
                  a2[s3] = i3;
                }
                16383 == s3 && (u3.push(String.fromCharCode.apply(String, a2)), s3 = -1);
              }
              return s3 > 0 && (a2.length = s3, u3.push(String.fromCharCode.apply(String, a2))), u3.join("");
            }
            function xt(t3) {
              var i3, n3, e3, r3 = [], s3 = 0, o3 = t3.length;
              if ("object" == typeof t3)
                return t3;
              for (function(t4, i4, n4, e4, r4) {
                var s4;
                for (s4 = i4; n4 > s4; ++s4)
                  e4[r4++] = t4.charCodeAt(s4);
              }(t3, 0, o3, r3, 0), e3 = 0; o3 > e3; ++e3)
                (i3 = r3[e3]) >= 1 && 127 >= i3 ? ++s3 : s3 += !i3 || i3 >= 128 && 2047 >= i3 ? 2 : 3;
              for (n3 = [], s3 = 0, e3 = 0; o3 > e3; ++e3)
                (i3 = r3[e3]) >= 1 && 127 >= i3 ? n3[s3++] = i3 << 24 >> 24 : !i3 || i3 >= 128 && 2047 >= i3 ? (n3[s3++] = (192 | i3 >> 6 & 31) << 24 >> 24, n3[s3++] = (128 | 63 & i3) << 24 >> 24) : (n3[s3++] = (224 | i3 >> 12 & 15) << 24 >> 24, n3[s3++] = (128 | i3 >> 6 & 63) << 24 >> 24, n3[s3++] = (128 | 63 & i3) << 24 >> 24);
              return n3;
            }
            function jt(t3) {
              return t3[1] + t3[0];
            }
            var qt = 1, Lt = 2, Bt = 3, Ut = "function" == typeof setImmediate ? setImmediate : setTimeout, Gt = 4294967296, Jt = [4294967295, -Gt], Ft = [0, -9223372036854776e3], Ht = [0, 0], Vt = [1, 0], Qt = function() {
              var t3, i3, n3, e3 = [];
              for (t3 = 0; 256 > t3; ++t3) {
                for (n3 = t3, i3 = 0; 8 > i3; ++i3)
                  1 & n3 ? n3 = n3 >>> 1 ^ -306674912 : n3 >>>= 1;
                e3[t3] = n3;
              }
              return e3;
            }(), Yt = function() {
              var t3, i3, n3, e3 = 2, r3 = [0, 1];
              for (n3 = 2; 22 > n3; ++n3)
                for (i3 = 1 << (n3 >> 1) - 1, t3 = 0; i3 > t3; ++t3, ++e3)
                  r3[e3] = n3 << 24 >> 24;
              return r3;
            }(), Kt = function() {
              var t3, i3, n3, e3 = [];
              for (i3 = 8; i3 >= 0; --i3)
                for (t3 = 1 << 9 - i3, n3 = 1 << 9 - i3 - 1; t3 > n3; ++n3)
                  e3[n3] = (i3 << 6) + (t3 - n3 << 6 >>> 9 - i3 - 1);
              return e3;
            }(), Zt = function() {
              var t3 = [{ s: 16, f: 64, m: 0 }, { s: 20, f: 64, m: 0 }, { s: 19, f: 64, m: 1 }, { s: 20, f: 64, m: 1 }, { s: 21, f: 128, m: 1 }, { s: 22, f: 128, m: 1 }, { s: 23, f: 128, m: 1 }, { s: 24, f: 255, m: 1 }, { s: 25, f: 255, m: 1 }];
              return function(i3) {
                return t3[i3 - 1] || t3[6];
              };
            }();
            return "undefined" == typeof onmessage || "undefined" != typeof window && void 0 !== window.document || (onmessage = function(i3) {
              i3 && i3.gc && (i3.gc.action == Lt ? t2.decompress(i3.gc.gc, i3.gc.cbn) : i3.gc.action == qt && t2.compress(i3.gc.gc, i3.gc.Rc, i3.gc.cbn));
            }), { compress: function(t3, n3, e3, r3) {
              var s3, o3, u3 = {}, a2 = void 0 === e3 && void 0 === r3;
              if ("function" != typeof e3 && (o3 = e3, e3 = r3 = 0), r3 = r3 || function(t4) {
                return void 0 !== o3 ? i2(t4, o3) : void 0;
              }, e3 = e3 || function(t4, i3) {
                return void 0 !== o3 ? postMessage({ action: qt, cbn: o3, result: t4, error: i3 }) : void 0;
              }, a2) {
                for (u3.c = E({}, xt(t3), Zt(n3)); B(u3.c.yb); )
                  ;
                return b(u3.c.Nb);
              }
              try {
                u3.c = E({}, xt(t3), Zt(n3)), r3(0);
              } catch (t4) {
                return e3(null, t4);
              }
              Ut(function t4() {
                try {
                  for (var i3, n4 = (/* @__PURE__ */ new Date()).getTime(); B(u3.c.yb); )
                    if (s3 = jt(u3.c.yb.Pb) / jt(u3.c.Tb), (/* @__PURE__ */ new Date()).getTime() - n4 > 200)
                      return r3(s3), Ut(t4, 0), 0;
                  r3(1), i3 = b(u3.c.Nb), Ut(e3.bind(null, i3), 0);
                } catch (t5) {
                  e3(null, t5);
                }
              }, 0);
            }, decompress: function(t3, n3, e3) {
              var r3, s3, o3, u3, a2 = {}, c2 = void 0 === n3 && void 0 === e3;
              if ("function" != typeof n3 && (s3 = n3, n3 = e3 = 0), e3 = e3 || function(t4) {
                return void 0 !== s3 ? i2(o3 ? t4 : -1, s3) : void 0;
              }, n3 = n3 || function(t4, i3) {
                return void 0 !== s3 ? postMessage({ action: Lt, cbn: s3, result: t4, error: i3 }) : void 0;
              }, c2) {
                for (a2.d = O({}, t3); B(a2.d.yb); )
                  ;
                return Mt(b(a2.d.Nb));
              }
              try {
                a2.d = O({}, t3), u3 = jt(a2.d.Tb), o3 = u3 > -1, e3(0);
              } catch (t4) {
                return n3(null, t4);
              }
              Ut(function t4() {
                try {
                  for (var i3, s4 = 0, c3 = (/* @__PURE__ */ new Date()).getTime(); B(a2.d.yb); )
                    if (++s4 % 1e3 == 0 && (/* @__PURE__ */ new Date()).getTime() - c3 > 200)
                      return o3 && (r3 = jt(a2.d.yb.Z.g) / u3, e3(r3)), Ut(t4, 0), 0;
                  e3(1), i3 = Mt(b(a2.d.Nb)), Ut(n3.bind(null, i3), 0);
                } catch (t5) {
                  n3(null, t5);
                }
              }, 0);
            } };
          }();
          this.G = t2;
        }, 8866: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { AA: function() {
            return p;
          }, EK: function() {
            return v;
          }, FP: function() {
            return f;
          }, M$: function() {
            return b;
          }, OY: function() {
            return d;
          }, P1: function() {
            return j;
          }, QS: function() {
            return M;
          }, Rl: function() {
            return A;
          }, UY: function() {
            return q;
          }, VJ: function() {
            return c;
          }, VU: function() {
            return D;
          }, Wk: function() {
            return C;
          }, aw: function() {
            return O;
          }, d1: function() {
            return m;
          }, dO: function() {
            return I;
          }, fT: function() {
            return E;
          }, fU: function() {
            return z;
          }, gU: function() {
            return w;
          }, h2: function() {
            return T;
          }, iq: function() {
            return P;
          }, jy: function() {
            return _;
          }, kP: function() {
            return y;
          }, l3: function() {
            return a;
          }, lA: function() {
            return N;
          }, pl: function() {
            return g;
          }, pt: function() {
            return k;
          }, qC: function() {
            return R;
          }, rA: function() {
            return l;
          }, sb: function() {
            return h;
          }, sg: function() {
            return B;
          }, v5: function() {
            return x;
          }, yo: function() {
            return L;
          }, zQ: function() {
            return S;
          } });
          var e2 = n2(7202), r2 = n2(8627), s2 = n2(4872), o2 = n2(4908), u2 = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, a = Promise, c = document;
          function h(t3, i3, n3) {
            void 0 === n3 && (n3 = true);
            var e3 = c.createElement("video");
            return t3 && (e3.style.width = t3 + "px;"), i3 && (e3.style.height = i3 + "px;"), e3.setAttribute("muted", ""), e3.muted = true, n3 && (e3.setAttribute("autoplay", ""), e3.autoplay = true), e3.setAttribute("playsinline", ""), e3.setAttribute("webkit-playsinline", ""), e3;
          }
          function f(t3, i3) {
            var n3 = c.createElement("canvas");
            return n3.width = t3, n3.height = i3, n3;
          }
          function l(t3, i3, n3) {
            void 0 === n3 && (n3 = ""), t3.info("".concat(i3, " call ").concat(n3));
          }
          function d(t3, i3, n3) {
            void 0 === n3 && (n3 = ""), t3.info("".concat(i3, " end ").concat(n3));
          }
          function v(t3, i3, n3) {
            void 0 === n3 && (n3 = ""), t3.info("".concat(i3, " success ").concat(n3));
          }
          function m(t3, i3) {
            var n3 = function(t4) {
              var i4 = t4.reduce(function(i5, n4, e3) {
                var r3 = "".concat(n4, " module");
                return 0 == e3 ? r3 : e3 == t4.length - 1 ? "".concat(i5, " and ").concat(r3) : "".concat(i5, ", ").concat(r3);
              }, "");
              return "should install ".concat(i4);
            }(t3);
            return console.error(n3), { errorCode: i3 || r2.UZK.code, extendedData: n3 };
          }
          function p(t3, i3) {
            return new a(function(n3, e3) {
              e3(m(t3, i3));
            });
          }
          function g(t3) {
            return e2.A.isLong(t3) ? t3.toNumber() : 0;
          }
          function b(t3, i3) {
            for (var n3 in void 0 === i3 && (i3 = ""), t3) {
              if (e2.A.isLong(t3[n3]) || (0, s2.JO)(t3[n3] || (0, s2.G0)(t3[n3])))
                return;
              Array.isArray(t3[n3]) ? t3[n3].forEach(function(t4, i4) {
                b(t4, i4 + "");
              }) : (0, s2.w)(t3[n3]) ? b(t3[n3], n3) : t3.hasOwnProperty(n3) || ((0, s2.Cs)(t3[n3]) && (t3[n3] = 0), (0, s2.QP)(t3[n3]) && (t3[n3] = ""));
            }
          }
          function _(t3) {
            return /^([0-9a-zA-Z#!$%&()`'+-;<=.>@^_~,\\*])+$/.test(t3) && /^[^:/]*$/g.test(t3);
          }
          function y(t3) {
            return /^([0-9a-zA-Z-_])+$/.test(t3);
          }
          function w(t3) {
            return !!(t3.startsWith("rtmp://") || t3.startsWith("avertp://") || t3.startsWith("https://") && t3.endsWith(".flv") || t3.startsWith("https://") && t3.endsWith(".m3u8"));
          }
          function S(t3, i3) {
            return 0 == i3 ? (0, s2.Cs)(t3) && t3 % 1 == 0 && t3 >= 0 : (0, s2.Cs)(t3) && t3 % 1 == 0 && t3 > 0;
          }
          var E = "room not exist", k = "device is not found", O = "stream is not from zego", I = "input param error", R = "local stream wrong", T = "no preview", C = "publish stream no found", A = "network is broken";
          function z(t3, i3, n3, e3, r3, s3, o3) {
            return void 0 === o3 && (o3 = false), t3.createSpan(i3, { key: r3, bak_key: s3, par: n3 }, { key: e3, par: n3 }, e3, o3);
          }
          function D(t3, i3, n3) {
            for (var e3 in n3)
              o2.tH.includes(e3) && t3 >= 1 && i3.setAttribute(e3, n3[e3]);
          }
          function N(t3, i3, n3) {
            i3 && t3.setAttributes(i3), t3.end(n3);
          }
          function P(t3) {
            return JSON.stringify(t3);
          }
          function M(t3) {
            return JSON.parse(t3);
          }
          function x(t3, i3) {
            for (var n3 = [], e3 = 2; e3 < arguments.length; e3++)
              n3[e3 - 2] = arguments[e3];
            return setTimeout.apply(void 0, u2([t3, i3], n3, false));
          }
          function j(t3) {
            return clearTimeout(t3);
          }
          var q = function() {
            return new Promise(function(t3, i3) {
              t3(Math.random());
            });
          };
          function L(t3, i3) {
            return void 0 === t3 && (t3 = 0), i3 || (i3 = "_zegom{codecid}"), 0 === t3 ? "_zego264" : i3.replace("{codecid}", t3 + "");
          }
          function B(t3, i3) {
            var n3;
            return void 0 === i3 && (i3 = 100), function() {
              for (var e3 = [], r3 = 0; r3 < arguments.length; r3++)
                e3[r3] = arguments[r3];
              var s3 = this;
              clearTimeout(n3), n3 = window.setTimeout(function() {
                t3.apply(s3, e3);
              }, i3);
            };
          }
        }, 8899: function(t2, i2, n2) {
          "use strict";
          var e2, r2, s2, o2;
          n2.d(i2, { UF: function() {
            return s2;
          }, eI: function() {
            return e2;
          }, ju: function() {
            return o2;
          }, kf: function() {
            return r2;
          } }), function(t3) {
            t3[t3.Off = 0] = "Off", t3[t3.TurningOn = 1] = "TurningOn", t3[t3.On = 2] = "On";
          }(e2 || (e2 = {})), function(t3) {
            t3[t3.World = 0] = "World", t3[t3.Team = 1] = "Team", t3[t3.SecretTeam = 2] = "SecretTeam";
          }(r2 || (r2 = {})), function(t3) {
            t3[t3.All = 0] = "All", t3[t3.World = 1] = "World", t3[t3.Team = 2] = "Team";
          }(s2 || (s2 = {})), function(t3) {
            t3[t3.All = 0] = "All", t3[t3.World = 1] = "World", t3[t3.Team = 2] = "Team";
          }(o2 || (o2 = {}));
        }, 9021: function(t2, i2, n2) {
          var e2;
          t2.exports = (e2 = e2 || function(t3, i3) {
            var e3;
            if ("undefined" != typeof window && window.crypto && (e3 = window.crypto), "undefined" != typeof self && self.crypto && (e3 = self.crypto), "undefined" != typeof globalThis && globalThis.crypto && (e3 = globalThis.crypto), !e3 && "undefined" != typeof window && window.msCrypto && (e3 = window.msCrypto), !e3 && void 0 !== n2.g && n2.g.crypto && (e3 = n2.g.crypto), !e3)
              try {
                e3 = n2(477);
              } catch (t4) {
              }
            var r2 = function() {
              if (e3) {
                if ("function" == typeof e3.getRandomValues)
                  try {
                    return e3.getRandomValues(new Uint32Array(1))[0];
                  } catch (t4) {
                  }
                if ("function" == typeof e3.randomBytes)
                  try {
                    return e3.randomBytes(4).readInt32LE();
                  } catch (t4) {
                  }
              }
              throw new Error("Native crypto module could not be used to get secure random number.");
            }, s2 = Object.create || function() {
              function t4() {
              }
              return function(i4) {
                var n3;
                return t4.prototype = i4, n3 = new t4(), t4.prototype = null, n3;
              };
            }(), o2 = {}, u2 = o2.lib = {}, a = u2.Base = { extend: function(t4) {
              var i4 = s2(this);
              return t4 && i4.mixIn(t4), i4.hasOwnProperty("init") && this.init !== i4.init || (i4.init = function() {
                i4.$super.init.apply(this, arguments);
              }), i4.init.prototype = i4, i4.$super = this, i4;
            }, create: function() {
              var t4 = this.extend();
              return t4.init.apply(t4, arguments), t4;
            }, init: function() {
            }, mixIn: function(t4) {
              for (var i4 in t4)
                t4.hasOwnProperty(i4) && (this[i4] = t4[i4]);
              t4.hasOwnProperty("toString") && (this.toString = t4.toString);
            }, clone: function() {
              return this.init.prototype.extend(this);
            } }, c = u2.WordArray = a.extend({ init: function(t4, n3) {
              t4 = this.words = t4 || [], this.sigBytes = n3 != i3 ? n3 : 4 * t4.length;
            }, toString: function(t4) {
              return (t4 || f).stringify(this);
            }, concat: function(t4) {
              var i4 = this.words, n3 = t4.words, e4 = this.sigBytes, r3 = t4.sigBytes;
              if (this.clamp(), e4 % 4)
                for (var s3 = 0; s3 < r3; s3++)
                  i4[e4 + s3 >>> 2] |= (n3[s3 >>> 2] >>> 24 - s3 % 4 * 8 & 255) << 24 - (e4 + s3) % 4 * 8;
              else
                for (var o3 = 0; o3 < r3; o3 += 4)
                  i4[e4 + o3 >>> 2] = n3[o3 >>> 2];
              return this.sigBytes += r3, this;
            }, clamp: function() {
              var i4 = this.words, n3 = this.sigBytes;
              i4[n3 >>> 2] &= 4294967295 << 32 - n3 % 4 * 8, i4.length = t3.ceil(n3 / 4);
            }, clone: function() {
              var t4 = a.clone.call(this);
              return t4.words = this.words.slice(0), t4;
            }, random: function(t4) {
              for (var i4 = [], n3 = 0; n3 < t4; n3 += 4)
                i4.push(r2());
              return new c.init(i4, t4);
            } }), h = o2.enc = {}, f = h.Hex = { stringify: function(t4) {
              for (var i4 = t4.words, n3 = t4.sigBytes, e4 = [], r3 = 0; r3 < n3; r3++) {
                var s3 = i4[r3 >>> 2] >>> 24 - r3 % 4 * 8 & 255;
                e4.push((s3 >>> 4).toString(16)), e4.push((15 & s3).toString(16));
              }
              return e4.join("");
            }, parse: function(t4) {
              for (var i4 = t4.length, n3 = [], e4 = 0; e4 < i4; e4 += 2)
                n3[e4 >>> 3] |= parseInt(t4.substr(e4, 2), 16) << 24 - e4 % 8 * 4;
              return new c.init(n3, i4 / 2);
            } }, l = h.Latin1 = { stringify: function(t4) {
              for (var i4 = t4.words, n3 = t4.sigBytes, e4 = [], r3 = 0; r3 < n3; r3++)
                e4.push(String.fromCharCode(i4[r3 >>> 2] >>> 24 - r3 % 4 * 8 & 255));
              return e4.join("");
            }, parse: function(t4) {
              for (var i4 = t4.length, n3 = [], e4 = 0; e4 < i4; e4++)
                n3[e4 >>> 2] |= (255 & t4.charCodeAt(e4)) << 24 - e4 % 4 * 8;
              return new c.init(n3, i4);
            } }, d = h.Utf8 = { stringify: function(t4) {
              try {
                return decodeURIComponent(escape(l.stringify(t4)));
              } catch (t5) {
                throw new Error("Malformed UTF-8 data");
              }
            }, parse: function(t4) {
              return l.parse(unescape(encodeURIComponent(t4)));
            } }, v = u2.BufferedBlockAlgorithm = a.extend({ reset: function() {
              this._data = new c.init(), this._nDataBytes = 0;
            }, _append: function(t4) {
              "string" == typeof t4 && (t4 = d.parse(t4)), this._data.concat(t4), this._nDataBytes += t4.sigBytes;
            }, _process: function(i4) {
              var n3, e4 = this._data, r3 = e4.words, s3 = e4.sigBytes, o3 = this.blockSize, u3 = s3 / (4 * o3), a2 = (u3 = i4 ? t3.ceil(u3) : t3.max((0 | u3) - this._minBufferSize, 0)) * o3, h2 = t3.min(4 * a2, s3);
              if (a2) {
                for (var f2 = 0; f2 < a2; f2 += o3)
                  this._doProcessBlock(r3, f2);
                n3 = r3.splice(0, a2), e4.sigBytes -= h2;
              }
              return new c.init(n3, h2);
            }, clone: function() {
              var t4 = a.clone.call(this);
              return t4._data = this._data.clone(), t4;
            }, _minBufferSize: 0 }), m = (u2.Hasher = v.extend({ cfg: a.extend(), init: function(t4) {
              this.cfg = this.cfg.extend(t4), this.reset();
            }, reset: function() {
              v.reset.call(this), this._doReset();
            }, update: function(t4) {
              return this._append(t4), this._process(), this;
            }, finalize: function(t4) {
              return t4 && this._append(t4), this._doFinalize();
            }, blockSize: 16, _createHelper: function(t4) {
              return function(i4, n3) {
                return new t4.init(n3).finalize(i4);
              };
            }, _createHmacHelper: function(t4) {
              return function(i4, n3) {
                return new m.HMAC.init(t4, n3).finalize(i4);
              };
            } }), o2.algo = {});
            return o2;
          }(Math), e2);
        }, 9506: function(t2, i2, n2) {
          var e2, r2, s2, o2, u2, a, c;
          t2.exports = (c = n2(9021), n2(5471), n2(1025), o2 = (r2 = (e2 = c).lib).WordArray, a = (u2 = e2.algo).EvpKDF = (s2 = r2.Base).extend({ cfg: s2.extend({ keySize: 4, hasher: u2.MD5, iterations: 1 }), init: function(t3) {
            this.cfg = this.cfg.extend(t3);
          }, compute: function(t3, i3) {
            for (var n3, e3 = this.cfg, r3 = e3.hasher.create(), s3 = o2.create(), u3 = s3.words, a2 = e3.keySize, c2 = e3.iterations; u3.length < a2; ) {
              n3 && r3.update(n3), n3 = r3.update(t3).finalize(i3), r3.reset();
              for (var h = 1; h < c2; h++)
                n3 = r3.finalize(n3), r3.reset();
              s3.concat(n3);
            }
            return s3.sigBytes = 4 * a2, s3;
          } }), e2.EvpKDF = function(t3, i3, n3) {
            return a.create(n3).compute(t3, i3);
          }, c.EvpKDF);
        }, 9674: function(t2, i2, n2) {
          "use strict";
          n2.d(i2, { MixStream: function() {
            return H;
          } });
          var e2 = n2(8627), r2 = { NOT_LOGIN: e2.S4u, INPUT_PARAM: e2.ZEp, TIMEOUT: e2.Q9p, MIXER_NO_SERVICES: { code: 1005e3, message: "no mix stream service" }, MIXER_TASK_ID_NULL: { code: 1005001, message: "mixer task is null" }, MIXER_TASK_ID_TOO_LONG: { code: 1005002, message: "task ID is too long" }, MIXER_TASK_ID_INVALID_CHARACTER: { code: 1005003, message: "task ID contains illegal characters" }, MIXER_NO_OUTPUT_TARGET: { code: 1005005, message: "task configuration does not specify output" }, MIXER_OUTPUT_TARGET_INVALID: { code: 1005006, message: "stream output target is incorrect" }, MIXER_START_REQUEST_ERROR: { code: 1005010, message: "start mixer task fail, possibly due to network reasons" }, MIXER_STOP_REQUEST_ERROR: { code: 1005011, message: "stop mixer task fail, possibly due to network reasons" }, MIXER_NOT_OWNER_STOP_MIXER: { code: 1005012, message: " maxed task must be stopped by the start user of the task" }, MIXER_INPUTLIST_NULL: { code: 1005020, message: "Mixed stream task input list is null" }, MIXER_OUTPUTLIST_NULL: { code: 1005021, message: "Mixed stream task output list is null" }, MIXER_VIDEO_CONFIG_INVALID: { code: 1005023, message: "invalid mixed stream task video configuration" }, MIXER_EXCEED_MAX_INPUT_COUNT: { code: 1005025, message: "more than the maximum number of input streams" }, MIXER_INPUT_STREAM_NOT_EXISTS: { code: 1005026, message: "Input stream does not exist" }, MIXER_INPUT_PARAMETERS_ERROR: { code: 1005027, message: "mix stream input parameters are wrong" }, MIXER_INPUT_LABEL_TOO_LONG: { code: 1005028, message: "Input stream label text is too long" }, MIXER_OUTPUT_TARGET_TOO_LONG: { code: 1005029, message: "Output stream target is too long" }, MIXER_EXCEED_MAX_OUTPUT_COUNT: { code: 1005030, message: "more than the maximum number of output streams" }, MIXER_INPUT_IMAGE_URL_TOO_LONG: { code: 1005034, message: "Input stream image url too long" }, MIXER_INPUT_IMAGE_FORMAT_WRONG: { code: 1005035, message: "Input stream image format wrong" }, MIXER_INPUT_IMAGE_GET_FAIL: { code: 1005036, message: "Input stream image get fail" }, MIXER_AUTHENTICATION_FAILED: { code: 1005050, message: "mixed stream authentication failed" }, MIXER_WATERMARK_NULL: { code: 1005061, mag: "input watermark is null" }, MIXER_WATERMARK_PARAMETERS_ERROR: { code: 1005062, message: "input watermark parameter is wrong" }, MIXER_WATERMARK_URL_INVALID: { code: 1005063, message: "illegal input watermark URL" }, MIXER_BACKGROUND_IMAGE_URL_INVALID: { code: 1005067, message: "illegal input background image URL" }, MIXER_REPEAT_INPUT: { code: 1005099, message: "mix stream input repeat" }, MIXER_INNER_ERROR: { code: 1005099, message: "mixer internal error" } }, s2 = n2(9728), o2 = n2(3788);
          const u2 = n2(6994);
          (o2 = o2.default || o2).util.Long = u2.default || u2, o2.util.Long.fromBits = o2.util.Long.fromBits || function() {
            return 0;
          };
          for (var a = o2.roots, c = o2.types ? o2.types.basic : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0, string: 2, bytes: 2 }, h = o2.types ? o2.types.packed : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0 }, f = Object.keys(c), l = { $: function(t3) {
            return l[t3] ? l[t3].call(this) : a[t3].decode ? a[t3].decode(this, this.uint32()) : l.$.call(this, "int32");
          } }, d = { $: function(t3, i3, n3) {
            var e3 = c[t3];
            return void 0 === e3 ? a[t3].encode ? (this.uint32(n3 << 3 | 2).fork(), a[t3].encode(i3, this).ldelim()) : d.$.call(this, "int32", i3, n3) : d[t3].call(this.uint32(n3 << 3 | e3), i3);
          } }, v = 0; v < f.length; v++)
            l[f[v]] = o2.Reader.prototype[f[v]], d[f[v]] = o2.Writer.prototype[f[v]];
          !function t3(i3, n3, e3, r3) {
            for (var s3 = 0, u3 = Object.keys(i3); s3 < u3.length; s3++) {
              var f2 = u3[s3];
              if (i3[f2].$m && Object.keys(i3[f2].$m).every(function(t4) {
                return Number(t4);
              })) {
                if (e3[f2])
                  throw Error(`nested type ${e3}.${f2} has already exist`);
                e3[f2] = function(i4, e4) {
                  function r4(t4) {
                    for (var n4 in i4) {
                      var e5 = i4[n4];
                      "{" === e5[1].charAt(0) ? this[e5[0]] = {} : "[" !== e5[1].charAt(0) && "<" !== e5[1].charAt(0) || (this[e5[0]] = []);
                    }
                    if (t4)
                      for (var r5 = Object.keys(t4), s5 = 0; s5 < r5.length; ++s5)
                        null != t4[r5[s5]] && (this[r5[s5]] = t4[r5[s5]]);
                  }
                  var s4 = {};
                  for (var u4 in i4) {
                    var f3 = i4[u4], v2 = f3[1];
                    "{" === v2.charAt(0) ? (r4.prototype[f3[0]] = o2.util.emptyObject, s4[v2] = { $m: v2.substring(1).split(",").map(function(t4, i5) {
                      return [`$${i5 + 1}`, t4, null];
                    }).reduce(function(t4, i5, n4) {
                      return t4[n4 + 1] = i5, t4;
                    }, {}) }) : r4.prototype[f3[0]] = "[" === v2.charAt(0) || "<" === v2.charAt(0) ? o2.util.emptyArray : "bytes" === v2 ? o2.util.newBuffer([]) : f3[2] && f3[2].hasOwnProperty("low") && f3[2].hasOwnProperty("high") ? o2.util.Long.fromBits(f3[2].low, f3[2].high, f3[2].unsigned) : f3[2];
                  }
                  return r4.create = function(t4) {
                    return new r4(t4);
                  }, r4.decode = function(t4, n4) {
                    t4 instanceof o2.Reader || (t4 = o2.Reader.create(t4));
                    for (var e5 = void 0 === n4 ? t4.len : t4.pos + n4, s5 = new r4(); t4.pos < e5; ) {
                      var u5 = t4.uint32(), c2 = u5 >>> 3;
                      if (c2 > 0 && i4[c2]) {
                        var f4 = i4[c2][0], d2 = i4[c2][1];
                        if ("{" === d2.charAt(0)) {
                          s5[f4] === o2.util.emptyObject && (s5[f4] = {});
                          var v3 = r4.$namespace[d2].decode(t4, t4.uint32());
                          s5[f4][v3.$1] = v3.$2;
                        } else if ("[" === d2.charAt(0) || "<" === d2.charAt(0)) {
                          d2 = d2.substring(1), s5[f4] && s5[f4].length || (s5[f4] = []);
                          if (void 0 !== h[d2 = !l[d2] && !a[d2].decode ? "int32" : d2] && 2 == (7 & u5))
                            for (var m2 = t4.uint32() + t4.pos; t4.pos < m2; )
                              s5[f4].push(l.$.call(t4, d2));
                          else
                            s5[f4].push(l.$.call(t4, d2));
                        } else
                          s5[f4] = l.$.call(t4, d2);
                      } else
                        t4.skipType(7 & u5);
                    }
                    return s5;
                  }, r4.encode = function(t4, n4) {
                    for (var e5 in n4 || (n4 = o2.Writer.create()), i4) {
                      var s5 = i4[e5][0], u5 = i4[e5][1];
                      if ("{" === u5.charAt(0)) {
                        if (null != t4[s5] && t4.hasOwnProperty(s5))
                          for (var f4 = 0, l2 = Object.keys(t4[s5]); f4 < l2.length; ++f4)
                            n4.uint32(e5 << 3 | 2).fork(), r4.$namespace[u5].encode({ $1: l2[f4], $2: t4[s5][l2[f4]] }, n4).ldelim();
                      } else if ("[" === u5.charAt(0) || "<" === u5.charAt(0)) {
                        var v3 = "<" === u5.charAt(0);
                        u5 = u5.substring(1);
                        var m2 = t4[s5];
                        if (null != m2 && m2.length) {
                          if (u5 = void 0 === c[u5] && !a[u5].encode ? "int32" : u5, v3 && void 0 !== h[u5]) {
                            n4.uint32(e5 << 3 | 2).fork();
                            for (f4 = 0; f4 < m2.length; f4++)
                              d[u5].call(n4, m2[f4]);
                            n4.ldelim();
                          } else
                            for (f4 = 0; f4 < m2.length; f4++)
                              d.$.call(n4, u5, m2[f4], e5);
                        }
                      } else
                        null != t4[s5] && t4.hasOwnProperty(s5) && d.$.call(n4, u5, t4[s5], e5);
                    }
                    return n4;
                  }, Object.keys(s4).length && (r4.$namespace = t3(s4, n3 + "." + e4, r4.$namespace || {}, true)), r4;
                }(i3[f2].$m, f2);
              } else
                i3[f2].$s ? e3[f2] = function(t4, i4) {
                  function e4(t5, i5, n4) {
                    o2.rpc.Service.call(this, t5, i5, n4);
                  }
                  return (e4.prototype = Object.create(o2.rpc.Service.prototype)).constructor = e4, e4.create = function(t5, i5, n4) {
                    return new e4(t5, i5, n4);
                  }, Object.keys(t4).forEach(function(r4) {
                    var s4 = t4[r4];
                    function o3(t5, i5) {
                      return this.rpcCall(o3, a[s4[0]], a[s4[1]], t5, i5);
                    }
                    Object.defineProperty(o3, "name", { value: r4 }), Object.defineProperty(o3, "path", { value: `${n3}.${i4}` }), e4.prototype[r4] = o3;
                  }), e4;
                }(i3[f2].$s, f2) : i3[f2].$e && Object.values(i3[f2].$e).every(function(t4) {
                  return Number(t4) === t4;
                }) && (e3[f2] = function(t4) {
                  for (var i4 = Object.keys(t4), n4 = {}, e4 = 0; e4 < i4.length; e4++)
                    n4[n4[i4[e4]] = t4[i4[e4]]] = i4[e4];
                  return n4;
                }(i3[f2].$e));
              e3[f2] && !r3 && (a[`${n3}.${f2}`] = e3[f2]), delete i3[f2].$m, delete i3[f2].$s, delete i3[f2].$e, e3[f2] = t3(i3[f2], Boolean(n3) ? `${n3}.${f2}` : f2, e3[f2] || {});
            }
            return e3;
          }({ mixstream: { proto_mixstream: { AutoRoomMixOutputStream: { $m: { 1: ["stream_out_common", "mixstream.proto_mixstream.MixOutputStreamCommon", null], 2: ["audio_channel_cnt", "int32", 0] } }, AutoRoomMixStreamStartRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["mix_stream_common", "mixstream.proto_mixstream.MixStreamCommon", null], 3: ["mix_source", "string", ""], 4: ["room_id", "string", ""], 5: ["task_id", "string", ""], 6: ["water_mark", "mixstream.proto_mixstream.MixWaterMark", null], 7: ["output_stream", "<mixstream.proto_mixstream.AutoRoomMixOutputStream", null], 8: ["extra_params", "<mixstream.proto_mixstream.MixAdvanceConfig", null], 9: ["has_recv_buffer_level", "bool", false], 10: ["recv_buffer_level", "sint32", 0] } }, AutoRoomMixStreamStartResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["common_response", "mixstream.proto_mixstream.MixstreamServerCommonResponse", null] } }, AutoRoomMixStreamStopRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["task_id", "string", ""], 3: ["room_id", "string", ""] } }, AutoRoomMixStreamStopResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["common_response", "mixstream.proto_mixstream.MixstreamServerCommonResponse", null] } }, GetMixStreamStatusRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["task_id", "string", ""] } }, GetMixStreamStatusResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["common_response", "mixstream.proto_mixstream.MixstreamServerCommonResponse", null], 3: ["push_url", "<mixstream.proto_mixstream.PushUrl", null], 4: ["version", "int32", 0], 5: ["task_id", "string", ""] } }, MixAdvanceConfig: { $m: { 1: ["key", "string", ""], 2: ["value", "string", ""] } }, MixImage: { $m: { 1: ["url", "string", ""], 2: ["display_mode", "int32", 0] } }, MixInputStream: { $m: { 1: ["stream_input_common", "mixstream.proto_mixstream.MixInputStreamCommon", null], 2: ["volume", "int32", 0], 3: ["audio_focus", "int32", 0], 4: ["audio_h_angle", "int32", 0], 5: ["render_mode", "int32", 0], 6: ["corner_radius", "uint32", 0], 7: ["label", "mixstream.proto_mixstream.MixLabel", null], 8: ["image", "mixstream.proto_mixstream.MixImage", null] } }, MixInputStreamCommon: { $m: { 1: ["stream_id", "string", ""], 2: ["sound_level_id", "uint32", 0], 3: ["content_control", "int32", 0], 4: ["layer_rect", "mixstream.proto_mixstream.MixRect", null], 5: ["stream_url", "string", ""] } }, MixLabel: { $m: { 1: ["text", "string", ""], 2: ["text_left", "int32", 0], 3: ["text_top", "int32", 0], 4: ["font", "mixstream.proto_mixstream.MixLableFont", null] } }, MixLableFont: { $m: { 1: ["font_type", "int32", 0], 2: ["font_size", "int32", 0], 3: ["font_color", "int32", 0], 4: ["font_transparency", "int32", 0], 5: ["font_border_color", "sint32", 0] } }, MixOutputStream: { $m: { 1: ["output_stream_common", "mixstream.proto_mixstream.MixOutputStreamCommon", null], 2: ["video_enc_id", "int32", 0], 3: ["video_encode_latency", "int32", 0], 4: ["video_encode_profile", "int32", 0], 5: ["low_bitrate_hd", "int32", 0] } }, MixOutputStreamCommon: { $m: { 1: ["is_url", "int32", 0], 2: ["target", "string", ""], 3: ["video_fps", "int32", 0], 4: ["rate_control_mode", "int32", 0], 5: ["video_bitrate", "int32", 0], 6: ["video_width", "int32", 0], 7: ["video_height", "int32", 0], 8: ["output_quality", "int32", 0], 9: ["audio_bitrate", "int32", 0], 10: ["audio_enc_id", "int32", 0] } }, MixRect: { $m: { 1: ["top", "int32", 0], 2: ["left", "int32", 0], 3: ["bottom", "int32", 0], 4: ["right", "int32", 0], 5: ["layer", "int32", 0] } }, MixStartReplyData: { $m: { 1: ["request_id", "string", ""], 2: ["play_infos", "<mixstream.proto_mixstream.PlayInfo", null] } }, MixStreamCommon: { $m: { 1: ["user_data", "string", ""], 2: ["output_bg_color", "int32", 0], 3: ["output_bg_image", "string", ""], 4: ["with_sound_level", "int32", 0], 5: ["single_stream_pass_through", "int32", 0], 6: ["alignment_type", "int32", 0] } }, MixstreamServerCommonResponse: { $m: { 1: ["code", "uint32", 0], 2: ["message", "string", ""] } }, MixStreamStartRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["mix_protocol_version", "int32", 0], 3: ["task_id", "string", ""], 4: ["room_id", "string", ""], 5: ["mix_stream_common", "mixstream.proto_mixstream.MixStreamCommon", null], 6: ["audio_channel_cnt", "int32", 0], 7: ["audio_mix_mode", "int32", 0], 8: ["recv_buffer_level", "sint32", 0], 9: ["input_stream", "<mixstream.proto_mixstream.MixInputStream", null], 10: ["water_mark", "mixstream.proto_mixstream.MixWaterMark", null], 11: ["advance_config", "<mixstream.proto_mixstream.MixAdvanceConfig", null], 12: ["output_stream", "<mixstream.proto_mixstream.MixOutputStream", null], 13: ["white_board", "mixstream.proto_mixstream.MixWhiteBoard", null], 14: ["timestamp", "int64", { low: 0, high: 0, unsigned: false }], 15: ["check_image_mode", "int32", 0] } }, MixStreamStartResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["common_response", "mixstream.proto_mixstream.MixstreamServerCommonResponse", null], 3: ["data", "mixstream.proto_mixstream.MixStartReplyData", null], 4: ["error_streamid_list", "<string", null] } }, MixStreamStopRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["task_id", "string", ""], 3: ["room_id", "string", ""], 4: ["is_url", "int32", 0], 5: ["target", "string", ""], 6: ["timestamp", "int64", { low: 0, high: 0, unsigned: false }] } }, MixStreamStopResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["common_response", "mixstream.proto_mixstream.MixstreamServerCommonResponse", null] } }, MixStreamTaskHbRequest: { $m: { 1: ["request_seq", "uint32", 0], 2: ["task_id", "string", ""] } }, MixStreamTaskHbResponse: { $m: { 1: ["request_seq", "uint32", 0], 2: ["common_response", "mixstream.proto_mixstream.MixstreamServerCommonResponse", null], 3: ["status", "uint32", 0], 4: ["hb_interval", "uint32", 0] } }, MixWaterMark: { $m: { 1: ["image", "string", ""], 2: ["layout_rect", "mixstream.proto_mixstream.MixRect", null] } }, MixWhiteBoard: { $m: { 1: ["whiteboard_id", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["horizontal_ratio", "int32", 0], 3: ["vertical_ratio", "int32", 0], 4: ["is_ppt_animation", "int32", 0], 5: ["layout_rect", "mixstream.proto_mixstream.MixRect", null], 6: ["background_color", "int32", 0] } }, PlayInfo: { $m: { 1: ["stream_alias", "string", ""], 2: ["rtmp_url", "string", ""], 3: ["hls_url", "string", ""], 4: ["hdl_url", "string", ""] } }, PushUrl: { $m: { 1: ["status", "int32", 0], 2: ["url", "string", ""], 3: ["mod_time", "int64", { low: 0, high: 0, unsigned: false }], 4: ["reason", "int32", 0] } } } } }, "", a, false);
          var m, p, g = a.mixstream, b = n2(7202);
          m = g.proto_mixstream, (p = (p = n2(3788)).default || p).util.Long = b.A, p.configure();
          var _, y = function() {
            function t3() {
            }
            return t3.prototype.encodeMixStreamStartReq = function(t4) {
              var i3 = m.MixStreamStartRequest.create(t4);
              return m.MixStreamStartRequest.encode(i3).finish();
            }, t3.prototype.decodeMixStreamStartRsp = function(t4) {
              return m.MixStreamStartResponse.decode(t4);
            }, t3.prototype.encodeMixStreamStopReq = function(t4) {
              var i3 = m.MixStreamStopRequest.create(t4);
              return m.MixStreamStopRequest.encode(i3).finish();
            }, t3.prototype.decodeMixStreamStopRsp = function(t4) {
              return m.MixStreamStopResponse.decode(t4);
            }, t3.prototype.encodeGetMixStreamStatusReq = function(t4) {
              var i3 = m.GetMixStreamStatusRequest.create(t4);
              return m.GetMixStreamStatusRequest.encode(i3).finish();
            }, t3.prototype.decodeGetMixStreamStatusRsp = function(t4) {
              return m.GetMixStreamStatusResponse.decode(t4);
            }, t3.prototype.encodeAutoRoomMixStreamStartReq = function(t4) {
              var i3 = m.AutoRoomMixStreamStartRequest.create(t4);
              return m.AutoRoomMixStreamStartRequest.encode(i3).finish();
            }, t3.prototype.decodeAutoRoomMixStreamStartRsp = function(t4) {
              return m.AutoRoomMixStreamStartResponse.decode(t4);
            }, t3.prototype.encodeAutoRoomMixStreamStopReq = function(t4) {
              var i3 = m.AutoRoomMixStreamStopRequest.create(t4);
              return m.AutoRoomMixStreamStopRequest.encode(i3).finish();
            }, t3.prototype.decodeAutoRoomMixStreamStopRsp = function(t4) {
              return m.AutoRoomMixStreamStopResponse.decode(t4);
            }, t3.prototype.encodeMixStreamTaskHbReq = function(t4) {
              var i3 = m.MixStreamTaskHbRequest.create(t4);
              return m.MixStreamTaskHbRequest.encode(i3).finish();
            }, t3.prototype.decodeMixStreamTaskHbRsp = function(t4) {
              return m.MixStreamTaskHbResponse.decode(t4);
            }, t3;
          }(), w = n2(5095), S = { event: "/mix/start_mix", error: { wn: r2.INPUT_PARAM, hr: r2.MIXER_TASK_ID_NULL, lr: r2.MIXER_TASK_ID_TOO_LONG, vr: r2.MIXER_TASK_ID_INVALID_CHARACTER, mr: r2.MIXER_INPUTLIST_NULL, pr: r2.MIXER_OUTPUTLIST_NULL, gr: r2.MIXER_OUTPUT_TARGET_INVALID, br: r2.MIXER_NO_OUTPUT_TARGET, _r: r2.MIXER_OUTPUT_TARGET_TOO_LONG, yr: r2.MIXER_START_REQUEST_ERROR, wr: r2.MIXER_INNER_ERROR, Sr: r2.MIXER_INPUT_LABEL_TOO_LONG, Er: r2.MIXER_INPUT_IMAGE_URL_TOO_LONG, kr: r2.MIXER_INPUT_IMAGE_FORMAT_WRONG, Or: r2.MIXER_WATERMARK_URL_INVALID, Ir: r2.MIXER_WATERMARK_PARAMETERS_ERROR, Ue: r2.NOT_LOGIN }, mix_stream_conf: w.Gq, stop_reason: w.tK }, E = { event: "/mix/stop_mix", error: { wn: r2.INPUT_PARAM, hr: r2.MIXER_TASK_ID_NULL, yr: r2.MIXER_STOP_REQUEST_ERROR, wr: r2.MIXER_INNER_ERROR, Ue: r2.NOT_LOGIN } }, k = { event: "/mix/config_mix", error: { wn: r2.INPUT_PARAM, Rr: r2.MIXER_VIDEO_CONFIG_INVALID, Cr: r2.MIXER_BACKGROUND_IMAGE_URL_INVALID, Ue: r2.NOT_LOGIN }, mix_params: w.Gq }, O = "/automix/start", I = "/automix/stop", R = n2(4872), T = n2(8866), C = n2(4908), A = function() {
            return A = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, A.apply(this, arguments);
          }, z = 256, D = 1024, N = 1e4;
          _ = b.A;
          var P, M = ["NO_RELAY", "RELAYING", "RELAY_REQUESTING", "NO_RELAY"], x = { 0: "NONE", 8: "SERVER_ERROR", 9: "HANDSHAKE_FAILED", 10: "ACCESS_POINT_ERROR", 11: "CREATE_STREAM_FAILED", 12: "BAD_NAME", 13: "CDN_SERVER_DISCONNECTED", 14: "DISCONNECTED", 1214: "ALL_INPUT_STREAM_CLOSED", 1215: "ALL_INPUT_STREAM_NO_DATA", 1230: "SERVER_INTERNAL_ERROR" };
          function j(t3, i3) {
            var n3, e3, s3, o3, u3 = "", a2 = r2;
            return i3.errorCode < 2e9 && i3.errorCode > 1e9 ? (s3 = { 1: "MIXER_START_REQUEST_ERROR", 2: "MIXER_START_REQUEST_ERROR", 3: "MIXER_AUTHENTICATION_FAILED", 141: "MIXER_INPUT_IMAGE_FORMAT_WRONG", 142: "MIXER_INPUT_IMAGE_GET_FAIL", 150: "MIXER_INPUT_STREAM_NOT_EXISTS", 151: "MIXER_START_REQUEST_ERROR", 152: "MIXER_STOP_REQUEST_ERROR", 153: "MIXER_INPUT_PARAMETERS_ERROR", 154: "MIXER_EXCEED_MAX_OUTPUT_COUNT", 155: "MIXER_INPUT_PARAMETERS_ERROR", 156: "MIXER_VIDEO_CONFIG_INVALID", 157: "MIXER_NO_SERVICES", 158: "MIXER_EXCEED_MAX_INPUT_COUNT", 159: "MIXER_START_REQUEST_ERROR", 160: "MIXER_NOT_OWNER_STOPMIXER", 170: "MIXER_WATERMARK_PARAMETERS_ERROR", 171: "MIXER_WATERMARK_NULL", 175: "MIXER_REPEAT_INPUT", 179: "MIXER_INPUT_LABEL_TOO_LONG", 190: "MIXER_START_REQUEST_ERROR" }, o3 = "MIXER_INNER_ERROR", (e3 = i3.errorCode - N) > 1e9 && s3[e3 - 1e9] && (o3 = s3[e3 - 1e9]), n3 = a2[u3 = o3]) : i3.errorCode < 1e6 && (n3 = t3.decodeServerError(i3.errorCode, i3.extendedData), u3 = t3.getLiveRoomError(i3.errorCode)), { reportErr: n3, actualError: a2[u3] };
          }
          !function(t3) {
            t3[t3.I = 0] = "I", t3[t3.H = 10] = "H", t3[t3.M = 100] = "M", t3[t3.L = 1e3] = "L";
          }(P || (P = {}));
          var q, L = { VIDEO: 0, AUDIO: 1, VIDEO_ONLY: 2 }, B = { "H.264": 0, "H.265": 3 };
          function U(t3) {
            var i3 = q.AUDIO_ENC_HE_AAC;
            switch (t3) {
              case s2.Xk.ZegoAudioCodecIDNormal2:
                i3 = q.AUDIO_ENC_AAC_LC;
                break;
              case s2.Xk.ZegoAudioCodecIDLow3:
                i3 = q.AUDIO_ENC_OPUS;
                break;
              default:
                i3 = q.AUDIO_ENC_HE_AAC;
            }
            return i3;
          }
          !function(t3) {
            t3[t3.AUDIO_ENC_HE_AAC = 0] = "AUDIO_ENC_HE_AAC", t3[t3.AUDIO_ENC_AAC_LC = 1] = "AUDIO_ENC_AAC_LC", t3[t3.AUDIO_ENC_MP3 = 2] = "AUDIO_ENC_MP3", t3[t3.AUDIO_ENC_OPUS = 3] = "AUDIO_ENC_OPUS", t3[t3.AUDIO_ENC_SILK = 4] = "AUDIO_ENC_SILK", t3[t3.AUDIO_ENC_EVS = 5] = "AUDIO_ENC_EVS";
          }(q || (q = {}));
          var G = {}, J = { startMixerTask: function(t3) {
            var i3 = this;
            return new T.l3(function(n3, e3) {
              var s3, o3, u3, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, E2, k2 = i3.reporter.createSpan(P.H, { key: C.oq.event }, { key: S.event, par: t3.taskID }, S.event, true), O2 = { errorCode: r2.MIXER_INPUT_PARAMETERS_ERROR.code, extendedData: r2.MIXER_INPUT_PARAMETERS_ERROR.message };
              if (!!(null == t3 ? void 0 : t3.inputList.find(function(t4) {
                return null == t4.streamID && (O2.extendedData = O2.extendedData + ". streamID should be of string type", true);
              })))
                return i3.reporter.setError(k2, r2.MIXER_INPUT_PARAMETERS_ERROR), void e3(O2);
              var I2 = t3.outputConfig;
              I2 && I2.outputFps && (I2.outputFPS = I2.outputFps);
              var N2 = function(n4) {
                var r3 = j(i3.stateCenter, n4), s4 = r3.reportErr, o4 = r3.actualError;
                1000010150 === n4.errorCode && k2.setAttributes({ stop_reason: "UnmatchStreamId" }), i3.reporter.setError(k2, s4 || n4), i3.reporter.spanEnd({ key: S.event, par: t3.taskID }), o4 && (n4.errorCode = null == o4 ? void 0 : o4.code, n4.extendedData = (null == o4 ? void 0 : o4.message) || ""), e3(n4);
              }, M2 = i3.stateCenter.roomList[0];
              if (M2) {
                var x2 = [];
                if (!t3.noTaskID && !t3.taskID)
                  return i3.logger.error("zb.sh.ums no taskId found"), void N2({ errorCode: S.error.hr.code, extendedData: S.error.hr.message });
                if (!t3.noTaskID && !(0, R.QP)(t3.taskID))
                  return i3.logger.error("zb.rh.lg taskId must be string"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (!t3.noTaskID && t3.taskID.length > z)
                  return i3.logger.error("zb.sh.ums taskId is too long"), void N2({ errorCode: S.error.lr.code, extendedData: S.error.lr.message });
                if (!t3.noTaskID && !(0, T.jy)(t3.taskID))
                  return i3.logger.error("zb.sh.ums task ID contains illegal characters"), void N2({ errorCode: S.error.vr.code, extendedData: S.error.vr.message });
                if (!t3.inputList || 0 == t3.inputList.length)
                  return i3.logger.error("zb.sh.ums input list wrong"), void N2({ errorCode: S.error.mr.code, extendedData: S.error.mr.message });
                if (t3.inputList.some(function(t4) {
                  return (0, R.w)(t4) && !t4.streamID;
                }))
                  return i3.logger.error("zb.sh.ums input stream is null"), void N2({ errorCode: S.error.mr.code, extendedData: S.error.mr.message });
                for (var q2 = 0; q2 < t3.inputList.length; q2++) {
                  var B2 = t3.inputList[q2], U2 = { errorCode: S.error.wn.code, extendedData: S.error.wn.message };
                  if (!(0, R.w)(B2.layout))
                    return i3.logger.error("zb.sh.ums input layout must be object"), void N2(U2);
                  var J2 = B2.layout, F2 = J2.bottom, H2 = J2.left, V = J2.right;
                  if (!((0, T.zQ)(J2.top, false) && (0, T.zQ)(F2, false) && (0, T.zQ)(H2, false) && (0, T.zQ)(V, false)))
                    return i3.logger.error("zb.sh.ums topleftbottomright must be integer number"), void N2(U2);
                  if (!(0, R.TE)(B2.renderMode) && ![0, 1].includes(B2.renderMode))
                    return i3.logger.error("zb.sh.ums render_mode is wrong"), void N2(U2);
                  if ((0, R.w)(B2.imageInfo)) {
                    if (!(0, R.QP)(B2.imageInfo.url))
                      return i3.logger.error("zb.sh.ums image url is require string"), void N2(U2);
                    if (B2.imageInfo.url.length > 1024)
                      return i3.logger.error("zb.sh.ums input image url length too long"), void N2({ errorCode: S.error.Er.code, extendedData: S.error.Er.message });
                  }
                  if ((0, R.w)(B2.label)) {
                    if (!(0, R.QP)(null === (s3 = B2.label) || void 0 === s3 ? void 0 : s3.text))
                      return i3.logger.error("zb.sh.ums input label text is not string"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message + " label text is not string" });
                    if ((null === (u3 = null === (o3 = B2.label) || void 0 === o3 ? void 0 : o3.text) || void 0 === u3 ? void 0 : u3.length) >= 300)
                      return i3.logger.error("zb.sh.ums input label text is  too long"), void N2({ errorCode: S.error.Sr.code, extendedData: S.error.Sr.message });
                    var Q = B2.label, Y = Q.left, K = Q.top;
                    if (void 0 !== Y && !(0, T.zQ)(Y, false) || void 0 !== K && !(0, T.zQ)(K, false))
                      return i3.logger.error("zb.sh.ums input label left and top should be integer"), void N2(U2);
                  }
                  if (void 0 !== B2.cornerRadius && !(0, R.Cs)(B2.cornerRadius))
                    return i3.logger.error("zb.sh.ums cornerRadius is wrong"), void N2(U2);
                  if (void 0 !== B2.soundLevelID && !(0, T.zQ)(B2.soundLevelID, false))
                    return i3.logger.error("zb.sh.ums soundLevelID is wrong"), void N2(U2);
                  if (void 0 !== B2.volume && !(0, T.zQ)(B2.volume, false))
                    return i3.logger.error("zb.sh.ums volume is wrong"), void N2(U2);
                }
                if (!t3.outputList || 0 == t3.outputList.length)
                  return i3.logger.error("zb.sh.ums no output list found"), void N2({ errorCode: S.error.pr.code, extendedData: S.error.pr.message });
                if (t3.outputList.some(function(t4) {
                  return "" === t4 || (0, R.w)(t4) && !(0, R.QP)(t4.target);
                }))
                  return i3.logger.error("zb.sh.ums stream output target is nul"), void N2({ errorCode: S.error.pr.code, extendedData: S.error.pr.message });
                if (t3.outputList.some(function(t4) {
                  return (0, R.QP)(t4) && !(0, T.gU)(t4) && t4.length > D || (0, R.w)(t4) && (0, R.QP)(t4.target) && t4.target.length > D;
                }))
                  return i3.logger.error("zb.sh.ums stream output target is too long"), void N2({ errorCode: S.error._r.code, extendedData: S.error._r.message });
                if (t3.outputList.some(function(t4) {
                  return (0, R.QP)(t4) && !(0, T.gU)(t4) && !(0, T.jy)(t4) || (0, R.w)(t4) && (0, R.QP)(t4.target) && !(0, T.gU)(t4.target) && !(0, T.jy)(t4.target);
                }))
                  return i3.logger.error("zb.sh.ums stream output target is incorrect"), void N2({ errorCode: S.error.gr.code, extendedData: S.error.gr.message });
                if (!I2 || !(0, R.w)(I2))
                  return i3.logger.error("zb.sh.ums no output config found"), void N2({ errorCode: S.error.br.code, extendedData: S.error.br.message });
                if (!I2.outputBitrate || !(0, T.zQ)(I2.outputBitrate))
                  return i3.logger.error("zb.sh.ums bitrate param is required and must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (!I2.outputFPS || !(0, T.zQ)(I2.outputFPS))
                  return i3.logger.error("zb.sh.ums fps param is required and must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (!I2.outputWidth || !(0, T.zQ)(I2.outputWidth))
                  return i3.logger.error("zb.sh.ums width param is required and must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (!I2.outputHeight || !(0, T.zQ)(I2.outputHeight))
                  return i3.logger.error("zb.sh.ums height param is required and must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (void 0 !== I2.outputAudioCodecID && !(0, T.zQ)(I2.outputAudioCodecID, false))
                  return i3.logger.error("zb.sh.ums AudioCodecID param must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (void 0 !== I2.outputAudioBitrate && !(0, T.zQ)(I2.outputAudioBitrate))
                  return i3.logger.error("zb.sh.ums AudioBitrate param must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (void 0 !== I2.outputAudioChannels && !(0, T.zQ)(I2.outputAudioChannels, false))
                  return i3.logger.error("zb.sh.ums AudioChannels param must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if ((0, R.w)(t3.watermark)) {
                  if (!(0, R.QP)(null === (a2 = t3.watermark) || void 0 === a2 ? void 0 : a2.imageURL))
                    return i3.logger.error("zb.sh.ums watermark image type error"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if ("" !== (null === (c2 = t3.watermark) || void 0 === c2 ? void 0 : c2.imageURL) && !(0, R.$C)(null === (h2 = t3.watermark) || void 0 === h2 ? void 0 : h2.imageURL))
                    return i3.logger.error("zb.sh.ums watermark image url invalid"), void N2({ errorCode: S.error.Or.code, extendedData: S.error.Or.message });
                  if (!(0, R.w)(null === (f2 = t3.watermark) || void 0 === f2 ? void 0 : f2.layout))
                    return i3.logger.error("zb.sh.ums watermark layout must be object"), void N2({ errorCode: S.error.Ir.code, extendedData: S.error.Ir.message });
                  var Z = null === (l2 = t3.watermark) || void 0 === l2 ? void 0 : l2.layout;
                  F2 = Z.bottom, H2 = Z.left, V = Z.right;
                  if (!((0, T.zQ)(Z.top, false) && (0, T.zQ)(F2, false) && (0, T.zQ)(H2, false) && (0, T.zQ)(V, false)))
                    return i3.logger.error("zb.sh.ums watermark topleftbottomright must be integer number"), void N2({ errorCode: S.error.Ir.code, extendedData: S.error.Ir.message });
                }
                if ((0, R.w)(t3.whiteboard)) {
                  if (!(0, R.QP)(null === (d2 = t3.whiteboard) || void 0 === d2 ? void 0 : d2.whiteboardID))
                    return i3.logger.error("zb.sh.ums whiteboard is required and must be string"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if (!(0, R.w)(null === (v2 = t3.whiteboard) || void 0 === v2 ? void 0 : v2.layout))
                    return i3.logger.error("zb.sh.ums whiteboard layout must be object"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  var X = null === (m2 = t3.whiteboard) || void 0 === m2 ? void 0 : m2.layout;
                  F2 = X.bottom, H2 = X.left, V = X.right;
                  if (!((0, T.zQ)(X.top, false) && (0, T.zQ)(F2, false) && (0, T.zQ)(H2, false) && (0, T.zQ)(V, false)))
                    return i3.logger.error("zb.sh.ums whiteboard topleftbottomright must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  var W = t3.whiteboard, $ = W.horizontalRatio, tt = W.verticalRatio, it = W.isPPTAnimation, nt = W.zOrder, et = W.backgroundColor;
                  if (!(0, R.TE)($) && !(0, T.zQ)($))
                    return i3.logger.error("zb.sh.ums horizontalRatio must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if (!(0, R.TE)(tt) && !(0, T.zQ)(tt))
                    return i3.logger.error("zb.sh.ums verticalRatio must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if (!(0, R.TE)(it) && !(0, R.dd)(it))
                    return i3.logger.error("zb.sh.ums isPPTAnimation must be boolean"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if (!(0, R.TE)(nt) && !(0, T.zQ)(nt, false))
                    return i3.logger.error("zb.sh.ums zOrder must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if (!(0, R.TE)(et) && !(0, T.zQ)(et, false))
                    return i3.logger.error("zb.sh.ums backgroundColor must be integer number"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                }
                if (!(0, R.TE)(t3.enableSoundLevel) && !(0, R.dd)(t3.enableSoundLevel))
                  return i3.logger.error("zb.sh.ums enableSoundLevel is not bool"), void N2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                for (q2 = 0; q2 < t3.inputList.length; q2++) {
                  var rt = t3.inputList[q2], st = rt.streamID;
                  i3.stateCenter.testEnvironment && (st = "zegotest-" + i3.stateCenter.appid + "-" + rt.streamID), x2.push({ stream_id: st, content_control: L[rt.contentType || "VIDEO"] || 0, top: null === (p2 = rt.layout) || void 0 === p2 ? void 0 : p2.top, left: null === (g2 = rt.layout) || void 0 === g2 ? void 0 : g2.left, bottom: null === (b2 = rt.layout) || void 0 === b2 ? void 0 : b2.bottom, right: null === (_2 = rt.layout) || void 0 === _2 ? void 0 : _2.right, render_mode: rt.renderMode, corner_radius: rt.cornerRadius, image: rt.imageInfo, label: rt.label });
                }
                var ot = [];
                t3.outputList.forEach(function(i4) {
                  var n4 = "";
                  (0, R.QP)(i4) ? n4 = i4 : (0, R.w)(i4) && i4.target && (n4 = i4.target);
                  var e4 = 0;
                  (n4.startsWith("rtmp://") || n4.startsWith("https://") && n4.endsWith(".flv") || n4.startsWith("https://") && n4.endsWith(".m3u8")) && (e4 = 1);
                  var r3 = { target: n4, is_url: e4 ? "true" : "false" };
                  if (t3.outputConfig) {
                    var s4 = t3.outputConfig, o4 = s4.outputAudioBitrate, u4 = s4.outputAudioCodecID;
                    (0, R.Cs)(o4) && (r3.audio_bitrate = 1e3 * o4), (0, R.Cs)(u4) && (r3.audio_enc_id = u4);
                  }
                  if ((0, R.w)(i4) && i4.videoConfig) {
                    var a3 = i4.videoConfig, c3 = a3.bitrate, h3 = a3.encodeProfile, f3 = a3.encodeLatency, l3 = a3.videoCodecID, d3 = a3.enableLowBitrateHD;
                    (0, R.Cs)(c3) && (r3.video_bitrate = 1e3 * c3), (0, R.Cs)(h3) && (r3.video_encode_profile = h3), (0, R.Cs)(f3) && (r3.video_encode_latency = f3), (0, R.QP)(l3) && (r3.video_enc_id = l3), (0, R.dd)(d3) && (r3.low_bitrate_hd = d3 ? 1 : 0);
                  }
                  ot.push(r3);
                });
                var ut = I2, at = {};
                if (G) {
                  var ct = G.backgroundImage;
                  (0, R.Cs)(et = G.backgroundColor) && (at.output_bg_color = et), (0, R.QP)(ct) && (at.output_bg_image = ct);
                }
                var ht = {};
                if (t3.watermark) {
                  var ft = t3.watermark, lt = ft.layout;
                  ht.image = ft.imageURL, ht.layout = lt;
                }
                ht && (at.water_mark = ht), i3.reporter.spanSetAttributes({ key: S.event, par: t3.taskID }, { mix_stream_conf: S.mix_stream_conf(A(A({ fps: ut.outputFPS, bitrate: 1e3 * ut.outputBitrate, w: ut.outputWidth, h: ut.outputHeight, stream_cnt: x2.length, mix_task_id: t3.taskID }, at), { with_sound_level: t3.enableSoundLevel ? 1 : 0, bypass: (null === (y2 = t3.outputConfig) || void 0 === y2 ? void 0 : y2.singleStreamPassThrough) ? 1 : 0, audio_channel_cnt: null !== (E2 = null === (w2 = t3.outputConfig) || void 0 === w2 ? void 0 : w2.outputAudioChannels) && void 0 !== E2 ? E2 : 1, input_stream_list: x2, output_target_list: ot })) }), M2.streamHandler.updateMixStream(t3, G, function(e4) {
                  i3.reporter.spanEnd({ key: S.event, par: t3.taskID }), n3(e4);
                }, N2);
              } else
                N2({ errorCode: S.error.Ue.code, extendedData: S.error.Ue.message });
            });
          }, setMixerTaskConfig: function(t3) {
            var i3 = this;
            return new T.l3(function(n3, e3) {
              var r3, s3 = i3.reporter.createSpan(P.H, { key: C.oq.event }, { key: "" }, k.event), o3 = {}, u3 = function(t4) {
                i3.reporter.setError(s3, t4), e3(t4);
              };
              if (t3 && t3.videoCodec) {
                var a2 = t3.videoCodec.toLowerCase();
                if (-1 == ["vp8", "h264", "h265"].indexOf(a2))
                  return i3.logger.error("zb.sh.ums param videoCode error"), u3({ errorCode: k.error.Rr.code, extendedData: k.error.Rr.message }), false;
                o3.videoCodec = a2;
              }
              if (t3.backgroundColor) {
                if (!(0, T.zQ)(t3.backgroundColor))
                  return i3.logger.error("zb.sh.ums param backgroundColor must be integer number"), u3({ errorCode: k.error.wn.code, extendedData: k.error.wn.message }), false;
                o3.backgroundColor = t3.backgroundColor;
              }
              var c2 = t3.backgroundImage;
              if (c2) {
                if (!(0, R.QP)(c2))
                  return i3.logger.error("zb.sh.ums param outputBgImage error"), u3({ errorCode: k.error.wn.code, extendedData: k.error.wn.message }), false;
                if (!(0, R.$C)(c2))
                  return i3.logger.error("zb.sh.ums illegal input background image URL"), u3({ errorCode: k.error.Cr.code, extendedData: k.error.Cr.message }), false;
                o3.backgroundImage = c2;
              }
              var h2 = t3 && t3.userData;
              if (h2) {
                if (!(0, R.G0)(h2))
                  return i3.logger.error("zb.sh.ums param userData required Uint8Array"), u3({ errorCode: k.error.wn.code, extendedData: k.error.wn.message }), false;
                if (h2.byteLength > 1e3)
                  return i3.logger.error("zb.sh.ums param userData should shorter than 1000"), u3({ errorCode: k.error.wn.code, extendedData: k.error.wn.message }), false;
                o3.userData = h2;
              }
              t3.extraParams && (o3.extraParams || (o3.extraParams = []), (r3 = o3.extraParams).push.apply(r3, t3.extraParams)), G = o3, s3.setAttributes({ mix_params: k.mix_params(t3) }), i3.stateCenter.roomList[0] ? (s3.end(), n3({ errorCode: 0, extendedData: "" })) : u3({ errorCode: k.error.Ue.code, extendedData: k.error.Ue.message });
            });
          }, stopMixerTask: function(t3) {
            var i3 = this;
            return new T.l3(function(n3, e3) {
              var r3 = i3.reporter.createSpan(P.H, { key: C.oq.event }, { key: "" }, E.event);
              if (!t3 || !(0, R.QP)(t3) || t3.length > z || !(0, T.jy)(t3))
                return i3.logger.error("zb.rh.lg taskID must be string less 256"), i3.reporter.setError(r3, E.error.wn, " param taskID error"), void e3({ errorCode: E.error.wn.code, extendedData: E.error.wn.message + " param taskID error" });
              r3.setAttributes({ mix_task_id: t3 });
              var s3 = function(t4) {
                var n4 = j(i3.stateCenter, t4), s4 = n4.actualError;
                i3.reporter.setError(r3, n4.reportErr || t4), s4 && (t4.errorCode = null == s4 ? void 0 : s4.code, t4.extendedData = (null == s4 ? void 0 : s4.message) || ""), e3(t4);
              }, o3 = i3.stateCenter.roomList[0];
              o3 ? o3.streamHandler.stopMixStream(t3, function(t4) {
                r3.end(), n3(t4);
              }, s3) : s3({ errorCode: E.error.Ue.code, extendedData: E.error.Ue.message });
            });
          }, startAutoMixerTask: function(t3) {
            var i3 = this;
            return new T.l3(function(n3, r3) {
              var s3, o3, u3 = i3.reporter.createSpan(P.H, { key: C.oq.event }, { key: O, par: t3.taskID }, O, true), a2 = function(n4) {
                var e3 = j(i3.stateCenter, n4), s4 = e3.reportErr;
                1000010150 === n4.errorCode && u3.setAttributes({ stop_reason: "UnmatchStreamId" }), i3.reporter.setError(u3, s4 || n4), i3.reporter.spanEnd({ key: O, par: t3.taskID }), r3(n4);
              }, c2 = i3.stateCenter.roomList[0];
              if (c2) {
                if (!t3.taskID)
                  return i3.logger.error("zb.sh.ums no taskId found"), void a2({ errorCode: S.error.hr.code, extendedData: S.error.hr.message });
                if (!(0, R.QP)(t3.taskID))
                  return i3.logger.error("zb.rh.lg taskId must be string"), void a2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (t3.taskID.length > z)
                  return i3.logger.error("zb.sh.ums taskId is too long"), void a2({ errorCode: S.error.lr.code, extendedData: S.error.lr.message });
                if (!(0, T.jy)(t3.taskID))
                  return i3.logger.error("zb.sh.ums task ID contains illegal characters"), void a2({ errorCode: S.error.vr.code, extendedData: S.error.vr.message });
                if (!t3.roomID)
                  return i3.logger.error("zb.sh.ums no roomID found"), void a2({ errorCode: e2.Qo5.code, extendedData: e2.Qo5.message });
                if (!(0, R.QP)(t3.roomID))
                  return i3.logger.error("zb.rh.lg roomID must be string"), void a2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                if (t3.roomID.length > 128)
                  return i3.logger.error("zb.sh.ums roomID is too long"), void a2({ errorCode: e2.Srw.code, extendedData: e2.Srw.message });
                if (!(0, T.jy)(t3.roomID))
                  return i3.logger.error("zb.sh.ums room ID contains illegal characters"), void a2({ errorCode: e2.ulL.code, extendedData: e2.ulL.message });
                if (!t3.outputList || 0 == t3.outputList.length)
                  return i3.logger.error("zb.sh.ums no output list found"), void a2({ errorCode: S.error.pr.code, extendedData: S.error.pr.message });
                if (t3.outputList.some(function(t4) {
                  return (0, R.w)(t4) && !t4.target;
                }))
                  return i3.logger.error("zb.sh.ums stream output target is nul"), void a2({ errorCode: S.error.pr.code, extendedData: S.error.pr.message });
                if (t3.outputList.some(function(t4) {
                  return (0, R.w)(t4) && (0, R.QP)(t4.target) && t4.target.length > D;
                }))
                  return i3.logger.error("zb.sh.ums stream output target is too long"), void a2({ errorCode: S.error._r.code, extendedData: S.error._r.message });
                if (t3.outputList.some(function(t4) {
                  return (0, R.w)(t4) && t4.target && !(0, T.gU)(t4.target) && !(0, T.jy)(t4.target);
                }))
                  return i3.logger.error("zb.sh.ums stream output target is incorrect"), void a2({ errorCode: S.error.gr.code, extendedData: S.error.gr.message });
                if (t3.audioConfig) {
                  if (void 0 !== (null === (s3 = t3.audioConfig) || void 0 === s3 ? void 0 : s3.bitrate) && !(0, T.zQ)(null === (o3 = t3.audioConfig) || void 0 === o3 ? void 0 : o3.bitrate))
                    return i3.logger.error("zb.sh.ums audio bitrate param is required and must be integer number"), void a2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if (void 0 !== t3.audioConfig.codecID && !(0, T.zQ)(t3.audioConfig.codecID, false))
                    return i3.logger.error("zb.sh.ums AudioCodecID param must be integer number"), void a2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                  if (void 0 !== t3.audioConfig.channel && ![1, 2].includes(t3.audioConfig.channel))
                    return i3.logger.error("zb.sh.ums AudioChannels param must be 1 or 2"), void a2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                }
                if (!(0, R.TE)(t3.enableSoundLevel) && !(0, R.dd)(t3.enableSoundLevel))
                  return i3.logger.error("zb.sh.ums enableSoundLevel is not bool"), void a2({ errorCode: S.error.wn.code, extendedData: S.error.wn.message });
                var h2 = [];
                t3.outputList.forEach(function(i4) {
                  var n4 = i4.target, e3 = {};
                  if (n4.startsWith("rtmp://") || n4.startsWith("https://") && n4.endsWith(".flv") || n4.startsWith("https://") && n4.endsWith(".m3u8") ? e3.url = n4 : e3.stream = n4, i4.videoConfig) {
                    var r4 = i4.videoConfig, s4 = r4.encodeProfile, o4 = r4.encodeLatency, u4 = r4.videoCodecID, a3 = r4.enableLowBitrateHD;
                    (0, R.Cs)(c3 = r4.bitrate) && (e3.video_bitrate = 1e3 * c3), (0, R.Cs)(s4) && (e3.video_encode_profile = s4), (0, R.Cs)(o4) && (e3.video_encode_latency = o4), (0, R.QP)(u4) && (e3.video_enc_id = u4), (0, R.dd)(a3) && (e3.low_bitrate_hd = a3 ? 1 : 0);
                  }
                  if (t3.audioConfig) {
                    var c3, f2 = t3.audioConfig, l2 = f2.channel, d2 = f2.codecID;
                    (0, R.Cs)(c3 = f2.bitrate) && (e3.audio_bitrate = 1e3 * c3), (0, R.Cs)(d2) && (e3.audio_enc_id = d2), (0, R.Cs)(l2) && (e3.audio_channel_cnt = l2);
                  }
                  h2.push(e3);
                }), i3.reporter.spanSetAttributes({ key: O, par: t3.taskID }, { task_id: t3.taskID, room_id: t3.roomID, with_sound_level: t3.enableSoundLevel ? 1 : 0, alignment_type: t3.streamAlignmentMode || 0, recv_buffer_level: t3.minPlayStreamBufferLength || 0, output_target_list: h2 }), c2.streamHandler.updateAutoMixStream(t3, function(e3) {
                  i3.reporter.spanEnd({ key: O, par: t3.taskID }), n3(e3);
                }, a2);
              } else
                a2({ errorCode: S.error.Ue.code, extendedData: S.error.Ue.message });
            });
          }, stopAutoMixerTask: function(t3) {
            var i3 = this;
            return new T.l3(function(n3, e3) {
              var r3 = i3.reporter.createSpan(P.H, { key: C.oq.event }, { key: "" }, I);
              if (!t3.taskID || !(0, R.QP)(t3.taskID) || t3.taskID.length > z || !(0, T.jy)(t3.taskID))
                return i3.logger.error("zb.rh.lg taskID must be string less 256"), i3.reporter.setError(r3, E.error.wn, " param taskID error"), void e3({ errorCode: E.error.wn.code, extendedData: E.error.wn.message + " param taskID error" });
              r3.setAttributes({ task_id: t3.taskID, room_id: t3.roomID });
              var s3 = function(t4) {
                var n4 = j(i3.stateCenter, t4);
                i3.reporter.setError(r3, n4.reportErr || t4), e3(t4);
              }, o3 = i3.stateCenter.roomList[0];
              o3 ? o3.streamHandler.stopAutoMixStream(t3, function(t4) {
                r3.end(), n3(t4);
              }, s3) : s3({ errorCode: E.error.Ue.code, extendedData: E.error.Ue.message });
            });
          } }, F = { _sendMixStopReqByAccessHub: function(t3, i3, n3) {
            var e3 = this;
            this.mixStreamProtoBuf || (this.mixStreamProtoBuf = new y()), t3.timestamp = _.fromInt(Math.ceil((/* @__PURE__ */ new Date()).getTime() / 1e3)), this.logger.info("zb.sh.smseba.1 req " + JSON.stringify(t3));
            var s3 = this.mixStreamProtoBuf.encodeMixStreamStopReq(t3), o3 = function(i4, n4) {
              try {
                var r3 = e3.mixStreamProtoBuf.decodeMixStreamStopRsp(i4);
                (0, T.M$)(r3), e3.logger.info("zb.sh.smseba.1 rsp " + JSON.stringify(t3));
                var s4 = (null == r3 ? void 0 : r3.common_response) || {};
                return { code: s4.code, msg: s4.message };
              } catch (t4) {
                return { code: -1 };
              }
            };
            this.sendMixRequest({ interfaceID: 16 }, s3, function(t4, e4) {
              var r3 = o3(t4), s4 = r3.code, u3 = r3.msg;
              0 != s4 && null != s4 || !(0, R.JO)(i3) ? n3 && n3({ errorCode: s4, extendedData: u3 || "" }) : i3({ errorCode: s4, extendedData: u3 });
            }, function(t4, i4, s4) {
              var u3 = "";
              if (s4)
                return s4.code == r2.TIMEOUT.code && (s4 = S.error.wr), s4.code && 20010 === s4.code && (s4 = JSON.parse(JSON.stringify(r2.MIXER_NO_SERVICES))), void (n3 && n3(s4, u3));
              s4 = S.error.wr;
              var a2 = "";
              if ((0, R.QP)(i4))
                a2 = i4;
              else {
                var c2 = o3(i4);
                a2 = c2.code + " " + c2.msg;
              }
              e3.logger.error("zb.sh.pt " + (u3 = "request media server fail, error: " + t4 + " " + a2)), n3 && n3(s4, u3);
            });
          }, stopMixStream: function(t3, i3, n3, e3, r3) {
            var s3 = this;
            this.logger.info("zb.sh.sms call");
            var o3 = this.getStopMixStreamParams(t3, e3, r3);
            this._sendMixStopReqByAccessHub(o3.mixStopReq, function(n4) {
              s3.mixStreamHbList[t3] && (s3.mixStreamHbList[t3].timer && clearTimeout(s3.mixStreamHbList[t3].timer), delete s3.mixStreamHbList[t3]), i3(n4);
            }, n3);
          }, _sendMixStartReqByAccessHub: function(t3, i3, n3, e3) {
            var s3 = this;
            this.mixStreamProtoBuf || (this.mixStreamProtoBuf = new y()), t3.timestamp = _.fromInt(Math.ceil((/* @__PURE__ */ new Date()).getTime() / 1e3)), this.logger.info("zb.sh.smseba.0 req " + JSON.stringify(t3));
            var o3 = this.mixStreamProtoBuf.encodeMixStreamStartReq(t3), u3 = function(t4, i4) {
              try {
                var n4 = s3.mixStreamProtoBuf.decodeMixStreamStartRsp(t4);
                (0, T.M$)(n4), s3.logger.info("zb.sh.smseba.0 rsp " + JSON.stringify(n4));
                var e4 = n4.common_response;
                return { code: e4.code, msg: e4.message, data: n4.data, errStreamList: n4.error_streamid_list };
              } catch (t5) {
                return { code: -1 };
              }
            };
            this.sendMixRequest({ interfaceID: 15 }, o3, function(r3, o4) {
              var a2 = u3(r3), c2 = a2.code, h2 = a2.data, f2 = a2.errStreamList;
              if (void 0 === c2 || 0 == c2) {
                var l2 = h2.play_infos.map(function(t4) {
                  var n4 = { rtmpURL: "", hlsURL: "", flvURL: "" }, e4 = t4.stream_alias || "";
                  return s3.stateCenter.testEnvironment && e4 && e4.startsWith(i3) && (e4 = e4.slice(i3.length)), n4.streamID = e4, t4.rtmp_url && t4.rtmp_url.length > 0 && (n4.rtmpURL = t4.rtmp_url), t4.hls_url && t4.hls_url.length > 0 && (n4.hlsURL = t4.hls_url), t4.hdl_url && t4.hdl_url.length > 0 && (n4.flvURL = t4.hdl_url), n4;
                });
                if (h2.request_id) {
                  s3.mixStreamTaskList[t3.task_id] || (s3.mixStreamTaskList[t3.task_id] = { mixStatusVer: 0, requestId: h2.request_id }), s3.mixStreamTaskList[t3.task_id].requestId = h2.request_id;
                  var d2 = s3.mixRequestIdList.findIndex(function(t4) {
                    return t4 == h2.request_id;
                  });
                  d2 > -1 && (s3.fetchMixStreamStatus(s3.stateCenter.appid + ":" + t3.task_id), s3.mixRequestIdList.splice(d2, 1));
                }
                if (n3)
                  n3({ errorCode: 0, extendedData: JSON.stringify({ mixerOutputList: l2 }) });
              } else {
                var v2 = "", m2 = c2 + 1e9;
                if (1000000150 == m2 && f2) {
                  var p2 = f2.map(function(t4) {
                    return s3.stateCenter.testEnvironment && t4.startsWith(i3) ? t4.slice(i3.length) : t4;
                  }) || [];
                  p2.length > 0 && (s3.logger.debug("zb.sh.ums not exist streams: " + p2), v2 = p2.join(","));
                }
                e3 && e3({ errorCode: s3.stateCenter.getServerError(N + m2).code, extendedData: v2 });
              }
            }, function(t4, i4, n4) {
              var o4 = "";
              if (n4)
                return n4.code == r2.TIMEOUT.code && (n4 = S.error.yr), n4.code && 20010 === n4.code && (n4 = JSON.parse(JSON.stringify(r2.MIXER_NO_SERVICES))), void (e3 && e3(n4, o4));
              n4 = S.error.wr;
              var a2 = "";
              if ((0, R.QP)(i4))
                a2 = i4;
              else {
                var c2 = u3(i4);
                a2 = c2.code + " " + c2.msg;
              }
              s3.logger.error("zb.sh.pt " + (o4 = "request media server fail, error: " + t4 + " " + a2)), e3 && e3(n4, o4);
            });
          }, getStartMixStreamParams: function(t3, i3) {
            var n3, e3, r3 = this, o3 = { request_seq: this.stateCenter.getSeq(), mix_protocol_version: 1, task_id: t3.taskID, room_id: this.roomID, mix_stream_common: {}, input_stream: [], advance_config: [], output_stream: [] }, u3 = t3.outputConfig || {};
            u3.singleStreamPassThrough && (0, R.dd)(u3.singleStreamPassThrough) && (o3.mix_stream_common.single_stream_pass_through = u3.singleStreamPassThrough ? 1 : 0);
            var a2 = i3;
            if (a2 && (a2.videoCodec && (null === (n3 = o3.advance_config) || void 0 === n3 || n3.push({ key: "video_encode", value: a2.videoCodec })), a2.backgroundColor && (o3.mix_stream_common.output_bg_color = a2.backgroundColor), a2.backgroundImage && (o3.mix_stream_common.output_bg_image = a2.backgroundImage), a2.userData && (o3.mix_stream_common.user_data = this.stateCenter.uint8arrayToBase64(a2.userData)), a2.extraParams && (null === (e3 = o3.advance_config) || void 0 === e3 || e3.push.apply(e3, a2.extraParams))), void 0 !== t3.enableSoundLevel && (o3.mix_stream_common.with_sound_level = t3.enableSoundLevel ? 1 : 0), t3.inputList.forEach(function(t4, i4) {
              var n4, e4, s3, u4, a3, c3, h3, f3, l3, d3, v3, m3, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2 = t4.streamID;
              r3.stateCenter.testEnvironment && (O2 = "zegotest-" + r3.stateCenter.appid + "-" + t4.streamID);
              var I2 = { stream_input_common: { stream_id: O2, content_control: L[t4.contentType || "VIDEO"] || 0, layer_rect: { layer: i4, top: null === (n4 = t4.layout) || void 0 === n4 ? void 0 : n4.top, left: null === (e4 = t4.layout) || void 0 === e4 ? void 0 : e4.left, bottom: null === (s3 = t4.layout) || void 0 === s3 ? void 0 : s3.bottom, right: null === (u4 = t4.layout) || void 0 === u4 ? void 0 : u4.right } }, volume: null !== (a3 = t4.volume) && void 0 !== a3 ? a3 : 100, audio_focus: t4.isAudioFocus ? 1 : 0, audio_h_angle: -1, render_mode: t4.renderMode, corner_radius: t4.cornerRadius };
              if (null === (c3 = t4.label) || void 0 === c3 ? void 0 : c3.text) {
                var R2 = { font_type: (null === (f3 = null === (h3 = t4.label) || void 0 === h3 ? void 0 : h3.font) || void 0 === f3 ? void 0 : f3.type) || 0, font_size: (null === (d3 = null === (l3 = t4.label) || void 0 === l3 ? void 0 : l3.font) || void 0 === d3 ? void 0 : d3.size) || 24, font_color: (null === (m3 = null === (v3 = t4.label) || void 0 === v3 ? void 0 : v3.font) || void 0 === m3 ? void 0 : m3.color) || 16777215, font_transparency: (null === (g2 = null === (p2 = t4.label) || void 0 === p2 ? void 0 : p2.font) || void 0 === g2 ? void 0 : g2.transparency) || 0 };
                R2.font_border_color = (null === (_2 = null === (b2 = t4.label) || void 0 === b2 ? void 0 : b2.font) || void 0 === _2 ? void 0 : _2.border) ? null === (w2 = null === (y2 = t4.label) || void 0 === y2 ? void 0 : y2.font) || void 0 === w2 ? void 0 : w2.borderColor : -1;
                var T2 = { text: null === (S2 = t4.label) || void 0 === S2 ? void 0 : S2.text, text_left: (null === (E2 = t4.label) || void 0 === E2 ? void 0 : E2.left) || 0, text_top: (null === (k2 = t4.label) || void 0 === k2 ? void 0 : k2.top) || 0, font: R2 };
                I2.label = T2;
              }
              t4.imageInfo && (I2.image = { url: t4.imageInfo.url, display_mode: t4.imageInfo.displayMode || 0 }), t4.soundLevelID && (I2.stream_input_common.sound_level_id = t4.soundLevelID), o3.input_stream.push(I2);
            }), t3.outputList.forEach(function(t4) {
              var i4, n4, e4, c3, h3, f3, l3, d3, v3, m3, p2, g2, b2, _2 = "";
              if ((0, R.QP)(t4) ? _2 = t4 : (0, R.w)(t4) && t4.target ? _2 = t4.target : r3.logger.error("zb.sh.ums output target required"), (0, T.gU)(_2))
                g2 = 1, b2 = _2;
              else {
                g2 = 0, b2 = r3.stateCenter.testEnvironment ? "zegotest-" + r3.stateCenter.appid + "-" + _2 : _2;
              }
              var y2 = u3.outputBitrate;
              "string" != typeof t4 && (null === (i4 = t4.videoConfig) || void 0 === i4 ? void 0 : i4.bitrate) && (y2 = null === (n4 = t4.videoConfig) || void 0 === n4 ? void 0 : n4.bitrate);
              var w2 = { is_url: g2, target: b2, video_bitrate: 1e3 * y2, video_fps: u3.outputFPS, video_width: u3.outputWidth, video_height: u3.outputHeight, output_quality: 23 };
              u3.outputAudioCodecID && (w2.audio_enc_id = u3.outputAudioCodecID), "vp8" === a2.videoCodec ? w2.audio_enc_id = 3 : "h264" !== a2.videoCodec && "h265" !== a2.videoCodec || (w2.audio_enc_id = 0), u3.outputAudioBitrate && (w2.audio_bitrate = 1e3 * u3.outputAudioBitrate);
              var S2 = { output_stream_common: w2 };
              "string" != typeof t4 && ((null === (e4 = t4.videoConfig) || void 0 === e4 ? void 0 : e4.videoCodecID) && (S2.video_enc_id = B[null === (c3 = t4.videoConfig) || void 0 === c3 ? void 0 : c3.videoCodecID] || 0), (null === (h3 = t4.videoConfig) || void 0 === h3 ? void 0 : h3.encodeProfile) && [0, 1, 2, 3].includes(null === (f3 = t4.videoConfig) || void 0 === f3 ? void 0 : f3.encodeProfile) && (S2.video_encode_profile = function(t5) {
                var i5 = 1;
                switch (t5) {
                  case s2.zN.ZegoEncodeProfileDefault:
                  case s2.zN.ZegoEncodeProfileMain:
                    i5 = 1;
                    break;
                  case s2.zN.ZegoEncodeProfileBaseline:
                    i5 = 0;
                    break;
                  case s2.zN.ZegoEncodeProfileHigh:
                    i5 = 2;
                }
                return i5;
              }(null === (l3 = t4.videoConfig) || void 0 === l3 ? void 0 : l3.encodeProfile)), (0, R.Cs)(null === (d3 = t4.videoConfig) || void 0 === d3 ? void 0 : d3.encodeLatency) && (S2.video_encode_latency = null === (v3 = t4.videoConfig) || void 0 === v3 ? void 0 : v3.encodeLatency), (0, R.dd)(null === (m3 = t4.videoConfig) || void 0 === m3 ? void 0 : m3.enableLowBitrateHD) && (S2.low_bitrate_hd = (null === (p2 = t4.videoConfig) || void 0 === p2 ? void 0 : p2.enableLowBitrateHD) ? 1 : 0)), o3.output_stream.push(S2);
            }), t3.watermark && "" !== t3.watermark.imageURL && (o3.water_mark = { image: t3.watermark.imageURL, layout_rect: t3.watermark.layout }), t3.whiteboard) {
              var c2 = t3.whiteboard, h2 = c2.horizontalRatio, f2 = c2.verticalRatio, l2 = c2.layout, d2 = c2.zOrder, v2 = c2.isPPTAnimation, m2 = c2.backgroundColor;
              o3.white_board = { whiteboard_id: _.fromString(c2.whiteboardID), horizontal_ratio: h2 || 16, vertical_ratio: f2 || 9, is_ppt_animation: true === v2 ? 1 : 0, layout_rect: A(A({}, l2), { layer: d2 || 0 }), background_color: m2 || 4059296768 };
            }
            return isNaN(t3.streamAlignmentMode) || (o3.mix_stream_common.alignment_type = t3.streamAlignmentMode), o3.audio_channel_cnt = u3.outputAudioChannels ? u3.outputAudioChannels : 1, u3.audioMixMode && (o3.audio_mix_mode = u3.audioMixMode), { mixStartReq: o3 };
          }, updateMixStream: function(t3, i3, n3, e3) {
            var r3 = this;
            this.logger.info("zb.sh.ums call"), this.logger.info("zb.sh.ums send command");
            var s3 = this.getStartMixStreamParams(t3, i3).mixStartReq;
            return this._sendMixStartReqByAccessHub(s3, "zegotest-" + this.stateCenter.appid + "-", function(i4) {
              r3.startMixHb(t3.taskID), n3(i4);
            }, e3), true;
          }, updateAutoMixStream: function(t3, i3, n3) {
            var e3 = this;
            this.logger.info("zb.sh.uams.0 call");
            var r3 = t3.taskID, s3 = t3.roomID, o3 = t3.audioConfig, u3 = t3.outputList, a2 = t3.enableSoundLevel, c2 = t3.streamAlignmentMode, h2 = t3.minPlayStreamBufferLength;
            this.mixStreamProtoBuf || (this.mixStreamProtoBuf = new y());
            var f2 = [];
            u3.forEach(function(t4) {
              var i4 = t4.target, n4 = 0;
              (i4.startsWith("rtmp://") || i4.startsWith("avertp://") || i4.startsWith("https://") && i4.endsWith(".flv") || i4.startsWith("https://") && i4.endsWith(".m3u8")) && (n4 = 1), f2.push({ stream_out_common: { target: i4, is_url: n4, audio_bitrate: (null == o3 ? void 0 : o3.bitrate) ? 1e3 * (null == o3 ? void 0 : o3.bitrate) : 48e3, audio_enc_id: (0, R.TE)(null == o3 ? void 0 : o3.codecID) ? 0 : U(null == o3 ? void 0 : o3.codecID), video_fps: 1, video_bitrate: 1, video_width: 1, video_height: 1 }, audio_channel_cnt: (null == o3 ? void 0 : o3.channel) || 1 });
            });
            var l2 = { request_seq: this.stateCenter.getSeq(), mix_stream_common: { with_sound_level: a2 ? 1 : 0, alignment_type: c2 }, room_id: s3, task_id: r3, output_stream: f2 };
            (0, R.Cs)(h2) && h2 >= 0 && (l2.has_recv_buffer_level = true, l2.recv_buffer_level = h2), this.logger.info("zb.sh.uams.0 params " + JSON.stringify(l2));
            var d2 = this.mixStreamProtoBuf.encodeAutoRoomMixStreamStartReq(l2), v2 = function(t4, i4) {
              try {
                var n4 = e3.mixStreamProtoBuf.decodeAutoRoomMixStreamStartRsp(t4);
                (0, T.M$)(n4), e3.logger.info("zb.sh.uams.0 rsp " + JSON.stringify(n4));
                var r4 = n4.common_response;
                return { code: r4.code, msg: r4.message };
              } catch (t5) {
                return { code: -1 };
              }
            };
            return this.sendMixRequest({ interfaceID: 10 }, d2, function(t4, r4) {
              e3.mixSucFun(t4, i3, n3, v2, "zb.sh.uams.0");
            }, function(t4, i4, r4) {
              e3.mixFailFun(t4, i4, r4, n3, v2, "zb.sh.uams.0");
            }, 6), true;
          }, stopAutoMixStream: function(t3, i3, n3) {
            var e3 = this, r3 = t3.taskID, s3 = t3.roomID, o3 = { request_seq: this.stateCenter.getSeq(), room_id: s3, task_id: r3 };
            this.logger.info("zb.sh.uams.1 params " + JSON.stringify(o3));
            var u3 = this.mixStreamProtoBuf.encodeAutoRoomMixStreamStopReq(o3), a2 = function(t4, i4) {
              try {
                var n4 = e3.mixStreamProtoBuf.decodeAutoRoomMixStreamStopRsp(t4);
                (0, T.M$)(n4), e3.logger.info("zb.sh.smseba.0 rsp " + JSON.stringify(n4));
                var r4 = n4.common_response;
                return { code: r4.code, msg: r4.message };
              } catch (t5) {
                return { code: -1 };
              }
            };
            this.sendMixRequest({ interfaceID: 11 }, u3, function(t4, r4) {
              e3.mixSucFun(t4, i3, n3, a2, "zb.sh.uams.1");
            }, function(t4, i4, r4) {
              e3.mixFailFun(t4, i4, r4, n3, a2, "zb.sh.uams.1");
            }, 6);
          }, mixSucFun: function(t3, i3, n3, e3, r3, s3) {
            var o3 = e3(t3, s3), u3 = o3.code, a2 = o3.msg;
            void 0 === u3 || 0 === u3 ? (this.logger.info(r3 + " suc"), i3 && i3({ errorCode: 0, extendedData: "" })) : (this.logger.info(r3 + " fail " + u3 + " " + a2), n3 && n3({ errorCode: this.stateCenter.getServerError(N + (u3 + 1e9)).code, extendedData: a2 }));
          }, mixFailFun: function(t3, i3, n3, e3, s3, o3) {
            var u3 = "";
            if (n3)
              return n3.code == r2.TIMEOUT.code && (n3 = S.error.wr), n3.code && 20010 === n3.code && (n3 = JSON.parse(JSON.stringify(r2.MIXER_NO_SERVICES))), void (e3 && e3(n3, u3));
            n3 = S.error.wr;
            var a2 = "";
            if ((0, R.QP)(i3))
              a2 = i3;
            else {
              var c2 = s3(i3);
              a2 = c2.code + " " + c2.msg;
            }
            u3 = "request media server fail, error: " + t3 + " " + a2, this.logger.error("".concat(o3, " http fail ").concat(u3)), e3 && e3(n3, u3);
          }, getStopMixStreamParams: function(t3, i3, n3) {
            var e3 = { id_name: this.stateCenter.idName, live_channel: this.roomID, appid: this.stateCenter.appid, version: "3.11.0" }, r3 = { request_seq: this.stateCenter.getSeq(), room_id: this.roomID };
            if ((0, R.QP)(t3) && (e3.task_id = t3, r3.task_id = t3), null != i3) {
              var s3 = void 0;
              e3.stream_id = s3 = this.stateCenter.testEnvironment ? "zegotest-" + this.stateCenter.appid + "-" + i3 : i3, r3.is_url = 0, r3.target = s3;
            } else
              null != n3 && (e3.mixurl = n3, r3.is_url = 1, r3.target = n3);
            return { req_body: e3, mixStopReq: r3 };
          }, getMixStreamStatus: function(t3) {
            this.logger.info("zb.sh.fmss call");
            for (var i3 = 0; i3 < t3.length; i3++) {
              var n3 = t3[i3], e3 = n3.trans_type.replace("mixpushstatus:", ""), r3 = e3.replace(this.stateCenter.appid + ":", ""), s3 = this.mixStreamTaskList[r3], o3 = JSON.parse(n3.trans_data), u3 = o3.request_id;
              if (s3 && s3.requestId === u3) {
                var a2 = parseInt(o3.version);
                a2 <= s3.mixStatusVer && 1 != a2 ? this.logger.info("zb.sh.fmss data ver is not new") : this.fetchMixStreamStatus(e3);
              } else
                this.logger.info("zb.sh.fmss taskId don't exist"), this.mixRequestIdList.push(u3);
            }
          }, fetchMixStreamStatus: function(t3) {
            var i3 = this;
            this.mixStreamProtoBuf || (this.mixStreamProtoBuf = new y());
            var n3 = { request_seq: this.stateCenter.getSeq(), task_id: t3 }, e3 = this.mixStreamProtoBuf.encodeGetMixStreamStatusReq(n3), r3 = t3.replace(this.stateCenter.appid + ":", "");
            this.sendMixRequest({ interfaceID: 13 }, e3, function(t4, n4) {
              var e4 = function(t5) {
                try {
                  var n5 = i3.mixStreamProtoBuf.decodeGetMixStreamStatusRsp(t5);
                  (0, T.M$)(n5), i3.logger.info("zb.sh.fmss rsp " + JSON.stringify(n5));
                  var e5 = n5.common_response;
                  return { code: e5.code, msg: e5.message, push_url: n5.push_url, request_seq: n5.request_seq, task_id: n5.task_id, version: n5.version };
                } catch (t6) {
                  return { code: -1 };
                }
              }(t4), s3 = e4.code, o3 = e4.msg, u3 = e4.push_url, a2 = e4.task_id, c2 = e4.version;
              if (void 0 !== s3 && 0 !== s3 || !(0, R.Cs)(c2))
                i3.logger.warn("zb.sh.fmss fail " + s3 + " " + o3);
              else {
                var h2 = i3.mixStreamTaskList[r3];
                if (!h2)
                  return void i3.logger.info("zb.sh.fmss taskId don't exist");
                if (c2 <= h2.mixStatusVer && 1 != c2)
                  return void i3.logger.warn("zb.sh.fmss data ver is not new");
                h2.mixStatusVer = c2;
                var f2 = [];
                u3.forEach(function(t5) {
                  f2.push({ url: t5.url, state: M[t5.status], updateReason: x[t5.reason], stateTime: _.isLong(t5.mod_time) ? t5.mod_time.toNumber() : t5.mod_time });
                }), i3.stateCenter.actionListener("mixerRelayCDNStateUpdate", a2, f2);
              }
            }, function(t4, n4, e4) {
              i3.logger.warn("zb.sh.fmss http fail " + t4 + " " + JSON.stringify(e4));
            });
          }, startMixHb: function(t3) {
            var i3 = this;
            this.logger.info("zb.sh.smh.0 call");
            var n3 = { request_seq: this.stateCenter.getSeq(), task_id: "".concat(t3) }, e3 = this.mixStreamProtoBuf.encodeMixStreamTaskHbReq(n3);
            this.sendMixRequest({ interfaceID: 12 }, e3, function(n4, e4) {
              var r3 = function(t4) {
                try {
                  var n5 = i3.mixStreamProtoBuf.decodeMixStreamTaskHbRsp(t4);
                  (0, T.M$)(n5), i3.logger.info("zb.sh.smh.0 rsp " + JSON.stringify(n5));
                  var e5 = n5.common_response;
                  return { code: e5.code, msg: e5.message, status: n5.status, hb_interval: n5.hb_interval };
                } catch (t5) {
                  return { code: -1 };
                }
              }(n4), s3 = r3.code, o3 = r3.msg, u3 = r3.status, a2 = r3.hb_interval;
              void 0 === s3 || 0 === s3 ? (i3.logger.info("zb.sh.smh.0 suc ".concat(u3, " ").concat(a2)), (0, R.Cs)(a2) && 0 === u3 && (!i3.mixStreamHbList[t3] && (i3.mixStreamHbList[t3] = {}), i3.mixStreamHbList[t3].timer = setTimeout(function() {
                i3.startMixHb(t3);
              }, 1e3 * a2))) : i3.logger.info("zb.sh.smh.0 fail ".concat(s3, " ").concat(o3));
            }, function(t4, n4, e4) {
              i3.logger.info("zb.sh.smh.0 send err ".concat(t4, " ").concat(e4));
            });
          } }, H = { type: "MixStream", install: function(t3, i3) {
            for (var n3 in J)
              Object.defineProperty(t3.prototype, n3, { value: J[n3], writable: false });
            for (var n3 in F)
              Object.defineProperty(i3.prototype, n3, { value: F[n3], writable: false });
          } };
        }, 9728: function(t2, i2, n2) {
          "use strict";
          var e2, r2, s2, o2, u2;
          n2.d(i2, { Xk: function() {
            return o2;
          }, zN: function() {
            return u2;
          } }), function(t3) {
            t3[t3.AspectFill = 0] = "AspectFill", t3[t3.AspectFit = 1] = "AspectFit";
          }(e2 || (e2 = {})), function(t3) {
            t3[t3.ZegoFontTypeSourceHanSans = 0] = "ZegoFontTypeSourceHanSans", t3[t3.ZegoFontTypeAlibabaSans = 1] = "ZegoFontTypeAlibabaSans", t3[t3.ZegoFontTypePangMenZhengDaoTitle = 2] = "ZegoFontTypePangMenZhengDaoTitle", t3[t3.ZegoFontTypeHappyZcool = 3] = "ZegoFontTypeHappyZcool";
          }(r2 || (r2 = {})), function(t3) {
            t3[t3.ZegoAudioMixModeRaw = 0] = "ZegoAudioMixModeRaw", t3[t3.ZegoAudioMixModeFocused = 1] = "ZegoAudioMixModeFocused";
          }(s2 || (s2 = {})), function(t3) {
            t3[t3.ZegoAudioCodecIDNormal = 1] = "ZegoAudioCodecIDNormal", t3[t3.ZegoAudioCodecIDNormal2 = 2] = "ZegoAudioCodecIDNormal2", t3[t3.ZegoAudioCodecIDLow3 = 6] = "ZegoAudioCodecIDLow3";
          }(o2 || (o2 = {})), function(t3) {
            t3[t3.ZegoEncodeProfileDefault = 0] = "ZegoEncodeProfileDefault", t3[t3.ZegoEncodeProfileBaseline = 1] = "ZegoEncodeProfileBaseline", t3[t3.ZegoEncodeProfileMain = 2] = "ZegoEncodeProfileMain", t3[t3.ZegoEncodeProfileHigh = 3] = "ZegoEncodeProfileHigh";
          }(u2 || (u2 = {}));
        } }, s = {};
        function o(t2) {
          var i2 = s[t2];
          if (void 0 !== i2)
            return i2.exports;
          var n2 = s[t2] = { exports: {} };
          return r[t2].call(n2.exports, n2, n2.exports, o), n2.exports;
        }
        o.n = function(t2) {
          var i2 = t2 && t2.__esModule ? function() {
            return t2.default;
          } : function() {
            return t2;
          };
          return o.d(i2, { a: i2 }), i2;
        }, o.d = function(t2, i2) {
          for (var n2 in i2)
            o.o(i2, n2) && !o.o(t2, n2) && Object.defineProperty(t2, n2, { enumerable: true, get: i2[n2] });
        }, o.g = function() {
          if ("object" == typeof globalThis)
            return globalThis;
          try {
            return this || new Function("return this")();
          } catch (t2) {
            if ("object" == typeof window)
              return window;
          }
        }(), o.o = function(t2, i2) {
          return Object.prototype.hasOwnProperty.call(t2, i2);
        }, o.r = function(t2) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(t2, "__esModule", { value: true });
        };
        var u = {};
        return function() {
          "use strict";
          o.r(u), o.d(u, { WebRTCUtil: function() {
            return $s;
          }, ZegoExpressEngine: function() {
            return $l;
          } });
          var t2, i2, n2 = o(3052), e2 = o(2638);
          !function(t3) {
            t3[t3.CN = 2] = "CN", t3[t3.NA = 3] = "NA", t3[t3.EU = 4] = "EU", t3[t3.AS = 5] = "AS", t3[t3.IN = 6] = "IN", t3[t3.NCN = 7] = "NCN";
          }(t2 || (t2 = {})), function(t3) {
            t3[t3.ZegoDefined = 0] = "ZegoDefined", t3[t3.UserUnregister = 1] = "UserUnregister";
          }(i2 || (i2 = {}));
          var r2, s2, a;
          !function(t3) {
            t3[t3.disconnected = 0] = "disconnected", t3[t3.connecting = 1] = "connecting", t3[t3.connected = 2] = "connected";
          }(r2 || (r2 = {})), function(t3) {
            t3[t3.tryProbe = 0] = "tryProbe", t3[t3.probed = 2] = "probed";
          }(s2 || (s2 = {})), function(t3) {
            t3[t3.replaceNew = 0] = "replaceNew", t3[t3.changeResolution = 1] = "changeResolution";
          }(a || (a = {}));
          var c, h = { 0: { code: 1, description: "user_stop_publishing_stream_normal" }, 1: { code: 2, description: "user_heart_beat_timeout" }, 2: { code: 3, description: "user_repeat_login" }, 3: { code: 4, description: "user_kicked_out" }, 4: { code: 5, description: "user_offline" }, 100: { code: 6, description: "remove_by_server" } };
          !function(t3) {
            t3[t3.UNKNOWN = 0] = "UNKNOWN", t3[t3.CDN = 1] = "CDN", t3[t3.RTC = 2] = "RTC", t3[t3.L3 = 3] = "L3";
          }(c || (c = {}));
          var f, l;
          !function(t3) {
            t3[t3.publish_quality = 0] = "publish_quality", t3[t3.play_quality = 1] = "play_quality", t3[t3.charge = 2] = "charge";
          }(f || (f = {})), function(t3) {
            t3[t3.low = 1] = "low", t3[t3.stantard = 2] = "stantard", t3[t3.hight = 3] = "hight", t3[t3.custome = 4] = "custome";
          }(l || (l = {}));
          var d, v, m = { stop: 0, start: 1, waiterAnswer: 2, waitingCandidate: 3, sendCandidate: 4, iceConnected: 5, iceDisconnected: 6, iceClosed: 7, iceFailed: 8 };
          !function(t3) {
            t3[t3.Delete = 0] = "Delete", t3[t3.Add = 1] = "Add";
          }(d || (d = {})), function(t3) {
            t3[t3.captureFpsToLow = 1001] = "captureFpsToLow", t3[t3.captureVolumeToLow = 1002] = "captureVolumeToLow", t3[t3.sendVideoBitrateToLow = 1003] = "sendVideoBitrateToLow", t3[t3.sendFpsToLow = 1004] = "sendFpsToLow", t3[t3.sendAudioBitrateToLow = 1005] = "sendAudioBitrateToLow", t3[t3.receiveVolumeToLow = 1006] = "receiveVolumeToLow", t3[t3.receiveAudioDecodedFail = 1007] = "receiveAudioDecodedFail", t3[t3.receiveVideoDecodedFail = 1008] = "receiveVideoDecodedFail", t3[t3.receiveVideoFpsDecodedToLow = 1009] = "receiveVideoFpsDecodedToLow", t3[t3.renderVideoFpsToLow = 1010] = "renderVideoFpsToLow", t3[t3.captureFpsNormal = 2001] = "captureFpsNormal", t3[t3.captureVolumeNormal = 2002] = "captureVolumeNormal", t3[t3.sendVideoBitrateNormal = 2003] = "sendVideoBitrateNormal", t3[t3.sendFpsNormal = 2004] = "sendFpsNormal", t3[t3.sendAudioBitrateNormal = 2005] = "sendAudioBitrateNormal", t3[t3.receiveVolumeNormal = 2006] = "receiveVolumeNormal", t3[t3.receiveAudioDecodedNormal = 2007] = "receiveAudioDecodedNormal", t3[t3.receiveVideoDecodedNormal = 2008] = "receiveVideoDecodedNormal", t3[t3.receiveVideoFpsDecodedNormal = 2009] = "receiveVideoFpsDecodedNormal", t3[t3.renderVideoFpsNormal = 2010] = "renderVideoFpsNormal";
          }(v || (v = {}));
          var p, g, b, _;
          !function(t3) {
            t3[t3.PortraitSegmentation = 0] = "PortraitSegmentation";
          }(p || (p = {})), function(t3) {
            t3[t3.BASE_LINE = 1] = "BASE_LINE", t3[t3.MAIN = 2] = "MAIN", t3[t3.HIGH = 3] = "HIGH";
          }(g || (g = {})), function(t3) {
            t3[t3.METHOD_UNSET = 0] = "METHOD_UNSET", t3[t3.METHOD_GET = 1] = "METHOD_GET", t3[t3.METHOD_POST = 2] = "METHOD_POST", t3[t3.METHOD_PUT = 3] = "METHOD_PUT", t3[t3.METHOD_PATCH = 4] = "METHOD_PATCH", t3[t3.METHOD_DELETE = 5] = "METHOD_DELETE", t3[t3.METHOD_HEAD = 6] = "METHOD_HEAD", t3[t3.METHOD_OPTIONS = 7] = "METHOD_OPTIONS";
          }(b || (b = {})), function(t3) {
            t3[t3.SERVICE_UNSET = 0] = "SERVICE_UNSET", t3[t3.SERVICE_MEDIAGW = 1] = "SERVICE_MEDIAGW", t3[t3.SERVICE_LIVEROOM = 2] = "SERVICE_LIVEROOM", t3[t3.SERVICE_MIX = 3] = "SERVICE_MIX", t3[t3.SERVICE_ZEUS = 4] = "SERVICE_ZEUS", t3[t3.SERVICE_ZPUSH = 5] = "SERVICE_ZPUSH", t3[t3.SERVICE_L3 = 6] = "SERVICE_L3", t3[t3.SERVICE_TALKLINE = 7] = "SERVICE_TALKLINE", t3[t3.SERVICE_EDUSUITE = 8] = "SERVICE_EDUSUITE", t3[t3.SERVICE_ZIM = 9] = "SERVICE_ZIM", t3[t3.SERVICE_ClOUD_SETTING = 10] = "SERVICE_ClOUD_SETTING", t3[t3.SERVICE_ZEUSHB = 11] = "SERVICE_ZEUSHB", t3[t3.SERVICE_USER_LOGIC = 12] = "SERVICE_USER_LOGIC", t3[t3.SERVICE_UNIFYDISPATCH = 13] = "SERVICE_UNIFYDISPATCH", t3[t3.SERVICE_QUALITY = 14] = "SERVICE_QUALITY", t3[t3.SERVICE_SECURITY = 15] = "SERVICE_SECURITY", t3[t3.SERVICE_KTVCPR = 16] = "SERVICE_KTVCPR", t3[t3.SERVICE_SWITCH4LIVEROOM = 17] = "SERVICE_SWITCH4LIVEROOM", t3[t3.SERVICE_WEBRTC_SIGNAL = 18] = "SERVICE_WEBRTC_SIGNAL", t3[t3.SERVICE_L3_WEBRTC_SIGNAL = 19] = "SERVICE_L3_WEBRTC_SIGNAL", t3[t3.SERVICE_VIDEOCPR = 20] = "SERVICE_VIDEOCPR", t3[t3.SERVICE_CDN = 21] = "SERVICE_CDN", t3[t3.SERVICE_CLOUDRECORD = 22] = "SERVICE_CLOUDRECORD", t3[t3.SERVICE_INNER_ECHO = 23] = "SERVICE_INNER_ECHO", t3[t3.SERVICE_OUTER_ECHO = 24] = "SERVICE_OUTER_ECHO", t3[t3.SERVICE_LOCALHOST_ECHO = 25] = "SERVICE_LOCALHOST_ECHO", t3[t3.SERVICE_ECHO = 26] = "SERVICE_ECHO", t3[t3.SERVICE_DOCSERVICE = 27] = "SERVICE_DOCSERVICE", t3[t3.SERVICE_AUTHSVR = 28] = "SERVICE_AUTHSVR";
          }(_ || (_ = {}));
          var y, w = { width: 320, height: 240, frameRate: 15, bitRate: 300 }, S = { width: 640, height: 480, frameRate: 15, bitRate: 800 }, E = { width: 1280, height: 720, frameRate: 20, bitRate: 1500 }, k = { frameRate: 20, bitRate: 800 }, O = { frameRate: 15, bitRate: 1500 }, I = { frameRate: 5, bitRate: 2e3 };
          !function(t3) {
            t3[t3.IPv4Only = 0] = "IPv4Only", t3[t3.IPv4Prefer = 1] = "IPv4Prefer", t3[t3.IPv6Prefer = 2] = "IPv6Prefer";
          }(y || (y = {}));
          var R, T, C, A, z, D, N, P, M, x, j = { 0: "IPv4Only", 1: "IPv4Prefer", 2: "IPv6Prefer" };
          !function(t3) {
            t3[t3.IPv4 = 0] = "IPv4", t3[t3.IPv6 = 1] = "IPv6";
          }(R || (R = {})), function(t3) {
            t3[t3.kV4Only = 0] = "kV4Only", t3[t3.kV4AndV6 = 1] = "kV4AndV6", t3[t3.kV6AndV4 = 2] = "kV6AndV4";
          }(T || (T = {})), function(t3) {
            t3[t3.ZV4Only = 0] = "ZV4Only", t3[t3.ZV4Priority = 1] = "ZV4Priority", t3[t3.ZV6Priority = 2] = "ZV6Priority", t3[t3.ZV6AndV4Priority = 3] = "ZV6AndV4Priority";
          }(C || (C = {})), function(t3) {
            t3[t3.unreachable = 0] = "unreachable", t3[t3.unknown = 1] = "unknown", t3[t3.reachable = 2] = "reachable";
          }(A || (A = {})), function(t3) {
            t3[t3.probed = 0] = "probed", t3[t3.noProbe = 1] = "noProbe", t3[t3.probing = 2] = "probing";
          }(z || (z = {})), function(t3) {
            t3[t3.LOGOUT = 0] = "LOGOUT", t3[t3.TRY_LOGIN = 1] = "TRY_LOGIN", t3[t3.LOGIN = 2] = "LOGIN";
          }(D || (D = {})), function(t3) {
            t3[t3.RSP = 0] = "RSP", t3[t3.PUSH = 1] = "PUSH";
          }(N || (N = {})), function(t3) {
            t3.Logining = "LOGINING", t3.Logined = "LOGINED", t3.LoginFailed = "LOGIN_FAILED", t3.Reconnecting = "RECONNECTING", t3.Reconnected = "RECONNECTED", t3.ReconnectFailed = "RECONNECT_FAILED", t3.Kickout = "KICKOUT", t3.Logout = "LOGOUT", t3.LogoutFailed = "LOGOUT_FAILED";
          }(P || (P = {})), function(t3) {
            t3[t3.ZegoRoomTransparentMessageModeOnlyClient = 0] = "ZegoRoomTransparentMessageModeOnlyClient", t3[t3.ZegoRoomTransparentMessageModeOnlyServer = 1] = "ZegoRoomTransparentMessageModeOnlyServer", t3[t3.ZegoRoomTransparentMessageModeClientAndServer = 2] = "ZegoRoomTransparentMessageModeClientAndServer";
          }(M || (M = {})), function(t3) {
            t3[t3.ZegoRoomTransparentMessageNormal = 0] = "ZegoRoomTransparentMessageNormal", t3[t3.ZegoRoomTransparentMessageSequence = 1] = "ZegoRoomTransparentMessageSequence";
          }(x || (x = {}));
          var q = { SERVER: { code: 0, msg: "liverooom cmd error" }, SUCCESS: { code: 0, msg: "success." }, INIT: { code: 2000000001, msg: "init sdk wrong" }, NOT_LOGIN: { code: 1000002, msg: "not login" }, APPID_INVALID: { code: 1001004, msg: "appid invalid" }, SDK_NOT_SPECIAL: { code: 1001005, msg: "sdk require special" }, NETWORK_BROKEN: { code: 1000017, msg: "network is broken" }, GEO_SET_ERROR: { code: 1000018, msg: "geo set error" }, INPUT_PARAM: { code: 1100001, msg: "input parm error." }, TIMEOUT: { code: 1100002, msg: "network timeout." }, SOCKET_CLOSE: { code: 1100003, msg: "socket close" }, NET_SOCKET_TIMEOUT: { code: 1100004, msg: "net agent timeout" }, NET_HB_TIMEOUT: { code: 1100005, msg: "net hb timeout" }, INIT_SDK_WRONG: { code: 1101e3, msg: "init sdk wrong" }, ROOM_COUNT_EXCEED: { code: 1002001, msg: "login rooms exceeds the upper limit" }, MULTI_ROOM_COUNT_EXCEED: { code: 1002037, msg: "login rooms exceeds the upper limit" }, ROOM_ROOMID_INCORRECT: { code: 1002002, msg: "have not logged in with this room ID" }, USER_ID_NULL: { code: 1002005, msg: "user ID is empty" }, USER_ID_INVALID_CHARACTER: { code: 1002006, msg: "user ID contains illegal characters" }, USER_ID_TOO_LONG: { code: 1002007, msg: "user ID is too long" }, USER_NAME_NULL: { code: 1002008, msg: "username is empty" }, USER_NAME_TOO_LONG: { code: 1002010, msg: "username is too long" }, ROOM_ID_NULL: { code: 1002011, msg: "room ID is empty" }, ROOM_ID_INVALID_CHARACTER: { code: 1002012, msg: "room ID contains illegal characters" }, ROOM_ID_TOO_LONG: { code: 1002013, msg: "room ID is too long" }, ROOM_NOT_EXIST: { code: 1002014, msg: "room not exist" }, ROOM_EXTRA_INFO_KEY_LIMIT: { code: 1002017, msg: "room extra info key exceed the limit" }, DIFFERENT_USER_ID: { code: 1002018, msg: "In multi-room mode, only the same user id can be used." }, NO_PUBLISH_AUTH: { code: 1002082, msg: "Token does not have the permission to publish current stream." }, USER_HAD_LOGIN_OTHER: { code: 1002086, msg: "the user had logined in other device" }, LOGIN_TIMEOUT: { code: 1002031, msg: "login timeout" }, ROOM_MAX_USER_COUNT: { code: 1002034, msg: "users logging into the room exceeds the maximum number" }, MULTI_ROOM_UNABLE: { code: 1002036, msg: "multi room unable" }, MULTIPLE_LOGIN_KICKOUT: { code: 1002050, msg: "kickout may be the same user ID login other" }, NETWORK_RECOVERY: { code: 1002051, msg: "network recovery" }, ROOM_RETRY_TIMEOUT: { code: 1002053, msg: "network is broken and login fail." }, MANUAL_KICKOUT: { code: 1002055, msg: "server has sent a signal to kick out" }, REPEATEDLY_LOGIN: { code: 1002056, msg: "user repeatedly login" }, REPEATEDLY_ENTER_ROOM: { code: 1002057, msg: "user repeatedly enter room" }, ALREADY_LOGIN: { code: 1002058, msg: "user already logged in" }, LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID: { code: 1002064, msg: "the roomID is used by the login room interface" }, FORBID_BLACK_USER: { code: 1002066, msg: "forbid black user" }, TOKEN_USERID_ERROR: { code: 1002077, msg: "the token userid error" }, NATIVE_TOKEN_EXPIRED: { code: 1002078, msg: "token expire error" }, WHITE_BOARD_VERSION_ERROR: { code: 1002098, msg: "Mismatch with RTC SDK version, please upgrade ZegoSuperBoard or ZegoWhiteboardView SDK to the latest version" }, ROOM_INNER_ERROR: { code: 1002099, msg: "room inner error" }, HEARTBEAT_TIMEOUT: { code: 1102001, msg: "heartbeat timeout." }, PARSE_JSON_ERROR: { code: 1102011, msg: "parse json error." }, LOGIN_PROCESSING: { code: 1102012, msg: "login is processing." }, LIVEROMM_REQUEST_ERROR: { code: 1102013, msg: "liveroom request error." }, ZPUSH_REQUEST_FAIL: { code: 1102014, msg: "zpush request fail." }, LOGIN_STATE_WRONG: { code: 1102015, msg: "user login state is wrong." }, TOKEN_ERROR: { code: 1102016, msg: "token error" }, DIAPATCH_ERROR: { code: 1102017, msg: "dispatch error" }, TOKEN_EXPIRED: { code: 1102018, msg: "token expired" }, SUBCMD_ERROR: { code: 1102019, msg: "subcmd error." }, ZEGO_AUTH_ERROR: { code: 1102020, msg: "zego auth error." }, BIZ_CHANNEL_ERROR: { code: 1102021, msg: "biz channel error." }, UPLOAD_LOG_ERROR: { code: 1102025, msg: "upload zip logs failed" } }, L = o(4908), B = o(4872), U = [-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1];
          var G = o(8866), J = o(955), F = o.n(J), H = o(5178), V = o.n(H), Q = "TOKEN_ERROR", Y = "TOKEN_EXPIRED", K = "ROOM_INNER_ERROR";
          function Z(t3, i3, n3) {
            i3.success && (n3[t3 + "SuccessCallback"] = i3.success), i3.error && (n3[t3 + "ErrorCallback"] = i3.error);
          }
          function X(t3, i3) {
            return i3[t3 + "SuccessCallback"];
          }
          function W(t3, i3, n3, e3) {
            Z(t3, { success: function(t4, e4) {
              for (var r3 = [], s3 = 2; s3 < arguments.length; s3++)
                r3[s3 - 2] = arguments[s3];
              !function(t5, i4, n4, e5, r4) {
                switch (n4) {
                  case "eventStart":
                    t5.eventStart(i4, e5);
                    break;
                  case "eventEndWithMsgInfo":
                    t5.eventEndWithMsgInfo(i4, e5, r4[0]);
                    break;
                  case "addEventMsg":
                    t5.addEventMsg(i4, e5, r4[0], r4[1]);
                    break;
                  case "addEvent":
                    t5.addEvent(i4, e5);
                    break;
                  case "eventEnd":
                    t5.eventEnd(i4, e5);
                    break;
                  case "addMsgInfo":
                    t5.addMsgInfo(i4, r4[0]);
                }
              }(i3, n3, t4, e4, r3);
            } }, e3);
          }
          function $(t3, i3) {
            return { code: t3, msg: i3 || "liveroom error" };
          }
          function tt(t3, i3) {
            delete i3[t3 + "SuccessCallback"], delete i3[t3 + "ErrorCallback"];
          }
          function it(t3, i3) {
            var n3 = { code: t3, message: "server error" };
            return n3.code = t3 + 52e6, i3 && (n3.message = i3), n3;
          }
          function nt(t3, i3) {
            var n3 = { 1016: "MULTI_ROOM_UNABLE", 1105: "ROOM_MAX_USER_COUNT", 1012: "PUBLISHER_ERROR_REPETITIVE_PUBLISH_STREAM", 2002: Q, 2003: "ROOM_ERROR_LOGIN_TIMEOUT", 2010: Q, 5022: "MULTI_ROOM_COUNT_EXCEED", 5030: "FORBID_BLACK_USER" };
            return t3 > 2e5 && t3 < 3e5 ? n3[t3 - 2e5] || K : t3 < 2e5 ? { 50013: "USER_HAD_LOGIN_OTHER", 50116: Q, 50117: Y, 50118: Q, 50119: Q, 50120: Q, 50121: Q, 50122: Q, 50123: Y, 50124: Q, 50125: Q, 50126: Q, 50127: Q, 50128: Q }[t3] || n3[t3] || K : n3[t3] || K;
          }
          function et(t3, i3, n3, e3) {
            var r3, s3 = [], o2 = [], u2 = [], a2 = [];
            n3 || (n3 = []);
            for (var c2 = 0; c2 < n3.length; c2++)
              if (n3[c2].anchor_id_name != t3 && n3[c2].id_name != t3 && n3[c2].user_id != t3) {
                r3 = false;
                for (var h2 = 0; h2 < i3.length; h2++)
                  if (n3[c2].stream_id === i3[h2].stream_id) {
                    n3[c2].extra_info !== i3[h2].extra_info && u2.push(n3[c2]), JSON.stringify(n3[c2].stream_attr_opts) !== JSON.stringify(i3[h2].stream_attr_opts) && a2.push(n3[c2]), r3 = true;
                    break;
                  }
                r3 || s3.push(n3[c2]);
              }
            for (var f2 = 0; f2 < i3.length; f2++)
              if (i3[f2].anchor_id_name != t3 && i3[f2].id_name != t3 && i3[f2].user_id != t3) {
                r3 = false;
                for (var l2 = 0; l2 < n3.length; l2++)
                  if (i3[f2].stream_id === n3[l2].stream_id && 1 !== n3[l2].stream_state) {
                    r3 = true;
                    break;
                  }
                r3 || o2.push(i3[f2]);
              }
            i3.splice(0);
            for (c2 = 0; c2 < n3.length; c2++)
              i3.push(n3[c2]);
            e3(s3, o2, u2, a2);
          }
          function rt(t3, i3, n3) {
            return i3 = null != i3 ? i3 : 1, n3 = null != n3 ? n3 : 1e4, (0, B.Cs)(t3) && t3 % 1 == 0 && t3 >= i3 && t3 <= n3;
          }
          function st(t3, i3) {
            var n3, e3 = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), r3 = [];
            if (i3 = i3 || e3.length, t3)
              for (n3 = 0; n3 < t3; n3++)
                r3[n3] = e3[0 | Math.random() * i3];
            else {
              var s3 = void 0;
              for (r3[8] = r3[13] = r3[18] = r3[23] = "-", r3[14] = "4", n3 = 0; n3 < 36; n3++)
                r3[n3] || (s3 = 0 | 16 * Math.random(), r3[n3] = e3[19 == n3 ? 3 & s3 | 8 : s3]);
            }
            return r3.join("");
          }
          function ot(t3, i3, n3) {
            return t3.push(i3), t3.length > n3 && t3.shift(), t3.reduce(function(t4, i4) {
              return t4 + i4;
            }) / t3.length;
          }
          function ut(t3) {
            return t3 < 600 ? 97 - Math.pow(0.09 * t3, 1.1) : 18 * Math.exp(2e-3 * (600 - t3));
          }
          function at(t3, i3) {
            if (i3) {
              return t3 <= 55 ? 99 - Math.pow(0.8 * t3, 1.18) : e2.Bl.PoorMinQuality;
            }
            var n3 = 100 * t3;
            return n3 <= 40 ? 96 - Math.pow(n3, 1.22) : e2.Bl.PoorMinQuality;
          }
          function ct(t3, i3, n3) {
            if ((0, B.TE)(n3))
              return Math.min(ut(t3), at(i3, true));
            var r3 = function(t4) {
              return t4 <= 50 ? 98 - Math.pow(t4, 1.15) : e2.Bl.PoorMinQuality;
            }(n3);
            return 0.15 * r3 + 0.85 * Math.min(ut(t3), at(i3, false));
          }
          function ht(t3) {
            return t3 >= e2.Bl.ExcellentMinQuality ? e2.b3.Excellent : t3 >= e2.Bl.GoodMinQuality ? e2.b3.Good : t3 >= e2.Bl.MiddleMinQuality ? e2.b3.Middle : t3 >= e2.Bl.PoorMinQuality ? e2.b3.Poor : e2.b3.Die;
          }
          function ft() {
            var t3 = !!window.RTCRtpScriptTransform;
            if (!t3) {
              var i3 = !!RTCRtpSender.prototype.createEncodedStreams, n3 = false;
              try {
                new ReadableStream();
                n3 = true;
              } catch (t4) {
                console.error("Transferable streams are not supported.");
              }
              t3 = i3 && n3;
            }
            return t3;
          }
          function lt() {
            return "function" == typeof RTCPeerConnection.prototype.setConfiguration;
          }
          function dt(t3) {
            for (var i3, n3 = 0, e3 = t3.length, r3 = ""; n3 < e3; )
              i3 = t3.subarray(n3, Math.min(n3 + 32768, e3)), r3 += String.fromCharCode.apply(null, Array.from(i3)), n3 += 32768;
            return btoa(r3);
          }
          function vt(t3) {
            var i3 = [];
            return t3.getTracks().forEach(function(t4) {
              i3.push("audio" === t4.kind ? "mic(".concat(t4.id, ",").concat(t4.label, ",").concat(t4.muted, ",").concat(t4.enabled, ",").concat(t4.readyState, ")") : "camera(".concat(t4.id, ",").concat(t4.label, ",").concat(t4.muted, ",").concat(t4.enabled, ",").concat(t4.readyState, ")"));
            }), i3.join("|");
          }
          function mt(t3, i3, n3, e3) {
            var r3 = (null == e3 ? void 0 : e3.streamID) ? " ".concat(e3.streamID, " ") : "";
            i3.info("audio" === t3.kind ? n3 + " mic(".concat(t3.id, ",").concat(t3.label, ",").concat(t3.muted, ",").concat(t3.enabled, ",").concat(t3.readyState, ")") : n3 + " camera(".concat(t3.id, ",").concat(t3.label, ",").concat(t3.muted, ",").concat(t3.enabled, ",").concat(t3.readyState, ")"), { streamid: r3 });
          }
          function pt(t3, i3) {
            var n3 = {};
            if (t3)
              for (var e3 = 0, r3 = Object.keys(t3); e3 < r3.length; e3++) {
                var s3 = r3[e3];
                i3.includes(s3) || (n3[s3] = t3[s3]);
              }
            return n3;
          }
          var gt = function(t3) {
            var i3 = 0;
            if (0 == t3.length)
              return i3;
            for (var n3 = 0; n3 < t3.length; n3++) {
              i3 = (i3 << 5) - i3 + t3.charCodeAt(n3), i3 &= i3;
            }
            return i3 >>> 0;
          };
          function bt(t3, i3, n3) {
            var r3 = (/* @__PURE__ */ new Date()).getTime(), s3 = (0, e2.wN)(), o2 = "".concat(t3, "_").concat(i3, "_").concat(n3, "_").concat(r3, "_").concat(s3);
            return gt(o2);
          }
          function _t(t3, i3) {
            return (t3 & 1 << i3) >> i3;
          }
          function yt() {
            var t3 = window.navigator.userAgent, i3 = null != window.ActiveXObject && -1 != t3.indexOf("MSIE"), n3 = -1 != t3.indexOf("Firefox"), e3 = null != window.opr, r3 = t3.indexOf("Chrome") && window.chrome, s3 = -1 != t3.indexOf("Safari") && -1 != t3.indexOf("Version");
            return i3 ? "IE" : n3 ? "Firefox" : e3 ? "Opera" : r3 ? "Chrome" : s3 ? "Safari" : "Unkown";
          }
          function wt() {
            var t3 = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            return ((null == t3 ? void 0 : t3.effectiveType) || (null == t3 ? void 0 : t3.type) || "unknown").toUpperCase();
          }
          function St(t3, i3) {
            return F().encrypt(t3, i3).toString();
          }
          function Et(t3, i3) {
            try {
              return F().decrypt(t3, i3).toString(V());
            } catch (t4) {
              return "";
            }
          }
          function kt(t3, i3) {
            try {
              localStorage.setItem(t3, i3);
            } catch (t4) {
            }
          }
          function Ot(t3) {
            try {
              return localStorage.getItem(t3);
            } catch (t4) {
            }
          }
          function It(t3, i3, n3, e3) {
            return { interResolve: function(e4) {
              t3.uploadReport(i3), n3(e4);
            }, interReject: function(n4, r3) {
              var s3;
              void 0 === r3 && (r3 = ""), (s3 = n4.code < 2e9 && n4.code > 1e9 ? it(n4.code, n4.msg) : { code: n4.code, message: n4.msg }) && t3.addMsgInfo(i3, { error: s3.code, message: s3.message + r3 }), t3.uploadReport(i3), e3({ errorCode: n4.code || n4.errorCode });
            } };
          }
          function Rt(t3) {
            return !(!t3.startsWith("wss") || -1 === t3.indexOf("test") || !t3.endsWith("ws"));
          }
          function Tt(t3) {
            try {
              var i3 = Uint8Array.from(function(t4) {
                var i4, n4, e4, r3, s3, o2, u2;
                for (o2 = t4.length, s3 = 0, u2 = ""; s3 < o2; ) {
                  do {
                    i4 = U[255 & t4.charCodeAt(s3++)];
                  } while (s3 < o2 && -1 == i4);
                  if (-1 == i4)
                    break;
                  do {
                    n4 = U[255 & t4.charCodeAt(s3++)];
                  } while (s3 < o2 && -1 == n4);
                  if (-1 == n4)
                    break;
                  u2 += String.fromCharCode(i4 << 2 | (48 & n4) >> 4);
                  do {
                    if (61 == (e4 = 255 & t4.charCodeAt(s3++)))
                      return u2;
                    e4 = U[e4];
                  } while (s3 < o2 && -1 == e4);
                  if (-1 == e4)
                    break;
                  u2 += String.fromCharCode((15 & n4) << 4 | (60 & e4) >> 2);
                  do {
                    if (61 == (r3 = 255 & t4.charCodeAt(s3++)))
                      return u2;
                    r3 = U[r3];
                  } while (s3 < o2 && -1 == r3);
                  if (-1 == r3)
                    break;
                  u2 += String.fromCharCode((3 & e4) << 6 | r3);
                }
                return u2;
              }(t3), function(t4) {
                return t4.charCodeAt(0);
              }), n3 = new DataView(i3.buffer), e3 = void 0;
              return e3 = (0, B.JO)(n3.getBigInt64) ? n3.getBigUint64(0) : function(t4, i4, n4) {
                var e4 = n4.getUint32(t4, i4), r3 = n4.getUint32(t4 + 4, i4), s3 = i4 ? e4 + Math.pow(2, 32) * r3 : Math.pow(2, 32) * e4 + r3;
                return Number.isSafeInteger(s3) || console.warn(s3, "exceeds MAX_SAFE_INTEGER. Precision may be lost"), s3;
              }(0, false, n3), Number(e3 > 0 ? e3 : n3.getBigUint64(0, true));
            } catch (t4) {
              console.error("token error");
            }
            return -1;
          }
          function Ct(t3) {
            var i3 = (/* @__PURE__ */ new Date()).getTime(), n3 = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t4) {
              var n4 = (i3 + 16 * Math.random()) % 16 | 0;
              return i3 = Math.floor(i3 / 16), ("x" == t4 ? n4 : 3 & n4 | 8).toString(36);
            });
            if (0 === t3) {
              var e3 = function(t4) {
                var i4 = document.createElement("canvas"), n4 = i4.getContext("2d"), e4 = t4;
                n4.textBaseline = "top", n4.font = "14px 'Arial'", n4.fillStyle = "#f60", n4.fillRect(125, 1, 62, 20), n4.fillStyle = "#069", n4.fillText(e4, 2, 15), n4.fillStyle = "rgba(102, 204, 0, 0.7)", n4.fillText(e4, 4, 17);
                var r3 = i4.toDataURL().replace("data:image/png;base64,", ""), s3 = function(t5) {
                  var i5, n5, e5, r4 = "";
                  for (i5 = 0, n5 = (t5 += "").length; i5 < n5; i5++)
                    r4 += (e5 = t5.charCodeAt(i5).toString(16)).length < 2 ? "0" + e5 : e5;
                  return r4;
                }(atob(r3).slice(-16, -12));
                return s3;
              }("hello, zego");
              n3 = e3 + n3.slice(8);
            }
            return n3;
          }
          function At() {
            var t3 = n2.GG.NT_UNKNOWN, i3 = "", e3 = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
            return (i3 = ((null == e3 ? void 0 : e3.effectiveType) || (null == e3 ? void 0 : e3.type) || "unknown").toUpperCase()).indexOf("4G") > -1 ? t3 = n2.GG.NT_4G : i3.indexOf("2G") > -1 ? t3 = n2.GG.NT_2G : i3.indexOf("3G") > -1 ? t3 = n2.GG.NT_3G : i3.indexOf("WIFI") > -1 ? t3 = n2.GG.NT_WIFI : i3.indexOf("LINE") > -1 ? t3 = n2.GG.NT_LINE : i3.indexOf("NONE") > -1 && (t3 = n2.GG.NT_NONE), t3;
          }
          var zt, Dt, Nt = o(2799), Pt = 1, Mt = { product: "rtc_web", importLevel: n2.t0.H, levels: [0, 10, 100, 1e3], bps: 32e3 }, xt = "0c9e6e0f8c0a8f4e", jt = "z_net_access_servers", qt = "z_net_http3_access_servers", Lt = "z_net_v6_access_servers", Bt = "z_net_http3_v6_access_servers", Ut = "z_appconfig", Gt = "z_appconfig_etag", Jt = "z_geos", Ft = "z_rtc_domains", Ht = { domains: ["accesshub-wss.zego.im", "accesshub-wss.coolzcloud.com", "accesshub-wss.zegocloud.com"], logreportDomain: "weblogger-wss.coolfcloud.com", prefixDomain: "accesshub-wss", rtcLogPath: "zglog/ws", wssV6preFixDomain: "accesshub-wss-v6", normalPriDomains: ["coolbcloud.com", "coolgcloud.com"], specialDomain: "cooldcloud.com", mode: "online", modeNo: Nt.Mode.MODE_ONLINE, sdkType: 3, connectVer: 4, pcEstablishTimeout: 15, scheme: "wss", location: "accesshub", wssMessageType: 1 }, Vt = "weblogger-wss", Qt = "detaillog-global", Yt = [{ id: 2, relative_geofencings: [], accesshub: "accesshub-wss-geo-2", wssV6Accesshub: "accesshub-wss-geo-2-v6", logreport: "weblogger-wss-geo-2", detaillog: "detaillog-geo-2" }, { id: 3, relative_geofencings: [7], accesshub: "accesshub-wss-geo-3", wssV6Accesshub: "accesshub-wss-geo-3-v6", logreport: "weblogger-wss-geo-3", detaillog: "detaillog-geo-3" }, { id: 4, relative_geofencings: [7], accesshub: "accesshub-wss-geo-4", wssV6Accesshub: "accesshub-wss-geo-4-v6", logreport: "weblogger-wss-geo-4", detaillog: "detaillog-geo-4" }, { id: 5, relative_geofencings: [7], accesshub: "accesshub-wss-geo-5", wssV6Accesshub: "accesshub-wss-geo-5-v6", logreport: "weblogger-wss-geo-5", detaillog: "detaillog-geo-5" }, { id: 6, relative_geofencings: [7], accesshub: "accesshub-wss-geo-6", wssV6Accesshub: "accesshub-wss-geo-6-v6", logreport: "weblogger-wss-geo-6", detaillog: "detaillog-geo-6" }, { id: 7, relative_geofencings: [3, 4, 5, 6, 1], accesshub: "accesshub-wss-geo-7", wssV6Accesshub: "accesshub-wss-geo-7-v6", logreport: "weblogger-wss-geo-7", detaillog: "detaillog-geo-7" }], Kt = [2, 3, 4, 5, 6], Zt = "zm.0", Xt = "zm.wl", Wt = "zm.slf", $t = "zm.lg", ti = "zm.lo", ii = "zm.sr", ni = "zm.fac", ei = "zm.fac.tk", ri = "zm.hlu", si = "zm.cna", oi = "zm.gsac", ui = "zm.zpl.url", ai = "zm.glgf", ci = "zm.scsu", hi = "zm.on", fi = "zm.off", li = "zm.rntk", di = "zm.emr", vi = "zm.rm.lg", mi = "zm.rm.tl", pi = "zm.rm.lgr", gi = "zm.rm.lo", bi = "zm.rm.rr", _i = "zm.rm.kco", yi = "zm.rm.gwl", wi = "zm.hhl", Si = "zm.hb.st", Ei = "zm.hb.rsp", ki = "zm.rrh.hlf", Oi = "zm.us.ftu", Ii = "zm.us.urp", Ri = "zm.us.uph", Ti = "zm.us.mg", Ci = "zm.st.at", Ai = "ON_LISTENER", zi = "zm.st.ofls", Di = "zm.lrh.sm", Ni = "zm.lrh.hp", Pi = "zm.lrh.hsp", Mi = "zm.lrh.gs", xi = "zm.lrh.lgi", ji = "zm.lrh.ful", qi = "zm.lrh.lgo", Li = "zm.lrh.sru", Bi = "zm.lrh.scc", Ui = "zm.lrh.hd", Gi = "zm.lrh.hb", Ji = "zm.tc.ii", Fi = "zm.nt.od", Hi = function(t3) {
            return t3;
          }, Vi = function(t3) {
            return t3;
          }, Qi = function(t3) {
            return t3;
          }, Yi = function(t3) {
            return t3;
          }, Ki = function(t3) {
            return t3;
          }, Zi = { event: "/sdk/init", error: { kInvalidParamError: q.INPUT_PARAM }, system_info: Qi, servers: function(t3) {
            return t3;
          }, is_from_cache: Ki, project: Qi, liveroom_version: Qi, biz_type: Yi, lua_md5: Qi, sev_env: Qi, use_na: Yi }, Xi = "listener", Wi = "/sdk/set_debug", $i = Qi, tn = { event: "/sdk/set_log_config", error: { kInvalidParamError: q.INPUT_PARAM }, log_level: function(t3) {
            return t3;
          }, remote_log_level: Qi, log_url: Qi }, nn = "/log/upload", en = { event: "/sdk/login", room_id: Qi, room_sid_string: Qi, user_state_update: Yi, max_member_cnt: Yi, message: Qi, token: Qi, svr_env: Qi, server: Qi, try_cnt: Yi, room_mode: Yi, role: Yi, audience_create_room: Yi, liveroom_sid_string: Qi, error: { ROOM_ID_NULL: q.ROOM_ID_NULL, INPUT_PARAM: q.INPUT_PARAM, ROOM_ID_TOO_LONG: q.ROOM_ID_TOO_LONG, ROOM_ID_INVALID_CHARACTER: q.ROOM_ID_INVALID_CHARACTER, USER_ID_NULL: q.USER_ID_NULL, USER_ID_TOO_LONG: q.USER_ID_TOO_LONG, USER_ID_INVALID_CHARACTER: q.USER_ID_INVALID_CHARACTER, USER_NAME_NULL: q.USER_NAME_NULL, USER_NAME_TOO_LONG: q.USER_NAME_TOO_LONG, REPEATEDLY_LOGIN: q.REPEATEDLY_LOGIN, LOGIN_TIMEOUT: q.LOGIN_TIMEOUT, INNER_ERROR: q.ROOM_INNER_ERROR, NETWORK_BROKEN: q.NETWORK_BROKEN, ROOM_COUNT_EXCEED: q.ROOM_COUNT_EXCEED, DIFFERENT_USER_ID: q.DIFFERENT_USER_ID, LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID: q.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID } }, rn = "/sdk/sublogin", sn = { event: "/zpush/login", sdk_zpush_sessionid_string: Qi }, on = { event: "/liveroom/enter" }, un = { event: "/sdk/renew_token", error: { INPUT_PARAM: q.INPUT_PARAM, NOT_LOGIN: q.NOT_LOGIN }, token: Qi }, an = "/zpush/hb_timeout", cn = { event: "/sdk/logout", error: { INPUT_PARAM: q.INPUT_PARAM, ROOM_ROOMID_INCORRECT: q.ROOM_ROOMID_INCORRECT }, room_id: Qi, room_sid_string: Qi, is_multi: Ki, is_send_cmd_net: Ki, liveroom_sid_string: Qi, reason: Qi }, hn = "/switch/logout_user", fn = "/liveroom/quit", ln = Qi, dn = Qi, vn = "/zpush/multi_logout_user", mn = "/sdk/relogin", pn = { event: "/liveroom/tempbroken" }, gn = { event: "/sdk/reconnect", room_broken_time: Yi }, bn = { event: "/sdk/disconnect", valid_d: Yi, total_d: Yi, tempbroken_cnt: Yi }, _n = "/sdk/kickout", yn = Yi, wn = Yi, Sn = { event: "/liveroom/hb", room_id: Qi, room_sid_string: Qi, interval: Yi, stream_seq: Yi, server_user_seq: Yi, error: { NOT_LOGIN: q.NOT_LOGIN, HB_TIMEOUT: q.TIMEOUT } }, En = "/liveroom/recv_user_update_info", kn = "/sdk/listener", On = { event: "/sdk/enable_multi_room", is_multi: Ki, error: { kInvalidParamError: q.INPUT_PARAM, kAlreadyLoginError: q.ALREADY_LOGIN } }, In = "/cloud_setting/cache", Rn = Vi, Tn = "/cloud_setting/refresh", Cn = Vi, An = Vi, zn = "/cloud_setting/request", Dn = Vi, Nn = Vi, Pn = { event: "/liveroom/get_current_user_list", user_index: Yi, is_time_ascend: Ki, use_na: Yi }, Mn = "/zegoconn/connect", xn = Qi, jn = Yi, qn = "/zegoconn/create_socket", Ln = "/zegoconn/disconnect", Bn = Qi, Un = Qi, Gn = Yi, Jn = "/zegoconn/auto_dispatch", Fn = Hi, Hn = Hi, Vn = Hi, Qn = Hi, Yn = "/zegoconn/request", Kn = Vi, Zn = "/sdk_config/init", Xn = Vi, Wn = Yi, $n = { event: "/zegoconn/proxy_connect", service_no: Yi, proxy_link_sources: Yi, recv_time: Yi, connect_stream: Yi }, te = { event: "/zegoconn/proxy_broken", service_no: Yi }, ie = { event: "/zegoconn/proxy_disconnect", service_no: Yi }, ne = [50116, 50118, 50119, 50120, 50121, 50122, 50124, 50125, 50126, 50127, 50128], ee = function() {
            function t3() {
              this.RETRY_MAX_TIME = 300, this.RETRY_START_TIME_INTERVAL = 4, this.RETRY_CONTINUE_COUNT = 2, this.RETRY_MAX_TIME_INTERVAL = 32, this.retryStartTime = 0, this.retryActiveCount = 1, this.isOverTime = false;
            }
            return t3.prototype.init = function(t4, i3, n3, e3) {
              this.invalid(), this.stopMaxTime(), this.isOverTime = false, (0, B.Cs)(t4) && t4 < 3600 && (this.RETRY_MAX_TIME = t4), (0, B.Cs)(i3) && (this.RETRY_START_TIME_INTERVAL = i3), (0, B.Cs)(n3) && (this.RETRY_CONTINUE_COUNT = n3), (0, B.Cs)(e3) && (this.RETRY_MAX_TIME_INTERVAL = e3);
            }, t3.prototype.invalid = function() {
              this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.startRetryTimer && clearTimeout(this.startRetryTimer), this.startRetryTimer = null, this.retryStartTime = 0, this.retryActiveCount = 1;
            }, t3.prototype.isRetrying = function() {
              return null !== this.retryTimer || null !== this.startRetryTimer || null !== this.maxTimer;
            }, t3;
          }(), re = o(8627), se = (zt = function(t3, i3) {
            return zt = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
              t4.__proto__ = i4;
            } || function(t4, i4) {
              for (var n3 in i4)
                Object.prototype.hasOwnProperty.call(i4, n3) && (t4[n3] = i4[n3]);
            }, zt(t3, i3);
          }, function(t3, i3) {
            if ("function" != typeof i3 && null !== i3)
              throw new TypeError("Class extends value " + String(i3) + " is not a constructor or null");
            function n3() {
              this.constructor = t3;
            }
            zt(t3, i3), t3.prototype = null === i3 ? Object.create(i3) : (n3.prototype = i3.prototype, new n3());
          }), oe = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, ue = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this) || this;
              return r3.an = i4, r3.pn = n3, r3.Ar = e3, r3.zr = 0, r3.Dr = 0, r3.Pr = 3, r3.Mr = "", r3.lastError = 0, r3.loginCompleted = false, r3.loginRoomCallback = {}, r3;
            }
            return se(i3, t3), Object.defineProperty(i3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), i3.prototype.renewLocalToken = function(t4, i4) {
              this.token = t4, this.Ar.token = this.token;
              var n3 = (/* @__PURE__ */ new Date()).getTime(), e3 = parseInt(t4.substring(0, 2)), r3 = void 0;
              if (i4 && (0, B.Cs)(i4))
                r3 = 1e3 * i4;
              else if ((0, B.QP)(t4) && e3 >= 3) {
                var s3 = 1e3 * Tt(t4.substring(2));
                this.an.info("zm.rm.rlt time " + s3 + " " + n3 + " " + this.pn.local_time_deviation), r3 = s3 - (n3 - this.pn.local_time_deviation);
              }
              r3 && this.roomHandler.resetTokenTimer(r3), this.an.setTokenInfo(t4), this.pn.actionListener("_tokenRenewed", t4, this.Ar.roomID);
            }, i3.prototype.initRoom = function(t4, i4, n3, e3, r3) {
              this.roomHandler = t4, this.roomID = i4, this.renewLocalToken(n3), this.user = e3, this.config = r3;
            }, i3.prototype.active = function(t4, i4) {
              var r3, s3, o2, u2 = this;
              void 0 === t4 && (t4 = false), this.an.info(vi + " retry call " + (null === (r3 = this.Ar) || void 0 === r3 ? void 0 : r3.roomID) + " " + t4);
              var a2 = (null === (s3 = this.loginRoomCallback) || void 0 === s3 ? void 0 : s3.success) ? rn : mn;
              if (this.jr || (this.jr = this.cr.createSpan(e2.t0.H, { key: en.event, par: this.roomID }, { key: a2, par: this.roomID }, a2, true), this.Mr = a2), this.roomHandler.setRunState(n2.UV.trylogin), this.Ar.isMulti && (null === (o2 = this.pn.roomModulesList.find(function(t5) {
                return !t5.isMulti;
              })) || void 0 === o2 ? void 0 : o2.runState) !== n2.UV.login)
                this.an.info(vi + " service is disconnected, multi room stop retry");
              else if (this.retryTimer)
                this.an.info(vi + " has actived, ignore");
              else {
                var c2 = this.pn.networkState == n2.D2.offline;
                if (c2) {
                  if (this.an.info(vi + " check if really offline. " + this.Dr), this.Dr >= this.Pr)
                    return void this.an.warn(vi + " network is broken, stop retry");
                } else
                  this.Dr = 0;
                if (this.isOverTime)
                  this.an.info(vi + " retry over time, stop retry");
                else {
                  var h2 = function() {
                    u2.an.info(vi + " interval " + u2.retryActiveInterval), u2.retryTimer = setTimeout(function() {
                      u2.roomHandler.login(u2.roomID, u2.token, u2.user, u2.config, function(t5) {
                        u2.pn.networkState = n2.D2.online, u2.handleLoginFinish(t5);
                      }, function(t5, i5) {
                        u2.handleLoginFinish(false, t5, i5);
                      }, i4), u2.retryTimer && clearTimeout(u2.retryTimer), u2.retryTimer = null, c2 ? u2.Dr++ : u2.retryActiveCount++;
                    }, t4 ? 0 : 1e3 * u2.retryActiveInterval);
                  };
                  if (1 == this.retryActiveCount)
                    (0, G.UY)().then(function(t5) {
                      u2.retryActiveInterval = Math.floor(t5 * (1 - u2.RETRY_START_TIME_INTERVAL) + u2.RETRY_START_TIME_INTERVAL), h2();
                    }).catch(function(t5) {
                      u2.retryActiveInterval = 0.5 * u2.RETRY_START_TIME_INTERVAL, h2();
                    });
                  else {
                    var f2 = Math.pow(2, Math.round(this.retryActiveCount / this.RETRY_CONTINUE_COUNT + 1));
                    this.retryActiveInterval = f2 > this.RETRY_MAX_TIME_INTERVAL ? this.RETRY_MAX_TIME_INTERVAL : f2, h2();
                  }
                }
              }
            }, i3.prototype.startMaxTime = function() {
              var t4 = this;
              this.maxTimer || (this.an.info(vi + " start max timer"), 0 === this.zr && (this.zr = (/* @__PURE__ */ new Date()).getTime()), this.maxTimer = setTimeout(function() {
                var i4;
                t4.an.info(vi + " over max time ".concat(t4.RETRY_MAX_TIME, "s, stop retry")), t4.isOverTime = true, t4.roomHandler.resetRoom(), 0 !== t4.zr && (i4 = (i4 = (/* @__PURE__ */ new Date()).getTime() - t4.zr) > 0 ? i4 : void 0), t4.qr(false, q.LOGIN_TIMEOUT), t4.jr && (t4.cr.spanEnd({ key: t4.Mr, par: t4.roomID }, { error: q.LOGIN_TIMEOUT.code, message: q.LOGIN_TIMEOUT.msg, try_time: i4 }), t4.jr = null), t4.loginRoomCallback.fail && (t4.loginRoomCallback.fail(q.LOGIN_TIMEOUT), t4.roomHandler.disconnectedHandle(q.LOGIN_TIMEOUT), t4.resetCallBack());
              }, 1e3 * this.RETRY_MAX_TIME));
            }, i3.prototype.stopMaxTime = function() {
              this.an.info(vi + " stop max timer"), 0 !== this.zr && (this.zr = 0), this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null;
            }, i3.prototype.onactive = function(t4, i4) {
            }, i3.prototype.retryLoginRoom = function(t4, i4, n3) {
              void 0 === t4 && (t4 = false), void 0 === i4 && (i4 = false), !this.maxTimer && this.startMaxTime(), i4 && this.Ar.resetSessionInfo(), this.active(t4, n3);
            }, i3.prototype.handleError = function(t4, i4) {
              if (this.RETRY_MAX_TIME < 3)
                return false;
              var e3 = t4.code;
              if (i4) {
                var r3 = [200207, 200208];
                if (e3 >= 40001 && e3 <= 40100 || e3 >= 50200 && e3 <= 50299 || [201002, 30019].includes(e3))
                  return this.Ar.resetSessionInfo(), true;
                var s3 = oe(oe([202002, 205030, 205035], ne, true), [50013], false);
                return 10015 === e3 ? (this.Ar.retryConnect(), true) : !(null == s3 ? void 0 : s3.includes(e3)) && (!!r3.includes(e3) || this.Ar.lastRunState == n2.UV.login && (this.an.warn("zm.rrh.he reset"), this.Ar.resetUserSession(), this.invalid(), true));
              }
              return true;
            }, i3.prototype.setLoginRoomCallback = function(t4, i4) {
              this.loginRoomCallback.success = t4, this.loginRoomCallback.fail = i4;
            }, i3.prototype.loginFail = function(t4) {
              this.roomHandler.resetRoom(), this.qr(false, t4), this.loginRoomCallback.fail && (this.loginRoomCallback.fail(t4), this.roomHandler.disconnectedHandle(t4), this.resetCallBack());
            }, i3.prototype.handleLoginFinish = function(t4, i4, n3) {
              var e3;
              if (this.an.info(ki + " " + t4 + " " + JSON.stringify(i4)), i4) {
                if (this.jr) {
                  var r3 = void 0;
                  0 !== this.zr && (r3 = (r3 = (/* @__PURE__ */ new Date()).getTime() - this.zr) > 0 ? r3 : void 0), this.cr.spanEnd({ key: this.Mr, par: this.roomID }, { error: i4.code, message: i4.msg, try_time: r3 }), this.jr = null;
                }
                if (this.handleError(i4, n3))
                  this.an.info(ki + " retry"), [40001].includes(i4.code) ? (this.pn.roomModulesList.forEach(function(t5) {
                    t5.userHandler.updateUserDelete(t5.roomID);
                  }), this.retryLoginRoom(false, false, q.NETWORK_RECOVERY)) : this.retryLoginRoom();
                else {
                  this.an.info(ki + " reset"), this.roomHandler.resetRoom(), this.qr(t4, i4);
                  var s3 = this.Lr(i4.code);
                  if (this.loginRoomCallback.fail) {
                    this.loginRoomCallback.fail(i4);
                    var o2 = "";
                    n3 && i4.code === re.E9Y.code && (o2 = JSON.stringify({ server_code: s3 })), this.roomHandler.disconnectedHandle(i4, { extendedData: o2 }), this.resetCallBack();
                  }
                }
              } else {
                r3 = void 0;
                0 !== this.zr && (r3 = (r3 = (/* @__PURE__ */ new Date()).getTime() - this.zr) > 0 ? r3 : void 0), this.qr(t4, { code: 0, msg: "" }), this.jr && (this.cr.spanEnd({ key: this.Mr, par: this.roomID }, { room_id: this.roomID, room_sid_string: null === (e3 = this.Ar) || void 0 === e3 ? void 0 : e3.roomSidString, try_time: r3 }), this.jr = null), this.loginRoomCallback.success && (this.loginRoomCallback.success(t4), this.resetCallBack());
              }
            }, i3.prototype.invalid = function() {
              this.an.info("zm.rh.ivd end retry"), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.retryActiveCount = 1, this.Dr = 0;
            }, i3.prototype.qr = function(t4, i4) {
              this.stopMaxTime(), this.invalid(), this.onactive(t4, i4);
            }, i3.prototype.Lr = function(t4) {
              return e2.Kk + t4;
            }, i3.prototype.resetCallBack = function() {
              this.loginRoomCallback.success = void 0, this.loginRoomCallback.fail = void 0, this.loginCompleted = true;
            }, i3.prototype.resetError = function() {
              this.lastError = 0;
            }, i3;
          }(ee);
          !function(t3) {
            t3.NOT_EMPTY = "NOT_EMPTY", t3.ILLEGAL_CHARACTERS = "ILLEGAL_CHARACTERS", t3.TYPE_STRING = "TYPE_STRING", t3.TYPE_INTEGER = "TYPE_INTEGER", t3.TYPE_OBJECT = "TYPE_OBJECT", t3.MAX_LENGTH_10 = "MAX_LENGTH_10", t3.MAX_LENGTH_64 = "MAX_LENGTH_64", t3.MAX_LENGTH_100 = "MAX_LENGTH_100", t3.MAX_LENGTH_128 = "MAX_LENGTH_128", t3.MAX_LENGTH_256 = "MAX_LENGTH_256", t3.MAX_LENGTH_1024 = "MAX_LENGTH_1024";
          }(Dt || (Dt = {}));
          var ae = { error: { code: 0, msg: "suc" } }, ce = { NOT_EMPTY: function(t3, i3, n3, e3, r3) {
            return void 0 === i3 || "" === i3 || null === i3 ? (e3.error("".concat(n3, " ").concat(t3, " is empty")), r3) : ae;
          }, ILLEGAL_CHARACTERS: function(t3, i3, n3, e3, r3) {
            return (0, G.jy)(i3) ? ae : (e3.error("".concat(n3, " ").concat(t3, " contains illegal characters")), r3);
          }, TYPE_STRING: function(t3, i3, n3, e3, r3) {
            return (0, B.QP)(i3) ? ae : (e3.error("".concat(n3, " ").concat(t3, " must be string")), r3);
          }, TYPE_INTEGER: function(t3, i3, n3, e3, r3) {
            return (0, G.zQ)(i3, false) ? ae : (e3.error("".concat(n3, " ").concat(t3, "  must be integer number")), r3);
          }, TYPE_OBJECT: function(t3, i3, n3, e3, r3) {
            return i3 && (0, B.w)(i3) ? ae : (e3.error("".concat(n3, " ").concat(t3, "  must be object")), r3);
          }, MAX_LENGTH_10: function(t3, i3, n3, e3, r3) {
            return i3.length > 10 ? (e3.error("".concat(n3, " ").concat(t3, " is too long")), r3) : ae;
          }, MAX_LENGTH_64: function(t3, i3, n3, e3, r3) {
            return i3.length > 64 ? (e3.error("".concat(n3, " ").concat(t3, " is too long")), r3) : ae;
          }, MAX_LENGTH_100: function(t3, i3, n3, e3, r3) {
            return i3.length > 100 ? (e3.error("".concat(n3, " ").concat(t3, " is too long")), r3) : ae;
          }, MAX_LENGTH_128: function(t3, i3, n3, e3, r3) {
            return i3.length > 128 ? (e3.error("".concat(n3, " ").concat(t3, " is too long")), r3) : ae;
          }, MAX_LENGTH_256: function(t3, i3, n3, e3, r3) {
            return i3.length > 256 ? (e3.error("".concat(n3, " ").concat(t3, " is too long")), r3) : ae;
          }, MAX_LENGTH_1024: function(t3, i3, n3, e3, r3) {
            return i3.length > 1024 ? (e3.error("".concat(n3, " ").concat(t3, " is too long")), r3) : ae;
          } };
          function he(t3, i3) {
            var n3 = [], e3 = {};
            for (var r3 in t3) {
              e3[t3[r3].order] = t3[r3], t3[r3].key = r3;
            }
            for (var s3 in e3)
              n3.push(e3[s3]);
            for (var o2 = 0; o2 < n3.length; o2++)
              for (var u2 = n3[o2].rules, a2 = 0; a2 < u2.length; a2++) {
                var c2 = { key: n3[o2].key, value: n3[o2].value, action: i3.action, logger: i3.logger }, h2 = c2.value, f2 = u2[a2].name ? "" + u2[a2].name : "";
                if ((void 0 === h2 && f2 === Dt.NOT_EMPTY || void 0 !== h2) && ce[f2]) {
                  var l2 = ce[f2](c2.key, h2, c2.action, c2.logger, u2[a2]);
                  if (l2 != ae)
                    return l2;
                }
              }
            return ae;
          }
          var fe = o(5733), le = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, de = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, ve = function() {
            function t3(t4, i3) {
              this.an = t4, this._dataReport = i3, this.id = "", this._debug = false, this.appConfigEtag = -1, this.appConfigFetched = false, this.customSetLogURL = false, this.requestList = {}, this.mode = Nt.Mode.MODE_ONLINE, this.connectState = "connected", this.testNetPackageSize = false, this.netGeoFencing = {}, this.agentIpStackDetection = { IPv4: A.unknown, IPv6: A.unknown }, this.isFlutter = false, this.agentConnectIPStackType = R.IPv4, this.advanceConfig = {}, this.svrDomains = {}, this.userListenerList = ["roomUserUpdate", "roomOnlineUserCountUpdate", "IMRecvCustomCommand", "IMRecvBroadcastMessage", "roomExtraInfoUpdate", "IMRecvBarrageMessage", "roomStateUpdate", "tokenWillExpire", "roomStateChanged", "recvRoomTransparentMessage"], this._testEnvironment = false, this._env = 0, this.type = "PUBLIC", this.debugCustom = false, this.configOK = false, this.role = 2, this.relateService = [], this.maxMemberCount = 0, this.roomCreateFlag = 1, this.local_time_deviation = 0, this.callbackList = {}, this.listenerList = { roomUserUpdate: [], roomOnlineUserCountUpdate: [], getAnchorInfo: [], _getAnchorInfo: [], IMRecvCustomCommand: [], IMRecvBroadcastMessage: [], recvReliableMessage: [], roomExtraInfoUpdate: [], IMRecvBarrageMessage: [], recvJoinLiveRequest: [], recvInviteJoinLiveRequest: [], recvEndJoinLiveCommand: [], roomLoginResponse: [], _roomLogin: [], _appConfigRsp: [], _netAppConfigRsp: [], _connectChanged: [], HBResponse: [], roomStateUpdate: [], _roomStateUpdate: [], _getTotalUserList: [], _userStateUpdate: [], _recvBigRoomMessage: [], _recvRoomMsg: [], _kickout: [], tokenWillExpire: [], _stopStream: [], roomStateChanged: [], _userTransUpdate: [], _uaHeartBeatTimeout: [], roomTokenWillExpire: [], _tokenRenewed: [], _protobufResponse: [], _cloudSettingNotify: [], _settingCanFetch: [], _beforeSwitchRoom: [], _afterSwitchRoom: [], _experimentalAPICallback: [], recvRoomTransparentMessage: [] }, this.reportList = {}, this.reportSeqList = { login: 0, relogin: 0 }, this.networkState = n2.D2.online, this.roomRetryTime = 300, this.roomModulesList = [], this.isMultiRoom = false, this.setMultiRoom = false, this.protoFormat = "json", this.settingFetched = false, this.configRoomAuth = false, this.configCheckToken = false, this.Br = false, this._sdkVersion = "unknown", this.Ur = void 0, this.mode = Ht.modeNo;
            }
            return Object.defineProperty(t3.prototype, "selectIPStackMode", { get: function() {
              var t4;
              return this.settingConfig.getSettingWithUserParams("ip_stack_mode", null === (t4 = gs.engineOptions) || void 0 === t4 ? void 0 : t4.ipStackMode);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "debug", { get: function() {
              return this._debug;
            }, set: function(t4) {
              this._debug = t4, fe.LoggerStateCenter.getInstance().debug = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "testEnvironment", { get: function() {
              return this._testEnvironment;
            }, set: function(t4) {
              this._testEnvironment = t4, fe.LoggerStateCenter.getInstance().testEnvironment = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "ENV", { get: function() {
              return this._env;
            }, set: function(t4) {
              this._env = t4, fe.LoggerStateCenter.getInstance().ENV = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "roomid", { get: function() {
              return this.roomModulesList[0] ? this.roomModulesList[0].roomID : "";
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "serverTimeOffset", { get: function() {
              return this.roomModulesList[0] ? this.roomModulesList[0].messageHandler.Gr : 0;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "enableWSLog", { get: function() {
              var t4, i3;
              return 1 === (null === (i3 = null === (t4 = this.appConfig) || void 0 === t4 ? void 0 : t4.log_config) || void 0 === i3 ? void 0 : i3.ws_log) || this.Br;
            }, enumerable: false, configurable: true }), t3.prototype.getRequestId = function() {
              return this.idName + "-" + (0, e2.Mo)();
            }, t3.prototype.actionListener = function(t4) {
              for (var i3 = this, n3 = [], r3 = 1; r3 < arguments.length; r3++)
                n3[r3 - 1] = arguments[r3];
              var s3 = ["roomStateChanged", "roomExtraInfoUpdate", "tokenWillExpire"].includes(t4);
              if (s3 && this.listenerList[t4]) {
                var o2 = this.reporter.createSpan(e2.t0.H, { key: Xi }, { key: "" }, kn);
                o2.setAttributes({ listener: t4, listener_params: JSON.stringify(n3) }), o2.end();
              }
              s3 && this.an.info("zm.al ".concat(t4, " ").concat(JSON.stringify(n3), ". pageID: ").concat(gs.pageID, " , instID: ").concat(this.id)), this.listenerList[t4] && this.listenerList[t4].forEach(function(e3) {
                if (i3.userListenerList.includes(t4))
                  setTimeout(function() {
                    try {
                      e3.apply(void 0, n3);
                    } catch (n4) {
                      throw i3.an.error(Ci + " " + t4 + " " + JSON.stringify(n4)), n4;
                    }
                  }, 0);
                else
                  try {
                    e3.apply(void 0, n3);
                  } catch (n4) {
                    throw i3.an.error(Ci + " " + t4 + " " + JSON.stringify(n4)), n4;
                  }
              });
            }, t3.prototype.onListener = function(t4, i3) {
              return this.listenerList[t4] ? (0, B.JO)(i3) ? (-1 == this.listenerList[t4].indexOf(i3) && this.listenerList[t4].push(i3), true) : (this.an.error(Ai + " listener callBack must be funciton"), false) : (this.an.error(Ai + " event " + t4 + " no found"), false);
            }, t3.prototype.offListener = function(t4, i3) {
              return this.listenerList[t4] ? (0, B.JO)(i3) ? (-1 !== this.listenerList[t4].indexOf(i3) && (this.listenerList[t4] = this.listenerList[t4].filter(function(t5) {
                return t5 !== i3;
              })), true) : (this.an.error(zi + " listener callBack must be funciton"), false) : (this.an.error(zi + " event " + t4 + " no found"), false);
            }, Object.defineProperty(t3.prototype, "sdKVersion", { get: function() {
              return this._sdkVersion;
            }, set: function(t4) {
              this._sdkVersion = t4;
            }, enumerable: false, configurable: true }), t3.prototype.getLogWhiteList = function(t4, i3) {
              var n3, r3;
              return void 0 === t4 && (t4 = false), void 0 === i3 && (i3 = 5), le(this, void 0, void 0, function() {
                var s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2 = this;
                return de(this, function(g2) {
                  switch (g2.label) {
                    case 0:
                      s3 = "" + i3, o2 = (0, G.fU)(this.reporter, e2.t0.H, "", "/log/whitelist", Zi.event), (0, B.Cs)(u2 = this.Ur) && ((0, G.P1)(u2), this.Ur = void 0), a2 = 1 === (null === (r3 = null === (n3 = this.appConfig) || void 0 === n3 ? void 0 : n3.log_config) || void 0 === r3 ? void 0 : r3.ws_log), 5 === i3 && (this.an.enableWebSocketLog(a2 || !this.logDomain), s3 += " ; ws_log: ".concat(a2)), g2.label = 1;
                    case 1:
                      return g2.trys.push([1, 3, , 4]), i3--, [4, this.an.getWhiteList()];
                    case 2:
                      return c2 = g2.sent(), s3 += " ".concat((0, G.iq)(c2)), h2 = false, f2 = false, l2 = void 0, 0 === c2.code && 1 & (d2 = c2.data).type && (1 & d2.upload_log_type && (l2 = d2, h2 = true, t4 ? this.an.uploadStorageLog().catch(function(t5) {
                        p2.an.warn("".concat(yi, " all zip log upload error: ") + JSON.stringify(t5) + t5);
                      }) : this.an.makeZipLogSpaceUpload().catch(function(t5) {
                        p2.an.warn("".concat(yi, " history zip log upload error: ") + JSON.stringify(t5) + t5);
                      })), this.Br = f2 = !!(64 & d2.upload_log_type), this.an.enableWebSocketLog(this.enableWSLog || !this.logDomain)), (0, G.lA)(o2, { need_retry: false, need_report: h2, need_ws: f2, log_type: null == l2 ? void 0 : l2.upload_log_type, log_start_time: null == l2 ? void 0 : l2.start_time, log_end_time: null == l2 ? void 0 : l2.end_time }), [3, 4];
                    case 3:
                      return v2 = g2.sent(), s3 += " ".concat(v2), m2 = false, i3 > 0 && (m2 = true, this.Ur = (0, G.v5)(function() {
                        p2.getLogWhiteList(t4, i3--);
                      }, 3e3)), o2.setAttributes({ need_retry: m2 }), this.reporter.setError(o2, { code: -1, message: "" + v2 }), [3, 4];
                    case 4:
                      return this.an.info("".concat(yi, " ").concat(s3)), [2];
                  }
                });
              });
            }, t3;
          }(), me = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, pe = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, ge = function() {
            function t3(t4, i3, e3, r3, s3) {
              this.an = t4, this.pn = i3, this._dataReport = e3, this.Jr = r3, this.Ar = s3, this.Hr = null, this.Vr = n2.zD, this.Qr = null, this.Yr = 0, this.Kr = false, this.Zr = 0, this.Xr = 0, this.Wr = 36e5;
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.$r = function() {
              var t4 = this;
              this.rs(), this.Qr = setTimeout(function() {
                t4.an.warn("zm.hb.to call. " + t4.Vr), t4.hbLogout(q.HEARTBEAT_TIMEOUT), t4.cr.createSpan(e2.t0.H, { key: en.event, par: t4.Ar.roomID }, { key: "" }, an).end();
              }, this.Vr);
            }, t3.prototype.rs = function() {
              this.Qr && clearTimeout(this.Qr);
            }, t3.prototype.init = function(t4) {
              var i3, e3, r3, s3, o2 = this;
              this.Kr = false, this.Xr = 0, this.Zr = 0, s3 = (0, B.kb)(null === (i3 = t4.body) || void 0 === i3 ? void 0 : i3.hearbeat_interval) ? t4.body.hearbeat_interval < n2.XV ? n2.XV : t4.body.hearbeat_interval : n2.Xs, this.Vr = (0, B.kb)(null === (e3 = t4.body) || void 0 === e3 ? void 0 : e3.hearbeat_timeout) ? null === (r3 = t4.body) || void 0 === r3 ? void 0 : r3.hearbeat_timeout : n2.zD;
              var u2 = Math.floor(Math.random() * s3);
              this.rs(), this.Hr && clearTimeout(this.Hr), this.Hr = setTimeout(function() {
                o2.start(s3);
              }, u2), this.Yr++;
            }, t3.prototype.start = function(t4) {
              return me(this, void 0, void 0, function() {
                var i3, n3, r3, s3, o2 = this;
                return pe(this, function(u2) {
                  switch (u2.label) {
                    case 0:
                      return this.an.info(Si + " call"), i3 = this.cr.createSpan(e2.t0.H, { key: en.event, par: this.Ar.roomID }, { key: "" }, Sn.event), this.Ar.isLogin() ? (n3 = function(t5, n4) {
                        var e3, r4, s4, u3, a2 = true;
                        if (t5.header && t5.body) {
                          if (0 !== (t5.body && t5.body.err_code)) {
                            var c2 = it(t5.body.err_code || t5.body.code, t5.body.err_message || t5.body.message);
                            i3.setAttributes({ error: c2.code, message: c2.message + t5.body.err_code }), a2 = false;
                          }
                        } else
                          i3.setAttributes({ error: t5.code > 0 ? t5.code : q.ROOM_INNER_ERROR.code, message: t5.msg ? t5.msg : q.ROOM_INNER_ERROR }), a2 = false;
                        o2.ss(t5, n4), 0 === (null === (e3 = null == t5 ? void 0 : t5.body) || void 0 === e3 ? void 0 : e3.err_code) && i3.setAttributes({ interval: Sn.interval(null === (r4 = null == t5 ? void 0 : t5.body) || void 0 === r4 ? void 0 : r4.hearbeat_interval), stream_seq: Sn.stream_seq(null === (s4 = null == t5 ? void 0 : t5.body) || void 0 === s4 ? void 0 : s4.stream_seq), server_user_seq: Sn.server_user_seq(null === (u3 = null == t5 ? void 0 : t5.body) || void 0 === u3 ? void 0 : u3.server_user_seq) });
                        var h2 = false;
                        a2 ? h2 = !o2.Xr || performance.now() - o2.Xr >= o2.Wr : h2 = true;
                        h2 && (o2.Xr = performance.now(), i3.end());
                      }, this.Jr.heartBeat(n3, n3, this.Ar, this.Vr), this.us = t4, r3 = this.us, this.Yr >= 2 ? [4, (0, G.UY)()] : [3, 2]) : (this.an.error(Si + " state error"), this.Xr = performance.now(), this.cr.setError(i3, Sn.error.NOT_LOGIN), [2]);
                    case 1:
                      return s3 = u2.sent(), r3 = Math.round(s3 * (this.us + 1)), this.Yr = 1, [3, 3];
                    case 2:
                      r3 = this.us, u2.label = 3;
                    case 3:
                      return this.Qr || this.$r(), this.Hr = setTimeout(function() {
                        o2.start(o2.us);
                      }, r3), this.an.info(Si + " call success"), [2];
                  }
                });
              });
            }, t3.prototype.ss = function(t4, i3) {
              var e3, r3;
              if (t4.body && t4.body.err_code && 0 !== t4.body.err_code) {
                if (this.an.error(Ei + " disconnect, server error=" + t4.body.err_code), 40001 == t4.body.err_code)
                  return;
                return t4.body.err_code == n2.OQ.ROOM_SESSION_ID_ERR ? void this.hbLogout(q.HEARTBEAT_TIMEOUT) : void this.hbLogout($(t4.body.err_code));
              }
              if (!t4.header || !t4.body)
                return this.an.error(Ei + " disconnect, error=" + JSON.stringify(t4) + ", seq = " + i3), void this.hbLogout(t4);
              (0, B.kb)(null === (e3 = t4.body) || void 0 === e3 ? void 0 : e3.hearbeat_interval) && (this.us = t4.body.hearbeat_interval, this.us < n2.XV && (this.us = n2.XV)), (0, B.kb)(null === (r3 = t4.body) || void 0 === r3 ? void 0 : r3.hearbeat_timeout) && (this.Vr = t4.body.hearbeat_timeout), this.Zr = (/* @__PURE__ */ new Date()).getTime(), this.Kr ? this.an.info(Ei + " has reset") : this.$r(), this.heartbeatRspNotiFy(t4, this.Ar.roomID), this.an.info(Ei + " call success " + i3);
            }, t3.prototype.heartbeatRspNotiFy = function(t4, i3) {
            }, t3.prototype.hbLogout = function(t4) {
            }, t3.prototype.resetHeartbeat = function() {
              clearTimeout(this.Hr), this.Hr = null, this.Kr = true, this.rs(), this.Yr = 0, this.Xr = 0, this.Zr = 0, this.an.info("zm.hb.rst call success");
            }, t3;
          }(), be = { code: 1102026, msg: "cancel login" };
          var _e = function(t3) {
            return function(t4) {
              var i3 = unescape || window.unescape;
              return Uint8Array.from(Array.from(i3(encodeURIComponent(t4))).map(function(t5) {
                return t5.charCodeAt(0);
              }));
            }(t3 = null != t3 ? t3 : "");
          }, ye = function(t3) {
            return function(t4) {
              var i3 = escape || window.escape;
              return decodeURIComponent(i3(String.fromCharCode.apply(String, Array.from(t4))));
            }(t3);
          };
          function we(t3) {
            if ("undefined" != typeof TextEncoder)
              return new TextEncoder().encode(t3).length;
            for (var i3 = 0, n3 = 0; n3 < t3.length; n3++) {
              var e3 = t3.charCodeAt(n3);
              i3 += e3 <= 127 ? 1 : e3 <= 2047 ? 2 : e3 <= 65535 ? 3 : 4;
            }
            return i3;
          }
          var Se = "DISCONNECTED", Ee = "CONNECTED", ke = "CONNECTING", Oe = o(7202), Ie = function() {
            function t3(t4, i3, n3, e3, r3) {
              this.an = t4, this.pn = i3, this._dataReport = n3, this.Ar = e3, this.Jr = r3, this.cs = null, this.hs = 1e4, this.fs = null, this.ls = 0, this.ds = 0, this.validTime = 0, this.totalTime = 0, this.brokenCounts = 0, this.vs = 0, this.ps = 0, this.gs = false, this.loginCallback = {};
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "_s", { get: function() {
              return this.Ar.roomID;
            }, enumerable: false, configurable: true }), t3.prototype.resetTokenTimer = function(t4) {
              var i3 = this;
              this.an.info("zm.rm.rst  call: " + (t4 = (t4 = (t4 -= 3e4) < 0 ? 0 : t4) > 2147483647 ? 2147483647 : t4)), this.fs && clearTimeout(this.fs), this.fs = setTimeout(function() {
                i3.pn.actionListener("tokenWillExpire", i3._s), i3.pn.actionListener("roomTokenWillExpire", i3._s);
              }, t4);
            }, t3.prototype.ys = function() {
              this.fs && clearTimeout(this.fs), this.fs = null;
            }, t3.prototype.setRunState = function(t4) {
              this.Ar.runState !== t4 && (this.Ar.lastRunState = this.Ar.runState, this.Ar.runState = t4);
            }, t3.prototype.ws = function() {
              this.cs && clearTimeout(this.cs), this.cs = null;
            }, t3.prototype.Ss = function(t4) {
              var i3, n3, r3, s3, o2, u2, a2, c2, h2 = this.cr.createSpan(e2.t0.H, { key: cn.event, par: this._s }, { key: "" }, this.pn.isMultiRoom ? fn : hn);
              t4 && "0" === this.Jr.zPushSid && (this.Jr.zPushSid = null === (n3 = null === (i3 = this.Jr) || void 0 === i3 ? void 0 : i3.switchSessionID) || void 0 === n3 ? void 0 : n3.toString()), this.updateTimes();
              var f2 = t4 ? null === (r3 = this.Jr) || void 0 === r3 ? void 0 : r3.zPushSid : null === (o2 = null === (s3 = this.Jr) || void 0 === s3 ? void 0 : s3.switchSessionID) || void 0 === o2 ? void 0 : o2.toString();
              h2.setAttributes({ room_id: cn.room_id(null === (u2 = this.Ar) || void 0 === u2 ? void 0 : u2.roomID), room_sid_string: cn.room_sid_string(null === (a2 = this.Ar) || void 0 === a2 ? void 0 : a2.roomSidString), liveroom_sid_string: ln(null === (c2 = this.Ar) || void 0 === c2 ? void 0 : c2.userSidString), sdk_zpush_sessionid_string: dn(f2), valid_d: this.validTime, total_d: this.totalTime, tempbroken_cnt: this.brokenCounts }), h2.end();
            }, t3.prototype.resetRoom = function(t4) {
              var i3, r3 = this;
              if (this.an.info(bi + " call"), this.pn.roomModulesList.length > 1 && !t4 && (this.Ar.isMulti = true), this.ws(), this.Ar.sessionExist && this.Ar.runState !== n2.UV.logout && !this.Ar.isDisConnect()) {
                var s3 = function(t5) {
                  r3.ks(t5, !r3.Ar.isMulti);
                };
                this.Jr.logout(this.Ar, s3, s3);
              }
              this.Ss(t4), this.setRunState(n2.UV.logout), this.Ar.resetRoomSession(), this.Ar.resetUserSession(), this.Ar.isMulti || (this.pn.userid = "", this.an.setSessionInfo(this.pn.appid, this._s, this.Ar.userSidString, this.pn.idName, this.pn.nickName, this.pn.sdKVersion), null === (i3 = this.Jr) || void 0 === i3 || i3.reset()), this.resetRoomCallBack(), this.pn.roomModulesList = this.pn.roomModulesList.filter(function(t5) {
                return t5 !== r3.Ar;
              });
              var o2 = this.pn.roomModulesList[0];
              (o2 && (o2.isMulti = false, o2.runState !== n2.UV.login && o2 && o2.retryRoom()), this.pn.isMultiRoom && 0 === this.pn.roomModulesList.length) && (this.cr.createSpan(e2.t0.H, { key: cn.event, par: this._s }, { key: "" }, vn).end(), this.Jr.zPushSid = "0");
              this.an.info(bi + " call success");
            }, t3.prototype.resetRoomCallBack = function() {
            }, t3.prototype.loginSuccessCallBack = function(t4, i3) {
            }, t3.prototype.handlePushKickout = function(t4, i3, r3) {
              var s3, o2, u2, a2, c2, h2 = this;
              this.an.info(_i + "  call " + JSON.stringify(t4));
              var f2 = function(t5) {
                var i4 = { code: t5, message: "kickout reason = " + t5 }, n3 = { code: 63000005, message: "zpush token expired", name: Y };
                switch (t5) {
                  case 1:
                    return { code: 63000001, message: "zpush multiple login kickout", name: "MULTIPLE_LOGIN_KICKOUT" };
                  case 2:
                    return { code: 63000002, message: "zpush manual kickout", name: "MANUAL_KICKOUT" };
                  case 4:
                    return n3;
                  default:
                    i4.code = t5, i4.message = "kickout reason = " + t5;
                }
                return i4;
              }(t4.body.reason || (null === (s3 = t4.body) || void 0 === s3 ? void 0 : s3.kickout_reason)), l2 = this.cr.createSpan(e2.t0.H, { key: en.event, par: this._s }, { key: "" }, _n);
              this.updateTimes(), l2.setAttributes({ error: null === (o2 = q[f2.name || "ROOM_INNER_ERROR"]) || void 0 === o2 ? void 0 : o2.code, message: f2.message, kickout_reason: yn((null === (u2 = t4.body) || void 0 === u2 ? void 0 : u2.reason) || (null === (a2 = t4.body) || void 0 === a2 ? void 0 : a2.kickout_reason)), need_relogin: wn(null === (c2 = null == t4 ? void 0 : t4.body) || void 0 === c2 ? void 0 : c2.need_relogin), valid_d: this.validTime, total_d: this.totalTime, tempbroken_cnt: this.brokenCounts }), l2.end();
              var d2 = this.Ar.roomTryHandler;
              if (d2)
                if (d2.onactive = function(t5, i4) {
                  h2.an.info(_i + " onactive"), h2.disconnectedHandle(i4), h2.pn.actionListener("_kickout", i4);
                }, t4.body.need_relogin && 1 == t4.body.need_relogin)
                  this.Ar.retryRoom(false, true);
                else {
                  this.setRunState(n2.UV.logout), this.resetRoom(i3);
                  var v2 = {};
                  if (t4 && t4.body.custom_reason)
                    v2.custom_kickout_message = t4.body.custom_reason;
                  else if (f2.name && q[f2.name]) {
                    v2.custom_kickout_message = q[f2.name].msg + "; kickout reason: " + (t4.body.reason || t4.body.kickout_reason);
                  }
                  this.disconnectedHandle(f2.name && q[f2.name] ? q[f2.name] : q.ROOM_INNER_ERROR, { extendedData: JSON.stringify(v2), isKickout: true }), this.pn.actionListener("_kickout", { code: q.MANUAL_KICKOUT.code, msg: q.MANUAL_KICKOUT.msg + t4.body.reason || t4.body.kickout_reason });
                }
              else
                this.an.info(_i + " try handler no found");
            }, t3.prototype.handleHbLogout = function(t4) {
              var i3, n3 = this, e3 = this.Ar.roomTryHandler;
              e3 && (e3.onactive = function(t5, i4) {
                n3.an.warn(wi + " onactive"), n3.transError(i4), n3.disconnectedHandle(i4);
              }, [q.HEARTBEAT_TIMEOUT.code].includes(null == t4 ? void 0 : t4.code) || [105, 152, 2001].includes(null == t4 ? void 0 : t4.code) || t4.msg.endsWith("1000002001") || t4.msg.endsWith("1000000152") || t4.msg.endsWith("1000000105") ? [q.HEARTBEAT_TIMEOUT.code].includes(t4.code) ? (this.pn.roomModulesList.forEach(function(t5) {
                t5.roomTryHandler && (t5.roomTryHandler.lastError = q.NETWORK_RECOVERY.code);
              }), this.Ar.retryRoom(false, false, q.NETWORK_RECOVERY)) : (null === (i3 = this.Ar.roomTryHandler) || void 0 === i3 ? void 0 : i3.lastError) === q.NETWORK_RECOVERY.code ? this.Ar.retryRoom(false, false, q.NETWORK_RECOVERY) : this.Ar.retryRoom() : [q.TIMEOUT.code, q.SOCKET_CLOSE.code].includes(null == t4 ? void 0 : t4.code) ? this.an.warn(wi + " timeout " + (0, G.iq)(t4)) : (this.an.warn(wi + " unexpected error: ".concat(JSON.stringify(t4))), this.logoutByError(t4)));
            }, t3.prototype.logoutByError = function(t4) {
              var i3 = this.Ar.roomTryHandler;
              i3 && (i3.stopMaxTime(), i3.invalid(), this.resetRoom(), this.disconnectedHandle(t4));
            }, t3.prototype.onConnecting = function(t4) {
              this._roomStateHandle(ke, P.Logining, t4);
            }, t3.prototype.disconnectedHandle = function(t4, i3) {
              if (t4 && 0 !== t4.code) {
                this.ys();
                var n3 = (null == i3 ? void 0 : i3.isKickout) ? P.Kickout : P.ReconnectFailed;
                this.transError(t4), this._roomStateHandle(Se, n3, t4, (null == i3 ? void 0 : i3.extendedData) || t4.msg);
              } else
                this._roomStateHandle(Ee, P.Reconnected, t4, null == i3 ? void 0 : i3.extendedData);
            }, t3.prototype.updateTimes = function() {
              this.updateValidTime(), this.updateTotalTime();
            }, t3.prototype.updateValidTime = function() {
              this.vs && (this.validTime = this.validTime + Date.now() - this.vs, this.vs = 0);
            }, t3.prototype.updateTotalTime = function() {
              this.ps && (this.totalTime = Date.now() - this.ps);
            }, t3.prototype._roomStateHandle = function(t4, i3, n3, e3, r3) {
              var s3, o2, u2, a2, c2 = this, h2 = this.Ar.roomID, f2 = Date.now();
              if (i3 && i3 == P.Reconnecting) {
                if (this.ds++, 0 === this.ls && (this.ls = (/* @__PURE__ */ new Date()).getTime(), this.roomSpan(pn, h2, i3, { error: n3, extendedData: e3 || "" })), 1 === this.ds)
                  return clearTimeout(this.Os), void (this.Os = setTimeout(function() {
                    1 === c2.ds && c2._roomStateHandle(t4, i3, n3, e3, r3);
                  }, 8e3));
                clearTimeout(this.Os);
              }
              this.an.info("zm.rm.scb " + t4 + " " + JSON.stringify(n3)), [Ee, Se].includes(t4) && (this.ds = 0, clearTimeout(this.Os), this.gs && this.brokenCounts++), t4 !== Ee && this.updateTimes(), i3 && [P.LoginFailed, P.ReconnectFailed].includes(i3) && (i3 = (null === (s3 = this.Ar.roomTryHandler) || void 0 === s3 ? void 0 : s3.loginCompleted) ? P.ReconnectFailed : P.LoginFailed), i3 && [P.Logined, P.Reconnected].includes(i3) && ((null === (o2 = this.Ar.roomTryHandler) || void 0 === o2 ? void 0 : o2.loginCompleted) ? i3 = P.Reconnected : (i3 = P.Logined, this.ps = this.ps || f2), this.gs = false, this.vs = f2), i3 && [P.Logining, P.Reconnecting].includes(i3) && (i3 = (null === (u2 = this.Ar.roomTryHandler) || void 0 === u2 ? void 0 : u2.loginCompleted) ? P.Reconnecting : P.Logining, this.ps && (this.gs = true));
              var l2 = 0;
              switch (i3) {
                case P.Reconnecting:
                  break;
                case P.ReconnectFailed:
                  a2 = bn, 0 !== this.ls && (this.ls = 0);
                  break;
                case P.Reconnected:
                  a2 = gn, 0 !== this.ls && (l2 = (/* @__PURE__ */ new Date()).getTime() - this.ls, this.ls = 0);
              }
              if (this.Ar.lastRoomState = this.Ar.roomState, this.Ar.roomState = t4, this.Ar.roomReasonState = i3, this.Ar.roomState !== this.Ar.lastRoomState) {
                this.pn.actionListener("_roomStateUpdate", h2, t4, n3 ? n3.code : 0, e3, i3, r3);
                var d2 = (null == n3 ? void 0 : n3.code) || 0;
                d2 == be.code && (d2 = 0), this.pn.actionListener("roomStateUpdate", h2, t4, d2, e3), this.pn.actionListener("roomStateChanged", h2, i3, d2, e3), a2 && this.roomSpan(a2, h2, i3, { error: n3, extendedData: e3 || "", brokenTime: l2 });
              }
              t4 === Se && (this.ps = 0, this.totalTime = 0, this.validTime = 0, this.brokenCounts = 0);
            }, t3.prototype.roomSpan = function(t4, i3, n3, r3) {
              var s3, o2, u2 = this.cr.createSpan(e2.t0.H, { key: en.event, par: i3 }, { key: "" }, t4.event);
              u2.setAttributes(n3 === P.Reconnected ? { room_broken_time: gn.room_broken_time((null == r3 ? void 0 : r3.brokenTime) || 0) } : { error: (null === (s3 = null == r3 ? void 0 : r3.error) || void 0 === s3 ? void 0 : s3.code) || 0, message: (null == r3 ? void 0 : r3.extendedData) || "" }), t4 === pn && u2.setAttributes({ last_hb_success_ts: null === (o2 = this.Ar.heartBeatHandler) || void 0 === o2 ? void 0 : o2.Zr }), t4 == bn && u2.setAttributes({ valid_d: this.validTime, total_d: this.totalTime, tempbroken_cnt: this.brokenCounts }), u2.end();
            }, t3.prototype.transError = function(t4) {
              if (this.an.info("zm.rm.te " + JSON.stringify(t4)), 0 !== t4.code && (t4.code < 2e9 && t4.code > 1e9 || t4.code < 1e6)) {
                var i3 = nt(t4.code);
                i3 && q[i3] && (t4.code = q[i3].code, t4.msg = q[i3].msg);
              }
            }, t3.prototype.login = function(t4, i3, r3, s3, o2, u2, a2) {
              if (this.an.info(vi + " call:" + t4), this.an.remoteReport(vi + " call:" + i3), !this.Ar.isMulti && this.an.setSessionInfo(this.pn.appid, t4, "", r3.userID, "", this.pn.sdKVersion), s3) {
                var c2 = s3.userUpdate, h2 = s3.maxMemberCount;
                c2 && (0, B.dd)(c2) && (this.Ar.userStateUpdate = c2), h2 && (0, B.Cs)(h2) && (this.Ar.maxMemberCount = h2);
              }
              if (!this.pn.configOK)
                return this.an.error(vi + " init sdk wrong"), void u2(q.INIT);
              this.Ar.runState !== n2.UV.trylogin && this.setRunState(n2.UV.trylogin), this.Ar.isCancelLogin = false, this.Ar.roomID = t4, this.Ar.token = i3, this.Ar.thirdToken = i3, this.pn.idName = r3.userID, this.pn.nickName = r3.userName || r3.userID, this.loginCallback.success = o2, this.loginCallback.fail = u2, this.Is = this.Ar.isMulti ? on : sn, this.cr.createSpan(e2.t0.H, { key: rn, bak_key: mn, par: this._s }, { key: this.Is.event, par: this._s }, this.Is.event, true), this.ws(), this.onConnecting(a2 || { code: 0, msg: "" }), this.Rs(), this.an.info(vi + " call success");
            }, t3.prototype.Rs = function() {
              var t4, i3, e3, r3, s3 = this;
              if (this.Ar.runState === n2.UV.trylogin)
                if (this.Ar.isMulti && this.Ar.isDisConnect())
                  this.an.warn(mi + " liveroom is not connected");
                else {
                  var o2 = function(t5, i4) {
                    s3.Ts(t5, i4);
                  };
                  (null === (t4 = this.Jr) || void 0 === t4 ? void 0 : t4.isUaConnect) ? (this.cr.spanSetAttributes({ key: this.Is.event, par: null === (i3 = this.Ar) || void 0 === i3 ? void 0 : i3.roomID }, { sdk_zpush_sessionid_string: null === (r3 = null === (e3 = this.Jr) || void 0 === e3 ? void 0 : e3.switchSessionID) || void 0 === r3 ? void 0 : r3.toString() }), this.Jr.login(this.Ar, o2, o2)) : (this.cs = setTimeout(function() {
                    s3.an.info(mi + " over time no response, login timeout"), s3.loginCallback.fail && s3.loginCallback.fail(en.error.LOGIN_TIMEOUT);
                  }, this.hs), this.an.warn(mi + " ua is not connected")), this.an.info(mi + " call success");
                }
              else
                this.an.error("zb.rh.tl state error");
            }, t3.prototype.Ts = function(t4, i3) {
              if (this.an.info(pi + " seq: " + i3 + " " + JSON.stringify(t4)), this.Ar.runState === n2.UV.trylogin)
                if (t4.header && t4.body) {
                  if (t4.header.seq !== i3 && 0 == this.Ar.isMulti)
                    return void this.an.error(pi + " in wrong seq, local=" + i3 + ",recv=" + t4.header.seq);
                  0 !== t4.body.err_code ? (this.an.error(pi + " server error=" + t4.body.err_code), this.As(t4)) : (this.an.info(pi + " call success."), this.zs(t4));
                } else
                  this.an.error(pi + " " + JSON.stringify(t4)), this.As(t4);
              else
                this.Ar.isCancelLogin ? (this.As(be), this.Ar.isCancelLogin = false) : this.an.error(pi + " state error");
            }, t3.prototype.As = function(t4) {
              this.ws();
              var i3 = en.error.INNER_ERROR;
              t4.header && t4.body ? i3 = $(t4.body.err_code) : t4.code && t4.msg && (i3 = t4), this.cr.spanEnd({ key: this.Is.event, par: this._s }, { error: i3.code, message: i3.msg }), this.loginCallback.fail && this.loginCallback.fail(i3, true);
            }, t3.prototype.zs = function(t4) {
              var i3, e3, r3, s3, o2;
              this.Ar.checkRoomSession(t4.body.room_session_id) && (this.Ar.loginTime = Date.now());
              var u2 = this.Ar.lastRunState;
              this.setRunState(n2.UV.login), this.pn.userid = t4.body.user_id, this.Ar.longRoomSid = t4.body.room_session_id, this.Ar.longSid = t4.body.session_id;
              var a2 = ((i3 = {})[this._s] = { room_sid_string: this.Ar.roomSidString }, i3);
              this.cr.setPublicPros(a2);
              var c2 = null === (e3 = null == t4 ? void 0 : t4.body) || void 0 === e3 ? void 0 : e3.token_remain_time;
              this.pn.configRoomAuth = c2 > 0;
              var h2 = parseInt(this.Ar.token.substring(0, 2));
              if (t4.body.ret_timestamp && h2 >= 3) {
                var f2 = (/* @__PURE__ */ new Date()).getTime(), l2 = f2 - t4.body.ret_timestamp;
                this.pn.local_time_deviation = l2 < 5e3 ? 0 : l2;
                var d2 = c2 > 0 ? 1e3 * c2 : 1e3 * Tt(this.Ar.token.substring(2)) - (f2 - this.pn.local_time_deviation);
                this.resetTokenTimer(d2);
              }
              !this.Ar.isMulti && this.an.setSessionInfo(this.pn.appid, this._s, this.Ar.userSidString, this.pn.idName, this.pn.nickName, this.pn.sdKVersion), this.cr.spanEnd({ key: this.Is.event, par: this._s }, { room_id: null === (r3 = this.Ar) || void 0 === r3 ? void 0 : r3.roomID, room_sid_string: null === (s3 = this.Ar) || void 0 === s3 ? void 0 : s3.roomSidString, zpush_sessionid_string: Oe.A.isLong(this.Jr.switchSessionID) ? this.Jr.switchSessionID.toString() : "0", liveroom_sid_string: null === (o2 = this.Ar) || void 0 === o2 ? void 0 : o2.userSidString }), this.ws(), this.loginSuccessCallBack(u2, t4), this._roomStateHandle(Ee, P.Logined, { code: 0, msg: "" }), this.pn.getLogWhiteList(), this.loginCallback.success && this.loginCallback.success(true);
            }, t3.prototype.logout = function(t4, i3) {
              this.an.info(gi + " call");
              var e3 = { code: 0, msg: "" };
              this.Ar.runState !== n2.UV.logout ? (this.Ar.runState === n2.UV.trylogin && (this.Ar.isCancelLogin = true, e3 = be), this.resetRoom(t4), this._roomStateHandle(Se, P.Logout, e3, void 0, i3), this.ys(), this.an.info(gi + " call success")) : this.an.warn("zb.rh.lo at logout");
            }, t3.prototype.ks = function(t4, i3) {
              var n3;
              this.an.info(gi + " result=" + (t4.body && t4.body.err_code ? t4.body.err_code : "-1")), i3 && (null === (n3 = this.Jr) || void 0 === n3 || n3.closeRequest());
            }, t3;
          }(), Re = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, Te = function() {
            function t3(t4, i3, n3, e3, r3) {
              this.an = t4, this.pn = i3, this._dataReport = n3, this.Jr = e3, this.Ar = r3, this.Ds = false, this.Ns = [], this.Ps = 0, this.Ms = 0, this.xs = [], this.js = null, this.qs = 3e4, this.Ls = 5e3, this.Bs = { anchor_id: "", anchor_id_name: "", anchor_nick_name: "" };
            }
            return t3.prototype.loginRsp = function(t4, i3) {
              this.Bs = t4.body.anchor_info || this.Bs, this.qs = t4.body.userlist_interval || this.qs, this.Ls = t4.body.userlist_merge_timeout || this.Ls, t4.body.anchor_info && (this.pn.actionListener("getAnchorInfo", t4.body.anchor_info.anchor_id_name, t4.body.anchor_info.anchor_nick_name), this.pn.actionListener("_getAnchorInfo", t4.body.anchor_info.anchor_id_name, t4.body.anchor_info.anchor_nick_name)), t4.body.online_count && this.pn.actionListener("roomOnlineUserCountUpdate", this.Ar.roomID, t4.body.online_count), this.an.info("zm.us.lgr  userStateUpdate " + this.Ar.userStateUpdate), this.Ar.userStateUpdate && this.Us(i3);
            }, t3.prototype.patchUserList = function(t4) {
              var i3 = this;
              t4.body.server_user_seq !== this.Ps && this.Ar.userStateUpdate && !this.js && (this.an.info("zm.us.pt call update user " + this.Ps + " server " + t4.body.server_user_seq), this.js || (this.js = {}), this.Gs && clearTimeout(this.Gs), this.Gs = setTimeout(function() {
                i3.Js();
              }, this.Ls)), this.Ms = t4.body.server_user_seq, null != t4.body.online_count && 0 != t4.body.online_count && this.pn.actionListener("roomOnlineUserCountUpdate", this.Ar.roomID, t4.body.online_count);
            }, t3.prototype.resetUserHandler = function() {
              this.Ds = false, this.Fs = 0, this.Ns = [], this.Ps = 0, this.Ms = 0, this.xs = void 0, this.js = {}, this.Gs = void 0, this.Hs = void 0, this.qs = 3e4, this.Ls = 5e3, this.Bs = { anchor_id: "", anchor_id_name: "", anchor_nick_name: "" };
            }, t3.prototype.Us = function(t4) {
              this.Ds ? this.an.warn(Oi + " is already querying") : (this.Ds = true, this.Ns = [], this.Vs(0, t4 || 0), this.an.info(Oi + " the first time call"));
            }, t3.prototype.Vs = function(t4, i3) {
              var n3, r3 = this, s3 = function(t5) {
                r3.Qs(t5, i3);
              }, o2 = { user_index: t4, sort_type: 0 }, u2 = Pn;
              this.pn.reporter.createSpan(e2.t0.H, { key: en.event, par: this.Ar.roomID }, { key: u2.event, par: this.Ar.roomID }, u2.event, true).setAttribute("user_index", u2.user_index(t4)), null === (n3 = this.Jr) || void 0 === n3 || n3.fetchUserList(o2, s3, s3, this.Ar);
            }, t3.prototype.Qs = function(t4, i3) {
              var e3, r3, s3 = this;
              if (this.pn.reporter.spanEnd({ key: Pn.event, par: this.Ar.roomID }, { error: (null === (e3 = null == t4 ? void 0 : t4.body) || void 0 === e3 ? void 0 : e3.err_code) || (null == t4 ? void 0 : t4.code), message: (null === (r3 = null == t4 ? void 0 : t4.body) || void 0 === r3 ? void 0 : r3.err_message) || (null == t4 ? void 0 : t4.msg) }), t4.body && 0 != t4.body.err_code)
                return this.Ds = false, this.Fs = Date.now() + this.qs, void this.an.info(Ii + " fetch error " + t4.body.err_code);
              if (!t4.header || !t4.body)
                return this.Ds = false, this.Fs = Date.now() + this.qs, void this.an.info(Ii + " fetch error " + t4);
              if (this.Ar.userStateUpdate) {
                this.Ns = Re(Re([], this.Ns, true), t4.body.user_baseinfos, true);
                var o2 = t4.body.ret_user_index;
                if (o2 != t4.body.server_user_index)
                  return this.an.info(Ii + " fetch another page"), void this.Vs(o2 + 1, i3);
                this.Ps = t4.body.server_user_seq;
                for (var u2 = [], a2 = [], c2 = 0; c2 < this.Ns.length; c2++) {
                  var h2 = { userID: this.Ns[c2].id_name, userName: this.Ns[c2].nick_name, role: this.Ns[c2].role };
                  4 !== h2.role && (u2.push(h2), a2.push({ idName: this.Ns[c2].id_name, nickName: this.Ns[c2].nick_name, role: this.Ns[c2].role }));
                }
                this.pn.actionListener("_getTotalUserList", this.Ar.roomID, a2), i3 == n2.UV.login ? (this.xs && function(t5, i4, n3, e4) {
                  t5.debug("msl.0 call");
                  var r4, s4 = [], o3 = [];
                  n3 || (n3 = []);
                  for (var u3 = 0; u3 < n3.length; u3++) {
                    r4 = false;
                    for (var a3 = 0; a3 < i4.length; a3++)
                      if (n3[u3].userID === i4[a3].userID) {
                        r4 = true;
                        break;
                      }
                    r4 || s4.push(n3[u3]);
                  }
                  for (var c3 = 0; c3 < i4.length; c3++) {
                    r4 = false;
                    for (var h3 = 0; h3 < n3.length; h3++)
                      if (i4[c3].userID === n3[h3].userID) {
                        r4 = true;
                        break;
                      }
                    r4 || o3.push(i4[c3]);
                  }
                  for (i4.splice(0), u3 = 0; u3 < n3.length; u3++)
                    i4.push(i4[u3]);
                  e4(s4, o3), t5.debug("msl.0 call success");
                }(this.an, this.xs, u2, function(t5, i4) {
                  0 !== t5.length && s3.onUserStateUpdate(s3.Ar.roomID, "ADD", t5), 0 !== i4.length && s3.onUserStateUpdate(s3.Ar.roomID, "DELETE", i4);
                }), this.xs = u2) : (this.xs = u2, 0 !== u2.length && this.onUserStateUpdate(this.Ar.roomID, "ADD", u2)), this.Ds = false, this.Fs = Date.now() + this.qs, this.Ns = [], this.an.info(Ii + " call success user_list " + u2 + ", count: " + u2.length + ", seq: " + this.Ps);
              } else
                this.an.info(Ii + " not update");
            }, t3.prototype.handlePushUserStateUpdateMsg = function(t4) {
              var i3 = this;
              if (this.an.info(Ri + " call"), this.Ar.userStateUpdate)
                if (this.Ps !== t4.body.user_list_seq)
                  if (this.Ps + t4.body.user_actions.length === t4.body.user_list_seq) {
                    this.Ps = t4.body.user_list_seq;
                    for (var n3 = [], e3 = 0; e3 < t4.body.user_actions.length; e3++) {
                      var r3 = { action: t4.body.user_actions[e3].Action, idName: t4.body.user_actions[e3].IdName, nickName: t4.body.user_actions[e3].NickName, role: t4.body.user_actions[e3].Role, loginTime: t4.body.user_actions[e3].LoginTime };
                      4 === r3.role || n3.push(r3);
                    }
                    this.pn.actionListener("_userStateUpdate", t4.body.room_id, n3);
                    var s3 = [], o2 = [];
                    n3.forEach(function(t5) {
                      var n4;
                      1 == t5.action ? s3.push({ userID: t5.idName, userName: t5.nickName, role: t5.role }) : 2 == t5.action && ((null === (n4 = i3.xs) || void 0 === n4 ? void 0 : n4.find(function(i4) {
                        return i4.userID === t5.idName;
                      })) ? o2.push({ userID: t5.idName, userName: t5.nickName, role: t5.role }) : i3.an.info(Ri + " user " + t5.idName + " not exist"));
                    }), this.xs && (this.xs = this.xs.concat(s3).filter(function(t5) {
                      return !o2.some(function(i4) {
                        return i4.userID == t5.userID;
                      });
                    })), 0 !== s3.length && this.onUserStateUpdate(t4.body.room_id, "ADD", s3), 0 !== o2.length && this.onUserStateUpdate(t4.body.room_id, "DELETE", o2), this.an.info(Ri + " call success");
                  } else
                    this.Ys(t4.body.user_list_seq, t4.body.user_actions);
                else
                  this.an.warn(Ri + " user_list_seq is the same with local seq");
              else
                this.an.info(Ri + " userStateUpdate is false");
            }, t3.prototype.onUserStateUpdate = function(t4, i3, n3) {
              var e3 = this, r3 = n3.filter(function(t5) {
                return t5.userID !== e3.pn.idName;
              });
              0 != r3.length && (r3 = r3.map(function(t5) {
                return { userID: t5.userID, userName: t5.userName };
              }), this.pn.actionListener("roomUserUpdate", t4, i3, r3));
            }, t3.prototype.Ys = function(t4, i3) {
              var n3 = this;
              this.js || (this.an.warn(Ti + " new merge userlist " + this.Ps + " server " + t4), this.js = {}, this.Gs && clearTimeout(this.Gs), this.Gs = setTimeout(function() {
                n3.Js();
              }, this.Ls)), this.js[t4] = i3, this.an.warn(Ti + "  merge userlist " + this.Ps + " server " + t4 + " userlist " + i3.length);
            }, t3.prototype.Zs = function(t4) {
              var i3 = this;
              this.an.info("zm.us.mg merge userlist " + this.Ps + " userSeqList " + t4.join(",")), this.Ps = t4[t4.length - 1], this.Fs = Date.now() + this.qs;
              var n3 = {};
              t4.forEach(function(t5) {
                i3.js && i3.js[t5].forEach(function(t6) {
                  n3[t6.IdName] = t6;
                });
              }), this.js = null;
              var e3 = Object.values(n3).map(function(t5) {
                return { action: t5.Action, idName: t5.IdName, nickName: t5.NickName, role: t5.Role, loginTime: t5.LoginTime ? String(t5.LoginTime) : "" };
              }).filter(function(t5) {
                return 4 !== t5.role;
              });
              e3.sort(function(t5, i4) {
                return t5.loginTime.localeCompare(i4.loginTime);
              });
              var r3 = [], s3 = [];
              e3.forEach(function(t5) {
                1 == t5.action ? r3.push({ userID: t5.idName, userName: t5.nickName, role: t5.role }) : 2 == t5.action && s3.push({ userID: t5.idName, userName: t5.nickName, role: t5.role });
              }), this.xs = this.xs && this.xs.concat(r3).filter(function(t5) {
                return !s3.some(function(i4) {
                  return i4.userID == t5.userID;
                });
              }), 0 !== r3.length && this.onUserStateUpdate(this.Ar.roomID, "ADD", r3), 0 !== s3.length && this.onUserStateUpdate(this.Ar.roomID, "DELETE", s3), this.pn.actionListener("_userStateUpdate", this.Ar.roomID, e3);
            }, t3.prototype.Js = function() {
              var t4 = this, i3 = Object.keys(this.js).map(function(t5) {
                return +t5;
              }).sort(function(t5, i4) {
                return t5 - i4;
              });
              if (i3[i3.length - 1] - i3[0] + 1 === i3.length || i3[i3.length - 1] >= this.Ms)
                this.Zs(i3);
              else {
                this.js = null;
                var n3 = this.Fs - Date.now();
                this.an.info("zm.us.mto  fetch merge userlist " + this.Ps + " userSeqList " + i3.join(",") + " wait " + n3), n3 > 0 ? (this.Hs && clearTimeout(this.Hs), this.Hs = setTimeout(function() {
                  t4.Us();
                }, n3)) : this.Us();
              }
            }, t3.prototype.updateUserDelete = function(t4) {
              this.xs && this.xs.length && (this.onUserStateUpdate(t4, "DELETE", this.xs), this.xs = []);
            }, t3;
          }(), Ce = function() {
            function t3(t4, i3, e3, r3, s3, o2) {
              this.roomID = t4, this.pn = i3, this.an = e3, this.dataReport = r3, this.rtm = s3, this.Jr = o2, this.runState = n2.UV.logout, this.lastRunState = n2.UV.logout, this.lastRoomState = "DISCONNECTED", this.roomState = "DISCONNECTED", this.roomReasonState = P.Logout, this.roomSessionID = "0", this.sessionID = "0", this.longSid = null, this.longRoomSid = null, this.isMulti = false, this.token = "", this.thirdToken = "", this.loginTime = 0, this.userStateUpdate = false, this.maxMemberCount = 0, this.roomName = "", this.isCancelLogin = false, this.roomHandler = new Ie(this.an, this.pn, this.dataReport, this, o2), this.heartBeatHandler = new ge(this.an, this.pn, this.dataReport, this.Jr, this), this.userHandler = new Te(this.an, this.pn, this.dataReport, this.Jr, this), this.initMessageHandler(), this.initLiveHandler(), this.init();
            }
            return Object.defineProperty(t3.prototype, "logger", { get: function() {
              return this.an;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "stateCenter", { get: function() {
              return this.pn;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "liveRoomHandler", { get: function() {
              return this.Jr;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sessionExist", { get: function() {
              return null !== this.longSid || "0" !== this.sessionID;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "roomSidString", { get: function() {
              return this.longRoomSid ? this.longRoomSid.toString() : "0";
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "userSidString", { get: function() {
              return this.longSid ? this.longSid.toString() : "0";
            }, enumerable: false, configurable: true }), t3.prototype.initMessageHandler = function() {
            }, t3.prototype.initLiveHandler = function() {
            }, t3.prototype.init = function() {
              this.bindHeatBeatHandler(), this.bindRoomHandler(), this.bindMessageHandler(), this.bindLiveHandler();
            }, t3.prototype.bindHeatBeatHandler = function() {
              var t4 = this;
              this.heartBeatHandler.hbLogout = function(i3) {
                t4.roomHandler.handleHbLogout(i3);
              }, this.heartBeatHandler.heartbeatRspNotiFy = function(i3, n3) {
                t4.messageHandler && t4.messageHandler.loginRsp(i3), t4.userHandler.patchUserList(i3), t4._HBResponse(i3, n3);
              };
            }, t3.prototype.bindRoomHandler = function() {
              var t4 = this;
              this.roomHandler.loginSuccessCallBack = function(i3, n3) {
                var e3;
                t4.an.info("zm.lrm.brh login suc " + i3), t4.heartBeatHandler.init(n3), t4.Jr.startCheck(), t4.userHandler.loginRsp(n3, i3), t4.messageHandler && t4.messageHandler.loginRsp(n3), null === (e3 = t4.roomTryHandler) || void 0 === e3 || e3.resetError(), t4.isMulti || t4.Ws(), t4.io(n3);
              }, this.roomHandler.resetRoomCallBack = function() {
                t4.heartBeatHandler.resetHeartbeat(), t4.liveHandler && t4.liveHandler.resetLiveHandler(), t4.messageHandler && t4.messageHandler.resetMessageInfo(), t4.Jr && t4.Jr.stopCheck(), t4.userHandler.resetUserHandler(), t4.roomTryHandler && (t4.roomTryHandler.invalid(), t4.roomTryHandler.stopMaxTime());
              };
            }, t3.prototype.bindUserHandler = function() {
            }, t3.prototype.bindMessageHandler = function() {
            }, t3.prototype.bindLiveHandler = function() {
            }, t3.prototype._HBResponse = function(t4, i3) {
              this.pn.actionListener("HBResponse", t4, i3);
            }, t3.prototype.io = function(t4) {
              this.pn.actionListener("roomLoginResponse", t4);
            }, t3.prototype.checkRoomSession = function(t4) {
              return null !== this.longRoomSid && this.longRoomSid.eq(t4);
            }, t3.prototype.Ws = function() {
              this.pn.roomModulesList.forEach(function(t4) {
                var i3 = t4.roomTryHandler;
                t4.runState !== n2.UV.login && i3 && 1 == t4.isMulti && (i3.onactive = function(i4, n3) {
                  if (n3 && 0 !== n3.code) {
                    var e3 = nt(n3.code);
                    e3 && q[e3] && (n3 = q[e3]), t4.roomHandler._roomStateHandle("DISCONNECTED", P.ReconnectFailed, n3, n3.msg);
                  } else
                    t4.roomHandler._roomStateHandle("CONNECTED", P.Reconnected, n3);
                }, i3.lastError === q.NETWORK_RECOVERY.code ? i3.retryLoginRoom(true, false, q.NETWORK_RECOVERY) : i3.retryLoginRoom());
              });
            }, t3.prototype.isLogin = function() {
              return this.runState === n2.UV.login;
            }, t3.prototype.isLogout = function() {
              return this.runState === n2.UV.logout;
            }, t3.prototype.isTryLogin = function() {
              return this.runState === n2.UV.trylogin;
            }, t3.prototype.isDisConnect = function() {
              return this.Jr.isDisConnect();
            }, t3.prototype.retryConnect = function() {
              this.an.info("zm.lrm.rc call"), this.resetSessionInfo(), this.Jr.closeRequest();
            }, t3.prototype.retryRoom = function(t4, i3, n3) {
              void 0 === t4 && (t4 = false), void 0 === i3 && (i3 = false), this.an.info("zm.lrm.rr.0 call retryNow:" + t4 + " resetSession: " + i3 + " " + (0, G.iq)(n3));
              var e3 = this.roomTryHandler;
              e3 && this.rtm.isUaConnect && e3.retryLoginRoom(t4, i3, n3);
            }, t3.prototype.resetSessionInfo = function() {
              var t4;
              this.an.info("zm.lrm.rsi call"), this.resetRoomSession(), this.resetUserSession(), null === (t4 = this.Jr) || void 0 === t4 || t4.reset();
            }, t3.prototype.resetRoomSession = function() {
              this.roomSessionID = "0", this.longRoomSid = null;
            }, t3.prototype.resetUserSession = function() {
              this.sessionID = "0", this.longSid = null;
            }, t3;
          }(), Ae = o(4883), ze = function() {
            function t3(t4) {
              void 0 === t4 && (t4 = false), this.close = false, this.isLoad = false, this.callBackList = [], this.close = t4, this.close || (this.no = new Ae.ZegoSetting());
            }
            return t3.prototype.setLog = function(t4) {
              var i3;
              null === (i3 = this.no) || void 0 === i3 || i3.setLog(t4);
            }, t3.prototype.init = function(t4) {
              var i3;
              null === (i3 = this.no) || void 0 === i3 || i3.init(t4);
            }, t3.prototype.setEnvVariable = function(t4, i3) {
              var n3;
              null === (n3 = this.no) || void 0 === n3 || n3.setEnvVariable(t4, i3);
            }, t3.prototype.getEnvVariables = function() {
              var t4;
              return null === (t4 = this.no) || void 0 === t4 ? void 0 : t4.getEnvVariables();
            }, t3.prototype.fetchSetting = function(t4, i3, n3) {
              return this.no ? this.no.fetchSetting(t4, i3, n3) : Promise.resolve();
            }, t3.prototype.fetchMultiSetting = function(t4, i3, n3) {
              return this.no ? this.no.fetchMultiSetting(t4, i3, n3) : Promise.resolve();
            }, t3.prototype.setOptions = function(t4) {
              var i3;
              return this.close || null === (i3 = this.no) || void 0 === i3 ? void 0 : i3.setOptions(t4);
            }, t3.prototype.getSettingCache = function(t4) {
              var i3;
              return this.no ? null === (i3 = this.no) || void 0 === i3 ? void 0 : i3.getSettingCache(t4) : Promise.resolve();
            }, t3.prototype.setToken = function(t4) {
              var i3;
              null === (i3 = this.no) || void 0 === i3 || i3.setToken(t4);
            }, t3.prototype.setUserID = function(t4) {
              var i3;
              null === (i3 = this.no) || void 0 === i3 || i3.setUserID(t4);
            }, t3.prototype.activePolling = function() {
              var t4;
              null === (t4 = this.no) || void 0 === t4 || t4.activePolling();
            }, t3.prototype.uninit = function() {
              var t4;
              null === (t4 = this.no) || void 0 === t4 || t4.uninit();
            }, t3.prototype.getEnvVariable = function(t4) {
              var i3;
              null === (i3 = this.no) || void 0 === i3 || i3.getEnvVariable(t4);
            }, t3;
          }(), De = function() {
            function t3(t4) {
              this.eo = -1, this.ro = 3e4, this.so = 0, this.ro = t4;
            }
            return t3.prototype.trigger = function() {
              var t4, i3 = performance.now();
              (this.so++, -1 === this.eo) ? (t4 = { toReport: true, failCount: this.so }, this.eo = i3, this.so = 0) : i3 - this.eo > this.ro ? (t4 = { toReport: true, failCount: this.so }, this.eo = i3, this.so = 0) : t4 = { toReport: false };
              return t4;
            }, t3;
          }(), Ne = o(757), Pe = o(6493), Me = function() {
            return Me = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Me.apply(this, arguments);
          }, xe = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, je = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, qe = function() {
            function t3(t4) {
              this.an = t4, this.oo = Mt.product, this.uo = {}, this.ao = {}, this.isUnload = false;
              new Ne.DynamicCode();
              this.ho = new Ne.ZegoTracer(gs.proxyCtrl), this.ho.setSampleConfig({ level: e2.t0.L }), this.lo = (0, Pe.hU)();
            }
            return Object.defineProperty(t3.prototype, "tracer", { get: function() {
              return this.ho;
            }, enumerable: false, configurable: true }), t3.prototype.init = function(t4, i3, n3) {
              var e3 = this;
              this.ho.init({ product: this.oo, version: "1.0.0", env: i3, appID: t4, deviceID: n3, importantLevel: Mt.importLevel, levels: Mt.levels, bps: Mt.bps, spanStart: function(t5) {
                try {
                  (0, B.JO)(window.scriptSpanStart) && scriptSpanStart(e3.ao, e3.ho, t5);
                } catch (t6) {
                  e3.an.warn(Ji + " dy span start " + t6);
                }
              }, spanBeforeEnd: function(t5) {
                t5.setAttribute("ntype_end", wt());
              }, spanEnd: function(t5, i4) {
                try {
                  (0, B.JO)(window.scriptSpanEnd) && scriptSpanEnd(e3.ao, e3.ho, t5);
                } catch (t6) {
                  e3.an.warn(Ji + " dy span end " + JSON.stringify(t6));
                }
              }, resources: { product: this.oo, appid: t4, device_id: n3, console: 0 == i3 ? "rtc" : "ali" }, deflate: this.an.deflate });
            }, t3.prototype.setConfig = function(t4) {
              this.ho.setConfig(t4);
            }, t3.prototype.loadScript = function(t4, i3, n3, e3) {
              return xe(this, void 0, void 0, function() {
                var r3;
                return je(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      return s3.trys.push([0, 2, , 3]), [4, this.ho.loadJs(t4, i3, n3, e3, "\nfunction scriptSpanStart(states, tracer, span) {\n    \n}\nfunction scriptSpanEnd(states, tracer, span) {\n    if (span['tags']['msg_content']) {\n        span['tags']['msg_content_size'] = span['tags']['msg_content'].length;\n        delete span['tags']['msg_content'];\n    }\n    delete span['tags']['resp'];\n    const filterSpans = ['/rtc/login', '/rtc/hb', '/rtc/recv_remote_stream'];\n    if (filterSpans.includes(span.name)) {\n        console.log(span.name + ' do not report');\n        span.droped = true;\n    }\n}\nfunction scriptInit(states, tracer) {\n\n}\n\n", {})];
                    case 1:
                      return s3.sent(), (0, B.JO)(window.scriptInit) && scriptInit(this.ao, this.ho), [3, 3];
                    case 2:
                      return r3 = s3.sent(), this.an.warn("zm.tc.ls load script fail " + JSON.stringify(r3)), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.setReporterInfo = function(t4, i3) {
              var n3 = /* @__PURE__ */ new Map();
              n3.set("userID", t4), n3.set("token", i3), this.ho.startReport(n3);
            }, t3.prototype.flush = function(t4) {
              this.ho.flush(t4);
            }, t3.prototype.destroy = function() {
              this.ho.destroy();
            }, t3.prototype.setCommonStates = function(t4) {
              this.ao = t4;
            }, t3.prototype.setResource = function(t4) {
              this.ho.setResource(t4);
            }, t3.prototype.setCommonAttributes = function(t4) {
              this.uo = Object.assign({}, this.uo, t4);
            }, t3.prototype.deleteCommonAttributes = function(t4) {
              var i3 = this;
              t4.forEach(function(t5) {
                delete i3.uo[t5];
              });
            }, t3.prototype.createSpan = function(i3, n3, e3) {
              var r3 = this.ho.createSpan(i3, n3, { parent: e3 });
              return t3.reportCustomerContext > 0 && r3.setAttributes({ customer_context: t3.reportCustomerContext }), r3.setAttributes(Me({ ntype: wt(), os_type: this.lo, error: 0, message: "" }, this.uo)), r3;
            }, t3.prototype.spanEnd = function(t4, i3, n3) {
              t4 && i3 && t4.setAttributes(Me({}, i3)), t4 && t4.end(n3);
            }, t3.prototype.spanReport = function(t4) {
              t4 && t4.spanReport();
            }, t3.prototype.spanSetAttributes = function(t4, i3) {
              t4 && t4.setAttributes(i3);
            }, t3.prototype.spanAppendAttribute = function(t4, i3, n3) {
              t4 && t4.appendAttribute(i3, n3);
            }, t3.prototype.setError = function(t4, i3, n3) {
              void 0 === n3 && (n3 = ""), t4.setAttributes({ error: i3.code || i3.errorCode, message: (i3.msg || i3.message || i3.extendedData) + " " + n3 }), t4.end();
            }, t3.prototype.setLogger = function(t4) {
              this.ho.setLogger(t4);
            }, t3.prototype.setTimeOffset = function(t4) {
              this.ho.setTimeOffset(t4);
            }, t3.prototype.setUnloadState = function(t4) {
              this.isUnload = true, this.ho.setUnloadState(t4);
            }, t3.prototype.setNetStateCheck = function() {
              this.ho.setNetStateCheck();
            }, t3.prototype.getUploadStatus = function() {
              return this.ho.getUnloadStatus();
            }, t3.reportCustomerContext = 0, t3;
          }(), Le = function() {
            return Le = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Le.apply(this, arguments);
          }, Be = (function() {
            function t3(t4, i3) {
              this._dataReport = t4, this._seq = i3;
            }
            t3.prototype.setAttributes = function(t4) {
              this._dataReport.addMsgInfo(this._seq, t4);
            }, t3.prototype.setAttribute = function(t4, i3) {
              this._dataReport.addMsgInfo(this._seq, { key: i3 });
            }, t3.prototype.end = function(t4) {
              this._dataReport.uploadReport(this._seq);
            }, t3.prototype.spanReport = function() {
            };
          }(), ["/sdk/start_publish", "/publish/start", "/publish/restart"]), Ue = ["/sdk/start_play", "/play/start", "/play/restart"], Ge = function() {
            function t3(t4) {
              this.an = t4, this.do = {}, this.vo = {}, this.mo = {}, this.po = /* @__PURE__ */ new Map(), this.tracerHandler = new qe(t4);
            }
            return t3.setReportCustomerContext = function(t4) {
              qe.reportCustomerContext = t4;
            }, t3.prototype.init = function(t4, i3, n3) {
              this.tracerHandler.init(t4, i3, n3);
            }, t3.prototype.setConfig = function(t4) {
              this.tracerHandler.setConfig(t4);
            }, t3.prototype.loadScript = function(t4, i3, n3, e3) {
              return this.tracerHandler.loadScript(t4, i3, n3, e3);
            }, t3.prototype.setReporterInfo = function(t4, i3) {
              this.tracerHandler.setReporterInfo(t4, i3);
            }, t3.prototype.flush = function(t4) {
              this.tracerHandler.flush(t4);
            }, t3.prototype.destroy = function() {
              this.tracerHandler.destroy(), this.po.clear();
            }, t3.prototype.setCommonStates = function(t4) {
              this.tracerHandler.setCommonStates(t4);
            }, t3.prototype.setResource = function(t4) {
              this.tracerHandler.setResource(t4);
            }, t3.prototype.setCommonAttributes = function(t4) {
              this.tracerHandler.setCommonAttributes(t4);
            }, t3.prototype.deleteCommonAttributes = function(t4) {
              this.tracerHandler.deleteCommonAttributes(t4);
            }, t3.prototype.clearRoomSpans = function(t4) {
              var i3 = this;
              t4.forEach(function(t5) {
                for (var n3 in i3.do)
                  null == i3.do[n3].span && delete i3.do[n3][t5];
              });
            }, t3.prototype.setPublicPros = function(t4) {
              this.vo = Object.assign({}, this.vo, t4);
            }, t3.prototype.createSpan = function(t4, i3, n3, e3, r3) {
              var s3, o2, u2, a2;
              if (i3 && i3.key && i3.par) {
                var c2 = i3.par1 ? "_" + i3.par1 : "";
                !(u2 = null === (s3 = this.do[i3.key]) || void 0 === s3 ? void 0 : s3[i3.par + c2]) && i3.bak_key && (u2 = null === (o2 = this.do[i3.bak_key]) || void 0 === o2 ? void 0 : o2[i3.par + c2]);
              } else
                i3 && !(u2 = this.do[i3.key]) && i3.bak_key && (u2 = this.do[i3.bak_key]);
              (u2 || (u2 = this.do[Zi.event]), a2 = this.tracerHandler.createSpan(t4, e3, u2), "/sdk/login" === i3.key && (a2.setAttribute("room_id", i3.par), this.vo[i3.par] && a2.setAttributes(this.vo[i3.par])), (Be.includes(i3.key) || Ue.includes(i3.key)) && a2.setAttribute("stream_id", i3.par), Be.includes(i3.key) && this.vo["_publish_" + i3.par] && a2.setAttributes(this.vo["_publish_" + i3.par]), Ue.includes(i3.key) && this.vo["_play_" + i3.par] && a2.setAttributes(this.vo["_play_" + i3.par]), r3) && (n3.par ? (!this.do[n3.key] && (this.do[n3.key] = {}), this.do[n3.key][n3.par + (c2 = n3.par1 ? "_" + n3.par1 : "")] = a2) : this.do[n3.key] = a2);
              return a2;
            }, t3.prototype.setSpanInMap = function(t4, i3) {
              i3.par ? (!this.do[i3.key] && (this.do[i3.key] = {}), this.do[i3.key][i3.par + (i3.par2 ? "_" + i3.par2 : "")] = t4) : this.do[i3.key] = t4;
            }, t3.prototype.spanEnd = function(t4, i3, n3, e3) {
              var r3;
              t4.par ? (r3 = this.do[t4.key] && this.do[t4.key][t4.par + (t4.par1 ? "_" + t4.par1 : "")], this.do[t4.key] && !n3 && delete this.do[t4.key][t4.par]) : (r3 = this.do[t4.key], !n3 && delete this.do[t4.key]);
              this.tracerHandler.spanEnd(r3, i3, e3);
            }, t3.prototype.spanReport = function(t4) {
              var i3;
              t4.par ? (i3 = this.do[t4.key] && this.do[t4.key][t4.par + (t4.par1 ? "_" + t4.par1 : "")], this.do[t4.key] && delete this.do[t4.key][t4.par]) : (i3 = this.do[t4.key], delete this.do[t4.key]);
              this.tracerHandler.spanReport(i3);
            }, t3.prototype.spanSetAttributes = function(t4, i3) {
              var n3;
              if (t4.par) {
                var e3 = t4.par1 ? "_" + t4.par1 : "";
                !(n3 = this.do[t4.key] && this.do[t4.key][t4.par + e3]) && t4.bak_key && (n3 = this.do[t4.bak_key] && this.do[t4.bak_key][t4.par + e3]);
              } else
                !(n3 = this.do[t4.key]) && t4.bak_key && (n3 = this.do[t4.key]);
              this.tracerHandler.spanSetAttributes(n3, i3);
            }, t3.prototype.spanAppendAttribute = function(t4, i3, n3) {
              var e3;
              if (t4.par) {
                var r3 = t4.par1 ? "_" + t4.par1 : "";
                !(e3 = this.do[t4.key] && this.do[t4.key][t4.par + r3]) && t4.bak_key && (e3 = this.do[t4.bak_key] && this.do[t4.bak_key][t4.par + r3]);
              } else
                !(e3 = this.do[t4.key]) && t4.bak_key && (e3 = this.do[t4.key]);
              this.tracerHandler.spanAppendAttribute(e3, i3, n3);
            }, t3.prototype.setError = function(t4, i3, n3) {
              this.tracerHandler.setError(t4, i3, n3);
            }, t3.prototype.setLogger = function(t4) {
              this.tracerHandler.setLogger(t4);
            }, t3.prototype.setTimeOffset = function(t4) {
              this.tracerHandler.setTimeOffset(t4);
            }, t3.prototype.setUnloadState = function(t4) {
              this.tracerHandler.setUnloadState(t4);
            }, t3.prototype.setNetStateCheck = function() {
              this.tracerHandler.setNetStateCheck();
            }, t3.prototype.setAPIErrorReport = function(t4, i3) {
              this.mo[t4] = i3;
            }, t3.prototype.getAPIErrorReport = function(t4) {
              return this.mo[t4];
            }, t3.prototype.takeAPIErrorReport = function(t4, i3, n3, r3) {
              if (n3) {
                var s3 = this.po.get(t4);
                s3 || (s3 = new De(n3), this.po.set(t4, s3));
                var o2 = s3.trigger(), u2 = o2.failCount;
                if (o2.toReport) {
                  var a2 = this.createSpan(e2.t0.I, { key: Zi.event }, { key: "" }, t4);
                  a2.setAttributes(Le({ api_fail_count: u2 }, r3)), this.setError(a2, i3);
                }
              }
            }, t3;
          }(), Je = o(3788);
          const Fe = o(6994);
          (Je = Je.default || Je).util.Long = Fe.default || Fe, Je.util.Long.fromBits = Je.util.Long.fromBits || function() {
            return 0;
          };
          for (var He = Je.roots, Ve = Je.types ? Je.types.basic : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0, string: 2, bytes: 2 }, Qe = Je.types ? Je.types.packed : { double: 1, float: 5, int32: 0, uint32: 0, sint32: 0, fixed32: 5, sfixed32: 5, int64: 0, uint64: 0, sint64: 0, fixed64: 1, sfixed64: 1, bool: 0 }, Ye = Object.keys(Ve), Ke = { $: function(t3) {
            return Ke[t3] ? Ke[t3].call(this) : He[t3].decode ? He[t3].decode(this, this.uint32()) : Ke.$.call(this, "int32");
          } }, Ze = { $: function(t3, i3, n3) {
            var e3 = Ve[t3];
            return void 0 === e3 ? He[t3].encode ? (this.uint32(n3 << 3 | 2).fork(), He[t3].encode(i3, this).ldelim()) : Ze.$.call(this, "int32", i3, n3) : Ze[t3].call(this.uint32(n3 << 3 | e3), i3);
          } }, Xe = 0; Xe < Ye.length; Xe++)
            Ke[Ye[Xe]] = Je.Reader.prototype[Ye[Xe]], Ze[Ye[Xe]] = Je.Writer.prototype[Ye[Xe]];
          !function t3(i3, n3, e3, r3) {
            for (var s3 = 0, o2 = Object.keys(i3); s3 < o2.length; s3++) {
              var u2 = o2[s3];
              if (i3[u2].$m && Object.keys(i3[u2].$m).every(function(t4) {
                return Number(t4);
              })) {
                if (e3[u2])
                  throw Error(`nested type ${e3}.${u2} has already exist`);
                e3[u2] = function(i4, e4) {
                  function r4(t4) {
                    for (var n4 in i4) {
                      var e5 = i4[n4];
                      "{" === e5[1].charAt(0) ? this[e5[0]] = {} : "[" !== e5[1].charAt(0) && "<" !== e5[1].charAt(0) || (this[e5[0]] = []);
                    }
                    if (t4)
                      for (var r5 = Object.keys(t4), s5 = 0; s5 < r5.length; ++s5)
                        null != t4[r5[s5]] && (this[r5[s5]] = t4[r5[s5]]);
                  }
                  var s4 = {};
                  for (var o3 in i4) {
                    var u3 = i4[o3], a2 = u3[1];
                    "{" === a2.charAt(0) ? (r4.prototype[u3[0]] = Je.util.emptyObject, s4[a2] = { $m: a2.substring(1).split(",").map(function(t4, i5) {
                      return [`$${i5 + 1}`, t4, null];
                    }).reduce(function(t4, i5, n4) {
                      return t4[n4 + 1] = i5, t4;
                    }, {}) }) : r4.prototype[u3[0]] = "[" === a2.charAt(0) || "<" === a2.charAt(0) ? Je.util.emptyArray : "bytes" === a2 ? Je.util.newBuffer([]) : u3[2] && u3[2].hasOwnProperty("low") && u3[2].hasOwnProperty("high") ? Je.util.Long.fromBits(u3[2].low, u3[2].high, u3[2].unsigned) : u3[2];
                  }
                  return r4.create = function(t4) {
                    return new r4(t4);
                  }, r4.decode = function(t4, n4) {
                    t4 instanceof Je.Reader || (t4 = Je.Reader.create(t4));
                    for (var e5 = void 0 === n4 ? t4.len : t4.pos + n4, s5 = new r4(); t4.pos < e5; ) {
                      var o4 = t4.uint32(), u4 = o4 >>> 3;
                      if (u4 > 0 && i4[u4]) {
                        var a3 = i4[u4][0], c2 = i4[u4][1];
                        if ("{" === c2.charAt(0)) {
                          s5[a3] === Je.util.emptyObject && (s5[a3] = {});
                          var h2 = r4.$namespace[c2].decode(t4, t4.uint32());
                          s5[a3][h2.$1] = h2.$2;
                        } else if ("[" === c2.charAt(0) || "<" === c2.charAt(0)) {
                          c2 = c2.substring(1), s5[a3] && s5[a3].length || (s5[a3] = []);
                          if (void 0 !== Qe[c2 = !Ke[c2] && !He[c2].decode ? "int32" : c2] && 2 == (7 & o4))
                            for (var f2 = t4.uint32() + t4.pos; t4.pos < f2; )
                              s5[a3].push(Ke.$.call(t4, c2));
                          else
                            s5[a3].push(Ke.$.call(t4, c2));
                        } else
                          s5[a3] = Ke.$.call(t4, c2);
                      } else
                        t4.skipType(7 & o4);
                    }
                    return s5;
                  }, r4.encode = function(t4, n4) {
                    for (var e5 in n4 || (n4 = Je.Writer.create()), i4) {
                      var s5 = i4[e5][0], o4 = i4[e5][1];
                      if ("{" === o4.charAt(0)) {
                        if (null != t4[s5] && t4.hasOwnProperty(s5))
                          for (var u4 = 0, a3 = Object.keys(t4[s5]); u4 < a3.length; ++u4)
                            n4.uint32(e5 << 3 | 2).fork(), r4.$namespace[o4].encode({ $1: a3[u4], $2: t4[s5][a3[u4]] }, n4).ldelim();
                      } else if ("[" === o4.charAt(0) || "<" === o4.charAt(0)) {
                        var c2 = "<" === o4.charAt(0);
                        o4 = o4.substring(1);
                        var h2 = t4[s5];
                        if (null != h2 && h2.length) {
                          if (o4 = void 0 === Ve[o4] && !He[o4].encode ? "int32" : o4, c2 && void 0 !== Qe[o4]) {
                            n4.uint32(e5 << 3 | 2).fork();
                            for (u4 = 0; u4 < h2.length; u4++)
                              Ze[o4].call(n4, h2[u4]);
                            n4.ldelim();
                          } else
                            for (u4 = 0; u4 < h2.length; u4++)
                              Ze.$.call(n4, o4, h2[u4], e5);
                        }
                      } else
                        null != t4[s5] && t4.hasOwnProperty(s5) && Ze.$.call(n4, o4, t4[s5], e5);
                    }
                    return n4;
                  }, Object.keys(s4).length && (r4.$namespace = t3(s4, n3 + "." + e4, r4.$namespace || {}, true)), r4;
                }(i3[u2].$m, u2);
              } else
                i3[u2].$s ? e3[u2] = function(t4, i4) {
                  function e4(t5, i5, n4) {
                    Je.rpc.Service.call(this, t5, i5, n4);
                  }
                  return (e4.prototype = Object.create(Je.rpc.Service.prototype)).constructor = e4, e4.create = function(t5, i5, n4) {
                    return new e4(t5, i5, n4);
                  }, Object.keys(t4).forEach(function(r4) {
                    var s4 = t4[r4];
                    function o3(t5, i5) {
                      return this.rpcCall(o3, He[s4[0]], He[s4[1]], t5, i5);
                    }
                    Object.defineProperty(o3, "name", { value: r4 }), Object.defineProperty(o3, "path", { value: `${n3}.${i4}` }), e4.prototype[r4] = o3;
                  }), e4;
                }(i3[u2].$s, u2) : i3[u2].$e && Object.values(i3[u2].$e).every(function(t4) {
                  return Number(t4) === t4;
                }) && (e3[u2] = function(t4) {
                  for (var i4 = Object.keys(t4), n4 = {}, e4 = 0; e4 < i4.length; e4++)
                    n4[n4[i4[e4]] = t4[i4[e4]]] = i4[e4];
                  return n4;
                }(i3[u2].$e));
              e3[u2] && !r3 && (He[`${n3}.${u2}`] = e3[u2]), delete i3[u2].$m, delete i3[u2].$s, delete i3[u2].$e, e3[u2] = t3(i3[u2], Boolean(n3) ? `${n3}.${u2}` : u2, e3[u2] || {});
            }
            return e3;
          }({ rtc: { generalpclib: { CmbType: { $e: { CMD_TYPE_BUSINESS_REQUEST: 100, CMD_TYPE_BUSINESS_RESPONSE: 101 } }, Header: { $m: { 1: ["cmd", "uint32", 0] } } }, liveroom_cs_v3: { AddStreamReq: { $m: { 1: ["stream_id", "bytes", []], 2: ["stream_title", "bytes", []], 3: ["stream_type", "uint32", 0], 4: ["stream_attr", "bytes", []], 5: ["extra_info", "bytes", []], 6: ["client_req_seq", "uint32", 0], 7: ["third_token", "bytes", []], 8: ["censor_mode", "uint32", 0], 9: ["need_gather", "uint32", 0], 11: ["stream_attr_opts", "rtc.liveroom_cs_v3.StreamAttrOptions", null], 12: ["sdk_custom", "bytes", []] } }, AddStreamRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["stream_seq", "uint32", 0], 3: ["stream_sid", "string", ""], 4: ["stream_ver", "uint32", 0], 5: ["stream_nid", "uint32", 0], 6: ["token_remain_time", "uint32", 0] } }, AnchorInfo: { $m: { 1: ["id_name", "bytes", []], 2: ["user_id", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["nick_name", "bytes", []] } }, BigImData: { $m: { 1: ["id_name", "bytes", []], 2: ["nick_name", "bytes", []], 3: ["role", "uint32", 0], 4: ["msg_id", "bytes", []], 5: ["msg_category", "uint32", 0], 6: ["msg_type", "uint32", 0], 7: ["msg_content", "bytes", []], 8: ["msg_timestamp", "int64", { low: 0, high: 0, unsigned: false }] } }, CapabilityParams: { $m: { 1: ["video_codec", "uint32", 0], 2: ["gop_mode", "uint32", 0], 3: ["nego_types", "uint32", 0] } }, CapabilityResult: { $m: { 1: ["nego_type", "uint32", 0], 2: ["video_codec", "uint32", 0], 3: ["gop_mode", "uint32", 0] } }, CommonRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, DeleteStreamReq: { $m: { 1: ["stream_sid", "string", ""], 2: ["stream_id", "bytes", []], 3: ["client_req_seq", "uint32", 0] } }, DeleteStreamRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["stream_seq", "uint32", 0], 3: ["stream_ver", "uint32", 0] } }, EnterRoomReq: { $m: { 1: ["net_type", "uint32", 0], 2: ["conn_type", "uint32", 0], 3: ["room_id", "bytes", []], 4: ["room_name", "bytes", []], 5: ["role", "uint32", 0], 6: ["third_token", "bytes", []], 7: ["room_create_flag", "uint32", 0], 8: ["user_state_flag", "uint32", 0], 9: ["user_count_limit", "uint32", 0], 10: ["relate_service", "string", ""], 11: ["need_gather_stream", "uint32", 0], 12: ["callback_data", "bytes", []], 13: ["service_flags", "uint32", 0], 14: ["license_token", "bytes", []], 15: ["user_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 16: ["capabilities", "rtc.liveroom_cs_v3.CapabilityParams", null] } }, EnterRoomRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["user_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["room_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 4: ["user_id", "uint64", { low: 0, high: 0, unsigned: true }], 5: ["ret_timestamp", "int64", { low: 0, high: 0, unsigned: false }], 6: ["big_im_time_window", "uint32", 0], 7: ["liveroom_hb_interval", "uint32", 0], 8: ["liveroom_hb_timeout", "uint32", 0], 9: ["online_count", "uint32", 0], 10: ["anchor_info", "rtc.liveroom_cs_v3.AnchorInfo", null], 11: ["userlist_merge_timeout", "uint32", 0], 12: ["userlist_interval", "uint32", 0], 13: ["token_remain_time", "uint32", 0], 14: ["trans_list_seq", "uint32", 0], 15: ["trans_channel_list", "<rtc.liveroom_cs_v3.TransChannel", null], 16: ["stream_count", "uint32", 0], 17: ["stream_list_seq", "uint32", 0], 18: ["stream_info_list", "<rtc.liveroom_cs_v3.StreamInfo", null], 19: ["stream_fetch_flag", "uint32", 0], 20: ["stream_list_push_merge_timeout", "uint32", 0], 21: ["stream_list_hb_merge_timeout", "uint32", 0], 22: ["relate_result_list", "<rtc.liveroom_cs_v3.RelateResult", null], 23: ["gather_list_seq", "uint32", 0], 24: ["gather_info_list", "<rtc.liveroom_cs_v3.GatherInfo", null] } }, EnumSignalTransmitResult: { $e: { ok: 0, version_err: 1 } }, EnumSignalTransparentMsgType: { $e: { SignalTransparentMsgTypeSDK: 0, SignalTransparentMsgTypeServer: 1, SignalTransparentMsgTypeBoth: 2 } }, GatherInfo: { $m: { 1: ["gather_id", "string", ""] } }, GetCapabilityReq: { $m: {} }, GetCapabilityRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["capability_seq", "int64", { low: 0, high: 0, unsigned: false }], 4: ["capability_collection", "<rtc.liveroom_cs_v3.CapabilityResult", null] } }, GetGatherListReq: { $m: {} }, GetGatherListRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["gather_list_seq", "uint32", 0], 3: ["gather_info_list", "<rtc.liveroom_cs_v3.GatherInfo", null] } }, GetImReq: { $m: { 1: ["msg_id", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["sort_type", "uint32", 0], 3: ["msg_count", "uint32", 0] } }, GetImRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["server_msg_id", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["ret_msg_id", "uint64", { low: 0, high: 0, unsigned: true }], 4: ["msg_list", "<rtc.liveroom_cs_v3.GetImRspImData", null] } }, GetImRspImData: { $m: { 1: ["id_name", "bytes", []], 2: ["nick_name", "bytes", []], 3: ["role", "uint32", 0], 4: ["msg_id", "uint64", { low: 0, high: 0, unsigned: true }], 5: ["msg_category", "uint32", 0], 6: ["msg_type", "uint32", 0], 7: ["msg_content", "bytes", []], 8: ["send_time", "int64", { low: 0, high: 0, unsigned: false }] } }, GetStreamListReq: { $m: {} }, GetStreamListRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["stream_list_seq", "uint32", 0], 3: ["stream_info_list", "<rtc.liveroom_cs_v3.StreamInfo", null], 4: ["stream_refresh", "uint32", 0] } }, GetTransReq: { $m: { 1: ["trans_channel", "bytes", []], 2: ["trans_list", "<rtc.liveroom_cs_v3.GetTransReqTransData", null] } }, GetTransReqTransData: { $m: { 1: ["trans_type", "bytes", []], 2: ["trans_local_seq", "uint32", 0] } }, GetTransRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["trans_channel", "bytes", []], 3: ["trans_list_seq", "uint32", 0], 4: ["trans_list", "<rtc.liveroom_cs_v3.GetTransRspTransData", null] } }, GetTransRspTransData: { $m: { 1: ["err_code", "uint32", 0], 2: ["trans_type", "bytes", []], 3: ["trans_data", "bytes", []], 4: ["trans_send_time", "int64", { low: 0, high: 0, unsigned: false }], 5: ["trans_seq", "uint32", 0], 6: ["id_name", "bytes", []], 7: ["nick_name", "bytes", []], 8: ["role", "uint32", 0] } }, GetUserCountReq: { $m: {} }, GetUserCountRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["get_interval", "int64", { low: 0, high: 0, unsigned: false }], 3: ["user_count", "uint32", 0], 4: ["admin_user_count", "uint32", 0] } }, GetUserlistReq: { $m: { 1: ["sort_type", "uint32", 0], 2: ["user_index", "uint32", 0] } }, GetUserlistRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["server_user_seq", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["server_user_index", "int64", { low: 0, high: 0, unsigned: false }], 4: ["ret_user_index", "int64", { low: 0, high: 0, unsigned: false }], 5: ["user_base_info_list", "<rtc.liveroom_cs_v3.UserBaseInfo", null] } }, GetUserTransReq: { $m: { 1: ["trans_channel", "bytes", []], 2: ["user_trans_list", "<rtc.liveroom_cs_v3.GetUserTransReqTransData", null] } }, GetUserTransReqTransData: { $m: { 1: ["trans_type", "bytes", []], 2: ["trans_local_seq", "uint32", 0] } }, GetUserTransRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["trans_channel", "bytes", []], 3: ["user_trans_list", "<rtc.liveroom_cs_v3.GetUserTransRspTransData", null] } }, GetUserTransRspTransData: { $m: { 1: ["err_code", "uint32", 0], 2: ["trans_type", "bytes", []], 3: ["trans_data", "bytes", []], 4: ["trans_send_time", "int64", { low: 0, high: 0, unsigned: false }], 5: ["trans_seq", "uint32", 0], 6: ["id_name", "bytes", []], 7: ["nick_name", "bytes", []], 8: ["role", "uint32", 0] } }, HbReq: { $m: {} }, HbRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["ret_timestamp", "int64", { low: 0, high: 0, unsigned: false }], 3: ["hb_interval", "uint32", 0], 4: ["hb_timeout", "uint32", 0], 5: ["stream_seq", "uint32", 0], 6: ["user_seq", "int64", { low: 0, high: 0, unsigned: false }], 7: ["online_count", "uint32", 0], 8: ["big_im_time_window", "uint32", 0], 9: ["trans_channel_list", "<rtc.liveroom_cs_v3.TransChannel", null], 10: ["user_trans_channel_list", "<rtc.liveroom_cs_v3.TransChannel", null], 11: ["stream_refresh", "uint32", 0], 12: ["trans_list_seq", "uint32", 0], 13: ["gather_list_seq", "uint32", 0], 14: ["capability_seq", "int64", { low: 0, high: 0, unsigned: false }] } }, ImData: { $m: { 1: ["id_name", "bytes", []], 2: ["nick_name", "bytes", []], 3: ["role", "uint32", 0], 4: ["msg_id", "uint64", { low: 0, high: 0, unsigned: true }], 5: ["msg_category", "uint32", 0], 6: ["msg_type", "uint32", 0], 7: ["msg_content", "bytes", []], 8: ["send_time", "int64", { low: 0, high: 0, unsigned: false }] } }, LiveroomSessionInfo: { $m: { 1: ["RoomId", "bytes", []], 2: ["UserSessionId", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["RoomSessionId", "uint64", { low: 0, high: 0, unsigned: true }], 4: ["Role", "uint32", 0] } }, PushBigIm: { $m: { 1: ["msg_list", "<rtc.liveroom_cs_v3.BigImData", null] } }, PushCapabilityChange: { $m: { 1: ["capability_seq", "int64", { low: 0, high: 0, unsigned: false }], 3: ["capability_collection", "<rtc.liveroom_cs_v3.CapabilityResult", null] } }, PushChannelMsg: { $m: { 1: ["sender_idname", "bytes", []], 2: ["sender_nickname", "bytes", []], 3: ["channel_type", "uint32", 0], 4: ["msg_type", "uint32", 0], 5: ["msg_content", "bytes", []] } }, PushIm: { $m: { 1: ["server_msg_id", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["ret_msg_id", "uint64", { low: 0, high: 0, unsigned: true }], 4: ["msg_list", "<rtc.liveroom_cs_v3.ImData", null] } }, PushStartGather: { $m: { 1: ["gather_id", "string", ""], 2: ["gather_seq", "uint32", 0] } }, PushStopGather: { $m: { 1: ["gather_id", "string", ""], 2: ["gather_seq", "uint32", 0] } }, PushStream: { $m: { 1: ["stream_seq", "uint32", 0], 2: ["stream_info_list", "<rtc.liveroom_cs_v3.PushStreamInfo", null] } }, PushStreamInfo: { $m: { 1: ["stream_id", "bytes", []], 2: ["stream_sid", "string", ""], 3: ["id_name", "bytes", []], 4: ["nick_name", "bytes", []], 5: ["stream_title", "bytes", []], 6: ["stream_ver", "uint32", 0], 7: ["stream_attr", "bytes", []], 8: ["stream_src", "uint32", 0], 9: ["stream_state", "uint32", 0], 10: ["stream_type", "uint32", 0], 11: ["stream_nid", "uint32", 0], 12: ["extra_info", "bytes", []], 13: ["create_time", "int64", { low: 0, high: 0, unsigned: false }], 14: ["close_type", "uint32", 0], 15: ["need_gather", "uint32", 0], 17: ["stream_attr_opts", "rtc.liveroom_cs_v3.StreamAttrOptions", null], 18: ["sdk_custom", "bytes", []] } }, PushTrans: { $m: { 1: ["id_name", "bytes", []], 2: ["nick_name", "bytes", []], 3: ["role", "uint32", 0], 4: ["trans_type", "bytes", []], 5: ["trans_data", "bytes", []], 6: ["trans_seq", "uint32", 0], 7: ["trans_send_time", "int64", { low: 0, high: 0, unsigned: false }], 8: ["trans_channel", "bytes", []], 9: ["trans_list_seq", "uint32", 0] } }, PushTransparentMsg: { $m: { 1: ["msg_data", "bytes", []], 2: ["client_seq", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["sender_idname", "bytes", []], 4: ["sender_nickname", "bytes", []] } }, PushUserInfoUpdated: { $m: { 1: ["server_user_seq", "int64", { low: 0, high: 0, unsigned: false }], 2: ["user_action_list", "<rtc.liveroom_cs_v3.UserAction", null] } }, PushUserKickout: { $m: { 1: ["id_name", "bytes", []], 2: ["user_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["kickout_reason", "int32", 0], 4: ["custom_reason", "bytes", []] } }, PushUserLogReport: { $m: {} }, PushUserTokenExpire: { $m: { 1: ["token", "string", ""], 2: ["stop_stream_info", "rtc.liveroom_cs_v3.StopStream", null] } }, PushUserTrans: { $m: { 1: ["id_name", "bytes", []], 2: ["nick_name", "bytes", []], 3: ["role", "uint32", 0], 4: ["trans_send_time", "int64", { low: 0, high: 0, unsigned: false }], 5: ["trans_channel", "bytes", []], 6: ["trans_seq_list", "<rtc.liveroom_cs_v3.PushUserTransInfo", null] } }, PushUserTransInfo: { $m: { 1: ["trans_type", "bytes", []], 2: ["trans_data", "bytes", []], 3: ["trans_seq", "uint32", 0] } }, QuitRoomReq: { $m: {} }, QuitRoomRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, RelateResult: { $m: { 1: ["service", "string", ""], 2: ["relate_result", "uint32", 0] } }, RenewTokenReq: { $m: { 1: ["token", "string", ""] } }, RenewTokenRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["token_remain_time", "uint32", 0], 3: ["stop_stream_id_list", "<bytes", null] } }, RspHead: { $m: { 1: ["code", "uint32", 0], 2: ["message", "string", ""] } }, SendBigImReq: { $m: { 1: ["msg_list", "<rtc.liveroom_cs_v3.SendBigImReqMsgData", null] } }, SendBigImReqMsgData: { $m: { 1: ["msg_category", "uint32", 0], 2: ["msg_type", "uint32", 0], 3: ["msg_content", "bytes", []], 4: ["msg_timestamp", "int64", { low: 0, high: 0, unsigned: false }], 5: ["msg_client_id", "bytes", []] } }, SendBigImRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["big_im_time_window", "uint32", 0], 3: ["msg_list", "<rtc.liveroom_cs_v3.SendBigImRspMsgData", null] } }, SendBigImRspMsgData: { $m: { 1: ["msg_id", "bytes", []], 2: ["msg_client_id", "bytes", []] } }, SendChannelMsgReq: { $m: { 1: ["channel_type", "uint32", 0], 2: ["msg_type", "uint32", 0], 3: ["msg_content", "bytes", []], 4: ["to_user_list", "<bytes", null] } }, SendChannelMsgRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, SendImReq: { $m: { 1: ["msg_category", "uint32", 0], 2: ["msg_type", "uint32", 0], 3: ["msg_content", "bytes", []], 4: ["to_user_list", "<rtc.liveroom_cs_v3.ToUser", null] } }, SendImRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["msg_id", "uint64", { low: 0, high: 0, unsigned: true }] } }, SetTransReq: { $m: { 1: ["trans_type", "bytes", []], 2: ["trans_data", "bytes", []], 3: ["trans_local_seq", "uint32", 0], 4: ["trans_channel", "bytes", []] } }, SetTransRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["trans_type", "bytes", []], 3: ["trans_seq", "uint32", 0], 4: ["trans_list_seq", "uint32", 0], 5: ["trans_channel", "bytes", []] } }, SetUserAttrReq: { $m: { 1: ["use_data_channel", "uint32", 0], 2: ["is_modify_use_data_channel", "bool", false], 3: ["user_type", "uint32", 0], 4: ["is_modify_user_type", "bool", false] } }, SetUserAttrRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, SignalLiveCustomReq: { $m: { 1: ["push_message", "bytes", []], 2: ["to_user_list", "<rtc.liveroom_cs_v3.ToUser", null] } }, SignalLiveCustomRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, SignalLiveInviteReq: { $m: { 1: ["push_message", "bytes", []], 2: ["to_user_list", "<rtc.liveroom_cs_v3.ToUser", null] } }, SignalLiveInviteRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, SignalLiveRequestReq: { $m: { 1: ["push_message", "bytes", []], 2: ["to_user_list", "<rtc.liveroom_cs_v3.ToUser", null] } }, SignalLiveRequestRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, SignalLiveResultReq: { $m: { 1: ["push_message", "bytes", []], 2: ["to_user_list", "<rtc.liveroom_cs_v3.ToUser", null] } }, SignalLiveResultRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, SignalLiveStopReq: { $m: { 1: ["push_message", "bytes", []], 2: ["to_user_list", "<rtc.liveroom_cs_v3.ToUser", null] } }, SignalLiveStopRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, SignalTransmitReq: { $m: { 1: ["to_user_list", "<bytes", null], 2: ["transmit_data", "bytes", []] } }, SignalTransmitResult: { $m: { 1: ["to_user", "bytes", []], 2: ["result", "rtc.liveroom_cs_v3.EnumSignalTransmitResult", 0] } }, SignalTransmitRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["result", "<rtc.liveroom_cs_v3.SignalTransmitResult", null] } }, SignalTransparentMsgReq: { $m: { 1: ["msg_type", "rtc.liveroom_cs_v3.EnumSignalTransparentMsgType", 0], 2: ["msg_data", "bytes", []], 3: ["to_user_list", "<bytes", null], 4: ["client_seq", "uint64", { low: 0, high: 0, unsigned: true }] } }, SignalTransparentMsgRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null] } }, StopStream: { $m: { 1: ["stream_id_list", "<bytes", null] } }, StreamAttrOptions: { $m: { 1: ["stream_resource", "sint32", 0], 2: ["stream_codec", "sint32", 0], 3: ["play_mode", "uint32", 0], 4: ["forbid_play_expire_time", "int64", { low: 0, high: 0, unsigned: false }], 5: ["censor_flag", "int32", 0] } }, StreamInfo: { $m: { 1: ["stream_id", "bytes", []], 2: ["stream_sid", "string", ""], 3: ["id_name", "bytes", []], 4: ["nick_name", "bytes", []], 5: ["stream_title", "bytes", []], 6: ["stream_ver", "uint32", 0], 7: ["stream_attr", "bytes", []], 8: ["create_time", "int64", { low: 0, high: 0, unsigned: false }], 9: ["stream_src", "uint32", 0], 10: ["stream_state", "uint32", 0], 11: ["stream_type", "uint32", 0], 12: ["stream_nid", "uint32", 0], 13: ["extra_info", "bytes", []], 14: ["need_gather", "uint32", 0], 16: ["stream_attr_opts", "rtc.liveroom_cs_v3.StreamAttrOptions", null], 17: ["sdk_custom", "bytes", []] } }, ToUser: { $m: { 1: ["id_name", "bytes", []], 2: ["user_id", "uint64", { low: 0, high: 0, unsigned: true }] } }, TransChannel: { $m: { 1: ["trans_channel", "bytes", []], 2: ["trans_seq_list", "<rtc.liveroom_cs_v3.TransSeq", null] } }, TransSeq: { $m: { 1: ["trans_type", "bytes", []], 2: ["trans_seq", "uint32", 0] } }, UpdateStreamAttrReq: { $m: { 1: ["stream_id", "bytes", []], 2: ["client_req_seq", "uint32", 0], 3: ["update_flag", "uint32", 0], 5: ["stream_attr_opts", "rtc.liveroom_cs_v3.StreamAttrOptions", null], 6: ["sdk_custom", "bytes", []] } }, UpdateStreamAttrRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["stream_seq", "uint32", 0] } }, UpdateStreamReq: { $m: { 1: ["stream_sid", "string", ""], 2: ["stream_id", "bytes", []], 3: ["stream_title", "bytes", []], 4: ["stream_attr", "bytes", []], 5: ["extra_info", "bytes", []], 6: ["client_req_seq", "uint32", 0], 7: ["nick_name", "bytes", []] } }, UpdateStreamRsp: { $m: { 1: ["rsp_head", "rtc.liveroom_cs_v3.RspHead", null], 2: ["stream_seq", "uint32", 0], 3: ["stream_ver", "uint32", 0] } }, UserAction: { $m: { 1: ["action", "uint32", 0], 2: ["id_name", "bytes", []], 3: ["nick_name", "bytes", []], 4: ["role", "uint32", 0], 5: ["login_time", "int64", { low: 0, high: 0, unsigned: false }] } }, UserBaseInfo: { $m: { 1: ["id_name", "bytes", []], 2: ["nick_name", "bytes", []], 3: ["role", "uint32", 0] } } }, logreport: { ChargeInfo: { $m: { 1: ["is_publishing", "uint32", 0], 2: ["play_stream_resolution_infos", "<rtc.logreport.ResolutionInfo", null], 3: ["play_max_audio_bitrate", "uint32", 0], 4: ["no_playing", "uint32", 0], 5: ["p2p_charge_info", "rtc.logreport.P2PChargeInfo", null], 6: ["sample_time_offset", "uint32", 0], 7: ["play_l3_stream_resolution_infos", "<rtc.logreport.ResolutionInfo", null], 8: ["play_l3_max_audio_bitrate", "uint32", 0] } }, ChargeInfos: { $m: { 1: ["timestamp_offset_begin", "uint32", 0], 2: ["timestamp_offset_end", "uint32", 0], 3: ["timestamp_diff_flag", "uint32", 0], 4: ["timestamp_diff", "uint32", 0], 5: ["room_id", "string", ""], 6: ["play_iframe", "uint32", 0], 100: ["infos", "<rtc.logreport.ChargeInfo", null] } }, DynQualityEvent: { $m: { 1: ["seq_no", "string", ""], 2: ["num", "uint32", 0], 3: ["dyn_quality_infos", "<rtc.logreport.DynQualityInfos", null], 4: ["device_id", "string", ""], 5: ["latitude", "uint32", 0], 6: ["longitude", "uint32", 0], 7: ["country", "string", ""], 8: ["region", "string", ""], 9: ["city", "string", ""], 10: ["isp", "string", ""], 11: ["ve_mode", "uint32", 0] } }, DynQualityInfo: { $m: { 1: ["time", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["plr", "uint32", 0], 3: ["rtt", "uint32", 0], 4: ["score", "uint32", 0], 5: ["sample_time", "uint32", 0] } }, DynQualityInfos: { $m: { 1: ["timestamp_offset_begin", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["timestamp_offset_end", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["server_ip", "string", ""], 4: ["infos", "<rtc.logreport.DynQualityInfo", null], 5: ["network_type", "uint32", 0], 6: ["stream_id", "string", ""] } }, HardwareInfo: { $m: { 1: ["sys_cpu_used", "uint32", 0], 2: ["app_cpu_used", "uint32", 0], 3: ["sys_mem_used", "uint32", 0], 4: ["app_mem_used", "uint32", 0], 5: ["sample_time_offset", "uint32", 0] } }, HardwareInfos: { $m: { 1: ["timestamp_offset_begin", "uint32", 0], 2: ["timestamp_offset_end", "uint32", 0], 3: ["infos", "<rtc.logreport.HardwareInfo", null], 4: ["sys_mem_total", "uint32", 0] } }, NoBillingEvent: { $m: { 1: ["platform_info", "string", ""], 2: ["room_id", "string", ""] } }, P2PChargeInfo: { $m: { 1: ["media_inc", "uint64", { low: 0, high: 0, unsigned: true }], 2: ["data_inc", "uint64", { low: 0, high: 0, unsigned: true }] } }, PlayQualityInfo: { $m: { 1: ["audio_bitrate", "uint32", 0], 2: ["video_bitrate", "uint32", 0], 3: ["video_network_fps", "uint32", 0], 4: ["audio_break_count", "uint32", 0], 5: ["video_break_count", "uint32", 0], 6: ["downlink_plr", "uint32", 0], 7: ["peer_to_peer_plr", "uint32", 0], 8: ["peer_to_peer_delay", "uint32", 0], 9: ["audio_network_fps", "uint32", 0], 10: ["audio_break_duration", "uint32", 0], 11: ["video_break_duration", "uint32", 0], 12: ["audio_break_rate", "uint32", 0], 13: ["video_break_rate", "uint32", 0], 14: ["audio_break_cancel", "uint32", 0], 15: ["video_break_cancel", "uint32", 0], 16: ["rtt", "uint32", 0], 17: ["rendered_sound_level", "uint32", 0], 18: ["audio_break_cancel_duration", "uint32", 0], 19: ["video_break_cancel_duration", "uint32", 0], 20: ["audio_decode_time", "uint32", 0], 21: ["video_decode_time", "uint32", 0], 22: ["real_sampling_interval", "uint32", 0], 23: ["mos", "int32", 0], 24: ["audio_decode_fps", "uint32", 0], 25: ["video_decode_fps", "uint32", 0], 26: ["video_frames_decoded", "uint32", 0], 27: ["video_frames_dropped", "uint32", 0], 28: ["quality", "int32", 0], 29: ["evaluation_quality", "int32", 0], 30: ["break_stat_duration", "uint32", 0], 31: ["sample_time_offset", "uint32", 0], 32: ["peer_to_peer_net_delay", "uint32", 0], 33: ["audio_render_fps", "uint32", 0], 34: ["video_render_fps", "uint32", 0], 35: ["video_frame_interval_standard_deviation", "uint32", 0], 100: ["sample_time_window", "uint32", 0] } }, PlayQualityInfos: { $m: { 1: ["timestamp_offset_begin", "uint32", 0], 2: ["timestamp_offset_end", "uint32", 0], 3: ["stream_id", "string", ""], 4: ["session_id", "uint32", 0], 5: ["video_width", "uint32", 0], 6: ["video_height", "uint32", 0], 7: ["ipv4", "uint32", 0], 8: ["ipv6", "string", ""], 9: ["resource_type", "uint32", 0], 10: ["infos", "<rtc.logreport.PlayQualityInfo", null], 11: ["room_id", "string", ""], 13: ["session", "string", ""], 14: ["room_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 15: ["protocol_type", "uint32", 0], 16: ["product", "uint32", 0], 17: ["resource_flag", "uint32", 0] } }, PublishQualityInfo: { $m: { 1: ["audio_bitrate", "uint32", 0], 2: ["video_bitrate", "uint32", 0], 3: ["video_capture_fps", "uint32", 0], 4: ["video_network_fps", "uint32", 0], 5: ["uplink_plr", "uint32", 0], 6: ["rtt", "uint32", 0], 7: ["audio_network_fps", "uint32", 0], 8: ["captured_sound_level", "uint32", 0], 9: ["quality", "uint32", 0], 10: ["sample_time_offset", "uint32", 0], 11: ["tc_setting_audio_bitrate", "uint32", 0], 12: ["tc_setting_video_bitrate", "uint32", 0], 13: ["audio_capture_fps", "uint32", 0], 14: ["video_encode_fps", "uint32", 0], 100: ["sample_time_window", "uint32", 0] } }, PublishQualityInfos: { $m: { 1: ["timestamp_offset_begin", "uint32", 0], 2: ["timestamp_offset_end", "uint32", 0], 3: ["stream_id", "string", ""], 4: ["session_id", "uint32", 0], 5: ["video_width", "uint32", 0], 6: ["video_height", "uint32", 0], 7: ["ipv4", "uint32", 0], 8: ["ipv6", "string", ""], 9: ["resource_type", "uint32", 0], 10: ["infos", "<rtc.logreport.PublishQualityInfo", null], 11: ["room_id", "string", ""], 13: ["evnvironment", "uint32", 0], 14: ["ap", "string", ""], 15: ["session", "string", ""], 16: ["room_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 17: ["protocol_type", "uint32", 0], 18: ["setting_video_bitrate", "uint32", 0], 19: ["setting_audio_bitrate", "uint32", 0], 20: ["setting_video_fps", "uint32", 0], 21: ["resource_flag", "uint32", 0] } }, QualityEvent: { $m: { 1: ["hardware_infos", "rtc.logreport.HardwareInfos", null], 2: ["publish_quality_infos", "<rtc.logreport.PublishQualityInfos", null], 3: ["play_quality_infos", "<rtc.logreport.PlayQualityInfos", null], 4: ["network_type", "uint32", 0], 5: ["charge_infos", "rtc.logreport.ChargeInfos", null], 6: ["server_time", "int64", { low: 0, high: 0, unsigned: false }], 100: ["client_type", "uint32", 0] }, ResourceType: { $e: { UNKNOWN: 0, CDN: 1, RTC: 2, L3: 3, P2P: 4 } } }, ResolutionInfo: { $m: { 1: ["video_width", "uint32", 0], 2: ["video_height", "uint32", 0], 3: ["count", "uint32", 0] } }, SpeedLogHead: { $m: { 1: ["version", "uint32", 0], 2: ["signature", "bytes", []], 3: ["timestamp", "uint32", 0], 4: ["event", "uint32", 0], 5: ["app_id", "uint32", 0], 6: ["user_id", "string", ""], 7: ["biz_type", "uint32", 0], 8: ["device_id", "string", ""], 9: ["lite_sign", "bytes", []], 10: ["token", "bytes", []], 11: ["os_type", "string", ""], 12: ["sdk_version", "string", ""], 13: ["time_offset", "int64", { low: 0, high: 0, unsigned: false }], 14: ["scenario", "uint32", 0], 15: ["report_version", "uint32", 0], 16: ["customer_context", "uint32", 0], 17: ["extlib_type", "uint32", 0] }, BizType: { $e: { UNKNOWN: 0, LIVE: 1, RTV: 2 } }, Event: { $e: { QUALITY_EVENT: 0, NO_BILLING_EVENT: 100, DETECT_QUALITY_EVENT: 300 } }, ProtoVersion: { $e: { PROTO_VERSION: 0, PROTO_VERSION1: 1, PROTO_VERSION2: 2, PROTO_VERSION3: 3, PROTO_VERSION4: 4, PROTO_VERSION5: 5, PROTO_VERSION6: 6, PROTO_VERSION7: 7, PROTO_VERSION8: 8, PROTO_VERSION9: 9, PROTO_VERSION10: 10, PROTO_VERSION11: 11, PROTO_VERSION12: 12, PROTO_VERSION13: 13, PROTO_VERSION14: 14, PROTO_VERSION15: 15, PROTO_VERSION16: 16, PROTO_VERSION17: 17, PROTO_VERSION18: 18, PROTO_VERSION19: 19, PROTO_VERSION20: 20, PROTO_VERSION21: 21, PROTO_VERSION22: 22 } }, ZegoScenario: { $e: { ZEGO_SCENARIO_GENERAL: 0, ZEGO_SCENARIO_COMMUNICATION: 1, ZEGO_SCENARIO_LIVE: 2, ZEGO_SCENARIO_DEFAULT: 3, ZEGO_SCENARIO_STANDARD_VIDEO_CALL: 4, ZEGO_SCENARIO_HIGH_QUALITY_VIDEO_CALL: 5, ZEGO_SCENARIO_STANDARD_CHATROOM: 6, ZEGO_SCENARIO_HIGH_QUALITY_CHATROOM: 7, ZEGO_SCENARIO_BROADCAST: 8, ZEGO_SCENARIO_KARAOKE: 9, ZEGO_SCENARIO_STANDARD_VOICE_CALL: 10, ZEGO_SCENARIO_UNDEFINED: 99 } } }, SpeedLogRsp: { $m: { 1: ["code", "uint32", 0], 2: ["message", "string", ""] } } }, proto_switch_v3: { AnchorInfo: { $m: { 1: ["id_name", "bytes", []], 2: ["user_id", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["nick_name", "bytes", []] } }, Capabilities: { $m: { 1: ["video_codec", "uint32", 0], 2: ["gop_mode", "uint32", 0] } }, CommonRsp: { $m: { 1: ["rsp_head", "rtc.proto_switch_v3.RspHead", null] } }, GatherInfo: { $m: { 1: ["gather_id", "string", ""] } }, Header: { $m: { 1: ["cmd", "uint32", 0], 2: ["seq", "uint32", 0], 3: ["timestamp", "int64", { low: 0, high: 0, unsigned: false }], 4: ["controls", "bytes", []], 5: ["flags", "bytes", []], 6: ["context_key", "uint32", 0], 101: ["dev_traffic_label", "bytes", []] } }, LiveroomProtoVersion: { $e: { PROTO_VERSION_NONE: 0, RPOTO_V020000: 131072 } }, LoginRoomReq: { $m: { 1: ["app_id", "uint32", 0], 2: ["biz_type", "uint32", 0], 3: ["room_id", "bytes", []], 4: ["room_name", "bytes", []], 5: ["role", "uint32", 0], 6: ["id_name", "bytes", []], 7: ["nick_name", "bytes", []], 8: ["device_id", "string", ""], 9: ["term_type", "rtc.proto_switch_v3.TermType", 0], 10: ["net_type", "rtc.proto_switch_v3.NetType", 0], 11: ["sdk_conn_type", "rtc.proto_switch_v3.SdkConnType", 0], 12: ["sdk_version", "uint32", 0], 13: ["biz_version", "string", ""], 14: ["client_stamp", "bytes", []], 15: ["login_logic", "uint32", 0], 16: ["third_token", "bytes", []], 17: ["login_token", "bytes", []], 18: ["relogin_token", "bytes", []], 19: ["switch_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 20: ["user_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 21: ["room_create_flag", "uint32", 0], 22: ["user_state_flag", "uint32", 0], 23: ["user_count_limit", "uint32", 0], 24: ["relate_service", "string", ""], 25: ["need_gather_stream", "uint32", 0], 26: ["callback_data", "bytes", []], 27: ["service_flags", "uint32", 0], 28: ["license_token", "bytes", []], 29: ["relogin_type", "rtc.proto_switch_v3.ReloginType", 0], 30: ["Capabilities", "rtc.proto_switch_v3.Capabilities", null] } }, LoginRoomRsp: { $m: { 1: ["rsp_head", "rtc.proto_switch_v3.RspHead", null], 2: ["switch_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 3: ["user_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 4: ["room_session_id", "uint64", { low: 0, high: 0, unsigned: true }], 5: ["user_id", "uint64", { low: 0, high: 0, unsigned: true }], 6: ["ret_timestamp", "int64", { low: 0, high: 0, unsigned: false }], 7: ["big_im_time_window", "uint32", 0], 8: ["liveroom_hb_interval", "uint32", 0], 9: ["liveroom_hb_timeout", "uint32", 0], 10: ["online_count", "uint32", 0], 11: ["anchor_info", "rtc.proto_switch_v3.AnchorInfo", null], 12: ["relogin_token", "bytes", []], 13: ["userlist_merge_timeout", "uint32", 0], 14: ["userlist_interval", "uint32", 0], 15: ["token_remain_time", "uint32", 0], 16: ["trans_list_seq", "uint32", 0], 17: ["trans_channel_list", "<rtc.proto_switch_v3.TransChannel", null], 18: ["stream_count", "uint32", 0], 19: ["stream_list_seq", "uint32", 0], 20: ["stream_info_list", "<rtc.proto_switch_v3.StreamInfo", null], 21: ["stream_fetch_flag", "uint32", 0], 22: ["stream_list_push_merge_timeout", "uint32", 0], 23: ["stream_list_hb_merge_timeout", "uint32", 0], 24: ["relate_result_list", "<rtc.proto_switch_v3.RelateResult", null], 25: ["gather_list_seq", "uint32", 0], 26: ["gather_info_list", "<rtc.proto_switch_v3.GatherInfo", null] } }, LogoutRoomReq: { $m: { 2: ["logout_check", "bytes", []] } }, LogoutRoomRsp: { $m: { 1: ["rsp_head", "rtc.proto_switch_v3.RspHead", null] } }, MergePushHead: { $m: { 1: ["qos_flag", "uint32", 0], 2: ["send_time", "int64", { low: 0, high: 0, unsigned: false }] } }, MergePushInfo: { $m: { 1: ["sub_cmd", "uint32", 0], 2: ["sub_seq", "uint32", 0], 3: ["msg_body", "bytes", []] } }, MergePushReq: { $m: { 1: ["head", "rtc.proto_switch_v3.MergePushHead", null], 2: ["message_list", "<rtc.proto_switch_v3.MergePushInfo", null] } }, MergePushRsp: { $m: { 1: ["message_list", "<rtc.proto_switch_v3.MergePushRspInfo", null], 2: ["server_send_time", "int64", { low: 0, high: 0, unsigned: false }] } }, MergePushRspInfo: { $m: { 1: ["sub_cmd", "uint32", 0], 2: ["sub_seq", "uint32", 0] } }, NetType: { $e: { NT_NONE: 0, NT_LINE: 1, NT_WIFI: 2, NT_2G: 3, NT_3G: 4, NT_4G: 5, NT_UNKNOWN: 32 } }, PushKickout: { $m: { 1: ["reason", "uint32", 0], 2: ["message", "string", ""], 3: ["is_need_relogin", "uint32", 0] } }, PushReq: { $m: { 1: ["head", "rtc.proto_switch_v3.PushReqHead", null], 2: ["msg_body", "bytes", []] } }, PushReqHead: { $m: { 1: ["sub_cmd", "uint32", 0], 2: ["qos_flag", "uint32", 0], 3: ["send_time", "int64", { low: 0, high: 0, unsigned: false }] } }, PushRsp: { $m: { 1: ["code", "uint32", 0], 2: ["message", "string", ""], 3: ["sub_cmd", "uint32", 0], 4: ["server_send_time", "int64", { low: 0, high: 0, unsigned: false }] } }, RelateResult: { $m: { 1: ["service", "string", ""], 2: ["relate_result", "uint32", 0] } }, ReloginType: { $e: { ReloginType_None: 0, ReloginType_SdkAuto: 1 } }, RspHead: { $m: { 1: ["code", "uint32", 0], 2: ["message", "string", ""] } }, SdkConnType: { $e: { SdkConnType_None: 0, SdkConnType_Tcp: 1, SdkConnType_Websocket: 2 } }, StreamAttrOptions: { $m: { 1: ["stream_resource", "sint32", 0], 2: ["stream_codec", "sint32", 0], 3: ["play_mode", "uint32", 0], 4: ["forbid_play_expire_time", "int64", { low: 0, high: 0, unsigned: false }], 5: ["censor_flag", "int32", 0] } }, StreamInfo: { $m: { 1: ["stream_id", "bytes", []], 2: ["stream_sid", "string", ""], 3: ["id_name", "bytes", []], 4: ["nick_name", "bytes", []], 5: ["create_time", "int64", { low: 0, high: 0, unsigned: false }], 6: ["extra_info", "bytes", []], 7: ["title", "bytes", []], 8: ["stream_ver", "uint32", 0], 9: ["stream_attr", "bytes", []], 10: ["stream_src", "uint32", 0], 11: ["stream_state", "uint32", 0], 12: ["stream_type", "uint32", 0], 13: ["stream_nid", "uint32", 0], 14: ["need_gather", "uint32", 0], 16: ["stream_attr_opts", "rtc.proto_switch_v3.StreamAttrOptions", null], 17: ["sdk_custom", "bytes", []] } }, TermType: { $e: { TT_NONE: 0, TT_PC: 1, TT_IOS: 2, TT_ANDROID: 3, TT_MAC: 4, TT_LINUX: 5, TT_WEB: 6, TT_MINI_PROGRAM: 7, TT_UNKNOWN: 32 } }, TransChannel: { $m: { 1: ["trans_channel", "bytes", []], 2: ["trans_seq_list", "<rtc.proto_switch_v3.TransSeq", null] } }, TransSeq: { $m: { 1: ["trans_type", "bytes", []], 2: ["trans_seq", "uint32", 0] } } }, webproxy: { HTTPHeader: { $m: { 1: ["name", "string", ""], 2: ["val", "string", ""] } }, HTTPRequest: { $m: { 1: ["appid", "uint32", 0], 2: ["biz_type", "uint32", 0], 3: ["mode", "rtc.webproxy.Mode", 0], 4: ["id_name", "string", ""], 5: ["token", "string", ""], 6: ["url", "string", ""], 7: ["method", "rtc.webproxy.Method", 0], 8: ["headers", "<rtc.webproxy.HTTPHeader", null], 9: ["body", "bytes", []] } }, HTTPResponse: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""], 3: ["data", "rtc.webproxy.HTTPResponseData", null] } }, HTTPResponseData: { $m: { 1: ["status_code", "int32", 0], 2: ["headers", "<rtc.webproxy.HTTPHeader", null], 3: ["body", "bytes", []] } }, IntranetCheckRequest: { $m: { 1: ["appid", "uint32", 0], 2: ["biz_type", "uint32", 0], 3: ["mode", "rtc.webproxy.Mode", 0], 4: ["id_name", "string", ""], 5: ["token", "string", ""], 6: ["vrs_ipv4", "fixed32", 0], 7: ["vrs_ipv6", "rtc.webproxy.IPv6Addr", null] } }, IntranetCheckResponse: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""], 3: ["data", "rtc.webproxy.IntranetCheckResponseData", null] } }, IntranetCheckResponseData: { $m: { 1: ["intranet", "bool", false] } }, IPv6Addr: { $m: { 1: ["high", "fixed64", { low: 0, high: 0, unsigned: false }], 2: ["low", "fixed64", { low: 0, high: 0, unsigned: false }] } }, Method: { $e: { METHOD_UNSET: 0, METHOD_GET: 1, METHOD_POST: 2, METHOD_PUT: 3, METHOD_PATCH: 4, METHOD_DELETE: 5, METHOD_HEAD: 6, METHOD_OPTIONS: 7 } }, Mode: { $e: { MODE_UNSET: 0, MODE_ONLINE: 1, MODE_TEST: 2 } }, TurnInfoRequest: { $m: { 1: ["appid", "uint32", 0], 2: ["biz_type", "uint32", 0], 3: ["mode", "rtc.webproxy.Mode", 0], 4: ["id_name", "string", ""], 5: ["token", "string", ""] } }, TurnInfoResponse: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""], 3: ["data", "rtc.webproxy.TurnInfoResponseData", null] } }, TurnInfoResponseData: { $m: { 1: ["username", "string", ""], 2: ["password", "string", ""], 3: ["turn_ipv4", "fixed32", 0], 4: ["turn_ipv6", "rtc.webproxy.IPv6Addr", null], 5: ["turn_port", "uint32", 0], 6: ["expiration_in_seconds", "uint32", 0], 7: ["turn_internal_ipv4", "fixed32", 0] } }, WssBindRequest: { $m: { 1: ["appid", "uint32", 0], 2: ["biz_type", "uint32", 0], 3: ["mode", "rtc.webproxy.Mode", 0], 4: ["id_name", "string", ""], 5: ["token", "string", ""], 6: ["url", "string", ""], 7: ["ack", "bool", false] } }, WssBindRequestAck: { $m: {} }, WssBindResponse: { $m: { 1: ["code", "int32", 0], 2: ["message", "string", ""] } } }, webrtc_cmd: { ActivateAudioPlayStreamReq: { $m: { 1: ["seq", "uint32", 0], 2: ["active", "sint32", 0] } }, ActivateAudioPlayStreamRsp: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, ActivateSEIInsertReq: { $m: { 1: ["seq", "uint32", 0], 2: ["action", "sint32", 0], 3: ["info_type", "uint32", 0] } }, ActivateSEIInsertRsp: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, ActivateVideoPlayStreamReq: { $m: { 1: ["seq", "uint32", 0], 2: ["active", "sint32", 0], 3: ["layer", "sint32", 0] } }, ActivateVideoPlayStreamRsp: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, BroadcasterStatusAck: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, BroadcasterStatusNotify: { $m: { 1: ["seq", "uint32", 0], 2: ["status", "uint32", 0] } }, ClientInfoAck: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, ClientInfoPush: { $m: { 1: ["seq", "uint32", 0], 2: ["peer_id", "uint32", 0], 3: ["clientip", "string", ""] } }, ClosePeerAck: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, ClosePeerPush: { $m: { 1: ["seq", "uint32", 0], 2: ["reason", "sint32", 0], 3: ["err_info", "string", ""] } }, ClosePeerReq: { $m: { 1: ["seq", "uint32", 0], 2: ["reason", "sint32", 0] } }, ClosePeerRsp: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, HeartBeatMsgSetAck: { $m: { 1: ["seq", "uint32", 0], 2: ["ts", "int64", { low: 0, high: 0, unsigned: false }], 3: ["result", "sint32", 0] } }, HeartBeatMsgSetPush: { $m: { 1: ["seq", "uint32", 0], 2: ["ts", "int64", { low: 0, high: 0, unsigned: false }], 3: ["payloads", "<rtc.webrtc_cmd.HeatbeatPayload", null] } }, HeatbeatPayload: { $m: { 1: ["p2p_net_stat_rsp", "rtc.webrtc_cmd.Peer2PeerNetStatsGetRsp", null], 2: ["play_net_stat", "rtc.webrtc_cmd.PlayNetStatus", null], 3: ["play_stats_rsp", "rtc.webrtc_cmd.PlayStatsRsp", null], 4: ["net_quality_push", "rtc.webrtc_cmd.NetQualityGradePush", null], 5: ["pub_net_stat", "rtc.webrtc_cmd.PublishNetStatus", null], 6: ["pub_quality_grade_rsp", "rtc.webrtc_cmd.NetQualityGradeRsp", null], 7: ["stream_status_push", "rtc.webrtc_cmd.StreamStatusNotify", null], 8: ["code_err_push", "rtc.webrtc_cmd.MediaCodecErrorNotify", null], 9: ["play_event_push", "rtc.webrtc_cmd.PlayEventPush", null], 10: ["pub_event_push", "rtc.webrtc_cmd.PublishEventPush", null] } }, MediaCodecErrorAck: { $m: { 1: ["result", "sint32", 0], 2: ["seq", "uint32", 0] } }, MediaCodecErrorNotify: { $m: { 1: ["media_type", "sint32", 0], 2: ["error_type", "sint32", 0], 3: ["seq", "uint32", 0] } }, NetQualityGradeAck: { $m: { 1: ["result", "sint32", 0], 2: ["seq", "uint32", 0] } }, NetQualityGradePush: { $m: { 1: ["tx_quality", "sint32", 0], 2: ["rx_quality", "sint32", 0], 3: ["seq", "uint32", 0] } }, NetQualityGradeReq: { $m: { 1: ["tx_quality", "sint32", 0], 2: ["rx_quality", "sint32", 0], 3: ["seq", "uint32", 0] } }, NetQualityGradeRsp: { $m: { 1: ["result", "sint32", 0], 2: ["seq", "uint32", 0] } }, NetQualityInfoAck: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, NetQualityInfoPush: { $m: { 1: ["seq", "uint32", 0], 2: ["lossrate", "uint32", 0], 3: ["rtt", "uint32", 0] } }, NetQualityProbeReq: { $m: { 1: ["seq", "uint32", 0], 2: ["action", "sint32", 0] } }, NetQualityProbeRsp: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, Peer2PeerNetStatsGetReq: { $m: { 1: ["seq", "uint32", 0] } }, Peer2PeerNetStatsGetRsp: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0], 3: ["p2p_lost_rate", "uint32", 0], 4: ["p2p_rtt", "uint32", 0] } }, PeerExtendParamPush: { $m: { 1: ["turn_username", "string", ""], 2: ["turn_auth_key", "string", ""], 3: ["candidate", "string", ""], 4: ["sdpMid", "string", ""], 5: ["sdpMLineIndex", "sint32", 0], 6: ["turn_urls", "string", ""], 7: ["peer_id", "uint32", 0] } }, PeerExtendParams: { $m: { 1: ["keyframe_intv", "sint32", 0], 2: ["min_play_buf_level_ms", "sint32", 0], 3: ["tc_type", "sint32", 0], 4: ["video_content_type", "sint32", 0], 5: ["sei_filter_pass", "sint32", 0], 6: ["client_class_type", "sint32", 0], 7: ["video_stream_type", "sint32", 0], 8: ["ktv_device_delay", "sint32", 0], 9: ["sync_ntp", "sint32", 0], 10: ["auto_switch_turn_type", "sint32", 0], 11: ["zg_proxy", "sint32", 0], 12: ["coturn_internal", "uint32", 0], 13: ["play_jitter_level", "sint32", 0], 14: ["tc_focuson_mode", "sint32", 0], 15: ["tc_min_video_kbps", "sint32", 0], 16: ["proto_flags", "uint32", 0], 17: ["req_poster_type", "uint32", 0], 18: ["enable_vid_clock_rate_est", "sint32", 0] } }, PlayEventPush: { $m: { 1: ["seq", "uint32", 0], 2: ["event", "sint32", 0] } }, PlayEventPushAck: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, PlayNetStatus: { $m: { 1: ["audio_tx_bitrate", "sint32", 0], 2: ["video_tx_bitrate", "sint32", 0], 3: ["video_red_rate", "uint32", 0], 4: ["traffic_control_stat", "sint32", 0], 5: ["traffic_control_bandwidth", "sint32", 0] } }, PlayStatsReq: { $m: { 1: ["seq", "uint32", 0], 2: ["audio_jitter_ms", "uint32", 0] } }, PlayStatsRsp: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, PublishEventAck: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, PublishEventPush: { $m: { 1: ["seq", "uint32", 0], 2: ["event", "sint32", 0] } }, PublishNetStatus: { $m: { 1: ["video_recv_bitrate", "sint32", 0], 2: ["traffic_control_stat", "sint32", 0], 3: ["video_lost_rate", "uint32", 0], 4: ["audio_recv_bitrate", "sint32", 0], 5: ["audio_lost_rate", "uint32", 0] } }, RestartICEReq: { $m: { 1: ["ice_ufrag", "string", ""], 2: ["ice_pwd", "string", ""], 3: ["seq", "uint32", 0] } }, RestartICERsp: { $m: { 1: ["result", "sint32", 0], 2: ["seq", "uint32", 0] } }, StreamPropertyUpdate: { $m: { 1: ["enable_stream_alignment_when_mix", "sint32", 0], 2: ["seq", "uint32", 0] } }, StreamPropertyUpdateAck: { $m: { 1: ["result", "sint32", 0], 2: ["seq", "uint32", 0] } }, StreamStatusAck: { $m: { 1: ["seq", "uint32", 0], 2: ["result", "sint32", 0] } }, StreamStatusNotify: { $m: { 1: ["seq", "uint32", 0], 2: ["mic_status", "sint32", 0], 3: ["camera_status", "sint32", 0] } }, UserUnregisteredSEIFilterReq: { $m: { 1: ["sei_filter", "string", ""], 2: ["seq", "uint32", 0] } }, UserUnregisteredSEIFilterRsp: { $m: { 1: ["result", "sint32", 0], 2: ["seq", "uint32", 0] } }, VideoStreamSubscribeReq: { $m: { 1: ["type", "uint32", 0], 2: ["seq", "uint32", 0] } }, VideoStreamSubscribeRsp: { $m: { 1: ["result", "sint32", 0], 2: ["seq", "uint32", 0] } }, WebrtcCmdReqMsg: { $m: { 2: ["video_stream_sub", "rtc.webrtc_cmd.VideoStreamSubscribeReq", null], 5: ["usr_sei_filter", "rtc.webrtc_cmd.UserUnregisteredSEIFilterReq", null], 6: ["net_quality_grade", "rtc.webrtc_cmd.NetQualityGradeReq", null], 7: ["net_quality_grade_push", "rtc.webrtc_cmd.NetQualityGradePush", null], 8: ["peer_extend_param", "rtc.webrtc_cmd.PeerExtendParams", null], 9: ["stream_property_update", "rtc.webrtc_cmd.StreamPropertyUpdate", null], 10: ["peer_ext_params_push", "rtc.webrtc_cmd.PeerExtendParamPush", null], 11: ["codec_error_notify", "rtc.webrtc_cmd.MediaCodecErrorNotify", null], 13: ["close_peer", "rtc.webrtc_cmd.ClosePeerReq", null], 15: ["close_peer_push", "rtc.webrtc_cmd.ClosePeerPush", null], 16: ["stream_status", "rtc.webrtc_cmd.StreamStatusNotify", null], 17: ["broadcaster_status", "rtc.webrtc_cmd.BroadcasterStatusNotify", null], 18: ["publish_event", "rtc.webrtc_cmd.PublishEventPush", null], 19: ["play_event", "rtc.webrtc_cmd.PlayEventPush", null], 20: ["active_audio_play", "rtc.webrtc_cmd.ActivateAudioPlayStreamReq", null], 21: ["active_video_play", "rtc.webrtc_cmd.ActivateVideoPlayStreamReq", null], 22: ["client_info", "rtc.webrtc_cmd.ClientInfoPush", null], 23: ["net_quality_probe", "rtc.webrtc_cmd.NetQualityProbeReq", null], 24: ["net_quality_push", "rtc.webrtc_cmd.NetQualityInfoPush", null], 25: ["active_sei_insert", "rtc.webrtc_cmd.ActivateSEIInsertReq", null], 26: ["p2p_net_stats_get", "rtc.webrtc_cmd.Peer2PeerNetStatsGetReq", null], 27: ["play_stats", "rtc.webrtc_cmd.PlayStatsReq", null], 28: ["restart_ice", "rtc.webrtc_cmd.RestartICEReq", null], 29: ["heartbeat_msg_push", "rtc.webrtc_cmd.HeartBeatMsgSetPush", null] } }, WebrtcCmdRspMsg: { $m: { 2: ["video_stream_sub", "rtc.webrtc_cmd.VideoStreamSubscribeRsp", null], 5: ["usr_sei_filter", "rtc.webrtc_cmd.UserUnregisteredSEIFilterRsp", null], 6: ["net_quality_grade", "rtc.webrtc_cmd.NetQualityGradeRsp", null], 7: ["net_quality_grade_ack", "rtc.webrtc_cmd.NetQualityGradeAck", null], 8: ["stream_property_update_ack", "rtc.webrtc_cmd.StreamPropertyUpdateAck", null], 9: ["codec_error_notify_ack", "rtc.webrtc_cmd.MediaCodecErrorAck", null], 11: ["close_peer", "rtc.webrtc_cmd.ClosePeerRsp", null], 13: ["close_peer_ack", "rtc.webrtc_cmd.ClosePeerAck", null], 14: ["stream_status_ack", "rtc.webrtc_cmd.StreamStatusAck", null], 15: ["broadcaster_status_ack", "rtc.webrtc_cmd.BroadcasterStatusAck", null], 16: ["active_audio_play", "rtc.webrtc_cmd.ActivateAudioPlayStreamRsp", null], 17: ["active_video_play", "rtc.webrtc_cmd.ActivateVideoPlayStreamRsp", null], 18: ["client_info_ack", "rtc.webrtc_cmd.ClientInfoAck", null], 19: ["net_quality_probe", "rtc.webrtc_cmd.NetQualityProbeRsp", null], 20: ["net_quality_ack", "rtc.webrtc_cmd.NetQualityInfoAck", null], 21: ["active_sei_insert", "rtc.webrtc_cmd.ActivateSEIInsertRsp", null], 22: ["p2p_net_stats_get", "rtc.webrtc_cmd.Peer2PeerNetStatsGetRsp", null], 23: ["publish_event_ack", "rtc.webrtc_cmd.PublishEventAck", null], 24: ["play_stats", "rtc.webrtc_cmd.PlayStatsRsp", null], 25: ["restart_ice", "rtc.webrtc_cmd.RestartICERsp", null], 26: ["play_event_ack", "rtc.webrtc_cmd.PlayEventPushAck", null], 27: ["heartbeat_msg_ack", "rtc.webrtc_cmd.HeartBeatMsgSetAck", null] } } }, webrtc_proto_v2: { ActivateAudioPlayStreamReq: { $m: { 1: ["active", "sint32", 0] } }, ActivateAudioPlayStreamRsp: { $m: { 1: ["result", "sint32", 0] } }, ActivateSEIInsertReq: { $m: { 1: ["peer_id", "uint32", 0], 2: ["action", "sint32", 0], 3: ["info_type", "uint32", 0] } }, ActivateSEIInsertRsp: { $m: { 1: ["peer_id", "uint32", 0], 2: ["result", "sint32", 0] } }, ActivateVideoPlayStreamReq: { $m: { 1: ["active", "sint32", 0], 2: ["layer", "sint32", 0] } }, ActivateVideoPlayStreamRsp: { $m: { 1: ["result", "sint32", 0] } }, BroadcasterStatusAck: { $m: { 1: ["result", "sint32", 0] } }, BroadcasterStatusNotify: { $m: { 1: ["status", "uint32", 0] } }, CandidateInfoAck: { $m: { 1: ["result", "sint32", 0] } }, CandidateInfoPush: { $m: { 1: ["infos", "<rtc.webrtc_proto_v2.OneCandidateInfo", null] } }, CandidateInfoReq: { $m: { 1: ["infos", "<rtc.webrtc_proto_v2.OneCandidateInfo", null] } }, CandidateInfoRsp: { $m: { 1: ["result", "sint32", 0] } }, ClientInfoAck: { $m: { 1: ["result", "sint32", 0] } }, ClientInfoPush: { $m: { 1: ["peer_id", "uint32", 0], 2: ["client_ip", "string", ""] } }, CloseSessionAck: { $m: { 1: ["result", "sint32", 0] } }, CloseSessionPush: { $m: { 1: ["reason", "sint32", 0], 2: ["err_info", "string", ""] } }, CloseSessionReq: { $m: { 1: ["reason", "sint32", 0] } }, CloseSessionRsp: { $m: { 1: ["result", "sint32", 0] } }, CmdAck: { $m: { 1: ["peer_id", "uint32", 0], 2: ["cmd_id", "uint32", 0], 3: ["body", "bytes", []] } }, CmdPush: { $m: { 1: ["peer_id", "uint32", 0], 2: ["cmd_id", "uint32", 0], 3: ["body", "bytes", []] } }, CmdReq: { $m: { 1: ["peer_id", "uint32", 0], 2: ["cmd_id", "uint32", 0], 3: ["body", "bytes", []] } }, CmdRsp: { $m: { 1: ["peer_id", "uint32", 0], 2: ["cmd_id", "uint32", 0], 3: ["body", "bytes", []] } }, CmdType: { $e: { NONE: 0, LOGIN_REQ: 1, LOGIN_RSP: 2, CREATE_SESSION_REQ: 3, CREATE_SESSION_RSP: 4, CREATE_SESSION_WITH_SDP_REQ: 5, CREATE_SESSION_WITH_SDP_RSP: 6, SESSION_RESET_PUSH: 7, SESSION_RESET_ACK: 8, PUBLISH_EVENT_PUSH: 9, PLAY_EVENT_PUSH: 10, MEDIA_DESC_REQ: 11, MEDIA_DESC_RSP: 12, CANDIDATE_INFO_REQ: 13, CANDIDATE_INFO_RSP: 14, CLOSE_SESSION_REQ: 15, CLOSE_SESSION_RSP: 16, MEDIA_DESC_PUSH: 17, MEDIA_DESC_ACK: 18, CANDIDATE_INFO_PUSH: 19, CANDIDATE_INFO_ACK: 20, CLOSE_SESSION_PUSH: 21, CLOSE_SESSION_ACK: 22, STREAM_STATUS_NOTIFY: 23, STREAM_STATUS_NOTIFY_ACK: 24, STREAM_STATUS_NOTIFY_PUSH: 25, STREAM_STATUS_NOTIFY_PUSH_ACK: 26, BROADCASTER_STATUS_NOTIFY: 27, BROADCASTER_STATUS_ACK: 28, ACTIVATE_AUDIO_PLAY_STREAM_REQ: 29, ACTIVATE_AUDIO_PLAY_STREAM_RSP: 30, ACTIVATE_VIDEO_PLAY_STREAM_REQ: 31, ACTIVATE_VIDEO_PLAY_STREAM_RSP: 32, CLIENT_INFO_PUSH: 33, CLIENT_INFO_ACK: 34, NET_QUALITY_PROBE_REQ: 35, NET_QUALITY_PROBE_RSP: 36, NET_QUALITY_INFO_PUSH: 37, NET_QUALITY_INFO_ACK: 38, ACTIVATE_SEI_INSERT_REQ: 39, ACTIVATE_SEI_INSERT_RSP: 40, PEER2_PEER_NET_STATS_GET_REQ: 41, PEER2_PEER_NET_STATS_GET_RSP: 42, CMD_REQ: 43, CMD_RSP: 44, CMD_PUSH: 45, CMD_ACK: 46, WEBRTC_DISPATCH_REQ: 47, WEBRTC_DISPATCH_RSP: 48 } }, CreateSessionReq: { $m: { 1: ["type", "sint32", 0], 2: ["stream_id", "string", ""], 3: ["turn_server_host", "string", ""], 4: ["roomid", "string", ""], 5: ["strAuthParam", "string", ""], 6: ["params", "string", ""], 7: ["area_type", "int32", 0], 8: ["area_id_list", "<int32", null], 9: ["ipv6_prefer", "int32", 0], 10: ["trans_codec_id", "int32", 0], 11: ["trans_codec_suffix", "string", ""] } }, CreateSessionRsp: { $m: { 1: ["result", "sint32", 0], 2: ["turn_server", "string", ""], 3: ["turn_username", "string", ""], 4: ["turn_auth_key", "string", ""], 5: ["session_id", "uint32", 0], 6: ["session_token", "string", ""], 7: ["gw_version", "uint32", 0], 8: ["gw_nodes", "<string", null], 9: ["gw_nodes_ttl", "uint32", 0], 10: ["client_ip", "string", ""], 11: ["ips", "<rtc.webrtc_proto_v2.IpResult", null], 12: ["ipv6s", "<rtc.webrtc_proto_v2.IpResult", null], 13: ["peer_id", "uint32", 0], 14: ["trans_codec_suffix", "string", ""] } }, CreateSessionWithSdpReq: { $m: { 1: ["type", "sint32", 0], 2: ["stream_id", "string", ""], 3: ["sdp", "string", ""], 4: ["mini_sdp", "bytes", []], 5: ["media_server_host", "string", ""], 6: ["strAuthParam", "string", ""], 7: ["roomid", "string", ""], 8: ["params", "string", ""], 9: ["params_ext", "bytes", []], 10: ["area_type", "int32", 0], 11: ["area_id_list", "<int32", null], 12: ["ipv6_prefer", "int32", 0], 13: ["trans_codec_id", "int32", 0], 14: ["trans_codec_suffix", "string", ""] } }, CreateSessionWithSdpRsp: { $m: { 1: ["result", "sint32", 0], 2: ["gw_version", "uint32", 0], 3: ["sdp", "string", ""], 4: ["mini_sdp", "bytes", []], 5: ["session_token", "string", ""], 6: ["gw_nodes", "<string", null], 7: ["gw_nodes_ttl", "uint32", 0], 8: ["client_ip", "string", ""], 9: ["params_ext", "bytes", []], 10: ["ips", "<rtc.webrtc_proto_v2.IpResult", null], 11: ["ipv6s", "<rtc.webrtc_proto_v2.IpResult", null], 12: ["peer_id", "uint32", 0], 13: ["trans_codec_suffix", "string", ""] } }, DenyInfo: { $m: { 1: ["action", "uint32", 0], 2: ["err", "uint32", 0], 3: ["ins", "<rtc.webrtc_proto_v2.IpPort", null], 4: ["action_delay", "uint32", 0] } }, Head: { $m: { 1: ["cmd", "uint32", 0], 2: ["seq", "uint32", 0], 3: ["session_id", "uint32", 0] } }, IpPort: { $m: { 1: ["Ip", "string", ""], 2: ["Port", "uint32", 0] } }, IpResult: { $m: { 1: ["ip", "string", ""], 2: ["port", "uint32", 0], 3: ["isbgp", "int32", 0], 4: ["idcid", "uint32", 0], 5: ["tcp_port", "uint32", 0], 6: ["idc_code", "string", ""], 7: ["flag", "uint32", 0], 8: ["priority", "int64", { low: 0, high: 0, unsigned: false }], 9: ["mask", "uint32", 0], 10: ["vid", "string", ""] } }, LoginReq: { $m: { 1: ["appid", "uint32", 0], 2: ["user_id", "string", ""], 3: ["tokenType", "int32", 0], 4: ["token", "string", ""], 5: ["sessions", "<rtc.webrtc_proto_v2.SessionInfo", null], 6: ["roomid", "string", ""], 7: ["sdk_version", "uint32", 0], 8: ["app", "string", ""], 9: ["net_mode", "int32", 0] } }, LoginRsp: { $m: { 1: ["result", "int32", 0], 2: ["tokenType", "int32", 0], 3: ["token", "string", ""] } }, MediaDescReq: { $m: { 1: ["type", "uint32", 0], 2: ["update", "uint32", 0], 3: ["sdp", "string", ""], 4: ["mini_sdp", "bytes", []], 5: ["params_ext", "bytes", []] } }, MediaDescRsp: { $m: { 1: ["result", "sint32", 0], 2: ["sdp", "string", ""], 3: ["mini_sdp", "bytes", []] } }, NetQualityInfoAck: { $m: { 1: ["peer_id", "uint32", 0], 2: ["result", "sint32", 0] } }, NetQualityInfoPush: { $m: { 1: ["peer_id", "uint32", 0], 2: ["lossrate", "uint32", 0], 3: ["rtt", "uint32", 0] } }, NetQualityProbeReq: { $m: { 1: ["peer_id", "uint32", 0], 2: ["action", "sint32", 0] } }, NetQualityProbeRsp: { $m: { 1: ["peer_id", "uint32", 0], 2: ["result", "sint32", 0] } }, OneCandidateInfo: { $m: { 1: ["candidate", "string", ""], 2: ["sdpMid", "string", ""], 3: ["sdpMLineIndex", "sint32", 0] } }, Peer2PeerNetStatsGetReq: { $m: { 1: ["peer_id", "uint32", 0] } }, Peer2PeerNetStatsGetRsp: { $m: { 1: ["result", "sint32", 0], 2: ["peer_id", "uint32", 0], 3: ["p2p_lost_rate", "uint32", 0], 4: ["p2p_rtt", "uint32", 0] } }, PlayEventPush: { $m: { 1: ["event", "sint32", 0] } }, PublishEventPush: { $m: { 1: ["event", "sint32", 0] } }, SessionInfo: { $m: { 1: ["session_id", "uint32", 0], 2: ["session_token", "string", ""] } }, SessionResetAck: { $m: { 1: ["result", "sint32", 0] } }, SessionResetPush: { $m: { 1: ["dwTimeStamp", "uint32", 0], 2: ["cResetType", "uint32", 0], 3: ["session_ids", "<uint32", null], 4: ["reason", "sint32", 0] } }, StreamStatusNotify: { $m: { 1: ["mic_status", "sint32", 0], 2: ["camera_status", "sint32", 0] } }, StreamStatusNotifyAck: { $m: { 1: ["result", "sint32", 0] } }, StreamStatusNotifyPush: { $m: { 1: ["mic_status", "sint32", 0], 2: ["camera_status", "sint32", 0] } }, StreamStatusNotifyPushAck: { $m: { 1: ["result", "sint32", 0] } }, WebRTCDispatchReq: { $m: { 1: ["type", "sint32", 0], 2: ["stream_id", "string", ""], 10: ["area_type", "int32", 0], 11: ["area_id_list", "<int32", null], 12: ["ipv6_prefer", "int32", 0], 13: ["trans_codec_id", "int32", 0], 14: ["trans_codec_suffix", "string", ""] } }, WebRTCDispatchRsp: { $m: { 1: ["gw_nodes", "<string", null], 2: ["gw_nodes_ttl", "uint32", 0], 3: ["client_ip", "string", ""], 4: ["result", "sint32", 0], 5: ["ips", "<rtc.webrtc_proto_v2.IpResult", null], 6: ["ipv6s", "<rtc.webrtc_proto_v2.IpResult", null] } } } } }, "", He, false);
          var We, $e = He.rtc, tr = function() {
            return tr = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, tr.apply(this, arguments);
          }, ir = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, nr = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, er = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          };
          !function(t3) {
            t3[t3.CONNECTING = 0] = "CONNECTING", t3[t3.OPEN = 1] = "OPEN", t3[t3.CLOSING = 2] = "CLOSING", t3[t3.CLOSED = 3] = "CLOSED";
          }(We || (We = {}));
          var rr = 0, sr = function() {
            function t3(t4, i3, n3) {
              this.servers = t4, this.params = i3, this.activeServer = n3, this.isConnecting = false, this._binaryType = "blob", this.eventMap = {}, this.url = "", this.CONNECTING = 0, this.OPEN = 1, this.CLOSING = 2, this.CLOSED = 3, this.id = rr++, this.open();
            }
            return Object.defineProperty(t3.prototype, "binaryType", { get: function() {
              return this._binaryType;
            }, set: function(t4) {
              this._binaryType = t4;
            }, enumerable: false, configurable: true }), t3.prototype.addEventListener = function(t4, i3, n3) {
              var e3, r3;
              this.eventMap[t4] ? null === (e3 = this.eventMap[t4]) || void 0 === e3 || e3.push(i3) : this.eventMap[t4] = [i3], "open" === t4 || null === (r3 = this.socket) || void 0 === r3 || r3.addEventListener(t4, i3, n3);
            }, t3.prototype.removeEventListener = function(t4, i3, n3) {
              var e3;
              this.eventMap[t4] = (this.eventMap[t4] || []).filter(function(t5) {
                return t5 !== i3;
              }), "open" === t4 || null === (e3 = this.socket) || void 0 === e3 || e3.removeEventListener(t4, i3, n3);
            }, t3.prototype.dispatchEvent = function(t4) {
              throw new Error("Method not implemented.");
            }, Object.defineProperty(t3.prototype, "readyState", { get: function() {
              var t4;
              return this.isConnecting ? We.CONNECTING : (null === (t4 = null == this ? void 0 : this.socket) || void 0 === t4 ? void 0 : t4.readyState) || We.CLOSED;
            }, enumerable: false, configurable: true }), t3.prototype.createSocket = function() {
              return ir(this, void 0, void 0, function() {
                var t4, i3, n3, e3, r3, s3 = this;
                return nr(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      if (this.socket && this.socket.readyState !== We.CLOSED)
                        return [2];
                      t4 = null, i3 = this.activeServer ? er([this.activeServer], this.servers, true) : this.servers, n3 = function(n4) {
                        var r4, o3, u2;
                        return nr(this, function(a2) {
                          switch (a2.label) {
                            case 0:
                              o3 = "wss://".concat(r4 = i3[n4], "/proxy/ws"), a2.label = 1;
                            case 1:
                              return a2.trys.push([1, 3, , 4]), [4, new Promise(function(t5, i4) {
                                var n5 = new WebSocket(o3);
                                Object.keys(s3.eventMap).forEach(function(t6) {
                                  "open" !== t6 && (s3.eventMap[t6] || []).forEach(function(i5) {
                                    n5.addEventListener(t6, i5);
                                  });
                                }), n5.binaryType = "arraybuffer", n5.onclose = function(t6) {
                                  s3.onclose && s3.onclose(t6);
                                }, n5.onerror = function(t6) {
                                  s3.onerror && s3.onerror(t6), i4(t6);
                                };
                                var e4 = 0;
                                n5.onmessage = function(t6) {
                                  e4++;
                                  var i5 = t6.data;
                                  if (1 === e4)
                                    ;
                                  else if (2 === e4) {
                                    var n6 = $e.webproxy.WssBindResponse.decode(new Uint8Array(i5));
                                    if (0 !== n6.code)
                                      throw "zm.prx.1" + " cloud proxy token auth failed. result: ".concat(JSON.stringify(n6));
                                    s3.isConnecting = false, (s3.eventMap.open || []).forEach(function(i6) {
                                      i6(s3, t6);
                                    }), s3.onopen && s3.onopen();
                                  } else
                                    s3.onmessage && s3.onmessage(t6);
                                }, n5.onopen = function(i5) {
                                  s3.socket = n5, t5(i5), s3.authProxy(n5);
                                };
                              })];
                            case 2:
                              return a2.sent(), [3, 4];
                            case 3:
                              return u2 = a2.sent(), t4 = u2, [2, "continue"];
                            case 4:
                              return e3.onActiveServer && (e3.onActiveServer(r4), e3.onActiveServer = void 0), e3.url = o3, [2, "break"];
                          }
                        });
                      }, e3 = this, r3 = 0, o2.label = 1;
                    case 1:
                      return r3 < i3.length ? [5, n3(r3)] : [3, 4];
                    case 2:
                      if ("break" === o2.sent())
                        return [3, 4];
                      o2.label = 3;
                    case 3:
                      return r3++, [3, 1];
                    case 4:
                      return this.socket || setTimeout(function() {
                        throw t4;
                      }, 0), [2];
                  }
                });
              });
            }, t3.prototype.authProxy = function(t4) {
              var i3 = this.socket;
              if (i3) {
                var n3 = this.params, e3 = $e.webproxy.WssBindRequest.encode({ appid: n3.appid, biz_type: 0, mode: 1, id_name: n3.userID, token: n3.token, url: n3.target, ack: true }).finish();
                i3.send(e3);
              }
            }, t3.prototype.setParams = function(t4) {
              this.params = tr(tr({}, this.params), t4);
            }, t3.prototype.open = function() {
              this.isConnecting = true, this.readyState !== We.CLOSED && this.createSocket();
            }, t3.prototype.close = function() {
              var t4;
              null === (t4 = this.socket) || void 0 === t4 || t4.close();
            }, t3.prototype.send = function(t4) {
              var i3;
              null === (i3 = this.socket) || void 0 === i3 || i3.send(t4);
            }, t3.prototype.onopen = function() {
            }, t3.prototype.onclose = function(t4) {
            }, t3.prototype.onerror = function(t4) {
            }, t3.prototype.onmessage = function(t4) {
            }, Object.defineProperty(t3.prototype, "bufferedAmount", { get: function() {
              var t4;
              return (null === (t4 = this.socket) || void 0 === t4 ? void 0 : t4.bufferedAmount) || 0;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "extensions", { get: function() {
              var t4;
              return (null === (t4 = this.socket) || void 0 === t4 ? void 0 : t4.extensions) || "";
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "protocol", { get: function() {
              var t4;
              return (null === (t4 = this.socket) || void 0 === t4 ? void 0 : t4.protocol) || "";
            }, enumerable: false, configurable: true }), t3;
          }(), or = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, ur = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, ar = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, cr = $e.webproxy;
          function hr(t3) {
            for (var i3 = 0, n3 = 0; n3 < t3.length; n3++)
              i3 += t3[n3].length;
            var e3 = new Uint8Array(i3), r3 = 0;
            for (n3 = 0; n3 < t3.length; n3++)
              e3.set(t3[n3], r3), r3 += t3[n3].length;
            return e3;
          }
          function fr(t3, i3) {
            return or(this, void 0, void 0, function() {
              var n3, e3, r3, s3, o2, u2;
              return ur(this, function(a2) {
                switch (a2.label) {
                  case 0:
                    n3 = new Uint8Array(), e3 = [], r3 = Array.from(t3), s3 = function(t4) {
                      var s4, o3;
                      return ur(this, function(u3) {
                        switch (u3.label) {
                          case 0:
                            return s4 = r3[t4][0], o3 = r3[t4][1], e3.push("--" + i3), o3 instanceof Blob ? [4, new Promise(function(t5) {
                              var i4 = new FileReader();
                              i4.onloadend = function() {
                                var r4 = i4.result;
                                if (r4) {
                                  e3.push('Content-Disposition: form-data; name="' + s4 + '"; filename="' + ((null == o3 ? void 0 : o3.name) || "blob") + '"', "Content-Type: " + o3.type, "\r\n");
                                  var u4 = _e(e3.join("\r\n"));
                                  e3 = [];
                                  var a3 = new Uint8Array(r4);
                                  n3 = hr([n3, u4, a3]), t5(0);
                                } else
                                  t5(0);
                              }, i4.readAsArrayBuffer(o3);
                            })] : [3, 2];
                          case 1:
                            return u3.sent(), [3, 3];
                          case 2:
                            e3.push('Content-Disposition: form-data; name="' + s4 + '"', "", o3), u3.label = 3;
                          case 3:
                            return [2];
                        }
                      });
                    }, o2 = 0, a2.label = 1;
                  case 1:
                    return o2 < r3.length ? [5, s3(o2)] : [3, 4];
                  case 2:
                    a2.sent(), a2.label = 3;
                  case 3:
                    return o2++, [3, 1];
                  case 4:
                    return e3.push("--" + i3 + "--"), u2 = _e(e3.join("\r\n")), e3 = [], [2, n3 = hr([n3, u2])];
                }
              });
            });
          }
          function lr(t3) {
            return or(this, void 0, void 0, function() {
              var i3, n3, e3;
              return ur(this, function(r3) {
                switch (r3.label) {
                  case 0:
                    for (i3 = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789", n3 = "----WebKitFormBoundary", e3 = 0; e3 < 16; e3++)
                      n3 += i3.charAt(Math.floor(62 * Math.random()));
                    return [4, fr(t3, n3)];
                  case 1:
                    return [2, { body: r3.sent(), contentType: "multipart/form-data; boundary=" + n3 }];
                }
              });
            });
          }
          var dr, vr = function() {
            function t3(t4, i3) {
              this.proxyList = t4, this.token = i3, this.enable = false, this.appID = 0, this.userID = "web_proxy_" + Date.now();
            }
            return Object.defineProperty(t3.prototype, "urls", { get: function() {
              return this.proxyList.map(function(t4) {
                var i3 = t4.port;
                return "".concat(t4.hostName).concat(i3 ? ":" + i3 : "");
              });
            }, enumerable: false, configurable: true }), t3.prototype.bo = function(t4) {
              this.activeServer && this.activeServer === t4 || (this.activeServer = t4, this.turnInfo = void 0, this.turnExpireTime = void 0);
            }, t3.prototype.destroy = function() {
              this.proxyList = [];
            }, t3.prototype.init = function(t4) {
              this.appID = t4.appID;
            }, t3.prototype.createSocket = function(t4, i3) {
              var n3 = this;
              if (!this.appID)
                throw "zego cloud proxy config error. can not init proxy.";
              var e3 = new sr(this.urls, { target: t4, appid: this.appID, token: this.token, userID: this.userID }, this.activeServer);
              return e3.onActiveServer = function(t5) {
                n3.bo(t5);
              }, e3;
            }, t3.prototype.getTurnInfo = function() {
              var t4;
              return or(this, void 0, void 0, function() {
                var i3, n3, e3;
                return ur(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return this.turnExpireTime && this.turnInfo && Date.now() < this.turnExpireTime ? [2, this.turnInfo] : (this.turnExpireTime = void 0, this.turnInfo = void 0, i3 = cr.TurnInfoRequest.encode({ appid: this.appID, biz_type: 0, mode: 1, id_name: this.userID, token: this.token }).finish(), [4, this.handleFetch("/turn/info", i3)]);
                    case 1:
                      return n3 = r3.sent(), (e3 = cr.TurnInfoResponse.decode(new Uint8Array(n3))).code || (this.turnInfo = e3, this.turnExpireTime = Date.now() + 0.8 * ((null === (t4 = null == e3 ? void 0 : e3.data) || void 0 === t4 ? void 0 : t4.expiration_in_seconds) || 0) * 1e3), [2, e3];
                  }
                });
              });
            }, t3.prototype.handleFetch = function(t4, i3) {
              return void 0 === t4 && (t4 = "/"), or(this, void 0, void 0, function() {
                var n3, e3, r3, s3, o2, u2, a2;
                return ur(this, function(c2) {
                  switch (c2.label) {
                    case 0:
                      n3 = null, e3 = null, r3 = this.activeServer ? ar([this.activeServer], this.urls, true) : this.urls, s3 = 0, c2.label = 1;
                    case 1:
                      if (!(s3 < r3.length))
                        return [3, 7];
                      u2 = "https://".concat(o2 = r3[s3]).concat(t4), c2.label = 2;
                    case 2:
                      return c2.trys.push([2, 4, , 5]), [4, fetch(u2, { method: "post", body: i3 })];
                    case 3:
                      return n3 = c2.sent(), this.bo(o2), [3, 5];
                    case 4:
                      return a2 = c2.sent(), e3 = a2, [3, 6];
                    case 5:
                      return [3, 7];
                    case 6:
                      return s3++, [3, 1];
                    case 7:
                      if (e3)
                        throw e3;
                      return [4, null == n3 ? void 0 : n3.arrayBuffer()];
                    case 8:
                      return [2, c2.sent() || []];
                  }
                });
              });
            }, t3.prototype.intranetCheck = function(t4, i3) {
              return or(this, void 0, void 0, function() {
                var n3, e3;
                return ur(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return n3 = cr.IntranetCheckRequest.encode({ appid: this.appID, biz_type: 0, mode: 1, id_name: this.userID, token: this.token, vrs_ipv4: t4, vrs_ipv6: i3 }).finish(), [4, this.handleFetch("/intranet/check", n3)];
                    case 1:
                      return e3 = r3.sent(), [2, cr.IntranetCheckResponse.decode(new Uint8Array(e3))];
                  }
                });
              });
            }, t3.prototype.startHttpRequest = function(t4, i3, n3, e3) {
              var r3 = this, s3 = false;
              ((null == e3 ? void 0 : e3.timeout) || 0) > 0 && setTimeout(function() {
                s3 || (s3 = true, n3 && n3({ status_code: -1, headers: [], body: _e("request time out.") }));
              }, null == e3 ? void 0 : e3.timeout), new Promise(function(i4, n4) {
                return or(r3, void 0, void 0, function() {
                  var e4, r4, s4, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2;
                  return ur(this, function(b2) {
                    switch (b2.label) {
                      case 0:
                        return (e4 = null === (g2 = t4.headers) || void 0 === g2 ? void 0 : g2.find(function(t5) {
                          return "content-type" === t5.name.toLowerCase() && t5.val.toLowerCase().includes("multipart/form-data");
                        })) && t4.body instanceof FormData ? [4, lr(t4.body)] : [3, 2];
                      case 1:
                        r4 = b2.sent(), s4 = r4.contentType, t4.body = r4.body, e4.val = s4, b2.label = 2;
                      case 2:
                        o2 = t4.body, "string" == typeof t4.body && (o2 = _e(t4.body)), u2 = cr.HTTPRequest.encode({ appid: this.appID, biz_type: 0, mode: 1, id_name: this.userID, url: t4.location, token: this.token, method: t4.method_no, headers: t4.headers, body: o2 }).finish(), a2 = null, c2 = null, h2 = this.activeServer ? ar([this.activeServer], this.urls, true) : this.urls, f2 = 0, b2.label = 3;
                      case 3:
                        if (!(f2 < h2.length))
                          return [3, 9];
                        l2 = "https://".concat(h2[f2], "/proxy/http"), b2.label = 4;
                      case 4:
                        return b2.trys.push([4, 6, , 7]), [4, fetch(l2, { method: "post", body: u2 })];
                      case 5:
                        return a2 = b2.sent(), c2 = null, [3, 7];
                      case 6:
                        return d2 = b2.sent(), c2 = d2, [3, 8];
                      case 7:
                        return [3, 9];
                      case 8:
                        return f2++, [3, 3];
                      case 9:
                        return c2 ? (n4({ status_code: -1, headers: [], body: _e(JSON.stringify(c2)) }), [2]) : [4, null == a2 ? void 0 : a2.arrayBuffer()];
                      case 10:
                        if (v2 = b2.sent() || [], m2 = cr.HTTPResponse.decode(new Uint8Array(v2)), p2 = null == m2 ? void 0 : m2.data, 0 === (null == m2 ? void 0 : m2.code) && p2) {
                          if (!t4.origin)
                            try {
                              p2.body = JSON.parse(ye(p2.body));
                            } catch (t5) {
                              p2.body = ye(p2.body);
                            }
                          i4(p2);
                        } else
                          n4({ status_code: -1, headers: [], body: JSON.parse(ye(p2.body)) });
                        return [2];
                    }
                  });
                });
              }).then(function(t5) {
                !s3 && i3 && (s3 = true, i3(t5));
              }).catch(function(t5) {
                !s3 && n3 && (s3 = true, n3 && n3({ status_code: -1, headers: [], body: _e(JSON.stringify(t5)) }));
              });
            }, t3;
          }(), mr = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, pr = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          };
          !function(t3) {
            t3[t3.Accesshub = 0] = "Accesshub", t3[t3.Logger = 1] = "Logger", t3[t3.Detaillog = 2] = "Detaillog";
          }(dr || (dr = {}));
          var gr, br, _r, yr = function() {
            function t3(t4) {
              this._o = t4;
            }
            return t3.prototype.init = function(t4) {
            }, t3.prototype.createSocket = function(t4, i3) {
              try {
                return new WebSocket(this.wo(t4, i3));
              } catch (t5) {
                throw console.error(t5), t5;
              }
            }, t3.prototype.wo = function(t4, i3) {
              var n3 = this;
              return t4.replace(/^(https?:\/\/|wss?:\/\/)([\w.-]+)(?::(\d+))?/, function(t5, e3, r3, s3) {
                var o2 = "";
                if (n3._o) {
                  var u2 = n3._o, a2 = u2.accesshubProxy, c2 = u2.loggerProxy, h2 = u2.detaillogProxy;
                  switch (i3) {
                    case 0:
                      a2 && (o2 = e3 + a2);
                      break;
                    case 1:
                      c2 && (o2 = e3 + c2);
                      break;
                    case 2:
                      h2 && (o2 = e3 + h2);
                  }
                }
                return o2 ? (o2.endsWith("/") && (o2 = o2.substring(0, o2.length - 1)), o2) : t5;
              });
            }, t3.prototype.startHttpRequest = function(t4, i3, n3, e3) {
              var r3 = this, s3 = false;
              ((null == e3 ? void 0 : e3.timeout) || 0) > 0 && setTimeout(function() {
                s3 || (s3 = true, n3 && n3({ status_code: -1, headers: [], body: _e("request time out.") }));
              }, null == e3 ? void 0 : e3.timeout), new Promise(function(i4, n4) {
                return mr(r3, void 0, void 0, function() {
                  var e4, r4, s4, o2, u2, a2;
                  return pr(this, function(c2) {
                    switch (c2.label) {
                      case 0:
                        e4 = t4.body, r4 = null, s4 = null, o2 = this.wo(t4.location, t4.serviceType), c2.label = 1;
                      case 1:
                        return c2.trys.push([1, 3, , 4]), [4, fetch(o2, { method: 1 === t4.method_no ? "get" : "post", body: e4 })];
                      case 2:
                        return r4 = c2.sent(), s4 = null, [3, 4];
                      case 3:
                        return u2 = c2.sent(), s4 = u2, [3, 4];
                      case 4:
                        return s4 ? (n4({ status_code: -1, headers: [], body: _e(JSON.stringify(s4)) }), [2]) : [4, null == r4 ? void 0 : r4.json()];
                      case 5:
                        return a2 = c2.sent(), r4 ? i4({ status_code: (null == r4 ? void 0 : r4.status) || -1, body: a2, headers: [] }) : n4({ status_code: -1, headers: [], body: _e("request failed.") }), [2];
                    }
                  });
                });
              }).then(function(t5) {
                !s3 && i3 && (s3 = true, i3(t5));
              }).catch(function(t5) {
                !s3 && n3 && (s3 = true, n3 && n3({ status_code: -1, headers: [], body: _e(JSON.stringify(t5)) }));
              });
            }, t3.prototype.destroy = function() {
            }, t3;
          }(), wr = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, Sr = ["relogin_token"], Er = ["id_name", "nick_name"], kr = wr(wr(["stream_id"], Er, true), ["extra_info", "title", "stream_attr", "stream_title"], false), Or = ["trans_type"], Ir = ["trans_channel"], Rr = wr([], Er, true), Tr = ["msg_id", "msg_client_id"], Cr = wr(["trans_type"], Ir, true), Ar = wr([], Ir, true), zr = wr(["trans_type", "trans_data"], Er, true), Dr = wr([], Ir, true), Nr = wr([], zr, true), Pr = ["stop_stream_id_list"], Mr = wr([], Er, true), xr = ["id_name", "custom_reason"], jr = ["stream_id_list"], qr = ["sender_idname", "sender_nickname"], Lr = wr([], kr, true), Br = wr(wr([], Er, true), ["msg_content"], false), Ur = wr(wr([], Er, true), ["msg_id", "msg_content"], false), Gr = wr(wr([], Er, true), ["trans_type", "trans_data", "trans_channel"], false), Jr = wr(wr([], Er, true), Ir, true), Fr = ["trans_type", "trans_data"], Hr = ["sender_idname", "sender_nickname", "msg_content"], Vr = [[1001, "LoginRoomReq"], [1002, "LoginRoomRsp"], [1003, "LogoutRoomReq"], [1004, "LogoutRoomRsp"], [1101, "PushReq"], [1102, "PushRsp"], [1103, "MergePushReq"], [1104, "MergePushRsp"], [1105, "PushKickout"], [10001, "PushUserInfoUpdated"], [10002, "PushUserKickout"], [10003, "PushUserLogReport"], [10004, "PushUserTokenExpire"], [11005, "PushSignalCustom"], [11001, "PushJoinliveRequest"], [11002, "PushJoinliveResult"], [11003, "PushJoinliveInvite"], [11004, "PushJoinliveStop"], [11007, "PushTransparentMsg"], [11008, "PushChannelMsg"], [12001, "PushStreamAdd"], [12002, "PushStreamDelete"], [12003, "PushStreamUpdate"], [13001, "PushIm"], [14001, "PushBigIm"], [15001, "PushTrans"], [15002, "PushUserTrans"], [301001, "EnterRoomReq"], [301002, "EnterRoomRsp"], [301003, "QuitRoomReq"], [301004, "QuitRoomRsp"], [301005, "HbReq"], [301006, "HbRsp"], [301007, "RenewTokenReq"], [301008, "RenewTokenRsp"], [301009, "SetUserAttrReq"], [301010, "SetUserAttrRsp"], [301011, "SetTransReq"], [301012, "SetTransRsp"], [301013, "GetTransReq"], [301014, "GetTransRsp"], [301015, "GetUserTransReq"], [301016, "GetUserTransRsp"], [302001, "AddStreamReq"], [302002, "AddStreamRsp"], [302003, "DeleteStreamReq"], [302004, "DeleteStreamRsp"], [302005, "UpdateStreamReq"], [302006, "UpdateStreamRsp"], [302007, "GetStreamListReq"], [302008, "GetStreamListRsp"], [303001, "SendImReq"], [303002, "SendImRsp"], [303003, "GetImReq"], [303004, "GetImRsp"], [303005, "SendBigImReq"], [303006, "SendBigImRsp"], [303009, "SignalLiveRequestReq"], [303010, "SignalLiveRequestRsp"], [303011, "SignalLiveResultReq"], [303012, "SignalLiveResultRsp"], [303013, "SignalLiveInviteReq"], [303014, "SignalLiveInviteRsp"], [303015, "SignalLiveStopReq"], [303016, "SignalLiveStopRsp"], [303017, "SignalLiveCustomReq"], [303018, "SignalLiveCustomRsp"], [303019, "SignalTransmitReq"], [303020, "SignalTransmitRsp"], [303021, "SignalTransparentMsgReq"], [303022, "SignalTransparentMsgRsp"], [303023, "SendChannelMsgReq"], [303024, "SendChannelMsgRsp"], [304001, "GetUserlistReq"], [304002, "GetUserlistRsp"]], Qr = Vr.reduce(function(t3, i3) {
            var n3 = i3[0];
            return t3[n3] = [12001, 12002, 12003].includes(n3) ? "PushStream" : i3[1], t3;
          }, {}), Yr = Vr.reduce(function(t3, i3) {
            return t3[i3[1]] = i3[0], t3;
          }, {}), Kr = o(3788), Zr = o(6440), Xr = o.n(Zr), Wr = o(4636), $r = o.n(Wr), ts = function() {
            function t3() {
            }
            return t3.prototype.md5Bytes = function(t4) {
              return this.wordArray2Uint8Array($r()(this.uint8Array2WordArray(t4)));
            }, t3.prototype.wordArray2Uint8Array = function(t4) {
              for (var i3 = t4.words, n3 = t4.sigBytes, e3 = new Uint8Array(n3), r3 = 0; r3 < n3; r3++) {
                e3[r3] = i3[r3 >>> 2] >>> 24 - r3 % 4 * 8 & 255;
              }
              return e3;
            }, t3.prototype.uint8Array2WordArray = function(t4) {
              for (var i3 = t4.length, n3 = [], e3 = 0; e3 < i3; e3++)
                n3[e3 >>> 2] |= (255 & t4[e3]) << 24 - e3 % 4 * 8;
              return Xr().create(n3, i3);
            }, t3;
          }(), is = function() {
            return is = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, is.apply(this, arguments);
          }, ns = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          };
          Kr.util.Long = Oe.A, Kr.configure(), gr = $e, br = $e.liveroom_cs_v3, _r = $e.proto_switch_v3;
          var es, rs = 1001, ss = 1002, os = 1003, us = 1004;
          !function(t3) {
            t3[t3.disconnected = 0] = "disconnected", t3[t3.broken = 1] = "broken", t3[t3.connected = 2] = "connected";
          }(es || (es = {}));
          var as = function() {
            function t3(t4, i3, n3, r3, s3) {
              var o2, u2, a2, c2, h2, f2, l2, d2, v2 = this;
              this.an = t4, this.pn = i3, this._ua = n3, this._dataReport = r3, this.rtm = s3, this.seq = 0, this.So = {}, this.Eo = "", this.zPushSid = "0", this.ko = [["user_session_id", "session_id"], ["liveroom_hb_interval", "hearbeat_interval"], ["liveroom_hb_timeout", "hearbeat_timeout"], ["big_im_time_window", "bigim_time_window"], ["trans_channel_list", "trans_seqs"], ["stream_list_seq", "stream_seq"], ["stream_info_list", "stream_info"]], this.Oo = 100, this.Ro = 1e4, this.To = 2e3, this.Co = gr, this.Ao = {}, this.zo = {}, this.Do = {}, this.No = [Yr.PushReq, Yr.MergePushReq, Yr.PushKickout], this.Po = [Yr.LoginRoomRsp, Yr.LogoutRoomRsp, Yr.PushKickout, Yr.PushReq, Yr.MergePushReq], this.xo = [1105], this.jo = es.disconnected, this.qo = [11001, 11002, 11003, 11004], this.Lo = "", this.Bo = new ts(), this.Uo = this._ua.getPCRequest(Nt.BusinessService.SERVICE_SWITCH4LIVEROOM), this.switchSessionID = Oe.A.fromInt(0), null === (o2 = this.Uo) || void 0 === o2 || o2.on("connected", function(t5) {
                v2.Go(t5);
              }), null === (u2 = this.Uo) || void 0 === u2 || u2.on("broken", function(t5) {
                v2.Jo();
              }), null === (a2 = this.Uo) || void 0 === a2 || a2.on("disconnected", function(t5, i4) {
                v2.Fo(t5, i4);
              }), null === (c2 = this.Uo) || void 0 === c2 || c2.on("downLoadMessage", function(t5, i4) {
                v2.handlePush(t5, i4);
              }), null === (h2 = this.Uo) || void 0 === h2 || h2.on("exception", function(t5, i4) {
                v2.an.info("zm.lrh.o.0 except " + JSON.stringify(t5));
              }), null === (f2 = this.Uo) || void 0 === f2 || f2.on("pcBrokenEvent", function(t5) {
                var i4 = te, n4 = v2.cr.createSpan(e2.t0.H, { key: Mn }, { key: "" }, i4.event);
                n4.setAttributes({ service_no: i4.service_no(null == t5 ? void 0 : t5.service_no), error: (null == t5 ? void 0 : t5.code) || 0 }), n4.end();
              }), null === (l2 = this.Uo) || void 0 === l2 || l2.on("pcDisconnectedEvent", function(t5) {
                var i4 = ie, n4 = v2.cr.createSpan(e2.t0.H, { key: Mn }, { key: "" }, i4.event);
                n4.setAttributes({ service_no: i4.service_no(null == t5 ? void 0 : t5.service_no), error: (null == t5 ? void 0 : t5.code) || 0 }), n4.end();
              }), null === (d2 = this.Uo) || void 0 === d2 || d2.on("pcConnectedEvent", function(t5) {
                var i4 = $n, n4 = v2.cr.createSpan(e2.t0.H, { key: Mn }, { key: "" }, i4.event);
                n4.setAttributes({ service_no: i4.service_no(t5.service_no), recv_time: i4.recv_time((/* @__PURE__ */ new Date()).getTime()), proxy_link_sources: i4.proxy_link_sources(t5.proxy_link_sources), connect_stream: i4.connect_stream(t5.connect_stream) }), n4.end();
              });
            }
            return Object.defineProperty(t3.prototype, "Ho", { get: function() {
              return Object.values(this.So);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "nickName", { get: function() {
              return _e(this.pn.nickName);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "TermType", { get: function() {
              return this.pn.ENV % 2 == 0 ? n2.t3.TT_WEB : n2.t3.TT_MINIPROGRAM;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.isDisConnect = function() {
              return this.jo !== es.connected;
            }, t3.prototype.getHeader = function(t4, i3, n3) {
              var e3 = { cmd: t4, seq: i3, timestamp: (/* @__PURE__ */ new Date()).getTime() };
              this.Vo && (e3.controls = this.Vo), (null == n3 ? void 0 : n3.contextKey) && (e3.context_key = null == n3 ? void 0 : n3.contextKey);
              var r3 = _r.Header.create(e3), s3 = _r.Header.encode(r3).finish();
              return { seq: e3.seq, content: s3 };
            }, Object.defineProperty(t3.prototype, "isUaConnect", { get: function() {
              return this._ua.isConnect();
            }, enumerable: false, configurable: true }), t3.prototype.sendMessage = function(t4, i3, n3, e3, r3, s3, o2) {
              var u2, a2, c2 = this;
              void 0 === s3 && (s3 = { timeout: 6e3, resend: false }), void 0 === o2 && (o2 = true), this.an.info(Di + " call"), ++this.seq;
              var h2, f2 = function() {
                if (o2) {
                  var u3 = { seq: c2.seq, sendTime: Date.parse(/* @__PURE__ */ new Date() + ""), timeout: s3.timeout, resend: s3.resend, success: n3, error: function(t5, i4, n4) {
                    var r4;
                    c2.an.error(Di + " error " + i4 + " " + (0, G.iq)(t5) + " " + (0, G.iq)(n4) + " " + !!e3);
                    var s4 = null == t5 ? void 0 : t5.body, o3 = null == s4 ? void 0 : s4.err_code, u4 = null === (r4 = null == t5 ? void 0 : t5.header) || void 0 === r4 ? void 0 : r4.cmd, a3 = null == n4 ? void 0 : n4.roomID;
                    if (u4 !== Yr.LoginRoomRsp) {
                      var h3 = c2.pn.roomModulesList.find(function(t6) {
                        return t6.roomID == a3;
                      });
                      if ([1002, 105].indexOf(o3) > -1)
                        return u4 === Yr.EnterRoomRsp && h3 ? h3 ? void h3.retryRoom(false, true) : void c2.an.error(Di + " room no found ignore ") : void c2.rtm.retryRoom(false, void 0, true);
                      if ([141].includes(o3) && h3)
                        return void h3.roomHandler.logoutByError({ code: o3, msg: null == s4 ? void 0 : s4.err_message });
                    }
                    e3 && e3(t5, i4);
                  }, params: r3 };
                  s3.resend && (u3.cmdN = t4, u3.sendBody = i3), c2.So[u3.seq] = u3;
                }
              };
              if ("LoginRoomReq" !== t4 && this.jo !== es.connected)
                return this.an.info(Di + " state " + this.jo + " " + s3.resend), s3.resend ? f2() : e3 && e3(re.pzL), -1;
              if ((0, B.Cs)(t4))
                h2 = t4;
              else if ((0, B.TE)(h2 = Yr[t4]))
                return this.an.warn(Di + " cmd not found " + t4), -1;
              f2();
              var l2, d2 = 0;
              l2 = (0, B.TE)(null == r3 ? void 0 : r3.roomID) ? null === (u2 = this.pn.roomModulesList[0]) || void 0 === u2 ? void 0 : u2.roomID : null == r3 ? void 0 : r3.roomID, "LoginRoomReq" !== t4 && l2 && (d2 = this.zo[l2]);
              var v2 = this.getHeader(h2, this.seq, { contextKey: d2 }), m2 = v2.content, p2 = i3, g2 = this.getHead(m2.length, p2.length), b2 = new Uint8Array(Array.from(g2).concat(Array.from(m2)).concat(Array.from(p2)));
              this.an.info(Di + " seq: " + v2.seq + " cmd: " + t4);
              return null === (a2 = this.Uo) || void 0 === a2 || a2.sendRequest({ payload: b2, ack: "LoginRoomReq" === t4 }, function(t5) {
                c2.an.info(Di + " fail");
              }, function() {
                c2.an.info(Di + " ack");
              }, {}), v2.seq;
            }, t3.prototype.getHead = function(t4, i3) {
              var n3 = new Uint8Array(7);
              return n3[0] = 49, n3[1] = t4 >> 8, n3[2] = t4 - (n3[1] << 8), n3.set(new Uint8Array(Int32Array.from([i3]).buffer).reverse(), 3), n3;
            }, t3.prototype.handlePush = function(t4, i3) {
              if (!(49 !== t4[0] || t4.length < 7)) {
                var n3 = (t4[1] << 8) + t4[2], e3 = _r.Header.decode(t4.slice(7, 7 + n3)), r3 = t4.slice(7 + n3), s3 = r3, o2 = (t4[3] << 24) + (t4[4] << 16) + (t4[5] << 8) + t4[6];
                if (o2 != r3.length && this.an.warn(Pi + " body len ".concat(o2, " != ").concat(r3.length)), !Qr[e3.cmd])
                  return this.an.info(Ni + " cmd is not rtc"), void this.onSwitchMessage(e3, s3);
                var u2 = this.decodeResponseBody(e3, s3);
                if (this.No.includes(e3.cmd))
                  this.handleSwitchPush(e3, u2);
                else {
                  this.an.info(Ni + " down seq: " + e3.seq + " " + (Qr[e3.cmd] || e3.cmd) + " " + JSON.stringify(this.Qo(u2)));
                  var a2 = { header: this.transHeader(e3), body: this.transRsp(u2) }, c2 = this.Ao[e3.context_key];
                  (0, B.TE)(c2) || (a2.header.room_id = c2), this.handleSendCommandMsgRsp(a2);
                }
              }
            }, t3.prototype.handleSwitchPush = function(t4, i3) {
              var n3, e3, r3, s3, o2 = this, u2 = t4.context_key, a2 = this.Ao[u2];
              if (a2 || this.xo.includes(t4.cmd)) {
                if (t4.cmd === Yr.PushReq) {
                  if ((l2 = this.transRsp(i3.head)).room_id = a2, !this.pn.roomModulesList.find(function(t5) {
                    return t5.roomID == a2;
                  }))
                    return void this.an.warn(Pi + " room no found ignore ");
                  var c2 = { header: l2, body: this.qo.includes(i3.head.sub_cmd) ? { signal_msg: ye(i3.msg_body), sub_cmd: i3.head.sub_cmd } : i3.head.sub_cmd === Yr.PushSignalCustom ? { custommsg: ye(i3.msg_body) } : Qr[i3.head.sub_cmd] ? this.transRsp(this.Yo(br[Qr[i3.head.sub_cmd]], i3.msg_body)) : {} };
                  switch (i3.head.sub_cmd) {
                    case Yr.PushUserInfoUpdated:
                      null === (n3 = c2.body.user_action_list) || void 0 === n3 || n3.forEach(function(t5) {
                        o2.Ko(t5, Mr);
                      });
                      break;
                    case Yr.PushUserKickout:
                      this.Ko(c2.body, xr);
                      break;
                    case Yr.PushTrans:
                      this.Ko(c2.body, Gr);
                      break;
                    case Yr.PushUserTrans:
                      this.Ko(c2.body, Jr), null === (e3 = c2.body.trans_seq_list) || void 0 === e3 || e3.forEach(function(t5) {
                        o2.Ko(t5, Fr);
                      });
                      break;
                    case Yr.PushIm:
                      null === (r3 = c2.body.msg_list) || void 0 === r3 || r3.forEach(function(t5) {
                        o2.Ko(t5, Br);
                      });
                      break;
                    case Yr.PushChannelMsg:
                      this.Ko(c2.body, Hr), this.keysExist(c2.body, ["channel_type"]);
                      break;
                    case Yr.PushTransparentMsg:
                      this.Ko(c2.body, qr);
                      break;
                    case Yr.PushStreamAdd:
                    case Yr.PushStreamDelete:
                    case Yr.PushStreamUpdate:
                      null === (s3 = c2.body.stream_info_list) || void 0 === s3 || s3.forEach(function(t5) {
                        o2.Ko(t5, Lr);
                      });
                      break;
                    case Yr.PushUserTokenExpire:
                      this.Ko(c2.body.stop_stream_info, jr);
                      break;
                    case Yr.PushUserLogReport:
                      this.pn.getLogWhiteList(true);
                  }
                  switch (this.an.info(Pi + " push ".concat(t4.seq, " ").concat(JSON.stringify(this.Qo(c2)))), i3.head.sub_cmd) {
                    case Yr.PushUserInfoUpdated:
                      this.handlePushUserStateUpdateMsg(c2);
                      break;
                    case Yr.PushUserKickout:
                      this.transKeysName(c2.body, this.ko), this.handlePushKickout(c2, false);
                      break;
                    case Yr.PushTrans:
                      this.handlePushTransMsg(c2);
                      break;
                    case Yr.PushUserTrans:
                      this.handlePushUserTransMsg(c2);
                      break;
                    case Yr.PushIm:
                      this.handlePushRoomMsg(c2);
                      break;
                    case Yr.PushSignalCustom:
                      this.handlePushCustomMsg(c2);
                      break;
                    case Yr.PushStreamAdd:
                    case Yr.PushStreamDelete:
                    case Yr.PushStreamUpdate:
                      this.handlePushStreamMsg(c2);
                      break;
                    case Yr.PushJoinliveRequest:
                    case Yr.PushJoinliveResult:
                    case Yr.PushJoinliveInvite:
                    case Yr.PushJoinliveStop:
                      this.handlePushSignalMsg(c2);
                      break;
                    case Yr.PushUserTokenExpire:
                      this.handlePushTokenExpire(c2);
                      break;
                    case Yr.PushChannelMsg:
                      this.handlePushChannelMsg(c2);
                      break;
                    case Yr.PushTransparentMsg:
                      this.handlePushTransparentMsg(c2);
                      break;
                    default:
                      this.an.info(Pi + " white "), this.onSwitchMessage(t4, i3);
                  }
                  if (1 == i3.head.qos_flag) {
                    var h2 = _r.PushRsp.create({ code: 0, message: "", sub_cmd: i3.head.sub_cmd, server_send_time: i3.head.send_time }), f2 = _r.PushRsp.encode(h2).finish();
                    this.sendMessage("PushRsp", f2, void 0, void 0);
                  }
                } else if (t4.cmd === Yr.MergePushReq) {
                  var l2;
                  if ((l2 = this.transRsp(i3.head)).room_id = a2, !this.pn.roomModulesList.find(function(t5) {
                    return t5.roomID == a2;
                  }))
                    return void this.an.warn(Pi + " room no found ignore ");
                  var d2 = [];
                  i3.message_list.forEach(function(t5) {
                    var i4, n4;
                    d2.push({ sub_cmd: t5.sub_cmd, sub_seq: t5.sub_seq }), t5.sub_cmd === Yr.PushBigIm && (null === (i4 = (n4 = br.PushBigIm.decode(t5.msg_body)).msg_list) || void 0 === i4 || i4.forEach(function(t6) {
                      o2.Ko(t6, Ur);
                    }), t5.msg_body = n4);
                  });
                  var v2 = { header: l2, body: this.transRsp(i3) };
                  if (delete v2.body.head, this.handlePushMergeMsg(v2), 1 == i3.head.qos_flag) {
                    h2 = _r.MergePushRsp.create({ messages: d2, server_send_time: i3.head.send_time }), f2 = _r.MergePushRsp.encode(h2).finish();
                    this.sendMessage("MergePushRsp", f2, void 0, void 0);
                  }
                } else if (t4.cmd === Yr.PushKickout) {
                  this.handlePushKickout({ header: t4, body: { reason: i3.reason > 900 ? i3.reason - 900 : i3.reason, msg: i3.message, need_relogin: void 0 !== i3.is_need_relogin ? i3.is_need_relogin : 0 } }, true);
                }
              } else {
                this.an.warn(Pi + " ctx key ".concat(u2, " not found"));
                var m2 = { header: t4, body: i3 };
                this.Do[u2] ? this.Do[u2].push(m2) : this.Do[u2] = [m2];
              }
            }, t3.prototype.handlePushChannelMsg = function(t4) {
            }, t3.prototype.handlePushTransparentMsg = function(t4) {
            }, t3.prototype.handlePushTokenExpire = function(t4) {
              var i3, n3, e3 = (null === (n3 = null === (i3 = null == t4 ? void 0 : t4.body) || void 0 === i3 ? void 0 : i3.stop_stream_info) || void 0 === n3 ? void 0 : n3.stream_id_list) || [];
              e3.length > 0 && this.pn.actionListener("_stopStream", e3, { code: q.TOKEN_EXPIRED.code, message: q.TOKEN_EXPIRED.msg });
            }, t3.prototype.handlePushKickout = function(t4, i3) {
              var n3, e3;
              if (i3)
                ns([], this.pn.roomModulesList, true).forEach(function(i4) {
                  i4.roomHandler.handlePushKickout(t4, true, true);
                });
              else {
                var r3 = null === (n3 = null == t4 ? void 0 : t4.header) || void 0 === n3 ? void 0 : n3.room_id, s3 = this.pn.roomModulesList.find(function(t5) {
                  return t5.roomID == r3;
                });
                if (this.longToStringNumber(t4.body, ["session_id"], "toString"), !s3)
                  return void this.an.error("zm.lrh.pk room no found ignore " + JSON.stringify(null === (e3 = t4.header) || void 0 === e3 ? void 0 : e3.room_id));
                s3.roomHandler.handlePushKickout(t4);
              }
            }, t3.prototype.handlePushUserStateUpdateMsg = function(t4) {
              var i3, n3, r3, s3 = null === (i3 = null == t4 ? void 0 : t4.header) || void 0 === i3 ? void 0 : i3.room_id, o2 = this.pn.roomModulesList.find(function(t5) {
                return t5.roomID == s3;
              });
              if (o2) {
                var u2 = t4.body.user_action_list.map(function(t5) {
                  return { Action: t5.action, IdName: t5.id_name, NickName: t5.nick_name, Role: t5.role, LoginTime: t5.login_time.toString() };
                }), a2 = this.pn.reporter.createSpan(e2.t0.H, { key: en.event, par: s3 }, { key: "" }, En), c2 = { body: { user_actions: u2, user_list_seq: t4.body.server_user_seq.toNumber(), room_id: s3 } };
                a2.setAttributes({ user_list_seq: null === (n3 = null == c2 ? void 0 : c2.body) || void 0 === n3 ? void 0 : n3.user_list_seq, update_user: null === (r3 = null == c2 ? void 0 : c2.body) || void 0 === r3 ? void 0 : r3.user_actions }), a2.end(), o2.userHandler.handlePushUserStateUpdateMsg(c2);
              } else
                this.an.error("zm.lrh.puu room no found ignore " + JSON.stringify(t4));
            }, t3.prototype.handlePushStreamMsg = function(t4) {
            }, t3.prototype.handlePushSignalMsg = function(t4) {
            }, t3.prototype.handlePushMergeMsg = function(t4) {
            }, t3.prototype.handlePushCustomMsg = function(t4) {
            }, t3.prototype.handlePushRoomMsg = function(t4) {
            }, t3.prototype.handlePushTransMsg = function(t4) {
            }, t3.prototype.handlePushUserTransMsg = function(t4) {
            }, t3.prototype.onSwitchMessage = function(t4, i3) {
            }, t3.prototype.decodeResponseBody = function(t4, i3) {
              var n3 = this.Po.includes(t4.cmd) ? "proto_switch_v3" : "liveroom_cs_v3";
              return this.Yo(this.Co[n3][Qr[t4.cmd]], i3);
            }, t3.prototype.login = function(t4, i3, n3) {
              var e3, r3, s3 = this;
              this.jo == es.disconnected && (this.an.info(xi + " state disconnect"), this.closeRequest());
              var o2 = (/* @__PURE__ */ new Date()).getTime() + "", u2 = { user_session_id: null !== (e3 = t4.longSid) && void 0 !== e3 ? e3 : Oe.A.fromInt(0), net_type: At(), room_id: _e(t4.roomID), room_name: _e(t4.roomName), nick_name: this.nickName, role: this.pn.role, third_token: _e(t4.token), room_create_flag: this.pn.roomCreateFlag, user_state_flag: t4.userStateUpdate ? 1 : 0, user_count_limit: t4.maxMemberCount, relate_service: this.pn.relateService.join() || "" };
              if (t4.isMulti) {
                var a2 = is(is({}, u2), { conn_type: 2 });
                delete (f2 = is(is({}, a2), { room_id: t4.roomID, room_name: t4.roomName })).third_token, this.an.info(xi + " enter " + JSON.stringify(f2));
                var c2 = br.EnterRoomReq.create(a2), h2 = br.EnterRoomReq.encode(c2).finish();
                this.sendMessage("EnterRoomReq", h2, function(n4, e4) {
                  var r4;
                  s3.Zo(n4, t4), i3 && i3(n4, e4), (null === (r4 = n4.header) || void 0 === r4 ? void 0 : r4.context_key) && s3.processPushMsgCache(n4.header.context_key), s3.Xo(t4.roomID);
                }, function(t5, i4) {
                  s3.clearAllPushMsgCache(), n3 && n3(t5, i4);
                }, { roomID: t4.roomID });
              } else {
                var f2, l2 = is(is({}, u2), { app_id: this.pn.appid, id_name: _e(this.pn.idName), device_id: this.pn.deviceID, term_type: this.TermType, sdk_version: this.pn.sdkVerNum, client_stamp: _e(o2), relogin_token: this.switchSessionID.notEquals(Oe.A.fromInt(0)) ? _e(this.Lo) : "", switch_session_id: this.switchSessionID, user_session_id: null !== (r3 = t4.longSid) && void 0 !== r3 ? r3 : Oe.A.fromInt(0), biz_type: 0, biz_version: this.pn.bizVersion || "", login_logic: this.pn.isMultiRoom ? 3 : 1, sdk_conn_type: 2 });
                t4.roomReasonState === P.Reconnecting && (l2.relogin_type = 1), delete (f2 = is(is({}, l2), { id_name: this.pn.idName, nick_name: this.pn.nickName, client_stamp: o2, k1_sign: void 0, relogin_token: this.Lo, room_id: t4.roomID, room_name: t4.roomName, user_session_id: t4.longSid })).third_token, this.Eo = t4.token, this.an.info(xi + " login " + JSON.stringify(f2)), this.an.remoteReport(xi + " token " + t4.token);
                c2 = _r.LoginRoomReq.create(l2), h2 = _r.LoginRoomReq.encode(c2).finish();
                this.sendMessage("LoginRoomReq", h2, function(n4, e4) {
                  var r4, o3, u3;
                  s3.an.info(xi + " login rsp"), s3.switchSessionID = n4.body.switch_session_id, (null === (r4 = null == n4 ? void 0 : n4.header) || void 0 === r4 ? void 0 : r4.controls) && (s3.Vo = null === (o3 = null == n4 ? void 0 : n4.header) || void 0 === o3 ? void 0 : o3.controls), s3.Zo(n4, t4), s3.Lo = n4.body.relogin_token, i3 && i3(n4, e4), (null === (u3 = n4.header) || void 0 === u3 ? void 0 : u3.context_key) && s3.processPushMsgCache(n4.header.context_key), s3.Xo(t4.roomID);
                }, function(t5, i4) {
                  s3.clearAllPushMsgCache(), n3 && n3(t5, i4);
                });
              }
            }, t3.prototype.Zo = function(t4, i3) {
              var n3, e3, r3, s3, o2, u2, a2 = this;
              (null === (n3 = t4.header) || void 0 === n3 ? void 0 : n3.context_key) && (this.zo[i3.roomID] = t4.header.context_key, this.Ao[t4.header.context_key] = i3.roomID, t4.header.room_id = i3.roomID), this.Ko(t4.body, Sr), this.Ko(null === (e3 = t4.body) || void 0 === e3 ? void 0 : e3.anchor_info, Er), null === (s3 = null === (r3 = t4.body) || void 0 === r3 ? void 0 : r3.trans_channel_list) || void 0 === s3 || s3.forEach(function(t5, i4) {
                var n4;
                a2.Ko(t5, Ir), null === (n4 = t5.trans_seq_list) || void 0 === n4 || n4.forEach(function(t6) {
                  a2.Ko(t6, Or);
                });
              }), null === (u2 = null === (o2 = t4.body) || void 0 === o2 ? void 0 : o2.stream_info_list) || void 0 === u2 || u2.forEach(function(i4, n4) {
                a2.Ko(t4.body.stream_info_list[n4], kr);
              }), this.longToStringNumber(t4.body, ["ret_timestamp"], "toString"), this.transKeysName(t4.body, this.ko), this.keysExist(t4.body, ["token_remain_time", "stream_seq", "hearbeat_interval", "hearbeat_timeout"]), t4.body.anchor_info = { anchor_id_name: t4.body.anchor_info.id_name, anchor_id: t4.body.anchor_info.user_id, anchor_nick_name: t4.body.anchor_info.nick_name };
            }, t3.prototype.transKeysName = function(t4, i3) {
              i3.forEach(function(i4) {
                (0, B.TE)(t4[i4[0]]) || (t4[i4[1]] = t4[i4[0]], delete t4[i4[0]]);
              });
            }, t3.prototype.keysExist = function(t4, i3) {
              i3.forEach(function(i4) {
                void 0 === t4[i4] && (t4[i4] = 0);
              });
            }, t3.prototype.longToStringNumber = function(t4, i3, n3) {
              i3.forEach(function(i4) {
                Oe.A.isLong(t4[i4]) && (t4[i4] = t4[i4][n3]());
              });
            }, t3.prototype.Ko = function(t4, i3) {
              var n3 = this;
              (0, B.w)(t4) && i3.forEach(function(i4) {
                if ("[object Uint8Array]" === Object.prototype.toString.call(t4[i4]))
                  try {
                    t4[i4] = ye(t4[i4]);
                  } catch (t5) {
                    n3.an.error("zm.lrh.bts " + i4 + " " + t5);
                  }
                else if ("[object Array]" === Object.prototype.toString.call(t4[i4])) {
                  !t4[i4].some(function(t5) {
                    return "[object Uint8Array]" !== Object.prototype.toString.call(t5);
                  }) && (t4[i4] = t4[i4].map(function(t5, e3) {
                    try {
                      return ye(t5);
                    } catch (r3) {
                      return n3.an.error("zm.lrh.bts  " + " ".concat(e3, " ").concat(i4, " ").concat(r3)), t5;
                    }
                  }));
                }
              });
            }, t3.prototype.logout = function(t4, i3, n3) {
              var e3 = this;
              if (t4.isMulti) {
                this.an.info(qi + " quit " + t4.roomID), this.clearPushMsgCacheByRoomID(t4.roomID);
                var r3 = br.QuitRoomReq.create(o2 = {}), s3 = br.QuitRoomReq.encode(r3).finish();
                return this.sendMessage("QuitRoomReq", s3, function(n4, r4) {
                  e3.handleLogoutRsp(t4.roomID), i3 && i3(n4, r4);
                }, function(i4, r4) {
                  e3.handleLogoutRsp(t4.roomID), n3 && n3(i4, r4);
                }, { roomID: t4.roomID });
              }
              this.clearAllPushMsgCache();
              var o2 = { logout_code: 0, logout_check: this.Bo.md5Bytes(_e(this.Eo)), user_session_id: t4.longSid, logout_logic: this.pn.isMultiRoom ? 3 : 1 }, u2 = this.Qo(o2);
              this.an.info(qi + " logout " + JSON.stringify(u2));
              r3 = _r.LogoutRoomReq.create(o2), s3 = _r.LogoutRoomReq.encode(r3).finish();
              return this.sendMessage("LogoutRoomReq", s3, function(n4, r4) {
                e3.handleLogoutRsp(t4.roomID), i3 && i3(n4, r4);
              }, function(i4, r4) {
                e3.handleLogoutRsp(t4.roomID), n3 && n3(i4, r4);
              }, { roomID: t4.roomID });
            }, t3.prototype.Wo = function() {
              var t4 = this.Ho;
              this.an.info("zm.lrh.csml " + t4.length), t4.forEach(function(t5) {
                t5 && t5.error && setTimeout(function() {
                  t5 && t5.error && t5.error(q.TIMEOUT, t5.seq);
                }, 0);
              }), this.So = {};
            }, t3.prototype.$o = function() {
              var t4 = this, i3 = Date.now(), n3 = 0, e3 = 0, r3 = 0;
              this.Ho.find(function(s3) {
                if (s3.sendTime + s3.timeout > i3)
                  return false;
                if (delete t4.So[s3.seq], ++e3, null == s3.error)
                  ++r3;
                else {
                  var o2 = s3.error, u2 = s3.seq;
                  setTimeout(function() {
                    o2 && o2(q.TIMEOUT, u2);
                  }, 0);
                }
                return ++n3 >= t4.Oo;
              }), e3 > 0 && this.an.info("zm.lrh.cmlt timeout: ".concat(e3, " , ").concat(r3));
            }, t3.prototype.startCheck = function() {
              var t4 = this;
              this.$o(), this.tu = setTimeout(function() {
                t4.startCheck();
              }, this.To);
            }, t3.prototype.stopCheck = function() {
              this.Wo(), clearTimeout(this.tu);
            }, t3.prototype.Xo = function(t4) {
              var i3 = this, n3 = this.Ho;
              this.an.info("zm.lrh.huscl " + n3.length), n3.forEach(function(n4) {
                if (n4 && n4.resend) {
                  var e3 = n4.seq, r3 = n4.cmdN, s3 = n4.sendTime, o2 = n4.sendBody, u2 = n4.params, a2 = n4.success, c2 = n4.error;
                  if ((null == u2 ? void 0 : u2.roomID) === t4) {
                    var h2 = (/* @__PURE__ */ new Date()).getTime() - s3;
                    i3.sendMessage(r3, o2, a2, c2, u2, { timeout: h2, resend: false }, true), delete i3.So[e3];
                  }
                }
              });
            }, t3.prototype.handleSendCommandMsgRsp = function(t4) {
              var i3 = this.So[t4.header.seq];
              if (null != i3) {
                var n3 = i3, e3 = null == n3 ? void 0 : n3.params;
                delete this.So[t4.header.seq], 0 === t4.body.err_code ? setTimeout(function() {
                  n3 && null != n3.success && n3.success(t4, t4.header.seq);
                }, 0) : setTimeout(function() {
                  n3 && null != n3.error && n3.error(t4, t4.header.seq, e3);
                }, 0);
              }
            }, t3.prototype.getReqHead = function(t4) {
              return {};
            }, t3.prototype.heartBeat = function(t4, i3, n3, e3) {
              var r3 = this, s3 = br.HbReq.create({}), o2 = br.HbReq.encode(s3).finish();
              this.sendMessage("HbReq", o2, function(i4, n4) {
                var e4, s4;
                null === (e4 = i4.body.trans_channel_list) || void 0 === e4 || e4.forEach(function(t5, i5) {
                  var n5;
                  r3.Ko(t5, Ir), null === (n5 = t5.trans_seq_list) || void 0 === n5 || n5.forEach(function(t6) {
                    r3.Ko(t6, Or);
                  });
                }), null === (s4 = i4.body.user_trans_channel_list) || void 0 === s4 || s4.forEach(function(t5, i5) {
                  var n5;
                  r3.Ko(t5, Ir), null === (n5 = t5.trans_seq_list) || void 0 === n5 || n5.forEach(function(t6) {
                    r3.Ko(t6, Or);
                  });
                }), r3.transKeysName(i4.body, [["hb_interval", "hearbeat_interval"], ["hb_timeout", "hearbeat_timeout"], ["big_im_time_window", "bigim_time_window"], ["trans_channel_list", "trans_seqs"]]), r3.keysExist(i4.body, ["hearbeat_interval", "hearbeat_timeout"]), i4.body.server_user_seq = i4.body.user_seq.toNumber(), r3.longToStringNumber(i4.body, ["ret_timestamp"], "toNumber"), t4 && t4(i4, n4);
              }, i3, { roomID: null == n3 ? void 0 : n3.roomID }, { timeout: e3 });
            }, t3.prototype.fetchUserList = function(t4, i3, n3, e3) {
              var r3 = this, s3 = is({}, t4), o2 = this.Qo(s3);
              this.an.info(ji + " " + JSON.stringify(o2));
              var u2 = br.GetUserlistReq.create(s3), a2 = br.GetUserlistReq.encode(u2).finish();
              return this.sendMessage("GetUserlistReq", a2, function(t5, n4) {
                var e4, s4;
                r3.an.info(ji + " suc " + n4), null === (s4 = null === (e4 = t5.body) || void 0 === e4 ? void 0 : e4.user_base_info_list) || void 0 === s4 || s4.forEach(function(i4, n5) {
                  r3.Ko(t5.body.user_base_info_list[n5], Rr);
                }), r3.transKeysName(t5.body, [["user_base_info_list", "user_baseinfos"]]), r3.longToStringNumber(t5.body, ["server_user_seq", "server_user_index", "ret_user_index"], "toNumber"), i3 && i3(t5, n4);
              }, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.sendRoomMsg = function(t4, i3, n3, e3) {
              var r3 = this, s3 = { msg_category: t4.msg_category, msg_type: t4.msg_type, msg_content: _e(t4.msg_content) }, o2 = this.Qo(s3);
              this.an.info("zm.lrh.srm.1 " + JSON.stringify(o2));
              var u2 = br.SendImReq.create(s3), a2 = br.SendImReq.encode(u2).finish();
              return this.sendMessage("SendImReq", a2, function(t5, n4) {
                r3.longToStringNumber(t5.body, ["msg_id"], "toNumber"), i3 && i3(t5, n4);
              }, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.sendReliableMessage = function(t4, i3, n3, e3) {
              var r3 = this, s3 = { trans_type: _e(t4.trans_type), trans_data: _e(t4.trans_data), trans_local_seq: t4.trans_local_seq, trans_channel: _e(t4.trans_channel) }, o2 = this.Qo(s3);
              this.an.info("zm.lrh.srm.0 " + JSON.stringify(o2));
              var u2 = br.SetTransReq.create(s3), a2 = br.SetTransReq.encode(u2).finish();
              return this.sendMessage("SetTransReq", a2, function(t5, n4) {
                r3.Ko(t5.body, Cr), i3(t5, n4);
              }, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.fetchReliableMessage = function(t4, i3, n3, e3) {
              var r3 = this, s3 = t4.fetch_array.map(function(t5) {
                return { trans_type: _e(t5.trans_type), trans_local_seq: t5.trans_seq };
              }), o2 = { trans_channel: _e(t4.trans_channel), trans_list: s3 }, u2 = this.Qo(o2);
              this.an.info("zm.lrh.frm " + JSON.stringify(u2));
              var a2 = br.GetTransReq.create(o2), c2 = br.GetTransReq.encode(a2).finish();
              return this.sendMessage("GetTransReq", c2, function(t5, n4) {
                var e4;
                r3.Ko(t5.body, Ar), null === (e4 = t5.body.trans_list) || void 0 === e4 || e4.forEach(function(t6) {
                  r3.Ko(t6, zr);
                }), i3(t5, n4);
              }, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.fetchUserTransInfo = function(t4, i3, n3, e3) {
              var r3 = this, s3 = t4.fetch_array.map(function(t5) {
                return { trans_type: _e(t5.trans_type), trans_local_seq: t5.trans_seq };
              }), o2 = { trans_channel: _e(t4.trans_channel), user_trans_list: s3 }, u2 = this.Qo(o2);
              this.an.info("zm.lrh.futi " + JSON.stringify(u2));
              var a2 = br.GetUserTransReq.create(o2), c2 = br.GetUserTransReq.encode(a2).finish();
              return this.sendMessage("GetUserTransReq", c2, function(t5, n4) {
                var e4;
                r3.Ko(t5.body, Dr), null === (e4 = t5.body.user_trans_list) || void 0 === e4 || e4.forEach(function(t6) {
                  r3.Ko(t6, Nr);
                }), i3(t5, n4);
              }, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.sendCustomCommand = function(t4, i3, n3, e3) {
              var r3 = this, s3 = t4.dest_id_name.map(function(t5) {
                return { id_name: _e(t5) };
              }), o2 = is({ to_user_list: s3, push_message: _e(t4.custom_msg) }, t4), u2 = this.Qo(o2);
              this.an.info(Bi + " " + JSON.stringify(u2));
              var a2 = br.SignalLiveCustomReq.create(o2), c2 = br.SignalLiveCustomReq.encode(a2).finish();
              return this.sendMessage("SignalLiveCustomReq", c2, function(t5, n4) {
                i3 && i3(r3.transRsp(t5), n4);
              }, function(t5, i4) {
                n3 && n3(t5, i4);
              }, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.sendRoomChannelMessage = function(t4, i3, n3, e3) {
              var r3 = this, s3 = t4.toUserIDList, o2 = { channel_type: t4.channelType, msg_type: t4.msgType, msg_content: _e(t4.msgContent), to_user_list: s3.map(function(t5) {
                return _e(t5);
              }) }, u2 = this.Qo(o2);
              this.an.info(Bi + " " + JSON.stringify(u2));
              var a2 = br.SendChannelMsgReq.create(o2), c2 = br.SendChannelMsgReq.encode(a2).finish();
              return this.sendMessage("SendChannelMsgReq", c2, function(t5, i4) {
                n3 && n3(r3.transRsp(t5), i4);
              }, function(t5, i4) {
                e3 && e3(t5, i4);
              }, { roomID: i3 });
            }, t3.prototype.sendTransparentMessage = function(t4, i3, n3, e3, r3) {
              var s3 = this, o2 = this.Qo(t4);
              this.an.info("zm.lrh.stm " + (0, G.iq)(o2));
              var u2 = br.SignalTransparentMsgReq.create(t4), a2 = br.SignalTransparentMsgReq.encode(u2).finish();
              return this.sendMessage("SignalTransparentMsgReq", a2, function(t5, i4) {
                e3 && e3(s3.transRsp(t5), i4);
              }, function(t5, i4) {
                console.error("sendTransparentMessage"), r3 && r3(t5, i4);
              }, { roomID: i3 }, { timeout: 1e3 * n3, resend: true });
            }, t3.prototype.sendBigRoomMessage = function(t4, i3, n3, e3) {
              var r3 = this, s3 = { msg_list: t4.msgs.map(function(t5) {
                return { msg_category: t5.msg_category, msg_type: t5.msg_type, msg_timestamp: Oe.A.fromNumber(Date.now()), msg_content: _e(t5.msg_content), msg_client_id: _e(t5.bigmsg_client_id) };
              }) }, o2 = this.Qo(s3);
              this.an.info("zm.lrh.sbrm " + JSON.stringify(o2));
              var u2 = br.SendBigImReq.create(s3), a2 = br.SendBigImReq.encode(u2).finish();
              return this.sendMessage("SendBigImReq", a2, function(t5, n4) {
                var e4;
                null === (e4 = t5.body.msg_list) || void 0 === e4 || e4.forEach(function(t6) {
                  r3.Ko(t6, Tr);
                }), i3(t5, n4);
              }, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.sendSignalCmd = function(t4, i3, n3, e3) {
              var r3 = "";
              switch (t4.sub_cmd) {
                case os:
                  r3 = "SignalLiveInviteReq";
                  break;
                case rs:
                  r3 = "SignalLiveRequestReq";
                  break;
                case ss:
                  r3 = "SignalLiveResultReq";
                  break;
                case us:
                  r3 = "SignalLiveStopReq";
              }
              var s3 = t4.dest_id_name.map(function(t5) {
                return { id_name: _e(t5) };
              }), o2 = { push_message: _e(t4.signal_msg), to_user_list: s3 }, u2 = this.Qo(o2);
              this.an.info("zm.lrh.ssc " + JSON.stringify(u2));
              var a2 = br[r3].create(o2), c2 = br[r3].encode(a2).finish();
              return this.sendMessage(r3, c2, i3, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.sendStreamUpdate = function(t4, i3, n3, e3) {
              var r3, s3 = this;
              try {
                r3 = JSON.parse(t4.stream_msg);
              } catch (t5) {
              }
              var o2, u2 = "";
              this.an.info(Li + " " + JSON.stringify(is(is({}, t4), { third_token: void 0 }))), this.an.remoteReport(Li + " token " + t4.third_token);
              var a2 = this.pn.roomModulesList.find(function(t5) {
                return t5.roomID == e3.roomID;
              });
              if (!a2)
                return this.an.error(Li + " room no found ignore "), -1;
              switch (t4.sub_cmd) {
                case 2001:
                  u2 = "AddStreamReq", o2 = { stream_id: _e(r3.stream_id), extra_info: _e(r3.extra_info), client_req_seq: this.seq + 1, third_token: _e(t4.third_token || ""), stream_attr_opts: { stream_resource: t4.stream_resource, stream_codec: t4.stream_codec, censor_flag: r3.inspect_flag || 0 } };
                  break;
                case 2002:
                  u2 = "DeleteStreamReq", o2 = { stream_id: _e(r3.stream_id), stream_sid: r3.stream_sid, client_req_seq: this.seq + 1 };
                  break;
                case 2003:
                  u2 = "UpdateStreamReq", o2 = { stream_id: _e(r3.stream_id), stream_sid: r3.stream_sid, client_req_seq: this.seq + 1, extra_info: _e(r3.extra_info) };
              }
              var c2 = this.Qo(o2);
              this.an.info(Li + " " + JSON.stringify(c2));
              var h2 = br[u2].create(o2), f2 = br[u2].encode(h2).finish();
              return this.sendMessage(u2, f2, function(t5, n4) {
                s3.an.info(Li + " suc " + u2 + " " + JSON.stringify(t5)), t5.header.room_id = a2.roomID, i3 && i3(t5, n4);
              }, function(t5, i4) {
                s3.an.info(Li + " fail " + u2 + " " + JSON.stringify(t5)), n3 && n3(t5, i4);
              }, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.getStreamList = function(t4, i3, n3, e3) {
              var r3 = this;
              if (this.pn.roomModulesList.find(function(t5) {
                return t5.roomID == e3.roomID;
              })) {
                var s3 = {}, o2 = this.Qo(s3);
                this.an.info(Mi + " " + JSON.stringify(o2));
                var u2 = br.GetStreamListReq.create(s3), a2 = br.GetStreamListReq.encode(u2).finish();
                this.sendMessage("GetStreamListReq", a2, function(t5, n4) {
                  var e4, s4;
                  null === (s4 = null === (e4 = t5.body) || void 0 === e4 ? void 0 : e4.stream_info_list) || void 0 === s4 || s4.forEach(function(t6) {
                    r3.Ko(t6, kr), t6.create_time = t6.create_time.toNumber();
                  }), r3.transKeysName(t5.body, [["stream_list_seq", "stream_seq"], ["stream_info_list", "stream_info"]]), i3 && i3(t5, n4);
                }, function(t5, i4) {
                  n3 && n3(t5, i4);
                }, { roomID: null == e3 ? void 0 : e3.roomID });
              } else
                this.an.error(Mi + " room no found ignore " + e3.roomID);
            }, t3.prototype.Qo = function(t4) {
              var i3 = this, n3 = {};
              return Object.keys(t4).forEach(function(e3) {
                ["logout_check"].includes(e3) ? n3[e3] = t4[e3] : i3.iu(n3, t4, e3, true);
              }), n3;
            }, t3.prototype.transHeader = function(t4) {
              return t4.timestamp = Oe.A.isLong(t4.timestamp) ? t4.timestamp.toString() : t4.timestamp, t4;
            }, t3.prototype.transRsp = function(t4) {
              var i3 = t4 && t4.rsp_head ? this.transRspHead(t4.rsp_head) : {}, n3 = is(is({}, t4), i3);
              return delete n3.rsp_head, n3;
            }, t3.prototype.iu = function(t4, i3, n3, e3) {
              var r3 = this;
              if (void 0 === e3 && (e3 = false), Oe.A.isLong(i3[n3]))
                t4[n3] = e3 ? i3[n3].toString() : i3[n3];
              else if ("[object Object]" === Object.prototype.toString.call(i3[n3]))
                t4[n3] = {}, Object.keys(i3[n3]).forEach(function(s4) {
                  return r3.iu(t4[n3], i3[n3], s4, e3);
                });
              else if ("[object Array]" === Object.prototype.toString.call(i3[n3]) && "[object Object]" === Object.prototype.toString.call(i3[n3][0])) {
                t4[n3] = [];
                for (var s3 = function(s4) {
                  var o3 = {};
                  Object.keys(i3[n3][s4]).forEach(function(t5) {
                    r3.iu(o3, i3[n3][s4], t5, e3);
                  }), t4[n3].push(o3);
                }, o2 = 0; o2 < i3[n3].length; o2++)
                  s3(o2);
              } else if (e3 && "[object Uint8Array]" === Object.prototype.toString.call(i3[n3]))
                try {
                  t4[n3] = ye(i3[n3]);
                } catch (r4) {
                  t4[n3] = e3 ? "~" : i3[n3];
                }
              else
                t4[n3] = i3[n3];
            }, t3.prototype.transRspHead = function(t4) {
              return t4 ? { err_code: t4.code || 0, err_message: t4.message } : {};
            }, t3.prototype.Yo = function(t4, i3) {
              return i3 && is({}, t4.decode(i3));
            }, t3.prototype.Fo = function(t4, i3) {
              var n3 = this;
              this.an.info(Ui + " call"), this.jo = es.disconnected, this.pn.roomModulesList.forEach(function(t5) {
                var i4 = t5.roomTryHandler;
                i4 && n3.isUaConnect && (n3.an.info(Ui + " ua is connect"), i4.retryLoginRoom());
              });
            }, t3.prototype.Jo = function() {
              this.an.info(Gi + " call"), this.jo = es.broken, this.clearAllPushMsgCache(), this.nu(Gi);
            }, t3.prototype.nu = function(t4) {
              var i3 = this;
              this.pn.roomModulesList.forEach(function(n3) {
                var e3 = n3.roomTryHandler, r3 = n3.roomHandler;
                e3 && (e3.invalid(), e3.onactive = function(n4, e4) {
                  i3.an.info(t4 + " onactive"), r3.transError(e4), r3.disconnectedHandle(e4);
                }, e3.startMaxTime(), r3._roomStateHandle("CONNECTING", P.Reconnecting, q.NETWORK_BROKEN));
              });
            }, t3.prototype.Go = function(t4) {
              this.an.info("zm.lrh.hc call " + t4), this.jo = es.connected, t4 === Nt.ConnectedType.AUTO && this.rtm.retryRoom();
            }, t3.prototype.renewToken = function(t4, i3, n3, e3) {
              var r3 = this, s3 = { token: t4.token }, o2 = br.RenewTokenReq.create(s3), u2 = br.RenewTokenReq.encode(o2).finish(), a2 = this.Qo(s3);
              this.an.info("zm.lrh.rt " + JSON.stringify(a2)), this.sendMessage("RenewTokenReq", u2, function(t5, n4) {
                r3.Ko(t5.body, Pr), r3.keysExist(t5.body, ["token_remain_time"]), i3 && i3(t5, n4);
              }, n3, { roomID: null == e3 ? void 0 : e3.roomID });
            }, t3.prototype.reset = function() {
              this.an.info("zm.lrh.r.0 call "), this.jo = es.disconnected, this.switchSessionID = Oe.A.fromInt(0), this.tu && clearTimeout(this.tu);
            }, t3.prototype.closeRequest = function() {
              var t4;
              null === (t4 = this.Uo) || void 0 === t4 || t4.closeRequest();
            }, t3.prototype.resetSessionInfo = function() {
              this.switchSessionID = Oe.A.fromInt(0);
            }, t3.prototype.processPushMsgCache = function(t4) {
              var i3 = this.Do[t4];
              if (i3) {
                this.an.info(Ni + " processPushMsgCache ".concat(t4, ", msg len: ").concat(i3.length));
                for (var n3 = 0; n3 < i3.length; n3++) {
                  var e3 = i3[n3];
                  this.handleSwitchPush(e3.header, e3.body);
                }
                delete this.Do[t4];
              }
            }, t3.prototype.clearAllPushMsgCache = function() {
              var t4 = this;
              Object.keys(this.Do).forEach(function(i3) {
                var n3 = parseInt(i3);
                delete t4.Do[n3];
              });
            }, t3.prototype.clearPushMsgCacheByRoomID = function(t4) {
              var i3 = this.zo[t4];
              i3 && this.Do[i3] && delete this.Do[i3];
            }, t3.prototype.handleLogoutRsp = function(t4) {
              var i3 = this.zo[t4];
              i3 && (delete this.Ao[i3], delete this.zo[t4], this.Do[i3] && delete this.Do[i3]);
            }, t3;
          }(), cs = function() {
            function t3() {
              this.defaultSetting = { remote_log_level: "info", detaillog_domain: "", http3: 0, api_error_report: 1, api_login: 3e4, api_logout: 3e4, api_start_publish: 3e4, api_start_play: 3e4, ip_stack_mode: 1, publish_video_codec: "H264", camera_video_bitrate: 800, screen_video_bitrate: 1500, custom_video_bitrate: 0, l3_play_buffer_ms: 500, AEC: void 0, AGC: void 0, ANS: void 0, resource_mode: 0, bitrate_mode: "default", auto_to_tcp: false, udp_max_fail_num: 2, probe_started_num: 3, udp_or_tcp: "udp", hardware_encode: false, camera_hard_encode: false, custom_hard_encode: false, bg_fps_stat: 0, camera_width: 720, camera_height: 480, camera_framerate: 15, camera_audio_bitrate: 48, open_mini_sdp: false, sound_level_api_type: e2.EA.useAnalyzer, sound_sample_interval: 200, scenario_configs: [], dtx: 0, peer_signal_over_dc: false, ains: 0, ains_mode: 0, auto_switch_publish_video_codec: 0, vid_clock_rate_est: 0, transcode_on_zero_fps: 0, report_attr_level: 0, log_strategy: -1, connect_media_in_advance: 1 }, this.userChangedKey = {}, this.arrObjKeys = ["scenario"], this.arrObjItemKeys = ["scenario_configs"], this.setting = JSON.parse(JSON.stringify(this.defaultSetting));
            }
            return t3.prototype.setSetting = function(t4, i3) {
              var n3 = Array.isArray(i3) && i3.length > 0;
              for (var e3 in t4) {
                var r3 = t4[e3];
                if (this.arrObjKeys.includes(e3))
                  for (var s3 in r3)
                    this.setting[e3 + "_" + s3] = r3[s3];
                else if ((0, B.Cs)(r3.ctrlmode) && [1, 2].includes(r3.ctrlmode))
                  this.setting[e3] = r3, this.setting[e3 + "_ctrlmode"] = r3.ctrlmode;
                else
                  for (var s3 in r3)
                    if (!(s3.endsWith("_ctrlmode") || n3 && -1 == i3.indexOf(s3)))
                      if ((0, B.TE)(r3[s3 + "_ctrlmode"]))
                        void 0 === r3[s3] ? this.defaultSetting[s3] && (this.setting[s3] = this.defaultSetting[s3]) : this.setting[s3] = r3[s3];
                      else {
                        var o2 = r3[s3 + "_ctrlmode"];
                        1 === o2 ? this.userChangedKey[s3] || (this.setting[s3] = r3[s3]) : 2 === o2 ? this.setting[s3] = r3[s3] : this.userChangedKey[s3] || this.defaultSetting[s3] && (this.setting[s3] = this.defaultSetting[s3]), "number" == typeof o2 && (this.setting[s3 + "_ctrlmode"] = r3[s3 + "_ctrlmode"]);
                      }
              }
            }, t3.prototype.getSetting = function(t4, i3) {
              return void 0 === i3 && (i3 = false), this.arrObjItemKeys.includes(t4) ? this.setting[t4] : i3 ? 2 == this.setting[t4 + "_ctrlmode"] ? this.setting[t4] : void 0 : this.setting[t4];
            }, t3.prototype.setUserValue = function(t4, i3) {
              2 !== this.setting[t4 + "_ctrlmode"] && (this.userChangedKey[t4] = true, this.setting[t4] = i3);
            }, t3.prototype.getCloudSettingScenario = function(t4, i3, n3) {
              var e3 = this;
              void 0 === i3 && (i3 = false), void 0 === n3 && (n3 = false);
              var r3 = (this.getSetting("scenario_configs") || []).find(function(i4) {
                return i4.scenario === t4;
              }), s3 = {};
              if (r3) {
                var o2 = r3.a_chn_count, u2 = r3.a_bitrate, a2 = r3.ctrlmode;
                [["ANS", "ANS", r3.ans_status, true], ["AGC", "AGC", r3.agc_status, true], ["AEC", "AEC", r3.aec_status, true], ["audioBitrate", "camera_audio_bitrate", isNaN(u2) ? void 0 : u2 / 1e3, false], ["channelCount", "", o2, false]].forEach(function(t5) {
                  var r4, o3, u3, c3, h3;
                  r4 = t5[0], o3 = t5[1], c3 = t5[3], h3 = a2, "number" == typeof (u3 = t5[2]) ? (i3 && 2 === h3 || !i3 && [1, 2].includes(h3)) && (c3 ? (1 === u3 && (s3[r4] = true), 0 === u3 && (s3[r4] = false)) : s3[r4] = u3) : !n3 && o3 && (s3[r4] = e3.getSetting(o3, i3));
                });
              } else {
                if (n3)
                  return {};
                var c2 = this.getSetting("ANS", i3);
                (0, B.dd)(c2) && (s3.ANS = c2);
                var h2 = this.getSetting("AGC", i3);
                (0, B.dd)(h2) && (s3.AGC = h2);
                var f2 = this.getSetting("AEC", i3);
                (0, B.dd)(f2) && (s3.AEC = f2);
                var l2 = this.getSetting("camera_audio_bitrate", i3);
                (0, B.Cs)(l2) && (s3.audioBitrate = l2);
              }
              return s3;
            }, t3.prototype.getSettingList = function(t4, i3) {
              var n3 = this;
              return void 0 === i3 && (i3 = false), t4.map(function(t5) {
                return n3.getSetting(t5, i3);
              });
            }, t3.prototype.getSettingWithUserParams = function(t4, i3) {
              if (this.arrObjItemKeys.includes(t4))
                return this.setting[t4];
              var n3 = this.setting[t4], e3 = this.setting[t4 + "_ctrlmode"];
              return void 0 !== e3 ? 2 === e3 ? n3 : 1 === e3 ? null != i3 ? i3 : n3 : i3 : null != i3 ? i3 : n3;
            }, t3;
          }(), hs = "init", fs = "room", ls = "rtc", ds = function() {
            return ds = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, ds.apply(this, arguments);
          }, vs = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, ms = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, ps = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, gs = function() {
            function t3(i3, r3, s3, o2, u2, a2, c2) {
              var h2, f2, l2, d2, v2, m2, p2, g2 = this;
              this.an = s3, this._dataReport = o2, this.cr = u2, this.eu = c2, this.dispatchServers = [], this.dispatchHttp3Servers = [], this.dispatchWssV6Servers = [], this.dispatchHttp3V6Servers = [], this.ru = null, this.su = 1e3, this.version = e2.qt, this.id = "", this.ou = { online: function() {
                g2.uu();
              }, offline: function() {
                g2.uu();
              }, unload: function(t4) {
                return vs(g2, void 0, void 0, function() {
                  return ms(this, function(i4) {
                    switch (i4.label) {
                      case 0:
                        return this.an.info(Xt + " " + t4.type), this.cr.setUnloadState(e2.t0.I), this._onBeforePageUnload ? [4, this._onBeforePageUnload()] : [3, 2];
                      case 1:
                        i4.sent(), i4.label = 2;
                      case 2:
                        return this.logoutRoom(void 0, false, true), [2];
                    }
                  });
                });
              } }, this._roomLoginResponseListener = function() {
                clearTimeout(g2.cloudSettingTimer), g2.cloudSettingTimer = setTimeout(function() {
                  g2.an.info($t + " fetch cloud setting"), g2.au();
                }, 100);
              };
              var b2 = t3.logConfigForPreset;
              (null == b2 ? void 0 : b2.logLevel) && this.logger.setLogLevel(b2.logLevel), s3.onConnected = function(t4) {
                var i4 = t4.url, n3 = "".concat(Zt, " log connected ").concat(i4);
                if (i4 && i4.startsWith("wss://")) {
                  g2.pn.logDomain = i4.split("/")[2];
                  var e3 = "wss://".concat(g2.pn.logDomain, "/zglog/tlog");
                  g2.logger.info("".concat(Zt, " event url ").concat(e3)), g2.cr.setConfig({ serverUrl: e3 });
                }
                g2.pn.enableWSLog || (g2.an.enableWebSocketLog(false), n3 += " ; close ws log"), g2.an.info(n3);
              }, s3.onUploadLog = function(t4, i4, n3) {
                var r4 = g2.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: "" }, nn);
                r4.setAttributes({ file_size: Math.round(t4 / 8), file_name: i4 }), n3 ? g2.cr.setError(r4, n3) : r4.end();
              }, this.pn = new ve(this.an, this._dataReport), this.pn.ENV = a2, this.pn.product = Mt.product, this.pn.advanceConfig = ds(ds({}, this.pn.advanceConfig), { customDomain: t3.customDomain }), this.cu();
              var _2 = t3.engineOptions;
              this.cloudSetting = new ze(null == _2 ? void 0 : _2.closeCloudSetting), this.getReportSeq = e2.wN, this.getSeq = e2.Mo, this.hu(), this.pn.deviceID = function(t4) {
                void 0 === t4 && (t4 = 0);
                var i4 = Ot("z_deviceID");
                if (i4)
                  return i4;
                (/* @__PURE__ */ new Date()).getTime();
                var n3 = Ct(t4);
                return kt("z_deviceID", n3), n3;
              }(a2), t3.pageID || (t3.pageID = Ct(a2));
              var y2 = this.pn.id = Ct(a2);
              this.logger.info("".concat(Zt, " deviceID: ").concat(this.pn.deviceID, ", pageID: ").concat(t3.pageID, ", instID: ").concat(y2)), this.cr.init(i3, a2, this.pn.deviceID), this.cr.setLogger(this.an), this.pn.reporter = this.cr;
              var w2, S2 = Zi, E2 = this.cr.createSpan(e2.t0.H, { key: "" }, { key: S2.event }, S2.event, true);
              r3 && this.fu(r3);
              var k2, O2, I2 = 0 === a2 ? "ZegoExpressWebRTC" : "ZegoExpressMiniProgram";
              if ((null === (h2 = this.eu) || void 0 === h2 ? void 0 : h2.reportData) && (w2 = null === (l2 = null === (f2 = this.eu) || void 0 === f2 ? void 0 : f2.reportData) || void 0 === l2 ? void 0 : l2.version, I2 = (null === (v2 = null === (d2 = this.eu) || void 0 === d2 ? void 0 : d2.reportData) || void 0 === v2 ? void 0 : v2.project) || I2), E2.setAttributes({ biz_type: S2.biz_type(0), project: S2.project(I2), liveroom_version: S2.liveroom_version(w2), is_from_cache: S2.is_from_cache(false), sev_env: S2.sev_env(this.pn.testEnvironment ? "test" : "online"), framework: (null === (m2 = t3.engineOptions) || void 0 === m2 ? void 0 : m2.framework) || void 0, logger_rev: fe.ZegoLogger.logVersion, build_time: e2.bD }), O2 = this.an, (k2 = i3) && (0, B.Cs)(k2) && (0, G.zQ)(k2) || (O2.error("ccp.0 appid must be positive integer number and not empty"), 0)) {
                this.pn.appid = i3, this.pn.configOK = true, this.pn.sdKVersion = this.version, this.pn.testEnvironment && (this.pn.mode = Nt.Mode.MODE_TEST), this.netAgent = new Nt.ZegoConnectionAgent(t3.proxyCtrl), this.an.setSessionInfo(this.pn.appid, "", "", "", "", this.version), this.netAgent.init(), this.netAgent.setLogger(this.an);
                var R2 = { appID: this.pn.appid, env: this.pn.ENV, mode: this.pn.mode };
                _2 && _2.pri && (R2.model = 1), t3.geoFenceType && t3.geoFenceAreaList && (R2.geoFencing = { type: t3.geoFenceType, list: t3.geoFenceAreaList }), this.netAgent.setAppInfo(R2), this.liveRoomHandler = new as(this.an, this.pn, this.netAgent, this._dataReport, this);
                var T2 = "";
                0 === a2 ? T2 = "rtc" : 1 === a2 && (T2 = "ali"), this.pn.settingConfig = new cs(), this.cloudSetting.setLog(this.an), this.cloudSetting.init({ productNum: Pt, appID: i3, env: a2, pollingNotify: function(t4, i4) {
                  g2.an.info(Zt + " setting file changed " + t4 + " " + JSON.stringify(i4)), g2.pn.actionListener("_cloudSettingNotify", t4, i4);
                }, reportNotify: this.lu.bind(this), online: !this.pn.testEnvironment, connection: this.netAgent, inflate: this.an.inflate });
                var C2 = "".concat(Zt, " default setting.");
                C2 += this.du(), this.an.setZipLogConfig(1), this.an.enableWebSocketLog(true), this.an.info(C2), this.setAPIReports(), this.cloudSetting.setEnvVariable("environment", T2);
                var A2 = this.cloudSetting.getSettingCache(hs), z2 = this.cloudSetting.getSettingCache(fs), D2 = false, N2 = setTimeout(function() {
                  g2.an.warn("".concat(Zt, " time out, get cache settings failed!")), D2 = true, g2.vu(), g2.getStoreAppConfig(), E2.setAttributes({ use_na: S2.use_na(1), connection_rev: g2.netAgent.getVersion() }), E2.end();
                }, 500);
                Promise.all([A2, z2]).then(function(t4) {
                  var i4 = t4[0], n3 = t4[1], r4 = "".concat(Zt, " get cloud config ").concat(D2);
                  N2 && clearTimeout(N2), g2.mu(null == i4 ? void 0 : i4.setting), D2 || (g2.vu(), g2.getStoreAppConfig());
                  var s4 = g2.du(true);
                  s4 && (r4 += s4), g2.pu(), g2.setAPIReports();
                  var o3 = g2.gu("report_script");
                  if (o3) {
                    var u3 = o3.url, a3 = o3.key, c3 = o3.hash;
                    r4 += " ; report script ".concat(u3, " ").concat(a3, " ").concat(c3), u3 && g2.cr.loadScript(false, u3, a3, c3), c3 && E2.setAttributes({ lua_md5: S2.lua_md5(c3) });
                  } else
                    g2.cr.loadScript(false, "", "", "");
                  g2.an.info(r4), g2.mu(null == n3 ? void 0 : n3.setting);
                  var h3 = g2.cr.createSpan(e2.t0.H, { key: S2.event }, { key: "" }, In);
                  h3.setAttributes({ files: Rn([{ name: hs, content: JSON.stringify(null == i4 ? void 0 : i4.setting), versions: JSON.stringify(null == i4 ? void 0 : i4.versions), code: 0, message: "" }, { name: fs, content: JSON.stringify(null == n3 ? void 0 : n3.setting), versions: JSON.stringify(null == n3 ? void 0 : n3.versions), code: 0, message: "" }]) }), h3.end(), E2.setAttributes({ use_na: S2.use_na(1), connection_rev: g2.netAgent.getVersion() }), E2.end();
                }).catch(function(t4) {
                  if (N2 && clearTimeout(N2), E2.setAttributes({ use_na: S2.use_na(1), connection_rev: g2.netAgent.getVersion() }), E2.end(), g2.an.warn("".concat(Zt, "  initConfig ").concat(JSON.stringify(t4))), (null == t4 ? void 0 : t4.code) === q.GEO_SET_ERROR.code)
                    throw Error("GeoFencing set Error");
                });
                var P2 = this.version;
                e2.F1 && (P2 = P2 + "-" + e2.F1, E2.setAttribute("special_version", e2.F1)), this.an.info("".concat(Zt, " ").concat(null !== (p2 = null === navigator || void 0 === navigator ? void 0 : navigator.userAgent) && void 0 !== p2 ? p2 : "", " ").concat(P2, " log: ").concat(fe.ZegoLogger.logVersion)), this._bindWindowListener(), this.pn.networkState = navigator ? navigator.onLine ? n2.D2.online : n2.D2.offline : n2.D2.online;
                var M2 = "Firefox" === yt() ? null === navigator || void 0 === navigator ? void 0 : navigator.userAgent : null === navigator || void 0 === navigator ? void 0 : navigator.appVersion;
                E2.setAttribute("sys_info", M2 || ""), this.bu(), this.an.setSessionInfo(this.pn.appid, "", "", "", "", this.version);
              } else
                this.an.error("".concat(Zt, " init sdk error")), this.cr.setError(E2, S2.error.kInvalidParamError);
              b2 && this.setLogConfig(b2), this.pn.onListener("roomLoginResponse", this._roomLoginResponseListener);
            }
            return Object.defineProperty(t3.prototype, "logger", { get: function() {
              return this.an;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "stateCenter", { get: function() {
              return this.pn;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "modules", { get: function() {
              return { service: { sendMessage: function(t4) {
              }, on: function(t4, i3) {
              }, registerRouter: function(t4, i3) {
              } } };
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isUseNetAgent", { get: function() {
              return true;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isUaConnect", { get: function() {
              return this.netAgent.isConnect();
            }, enumerable: false, configurable: true }), t3.prototype.gu = function(t4, i3) {
              var n3;
              return void 0 === i3 && (i3 = false), null === (n3 = this.pn.settingConfig) || void 0 === n3 ? void 0 : n3.getSetting(t4, i3);
            }, t3.prototype.mu = function(t4, i3) {
              var n3;
              return null === (n3 = this.pn.settingConfig) || void 0 === n3 ? void 0 : n3.setSetting(t4, i3);
            }, Object.defineProperty(t3.prototype, "reporter", { get: function() {
              return this.cr;
            }, enumerable: false, configurable: true }), t3.prototype.du = function(t4, i3) {
              var n3 = {}, e3 = this.gu("remote_log_level", t4);
              return e3 && (n3.remote_log_level = e3, this.an.setRemoteLogLevel(e3)), Object.keys(n3).length > 0 ? (0, G.iq)(n3) : "";
            }, t3.prototype.setEngineConfig = function(t4) {
              var i3 = t4.roomRetryTime, n3 = t4.isFlutter;
              i3 && (this.pn.roomRetryTime = i3), (0, B.dd)(n3) && (this.pn.isFlutter = n3);
            }, t3.prototype.destroyRTM = function() {
              this.pn.roomModulesList.some(function(t4) {
                return !((null == t4 ? void 0 : t4.isLogout()) || t4.roomState === Se);
              }) && this.logoutRoom(), this.cr.setUnloadState(e2.t0.I), this.cr.destroy(), this.yu(), this.wu();
            }, t3.prototype.hu = function() {
              this.proxyRes = It, this.getServerError = $;
            }, t3.prototype.cu = function() {
              var t4 = this.version.split(".").map(function(t5) {
                return parseInt(t5);
              });
              this.pn.sdkVerNum = (0 === this.pn.ENV ? e2.Ks.SDKProject_ZegoWebRTC : e2.Ks.SDKProject_ZegoMiniProgram) << 28 | t4[0] << 20 | t4[1] << 8 | t4[2];
            }, t3.prototype.bu = function() {
              this.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: Xi }, Xi, true).end();
            }, t3.prototype.pu = function() {
              var t4 = [], i3 = [], n3 = this.pn.advanceConfig.customDomain;
              if ((null == n3 ? void 0 : n3.detaillog) && "" !== (null == n3 ? void 0 : n3.detaillog))
                t4.push(r3 = n3.detaillog), this.an.info(ui + " set detaillog url by advance config " + JSON.stringify(t4)), this.an.setZipLogDomains(t4, i3);
              else if (this.pn.geoFencing) {
                var e3 = this.pn.geoFencing;
                this.an.info(ui + " geo log is  " + (o2 = e3.detaillog) + " " + (u2 = e3.wssV6Detaillog)), o2 && "" !== o2 && (t4.push(o2), this.an.info(ui + " set detaillog url by geoFencing v4 " + JSON.stringify(t4))), u2 && "" !== u2 && (i3.push(u2), this.an.info(ui + " set detaillog url by geoFencing v6 " + JSON.stringify(t4))), (t4.length > 0 || i3.length > 0) && this.an.setZipLogDomains(t4, i3);
              } else {
                if (this.gu("detaillog_domain")) {
                  var r3 = this.gu("detaillog_domain");
                  this.an.info("".concat(ui, " set detaillog domain by cloudsetting ").concat(r3)), r3 && "" !== r3 && t4.push(r3);
                } else if (this.pn.svrDomains) {
                  var s3 = this.pn.svrDomains, o2 = s3.detaillog, u2 = s3.wssV6Detaillog;
                  this.an.info("".concat(ui, " set detaillog domain by svr ").concat(o2, " ").concat(u2)), o2 && "" !== o2 && t4.push(o2), u2 && "" !== u2 && i3.push(u2);
                }
                (t4.length > 0 || i3.length > 0) && this.an.setZipLogDomains(t4, i3);
              }
            }, t3.prototype.getStoreAppConfig = function() {
              if (this.an.info(oi + " call"), localStorage) {
                var t4 = Ot(Ut + "_" + this.getAppID() + "_" + (this.pn.mode || Ht.modeNo));
                if (t4) {
                  var i3 = Ot(Gt + "_" + this.getAppID() + "_" + (this.pn.mode || Ht.modeNo));
                  i3 || this.an.info(oi + " no store config etag");
                  try {
                    var n3 = Et(t4, xt);
                    if (n3 ? (this.pn.appConfig = JSON.parse(n3), this.cr.spanSetAttributes({ key: Zi.event }, { is_from_cache: Zi.is_from_cache(true) }), this.pn.actionListener("_appConfigRsp")) : localStorage.removeItem(Ut + "_" + this.getAppID() + "_" + (this.pn.mode || Ht.modeNo)), i3) {
                      var e3 = Et(i3, xt);
                      this.pn.appConfigEtag = parseInt(e3);
                    }
                  } catch (t5) {
                    this.an.warn(oi + " " + JSON.stringify(t5));
                  }
                } else
                  this.an.info(oi + " no store config");
              } else
                this.an.warn(oi + " no localstorage");
            }, t3.prototype.vu = function() {
              var i3, n3, r3, s3, o2, u2, a2 = this;
              this.an.info(si + " call"), this.netAgent.on("disconnected", function(t4) {
                a2.an.info(si + " netAgent disconnect " + a2.pn.roomModulesList.length), a2.pn.roomModulesList.length > 0 && a2.netAgent.connectUa();
              }), this.netAgent.on("connected", function() {
                a2.an.info("".concat(si, " netAgent connect stack ").concat(R[a2.netAgent.connectIPStackType])), a2.pn.agentConnectIPStackType = a2.netAgent.connectIPStackType, a2.cr.setNetStateCheck(), a2.fetchAppConfig(), a2.retryRoom(true);
              }), this.netAgent.on("broken", function(t4) {
                a2.an.info("".concat(si, " netAgent broken"));
              }), this.netAgent.on("dispatchEvent", function(t4, i4, n4) {
                if (a2.an.info("".concat(si, " dispatch")), "start" === i4) {
                  var r4 = a2.cr.createSpan(e2.t0.H, { key: Mn }, { key: "" }, Jn);
                  a2.pn.requestList[t4] = r4;
                } else if ("end" === i4) {
                  (r4 = a2.pn.requestList[t4]) && (r4.setAttributes({ domain_list: Fn(n4.domains), http3_domain_list: Hn(n4.http3Domains), wss_v6_domain_list: Vn(n4.wssV6Domains), http3_v6_domain_list: Qn(n4.http3V6Domains) }), r4.end());
                }
              }), this.netAgent.on("dispatchResultUpdate", function(t4) {
                var i4 = t4.servers, n4 = t4.domains, e3 = t4.http3Servers, r4 = t4.http3Domains, s4 = t4.wssV6Servers, o3 = t4.http3V6Servers, u3 = t4.wssV6Domains, c3 = t4.http3V6Domains;
                a2.an.info("".concat(si, " dispatchResult ").concat(JSON.stringify(t4)));
                var h3 = a2.pn.netGeoFencing;
                if (1 !== h3.id)
                  n4 && n4[0] && (h3.accesshub = n4[0]), r4 && r4[0] && (h3.http3Accesshub = r4[0]), u3 && u3[0] && (h3.wssV6Accesshub = u3[0]), c3 && c3[0] && (h3.http3V6Accesshub = c3[0]), a2.setLocalGeoFencing();
                else {
                  var f3 = function(t5, i5) {
                    var n5 = St(JSON.stringify(i5), xt);
                    kt(t5 + "_" + a2.pn.appid + "_" + (a2.pn.mode || Ht.modeNo), n5);
                  };
                  f3(jt, i4), f3(qt, e3), f3(Lt, s4), f3(Bt, o3);
                }
              }), this.netAgent.on("svrAddrResultUpdate", function(t4) {
                var i4 = t4.accesshub_domain, n4 = t4.logreport_domain, e3 = t4.detaillog_domain, r4 = t4.geofencing_id, s4 = t4.accesshub_v6_domain, o3 = t4.http3_v6_domain, u3 = t4.logreport_v6_domain, c3 = t4.detaillog_v6_domain;
                if (1 !== r4) {
                  var h3 = a2.pn.netGeoFencing;
                  n4 && (h3.logreport = n4), u3 && (h3.wssV6Logreport = u3), e3 && (h3.detaillog = e3), c3 && (h3.wssV6Detaillog = c3), h3.id = r4, a2.setLocalGeoFencing();
                } else {
                  var f3 = St(JSON.stringify({ accesshub_domain: i4, logreport_domain: n4, detaillog_domain: e3, accesshub_v6_domain: s4, http3_v6_domain: o3, logreport_v6_domain: u3, detaillog_v6_domain: c3 }), xt);
                  kt(Ft + "_" + a2.pn.appid + "_" + (a2.pn.mode || Ht.modeNo), f3);
                }
                n4 && (a2.stateCenter.svrDomains.logreport = n4, u3 && (a2.stateCenter.svrDomains.wssV6Logreport = u3), a2.handleLogUpload(), a2._onAppConfigUpdate && a2._onAppConfigUpdate({ loggerDomains: [n4] })), e3 && (a2.stateCenter.svrDomains.detaillog = e3, c3 && (a2.stateCenter.svrDomains.wssV6Detaillog = c3), a2.pu());
              }), this.netAgent.on("ipDetection", function(t4) {
                var i4, n4, r4 = t4.linkConnectDetection, s4 = t4.ipList;
                if (r4 && (a2.an.info("".concat(si, " ip detection v4: ").concat(A[r4.IPv4], ", v6: ").concat(A[r4.IPv6])), a2.pn.agentIpStackDetection = r4), s4) {
                  var o3 = a2.cr.createSpan(e2.t0.H, { key: L.oq.event }, { key: "" }, L._u.event);
                  o3.setAttributes({ ipv4: L._u.ipv4(null === (i4 = s4.ipv4) || void 0 === i4 ? void 0 : i4[0]), ipv6: L._u.ipv4(null === (n4 = s4.ipv6) || void 0 === n4 ? void 0 : n4[0]) }), o3.end();
                }
              }), this.netAgent.on("onceConnectEvent", function(t4, i4, n4) {
                if (a2.an.info("".concat(si, " once connect")), "start" === i4) {
                  var r4 = a2.cr.createSpan(e2.t0.H, { key: Mn }, { key: qn }, qn, true);
                  a2.pn.requestList[t4] = r4;
                } else if ("end" === i4) {
                  (r4 = a2.pn.requestList[t4]) && (r4.setAttributes(ds({}, n4)), r4.end());
                }
              }), this.netAgent.on("connectedEvent", function(t4, i4, n4) {
                if (a2.an.info("".concat(si, " connect")), "start" === i4) {
                  var r4 = a2.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: Mn }, Mn, true);
                  a2.pn.requestList[t4] = r4;
                } else if ("end" === i4) {
                  (r4 = a2.pn.requestList[t4]) && n4 && (r4.setAttributes({ request_count: jn(n4.count), connect_id: xn(n4.connectid), first_connect_type: n4.first_connect_type, connect_type: n4.connect_type, error: n4.error || 0, server: n4.server, ip_stack: a2.netAgent.connectIPStackType }), r4.end());
                }
              }), this.netAgent.on("requestEvent", function(t4, i4, n4) {
                if (a2.an.info("".concat(si, " request")), "start" === i4) {
                  var r4 = a2.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: Yn }, Yn, true);
                  a2.pn.requestList[t4] = r4;
                } else if ("end" === i4) {
                  (r4 = a2.pn.requestList[t4]) && (r4.setAttributes({ req_location: Kn(n4.na_req_location), http_code: n4.status_code, error: n4.err_code }), r4.end());
                }
              }), this.netAgent.on("disConnectedEvent", function(t4) {
                var i4 = t4.duration, n4 = t4.server, r4 = t4.connectid;
                a2.an.info("".concat(si, " disconnect"));
                var s4 = a2.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: "" }, Ln);
                s4.setAttributes({ url: Un(n4), connect_duration: Gn(i4), connect_id: Bn(r4) }), s4.end();
              }), this.netAgent.on("clientInfo", function(t4) {
                var i4 = t4.timeOffset, n4 = t4.geofencingID;
                (0, B.Cs)(i4) && a2.cr.setTimeOffset(i4), a2.Su(), (0, B.Cs)(n4) && (a2.pn.netGeoFencing.id = n4);
              }), this.netAgent.on("heartBeatTimeout", function() {
                a2.pn.actionListener("_uaHeartBeatTimeout");
              });
              var c2 = j[this.pn.selectIPStackMode];
              this.an.info("".concat(si, " select ip stack mode ").concat(c2)), this.an.setSettingConfig({ ipStackMode: this.pn.selectIPStackMode }), this.netAgent.setSettingConfig({ enableHttp3: void 0 !== (null === (i3 = t3.engineOptions) || void 0 === i3 ? void 0 : i3.http3) ? !!t3.engineOptions.http3 : 1 === this.gu("http3"), ipStackMode: this.pn.selectIPStackMode, accesshubBypassConnectTime: null === (n3 = t3.engineOptions) || void 0 === n3 ? void 0 : n3.accesshubBypassConnectTime, dispatchTag: null === (r3 = t3.engineOptions) || void 0 === r3 ? void 0 : r3.appDispatchTag });
              var h2 = [], f2 = [], l2 = [], d2 = [], v2 = this.Eu(), m2 = v2.detaillog;
              h2 = v2.accesshub, l2 = v2.wssV6Accesshub, this.stateCenter.svrDomains.logreport = v2.logreport[0], this.stateCenter.svrDomains.detaillog = m2[0], this.an.info("".concat(si, " hard domains ").concat(JSON.stringify(h2)));
              var p2 = this.Ou();
              if (this.an.info("".concat(si, " svr domains ").concat(JSON.stringify(h2))), p2) {
                var g2 = p2.accesshub_domain, b2 = p2.logreport_domain, _2 = p2.detaillog_domain, y2 = p2.accesshub_v6_domain, w2 = p2.logreport_v6_domain, S2 = p2.detaillog_v6_domain;
                g2 && (h2 = [g2], this.stateCenter.svrDomains.accesshub = g2), y2 && (l2 = [y2], this.pn.svrDomains.wssV6Accesshub = y2), b2 && (this.stateCenter.svrDomains.logreport = b2), w2 && (this.pn.svrDomains.wssV6Logreport = w2), _2 && (this.stateCenter.svrDomains.detaillog = _2), S2 && (this.pn.svrDomains.wssV6Detaillog = S2);
              }
              var E2 = null === (s3 = t3.engineOptions) || void 0 === s3 ? void 0 : s3.accessDomains;
              E2 && (h2 = E2);
              var k2 = this.getGeoDomains();
              h2 = (null == k2 ? void 0 : k2.domains) || h2, f2 = (null == k2 ? void 0 : k2.http3Domains) || f2, l2 = (null == k2 ? void 0 : k2.wssV6Domains) || l2, d2 = (null == k2 ? void 0 : k2.http3V6Domains) || d2;
              var O2 = false, I2 = this.Iu(), T2 = I2.accesshub, C2 = I2.logreport, z2 = I2.detaillog;
              T2 && "" !== T2 && (O2 = true, h2 = [T2], this.stateCenter.svrDomains.accesshub = T2), C2 && "" !== C2 && (this.stateCenter.svrDomains.logreport = C2), z2 && "" !== z2 && (this.stateCenter.svrDomains.detaillog = z2), this.an.info("".concat(si, " advance config domains: ").concat(JSON.stringify(I2), ", set domains ").concat(JSON.stringify(h2), ", ")), this.an.info("".concat(si, " domains ").concat(JSON.stringify(h2), " v6domains ").concat(JSON.stringify(l2)));
              var D2 = h2.map(function(t4) {
                return "wss://".concat(t4, "/accesshub");
              }), N2 = f2.map(function(t4) {
                return "https://".concat(t4, "/accesshub");
              }), P2 = l2.map(function(t4) {
                return "wss://".concat(t4, "/accesshub");
              }), M2 = d2.map(function(t4) {
                return "https://".concat(t4, "/accesshub");
              });
              if (this.netAgent.setNetAgentDefaultServers(D2, P2), this.dispatchServers = [], this.pn.geoFencing || O2 || E2)
                this.dispatchServers = D2, this.dispatchHttp3Servers = N2, this.dispatchWssV6Servers = P2, this.dispatchHttp3V6Servers = M2;
              else {
                var x2 = this.Ru(), q2 = x2.http3Servers, U2 = x2.wssV6Servers, G2 = x2.http3V6Servers;
                this.dispatchServers = x2.servers, this.dispatchHttp3Servers = q2, this.dispatchWssV6Servers = U2, this.dispatchHttp3V6Servers = G2;
              }
              (null === (u2 = null === (o2 = this.stateCenter.advanceConfig) || void 0 === o2 ? void 0 : o2.customDomain) || void 0 === u2 ? void 0 : u2.logreport) ? (this.handleLogUpload(), this.pu()) : this.handleLogUpload(), this.an.info(si + " dispatch access servers ".concat(JSON.stringify(this.dispatchServers), " ").concat(JSON.stringify(this.dispatchHttp3Servers), " ").concat(JSON.stringify(this.dispatchWssV6Servers), " ").concat(JSON.stringify(this.dispatchHttp3V6Servers))), this.netAgent.setDispatchConnectServers(this.dispatchServers, this.dispatchHttp3Servers, this.dispatchWssV6Servers, this.dispatchHttp3V6Servers);
            }, t3.prototype.Tu = function(t4) {
              var i3 = t4.split(".");
              return i3[i3.length - 2] + "." + i3[i3.length - 1];
            }, t3.prototype.Iu = function() {
              var t4 = {}, i3 = this.stateCenter.advanceConfig.customDomain;
              if (!i3)
                return t4;
              var n3 = i3.accesshub, e3 = i3.logreport, r3 = i3.detaillog;
              return n3 && (t4.accesshub = n3), e3 && (t4.logreport = e3), r3 && (t4.detaillog = r3), t4;
            }, t3.prototype._replaceMainDomain = function(t4) {
              var i3, n3, e3, r3;
              if (this.pn.geoFencing) {
                var s3 = this.Tu(null === (i3 = this.pn.geoFencing) || void 0 === i3 ? void 0 : i3.accesshub);
                this.pn.geoFencing.accesshub = null === (n3 = this.pn.geoFencing) || void 0 === n3 ? void 0 : n3.accesshub.replace(s3, t4), this.pn.geoFencing.logreport = null === (e3 = this.pn.geoFencing) || void 0 === e3 ? void 0 : e3.logreport.replace(s3, t4), this.pn.geoFencing.detaillog = null === (r3 = this.pn.geoFencing) || void 0 === r3 ? void 0 : r3.detaillog.replace(s3, t4);
              }
            }, t3.prototype.hashMainDomain = function() {
              var t4 = Ht.normalPriDomains.length, i3 = function(t5, i4) {
                for (var n3 = 0; t5 > 0; )
                  n3 += t5 % 10, t5 = Math.floor(t5 / 10);
                return Math.floor(n3 / i4);
              }(this.getAppID(), t4);
              return Ht.normalPriDomains[i3 % t4];
            }, t3.prototype.Eu = function() {
              var t4, i3 = { accesshub: [], wssV6Accesshub: [], logreport: [], detaillog: [] }, n3 = (null === (t4 = this.eu) || void 0 === t4 ? void 0 : t4.prefixDomain) || Ht.prefixDomain, e3 = Ht.wssV6preFixDomain, r3 = Vt, s3 = Qt, o2 = this.hashMainDomain(), u2 = Ht.normalPriDomains.filter(function(t5) {
                return t5 !== o2;
              });
              return i3.accesshub = ps([o2], u2, true).map(function(t5) {
                return n3 + "." + t5;
              }), i3.wssV6Accesshub = ps([o2], u2, true).map(function(t5) {
                return e3 + "." + t5;
              }), i3.logreport = [r3 + "." + o2], i3.detaillog = [s3 + "." + o2], i3;
            }, t3.prototype.Ru = function() {
              var t4 = this, i3 = function(i4) {
                var n3 = Ot(i4 + "_" + t4.pn.appid + "_" + (t4.pn.mode || Ht.modeNo));
                if (!n3)
                  return [];
                var e3 = Et(n3, xt);
                if (e3)
                  try {
                    return JSON.parse(e3);
                  } catch (t5) {
                    return [];
                  }
                return [];
              };
              return { servers: i3(jt), http3Servers: i3(qt), wssV6Servers: i3(Lt), http3V6Servers: i3(Bt) };
            }, t3.prototype.Ou = function() {
              var t4 = Ot(Ft + "_" + this.pn.appid + "_" + (this.pn.mode || Ht.modeNo));
              if (!t4)
                return null;
              var i3 = Et(t4, xt);
              if (i3)
                try {
                  return JSON.parse(i3);
                } catch (t5) {
                  return null;
                }
              return null;
            }, t3.prototype.Cu = function(t4) {
              return Ht.scheme + "://" + t4 + "/" + Ht.location;
            }, t3.prototype.getUnloadEventName = function() {
              var t4 = navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i), i3 = yt(), n3 = navigator.userAgent, e3 = "micromessenger" == n3.toLowerCase().match(/MicroMessenger/i), r3 = n3.indexOf("Android") > -1 || n3.indexOf("Adr") > -1;
              return t4 || e3 && r3 ? "pagehide" : "Firefox" === i3 ? "beforeunload" : "unload";
            }, t3.prototype._bindWindowListener = function() {
              var t4 = this.getUnloadEventName();
              window.addEventListener(t4, this.ou.unload), window.addEventListener("offline", this.ou.offline), window.addEventListener("online", this.ou.online);
            }, t3.prototype.wu = function() {
              var t4 = this.getUnloadEventName();
              window.removeEventListener(t4, this.ou.unload), window.removeEventListener("offline", this.ou.offline), window.removeEventListener("online", this.ou.online);
            }, t3.prototype.retryRoom = function(t4, i3, n3) {
              if (void 0 === t4 && (t4 = false), void 0 === n3 && (n3 = false), this.logger.info("".concat("zm.rr", " retryNow:").concat(t4, " roomid:").concat(i3, ", resetSession:").concat(n3)), i3) {
                var e3 = this.pn.roomModulesList.find(function(t5) {
                  return t5.roomID == i3;
                });
                e3 && e3.retryRoom(t4, n3);
              } else
                this.pn.roomModulesList.forEach(function(i4) {
                  null == i4 || i4.retryRoom(t4, n3);
                });
            }, t3.prototype.Au = function() {
              this.an.info(Xt + " network is online"), this.pn.networkState !== n2.D2.online && (this.pn.networkState = n2.D2.online, this.yu());
            }, t3.prototype.yu = function() {
              this.ru && (clearInterval(this.ru), this.ru = null);
            }, t3.prototype.zu = function() {
              var t4 = this;
              this.yu(), this.an.info(Fi + " start network online detection.."), this.ru = setInterval(function() {
                t4.pn.networkState !== n2.D2.offline && t4.yu(), t4.isUaConnect && (t4.an.info(Fi + " detected network online"), t4.Au(), t4.yu());
              }, this.su);
            }, t3.prototype.uu = function() {
              this.an.info(Xt + " network is broken"), this.pn.networkState !== n2.D2.offline && (this.pn.networkState = n2.D2.offline, this.zu());
            }, t3.prototype.setLogConfig = function(t4) {
              var i3, n3;
              this.an.info(Wt + " call " + (0, G.iq)(t4));
              var r3 = this.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: tn.event }, tn.event);
              if (t4.logLevel && ["debug", "info", "warn", "error", "report", "disable"].includes(t4.logLevel) && (this.an.setLogLevel(t4.logLevel), r3.setAttributes({ log_level: tn.log_level(t4.logLevel) })), t4.remoteLogLevel && ["debug", "info", "warn", "error", "report", "disable"].includes(t4.remoteLogLevel) && r3.setAttributes({ remote_log_level: tn.remote_log_level(t4.remoteLogLevel) }), (0, B.QP)(t4.logURL) && (t4.logURL.startsWith("wss://") || t4.logURL.startsWith("https://")))
                (null === (i3 = this.pn.geoFencing) || void 0 === i3 ? void 0 : i3.logreport) ? this.an.info(Wt + " geo exist") : (this.an.setLogServer([t4.logURL], []), this.pn.customSetLogURL = true, 0 === this.pn.ENV && (this.pn.logDomain = null === (n3 = this.an.url) || void 0 === n3 ? void 0 : n3.split("/")[2], this.cr.setConfig({ serverUrl: "wss://" + this.pn.logDomain + "/zglog/tlog" }))), r3.setAttributes({ log_url: tn.log_url(t4.logURL) }), r3.end();
              else if (t4.logURL)
                return this.an.error(Wt + "log url must be a wss or https url"), this.cr.setError(r3, tn.error.kInvalidParamError), false;
              (0, B.Cs)(t4.logSize) || (0, B.Cs)(t4.logCount);
              var s3 = {};
              return (0, B.Cs)(t4.logSize) && (s3.size = t4.logSize, r3.setAttributes({ log_size: t4.logSize })), (0, B.Cs)(t4.logCount) && (s3.count = t4.logCount, r3.setAttributes({ log_count: t4.logCount })), Object.keys(s3).length > 0 && this.an.setStorageConfig(s3), this.an.info(Wt + " call success"), r3.end(), true;
            }, t3.prototype.setDebugVerbose = function(t4) {
              var i3 = this.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: Wi }, Wi);
              (0, B.dd)(t4) && (this.pn.debug = t4, this.pn.debugCustom = true, i3.setAttributes({ debug: $i(t4 ? "true" : "false") })), i3.end(), this.an.info("zm.sdv call success");
            }, t3.prototype.fu = function(t4) {
              (0, B.QP)(t4) && t4.indexOf("wss") > -1 ? this.pn.debug = Rt(t4) : Array.isArray(t4) && t4.length > 0 && t4.every(function(t5) {
                return (0, B.QP)(t5) && t5.indexOf("wss") > -1;
              }) ? this.pn.debug = Rt(t4[0]) : this.an.info(Zt + " server wrong"), this.pn.testEnvironment = this.pn.debug;
            }, t3.prototype.renewToken = function(t4, i3) {
              var n3, r3, s3 = this, o2 = this.cr.createSpan(e2.t0.H, { key: en.event, par: i3 }, { key: "" }, un.event);
              if (!((0, B.TE)(i3) || (0, B.QP)(i3) && "" != i3))
                return this.an.error(li + " roomID must be string and no empty"), false;
              var u2 = this.getRoomModules(i3) || this.pn.roomModulesList[0];
              if (!u2)
                return this.an.error(li + " calling must after loginRoom"), this.cr.setError(o2, un.error.NOT_LOGIN), false;
              if ((0, B.QP)(t4) && u2.roomTryHandler) {
                if (t4 === u2.roomTryHandler.token)
                  this.an.info(li + " token has not changed"), o2.setAttributes({ error: un.error.INPUT_PARAM.code, message: "token has not changed" }), o2.end();
                else if (o2.setAttributes({ token: un.token(t4) }), this.pn.configRoomAuth) {
                  null === (n3 = this.liveRoomHandler) || void 0 === n3 || n3.renewToken({ token: t4 }, function(i4) {
                    var n4, e3, r4, a2, c2;
                    null === (n4 = u2.roomTryHandler) || void 0 === n4 || n4.renewLocalToken(t4, null === (e3 = null == i4 ? void 0 : i4.body) || void 0 === e3 ? void 0 : e3.token_remain_time), s3.cloudSetting.setToken(t4);
                    var h2 = (null === (r4 = null == i4 ? void 0 : i4.body) || void 0 === r4 ? void 0 : r4.stop_stream_id_list) || (null === (c2 = null === (a2 = null == i4 ? void 0 : i4.body) || void 0 === a2 ? void 0 : a2.stop_stream) || void 0 === c2 ? void 0 : c2.stream_id_list) || [];
                    h2.length > 0 && s3.pn.actionListener("_stopStream", h2, { code: q.NO_PUBLISH_AUTH.code, message: q.NO_PUBLISH_AUTH.msg }), s3.cr.setReporterInfo(s3.pn.idName || "", t4), s3.pn.configCheckToken = true, o2.end(), s3.an.info(li + " " + JSON.stringify(i4));
                  }, function(i4) {
                    var n4, e3, r4 = null === (n4 = null == i4 ? void 0 : i4.body) || void 0 === n4 ? void 0 : n4.err_code;
                    s3.cr.setError(o2, i4), !r4 || 1000002014 !== r4 && 2014 !== r4 ? s3.an.error(li + " " + JSON.stringify(i4)) : (s3.pn.configCheckToken = false, null === (e3 = u2.roomTryHandler) || void 0 === e3 || e3.renewLocalToken(t4), s3.cloudSetting.setToken(t4), s3.an.warn(li + " " + JSON.stringify(i4)));
                  }, u2);
                } else
                  null === (r3 = u2.roomTryHandler) || void 0 === r3 || r3.renewLocalToken(t4), this.cloudSetting.setToken(t4), this.cr.setReporterInfo(this.pn.idName || "", t4), o2.end();
                return true;
              }
              return (0, B.QP)(t4) && !u2.roomTryHandler ? (this.an.error(li + " calling must after loginRoom"), this.cr.setError(o2, un.error.NOT_LOGIN), false) : (this.an.error(li + " token must be string and not empty"), this.cr.setError(o2, un.error.INPUT_PARAM), false);
            }, t3.prototype.setCloudSettingURLs = function(t4) {
              var i3 = this;
              this.an.info(ci + " call "), Array.isArray(t4) && t4.length > 0 && t4.every(function(t5) {
                return (0, B.QP)(t5) && t5.indexOf("http") > -1;
              }) && this.cloudSetting.init({ productNum: Pt, appID: this.pn.appid, env: this.pn.ENV, pollingNotify: function(t5, n3) {
                i3.an.info(ci + " setting file changed " + t5 + " " + JSON.stringify(n3)), i3.pn.actionListener("_cloudSettingNotify", t5, n3);
              }, reportNotify: this.lu.bind(this), online: !this.pn.testEnvironment, connection: this.netAgent });
            }, t3.prototype.loginRoom = function(t4, i3, r3, s3) {
              var o2 = this;
              return this.an.info($t + " call by user " + (null == r3 ? void 0 : r3.userID) + " " + t4 + " " + this.version + " build: " + e2.bD), new Promise(function(e3, u2) {
                return vs(o2, void 0, void 0, function() {
                  var o3, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2 = this;
                  return ms(this, function(S2) {
                    switch (S2.label) {
                      case 0:
                        return 1 !== this.pn.ENV ? [3, 2] : [4, new Promise(function(t5) {
                        })];
                      case 1:
                        S2.sent(), S2.label = 2;
                      case 2:
                        if (o3 = function(t5, i4) {
                          void 0 === i4 && (i4 = "");
                          var n3 = w2.cr.getAPIErrorReport(en.event);
                          w2.cr.takeAPIErrorReport(en.event, t5, n3, (null == r3 ? void 0 : r3.userID) ? { id_name: r3.userID + "" } : {}), u2(t5.code && t5.msg && "" !== i4 ? { code: t5.code, msg: t5.msg + i4 } : t5);
                        }, !(s3 = s3 || {}).maxMemberCount && (s3.maxMemberCount = 0), h2 = (a2 = this.pn).roomModulesList, f2 = en.error, !(c2 = a2.isMultiRoom) && h2.length > 0)
                          return o3(f2.ROOM_COUNT_EXCEED), [2];
                        for (l2 = 0; l2 < h2.length; l2++) {
                          if ((d2 = h2[l2]).roomID === t4)
                            return v2 = this.stateCenter.isFlutter ? f2.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID : f2.REPEATEDLY_LOGIN, this.stateCenter.isFlutter && this.pn.actionListener("roomStateChanged", t4, P.LoginFailed, v2.code, v2.msg), o3(this.stateCenter.isFlutter ? f2.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID : f2.REPEATEDLY_LOGIN), [2];
                          if (m2 = d2.roomTryHandler, c2 && m2 && m2.user.userID !== r3.userID)
                            return o3(f2.DIFFERENT_USER_ID), [2];
                        }
                        if (p2 = new Ce(t4, this.pn, this.an, this._dataReport, this, this.liveRoomHandler), (g2 = p2.roomTryHandler) || (g2 = new ue(this.an, this.pn, p2), p2.roomTryHandler = g2), g2.init(this.pn.roomRetryTime), g2.initRoom(p2.roomHandler, t4, i3, r3, s3), g2.loginCompleted = false, p2.roomHandler._roomStateHandle(ke, P.Logining, { code: 0, msg: "" }), (b2 = he({ roomID: { order: 0, value: t4, rules: [{ name: Dt.NOT_EMPTY, error: f2.ROOM_ID_NULL }, { name: Dt.TYPE_STRING, error: f2.INPUT_PARAM, extMsg: "roomID must be string" }, { name: Dt.MAX_LENGTH_128, error: f2.ROOM_ID_TOO_LONG }, { name: Dt.ILLEGAL_CHARACTERS, error: f2.ROOM_ID_INVALID_CHARACTER }] }, token: { order: 1, value: i3, rules: [{ name: Dt.NOT_EMPTY, error: f2.INPUT_PARAM }, { name: Dt.TYPE_STRING, error: f2.INPUT_PARAM }] }, user: { order: 2, value: r3, rules: [{ name: Dt.NOT_EMPTY, error: f2.INPUT_PARAM, extMsg: " param user error." }, { name: Dt.TYPE_OBJECT, error: f2.INPUT_PARAM, extMsg: " param user error." }] }, "user.userID": { order: 3, value: r3.userID, rules: [{ name: Dt.NOT_EMPTY, error: f2.USER_ID_NULL, extMsg: " param user error." }, { name: Dt.TYPE_STRING, error: f2.INPUT_PARAM, extMsg: " param userID error." }, { name: Dt.MAX_LENGTH_64, error: f2.USER_ID_TOO_LONG }, { name: Dt.ILLEGAL_CHARACTERS, error: f2.USER_ID_INVALID_CHARACTER }] }, "user.userName": { order: 4, value: r3.userName, rules: [{ name: Dt.TYPE_STRING, error: f2.INPUT_PARAM, extMsg: " userName must be string." }, { name: Dt.MAX_LENGTH_256, error: f2.USER_NAME_TOO_LONG }] }, config: { order: 5, value: s3, rules: [] }, "config.maxMemberCount": { order: 6, value: s3.maxMemberCount, rules: [{ name: Dt.TYPE_INTEGER, error: f2.INPUT_PARAM, extMsg: " maxMemberCount must be integer number." }] } }, { action: $t, logger: this.an })) !== ae)
                          return p2.roomHandler._roomStateHandle(Se, P.LoginFailed, b2.error, b2.extMsg), o3(b2.error, b2.extMsg), [2];
                        if (_2 = this.Du(e3, u2, t4, i3, s3), y2 = _2.loginSpan, g2.setLoginRoomCallback(_2.interResolve, _2.interReject), this.an.setSessionInfo(this.pn.appid, "", "", r3.userID, "", this.version), this.pn.roomModulesList.length > 0 && 1 == this.pn.isMultiRoom ? p2.isMulti = true : ps([], this.pn.roomModulesList, true).forEach(function(t5) {
                          return t5.roomHandler.logout();
                        }), s3 && (p2.config = s3), this.pn.roomModulesList.push(p2), this.netAgent && (this.pn.idName = r3.userID, this.netAgent.setUserInfo(r3.userID), this.pn.actionListener("_roomLogin", t4, i3), this.isUaConnect && this.fetchAppConfig(i3)), this.cloudSetting.setUserID(r3.userID), this.cloudSetting.setToken(i3), this.cloudSetting.activePolling(), y2.setAttributes({ id_name: r3.userID }), this.cr.setCommonAttributes({ id_name: r3.userID }), this.cr.setReporterInfo(r3.userID, i3), this.an.setTokenInfo(i3, r3.userID), this.cr.setSpanInMap(y2, { key: en.event, par: t4 }), this.pn.setMultiRoom = true, !this.isUaConnect) {
                          this.an.info($t + " us is not connected"), p2.roomHandler.setRunState(n2.UV.trylogin), g2.startMaxTime();
                          try {
                            this.netAgent.connectUa();
                          } catch (t5) {
                            ((null == t5 ? void 0 : t5.message) + "").includes("execute") || this.an.warn($t + " connect ua fail " + JSON.stringify(null == t5 ? void 0 : t5.message));
                          }
                          return [2];
                        }
                        return this.pn.networkState = n2.D2.online, g2.retryLoginRoom(true), [2];
                    }
                  });
                });
              });
            }, t3.prototype.switchRoom = function(t4, i3, n3) {
              return void 0 === t4 && (t4 = ""), void 0 === i3 && (i3 = ""), vs(this, void 0, void 0, function() {
                var e3, r3, s3, o2 = this;
                return ms(this, function(u2) {
                  return this.an.info("".concat(ii, " call by user fromRoomID:").concat(t4, " toRoomID:").concat(i3)), (r3 = he({ fromRoomID: { order: 0, value: t4, rules: [{ name: Dt.NOT_EMPTY, error: (e3 = en.error).ROOM_ID_NULL }, { name: Dt.TYPE_STRING, error: e3.INPUT_PARAM, extMsg: "roomID must be string" }, { name: Dt.MAX_LENGTH_128, error: e3.ROOM_ID_TOO_LONG }, { name: Dt.ILLEGAL_CHARACTERS, error: e3.ROOM_ID_INVALID_CHARACTER }] }, toRoomID: { order: 1, value: i3, rules: [{ name: Dt.NOT_EMPTY, error: e3.ROOM_ID_NULL }, { name: Dt.TYPE_STRING, error: e3.INPUT_PARAM, extMsg: "roomID must be string" }, { name: Dt.MAX_LENGTH_128, error: e3.ROOM_ID_TOO_LONG }, { name: Dt.ILLEGAL_CHARACTERS, error: e3.ROOM_ID_INVALID_CHARACTER }] }, config: { order: 2, value: n3, rules: [{ name: Dt.NOT_EMPTY, error: e3.INPUT_PARAM, extMsg: "param config error." }, { name: Dt.TYPE_OBJECT, error: e3.INPUT_PARAM, extMsg: "param config must be object." }] }, "config.token": { order: 3, value: null == n3 ? void 0 : n3.token, rules: [{ name: Dt.NOT_EMPTY, error: e3.INPUT_PARAM }, { name: Dt.TYPE_STRING, error: e3.INPUT_PARAM }] }, "config.maxMemberCount": { order: 4, value: null == n3 ? void 0 : n3.maxMemberCount, rules: [{ name: Dt.TYPE_INTEGER, error: e3.INPUT_PARAM, extMsg: "maxMemberCount must be integer number." }] } }, { action: ii, logger: this.an })) !== ae ? (this.an.error(ii + " params error:" + r3.error.code), [2, Promise.reject({ code: r3.error.code, msg: r3.extMsg ? r3.error.msg + " " + r3.extMsg : r3.error.msg })]) : this.getRoomModules(t4) ? (s3 = this.getRoomModules(i3), t4 === i3 || s3 ? (this.an.error("".concat(ii, " params error: ").concat(q.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID.code)), [2, Promise.reject(q.LOGIN_BEFORE_LOGOUT_BY_SAME_ROOMID)]) : (this.stateCenter.actionListener("_beforeSwitchRoom", t4), this.logoutRoom(t4, true), [2, new Promise(function(t5, e4) {
                    o2.loginRoom(i3, (null == n3 ? void 0 : n3.token) || "", { userID: o2.getUserID(), userName: o2.getUserName() }, { userUpdate: null == n3 ? void 0 : n3.isUserStatusNotify, maxMemberCount: null == n3 ? void 0 : n3.maxMemberCount }).then(function(n4) {
                      o2.stateCenter.actionListener("_afterSwitchRoom", i3, true), t5(n4);
                    }).catch(function(t6) {
                      o2.stateCenter.actionListener("_afterSwitchRoom", i3, false), e4(t6);
                    });
                  })])) : (this.an.error("".concat(ii, " params error: ").concat(q.ROOM_ROOMID_INCORRECT.code)), [2, Promise.reject(q.ROOM_ROOMID_INCORRECT)]);
                });
              });
            }, t3.prototype.handleLogUpload = function() {
              var t4, i3;
              if (this.an.info(ri + " call"), this.pn.customSetLogURL)
                this.an.info(ri + " set custom log");
              else if (this.an.url && this.an.logConnected)
                this.an.info(ri + " log is connected");
              else {
                var n3 = [], e3 = [], r3 = this.pn.advanceConfig.customDomain;
                if (r3 && r3.logreport)
                  n3.push(u2 = r3.logreport), this.pn.logDomain = u2;
                else if (this.pn.geoFencing) {
                  var s3 = this.pn.geoFencing, o2 = s3.wssV6Logreport;
                  (u2 = s3.logreport) && n3.push(u2), o2 && e3.push(o2);
                } else if (this.pn.testEnvironment)
                  this.pn.logDomain = "weblogger-hk-test.zegocloud.com", n3.push(this.pn.logDomain);
                else if (0 === this.stateCenter.ENV) {
                  if (this.pn.svrDomains) {
                    var u2, a2 = this.pn.svrDomains;
                    o2 = a2.wssV6Logreport;
                    (u2 = a2.logreport) && n3.push(u2), o2 && e3.push(o2);
                  }
                } else if (1 === this.stateCenter.ENV) {
                  this.pn.logDomain = Ht.logreportDomain, n3.push(this.pn.logDomain);
                  var c2 = null === (i3 = null === (t4 = this.pn.appConfig) || void 0 === t4 ? void 0 : t4.app_config) || void 0 === i3 ? void 0 : i3.domain;
                  if (c2) {
                    var h2 = "weblogger".concat(this.pn.appid, "-api.").concat(c2);
                    n3.push(h2);
                  }
                }
                if (0 === this.pn.ENV) {
                  var f2 = n3.map(function(t5) {
                    return "wss://".concat(t5, "/").concat(Ht.rtcLogPath);
                  }), l2 = e3.map(function(t5) {
                    return "wss://".concat(t5, "/").concat(Ht.rtcLogPath);
                  });
                  (f2.length > 0 || l2.length > 0) && this.an.setLogServer(f2, l2);
                } else {
                  f2 = n3.map(function(t5) {
                    return "https://".concat(t5, "/httplog");
                  });
                  this.an.setLogServer(f2, []);
                }
              }
            }, t3.prototype.fetchAppConfigByTargetToken = function(t4, i3) {
              return vs(this, void 0, void 0, function() {
                var e3, r3, s3, o2, u2, a2, c2 = this;
                return ms(this, function(h2) {
                  switch (h2.label) {
                    case 0:
                      if (this.an.info(ei + " call"), !i3)
                        return this.an.warn(ei + " user not exist"), [2];
                      if (e3 = this.getUserID(), r3 = "", s3 = null, t4)
                        r3 = t4;
                      else {
                        if (!(this.pn.roomModulesList.length > 0))
                          return this.an.warn(ei + " token not exist"), [2];
                        r3 = this.getToken();
                      }
                      !this.an.roomid && this.an.setSessionInfo(this.pn.appid, "player-no-room", "", i3, "", this.pn.sdKVersion), h2.label = 1;
                    case 1:
                      return h2.trys.push([1, 5, 6, 7]), this.netAgent.isConnect() ? [3, 3] : [4, new G.l3(function(t5) {
                        var i4 = 0, n3 = function() {
                          i4 && clearTimeout(i4), c2.netAgent.off("connected", n3), t5(true);
                        };
                        i4 = setTimeout(function() {
                          c2.netAgent.off("connected", n3), t5(false);
                        }, 5e3), c2.netAgent.on("connected", n3);
                      })];
                    case 2:
                      if (!h2.sent())
                        return this.an.error(ei + " ua not connected"), [2];
                      this.an.info(ei + " ua connected"), h2.label = 3;
                    case 3:
                      return this.netAgent.setUserInfo(i3), [4, this.netAgent.getAppConfigByAgent("init", r3, 5e3, this.pn.appConfigEtag, { isSpecial: "SPECIAL" === n2.b$ })];
                    case 4:
                      return o2 = h2.sent(), u2 = o2.data, 0 === o2.code && (this.handleLogUpload(), s3 = u2), [3, 7];
                    case 5:
                      return a2 = h2.sent(), this.an.error(ei + " token not validated" + a2), [3, 7];
                    case 6:
                      return e3 && this.netAgent.setUserInfo(e3), this.an.info(ei + " call success"), [2, s3];
                    case 7:
                      return [2];
                  }
                });
              });
            }, t3.prototype.fetchAppConfig = function(t4) {
              return vs(this, void 0, void 0, function() {
                var i3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2;
                return ms(this, function(y2) {
                  switch (y2.label) {
                    case 0:
                      if (this.pn.appConfigFetched)
                        return this.an.warn(ni + " config fetched"), [2];
                      if (!this.getUserID())
                        return this.an.info(ni + " user not exist"), [2];
                      if (i3 = "", t4)
                        i3 = t4;
                      else {
                        if (!(this.pn.roomModulesList.length > 0))
                          return this.an.warn(ni + " token not exist"), [2];
                        i3 = this.getToken();
                      }
                      r3 = this.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: "" }, Zn), this.an.info($t + " initConfig etag: " + this.pn.appConfigEtag), -1 !== this.pn.appConfigEtag && (!(s3 = this.pn.appConfig.SDKVersion) || this.pn.sdkVerNum > s3) && (this.pn.appConfigEtag = -1, this.an.warn($t + " reset etag. " + s3)), o2 = !!this.pn.appConfig, y2.label = 1;
                    case 1:
                      return y2.trys.push([1, 3, , 4]), [4, this.netAgent.getAppConfigByAgent("init", i3, 5e3, this.pn.appConfigEtag, { isSpecial: "SPECIAL" === n2.b$ })];
                    case 2:
                      if (u2 = y2.sent(), a2 = u2.code, c2 = u2.data, h2 = u2.etag, f2 = u2.retryCount, r3.setAttributes({ trigger_reason: Xn(this.pn.appConfig ? "refresh" : "normal"), try_count: Wn(f2 || 0), request_etag: this.pn.appConfigEtag, response_etag: h2, init_conf: (0, G.iq)(c2) }), r3.end(), this.pn.appConfigFetched = true, this.an.info($t + " initConfig code:" + a2 + " data: " + JSON.stringify(c2) + " etag: " + h2), this.pn.appConfigEtag !== h2) {
                        if (0 == Object.keys(c2).length)
                          return this.an.info($t + " initConfig data null"), [2];
                        v2 = c2.log_config, this.pn.appConfig = { app_config: c2.app_config, media_config: { publish_config: (l2 = c2.media_config).publish_config, play_config: l2.play_config }, speedlog_config: ds(ds({}, d2 = c2.speedlog_config), { charge_info_report_no_playing: d2.charge_info_report_no_playing || 0 }), log_config: v2, SDKVersion: this.pn.sdkVerNum }, this.pn.appConfigEtag = h2, m2 = JSON.stringify(this.pn.appConfig), p2 = St(m2, xt), kt(Ut + "_" + this.getAppID() + "_" + (this.pn.mode || Ht.modeNo), p2), g2 = St(this.pn.appConfigEtag + "", xt), kt(Gt + "_" + this.getAppID() + "_" + (this.pn.mode || Ht.modeNo), g2);
                      }
                      return !o2 && this.pn.appConfig && this.pn.actionListener("_appConfigRsp"), !this.pn.netAppConfig && this.pn.appConfig && (this.pn.netAppConfig = Object.assign(this.pn.appConfig), this.pn.actionListener("_netAppConfigRsp", this.pn.netAppConfig)), [3, 4];
                    case 3:
                      return b2 = y2.sent(), this.an.error($t + " fail " + JSON.stringify(b2)), r3.setAttributes({ error: null == b2 ? void 0 : b2.code }), r3.end(), [20012, 20008, 20019].includes(null == b2 ? void 0 : b2.code) && (_2 = 20019 === (null == b2 ? void 0 : b2.code) ? JSON.parse(JSON.stringify(q.SDK_NOT_SPECIAL)) : JSON.parse(JSON.stringify(q.APPID_INVALID)), this.pn.roomModulesList.forEach(function(t5) {
                        t5.roomTryHandler && t5.roomTryHandler.loginFail(_2);
                      })), [3, 4];
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.au = function() {
              var t4, i3 = this;
              null === (t4 = this.cloudSetting) || void 0 === t4 || t4.fetchMultiSetting([hs, fs, ls]).then(function(t5) {
                var n3;
                if (i3.an.info($t + " settingConfig " + JSON.stringify(t5)), t5) {
                  var e3 = $t + " fetche setting.";
                  i3.mu(null === (n3 = null == t5 ? void 0 : t5[hs]) || void 0 === n3 ? void 0 : n3.setting), i3.pn.actionListener("_settingCanFetch", null == t5 ? void 0 : t5[ls]);
                  var r3 = i3.du(true, true);
                  i3.an.info(e3 += r3), i3.pu(), i3.setAPIReports();
                  var s3 = i3.gu("report_script");
                  if (s3) {
                    var o2 = s3.url, u2 = s3.key, a2 = s3.hash;
                    i3.an.info("".concat($t, " report script ").concat(o2, " ").concat(u2, " ").concat(a2)), o2 && i3.cr.loadScript(true, o2, u2, a2);
                  }
                }
              }).catch(function(t5) {
                i3.an.warn($t + " settingConfig " + JSON.stringify(t5));
              }), this.pn.onListener("_cloudSettingNotify", function(t5, n3) {
                var r3 = i3.cloudSetting.getEnvVariables() || {}, s3 = i3.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: "" }, Tn);
                if (s3.setAttributes({ request_kv: Cn(r3), files: An([{ name: t5, content: n3.setting, versions: n3.versions, code: null == n3 ? void 0 : n3.code, message: null == n3 ? void 0 : n3.message }]) }), s3.end(), t5 === hs) {
                  i3.mu(null == n3 ? void 0 : n3.setting);
                  var o2 = i3.du(true, true);
                  o2 && i3.an.info($t + " setting changed " + o2);
                }
              });
            }, t3.prototype.lu = function(t4, i3, n3) {
              0 !== (null == n3 ? void 0 : n3.code) || false === (null == n3 ? void 0 : n3.polling) ? "request_start" === i3 ? this.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: zn, par: t4 + "" }, zn, true) : "request_end" === i3 && this.cr.spanEnd({ key: zn, par: t4 + "" }, { request_detail: Dn(null == n3 ? void 0 : n3.reportData), files: Nn(null == n3 ? void 0 : n3.files), code: null == n3 ? void 0 : n3.code, request_kv: null == n3 ? void 0 : n3.requestKV }) : this.an.info("zm.crn not report");
            }, t3.prototype.Du = function(t4, i3, n3, r3, s3) {
              var o2 = this, u2 = en, a2 = this.cr.createSpan(e2.t0.I, { key: Zi.event }, { key: "" }, u2.event);
              a2.setAttributes({ svr_env: u2.svr_env(this.pn.testEnvironment ? "test" : "online"), token: u2.token(r3) }), s3 && ((0, B.dd)(s3.userUpdate) && a2.setAttribute("user_state_update", u2.user_state_update(s3.userUpdate ? 1 : 0)), (0, B.Cs)(s3.maxMemberCount) && a2.setAttributes({ max_member_cnt: u2.max_member_cnt(s3.maxMemberCount) }));
              return { interResolve: function(i4) {
                var e3, r4 = o2.getRoomSessionID(n3), s4 = o2.getRoomModules(n3), c2 = o2.getSessionId(n3);
                a2.setAttributes({ room_id: u2.room_id(n3), room_sid_string: u2.room_sid_string(r4), liveroom_sid_string: u2.liveroom_sid_string(c2), try_cnt: u2.try_cnt(null === (e3 = null == s4 ? void 0 : s4.roomTryHandler) || void 0 === e3 ? void 0 : e3.retryActiveCount), room_mode: u2.room_mode(o2.pn.isMultiRoom ? 1 : 0), role: u2.role(o2.pn.role), audience_create_room: u2.audience_create_room(o2.pn.roomCreateFlag ? 1 : 0), max_member_cnt: u2.max_member_cnt((null == s4 ? void 0 : s4.maxMemberCount) || 0), user_name: o2.pn.nickName }), a2.end(), t4(i4);
              }, interReject: function(t5, e3) {
                var r4, s4, c2;
                void 0 === e3 && (e3 = ""), a2.setAttributes({ room_id: u2.room_id(n3) }), t5.code < 2e9 && t5.code > 1e9 || t5.code < 1e6 ? (s4 = it(t5.code, t5.msg), c2 = nt(t5.code)) : s4 = { code: t5.code, message: t5.msg }, s4 && o2.cr.setError(a2, { code: s4.code, msg: s4.message + e3 }), c2 && q[c2] && (t5.code = q[c2].code, (null === (r4 = t5.msg) || void 0 === r4 ? void 0 : r4.includes("unknown")) && (t5.msg = q[c2].msg)), i3(t5.code && t5.msg && "" !== e3 ? { code: t5.code, msg: t5.msg + e3 } : t5);
              }, loginSpan: a2 };
            }, t3.prototype.logoutRoom = function(t4, i3, n3) {
              var e3 = this;
              this.an.info(ti + " call by user " + t4);
              var r3 = [];
              if (this.pn.roomModulesList.length) {
                var s3 = "normal logout";
                if (i3 ? s3 = "switch room" : n3 && (s3 = "page unload"), void 0 === t4)
                  ps([], this.pn.roomModulesList, true).forEach(function(t5) {
                    e3.Nu(t5, void 0, void 0, s3), r3.push(t5.roomID), t5.roomHandler.logout(true);
                  }), this.cloudSetting.uninit();
                else {
                  if (!(0, B.QP)(t4) || "" == t4)
                    throw this.an.error(ti + " roomID must be string and not empty"), this.Nu(void 0, o2 = cn.error.ROOM_ROOMID_INCORRECT, void 0, s3), this.pn.isFlutter && this.pn.actionListener("roomStateChanged", t4, P.LogoutFailed, o2.code, o2.msg), o2;
                  var o2, u2 = this.getRoomModules(t4);
                  if (!u2)
                    throw this.an.error(ti + " room not exist " + t4), this.Nu(void 0, o2 = cn.error.ROOM_ROOMID_INCORRECT, t4, s3), this.pn.isFlutter && this.pn.actionListener("roomStateChanged", t4, P.LogoutFailed, o2.code, o2.msg), o2;
                  this.Nu(u2, void 0, void 0, s3), r3.push(t4), u2.roomHandler.logout(false, i3), 0 === this.pn.roomModulesList.length && this.cloudSetting.uninit();
                }
                this.cr.deleteCommonAttributes(["id_name"]), this.cr.clearRoomSpans(r3);
              } else {
                this.an.warn(ti + " no room");
                var a2 = { code: 0, msg: "no room login" };
                this.pn.actionListener("roomStateChanged", t4, P.Logout, a2.code, a2.msg);
              }
            }, t3.prototype.uploadLog = function(t4) {
              var i3 = this;
              return void 0 === t4 && (t4 = false), new Promise(function(n3, e3) {
                i3.an.info("zm.zip.udlg call " + t4), i3.an.uploadStorageLog(t4).then(function() {
                  i3.an.info("zm.zip.udlg call success"), n3({ errorCode: 0, extendedData: "upload logs success!" });
                }).catch(function(t5) {
                  i3.an.error("zm.zip.udlg upload zip log failed, result: " + ((null == t5 ? void 0 : t5.message) || "unknown")), n3({ errorCode: q.UPLOAD_LOG_ERROR.code, extendedData: q.UPLOAD_LOG_ERROR.msg + ", result: " + ((null == t5 ? void 0 : t5.message) || "unknown") });
                });
              });
            }, t3.prototype.sendCustomCommand = function(t4, i3, e3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype._sendCustomCommand = function(t4, i3, e3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype.sendRoomChannelMessage = function(t4, i3, e3, r3, s3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype.sendTransparentMessage = function(t4, i3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype.sendBroadcastMessage = function(t4, i3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype._sendBroadcastMessage = function(t4, i3, e3, r3) {
              return void 0 === e3 && (e3 = 1), void 0 === r3 && (r3 = 1), new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype.setRoomExtraInfo = function(t4, i3, e3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype._setRoomExtraInfo = function(t4, i3, e3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype.sendBarrageMessage = function(t4, i3) {
              return new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype._sendBarrageMessage = function(t4, i3, e3, r3) {
              return void 0 === e3 && (e3 = 1), void 0 === r3 && (r3 = 1), new Promise(function(t5, i4) {
                console.error(n2.AF.MESSAGE), i4();
              });
            }, t3.prototype.sendRelayMessage = function(t4, i3, n3, e3, r3) {
              console.error("not support");
            }, t3.prototype.requestJoinLive = function(t4, i3, e3, r3, s3) {
              return console.error(n2.AF.MESSAGE), false;
            }, t3.prototype.inviteJoinLive = function(t4, i3, e3, r3, s3) {
              return console.error(n2.AF.MESSAGE), false;
            }, t3.prototype.endJoinLive = function(t4, i3, e3, r3) {
              return console.error(n2.AF.MESSAGE), false;
            }, t3.prototype.respondJoinLive = function(t4, i3, e3, r3, s3) {
              return console.error(n2.AF.MESSAGE), false;
            }, t3.prototype.getVersion = function() {
              return this.version;
            }, t3.prototype.setSdkBizVersion = function(t4) {
              (0, B.QP)(t4) && "" !== t4 && (this.pn.bizVersion = t4);
            }, t3.prototype.on = function(t4, i3) {
              return this.pn.listenerList[t4] ? (0, B.JO)(i3) ? (-1 == this.pn.listenerList[t4].indexOf(i3) && this.pn.listenerList[t4].push(i3), true) : (this.an.error(hi + " listener callBack must be funciton"), false) : (this.an.error(hi + " event " + t4 + " no found"), false);
            }, t3.prototype.off = function(t4, i3) {
              if (!this.pn.listenerList[t4])
                return this.an.error(fi + " listener no found"), false;
              var n3 = this.pn.listenerList[t4];
              if (i3) {
                var e3 = n3.indexOf(i3);
                e3 >= 0 && n3.splice(e3, 1);
              } else
                this.pn.listenerList[t4] = [];
              return true;
            }, t3.prototype._on = function(t4, i3) {
              return this.pn.listenerList[t4] ? (0, B.JO)(i3) ? (-1 == this.pn.listenerList[t4].indexOf(i3) && this.pn.listenerList[t4].push(i3), true) : (this.an.error(hi + " listener callBack must be funciton"), false) : (this.an.error(hi + " event " + t4 + " no found"), false);
            }, t3.prototype._off = function(t4, i3) {
              if (!this.pn.listenerList[t4])
                return this.an.error(fi + " listener no found"), false;
              var n3 = this.pn.listenerList[t4];
              return i3 ? n3.splice(n3.indexOf(i3), 1) : this.pn.listenerList[t4] = [], true;
            }, t3.prototype.isTestEnvironment = function() {
              return this.pn.testEnvironment;
            }, t3.prototype.isLogin = function(t4) {
              var i3 = this.getRoomModules(t4) || this.pn.roomModulesList[0];
              return !!i3 && i3.isLogin();
            }, t3.prototype.getMultiRoom = function() {
              return this.pn.isMultiRoom;
            }, t3.prototype.getAppID = function() {
              return this.pn.appid;
            }, t3.prototype.getUserID = function() {
              return this.pn.idName;
            }, t3.prototype.getUserName = function() {
              return this.pn.nickName;
            }, t3.prototype.getToken = function(t4) {
              return (this.getRoomModules(t4) || this.pn.roomModulesList[0]).token;
            }, t3.prototype.setRoomCreateFlag = function(t4) {
              this.pn.roomCreateFlag = t4;
            }, t3.prototype.setRole = function(t4) {
              this.pn.role = t4;
            }, t3.prototype.getSessionId = function(t4) {
              var i3 = this.getRoomModules(t4) || this.pn.roomModulesList[0];
              return i3 ? i3.userSidString : "0";
            }, t3.prototype.getRoomSessionID = function(t4) {
              var i3 = this.getRoomModules(t4) || this.pn.roomModulesList[0];
              return i3 ? i3.roomSidString : "0";
            }, t3.prototype.getAppConfig = function() {
              return this.pn.appConfig;
            }, t3.prototype.setTestPackageSize = function(t4) {
              this.stateCenter.configOK && (this.pn.testNetPackageSize = t4);
            }, t3.prototype.setAccess = function(t4) {
            }, t3.prototype.enableMultiRoom = function(t4) {
              var i3 = this.cr.createSpan(e2.t0.H, { key: Zi.event }, { key: "" }, On.event);
              return (0, B.dd)(t4) ? (i3.setAttribute("is_multi", On.is_multi(t4)), this.pn.roomModulesList.length > 0 || this.pn.setMultiRoom ? (this.an.error(di + " multi room can only be set once before first login"), this.cr.setError(i3, On.error.kAlreadyLoginError), false) : (i3.end(), this.pn.isMultiRoom = t4, this.pn.setMultiRoom = true, true)) : (this.an.error(di + " param must be boolean"), this.cr.setError(i3, On.error.kInvalidParamError), false);
            }, t3.prototype.getRoomModules = function(t4) {
              return this.pn.roomModulesList.find(function(i3) {
                return i3.roomID == t4;
              });
            }, t3.prototype._onAppConfigUpdate = function(t4) {
            }, t3.prototype._onBeforePageUnload = function() {
            }, t3.use = function(i3) {
              switch (i3.type) {
                case "Message":
                case "Live":
                  i3.install(t3, Ce, as);
              }
            }, t3.setGeoFence = function(i3, n3) {
              if (![0, 1, 2].includes(i3))
                throw new Error("GeoFencing set Error");
              if (!n3.every(function(t4) {
                return Kt.find(function(i4) {
                  return i4 === t4;
                });
              }))
                throw new Error("GeoFencing set Error");
              t3.geoFenceType = i3, t3.geoFenceAreaList = n3;
            }, t3.setEngineOptions = function(i3) {
              if (i3.geoFenceType) {
                if (![0, 1, 2].includes(i3.geoFenceType))
                  throw new Error("GeoFencing set Error");
                t3.geoFenceType = i3.geoFenceType;
              }
              if (i3.geoFenceAreaList) {
                if (!i3.geoFenceAreaList.every(function(t4) {
                  return Yt.find(function(i4) {
                    return i4.id === t4;
                  });
                }))
                  throw new Error("GeoFencing set Error");
                t3.geoFenceAreaList = i3.geoFenceAreaList;
              }
              if (i3.dataReportCustomerContext && (0, G.zQ)(i3.dataReportCustomerContext, true) && Ge.setReportCustomerContext(i3.dataReportCustomerContext), i3.customDomain && i3.customDomain && "object" == typeof i3.customDomain) {
                if (i3.customDomain.accesshub && "string" != typeof i3.customDomain.accesshub)
                  throw new Error("config of customDomain.accesshub should be a string.");
                if (i3.customDomain.logreport && "string" != typeof i3.customDomain.logreport)
                  throw new Error("config of customDomain.logreport should be a string.");
                if (i3.customDomain.detaillog && "string" != typeof i3.customDomain.detaillog)
                  throw new Error("config of customDomain.detaillog should be a string.");
                t3.customDomain = i3.customDomain;
              }
              t3.engineOptions = ds(ds({}, t3.engineOptions || {}), i3);
            }, t3.presetLogConfig = function(t4) {
              var i3 = {};
              if (t4.logLevel && ["debug", "info", "warn", "error", "report", "disable"].includes(t4.logLevel) && (i3.logLevel = t4.logLevel), (0, B.QP)(t4.logURL) && (t4.logURL.startsWith("wss://") || t4.logURL.startsWith("https://")))
                i3.logURL = t4.logURL;
              else if (t4.logURL)
                throw new Error("log url must be a wss or https url");
              return this.logConfigForPreset = ds({}, i3), true;
            }, t3.prototype.resetRoomTokenTimer = function(t4, i3) {
              var n3 = this.getRoomModules(t4) || this.pn.roomModulesList[0];
              n3 && i3 && i3 > 0 && n3.roomHandler.resetTokenTimer(1e3 * i3);
            }, t3.prototype.isDisConnect = function() {
              return this.liveRoomHandler.isDisConnect();
            }, t3.prototype.sendMessage = function(t4, i3, n3, e3) {
              this.liveRoomHandler.sendMessage(t4, i3, n3, e3);
            }, t3.prototype.getNetworkInfo = function() {
              var t4;
              return (null === (t4 = this.netAgent) || void 0 === t4 ? void 0 : t4.getNetworkTimeInfo()) || { timestamp: 0, maxDeviation: 0 };
            }, t3.prototype.setProtoFormat = function(t4) {
              if (void 0 === t4 && (t4 = "json"), !["json", "pb"].includes(t4))
                throw new Error("Failed to execute 'setProtoFormat': Arguments 'format' must be 'json' or 'pb'.");
              this.pn.protoFormat = t4;
            }, t3.prototype.setSdkLoginRelateService = function(t4) {
              Array.isArray(t4) && t4.every(function(t5) {
                return (0, B.QP)(t5);
              }) && (this.pn.relateService = t4);
            }, t3.prototype.getRoomID = function() {
              return this.pn.roomid;
            }, t3.prototype.getServerTimeOffset = function() {
              return this.pn.serverTimeOffset;
            }, t3.prototype.getReqHead = function(t4) {
              var i3;
              return i3 = (0, B.QP)(t4) && "" !== t4 && this.getRoomModules(t4) || this.pn.roomModulesList[0], this.liveRoomHandler.getReqHead(i3);
            }, t3.prototype.sendSwitchMessage = function(t4, i3) {
              throw this.an.error("".concat("zm.ssm", " ").concat(q.WHITE_BOARD_VERSION_ERROR.msg)), q.WHITE_BOARD_VERSION_ERROR;
            }, t3.prototype.onSwitchMessage = function(t4) {
              t4 && this.liveRoomHandler && (this.liveRoomHandler.onSwitchMessage = t4);
            }, t3.prototype.onAppConfigUpdate = function(t4) {
              t4 && (this._onAppConfigUpdate = t4);
            }, t3.prototype.onBeforePageUnload = function(t4) {
              t4 && (this._onBeforePageUnload = t4);
            }, t3.prototype.getProtoVer = function() {
              return n2.I2.SWITCH_TWO;
            }, t3.prototype.sendBusinessMessage = function(t4, i3, n3) {
              return (0, B.Cs)(t4) && i3 ? this.liveRoomHandler.sendMessage(t4, i3, void 0, void 0, n3, void 0, false) : -1;
            }, t3.prototype.Nu = function(t4, i3, n3, r3) {
              var s3 = this, o2 = cn.event, u2 = this.cr.getAPIErrorReport(o2);
              if (i3)
                u2 && this.cr.takeAPIErrorReport(o2, i3, u2);
              else {
                var a2 = this.cr.createSpan(e2.t0.I, { key: Zi.event }, { key: o2, par: null == t4 ? void 0 : t4.roomID }, o2, true);
                if (a2.setAttributes({ is_multi: cn.is_multi(this.pn.isMultiRoom), is_send_cmd_net: cn.is_send_cmd_net(true), reason: cn.reason(r3) }), t4) {
                  var c2 = t4.roomHandler;
                  c2.updateTimes(), a2.setAttributes({ room_id: cn.room_id(null == t4 ? void 0 : t4.roomID), room_sid_string: cn.room_sid_string(null == t4 ? void 0 : t4.roomSidString), liveroom_sid_string: cn.liveroom_sid_string(null == t4 ? void 0 : t4.userSidString), valid_d: c2.validTime, total_d: c2.totalTime, tempbroken_cnt: c2.brokenCounts });
                } else
                  (0, B.QP)(n3) && a2.setAttributes({ room_id: cn.room_id(n3), valid_d: 0, total_d: 0, tempbroken_cnt: 0 });
                i3 ? this.cr.setError(a2, i3) : a2.end(), setTimeout(function() {
                  s3.cr.flush();
                }, 200);
              }
            }, t3.prototype.getMsgSpan = function(t4, i3, n3) {
              return void 0 === n3 && (n3 = false), this.cr.createSpan(e2.t0.H, { key: en.event, par: i3 }, { key: t4, par: i3 }, t4, n3);
            }, t3.prototype.Su = function() {
              var t4 = this;
              (0, B.Cs)(this.netAgent.timeOffset) && this.cr.setTimeOffset(this.netAgent.timeOffset), this.Pu = setTimeout(function() {
                t4.Su();
              }, 9e5);
            }, t3.prototype.setNetAgentHBMode = function(t4) {
              this.netAgent.setHeartBeatMode(t4);
            }, t3.prototype.setLocalGeoFencing = function() {
              var t4 = this.pn.netGeoFencing;
              if ((null == t4 ? void 0 : t4.id) && (null == t4 ? void 0 : t4.accesshub)) {
                var i3 = St(JSON.stringify(this.pn.netGeoFencing), xt);
                kt(Jt + "_" + this.pn.appid + "_" + (this.pn.mode || Ht.modeNo), i3), this.pn.netGeoFencing = {};
              }
            }, t3.prototype.getLocalGeoFencing = function() {
              var t4 = Ot(Jt + "_" + this.pn.appid + "_" + (this.pn.mode || Ht.modeNo));
              if (!t4)
                return this.an.info(ai + " no local geo"), null;
              var i3 = Et(t4, xt);
              if (i3)
                try {
                  return JSON.parse(i3);
                } catch (t5) {
                  return this.an.warn(ai + " local geo descrypt fail"), null;
                }
              return null;
            }, t3.prototype.getGeoDomains = function() {
              var i3, n3, e3, r3;
              if (t3.geoFenceType && t3.geoFenceAreaList) {
                this.an.info("".concat(si, " geo type ").concat(t3.geoFenceType, " area ").concat(t3.geoFenceAreaList.join(",")));
                var s3 = void 0, o2 = [], u2 = [], a2 = [], c2 = [], h2 = this._getGeoFencingIDAndDomain(t3.geoFenceType, t3.geoFenceAreaList);
                if (!h2)
                  throw this.an.warn("".concat(si, " geofencing not exist")), q.GEO_SET_ERROR;
                var f2 = this.getLocalGeoFencing(), l2 = false;
                if (null == f2 ? void 0 : f2.id) {
                  var d2 = h2.find(function(t4) {
                    return t4.id === (null == f2 ? void 0 : f2.id);
                  });
                  d2 && (l2 = true, s3 = { id: null == f2 ? void 0 : f2.id, accesshub: (null == f2 ? void 0 : f2.accesshub) || (null == d2 ? void 0 : d2.accesshub), logreport: (null == f2 ? void 0 : f2.logreport) || (null == d2 ? void 0 : d2.logreport), detaillog: (null == f2 ? void 0 : f2.detaillog) || (null == d2 ? void 0 : d2.detaillog), http3Accesshub: (null == f2 ? void 0 : f2.http3Accesshub) || (null == d2 ? void 0 : d2.http3Accesshub) || "", wssV6Accesshub: (null == f2 ? void 0 : f2.wssV6Accesshub) || (null == d2 ? void 0 : d2.wssV6Accesshub), http3V6Accesshub: (null == f2 ? void 0 : f2.http3V6Accesshub) || (null == d2 ? void 0 : d2.http3V6Accesshub) || "", wssV6Detaillog: (null == f2 ? void 0 : f2.wssV6Detaillog) || "", wssV6Logreport: (null == f2 ? void 0 : f2.wssV6Logreport) || "" }, f2.accesshub && o2.push(f2.accesshub), d2.accesshub && o2.push(d2.accesshub), f2.http3Accesshub && u2.push(f2.http3Accesshub), f2.wssV6Accesshub && a2.push(f2.wssV6Accesshub), d2.wssV6Accesshub && a2.push(d2.wssV6Accesshub), f2.http3V6Accesshub && c2.push(f2.http3V6Accesshub));
                }
                if (!l2) {
                  var v2 = h2[0], m2 = v2.accesshub;
                  s3 = { id: v2.id, accesshub: m2, logreport: v2.logreport, detaillog: v2.detaillog, wssV6Accesshub: v2.wssV6Accesshub }, o2.push(m2);
                }
                this.pn.geoFencing = s3, this.an.info("".concat(si, " use geo ").concat(JSON.stringify(this.pn.geoFencing))), i3 = o2, n3 = u2, e3 = a2, r3 = c2;
              }
              return { domains: i3, http3Domains: n3, wssV6Domains: e3, http3V6Domains: r3 };
            }, t3.prototype._getGeoFencingIDAndDomain = function(t4, i3) {
              var n3 = this.hashMainDomain(), e3 = JSON.parse(JSON.stringify(Yt));
              e3.forEach(function(t5) {
                t5.accesshub += "." + n3, t5.logreport += "." + n3, t5.detaillog += "." + n3, t5.wssV6Accesshub += "." + n3;
              });
              var r3 = [];
              return 1 === t4 ? i3.forEach(function(t5) {
                var i4 = e3.find(function(i5) {
                  return i5.id === t5;
                });
                i4 && r3.push(i4);
              }) : 2 === t4 && (r3 = JSON.parse(JSON.stringify(e3)), i3.forEach(function(t5) {
                var i4 = e3.find(function(i5) {
                  return i5.id === t5;
                });
                i4 && (r3 = r3.filter(function(t6) {
                  return t6.id !== (null == i4 ? void 0 : i4.id);
                }), i4.relative_geofencings.forEach(function(t6) {
                  r3 = r3.filter(function(i5) {
                    return i5.id !== t6;
                  });
                }));
              })), r3.length > 0 ? r3 : null;
            }, t3.setCloudProxyConfig = function(t4, i3, n3) {
              var e3;
              n3 ? this.proxyCtrl || (this.proxyCtrl = new vr(t4, i3)) : (null === (e3 = this.proxyCtrl) || void 0 === e3 || e3.destroy(), this.proxyCtrl = null);
            }, t3.setLocalProxyConfig = function(t4, i3) {
              var n3;
              i3 ? this.proxyCtrl || (this.proxyCtrl = new yr(t4)) : (null === (n3 = this.proxyCtrl) || void 0 === n3 || n3.destroy(), this.proxyCtrl = null);
            }, t3.prototype.setAPIReports = function() {
              var t4 = this.pn.settingConfig.getSettingList(["api_error_report", "api_login", "api_logout", "api_start_publish", "api_start_play"]), i3 = t4[0], n3 = t4[2], e3 = t4[3], r3 = t4[4], s3 = function(t5, i4) {
                return t5 ? i4 : 0;
              };
              this.cr.setAPIErrorReport("/sdk/login", s3(i3, t4[1])), this.cr.setAPIErrorReport("/sdk/logout", s3(i3, n3)), this.cr.setAPIErrorReport("/sdk/start_publish", s3(i3, e3)), this.cr.setAPIErrorReport("/sdk/start_play", s3(i3, r3));
            }, t3.customDomain = {}, t3.proxyCtrl = null, t3.pageID = "", t3;
          }(), bs = function() {
            function t3(t4, i3, n3, e3) {
              var r3;
              void 0 === n3 && (n3 = 0), null === (r3 = gs.proxyCtrl) || void 0 === r3 || r3.init({ appID: t4 }), this.logger = new fe.ZegoLogger(n3, gs.proxyCtrl || void 0), this.dataReport = new fe.ZegoDataReport(this.logger), this.reporter = new Ge(this.logger), this.zegoWebRTM = new gs(t4, i3, this.logger, this.dataReport, this.reporter, n3, e3);
            }
            return t3.prototype.enableMultiRoom = function(t4) {
              return this.zegoWebRTM.enableMultiRoom(t4);
            }, t3.prototype.loginRoom = function(t4, i3, n3, e3) {
              return this.zegoWebRTM.loginRoom(t4, i3, n3, e3);
            }, t3.prototype.switchRoom = function(t4, i3, n3) {
              return this.zegoWebRTM.switchRoom(t4, i3, n3);
            }, t3.prototype.logoutRoom = function(t4) {
              return this.zegoWebRTM.logoutRoom(t4);
            }, t3.prototype.renewToken = function(t4, i3) {
              return this.zegoWebRTM.renewToken(t4, i3);
            }, t3.prototype.sendBarrageMessage = function(t4, i3) {
              return this.zegoWebRTM.sendBarrageMessage(t4, i3);
            }, t3.prototype.sendBroadcastMessage = function(t4, i3) {
              return this.zegoWebRTM.sendBroadcastMessage(t4, i3);
            }, t3.prototype.sendCustomCommand = function(t4, i3, n3) {
              return this.zegoWebRTM.sendCustomCommand(t4, i3, n3);
            }, t3.prototype.setRoomExtraInfo = function(t4, i3, n3) {
              return this.zegoWebRTM.setRoomExtraInfo(t4, i3, n3);
            }, t3.prototype.sendTransparentMessage = function(t4, i3) {
              return this.zegoWebRTM.sendTransparentMessage(t4, i3);
            }, t3.prototype.setLogConfig = function(t4) {
              return this.zegoWebRTM.setLogConfig(t4);
            }, t3.presetLogConfig = function(t4) {
              return gs.presetLogConfig(t4);
            }, t3.prototype.setDebugVerbose = function(t4) {
              return this.zegoWebRTM.setDebugVerbose(t4);
            }, t3.prototype.on = function(t4, i3) {
              return this.zegoWebRTM.on(t4, i3);
            }, t3.prototype.getVersion = function() {
              return this.zegoWebRTM.getVersion();
            }, t3.prototype.off = function(t4, i3) {
              return this.zegoWebRTM.off(t4, i3);
            }, t3.use = function(t4) {
              gs.use(t4);
            }, t3.setGeoFence = function(t4, i3) {
              gs.setGeoFence(t4, i3);
            }, t3.setEngineOptions = function(t4) {
              gs.setEngineOptions(t4);
            }, t3.setCloudProxyConfig = function(t4, i3, n3) {
              gs.setCloudProxyConfig(t4, i3, n3);
            }, t3.setLocalProxyConfig = function(t4, i3) {
              gs.setLocalProxyConfig(t4, i3);
            }, t3;
          }(), _s = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, ys = function() {
            function t3() {
            }
            return t3.getSDPVideoCodec = function(t4) {
              var i3 = { H264: [], H265: [], VP8: [], VP9: [], OTHER: [] };
              if (!t4.includes("m=video"))
                return i3;
              var n3 = /m=video.+/.exec(t4)[0];
              return (n3 = n3.match(/[\s|\d]+/g)[1].replace(" ", "")).split(" ").forEach(function(n4) {
                var e3 = new RegExp("a=rtpmap:" + n4 + ".+").exec(t4)[0];
                e3.includes("H264") ? i3.H264.push(n4) : e3.includes("H265") ? i3.H265.push(n4) : e3.includes("VP8") ? i3.VP8.push(n4) : e3.includes("VP9") ? i3.VP9.push(n4) : i3.OTHER.push(n4);
              }), i3.OTHER.forEach(function(n4) {
                var e3 = new RegExp("a=fmtp:" + n4 + ".+apt=(\\d+)").exec(t4), r3 = e3 && e3[1];
                r3 && (i3.H264.includes(r3) ? i3.H264.push(n4) : i3.H265.includes(r3) ? i3.H265.push(n4) : i3.VP8.includes(r3) ? i3.VP8.push(n4) : i3.VP9.includes(r3) && i3.VP9.push(n4));
              }), i3;
            }, t3.getSDPByVideDecodeType = function(i3, n3, r3, s3) {
              var o2 = { str: "", arr: [], obj: { H264: [], H265: [], VP8: [], VP9: [], OTHER: [] } };
              if (!i3.includes("m=video"))
                return i3;
              var u2 = /m=video.+/.exec(i3)[0];
              u2 = u2.match(/[\s|\d]+/g)[1].replace(" ", ""), o2.str = u2, o2.arr = o2.str.split(" "), o2.obj = t3.getSDPVideoCodec(i3);
              var a2 = [];
              if ("VP9" === n3 ? a2 = _s(_s(_s([], o2.obj.H265, true), o2.obj.H264, true), o2.obj.VP8, true) : "VP8" === n3 ? a2 = _s(_s(_s([], o2.obj.H265, true), o2.obj.H264, true), o2.obj.VP9, true) : "H264" === n3 ? a2 = _s(_s(_s([], o2.obj.H265, true), o2.obj.VP8, true), o2.obj.VP9, true) : "H265" === n3 && (a2 = _s(_s(_s([], o2.obj.VP8, true), o2.obj.H264, true), o2.obj.VP9, true)), "H264" == n3 && (0, B.dd)(r3)) {
                var c2 = function(t4) {
                  return function(i4) {
                    return !!i4.includes("profile-level-id=") && (t4 ? !i4.includes("profile-level-id=42e01f") : i4.includes("profile-level-id=42e01f"));
                  };
                }, h2 = function(t4) {
                  return function(i4) {
                    if (!i4.includes("profile-level-id="))
                      return false;
                    switch (t4) {
                      case g.BASE_LINE:
                        return !i4.includes("profile-level-id=42");
                      case g.MAIN:
                        return !i4.includes("profile-level-id=4d");
                      case g.HIGH:
                        return !i4.includes("profile-level-id=64");
                      default:
                        return false;
                    }
                  };
                }, f2 = function(t4) {
                  return function() {
                    var n4 = [];
                    return o2.obj.H264.forEach(function(e3) {
                      for (var r4 = new RegExp("a=fmtp:" + e3 + ".+\\s\\n", "g").exec(i3) || [], s4 = 0, o3 = t4; s4 < o3.length; s4++) {
                        0 !== r4.filter(o3[s4]).length && n4.push(e3);
                      }
                      var u3 = new RegExp("a=fmtp:" + e3 + ".+apt=(\\d+)").exec(i3), a3 = u3 && u3[1];
                      a3 && n4.includes(a3) && n4.push(e3);
                    }), n4;
                  };
                };
                a2 = a2.concat(function() {
                  for (var t4 = [], i4 = 0, n4 = (0, B.TE)(s3) || s3 !== e2.B8.HARD_SOFT_ENCODEC_FIRST ? (0, B.TE)(s3) || s3 !== e2.B8.HIGH_PROFILE_FIRST ? [f2([h2(g.BASE_LINE), c2(r3)]), f2([h2(g.BASE_LINE), c2(!r3)]), f2([c2(r3)]), f2([c2(!r3)])] : [f2([h2(g.HIGH), c2(r3)]), f2([h2(g.HIGH), c2(!r3)]), f2([c2(r3)]), f2([c2(!r3)])] : [f2([c2(r3), h2(g.BASE_LINE)]), f2([c2(r3)]), f2([c2(!r3), h2(g.BASE_LINE)]), f2([c2(!r3)])]; i4 < n4.length; i4++) {
                    if (t4 = (0, n4[i4])(), new Set(t4).size !== o2.obj.H264.length)
                      break;
                    t4 = [];
                  }
                  return t4;
                }());
              }
              return a2.forEach(function(t4) {
                var n4 = o2.arr.indexOf(t4);
                n4 >= 0 && o2.arr.splice(n4, 1);
                var e3 = new RegExp("a=rtpmap:" + t4 + ".+\\s\\n", "g"), r4 = new RegExp("a=rtcp-fb:" + t4 + ".+\\s\\n", "g"), s4 = new RegExp("a=fmtp:" + t4 + ".+\\s\\n", "g");
                i3 = (i3 = (i3 = i3.replace(e3, "")).replace(r4, "")).replace(s4, "");
              }), i3 = i3.replace(u2, o2.arr.join(" "));
            }, t3;
          }(), ws = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Ss = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Es = function() {
            function t3() {
              var t4 = this, i3 = G.VJ.createElement("canvas"), n3 = i3.getContext("2d");
              n3.fillStyle = "rgba(255, 255, 255, 0)";
              try {
                this.xu = i3.captureStream();
              } catch (t5) {
                console.error("canvas captureStream error", t5);
              }
              this.qu = setInterval(function() {
                n3.fillText("test", Math.floor(640 * Math.random()), Math.floor(480 * Math.random()));
              }, 33), this.Lu = setTimeout(function() {
                t4.Bu && t4.Bu("Detection timeout"), t4.hangup();
              }, 5e3);
            }
            return t3.prototype.checkSupportByType = function(t4, i3) {
              return ws(this, void 0, void 0, function() {
                var i4, n3, e3 = this;
                return Ss(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return this.checkType = t4, i4 = {}, this.Uu = new RTCPeerConnection(i4), this.Gu = new RTCPeerConnection(i4), n3 = new G.l3(function(t5) {
                        return e3.Bu = t5;
                      }), this.Uu.addEventListener("icecandidate", function(t5) {
                        return e3.onIceCandidate(e3.Uu, t5);
                      }), this.Gu.addEventListener("icecandidate", function(t5) {
                        return e3.onIceCandidate(e3.Gu, t5);
                      }), this.Uu.addEventListener("iceconnectionstatechange", function(i5) {
                        "connected" === e3.Uu.iceConnectionState && (e3.Ju = setTimeout(function() {
                          return ws(e3, void 0, void 0, function() {
                            var i6 = this;
                            return Ss(this, function(n4) {
                              switch (n4.label) {
                                case 0:
                                  return [4, this.Uu.getStats()];
                                case 1:
                                  return n4.sent().forEach(function(n5) {
                                    if ("outbound-rtp" === n5.type && "video" === n5.kind) {
                                      var e4 = void 0 !== n5.framesEncoded && n5.framesEncoded > 0;
                                      i6.Fu = true, i6.Vu = e4, i6.Qu && i6.detectIsSupported(t4);
                                    }
                                  }), [2];
                              }
                            });
                          });
                        }, 1e3));
                      }), this.Gu.addEventListener("iceconnectionstatechange", function(i5) {
                        "connected" === e3.Gu.iceConnectionState && (e3.Ku = setTimeout(function() {
                          return ws(e3, void 0, void 0, function() {
                            var i6 = this;
                            return Ss(this, function(n4) {
                              switch (n4.label) {
                                case 0:
                                  return [4, this.Gu.getStats()];
                                case 1:
                                  return n4.sent().forEach(function(n5) {
                                    if ("inbound-rtp" === n5.type && "video" === n5.kind) {
                                      var e4 = void 0 !== n5.framesDecoded && n5.framesDecoded > 0;
                                      i6.Qu = true, i6.Zu = e4, i6.Fu && i6.detectIsSupported(t4);
                                    }
                                  }), [2];
                              }
                            });
                          });
                        }, 1e3));
                      }), this.xu.getTracks().forEach(function(t5) {
                        return e3.Uu.addTrack(t5, e3.xu);
                      }), [4, this.check(t4)];
                    case 1:
                      return r3.sent(), [4, n3];
                    case 2:
                      return [2, r3.sent()];
                  }
                });
              });
            }, t3.prototype.check = function(t4, i3) {
              return ws(this, void 0, void 0, function() {
                var n3, e3;
                return Ss(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return r3.trys.push([0, 2, , 3]), i3 && (0, B.JO)(this.Uu.addTransceiver) && (this.Uu.addTransceiver("video", { direction: "sendonly" }), this.Uu.addTransceiver("audio", { direction: "sendonly" })), [4, this.Uu.createOffer({ offerToReceiveAudio: true, offerToReceiveVideo: true })];
                    case 1:
                      return (n3 = r3.sent()).sdp = ys.getSDPByVideDecodeType(n3.sdp, t4), this.onCreateOfferSuccess(n3), [3, 3];
                    case 2:
                      return e3 = r3.sent(), this.onCreateSessionDescriptionError(e3), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.onCreateOfferSuccess = function(t4) {
              return ws(this, void 0, void 0, function() {
                var i3, n3, e3, r3;
                return Ss(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      return s3.trys.push([0, 2, , 3]), [4, this.Uu.setLocalDescription(t4)];
                    case 1:
                      return s3.sent(), [3, 3];
                    case 2:
                      return i3 = s3.sent(), this.onSetSessionDescriptionError(i3), [2];
                    case 3:
                      return s3.trys.push([3, 5, , 6]), [4, this.Gu.setRemoteDescription(t4)];
                    case 4:
                      return s3.sent(), [3, 6];
                    case 5:
                      return n3 = s3.sent(), this.onSetSessionDescriptionError(n3), [2];
                    case 6:
                      return s3.trys.push([6, 9, , 10]), [4, this.Gu.createAnswer()];
                    case 7:
                      return e3 = s3.sent(), [4, this.onCreateAnswerSuccess(e3)];
                    case 8:
                      return s3.sent(), [3, 10];
                    case 9:
                      return r3 = s3.sent(), this.onCreateSessionDescriptionError(r3), [2];
                    case 10:
                      return [2];
                  }
                });
              });
            }, t3.prototype.onCreateAnswerSuccess = function(t4) {
              return ws(this, void 0, void 0, function() {
                var i3, n3;
                return Ss(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return e3.trys.push([0, 2, , 3]), [4, this.Gu.setLocalDescription(t4)];
                    case 1:
                      return e3.sent(), [3, 3];
                    case 2:
                      return i3 = e3.sent(), this.onSetSessionDescriptionError(i3), [2];
                    case 3:
                      return e3.trys.push([3, 5, , 6]), [4, this.Uu.setRemoteDescription(t4)];
                    case 4:
                      return e3.sent(), [3, 6];
                    case 5:
                      return n3 = e3.sent(), this.onSetSessionDescriptionError(n3), [2];
                    case 6:
                      return [2];
                  }
                });
              });
            }, t3.prototype.onIceCandidate = function(t4, i3) {
              return ws(this, void 0, void 0, function() {
                var n3;
                return Ss(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return e3.trys.push([0, 2, , 3]), [4, this.getOtherPc(t4).addIceCandidate(i3.candidate)];
                    case 1:
                      return e3.sent(), [3, 3];
                    case 2:
                      return n3 = e3.sent(), console.error(this.checkType, "".concat(this.getPcName(t4), " addIceCandidate error"), n3), this.hangup(), this.Bu(n3), [3, 3];
                    case 3:
                      return "_zgp_remotePc" === this.getPcName(t4) && i3.candidate && (this.iceCandidate = true), [2];
                  }
                });
              });
            }, t3.prototype.getOtherPc = function(t4) {
              return t4 === this.Uu ? this.Gu : this.Uu;
            }, t3.prototype.getPcName = function(t4) {
              return t4 === this.Uu ? "_zgp_localPc" : "_zgp_remotePc";
            }, t3.prototype.onCreateSessionDescriptionError = function(t4) {
              console.error("Failed to create session description: ".concat(t4.toString())), this.hangup(), this.Bu(t4);
            }, t3.prototype.onSetSessionDescriptionError = function(t4) {
              console.error("Failed to set session description: ".concat(t4.toString())), this.hangup(), this.Bu(t4);
            }, t3.prototype.detectIsSupported = function(t4) {
              this.Bu(!(!this.Vu || !this.Zu) || "The browser does not support ".concat(t4, " format")), this.hangup();
            }, t3.prototype.hangup = function() {
              this.Uu.close(), this.Gu.close(), this.xu.getTracks().forEach(function(t4) {
                return t4.stop();
              }), this.Lu && (clearTimeout(this.Lu), this.Lu = null), this.Ju && (clearTimeout(this.Ju), this.Ju = null), this.Ku && (clearTimeout(this.Ku), this.Ku = null), this.Fu = false, this.Qu = false, this.qu && (clearInterval(this.qu), this.qu = null);
            }, t3;
          }();
          const ks = "[a-fA-F\\d:]", Os = (t3) => t3 && t3.includeBoundaries ? `(?:(?<=\\s|^)(?=${ks})|(?<=${ks})(?=\\s|$))` : "", Is = "(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}", Rs = "[a-fA-F\\d]{1,4}", Ts = `
(?:
(?:${Rs}:){7}(?:${Rs}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${Rs}:){6}(?:${Is}|:${Rs}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${Rs}:){5}(?::${Is}|(?::${Rs}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${Rs}:){4}(?:(?::${Rs}){0,1}:${Is}|(?::${Rs}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${Rs}:){3}(?:(?::${Rs}){0,2}:${Is}|(?::${Rs}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${Rs}:){2}(?:(?::${Rs}){0,3}:${Is}|(?::${Rs}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${Rs}:){1}(?:(?::${Rs}){0,4}:${Is}|(?::${Rs}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${Rs}){0,5}:${Is}|(?::${Rs}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm, "").replace(/\n/g, "").trim(), Cs = new RegExp(`(?:^${Is}$)|(?:^${Ts}$)`), As = new RegExp(`^${Is}$`), zs = new RegExp(`^${Ts}$`), Ds = (t3) => t3 && t3.exact ? Cs : new RegExp(`(?:${Os(t3)}${Is}${Os(t3)})|(?:${Os(t3)}${Ts}${Os(t3)})`, "g");
          Ds.v4 = (t3) => t3 && t3.exact ? As : new RegExp(`${Os(t3)}${Is}${Os(t3)}`, "g"), Ds.v6 = (t3) => t3 && t3.exact ? zs : new RegExp(`${Os(t3)}${Ts}${Os(t3)}`, "g");
          var Ns = Ds;
          const { toString: Ps } = Object.prototype;
          const Ms = { global: "g", ignoreCase: "i", multiline: "m", dotAll: "s", sticky: "y", unicode: "u" };
          function xs(t3, i3 = {}) {
            if ("[object RegExp]" !== Ps.call(t3))
              throw new TypeError("Expected a RegExp instance");
            const n3 = Object.keys(Ms).map((n4) => ("boolean" == typeof i3[n4] ? i3[n4] : t3[n4]) ? Ms[n4] : "").join(""), e3 = new RegExp(i3.source || t3.source, n3);
            return e3.lastIndex = "number" == typeof i3.lastIndex ? i3.lastIndex : t3.lastIndex, e3;
          }
          function js(t3, i3, { timeout: n3 } = {}) {
            try {
              return function(t4) {
                const i4 = (...i5) => t4(...i5);
                return Object.defineProperty(i4, "name", { value: `functionTimeout(${t4.name || "<anonymous>"})`, configurable: true }), i4;
              }(() => xs(t3).test(i3))();
            } catch (t4) {
              throw t4;
            }
          }
          const qs = { timeout: 400 };
          function Ls(t3) {
            return !(t3.length > 45) && js(Ns.v6({ exact: true }), t3, qs);
          }
          function Bs(t3) {
            return !(t3.length > 15) && js(Ns.v4({ exact: true }), t3, qs);
          }
          function Us(t3) {
            return [t3 >> 24 & 255, t3 >> 16 & 255, t3 >> 8 & 255, 255 & t3].join(".");
          }
          function Gs(t3) {
            var i3 = t3.split(".");
            return (parseInt(i3[0]) << 24) + (parseInt(i3[1]) << 16) + (parseInt(i3[2]) << 8) + parseInt(i3[3]);
          }
          function Js(t3) {
            var i3 = t3.split(".");
            return i3 ? (parseInt(i3[1]) << 24 | parseInt(i3[2]) << 16 | parseInt(i3[3]) << 8 | parseInt(i3[4])) >>> 0 : 0;
          }
          function Fs(t3) {
            return Ls(t3);
          }
          function Hs(t3) {
            return function(t4) {
              return Bs(t4);
            }(t3) ? R.IPv4 : Fs(t3) ? R.IPv6 : -1;
          }
          function Vs(t3) {
            var i3 = t3.match(/^[^:]*:(.*?):[^:]*$/);
            return i3 ? i3[1] : "";
          }
          var Qs = function() {
            return Qs = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Qs.apply(this, arguments);
          }, Ys = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Ks = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Zs = L.eU.error.wn;
          function Xs(t3, i3) {
            return Ys(this, void 0, void 0, function() {
              return Ks(this, function(n3) {
                return i3 && (0, B.JO)(t3.addTransceiver) && (t3.addTransceiver("video", { direction: "sendonly" }), t3.addTransceiver("audio", { direction: "sendonly" })), [2, t3.createOffer({ offerToReceiveAudio: true, offerToReceiveVideo: true })];
              });
            });
          }
          function Ws(t3, i3, n3, e3, r3) {
            var s3;
            return Ys(this, void 0, void 0, function() {
              var o2, u2, a2, c2, h2, f2, l2;
              return Ks(this, function(d2) {
                switch (d2.label) {
                  case 0:
                    if (o2 = { webRTC: false, customCapture: false, camera: false, microphone: false, videoCodec: { H264: false, H265: false, VP8: false, VP9: false }, screenSharing: t3, errInfo: {} }, e3 && "screenSharing" === e3)
                      return i3({ result: t3, errInfo: o2.errInfo }), [2];
                    if ((!e3 || "customCapture" === e3) && (((u2 = G.VJ.createElement("video")).captureStream || u2.mozCaptureStream) && (o2.customCapture = true), "customCapture" === e3))
                      return i3({ result: o2.customCapture, errInfo: o2.errInfo }), [2];
                    if (a2 = !!(null === (s3 = null === navigator || void 0 === navigator ? void 0 : navigator.mediaDevices) || void 0 === s3 ? void 0 : s3.getUserMedia), function() {
                      var t4 = "https:" !== window.location.protocol && "file:" !== window.location.protocol && -1 == window.location.hostname.indexOf("127.0.0.1") && -1 == window.location.hostname.indexOf("localhost");
                      if (t4 && (console.error("webrtc requires https or localhost"), !a2))
                        throw new Error("webrtc requires https or localhost");
                      return !t4;
                    }(), e3 && "camera" !== e3 && "microphone" !== e3)
                      return [3, 10];
                    if (!a2)
                      return [3, 9];
                    if (e3 && "camera" !== e3)
                      return [3, 4];
                    d2.label = 1;
                  case 1:
                    return d2.trys.push([1, 3, , 4]), [4, lo({ video: true, audio: false })];
                  case 2:
                    return (c2 = d2.sent()) && (o2.camera = true) && c2.getTracks().forEach(function(t4) {
                      t4.stop();
                    }), [3, 4];
                  case 3:
                    return h2 = d2.sent(), o2.errInfo.camera = { name: h2.name, message: h2.message }, console.error("camera devices detect error: ", h2.name, h2.message), [3, 4];
                  case 4:
                    if (e3 && "microphone" !== e3)
                      return [3, 8];
                    d2.label = 5;
                  case 5:
                    return d2.trys.push([5, 7, , 8]), [4, navigator.mediaDevices.getUserMedia({ audio: true, video: false })];
                  case 6:
                    return (f2 = d2.sent()) && (o2.microphone = true) && f2.getTracks().forEach(function(t4) {
                      return t4.stop();
                    }), [3, 8];
                  case 7:
                    return l2 = d2.sent(), o2.errInfo.microphone = { name: l2.name, message: l2.message }, console.error("microphone devices detect error: ", l2.name, l2.message), [3, 8];
                  case 8:
                    return [3, 10];
                  case 9:
                    o2.camera = false, o2.microphone = false, d2.label = 10;
                  case 10:
                    return "camera" === e3 || "microphone" === e3 ? (i3({ result: o2[e3], errInfo: o2.errInfo }), [2]) : (function(t4, i4, n4, e4) {
                      Ys(this, void 0, void 0, function() {
                        var r4, s4, o3, u3, a3, c3, h3, f3, l3, d3;
                        return Ks(this, function(v2) {
                          switch (v2.label) {
                            case 0:
                              return r4 = { webRTC: false, H264: false, VP8: false, VP9: false, H265: false }, n4 ? 1 !== i4 || "VP8" !== n4 && "H264" !== n4 && "H265" !== n4 ? [3, 2] : [4, (d3 = new Es()).checkSupportByType(n4, e4)] : [3, 2];
                            case 1:
                              return s4 = v2.sent(), (0, B.dd)(s4) ? (r4[n4] = s4, [2, t4(r4)]) : (r4[n4] = false, [2, t4(r4, s4)]);
                            case 2:
                              if ("webRTC" !== n4 && 1 !== i4)
                                return [3, 7];
                              v2.label = 3;
                            case 3:
                              return v2.trys.push([3, 5, , 6]), [4, Xs(new RTCPeerConnection(), e4)];
                            case 4:
                              return v2.sent(), r4.webRTC = true, [3, 6];
                            case 5:
                              return o3 = v2.sent(), t4 && t4(r4, o3), [3, 6];
                            case 6:
                              if ("webRTC" === n4)
                                return [2, t4(r4)];
                              v2.label = 7;
                            case 7:
                              if (1 === i4) {
                                for (u3 = "", c3 = [], h3 = 0, f3 = a3 = ["VP8", "H264", "H265"]; h3 < f3.length; h3++)
                                  l3 = f3[h3], d3 = new Es(), c3.push(d3.checkSupportByType(l3));
                                return Promise.all(c3).then(function(i5) {
                                  i5.forEach(function(t5, i6) {
                                    (0, B.dd)(t5) ? r4[a3[i6]] = true : (r4[a3[i6]] = false, u3 = t5);
                                  }), u3 ? t4(r4, u3) : t4(r4);
                                }), [2];
                              }
                              try {
                                Xs(new RTCPeerConnection(), e4).then(function(i5) {
                                  if (r4.webRTC = true, i5 && i5.sdp) {
                                    var e5 = i5.sdp.split("\r\n");
                                    if (r4.H264 = e5.some(function(t5) {
                                      return t5.startsWith("a=rtpmap:") && t5.indexOf("H264/") > -1;
                                    }), "H264" === n4)
                                      return t4(r4);
                                    if (r4.VP8 = e5.some(function(t5) {
                                      return t5.startsWith("a=rtpmap:") && t5.indexOf("VP8/") > -1;
                                    }), "VP8" === n4)
                                      return t4(r4);
                                    r4.VP9 = e5.some(function(t5) {
                                      return t5.startsWith("a=rtpmap:") && t5.indexOf("VP9/") > -1;
                                    }), r4.H265 = e5.some(function(t5) {
                                      return t5.startsWith("a=rtpmap:") && t5.indexOf("H265/") > -1;
                                    }), t4 && t4(r4);
                                  }
                                });
                              } catch (i5) {
                                t4 && t4(r4, i5);
                              }
                              return [2];
                          }
                        });
                      });
                    }(function(t4, n4) {
                      e3 || (o2.videoCodec.H264 = t4.H264, o2.videoCodec.H265 = t4.H265, o2.videoCodec.VP8 = t4.VP8, o2.videoCodec.VP9 = t4.VP9, o2.webRTC = t4.webRTC), n4 && ((0, B.QP)(n4) ? o2.errInfo.extendedDate = n4 : o2.errInfo.webRTC = { name: n4.name, message: n4.message }, console.error("videoCodec detect error: " + n4)), i3 && i3(e3 ? { result: t4[e3], errInfo: o2.errInfo } : o2);
                    }, n3, e3, r3), [2]);
                }
              });
            });
          }
          var $s = { supportDetection: Ws }, to = function(t3) {
            return (0, B.w)(t3) && void 0 !== t3.videoQuality && [1, 2, 3].includes(t3.videoQuality) && (delete t3.width, delete t3.height, delete t3.frameRate, delete t3.bitRate), t3;
          };
          function io(t3) {
            var i3 = {};
            for (var n3 in t3) {
              var e3 = t3[n3];
              if (e3 instanceof Object) {
                var r3 = e3 instanceof MediaStream || e3 instanceof HTMLElement;
                i3[n3] = r3 ? e3 : io(e3);
              } else
                void 0 !== e3 && (i3[n3] = e3);
            }
            return i3;
          }
          function no(t3) {
            return Uint8Array.from(Array.from(window.unescape(encodeURIComponent(t3))).map(function(t4) {
              return t4.charCodeAt(0);
            }));
          }
          var eo = function(t3) {
            return t3.split("\nm=").map(function(t4, i3) {
              return (i3 > 0 ? "m=" + t4 : t4).trim() + "\r\n";
            });
          };
          function ro(t3) {
            var i3 = function(t4, i4) {
              return function(t5) {
                return t5.trim().split("\n").map(function(t6) {
                  return t6.trim();
                });
              }(t4).filter(function(t5) {
                return 0 === t5.indexOf(i4);
              });
            }, n3 = eo(t3), e3 = [], r3 = [];
            return n3.forEach(function(t4, n4) {
              var s3 = function(t5) {
                var n5 = i3(t5, "a=mid:")[0];
                if (n5)
                  return n5.substr(6);
              }(t4), o2 = i3(t4, "a=candidate:").map(function(t5) {
                return r3.push(t5), Qs(Qs({}, function(t6) {
                  for (var i4, n5 = { foundation: (i4 = 0 === t6.indexOf("a=candidate:") ? t6.substring(12).split(" ") : t6.substring(10).split(" "))[0], component: parseInt(i4[1], 10), protocol: i4[2].toLowerCase(), priority: parseInt(i4[3], 10), ip: i4[4], address: i4[4], port: parseInt(i4[5], 10), type: i4[7] }, e4 = 8; e4 < i4.length; e4 += 2)
                    switch (i4[e4]) {
                      case "raddr":
                        n5.relatedAddress = i4[e4 + 1];
                        break;
                      case "rport":
                        n5.relatedPort = parseInt(i4[e4 + 1], 10);
                        break;
                      case "tcptype":
                        n5.tcpType = i4[e4 + 1];
                        break;
                      case "ufrag":
                        n5.ufrag = i4[e4 + 1], n5.usernameFragment = i4[e4 + 1];
                        break;
                      default:
                        n5[i4[e4]] = i4[e4 + 1];
                    }
                  return n5;
                }(t5)), { mid: s3 });
              });
              e3.push.apply(e3, o2);
            }), [e3, r3];
          }
          function so(t3) {
            var i3 = ro(t3)[0];
            if (i3.length > 0) {
              var n3 = i3[0].ip, e3 = Hs(n3) === R.IPv6 ? "[".concat(n3, "]") : n3;
              return ["turn:".concat(e3, ":3478?transport=udp"), "turn:".concat(e3, ":443?transport=tcp"), "turn:".concat(e3, ":3478?transport=tcp")];
            }
            return [];
          }
          function oo(t3) {
            var i3 = t3.match(/a=ice-ufrag:(\S+)/);
            return i3 ? i3[1] : "";
          }
          function uo(t3) {
            var i3 = t3.match(/a=ice-pwd:(\S+)/);
            return i3 ? i3[1] : "";
          }
          function ao(t3) {
            var i3 = t3.split(":");
            return t3.replace(":" + i3[i3.length - 1], "");
          }
          function co(t3) {
            var i3 = e2.ey.RTC;
            switch (t3) {
              case 1:
              case 3:
                i3 = e2.ey.CDN;
                break;
              case 2:
                i3 = e2.ey.L3;
                break;
              default:
                i3 = e2.ey.RTC;
            }
            return i3;
          }
          function ho(t3) {
            return (0, B.QP)(t3) && Number(t3.split(".")[0]) || 0;
          }
          function fo(t3, i3, n3, e3) {
            var r3 = t3.version, s3 = t3.name.toLowerCase(), o2 = ho(r3);
            return s3 === i3 && (0 === e3 && o2 < n3 || (1 === e3 && o2 === n3 || 2 === e3 && o2 > n3));
          }
          function lo(t3) {
            var i3 = this;
            return new G.l3(function(n3, e3) {
              return Ys(i3, void 0, void 0, function() {
                var i4, r3, s3, o2, u2, a2;
                return Ks(this, function(c2) {
                  switch (c2.label) {
                    case 0:
                      i4 = [Qs({}, t3), Qs(Qs({}, t3), { video: { width: 360 } }), Qs(Qs({}, t3), { video: { width: 640 } }), Qs(Qs({}, t3), { video: { width: 720 } }), Qs(Qs({}, t3), { video: { width: 854 } }), Qs(Qs({}, t3), { video: { width: 1280 } })], r3 = null, s3 = null, o2 = 0, c2.label = 1;
                    case 1:
                      if (!(o2 < i4.length))
                        return [3, 6];
                      u2 = i4[o2], c2.label = 2;
                    case 2:
                      return c2.trys.push([2, 4, , 5]), [4, navigator.mediaDevices.getUserMedia(u2)];
                    case 3:
                      return r3 = c2.sent(), [3, 6];
                    case 4:
                      return a2 = c2.sent(), s3 = a2, [3, 5];
                    case 5:
                      return o2++, [3, 1];
                    case 6:
                      return r3 ? n3(r3) : e3(s3), [2];
                  }
                });
              });
            });
          }
          function vo(t3, i3, n3) {
            var e3 = JSON.parse(JSON.stringify(t3));
            if (i3.forEach(function(t4) {
              var i4 = e3.indexOf(t4);
              i4 >= 0 && (e3.splice(i4, 1), e3.push(t4));
            }), !n3) {
              var r3 = e3.findIndex(function(i4) {
                return i4 === t3[0];
              });
              r3 > 0 && (e3.splice(r3, 1), e3.unshift(t3[0]));
            }
            return e3;
          }
          function mo(t3, i3, n3) {
            var e3 = JSON.parse(JSON.stringify(t3));
            if (i3.forEach(function(t4) {
              var i4 = e3.findIndex(function(i5) {
                return i5.ip === t4.ip;
              });
              i4 >= 0 && (e3.splice(i4, 1), e3.push(t4));
            }), !n3) {
              var r3 = e3.findIndex(function(i4) {
                return i4.ip === t3[0].ip;
              });
              r3 > 0 && (e3.splice(r3, 1), e3.unshift(t3[0]));
            }
            return e3;
          }
          function po(t3) {
            return t3.ip + ":" + t3.port;
          }
          function go(t3, i3) {
            return t3.findIndex(function(t4) {
              return i3.includes(t4.ip) && i3.includes(t4.port + "");
            });
          }
          function bo(t3, i3) {
            var n3;
            if ("chrome" === i3 || "safari" === i3)
              switch (t3) {
                case 0:
                  n3 = "tls";
                  break;
                case 1:
                  n3 = "tcp";
                  break;
                case 2:
                  n3 = "udp";
              }
            else if ("firefox" === i3)
              switch (t3) {
                case 0:
                  n3 = "tcp";
                  break;
                case 5:
                  n3 = "udp";
              }
            return n3;
          }
          function _o(t3, i3) {
            if (void 0 === i3 && (i3 = "video"), !(t3 instanceof MediaStream))
              return null;
            for (var n3 = "video" == i3, e3 = document.querySelectorAll(i3), r3 = null, s3 = 0; s3 < e3.length; s3++) {
              var o2 = e3[s3], u2 = o2.srcObject;
              if (u2 && (u2 === t3 || (n3 ? u2.getVideoTracks()[0] === t3.getVideoTracks()[0] : u2.getAudioTracks()[0] === t3.getAudioTracks()[0]))) {
                if (o2.currentTime)
                  return o2;
                r3 = o2;
              }
            }
            return r3;
          }
          function yo(t3, i3) {
            void 0 !== navigator.mediaDevices && void 0 !== navigator.mediaDevices.enumerateDevices ? navigator.mediaDevices.enumerateDevices().then(function(i4) {
              for (var n3 = [], e3 = [], r3 = [], s3 = 0; s3 < i4.length; s3++) {
                var o2 = i4[s3];
                "audioinput" === o2.kind && n3.push({ deviceName: o2.label, deviceID: o2.deviceId }), "audiooutput" === o2.kind && e3.push({ deviceName: o2.label, deviceID: o2.deviceId }), "videoinput" === o2.kind && r3.push({ deviceName: o2.label, deviceID: o2.deviceId });
              }
              t3 && t3({ microphones: n3, speakers: e3, cameras: r3 });
            }).catch(function(t4) {
              console.error("enumerate devices wrong " + t4), i3 && i3(L.gf.error.je);
            }) : i3 && i3(L.gf.error.yn);
          }
          function wo(t3, i3) {
            if ((0, B.TE)(t3))
              return i3(Zs, " bitrate is required when videoQuality is 4"), false;
            if ((0, B.Cs)(t3)) {
              if (!rt(t3, 0, 10240))
                return i3(Zs, " bitrate must be integer number"), false;
              if (!function(t4, i4) {
                return !(t4 > 10240 && (i4(Zs, " bitrate cannot greater than 10 Mbps"), 1));
              }(t3, i3))
                return false;
            } else
              i3(Zs, " bitrate must be number");
            return true;
          }
          function So(t3, i3, n3, e3) {
            if (!(0, B.w)(t3))
              return { result: false, message: "Invalid constraint. Constraint Extend must be a object" };
            if (0 === Object.keys(t3).length)
              return { result: false, message: "".concat(i3, " can not be a empty object") };
            for (var r3 = 0, s3 = ["exact", "ideal", "max", "min"]; r3 < s3.length; r3++) {
              var o2 = s3[r3], u2 = t3[o2];
              if ((0, B.Cs)(u2) && !(0, G.zQ)(u2, false))
                return { result: false, message: " ".concat(o2, " of ").concat(i3, " must be integer number") };
              if ((0, B.Cs)(n3) && (0, B.Cs)(u2) && u2 < n3)
                return { result: false, message: " ".concat(o2, " of ").concat(i3, " must greater than ").concat(n3) };
              if ((0, B.Cs)(e3) && (0, B.Cs)(u2) && u2 > e3)
                return { result: false, message: " ".concat(o2, " of ").concat(i3, " cannot greater than ").concat(e3) };
            }
            return { result: true, message: "Constraint Extend OK." };
          }
          function Eo(t3, i3, n3, e3, r3) {
            var s3 = So(t3, i3, e3, r3);
            return s3.result || n3 && n3(Zs, s3.message), s3.result;
          }
          function ko(t3, i3, n3) {
            for (var e3 = 0, r3 = t3; e3 < r3.length; e3++) {
              var s3 = r3[e3], o2 = i3[s3];
              if ((0, B.TE)(o2))
                return n3 && n3(Zs, " ".concat(s3, " is required when videoQuality is 4")), false;
              if ((0, B.Cs)(o2) && !(0, G.zQ)(o2, false))
                return n3 && n3(Zs, " ".concat(s3, " must be integer number")), false;
              if ((0, B.Cs)(o2) && ("width" === s3 || "height" === s3) && o2 < 0)
                return n3 && n3(Zs, " ".concat(s3, " must greater than 0.")), false;
              if ((0, B.Cs)(o2) && "width" === s3 && o2 > 7680)
                n3 && n3(Zs, " ".concat(s3, " cannot greater than 7680."));
              else if ((0, B.Cs)(o2) && "height" === s3 && o2 > 4320)
                n3 && n3(Zs, " ".concat(s3, " cannot greater than 4320."));
              else if ((0, B.w)(o2)) {
                if ("width" === s3 && !Eo(o2, s3, n3, 0, 7680))
                  return false;
                if ("height" === s3 && !Eo(o2, s3, n3, 0, 4320))
                  return false;
                if ("frameRate" === s3 && !Eo(o2, s3, n3))
                  return false;
              } else if (!(0, B.Cs)(o2) && (0, B.w)(o2))
                return n3 && n3(Zs, " ".concat(s3, " must be number or object")), false;
            }
            return true;
          }
          function Oo(t3) {
            return t3 && "live" === t3.readyState ? true === t3.enabled ? 0 : 3 : 2;
          }
          function Io(t3) {
            return ((0, B.Cs)(t3) ? t3 : t3.exact ? t3.exact : t3.ideal ? t3.ideal : t3.min || t3.max) || 0;
          }
          function Ro(t3) {
            if (!function(t4) {
              return !!/^(\d{1,3}\.){3}\d{1,3}$/.test(t4) && t4.split(".").map(function(t5) {
                return parseInt(t5, 10);
              }).every(function(t5) {
                return t5 >= 0 && t5 <= 255;
              });
            }(t3))
              throw new Error("Invalid IPv4 address");
            var i3 = t3.split(".").map(function(t4) {
              return parseInt(t4, 10);
            }).map(function(t4) {
              return t4.toString(16).padStart(2, "0");
            });
            return "64:ff9b::".concat(i3[0]).concat(i3[1], ":").concat(i3[2]).concat(i3[3]);
          }
          var To = function(t3) {
            Array.isArray(t3.ips) && (t3.ips = t3.ips.map(function(t4) {
              var i3 = t4.priority, n3 = t4.vid;
              return { ip: t4.ip, port: t4.port, priority: Oe.A.isLong(i3) ? i3.toString() : i3, vid: n3 };
            })), Array.isArray(t3.ipv6s) && (t3.ipv6s = t3.ipv6s.map(function(t4) {
              var i3 = t4.priority, n3 = t4.vid;
              return { ip: t4.ip, port: t4.port, priority: Oe.A.isLong(i3) ? i3.toString() : i3, vid: n3 };
            }));
          }, Co = o(1290), Ao = function() {
            function t3(t4, i3) {
              this.an = t4, this.Xu = i3, this.debug = false, this.testEnvironment = false, this.pullLimited = true, this.useNetAgent = true, this.configOK = false, this.relateService = [], this.role = 2, this.maxMemberCount = 0, this.roomCreateFlag = 1, this.netMode = e2.Am.Default, this.callbackList = {}, this.experimentalAPIList = { onRecvRoomMuteVideoStream: 0, onRecvRoomMuteAudioStream: 0, onRecvRoomChannelMessage: 0, onVolumeDuckingUpdate: 0 }, this.publishStreamList = {}, this.streamUrlMap = {}, this.cmdCallback = {}, this.customUrl = [], this.customPlayUrl = [], this.turnToTcp = false, this.turnOverTcpOnly = void 0, this.audioEffectBuffer = {}, this.audioBitRate = 48e3, this.cdnSeq = 0, this.engineDestroy = false, this.listenerList = { roomStreamUpdate: [], streamExtraInfoUpdate: [], playerStateUpdate: [], publisherStateUpdate: [], screenSharingEnded: [], publishQualityUpdate: [], playQualityUpdate: [], remoteCameraStatusUpdate: [], remoteMicStatusUpdate: [], soundLevelUpdate: [], capturedSoundLevelUpdate: [], videoDeviceStateChanged: [], audioDeviceStateChanged: [], deviceError: [], _deviceError: [], _remoteCameraStatusUpdate: [], _remoteMicStatusUpdate: [], _streamUpdated: [], receiveRealTimeSequentialData: [], playerRecvSEI: [], beautyEffectError: [], _engineConfigUpdate: [], backgroundEffectError: [], exceptionUpdate: [], networkQuality: [], mixerSoundLevelUpdate: [], autoMixerSoundLevelUpdate: [], mixerRelayCDNStateUpdate: [], _engineDestroy: [], recvExperimentalAPI: [], playerVideoTrackUpdate: [], playerAudioTrackUpdate: [], publisherVideoEncoderChanged: [] }, this.reportList = {}, this.reportSeqList = { startPublish: {}, rePublish: {}, startPlay: {}, rePlay: {}, stopPublish: {}, stopPlay: {} }, this.streamTrigger = {}, this.audioStreamList = {}, this.deviceInfos = null, this.deviceChangeTimer = null, this.deviceStateOut = false, this.customUa = false, this.streamRetryTime = 300, this.serverRetryTime = 90, this.checkList = [], this.anchor_info = { anchor_id: "", anchor_id_name: "", anchor_nick_name: "" }, this.clientIP = "", this.accessClientIp = "", this.isMultiOuter = false, this.roomList = [], this.isMultiRoom = false, this.browser = "", this.unregisterSeiFilter = "", this.isTestMode = false, this.debugLog = false, this.netAppConfigDelay = 0, this.seiConfig = { emulationPreventionByte: false }, this.playAccelerate = true, this.autoSwitchDeviceSetting = { camera: false, microphone: false }, this.unSendMessageList = [], this.scenario = e2.UP.Default, this.testStreamRetryMode = 0, this.testStreamRetryCount = 10, this.supportDispatchByPass = false, this.testStreamStatusSeq = 0, this.engineConfig = { keepAudioTrack: true, playClearLastFrame: true, previewClearLastFrame: true, mixingAudioDelay: 0, baseMixingAudioDelay: 0, adaptCustomUA: false, allowReplaceEmptyTrack: false, publishQualityInterval: 0, playQualityInterval: 0, enableMiniSDP: false, keepRtcWhenSignalDisconnected: true, autoRecaptureOnShow: false, datachannelOption: { ordered: true }, switchRoomNotStopPlay: false, enableReferenceBitrate: true, speechEnhanceLogLevel: 1 }, this.$u = true, this.ta = false, this.player265Validated = false, this.player265ReceiverList = [], this.miniSdpError = 0, this.debugVerboseUpdateList = { streamProbeState: [], chargeInfosUpdate: [], startConnectWebRTCServer: [] }, this.logReportCallback = W, this.unregisterCallback = tt, this.decodeServerError = it, this.getLiveRoomError = nt, this.getServerError = $, this.mergeStreamList = et, this.actionSuccessCallback = X, this.checkValidNumber = rt, this.uint8arrayToBase64 = dt, this.getSeq = e2.Mo, this.getReportSeq = e2.wN, this.cdnSeqV2 = (/* @__PURE__ */ new Date()).getTime();
            }
            return Object.defineProperty(t3.prototype, "networkState", { get: function() {
              var t4;
              return null === (t4 = this.rtm) || void 0 === t4 ? void 0 : t4.stateCenter.networkState;
            }, set: function(t4) {
              var i3;
              (null === (i3 = this.rtm) || void 0 === i3 ? void 0 : i3.stateCenter) && !(0, B.TE)(t4) && (this.rtm.stateCenter.networkState = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isFlutter", { get: function() {
              return !!this.engineConfig.isFlutter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "selectIPStackMode", { get: function() {
              return this.settingConfig.getSettingWithUserParams("ip_stack_mode", Mf.ipStackMode) || y.IPv4Prefer;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isMiniSdp", { get: function() {
              if (!this.$u && !this.ta)
                return false;
              if (!window.WebAssembly || !window.Worker)
                return false;
              if (fo(this.browserInfo, "chrome", 78, 0))
                return false;
              var t4 = this.settingConfig.getSetting("open_mini_sdp");
              return !!(0, B.dd)(t4) && (this.an.info("zc.c.ims setting: " + t4), t4);
            }, enumerable: false, configurable: true }), t3.prototype.setIsMiniSdp = function(t4) {
              var i3;
              null === (i3 = this.settingConfig) || void 0 === i3 || i3.setUserValue("open_mini_sdp", t4);
            }, Object.defineProperty(t3.prototype, "streamCenter", { get: function() {
              return this.gn;
            }, set: function(t4) {
              this.gn = t4;
            }, enumerable: false, configurable: true }), t3.prototype.getRequestId = function() {
              return this.idName + "-" + (0, e2.Mo)();
            }, t3.prototype.addListener = function(t4, i3) {
              return this.listenerList[t4] ? (0, B.JO)(i3) ? (-1 == this.listenerList[t4].indexOf(i3) && this.listenerList[t4].push(i3), true) : (this.an.error("zc.o.0 listener callBack must be funciton"), false) : (this.an.error("zc.o.0 event " + t4 + " no found"), false);
            }, t3.prototype.actionListener = function(t4) {
              for (var i3 = this, e3 = [], r3 = 1; r3 < arguments.length; r3++)
                e3[r3 - 1] = arguments[r3];
              var s3 = ["roomStreamUpdate", "playerStateUpdate", "publisherStateUpdate", "screenSharingEnded", "beautyEffectError", "backgroundEffectError", "playerVideoTrackUpdate", "playerAudioTrackUpdate", "publisherVideoEncoderChanged", "deviceError"].includes(t4);
              if (s3 && this.listenerList[t4]) {
                var o2 = this.reporter.createSpan(n2.t0.H, { key: L.i6.event }, { key: "" }, L.fn.event);
                o2.setAttributes({ listener: t4, listener_params: JSON.stringify(e3) }), o2.end();
              }
              (s3 || ["streamExtraInfoUpdate"].includes(t4)) && this.an.info("zc.al ".concat(t4, " ").concat(JSON.stringify(e3))), this.listenerList[t4] && this.listenerList[t4].forEach(function(n3) {
                try {
                  setTimeout(function() {
                    n3.apply(void 0, e3);
                  }, 0);
                } catch (n4) {
                  i3.an.error(Co.fkL + " " + t4 + " " + n4);
                }
              });
            }, t3.prototype.deleteListener = function(t4, i3) {
              if (!this.listenerList[t4])
                return this.an.error("zc.o.1 listener no found"), false;
              this.an.info("zc.o.1 " + "".concat(t4, " cb:") + typeof i3);
              var n3 = this.listenerList[t4];
              if (i3) {
                var e3 = n3.indexOf(i3);
                e3 >= 0 && n3.splice(e3, 1);
              } else
                this.listenerList[t4] = [];
              return true;
            }, t3.prototype.getRoomByRoomID = function(t4) {
              return this.roomList.find(function(i3) {
                return i3.roomID == t4;
              });
            }, t3.prototype.getPlayRoom = function(t4) {
              return this.roomList.find(function(i3) {
                return !!i3.streamList.find(function(i4) {
                  return i4.stream_id == t4;
                });
              });
            }, t3.prototype.onExperimentalAPICallback = function(t4) {
              this.actionListener("recvExperimentalAPI", t4);
            }, t3.prototype.au = function(t4, i3) {
              return this.settingConfig.getSetting(t4, i3);
            }, t3.prototype.destroy = function() {
              this.gn = null;
            }, t3.prototype.onDebugVerboseCallBack = function(t4) {
              for (var i3 = [], n3 = 1; n3 < arguments.length; n3++)
                i3[n3 - 1] = arguments[n3];
              this.debugVerboseUpdateList[t4] && this.debugVerboseUpdateList[t4].forEach(function(t5) {
                t5.apply(void 0, i3);
              });
            }, t3.prototype.ia = function(t4, i3) {
              var n3 = this.settingConfig.getSetting("report_attr_level");
              (0, G.VU)(n3, t4, i3);
            }, t3;
          }(), zo = function() {
            return zo = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, zo.apply(this, arguments);
          }, Do = L.k1, No = "zb.sh.usi", Po = function() {
            function t3(t4, i3, n3, e3, r3) {
              this.an = t4, this.pn = i3, this.rtm = n3, this.gn = e3, this._s = r3, this.na = 0, this.ea = 0, this.ra = 0, this.sa = false, this.oa = null, this.ua = 2e3, this.aa = 5e3, this.mixStreamTaskList = {}, this.mixRequestIdList = [], this.mixStreamHbList = {}, this.roomID = r3, this.logger = t4, this.stateCenter = i3;
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "reporter", { get: function() {
              return this.cr;
            }, enumerable: false, configurable: true }), t3.prototype._setCDNInfo = function(t4, i3) {
              var n3 = i3.urls_flv, e3 = i3.urls_m3u8, r3 = i3.urls_flv_plus, s3 = i3.urls_m3u8_plus, o2 = i3.urls_https_flv, u2 = i3.urls_https_m3u8, a2 = i3.urls_rtmp;
              t4.urlFlv = (0, B.C9)(n3) ? n3[0] || "" : (0, B.QP)(n3) ? n3 : "", t4.urlHls = (0, B.C9)(e3) ? e3[0] || "" : (0, B.QP)(e3) ? e3 : "", t4.urlFlvPlus = (0, B.C9)(r3) ? r3[0] || "" : (0, B.QP)(r3) ? r3 : "", t4.urlHlsPlus = (0, B.C9)(s3) ? s3[0] || "" : (0, B.QP)(s3) ? s3 : "", t4.urlHttpsFlv = (0, B.C9)(o2) ? o2[0] || "" : (0, B.QP)(o2) ? o2 : "", t4.urlHttpsHls = (0, B.C9)(u2) ? u2[0] || "" : (0, B.QP)(u2) ? u2 : "", t4.urlRtmp = (0, B.C9)(a2) ? a2[0] || "" : (0, B.QP)(a2) ? a2 : "";
            }, t3.prototype.onStreamUpdated = function(t4, i3, n3) {
            }, t3.prototype.onStreamExtraInfoUpdated = function(t4, i3) {
            }, t3.prototype.onStreamAttrUpdated = function(t4, i3) {
            }, t3.prototype.handleStreamStart = function(t4, i3) {
              var n3 = "zb.sh.hss";
              (0, G.rA)(this.an, n3, "stream update"), this.room = i3, t4.body ? (this.ua = t4.body.stream_list_hb_merge_timeout || 2e3, this.aa = t4.body.stream_list_push_merge_timeout || 5e3, this.sa = false, this.handleFullUpdateStream(t4.body.stream_seq, t4.body.stream_info || [], true), this._handleReconnectStream(t4.body.stream_info), (0, G.OY)(this.an, n3)) : this.an.error(n3 + " server response wrong");
            }, t3.prototype.onFullUpdateStream = function(t4) {
            }, t3.prototype.onPublishStateUpdate = function(t4, i3, n3, e3) {
            }, t3.prototype._updateStreamInfo = function(t4, i3, n3, r3, s3, o2) {
              var u2, a2, c2, h2 = this;
              void 0 === n3 && (n3 = ""), (0, G.rA)(this.an, No);
              var f2 = n3, l2 = null === (u2 = this.room) || void 0 === u2 ? void 0 : u2.streamList.find(function(i4) {
                return i4.stream_id === t4;
              });
              l2 || this.an.info(No + " stream not in room cmd " + i3);
              var d2 = { stream_id: t4, extra_info: f2 };
              if (2002 !== i3 && 2003 !== i3 || (d2.stream_sid = (null == l2 ? void 0 : l2.stream_sid) || ""), 2001 === i3 && this.gn.publisherList[t4]) {
                var v2 = this.gn.publisherList[t4].publisher;
                d2.inspect_flag = (null === (a2 = null == v2 ? void 0 : v2.publishOption) || void 0 === a2 ? void 0 : a2.inspectFlag) || 0;
              }
              var m2 = JSON.stringify(d2), p2 = zo({ sub_cmd: i3, stream_msg: m2, third_token: null === (c2 = this.room) || void 0 === c2 ? void 0 : c2.token }, o2 || { stream_resource: 1, stream_codec: 0 }), g2 = this.room, b2 = this.rtm.liveRoomHandler.sendStreamUpdate(p2, function(n4, e3) {
                h2.handleStreamUpdateRsp(n4, t4, i3), r3 && r3(n4, e3);
              }, function(u3, a3) {
                var c3 = h2.room, f3 = h2.rtm.stateCenter.roomModulesList.find(function(t5) {
                  return t5.roomID === (null == c3 ? void 0 : c3.roomID);
                }), l3 = function() {
                  return (null == f3 ? void 0 : f3.isTryLogin()) || "CONNECTING" === (null == f3 ? void 0 : f3.roomState);
                }, d3 = function() {
                  h2.an.warn(No + " resend stream update " + i3), h2._updateStreamInfo(t4, i3, n3, r3, s3, o2);
                };
                if (c3 && ((null == f3 ? void 0 : f3.isLogin()) || l3()) && u3.code && u3.code == re.Q9p.code && c3.streamInfoList[t4].seq == a3) {
                  setTimeout(function() {
                    if (2001 == i3 && h2.pn.publishStreamList[t4] && h2.pn.publishStreamList[t4].state == e2.T_.update_info || 2002 == i3)
                      if (l3()) {
                        var n4 = function(t5, i4) {
                          var e3 = function() {
                            h2.rtm.stateCenter.offListener("_roomStateUpdate", n4);
                          };
                          t5 === (null == c3 ? void 0 : c3.roomID) && "CONNECTED" === i4 ? (d3(), e3()) : t5 === (null == c3 ? void 0 : c3.roomID) && "DISCONNECTED" === i4 && e3();
                        };
                        h2.rtm.stateCenter.onListener("_roomStateUpdate", n4);
                      } else
                        d3();
                    else
                      s3 && s3(re.Q9p);
                  }, 0);
                } else if (u3.body && u3.body.err_code) {
                  var v3 = u3.body.err_code, m3 = re.bVX;
                  [1011, 1000002002].includes(v3) ? m3 = re.g9p : [5030].includes(v3) ? m3 = (0, G.QS)((0, G.iq)(q.FORBID_BLACK_USER)) : [2002, 2003, 2010, 2015].includes(v3) && (m3 = re.HED), s3 && s3(m3, a3);
                  var p3 = "";
                  m3.code === re.bVX.code && (p3 = JSON.stringify({ server_code: e2.Kk + v3 })), i3 === e2.NP.liveBegin && h2.onPublishStateUpdate(e2.eZ.error, t4, m3, p3);
                }
              }, { sessionID: null == g2 ? void 0 : g2.sessionID, roomID: null == g2 ? void 0 : g2.roomID, roomSessionID: null == g2 ? void 0 : g2.roomSessionID });
              [2001, 2002].includes(i3) && (this.room.streamInfoList[t4] = { seq: b2 }), (0, G.EK)(this.an, No, "cmd: " + i3 + ", roomid: ".concat(null == g2 ? void 0 : g2.roomID, ", stream: ").concat(t4));
            }, t3.prototype.updateStreamInfo = function(t4, i3, e3, r3, s3, o2) {
              var u2 = this;
              if (void 0 === e3 && (e3 = ""), this.room) {
                var a2;
                if (2001 === i3 || 2002 === i3)
                  (a2 = this.cr.createSpan(n2.t0.H, { key: L.B$.event, par: this._s }, { key: "" }, L.ON.event)).setAttributes({ stream_update_type: L.ON.stream_update_type(2001 === i3 ? "stream added" : 2002 === i3 ? "stream deleted" : ""), stream_extra_info: L.ON.stream_extra_info(e3), stream_id: L.ON.stream_id(t4) });
                this._updateStreamInfo(t4, i3, e3, function(t5, n3) {
                  [2001, 2002].includes(i3) && (a2.setAttributes({ send_seq: n3 }), a2 && a2.end()), r3 && r3(t5, n3);
                }, function(t5, n3) {
                  [2001, 2002].includes(i3) && (a2.setAttributes({ send_seq: n3 }), u2.cr.setError(a2, t5)), s3 && s3(t5, n3);
                }, o2);
              } else
                this.an.warn(No + " " + G.fT);
            }, t3.prototype.handleStreamUpdateRsp = function(t4, i3, n3) {
              var e3, r3, s3, o2;
              if (this.rtm.isDisConnect())
                this.an.warn("zb.sh.hsur not login");
              else if (0 == t4.body.err_code) {
                this.an.info("zb.sh.hsur stream seq " + this.ea + " server seq " + t4.body.stream_seq);
                var u2 = this.room;
                if (u2) {
                  if (null === (e3 = null == t4 ? void 0 : t4.body) || void 0 === e3 ? void 0 : e3.token_remain_time)
                    this.pn.getRoomByRoomID(null === (r3 = null == t4 ? void 0 : t4.header) || void 0 === r3 ? void 0 : r3.room_id) ? this.rtm.resetRoomTokenTimer(t4.header.room_id, t4.body.token_remain_time) : this.an.error("zb.sh.hsur room no found ignore " + JSON.stringify(null === (s3 = t4.header) || void 0 === s3 ? void 0 : s3.room_id));
                  this.handleStreamSync(t4, i3, n3);
                  var a2 = u2.streamInfoList[i3], c2 = null === (o2 = t4.header) || void 0 === o2 ? void 0 : o2.seq;
                  a2 && a2.seq === c2 ? delete u2.streamInfoList[i3] : this.an.info("zb.sh.hsur ".concat(JSON.stringify(i3), " udp stream info; rsp seq: ").concat(c2, ", cur seq: ").concat(null == a2 ? void 0 : a2.seq, " "));
                } else
                  this.an.info("hsur.0 room no found");
              } else
                this.an.error("zb.sh.hsur stream update error " + t4.body.err_code);
            }, t3.prototype.handleStreamSync = function(t4, i3, n3) {
              if (this.handleStreamRsp(this.room, i3, { stream_id: i3, stream_sid: t4.body.stream_sid, stream_ver: t4.body.stream_ver, stream_nid: t4.body.stream_nid, id_name: this.pn.idName, nick_name: this.pn.nickName }, n3), t4.body.stream_seq > this.ea + 1)
                return this.an.info("zb.sh.hss.1 seq diff server: " + t4.body.stream_seq + " client " + this.ea), void this.fetchStreamList();
              this.ea = t4.body.stream_seq;
              var e3 = this.room.streamList.find(function(t5) {
                return t5.stream_id == i3;
              });
              e3 && t4.body.stream_ver > e3.stream_ver && this.fetchStreamList(i3);
            }, t3.prototype.handleStreamRsp = function(t4, i3, n3, r3) {
              var s3 = this.pn.publishStreamList[i3], o2 = t4.streamList.find(function(t5) {
                return t5.stream_id == i3;
              });
              if (this.an.info("hsur.0 cmd " + r3 + " " + !!o2), o2 && 2002 === r3) {
                var u2 = t4.streamList.findIndex(function(t5) {
                  return t5.stream_id == i3;
                });
                this.an.info("hsur.0 stream index " + u2), u2 > -1 && t4.streamList.splice(u2, 1);
              }
              s3 ? (s3.state == e2.T_.update_info && (s3.state = e2.T_.publishing, 2001 !== r3 || o2 || t4.streamList.push(n3), this.onPublishStateUpdate(e2.eZ.start, i3, { code: 0, message: "" })), o2 && o2.stream_sid !== n3.stream_sid && (this.an.info("hsur.0 update sid. " + i3 + " origin:" + o2.stream_sid + ", new:" + n3.stream_sid), o2.stream_sid = n3.stream_sid)) : this.an.info("hsur.0 stream is not exist");
            }, t3.prototype.handleFetchStreamListRsp = function(t4, i3) {
              var n3, e3, r3, s3, o2, u2, a2 = "zb.sh.hfslr";
              if ((0, G.rA)(this.an, a2, i3), this.sa = false, this.cr.spanEnd({ key: Do.event, par: this._s }, { stream_seq: Do.stream_seq(null === (n3 = t4.body) || void 0 === n3 ? void 0 : n3.stream_seq), stream_size: Do.stream_size(null === (r3 = null === (e3 = t4.body) || void 0 === e3 ? void 0 : e3.stream_info) || void 0 === r3 ? void 0 : r3.length), stream_list: Do.stream_list(null === (s3 = t4.body) || void 0 === s3 ? void 0 : s3.stream_info), error: (null === (o2 = null == t4 ? void 0 : t4.body) || void 0 === o2 ? void 0 : o2.err_code) || (null == t4 ? void 0 : t4.code), message: (null === (u2 = null == t4 ? void 0 : t4.body) || void 0 === u2 ? void 0 : u2.err_message) || (null == t4 ? void 0 : t4.msg) }), 0 === t4.body.err_code)
                if (this.ea !== t4.body.stream_seq) {
                  if (this.ea > t4.body.stream_seq)
                    return this.an.error(a2 + " less seq"), void this.fetchStreamList(i3);
                  if (this.ra > t4.body.stream_seq)
                    this.an.info(a2 + " less than max fetch stream seq ");
                  else {
                    var c2 = t4.body.stream_info;
                    i3 && (c2 = t4.body.stream_info.filter(function(t5) {
                      return t5.stream_id === i3;
                    })), this.handleFullUpdateStream(t4.body.stream_seq, c2), (0, G.EK)(this.an, a2);
                  }
                } else
                  this.an.info(a2 + " same seq");
              else
                this.an.info(a2 + " server error=" + t4.body.err_code);
            }, t3.prototype.syncPublishStreamList = function() {
              var t4, i3 = "zb.sh.spsl";
              (0, G.rA)(this.an, i3);
              var n3 = function(i4) {
                var n4 = r3.pn.publishStreamList[i4];
                if (n4.state === e2.T_.publishing) {
                  var s4 = r3.room.streamList.findIndex(function(t5) {
                    return t5.stream_id === i4;
                  });
                  if (n4.roomID === r3.room.roomID && -1 === s4) {
                    var o2 = void 0;
                    (null === (t4 = r3.gn.publisherList[i4]) || void 0 === t4 ? void 0 : t4.publisher) && (o2 = r3.gn.publisherList[i4].publisher.getStreamAddOptions()), n4.state = e2.T_.update_info, r3.updateStreamInfo(i4, e2.NP.liveBegin, n4.extra_info, function(t5) {
                    }, void 0, o2);
                  }
                }
              }, r3 = this;
              for (var s3 in this.pn.publishStreamList)
                n3(s3);
              (0, G.EK)(this.an, i3);
            }, t3.prototype.handleFullUpdateStream = function(t4, i3, n3) {
              var e3 = this;
              void 0 === n3 && (n3 = false);
              var r3 = "zb.sh.hfus";
              (0, G.rA)(this.an, r3), this.ea = t4, this.ra < t4 && (this.ra = t4), this.an.debug(r3 + " server seq " + this.ea), i3 = i3.filter(function(t5) {
                return 1 !== t5.stream_type;
              }), this.pn.mergeStreamList(this.pn.idName, this.room.streamList, i3, function(t5, i4, n4, s3) {
                0 !== t5.length && (e3.an.debug(r3 + " callback addstream"), e3.onStreamUpdated(e3._s, 1, e3.makeCallbackStreamList(t5))), 0 !== i4.length && (e3.an.debug(r3 + " callback delstream"), e3.onStreamUpdated(e3._s, 0, e3.makeCallbackStreamList(i4))), 0 !== n4.length && (e3.an.debug(r3 + " callback updatestream"), e3.onStreamExtraInfoUpdated(e3._s, e3.makeCallbackStreamList(n4))), 0 !== s3.length && (e3.an.warn(r3 + " callback updateAttrstream"), e3.onStreamAttrUpdated(e3._s, e3.makeCallbackStreamList(s3)));
              }), n3 || this.syncPublishStreamList(), (0, G.EK)(this.an, r3);
            }, t3.prototype.handlePushStreamUpdateMsg = function(t4) {
              var i3 = "zb.sh.hpsum";
              (0, G.rA)(this.an, i3, JSON.stringify(t4));
              var n3 = t4.body.stream_info;
              if (n3 && 0 !== n3.length) {
                if (n3 = n3.filter(function(t5) {
                  return 1 !== t5.stream_type;
                }), this.ea + 1 !== t4.body.stream_seq)
                  return (0, G.rA)(this.an, i3, "updatestream 1"), void this.fetchStreamList();
                if (t4.body.stream_seq < this.ra)
                  return (0, G.rA)(this.an, i3, "updatestream 2"), void this.fetchStreamList();
                switch (this.ea = t4.body.stream_seq, t4.body.stream_cmd) {
                  case e2.EN.added:
                    this.ca(n3);
                    break;
                  case e2.EN.deleted:
                    this.ha(n3);
                    break;
                  case e2.EN.updated:
                    this._handleUpdatedStreamList(n3);
                }
                (0, G.EK)(this.an, i3);
              } else
                this.an.info(i3 + ", emtpy list");
            }, t3.prototype.ca = function(t4) {
              var i3 = "zb.sh.hasl";
              (0, G.rA)(this.an, i3);
              for (var n3, e3 = [], r3 = 0; r3 < t4.length; r3++)
                if (t4[r3].anchor_id_name != this.pn.idName && t4[r3].id_name != this.pn.idName && t4[r3].user_id !== this.pn.idName) {
                  n3 = false;
                  for (var s3 = 0; s3 < this.room.streamList.length; s3++)
                    if (t4[r3].stream_id === this.room.streamList[s3].stream_id) {
                      n3 = true;
                      break;
                    }
                  n3 || e3.push(t4[r3]);
                } else
                  this.an.debug("hdsl.0 have self stream added");
              if (0 !== e3.length) {
                this.an.debug(i3 + " callback addstream");
                for (var o2 = 0; o2 < e3.length; o2++) {
                  this.room.streamList.push(e3[o2]);
                  var u2 = this.gn.playerList[e3[o2].stream_id];
                  null == u2 || u2.setStreamAdd();
                }
                this.onStreamUpdated(this._s, 1, this.makeCallbackStreamList(e3));
              }
              (0, G.EK)(this.an, i3);
            }, t3.prototype.ha = function(t4) {
              var i3 = "zb.sh.hdsl";
              (0, G.rA)(this.an, i3);
              for (var n3 = [], e3 = 0; e3 < t4.length; e3++)
                if (t4[e3].anchor_id_name != this.pn.idName && t4[e3].id_name != this.pn.idName && t4[e3].user_id !== this.pn.idName) {
                  for (var r3 = this.room.streamList.length - 1; r3 >= 0; r3--)
                    if (t4[e3].stream_id === this.room.streamList[r3].stream_id) {
                      this.room.streamList.splice(r3--, 1), n3.push(t4[e3]);
                      break;
                    }
                } else
                  this.an.debug(i3 + " have self stream deleted");
              0 !== n3.length && (this.an.debug(i3 + " callback delstream"), this.onStreamUpdated(this._s, 0, this.makeCallbackStreamList(n3))), (0, G.OY)(this.an, i3);
            }, t3.prototype._handleUpdatedStreamList = function(t4) {
              var i3 = "zb.sh.husl";
              (0, G.rA)(this.an, i3);
              for (var n3 = [], e3 = [], r3 = 0; r3 < t4.length; r3++)
                if (t4[r3].anchor_id_name != this.pn.idName && t4[r3].id_name != this.pn.idName && t4[r3].user_id !== this.pn.idName) {
                  for (var s3 = 0; s3 < this.room.streamList.length; s3++)
                    if (t4[r3].stream_id === this.room.streamList[s3].stream_id) {
                      t4[r3].extra_info !== this.room.streamList[s3].extra_info && (this.room.streamList[s3] = t4[r3], n3.push(t4[r3])), t4[r3].stream_attr_opts && JSON.stringify(t4[r3].stream_attr_opts) !== JSON.stringify(this.room.streamList[s3].stream_attr_opts) && (this.room.streamList[s3] = t4[r3], e3.push(t4[r3]));
                      break;
                    }
                } else
                  this.an.debug("hsul.0 have self stream updated");
              0 !== n3.length && (this.an.debug(i3 + " callback updatestream"), this.onStreamExtraInfoUpdated(this._s, this.makeCallbackStreamList(n3))), 0 !== e3.length && (this.an.warn(i3 + " callback updateAttrStream"), this.onStreamAttrUpdated(this._s, this.makeCallbackStreamList(e3))), (0, G.EK)(this.an, i3);
            }, t3.prototype.fetchStreamList = function(t4) {
              var i3, e3, r3, s3 = this, o2 = "zb.sh.fsl";
              (0, G.rA)(this.an, o2);
              var u2 = this.cr.createSpan(n2.t0.H, { key: L.B$.event, par: this._s }, { key: Do.event, par: this._s }, Do.event, true);
              return this.rtm.isDisConnect() ? (this.an.info(o2 + " state error"), void this.cr.setError(u2, Do.error.NOT_LOGIN)) : this.sa ? (this.an.info(o2 + " already doing"), void this.cr.setError(u2, Do.error.wn, " already doing")) : (this.sa = true, this.an.info(o2 + " send fetch request"), this.rtm.liveRoomHandler.getStreamList({}, function(i4) {
                s3.handleFetchStreamListRsp(i4, t4);
              }, function(t5) {
              }, { roomID: null === (i3 = this.room) || void 0 === i3 ? void 0 : i3.roomID, sessionID: null === (e3 = this.room) || void 0 === e3 ? void 0 : e3.sessionID, roomSessionID: null === (r3 = this.room) || void 0 === r3 ? void 0 : r3.roomSessionID }), void (0, G.EK)(this.an, o2));
            }, t3.prototype._handleReconnectStream = function(t4) {
              var i3, n3, r3, s3, o2, u2, a2, c2 = "zb.sh.hrs";
              (0, G.rA)(this.an, c2);
              var h2 = this.gn.publisherList;
              this.an.info(c2 + " publish " + Object.keys(this.gn.publisherList));
              var f2 = function(c3) {
                if ((null === (n3 = null === (i3 = h2[c3]) || void 0 === i3 ? void 0 : i3.room) || void 0 === n3 ? void 0 : n3.roomID) !== l2._s)
                  return "continue";
                var f3 = t4.find(function(t5) {
                  return t5.stream_id == c3;
                }), d3 = f3 && !(f3.anchor_id_name === l2.pn.idName || f3.id_name === l2.pn.idName || f3.user_id === l2.pn.idName);
                if (l2.an.info("zb.sh.hrs stream ".concat(c3, " ").concat(!!f3, " ").concat(d3, " ").concat(null === (r3 = h2[c3].publisher) || void 0 === r3 ? void 0 : r3.state)), 6 != (null === (s3 = h2[c3].publisher) || void 0 === s3 ? void 0 : s3.state) && 1 !== h2[c3].state || f3 && !d3) {
                  if ((7 == (null === (o2 = h2[c3].publisher) || void 0 === o2 ? void 0 : o2.state) || 2 === h2[c3].state) && !(null === (a2 = null === (u2 = h2[c3]) || void 0 === u2 ? void 0 : u2.retryStreamHandler) || void 0 === a2 ? void 0 : a2.maxTimer) && t4.find(function(t5) {
                    return t5.stream_id == c3;
                  })) {
                    l2.updateStreamInfo(c3, m2 = e2.NP.liveEnd);
                    for (var v2 = 0; v2 < l2.room.streamList.length; v2++)
                      if (l2.room.streamList[v2].stream_id == c3) {
                        l2.room.streamList.splice(v2--, 1);
                        break;
                      }
                  }
                } else {
                  var m2 = e2.NP.liveBegin, p2 = void 0;
                  h2[c3].publisher && (p2 = h2[c3].publisher.getStreamAddOptions()), l2.updateStreamInfo(c3, m2, l2.pn.publishStreamList[c3].extra_info, void 0, void 0, p2);
                }
              }, l2 = this;
              for (var d2 in h2)
                f2(d2);
              (0, G.OY)(this.an, c2);
            }, t3.prototype.makeCallbackStreamList = function(t4) {
              var i3, n3 = [];
              this.pn.appConfig && (i3 = this.pn.appConfig.media_config.play_config.resource_info.filter(function(t5) {
                return [e2.NI.CDN, e2.NI.DG].includes(t5.resource_type);
              }));
              if (t4 && t4.length > 0)
                for (var r3 = 0; r3 < t4.length; r3++) {
                  var s3 = t4[r3].stream_id;
                  if (i3 && i3.length)
                    for (var o2 = 0; o2 < i3.length; o2++) {
                      for (var u2 = i3[o2].resource_type == e2.NI.DG ? "_plus" : "", a2 = [], c2 = [], h2 = [], f2 = 0; f2 < i3[o2].service_info.length; f2++) {
                        var l2 = i3[o2].service_info[f2], d2 = l2.protocol, v2 = l2.url_template.replace("{STREAM_NAME}", s3);
                        switch (d2) {
                          case e2.Hb.FLV:
                            a2.push(v2);
                            break;
                          case e2.Hb.HLS:
                            c2.push(v2);
                            break;
                          case e2.Hb.RTMP:
                            h2.push(v2);
                        }
                      }
                      t4[r3]["urls_flv" + u2] = a2, t4[r3]["urls_m3u8" + u2] = c2, t4[r3]["urls_rtmp" + u2] = h2;
                    }
                  var m2 = { user: { userID: t4[r3].anchor_id_name || t4[r3].id_name, userName: t4[r3].anchor_nick_name || t4[r3].nick_name }, extraInfo: t4[r3].extra_info, streamID: t4[r3].stream_id, roomID: "", urlFlv: "", urlFlvPlus: "", urlRtmp: "", urlHls: "", urlHlsPlus: "", urlHttpsFlv: "", urlHttpsHls: "", streamGID: t4[r3].stream_gid, closeType: t4[r3].close_type, stream_attr_opts: t4[r3].stream_attr_opts };
                  this._setCDNInfo(m2, t4[r3]), n3.push(m2);
                }
              return n3;
            }, t3.prototype.sendHttpPBRequest = function(t4, i3, n3, e3, r3) {
              var s3, o2;
              null === (s3 = this.rtm.netAgent) || void 0 === s3 || s3.startHttpRequest2({ interfaceID: t4.interfaceID, resID: t4.resID || "", body: i3, ack: false, idName: this.pn.idName, method: 2, token: (null === (o2 = this.room) || void 0 === o2 ? void 0 : o2.token) || "", mode: this.pn.testEnvironment ? 2 : 1, reduceRspHeaders: true }, function(t5, i4) {
                n3 && n3(t5, i4);
              }, function(t5) {
                e3 && e3(t5);
              }, null, { timeout: (null == r3 ? void 0 : r3.timeout) || 4e3, extras: { protoCmd: t4.protoCmd } });
            }, t3.prototype.sendMixRequest = function(t4, i3, n3, e3, r3) {
              var s3 = this;
              void 0 === r3 && (r3 = 2);
              var o2 = function(o3, u2) {
                var a2 = o3.status_code, c2 = o3.body, h2 = o3.code, f2 = o3.message;
                return (0, B.TE)(h2) || 0 === h2 ? a2 && 200 !== a2 ? (r3--, void (502 === a2 && r3 > 0 ? s3.sendMixRequest(t4, i3, n3, e3, r3) : e3 && e3(a2, c2))) : void (n3 && n3(c2, u2)) : h2 === re.Q9p.code && r3 > 0 ? (r3--, void s3.sendMixRequest(t4, i3, n3, e3, r3)) : void (e3 && e3(-1, {}, { code: h2, message: f2 }));
              };
              this.sendHttpPBRequest(t4, i3, function(t5, i4) {
                o2(t5, i4);
              }, function(t5) {
                o2(t5);
              });
            }, t3.prototype.sendRTMPRequest = function(t4, i3, n3, e3) {
              var r3 = this.rtm.netAgent, s3 = this.pn.appid, o2 = i3.streamID, u2 = "/v1/jsrtmp/dispatch/".concat(t4, "/").concat(o2, "/").concat(i3.actionType, "/").concat(r3.clientIP), a2 = this.room;
              r3.startHttpRequest({ service: 1, headers: [{ name: "Token-Appid", val: s3 + "" }, { name: "Token-Str", val: (null == a2 ? void 0 : a2.token) || "" }, { name: "Token-Userid", val: this.pn.idName }, { name: "Token-Biztype", val: "2" }, { name: "Net-Mode", val: this.pn.netMode + "" }], body: {}, idName: this.pn.idName, method_no: 1, ack: false, location: u2 }, function(t5) {
                n3(t5);
              }, function(t5, i4, n4) {
                e3(t5);
              });
            }, t3.prototype._publishTarget = function(t4, i3, n3) {
            }, t3.prototype.updateStreamExtraInfo = function(t4, i3, n3, r3) {
              (0, G.rA)(this.an, "zb.sh.usei");
              var s3 = e2.NP.liveUpdate;
              this.pn.publishStreamList[t4] && this.pn.publishStreamList[t4].state >= e2.T_.update_info ? (this.pn.publishStreamList[t4].extra_info = i3, this.updateStreamInfo(t4, s3, i3, n3, r3)) : this.pn.publishStreamList[t4] && this.pn.publishStreamList[t4].state === e2.T_.tryPublish ? (this.pn.publishStreamList[t4].extra_info = i3, n3({ errorCode: 0 })) : r3(L.Fv.error.Ke);
            }, t3.prototype.getMixStreamStatus = function(t4) {
            }, t3.prototype.setStreamExtraInfo = function(t4, i3, n3, e3) {
              this.updateStreamExtraInfo(t4, i3, n3, e3);
            }, t3.prototype._publishTargetWeb = function(t4, i3, n3) {
            }, t3.prototype.patchStreamList = function(t4) {
              var i3 = this;
              if ((0, B.Cs)(t4.body.stream_refresh) && 0 !== t4.body.stream_refresh)
                return this.an.info(Co.mMR + " stream refresh "), void this.fetchStreamList();
              this.an.info(Co.mMR + " stream seq " + this.ea + " " + JSON.stringify(this.oa)), t4.body.stream_seq > this.ea && !this.oa && (this.oa = {}, (0, G.rA)(this.an, Co.mMR, "update stream " + this.ea + " server " + t4.body.stream_seq), this.fa && clearTimeout(this.fa), this.fa = setTimeout(function() {
                i3.handleMergeTimeout();
              }, this.ua)), this.na = t4.body.stream_seq;
            }, t3.prototype.getStreamSeq = function() {
              return this.ea;
            }, t3.prototype.mergeStreamByStreamSeq = function(t4, i3, n3) {
              var e3 = this;
              this.oa || (this.an.warn(Co.wT7 + " new merge stream list " + this.ea + " server " + i3), this.oa = {}, this.fa && clearTimeout(this.fa), this.fa = setTimeout(function() {
                e3.handleMergeTimeout();
              }, this.aa)), this.an.info(Co.wT7 + " ".concat(this.oa, " ").concat(t4, " ").concat(i3, " ").concat(n3)), this.oa[i3] = { cmd: t4, streamList: n3 };
            }, t3.prototype.handleMergeTimeout = function() {
              if (this.oa) {
                var t4 = Object.keys(this.oa).map(function(t5) {
                  return +t5;
                }).sort(function(t5, i3) {
                  return t5 - i3;
                });
                t4[t4.length - 1] - t4[0] + 1 === t4.length || t4[t4.length - 1] >= this.na ? this.mergeStream(t4) : (this.oa = null, this.fetchStreamList());
              }
            }, t3.prototype.mergeStream = function(t4) {
              var i3 = this;
              this.an.info(Co.TlX + " merge streamList " + this.ea + " streamSeqList " + t4.join(","));
              var n3 = t4[t4.length - 1], r3 = [];
              t4.forEach(function(t5) {
                if (i3.oa && i3.oa[t5])
                  switch (i3.oa[t5].cmd) {
                    case e2.EN.added:
                      i3.oa[t5].streamList.forEach(function(t6) {
                        var i4 = r3.findIndex(function(i5) {
                          return i5.stream_id == t6.stream_id;
                        });
                        -1 !== i4 && r3.splice(i4), r3.push(t6);
                      });
                      break;
                    case e2.EN.deleted:
                      i3.oa[t5].streamList.forEach(function(t6) {
                        var i4 = r3.findIndex(function(i5) {
                          return i5.stream_id == t6.stream_id;
                        });
                        -1 !== i4 && r3.splice(i4);
                      });
                      break;
                    case e2.EN.updated:
                      i3.oa[t5].streamList.forEach(function(t6) {
                        var i4 = r3.findIndex(function(i5) {
                          return i5.stream_id == t6.stream_id;
                        });
                        -1 !== i4 && r3.splice(i4), r3.push(t6);
                      });
                  }
              }), this.oa = null, this.an.info(Co.TlX + " " + r3), this.handleFullUpdateStream(n3, r3);
            }, t3.prototype.reset = function() {
              this.na = 0, this.oa = null, this.mixStreamTaskList = {}, this.mixRequestIdList = [], this.mixStreamHbList = {}, this.fa && (clearTimeout(this.fa), this.fa = void 0), this.ua = 2e3, this.aa = 5e3;
            }, t3;
          }(), Mo = function() {
            function t3() {
              this.handlerListMap = {};
            }
            return t3.prototype.addEventHandler = function(t4, i3) {
              if (this.handlerListMap[t4] || (this.handlerListMap[t4] = []), !(0, B.JO)(i3))
                throw new Error("Params callBack is not a Function");
              return -1 == this.handlerListMap[t4].indexOf(i3) && this.handlerListMap[t4].push(i3), true;
            }, t3.prototype.removeEventHandler = function(t4, i3) {
              return !!this.handlerListMap[t4] && (this.handlerListMap[t4] = i3 ? this.handlerListMap[t4].filter(function(t5) {
                return t5 !== i3;
              }) : [], true);
            }, t3.prototype.emit = function(t4) {
              for (var i3 = [], n3 = 1; n3 < arguments.length; n3++)
                i3[n3 - 1] = arguments[n3];
              this.handlerListMap[t4] && this.handlerListMap[t4].forEach(function(n4) {
                try {
                  n4.apply(void 0, i3);
                } catch (i4) {
                  console.error('Fail to execute callback of event "'.concat(t4, '" : ').concat(i4));
                }
              });
            }, t3;
          }(), xo = Mo, jo = "zg_autoplay_wrapper";
          function qo() {
            return navigator.language.includes("zh");
          }
          var Lo = function() {
            function t3() {
              this.content = 'Media play failed. Click the "Resume"to resume.', this.la = null;
              var t4 = document.createElement("style");
              t4.type = "text/css";
              var i3 = ".zg_autoplay_mask{position:fixed;top:0;left:0;right:0;bottom:0;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;background:rgba(0,0,0,0.5);z-index:1500}.zg_autoplay_mask div:not(.zg_autoplay_action_wrapper){display:block!important}.".concat(jo, "{padding:14px;background:#fff;border-radius:3px;box-shadow:1px 1px 10px#988e8d;border:1px solid#d1cfcf;max-width:500px}.").concat(jo, "a{color:#2473E8}.zg_autoplay_header{overflow:hidden;text-overflow:ellipsis;font-size:16px;font-weight:600}.zg_autoplay_content{margin:8px 0}.zg_autoplay_action_wrapper{width:100%;display:flex!important;align-items:center;justify-content:right;float:right}.zg_autoplay_collapse{margin-right:auto;cursor:pointer}.zg_autoplay_question{height:100%;line-height:16px;cursor:pointer}.zg_autoplay_action_confirm{margin-left:8px;color:#fff;background:#0072ff;padding:4px 12px;outline:none;border:1px solid;border-radius:3px;font-weight:bold}.zg_autoplay_action_confirm:hover{opacity:0.9}.zg_autoplay_collapse,.zg_autoplay_action_confirm,.zg_autoplay_content,.zg_autoplay_question{font-size:14px}@media screen and(max-width:750px){.").concat(jo, "{width:80vw}}");
              t4.appendChild(document.createTextNode(i3)), G.VJ.head.appendChild(t4), qo() && (this.content = ""), this.da = new xo();
            }
            return t3.getInstance = function() {
              return t3.instance || (t3.instance = new t3()), t3.instance;
            }, t3.prototype.createDialog = function() {
              var t4 = G.VJ.createElement("template"), i3 = G.VJ.createElement("div");
              i3.className = "zg_autoplay_mask";
              var n3 = G.VJ.createElement("div");
              n3.className = jo;
              var e3 = G.VJ.createElement("div");
              e3.className = "zg_autoplay_header", e3.textContent = location.host;
              var r3 = G.VJ.createElement("div");
              r3.className = "zg_autoplay_content", r3.textContent = this.content;
              var s3 = G.VJ.createElement("div");
              s3.className = "zg_autoplay_action_wrapper", n3.appendChild(e3), n3.appendChild(r3), n3.appendChild(s3), i3.appendChild(n3), t4.content.appendChild(i3);
              var o2 = G.VJ.createElement("button");
              o2.className = "zg_autoplay_action_confirm", o2.innerText = qo() ? "" : "Resume", o2.onclick = this.onConfirm.bind(this);
              var u2 = t4.content.firstChild;
              return s3 && s3.appendChild(o2), u2;
            }, t3.prototype.onConfirm = function(t4) {
              t4 && t4.stopPropagation(), this.da.emit("allowPlay"), this.deleteDiaLog();
            }, t3.prototype.deleteDiaLog = function() {
              this.la && (G.VJ.body.removeChild(this.la), this.la = null);
            }, t3.prototype.addDiaLog = function() {
              this.la = this.la || this.createDialog(), G.VJ.body.appendChild(this.la), this.la.onclick = this.onConfirm.bind(this);
            }, t3.prototype.on = function(t4, i3) {
              return this.da.addEventHandler(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this.da.removeEventHandler(t4, i3);
            }, t3.instance = null, t3;
          }(), Bo = function() {
            function t3(t4, i3) {
              this.an = t4, this.va = i3;
            }
            return t3.prototype.info = function() {
              for (var t4 = [], i3 = 0; i3 < arguments.length; i3++)
                t4[i3] = arguments[i3];
              this.an.info(t4.join(""), { streamid: this.va });
            }, t3.prototype.warn = function() {
              for (var t4 = [], i3 = 0; i3 < arguments.length; i3++)
                t4[i3] = arguments[i3];
              this.an.warn(t4.join(""), { streamid: this.va });
            }, t3.prototype.error = function() {
              for (var t4 = [], i3 = 0; i3 < arguments.length; i3++)
                t4[i3] = arguments[i3];
              this.an.error(t4.join(""), { streamid: this.va });
            }, t3.prototype.debug = function() {
              for (var t4 = [], i3 = 0; i3 < arguments.length; i3++)
                t4[i3] = arguments[i3];
              this.an.debug(t4.join(""), { streamid: this.va });
            }, t3;
          }();
          function Uo(t3, i3) {
            return new Bo(t3, i3);
          }
          var Go, Jo = o(5794), Fo = function() {
            return Fo = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Fo.apply(this, arguments);
          }, Ho = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Vo = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Qo = (0, Pe.$t)(), Yo = /^(?=.*MicroMessenger)(?=.*HONOR).*$/.test(Qo || ""), Ko = Lo.getInstance(), Zo = function() {
            function t3(t4, i3, n3) {
              var e3 = this;
              this.previewer = i3, this.ma = null, this.pa = null, this.inited = false, this.container = null, this.ga = null, this.eu = { enableVideoAutoplayDialog: true, enableAudioAutoplayDialog: true, clearLastFrame: true, useAudioElement: true }, this.ba = (0, G.sg)(function(t5, i4, n4) {
                e3._a.emit("autoplayFailed", i4, n4), (t5 ? e3.eu.enableVideoAutoplayDialog : e3.eu.enableAudioAutoplayDialog) ? Ko.addDiaLog() : G.VJ.body.addEventListener("mousedown", e3.ou.resumePlayByClickBody), e3.ya.warn("zc.zsv id:".concat(e3.id, " autoplay failed"));
              }, 600), this.wa = false, this.Sa = false, this.Ea = (0, G.sg)(function() {
                var t5 = Array.from(G.VJ.getElementsByTagName("video")), i4 = Array.from(G.VJ.getElementsByTagName("audio")), n4 = t5.some(function(t6) {
                  return !t6.id || !t6.id.startsWith("zg-rtc-video_");
                }), e4 = i4.some(function(t6) {
                  return !t6.id || !t6.id.startsWith("zg-rtc-audio_");
                });
                (n4 || e4) && (0, Jo.r)();
              }, 300), this.ka = (0, G.sg)(this.Oa, 20), this.ou = { visibilitychange: function() {
                var t5;
                G.VJ.hidden || e3.Sa || !(0, Pe.Fr)() || (e3.ya.info("zc.zsv id: ".concat(e3.id, " page show, recover audio")), e3.eu.useAudioElement && e3.pa ? e3.pa.srcObject = e3.pa.srcObject : (e3.ya.info("zc.ac.rs id: ".concat(e3.id, " page show")), e3.ac.resume()), e3.ka(e3.pa, true)), G.VJ.hidden || e3.wa || !(0, Pe.Fr)() || (null === (t5 = e3.ma) || void 0 === t5 ? void 0 : t5.paused) && (e3.ya.info("zc.zsv id: ".concat(e3.id, " page show, recover video")), e3.Oa(e3.ma, true));
              }, focus: function(t5) {
                e3.Sa || ((0, Pe.aR)() && (0, Pe.UN)().startsWith("16") || (0, Pe.HR)()) && (e3.ya.info("zc.zsv id: ".concat(e3.id, " page focus, recover audio")), e3.ka(e3.pa, true));
              }, canPlayAudio: function(t5) {
                e3._a.emit("canPlayAudio", t5);
              }, canPlayVideo: function(t5) {
                e3._a.emit("canPlayVideo", t5);
              }, resumePlayByClickBody: function() {
                return Ho(e3, void 0, void 0, function() {
                  return Vo(this, function(t5) {
                    switch (t5.label) {
                      case 0:
                        return this.ya.info("zc.zsv id:".concat(this.id, " resume by click dom_body")), [4, this.resume()];
                      case 1:
                        return t5.sent(), G.VJ.body.removeEventListener("mousedown", this.ou.resumePlayByClickBody), [2];
                    }
                  });
                });
              } }, this.inited = true, this.eu = Fo(Fo({}, this.eu), n3);
              var r3 = this.id = "".concat(t4.id);
              this.ya = Uo(this.an, (null == i3 ? void 0 : i3.streamId) || "" || void 0), this.ya.info("zc.sv.c id:".concat(r3, "  isLocal: ").concat(this.isLocal));
              var s3 = G.VJ.createElement("div");
              s3.id = "zg-rtc-player_".concat(r3), s3.setAttribute("style", "width:100%;height:100%;position:relative;background-color:black;overflow:hidden;");
              var o2 = t4.getVideoTracks()[0], u2 = t4.getAudioTracks()[0], a2 = (0, G.sb)(void 0, void 0, "safari" !== this.browser);
              a2.id = "zg-rtc-video_".concat(r3), a2.setAttribute("style", "width:100%;height:100%;object-fit:contain;"), a2.srcObject = new MediaStream(), a2.addEventListener("canplay", this.ou.canPlayVideo), o2 && a2.srcObject.addTrack(o2);
              var c2 = G.VJ.createElement("audio");
              c2.id = "zg-rtc-audio_".concat(r3), c2.setAttribute("autoplay", ""), c2.setAttribute("playsinline", ""), c2.muted = true, c2.srcObject = this.Ia = new MediaStream(), c2.addEventListener("canplay", this.ou.canPlayAudio), u2 && c2.srcObject.addTrack(u2), "object" == typeof WeixinJSBridge && "function" == typeof WeixinJSBridge.invoke && WeixinJSBridge.invoke("getNetworkType", {}, function() {
                e3.ya.info("zc.zsv id:".concat(e3.id, " weixin load media")), c2.load(), a2.load();
              }), this.Ra = s3, this.ma = a2, this.pa = c2, this._a = new xo(), this.Ta = function() {
                e3.resume();
              }, Ko.on("allowPlay", this.Ta), window.addEventListener("focus", this.ou.focus), G.VJ.addEventListener("visibilitychange", this.ou.visibilitychange);
            }
            return Object.defineProperty(t3.prototype, "video", { get: function() {
              return this.ma;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "audio", { get: function() {
              return this.pa;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "ac", { get: function() {
              return this.previewer.ac;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "browser", { get: function() {
              return this.previewer.pn.browser;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "an", { get: function() {
              return this.previewer.logger;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isLocal", { get: function() {
              return this.previewer instanceof Ju;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "_isMounted", { get: function() {
              return !!this.Ra.parentNode;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "_hasAudio", { get: function() {
              var t4, i3;
              return "live" === (null === (i3 = null === (t4 = this.Ia) || void 0 === t4 ? void 0 : t4.getTracks()[0]) || void 0 === i3 ? void 0 : i3.readyState) && !this.Sa;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "_hasVideo", { get: function() {
              var t4, i3, n3;
              return !!(null === (t4 = this.ma) || void 0 === t4 ? void 0 : t4.parentNode) && "live" === (null === (n3 = null === (i3 = this.ma.srcObject) || void 0 === i3 ? void 0 : i3.getTracks()[0]) || void 0 === n3 ? void 0 : n3.readyState);
            }, enumerable: false, configurable: true }), t3.prototype.resume = function(t4, i3) {
              return void 0 === i3 && (i3 = ["audio", "video"]), Ho(this, void 0, void 0, function() {
                var n3 = this;
                return Vo(this, function(e3) {
                  return this.ya.info("zc.zsv resume call: ".concat(t4, ", kindList: ").concat(i3, ", id:").concat(this.id, ", isLocal: ").concat(this.isLocal)), i3.forEach(function(i4) {
                    return Ho(n3, void 0, void 0, function() {
                      var n4, e4, r3 = this;
                      return Vo(this, function(s3) {
                        switch (s3.label) {
                          case 0:
                            return e4 = "audio" === i4 ? this.pa : this.ma, ((n4 = "audio" === i4) ? this._hasAudio : this._hasVideo) ? !n4 || this.eu.useAudioElement ? [3, 1] : (this.ya.info("zc.zsv resume id:".concat(this.id, " ac: ") + this.ac.state), this.ac.resume(), [3, 4]) : [3, 4];
                          case 1:
                            return t4 && e4 ? (e4.srcObject = e4.srcObject, [4, new G.l3(function(t5) {
                              var i5 = setTimeout(function() {
                                r3.ya.info("zc.zsv id:".concat(r3.id, " resume play ").concat(n4 ? "audio" : "video", " timeout")), t5(0);
                              }, 1e3), s4 = function() {
                                clearTimeout(i5), e4.removeEventListener("canplay", s4), t5(0);
                              };
                              e4.addEventListener("canplay", s4);
                            })]) : [3, 3];
                          case 2:
                            s3.sent(), s3.label = 3;
                          case 3:
                            null == e4 || e4.play().catch(function(t5) {
                              r3.ya.info("zc.zsv id:".concat(r3.id, " resume failed. err:") + t5.message);
                            }), s3.label = 4;
                          case 4:
                            return [2];
                        }
                      });
                    });
                  }), [2];
                });
              });
            }, t3.prototype.checkIfClearLastFrame = function() {
              return Ho(this, void 0, void 0, function() {
                return Vo(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return this.eu.clearLastFrame ? [4, this.resume(true, ["video"])] : [3, 2];
                    case 1:
                      t4.sent(), t4.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }, t3.prototype.play = function(t4, i3) {
              void 0 === i3 && (i3 = {}), this.ya.info("zc.zsv play: ".concat(typeof t4, ", ").concat(JSON.stringify(i3), ", id:").concat(this.id, " isLocal:").concat(this.isLocal ? "1" : "0 streamid:" + this.previewer.streamId, ","));
              var n3 = (i3 = Fo({}, i3)).enableAutoplayDialog;
              (0, B.dd)(n3) && (i3.enableVideoAutoplayDialog = n3, i3.enableAudioAutoplayDialog = n3, delete i3.enableAutoplayDialog), this.playVideo(t4, i3), this.playAudio(i3, !this.isLocal);
            }, t3.prototype.playVideo = function(t4, i3) {
              void 0 === i3 && (i3 = {}), this.ya.info("zc.zsv.pv id:".concat(this.id, " play: ").concat(typeof t4, ", ").concat(JSON.stringify(i3), " isLocal:").concat(this.isLocal));
              var n3 = null;
              if ((0, B.QP)(t4) ? n3 = G.VJ.getElementById(t4) : (0, B.qi)(t4) && (n3 = t4), !n3)
                throw this.ya.error("zc.zsv.pv id:".concat(this.id, " no element isLocal:").concat(this.isLocal)), "Execute `play` failed, container not exist";
              i3 && "enableAutoplayDialog" in i3 && (i3.enableVideoAutoplayDialog = i3.enableAutoplayDialog, delete i3.enableAutoplayDialog), this.eu = Fo(Fo({}, this.eu), i3);
              var e3 = this.eu, r3 = e3.objectFit, s3 = e3.mirror;
              this.ma && (void 0 !== r3 && (this.ma.style.objectFit = r3), (0, B.dd)(s3) && (this.ma.style.transform = s3 ? "rotateY(180deg)" : "")), !n3.contains(this.Ra) && n3.appendChild(this.Ra), this.container = n3, this.wa = false, this.Oa(this.ma, true);
            }, t3.prototype.playAudio = function(t4, i3) {
              void 0 === i3 && (i3 = true), this.ya.info("zc.zsv.pa id:".concat(this.id, " play: ").concat(JSON.stringify(t4), " isLocal:").concat(this.isLocal)), t4 && "enableAutoplayDialog" in t4 && (t4.enableAudioAutoplayDialog = t4.enableAutoplayDialog, delete t4.enableAutoplayDialog), this.eu = Fo(Fo({}, this.eu), t4);
              var n3 = true;
              if ("safari" === this.browser) {
                var e3 = Qo.match(/Version\/([\d\.]+)/);
                if (e3)
                  "13.1.2" !== e3[1] || this.eu.useAudioElement || (n3 = false);
              }
              n3 || (this.ya.warn("zc.zsv.pa id:".concat(this.id, " safari 13.1.2 cannot use audio ctx render.")), this.eu.useAudioElement = true);
              var r3 = i3, s3 = this.eu.muted;
              this.pa && (0, B.dd)(s3) && (r3 = !s3), this.Sa = !r3, this.Oa(this.pa, r3);
            }, t3.prototype.stop = function() {
              this.ya.info("zc.zsv stop id:".concat(this.id, " isLocal:").concat(this.isLocal)), this.stopAudio(), this.stopVideo();
            }, t3.prototype.stopAudio = function() {
              this.ya.info("zc.zsv.sa stop id:".concat(this.id, " isLocal:").concat(this.isLocal)), this.Sa = true, this.Oa(this.pa, false);
            }, t3.prototype.stopVideo = function() {
              var t4;
              this.ya.info("zc.zsv.sv stop id:".concat(this.id, " isLocal:").concat(this.isLocal)), this.Oa(this.ma, false);
              var i3 = null === (t4 = this.Ra) || void 0 === t4 ? void 0 : t4.parentNode;
              i3 && i3.removeChild(this.Ra);
            }, t3.prototype.setVideo = function(t4, i3) {
              return void 0 === i3 && (i3 = false), Ho(this, void 0, void 0, function() {
                return Vo(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return [4, this.setTrack(true, t4, i3)];
                    case 1:
                      return n3.sent(), [2];
                  }
                });
              });
            }, t3.prototype.setAudio = function(t4, i3) {
              return void 0 === i3 && (i3 = false), Ho(this, void 0, void 0, function() {
                return Vo(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return [4, this.setTrack(false, t4, i3)];
                    case 1:
                      return n3.sent(), [2];
                  }
                });
              });
            }, t3.prototype.setTrack = function(t4, i3, n3) {
              return void 0 === n3 && (n3 = false), Ho(this, void 0, void 0, function() {
                var e3, r3, s3;
                return Vo(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      return this.ya.info("zc.zsv set id:".concat(this.id, " track: ").concat(t4, ", ").concat(null == i3 ? void 0 : i3.id, ", ").concat(n3, ", ").concat(null == i3 ? void 0 : i3.readyState, " isLocal:").concat(this.isLocal)), (e3 = t4 ? this.ma : this.pa) ? (r3 = e3.srcObject) ? i3 ? [3, 1] : ((s3 = r3.getTracks()).forEach(function(t5) {
                        null == r3 || r3.removeTrack(t5), e3.srcObject = e3.srcObject;
                      }), this._a.emit("_trackChange", t4 ? "video" : "audio"), [3, 5]) : [2] : [2];
                    case 1:
                      if (!(i3 instanceof MediaStreamTrack))
                        return [3, 5];
                      if ((s3 = r3.getTracks()).includes(i3))
                        return [3, 5];
                      if (s3.forEach(function(t5) {
                        null == r3 || r3.removeTrack(t5);
                      }), r3.addTrack(i3), this.eu.useAudioElement || this.Ca(true), this._a.emit("_trackChange", i3.kind, i3), this.Oa(e3, !(t4 ? this.wa : this.Sa)), !n3)
                        return [3, 5];
                      o2.label = 2;
                    case 2:
                      return o2.trys.push([2, 4, , 5]), [4, this.resume(true, [t4 ? "video" : "audio"])];
                    case 3:
                      return o2.sent(), [3, 5];
                    case 4:
                      return o2.sent(), [3, 5];
                    case 5:
                      return [2];
                  }
                });
              });
            }, t3.prototype.setMirror = function(t4) {
              var i3 = this.eu.mirror = !!t4;
              this.ma && (this.ma.style.transform = i3 ? "rotateY(180deg)" : "");
            }, t3.prototype.setVideoMuted = function(t4) {
              return this.ya.info("zc.zsv id:".concat(this.id, " mute video: ").concat(t4, " isLocal:").concat(this.isLocal)), this.wa = t4, this.Oa(this.ma, !t4);
            }, t3.prototype.setAudioMuted = function(t4) {
              return this.ya.info("zc.zsv id:".concat(this.id, " mute audio: ").concat(t4, " isLocal:").concat(this.isLocal)), this.Sa = t4, this.Oa(this.pa, !t4);
            }, t3.prototype.setVolume = function(t4) {
              if (this.ya.info("zc.zsv id:".concat(this.id, " volume: ").concat(t4, " isLocal:").concat(this.isLocal)), this.pa) {
                var i3 = t4 > 100 ? 1 : t4 / 100;
                return this.pa.volume = i3, this.Aa && (this.Aa.gain.value = i3), this.pa.volume == i3;
              }
              return false;
            }, t3.prototype.takeStreamSnapshot = function(t4) {
              var i3 = this.ma;
              if (!i3)
                return "";
              if (!i3.srcObject)
                return "";
              var n3 = (0, G.FP)(this.ma.videoWidth, this.ma.videoHeight), e3 = n3.getContext("2d");
              e3 && e3.drawImage(this.ma, 0, 0, n3.width, n3.height);
              var r3 = n3.toDataURL("image/" + (null == t4 ? void 0 : t4.imageType) || 0, null == t4 ? void 0 : t4.quality), s3 = "png";
              return (null == t4 ? void 0 : t4.imageType) && (s3 = ["png", "jpeg"].includes(null == t4 ? void 0 : t4.imageType) ? null == t4 ? void 0 : t4.imageType : "png"), (null == t4 ? void 0 : t4.save) && n3.toBlob(function(i4) {
                var n4 = window.URL.createObjectURL(i4), e4 = G.VJ.createElement("a");
                e4.style.display = "none", e4.href = n4;
                var r4 = (null == t4 ? void 0 : t4.fileName) || "snapshot" + Date.now();
                e4.download = r4 + "." + s3, G.VJ.body.appendChild(e4), e4.click(), setTimeout(function() {
                  G.VJ.body.removeChild(e4), window.URL.revokeObjectURL(n4);
                }, 100);
              }), r3;
            }, t3.prototype.getVideoHeight = function() {
              return this.ma ? this.ma.videoHeight : 0;
            }, t3.prototype.getVideoWidth = function() {
              return this.ma ? this.ma.videoWidth : 0;
            }, t3.prototype.Ca = function(t4) {
              if (void 0 === t4 && (t4 = false), this.ga ? t4 && (this.ga.disconnect(), this.ga = this.ac.createMediaStreamSource(this.Ia)) : this.ga = this.ac.createMediaStreamSource(this.Ia), !this.Aa) {
                var i3 = this.Aa = this.ac.createGain();
                this.pa && (i3.gain.value = this.pa.volume);
              }
              return this.ga.connect(this.Aa), { gainNode: this.Aa, srcNode: this.ga };
            }, t3.prototype.Oa = function(t4, i3, n3) {
              var e3, r3, s3 = this;
              if (void 0 === n3 && (n3 = 0), !t4 || !this.Ra)
                return false;
              var o2 = !this.eu.useAudioElement, u2 = "VIDEO" === t4.tagName;
              if (this.ya.info("zc.zsv id:".concat(this.id, " mount play ").concat(t4.tagName)), i3) {
                if (!u2 && o2) {
                  t4.muted = true, t4.pause(), t4.remove(), this.Ca().gainNode.connect(this.ac.destination);
                  var a2 = "running";
                  this.ya.info("zc.zsv id:".concat(this.id, " render use audio context: ") + this.ac.state), this.ac.state !== a2 && this.ac.resume().then(function() {
                    s3.ac.state !== a2 && s3.ba(u2, t4);
                  });
                } else if ("live" === (null === (r3 = null === (e3 = null == t4 ? void 0 : t4.srcObject) || void 0 === e3 ? void 0 : e3.getTracks()[0]) || void 0 === r3 ? void 0 : r3.readyState)) {
                  var c2 = null, h2 = function() {
                    t4.oncanplay = null, c2 && (clearTimeout(c2), c2 = null), t4.play().then(function() {
                      Yo && !u2 && (s3.ya.info("zc.ac.rs id:".concat(s3.id, " honor suspend ac")), s3.ac.resume()), s3.ya.info("zc.zsv id:".concat(s3.id, " render  ").concat(t4.tagName, " use element success")), (0, Pe.HR)() && s3.Ea();
                    }).catch(function(i4) {
                      s3.ya.warn("zc.zsv 2: id:".concat(s3.id, " ").concat(t4.tagName, " play() error: ").concat(i4.message, " isLocal:").concat(s3.isLocal));
                      var n4 = s3._hasVideo, e4 = s3._hasAudio;
                      !(i4.message || "").includes("interrupted") && (s3._isMounted && u2 && n4 || !u2 && e4) && s3.ba(u2, t4, i4);
                    });
                  };
                  t4.muted = true, u2 || (this.Aa && this.Aa.disconnect(), t4.muted = false, t4.srcObject = t4.srcObject), Yo && !u2 && (this.ya.info("zc.ac.rs id:".concat(this.id, " honor resume ac")), this.ac.suspend()), t4.play().catch(function(i4) {
                    s3.ya.warn("zc.zsv 1: id:".concat(s3.id, " ").concat(t4.tagName, " play() error: ").concat(i4.message, " isLocal:").concat(s3.isLocal));
                  }), c2 = window.setTimeout(function() {
                    h2();
                  }, 1e3), t4.oncanplay = function() {
                    h2();
                  }, t4.onerror = function() {
                    var i4, e4, r4, o3, a3 = !(u2 ? s3.wa : s3.Sa);
                    s3.ya.error("zc.zsv id:".concat(s3.id, " ").concat(t4.tagName, " onerror:  ").concat(null === (i4 = t4.error) || void 0 === i4 ? void 0 : i4.code, " ").concat(null === (e4 = t4.error) || void 0 === e4 ? void 0 : e4.message, " ; times: ").concat(n3, " ; enable: ").concat(a3)), a3 && t4.error && (0 === n3 && 3 === (null === (r4 = t4.error) || void 0 === r4 ? void 0 : r4.code) ? (s3.ya.info("zc.zsv decode failed. retry again"), s3.Oa(t4, a3, n3++)) : (s3.ya.info("zc.zsv not retry on error. ".concat(n3, " ").concat(null === (o3 = t4.error) || void 0 === o3 ? void 0 : o3.code)), s3.ba(u2, t4, t4.error)));
                  }, !t4.parentNode && u2 && this.Ra.appendChild(t4);
                }
              } else if (t4.muted = true, t4.remove(), t4.pause(), !u2) {
                o2 && this.Aa && this.Aa.disconnect();
                var f2 = 5 * Math.random() + 4;
                setTimeout(function() {
                  !u2 && !t4.parentNode && t4.readyState > 3 && t4.load();
                }, 1e3 * f2);
              }
              return true;
            }, t3.prototype.on = function(t4, i3) {
              return !!i3 && this._a.addEventHandler(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this._a.removeEventHandler(t4, i3);
            }, t3.prototype.useAudioOut = function(t4) {
              var i3;
              return Ho(this, void 0, void 0, function() {
                var n3;
                return Vo(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return n3 = null === (i3 = this.pa) || void 0 === i3 ? void 0 : i3.setSinkId, n3 ? [4, n3.call(this.pa, t4)] : [3, 2];
                    case 1:
                      e3.sent(), e3.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }, t3.prototype.destroy = function() {
              this.stop();
              var t4 = this.ma, i3 = this.pa;
              (0, Pe.HR)() && (t4 && (t4.muted = false, t4.pause()), i3 && (i3.muted = false, i3.pause())), t4 && (t4.removeEventListener("canplay", this.ou.canPlayVideo), t4.srcObject = null, this.ma = null), i3 && (i3.removeEventListener("canplay", this.ou.canPlayAudio), i3.srcObject = null, this.pa = null), window.removeEventListener("focus", this.ou.focus), G.VJ.removeEventListener("visibilitychange", this.ou.visibilitychange), G.VJ.body.removeEventListener("mousedown", this.ou.resumePlayByClickBody), Ko.off("allowPlay", this.Ta), this.inited = false, this.Ta = null;
            }, t3.prototype.getAudioNodeAndStopRender = function() {
              var t4 = this.pa, i3 = this.eu;
              t4 && (t4.muted = true, t4.remove(), t4.pause());
              var n3 = this.Ca(true).gainNode;
              return i3.useAudioContext && n3.disconnect(), n3;
            }, t3;
          }(), Xo = function() {
            function t3(t4, i3) {
              this.source = t4, this.destination = i3, this.audioNodeList = [], this.source.disconnect(), this.source.connect(this.destination);
            }
            return Object.defineProperty(t3.prototype, "destinationNode", { get: function() {
              return this.destination;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "lastNode", { get: function() {
              return this.isEmpty() ? null : this.audioNodeList[this.audioNodeList.length - 1];
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "secondToLastNode", { get: function() {
              return this.audioNodeList.length < 2 ? null : this.audioNodeList[this.audioNodeList.length - 2];
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "firstNode", { get: function() {
              return this.isEmpty() ? null : this.audioNodeList[0];
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "secondNode", { get: function() {
              return this.audioNodeList.length < 2 ? null : this.audioNodeList[1];
            }, enumerable: false, configurable: true }), t3.prototype.pushBack = function(t4) {
              this.lastNode ? (this.lastNode.disconnect(), this.lastNode.connect(t4), t4.connect(this.destination)) : (this.source.disconnect(), this.source.connect(t4), t4.connect(this.destination)), this.audioNodeList.push(t4);
            }, t3.prototype.popBack = function() {
              this.lastNode && (this.lastNode.disconnect(), this.secondToLastNode ? (this.secondToLastNode.disconnect(), this.secondToLastNode.connect(this.destination)) : (this.source.disconnect(), this.source.connect(this.destination))), this.audioNodeList.pop();
            }, t3.prototype.pushFront = function(t4) {
              this.source.disconnect(), this.source.connect(t4), t4.connect(this.firstNode ? this.firstNode : this.destination), this.audioNodeList.unshift(t4);
            }, t3.prototype.popFront = function() {
              this.source.disconnect(), this.firstNode && (this.firstNode.disconnect(), this.source.connect(this.secondNode ? this.secondNode : this.destination)), this.audioNodeList.shift();
            }, t3.prototype.remove = function(t4) {
              var i3 = this.audioNodeList.indexOf(t4);
              if (-1 !== i3) {
                if (t4.disconnect(), i3 - 1 >= 0) {
                  var n3 = this.audioNodeList[i3 - 1];
                  n3.disconnect(), n3.connect(this.lastNode != t4 ? this.audioNodeList[i3 + 1] : this.destination);
                } else
                  this.source.disconnect(), this.source.connect(this.lastNode != t4 ? this.audioNodeList[i3 + 1] : this.destination);
                this.audioNodeList.splice(i3, 1);
              }
            }, t3.prototype.isConnected = function(t4) {
              return -1 !== this.audioNodeList.indexOf(t4);
            }, t3.prototype.isEmpty = function() {
              return 0 === this.audioNodeList.length;
            }, t3.prototype.replaceSource = function(t4) {
              this.source.disconnect(), t4.connect(this.firstNode ? this.firstNode : this.destination), this.source = t4;
            }, t3.prototype.replaceDestination = function(t4) {
              this.lastNode ? (this.lastNode.disconnect(), this.lastNode.connect(t4)) : (this.source.disconnect(), this.source.connect(t4)), this.destination = t4;
            }, t3;
          }(), Wo = o(1350), $o = function() {
            function t3() {
            }
            return t3.createError = function(t4, i3) {
              return { code: t4.code, message: t4.message + (i3 ? " " + i3 : "") };
            }, t3;
          }(), tu = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), iu = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, nu = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, eu = $o.createError, ru = function(t3) {
            function i3(i4, n3) {
              var e3 = t3.call(this) || this;
              return e3.track = i4, e3.streamCenter = n3, e3.isFirstNode = false, e3.isLastNode = false, e3;
            }
            return tu(i3, t3), Object.defineProperty(i3.prototype, "output", { get: function() {
              return { track: this.track };
            }, enumerable: false, configurable: true }), i3.prototype.setInput = function(t4) {
              return iu(this, void 0, void 0, function() {
                return nu(this, function(t5) {
                  throw eu({ code: -1, message: "Can not set track input to VideoSourceNode" });
                });
              });
            }, i3.prototype.process = function() {
            }, i3.prototype.destory = function() {
              this.track && (this.streamCenter.trackUtils.stopTrack(this.track), this.track = null), this.next = null;
            }, i3;
          }(Wo.E), su = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, ou = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, uu = function() {
            function t3(t4, i3, n3, e3, r3) {
              this.za = t4, this.Da = i3, this.gn = n3, this.browser = e3, this.preview = r3, this.Na = [], this._vcMgr = void 0, this.za.connect(this.Da);
            }
            return Object.defineProperty(t3.prototype, "vcMgr", { get: function() {
              return this._vcMgr;
            }, set: function(t4) {
              this._vcMgr || (this._vcMgr = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "lastNode", { get: function() {
              return this.isEmpty() ? null : this.Na[this.Na.length - 1];
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "secondToLastNode", { get: function() {
              return this.Na.length < 2 ? null : this.Na[this.Na.length - 2];
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "firstNode", { get: function() {
              return this.isEmpty() ? null : this.Na[0];
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "secondNode", { get: function() {
              return this.Na.length < 2 ? null : this.Na[1];
            }, enumerable: false, configurable: true }), t3.prototype.pushBack = function(t4) {
              return su(this, void 0, void 0, function() {
                return ou(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return this.lastNode ? (this.lastNode.setNodePos(void 0, false), [4, this.lastNode.connect(t4)]) : [3, 3];
                    case 1:
                      return i3.sent(), t4.setNodePos(false), [4, t4.connect(this.Da)];
                    case 2:
                      return i3.sent(), [3, 6];
                    case 3:
                      return [4, this.za.connect(t4)];
                    case 4:
                      return i3.sent(), t4.setNodePos(true), [4, t4.connect(this.Da)];
                    case 5:
                      i3.sent(), i3.label = 6;
                    case 6:
                      return this.Na.push(t4), [2];
                  }
                });
              });
            }, t3.prototype.popBack = function() {
              return su(this, void 0, void 0, function() {
                return ou(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return this.lastNode ? [4, this.lastNode.disconnect()] : [3, 7];
                    case 1:
                      return t4.sent(), this.secondToLastNode ? [4, this.secondToLastNode.disconnect()] : [3, 4];
                    case 2:
                      return t4.sent(), this.secondToLastNode.setNodePos(void 0, true), [4, this.secondToLastNode.connect(this.Da)];
                    case 3:
                      return t4.sent(), [3, 7];
                    case 4:
                      return [4, this.za.disconnect()];
                    case 5:
                      return t4.sent(), [4, this.za.connect(this.Da)];
                    case 6:
                      t4.sent(), t4.label = 7;
                    case 7:
                      return this.Na.pop(), [2];
                  }
                });
              });
            }, t3.prototype.pushFront = function(t4) {
              return su(this, void 0, void 0, function() {
                return ou(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return [4, this.za.disconnect()];
                    case 1:
                      return i3.sent(), this.firstNode && t4.setNodePos(void 0, void 0, false), [4, this.za.connect(t4)];
                    case 2:
                      return i3.sent(), this.firstNode ? (this.firstNode.setNodePos(false), t4.setNodePos(true, false), [4, t4.connect(this.firstNode)]) : [3, 4];
                    case 3:
                      return i3.sent(), [3, 6];
                    case 4:
                      return t4.setNodePos(true, true), [4, t4.connect(this.Da)];
                    case 5:
                      i3.sent(), i3.label = 6;
                    case 6:
                      return this.Na.unshift(t4), [2];
                  }
                });
              });
            }, t3.prototype.popFront = function() {
              return su(this, void 0, void 0, function() {
                return ou(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return [4, this.za.disconnect()];
                    case 1:
                      return t4.sent(), this.firstNode ? [4, this.firstNode.disconnect()] : [3, 6];
                    case 2:
                      return t4.sent(), this.secondNode ? (this.secondNode.setNodePos(false), [4, this.za.connect(this.secondNode)]) : [3, 4];
                    case 3:
                      return t4.sent(), [3, 6];
                    case 4:
                      return [4, this.za.connect(this.Da)];
                    case 5:
                      t4.sent(), t4.label = 6;
                    case 6:
                      return this.Na.shift(), [2];
                  }
                });
              });
            }, t3.prototype.remove = function(t4) {
              return su(this, void 0, void 0, function() {
                var i3, n3, e3;
                return ou(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return -1 === (i3 = this.Na.indexOf(t4)) ? [3, 13] : [4, t4.disconnect()];
                    case 1:
                      return r3.sent(), n3 = this.Na[i3 + 1], i3 - 1 >= 0 ? [4, (e3 = this.Na[i3 - 1]).disconnect()] : [3, 7];
                    case 2:
                      return r3.sent(), this.lastNode == t4 ? [3, 4] : (e3.setNodePos(void 0, false), [4, e3.connect(n3)]);
                    case 3:
                      return r3.sent(), [3, 6];
                    case 4:
                      return e3.setNodePos(void 0, true), [4, e3.connect(this.Da)];
                    case 5:
                      r3.sent(), r3.label = 6;
                    case 6:
                      return [3, 12];
                    case 7:
                      return [4, this.za.disconnect()];
                    case 8:
                      return r3.sent(), this.lastNode == t4 ? [3, 10] : (n3.setNodePos(true), [4, this.za.connect(n3)]);
                    case 9:
                      return r3.sent(), [3, 12];
                    case 10:
                      return [4, this.za.connect(this.Da)];
                    case 11:
                      r3.sent(), r3.label = 12;
                    case 12:
                      this.Na.splice(i3, 1), r3.label = 13;
                    case 13:
                      return [2];
                  }
                });
              });
            }, t3.prototype.isConnected = function(t4) {
              return -1 !== this.Na.indexOf(t4);
            }, t3.prototype.isEmpty = function() {
              return 0 === this.Na.length;
            }, t3.prototype.getSourceTrack = function() {
              var t4;
              return null === (t4 = this.za.output) || void 0 === t4 ? void 0 : t4.track;
            }, t3.prototype.getDestinationTrack = function() {
              var t4;
              return null === (t4 = this.Da.output) || void 0 === t4 ? void 0 : t4.track;
            }, t3.prototype.replaceNewSourceByTrack = function(t4, i3, n3) {
              var e3, r3, s3, o2;
              return void 0 === i3 && (i3 = true), su(this, void 0, void 0, function() {
                var u2;
                return ou(this, function(c2) {
                  switch (c2.label) {
                    case 0:
                      return (("firefox" === (u2 = this.browser) || "safari" === u2) && null !== (null === (e3 = this.vcMgr) || void 0 === e3 ? void 0 : e3.renderTrack) && null !== t4 && (null === (r3 = this.vcMgr) || void 0 === r3 ? void 0 : r3.renderTrack) !== t4 || "safari" === u2 && (null == n3 ? void 0 : n3.handleTrackType) === a.changeResolution) && (null === (s3 = this.preview.backgroundProcessor) || void 0 === s3 || s3.pauseRender(true)), [4, null === (o2 = this.vcMgr) || void 0 === o2 ? void 0 : o2.checkInit(t4, n3)];
                    case 1:
                      return c2.sent(), [4, this.replaceSource(new ru(t4, this.gn), i3)];
                    case 2:
                      return c2.sent(), [2];
                  }
                });
              });
            }, t3.prototype.replaceSource = function(t4, i3) {
              return void 0 === i3 && (i3 = true), su(this, void 0, void 0, function() {
                return ou(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return this.Da.setReplaceRemote(i3), this.firstNode ? [4, t4.connect(this.firstNode)] : [3, 2];
                    case 1:
                      return n3.sent(), [3, 4];
                    case 2:
                      return [4, t4.connect(this.Da)];
                    case 3:
                      n3.sent(), n3.label = 4;
                    case 4:
                      return this.za = t4, this.Da.setReplaceRemote(), [2];
                  }
                });
              });
            }, t3.prototype.replaceDestination = function(t4) {
              return su(this, void 0, void 0, function() {
                return ou(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return this.lastNode ? [4, this.lastNode.disconnect()] : [3, 3];
                    case 1:
                      return i3.sent(), [4, this.lastNode.connect(t4)];
                    case 2:
                      return i3.sent(), [3, 6];
                    case 3:
                      return [4, this.za.disconnect()];
                    case 4:
                      return i3.sent(), [4, this.za.connect(t4)];
                    case 5:
                      i3.sent(), i3.label = 6;
                    case 6:
                      return this.Da = t4, [2];
                  }
                });
              });
            }, t3.prototype.destroy = function() {
              for (var t4, i3 = 0; i3 < this.Na.length; i3++) {
                this.Na[i3].disconnect();
              }
              this.Na = [], this.Da.destroy(), this.za.destory(), null === (t4 = this.vcMgr) || void 0 === t4 || t4.destroy();
            }, t3;
          }(), au = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), cu = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, hu = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, fu = $o.createError, lu = function(t3) {
            function i3(i4, n3) {
              var e3 = t3.call(this) || this;
              return e3.Pa = i4, e3.browser = n3, e3.isFirstNode = false, e3.isLastNode = false, e3.track = null, e3.Ma = true, e3;
            }
            return au(i3, t3), i3.prototype.setReplaceRemote = function(t4) {
              void 0 === t4 && (t4 = true), this.Ma = t4;
            }, i3.prototype.setInput = function(t4) {
              return cu(this, void 0, void 0, function() {
                var i4, n3, e3, r3, s3 = this;
                return hu(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      if (null == (null == t4 ? void 0 : t4.track))
                        return [2];
                      if (!this.Pa.localStream)
                        throw fu({ code: -1, message: "preview haven't been inited." });
                      return this.track = i4 = null == t4 ? void 0 : t4.track, this.Pa.localStream.getVideoTracks()[0] === i4 ? [3, 4] : (n3 = this.Pa.localStream, (null == (e3 = this.Pa.zegoCaptureStream) ? void 0 : e3.stream) && (n3 = e3.stream), r3 = this.Pa.gn.getPublishList(n3), this.Ma && 0 !== r3.length ? [4, G.l3.all(r3.map(function(t5) {
                        return cu(s3, void 0, void 0, function() {
                          var n4;
                          return hu(this, function(e4) {
                            return (null === (n4 = t5.publisher) || void 0 === n4 ? void 0 : n4.previewer) ? [2, t5.publisher.replacePublishedTrack(i4, true)] : [2];
                          });
                        });
                      }))] : [3, 2]);
                    case 1:
                      return o2.sent(), [3, 4];
                    case 2:
                      return [4, this.Pa.replacePreviewTrack(i4, true)];
                    case 3:
                      o2.sent(), o2.label = 4;
                    case 4:
                      return [2];
                  }
                });
              });
            }, Object.defineProperty(i3.prototype, "output", { get: function() {
              return { track: this.track };
            }, enumerable: false, configurable: true }), i3.prototype.connect = function(t4) {
              return cu(this, void 0, void 0, function() {
                return hu(this, function(t5) {
                  throw fu({ code: -1, message: "video destination node cann't connect any video node." });
                });
              });
            }, i3.prototype.disconnect = function() {
              return cu(this, void 0, void 0, function() {
                return hu(this, function(t4) {
                  throw fu({ code: -1, message: "video destination node cann't disconnect any video node." });
                });
              });
            }, i3.prototype.destroy = function() {
              this.track = null;
            }, i3;
          }(Wo.E), du = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, vu = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, mu = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          };
          !function(t3) {
            t3[t3.inited = 0] = "inited", t3[t3.noInit = 1] = "noInit", t3[t3.initing = 2] = "initing";
          }(Go || (Go = {}));
          var pu = function() {
            function t3(t4, i3, n3) {
              var e3 = this;
              this.an = t4, this.ir = i3, this.customVC = n3, this.canvasTrack = null, this.gl = null, this.xa = 0, this.ja = 0, this.qa = Go.noInit, this.hasBeautyTask = false, this.hasBackgroundTask = false, this.backgroundLoop = null, this.eventHandler = { visibilitychange: function() {
                if (G.VJ.hidden) {
                  var t5 = function() {
                    return du(e3, void 0, void 0, function() {
                      return vu(this, function(i4) {
                        switch (i4.label) {
                          case 0:
                            return this.backgroundLoop = window.setTimeout(t5, Math.floor(1e3 / this.fps)), !G.VJ.hidden && this.backgroundLoop ? (clearTimeout(this.backgroundLoop), this.backgroundLoop = null, [2]) : [4, this.renderAFrame()];
                          case 1:
                            return i4.sent(), [2];
                        }
                      });
                    });
                  };
                  t5();
                } else
                  e3.backgroundLoop && (clearTimeout(e3.backgroundLoop), e3.backgroundLoop = null);
              } }, this.fps = 15, this.La = new xo();
            }
            return Object.defineProperty(t3.prototype, "initState", { set: function(t4) {
              this.qa = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "inited", { get: function() {
              return this.qa === Go.inited;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "beautyAndBackgroundProcess", { get: function() {
              return this.hasBackgroundTask && this.hasBeautyTask;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "renderTrack", { get: function() {
              return this.Ba;
            }, enumerable: false, configurable: true }), t3.prototype.init = function(t4, i3) {
              var n3;
              return du(this, void 0, void 0, function() {
                var e3;
                return vu(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      if (this.qa != Go.noInit)
                        return [3, 4];
                      this.qa = Go.initing, r3.label = 1;
                    case 1:
                      return r3.trys.push([1, 3, , 4]), [4, this.renderVideo(t4, i3)];
                    case 2:
                      return r3.sent(), this.qa = Go.inited, this.onInited(), [3, 4];
                    case 3:
                      return e3 = r3.sent(), this.qa = Go.noInit, this.onRenderFail(e3), e3.code === re.zcJ.code && "ended" === (null === (n3 = this.Ba) || void 0 === n3 ? void 0 : n3.readyState) && this.resetVideo(), [3, 4];
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.checkInit = function(t4, i3) {
              return du(this, void 0, void 0, function() {
                return vu(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return !t4 || "live" !== t4.readyState || this.Ba === t4 && (null == i3 ? void 0 : i3.handleTrackType) !== a.changeResolution ? [3, 2] : (this.qa = Go.noInit, [4, this.init(t4, i3)]);
                    case 1:
                      n3.sent(), n3.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }, t3.prototype.renderVideo = function(t4, i3) {
              var n3;
              return du(this, void 0, void 0, function() {
                var e3, r3, s3;
                return vu(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      return this.an.info("".concat(Co.kVV, " call")), null === t4 ? (this.Ba = t4, [2]) : this.Ba == t4 && (null == i3 ? void 0 : i3.handleTrackType) !== a.changeResolution ? [2] : (this.Ba = t4, this.videoEl || (this.videoEl = (0, G.sb)(), null === (n3 = this.videoEl) || void 0 === n3 || n3.setAttribute("style", "display:none")), [4, this.getPlayingVideo(this.videoEl, t4, i3)]);
                    case 1:
                      if (o2.sent(), e3 = t4.getSettings(), r3 = e3.width || this.videoEl.videoWidth, s3 = e3.height || this.videoEl.videoHeight, e3.frameRate && this.fps !== e3.frameRate && (this.fps = e3.frameRate, this.an.info(Co.kVV + " set target fps: " + this.fps)), this.an.info(Co.kVV + " video canvas render: width " + e3.width + " height " + e3.height), !r3 || !s3)
                        throw this.an.error(Co.kVV + " resolution of track is wrong"), re.zcJ;
                      return this.originWidth = r3, this.originHeight = s3, this.videoEl.setAttribute("width", r3.toString()), this.videoEl.setAttribute("height", s3.toString()), "safari" !== this.ir || (null == i3 ? void 0 : i3.handleTrackType) !== a.replaceNew && (null == i3 ? void 0 : i3.handleTrackType) !== a.changeResolution || this.resetCanvas(), this.initWegGl(), [2];
                  }
                });
              });
            }, t3.prototype.getPlayingVideo = function(t4, i3, n3) {
              return du(this, void 0, void 0, function() {
                var n4, e3, r3 = this;
                return vu(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      return t4.srcObject ? ((n4 = t4.srcObject).getTracks().forEach(function(t5) {
                        return n4.removeTrack(t5);
                      }), n4.addTrack(i3), "safari" !== (e3 = this.ir) && "firefox" !== e3 || (t4.srcObject = n4)) : t4.srcObject = new MediaStream([i3]), [4, new Promise(function(i4, n5) {
                        var e4 = function() {
                          0 == t4.videoWidth || 0 == t4.videoHeight ? n5(re.zcJ) : i4(void 0);
                        };
                        if (null == t4 ? void 0 : t4.paused) {
                          var s4 = null, o2 = function() {
                            e4(), s4 && (clearTimeout(s4), s4 = null), t4 && t4.removeEventListener("playing", o2);
                          };
                          s4 = window.setTimeout(function() {
                            s4 && (clearTimeout(s4), s4 = null), s4 = window.setTimeout(function() {
                              r3.an.warn(Co.kVV + " video track error"), t4 && t4.removeEventListener("playing", o2), n5(re.zcJ);
                            }, 1e3), t4.play().catch(function(t5) {
                              console.error(t5);
                            });
                          }, 1e3), t4 && t4.addEventListener("playing", o2), t4 && t4.play();
                        } else
                          t4 && t4.play(), setTimeout(function() {
                            e4();
                          }, 1e3);
                      })];
                    case 1:
                      return s3.sent(), [2];
                  }
                });
              });
            }, t3.prototype.resetVideo = function() {
              var t4;
              this.destroyVideo(), this.videoEl = (0, G.sb)(), null === (t4 = this.videoEl) || void 0 === t4 || t4.setAttribute("style", "display:none");
            }, t3.prototype.initWegGl = function() {
              var t4;
              if (this.an.info("".concat(Co.kNG, " call")), this.canvasEl || (this.an.info("".concat(Co.kNG, " no canvas")), this.customVC ? (this.canvasEl = document.getElementById("render_canvas"), this.canvasEl.width = this.originWidth, this.canvasEl.height = this.originHeight) : this.canvasEl = (0, G.FP)(this.originWidth, this.originHeight)), this.gl || (this.gl = null === (t4 = this.canvasEl) || void 0 === t4 ? void 0 : t4.getContext("webgl")), !this.gl)
                return this.an.warn("".concat(Co.kNG, " no gl")), void this.handleInitError({ code: 1001 });
              this.an.info("".concat(Co.kNG, " end"));
            }, t3.prototype.resetCanvas = function() {
              this.canvasEl = null, this.gl = null, this.canvasTrack = null;
            }, t3.prototype.getCanvasTrack = function(t4) {
              return this.an.info("".concat(Co.YNv, " get track")), this.canvasTrack && !t4 || !this.canvasEl || (this.canvasTrack = this.canvasEl.captureStream(this.fps).getVideoTracks()[0]), this.canvasTrack;
            }, t3.prototype.startRenderTask = function() {
              var t4 = this;
              this.an.info("".concat(Co.YNv, " start task"));
              var i3 = function() {
                return du(t4, void 0, void 0, function() {
                  return vu(this, function(t5) {
                    switch (t5.label) {
                      case 0:
                        return this.ja = requestAnimationFrame(i3), [4, this.renderAFrame()];
                      case 1:
                        return t5.sent(), [2];
                    }
                  });
                });
              };
              this.ja = requestAnimationFrame(i3), G.VJ.removeEventListener("visibilitychange", this.eventHandler.visibilitychange), G.VJ.addEventListener("visibilitychange", this.eventHandler.visibilitychange, false);
            }, t3.prototype.stopRenderTask = function() {
              this.an.info("".concat(Co.YNv, " stop task")), this.ja && (cancelAnimationFrame(this.ja), this.ja = 0), G.VJ.removeEventListener("visibilitychange", this.eventHandler.visibilitychange);
            }, t3.prototype.renderAFrame = function() {
              return du(this, void 0, void 0, function() {
                var t4, i3, n3;
                return vu(this, function(e3) {
                  return t4 = Date.now(), i3 = 1e3 / this.fps, (n3 = this.xa ? t4 - this.xa : i3) >= i3 && (this.xa = t4 - (n3 - i3), this.videoEl && this.videoEl.paused && this.videoEl.play(), this.videoEl && this.videoEl.videoWidth > 6 && this.videoEl.videoHeight > 6 && this.La.emit("renderFrame")), [2];
                });
              });
            }, t3.prototype.on = function(t4, i3) {
              return !!i3 && this.La.addEventHandler(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this.La.removeEventHandler(t4, i3);
            }, t3.prototype.actionListener = function(t4) {
              for (var i3, n3 = [], e3 = 1; e3 < arguments.length; e3++)
                n3[e3 - 1] = arguments[e3];
              (i3 = this.La).emit.apply(i3, mu([t4], n3, false));
            }, t3.prototype.setRenderTask = function(t4, i3) {
              this.an.info("".concat(Co.YNv, " set task ").concat(t4, " ").concat(i3)), "beauty" === i3 && (this.hasBeautyTask = t4), "background" === i3 && (this.hasBackgroundTask = t4), this.hasBeautyTask && !this.hasBackgroundTask ? this.startRenderTask() : this.stopRenderTask();
            }, t3.prototype.resetResolution = function(t4, i3) {
              this.originWidth = t4, this.originHeight = i3;
            }, t3.prototype.handleInitError = function(t4) {
              throw t4;
            }, t3.prototype.onInited = function() {
            }, t3.prototype.onRenderFail = function(t4) {
            }, t3.prototype.onRenderSuc = function() {
            }, t3.prototype.destroyVideo = function() {
              this.videoEl && (this.videoEl.pause(), this.videoEl.remove(), this.videoEl.srcObject = null, this.videoEl = null);
            }, t3.prototype.destroy = function() {
              this.an.info("".concat(Co.YNv, " dt")), this.destroyVideo(), this.canvasEl && (this.canvasEl.remove(), this.canvasEl = null), this.canvasTrack = null, this.Ba = null, this.gl = null, this.stopRenderTask(), this.hasBeautyTask = false, this.hasBackgroundTask = false, this.backgroundLoop && clearTimeout(this.backgroundLoop), this.backgroundLoop = null;
            }, t3;
          }();
          function gu(t3, i3, n3, e3, r3) {
            void 0 === n3 && (n3 = 1e3), void 0 === e3 && (e3 = 200);
            var s3 = t3.createAnalyser();
            s3.fftSize = 2048, i3.connect(s3);
            var o2 = null, u2 = 0, a2 = s3.fftSize, c2 = null, h2 = null, f2 = 0;
            function l2() {
              var t4 = 0;
              if (s3.getFloatTimeDomainData) {
                h2 || (h2 = new Float32Array(a2)), s3.getFloatTimeDomainData(h2);
                for (var i4 = 0; i4 < h2.length; i4++)
                  t4 = Math.max(t4, Math.abs(h2[i4]));
              } else {
                c2 || (c2 = new Uint8Array(a2)), s3.getByteTimeDomainData(c2);
                for (i4 = 0; i4 < c2.length; i4++)
                  t4 = Math.max(t4, Math.abs(c2[i4] - 128));
                t4 /= 128;
              }
              var d2 = 5e-3;
              e3 <= 100 ? d2 = 0.5 : e3 <= 200 ? d2 = 0.3 : e3 <= 300 ? d2 = 0.15 : e3 <= 500 ? d2 = 0.07 : e3 <= 1e3 && (d2 = 0.05), t4 > (u2 *= d2) && (u2 = t4), u2 > 1 && (u2 = 1);
              var v2 = Date.now();
              return 0 == f2 && (f2 = v2), (v2 - f2 >= n3 || e3 >= n3) && (f2 = v2, r3 && r3(u2)), e3 && (o2 = window.setTimeout(function() {
                o2 && clearTimeout(o2), l2();
              }, e3));
            }
            return n3 < 100 && (n3 = 100), e3 < 100 && (e3 = 100), n3 < e3 && (e3 = n3), e3 && (o2 = window.setTimeout(function() {
              l2();
            }, e3)), "running" !== t3.state && t3.resume(), { analyzer: s3, destroy: function() {
              s3.disconnect(), null !== o2 && (clearInterval(o2), e3 = 0, o2 = null), u2 = 0, c2 = null, h2 = null;
            }, setInterval: function(t4) {
              t4 > 30 && (n3 = t4);
            } };
          }
          var bu = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, _u = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, yu = "zc.smw", wu = new Blob(['\nclass VolumeMeter extends AudioWorkletProcessor {\n  constructor() {\n    super();\n    this.volume = 0;\n    this.intervalTime = 1000;\n    this.tick = this.intervalTime;\n    this.isStop = false;\n    this.port.onmessage = event => {\n      const { data } = event;\n      switch (data.name) {\n        case "setIntervalTime":\n          this.intervalTime = data.intervalTime;\n          break;\n        case "stop":\n          this.isStop = true;\n          break;\n      }\n    };\n  }\n  process(inputs) {\n    const input = inputs[0];\n    if (this.isStop) {\n      return false;\n    }\n    if (input.length > 0) {\n      const buffer = input[0];\n      let maxVal = this.volume;\n      for (let i = 0; i < buffer.length; i++) {\n        if (maxVal < buffer[i]) {\n          maxVal = buffer[i];\n        }\n      }\n      this.volume = maxVal;\n      this.tick -= buffer.length;\n      if (this.tick < 0) {\n        this.tick += (this.intervalTime / 1000) * sampleRate;\n        this.port.postMessage({ volume: this.volume });\n        this.volume = 0;\n      }\n    }\n    return true;\n  }\n}\ntry {\n  registerProcessor("meter", VolumeMeter);\n} catch (error) {\n  \n}  \n'], { type: "application/javascript" }), Su = function() {
            function t3() {
            }
            return t3.addModuleToContext = function(t4, i3) {
              return bu(this, void 0, void 0, function() {
                var n3;
                return _u(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return e3.trys.push([0, 2, , 3]), i3.info(yu + " worklet addModule call"), [4, t4.audioWorklet.addModule(URL.createObjectURL(wu))];
                    case 1:
                      return e3.sent(), i3.info(yu + " worklet addModule success"), this.isSuccess = true, [2];
                    case 2:
                      return n3 = e3.sent(), i3.warn(yu + " worklet addModule catch error. ".concat(null == n3 ? void 0 : n3.message)), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.isSuccess = false, t3;
          }(), Eu = function() {
            function t3(t4, i3, n3, e3) {
              void 0 === n3 && (n3 = 1e3), void 0 === e3 && (e3 = 200), this.an = t4, this.pn = i3, this.Ua = n3, this.Ga = e3, this.Ja = null, this.Fa = null, this.Ha = null, this.volume = 0, this.onSoundLevelUpdate = function(t5) {
              };
            }
            return t3.prototype.preload = function(t4) {
              return bu(this, void 0, void 0, function() {
                return _u(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return !Su.isSuccess ? [4, Su.addModuleToContext(t4, this.an)] : [3, 2];
                    case 1:
                      i3.sent(), i3.label = 2;
                    case 2:
                      return [2];
                  }
                });
              });
            }, t3.prototype.initAudioWorklet = function(t4, i3) {
              return bu(this, void 0, void 0, function() {
                var n3, r3, s3 = this;
                return _u(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      if (this.Ja)
                        return [3, 5];
                      o2.label = 1;
                    case 1:
                      if (o2.trys.push([1, 3, , 4]), function(t5) {
                        return !!(0, B.JO)(t5.createAnalyser);
                      }(t4) && this.pn.settingConfig.getSetting("sound_level_api_type") !== e2.EA.useWorklet)
                        throw "use analyzer";
                      return this.an.info(yu + " use AudioWorklet. "), [4, this.preload(t4)];
                    case 2:
                      return o2.sent(), (n3 = this.Ja = new AudioWorkletNode(t4, "meter")).port.onmessage = function(t5) {
                        s3.onSoundLevelUpdate && s3.onSoundLevelUpdate(t5.data.volume || 0);
                      }, i3.connect(n3).connect(t4.destination), this.setInterval(this.Ua), [3, 4];
                    case 3:
                      return r3 = o2.sent(), this.an.info(yu + " not use AudioWorklet. " + r3), this.Ha = gu(t4, i3, this.Ua, this.Ga, function(t5) {
                        s3.onSoundLevelUpdate && s3.onSoundLevelUpdate(t5 || 0);
                      }), [3, 4];
                    case 4:
                      return [3, 6];
                    case 5:
                      i3.connect(this.Ja).connect(t4.destination), o2.label = 6;
                    case 6:
                      return [2];
                  }
                });
              });
            }, t3.prototype.getSrcSource = function(i3, n3) {
              var e3 = n3.getAudioTracks()[0], r3 = n3.id, s3 = t3.sourceList[r3] || {}, o2 = s3.source, u2 = s3._ac, a2 = s3.trackid;
              return o2 && u2 === i3 && a2 === (null == e3 ? void 0 : e3.id) || (o2 && o2.disconnect(), o2 = i3.createMediaStreamSource(n3), t3.sourceList[r3] = { source: o2, _ac: u2 = i3, trackid: a2 = e3.id }), o2;
            }, t3.prototype.replaceSrcSource = function(i3, n3) {
              var e3;
              t3.sourceDisConnect(n3);
              var r3 = this.getSrcSource(i3, n3);
              return (null === (e3 = this.Ha) || void 0 === e3 ? void 0 : e3.analyzer) && r3.connect(this.Ha.analyzer), r3;
            }, t3.sourceDisConnect = function(i3) {
              var n3 = i3.id, e3 = (t3.sourceList[n3] || {}).source;
              e3 && (e3.disconnect(), delete t3.sourceList[n3]);
            }, t3.prototype.setInterval = function(t4) {
              var i3 = this.Ja;
              this.Ua = t4, i3 && i3.port.postMessage({ name: "setIntervalTime", intervalTime: t4 }), this.Ha && this.Ha.setInterval(t4);
            }, t3.prototype.destroy = function() {
              this.Fa && (this.Fa.onaudioprocess = null, this.Fa.disconnect()), this.Ha && (this.Ha.destroy(), this.Ha = null), this.Ja && (this.Ja.port.postMessage({ name: "stop" }), this.Ja.port.onmessage = null, this.Ja.port.close(), this.Ja.disconnect(), this.an.info(yu + " close worklet")), this.Ja = null, this.Fa = null;
            }, t3.sourceList = {}, t3;
          }(), ku = null, Ou = null;
          function Iu(t3) {
            return isNaN(t3) ? 0 : Math.max(-32768, Math.min(32767, Math.round(32767 * t3)));
          }
          var Ru = null, Tu = null;
          function Cu(t3, i3, n3, e3, r3) {
            void 0 === e3 && (e3 = 1), void 0 === r3 && (r3 = false);
            var s3 = 1;
            if (!i3 || !n3 || i3 === n3) {
              if (r3) {
                for (var o2 = new Int16Array(t3.length), u2 = 0; u2 < t3.length; u2++)
                  o2[u2] = Iu(t3[u2]);
                return o2;
              }
              return t3;
            }
            if ((s3 = i3 / n3) <= 0)
              throw new Error("Invalid sample rate ratio");
            if (e3 <= 0)
              throw new Error("Invalid channel count");
            var a2, c2 = t3.length / e3, h2 = Math.round(c2 / s3), f2 = h2 * e3;
            r3 ? ((!Tu || f2 > Tu.length) && (Tu = new Int16Array(f2)), a2 = Tu) : ((!Ru || f2 > Ru.length) && (Ru = new Float32Array(f2)), a2 = Ru);
            for (var l2 = function(t4, i4, n4, e4, r4) {
              var s4 = r4 * r4, o3 = e4 - n4 - t4 + i4;
              return o3 * r4 * s4 + (t4 - i4 - o3) * s4 + (n4 - t4) * r4 + i4;
            }, d2 = 0; d2 < e3; d2++)
              for (u2 = 0; u2 < h2; u2++) {
                var v2 = u2 * s3, m2 = Math.floor(v2), p2 = v2 - m2, g2 = Math.max(0, m2 - 1) * e3 + d2, b2 = m2 * e3 + d2, _2 = Math.min(c2 - 1, m2 + 1) * e3 + d2, y2 = Math.min(c2 - 1, m2 + 2) * e3 + d2, w2 = t3[g2], S2 = t3[b2], E2 = t3[_2], k2 = t3[y2], O2 = l2(w2, S2, E2, k2, p2), I2 = Math.min(w2, S2, E2, k2), R2 = Math.max(w2, S2, E2, k2);
                O2 = Math.max(I2, Math.min(R2, O2)), a2[u2 * e3 + d2] = r3 ? Iu(O2) : O2;
              }
            return a2.slice(0, f2);
          }
          function Au(t3, i3, n3, e3, r3) {
            void 0 === r3 && (r3 = false), n3 && e3 && n3 !== e3 && (t3 = t3.map(function(t4) {
              return Cu(t4, n3, e3);
            }));
            var s3 = t3.length, o2 = t3[0];
            if (!o2)
              return r3 ? new Int16Array() : new Float32Array();
            var u2 = o2.length * i3;
            r3 ? (!(0, B.Cp)(Ou) || u2 > Ou.length) && (Ou = new Int16Array(u2)) : (!(0, B.j5)(ku) || u2 > ku.length) && (ku = new Float32Array(u2));
            var a2 = r3 ? Ou : ku;
            if (1 === s3 && 1 === i3) {
              if (!r3)
                return o2;
              for (var c2 = 0; c2 < o2.length; c2++)
                a2[c2] = Iu(o2[c2]);
            } else
              for (c2 = 0; c2 < o2.length; c2++)
                2 === i3 ? r3 ? (a2[c2 * i3] = Iu(o2[c2]), a2[c2 * i3 + 1] = Iu(2 === s3 ? t3[1][c2] : o2[c2])) : (a2[c2 * i3] = o2[c2], a2[c2 * i3 + 1] = 2 === s3 ? t3[1][c2] : o2[c2]) : a2[c2] = r3 ? Iu((o2[c2] + t3[1][c2]) / 2) : (o2[c2] + t3[1][c2]) / 2;
            var h2 = a2.slice(0, o2.length * i3);
            return r3 ? null == Ou || Ou.fill(0) : null == ku || ku.fill(0), h2;
          }
          function zu(t3, i3, n3, e3, r3) {
            void 0 === r3 && (r3 = false);
            var s3 = t3;
            if ((n3 && e3 && n3 !== e3 || r3) && (s3 = t3.map(function(t4) {
              return Cu(t4, n3, e3, 1, r3);
            })), 1 === i3 && 2 === t3.length) {
              var o2 = void 0;
              o2 = r3 ? new Int16Array(s3[0]) : new Float32Array(s3[0]);
              var u2 = s3[1];
              s3 = [o2];
              for (var a2 = 0; a2 < o2.length; a2++)
                o2[a2] = (o2[a2] + u2[a2]) / 2;
            } else if (2 === i3 && 1 === t3.length) {
              u2 = void 0;
              u2 = r3 ? new Int16Array(s3[0]) : new Float32Array(s3[0]), s3 = [s3[0], u2];
            }
            return s3;
          }
          var Du, Nu, Pu, Mu, xu = function() {
            function t3(t4, i3) {
              this.ac = t4, this.an = i3, this.useScript = false, this.Va = null, this.Qa = null, this.Ya = 4096;
            }
            return t3.prototype.setAudioFrameCallback = function(t4, i3, n3, e3) {
              var r3, s3, o2, u2 = this;
              this.an.info("zc.apdp.safc.0 ".concat(t4.id, " ").concat(i3, " ").concat(JSON.stringify(e3)));
              var a2 = (null == e3 ? void 0 : e3.frameSize) || this.Ya;
              if (i3)
                if (this.ga || (this.ga = this.ac.createMediaStreamSource(t4)), this.useScript)
                  this.Va || (this.Va = this.ac.createScriptProcessor(a2), this.Va.onaudioprocess = function(t5) {
                    for (var i4 = 0; i4 < t5.outputBuffer.numberOfChannels; i4 += 1)
                      for (var r4 = t5.outputBuffer.getChannelData(i4), s4 = 0; s4 < r4.length; s4 += 1)
                        r4[s4] = 0;
                    var o3 = t5.inputBuffer.numberOfChannels, a3 = [];
                    try {
                      if (o3 > 0)
                        for (var c2 = 0; c2 < o3; c2++) {
                          var h2 = t5.inputBuffer.getChannelData(c2);
                          a3.push(h2);
                        }
                      var f2 = e3 || {}, l2 = f2.sampleRate, d2 = f2.bitDepth, v2 = f2.channelCount, m2 = t5.inputBuffer.sampleRate, p2 = v2 || o3, g2 = l2 || m2, b2 = 16 === d2;
                      if (f2.mergeChannelsIntoPcm) {
                        var _2 = Au(a3, p2, m2, g2, b2);
                        n3({ channels: [], channelCount: p2, sampleRate: g2, pcm: _2 });
                      } else if ([l2, v2, d2].some(function(t6) {
                        return !(0, B.TE)(t6);
                      })) {
                        var y2 = zu(a3, p2, m2, g2, b2);
                        n3({ channels: y2, channelCount: p2, sampleRate: g2 });
                      } else
                        n3({ channels: a3, channelCount: o3, sampleRate: m2 });
                    } catch (t6) {
                      u2.an.info("zc.apdp.safc.0 script fail ".concat(t6.toString()));
                    }
                  }, this.an.info("zc.apdp.safc.0 create _zgp_scriptNode")), this.ga.connect(this.Va), this.Va.connect(this.ac.destination);
                else {
                  if (!this.Qa) {
                    try {
                      this.Qa = new AudioWorkletNode(this.ac, "audio-pcm-data-processor", { processorOptions: { bufferSize: a2 } });
                    } catch (t5) {
                      this.an.error("zc.apdp.safc.0 create worklet fail ".concat(t5.toString()));
                    }
                    if (this.Qa) {
                      this.Qa.port.onmessage = function(t5) {
                        if ("process" === t5.data.type)
                          try {
                            var i4 = t5.data, r4 = i4.channels, s4 = i4.channelCount, o3 = e3 || {}, u3 = o3.sampleRate, a3 = o3.bitDepth, c2 = o3.channelCount, h2 = i4.sampleRate, f2 = c2 || s4, l2 = u3 || h2, d2 = 16 === a3;
                            if (o3.mergeChannelsIntoPcm) {
                              var v2 = Au(r4, f2, h2, l2, d2);
                              n3({ channels: [], channelCount: f2, sampleRate: l2, pcm: v2 });
                            } else if ([u3, c2, a3].some(function(t6) {
                              return !(0, B.TE)(t6);
                            })) {
                              var m2 = zu(r4, f2, h2, l2, d2);
                              n3({ channels: m2, channelCount: f2, sampleRate: l2 });
                            } else
                              n3({ channels: r4, channelCount: s4, sampleRate: h2 });
                          } catch (t6) {
                            throw t6;
                          }
                      }, this.an.info("zc.apdp.safc.0 init worklet");
                    }
                  }
                  this.Qa && this.ga.connect(this.Qa), null === (r3 = this.Qa) || void 0 === r3 || r3.connect(this.ac.destination);
                }
              else {
                try {
                  this.Qa && (null === (s3 = this.ga) || void 0 === s3 || s3.disconnect(this.Qa)), this.Va && (null === (o2 = this.ga) || void 0 === o2 || o2.disconnect(this.Va));
                } catch (t5) {
                  this.an.info("zc.apdp.safc.0 ".concat(JSON.stringify(t5)));
                }
                this.ga = null;
              }
            }, t3.prototype.replaceSource = function(t4) {
              var i3, n3;
              if (this.an.info("zc.apdp.rs.0 ".concat(t4.id)), this.ga) {
                var e3 = this.ac.createMediaStreamSource(t4);
                this.Qa && (null === (i3 = this.ga) || void 0 === i3 || i3.disconnect(this.Qa), e3.connect(this.Qa)), this.Va && (null === (n3 = this.ga) || void 0 === n3 || n3.disconnect(this.Va), e3.connect(this.Va)), this.ga = null, this.ga = e3;
              }
            }, t3.prototype.destroy = function() {
              var t4, i3;
              this.an.info("zc.apdp.ds.0 call"), this.Qa && (this.Qa.port.close(), null === (t4 = this.ga) || void 0 === t4 || t4.disconnect(this.Qa), this.Qa.disconnect(), this.an.info("zc.apdp.ds.0 destroy worklet")), this.Va && (this.Va.onaudioprocess = null, null === (i3 = this.ga) || void 0 === i3 || i3.disconnect(this.Va), this.Va.disconnect(), this.an.info("zc.apdp.ds.0 close script processor")), this.Qa = null, this.Va = null, this.ga = null, this.an.info("zc.apdp.ds.0 end");
            }, t3;
          }(), ju = function() {
            function t3() {
              this.listenerMap = /* @__PURE__ */ new WeakMap();
            }
            return t3.prototype.bind = function(t4, i3) {
              this.listenerMap.has(t4) || this.listenerMap.set(t4, []);
              var n3 = this.listenerMap.get(t4), e3 = { add: function(t5, r3) {
                return "addEventListener" in i3 ? (n3.push(function() {
                  return i3.removeEventListener(t5, r3);
                }), i3.addEventListener(t5, r3)) : "on" in i3 && (n3.push(function() {
                  return i3.off(t5, r3);
                }), i3.on(t5, r3)), e3;
              } };
              return e3;
            }, t3.prototype.cleanup = function(t4) {
              var i3 = this.listenerMap.get(t4);
              i3 && (i3.forEach(function(t5) {
                return t5();
              }), this.listenerMap.delete(t4));
            }, t3;
          }(), qu = function() {
            return qu = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, qu.apply(this, arguments);
          }, Lu = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Bu = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Uu = ["videoInput", "videoQuality", "facingMode", "width", "height", "frameRate", "videoOptimizationMode"], Gu = ["audioInput", "channelCount", "ANS", "AGC", "AEC"], Ju = function() {
            function t3(t4, i3, n3, e3, r3) {
              this.an = t4, this.pn = i3, this.gn = n3, this.previewType = e3, this.onlyPreview = r3, this.Ka = { width: 0, height: 0, frameRate: 0, bitRate: 0, minBitrate: 0, startBitrate: "default", keyFrameInterval: 2, channelCount: 1, audioBitrate: 48e3, contentHint: "" }, this.rtcViewer = null, this.streamFromCanvas = false, this.streamFromCanvasTrack = null, this.previewSuc = false, this.soundLevel = 0, this.hasEmptyAudioTrack = false, this.Za = null, this.voiceProccessor = null, this.lastTrackEndTime = { audio: 0, video: 0 }, this.script = null, this.mic = null, this.eventListenerManager = new ju(), this.Xa = null, this._videoTrack = null, this.cloneVideoTrack = null, this.originVideoTrack = null, this.originAudioTrack = null, this.activateSEIConfig = null, this.Wa = true, this.hasStopCaptureVideo = false, this.$a = true, this.gainNode = null, this.cameraMaxResolution = {}, this.enableDualStream = false, this.lowStreamConfig = { width: 160, height: 120, frameRate: 15, bitRate: 50 }, this._c = null, this.syncVideoEnabled = false, this.syncAudioEnabled = false, this.hasMicTrack = true, this.soundMeterWorklet = null, this.audioMixManager = null, this.volume = 100, this.volumeFactor = 1, this.logger = t4, this.stateCenter = i3, this.streamCenter = n3, e3 && (this.videoPreviewType = e3, this.audioPreviewType = e3);
            }
            return Object.defineProperty(t3.prototype, "localStream", { get: function() {
              return this.xu;
            }, set: function(t4) {
              this.xu = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "videoInfo", { get: function() {
              return this.Ka;
            }, set: function(t4) {
              this.Ka = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "mediaStreamConfig", { get: function() {
              return this.Sc;
            }, set: function(t4) {
              this.Sc = t4;
            }, enumerable: false, configurable: true }), t3.prototype.getEmptyAudioTrack = function() {
              if (!this.Za) {
                var t4 = this.gn.ac.createMediaStreamDestination(), i3 = t4 ? t4.stream : null, n3 = this.Za = i3 ? i3.getAudioTracks()[0] : null;
                this.an.info("zp.geat " + "empty audio id: ".concat(null == n3 ? void 0 : n3.id));
              }
              return this.Za;
            }, t3.prototype.checkAudioExceptionEnded = function(t4) {
              var i3;
              t4 && (this.gn.trackUtils.isTrackStopBySDK(t4) || this.xu && "camera" === this.audioPreviewType && this.gn.getPublishList(this.xu).length > 0 && t4.id === (null === (i3 = this.Xa) || void 0 === i3 ? void 0 : i3.id) && (this.pn.actionListener("_deviceError", re.T1C.code, t4.label, "micro"), this.pn.actionListener("deviceError", re.T1C.code, t4.label), this.gn.checkDeviceChange && this.gn.checkDeviceChange()));
            }, t3.prototype.checkVideoExceptionEnded = function(t4) {
              var i3;
              t4 && (this.gn.trackUtils.isTrackStopBySDK(t4) || this.xu && "camera" === this.videoPreviewType && this.gn.getPublishList(this.xu).length > 0 && t4.id === (null === (i3 = this.videoTrack) || void 0 === i3 ? void 0 : i3.id) && (this.pn.actionListener("_deviceError", re.zgf.code, t4.label, "camera"), this.pn.actionListener("deviceError", re.zgf.code, t4.label), this.gn.checkDeviceChange && this.gn.checkDeviceChange()));
            }, t3.prototype.bindAudioTrackEvent = function(t4) {
              var i3 = this;
              this.eventListenerManager.bind(t4, t4).add("ended", function() {
                i3.logger.info("zp.pv.te audio track ended"), i3.lastTrackEndTime.audio = performance.now(), i3.checkAudioExceptionEnded(t4);
              }).add("mute", function() {
                i3.logger.info("zp.pv.te audio track mute");
              }).add("unmute", function() {
                i3.logger.info("zp.pv.te audio track unmute");
              });
            }, t3.prototype.bindVideoTrackEvent = function(t4) {
              var i3 = this;
              this.eventListenerManager.bind(t4, t4).add("ended", function() {
                i3.logger.info("zp.pv.te video track ended"), i3.lastTrackEndTime.video = performance.now(), i3.checkVideoExceptionEnded(t4);
              }).add("mute", function() {
                i3.logger.info("zp.pv.te video track mute");
              }).add("unmute", function() {
                i3.logger.info("zp.pv.te video track unmute");
              });
            }, t3.prototype.removeAudioTrackEvent = function(t4) {
              this.eventListenerManager.cleanup(t4);
            }, t3.prototype.removeVideoTrackEvent = function(t4) {
              this.eventListenerManager.cleanup(t4);
            }, Object.defineProperty(t3.prototype, "audioTrack", { get: function() {
              var t4;
              return this.Xa || (null === (t4 = this.xu) || void 0 === t4 ? void 0 : t4.getAudioTracks()[0]) || null;
            }, set: function(t4) {
              this.Xa !== t4 && (this.Xa && this.removeAudioTrackEvent(this.Xa), this.Xa = t4, t4 && !this.onlyPreview && this.bindAudioTrackEvent(t4));
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "videoTrack", { get: function() {
              var t4;
              return this._videoTrack || (null === (t4 = this.xu) || void 0 === t4 ? void 0 : t4.getVideoTracks()[0]) || null;
            }, set: function(t4) {
              this._videoTrack !== t4 && (this._videoTrack && this.removeVideoTrackEvent(this._videoTrack), this._videoTrack = t4, t4 && !this.onlyPreview && this.bindVideoTrackEvent(t4));
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isAudioEnabled", { get: function() {
              return this.Wa;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isVideoEnabled", { get: function() {
              return this.$a;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "muteImage", { get: function() {
              return this._c;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "videoNodeQueue", { get: function() {
              if (!this.Tc) {
                if (!this._videoTrack)
                  throw new Error("cannot use video node queue, because videoTrack of previewer haven't been inited.");
                var t4 = new ru(this._videoTrack, this.gn), i3 = new lu(this, this.pn.browser);
                this.Tc = new uu(t4, i3, this.gn, this.pn.browser, this), this.vcMgr && (this.Tc.vcMgr = this.vcMgr);
              }
              return this.Tc;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isVideoNodeQueueEnabled", { get: function() {
              return this.Tc && !this.Tc.isEmpty();
            }, enumerable: false, configurable: true }), t3.prototype.getDestinationTrack = function() {
              return !this.Tc || this.Tc.isEmpty() ? null : this.videoNodeQueue.getDestinationTrack();
            }, Object.defineProperty(t3.prototype, "ac", { get: function() {
              return this.gn.ac;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "acMgr", { get: function() {
              return this.gn.acMgr;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "vcMgr", { get: function() {
              if (!this._vcMgr) {
                if (!this._videoTrack)
                  throw new Error("cannot use video node queue, because videoTrack of previewer haven't been inited.");
                this._vcMgr = new pu(this.logger, this.pn.browser, this.gn.isCustomVC), this.Tc && (this.Tc.vcMgr = this.vcMgr);
              }
              return this._vcMgr;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "containBackgroundProcess", { get: function() {
              var t4 = this;
              return "compositing" === this.previewType ? this.inputStreamOptions.some(function(i3) {
                if (i3.stream) {
                  var n3 = t4.gn.checkPreview(i3.stream);
                  return null == n3 ? void 0 : n3.isBackgroundBlur;
                }
              }) : !!this.isBackgroundBlur;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "micTrack", { get: function() {
              return this.hasMicTrack && "camera" === this.audioPreviewType && this.audioTrack || null;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isVideoEffectStarting", { get: function() {
              return !!this.videoEffect && this.videoEffect.isStarting;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isVideoEffectEnabled", { get: function() {
              return !!this.videoEffect && this.videoEffect.enabled;
            }, enumerable: false, configurable: true }), t3.prototype.getMediaStreamConstraints = function(t4, i3) {
              var n3 = { audio: null, video: null }, e3 = (0, Pe.UN)();
              if (e3 && e3.includes("11_4") || (t4 = Ra(this.pn, this.an, t4), t4 = to(t4)), n3.audio = true, n3.video = { width: this.pn.settingConfig.getSetting("camera_width") || 640, height: this.pn.settingConfig.getSetting("camera_height") || 480, frameRate: this.pn.settingConfig.getSetting("camera_framerate") || 15, bitRate: this.pn.settingConfig.getSetting("camera_video_bitrate") }, t4.audio) {
                var r3 = this.pn.settingConfig.getCloudSettingScenario(this.pn.scenario);
                this.logger.info("zp.gmsc.2 audio cloud config " + JSON.stringify(r3));
                var s3 = r3.ANS, o2 = r3.AGC, u2 = r3.AEC;
                n3.audio = {}, t4.audioInput && "undefined" !== t4.audioInput && (n3.audio.deviceId = { exact: t4.audioInput }), n3.audio.noiseSuppression = s3, n3.audio.autoGainControl = o2, n3.audio.echoCancellation = u2, (0, B.dd)(t4.ANS) && (n3.audio.noiseSuppression = t4.ANS), (0, B.dd)(t4.AGC) && (n3.audio.autoGainControl = t4.AGC), (0, B.dd)(t4.AEC) && (n3.audio.echoCancellation = t4.AEC), n3.audio.channelCount = (0, B.Cs)(t4.channelCount) ? t4.channelCount : 1;
              } else
                false === t4.audio && (n3.audio = false);
              if (t4.video) {
                var a2 = 640, c2 = 480, h2 = 15, f2 = this.pn.settingConfig.getSetting("camera_video_bitrate");
                if (1 === t4.videoQuality ? (a2 = w.width, c2 = w.height, h2 = w.frameRate, f2 = w.bitRate) : 2 === t4.videoQuality ? (a2 = S.width, c2 = S.height, h2 = S.frameRate, f2 = S.bitRate) : 3 === t4.videoQuality ? (a2 = E.width, c2 = E.height, h2 = E.frameRate, f2 = E.bitRate) : (a2 = t4.width || 640, c2 = t4.height || 480, h2 = t4.frameRate || 15, f2 = t4.bitRate || this.pn.settingConfig.getSetting("camera_video_bitrate"), this.an.info("zp.gmsc.2 quality: ", t4.videoQuality)), i3 && !t4.videoQuality && (t4.width && (a2 = t4.width), t4.height && (c2 = t4.height), t4.frameRate && (h2 = t4.frameRate), t4.bitRate && (f2 = t4.bitRate)), false === t4.horizontal) {
                  var l2 = c2;
                  c2 = a2, a2 = l2;
                }
                if (true === t4.isSwitch) {
                  l2 = c2;
                  c2 = a2, a2 = l2;
                }
                n3.video = { width: 2 * Math.floor(Number(a2) / 2), height: 2 * Math.floor(Number(c2) / 2), frameRate: h2, bitRate: f2 }, null != t4.facingMode ? n3.video.facingMode = t4.facingMode : t4.videoInput && "undefined" != t4.videoInput && (n3.video.deviceId = { exact: t4.videoInput }), this.an.info("zp.gmsc.2 width: " + a2 + " height: " + c2 + " rate: " + h2);
              } else
                false === t4.video && (n3.video = false);
              return { mediaStreamConstraints: n3, mediaStreamConfig: t4 };
            }, t3.prototype.startPreview = function(t4, i3, n3, e3) {
              return Lu(this, void 0, void 0, function() {
                var r3, s3, o2;
                return Bu(this, function(u2) {
                  switch (u2.label) {
                    case 0:
                      if (this.an.info("zp.sv.2 called " + JSON.stringify(t4)), this.Sc = qu({}, t4), false === t4.video && this.deleteConstraints(this.Sc, Uu), false === t4.audio && this.deleteConstraints(this.Sc, Gu), this.an.info("zp.sv.2 store " + JSON.stringify(this.Sc)), r3 = function(t5) {
                        i3(t5);
                      }, (0, B.dr)(t4.source) || (0, B.Si)(t4.source)) {
                        try {
                          s3 = this.Uc(t4), r3 && r3(s3);
                        } catch (t5) {
                          n3(t5);
                        }
                        return [2];
                      }
                      return void 0 !== navigator.mediaDevices && null != navigator.mediaDevices.getUserMedia ? [3, 1] : (n3 && n3(L.eU.error.yn), [2]);
                    case 1:
                      return u2.trys.push([1, 3, , 4]), [4, this.Vc(t4, e3)];
                    case 2:
                      return s3 = u2.sent(), r3 && r3(s3), [3, 4];
                    case 3:
                      return o2 = u2.sent(), n3(o2), [3, 4];
                    case 4:
                      return [2];
                  }
                });
              });
            }, Object.defineProperty(t3.prototype, "hasUserSetBitrate", { get: function() {
              var t4, i3 = this.Sc, n3 = i3.bitRate;
              return void 0 !== (null !== (t4 = null != n3 ? n3 : i3.bitrate) && void 0 !== t4 ? t4 : i3.videoQuality);
            }, enumerable: false, configurable: true }), t3.prototype.Vc = function(t4, i3) {
              var n3, e3;
              return Lu(this, void 0, void 0, function() {
                var r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2, I2, R2, T2, C2, A2, z2 = this;
                return Bu(this, function(D2) {
                  switch (D2.label) {
                    case 0:
                      r3 = this.getMediaStreamConstraints(t4), o2 = r3.mediaStreamConfig, u2 = {}, (s3 = r3.mediaStreamConstraints).video ? u2 = qu({}, s3.video) : (0, B.TE)(o2.bitRate) || (u2.bitRate = o2.bitRate), this.Ka = qu(qu({}, this.Ka), u2), this.Ka.audioBitrate = 1e3 * o2.audioBitrate || 48e3, this.Ka.startBitrate = o2.startBitrate || this.pn.settingConfig.getSetting("bitrate_mode"), this.Ka.minBitrate = o2.minBitrate, this.Ka.keyFrameInterval = o2.keyFrameInterval || this.Ka.keyFrameInterval, (0, B.QP)(t4.videoOptimizationMode) && (this.Ka.contentHint = t4.videoOptimizationMode), this.logger.info("zp.sv.2 update video info  ".concat(JSON.stringify(this.Ka), ", onlyPreview: ").concat(this.onlyPreview)), s3.audio && (a2 = this.pn.settingConfig.getCloudSettingScenario(this.pn.scenario, true), h2 = a2.channelCount, f2 = a2.AEC, l2 = a2.AGC, d2 = a2.ANS, this.logger.info("zp.sv.2 scenario ".concat(c2 = a2.audioBitrate, " ").concat(h2, " ").concat(f2, " ").concat(l2, " ").concat(d2)), c2 && (this.Ka.audioBitrate = 1e3 * c2), h2 && (s3.audio.channelCount = h2, this.Ka.channelCount = h2), (0, B.dd)(f2) && (this.logger.info("zp.sv.2 setting AEC " + f2), this.Sc.AEC = s3.audio.echoCancellation = f2), (0, B.dd)(l2) && (this.logger.info("zp.sv.2 setting AGC " + l2), this.Sc.AGC = s3.audio.autoGainControl = l2), (0, B.dd)(d2) && (this.logger.info("zp.sv.2 setting ANS " + d2), this.Sc.ANS = s3.audio.noiseSuppression = d2)), s3.video instanceof Object && (s3.video.width = this.pn.settingConfig.getSetting("camera_width", true) || s3.video.width, s3.video.height = this.pn.settingConfig.getSetting("camera_height", true) || s3.video.height, s3.video.frameRate = this.pn.settingConfig.getSetting("camera_framerate", true) || s3.video.frameRate), this.Sc.video = !!s3.video, this.Sc.audio = !!s3.audio, o2.unlimitedCaptureResolution && s3.video.width && (s3.video.width = { ideal: 4096 }, s3.video.height = { ideal: 2160 }, this.an.info("zp.sv.2 capture max resolution of camera")), this.logger.info("zp.sv.2 constraints " + JSON.stringify(s3)), i3.setAttribute("preview_conf", L.eU.preview_conf(s3)), v2 = function(t5) {
                        var i4 = L.eU.error.Tn;
                        return i4.message = i4.message + " " + t5.name + " " + t5.message, "NotAllowedError" === t5.name || "SecurityError" === t5.name ? (i4 = qu({}, L.eU.error.Cn)).message = t5.name + ": " + i4.message : "NotReadableError" === t5.name ? (i4 = qu({}, L.eU.error.An)).message = t5.name + ": " + i4.message : "OverconstrainedError" === t5.name && ((i4 = qu({}, L.eU.error.zn)).message = t5.name + ": " + i4.message + (t5.constraint ? ". such as " + t5.constraint : "")), i4;
                      }, m2 = function(t5, i4) {
                        return new G.l3(function(n4) {
                          z2.an.info("zp.sv.2 recapture call"), yo(function(e4) {
                            var r4 = e4.cameras, s4 = e4.microphones;
                            if (z2.an.info("zp.sv.2 recapture devices " + i4 + " " + r4.length + " " + s4.length), "video" === i4) {
                              if (!(r4.length > 0))
                                return void n4(void 0);
                              var o3 = r4[0].deviceID;
                              z2.an.info("zp.sv.2 recapture video " + o3), t5.video.deviceId = { exact: o3 };
                            } else if ("audio" === i4) {
                              if (!(s4.length > 0))
                                return void n4(void 0);
                              var u3 = s4[0].deviceID;
                              z2.an.info("zp.sv.2 recapture audio " + u3), t5.audio.deviceId = { exact: u3 };
                            }
                            navigator.mediaDevices.getUserMedia(t5).then(function(t6) {
                              z2.an.info("zp.sv.2 recapture success"), n4(t6);
                            }).catch(function(t6) {
                              n4(void 0);
                            });
                          }, function(t6) {
                            z2.an.warn("zp.sv.2 recapture getDevices err:", t6.message), n4(void 0);
                          });
                        });
                      }, p2 = null, D2.label = 1;
                    case 1:
                      return D2.trys.push([1, 3, , 6]), [4, navigator.mediaDevices.getUserMedia(s3)];
                    case 2:
                      return (p2 = D2.sent()).getTracks().forEach(function(t5) {
                        if (mt(t5, z2.an, "zp.sv.2"), "video" === t5.kind) {
                          var i4 = t5.getSettings(), n4 = i4.height, e4 = i4.frameRate;
                          z2.an.info("zp.sv.2 track settings ".concat(i4.width, " ").concat(n4, " ").concat(e4));
                        }
                      }), this.an.info("zp.sv.2 success"), [3, 6];
                    case 3:
                      return g2 = D2.sent(), this.an.info("zp.sv.2 failed " + g2.name + " " + g2.message), "NotFoundError" !== g2.name ? [3, 5] : (_2 = false === s3.video, y2 = false, w2 = false, (b2 = false === s3.audio) && (y2 = (0, B.TE)(null === (n3 = s3.video) || void 0 === n3 ? void 0 : n3.videoInput)), _2 && (w2 = (0, B.TE)(null === (e3 = s3.audio) || void 0 === e3 ? void 0 : e3.audioInput)), this.an.info("zp.sv.2 failed " + (S2 = b2 && y2 || _2 && w2) + " " + (E2 = b2 ? "video" : "audio")), S2 ? [4, m2(s3, E2)] : [3, 5]);
                    case 4:
                      (k2 = D2.sent()) && (p2 = k2), D2.label = 5;
                    case 5:
                      if (!p2)
                        throw v2(g2);
                      return [3, 6];
                    case 6:
                      return this.xu = p2, this.previewSuc = true, this.initMediaTrack(p2), this.Ka && ((O2 = p2.getVideoTracks()[0]) && (I2 = O2.getSettings(), R2 = I2.width, T2 = I2.height, C2 = I2.frameRate, (0, B.w)(this.Ka.width) && R2 && (this.Ka.width = R2), (0, B.w)(this.Ka.height) && T2 && (this.Ka.height = T2), (0, B.w)(this.Ka.frameRate) && C2 && (this.Ka.frameRate = C2)), A2 = (0, B.w)(s3.audio) && s3.audio.channelCount, this.Ka.channelCount = A2 || (this.audioTrack && this.audioTrack.getSettings ? this.audioTrack.getSettings().channelCount : 1)), [2, p2];
                  }
                });
              });
            }, t3.prototype.Uc = function(t4) {
              if ((0, B.dr)(t4.source)) {
                var i3 = t4.source.getVideoTracks(), n3 = i3.length > 0 ? i3[0].getSettings() : { width: 0, height: 0, frameRate: 0 };
                return this.an.debug("zp.sv.2 use external media stream"), this.previewSuc = true, this.xu = new MediaStream(t4.source), this.initMediaTrack(this.xu), this.Ka = { width: n3.width || 0, height: n3.height || 0, frameRate: n3.frameRate || 0, bitRate: t4.bitRate || this.pn.settingConfig.getSetting("custom_video_bitrate"), startBitrate: t4.startBitrate || this.pn.settingConfig.getSetting("bitrate_mode"), minBitrate: t4.minBitrate, keyFrameInterval: t4.keyFrameInterval, channelCount: t4.channelCount || (this.audioTrack && this.audioTrack.getSettings ? this.audioTrack.getSettings().channelCount : 1), audioBitrate: 1e3 * t4.audioBitrate || 48e3, contentHint: "" }, (0, B.QP)(t4.videoOptimizationMode) && (this.Ka.contentHint = t4.videoOptimizationMode), this.xu;
              }
              if ((0, B.Si)(t4.source)) {
                var e3 = this.captureStream(t4.source, t4);
                if (e3)
                  return this.Ka.bitRate = t4.bitRate || this.pn.settingConfig.getSetting("custom_video_bitrate"), this.previewSuc = true, this.initMediaTrack(e3), e3;
                throw L.eU.error.yn;
              }
              return new MediaStream();
            }, t3.prototype.captureStream = function(t4, i3) {
              var n3, e3, r3, s3;
              if (!t4)
                return this.an.info("zp.cs.2 no local video"), null;
              var o2 = this.streamCenter.captureStreamElementMap.get(t4);
              if (o2)
                this.an.info("zp.cs.2 stream has capture"), s3 = o2.clone();
              else {
                var u2 = void 0;
                if (t4.captureStream)
                  u2 = t4.captureStream(), this.an.debug("zp.cs.2 captureStream");
                else {
                  if (!t4.mozCaptureStream)
                    return this.an.info("zp.cs.2 don't support"), null;
                  u2 = t4.mozCaptureStream();
                  var a2 = null === (n3 = this.acMgr) || void 0 === n3 ? void 0 : n3.getMediaElementRenderer(t4);
                  null == a2 || a2.setVoiceChangeNode(a2.effectMode, a2.voiceChangerNode, true), this.an.debug("zp.cs.2 mozCaptureStream");
                }
                this.streamCenter.captureStreamElementMap.set(t4, u2), s3 = u2.clone();
              }
              if (0 == s3.getTracks().length)
                return this.an.error("zp.cs.2 external capture tracks no found"), null;
              this.an.info("zp.cs.2 tracks: " + s3.getTracks().length), this.xu = s3;
              var c2 = null === (r3 = null === (e3 = s3.getVideoTracks()) || void 0 === e3 ? void 0 : e3[0]) || void 0 === r3 ? void 0 : r3.getSettings();
              return this.Ka = { width: t4.videoWidth, height: t4.videoHeight, frameRate: (null == c2 ? void 0 : c2.frameRate) || 0, bitRate: i3.bitRate || this.pn.settingConfig.getSetting("custom_video_bitrate"), channelCount: i3.channelCount || (this.audioTrack && this.audioTrack.getSettings ? this.audioTrack.getSettings().channelCount : 1), audioBitrate: 1e3 * i3.audioBitrate || 48e3, startBitrate: i3.startBitrate || this.pn.settingConfig.getSetting("bitrate_mode"), minBitrate: i3.minBitrate, keyFrameInterval: i3.keyFrameInterval, contentHint: "" }, (0, B.QP)(i3.videoOptimizationMode) && (this.Ka.contentHint = i3.videoOptimizationMode), this.an.debug("zp.cs.2 called success"), this.xu;
            }, t3.prototype.stopPreview = function() {
              var t4, i3, n3, e3 = this;
              if (this.an.info("zp.sv.2.1 called"), this.xu) {
                var r3 = this.rtcViewer;
                r3 && r3.destroy(), this.videoEffect && (this.videoEffect.setBeautyEffectOptions(false), this.videoEffect.destroy()), this.Yc && this.Yc.destroy(), this.voiceProccessor && this.voiceProccessor.destroy(), null === (t4 = this.pn.backgroundBlurManager) || void 0 === t4 || t4.releaseMap(this.xu), this.backgroundProcessor && (this.backgroundProcessor.release(), this.backgroundProcessor = null), this.streamCompositor && (this.streamCompositor = null), this.Tc && this.videoNodeQueue.destroy(), this.gn.trackUtils.stopTrack(this.cloneVideoTrack), this.cloneVideoTrack = null, this.muteImageAnID && cancelAnimationFrame(this.muteImageAnID), this.blkImgAnId && cancelAnimationFrame(this.blkImgAnId), this.stopSoundLevel(), this.gn.trackUtils.stopTrack(this.originVideoTrack), this.originVideoTrack = null, this.gn.trackUtils.stopTrack(this.originAudioTrack), this.originAudioTrack = null, this.gn.trackUtils.stopTrack(this.videoTrack), this.videoTrack = null, this.gn.trackUtils.stopTrack(this.audioTrack), this.audioTrack = null, Eu.sourceDisConnect(this.xu), null === (i3 = this.audioMixManager) || void 0 === i3 || i3.stopAudioManager(), this.Zc(), !this.zegoCaptureStream && this.xu.getTracks().forEach(function(t5) {
                  e3.gn.trackUtils.stopTrack(t5);
                }), this.xu = null, !this.zegoCaptureStream && (null === (n3 = this.lowStream) || void 0 === n3 || n3.getTracks().forEach(function(t5) {
                  return e3.gn.trackUtils.stopTrack(t5);
                })), this.lowStream = void 0, this.Ka = { width: 0, height: 0, frameRate: 0, bitRate: 0, minBitrate: 0, startBitrate: "default", keyFrameInterval: 2, channelCount: 1, audioBitrate: 48e3, contentHint: "" };
              }
            }, t3.prototype.enableMicrophone = function(t4) {
              var i3 = this;
              if (!this.localStream)
                return this.an.error("zp.em.2 no localStream"), false;
              var n3 = this.localStream.getAudioTracks()[0];
              n3.enabled = t4;
              var e3 = this.gn, r3 = e3.isMicEnabled && t4;
              this.audioTrack && (this.audioTrack.enabled = r3);
              var s3 = e3.getPublishList(this.localStream).map(function(t5) {
                return t5.publisher;
              });
              return s3.length && s3.forEach(function(e4) {
                return Lu(i3, void 0, void 0, function() {
                  var i4, r4;
                  return Bu(this, function(s4) {
                    switch (s4.label) {
                      case 0:
                        return i4 = !t4, (r4 = e4.audioSender) ? i4 ? [4, r4.replaceTrack(null)] : [3, 2] : [2];
                      case 1:
                        return s4.sent(), [3, 4];
                      case 2:
                        return [4, r4.replaceTrack(n3)];
                      case 3:
                        s4.sent(), s4.label = 4;
                      case 4:
                        return [2];
                    }
                  });
                });
              }), this.Xc(r3, 3), this.Wa = t4, this.an.debug("zp.em.2 call success. " + t4), true;
            }, t3.prototype.updatePublisherStreamMicStatus = function(t4, i3) {
              this.Xc(this.Wa && t4, i3);
            }, t3.prototype.Xc = function(t4, i3) {
              if (this.xu) {
                var n3 = this.gn.getPublishList(this.xu).map(function(t5) {
                  return t5.publisher;
                });
                n3.length && n3.forEach(function(n4) {
                  n4.sendStreamStatus(n4.camera_status, t4 ? 0 : i3);
                });
              }
            }, t3.prototype.updatePublisherStreamCameraStatus = function(t4, i3) {
              if (this.xu) {
                var n3 = this.gn.getPublishList(this.xu).map(function(t5) {
                  return t5.publisher;
                });
                n3.length && n3.forEach(function(n4) {
                  n4.sendStreamStatus(t4 ? 0 : i3, n4.mic_status);
                });
              }
            }, t3.prototype.enableMicrophoneOnly = function(t4) {
              return this.xu ? this.micTrack ? (this.micTrack.enabled = this.Wa && t4, this.updatePublisherStreamMicStatus(t4, 3), this.an.debug("zp.emo.2 call success"), true) : (this.an.info("zp.emo.2 no micTrack"), true) : (this.an.error("zp.em.2 no localStream"), false);
            }, t3.prototype.enableCamera = function(t4, i3, n3) {
              var e3;
              return Lu(this, void 0, void 0, function() {
                var r3, s3, o2, u2, a2, c2, h2, f2, l2, d2 = this;
                return Bu(this, function(v2) {
                  switch (v2.label) {
                    case 0:
                      return this.localStream && this.videoTrack ? (r3 = this.videoTrack, u2 = this.lowStream, this._c && (t4 ? t4 && (this.isVideoNodeQueueEnabled ? setTimeout(function() {
                        var t5 = d2.videoNodeQueue.getDestinationTrack();
                        t5 && d2.replacePreviewTrack(t5, true);
                      }, 800) : this.videoTrack && this.replacePreviewTrack(this.videoTrack, false)) : (s3 = this.Wc(this._c), this.localStream.removeTrack(this.localStream.getVideoTracks()[0]), this.localStream.addTrack(s3), this.rtcViewer && this.rtcViewer.setVideo(s3), u2 && (o2 = s3.clone()))), n3 && !t4 || !r3 ? n3 && !t4 && ((null === (e3 = this.videoEffect) || void 0 === e3 ? void 0 : e3.enabled) || this.isVideoNodeQueueEnabled ? this.an.warn("zp.ec.2 Unable to keep the preview screen when beauty is turned on") : (a2 = this.cloneVideoTrack, this.cloneVideoTrack = this.videoTrack.clone(), this.cloneVideoTrack.enabled = true, this.replacePreviewTrack(this.cloneVideoTrack, false, { retainTrack: true }), i3.trackUtils.stopTrack(a2))) : (r3.enabled = t4, this.$c(t4, r3)), r3 && (r3.enabled = t4), this.isVideoNodeQueueEnabled ? ((c2 = this.videoNodeQueue.getDestinationTrack()) && (c2.enabled = t4), !t4 ? [4, this.videoNodeQueue.replaceNewSourceByTrack(null, false)] : [3, 2]) : [3, 5]) : (this.an.error("zp.ec.2 video track no found"), [2, false]);
                    case 1:
                      v2.sent(), v2.label = 2;
                    case 2:
                      return t4 && r3 ? [4, this.videoNodeQueue.replaceNewSourceByTrack(r3, false)] : [3, 4];
                    case 3:
                      v2.sent(), v2.label = 4;
                    case 4:
                      v2.label = 5;
                    case 5:
                      return null == u2 || u2.getVideoTracks().forEach(function(i4) {
                        i4.enabled = t4;
                      }), h2 = i3.checkPreview(this.localStream), (f2 = i3.getPublishList(this.localStream).map(function(t5) {
                        return t5.publisher;
                      })).length && (l2 = null, f2.forEach(function(i4) {
                        var n4 = "H265" === i4.publishOption.videoCodec, e4 = !i4.sideMediaConfig.isSEIStart, a3 = i4.getVideoSenders();
                        a3 && a3.forEach(function(c4, f3) {
                          return Lu(d2, void 0, void 0, function() {
                            var d3, v3, m2, p2, g2 = this;
                            return Bu(this, function(b2) {
                              switch (b2.label) {
                                case 0:
                                  return t4 ? [3, 10] : this._c ? (i4.setSendMuteImage(true), i4.isTcVideoPasued() ? [3, 4] : a3.length > 1 && 0 === f3 && o2 ? [4, null == c4 ? void 0 : c4.replaceTrack(o2)] : [3, 2]) : [3, 5];
                                case 1:
                                  return b2.sent(), [3, 4];
                                case 2:
                                  return s3 ? [4, null == c4 ? void 0 : c4.replaceTrack(s3)] : [3, 4];
                                case 3:
                                  b2.sent(), b2.label = 4;
                                case 4:
                                  return [3, 9];
                                case 5:
                                  return n4 || !e4 ? [3, 8] : i4.isTcVideoPasued() ? [3, 7] : [4, c4.replaceTrack(null)];
                                case 6:
                                  b2.sent(), b2.label = 7;
                                case 7:
                                  return [3, 9];
                                case 8:
                                  n4 && (l2 || (d3 = null == r3 ? void 0 : r3.getSettings(), l2 = this.th(null == d3 ? void 0 : d3.width, null == d3 ? void 0 : d3.height, e4)), l2 && c4.replaceTrack(l2)), b2.label = 9;
                                case 9:
                                  return [3, 22];
                                case 10:
                                  return t4 ? (i4.setSendMuteImage(false), v3 = 0, !this._c && n4 && (null === (p2 = c4.track) || void 0 === p2 || p2.stop()), this.isVideoNodeQueueEnabled ? (v3 = 800, m2 = this.videoNodeQueue.getDestinationTrack(), i4.isTcVideoPasued() || !m2 || c4.track === m2 ? [3, 12] : [4, null == c4 ? void 0 : c4.replaceTrack(m2)]) : [3, 13]) : [3, 22];
                                case 11:
                                  b2.sent(), b2.label = 12;
                                case 12:
                                  return [3, 21];
                                case 13:
                                  return i4.isTcVideoPasued() || c4.track === this.videoTrack ? [3, 21] : (null == h2 ? void 0 : h2.streamFromCanvas) ? [3, 19] : a3.length > 1 && 0 === f3 ? u2 ? [4, null == c4 ? void 0 : c4.replaceTrack(u2.getVideoTracks()[0])] : [3, 15] : [3, 16];
                                case 14:
                                  b2.sent(), b2.label = 15;
                                case 15:
                                  return [3, 18];
                                case 16:
                                  return [4, null == c4 ? void 0 : c4.replaceTrack(this.videoTrack)];
                                case 17:
                                  b2.sent(), b2.label = 18;
                                case 18:
                                  return [3, 21];
                                case 19:
                                  return [4, null == c4 ? void 0 : c4.replaceTrack(h2.streamFromCanvasTrack)];
                                case 20:
                                  b2.sent(), b2.label = 21;
                                case 21:
                                  v3 ? setTimeout(function() {
                                    g2.muteImageAnID && clearInterval(g2.muteImageAnID), g2.blkImgAnId && clearInterval(g2.blkImgAnId);
                                  }, v3) : (this.muteImageAnID && clearInterval(this.muteImageAnID), this.blkImgAnId && clearInterval(this.blkImgAnId)), b2.label = 22;
                                case 22:
                                  return [2];
                              }
                            });
                          });
                        });
                        var c3 = d2._c && !t4 ? 0 : Oo(d2.videoTrack);
                        i4.sendStreamStatus(c3, i4.mic_status);
                      })), this.$a = t4, this.an.info("zp.ec.2 call success"), [2, true];
                  }
                });
              });
            }, t3.prototype.$c = function(t4, i3) {
              var n3 = this;
              if (fo(this.pn.browserInfo, "chrome", 86, 2) && fo(this.pn.browserInfo, "chrome", 92, 0) && t4 && !(0, B.TE)(i3.getSettings().width) && i3.getSettings().width > 0) {
                var e3 = i3.getSettings().width - 1, r3 = i3.getSettings().height - 1, s3 = i3.getSettings().frameRate;
                i3.applyConstraints({ width: e3, height: r3, frameRate: s3 }).then(function() {
                  i3.applyConstraints({ width: n3.videoInfo.width, height: n3.videoInfo.height, frameRate: s3 });
                });
              }
            }, t3.prototype.stopCaptureVideo = function() {
              return Lu(this, void 0, void 0, function() {
                var t4, i3, n3, e3, r3 = this;
                return Bu(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      return t4 = this.lowStream, this.videoTrack ? (i3 = this.videoTrack.enabled, n3 = "safari" === this.pn.browser, this.hasStopCaptureVideo = true, e3 = function() {
                        return Lu(r3, void 0, void 0, function() {
                          return Bu(this, function(i4) {
                            switch (i4.label) {
                              case 0:
                                return this.videoTrack && (this.videoTrack.enabled = false), t4 && (t4.getVideoTracks()[0].enabled = false), [4, new Promise(function(t5) {
                                  setTimeout(function() {
                                    t5(void 0);
                                  }, 1e3);
                                })];
                              case 1:
                                return i4.sent(), [2];
                            }
                          });
                        });
                      }, this.pn.engineConfig.previewClearLastFrame ? n3 ? [3, 2] : (this.videoTrack.enabled = false, t4 && (t4.getVideoTracks()[0].enabled = false), [4, new G.l3(function(t5) {
                        setTimeout(function() {
                          t5(void 0);
                        }, 200);
                      })]) : [3, 7]) : [2];
                    case 1:
                      s3.sent(), s3.label = 2;
                    case 2:
                      return this.isVideoNodeQueueEnabled ? n3 ? [4, e3()] : [3, 4] : [3, 6];
                    case 3:
                      s3.sent(), s3.label = 4;
                    case 4:
                      return [4, this.videoNodeQueue.replaceNewSourceByTrack(null, false)];
                    case 5:
                      s3.sent(), s3.label = 6;
                    case 6:
                      return this.gn.trackUtils.stopTrack(this.videoTrack), this.gn.trackUtils.stopTrack(null == t4 ? void 0 : t4.getVideoTracks()[0]), this.stopCanvasStreamTrack(), this.videoTrack.enabled = i3, [3, 12];
                    case 7:
                      return this.isVideoNodeQueueEnabled ? n3 ? [4, e3()] : [3, 9] : [3, 11];
                    case 8:
                      s3.sent(), s3.label = 9;
                    case 9:
                      return [4, this.videoNodeQueue.replaceNewSourceByTrack(null, false)];
                    case 10:
                      s3.sent(), s3.label = 11;
                    case 11:
                      this.gn.trackUtils.stopTrack(this.videoTrack), this.gn.trackUtils.stopTrack(null == t4 ? void 0 : t4.getVideoTracks()[0]), this.stopCanvasStreamTrack(), s3.label = 12;
                    case 12:
                      return [2];
                  }
                });
              });
            }, t3.prototype.startSoundLevel = function() {
              var t4;
              if (this.xu && 0 != this.xu.getAudioTracks().length) {
                null === (t4 = this.soundMeterWorklet) || void 0 === t4 || t4.destroy();
                var i3 = this.gn.getCloudSoundInterval();
                try {
                  var n3 = this, e3 = this.gn.createSoundLevel(this.ac, this.xu, this.gn.soundLevelInterval, i3, function(t5) {
                    n3.soundLevel = 100 * t5;
                  }), r3 = e3.mic;
                  this.soundMeterWorklet = e3.soundMeter, this.mic = r3;
                } catch (t5) {
                  this.an.error(Co.b9b + " get sound level failed " + t5);
                }
              }
            }, t3.prototype.stopSoundLevel = function() {
              var t4;
              this.soundLevel = 0, null === (t4 = this.soundMeterWorklet) || void 0 === t4 || t4.destroy(), this.soundMeterWorklet = null, this.mic = null;
            }, t3.prototype.restartSoundLevel = function() {
              this.gn.soundLevelDelegate ? (this.stopSoundLevel(), this.startSoundLevel()) : this.stopSoundLevel();
            }, t3.prototype.setBeautyEffect = function(t4, i3) {
              return Lu(this, void 0, void 0, function() {
                return Bu(this, function(t5) {
                  return [2];
                });
              });
            }, t3.prototype.setMuteImage = function(t4) {
              this._c = t4;
            }, t3.prototype.syncTrackState = function(t4, i3) {
              i3.enabled = t4.enabled;
            }, t3.prototype.replacePreviewTrack = function(t4, i3, n3) {
              var e3;
              return void 0 === i3 && (i3 = false), void 0 === n3 && (n3 = {}), Lu(this, void 0, void 0, function() {
                var r3, s3, o2, u2, a2, c2, h2;
                return Bu(this, function(f2) {
                  return this.an.info("zsc.rpt.0 call " + "".concat(t4.kind, " ").concat(i3, " ").concat(JSON.stringify(n3))), t4 && t4.kind && this.localStream ? (r3 = true === (null == n3 ? void 0 : n3.retainTrack), o2 = !(s3 = "audio" === t4.kind), u2 = s3 ? "audioTrack" : "videoTrack", this.syncAudioEnabled && s3 && this.audioTrack && this.syncTrackState(this.audioTrack, t4), o2 && this.syncVideoEnabled && this.videoTrack && this.syncTrackState(this.videoTrack, t4), s3 && this.insertableaudio && this.insertableaudio.track.id !== t4.id && (t4 = this.insertableaudio.getInsertableStreamTrack(t4)), !r3 && o2 && !i3 && this.isVideoNodeQueueEnabled ? (this.an.info("zsc.rpt.0 videoNodeQueue replaceNewSource"), null === (e3 = this.Tc) || void 0 === e3 || e3.replaceNewSourceByTrack(t4, void 0, qu({}, n3))) : s3 && this.audioNodeQueue && !n3.isTrackProcessedFromOriginalStream ? ((a2 = new MediaStream()).addTrack(t4), c2 = this.ac.createMediaStreamSource(a2), this.audioNodeQueue.replaceSource(c2), this.voiceProccessor && (0, Pe.nr)() && t4 !== this.Za && this.voiceProccessor.resetWorklet()) : s3 && !this.audioNodeQueue && this.destNode && !n3.isTrackProcessedFromOriginalStream ? (this.createSrcNode(t4, true).connect(this.destNode), this.an.info("zsc.rpt.0 replace audio track with audio mix.")) : (this.an.info("zsc.rpt.0 replace local ".concat(t4.kind, " track")), (h2 = this.localStream.getTracks().find(function(i4) {
                    return i4.kind === t4.kind;
                  })) !== t4 && (h2 && (this.localStream.removeTrack(h2), s3 ? this.removeAudioTrackEvent(h2) : this.removeVideoTrackEvent(h2)), this.localStream.addTrack(t4)), this.rtcViewer && (this.rtcViewer.setTrack(o2, t4), "safari" === this.pn.browser && this.rtcViewer.resume(true)), !r3 && o2 && this.enableDualStream && this.createLowStream()), i3 || r3 || n3.isTrackProcessedFromOriginalStream || (this.an.info("zsc.rpt.0 setTrack ".concat(u2)), this[u2] = t4, "REMOVE" === n3.handleTrack && o2 && (this.localStream.removeTrack(t4), this.rtcViewer && this.rtcViewer.setTrack(true, null), this[u2] = null)), this.gn.soundLevelDelegate && this.soundMeterWorklet && (this.mic = this.soundMeterWorklet.replaceSrcSource(this.ac, this.localStream)), s3 && this.streamCompositor && this.streamCompositor.replaceSource(this.localStream), n3.isCamera && (s3 ? this.audioPreviewType = "camera" : this.videoPreviewType = "camera"), this.an.info("zsc.rpt.0 end"), [2]) : [2];
                });
              });
            }, t3.prototype.updateZegoStreamCaptureTrack = function(t4) {
              var i3 = this.zegoCaptureStream;
              if (i3) {
                var n3 = "video" == t4.kind ? i3.originVideoStream : i3.originAudioStream;
                if (n3) {
                  var e3 = this.gn.checkPreview(n3);
                  this.an.info("zsc.uzsct replace zego preivew"), null == e3 || e3.replacePreviewTrack(t4);
                }
              }
            }, t3.prototype.createLowStream = function() {
              var t4, i3, n3, e3, r3, s3 = null === (t4 = this.xu) || void 0 === t4 ? void 0 : t4.getVideoTracks()[0];
              if (s3) {
                var o2 = s3.getSettings().height, u2 = s3.getSettings().width, a2 = (0, Pe.$t)(), c2 = (0, Pe.hL)(), h2 = a2.indexOf("Android") > -1 || a2.indexOf("Adr") > -1;
                this.an.info("zp.cls w: " + u2 + " h: " + o2 + " " + h2 + " " + c2);
                var f2 = (0, B.Cs)(null === (i3 = this.Ka) || void 0 === i3 ? void 0 : i3.width) && (0, B.Cs)(null === (n3 = this.Ka) || void 0 === n3 ? void 0 : n3.height) && o2 == this.Ka.width && u2 == this.Ka.height;
                if (c2 && h2 && f2) {
                  var l2 = o2;
                  o2 = u2, u2 = l2;
                }
                var d2 = o2 && u2 ? o2 / u2 : 1;
                try {
                  var v2, m2 = this.lowStreamConfig, p2 = m2.width, g2 = m2.frameRate;
                  if (v2 = Math.round(d2 * this.lowStreamConfig.width), this.an.info("zp.cls lw: " + p2 + " lh: " + v2), "firefox" === this.pn.browser)
                    this.lowStream = this.getStreamThroughCanvas(this.xu, { w: p2, h: v2, fps: g2 });
                  else {
                    this.lowStream = null === (e3 = this.xu) || void 0 === e3 ? void 0 : e3.clone();
                    var b2 = null === (r3 = this.lowStream) || void 0 === r3 ? void 0 : r3.getVideoTracks()[0];
                    null == b2 || b2.applyConstraints({ width: p2, height: v2, frameRate: g2 });
                  }
                } catch (t5) {
                  this.an.error("zp.cls " + t5);
                }
              }
            }, t3.prototype.initAudioNodeQueue = function(t4) {
              if (!this.audioTrack || !this.xu)
                return false;
              var i3 = this.createSrcNode(this.audioTrack), n3 = this.createDestNode(this.xu);
              return this.audioNodeQueue = new Xo(i3, n3), true;
            }, t3.prototype.createSrcNode = function(t4, i3, n3) {
              var e3;
              void 0 === i3 && (i3 = false), void 0 === n3 && (n3 = false);
              var r3 = t4 || this.audioTrack;
              if (r3 === (null === (e3 = this.destNode) || void 0 === e3 ? void 0 : e3.stream.getAudioTracks()[0]) && (this.an.info("zp.pv.csn use empty track"), r3 = this.getEmptyAudioTrack()), this.srcNode && !n3) {
                if (!i3)
                  return this.srcNode;
                this.srcNode.disconnect(), this.an.info("zp.pv.csn recreate src");
              }
              var s3 = new MediaStream();
              r3 && s3.addTrack(r3);
              var o2 = this.ac.createMediaStreamSource(s3);
              return n3 || (this.srcNode = o2), this.an.info("zp.pv.csn " + "create src audio id: ".concat(null == r3 ? void 0 : r3.id, ", ").concat(null == r3 ? void 0 : r3.label, ",i")), o2;
            }, t3.prototype.isOriginEmptyTrack = function() {
              return !this.audioTrack || this.Za === this.audioTrack;
            }, t3.prototype.createDestNode = function(t4) {
              if (this.destNode)
                return this.destNode;
              var i3 = this.destNode = this.destNode || this.ac.createMediaStreamDestination(), n3 = i3.stream.getAudioTracks()[0];
              this.an.info("zp.pv.cdn " + "create dest audio id: ".concat(null == n3 ? void 0 : n3.id, ", ").concat(null == n3 ? void 0 : n3.label, ",i"));
              var e3 = this.rtcViewer;
              for (var r3 in this.gn.publisherList) {
                var s3 = this.gn.publisherList[r3];
                if (s3.localStream == t4) {
                  var o2 = s3.publisher.audioSender;
                  o2 && (o2.replaceTrack(n3), this.an.info("zc.pv.cdn change sender audio track"));
                  break;
                }
              }
              var u2 = t4.getAudioTracks()[0];
              return u2 && (t4.removeTrack(u2), !this.isOriginEmptyTrack() && n3 && (n3.enabled = this.Wa)), t4.addTrack(n3), e3 && e3.setAudio(n3), i3;
            }, t3.prototype.initMediaTrack = function(t4) {
              t4.getVideoTracks().length > 0 && (this.videoTrack = t4.getVideoTracks()[0], this.originVideoTrack = this.videoTrack), t4.getAudioTracks().length > 0 && (this.audioTrack = t4.getAudioTracks()[0], this.originAudioTrack = this.audioTrack);
            }, t3.prototype.onAudioTrackChange = function(t4) {
            }, t3.prototype.getViewer = function() {
              return !this.xu || this.rtcViewer && this.rtcViewer.inited || (this.rtcViewer = new Zo(this.xu, this, { clearLastFrame: this.pn.engineConfig.previewClearLastFrame })), this.rtcViewer;
            }, t3.prototype.getStreamThroughCanvas = function(t4, i3) {
              var n3, e3 = this;
              if (0 == t4.getVideoTracks().length)
                return t4;
              var r3 = null === (n3 = t4.getVideoTracks()[0]) || void 0 === n3 ? void 0 : n3.getSettings(), s3 = r3.width, o2 = r3.height, u2 = r3.frameRate;
              if (!s3 || !o2 || !u2)
                return t4;
              var a2 = (0, G.sb)(), c2 = G.VJ.createElement("canvas"), h2 = c2.getContext("2d");
              a2.setAttribute("style", "display:none"), c2.setAttribute("style", "display:none"), c2.width = (null == i3 ? void 0 : i3.w) || s3, c2.height = (null == i3 ? void 0 : i3.h) || o2, new G.l3(function(t5, i4) {
                var n4 = null, r4 = function() {
                  n4 && clearTimeout(n4), a2 && a2.removeEventListener("playing", r4), t5(void 0);
                };
                a2 && a2.addEventListener("playing", r4), n4 = window.setTimeout(function() {
                  e3.an.error("zc.gstc play canvas video timeout"), a2.play(), n4 = window.setTimeout(function() {
                    i4();
                  }, 3e3);
                }, 2e3);
              }).then(function() {
                var n4 = (null == i3 ? void 0 : i3.fps) || u2 || 15;
                e3.ih && (clearInterval(e3.ih), e3.ih = null), e3.ih = setInterval(function() {
                  var n5, e4 = null === (n5 = t4.getVideoTracks()[0]) || void 0 === n5 ? void 0 : n5.getSettings();
                  c2.width = (null == i3 ? void 0 : i3.w) || e4.width || a2.videoWidth, c2.height = (null == i3 ? void 0 : i3.h) || e4.height || a2.videoHeight, null == h2 || h2.drawImage(a2, 0, 0, c2.width, c2.height);
                }, 1e3 / n4);
              }), a2.srcObject = t4, a2.play().catch(function(t5) {
                e3.an.error("zc.gstc play canvas video error: " + t5.message);
              });
              var f2 = c2.captureStream((null == i3 ? void 0 : i3.fps) || 15), l2 = f2.getVideoTracks()[0];
              if (l2.stop = function() {
                var t5;
                e3.an.info("zc.gstc stop canvas track:" + l2.id), e3.ih && (clearInterval(e3.ih), e3.ih = null), a2 && (null === (t5 = a2.srcObject) || void 0 === t5 || t5.getVideoTracks().forEach(function(t6) {
                  t6.stop();
                }), a2.pause(), a2.remove(), a2 = null), c2 && (c2.remove(), c2 = null);
              }, (0, B.dr)(t4) && t4.getAudioTracks().length) {
                var d2 = t4.getAudioTracks()[0];
                f2.addTrack(d2);
              }
              return f2;
            }, t3.prototype.stopCanvasStreamTrack = function() {
              this.streamFromCanvas && this.streamFromCanvasTrack && (this.gn.trackUtils.stopTrack(this.streamFromCanvasTrack), this.streamFromCanvasTrack = null), this.ih && (clearInterval(this.ih), this.ih = null);
            }, t3.prototype.updateVideoInfo = function(t4) {
              var i3 = { width: t4.width, height: t4.height, frameRate: t4.frameRate, bitRate: t4.bitRate, minBitrate: t4.minBitrate, keyFrameInterval: t4.keyFrameInterval };
              return this.an.info("zc.pv.uvi input video info: ".concat(JSON.stringify(i3))), this.Ka = qu(qu(qu({}, this.Ka), i3), { bitRate: this.Ka.bitRate || i3.bitRate, minBitrate: this.Ka.bitRate || i3.bitRate }), qu({}, this.Ka);
            }, t3.prototype.updateAudioInfo = function(t4) {
              var i3 = {};
              return this.an.info("zc.pv.uai input audio info: ".concat(JSON.stringify(i3))), this.Ka = qu(qu({}, this.Ka), i3), qu({}, this.Ka);
            }, t3.prototype.setVideoInfo = function(t4) {
              if (t4) {
                var i3 = t4.width, n3 = t4.height, e3 = t4.frameRate, r3 = t4.bitRate, s3 = t4.startBitrate, o2 = t4.minBitrate, u2 = t4.keyFrameInterval, a2 = t4.channelCount, c2 = t4.audioBitrate, h2 = t4.contentHint;
                void 0 !== i3 && (this.Ka.width = i3), void 0 !== n3 && (this.Ka.height = n3), void 0 !== e3 && (this.Ka.frameRate = e3), void 0 !== r3 && (this.Ka.bitRate = r3), void 0 !== s3 && (this.Ka.startBitrate = s3), void 0 !== o2 && (this.Ka.minBitrate = o2), void 0 !== u2 && (this.Ka.keyFrameInterval = u2), void 0 !== a2 && (this.Ka.channelCount = a2), void 0 !== c2 && (this.Ka.audioBitrate = c2), void 0 !== h2 && (this.Ka.contentHint = h2);
              }
            }, t3.prototype.updateMediaStreamConstraints = function(t4, i3) {
              var n3 = this;
              this.an.info("zc.pv.umsc ".concat(JSON.stringify(t4))), "video" === i3 ? Uu.forEach(function(i4) {
                return n3.Sc[i4] = t4[i4];
              }) : Gu.forEach(function(i4) {
                return n3.Sc[i4] = t4[i4];
              });
            }, t3.prototype.deleteConstraints = function(t4, i3) {
              i3.forEach(function(i4) {
                return delete t4[i4];
              });
            }, t3.prototype.setVolumeFactorByUserCount = function(t4) {
              var i3, n3 = this.pn.engineConfig.choirRole;
              if (this.xu) {
                this.an.info("zc.pv.svf ".concat(null === (i3 = this.xu) || void 0 === i3 ? void 0 : i3.id, " count: ").concat(t4, ", mic: ").concat(!!this.micTrack, ", choir role: ").concat(n3));
                var e3 = this.volumeFactor, r3 = [1, 2].includes(n3);
                if (this.micTrack && r3)
                  for (var s3 = [[0, 1], [3, 1], [4, 0.9], [8, 0.7], [12, 0.5], [16, 0.45], [20, 0.4], [24, 0.35], [1 / 0, 0.3]], o2 = 0; o2 < s3.length; o2++) {
                    var u2 = s3[o2][0], a2 = s3[o2 + 1];
                    if (!a2) {
                      this.an.error("zc.pv.svf error: no map factor");
                      break;
                    }
                    if (t4 >= u2 && t4 < a2[0]) {
                      e3 = a2[1];
                      break;
                    }
                  }
                else
                  e3 = 1 === n3 ? 0.6 : 1;
                this.audioMixManager && this.audioMixManager.setVolumeFactor(1 === n3 ? 0.6 : 1), this.an.info("zc.pv.svf factor: ".concat(e3)), this.setVolume(void 0, e3);
              }
            }, t3.prototype.setVolume = function(t4, i3) {
              var n3, e3, r3;
              this.an.info("zc.pv.scv volume: ".concat(t4, ", factor: ").concat(i3, "; origin: ").concat(this.volume, ", ").concat(this.volumeFactor)), void 0 === t4 ? t4 = this.volume : this.volume = t4, void 0 === i3 ? i3 = this.volumeFactor : this.volumeFactor = i3;
              var s3 = this.gainNode;
              s3 || (this.audioNodeQueue || this.initAudioNodeQueue(), s3 = this.ac.createGain(), null === (n3 = this.audioNodeQueue) || void 0 === n3 || n3.pushFront(s3), this.gainNode = s3);
              var o2 = t4 / 100 * this.volumeFactor;
              if ((0, B.Cs)(o2)) {
                var u2 = false;
                s3.gain.value != o2 && (u2 = true, s3.gain.value = o2), this.an.info("zc.pv.scv ".concat(this.audioPreviewType, " ").concat(null === (r3 = this.xu) || void 0 === r3 ? void 0 : r3.id, "  volume: ").concat(o2, ". hasChanged: ").concat(u2));
              } else
                this.an.error("zc.pv.scv ".concat(this.audioPreviewType, " ").concat(null === (e3 = this.xu) || void 0 === e3 ? void 0 : e3.id, "  volume error: ").concat(o2));
            }, t3.prototype.Wc = function(t4) {
              var i3 = (0, G.FP)(t4.width, t4.height), n3 = i3.getContext("2d");
              return this.muteImageAnID = setInterval(function() {
                t4 && (null == n3 || n3.drawImage(t4, 0, 0));
              }, 100), i3.captureStream().getVideoTracks()[0];
            }, t3.prototype.th = function(t4, i3, n3) {
              (t4 < 160 || i3 < 160) && (t4 = 160, i3 = 160);
              var e3 = (0, G.FP)(t4, i3), r3 = e3.getContext("2d");
              return n3 ? r3 && (r3.fillStyle = "black", r3.fillRect(0, 0, t4, i3)) : this.blkImgAnId = setInterval(function() {
                r3 && (r3.fillStyle = "black", r3.fillRect(0, 0, t4, i3));
              }, 100), e3.captureStream().getVideoTracks()[0];
            }, t3.prototype.setAudioFrameCallback = function(t4, i3) {
              if (this.an.info("zc.pv.safc call"), this.xu) {
                this.Yc || (this.Yc = new xu(this.ac, this.an));
                var n3 = null !== t4;
                this.audioNodeQueue || this.initAudioNodeQueue(), this.audioNodeQueue && this.Yc.setAudioFrameCallback(this.audioNodeQueue.destinationNode.stream, n3, function(i4) {
                  t4 && t4(i4);
                }, i3);
              } else
                this.an.info("zc.pv.safc no localStream");
            }, t3.prototype.Zc = function() {
              this.Yc && (this.Yc.destroy(), this.Yc = null);
            }, t3;
          }();
          o(8899);
          !function(t3) {
            t3[t3.Song = 0] = "Song", t3[t3.Accompaniment = 1] = "Accompaniment", t3[t3.AccompanimentClip = 2] = "AccompanimentClip", t3[t3.AccompanimentSegment = 3] = "AccompanimentSegment";
          }(Du || (Du = {})), function(t3) {
            t3[t3.Count = 0] = "Count", t3[t3.User = 1] = "User", t3[t3.Room = 2] = "Room", t3[t3.Master = 3] = "Master";
          }(Nu || (Nu = {})), function(t3) {
            t3[t3.VendorDefault = 0] = "VendorDefault", t3[t3.Vendor1 = 1] = "Vendor1", t3[t3.Vendor2 = 2] = "Vendor2", t3[t3.Vendor3 = 4] = "Vendor3";
          }(Pu || (Pu = {})), function(t3) {
            t3[t3.PortraitSegmentation = 0] = "PortraitSegmentation";
          }(Mu || (Mu = {}));
          var Fu, Hu, Vu, Qu, Yu, Ku, Zu, Xu, Wu = o(166);
          o(9728);
          !function(t3) {
            t3[t3.Off = 0] = "Off", t3[t3.On = 1] = "On";
          }(Fu || (Fu = {})), function(t3) {
            t3[t3.PortraitSegmentation = 0] = "PortraitSegmentation";
          }(Hu || (Hu = {})), function(t3) {
            t3[t3.ZegoGeoFenceTypeNone = 0] = "ZegoGeoFenceTypeNone", t3[t3.ZegoGeoFenceTypeInclude = 1] = "ZegoGeoFenceTypeInclude", t3[t3.ZegoGeoFenceTypeExclude = 2] = "ZegoGeoFenceTypeExclude";
          }(Vu || (Vu = {})), function(t3) {
            t3[t3.ZegoDefined = 0] = "ZegoDefined", t3[t3.UserUnregister = 1] = "UserUnregister";
          }(Qu || (Qu = {})), function(t3) {
            t3[t3.TrafficControlFocusOnLocalOnly = 0] = "TrafficControlFocusOnLocalOnly", t3[t3.TrafficControlFocusOnRemote = 1] = "TrafficControlFocusOnRemote";
          }(Yu || (Yu = {})), function(t3) {
            t3[t3.NoVideo = 0] = "NoVideo";
          }(Ku || (Ku = {})), function(t3) {
            t3[t3.Allow = 0] = "Allow", t3[t3.NotAllow = 1] = "NotAllow";
          }(Zu || (Zu = {})), function(t3) {
            t3[t3.video = 0] = "video", t3[t3.audio = 1] = "audio", t3[t3.videoAndAudio = 2] = "videoAndAudio";
          }(Xu || (Xu = {}));
          var $u = o(327), ta = function() {
            function t3(t4) {
              this.zegoStream = t4;
            }
            return Object.defineProperty(t3.prototype, "active", { get: function() {
              return this.zegoStream.active;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "id", { get: function() {
              return this.zegoStream.id;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "videoCaptureStream", { get: function() {
              return this.zegoStream.originVideoStream;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "audioCaptureStream", { get: function() {
              return this.zegoStream.originAudioStream;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "stream", { get: function() {
              return this.zegoStream.stream;
            }, enumerable: false, configurable: true }), t3.prototype.getAudioTracks = function() {
              return this.zegoStream.getAudioTracks();
            }, t3.prototype.getVideoTracks = function() {
              return this.zegoStream.getVideoTracks();
            }, t3.prototype.getTracks = function() {
              return this.zegoStream.getTracks();
            }, Object.defineProperty(t3.prototype, "videoDeviceId", { get: function() {
              return this.zegoStream.videoDeviceId;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "audioDeviceId", { get: function() {
              return this.zegoStream.audioDeviceId;
            }, enumerable: false, configurable: true }), t3.prototype.on = function(t4, i3) {
              return this.zegoStream.on(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this.zegoStream.off(t4, i3);
            }, t3.prototype.startCaptureMicrophone = function(t4) {
              return this.zegoStream.startCaptureMicrophone(t4);
            }, t3.prototype.startCaptureCamera = function(t4) {
              return this.zegoStream.startCaptureCamera(t4);
            }, t3.prototype.startCaptureCameraAndMicrophone = function(t4, i3) {
              return this.zegoStream.startCaptureCameraAndMicrophone(t4, i3);
            }, t3.prototype.startCaptureCustomAudio = function(t4) {
              return this.zegoStream.startCaptureCustomAudio(t4);
            }, t3.prototype.startCaptureCustomVideo = function(t4) {
              return this.zegoStream.startCaptureCustomVideo(t4);
            }, t3.prototype.startCaptureCustomVideoAndAudio = function(t4, i3) {
              return this.zegoStream.startCaptureCustomVideoAndAudio(t4, i3);
            }, t3.prototype.startCaptureScreen = function(t4) {
              return this.zegoStream.startCaptureScreen(t4);
            }, t3.prototype.startCaptureScreenWithAudio = function(t4, i3) {
              return this.zegoStream.startCaptureScreenWithAudio(t4, i3);
            }, t3.prototype.stopCaptureAudio = function() {
              return this.zegoStream.stopCaptureAudio();
            }, t3.prototype.stopCaptureVideo = function() {
              return this.zegoStream.stopCaptureVideo();
            }, t3.prototype.playAudio = function(t4) {
              this.zegoStream.playAudio(t4);
            }, t3.prototype.playCaptureAudio = function(t4) {
              this.zegoStream.playCaptureAudio(t4);
            }, t3.prototype.playVideo = function(t4, i3) {
              this.zegoStream.playVideo(t4, i3);
            }, t3.prototype.playCaptureVideo = function(t4, i3) {
              this.zegoStream.playCaptureVideo(t4, i3);
            }, t3.prototype.takeStreamSnapshot = function(t4) {
              return this.zegoStream.takeStreamSnapshot(t4);
            }, t3.prototype.resumeVideo = function() {
              return this.zegoStream.resumeVideo();
            }, t3.prototype.resumeAudio = function() {
              return this.zegoStream.resumeAudio();
            }, t3.prototype.stopVideo = function() {
              this.zegoStream.stopVideo();
            }, t3.prototype.stopAudio = function() {
              this.zegoStream.stopAudio();
            }, t3.prototype.stopPlayCaptureVideo = function() {
              this.zegoStream.stopPlayCaptureVideo();
            }, t3.prototype.stopPlayCaptureAudio = function() {
              this.zegoStream.stopPlayCaptureAudio();
            }, t3.prototype.setVolume = function(t4) {
              return this.zegoStream.setVolume(t4);
            }, t3.prototype.useAudioOutputDevice = function(t4) {
              return this.zegoStream.setAudioOutputDevice(t4);
            }, t3;
          }(), ia = ta, na = function() {
            return na = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, na.apply(this, arguments);
          }, ea = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, ra = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, sa = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, oa = function() {
            function t3(t4, i3, n3, e3, r3) {
              var s3 = this;
              this.eu = t4, this.an = i3, this.gn = n3, this.pn = e3, this.nh = r3, this.id = "zego-stream-" + Date.now().toString(16), this.originVideoStream = null, this.originAudioStream = null, this.audioMuted = true, this.audioCaptureMuted = true, this.stream = null, this.eh = [], this.rh = [], this.ou = { autoplayFailed: function(t5, i4) {
                s3._a.emit("autoplayFailed", t5, i4);
              }, autoplayCaptureFailed: function(t5, i4) {
                s3._a.emit("autoplayCaptureFailed", t5, i4);
              }, canPlayAudio: function(t5) {
                s3._a.emit("canPlayAudio", t5);
              }, canPlayVideo: function(t5) {
                s3._a.emit("canPlayVideo", t5);
              }, canPlayCaptureVideo: function(t5) {
                s3._a.emit("canPlayCaptureVideo", t5);
              }, canPlayCaptureAudio: function(t5) {
                s3._a.emit("canPlayCaptureAudio", t5);
              }, videoTrackChanged: function(t5) {
                s3._a.emit("videoTrackChanged", t5);
              }, audioTrackChanged: function(t5) {
                s3._a.emit("audioTrackChanged", t5);
              }, captureVideoTrackChanged: function(t5) {
                s3._a.emit("captureVideoTrackChanged", t5);
              }, captureAudioTrackChanged: function(t5) {
                s3._a.emit("captureAudioTrackChanged", t5);
              } }, this.sh = false, this.oh = false, this.uh = null, this.ah = [], this.hh = null, this.mn = null, this.fh = "", this.dh = "", this.mh = null, this.ph = null, this._a = new xo(), this.autoPlay && !t4.view && this.an.error("zcs.c if you want to play the stream automatically, the view parameter is required."), this.cr = this.pn.reporter;
            }
            return Object.defineProperty(t3.prototype, "active", { get: function() {
              var t4, i3;
              return (null === (t4 = this.originAudioStream) || void 0 === t4 ? void 0 : t4.active) || (null === (i3 = this.originVideoStream) || void 0 === i3 ? void 0 : i3.active) || false;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "view", { get: function() {
              return this.eu.view || null;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "autoPlay", { get: function() {
              return !!(0, B.dd)(this.eu.autoPlay) && this.eu.autoPlay;
            }, enumerable: false, configurable: true }), t3.prototype.getAudioTracks = function() {
              var t4;
              return this.an.info("zcs.gats call"), (null === (t4 = this.originAudioStream) || void 0 === t4 ? void 0 : t4.getAudioTracks()) || [];
            }, t3.prototype.getVideoTracks = function() {
              var t4;
              return this.an.info("zcs.gvts call"), (null === (t4 = this.originVideoStream) || void 0 === t4 ? void 0 : t4.getVideoTracks()) || [];
            }, t3.prototype.getTracks = function() {
              return sa(sa([], this.getAudioTracks(), true), this.getVideoTracks(), true);
            }, Object.defineProperty(t3.prototype, "aCaptureViewer", { get: function() {
              return this.uh;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "viewer", { get: function() {
              return this.hh;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "videoDeviceId", { get: function() {
              var t4 = this.originVideoStream && this.originVideoStream.getVideoTracks()[0];
              return t4 && this._getDeviceIdByTrack(t4) || "";
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "audioDeviceId", { get: function() {
              var t4 = this.originAudioStream && this.originAudioStream.getAudioTracks()[0];
              return t4 && this._getDeviceIdByTrack(t4) || "";
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "gh", { get: function() {
              return this.nh.publishStreamHandler;
            }, enumerable: false, configurable: true }), t3.prototype.on = function(t4, i3) {
              return !!i3 && this._a.addEventHandler(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this._a.removeEventHandler(t4, i3);
            }, t3.prototype.startPublish = function() {
            }, t3.prototype.resetPublish = function() {
              this.bh();
            }, t3.prototype._getDeviceIdByTrack = function(t4) {
              return t4 && t4.getSettings().deviceId || "";
            }, t3.prototype._h = function(t4, i3) {
              var n3 = (0, B.w)(t4) ? t4 : {};
              return i3.call(this, n3);
            }, t3.prototype.yh = function(t4, i3) {
              var n3 = this;
              if (this.an.info("zcs.uos call type:" + i3), 0 == i3) {
                if (this.originVideoStream = t4, this.autoPlay || this.oh) {
                  var e3 = this.ah.map(function(t5) {
                    return { container: t5.container, option: t5.eu };
                  });
                  this.stopPlayCaptureVideo(), (null == e3 ? void 0 : e3.length) || (e3 = [{ container: this.eu.captureView || null, option: {} }]), e3.forEach(function(t5) {
                    return t5.container && n3.playCaptureVideo(t5.container, t5.option);
                  });
                }
                this.ou.captureVideoTrackChanged(this.originVideoStream.getVideoTracks()[0]);
              } else
                this.originAudioStream = t4, this.audioCaptureMuted || (this.stopPlayCaptureAudio(), this.playCaptureAudio()), this.ou.captureAudioTrackChanged(this.originAudioStream.getAudioTracks()[0]);
            }, Object.defineProperty(t3.prototype, "isPublish", { get: function() {
              for (var t4 in this.gn.publisherList) {
                if (this.gn.publisherList[t4].localStream == this.stream)
                  return true;
              }
              return false;
            }, enumerable: false, configurable: true }), t3.prototype.updateStreamAudioTrack = function(t4, i3, n3) {
              return void 0 === t4 && (t4 = function() {
              }), void 0 === i3 && (i3 = function() {
              }), void 0 === n3 && (n3 = 0), ea(this, void 0, void 0, function() {
                var e3, r3, s3, o2, u2, a2, c2 = this;
                return ra(this, function(h2) {
                  switch (h2.label) {
                    case 0:
                      if (this.an.info("zcs.uat call"), !this.originAudioStream || this.isPublish && 0 == n3 || !this.stream)
                        return [2];
                      if (!(e3 = this.checkPreview(this.originAudioStream)) || !e3.audioTrack)
                        return this.an.info("zcs.uat not preview"), [2];
                      r3 = this.ph, s3 = e3.audioTrack, o2 = function(i4) {
                        if (e3 && i4) {
                          var n4 = e3.mediaStreamConfig;
                          i4.audio = { input: n4.audioInput, ANS: n4.ANS, AEC: n4.AEC, AGC: n4.AGC, bps: e3.videoInfo.audioBitrate, channelCount: n4.channelCount };
                        }
                        c2.ph = e3.audioTrack, c2.ou.audioTrackChanged(e3.audioTrack), t4(i4);
                      }, h2.label = 1;
                    case 1:
                      return h2.trys.push([1, 3, , 4]), this.stream && this.wh(this.stream, this.stream, this.originAudioStream, true), [4, this._updateStreamTrack(r3, s3, o2, i3)];
                    case 2:
                      return u2 = h2.sent(), this.an.info("zcs.uat success"), [2, u2];
                    case 3:
                      return a2 = h2.sent(), this.an.info("zcs.uat fail"), [2, a2];
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.updateStreamVideoTrack = function(t4, i3, n3) {
              return void 0 === t4 && (t4 = function() {
              }), void 0 === i3 && (i3 = function() {
              }), void 0 === n3 && (n3 = 0), ea(this, void 0, void 0, function() {
                var e3, r3, s3, o2, u2, a2 = this;
                return ra(this, function(c2) {
                  switch (c2.label) {
                    case 0:
                      if (this.an.info("zcs.uvt call"), !this.originVideoStream || this.isPublish && 0 == n3 || !this.stream)
                        return this.an.info("zcs.uvt not capture"), [2];
                      if (e3 = this.mh, !(r3 = this.checkPreview(this.originVideoStream)) || !r3.videoTrack)
                        return this.an.info("zcs.uvt not preview"), [2];
                      s3 = r3.videoTrack, o2 = function(i4) {
                        if (r3 && i4) {
                          var n4 = r3.mediaStreamConfig, e4 = r3.videoInfo, s4 = e4.contentHint;
                          i4.video = { input: n4.videoInput, w: e4.width, h: e4.height, fps: e4.frameRate, bps: 1e3 * e4.bitRate, keyFrameInterval: e4.keyFrameInterval, optimizationMode: s4 || void 0, facingMode: n4.facingMode };
                        }
                        a2.mh = r3.videoTrack, a2.ou.videoTrackChanged(r3.videoTrack), t4(i4);
                      }, c2.label = 1;
                    case 1:
                      return c2.trys.push([1, 3, , 4]), this.stream && this.wh(this.stream, this.originVideoStream, this.stream, true), [4, this._updateStreamTrack(e3, s3, o2, i3)];
                    case 2:
                      return c2.sent(), this.dh = this.fh, this.an.info("zcs.uvt success"), [3, 4];
                    case 3:
                      return u2 = c2.sent(), this.an.info("zcs.uvt fail"), [2, u2];
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.updateStreamVideoAndAudio = function(t4, i3, n3) {
              return void 0 === t4 && (t4 = function() {
              }), void 0 === i3 && (i3 = function() {
              }), void 0 === n3 && (n3 = 0), ea(this, void 0, void 0, function() {
                var e3, r3, s3, o2, u2, a2;
                return ra(this, function(c2) {
                  switch (c2.label) {
                    case 0:
                      this.an.info("zcs.uva call"), e3 = !this.originVideoStream, r3 = !this.originAudioStream, s3 = {}, o2 = function(i4) {
                        e3 = true, i4 && (s3.video = null == i4 ? void 0 : i4.video), r3 && t4(na(na({}, i4), s3));
                      }, u2 = function(i4) {
                        r3 = true, i4 && (s3.audio = null == i4 ? void 0 : i4.audio), e3 && t4(na(na({}, i4), s3));
                      }, c2.label = 1;
                    case 1:
                      return c2.trys.push([1, 4, , 5]), [4, this.updateStreamVideoTrack(o2, i3, n3)];
                    case 2:
                      return c2.sent(), [4, this.updateStreamAudioTrack(u2, i3, n3)];
                    case 3:
                      return c2.sent(), [3, 5];
                    case 4:
                      return a2 = c2.sent(), i3(a2), this.an.info("zcs.uva error:".concat(JSON.stringify(a2))), [3, 5];
                    case 5:
                      return [2];
                  }
                });
              });
            }, t3.prototype._updateStreamTrack = function(t4, i3, n3, e3) {
              return ea(this, void 0, void 0, function() {
                var r3, s3, o2, u2, a2, c2;
                return ra(this, function(h2) {
                  switch (h2.label) {
                    case 0:
                      return h2.trys.push([0, 6, , 7]), this.an.info("zcs.ut call"), r3 = this.stream && this.checkPreview(this.stream), this.stream && r3 ? (s3 = { errorCode: 0, extendedData: "" }, t4 ? [3, 2] : (this.an.info("zcs.ut add"), [4, this.gh.handleTrack("ADD", this.stream, i3, n3, e3)])) : (this.an.info("zcs.ut stream:".concat(!this.stream, ", previewer:").concat(!r3)), [2]);
                    case 1:
                      return s3 = h2.sent(), [3, 5];
                    case 2:
                      return t4.id == i3.id ? [3, 5] : (this.an.info("zcs.ut replace"), o2 = false, this.fh && this.dh && this.fh !== this.dh && (o2 = true), [4, this.nh.replaceTrack(this.stream, i3, void 0, { isReplaceNew: o2, isCaptureStream: true })]);
                    case 3:
                      return s3 = h2.sent(), this.gn.trackUtils.stopTrack(t4), u2 = this.gn.getPublisher(this.stream), (a2 = null == u2 ? void 0 : u2.previewer.videoInfo.bitRate) ? [4, null == u2 ? void 0 : u2.setBitrate(a2)] : [3, 5];
                    case 4:
                      h2.sent(), h2.label = 5;
                    case 5:
                      return n3(s3), [3, 7];
                    case 6:
                      return c2 = h2.sent(), e3(c2), [3, 7];
                    case 7:
                      return [2];
                  }
                });
              });
            }, t3.prototype.Sh = function(t4, i3) {
              var n3;
              if (!this.stream) {
                var e3 = [];
                if (this.originAudioStream) {
                  var r3 = this.checkPreview(this.originAudioStream);
                  r3 && r3.audioTrack && (e3.push(r3.audioTrack), this.ph = r3.audioTrack);
                }
                if (this.originVideoStream) {
                  var s3 = this.checkPreview(this.originVideoStream);
                  s3 && s3.videoTrack && (e3.push(s3.videoTrack), this.mh = s3.videoTrack);
                }
                this.stream = new MediaStream(e3);
              }
              var o2 = this.checkPreview(this.stream);
              if (!o2) {
                var u2 = {}, a2 = Ra(this.pn, this.an);
                if ((0, B.TE)(t4.bitrate) || (u2.bitRate = t4.bitrate), (0, B.TE)(t4.minBitrate) || (u2.minBitrate = t4.minBitrate), (0, B.TE)(t4.startBitrate) || (u2.startBitrate = t4.startBitrate), u2.audioBitrate = (0, B.Cs)(t4.audioBitrate) ? 1e3 * t4.audioBitrate : 1e3 * (a2.audioBitrate || 48), "camera" === i3) {
                  var c2 = this.pn.settingConfig.getSetting("camera_audio_bitrate", true), h2 = this.pn.settingConfig.getSetting("camera_video_bitrate", true);
                  (0, B.Cs)(u2.audioBitrate) && (0, B.Cs)(c2) && (u2.audioBitrate = 1e3 * c2), (0, B.Cs)(u2.bitRate) && (0, B.Cs)(h2) && (u2.bitRate = h2);
                }
                u2.channelCount = (0, B.TE)(t4.channelCount) ? a2.channelCount || 1 : t4.channelCount, o2 = this.createZegoStreamPreview(this.stream, false, void 0, u2), this.stream = this.nh.getStreamByCanvas(this.stream);
              }
              this.stream && this.wh(this.stream, this.originVideoStream, this.originAudioStream, true), o2 && 0 === (null === (n3 = this.stream) || void 0 === n3 ? void 0 : n3.getAudioTracks().length) && this.nh.setEmptyAudioTrack(this.stream, o2), this.nh.initCopyMusic(this.stream), o2.zegoCaptureStream = this, this.dh = this.fh, this.mn = o2;
            }, t3.prototype.createZegoStreamPreview = function(t4, i3, n3, e3) {
              var r3 = new Ju(this.an, this.pn, this.gn, n3, i3);
              return this.gn.previewStreamList.push(r3), r3.localStream = t4, r3.mediaStreamConfig = {}, e3 && (r3.videoInfo = na(na({}, r3.videoInfo), e3), r3.mediaStreamConfig.bitRate = e3.bitRate), r3.initMediaTrack(t4), "screen" == n3 && this.nh.addShareScreenEnd(t4), r3;
            }, t3.prototype.checkPreview = function(t4) {
              return this.gn.checkPreview(t4);
            }, t3.prototype.wh = function(t4, i3, n3, e3) {
              if (void 0 === e3 && (e3 = false), t4) {
                var r3 = this.checkPreview(t4);
                if (r3) {
                  var s3 = i3 && this.checkPreview(i3), o2 = n3 && this.checkPreview(n3), u2 = {}, a2 = {}, c2 = false;
                  if (r3.previewType = (null == s3 ? void 0 : s3.previewType) || (null == o2 ? void 0 : o2.previewType), s3) {
                    var h2 = s3.videoInfo, f2 = s3.mediaStreamConfig;
                    r3.previewType = s3.previewType, r3.videoPreviewType = s3.videoPreviewType, r3.previewSuc = true, u2 = na({ videoQuality: r3.mediaStreamConfig.videoQuality, bitRate: r3.mediaStreamConfig.bitRate }, f2), c2 = f2.video;
                    var l2 = na({}, h2);
                    if (sa(sa([], Gu, true), ["audioBitrate"], false).forEach(function(t5) {
                      delete l2[t5];
                    }), e3) {
                      ["bitRate", "startBitrate", "minBitRate"].forEach(function(t5) {
                        delete l2[t5];
                      });
                      var d2 = r3.videoInfo.bitRate, v2 = r3.hasUserSetBitrate;
                      if (this.an.info("zcs.up ".concat(r3.previewType, " hasUserSetBitrate: ").concat(v2, ", bitrate: ") + d2), s3.mediaStreamConfig.videoQuality && [1, 2, 3].includes(s3.mediaStreamConfig.videoQuality) || !d2 || !v2) {
                        var m2 = h2.bitRate, p2 = this.pn.settingConfig.getSetting("camera_video_bitrate", true);
                        (0, B.Cs)(m2) && (0, B.Cs)(p2) && (this.an.info("zcs.up ".concat(r3.previewType, " cloud videoBitrate ").concat(p2)), m2 = p2), this.an.info("zcs.up ".concat(r3.previewType, " videoBitrate changed ").concat(d2, " to ").concat(m2)), l2.bitRate = m2;
                      }
                      this.isPublish && delete l2.keyFrameInterval;
                    }
                    a2 = na({}, l2);
                  }
                  if (o2) {
                    h2 = o2.videoInfo;
                    var g2 = (f2 = o2.mediaStreamConfig).audio, b2 = f2.AEC, _2 = f2.AGC, y2 = f2.ANS, w2 = f2.audioBitrate, S2 = f2.channelCount, E2 = f2.audioInput;
                    r3.audioPreviewType = o2.audioPreviewType, r3.previewSuc = true, this.isPublish || (a2.channelCount = h2.channelCount);
                    var k2 = r3.videoInfo.audioBitrate;
                    e3 && k2 || (this.an.info("zcs.up ".concat(e3, " audioBitrate changed ").concat(k2, " to ").concat(h2.audioBitrate)), a2.audioBitrate = h2.audioBitrate), u2 = na(na({}, u2), { audio: g2, AEC: b2, AGC: _2, ANS: y2, audioBitrate: w2, channelCount: S2, audioInput: E2 });
                  }
                  u2.video = c2, r3.mediaStreamConfig = u2, r3.videoInfo = na(e3 ? na({}, r3.videoInfo) : {}, a2);
                }
              }
            }, t3.prototype._getVideoBitrate = function(t4) {
              return (0, B.Cs)(this.eu.videoBitrate) ? na(na({}, t4), { bitrate: this.eu.videoBitrate }) : na(na({}, t4), this.eu.videoBitrate);
            }, t3.prototype._getAudioBitrate = function(t4) {
              return t4.audioBitrate = this.eu.audioBitrate, t4;
            }, t3.prototype._createStream = function(t4, i3, n3, e3, r3) {
              return ea(this, void 0, void 0, function() {
                var s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2;
                return ra(this, function(p2) {
                  switch (p2.label) {
                    case 0:
                      return p2.trys.push([0, 2, , 3]), s3 = n3 == Xu.video || n3 == Xu.videoAndAudio, o2 = n3 == Xu.audio || n3 == Xu.videoAndAudio, t4 = this._getVideoBitrate(t4), t4 = this._getAudioBitrate(t4), this.an.info("zcs.cs config:" + JSON.stringify(((v2 = {})[i3] = t4, v2))), [4, this.nh.createStream((m2 = {}, m2[i3] = t4, m2))];
                    case 1:
                      return u2 = p2.sent(), this.fh = i3, a2 = this.checkPreview(u2), c2 = (null == a2 ? void 0 : a2.originVideoTrack) || u2.getVideoTracks()[0], h2 = (null == a2 ? void 0 : a2.originAudioTrack) || u2.getAudioTracks()[0], o2 && s3 ? (f2 = new MediaStream([c2]), l2 = new MediaStream([h2]), this.createZegoStreamPreview(f2, true, i3), this.createZegoStreamPreview(l2, true, i3), this.wh(f2, u2, null), this.wh(l2, null, u2), this.rh.push(f2), this.eh.push(l2), this.yh(f2, 0), this.yh(l2, 1), !this.stream && a2 ? (this.stream = u2, this.ph = h2, this.mh = c2, a2.zegoCaptureStream = this, this.mn = a2) : this.updateStreamVideoAndAudio(e3, r3, 0)) : s3 ? (this.yh(u2, 0), this.rh.push(u2), this.stream ? this.updateStreamVideoTrack(e3, r3, 0) : this.Sh(t4, i3)) : o2 && (l2 = new MediaStream([h2]), this.createZegoStreamPreview(l2, true, i3), this.wh(l2, null, u2), this.yh(l2, 1), this.eh.push(l2), this.eh.push(u2), this.stream ? this.updateStreamAudioTrack(e3, r3, 0) : this.Sh(t4, i3)), this.isPublish || (this.autoPlay || this.sh) && this.autoPlay && this.playVideo(), this.bh(), e3({ errorCode: 0, extendedData: "" }), [3, 3];
                    case 2:
                      return d2 = p2.sent(), r3({ errorCode: d2.errorCode || d2.code, extendedData: d2.extendedData || d2.msg }), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.startCaptureMicrophone = function(t4) {
              var i3 = this;
              return void 0 === t4 && (t4 = {}), new G.l3(function(n3) {
                return ea(i3, void 0, void 0, function() {
                  var i4, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2 = this;
                  return ra(this, function(d2) {
                    switch (d2.label) {
                      case 0:
                        this.an.info("".concat(i4 = "zcs.scm", " call ").concat(JSON.stringify(t4))), e3 = this.Eh(L.e7.event), r3 = function(i5) {
                          var r4, s4, o3;
                          if (l2.mn && !l2.isPublish) {
                            var u3 = null === (r4 = l2.mn) || void 0 === r4 ? void 0 : r4.mediaStreamConfig, a3 = u3.channelCount;
                            o3 = { audio: { input: u3.audioInput, ANS: u3.ANS, AEC: u3.AEC, AGC: u3.AGC, bps: (null === (s4 = l2.mn) || void 0 === s4 ? void 0 : s4.videoInfo).audioBitrate, channelCount: a3 } };
                          }
                          (0, G.lA)(e3, { preview_conf: o3, stream_options: { audio: t4 }, error: i5.errorCode || 0, message: i5.extendedData || i5.message }), n3(i5);
                        }, d2.label = 1;
                      case 1:
                        return d2.trys.push([1, 3, , 4]), s3 = {}, (null === (c2 = this.eu.camera) || void 0 === c2 ? void 0 : c2.audio) && (0, B.w)(null === (h2 = this.eu.camera) || void 0 === h2 ? void 0 : h2.audio) && (s3 = na({}, io(null === (f2 = this.eu.camera) || void 0 === f2 ? void 0 : f2.audio))), o2 = this.kh("microphone", i4), s3 = na(na(na({}, s3), o2), io(t4)), u2 = na({ audio: true, video: false, audioInput: s3.input }, s3), [4, this._createStream(u2, "camera", 1, r3, r3)];
                      case 2:
                        return d2.sent(), this.an.info("zcs.scm success"), [3, 4];
                      case 3:
                        return a2 = d2.sent(), r3(a2), this.an.info("zcs.scm fail"), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.startCaptureCamera = function(t4) {
              var i3 = this;
              return void 0 === t4 && (t4 = {}), new G.l3(function(n3) {
                return ea(i3, void 0, void 0, function() {
                  var i4, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2 = this;
                  return ra(this, function(d2) {
                    switch (d2.label) {
                      case 0:
                        this.an.info("".concat(i4 = "zcs.scc", " call ").concat(JSON.stringify(t4))), e3 = this.Eh(L.Oq.event), r3 = function(i5) {
                          var r4, s4, o3;
                          if (l2.mn && !l2.isPublish) {
                            var u3 = null === (r4 = l2.mn) || void 0 === r4 ? void 0 : r4.mediaStreamConfig, a3 = null === (s4 = l2.mn) || void 0 === s4 ? void 0 : s4.videoInfo, c3 = a3.contentHint;
                            o3 = { video: { input: u3.videoInput, w: a3.width, h: a3.height, fps: a3.frameRate, bps: 1e3 * a3.bitRate, keyFrameInterval: a3.keyFrameInterval, optimizationMode: c3 || void 0, facingMode: u3.facingMode } };
                          }
                          (0, G.lA)(e3, { preview_conf: o3, stream_options: { video: t4 }, error: i5.errorCode || 0, message: i5.extendedData || i5.message }), n3(i5);
                        }, d2.label = 1;
                      case 1:
                        return d2.trys.push([1, 3, , 4]), s3 = {}, (null === (c2 = this.eu.camera) || void 0 === c2 ? void 0 : c2.video) && (0, B.w)(null === (h2 = this.eu.camera) || void 0 === h2 ? void 0 : h2.video) && (s3 = na({}, io(null === (f2 = this.eu.camera) || void 0 === f2 ? void 0 : f2.video))), o2 = this.kh("camera", i4), s3 = na(na(na({}, s3), o2), io(t4)), u2 = na({ audio: false, video: true, videoInput: s3.input, videoQuality: s3.quality, videoOptimizationMode: s3.optimizationMode }, s3), [4, this._createStream(u2, "camera", 0, r3, r3)];
                      case 2:
                        return d2.sent(), this.an.info("zcs.scc success"), [3, 4];
                      case 3:
                        return a2 = d2.sent(), r3(a2), this.an.info("zcs.scc fail"), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.startCaptureCameraAndMicrophone = function(t4, i3) {
              var n3 = this;
              return void 0 === t4 && (t4 = {}), void 0 === i3 && (i3 = {}), new G.l3(function(e3) {
                return ea(n3, void 0, void 0, function() {
                  var n4, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2 = this;
                  return ra(this, function(_2) {
                    switch (_2.label) {
                      case 0:
                        this.an.info("".concat(n4 = "zcs.sccm", " call c:").concat(JSON.stringify(t4), ", m:").concat(JSON.stringify(i3))), r3 = this.Eh(L.N7.event), s3 = function(n5) {
                          var s4, o3, u3;
                          if (b2.mn && !b2.isPublish) {
                            var a3 = null === (s4 = b2.mn) || void 0 === s4 ? void 0 : s4.mediaStreamConfig, c3 = null === (o3 = b2.mn) || void 0 === o3 ? void 0 : o3.videoInfo, h3 = c3.contentHint;
                            u3 = { video: { input: a3.videoInput, w: c3.width, h: c3.height, fps: c3.frameRate, bps: 1e3 * c3.bitRate, keyFrameInterval: c3.keyFrameInterval, optimizationMode: h3 || void 0, facingMode: a3.facingMode }, audio: { input: a3.audioInput, ANS: a3.ANS, AEC: a3.AEC, AGC: a3.AGC, bps: c3.audioBitrate, channelCount: a3.channelCount } };
                          }
                          (0, G.lA)(r3, { preview_conf: u3, stream_options: { video: t4, audio: i3 }, error: n5.errorCode || 0, message: n5.extendedData || n5.message }), e3(n5);
                        }, _2.label = 1;
                      case 1:
                        return _2.trys.push([1, 3, , 4]), o2 = {}, (null === (l2 = this.eu.camera) || void 0 === l2 ? void 0 : l2.video) && (0, B.w)(null === (d2 = this.eu.camera) || void 0 === d2 ? void 0 : d2.video) && (o2 = na({}, io(null === (v2 = this.eu.camera) || void 0 === v2 ? void 0 : v2.video))), u2 = this.kh("camera", n4), o2 = na(na(na({}, o2), u2), io(t4)), a2 = {}, (null === (m2 = this.eu.camera) || void 0 === m2 ? void 0 : m2.audio) && (0, B.w)(null === (p2 = this.eu.camera) || void 0 === p2 ? void 0 : p2.audio) && (a2 = na({}, io(null === (g2 = this.eu.camera) || void 0 === g2 ? void 0 : g2.audio))), c2 = this.kh("microphone", n4), a2 = na(na(na({}, a2), c2), io(i3)), h2 = na(na(na({ audio: true, video: true, videoInput: null == o2 ? void 0 : o2.input, videoQuality: null == o2 ? void 0 : o2.quality, videoOptimizationMode: null == o2 ? void 0 : o2.optimizationMode }, o2), { audioInput: null == a2 ? void 0 : a2.input }), a2), [4, this._createStream(h2, "camera", 2, s3, s3)];
                      case 2:
                        return _2.sent(), this.an.info("zcs.sccm success"), [3, 4];
                      case 3:
                        return f2 = _2.sent(), s3(f2), this.an.info("zcs.sccm fail"), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.autoCapture = function() {
              var t4 = this;
              return new G.l3(function(i3, n3) {
                return ea(t4, void 0, void 0, function() {
                  var t5, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2;
                  return ra(this, function(v2) {
                    switch (v2.label) {
                      case 0:
                        this.an.info("zcs.ac call"), v2.label = 1;
                      case 1:
                        return v2.trys.push([1, 23, , 24]), s3 = (e3 = this.eu).custom, o2 = e3.screen, (r3 = e3.camera) ? (this.an.info("zcs.ac camera:".concat(JSON.stringify(r3))), l2 = r3.video, (f2 = r3.audio) && l2 ? (u2 = (0, B.w)(l2) ? l2 : void 0, a2 = (0, B.w)(f2) ? f2 : void 0, [4, this.startCaptureCameraAndMicrophone(u2, a2)]) : [3, 3]) : [3, 8];
                      case 2:
                        return t5 = v2.sent(), [3, 7];
                      case 3:
                        return f2 ? [4, this._h(f2, this.startCaptureMicrophone)] : [3, 5];
                      case 4:
                        return t5 = v2.sent(), [3, 7];
                      case 5:
                        return l2 ? [4, this._h(l2, this.startCaptureCamera)] : [3, 7];
                      case 6:
                        t5 = v2.sent(), v2.label = 7;
                      case 7:
                        return [3, 22];
                      case 8:
                        return o2 ? (this.an.info("zcs.ac screen:".concat(JSON.stringify(o2))), l2 = o2.video, (f2 = o2.audio) ? (c2 = l2, h2 = f2, (0, B.dd)(l2) && (c2 = {}), (0, B.dd)(f2) && (h2 = {}), [4, this.startCaptureScreenWithAudio(c2, h2)]) : [3, 10]) : [3, 13];
                      case 9:
                        return t5 = v2.sent(), [3, 12];
                      case 10:
                        return [4, this._h(l2, this.startCaptureScreen)];
                      case 11:
                        t5 = v2.sent(), v2.label = 12;
                      case 12:
                        return [3, 22];
                      case 13:
                        return s3 ? (this.an.info("zcs.ac custom:".concat(JSON.stringify(s3))), l2 = s3.video, (f2 = s3.audio) && l2 && f2.source === l2.source ? [4, this.startCaptureCustomVideoAndAudio(l2, f2)] : [3, 15]) : [3, 20];
                      case 14:
                        return t5 = v2.sent(), [3, 19];
                      case 15:
                        return f2 ? [4, this._h(f2, this.startCaptureCustomAudio)] : [3, 17];
                      case 16:
                        t5 = v2.sent(), v2.label = 17;
                      case 17:
                        return l2 ? [4, this._h(l2, this.startCaptureCustomVideo)] : [3, 19];
                      case 18:
                        t5 = v2.sent(), v2.label = 19;
                      case 19:
                        return [3, 22];
                      case 20:
                        return [4, this.startCaptureCameraAndMicrophone({}, {})];
                      case 21:
                        t5 = v2.sent(), v2.label = 22;
                      case 22:
                        return t5 || n3({ errorCode: re.mrK.code, extendedData: re.mrK.message }), 0 !== (null == t5 ? void 0 : t5.errorCode) ? n3(t5) : i3(t5), [3, 24];
                      case 23:
                        return d2 = v2.sent(), n3(d2), [3, 24];
                      case 24:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.startCaptureCustomAudio = function(t4) {
              var i3 = this;
              return new G.l3(function(n3) {
                return ea(i3, void 0, void 0, function() {
                  var i4, e3, r3, s3, o2, u2, a2, c2 = this;
                  return ra(this, function(h2) {
                    switch (h2.label) {
                      case 0:
                        if (this.an.info("".concat(i4 = "zcs.scca", " call ").concat(JSON.stringify(t4))), e3 = this.Eh(L.eH.event), r3 = function(i5) {
                          var r4, s4, o3;
                          c2.mn && !c2.isPublish && (o3 = { audio: { bps: (null === (r4 = c2.mn) || void 0 === r4 ? void 0 : r4.videoInfo).audioBitrate, channelCount: null === (s4 = c2.mn) || void 0 === s4 ? void 0 : s4.mediaStreamConfig.channelCount } });
                          (0, G.lA)(e3, { preview_conf: o3, stream_options: { audio: c2.Oh(t4) }, error: i5.errorCode || 0, message: i5.extendedData || i5.message }), n3(i5);
                        }, (s3 = this.Ih(t4)).errorCode)
                          return r3(s3), [2];
                        h2.label = 1;
                      case 1:
                        return h2.trys.push([1, 3, , 4]), o2 = this.kh("customAudio", i4), [4, this._createStream(na(na(na(na({}, io(null === (a2 = this.eu.custom) || void 0 === a2 ? void 0 : a2.audio)), o2), io(t4)), { audio: true }), "custom", 1, r3, r3)];
                      case 2:
                        return h2.sent(), this.an.info("".concat(i4, " success")), [3, 4];
                      case 3:
                        return u2 = h2.sent(), r3(u2), this.an.info("".concat(i4, " fail")), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.startCaptureCustomVideo = function(t4) {
              var i3 = this;
              return new G.l3(function(n3) {
                return ea(i3, void 0, void 0, function() {
                  var i4, e3, r3, s3, o2, u2, a2, c2, h2 = this;
                  return ra(this, function(f2) {
                    switch (f2.label) {
                      case 0:
                        if (this.an.info("".concat(i4 = "zcs.sccv", " call ").concat(JSON.stringify(t4))), e3 = this.Eh(L.pT.event), r3 = function(i5) {
                          var r4, s4;
                          if (h2.mn && !h2.isPublish) {
                            var o3 = null === (r4 = h2.mn) || void 0 === r4 ? void 0 : r4.videoInfo, u3 = o3.contentHint;
                            s4 = { video: { bps: 1e3 * o3.bitRate, keyFrameInterval: o3.keyFrameInterval, optimizationMode: u3 || void 0 } };
                          }
                          (0, G.lA)(e3, { preview_conf: s4, stream_options: { video: h2.Oh(t4) }, error: i5.errorCode || 0, message: i5.extendedData || i5.message }), n3(i5);
                        }, (s3 = this.Ih(t4)).errorCode)
                          return r3(s3), [2];
                        f2.label = 1;
                      case 1:
                        return f2.trys.push([1, 3, , 4]), o2 = this.kh("customVideo", i4), u2 = Object.assign({}, io(null === (c2 = this.eu.custom) || void 0 === c2 ? void 0 : c2.video), o2, io(t4)), [4, this._createStream(na({ videoOptimizationMode: u2.optimizationMode }, u2), "custom", 0, r3, r3)];
                      case 2:
                        return f2.sent(), this.an.info("".concat(i4, " success")), [3, 4];
                      case 3:
                        return a2 = f2.sent(), r3(a2), this.an.info("".concat(i4, " fail")), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.startCaptureCustomVideoAndAudio = function(t4, i3) {
              var n3 = this;
              return new G.l3(function(e3) {
                return ea(n3, void 0, void 0, function() {
                  var n4, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2 = this;
                  return ra(this, function(w2) {
                    switch (w2.label) {
                      case 0:
                        if (this.an.info("".concat(n4 = "zcs.sccva", " call v:").concat(JSON.stringify(t4), " a:").concat(JSON.stringify(i3))), r3 = this.Eh(L.Z1.event), s3 = function(n5) {
                          var s4, o3, u3;
                          if (y2.mn && !y2.isPublish) {
                            var a3 = (null === (s4 = y2.mn) || void 0 === s4 ? void 0 : s4.mediaStreamConfig).channelCount, c3 = null === (o3 = y2.mn) || void 0 === o3 ? void 0 : o3.videoInfo, h3 = c3.contentHint;
                            u3 = { video: { bps: 1e3 * c3.bitRate, keyFrameInterval: c3.keyFrameInterval, optimizationMode: h3 || void 0 }, audio: { bps: c3.audioBitrate, channelCount: a3 } };
                          }
                          (0, G.lA)(r3, { preview_conf: u3, stream_options: { video: y2.Oh(t4), audio: y2.Oh(i3) }, error: n5.errorCode || 0, message: n5.extendedData || n5.message }), e3(n5);
                        }, (o2 = this.Ih(t4)).errorCode)
                          return s3(o2), [2];
                        if ((u2 = this.Ih(i3)).errorCode)
                          return s3(u2), [2];
                        w2.label = 1;
                      case 1:
                        return w2.trys.push([1, 7, , 8]), a2 = this.kh("customAudio", n4), c2 = this.kh("customVideo", n4), t4.source != i3.source ? [3, 3] : [4, this._createStream(na(na(na(na(na(na(na({ videoOptimizationMode: t4.optimizationMode || c2.optimizationMode || (null === (d2 = null === (l2 = this.eu.custom) || void 0 === l2 ? void 0 : l2.video) || void 0 === d2 ? void 0 : d2.optimizationMode) }, io(null === (v2 = this.eu.custom) || void 0 === v2 ? void 0 : v2.video)), io(null === (m2 = this.eu.custom) || void 0 === m2 ? void 0 : m2.audio)), c2), a2), io(t4)), io(i3)), { audio: true }), "custom", 2, s3, s3)];
                      case 2:
                        return w2.sent(), [3, 6];
                      case 3:
                        return h2 = { video: false, audio: false }, [4, this._createStream(na(na(na(na({ videoOptimizationMode: t4.optimizationMode || c2.optimizationMode || (null === (g2 = null === (p2 = this.eu.custom) || void 0 === p2 ? void 0 : p2.video) || void 0 === g2 ? void 0 : g2.optimizationMode) }, null === (b2 = this.eu.custom) || void 0 === b2 ? void 0 : b2.video), c2), t4), { video: true }), "custom", 0, function(t5) {
                          h2.video = true, h2.audio && s3(t5);
                        }, s3)];
                      case 4:
                        return w2.sent(), [4, this._createStream(na(na(na(na({}, null === (_2 = this.eu.custom) || void 0 === _2 ? void 0 : _2.audio), a2), i3), { audio: true }), "custom", 1, function(t5) {
                          h2.audio = true, h2.video && s3(t5);
                        }, s3)];
                      case 5:
                        w2.sent(), w2.label = 6;
                      case 6:
                        return this.an.info("zcs.sccva success"), [3, 8];
                      case 7:
                        return f2 = w2.sent(), s3(f2), this.an.info("zcs.sccva fail"), [3, 8];
                      case 8:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.startCaptureScreen = function(t4) {
              var i3 = this;
              return void 0 === t4 && (t4 = {}), new G.l3(function(n3, e3) {
                return ea(i3, void 0, void 0, function() {
                  var i4, e4, r3, s3, o2, u2, a2, c2, h2, f2, l2 = this;
                  return ra(this, function(d2) {
                    switch (d2.label) {
                      case 0:
                        this.an.info("".concat(i4 = "zcs.scs", " call ").concat(JSON.stringify(t4))), e4 = this.Eh(L.xp.event), r3 = function(i5) {
                          var r4, s4;
                          if (l2.mn && !l2.isPublish) {
                            var o3 = null === (r4 = l2.mn) || void 0 === r4 ? void 0 : r4.videoInfo, u3 = o3.contentHint;
                            s4 = { video: { w: o3.width, h: o3.height, fps: o3.frameRate, bps: 1e3 * o3.bitRate, keyFrameInterval: o3.keyFrameInterval, optimizationMode: u3 || void 0 } };
                          }
                          (0, G.lA)(e4, { preview_conf: s4, stream_options: { video: pt(t4 || {}, ["captureElement"]) }, error: i5.errorCode || 0, message: i5.extendedData || i5.message }), n3(i5);
                        }, d2.label = 1;
                      case 1:
                        return d2.trys.push([1, 3, , 4]), s3 = {}, (null === (c2 = this.eu.screen) || void 0 === c2 ? void 0 : c2.video) && (0, B.w)(null === (h2 = this.eu.screen) || void 0 === h2 ? void 0 : h2.video) && (s3 = na({}, io(null === (f2 = this.eu.screen) || void 0 === f2 ? void 0 : f2.video))), o2 = this.kh("screenVideo", i4), s3 = na(na(na({}, s3), o2), io(t4)), u2 = na(na({ videoOptimizationMode: s3.optimizationMode, videoQuality: s3.quality }, s3), { audio: false }), [4, this._createStream(u2, "screen", 0, r3, r3)];
                      case 2:
                        return d2.sent(), this.an.info("".concat(i4, " success")), [3, 4];
                      case 3:
                        return a2 = d2.sent(), r3(a2), this.an.info("".concat(i4, " fail")), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.startCaptureScreenWithAudio = function(t4, i3) {
              var n3 = this;
              return void 0 === t4 && (t4 = {}), void 0 === i3 && (i3 = {}), new G.l3(function(e3, r3) {
                return ea(n3, void 0, void 0, function() {
                  var n4, r4, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2 = this;
                  return ra(this, function(_2) {
                    switch (_2.label) {
                      case 0:
                        this.an.info("".concat(n4 = "zcs.scs", " call v:").concat(JSON.stringify(t4), " a:").concat(JSON.stringify(i3))), r4 = this.Eh(L.tp.event), s3 = function(n5) {
                          var s4, o3, u3;
                          if (b2.mn && !b2.isPublish) {
                            var a3 = null === (s4 = b2.mn) || void 0 === s4 ? void 0 : s4.mediaStreamConfig, c3 = null === (o3 = b2.mn) || void 0 === o3 ? void 0 : o3.videoInfo, h3 = c3.contentHint;
                            u3 = { video: { w: c3.width, h: c3.height, fps: c3.frameRate, bps: 1e3 * c3.bitRate, keyFrameInterval: c3.keyFrameInterval, optimizationMode: h3 || void 0 }, audio: { ANS: a3.ANS, AEC: a3.AEC, AGC: a3.AGC, bps: c3.audioBitrate, channelCount: a3.channelCount } };
                          }
                          (0, G.lA)(r4, { preview_conf: u3, stream_options: { video: pt(t4 || {}, ["captureElement"]), audio: i3 }, error: n5.errorCode || 0, message: n5.extendedData || n5.message }), e3(n5);
                        }, _2.label = 1;
                      case 1:
                        return _2.trys.push([1, 3, , 4]), o2 = {}, (null === (l2 = this.eu.screen) || void 0 === l2 ? void 0 : l2.video) && (0, B.w)(null === (d2 = this.eu.screen) || void 0 === d2 ? void 0 : d2.video) && (o2 = na({}, io(null === (v2 = this.eu.screen) || void 0 === v2 ? void 0 : v2.video))), u2 = this.kh("screenVideo", n4), o2 = na(na(na({}, o2), u2), io(t4)), a2 = {}, (null === (m2 = this.eu.screen) || void 0 === m2 ? void 0 : m2.audio) && (0, B.w)(null === (p2 = this.eu.screen) || void 0 === p2 ? void 0 : p2.audio) && (a2 = na({}, io(null === (g2 = this.eu.screen) || void 0 === g2 ? void 0 : g2.audio))), c2 = this.kh("screenAudio", n4), a2 = na(na(na({}, a2), c2), io(i3)), h2 = na(na(na({ videoOptimizationMode: o2.optimizationMode, videoQuality: o2.quality }, o2), a2), { audio: true }), [4, this._createStream(h2, "screen", 2, s3, s3)];
                      case 2:
                        return _2.sent(), this.an.info("zcs.scs success"), [3, 4];
                      case 3:
                        return f2 = _2.sent(), s3(f2), this.an.info("zcs.scs fail"), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.stopCaptureAudio = function() {
              var t4 = this;
              return new G.l3(function(i3) {
                var n3, e3, r3 = true;
                if (t4.originAudioStream) {
                  t4.an.info("zcs.sca call stop capture");
                  var s3 = t4.originAudioStream.getAudioTracks()[0];
                  (null === (n3 = t4.stream) || void 0 === n3 ? void 0 : n3.getAudioTracks()[0]) && t4.isPublish && t4.stream && (t4.an.info("zcs.sca stop audio"), r3 = "camera" === (null === (e3 = t4.mn) || void 0 === e3 ? void 0 : e3.audioPreviewType) ? t4.mn.enableMicrophoneOnly(false) : t4.gh.enableMicrophone(t4.stream, true), t4.mn && (t4.mn.syncAudioEnabled = false)), t4.an.info("zcs.sca stop result:" + r3), r3 && (s3.stop(), t4.originAudioStream = null, t4.stopPlayCaptureAudio(), t4.bh());
                }
                i3(r3);
              });
            }, t3.prototype.stopCaptureVideo = function() {
              var t4;
              return ea(this, void 0, void 0, function() {
                var i3, n3, e3, r3, s3 = this;
                return ra(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      if (i3 = true, this.an.info("zcs.scv call stop capture"), !this.originVideoStream)
                        return [3, 7];
                      n3 = this.originVideoStream.getVideoTracks()[0], e3 = null === (t4 = this.stream) || void 0 === t4 ? void 0 : t4.getVideoTracks()[0], o2.label = 1;
                    case 1:
                      return o2.trys.push([1, 6, , 7]), e3 ? this.mn ? (this.an.info("zcs.scv stop stream video"), "camera" != this.mn.videoPreviewType ? [3, 3] : [4, this.gh.enableCameraCapturing(this.mn, false)]) : [3, 5] : [3, 5];
                    case 2:
                      return i3 = o2.sent(), [3, 5];
                    case 3:
                      return [4, this.mn.stopCaptureVideo()];
                    case 4:
                      o2.sent(), i3 = true, o2.label = 5;
                    case 5:
                      return this.an.info("zcs.scv stop result:" + i3), i3 && (this.gn.trackUtils.stopTrack(n3), this.originVideoStream = null, this.stopPlayCaptureVideo(), this.rh.forEach(function(t5) {
                        return s3.nh.destroyStream(t5);
                      }), this.rh = [], this.bh()), [3, 7];
                    case 6:
                      return r3 = o2.sent(), this.an.error("zcs.scv " + JSON.stringify(r3)), i3 = false, [3, 7];
                    case 7:
                      return [2, i3];
                  }
                });
              });
            }, t3.prototype.Rh = function(t4, i3) {
              void 0 === i3 && (i3 = false);
              var n3 = t4 && this.checkPreview(t4);
              if (!n3)
                throw new Error("The stream does not exist, you must first capture the stream");
              return i3 && n3 ? new Zo(t4, n3, { clearLastFrame: this.pn.engineConfig.previewClearLastFrame }) : (null == n3 ? void 0 : n3.getViewer()) || null;
            }, t3.prototype.Th = function() {
              var t4, i3, n3;
              this.hh = this.Rh(this.stream), null === (t4 = this.hh) || void 0 === t4 || t4.on("canPlayAudio", this.ou.canPlayAudio), null === (i3 = this.hh) || void 0 === i3 || i3.on("canPlayVideo", this.ou.canPlayVideo), null === (n3 = this.hh) || void 0 === n3 || n3.on("autoplayFailed", this.ou.autoplayFailed);
            }, t3.prototype.playAudio = function(t4) {
              var i3;
              if (this.an.info("zcs.pa call"), !this.stream)
                return this.an.warn("zcs.pa You need to capture the audio stream first");
              this.hh || this.Th(), null === (i3 = this.hh) || void 0 === i3 || i3.playAudio(t4, true), this.audioMuted = false;
            }, t3.prototype.playCaptureAudio = function(t4) {
              var i3, n3, e3;
              if (this.an.info("zcs.pca call"), !this.originAudioStream)
                return this.an.warn("zcs.pca You need to capture the audio stream first");
              this.uh || (this.uh = this.Rh(this.originAudioStream), null === (i3 = this.uh) || void 0 === i3 || i3.on("canPlayAudio", this.ou.canPlayCaptureAudio), null === (n3 = this.uh) || void 0 === n3 || n3.on("autoplayFailed", this.ou.autoplayCaptureFailed)), this.audioCaptureMuted = false, null === (e3 = this.uh) || void 0 === e3 || e3.playAudio(t4, true);
            }, t3.prototype.playVideo = function(t4, i3) {
              var n3;
              if (this.an.info("zcs.pv call"), this.stream) {
                if (this.hh && this.hh.inited || (this.Th(), null === (n3 = this.hh) || void 0 === n3 || n3.setAudioMuted(this.audioMuted)), this.hh) {
                  var e3 = t4 || this.view;
                  e3 && (0, B.qi)(e3) ? (this.hh.playVideo(e3, i3), this.sh = true) : this.an.error("zcs.pv Execute `playVideo` failed, container not exist");
                }
              } else
                this.an.warn("zcs.pv You need to capture the video stream first");
            }, t3.prototype.playCaptureVideo = function(t4, i3) {
              this.an.info("zcs.pcv call");
              var n3 = this.ah[0] || null;
              if (this.originVideoStream) {
                if (!n3 || this.eu.multiplacePreview) {
                  if (!(n3 = this.Rh(this.originVideoStream, n3 && this.eu.multiplacePreview)))
                    return;
                  n3.on("canPlayVideo", this.ou.canPlayCaptureVideo), n3.on("autoplayFailed", this.ou.autoplayCaptureFailed), this.ah.push(n3);
                }
                var e3 = t4 || this.eu.captureView;
                e3 && (0, B.qi)(e3) ? (n3.playVideo(e3, i3), this.oh = true) : this.an.error("zcs.pcv Execute `playVideo` failed, container not exist");
              } else
                this.an.warn("zcs.pv You need to capture the video stream first");
            }, t3.prototype.updatePlayVideo = function() {
              this.hh && this.stream ? this.hh.setVideo(this.stream.getVideoTracks()[0]) : this.autoPlay && this.playVideo();
            }, t3.prototype.updatePlayAudio = function() {
              this.hh && this.stream && this.hh.setAudio(this.stream.getAudioTracks()[0]);
            }, t3.prototype.takeStreamSnapshot = function(t4) {
              var i3;
              return (null === (i3 = this.hh) || void 0 === i3 ? void 0 : i3.takeStreamSnapshot(t4)) || "";
            }, t3.prototype.resumeVideo = function() {
              var t4;
              return null === (t4 = this.hh) || void 0 === t4 ? void 0 : t4.resume(true, ["video"]);
            }, t3.prototype.resumeAudio = function() {
              var t4;
              return null === (t4 = this.hh) || void 0 === t4 ? void 0 : t4.resume(true, ["audio"]);
            }, t3.prototype.stopVideo = function() {
              var t4;
              null === (t4 = this.hh) || void 0 === t4 || t4.stopVideo(), this.sh = false;
            }, t3.prototype.stopAudio = function() {
              this.hh && (this.hh.stopAudio(), this.audioMuted = true);
            }, t3.prototype.stopPlayCaptureVideo = function() {
              this.ah.forEach(function(t4) {
                t4.stopVideo(), t4.destroy();
              }), this.ah = [], this.oh = false;
            }, t3.prototype.stopPlayCaptureAudio = function() {
              this.uh && (this.uh.destroy(), this.uh = null, this.audioCaptureMuted = true);
            }, t3.prototype.setVolume = function(t4) {
              return !!this.hh && this.hh.setVolume(t4);
            }, t3.prototype.setAudioOutputDevice = function(t4) {
              if (this.hh)
                return this.hh.useAudioOut(t4);
            }, t3.prototype._destroyCacheStream = function(t4) {
              var i3 = this;
              return t4.filter(function(t5) {
                return !!t5.active || (i3.nh.destroyStream(t5), false);
              });
            }, t3.prototype.bh = function() {
              this.eh = this._destroyCacheStream(this.eh), this.rh = this._destroyCacheStream(this.rh);
            }, t3.prototype.kh = function(t4, i3) {
              var n3 = this.stream && this.checkPreview(this.stream);
              if (!this.stream || !n3)
                return this.an.info("".concat(i3, " stream:").concat(!this.stream, ", previewer:").concat(!n3)), {};
              var e3 = {}, r3 = n3.mediaStreamConfig, s3 = n3.videoPreviewType, o2 = n3.audioPreviewType;
              if (r3) {
                switch (t4) {
                  case "camera":
                    if ("camera" === s3) {
                      var u2 = r3.quality;
                      e3 = { input: r3.videoInput, quality: r3.videoQuality || u2, facingMode: r3.facingMode, width: r3.width, height: r3.height, frameRate: r3.frameRate, optimizationMode: r3.optimizationMode, keyFrameInterval: r3.keyFrameInterval };
                    }
                    break;
                  case "microphone":
                    if ("camera" === o2)
                      e3 = { ANS: r3.ANS, AGC: r3.AGC, AEC: r3.AEC, channelCount: r3.channelCount };
                    break;
                  case "customVideo":
                    "custom" === s3 && (e3 = { optimizationMode: r3.optimizationMode, keyFrameInterval: r3.keyFrameInterval });
                    break;
                  case "customAudio":
                    "custom" === o2 && (e3 = { channelCount: r3.channelCount });
                    break;
                  case "screenVideo":
                    if ("screen" === s3) {
                      var a2 = null == n3 ? void 0 : n3.mediaStreamConfig;
                      u2 = a2.quality;
                      e3 = { quality: a2.videoQuality || u2, width: a2.width, height: a2.height, frameRate: a2.frameRate, sourceID: a2.sourceID, optimizationMode: a2.optimizationMode, keyFrameInterval: a2.keyFrameInterval, captureElement: a2.captureElement };
                    }
                    break;
                  case "screenAudio":
                    if ("screen" === o2) {
                      var c2 = null == n3 ? void 0 : n3.mediaStreamConfig;
                      e3 = { ANS: c2.ANS, AGC: c2.AGC, AEC: c2.AEC };
                    }
                }
                e3 = e3 && io(e3);
              }
              return e3;
            }, t3.prototype.Ih = function(t4) {
              return (null == t4 ? void 0 : t4.source) && ((0, B.Si)(null == t4 ? void 0 : t4.source) || (0, B.dr)(null == t4 ? void 0 : t4.source)) ? { errorCode: 0, extendedData: "" } : { errorCode: re.LLz.code, extendedData: re.LLz.message + " source not exist or error" };
            }, t3.prototype.Eh = function(t4) {
              var i3 = (0, G.fU)(this.cr, e2.t0.H, "", t4, L.nO.event);
              return i3.setAttributes({ local_stream_id: this.id }), i3;
            }, t3.prototype.Oh = function(t4) {
              return na(na({}, t4), { source: void 0, source_type: (null == t4 ? void 0 : t4.source) ? (0, B.Si)(null == t4 ? void 0 : t4.source) ? "Element" : "MediaStream" : void 0 });
            }, t3.prototype.destroy = function() {
              var t4, i3 = this;
              this.originAudioStream && (this.originAudioStream = null), this.originVideoStream && (this.originVideoStream = null), this.stream && (this.nh.destroyStream(this.stream), this.stream = null), this.eh.forEach(function(t5) {
                return i3.nh.destroyStream(t5);
              }), this.rh.forEach(function(t5) {
                return i3.nh.destroyStream(t5);
              }), this.eh = [], this.rh = [], this.stopPlayCaptureVideo(), this.stopPlayCaptureAudio(), this.stopVideo(), this.stopAudio(), null === (t4 = this.hh) || void 0 === t4 || t4.destroy(), this.hh = null, this._a = new xo();
            }, t3;
          }(), ua = "zsc.rd.qd", aa = function() {
            function t3(t4, i3, n3) {
              this.an = t4, this.pn = i3, this.gn = n3, this.Ch = 2e3, this.lastRecordDeviceTime = 0;
            }
            return t3.prototype.getDetectionStreams = function() {
              var t4 = [];
              return this.gn.previewStreamList.forEach(function(i3) {
                i3.localStream && t4.push(i3.localStream);
              }), t4;
            }, t3.prototype.Ah = function(t4) {
              this.an.warn(ua + " DeviceError: ".concat(re.f5Z.code, " ").concat(re.f5Z.message)), this.pn.actionListener("_deviceError", re.f5Z.code, t4, "micro"), this.pn.actionListener("deviceError", re.f5Z.code, t4);
            }, t3.prototype.zh = function(t4) {
              if (this.an.info(ua + " get name of device id: ".concat(JSON.stringify(t4))), !t4.deviceID && !this.Dh && "" == t4.trackLabel)
                return "unknown";
              if (!t4.deviceID || "default" === t4.deviceID)
                return t4.trackLabel;
              for (var i3 in this.Dh) {
                var n3 = this.Dh[i3];
                if (n3)
                  for (var e3 = 0, r3 = n3; e3 < r3.length; e3++) {
                    var s3 = r3[e3];
                    if (s3.deviceID === t4.deviceID)
                      return s3.deviceName;
                  }
              }
              return t4.trackLabel;
            }, t3.prototype.Nh = function(t4) {
              this.an.warn(ua + " DeviceError: ".concat(re.tlN.code, " ").concat(re.tlN.message)), this.pn.actionListener("_deviceError", re.tlN.code, t4, "camera"), this.pn.actionListener("deviceError", re.tlN.code, t4);
            }, t3.prototype.Ph = function(t4) {
              this.Dh = t4;
            }, t3.prototype.Mh = function(t4) {
              return { trackID: t4.id, trackLabel: t4.label, readyState: t4.readyState, deviceID: t4.getSettings().deviceId };
            }, t3.prototype.xh = function(t4, i3) {
              return -1 !== t4.findIndex(function(t5) {
                return t5.deviceName == i3.deviceName && t5.preview == t5.preview;
              });
            }, t3.prototype.jh = function(t4, i3) {
              if (t4.audioTrack) {
                var n3 = this.Mh(t4.audioTrack), e3 = performance.now() - t4.lastTrackEndTime.audio;
                if ("ended" == n3.readyState && e3 < this.Ch) {
                  this.an.warn(ua + " mic device may loose.");
                  var r3 = { deviceName: this.zh(n3), preview: t4 };
                  this.xh(i3, r3) || i3.push(r3);
                }
              }
            }, t3.prototype.qh = function(t4, i3) {
              if (t4.videoTrack) {
                var n3 = this.Mh(t4.videoTrack), e3 = performance.now() - t4.lastTrackEndTime.video;
                if ("ended" == n3.readyState && e3 < this.Ch) {
                  this.an.warn(ua + " camera device may loose.");
                  var r3 = { deviceName: this.zh(n3), preview: t4 };
                  this.xh(i3, r3) || i3.push(r3);
                }
              }
            }, t3.prototype.Lh = function(t4, i3, n3) {
              var e3 = this.gn.getPreviewer(t4);
              e3 && (this.jh(e3, i3), this.qh(e3, n3));
            }, t3.prototype.isRecordQuickly = function() {
              return performance.now() - this.lastRecordDeviceTime < this.Ch;
            }, t3.prototype.onDeviceNoChangeQuickly = function(t4) {
              var i3 = this;
              if (this.isRecordQuickly())
                this.an.info(ua + " device no change because record device quickly");
              else {
                this.an.info(ua + " device no change quickly"), this.Ph(t4);
                var n3 = [], e3 = [];
                this.getDetectionStreams().forEach(function(t5) {
                  i3.Lh(t5, n3, e3);
                }), n3.forEach(function(t5) {
                  i3.Ah(t5.deviceName), t5.preview.updatePublisherStreamMicStatus(false, 2);
                }), e3.forEach(function(t5) {
                  i3.Nh(t5.deviceName), t5.preview.updatePublisherStreamCameraStatus(false, 2);
                });
              }
            }, t3;
          }(), ca = function() {
            return ca = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, ca.apply(this, arguments);
          }, ha = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, fa = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, la = function() {
            function t3(t4, i3, n3) {
              this.an = t4, this.gn = i3, this.pn = n3;
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.Bh = function(t4, i3, n3, e3, r3) {
              return ha(this, void 0, void 0, function() {
                var s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2 = this;
                return fa(this, function(b2) {
                  switch (b2.label) {
                    case 0:
                      return s3 = this.gn.checkPreview(i3), o2 = "audio" === t4, s3 ? !!s3.zegoCaptureStream && "video" === t4 && "camera" !== s3.previewType ? (this.an.error("zsc.sd.0 stream type cannot set device"), e3 && e3({ errorCode: re.jut.code, extendedData: re.jut.message }), [2]) : "video" === t4 && 0 == s3.mediaStreamConfig.video ? (this.an.error("zsc.sd.0 camera can not be changed when video is false"), e3 && e3({ errorCode: re.R54.code, extendedData: re.R54.message }), [2]) : o2 && 0 == s3.mediaStreamConfig.audio ? (this.an.error("zsc.sd.0 microphone can not be changed when audio is false"), e3 && e3({ errorCode: re.O2H.code, extendedData: re.O2H.message }), [2]) : ("recapture" === n3 && (s3.mediaStreamConfig.facingMode ? ((r3 = r3 || {}).facingMode = (null == r3 ? void 0 : r3.facingMode) || s3.mediaStreamConfig.facingMode, n3 = "") : n3 = (o2 ? s3.mediaStreamConfig.audioInput : s3.mediaStreamConfig.videoInput) || ""), n3 && delete s3.mediaStreamConfig.facingMode, u2 = {}, "video" === t4 ? ((null == r3 ? void 0 : r3.facingMode) ? u2.facingMode = r3.facingMode : n3 && (u2.videoInput = n3), a2 = s3.videoTrack) : (u2.audio = true, u2.audioInput = n3, a2 = s3.audioTrack), c2 = (0, Pe.m0)(), h2 = (0, Pe.HR)() && (0, Pe.$t)().indexOf("HuaweiBrowser") > -1, this.pn.engineConfig.stopTrackWhenSwitchDevice || (null == r3 ? void 0 : r3.stopTrack) || (0, Pe.gm)() || (0, Pe.hL)() && c2 && (0, Pe.$t)().indexOf("Oriole 64-bit") > -1 || h2 || (0, Pe.Wu)() ? (this.an.info("zsc.sd.0 stop "), this.gn.trackUtils.stopTrack(a2), c2 && (0, Pe.gm)() ? [4, new Promise(function(t5) {
                        setTimeout(function() {
                          t5(void 0);
                        }, 100);
                      })] : [3, 2]) : [3, 2]) : (this.an.error("zsc.sd.0 preview no found"), e3 && e3({ errorCode: re.fzq.code, extendedData: re.fzq.message }), [2]);
                    case 1:
                      b2.sent(), b2.label = 2;
                    case 2:
                      return f2 = ca(ca({}, s3.mediaStreamConfig), u2), o2 && "default" === n3 && (this.an.warn("zsc.sd.0 stop preview audio track"), s3.audioTrack && s3.audioTrack.stop()), l2 = s3.getMediaStreamConstraints(f2).mediaStreamConstraints, d2 = function(n4, e4) {
                        e4.getTracks().forEach(function(n5) {
                          if (n5.kind === t4) {
                            var e5 = "video" === t4, r4 = e5 ? "videoTrack" : "audioTrack", o3 = s3[r4];
                            e5 && s3.streamFromCanvas && s3.stopCanvasStreamTrack(), o3 && (n5.enabled = o3.enabled), e5 && s3.lowStream && s3.lowStream.getTracks().forEach(function(t5) {
                              g2.gn.trackUtils.stopTrack(t5);
                            });
                            var u3 = g2.gn.getPublishList(i3);
                            u3.length > 0 && (!s3.muteImage || n5.enabled || !e5) ? u3.map(function(t5) {
                              return t5.publisher;
                            }).forEach(function(t5) {
                              t5.replacePublishedTrack(n5, false, { isCamera: true });
                            }) : s3 && s3.muteImage && !n5.enabled && e5 ? s3[r4] = n5 : s3 && s3.replacePreviewTrack(n5, false, { isCamera: true }), g2.gn.trackUtils.stopTrack(o3), s3.updateZegoStreamCaptureTrack(n5);
                          }
                        }), s3.restartSoundLevel();
                      }, o2 ? l2.video = false : l2.audio = false, this.an.info("zsc.sd.0 mediaStreamConstraints " + JSON.stringify(l2)), v2 = re.R54, "audio" === t4 && (v2 = re.O2H), m2 = function(t5) {
                        for (var i4 = 0, n4 = t5.getTracks(); i4 < n4.length; i4++) {
                          if ("ended" == n4[i4].readyState)
                            return true;
                        }
                        return false;
                      }, p2 = function(i4) {
                        g2.gn.trackUtils.stopTrack("video" == t4 ? s3.videoTrack : s3.audioTrack), g2.an.warn("zsc.sd.0 switch " + t4 + " device failed, stop last device and retry. " + i4.toString());
                        navigator.mediaDevices.getUserMedia(l2).then(function(i5) {
                          Object.assign(s3.mediaStreamConfig, u2), d2(0, i5), g2.an.info("zsc.sd.0 swtich " + t4 + " device success"), e3 && e3({ errorCode: 0, extendedData: "" });
                        }, function(i5) {
                          g2.an.warn("zsc.sd.0 swtich " + t4 + " device failed and recover last device. " + i5.toString());
                          var n4 = s3.getMediaStreamConstraints(s3.mediaStreamConfig).mediaStreamConstraints;
                          o2 ? n4.video = false : n4.audio = false;
                          navigator.mediaDevices.getUserMedia(n4).then(function(n5) {
                            d2(0, n5), g2.an.info("zsc.sd.0 recover last " + t4 + " device success"), e3 && e3({ errorCode: v2.code, extendedData: v2.message + " " + JSON.stringify(i5) });
                          }, function(i6) {
                            g2.an.error("zsc.sd.0 swtich " + t4 + " device and recover failed, please recreate stream. " + i6.toString()), e3 && e3({ errorCode: v2.code, extendedData: v2.message + " " + JSON.stringify(i6) });
                          });
                        });
                      }, navigator.mediaDevices.getUserMedia(l2).then(function(i4) {
                        m2(i4) && g2.an.error("zsc.sd.0 switch" + t4 + " device fail, has track ended."), Object.assign(s3.mediaStreamConfig, u2), d2(0, i4), g2.an.info("zsc.sd.0 switch " + t4 + " device success"), e3 && e3({ errorCode: 0, extendedData: "" });
                      }, p2), [2];
                  }
                });
              });
            }, t3.prototype.setPublishStreamVideoConstraints = function(t4, i3, n3, e3) {
              var r3, s3, o2, u2, c2, h2, f2, l2, d2, v2, m2, p2, g2;
              return ha(this, void 0, void 0, function() {
                var b2, _2, y2, w2, S2, E2, k2, O2, I2, R2, T2, C2, A2, z2, D2, N2, P2, M2, x2, j2, q2, U2, G2, J2, F2 = this;
                return fa(this, function(H2) {
                  switch (H2.label) {
                    case 0:
                      if (this.an.info((b2 = "zsc.spsc.0 video") + " constraints " + JSON.stringify(i3)), !(_2 = this.gn.checkPreview(t4)))
                        return this.an.error(b2 + " preview no found"), e3 && e3({ errorCode: re.fzq.code, extendedData: re.fzq.message }), [2];
                      if (!(y2 = _2.videoTrack))
                        return this.an.error(b2 + " video track not found"), e3 && e3({ errorCode: re.fFX.code, extendedData: re.fFX.message }), [2];
                      if (w2 = _2.videoPreviewType || _2.previewType, i3.video = _2.mediaStreamConfig.video, i3.videoQuality || (i3.videoQuality = 4, i3.quality = 4), i3 = io(i3), S2 = null == y2 ? void 0 : y2.getSettings(), E2 = JSON.parse(JSON.stringify(_2.mediaStreamConfig)), k2 = {}, [1, 2, 3].includes(E2.videoQuality) && ("screen" === w2 ? ((null == (O2 = this.gn.getScreenConstrains(E2)) ? void 0 : O2.video) && (k2.frameRate = null === (r3 = O2.video) || void 0 === r3 ? void 0 : r3.frameRate), (null == O2 ? void 0 : O2.bitRate) && (k2.bitRate = null == O2 ? void 0 : O2.bitRate)) : (null == (O2 = _2.getMediaStreamConstraints(E2, true).mediaStreamConstraints) ? void 0 : O2.video) && (k2 = { width: (I2 = null == O2 ? void 0 : O2.video).width, height: I2.height, frameRate: I2.frameRate, bitRate: I2.bitRate })), R2 = Object.assign(_2.mediaStreamConfig, k2, i3), i3.maxBitrate && (R2.bitRate = i3.maxBitrate), C2 = false, "screen" == w2 ? (T2 = this.gn.getScreenConstrains(R2)).bitRate !== E2.bitRate && (i3.maxBitrate = T2.bitRate) : (A2 = _2.getMediaStreamConstraints(R2, true).mediaStreamConstraints, _2.videoInfo.width === (null === (s3 = (T2 = A2).video) || void 0 === s3 ? void 0 : s3.width) && _2.videoInfo.height === (null === (o2 = T2.video) || void 0 === o2 ? void 0 : o2.height) || (this.an.info(b2 + " resolution change "), C2 = true), S2.width === (null === (u2 = T2.video) || void 0 === u2 ? void 0 : u2.width) && S2.height === (null === (c2 = T2.video) || void 0 === c2 ? void 0 : c2.height) || (this.an.info(b2 + " resolution diff with track settings"), C2 = true)), this.an.info(b2 + " applyConstraints " + JSON.stringify(T2.video)), z2 = {}, Object.keys(T2.video).forEach(function(t5) {
                        z2[t5] = JSON.stringify(T2.video[t5]);
                      }), n3.setAttributes({ video_conf: L.wd.video_conf(z2) }), D2 = this.gn.getPublishList(t4), N2 = _2.videoInfo.frameRate !== (null === (h2 = T2.video) || void 0 === h2 ? void 0 : h2.frameRate) || S2.frameRate !== (null === (f2 = T2.video) || void 0 === f2 ? void 0 : f2.frameRate), P2 = C2 || N2, !(w2 && ["camera", "screen"].includes(w2) && P2))
                        return [3, 5];
                      H2.label = 1;
                    case 1:
                      return H2.trys.push([1, 3, , 4]), this.an.info(b2 + " track change "), [4, y2.applyConstraints(ca(ca({}, T2.video), { deviceId: void 0 }))];
                    case 2:
                      return H2.sent(), [3, 4];
                    case 3:
                      return M2 = H2.sent(), e3 && e3({ errorCode: re.ton.code, extendedData: "".concat(M2.name, " ").concat(M2.constraint ? "constraint:" + M2.constraint : "") }), [2];
                    case 4:
                      (x2 = this.gn.getPreviewer(t4)) && T2.video instanceof Object && x2.setVideoInfo({ width: (j2 = T2.video).width, height: j2.height, frameRate: j2.frameRate }), C2 && "safari" === this.pn.browser && (null === (l2 = _2.videoNodeQueue) || void 0 === l2 || l2.replaceNewSourceByTrack(y2, void 0, { handleTrackType: a.changeResolution })), D2.forEach(function(t5) {
                        var i4, n4, e4 = null === (n4 = null === (i4 = t5.localStream) || void 0 === i4 ? void 0 : i4.getVideoTracks()[0]) || void 0 === n4 ? void 0 : n4.getSettings();
                        (null == S2 ? void 0 : S2.width) === (null == e4 ? void 0 : e4.width) && (null == S2 ? void 0 : S2.height) === (null == e4 ? void 0 : e4.height) || F2.enVideoSpan(t5.streamID, L.Sb.event, { w: L.Sb.w(null == e4 ? void 0 : e4.width), h: L.Sb.h(null == e4 ? void 0 : e4.height) }), (null == S2 ? void 0 : S2.frameRate) !== (null == e4 ? void 0 : e4.frameRate) && F2.enVideoSpan(t5.streamID, L.Mc.event, { fps: L.Mc.fps(null == e4 ? void 0 : e4.frameRate) });
                      }), H2.label = 5;
                    case 5:
                      if (q2 = [1, 2, 3].includes(i3.videoQuality) ? (null === (d2 = T2.video) || void 0 === d2 ? void 0 : d2.maxBitrate) || (null === (v2 = T2.video) || void 0 === v2 ? void 0 : v2.bitRate) : i3.maxBitrate || (null === (m2 = T2.video) || void 0 === m2 ? void 0 : m2.maxBitrate) || (null === (p2 = T2.video) || void 0 === p2 ? void 0 : p2.bitRate), false, !((0, B.Cs)(q2) && q2 > 0))
                        return [3, 9];
                      if (U2 = _2.videoInfo.bitRate !== q2, _2.setVideoInfo({ bitRate: q2 }), !U2)
                        return [3, 9];
                      G2 = 0, H2.label = 6;
                    case 6:
                      return G2 < D2.length ? (J2 = null === (g2 = D2[G2]) || void 0 === g2 ? void 0 : g2.publisher) ? [4, J2.setBitrate(q2)] : [3, 8] : [3, 9];
                    case 7:
                      H2.sent(), this.enVideoSpan(J2.streamId, L.Io.event, { bitrate: L.Io.bitrate(1e3 * q2) }), H2.label = 8;
                    case 8:
                      return G2++, [3, 6];
                    case 9:
                      return this.an.info(b2 + " set constraints success "), e3 && e3({ errorCode: 0, extendedData: "" }), [2];
                  }
                });
              });
            }, t3.prototype.setPublishStreamAudioConstraints = function(t4, i3, n3, e3) {
              return ha(this, void 0, void 0, function() {
                var r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2 = this;
                return fa(this, function(E2) {
                  switch (E2.label) {
                    case 0:
                      if (this.an.info((r3 = "zsc.spsc.0 audio") + " constraints " + JSON.stringify(i3)), !(s3 = this.gn.checkPreview(t4)))
                        return this.an.error(r3 + " preview no found"), e3 && e3({ errorCode: re.fzq.code, extendedData: re.fzq.message }), [2];
                      if (!(o2 = s3.audioTrack) || s3.hasEmptyAudioTrack)
                        return this.an.error(r3 + " audio track not found"), e3 && e3({ errorCode: re.fFX.code, extendedData: re.fFX.message }), [2];
                      i3.audio = s3.mediaStreamConfig.audio, i3 = io(i3), u2 = s3.audioPreviewType || s3.previewType, a2 = JSON.parse(JSON.stringify(s3.mediaStreamConfig)), c2 = Object.assign(s3.mediaStreamConfig, i3), "screen" == u2 ? h2 = this.gn.getScreenConstrains(c2) : (f2 = s3.getMediaStreamConstraints(c2, true).mediaStreamConstraints, h2 = f2), this.an.info(r3 + " applyConstraints " + JSON.stringify(h2)), l2 = true, l2 = (null == o2 ? void 0 : o2.enabled) || false, n3.setAttributes({ audio_conf: L.$7.audio_conf(h2.audio) }), this.gn.trackUtils.stopTrack(o2), E2.label = 1;
                    case 1:
                      return E2.trys.push([1, 3, , 5]), [4, navigator.mediaDevices.getUserMedia({ video: false, audio: h2.audio })];
                    case 2:
                      return d2 = E2.sent(), y2 = d2.getVideoTracks()[0], this.gn.trackUtils.stopTrack(y2), (v2 = d2.getAudioTracks()[0]).enabled = l2, m2 = JSON.stringify(v2.getSettings()), s3.replacePreviewTrack(v2), s3.updateZegoStreamCaptureTrack(v2), p2 = v2, s3.insertableaudio && s3.localStream && (p2 = s3.localStream.getAudioTracks()[0]), s3.destNode || s3.onAudioTrackChange(p2), this.an.info(r3 + " set constraints success " + m2), e3 && e3({ errorCode: 0, extendedData: "" }), [3, 5];
                    case 3:
                      return g2 = E2.sent(), b2 = s3.getMediaStreamConstraints(a2).mediaStreamConstraints, this.an.info(r3 + " oldMediaStreamConstraints " + JSON.stringify(b2)), [4, navigator.mediaDevices.getUserMedia({ video: false, audio: b2.audio }).catch(function(t5) {
                        S2.an.error(r3 + ".1 setbackup fail " + t5.name);
                      })];
                    case 4:
                      return (_2 = E2.sent()) && (_2.getTracks().forEach(function(t5) {
                        mt(t5, S2.an, r3 + ".1");
                      }), y2 = t4.getVideoTracks()[0], this.gn.trackUtils.stopTrack(y2), w2 = _2.getAudioTracks()[0], s3.replacePreviewTrack(w2), s3.updateZegoStreamCaptureTrack(w2), s3.destNode || s3.onAudioTrackChange(w2)), this.an.info(r3 + ".1 setbackup suc "), e3 && e3({ errorCode: re.ton.code, extendedData: "".concat(g2.name, " ").concat(g2.constraint ? "constraint:" + g2.constraint : "") }), [3, 5];
                    case 5:
                      return [2];
                  }
                });
              });
            }, t3.prototype.handleTrack = function(t4, i3, n3, e3, r3) {
              var s3, o2, u2, a2;
              return ha(this, void 0, void 0, function() {
                var c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2, I2, R2, T2, C2, A2, z2, D2, N2 = this;
                return fa(this, function(P2) {
                  switch (P2.label) {
                    case 0:
                      if ((0, G.rA)(this.an, Co.N$A, ". ms id: ".concat(null == i3 ? void 0 : i3.id, ", kind: ").concat(null == n3 ? void 0 : n3.kind, ", track id: ").concat(null == n3 ? void 0 : n3.id)), c2 = "ADD" === t4, h2 = { errorCode: 0, extendedData: "" }, !(0, B.dr)(i3))
                        return this.an.error(Co.N$A + " stream wrong"), r3({ errorCode: re.ZEp.code, extendedData: re.ZEp.message }), [2];
                      if (!(n3 instanceof MediaStreamTrack))
                        return this.an.error(Co.N$A + " parameter 2 type error"), r3({ errorCode: re.ZEp.code, extendedData: re.ZEp.message }), [2];
                      if (!(f2 = this.gn.checkPreview(i3)))
                        return this.an.error(Co.N$A + " stream no found"), r3 && r3({ errorCode: re.fzq.code, extendedData: re.fzq.message }), [2];
                      if ("video" === n3.kind) {
                        if (null === (s3 = f2.videoEffect) || void 0 === s3 ? void 0 : s3.enabled)
                          return this.an.error(Co.N$A + " need to disable video beauty effect first"), r3 && r3({ errorCode: re.lwJ.code, extendedData: "need to disable video beauty effect before add or remove track" }), [2];
                        if (f2.enableDualStream)
                          return this.an.error(Co.N$A + " " + (l2 = " can not add/remove track while dual stream enabled.")), r3 && r3({ errorCode: re.lwJ.code, extendedData: l2 }), [2];
                        if (f2.isBackgroundBlur)
                          return this.an.error(Co.N$A + " need to disable background process first"), r3 && r3({ errorCode: re.A1v.code, extendedData: "need to disable video background process before add or remove track" }), [2];
                      }
                      return f2.streamFromCanvas && "video" === n3.kind ? (this.an.error(Co.N$A + " browser not support"), r3 && r3({ errorCode: re.WgV.code, extendedData: re.WgV.message }), [2]) : (d2 = "audio" === n3.kind && this.pn.engineConfig.keepAudioTrack && f2.hasEmptyAudioTrack, v2 = i3.getTracks().length >= 2 || i3.getTracks().find(function(t5) {
                        return t5.kind == n3.kind;
                      }), c2 && v2 && !d2 ? (this.an.error(Co.N$A + " only stream which have one track and kind no exist can add track"), r3 && r3({ errorCode: re.ph7.code, extendedData: re.ph7.message }), [2]) : "REMOVE" == t4 && (i3.getTracks().length <= 1 || "video" === n3.kind && f2.hasEmptyAudioTrack || !i3.getTracks().find(function(t5) {
                        return t5.kind === n3.kind;
                      })) ? (this.an.error(Co.N$A + " can not remove track"), r3({ errorCode: re.WgV.code, extendedData: re.WgV.message }), [2]) : !(m2 = this.gn.checkPublish(i3)) || m2.publisher.supportTransceiver || 5 === m2.publisher.stateNego && 1 != m2.publisher.isUpdateSDP ? (p2 = function(t5) {
                        var i4 = N2.gn.previewStreamList.find(function(i5) {
                          return i5.originVideoTrack === t5 || i5.originAudioTrack === t5;
                        });
                        if (i4 = i4 || N2.gn.previewStreamList.find(function(i5) {
                          return i5.localStream.getTracks().find(function(i6) {
                            return i6 == t5;
                          });
                        }), i4)
                          return N2.an.info(Co.N$A + " video info: ".concat(JSON.stringify(i4.videoInfo))), i4;
                        N2.an.warn(Co.N$A + " ".concat(t5.kind, " track is not created by sdk"));
                      }, this.pn.engineConfig.keepAudioTrack && "audio" === n3.kind ? (c2 ? ((D2 = null === (o2 = p2(n3)) || void 0 === o2 ? void 0 : o2.videoInfo) && f2.updateAudioInfo(D2), this._replaceTrack(i3, n3, false, true), f2.hasEmptyAudioTrack = false) : ((g2 = f2.getEmptyAudioTrack()) && this._replaceTrack(i3, g2, false, true), f2.hasEmptyAudioTrack = true), this.an.info(Co.N$A + " end"), e3(h2), [2]) : (b2 = f2.rtcViewer, _2 = f2, y2 = "video" == n3.kind ? "videoTrack" : "audioTrack", c2 && (w2 = p2(n3)) && ("video" === n3.kind ? (_2.updateMediaStreamConstraints(w2.mediaStreamConfig, "video"), f2.mediaStreamConfig.video = true) : (_2.updateMediaStreamConstraints(w2.mediaStreamConfig, "audio"), f2.mediaStreamConfig.audio = true)), m2 ? (S2 = m2.publisher, (E2 = m2.publisher.peerConnection) ? (S2.supportTransceiver ? this.an.info(Co.N$A + " support transceiver") : S2.isUpdateSDP = true, S2.sideMediaConfig.isSEIStart && "video" === n3.kind ? (this.an.info(Co.N$A + " replace sei blank track."), k2 = void 0, c2 ? [4, S2.replacePublishedTrack(n3, false, { handleTrack: t4 })] : [3, 2]) : [3, 5]) : (this.an.error(Co.N$A + " pc has not created."), [2])) : [3, 15])) : (this.an.error(Co.N$A + " publish state wrong. " + "".concat(m2.publisher.stateNego)), r3 && r3({ errorCode: re.NJN.code, extendedData: re.NJN.message }), [2]));
                    case 1:
                      return k2 = P2.sent(), S2.handleSEIVideoTrack("add"), [3, 4];
                    case 2:
                      return S2.handleSEIVideoTrack("remove"), [4, S2.replacePublishedTrack(S2.sideMediaConfig.track, false, { handleTrack: t4 })];
                    case 3:
                      k2 = P2.sent(), P2.label = 4;
                    case 4:
                      return 0 === (null == k2 ? void 0 : k2.errorCode) || this.an.warn(Co.N$A + " enable sei but not found video sender. error: ".concat(JSON.stringify(k2))), [3, 11];
                    case 5:
                      return "audio" !== n3.kind ? [3, 6] : (S2.isUpdateSDP = false, c2 ? (_2.replacePreviewTrack(n3), O2 = _2.audioNodeQueue ? null === (a2 = null === (u2 = _2.audioNodeQueue) || void 0 === u2 ? void 0 : u2.destinationNode) || void 0 === a2 ? void 0 : a2.stream.getAudioTracks()[0] : n3, (I2 = S2.audioSender) ? I2.replaceTrack(O2) : E2.addTrack(O2, i3), this.an.info(Co.N$A + " add audio track. ")) : (i3.removeTrack(n3), _2[y2] = null, b2 && b2.setTrack(false, null), (I2 = S2.audioSender) && I2.replaceTrack(null), this.an.info(Co.N$A + " remove audio track. ")), this.an.info(Co.N$A + " end"), e3(h2), [2]);
                    case 6:
                      return I2 = S2.videoSender, R2 = n3, _2.zegoCaptureStream && (T2 = _2.getStreamThroughCanvas(new MediaStream([n3])), R2 = T2.getVideoTracks()[0]), c2 ? I2 ? [4, I2.replaceTrack(n3)] : [3, 8] : [3, 10];
                    case 7:
                      return P2.sent(), this.an.info(Co.N$A + " sender replace track " + R2.kind), [3, 9];
                    case 8:
                      E2.addTrack(R2, i3), this.an.info(Co.N$A + " pc add track " + R2.kind), P2.label = 9;
                    case 9:
                      return [3, 11];
                    case 10:
                      if (!I2)
                        return this.an.error(Co.N$A + " sender no found"), r3 && r3({ errorCode: re.fFX.code, extendedData: re.fFX.message }), [2];
                      try {
                        I2.replaceTrack(null), this.an.info(Co.N$A + " sender replace null.");
                      } catch (t5) {
                        this.an.error(Co.N$A + " " + t5), r3 && r3({ errorCode: re.aq0.code, extendedData: re.aq0.message + " " + t5 });
                      }
                      P2.label = 11;
                    case 11:
                      return C2 = _2.updateVideoInfo(D2 = c2 ? null == w2 ? void 0 : w2.videoInfo : {}), A2 = function() {
                        "ADD" == t4 ? (i3.addTrack(n3), _2[y2] = n3, b2 && b2.setTrack("video" == n3.kind, n3, "safari" === N2.pn.browser), "video" == n3.kind && 1 == n3.enabled ? S2.sendStreamStatus(0, S2.mic_status, true) : 1 == n3.enabled && S2.sendStreamStatus(S2.camera_status, 0, true), N2.an.info(Co.N$A + " add track completely")) : ("video" == n3.kind ? S2.sendStreamStatus(2, S2.mic_status, true) : S2.sendStreamStatus(S2.camera_status, 2, true), i3.removeTrack(n3), _2[y2] = null, b2 && b2.setTrack("video" == n3.kind, null), N2.an.info(Co.N$A + " remove track completely")), f2.mediaStreamConfig.video = "ADD" == t4;
                      }, z2 = function() {
                        return ha(N2, void 0, void 0, function() {
                          var t5, i4, n4, s4 = this;
                          return fa(this, function(o3) {
                            switch (o3.label) {
                              case 0:
                                t5 = {}, o3.label = 1;
                              case 1:
                                return o3.trys.push([1, 3, , 4]), [4, E2.createOffer(t5)];
                              case 2:
                                return i4 = o3.sent(), S2.onCreateOfferSuccess(i4, true, ca(ca({}, C2), { bitRate: c2 ? C2.bitRate : 50 }), function(t6) {
                                  return ha(s4, void 0, void 0, function() {
                                    return fa(this, function(i5) {
                                      return 0 !== t6 ? r3 && r3({ errorCode: re.Q3v.code, extendedData: re.Q3v.message }) : (A2(), e3(h2), this.an.info(Co.N$A + " end")), [2];
                                    });
                                  });
                                }), [3, 4];
                              case 3:
                                return n4 = o3.sent(), this.an.error(Co.N$A + " " + n4), r3 && r3({ errorCode: re.SmZ.code, extendedData: re.SmZ.message + " " + n4 }), [3, 4];
                              case 4:
                                return [2];
                            }
                          });
                        });
                      }, S2.isUpdateSDP ? (this.an.info(Co.N$A + " need to update sdp"), [4, z2()]) : [3, 13];
                    case 12:
                      return P2.sent(), [3, 14];
                    case 13:
                      this.an.info(Co.N$A + " only update track"), A2(), c2 && "video" === n3.kind && C2.bitRate && S2.setBitrate(C2.bitRate), e3(h2), P2.label = 14;
                    case 14:
                      return [3, 16];
                    case 15:
                      c2 ? ((D2 = null == w2 ? void 0 : w2.videoInfo) && ("video" === n3.kind ? (_2.updateVideoInfo(D2), f2.mediaStreamConfig.video = true) : _2.updateAudioInfo(D2)), i3.addTrack(n3), _2[y2] = n3, b2 && b2.setTrack("video" == n3.kind, n3)) : (i3.removeTrack(n3), _2[y2] = null, "video" === n3.kind && (f2.mediaStreamConfig.video = false), b2 && b2.setTrack("video" == n3.kind, null)), this.an.info(Co.N$A + " end"), e3(h2), P2.label = 16;
                    case 16:
                      return [2];
                  }
                });
              });
            }, t3.prototype.enVideoSpan = function(t4, i3, n3) {
              var r3 = this.cr.createSpan(e2.t0.H, { key: L.Og.event, par: t4 }, { key: "" }, i3);
              r3.setAttributes(n3), r3.end();
            }, t3.prototype._replaceTrack = function(t4, i3, n3, e3, r3, s3) {
              void 0 === e3 && (e3 = false), void 0 === r3 && (r3 = false), void 0 === s3 && (s3 = false);
              var o2 = this.gn.checkPreview(t4), u2 = this.gn.getPublishList(t4, false);
              if (!o2)
                return this.an.error("zc.rt.0 preview no found"), { errorCode: re.fzq.code, extendedData: re.fzq.message };
              if (o2.streamFromCanvas && "video" === i3.kind && !s3)
                return this.an.error("zc.rt.0 browser not support"), { errorCode: re.WgV.code, extendedData: re.WgV.message };
              var c2 = t4.getTracks().find(function(t5) {
                return t5.kind === i3.kind;
              }), h2 = "audio" === i3.kind, f2 = { errorCode: re.fFX.code, extendedData: re.fFX.message };
              if (!e3 && !c2)
                return this.an.error("zc.rt.0 track no found"), f2;
              if (!e3 && h2 && o2.hasEmptyAudioTrack && (this.an.warn("zc.rt.0 replace empty audio track"), !this.pn.engineConfig.allowReplaceEmptyTrack))
                return f2;
              if (e3 && h2 && !o2.mediaStreamConfig.audio) {
                var l2 = o2.mediaStreamConfig;
                o2.mediaStreamConfig.audio = true;
                var d2 = i3.getSettings(), v2 = d2 || {}, m2 = v2.deviceId, p2 = v2.echoCancellation, g2 = v2.noiseSuppression, b2 = v2.autoGainControl, _2 = v2.channelCount;
                this.an.info("zc.rt.0 add audio: " + JSON.stringify(d2)), m2 && (l2.audioInput = m2), _2 && (l2.channelCount = _2), p2 && (l2.AEC = p2), g2 && (l2.ANS = g2), b2 && (l2.AGC = b2);
              }
              var y2 = this.gn.soundLevelDelegate && h2, w2 = r3 ? { handleTrackType: a.replaceNew } : {};
              if (u2.length) {
                var S2 = null;
                return y2 && o2.stopSoundLevel(), u2.forEach(function(t5) {
                  var e4;
                  S2 = null === (e4 = t5.publisher) || void 0 === e4 ? void 0 : e4.replacePublishedTrack(i3, false, ca({ isTrackProcessedFromOriginalStream: n3 }, w2));
                }), y2 && o2.startSoundLevel(), S2;
              }
              return y2 && o2.stopSoundLevel(), o2.replacePreviewTrack(i3, false, ca({ isTrackProcessedFromOriginalStream: n3 }, w2)), y2 && o2.startSoundLevel(), { errorCode: 0, extendedData: "" };
            }, t3.prototype.enableCamera = function(t4, i3, n3) {
              var e3 = this.gn.checkPreview(t4);
              return e3 ? (e3.enableCamera(i3, this.gn, n3), true) : (this.an.error("zsc.ec.0 " + G.h2), false);
            }, t3.prototype.enableMicrophone = function(t4, i3) {
              var n3 = this.gn.checkPreview(t4);
              return n3 ? n3.enableMicrophone(i3) : (this.an.error("zsc.em.0 " + G.h2), false);
            }, t3.prototype.enableMicrophoneOnly = function(t4) {
              (0, G.rA)(this.an, Co.LBe);
              for (var i3 = 0; i3 < this.gn.previewStreamList.length; i3++) {
                if (!this.gn.previewStreamList[i3].enableMicrophoneOnly(t4))
                  return this.an.error("".concat(Co.LBe, ".0 previewer ").concat(i3, " change mic mute state failed")), false;
                0;
              }
              return this.gn.isMicEnabled = t4, true;
            }, t3.prototype.getBlackTrack = function(t4, i3) {
              (t4 < 120 || i3 < 90) && (t4 = 128, i3 = 90);
              var n3 = (0, G.FP)(t4, i3), e3 = n3.getContext("2d");
              return e3 && (e3.fillStyle = "black"), null == e3 || e3.fillRect(0, 0, t4, i3), n3.captureStream().getVideoTracks()[0];
            }, t3.prototype.enableCameraCapturing = function(t4, i3) {
              var n3;
              return ha(this, void 0, void 0, function() {
                var e3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2 = this;
                return fa(this, function(v2) {
                  switch (v2.label) {
                    case 0:
                      return t4.localStream ? (e3 = this.gn.getPublishList(t4.localStream).map(function(t5) {
                        return t5.publisher;
                      }), i3 ? "live" !== (null === (n3 = t4.videoTrack) || void 0 === n3 ? void 0 : n3.readyState) ? [3, 1] : (this.an.warn("zp.ecc camera is already capturing"), [3, 12]) : [3, 13]) : [2, false];
                    case 1:
                      r3 = t4.getMediaStreamConstraints(ca(ca({}, t4.mediaStreamConfig), { audio: false })).mediaStreamConstraints, v2.label = 2;
                    case 2:
                      return v2.trys.push([2, 11, , 12]), [4, navigator.mediaDevices.getUserMedia(r3)];
                    case 3:
                      return (s3 = v2.sent()).getTracks().forEach(function(t5) {
                        return mt(t5, d2.an, "zsc.ecc");
                      }), (o2 = s3.getVideoTracks()[0]).enabled = t4.isVideoEnabled, false === o2.enabled && this.an.warn("zp.ecc video is not enabled"), !t4.muteImage || t4.isVideoEnabled ? [3, 4] : (t4.videoTrack = o2, o2.enabled = !t4.isVideoEnabled, [3, 10]);
                    case 4:
                      if (!e3.length)
                        return [3, 9];
                      u2 = 0, v2.label = 5;
                    case 5:
                      return u2 < e3.length ? ("H265" === (a2 = e3[u2]).publishOption.videoCodec && a2.getVideoSenders().forEach(function(t5) {
                        var i4;
                        null === (i4 = t5.track) || void 0 === i4 || i4.stop();
                      }), [4, a2.replacePublishedTrack(o2)]) : [3, 8];
                    case 6:
                      if (0 !== (null == (c2 = v2.sent()) ? void 0 : c2.errorCode))
                        throw c2;
                      v2.label = 7;
                    case 7:
                      return u2++, [3, 5];
                    case 8:
                      return [3, 10];
                    case 9:
                      t4.replacePreviewTrack(o2), v2.label = 10;
                    case 10:
                      return t4.hasStopCaptureVideo = false, t4.updateZegoStreamCaptureTrack(o2), [3, 12];
                    case 11:
                      return h2 = v2.sent(), this.an.error("zsc.ecc resume camera capturing failed. " + JSON.stringify(h2)), [2, false];
                    case 12:
                      return [3, 15];
                    case 13:
                      return e3.length && (f2 = null, e3.forEach(function(i4) {
                        var n4;
                        if ("H265" === i4.publishOption.videoCodec) {
                          if (!f2) {
                            var e4 = null === (n4 = t4.videoTrack) || void 0 === n4 ? void 0 : n4.getSettings();
                            f2 = d2.getBlackTrack(null == e4 ? void 0 : e4.width, null == e4 ? void 0 : e4.height);
                          }
                          f2 && i4.getVideoSenders().forEach(function(t5) {
                            t5.replaceTrack(f2);
                          });
                        }
                      })), [4, t4.stopCaptureVideo()];
                    case 14:
                      v2.sent(), e3.length && (l2 = t4.muteImage && !t4.isVideoEnabled ? 0 : Oo(t4.videoTrack), e3.forEach(function(t5) {
                        t5.sendStreamStatus(l2, t5.mic_status);
                      })), v2.label = 15;
                    case 15:
                      return [2, true];
                  }
                });
              });
            }, t3.prototype.activateSEIInsert = function(t4, i3, n3) {
              void 0 === n3 && (n3 = 0);
              var e3 = this.gn.checkPreview(t4);
              return e3 ? 0 !== i3 && 1 !== i3 ? (this.an.error(Co.gPJ + " value of action should be 0 or 1"), false) : (e3.activateSEIConfig = { action: i3, infoType: n3 }, this.gn.getPublishList(t4).map(function(t5) {
                return t5.publisher;
              }).forEach(function(t5) {
                t5.activateSEIInsert(i3, n3);
              }), true) : (this.an.error(Co.gPJ + " stream is not created"), false);
            }, t3;
          }(), da = function() {
            return da = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, da.apply(this, arguments);
          }, va = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, ma = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, pa = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          }, ga = L.Og, ba = L.Og.event, _a = L.Og.error, ya = L.ch, wa = L.Jv, Sa = L.eU.error, Ea = Sa.wn, ka = Sa.En, Oa = Sa.Sn, Ia = st();
          if (navigator.mediaDevices && "setCaptureHandleConfig" in navigator.mediaDevices)
            try {
              navigator.mediaDevices.setCaptureHandleConfig({ handle: Ia, exposeOrigin: true, permittedOrigins: ["*"] });
            } catch (t3) {
            }
          function Ra(t3, i3, n3) {
            var r3 = { width: 640, height: 360 }, s3 = { width: 640, height: 480 }, o2 = { width: 960, height: 540 }, u2 = da(da({ video: true, videoQuality: 4, frameRate: 15, bitRate: 500 }, r3), { audioBitrate: 48, channelCount: 1 });
            switch (t3.scenario) {
              case e2.UP.UNKNOWN:
                u2 = {};
                break;
              case e2.UP.StandardVideoCall:
                break;
              case e2.UP.HighVideoCall:
                u2.frameRate = 25, u2.bitRate = 1500, u2 = da(da({}, u2), o2);
                break;
              case e2.UP.StandardChatroom:
                u2.video = false, u2.audioBitrate = 24;
                break;
              case e2.UP.HighQualityChatroom:
                u2.video = false;
                break;
              case e2.UP.Karaoke:
                u2.video = false, u2.audioBitrate = 128, u2.channelCount = 2;
                break;
              case e2.UP.Broadcast:
                u2.frameRate = 20, u2.bitRate = 1200, (u2 = da(da({}, u2), o2)).audioBitrate = 64, u2.channelCount = 2;
                break;
              default:
                t3.isFlutter ? (u2.bitRate = 600, u2 = da(da({}, u2), r3)) : (u2.bitRate = 800, u2 = da(da({}, u2), s3));
            }
            i3.info("".concat(Co.Szn, " scenario ").concat(t3.scenario, " ").concat(JSON.stringify(u2)));
            var a2 = t3.settingConfig.getCloudSettingScenario(t3.scenario, false, true);
            return Object.assign(u2, a2 || {}, n3 || {});
          }
          var Ta, Ca, Aa, za = function() {
            function t3(t4, i3, n3, r3, s3, o2) {
              var u2 = this;
              this.an = t4, this.dataReport = i3, this.pn = n3, this.gn = r3, this.rtm = s3, this.zegoWebRtc = o2, this.Uh = new aa(this.an, this.pn, this.gn), this.Gh = [], this.eventHandler = { visibilitychange: function() {
                var t5 = !G.VJ.hidden;
                u2.pn.engineConfig.autoRecaptureOnShow && t5 && (u2.an.info("".concat(Co.HHW, " call ").concat(t5)), u2.Gh.forEach(function(t6) {
                  var i4, n4 = (0, $u.L)(t6, u2.an);
                  null === (i4 = u2.zegoWebRtc.rtcModules.publishModule.gh) || void 0 === i4 || i4.Bh("video", n4, "recapture", function() {
                  });
                }));
              } }, this.Jh = 0, this.Fh = 0, this.Hh = 0, this.Vh = (0, G.sg)(function(t5) {
                var i4 = u2.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.tI.event);
                i4.setAttributes({ old_cap_volume: u2.Fh, cap_volume: t5, change_duration: u2.Hh }), i4.end(), u2.Jh = 0;
              }, 3e3), this.Qh = void 0, this.gh = new la(t4, r3, n3), this.recordDevices(), this.gn.checkDeviceChange = function() {
                u2.Yh(500);
              }, this.handleVisibilityChange();
            }
            return Object.defineProperty(t3.prototype, "publishStreamHandler", { get: function() {
              return this.gh;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.handleVisibilityChange = function() {
              var t4 = (0, Pe.$t)();
              t4.indexOf("OpenHarmony") > -1 && t4.indexOf("HuaweiBrowser") > -1 && G.VJ.addEventListener("visibilitychange", this.eventHandler.visibilitychange);
            }, t3.prototype.createStream = function(t4, i3) {
              var n3 = this;
              void 0 === i3 && (i3 = false), this.an.info(Co.Szn + " call. " + i3);
              var r3 = void 0, s3 = void 0, o2 = void 0;
              if (t4) {
                var u2 = t4.camera, a2 = t4.screen, c2 = t4.custom;
                u2 && (r3 = da({}, u2)), a2 && (s3 = (0, B.dd)(a2) ? a2 : da({}, a2)), c2 && (o2 = da({}, c2));
              }
              var h2 = 0;
              if (r3 && (h2++, r3.audioBitRate && (r3.audioBitrate = r3.audioBitRate, delete r3.audioBitRate), r3.bitrate && (r3.bitRate = r3.bitrate, delete r3.bitrate), r3 = to(r3)), s3 && (h2++, (0, B.w)(s3) && s3.bitrate && (s3.bitRate = s3.bitrate), s3 = to(s3)), o2 && (h2++, o2.bitrate && (o2.bitRate = o2.bitrate)), o2 = o2 && io(o2), r3 = r3 && io(r3), s3 = s3 && io(s3), h2 > 1) {
                var f2 = "cannot set more than one type of source";
                throw this.an.error(Co.Szn + " ".concat(f2, ". ").concat(JSON.stringify(t4))), { code: re.ZEp.code, msg: f2 };
              }
              return new G.l3(function(u3, a3) {
                var c3, h3 = n3.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.eU.event), f3 = { is_zego_stream: i3 ? 0 : 1 };
                (null == t4 ? void 0 : t4.camera) && (f3.scenario = n3.pn.scenario), h3.setAttributes(f3);
                var l2 = function(t5) {
                  var i4 = n3.gn.checkPreview(t5), e3 = n3.getStreamByCanvas(t5);
                  i4 && n3.setEmptyAudioTrack(e3, i4), n3.initCopyMusic(t5), h3.setAttributes({ media_stream_id: L.eU.media_stream_id(null == t5 ? void 0 : t5.id) }), h3.end(), !n3.pn.deviceInfos && n3.recordDevices(), (r3 || null == r3) && n3.Gh.push(e3), u3(e3), n3.gn.activeSoundLevel();
                }, d2 = function(t5, i4) {
                  void 0 === i4 && (i4 = ""), n3.cr.setError(h3, t5, i4), a3({ code: t5.code, msg: t5.message + i4 });
                };
                if (!!!(null === (c3 = null === navigator || void 0 === navigator ? void 0 : navigator.mediaDevices) || void 0 === c3 ? void 0 : c3.getUserMedia) && "https:" !== window.location.protocol && "file:" !== window.location.protocol && -1 == window.location.hostname.indexOf("127.0.0.1") && -1 == window.location.hostname.indexOf("localhost")) {
                  var v2 = " https or localhost required ";
                  return n3.an.error(Co.Szn + v2), void d2({ code: Sa.yn.code, message: Sa.yn.message + v2 });
                }
                var m2 = function(t5) {
                  (0, B.C9)(t5) ? d2(t5[0], t5[1]) : d2(t5);
                };
                o2 ? n3.Uc(o2, h3).then(l2).catch(m2) : s3 ? n3.Kh(s3, h3, i3).then(l2).catch(m2) : (r3 || null == r3) && n3.Vc(r3 || {}, h3, i3).then(l2).catch(m2);
              });
            }, t3.prototype.Vc = function(t4, i3, n3) {
              return va(this, void 0, void 0, function() {
                var e3, r3, s3 = this;
                return ma(this, function(o2) {
                  if (!(0, B.TE)(t4.videoQuality) && !(0, G.zQ)(t4.videoQuality))
                    throw this.an.error(Co.Szn + (e3 = " videoQuality must be integer number")), [Ea, e3];
                  if (!(0, B.TE)(t4.keyFrameInterval) && !(0, G.zQ)(t4.keyFrameInterval))
                    throw this.an.error(Co.Szn + (e3 = " keyFrameInterval must be integer number")), [Ea, e3];
                  if (!(0, B.TE)(t4.videoOptimizationMode) && !["default", "motion", "detail"].includes(t4.videoOptimizationMode))
                    throw this.an.error(Co.Szn + (e3 = " video optimizationMode must be 'default', 'motion', 'detail'")), [Ea, e3];
                  if (!(0, B.TE)(t4.videoInput) && !(0, B.uy)(t4.videoInput) && !(0, B.QP)(t4.videoInput))
                    throw this.an.error(Co.Szn + (e3 = " video input must be string'")), [Ea, e3];
                  if (!(0, B.TE)(t4.audioInput) && !(0, B.uy)(t4.audioInput) && !(0, B.QP)(t4.audioInput))
                    throw this.an.error(Co.Szn + (e3 = " audio input must be string'")), [Ea, e3];
                  if (!(0, B.TE)(t4.facingMode) && !(0, B.QP)(t4.facingMode))
                    throw this.an.error(Co.Szn + (e3 = " facingMode must be string'")), [Ea, e3];
                  if (t4.audioBitrate) {
                    if (!(0, G.zQ)(t4.audioBitrate))
                      throw this.an.error(Co.Szn + (e3 = " audioBitrate must be integer number")), [Ea, e3];
                    if (t4.audioBitrate < 6 || t4.audioBitrate > 510)
                      throw e3 = " audio bitrate cannot exceed the range [6,510]. current value: ".concat(t4.audioBitrate, "."), this.an.error(Co.Szn + e3), [Ea, e3];
                    this.pn.audioBitRate = 1e3 * t4.audioBitrate;
                  }
                  if (t4.bitRate) {
                    if (!(0, B.Cs)(t4.bitRate))
                      throw this.an.error(Co.Szn + (e3 = " bitrate must be integer number")), [Ea, e3];
                    if (t4.bitRate > 10240)
                      throw this.an.error(Co.Szn + (e3 = " bitrate cannot more than 10 Mbps")), [Ea, e3];
                  }
                  if (!(0, B.TE)(t4.minBitrate) && !(0, B.Cs)(t4.minBitrate))
                    throw this.an.error(Co.Szn + (e3 = " minBitrate must be integer number")), [Ea, e3];
                  if (!(0, B.TE)(t4.startBitrate) && !["default", "target"].includes(t4.startBitrate))
                    throw this.an.error(Co.Szn + (e3 = " startBitrate must be integer 'default' or 'target'")), [Ea, e3];
                  if (void 0 !== t4.channelCount && !(0, G.zQ)(t4.channelCount))
                    throw this.an.error(Co.Szn + (e3 = " channelCount must be integer number")), [Ea, e3];
                  if (!(0, B.TE)(t4.AEC) && !(0, B.dd)(t4.AEC))
                    throw this.an.error(Co.Szn + (e3 = " AEC must be boolean'")), [Ea, e3];
                  if (!(0, B.TE)(t4.ANS) && !(0, B.dd)(t4.ANS))
                    throw this.an.error(Co.Szn + (e3 = " ANS must be boolean'")), [Ea, e3];
                  if (!(0, B.TE)(t4.AGC) && !(0, B.dd)(t4.AGC))
                    throw this.an.error(Co.Szn + (e3 = " AGC must be boolean'")), [Ea, e3];
                  var u2, a2;
                  return n3 && 4 === t4.videoQuality && (!ko(["frameRate", "width", "height"], u2 = t4, a2 = function(t5, i4) {
                    throw [t5, i4];
                  }) || wo(u2.bitRate, a2)), r3 = {}, this.an.info(Co.Szn + " camera " + JSON.stringify(t4)), r3 = t4, i3.setAttributes({ stream_type: L.eU.stream_type("camera"), camera: L.eU.camera(t4) }), (0, B.dd)(r3.video) || (r3.video = true), (0, B.dd)(r3.audio) || (r3.audio = true), [2, new G.l3(function(t5, n4) {
                    s3.Zh(r3, "camera", t5, n4, i3);
                  })];
                });
              });
            }, t3.prototype.Kh = function(t4, i3, n3) {
              return va(this, void 0, void 0, function() {
                var e3, r3, s3, o2 = this;
                return ma(this, function(u2) {
                  return function(t5, i4, n4) {
                    var e4 = (0, B.w)(t5), r4 = L.eU.error.wn;
                    if (e4 && !(0, B.TE)(t5.videoQuality) && !(0, G.zQ)(t5.videoQuality))
                      return n4(r4, " videoQuality must be integer number"), false;
                    if (e4 && !(0, B.TE)(t5.sourceID) && !(0, B.QP)(t5.sourceID))
                      return n4(r4, " sourceID must be string"), false;
                    if (e4 && !(0, B.TE)(t5.videoOptimizationMode) && !["default", "motion", "detail"].includes(t5.videoOptimizationMode))
                      return n4(r4, " video optimizationMode must be 'default', 'motion', 'detail'"), false;
                    if (e4 && !(0, B.TE)(t5.keyFrameInterval) && !(0, G.zQ)(t5.keyFrameInterval))
                      return n4(r4, " keyFrameInterval must be integer number"), false;
                    if (e4 && i4 && 4 === t5.videoQuality) {
                      if (!wo(t5.bitRate, n4))
                        return false;
                      if (!ko(["frameRate"], t5, n4))
                        return false;
                    }
                  }(t4, n3, function(t5, i4) {
                    throw [t5, i4];
                  }), e3 = this.pn.browser, r3 = this.gn.getScreenConstrains(t4), i3.setAttributes({ stream_type: L.eU.stream_type("screen"), screen: L.eU.screen(r3) }), s3 = t4 && t4.captureElement, [2, new G.l3(function(i4, n4) {
                    var u3 = function(t5) {
                      n4([t5]);
                    }, a2 = function(n5) {
                      o2.gn.createScreenPreviewer(n5, r3, t4) && i4(n5), o2.addShareScreenEnd(n5);
                    };
                    (0, Pe.gm)() || (0, B.w)(t4) && "firefox" == t4.type ? o2.startScreenShotFirFox("screen", r3, function(t5, i5, n5) {
                      t5 ? i5 && a2(i5) : n5 && u3(n5);
                    }) : !s3 && (0, Pe.H8)() && Mf.screenShotReady || (0, B.w)(t4) && "shot" == t4.type ? o2.startScreenShotChrome(function(i5, n5, e4) {
                      i5 ? (o2.an.info(Co.Szn + " using extension"), n5 && a2(n5)) : (e4 && o2.an.error(Co.Szn + " extension " + e4), "SS_DIALOG_CANCEL" === e4 || (0, B.w)(t4) && "shot" == t4.type ? e4 && u3(Sa.Sn) : o2.startScreenSharing(r3, function(t5, i6, n6) {
                        t5 ? i6 && a2(i6) : (o2.an.error(Co.Szn + " " + n6), n6 && u3(n6));
                      }));
                    }) : "Electron" == e3 || (0, B.w)(t4) && "Electron" == t4.type ? o2.startScreenShotElectron(r3, function(t5, i5, n5) {
                      t5 ? i5 && a2(i5) : n5 && u3(n5);
                    }) : o2.startScreenSharing(r3, function(t5, i5, n5) {
                      t5 ? i5 && a2(i5) : n5 && u3(n5);
                    });
                  })];
                });
              });
            }, t3.prototype.Uc = function(t4, i3) {
              return va(this, void 0, void 0, function() {
                var n3, e3, r3 = this;
                return ma(this, function(s3) {
                  if (!t4.source || !(0, B.Si)(t4.source) && !(0, B.dr)(t4.source))
                    throw this.an.error(Co.Szn + " source must be HTMLMediaElement or MediaStream"), [Ea, " source must be HTMLMediaElement or MediaStream"];
                  if (t4.bitRate) {
                    if (!(0, G.zQ)(t4.bitRate))
                      throw this.an.error(Co.Szn + " bitrate must be integer number"), [Ea, " bitrate must be integer number"];
                    if (t4.bitRate > 10240)
                      throw this.an.error(Co.Szn + " bitrate cannot greater than 10 Mbps"), [Ea, " bitrate cannot greater than 10 Mbps"];
                  }
                  if (t4.audioBitrate) {
                    if (!(0, G.zQ)(t4.audioBitrate))
                      throw this.an.error("ze.cs.0 audioBitrate must be integer number"), [Ea, " audioBitrate must be integer number"];
                    if (t4.audioBitrate < 6)
                      throw this.an.error("ze.cs.0 audioBitrate cannot less 6 kbps"), [Ea, " audioBitrate cannot less 6 kbps"];
                    if (t4.audioBitrate > 510)
                      throw this.an.error("ze.cs.0 audioBitrate cannot greater than 510 kbps"), [Ea, " audioBitrate cannot greater than 510 kbps"];
                  }
                  if (!(0, B.TE)(t4.keyFrameInterval) && !(0, G.zQ)(t4.keyFrameInterval))
                    throw this.an.error(Co.Szn + (n3 = " keyFrameInterval must be integer number")), [Ea, n3];
                  if (!(0, B.TE)(t4.videoOptimizationMode) && !["default", "motion", "detail"].includes(t4.videoOptimizationMode))
                    throw this.an.error(Co.Szn + (n3 = " video optimizationMode must be 'default', 'motion', 'detail'")), [Ea, n3];
                  if (void 0 !== t4.channelCount && 1 !== t4.channelCount && 2 !== t4.channelCount)
                    throw this.an.error("ze.cs.0 channelCount must number 1 or 2"), [Ea, " channelCount must number 1 or 2"];
                  return e3 = (0, B.dr)(t4.source) ? "MediaStream" : "HTMLElement", i3.setAttributes({ stream_type: L.eU.stream_type("custom"), custom: L.eU.custom(da(da({}, t4), { source_type: e3 })) }), [2, new G.l3(function(n4, e4) {
                    r3.Zh(t4, "custom", n4, e4, i3);
                  })];
                });
              });
            }, t3.prototype.getStreamByCanvas = function(t4) {
              var i3 = this.gn.checkPreview(t4);
              if (i3) {
                var n3 = (0, Pe.UN)();
                if (n3 && n3.includes("15_1") && !this.pn.engineConfig.disableCanvasIOS15_1) {
                  var e3 = i3.getStreamThroughCanvas(t4);
                  return i3.localStream = e3, i3.streamFromCanvas = true, i3.streamFromCanvasTrack = e3.getVideoTracks()[0], e3;
                }
              }
              return t4;
            }, t3.prototype.createZegoStream = function(t4) {
              var i3 = this;
              return void 0 === t4 && (t4 = {}), new G.l3(function(n3, r3) {
                return va(i3, void 0, void 0, function() {
                  var i4, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2 = this;
                  return ma(this, function(m2) {
                    switch (m2.label) {
                      case 0:
                        if (this.an.info("ze.czs.0 call"), i4 = this.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.nO.event), s3 = function(e3) {
                          (0, G.lA)(i4, { local_stream_id: e3.id, stream_options: pt(t4 || {}, ["captureView", "view"]) }), n3(e3);
                        }, o2 = function(t5) {
                          v2.cr.setError(i4, t5), r3(t5);
                        }, u2 = false, t4 && !(0, B.w)(t4))
                          return [2, o2(re.ZEp)];
                        if ((c2 = [a2 = t4.camera, t4.screen, t4.custom].reduce(function(t5, i5) {
                          return t5 + (i5 ? 1 : 0);
                        }, 0)) > 1)
                          return this.an.error(Co.Szn + " ".concat(h2 = "cannot set more than one type of source", ". ").concat(JSON.stringify(t4))), [2, o2({ code: re.ZEp.code, message: h2 })];
                        if (u2 = !!a2 || 0 === c2, f2 = new oa(t4, this.an, this.gn, this.pn, this), l2 = new ia(f2), !t4.autoCapture && null != t4.autoCapture)
                          return [3, 4];
                        m2.label = 1;
                      case 1:
                        return m2.trys.push([1, 3, , 4]), [4, l2.zegoStream.autoCapture()];
                      case 2:
                        return m2.sent(), [3, 4];
                      case 3:
                        return d2 = m2.sent(), [2, o2(d2)];
                      case 4:
                        return this.an.info("ze.czs.0 success"), u2 && this.Gh.push(l2), s3(l2), [2];
                    }
                  });
                });
              });
            }, t3.prototype.destroyStream = function(t4) {
              this.an.info(Co.mLk + " call");
              var i3 = this.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.ny.event);
              if (!((0, B.dr)(t4) || (0, B.w)(t4) && t4.getTracks))
                return this.an.error(Co.mLk + " localStream is not mediaStream or tracks is null"), void this.cr.setError(i3, L.ny.error.qe);
              (0, B.dr)(t4) ? ((0, B.dr)(t4) && 0 == t4.getTracks().length && this.an.info(Co.mLk + " tracks is null"), this.Gh = this.Gh.filter(function(i4) {
                return i4 !== t4;
              }), this.stopPreview(t4)) : t4.zegoStream && t4.zegoStream.destroy(), (0, G.lA)(i3, { stop_reason: L.ny.stop_reason("destroyStream"), local_stream_id: t4.id });
            }, t3.prototype.startPublishingStream = function(t4, i3, n3, r3) {
              var s3, o2, u2, a2 = this, c2 = (0, $u.L)(i3, this.an), h2 = Uo(this.an, t4);
              h2.info(Co.gkP + " call publishOption: " + JSON.stringify(n3) + " isDataChannel: " + JSON.stringify(!!r3) + " ms_id: " + (null == c2 ? void 0 : c2.id));
              var f2, l2 = true, d2 = "", v2 = _a, m2 = v2.Dn;
              l2 && void 0 === t4 && (h2.error(Co.gkP + (d2 = "stream id required")), l2 = false, f2 = re.d49), !l2 || t4 && (0, B.QP)(t4) || (h2.error(Co.gkP + " " + (d2 = "stream id type wrong")), l2 = false, f2 = re.d49), l2 && 0 === t4.length && (this.an.error(Co.gkP + " " + (d2 = re.d49.message)), l2 = false, f2 = re.d49), l2 && t4.length > e2.LO && (h2.error(Co.gkP + " " + (d2 = "stream id length limit")), l2 = false, f2 = re.clM), l2 && !(0, G.kP)(t4) && (this.an.warn(Co.gkP + " #invald streamID:".concat(t4)), this.pn.isFlutter && (l2 = false, f2 = re.J79)), l2 && !(0, G.jy)(t4) && (h2.error(Co.gkP + " " + (d2 = "stream ID contains illegal characters")), l2 = false, f2 = re.J79), l2 && (!c2 || (0, B.dr)(c2) && 0 == c2.getTracks().length) ? (h2.error(Co.gkP + " " + (d2 = "localStream wrong")), l2 = false, f2 = m2) : c2 && c2.getTracks().forEach(function(t5) {
                mt(t5, a2.an, Co.gkP);
              });
              var p2 = this.gn.checkPreview(c2);
              l2 && !p2 && (h2.error(Co.gkP + " " + (d2 = G.aw)), l2 = false, f2 = v2.jn);
              var g2 = null == p2 ? void 0 : p2.zegoCaptureStream;
              if (g2 && (g2.originAudioStream || g2.originVideoStream || (h2.error(Co.gkP + " " + (d2 = "stream is not capturing")), l2 = false, f2 = v2.qn)), (null == p2 ? void 0 : p2.isVideoEffectStarting) && (h2.error(Co.gkP + " " + (d2 = (f2 = v2.Ln).message)), l2 = false), l2 && n3 && !(0, B.w)(n3) && (l2 = false, f2 = m2, d2 = "publishOption must be object"), l2 && n3 && !(0, B.TE)(n3.streamParams) && !(0, B.QP)(n3.streamParams) && (h2.error(Co.gkP + " publishOption streamParams must be string"), l2 = false, f2 = m2, d2 = " publishOption streamParams must be string"), l2 && n3 && !(0, B.TE)(n3.extraInfo) && !(0, B.QP)(n3.extraInfo) && (h2.error(Co.gkP + " publishOption extraInfo must be string"), l2 = false, f2 = m2, d2 = " publishOption extraInfo must be string"), l2 && n3 && !(0, B.TE)(n3.videoCodec) && !(0, B.QP)(n3.videoCodec) && (h2.error(Co.gkP + " publishOption videoCodec must be string"), l2 = false, f2 = m2, d2 = " publishOption videoCodec must be string"), l2 && n3 && !(0, B.TE)(n3.inspectFlag) && ((0, B.Cs)(n3.inspectFlag) ? [0, 1].includes(n3.inspectFlag) || (h2.error(Co.gkP + " publishOption inspectFlag is not in range"), l2 = false, f2 = m2, d2 = " publishOption inspectFlag is not in range") : (h2.error(Co.gkP + " publishOption inspectFlag must be number"), l2 = false, f2 = m2, d2 = " publishOption inspectFlag must be number")), !l2 || !this.pn.isMultiRoom || n3 && (0, B.QP)(n3.roomID) && "" != n3.roomID || (l2 = false, f2 = m2, d2 = " roomID is need if set multi room"), n3 && n3.videoCodec && (n3.videoCodec = n3.videoCodec.toUpperCase()), l2 && n3 && !(0, B.TE)(n3.trafficControlFocusOnMode) && ((0, B.Cs)(n3.trafficControlFocusOnMode) && [0, 1].includes(n3.trafficControlFocusOnMode) || (this.an.error(Co.gkP + " publishOption trafficControlFocusOnMode: ".concat(n3.trafficControlFocusOnMode, " is invalid")), delete n3.trafficControlFocusOnMode)), l2 && n3 && !(0, B.TE)(n3.trafficControlMinVideoBitrate) && ((0, B.Cs)(n3.trafficControlMinVideoBitrate) || (this.an.error(Co.gkP + " publishOption trafficControlMinVideoBitrate: ".concat(n3.trafficControlMinVideoBitrate, " is invalid")), n3.trafficControlMinVideoBitrate = 0)), l2 && n3 && !(0, B.TE)(n3.enableTrafficControl) && ((0, B.dd)(n3.enableTrafficControl) || (this.an.error(Co.gkP + " publishOption enableTrafficControl: ".concat(n3.enableTrafficControl, " is invalid")), n3.enableTrafficControl = true)), this.pn.useNetAgent && this.pn.roomList.length > 0 ? h2.info(Co.gkP + " publish accelerate") : this.rtm.isDisConnect() && (h2.error(Co.gkP + " not login"), l2 = false, f2 = v2.Bn), !l2) {
                h2.error(Co.gkP + " " + d2);
                var b2 = this.cr.getAPIErrorReport(ba);
                throw b2 && f2 && this.cr.takeAPIErrorReport(ba, f2, b2), { errorCode: null == f2 ? void 0 : f2.code, extendedData: d2 };
              }
              var _2 = this.cr.createSpan(e2.t0.I, { key: L.vW.event }, { key: ba, par: t4 }, ba, true);
              n3 || (n3 = {});
              var y2 = (null == p2 ? void 0 : p2.videoPreviewType) || (null == p2 ? void 0 : p2.previewType);
              !n3.videoCodec && (0, Pe.e8)() && "custom" == y2 && (null === (o2 = null == p2 ? void 0 : p2.mediaStreamConfig) || void 0 === o2 ? void 0 : o2.source) && (0, B.Si)(null === (u2 = p2.mediaStreamConfig) || void 0 === u2 ? void 0 : u2.source) && (h2.info(Co.gkP + " Redmi note 8 uesed custom stream. change to VP8"), n3.videoCodec = "VP8");
              var w2 = bt(this.pn.appid, this.pn.idName, t4), S2 = ((s3 = {})["_publish_" + t4] = { stream_sid: w2 }, s3);
              this.cr.setPublicPros(S2), _2.setAttributes({ stream_id: ga.stream_id(t4), stream_sid: ga.stream_sid(w2), publish_option: ga.publish_option(n3), enable_camera: ga.enable_camera(!!(null == p2 ? void 0 : p2.videoTrack)), enable_mic: ga.enable_mic(!!(null == p2 ? void 0 : p2.audioTrack)) }), n3.audioBitRate = this.pn.audioBitRate;
              var E2 = n3.roomID ? n3.roomID : this.pn.roomList[0] ? this.pn.roomList[0].roomID : "", k2 = this.pn.getRoomByRoomID(E2);
              return k2 ? (_2.setAttributes({ room_id: ga.room_id(E2) }), this.gn.setPublishStateStart(k2, t4, c2, n3, w2, r3) ? (this.pn.publishStreamList[t4] = { state: e2.T_.tryPublish, extra_info: n3.extraInfo, roomID: k2.roomID }, h2.info("zc.p.sps.1 start publish"), k2.streamHandler.onPublishStateUpdate(e2.eZ.retry, t4, { code: 0, message: "" }), this.cr.createSpan(e2.t0.H, { key: L.Og.event, par: t4 }, { key: ya.event, par: t4 }, ya.event, true).setAttributes({ reason: ya.reason("StartPublish") }), this.cr.createSpan(e2.t0.I, { key: L.Og.event, par: t4 }, { key: L.Jv.event, par: t4 }, L.Jv.event, true).setAttributes({ room_id: wa.room_id(null == k2 ? void 0 : k2.roomID), room_sid_string: wa.room_sid_string(null == k2 ? void 0 : k2.roomSessionID) }), this.pn.appConfig ? (null == p2 ? void 0 : p2.containBackgroundProcess) && false === this.pn.supportBg ? (h2.info("zc.p.sps.1 check not support background porcess"), k2.streamHandler.onPublishStateUpdate(e2.eZ.error, t4, v2.ae), false) : (this.gn.startPublishingStream(t4), true) : (this.gn.waitPublishList.push(t4), true)) : (h2.error("zc.p.sps.1 cannot start publish"), false)) : (h2.error("zc.p.sps.1 room no found"), false);
            }, t3.prototype.updatePublishingStream = function(t4, i3) {
              var n3 = this;
              return new G.l3(function(r3) {
                var s3 = n3.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.r_.event), o2 = function(n4) {
                  var e3 = n4.errorCode, o3 = n4.extendedData, u3 = n4.video, a3 = n4.audio, c3 = {};
                  u3 && (c3.video = u3), a3 && (c3.audio = a3), (0, G.lA)(s3, { local_stream_id: t4.id, update_type: i3, preview_conf: c3 }), r3({ errorCode: e3, extendedData: o3 });
                }, u2 = function(e3, o3) {
                  var u3 = (0, B.Cs)(e3) ? { errorCode: e3, extendedData: JSON.stringify({ fail_reason: o3 }) } : e3;
                  n3.an.error(Co.xcY + " " + u3.extendedData), (0, G.lA)(s3, { local_stream_id: t4.id, update_type: i3, error: u3.errorCode, message: u3.extendedData }), r3(u3);
                };
                n3.an.info(Co.xcY + " call");
                var a2 = n3.gn.checkPreview(t4);
                if (a2)
                  if (a2.zegoCaptureStream) {
                    var c2 = a2.zegoCaptureStream;
                    i3 != Xu.audio && i3 != Xu.videoAndAudio || c2.getAudioTracks().length ? i3 != Xu.video && i3 != Xu.videoAndAudio || c2.getVideoTracks().length ? i3 == Xu.audio ? c2.updateStreamAudioTrack(o2, u2, 1) : i3 == Xu.video ? c2.updateStreamVideoTrack(o2, u2, 1) : c2.updateStreamVideoAndAudio(o2, u2, 1) : u2(re.dU8.code, re.dU8.message) : u2(re.SQb.code, re.SQb.message);
                  } else
                    u2(re.ZEp.code, re.ZEp.message + ", stream type wrong");
                else
                  u2(re.VEp.code, re.VEp.message);
              });
            }, t3.prototype.activateSEIInsert = function(t4) {
              var i3 = t4.stream, n3 = t4.action, e3 = t4.infoType, r3 = this._getSpan(t4.stream, L.$H.event);
              r3.setAttributes({ action: L.$H.action(t4.action), info_type: L.$H.info_type(t4.infoType) });
              var s3 = this.gh.activateSEIInsert(i3, n3, e3);
              return r3.end(), s3;
            }, t3.prototype.sendSEI = function(t4, i3) {
              if (!ft())
                return this.an.warn(Co.dnG + " browser not support "), false;
              if (!(0, B.G0)(i3))
                return this.an.error(Co.dnG + " inData required Uint8Array"), false;
              if (i3.byteLength > 4096)
                return this.an.error(Co.dnG + " inData length limit"), false;
              var n3 = this.gn.publisherList[t4];
              return n3 && n3.publisher ? n3.publisher.sendSEI(i3) : (this.an.warn(Co.dnG + " publish not exist"), false);
            }, t3.prototype.stopPublishingStream = function(t4, i3, n3) {
              var r3, s3, o2, u2;
              this.an.info(Co.K4A + " call " + (i3 ? i3.toString() : ""), { streamid: t4 });
              var a2 = i3 || { code: 0, message: "" }, c2 = this.cr.createSpan(e2.t0.I, { key: L.vW.event }, { key: "" }, L.Vz.event);
              if (!(0, B.QP)(t4) || "" == t4)
                return this.an.error(Co.K4A + " streamID must be string and not empty"), this.cr.setError(c2, L.Vz.error.wn, "stream id type error"), false;
              var h2 = this.gn.publisherList[t4];
              n3 && !(null === (r3 = null == h2 ? void 0 : h2.publisher) || void 0 === r3 ? void 0 : r3.Xh) && (a2 = _a.ce), c2.setAttributes({ stream_id: L.Vz.stream_id(t4), stream_sid: L.Vz.stream_sid(null == h2 ? void 0 : h2.streamSid), room_id: L.Vz.room_id(null === (o2 = null === (s3 = this.gn.publisherList[t4]) || void 0 === s3 ? void 0 : s3.room) || void 0 === o2 ? void 0 : o2.roomID), error: a2.code, message: a2.message });
              var f2 = this.gn.getRoomByStreamID(t4), l2 = h2 && h2.publisher && 7 !== h2.publisher.state || (null === (u2 = null == h2 ? void 0 : h2.retryStreamHandler) || void 0 === u2 ? void 0 : u2.isRetrying());
              if (this.gn.stopPublishingStream(t4, a2), this.pn.publishStreamList[t4]) {
                if (this.pn.publishStreamList[t4].state >= e2.T_.update_info && f2) {
                  if (!i3 || 1102018 !== i3.code)
                    f2.streamHandler.updateStreamInfo(t4, e2.NP.liveEnd);
                  for (var d2 = 0; d2 < f2.streamList.length; d2++)
                    if (f2.streamList[d2].stream_id == t4) {
                      f2.streamList.splice(d2--, 1);
                      break;
                    }
                }
                delete this.pn.publishStreamList[t4];
              }
              return c2.end(), f2 && l2 && f2.streamHandler.onPublishStateUpdate(e2.eZ.error, t4, a2), true;
            }, t3.prototype.stopPublishingStreamInRoom = function(t4) {
              for (var i3 in this.an.info(Co.s1U + " call " + t4), this.pn.publishStreamList)
                this.pn.publishStreamList[i3].roomID === t4 && this.stopPublishingStream(i3);
            }, t3.prototype.setCaptureVolume = function(t4, i3) {
              var n3 = this;
              return new G.l3(function(e3) {
                n3.an.info(Co.t6w + " call");
                var r3 = (0, $u.L)(t4, n3.an), s3 = L.tI.error.wn, o2 = function(t5) {
                  n3.an.error(Co.t6w + " " + t5), e3({ errorCode: s3.code, extendedData: JSON.stringify({ fail_reason: s3.message + " " + t5 }) });
                }, u2 = n3.gn.checkPreview(r3);
                (0, B.dr)(r3) && u2 ? 0 != r3.getAudioTracks().length ? !(0, B.Cs)(i3) || i3 < 0 || i3 > 200 ? o2(" volume must be number between 0 to 200") : (n3.Jh ? n3.Hh = Math.round(performance.now() - n3.Jh) : (n3.Jh = performance.now(), n3.Fh = u2.volume), n3.Vh(i3), u2.setVolume(i3), e3({ errorCode: 0, extendedData: "" }), n3.an.info(Co.t6w + " call success")) : o2(" stream audioTrack no found") : o2(" stream must be created by zego");
              });
            }, t3.prototype.getElectronScreenSources = function() {
              var t4 = this;
              return new G.l3(function(i3, n3) {
                var e3 = window.require("electron");
                e3 || (t4.an.error("zc.gess.0 Electron is not exist"), n3({ message: "Electron is not exist" })), e3.desktopCapturer.getSources({ types: ["window", "screen"] }).then(function(t5) {
                  var n4 = t5.map(function(t6) {
                    return { id: t6.id, name: t6.name, thumbnail: t6.thumbnail };
                  });
                  i3(n4);
                }).catch(function(i4) {
                  t4.an.error("zc.gess.0 " + i4), n3(i4);
                });
              });
            }, t3.prototype.startScreenShotChrome = function(t4) {
              if (Mf.screenShotReady)
                window.postMessage({ type: "SS_UI_REQUEST", text: "start" }, "*"), Z("screenShare", { success: t4 }, this.pn.callbackList);
              else {
                var i3 = 'zc.b.ss Please install the extension:1. Go to chrome://extensions  2. Check: "Enable Developer mode   3. Click: "Load the unpacked extension... 4. Choose "extension" folder from the repository 5. Reload this page';
                this.an.error(i3), t4(false, null, { code: ka.code, message: ka.message + " " + i3 });
              }
            }, t3.prototype.startScreenSharing = function(t4, i3) {
              var n3 = this;
              if ("getDisplayMedia" in navigator.mediaDevices) {
                var e3 = navigator.mediaDevices, r3 = t4.audio || false, s3 = t4.video, o2 = "zc.b.sss";
                if ((0, Pe.nr)() && (0, B.w)(s3)) {
                  var u2 = s3.width, a2 = s3.height;
                  (0, B.w)(u2) ? s3.width = { max: u2.max || u2.ideal } : u2 && (s3.width = { max: u2 }), (0, B.w)(a2) ? s3.height = { max: a2.max || a2.ideal } : a2 && (s3.height = { max: a2 });
                }
                var c2 = { audio: r3, video: s3, preferCurrentTab: !!t4.captureElement, systemAudio: "include", selfBrowserSurface: "include", surfaceSwitching: "include" };
                t4.video = s3, this.an.info("zc.b.sss config: " + JSON.stringify(c2)), e3.getDisplayMedia(c2).then(function(e4) {
                  return va(n3, void 0, void 0, function() {
                    var n4, r4, s4, u3, a3;
                    return ma(this, function(c3) {
                      switch (c3.label) {
                        case 0:
                          if (!(n4 = t4.captureElement))
                            return [3, 5];
                          if (r4 = e4.getVideoTracks()[0], !("CropTarget" in window && "fromElement" in CropTarget && r4.cropTo))
                            return [3, 5];
                          c3.label = 1;
                        case 1:
                          return c3.trys.push([1, 4, , 5]), (s4 = null == r4 ? void 0 : r4.getCaptureHandle()) && s4.handle === Ia ? [4, CropTarget.fromElement(n4)] : (this.an.info("".concat(o2, " no current tap")), e4.getVideoTracks().forEach(function(t5) {
                            return t5.stop();
                          }), i3(false, null, { code: ka.code, message: ka.message + " captureElement must on current tab." }), [2]);
                        case 2:
                          return u3 = c3.sent(), [4, r4.cropTo(u3)];
                        case 3:
                          return c3.sent(), [3, 5];
                        case 4:
                          return a3 = c3.sent(), this.an.error("".concat(o2, " crop error:").concat(a3)), e4.getVideoTracks().forEach(function(t5) {
                            return t5.stop();
                          }), i3(false, null, { code: ka.code, message: ka.message + " " + a3 }), [3, 5];
                        case 5:
                          return this.an.info("zc.b.sss capture suc"), i3(true, e4), [2];
                      }
                    });
                  });
                }).catch(function(t5) {
                  n3.an.error(o2 + " " + t5), t5.message && "permission denied" == t5.message.toLowerCase() ? i3(false, null, Oa) : i3(false, null, { code: ka.code, message: ka.message + " " + t5 });
                });
              } else
                this.an.error("zc.b.sss brower does not support getDisplayMedia"), i3(false, null, Sa.yn);
            }, t3.prototype.startScreenShotFirFox = function(t4, i3, n3) {
              var e3 = this, r3 = { video: da(da({}, i3.video), { mediaSource: t4 }), audio: i3.audio };
              navigator.mediaDevices.getUserMedia(r3).then(function(t5) {
                t5.getTracks().forEach(function(t6) {
                  return mt(t6, e3.an, "ze.ssf.1");
                }), n3(true, t5);
              }).catch(function(t5) {
                e3.an.error("ze.ssf.1 " + t5), n3(false, null, { code: ka.code, message: ka.message + " " + t5 });
              });
            }, t3.prototype.startScreenShotElectron = function(t4, i3) {
              var n3 = this;
              if (!window.require("electron"))
                return this.an.error("ze.sse.1 Electron is not exist"), void i3(false, null, { code: ka.code, message: ka.message + " Electron is not exist" });
              var e3 = { video: { mandatory: { chromeMediaSource: "desktop", chromeMediaSourceId: t4.sourceID, maxWidth: window.screen.width, maxHeight: window.screen.height } }, audio: false };
              navigator.mediaDevices.getUserMedia(e3).then(function(t5) {
                t5.getTracks().forEach(function(t6) {
                  return mt(t6, n3.an, "ze.sse.1");
                }), i3(true, t5);
              }).catch(function(t5) {
                n3.an.error("ze.sse.1 " + t5), i3(false, null, { code: ka.code, message: ka.message + " " + t5 });
              });
            }, t3.prototype.Zh = function(t4, i3, n3, e3, r3) {
              var s3 = this, o2 = null;
              return o2 = new Ju(this.an, this.pn, this.gn, i3), this.gn.previewStreamList.push(o2), o2.startPreview(t4, function(e4) {
                s3.gn.soundLevelDelegate && (null == o2 || o2.startSoundLevel()), "camera" === i3 && (false === (null == t4 ? void 0 : t4.audio) && o2 && (o2.hasMicTrack = false), (null == o2 ? void 0 : o2.micTrack) && (o2.micTrack.enabled = s3.gn.isMicEnabled)), (null == t4 ? void 0 : t4.videoOptimizationMode) && s3.gn.setVideoTrackContentHint(e4, null == t4 ? void 0 : t4.videoOptimizationMode), s3.an.debug("zsc.sp.0 call success"), !s3.pn.deviceInfos && s3.recordDevices(), n3 && n3(e4);
              }, function(t5) {
                s3.gn.previewStreamList = s3.gn.previewStreamList.filter(function(t6) {
                  return t6 !== o2;
                }), e3 && e3(t5);
              }, r3), true;
            }, t3.prototype.stopPreview = function(t4) {
              if (!t4)
                return this.an.warn("zsc.sp.0 localStream null"), false;
              for (var i3 in this.gn.publisherList)
                this.gn.publisherList[i3].localStream === t4 && (this.gn.publisherList[i3].localStream = null);
              var n3 = this.gn.checkPreview(t4);
              return n3 ? (n3.previewSuc && (n3.stopPreview(), this.gn.removePreview(n3)), true) : (this.an.info("zsc.sp.0 " + G.h2), false);
            }, t3.prototype.recordDevices = function(t4, i3) {
              var n3, e3 = this, r3 = this.Qh;
              this.an.info("zsc.rd.0 call " + !!r3), r3 || (r3 = this.Yh(0), this.Qh = r3), r3.then(function(i4) {
                e3.Uh.lastRecordDeviceTime = performance.now(), t4 && t4(i4);
              }).catch(function(t5) {
                e3.an.warn("zsc.rd.0 getDevices err:" + t5), i3 && i3(t5);
              }).finally(function() {
                e3.Qh = void 0;
              }), void 0 !== (null === (n3 = navigator.mediaDevices) || void 0 === n3 ? void 0 : n3.ondevicechange) && (navigator.mediaDevices.ondevicechange = null, navigator.mediaDevices.ondevicechange = function(t5) {
                return va(e3, void 0, void 0, function() {
                  return ma(this, function(t6) {
                    return this.an.info("zsc.rd.0 devicechange"), this.Yh(500), [2];
                  });
                });
              });
            }, t3.prototype.Yh = function(t4, i3) {
              return void 0 === t4 && (t4 = 0), void 0 === i3 && (i3 = ""), va(this, void 0, void 0, function() {
                var i4, n3, r3, s3 = this;
                return ma(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      return this.an.info("zsc.rd.0 get and compare devices: " + t4), i4 = true, (n3 = this.pn.deviceChangeTimer) ? (clearTimeout(n3), this.pn.deviceChangeTimer = null) : 0 === t4 && (i4 = false), r3 = function() {
                        return va(s3, void 0, void 0, function() {
                          var t5 = this;
                          return ma(this, function(n4) {
                            return this.an.info("zsc.rd.0 start get and compare devices"), [2, new Promise(function(n5, r4) {
                              yo(function(r5) {
                                var s4, o3, u2, a2, c2, h2;
                                t5.an.info("zsc.rd.0 get devices success. ".concat(JSON.stringify(r5), "; need compare: ").concat(i4));
                                var f2 = r5.microphones, l2 = r5.speakers, d2 = r5.cameras, v2 = t5.pn.deviceInfos;
                                if (!v2) {
                                  var m2 = (0, G.fU)(t5.cr, e2.t0.H, "", L.gf.event, L.vW.event), p2 = function(t6, i5) {
                                    return t6.map(function(t7) {
                                      return { device: t7.deviceID, device_name: t7.deviceName, type: i5 };
                                    });
                                  };
                                  (0, G.lA)(m2, { dev_list: pa(pa(pa([], p2(d2, 0), true), p2(f2, 1), true), p2(l2, 2), true), dev_kind: "init" });
                                }
                                if (!v2 || !i4)
                                  return t5.pn.deviceInfos = { microphones: f2, speakers: l2, cameras: d2 }, void n5(JSON.parse(JSON.stringify(t5.pn.deviceInfos)));
                                var g2 = true, b2 = [], _2 = [];
                                if ((0, Pe.nr)() && 1 === (null === (o3 = null === (s4 = t5.pn.deviceInfos) || void 0 === s4 ? void 0 : s4.cameras) || void 0 === o3 ? void 0 : o3.length) && "" === (null === (u2 = t5.pn.deviceInfos) || void 0 === u2 ? void 0 : u2.cameras[0].deviceID))
                                  t5.an.info("zsc.rd.0 cameras not accurate");
                                else {
                                  for (var y2 = function(i5) {
                                    var n6 = t5.pn.deviceInfos.cameras[i5];
                                    r5.cameras.find(function(t6) {
                                      return t6.deviceID === n6.deviceID;
                                    }) || b2.push(n6);
                                  }, w2 = 0; w2 < t5.pn.deviceInfos.cameras.length; w2++)
                                    y2(w2);
                                  t5.pn.deviceStateOut = false;
                                  var S2 = false;
                                  b2.length > 0 && (S2 = true), b2.forEach(function(i5) {
                                    for (var n6 in t5.gn.publisherList) {
                                      var e3 = t5.gn.publisherList[n6], r6 = e3.publisher;
                                      if (e3.localStream && "" !== e3.cameraLabel && e3.cameraLabel === i5.deviceName)
                                        S2 = false, !r6.isVideoTrackAlive() && r6.sendStreamStatus(-6, r6.mic_status), g2 = false, t5.pn.actionListener("_deviceError", re.pGN.code, i5.deviceName, "camera"), t5.pn.actionListener("deviceError", re.pGN.code, i5.deviceName);
                                      e3.localStream && 0 === e3.localStream.getAudioTracks().length && (S2 = false);
                                    }
                                    S2 && (t5.pn.deviceStateOut = true), t5.deviceInterruptReport(0, i5, "camera"), g2 = false, t5.pn.actionListener("videoDeviceStateChanged", "DELETE", i5);
                                  }), r5.cameras.filter(function(i5) {
                                    return !t5.pn.deviceInfos.cameras.find(function(t6) {
                                      return t6.deviceID === i5.deviceID;
                                    });
                                  }).forEach(function(i5) {
                                    t5.deviceInterruptReport(1, i5, "camera"), g2 = false, t5.pn.actionListener("videoDeviceStateChanged", "ADD", i5);
                                  });
                                }
                                (0, Pe.nr)() && 1 === (null === (c2 = null === (a2 = t5.pn.deviceInfos) || void 0 === a2 ? void 0 : a2.microphones) || void 0 === c2 ? void 0 : c2.length) && "" === (null === (h2 = t5.pn.deviceInfos) || void 0 === h2 ? void 0 : h2.microphones[0].deviceID) ? t5.an.info("zsc.rd.0 microphones not accurate") : ((_2 = t5.pn.deviceInfos.microphones.filter(function(t6) {
                                  return !r5.microphones.find(function(i5) {
                                    return i5.deviceID === t6.deviceID;
                                  });
                                })).forEach(function(i5) {
                                  for (var n6 in t5.gn.publisherList) {
                                    var e3 = t5.gn.publisherList[n6], r6 = e3.publisher;
                                    if (e3.localStream && "" !== e3.microLabel && (e3.microLabel === i5.deviceName || "" !== e3.microLabel && e3.microLabel.includes(i5.deviceName)))
                                      !r6.isAudioTrackAlive() && r6.sendStreamStatus(r6.camera_status, -6), g2 = false, t5.pn.actionListener("_deviceError", re.pGN.code, t5.gn.publisherList[n6].microLabel, "micro"), t5.pn.actionListener("deviceError", re.pGN.code, t5.gn.publisherList[n6].microLabel);
                                  }
                                  t5.deviceInterruptReport(0, i5, "micro"), g2 = false, t5.pn.actionListener("audioDeviceStateChanged", "DELETE", "Input", i5);
                                }), r5.microphones.filter(function(i5) {
                                  return !t5.pn.deviceInfos.microphones.find(function(t6) {
                                    return t6.deviceID === i5.deviceID;
                                  });
                                }).forEach(function(i5) {
                                  t5.deviceInterruptReport(1, i5, "micro"), g2 = false, t5.pn.actionListener("audioDeviceStateChanged", "ADD", "Input", i5);
                                }));
                                var E2 = t5.pn.deviceInfos.speakers.filter(function(t6) {
                                  return !r5.speakers.find(function(i5) {
                                    return i5.deviceID === t6.deviceID;
                                  });
                                }), k2 = r5.speakers.filter(function(i5) {
                                  return !t5.pn.deviceInfos.speakers.find(function(t6) {
                                    return t6.deviceID === i5.deviceID;
                                  });
                                });
                                E2.forEach(function(i5) {
                                  var n6 = t5.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.rP.event);
                                  n6.setAttributes({ reason_type: L.rP.reason_type("delete"), device: L.rP.device(i5.deviceID), device_name: L.rP.device(i5.deviceName) }), n6.end(), g2 = false, t5.pn.actionListener("audioDeviceStateChanged", "DELETE", "Output", i5);
                                }), k2.forEach(function(i5) {
                                  var n6 = t5.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.rP.event);
                                  n6.setAttributes({ reason_type: L.rP.reason_type("add"), device: L.rP.device(i5.deviceID), device_name: L.rP.device(i5.deviceName) }), n6.end(), g2 = false, t5.pn.actionListener("audioDeviceStateChanged", "ADD", "Output", i5);
                                }), g2 && t5.Uh.onDeviceNoChangeQuickly(r5);
                                var O2 = da({}, t5.pn.deviceInfos);
                                if (t5.pn.deviceInfos = { microphones: r5.microphones, speakers: r5.speakers, cameras: r5.cameras }, t5.pn.autoSwitchDeviceSetting.microphone) {
                                  var I2 = t5.pn.deviceInfos.microphones;
                                  if (_2 && 0 !== _2.length && 0 != I2.length)
                                    t5.gn.previewStreamList.forEach(function(i5) {
                                      return va(t5, void 0, void 0, function() {
                                        var t6, n6, e3, r6, s5, o4, u3;
                                        return ma(this, function(a3) {
                                          switch (a3.label) {
                                            case 0:
                                              return t6 = i5.localStream, n6 = I2[0].deviceID, r6 = null == (e3 = i5.audioTrack) ? void 0 : e3.getSettings().deviceId, s5 = false, r6 && "default" === r6 ? (o4 = O2.microphones.find(function(t7) {
                                                return "default" === t7.deviceID;
                                              }).deviceName, u3 = I2.find(function(t7) {
                                                return "default" === t7.deviceID;
                                              }).deviceName, s5 = u3 !== o4) : "" !== r6 && (s5 = _2.some(function(t7) {
                                                return t7.deviceID === r6;
                                              })), t6 && s5 && "" !== n6 ? (this.an.info("zsc.rd.0 auto switch audio device. " + n6), [4, this.zegoWebRtc.useAudioDevice(t6, n6)]) : [3, 2];
                                            case 1:
                                              a3.sent(), a3.label = 2;
                                            case 2:
                                              return [2];
                                          }
                                        });
                                      });
                                    });
                                }
                                if (t5.pn.autoSwitchDeviceSetting.camera) {
                                  var R2 = t5.pn.deviceInfos.cameras;
                                  if (b2 && 0 !== b2.length && 0 != R2.length)
                                    t5.gn.previewStreamList.forEach(function(i5) {
                                      return va(t5, void 0, void 0, function() {
                                        var t6, n6, e3, r6, s5, o4, u3;
                                        return ma(this, function(a3) {
                                          switch (a3.label) {
                                            case 0:
                                              return t6 = i5.localStream, n6 = R2[0].deviceID, r6 = null == (e3 = i5.videoTrack) ? void 0 : e3.getSettings().deviceId, s5 = false, r6 && "default" === r6 ? (o4 = O2.cameras.find(function(t7) {
                                                return "default" === t7.deviceID;
                                              }).deviceName, u3 = R2.find(function(t7) {
                                                return "default" === t7.deviceID;
                                              }).deviceName, s5 = u3 !== o4) : "" !== r6 && (s5 = b2.some(function(t7) {
                                                return t7.deviceID === r6;
                                              })), t6 && s5 && "" !== n6 ? (this.an.info("zsc.rd.0 auto switch video device. " + n6), [4, this.zegoWebRtc.useVideoDevice(t6, n6)]) : [3, 2];
                                            case 1:
                                              a3.sent(), a3.label = 2;
                                            case 2:
                                              return [2];
                                          }
                                        });
                                      });
                                    });
                                }
                                n5(JSON.parse(JSON.stringify(t5.pn.deviceInfos)));
                              }, function(t6) {
                                r4(t6);
                              });
                            })];
                          });
                        });
                      }, 0 !== t4 ? [3, 2] : [4, r3()];
                    case 1:
                    case 3:
                      return [2, o2.sent()];
                    case 2:
                      return [4, new Promise(function(i5, n4) {
                        s3.pn.deviceChangeTimer = setTimeout(function() {
                          return va(s3, void 0, void 0, function() {
                            var t5, e3;
                            return ma(this, function(s4) {
                              switch (s4.label) {
                                case 0:
                                  return s4.trys.push([0, 2, , 3]), [4, r3()];
                                case 1:
                                  return t5 = s4.sent(), i5(t5), [3, 3];
                                case 2:
                                  return e3 = s4.sent(), n4(e3), [3, 3];
                                case 3:
                                  return [2];
                              }
                            });
                          });
                        }, t4);
                      })];
                  }
                });
              });
            }, t3.prototype.setVideoConfig = function(t4, i3) {
              var n3 = this;
              return (0, G.rA)(this.an, Co.I8R), new G.l3(function(e3, r3) {
                var s3 = (0, $u.L)(t4, n3.an), o2 = L.wd.error, u2 = o2.qe, a2 = o2.wn, c2 = n3._getSpan(s3, L.wd.event), h2 = da({}, i3);
                for (var f2 in h2)
                  h2[f2] instanceof Object && (h2[f2] = JSON.stringify(h2[f2]));
                c2.setAttributes({ video_params: h2 });
                var l2 = function(t5) {
                  n3.cr.setError(c2, u2, t5);
                };
                if (!(0, B.dr)(s3))
                  return n3.an.error(Co.I8R + " localStream not found"), l2("localStream not found"), void r3({ errorCode: a2.code, extendedData: a2.message + " localStream no found" });
                if (!i3 || !(0, B.w)(i3) || 0 == Object.keys(i3).length)
                  return n3.an.error(Co.I8R + " constraints wrong"), l2("constraints wrong"), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                var d2, v2, m2 = i3.width, p2 = i3.height, g2 = i3.maxBitrate, b2 = i3.frameRate;
                if (m2 && (0, B.Cs)(m2) && !n3.pn.checkValidNumber(m2, 0, 7680))
                  return n3.an.error(Co.I8R + " constraints width integer number, range[0, 7680]"), l2("constraints width integer number, range[1, 7680]"), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                if (m2 && (0, B.w)(m2)) {
                  if (!(v2 = So(m2, "width", 0, 7680)).result)
                    return n3.an.error(Co.I8R + " constraints width: " + v2.message), l2("constraints width: " + v2.message), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                } else if (m2 && !(0, B.Cs)(m2) && !(0, B.w)(m2))
                  return n3.an.error(Co.I8R + " constraints width must be a number or an object. "), l2("constraints width must be a number or an object."), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                if (p2 && (0, B.Cs)(p2) && !n3.pn.checkValidNumber(p2, 0, 4320))
                  return n3.an.error(Co.I8R + " constraints height integer number, range[0, 4320]"), l2(" constraints height integer number, range[0, 4320]"), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                if (p2 && (0, B.w)(p2)) {
                  if (!(v2 = So(i3.height, "height", 0, 4320)).result)
                    return n3.an.error(Co.I8R + " constraints height: " + v2.message), l2("constraints height: " + v2.message), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                } else if (p2 && !(0, B.Cs)(p2) && !(0, B.w)(p2))
                  return n3.an.error(Co.I8R + " constraints height must be a number or an object. "), l2(" constraints height must be a number or an object."), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                if (g2 && !(0, B.Cs)(g2))
                  return n3.an.error(Co.I8R + (d2 = " constraints maxBitrate is not a number")), l2(d2), void r3({ errorCode: a2.code, extendedData: a2.message + d2 });
                if (!(0, B.TE)(b2) && !(0, B.Cs)(b2) && !(0, B.w)(b2))
                  return n3.an.error(Co.I8R + (d2 = " constraints frameRate is not a number or an object")), l2(d2), void r3({ errorCode: a2.code, extendedData: a2.message + d2 });
                if ((0, B.Cs)(b2) && !(b2 > 0 && b2 % 1 == 0))
                  return n3.an.error(Co.I8R + " constraints frameRate must be positive integer number"), l2("constraints frameRate must be positive integer number"), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                if (b2 && (0, B.w)(b2) && !(v2 = So(b2, "frameRate")).result)
                  return n3.an.error(Co.I8R + " constraints frameRate: " + v2.message), l2("constraints frameRate: " + v2.message), void r3({ errorCode: a2.code, extendedData: a2.message + " constraints wrong" });
                n3.gh.setPublishStreamVideoConstraints(s3, i3, c2, function(t5) {
                  c2.setAttributes({ error: t5.errorCode, message: t5.extendedData }), c2.end(), e3(t5);
                });
              });
            }, t3.prototype.setAudioConfig = function(t4, i3) {
              var n3 = this;
              return (0, G.rA)(this.an, Co.xcT), new G.l3(function(e3) {
                var r3 = (0, $u.L)(t4, n3.an), s3 = n3._getSpan(r3, L.$7.event);
                if (s3.setAttributes({ audio_params: L.$7.audio_params(i3) }), !(0, B.dr)(r3))
                  return n3.an.error(Co.xcT + " localStream not found"), n3.cr.setError(s3, L.$7.error.qe), void e3({ errorCode: L.$7.error.wn.code, extendedData: L.$7.error.wn.message + " localStream no found" });
                if (!i3 || !(0, B.w)(i3) || 0 == Object.keys(i3).length || !(0, B.TE)(i3.AEC) && !(0, B.dd)(i3.AEC) || !(0, B.TE)(i3.AGC) && !(0, B.dd)(i3.AGC) || !(0, B.TE)(i3.ANS) && !(0, B.dd)(i3.ANS))
                  return n3.an.error(Co.xcT + " constraints wrong"), n3.cr.setError(s3, L.$7.error.wn, " constraints wrong"), void e3({ errorCode: L.$7.error.wn.code, extendedData: L.$7.error.wn.message + " constraints wrong" });
                n3.gh.setPublishStreamAudioConstraints(r3, i3, s3, function(t5) {
                  s3.end(), e3(t5);
                });
              });
            }, t3.prototype.mutePublishStreamVideo = function(t4, i3, n3) {
              var e3 = (0, $u.L)(t4, this.an);
              (0, G.rA)(this.an, Co.NYT, ". " + (null == e3 ? void 0 : e3.id) + " mute: ".concat(i3, ", retain: ").concat(n3));
              var r3 = this._getSpan(e3, L.$Q.event), s3 = this.gn.checkPreview(e3);
              if (!s3)
                return this.an.error(Co.NYT + " localStream error"), false;
              if (!(0, B.dd)(i3) || !(0, B.TE)(n3) && !(0, B.dd)(n3))
                return this.an.error(Co.NYT + " option error"), false;
              var o2 = this.gh.enableCamera(e3, !i3, n3);
              return s3.syncVideoEnabled = o2 && i3, r3.setAttributes({ mute_type: L.$Q.mute_type(i3 ? 1 : 0), retain: L.$Q.retain(n3 || false) }), r3.end(), (0, G.OY)(this.an, Co.NYT), o2;
            }, t3.prototype.mutePublishStreamAudio = function(t4, i3) {
              var n3 = (0, $u.L)(t4, this.an);
              (0, G.rA)(this.an, Co.iMZ, (null == n3 ? void 0 : n3.id) + " mute: ".concat(i3));
              var e3 = this.gn.checkPreview(n3);
              if (!e3)
                return this.an.error(Co.iMZ + " localStream error"), false;
              var r3 = this._getSpan(n3, L.Kt.event);
              if (!(0, B.dd)(i3))
                return this.an.error(Co.iMZ + " option error"), false;
              var s3 = this.gh.enableMicrophone(n3, !i3);
              return e3.syncAudioEnabled = s3 && i3, r3.setAttributes({ mute_type: L.Kt.mute_type(i3 ? 1 : 0) }), r3.end(), (0, G.OY)(this.an, Co.iMZ), s3;
            }, t3.prototype.muteMicrophone = function(t4) {
              this.an.info(Co.QpU + " call");
              var i3 = (0, G.fU)(this.cr, e2.t0.H, "", L.HF.event, L.oq.event);
              if (!(0, B.dd)(t4))
                return this.an.error(Co.QpU + " option error"), this.cr.setError(i3, re.ZEp), false;
              var n3 = this.gh.enableMicrophoneOnly(!t4), r3 = Object.keys(this.gn.publisherList).map(function(t5) {
                return { stream_id: t5 };
              });
              return (0, G.lA)(i3, { enable: L.HF.enable(!t4), stream_list: L.HF.stream_list(r3) }), this.an.info(Co.QpU + " end"), n3;
            }, t3.prototype.handleTrack = function(t4, i3, n3, e3, r3) {
              this.gh.handleTrack(t4, i3, n3, e3, r3);
            }, t3.prototype._getSpan = function(t4, i3) {
              var n3 = this.gn.checkPublish(t4);
              return this.cr.createSpan(e2.t0.H, n3 ? { key: L.Og.event, par: n3.streamID } : { key: L.vW.event }, { key: "" }, i3);
            }, t3.prototype.enVideoSpan = function(t4, i3, n3) {
              this.gh.enVideoSpan(t4, i3, n3);
            }, t3.prototype.replaceTrack = function(t4, i3, n3, e3) {
              return va(this, void 0, void 0, function() {
                var r3, s3, o2, u2, a2, c2;
                return ma(this, function(h2) {
                  return r3 = this._getSpan(t4, L.oe.event), s3 = L.oe.error.wn, (0, B.dr)(t4) ? i3 && i3 instanceof MediaStreamTrack ? (o2 = { id: i3.id, muted: i3.muted, enabled: i3.enabled, kind: i3.kind, readyState: i3.readyState, label: i3.label }, (0, G.rA)(this.an, Co.d9R, ". ".concat(t4.id, " track: ") + JSON.stringify(o2)), u2 = true, "safari" === this.pn.browser && void 0 !== (null == e3 ? void 0 : e3.isReplaceNew) && (u2 = e3.isReplaceNew), a2 = (0, B.TE)(null == e3 ? void 0 : e3.isCaptureStream) || null == e3 ? void 0 : e3.isCaptureStream, c2 = this.gh._replaceTrack(t4, i3, n3, void 0, u2, a2), r3.setAttributes({ track_kind: L.oe.track_kind(i3.kind) }), r3.end(), [2, c2]) : (this.an.error(Co.d9R + " mediastream track no found"), this.cr.setError(r3, s3, "mediastream track no found"), [2, { errorCode: s3.code, extendedData: s3.message + " mediastream track no found" }]) : (this.an.error(Co.d9R + " localStream not found"), this.cr.setError(r3, s3, "localStream not found"), [2, { errorCode: s3.code, extendedData: s3.message + " localStream no found" }]);
                });
              });
            }, t3.prototype.useVideoDevice = function(t4, i3) {
              var n3 = this, e3 = "zc.uvd.0";
              return (0, G.rA)(this.an, e3), new G.l3(function(r3) {
                var s3 = (0, $u.L)(t4, n3.an), o2 = n3._getSpan(s3, L.RI.event);
                if (o2.setAttributes({ device: L.RI.device(i3) }), !(0, B.dr)(s3))
                  return n3.an.error(e3 + " localStream not found"), n3.cr.setError(o2, L.RI.error.qe), void r3({ errorCode: L.RI.error.wn.code, extendedData: L.RI.error.wn.message });
                if (!(0, B.QP)(i3))
                  return n3.an.error(e3 + " deviceID must be string"), n3.cr.setError(o2, L.RI.error.wn, " deviceID must be string"), void r3({ errorCode: L.RI.error.wn.code, extendedData: L.RI.error.wn.message });
                var u2 = function(t5) {
                  (0, G.lA)(o2, { error: t5.errorCode, message: t5.extendedData }), n3.gn.getPublishList(s3).forEach(function(t6) {
                    var i4, n4;
                    t6.cameraLabel = (null === (n4 = null === (i4 = t6.publisher.previewer) || void 0 === i4 ? void 0 : i4.videoTrack) || void 0 === n4 ? void 0 : n4.label) || t6.cameraLabel;
                  }), r3(t5);
                };
                yo(function(t5) {
                  var r4 = t5.cameras.find(function(t6) {
                    return t6.deviceID == i3;
                  });
                  if (!r4)
                    return n3.an.error(e3 + " " + G.pt), void u2({ errorCode: L.RI.error.Ve.code, extendedData: L.RI.error.Ve.message });
                  o2.setAttributes({ device_name: L.RI.device_name(null == r4 ? void 0 : r4.deviceName) }), n3.gh.Bh("video", s3, i3, u2);
                }, function(t5) {
                  n3.an.warn(e3 + " getDevices err:" + t5), n3.gh.Bh("video", s3, i3, u2);
                });
              });
            }, t3.prototype.useFrontCamera = function(t4, i3) {
              var n3 = this, e3 = "zc.ufc.0";
              return (0, G.rA)(this.an, e3, "" + i3), new G.l3(function(r3, s3) {
                var o2 = (0, $u.L)(t4, n3.an), u2 = n3._getSpan(o2, L.RI.event);
                if (!(0, B.dr)(o2))
                  return n3.an.error(e3 + " localStream not found"), n3.cr.setError(u2, L.RI.error.qe), void s3({ errorCode: L.RI.error.wn.code, extendedData: L.RI.error.wn.message });
                if (!(0, B.dd)(i3))
                  return n3.an.error(e3 + " enable must be boolean"), n3.cr.setError(u2, L.RI.error.wn, " enable must be boolean"), void s3({ errorCode: L.RI.error.wn.code, extendedData: L.RI.error.wn.message });
                var a2 = (0, Pe.m0)(), c2 = (0, Pe.aR)(), h2 = (0, Pe.HR)();
                if (!(a2 || c2 || h2))
                  return n3.an.error(e3 + " must use in mobile"), n3.cr.setError(u2, L.RI.error.Qe, " must use in mobile"), void s3({ errorCode: L.RI.error.Qe.code, extendedData: L.RI.error.Qe.message });
                var f2 = i3 ? "user" : "environment";
                u2.setAttributes({ facing_mode: L.RI.facing_mode(f2) }), n3.gh.Bh("video", o2, "", function(t5) {
                  u2.setAttributes({ error: t5.errorCode, message: t5.extendedData }), u2.end(), n3.gn.getPublishList(o2).forEach(function(t6) {
                    var i4, n4;
                    t6.cameraLabel = (null === (n4 = null === (i4 = t6.publisher.previewer) || void 0 === i4 ? void 0 : i4.videoTrack) || void 0 === n4 ? void 0 : n4.label) || t6.cameraLabel;
                  }), 0 === (null == t5 ? void 0 : t5.errorCode) ? r3(t5) : s3(t5);
                }, { facingMode: f2 });
              });
            }, t3.prototype.useAudioDevice = function(t4, i3) {
              var n3 = this, e3 = "zc.uad.1";
              return (0, G.rA)(this.an, e3), new G.l3(function(r3) {
                var s3 = (0, $u.L)(t4, n3.an), o2 = n3._getSpan(s3, L.li.event);
                o2.setAttributes({ device: L.li.device(i3) });
                var u2 = function(t5, i4) {
                  n3.an.error(e3 + " " + i4);
                  var s4 = t5;
                  s4.message = s4.message + (i4 ? " " + i4 : ""), n3.cr.setError(o2, t5, i4), r3({ errorCode: s4.code, extendedData: s4.message });
                }, a2 = function(t5) {
                  (0, G.lA)(o2, { error: t5.errorCode, message: t5.extendedData }), n3.gn.getPublishList(s3).forEach(function(t6) {
                    var i5;
                    t6.microLabel = (null === (i5 = s3.getAudioTracks()[0]) || void 0 === i5 ? void 0 : i5.label) || t6.microLabel;
                  });
                  var i4 = n3.gn.checkPreview(s3);
                  0 === t5.errorCode && i4 && (i4.hasMicTrack = true), r3(t5);
                };
                (0, B.dr)(s3) ? (0, B.QP)(i3) ? yo(function(t5) {
                  var r4 = t5.microphones.find(function(t6) {
                    return t6.deviceID == i3;
                  });
                  if (!r4)
                    return n3.an.error(e3 + " " + G.pt), void a2({ errorCode: L.li.error.Ve.code, extendedData: L.li.error.Ve.message });
                  o2.setAttributes({ device_name: L.li.device_name(null == r4 ? void 0 : r4.deviceName) }), n3.gh.Bh("audio", s3, i3, a2);
                }, function(t5) {
                  n3.an.warn(e3 + " getDevices err:" + t5), n3.gh.Bh("audio", s3, i3, a2);
                }) : u2(L.li.error.wn, "deviceID must be string") : u2(L.li.error.qe, "localStream not found");
              });
            }, t3.prototype.enableDualStream = function(t4) {
              var i3 = "zsc.eds";
              (0, G.rA)(this.an, i3);
              var n3 = (0, $u.L)(t4, this.an), e3 = this.gn.checkPreview(n3);
              if (e3)
                if (null == e3 ? void 0 : e3.lowStream)
                  this.an.error(i3 + " low stream already exists");
                else {
                  var r3 = e3.videoPreviewType || e3.previewType;
                  if ((0, Pe.gm)() && "custom" == r3)
                    this.an.error(i3 + " can not support firefox");
                  else
                    this.gn.checkPublish(n3) ? this.an.error(i3 + " is publishing") : (e3.enableDualStream = true, e3.createLowStream());
                }
              else
                this.an.error(i3 + " preview no found");
            }, t3.prototype.setLowStreamParameter = function(t4, i3) {
              var n3 = (0, $u.L)(t4, this.an), e3 = this.gn.checkPreview(n3);
              if (e3) {
                var r3 = e3.videoInfo, s3 = [];
                for (var o2 in i3)
                  isNaN(+i3[o2]) && s3.push(o2);
                if (s3.length)
                  throw new Error('param "'.concat(s3.join(","), ' type error"'));
                i3.width && r3.width && Io(r3.width) && i3.width > Io(r3.width) ? this.an.error("zsc.slsp.0 low stream width can not larger than high stream") : i3.height && r3.height && Io(r3.height) && i3.height > Io(r3.height) ? this.an.error("zsc.slsp.0 low stream height can not larger than high stream") : i3.frameRate && r3.frameRate && Io(r3.frameRate) && i3.frameRate > Io(r3.frameRate) || i3.height && r3.bitRate && i3.bitRate > r3.bitRate || (e3.lowStreamConfig = Object.assign(e3.lowStreamConfig, i3));
              } else
                this.an.error("zsc.slsp.0 preview no found");
            }, t3.prototype.setDummyCaptureImagePath = function(t4, i3) {
              var n3 = this;
              return new G.l3(function(e3, r3) {
                var s3 = (0, $u.L)(i3, n3.an), o2 = n3.gn.checkPreview(s3);
                if (!o2)
                  return n3.an.error("zc.sdcp.0 preview no found"), void e3(false);
                if (!(0, B.QP)(t4))
                  return n3.an.error("zc.sdcp.0 filePath type error"), void e3(false);
                var u2 = new Image();
                u2.src = t4, u2.crossOrigin = "anonymous", u2.onload = function() {
                  o2.loadImgTimer && clearTimeout(o2.loadImgTimer), o2.loadImgTimer = void 0, n3.an.info("zc.sdcp.0 load file path success"), o2.setMuteImage(u2), e3(true);
                }, o2.loadImgTimer = setTimeout(function() {
                  n3.an.error("zc.sdcp.0 load img timeout"), e3(false);
                }, 5e3);
              });
            }, t3.prototype.enableAutoSwitchDevice = function(t4) {
              this.an.info("zc.easw call. " + JSON.stringify(t4)), this.pn.autoSwitchDeviceSetting = da({}, t4);
            }, t3.prototype.enableCameraCapturing = function(t4, i3) {
              return void 0 === i3 && (i3 = true), va(this, void 0, void 0, function() {
                var n3, r3, s3, o2, u2, a2;
                return ma(this, function(c2) {
                  return this.an.info("zsc.ecc call by user " + i3), n3 = (0, G.fU)(this.cr, e2.t0.H, "", L.BY.event, L.oq.event), r3 = (0, $u.L)(t4, this.an), (s3 = this.gn.checkPreview(r3)) ? (o2 = s3.videoPreviewType || s3.previewType, s3.localStream && s3.videoTrack && "camera" === o2 ? (u2 = this.gn.getPublishList(r3), a2 = u2.map(function(t5) {
                    return { stream_id: t5.streamID };
                  }), (0, G.lA)(n3, { enable: L.BY.enable(i3), stream_list: L.BY.stream_list(a2) }), [2, this.gh.enableCameraCapturing(s3, i3)]) : (this.an.error("zsc.ecc not camera stream"), [2, false])) : (this.an.error("zsc.ecc " + G.h2), this.cr.setError(n3, re.fzq), [2, false]);
                });
              });
            }, t3.prototype.getStreamStats = function(t4) {
              var i3, n3, e3;
              return this.an.info(Co.Ywv + " call"), (0, B.dr)(t4) && t4.getTracks().length > 0 ? e3 = null === (i3 = this.gn.checkPublish(t4)) || void 0 === i3 ? void 0 : i3.publisher : (0, B.QP)(t4) && (e3 = null === (n3 = this.gn.publisherList[t4]) || void 0 === n3 ? void 0 : n3.publisher), e3 ? (null == e3 ? void 0 : e3.qualityHandler.Wh) || null : (this.an.error("zsc.sp.0 stream is not publishing"), null);
            }, t3.prototype.startWaitPublish = function() {
              var t4 = this;
              this.gn.waitPublishList.forEach(function(i3) {
                t4.gn.startPublishingStream(i3);
              }), this.gn.waitPublishList = [];
            }, t3.prototype.deviceInterruptReport = function(t4, i3, n3) {
              var r3, s3 = "camera" === n3 ? L.KZ : L.fF;
              "micro" === n3 ? r3 = 1 : "speaker" === n3 && (r3 = 0);
              var o2 = (0, G.fU)(this.cr, e2.t0.H, "", s3.event, L.vW.event), u2 = { changed_type: s3.interrupt(t4), device: s3.device(i3.deviceID), device_name: s3.device_name(i3.deviceName) };
              (0, B.Cs)(r3) && (u2.device_type = r3), (0, G.lA)(o2, u2);
            }, t3.prototype.initCopyMusic = function(t4) {
              if (this.gn.useCopyMusic && !isNaN(this.pn.engineConfig.choirRole)) {
                var i3 = this.gn.checkPreview(t4), n3 = this.pn.roomList[0];
                if (n3) {
                  var e3 = Array.from(new Set(n3.streamList.map(function(t5) {
                    return t5.id_name;
                  }))), r3 = e3.length + (e3.includes(this.gn.userid) ? 0 : 1);
                  i3 && !i3.onlyPreview && i3.setVolumeFactorByUserCount(r3);
                }
              }
            }, t3.prototype.setEmptyAudioTrack = function(t4, i3) {
              if (this.pn.engineConfig.keepAudioTrack && 0 == t4.getAudioTracks().length) {
                var n3 = i3.getEmptyAudioTrack();
                n3 && (n3.enabled = false, t4.addTrack(n3), i3 && (i3.hasEmptyAudioTrack = true));
              }
            }, t3.prototype.addShareScreenEnd = function(t4) {
              var i3 = this, n3 = t4.getVideoTracks()[0];
              n3 && (n3.onended = function() {
                var n4 = i3.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.ny.event);
                n4.setAttributes({ stop_reason: L.ny.stop_reason("screenSharingEnded") }), t4 && i3.stopPreview(t4), n4.end(), i3.pn.actionListener("screenSharingEnded", t4);
              });
            }, t3.prototype.destroy = function() {
              G.VJ.removeEventListener("visibilitychange", this.eventHandler.visibilitychange);
            }, t3;
          }(), Da = function() {
            return Da = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Da.apply(this, arguments);
          }, Na = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Pa = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Ma = L.Nr.event, xa = L.Nr, ja = function() {
            function t3(t4, i3, n3, e3, r3) {
              this.an = t4, this.dataReport = i3, this.pn = n3, this.gn = e3, this.rtm = r3;
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.startPlayingStream = function(t4, i3, n3) {
              var e3 = this;
              return this.an.info(Co.rGc + " playOption: " + JSON.stringify(pt(i3 || {}, ["CDNVideo", "CDNPlayer"])) + " isDataChannel: " + JSON.stringify(!!n3), { streamid: t4 }), new G.l3(function(r3, s3) {
                return e3._handlePlayStream(t4, i3, r3, s3, n3);
              });
            }, t3.prototype._handlePlayStream = function(t4, i3, n3, r3, s3) {
              var o2, u2 = this, a2 = xa, c2 = function(t5, i4) {
                u2.an.error(Co.rGc + " " + (i4 || t5.message));
                var n4 = u2.cr.getAPIErrorReport(Ma);
                n4 && u2.cr.takeAPIErrorReport(Ma, t5, n4), r3 && r3(Da(Da({}, t5), { errorCode: t5.code, extendedData: t5.message + (i4 ? " " + i4 : "") }));
              };
              if (!t4)
                return c2(a2.error.de), false;
              if (!(0, B.QP)(t4))
                return c2(a2.error.de, "stream id type error"), false;
              if (t4.length > e2.LO)
                return c2(a2.error.me, "stream id length limit " + e2.LO), false;
              if (!(0, G.kP)(t4) && (this.an.warn(Co.rGc + " #invald streamID:".concat(t4)), this.pn.isFlutter))
                return c2(a2.error.pe), false;
              if (!(0, G.jy)(t4))
                return c2(a2.error.pe), false;
              if (!(0, B.TE)(i3) && !(0, B.w)(i3))
                return c2(a2.error.ve, "playOption must be object"), false;
              if (!(0, B.TE)(null == i3 ? void 0 : i3.codecTemplateID) && !Number.isInteger(null == i3 ? void 0 : i3.codecTemplateID))
                return c2(a2.error.ve, "codecTemplateID must be integer "), false;
              if ((0, B.dd)(null == i3 ? void 0 : i3.adaptiveSwitch) && (null == i3 ? void 0 : i3.adaptiveSwitch)) {
                if ((null == i3 ? void 0 : i3.resourceMode) !== e2.qP.L3)
                  return c2(a2.error.ve, "adaptiveSwitch only support resourceMode as L3"), false;
                if (!(0, B.C9)(null == i3 ? void 0 : i3.adaptiveTemplateIDList) || 0 === (null == i3 ? void 0 : i3.adaptiveTemplateIDList.length))
                  return c2(a2.error.ve, "adaptiveTemplateIDList must be array and length > 0"), false;
              }
              var h2 = this.gn.maxChannels;
              if ((0, B.Cs)(h2) && Object.keys(this.gn.playerList).length >= h2) {
                var f2 = Object.values(this.gn.playerList).filter(function(t5) {
                  return false === (null == t5 ? void 0 : t5.isProbe);
                }).length;
                if (f2 >= h2)
                  return this.an.error("zsc.pss.1 play streams is out limit " + f2 + " " + h2), c2(a2.error.Ne), false;
              }
              var l2 = bt(this.pn.appid, this.pn.idName, t4), d2 = ((o2 = {})["_play_" + t4] = { stream_sid: l2 }, o2);
              if (this.cr.setPublicPros(d2), this.pn.playAccelerate && this.pn.roomList.length > 0)
                this.an.info(Co.rGc + " play accelerate");
              else if (this.rtm.isDisConnect())
                return c2(a2.error.ge), false;
              this.pn.pullLimited || (t4 = NaN + t4), i3 && i3.videoCodec && (i3.videoCodec = i3.videoCodec.toUpperCase());
              var v2 = this.pn.settingConfig.getSetting("resource_mode", true);
              void 0 !== v2 && (this.an.info(Co.rGc + " setting resource_mode " + v2), !i3 && (i3 = {}), i3.resourceMode = v2);
              var m2 = this.gn.setPlayStateStart(t4, i3, l2, s3);
              return true !== m2 ? (c2(JSON.parse(JSON.stringify(m2)), "cannot start play"), false) : (this.gn.onPlayStateUpdate(e2.h7.retry, t4, { code: 0, message: "" }), this.gn.playSuccessCallBackList[t4] = function(t5) {
                n3 && n3(t5);
              }, r3 && (this.gn.playErrorCallBackList[t4] = r3), this.pn.appConfig ? (this.gn.startPlayingStream(t4), true) : (this.gn.waitPlayList.push(t4), true));
            }, t3.prototype.setPlayStreamVideoType = function(t4, i3) {
              var n3 = this;
              return new Promise(function(e3, r3) {
                return Na(n3, void 0, void 0, function() {
                  var n4, s3;
                  return Pa(this, function(o2) {
                    switch (o2.label) {
                      case 0:
                        if (n4 = Uo(this.an, t4), !(0, B.QP)(t4) || "" === t4)
                          return n4.error(Co.dk2 + " streamid must be string and not empty"), r3(false), [2];
                        if (!(s3 = this.gn.playerList[t4]))
                          return n4.error(Co.dk2 + " player not exist"), r3(false), [2];
                        if (![0, 1, 2].includes(i3))
                          return n4.error(Co.dk2 + " streamType must be number 0 or 1 or 2"), r3(false), [2];
                        o2.label = 1;
                      case 1:
                        return o2.trys.push([1, 3, , 4]), [4, s3.setPlayStreamVideoType(i3)];
                      case 2:
                        return 0 === o2.sent().result ? e3(true) : r3(false), [3, 4];
                      case 3:
                        return o2.sent(), r3(false), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              });
            }, t3.prototype.stopPlayingStream = function(t4, i3, n3) {
              var r3, s3, o2 = Uo(this.an, t4);
              o2.info(Co.dk2 + " call");
              var u2 = this.cr.createSpan(e2.t0.I, { key: L.vW.event }, { key: "" }, L.oI.event);
              if (!(0, B.QP)(t4) || "" === t4)
                return o2.error(Co.dk2 + " streamid must be string and not empty"), this.cr.setError(u2, L.oI.error.wn, "stream id type error"), void delete this.pn.reportSeqList.stopPlay[t4];
              var a2 = this.gn.playerList[t4];
              u2.setAttributes({ stream_id: L.oI.stream_id(t4), room_id: L.oI.room_id(null === (r3 = this.gn.playerList[t4]) || void 0 === r3 ? void 0 : r3.room.roomID), webrtc_sid: L.oI.webrtc_sid(null == a2 ? void 0 : a2.sessionId), stream_sid: L.oI.stream_sid(null == a2 ? void 0 : a2.streamSid), biz_product: a2 && (null === (s3 = a2.playOption) || void 0 === s3 ? void 0 : s3.resourceMode) == e2.qP.DG ? 1 : 0 });
              var c2 = a2 && "NO_PLAY" !== (null == a2 ? void 0 : a2.curCBState.state);
              n3 && !i3 && 6 !== (null == a2 ? void 0 : a2.state) && (i3 = xa.error.De);
              var h2 = [1, 3].includes(null == a2 ? void 0 : a2.resourceMode) && (null == a2 ? void 0 : a2.playMode) === e2.ey.CDN;
              for (var f2 in this.gn.stopPlayingStream(t4, i3), this.pn.streamUrlMap)
                if (this.pn.streamUrlMap[f2] === t4) {
                  delete this.pn.streamUrlMap[f2];
                  break;
                }
              i3 ? this.cr.setError(u2, i3) : u2.end(), c2 && this.gn.onPlayStateUpdate(e2.h7.error, t4, i3 || { code: 0, message: "" }, { isCDN: h2 }), o2.debug(Co.dk2 + " call success");
            }, t3.prototype.stopPlayingStreamInRoom = function(t4) {
              for (var i3 in this.an.info(Co.V9q + " call " + t4), this.gn.playerList)
                this.gn.playerList[i3].room.roomID === t4 && this.stopPlayingStream(i3);
            }, t3.prototype.setStreamAudioOutput = function(t4, i3) {
              var n3 = this;
              return !(null == i3 || 0 == i3.length || !t4) && (this.an.debug("zsc.ssao.0 device " + i3), t4 ? "undefined" !== t4.sinkId ? (t4.setSinkId(i3).then(function() {
                n3.an.info("zsc.ssao.0 success device: " + i3);
              }).catch(function(t5) {
                n3.an.info("zsc.ssao.0 " + t5.name);
              }), true) : (this.an.error("zsc.ssao.0 browser does not suppport"), false) : (this.an.error("zsc.ssao.0 no localVideo"), false));
            }, t3.prototype.startWaitPlay = function() {
              var t4 = this;
              this.gn.waitPlayList.forEach(function(i3) {
                t4.gn.startPlayingStream(i3);
              }), this.gn.waitPlayList = [];
            }, t3.prototype.setPlayerListForbid = function(t4) {
              var i3 = this;
              t4.forEach(function(t5) {
                var n3 = t5.stream_attr_opts, e3 = i3.gn.playerList[t5.streamID];
                n3 && (null == e3 || e3.setMuteStreamByPlayMode(n3));
              });
            }, t3.prototype.getStreamStats = function(t4) {
              var i3, n3;
              return this.an.info(Co.bp1 + " call"), (0, B.QP)(t4) && (n3 = this.gn.playerList[t4]), n3 && (null === (i3 = null == n3 ? void 0 : n3.qualityHandler) || void 0 === i3 ? void 0 : i3.Wh) ? n3.qualityHandler.Wh || null : (this.an.error("zsc.sp.0 stream is not playing"), null);
            }, t3.prototype.mutePlayStreamVideo = function(t4, i3) {
              (0, G.rA)(this.an, Co.OYv, t4 + " " + i3);
              var n3 = this.cr.createSpan(e2.t0.H, { key: L.Nr.event, par: t4 }, { key: "" }, L.w_.event);
              n3.setAttributes({ mute_type: L.w_.mute_type(i3 ? 1 : 0) });
              var r3 = this.mutePlayStream(t4, "video", i3);
              return n3.end(), this.an.info(Co.OYv + " end"), r3;
            }, t3.prototype.mutePlayStreamAudio = function(t4, i3) {
              (0, G.rA)(this.an, Co.x_Q, t4 + " " + i3);
              var n3 = this.cr.createSpan(e2.t0.H, { key: L.Nr.event, par: t4 }, { key: "" }, L.lZ.event);
              n3.setAttributes({ mute_type: L.lZ.mute_type(i3 ? 1 : 0) });
              var r3 = this.mutePlayStream(t4, "audio", i3);
              return n3.end(), this.an.info(Co.x_Q + " end"), r3;
            }, t3.prototype.muteAllPlayAudioStreams = function(t4) {
              var i3 = this;
              return (0, G.rA)(this.an, Co.fcT, " " + t4), new Promise(function(n3, e3) {
                if ("boolean" != typeof t4)
                  return i3.an.error(Co.fcT + " mute should be a boolean type"), void e3(false);
                var r3 = Object.keys(i3.gn.playerList), s3 = [];
                if (!i3.gn.playModule)
                  return i3.an.info(Co.fcT + " cannot find play module."), void e3(false);
                i3.gn.defaultAudioMuted = t4, i3.an.info(Co.fcT + " " + "mute ".concat(t4, " streamid ").concat(JSON.stringify(r3)));
                for (var o2 = 0, u2 = r3; o2 < u2.length; o2++) {
                  s3.push(i3.mutePlayStreamAudio(u2[o2], t4));
                }
                Promise.all(s3).then(function(e4) {
                  i3.an.info(Co.fcT + " " + "mute ".concat(t4, " all audio success")), n3(true);
                }).catch(function(n4) {
                  i3.an.error(Co.fcT + " mute: " + t4 + " error catch: " + n4), e3(false);
                });
              });
            }, t3.prototype.muteAllPlayVideoStreams = function(t4) {
              var i3 = this;
              return (0, G.rA)(this.an, Co.Y9k, " " + t4), new Promise(function(n3, e3) {
                if ("boolean" != typeof t4)
                  return i3.an.error(Co.Y9k + " mute should be a boolean type"), void e3(false);
                var r3 = Object.keys(i3.gn.playerList), s3 = [];
                if (!i3.gn.playModule)
                  return i3.an.info(Co.Y9k + " cannot find play module."), void e3(false);
                i3.gn.defaultVideoMuted = t4, i3.an.info(Co.Y9k + " " + "mute ".concat(t4, " streamid ").concat(JSON.stringify(r3)));
                for (var o2 = 0, u2 = r3; o2 < u2.length; o2++) {
                  s3.push(i3.mutePlayStreamVideo(u2[o2], t4));
                }
                Promise.all(s3).then(function(e4) {
                  i3.an.info(Co.Y9k + " " + "mute ".concat(t4, " all audio success")), n3(true);
                }).catch(function(n4) {
                  i3.an.error(Co.Y9k + " mute: " + t4 + " error catch: " + n4), e3(false);
                });
              });
            }, t3.prototype.mutePlayStream = function(t4, i3, n3, r3) {
              var s3 = this;
              return void 0 === r3 && (r3 = true), this.an.info("zsc.mps.0 call " + i3 + " " + n3), new G.l3(function(o2, u2) {
                if (!(0, B.QP)(t4) || "" == t4)
                  return s3.an.error("zsc.mps.0 streamID must be string and not empty"), void u2(false);
                if (!(0, B.dd)(n3))
                  return s3.an.error("zsc.mps.0 mute must be boolean"), void u2(false);
                var a2 = s3.gn.playerList[t4];
                if (!a2)
                  return s3.an.error("zsc.mps.0 player not found"), void u2(false);
                if ("video" === i3) {
                  if (a2.playOption && false === a2.playOption.video)
                    return s3.an.error("zsc.mps.0 stream no contain video"), void u2(false);
                  if (r3 && (null == a2 ? void 0 : a2.isServerMuteVideo))
                    return s3.an.error("zsc.mps.0 stream ".concat(t4, " has forbid video")), void u2(false);
                  if (a2.playMode === e2.ey.CDN)
                    return s3.an.info("zsc.mps.0 stream ".concat(t4, " cdn mute video ").concat(n3)), void (a2.playMediaStatus.video = !n3);
                  a2.ActivatePlayVideoStream(n3, function() {
                    var i4, r4;
                    s3.an.info("zsc.mps.0 suc"), a2.playMediaStatus.video = !n3;
                    var u3 = L.es, c2 = s3.cr.createSpan(e2.t0.H, { key: L.Nr.event, par: t4 }, { key: "" }, u3.event);
                    c2.setAttributes({ webrtc_sid: u3.webrtc_sid(a2.sessionId), video_activate: u3.video_activate(!!a2.playMediaStatus.video), audio_activate: u3.audio_activate(!!a2.playMediaStatus.audio), video_layer: u3.video_layer(2 === (null === (i4 = null == a2 ? void 0 : a2.playOption) || void 0 === i4 ? void 0 : i4.streamType) ? -1 : null === (r4 = null == a2 ? void 0 : a2.playOption) || void 0 === r4 ? void 0 : r4.streamType) }), c2.end(), a2.handleVideoTrackForPlaying(), o2(true);
                  }, function() {
                    s3.an.error("zsc.mps.0 fail"), u2(false);
                  });
                } else if ("audio" === i3) {
                  if (a2.playOption && false === a2.playOption.audio)
                    return s3.an.error("zsc.mps.0 stream no contain audio"), void u2(false);
                  if (r3 && (null == a2 ? void 0 : a2.isServerMuteAudio))
                    return s3.an.error("zsc.mps.0 stream ".concat(t4, " has forbid audio")), void u2(false);
                  if (a2.playMode === e2.ey.CDN)
                    return s3.an.info("zsc.mps.0 stream ".concat(t4, " cdn mute audio ").concat(n3)), void (a2.playMediaStatus.audio = !n3);
                  a2.ActivatePlayAudioStream(n3, function() {
                    s3.an.info("zsc.mps.0 suc"), a2.playMediaStatus.audio = !n3;
                    var i4 = L.es, r4 = s3.cr.createSpan(e2.t0.H, { key: L.Nr.event, par: t4 }, { key: "" }, i4.event);
                    r4.setAttributes({ webrtc_sid: i4.webrtc_sid(a2.sessionId), video_activate: i4.video_activate(!!a2.playMediaStatus.video), audio_activate: i4.audio_activate(!!a2.playMediaStatus.audio) }), r4.end(), o2(true);
                  }, function() {
                    s3.an.error("zsc.mps.0 fail"), u2(false);
                  });
                } else
                  u2(false);
              });
            }, t3;
          }(), qa = function() {
            function t3(t4, i3, n3, e3) {
              this.gn = t4, this.pn = i3, this.an = n3, this.rtm = e3;
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.setStreamExtraInfo = function(t4, i3) {
              var r3 = this;
              return new G.l3(function(s3, o2) {
                var u2 = r3.gn.getRoomByStreamID(t4), a2 = L.Fv, c2 = r3.cr.createSpan(n2.t0.H, u2 ? { key: L.B$.event, par: null == u2 ? void 0 : u2.roomID } : { key: L.oq.event }, { key: "" }, a2.event);
                c2.setAttributes({ stream_id: a2.stream_id(t4), stream_extra_info: a2.stream_extra_info(i3) });
                var h2 = function(t5, i4) {
                  void 0 === i4 && (i4 = ""), r3.an.error("zb.ssei " + i4), r3.cr.setError(c2, t5, i4), o2({ errorCode: t5.code, extendedData: t5.message + " " + i4 });
                };
                (0, B.QP)(t4) && "" != t4 ? (0, B.QP)(i3) ? 0 !== i3.length ? i3.length > e2.uv ? h2(a2.error._zpg_kExtraInfoTooLong) : r3.rtm.isDisConnect() ? h2(a2.error.Ue) : r3.pn.publishStreamList[t4] ? u2 ? u2.streamHandler.setStreamExtraInfo(t4, i3, function(t5, i4) {
                  var n3, e3, u3, h3;
                  if (0 === (null === (n3 = null == t5 ? void 0 : t5.body) || void 0 === n3 ? void 0 : n3.err_code) || 0 === (null == t5 ? void 0 : t5.errorCode))
                    c2.setAttributes({ send_seq: a2.send_seq(i4) }), c2.end(), s3({ errorCode: 0 === (null === (e3 = null == t5 ? void 0 : t5.body) || void 0 === e3 ? void 0 : e3.err_code) ? null === (u3 = null == t5 ? void 0 : t5.body) || void 0 === u3 ? void 0 : u3.err_code : null == t5 ? void 0 : t5.errorCode, extendedData: "" });
                  else {
                    var f2 = { errorCode: (null === (h3 = null == t5 ? void 0 : t5.body) || void 0 === h3 ? void 0 : h3.err_code) || (null == t5 ? void 0 : t5.code) };
                    r3.cr.setError(c2, f2), o2(f2);
                  }
                }, h2) : h2(a2.error.Ue) : h2(a2.error.Be) : h2(a2.error._zpg_kExtraInfoNull) : h2(a2.error.wn, " extraInfo must be string") : h2(a2.error.wn, " streamID must be string and not empty");
              });
            }, t3;
          }(), La = function() {
            return La = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, La.apply(this, arguments);
          }, Ba = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Ua = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Ga = L.zF, Ja = L.Nr.event, Fa = L.Nr.error, Ha = L.Og.error, Va = function() {
            function t3(t4, i3, n3, r3, s3, o2, u2) {
              var a2 = this;
              this.an = t4, this.dataReport = i3, this.pn = n3, this.gn = r3, this.rtm = s3, this.ac = o2, this.zegoWebRtc = u2, this.beforeunloadListener = function() {
                a2.logger.stopStorageLog();
                for (var t5 = 0; t5 < a2.gn.previewStreamList.length; t5++)
                  a2.gn.previewStreamList[t5].stopPreview();
                a2.gn.previewStreamList = [];
              }, this.pagehideListener = function() {
                for (var t5 in window.event && (window.event.cancelBubble = true), a2.gn.publisherList)
                  a2.publishModule.stopPublishingStream(t5);
                for (var t5 in a2.gn.playerList)
                  a2.playModule.stopPlayingStream(t5);
              }, this.messageListener = function(t5) {
                var i4 = t5.data, n4 = i4.type;
                "SS_DIALOG_SUCCESS" === n4 && a2.screenStreamFrom(i4.streamId, i4.canRequestAudioTrack, X("screenShare", a2.pn.callbackList)), "SS_DIALOG_CANCEL" === n4 && X("screenShare", a2.pn.callbackList)(false, null, n4);
              }, this.offlineListener = function() {
                for (var t5 in a2.an.info("zc.off.0 " + G.Rl), a2.pn.networkState = e2.D2.offline, a2.gn.publisherList) {
                  a2.gn.stopNetProbe(a2.gn.publisherList[t5].publisher);
                }
                for (var t5 in a2.gn.playerList) {
                  var i4 = a2.gn.playerList[t5];
                  i4.playMode == e2.ey.CDN && i4.zegoCdnPlayer && (i4.zegoCdnPlayer.canRetry = false), a2.gn.stopNetProbe(i4);
                }
              }, this.onlineListener = function(t5) {
                for (var i4 in a2.an.info("zc.on.0 network is online"), a2.pn.networkState = e2.D2.online, a2.gn.publisherList) {
                  var n4 = a2.gn.publisherList[i4].publisher, r4 = a2.gn.publisherList[i4].retryStreamHandler;
                  7 == n4.state || n4.stateNego == m.stop || n4.iceStateDisConnect ? !r4.isOverTime && r4.publishStateHandle(e2.eZ.error, i4, Ha.xn) : 6 == n4.state && r4.stopMaxTime();
                }
                for (var i4 in a2.gn.playerList) {
                  var s4 = a2.gn.playerList[i4], o3 = s4.playMode, u3 = (r4 = s4.retryStreamHandler, s4.zegoCdnPlayer);
                  o3 == e2.ey.CDN && u3 && (u3.canRetry = false), 7 == s4.state || o3 !== e2.ey.CDN && (0 == s4.stateNego || s4.iceStateDisConnect) ? !r4.isOverTime && r4.playStateHandle(e2.h7.error, i4, Fa.Se) : 6 == s4.state && r4.stopMaxTime();
                }
              }, this.visibilitychangeListener = function(t5) {
                var i4 = "";
                i4 = "visible" === G.VJ.visibilityState ? "foreground" : "background";
                var n4 = a2.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.E$.event);
                n4.setAttribute("state", L.E$.state(i4)), n4.end();
              }, this.safariPagehideListener = function(t5) {
                var i4 = a2.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.E$.event);
                i4.setAttribute("state", L.E$.state("background")), i4.end();
              }, this.safariPageshowListener = function(t5) {
                var i4 = a2.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.E$.event);
                i4.setAttribute("state", L.E$.state("foreground")), i4.end();
              }, this.publishModule = new za(this.an, this.dataReport, this.pn, this.gn, this.rtm, this.zegoWebRtc), this.playModule = new ja(this.an, this.dataReport, this.pn, this.gn, this.rtm), this.gn.playModule = this.playModule, this.initAdvance(), this.streamCommon = new qa(r3, n3, t4, s3), this.initStreamCDN(), this.initAudioMix(), this.pn.appConfig = this.rtm.getAppConfig(), this.init();
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "logger", { get: function() {
              return this.an;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "stateCenter", { get: function() {
              return this.pn;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "streamCenter", { get: function() {
              return this.gn;
            }, enumerable: false, configurable: true }), t3.prototype.init = function() {
              var t4 = this;
              this.bindWindowListener(), this.bindRTMListener(), this.bindStreamCenterHandler(), this.bindEngineDestroyListener(), this.bindListener("_engineConfigUpdate", function(i3) {
                isNaN(i3.choirRole) || t4.updatePreviewerVolumeFactor();
              });
            }, t3.prototype.initAudioMix = function() {
            }, t3.prototype.initAdvance = function() {
            }, t3.prototype.initStreamCDN = function() {
            }, t3.prototype.bindWindowListener = function() {
              var t4 = (0, Pe.$t)(), i3 = t4.match(/iPad/i) || t4.match(/iPhone/i) ? "pagehide" : "firefox" === this.pn.browser ? "beforeunload" : "unload";
              window.addEventListener("beforeunload", this.beforeunloadListener), window.addEventListener(i3, this.pagehideListener), window.addEventListener("message", this.messageListener), window.addEventListener("offline", this.offlineListener), window.addEventListener("online", this.onlineListener), G.VJ.addEventListener("visibilitychange", this.visibilitychangeListener), (0, Pe.nr)() && (window.addEventListener("pagehide", this.safariPagehideListener), window.addEventListener("pageshow", this.safariPageshowListener));
            }, t3.prototype.offWindowListner = function() {
              var t4 = (0, Pe.$t)(), i3 = t4.match(/iPad/i) || t4.match(/iPhone/i) ? "pagehide" : "firefox" === this.pn.browser ? "beforeunload" : "unload";
              window.removeEventListener("beforeunload", this.beforeunloadListener), window.removeEventListener(i3, this.pagehideListener), window.removeEventListener("message", this.messageListener), window.removeEventListener("offline", this.offlineListener), window.removeEventListener("online", this.onlineListener), G.VJ.removeEventListener("visibilitychange", this.visibilitychangeListener), (0, Pe.nr)() && (window.removeEventListener("pagehide", this.safariPagehideListener), window.removeEventListener("pageshow", this.safariPageshowListener));
            }, t3.prototype.bindEngineDestroyListener = function() {
              var t4 = this;
              this.pn.listenerList._engineDestroy.push(function() {
                t4.offWindowListner();
              });
            }, t3.prototype.bindRTMListener = function() {
              var t4 = this;
              this.rtm._on("_settingCanFetch", function(i3) {
                return Ba(t4, void 0, void 0, function() {
                  var t5, n3, e3;
                  return Ua(this, function(r3) {
                    return this.an.info("zc.scf stream config " + JSON.stringify(i3).length), i3 && (this.pn.settingConfig.setSetting(i3.setting), (null === (n3 = i3.setting) || void 0 === n3 ? void 0 : n3.open_mini_sdp) && (t5 = this.pn.settingConfig.getSetting("open_mini_sdp"), null === (e3 = this.gn) || void 0 === e3 || e3.initMiniSdpWorker(t5))), [2];
                  });
                });
              }), this.rtm._on("_appConfigRsp", function() {
                t4.an.info("zc.acr call ");
                var i3 = !t4.pn.appConfig;
                t4.pn.appConfig = t4.rtm.getAppConfig(), t4.an.info("zc.acr appConfig ".concat(JSON.stringify(t4.pn.appConfig))), i3 && (t4.gn.reConnectSignals(), t4.publishModule.startWaitPublish(), t4.playModule.startWaitPlay());
              }), this.rtm._on("_netAppConfigRsp", function(i3) {
                t4.pn.netAppConfig = i3, t4.pn.supportBg = t4.checkBackgroundCapacity();
              }), this.rtm._on("_roomLogin", function(i3, n3) {
                var e3;
                t4.pn.appid = t4.rtm.getAppID(), t4.pn.idName = t4.rtm.getUserID(), t4.pn.nickName = t4.rtm.getUserName(), t4.pn.testEnvironment = t4.rtm.isTestEnvironment(), t4.pn.isMultiRoom = t4.rtm.getMultiRoom(), t4.gn.setSessionInfo(t4.pn.appid, t4.pn.idName, t4.pn.testEnvironment);
                var r3 = t4.pn.getRoomByRoomID(i3);
                if (!r3) {
                  var s3 = new Po(t4.an, t4.pn, t4.rtm, t4.gn, i3);
                  t4.bindStreamHandler(s3), t4.pn.roomList.push(r3 = { roomID: i3, streamHandler: s3, sessionID: "", roomSessionID: "", token: n3, isResetRoom: false, streamList: [], streamInfoList: [], dataChannelManager: null });
                  var o2 = t4.pn.au("connect_media_in_advance", true), u2 = t4.pn.au("connect_media_in_advance");
                  (null !== (e3 = null != o2 ? o2 : t4.pn.engineConfig.connectMediaServerInAdvance) && void 0 !== e3 ? e3 : u2) && t4.gn.connectWebRTCCenterServer(true, true, i3, n3);
                }
              }), this.rtm._on("roomLoginResponse", function(i3) {
                return Ba(t4, void 0, void 0, function() {
                  var t5, n3, e3, r3, s3, o2;
                  return Ua(this, function(u2) {
                    return this.an.info("zc.rlr call " + JSON.stringify(i3)), t5 = i3.header.room_id || i3.body.room_id, this.pn.appConfig = this.rtm.getAppConfig(), n3 = this.rtm.getToken(t5), e3 = this.rtm.getSessionId(t5), r3 = this.rtm.getRoomSessionID(t5), (s3 = this.pn.getRoomByRoomID(t5)) || (o2 = new Po(this.an, this.pn, this.rtm, this.gn, t5), this.bindStreamHandler(o2), this.pn.roomList.push(s3 = { roomID: t5, streamHandler: o2, sessionID: e3, roomSessionID: r3, token: n3, isResetRoom: false, streamList: [], streamInfoList: [], dataChannelManager: null })), s3.sessionID = e3, s3.roomSessionID = r3, 1 === i3.body.stream_fetch_flag ? (this.an.info("zc.rlr stream fetch " + t5), s3.streamHandler.room = s3, s3.streamHandler.fetchStreamList(), [2]) : (s3.streamHandler.handleStreamStart(i3, s3), this.gn.checkStreamReport(), this.an.info("zc.rlr end " + t5), [2]);
                  });
                });
              }), this.rtm._on("HBResponse", function(i3, n3) {
                var e3, r3 = null === (e3 = null == i3 ? void 0 : i3.header) || void 0 === e3 ? void 0 : e3.room_id, s3 = t4.pn.getRoomByRoomID(r3 || n3);
                null == s3 || s3.streamHandler.patchStreamList(i3);
              }), this.rtm._on("_roomStateUpdate", function(i3, n3, e3, r3, s3, o2) {
                if ("CONNECTED" === n3 && t4.gn.billingTimer.startChargeInfosUpload(), "DISCONNECTED" == n3) {
                  t4.an.info("zc.rsu " + i3 + " disconnected " + (e3 ? e3 + " " : "") + (r3 || "")), t4.gn.billingTimer.stopChargeInfosUpload();
                  var u2 = t4.pn.getRoomByRoomID(i3);
                  if (u2) {
                    var a2 = t4.pn.roomList.findIndex(function(t5) {
                      return t5.roomID == i3;
                    });
                    u2.isResetRoom = true, u2.streamHandler.reset(), u2.dataChannelManager && t4.zegoWebRtc.destroyRealTimeSequentialDataManager(u2.dataChannelManager), o2 || t4.gn.reset(i3, e3), t4.pn.roomList.splice(a2, 1);
                  }
                  if (o2 && Object.keys(t4.streamCenter.playerList).length > 0)
                    return;
                  t4.gn.disconnectAllSignal();
                } else
                  t4.an.info("zc.rsu " + i3 + " state: " + n3);
              }), this.rtm._on("_tokenRenewed", function(i3, n3) {
                t4.an.info("zc.tr roomID:" + n3), t4.an.remoteReport("zc.tr token:" + i3);
                var e3 = t4.pn.getRoomByRoomID(n3);
                e3 && (e3.token = i3);
              }), this.rtm._on("_stopStream", function(i3, n3) {
                i3.forEach(function(i4) {
                  t4.publishModule.stopPublishingStream(i4, n3);
                });
              }), this.rtm._on("_userTransUpdate", function(i3, n3, e3) {
                var r3 = t4.pn.getRoomByRoomID(i3);
                r3 ? "pushstatus" === n3 || "mixpushstatus" === n3 && r3.streamHandler.getMixStreamStatus(e3) : t4.an.error(Co.KY4 + " room no found");
              }), this.rtm._on("_uaHeartBeatTimeout", function() {
                var i3;
                t4.an.info("zc.ohbto rtc in use: " + t4.streamCenter.useingUdp), t4.streamCenter.useingUdp || null === (i3 = t4.rtm.netAgent) || void 0 === i3 || i3.reconnectUA();
              }), this.rtm.liveRoomHandler && (this.rtm.liveRoomHandler.handlePushStreamMsg = function(i3) {
                i3.body.stream_cmd = i3.header.sub_cmd, i3.body.stream_info = i3.body.stream_info_list, delete i3.body.stream_info_list, t4.handlePushStreamMsg(i3);
              });
            }, t3.prototype.handlePushStreamMsg = function(t4) {
              var i3, n3 = (null === (i3 = null == t4 ? void 0 : t4.header) || void 0 === i3 ? void 0 : i3.room_id) || "", r3 = this.pn.getRoomByRoomID(n3), s3 = this.rtm.getMsgSpan(L.MJ.event, n3);
              if (!r3)
                return this.cr.setError(s3, L.MJ.error.Le), void this.an.error(Co.kc8 + " room no found");
              var o2 = "";
              switch (t4.body.stream_cmd) {
                case e2.EN.added:
                  o2 = "add";
                  break;
                case e2.EN.deleted:
                  o2 = "delete";
                  break;
                case e2.EN.updated:
                  o2 = "update";
              }
              var u2 = t4.body.stream_info.map(function(t5) {
                return { stream_id: t5.stream_id, stream_extra_info: t5.extra_info, id_name: t5.id_name || t5.anchor_id_name };
              });
              s3.setAttributes({ stream_update_type: L.MJ.stream_update_type(o2), stream_seq: t4.body.stream_seq, stream_list: L.MJ.stream_list(u2) }), s3.end(), r3.streamHandler.handlePushStreamUpdateMsg(t4);
            }, t3.prototype.bindStreamCenterHandler = function() {
              var t4 = this;
              this.gn.onPlayStateUpdate = function(i3, n3, e3) {
                var r3, s3 = Uo(t4.an, n3);
                s3.info("zc.opsu.1 ".concat(i3));
                var o2 = t4.gn.playerList[n3];
                o2 && (0 != i3 && 1 != i3 || (o2.retryStreamHandler.streamRetryStartTime = 0, o2.uploadPlayEvent(e3)), [0, Fa.De.code].includes(null == e3 ? void 0 : e3.code) || (o2.latestPlayErrCode = e3.code), !o2.isProbe && o2.$h && (1 == i3 && e3 && o2.$h.setAttributes({ error: e3.code, message: e3.message }), (0 === i3 || 2 === i3 && 0 !== e3.code) && o2.reportMiniSdpInfos(), 0 !== i3 && ((0, G.lA)(o2.$h, { url: Ga.url(null === (r3 = o2.signal) || void 0 === r3 ? void 0 : r3.server), ip: Ga.ip(o2.ip), peer_id: Ga.peer_id(o2.peerID), source_type: Ga.source_type(o2.playMode), net_protocol: Ga.net_protocol(o2.netProtocol), signal_consume: Ga.signal_consume(o2.signalTime), tryidx: Ga.tryidx(o2.tryidx) }), o2.$h = void 0)));
                var u2 = Date.now();
                if (0 == i3 ? (o2.pulledTimeStamp = u2, o2.updateCDNValidTime()) : 1 == i3 && o2 && (o2.endPlayingSpan({ stop_reason: o2.stopReason }), o2.stopReason = ""), 1 === i3 && t4.gn.playErrorCallBackList[n3]) {
                  s3.info("zc.opsu.1 connect changed");
                  var a2 = e3 && (e3.code == Fa.De.code ? 0 : e3.code);
                  t4.gn.playErrorCallBackList[n3]({ errorCode: a2 || 0, extendedData: a2 ? e3.message : "" }), delete t4.gn.playErrorCallBackList[n3], s3.info("zc.opsu.1 stop play called by sdk"), t4.playModule.stopPlayingStream(n3, e3);
                } else {
                  0 === i3 ? 0 == o2.firstPulledTimeStamp && (o2.firstPulledTimeStamp = u2) : o2 && o2.pulledTimeStamp && o2.updateValidTime(e3);
                  var c2 = function(t5) {
                    return 0 == t5 || 1 == t5 ? 0 == t5 ? "PLAYING" : "NO_PLAY" : "PLAY_REQUESTING";
                  }(i3), h2 = 1 === i3 || (null == o2 ? void 0 : o2.updateCBState({ state: c2, code: e3.code }));
                  e3.code === Fa.De.code && (e3 = { code: 0, message: "" }), h2 && t4.pn.actionListener("playerStateUpdate", { state: c2, streamID: n3, errorCode: e3 && e3.code, extendedData: e3 && e3.message });
                }
              }, this.gn.onPublishStateUpdate = function(i3, n3, e3) {
                t4.onPublishStateUpdateHandle(i3, n3, e3);
              }, this.gn.onPublishQualityUpdate = function(i3, n3) {
                t4.pn.actionListener("publishQualityUpdate", i3, n3);
              }, this.gn.onPlayQualityUpdate = function(i3, n3) {
                t4.pn.actionListener("playQualityUpdate", i3, n3);
              }, this.gn.onRemoteCameraStatusUpdate = function(i3, n3, r3) {
                var s3 = t4.cr.createSpan(e2.t0.H, { key: Ja, par: i3 }, { key: "" }, L.We.event);
                s3.setAttributes({ stream_id: L.We.stream_id(i3), camera_status: L.We.camera_status(n3), status_code: L.We.status_code(r3) }), s3.end(), t4.pn.actionListener("remoteCameraStatusUpdate", i3, n3), t4.pn.actionListener("_remoteCameraStatusUpdate", i3, r3);
              }, this.gn.onRemoteMicStatusUpdate = function(i3, n3, r3) {
                var s3 = t4.cr.createSpan(e2.t0.H, { key: Ja, par: i3 }, { key: "" }, L.ov.event);
                s3.setAttributes({ stream_id: L.ov.stream_id(i3), mic_status: L.ov.mic_status(n3), status_code: L.ov.status_code(r3) }), s3.end(), t4.pn.actionListener("remoteMicStatusUpdate", i3, n3), t4.pn.actionListener("_remoteMicStatusUpdate", i3, r3);
              }, this.gn.onSoundLevelUpdate = function(i3) {
                t4.pn.actionListener("soundLevelUpdate", i3);
              }, this.gn.onMicSoundLevelUpdate = function(i3) {
                t4.pn.actionListener("capturedSoundLevelUpdate", i3);
              };
            }, t3.prototype.bindStreamHandler = function(t4) {
              var i3 = this;
              t4.onStreamUpdated = function(t5, n3, e3) {
                var r3 = e3.map(function(t6) {
                  return { streamID: t6.streamID, user: t6.user, extraInfo: t6.extraInfo, urlsFLV: t6.urlFlv, urlsRTMP: t6.urlRtmp, urlsHLS: t6.urlHls, urlsHttpsFLV: t6.urlHttpsFlv, urlsHttpsHLS: t6.urlHttpsHls };
                }), s3 = {};
                if (0 === n3) {
                  var o2 = e3.map(function(t6) {
                    return { stream_id: t6.streamID, code: h[t6.closeType] && h[t6.closeType].code || 0, description: h[t6.closeType] && h[t6.closeType].description || "unknown" };
                  });
                  s3.stream_delete_reason = o2;
                }
                if (0 === n3 ? r3 = r3.filter(function(t6) {
                  var n4, e4 = !i3.pn.publishStreamList[t6.streamID];
                  return e4 && (null === (n4 = i3.streamCenter.playerList[t6.streamID]) || void 0 === n4 || n4.setStreamUpdate(0)), e4;
                }) : 1 === n3 && r3.forEach(function(t6) {
                  var n4;
                  null === (n4 = i3.streamCenter.playerList[t6.streamID]) || void 0 === n4 || n4.setStreamUpdate(1);
                }), i3.updatePreviewerVolumeFactor(t5), r3.length > 0 && i3.pn.actionListener("roomStreamUpdate", t5, function(t6) {
                  return 0 == t6 ? "DELETE" : "ADD";
                }(n3), r3, Object.keys(s3).length > 0 ? JSON.stringify(s3) : ""), e3.length > 0 && i3.pn.actionListener("_streamUpdated", n3, e3), 1 === n3) {
                  var u2 = [];
                  r3.forEach(function(t6) {
                    t6.extraInfo && u2.push({ streamID: t6.streamID, user: t6.user, extraInfo: t6.extraInfo });
                  }), u2.length > 0 && i3.pn.actionListener("streamExtraInfoUpdate", t5, u2);
                }
              }, t4.onPublishStateUpdate = function(t5, n3, e3, r3) {
                var s3, o2, u2, a2, c2, h2, f2, l2, d2;
                i3.an.info("zb.opsu ".concat(t5, " ").concat(JSON.stringify(e3), " ").concat(JSON.stringify(r3), "}"), { streamid: n3 });
                var v2 = i3.gn.publisherList[n3], m2 = v2 && v2.publisher;
                if (m2) {
                  var p2 = v2.publisher.isRePublish ? L.fo : L.ch, g2 = L.ch;
                  0 != t5 && 1 != t5 || (v2.retryStreamHandler.streamRetryStartTime = 0, m2.uploadPublishEvent(e3)), [0, Ha.ce.code].includes(null == e3 ? void 0 : e3.code) || (m2.latestPublishErrCode = e3.code), 2 === t5 && 0 !== e3.code && m2.reportMiniSdpInfos(), 0 !== t5 && i3.cr.spanEnd({ key: p2.event, par: n3 }, { error: e3.code, message: e3.message, url: g2.url(null === (o2 = null === (s3 = null == v2 ? void 0 : v2.publisher) || void 0 === s3 ? void 0 : s3.signal) || void 0 === o2 ? void 0 : o2.server), ip: g2.ip(null === (u2 = null == v2 ? void 0 : v2.publisher) || void 0 === u2 ? void 0 : u2.ip), peer_id: g2.peer_id(null === (a2 = null == v2 ? void 0 : v2.publisher) || void 0 === a2 ? void 0 : a2.peerID), source_type: g2.source_type("rtc"), net_protocol: g2.net_protocol(null === (c2 = null == v2 ? void 0 : v2.publisher) || void 0 === c2 ? void 0 : c2.netProtocol) });
                }
                var b2 = L.Jv, _2 = Date.now();
                if (m2) {
                  var y2 = m2.publishedTimeStamp;
                  0 != t5 && y2 && (e3 && e3.code && e3.code !== Ha.ce.code && m2.errorTimes++, m2.validPublishedTime = _2 - y2, m2.publishedTimeStamp = 0), 0 == t5 ? (0 == m2.firstPublishedTimeStamp && (m2.firstPublishedTimeStamp = _2), m2.publishedTimeStamp = _2) : 1 == t5 && (1012 === e3.code ? (i3.gn.stopPublishingStream(n3, e3), e3 = La(La({}, e3), { code: re.pn5.code })) : 2002 === e3.code && (i3.gn.stopPublishingStream(n3, e3), e3.code = re.HED.code), m2.uploadRTCPublishStats(), i3.cr.spanEnd({ key: b2.event, par: n3 }, { tryidx: b2.tryidx(m2.rtcPublishCount), url: b2.url(null === (h2 = null == m2 ? void 0 : m2.signal) || void 0 === h2 ? void 0 : h2.server), ip: b2.ip(null == m2 ? void 0 : m2.ip), dispatch_external_ip: b2.dispatch_external_ip(i3.pn.clientIP), room_id: b2.room_id(null === (f2 = null == v2 ? void 0 : v2.room) || void 0 === f2 ? void 0 : f2.roomID), room_sid_string: b2.room_sid_string(null === (l2 = null == v2 ? void 0 : v2.room) || void 0 === l2 ? void 0 : l2.roomSessionID), resource_type: b2.resource_type("rtc"), protocol: b2.protocol("webrtc"), net_protocol: b2.net_protocol(m2.netProtocol), stop_reason: b2.stop_reason(m2.stopReason), error: e3.code, message: e3.message }), v2 && (m2.stopReason = ""));
                }
                e3.code === Ha.ce.code && (e3 = { code: 0, message: "" });
                var w2 = function(t6) {
                  return 0 == t6 || 1 == t6 ? 0 == t6 ? "PUBLISHING" : "NO_PUBLISH" : "PUBLISH_REQUESTING";
                }(t5);
                (1 === t5 || (null === (d2 = null == v2 ? void 0 : v2.publisher) || void 0 === d2 ? void 0 : d2.updateCBState({ state: w2, code: e3.code }))) && i3.pn.actionListener("publisherStateUpdate", { state: w2, streamID: n3, errorCode: e3.code, extendedData: r3 || e3.message });
              }, t4.onStreamExtraInfoUpdated = function(t5, n3) {
                var e3 = n3.map(function(t6) {
                  return { streamID: t6.streamID, user: t6.user, extraInfo: t6.extraInfo };
                });
                i3.pn.actionListener("streamExtraInfoUpdate", t5, e3);
              }, t4.onStreamAttrUpdated = function(t5, n3) {
                i3.playModule && i3.playModule.setPlayerListForbid(n3);
              };
            }, t3.prototype.updatePreviewerVolumeFactor = function(t4) {
              var i3 = this;
              if (this.gn.useCopyMusic && !isNaN(this.pn.engineConfig.choirRole)) {
                this.an.info("zc.rtc.upvf " + t4);
                var n3 = [];
                if (t4) {
                  var e3 = this.pn.getRoomByRoomID(t4);
                  e3 && n3.push(e3);
                } else
                  n3.push.apply(n3, this.pn.roomList);
                n3.forEach(function(t5) {
                  var n4 = Array.from(new Set(t5.streamList.map(function(t6) {
                    return t6.id_name;
                  })));
                  i3.gn.previewStreamList.forEach(function(t6) {
                    t6 && !t6.onlyPreview && t6.setVolumeFactorByUserCount(n4.length);
                  });
                });
              }
            }, t3.prototype.screenStreamFrom = function(t4, i3, n3) {
              var e3 = this, r3 = {};
              r3.audio = { mandatory: { chromeMediaSource: "desktop", chromeMediaSourceId: t4 } }, r3.video = { mandatory: { chromeMediaSource: "desktop", chromeMediaSourceId: t4, maxWidth: window.screen.width, maxHeight: window.screen.height } }, !i3 && (r3.audio = false), navigator.mediaDevices.getUserMedia(r3).then(function(t5) {
                t5.getTracks().forEach(function(t6) {
                  return mt(t6, e3.an, "zc.st.ssf");
                }), n3(true, t5);
              }).catch(function(t5) {
                n3(false, null, t5);
              });
            }, t3.prototype.onPublishStateUpdateHandle = function(t4, i3, n3) {
              var r3 = this, s3 = Uo(this.an, i3);
              s3.info("zc.opsuh.0 call");
              var o2 = this.gn.publisherList[i3], u2 = o2.room;
              if (u2)
                if (0 == t4) {
                  var a2 = this.pn.publishStreamList[i3];
                  if (a2) {
                    var c2 = !u2.streamList.find(function(t5) {
                      return t5.stream_id == i3 && (t5.anchor_id_name == r3.pn.idName || t5.id_name == r3.pn.idName || t5.user_id === r3.pn.idName);
                    });
                    if (s3.info("zc.opsuh.0 room stream " + c2), [e2.T_.tryPublish, e2.T_.retryPublish].includes(a2.state) && c2)
                      a2.state = e2.T_.update_info, u2.streamHandler.updateStreamInfo(i3, e2.NP.liveBegin, a2.extra_info, function(t5) {
                      }, void 0, o2.publisher.getStreamAddOptions());
                    else
                      s3.info("zc.opsuh.0 stream update"), a2.state = e2.T_.publishing, this.WebrtcOnPublishStateUpdateHandle(t4, i3, n3);
                  }
                } else
                  u2.streamHandler.onPublishStateUpdate(t4, i3, n3), 1 == t4 && (s3.info("zc.opsuh.0 stop publish called by sdk"), this.publishModule.stopPublishingStream(i3, n3));
              else
                s3.error("zc.opsuh.0 " + G.fT);
            }, t3.prototype.WebrtcOnPublishStateUpdateHandle = function(t4, i3, n3) {
              if (this.pn.publishStreamList[i3].state == e2.T_.publishing) {
                var r3 = this.gn.getRoomByStreamID(i3);
                r3 && r3.streamHandler.onPublishStateUpdate(t4, i3, n3);
              }
            }, t3.prototype.bindListener = function(t4, i3) {
              return this.pn.addListener(t4, i3);
            }, t3.prototype.deleteListener = function(t4, i3) {
              return this.pn.deleteListener(t4, i3);
            }, t3.prototype.checkBackgroundCapacity = function() {
              if (this.pn.netAppConfig) {
                var t4 = this.pn.netAppConfig.media_config.publish_config.object_segmentation_platform;
                return !!t4 && !!_t(t4, 0);
              }
              return true;
            }, t3;
          }(), Qa = function() {
            function t3(t4, i3) {
              void 0 === i3 && (i3 = false), this.view = t4, this.isH265 = i3, this.offset = 0, this.current_start_code_size = 0, this.current_nalu_start = 0, this.current_nalu_size = 0, this.start_code_size = 0, this.nalu_start = 0, this.left_size = 0, this.nalu_size = 0, this.left_size = t4.byteLength;
            }
            return t3.prototype.FindStartCode = function() {
              var t4 = this.view.byteLength - this.offset;
              for (this.current_start_code_size = 0, this.current_nalu_start = -1; t4 >= 3; ) {
                if (0 == this.view.getUint8(this.offset) && 0 == this.view.getUint8(this.offset + 1) && 1 == this.view.getUint8(this.offset + 2))
                  return this.current_start_code_size = 3, this.current_nalu_start = this.offset, this.offset - 1 >= 0 && 0 == this.view.getUint8(this.offset - 1) && (++this.current_start_code_size, --this.current_nalu_start), this.offset += 3, true;
                --t4, ++this.offset;
              }
              return false;
            }, t3.prototype.FindNalu = function() {
              return this.start_code_size = 0, this.nalu_start = 0, this.nalu_size = 0, !(this.offset >= this.view.byteLength) && (!!this.FindStartCode() && (this.start_code_size = this.current_start_code_size, this.nalu_start = this.current_nalu_start, true));
            }, t3.prototype.NextNalu = function(t4) {
              if (this.start_code_size = 0, this.nalu_start = 0, this.nalu_size = 0, this.offset >= this.view.byteLength)
                return false;
              if (!this.FindStartCode())
                return false;
              if (this.start_code_size = this.current_start_code_size, this.nalu_start = this.current_nalu_start, t4) {
                if (this.isH265) {
                  if (39 !== (126 & this.view.getUint8(this.nalu_start + this.start_code_size)) >> 1)
                    return true;
                } else if (6 != (31 & this.view.getUint8(this.nalu_start + this.start_code_size)))
                  return true;
              }
              return this.FindStartCode() ? (this.offset = this.current_nalu_start, this.nalu_size = this.current_nalu_start - this.nalu_start, true) : (this.nalu_size = this.view.byteLength - this.nalu_start, true);
            }, t3;
          }();
          function Ya(t3, i3, n3) {
            if (0 === t3)
              return "";
            var e3 = 1, r3 = "  Here are some explanations about the error code: ".concat(e3++, ". reason=").concat(t3, ": ").concat(function(t4) {
              switch (t4) {
                case Ta.PEER_CLOSE_REASON_NORMAL:
                  return "Client voluntarily exits.";
                case Ta.PEER_CLOSE_REASON_STATE_ERROR:
                  return "Status error; Reason: Repeatedly received offer/answer, etc.";
                case Ta.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED:
                  return "Refuse to push the stream; Reason: The client retweeted the stream and was kicked or the agent's pubstart timed out, etc.";
                case Ta.PEER_CLOSE_REASON_VRS_PLAY_DENIED:
                  return "Refuse to pull stream; Reason: may pull empty stream, etc., refer to 'err' error code for details.";
                case Ta.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH:
                  return "No matching audio codec; Reason: Client (Web) does not support OPUS, etc.";
                case Ta.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH:
                  return "No matching video codec; Reason: Client (Web) does not support h264, h265 and vp8 etc.";
                case Ta.PEER_CLOSE_REASON_SDP_INVALID:
                  return "SDP parsing error; Reason: SDP format error.";
                default:
                  return "unknown";
              }
            }(t3));
            return i3 && (r3 += " ".concat(e3++, ". action=").concat(i3, ": ").concat(function(t4) {
              switch (t4) {
                case Ca.DENIED_ACTION_STOP:
                  return "cancel pushing stream.";
                case Ca.DENIED_ACTION_RETRY_NEXT_IP:
                  return "Try the next ip, if there is no next ip, re-request the route.";
                case Ca.DENIED_ACTION_REDIRECT:
                  return "Redirect to the ip address specified by data.";
                case Ca.DENIED_ACTION_REDISPATCH:
                  return "re-request route.";
                case Ca.DENIED_ACTION_RETRY:
                  return "retry current gateway node.";
                default:
                  return "unknown";
              }
            }(i3))), n3 && (r3 += " ".concat(e3++, ". err=").concat(n3, ": ").concat(function(t4) {
              switch (t4) {
                case Aa.DENIED_ERROR_DISPATCH_FAILED:
                  return "media scheduling failed.";
                case Aa.DENIED_ERROR_EMPTY_PUBLISH_IPS:
                  return "empty publish ips error.";
                case Aa.DENIED_ERROR_EMPTY_PLAY_IPS:
                  return "empty play ips error.";
                case Aa.DENIED_ERROR_STREAM_NOT_EXSIT:
                  return "stream does not exist.";
                case Aa.DENIED_ERROR_APP_NOT_ONLINE:
                  return "APP has been removed.";
                case Aa.DENIED_ERROR_INVALID_PARAMETERS:
                  return "invalid parameter.";
                case Aa.DENIED_ERROR_NO_CLIENTIP_SET:
                  return "client ip is not set.";
                case Aa.DENIED_ERROR_PERMISSION_DENIED:
                  return "No permission, access denied.";
                case Aa.DENIED_ERROR_SET_STREAM_INFO_FAILED:
                  return "Failed to set stream information.";
                case Aa.DENIED_ERROR_INTERNAL_ERROR:
                  return "internal error / server busy.";
                case Aa.DENIED_ERROR_PUBLISH_FORBIDDEN:
                  return "Streaming is banned.";
                case Aa.DENIED_ERROR_NEW_PUBLISH:
                  return "new publish error.";
                case Aa.DENIED_ERROR_INNER_ERROR:
                  return "inner error.";
                case Aa.DENIED_ERROR_MANAGER_STOP:
                  return "manager stop error.";
                case Aa.DENIED_ERROR_PUBLISH_AUTH_FAILED:
                  return "Stream push authentication failed.";
                case Aa.DENIED_ERROR_PLAY_AUTH_FAILED:
                  return "Stream pull authentication failed.";
                case Aa.DENIED_ERROR_SERVER_STOP:
                  return "server stoped error.";
                case Aa.DENIED_ERROR_SESSION_ID:
                  return "session id error.";
                case Aa.DENIED_ERROR_MANAGER_TIMEOUT:
                  return "manager timeout.";
                case Aa.DENIED_ERROR_NEW_PUBLISH_SRC:
                  return "new publish src.";
                case Aa.DENIED_ERROR_PLAY_SESSION_LIMIT:
                  return "Pull session limit.";
                case Aa.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE:
                  return "disable ip port flexible.";
                case Aa.DENIED_ERROR_PACKET_ILLEGAL_TS:
                  return "packet illegal ts.";
                case Aa.DENIED_ERROR_PACKET_ILLEGAL_ADDR:
                  return "packet illegal address.";
                case Aa.DENIED_ERROR_PACKET_ILLEGAL_FORMAT:
                  return "packet illegal format.";
                case Aa.DENIED_ERROR_CHECK_ADDR_TIMEOUT:
                  return "Check address timed out.";
                case Aa.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE:
                  return "Check Address Illegal Signature.";
                case Aa.DENIED_ERROR_CHECK_ADDR_INCONSTANT:
                  return "Check for address changes.";
                case Aa.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT:
                  return "SDP negotiation timed out, check whether the SDP is sent successfully.";
                case Aa.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT:
                  return "Address negotiation timed out, check whether the Candidate is sent successfully.";
                case Aa.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED:
                  return "The connectivity check failed, probably due to firewall restrictions (protocol or port) that caused the network between the browser and the gateway to fail.";
                case Aa.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED:
                  return "The DTLS handshake fails, the verification of the certificate may fail, and the background checks whether the certificate has expired.";
                case Aa.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT:
                  return "The DTLS handshake timed out, this mainly due to network link packet loss and other situations that caused the timeout. Please check your network status and try again.";
                case Aa.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED:
                  return "Streaming encryption failed";
                case Aa.DENIED_ERROR_WEBRTC_HB_TIMEOUT:
                  return "The heartbeat timed out, this mainly due to network link packet loss and other conditions that caused the timeout. Please check your network status and try again.";
                case Aa.DENIED_ERROR_WEBRTC_CONNECTION_LOST:
                  return "The link is disconnected. In turn mode, if the turn link times out or has been released, the gateway will fail to send, and the gateway will think that the link has been lost.";
                case Aa.DENIED_ERROR_WEBRTC_NEW_SRC:
                  return "After the stream pushing end pushes the stream again, the stream pulling end will receive this message.";
                case Aa.DENIED_ERROR_WEBRTC_CODEC_NOT_MATCH:
                  return "The client does not support the codec used by the stream source";
                case Aa.DENIED_ERROR_WEBRTC_CODEC_SWITCH:
                  return "The streaming source switched the encoding format while clients were still pulling the stream";
                default:
                  return "unknown";
              }
            }(n3))), r3;
          }
          !function(t3) {
            t3[t3.PEER_CLOSE_REASON_NORMAL = 0] = "PEER_CLOSE_REASON_NORMAL", t3[t3.PEER_CLOSE_REASON_STATE_ERROR = 5] = "PEER_CLOSE_REASON_STATE_ERROR", t3[t3.PEER_CLOSE_REASON_VRS_PUBLISH_DENIED = 15] = "PEER_CLOSE_REASON_VRS_PUBLISH_DENIED", t3[t3.PEER_CLOSE_REASON_VRS_PLAY_DENIED = 18] = "PEER_CLOSE_REASON_VRS_PLAY_DENIED", t3[t3.PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH = 21] = "PEER_CLOSE_REASON_AUDIO_CODEC_NOT_MATCH", t3[t3.PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH = 22] = "PEER_CLOSE_REASON_VIDEO_CODEC_NOT_MATCH", t3[t3.PEER_CLOSE_REASON_SDP_INVALID = 23] = "PEER_CLOSE_REASON_SDP_INVALID";
          }(Ta || (Ta = {})), function(t3) {
            t3[t3.DENIED_ACTION_STOP = 1] = "DENIED_ACTION_STOP", t3[t3.DENIED_ACTION_RETRY_NEXT_IP = 2] = "DENIED_ACTION_RETRY_NEXT_IP", t3[t3.DENIED_ACTION_REDIRECT = 3] = "DENIED_ACTION_REDIRECT", t3[t3.DENIED_ACTION_REDISPATCH = 4] = "DENIED_ACTION_REDISPATCH", t3[t3.DENIED_ACTION_RETRY = 5] = "DENIED_ACTION_RETRY";
          }(Ca || (Ca = {})), function(t3) {
            t3[t3.DENIED_ERROR_DISPATCH_FAILED = 1001] = "DENIED_ERROR_DISPATCH_FAILED", t3[t3.DENIED_ERROR_EMPTY_PUBLISH_IPS = 1002] = "DENIED_ERROR_EMPTY_PUBLISH_IPS", t3[t3.DENIED_ERROR_EMPTY_PLAY_IPS = 1003] = "DENIED_ERROR_EMPTY_PLAY_IPS", t3[t3.DENIED_ERROR_STREAM_NOT_EXSIT = 1004] = "DENIED_ERROR_STREAM_NOT_EXSIT", t3[t3.DENIED_ERROR_APP_NOT_ONLINE = 1005] = "DENIED_ERROR_APP_NOT_ONLINE", t3[t3.DENIED_ERROR_INVALID_PARAMETERS = 1006] = "DENIED_ERROR_INVALID_PARAMETERS", t3[t3.DENIED_ERROR_NO_CLIENTIP_SET = 1007] = "DENIED_ERROR_NO_CLIENTIP_SET", t3[t3.DENIED_ERROR_PERMISSION_DENIED = 1008] = "DENIED_ERROR_PERMISSION_DENIED", t3[t3.DENIED_ERROR_SET_STREAM_INFO_FAILED = 1009] = "DENIED_ERROR_SET_STREAM_INFO_FAILED", t3[t3.DENIED_ERROR_INTERNAL_ERROR = 1010] = "DENIED_ERROR_INTERNAL_ERROR", t3[t3.DENIED_ERROR_PUBLISH_FORBIDDEN = 1011] = "DENIED_ERROR_PUBLISH_FORBIDDEN", t3[t3.DENIED_ERROR_NEW_PUBLISH = 1012] = "DENIED_ERROR_NEW_PUBLISH", t3[t3.DENIED_ERROR_INNER_ERROR = 1013] = "DENIED_ERROR_INNER_ERROR", t3[t3.DENIED_ERROR_MANAGER_STOP = 1014] = "DENIED_ERROR_MANAGER_STOP", t3[t3.DENIED_ERROR_PUBLISH_AUTH_FAILED = 1015] = "DENIED_ERROR_PUBLISH_AUTH_FAILED", t3[t3.DENIED_ERROR_PLAY_AUTH_FAILED = 1016] = "DENIED_ERROR_PLAY_AUTH_FAILED", t3[t3.DENIED_ERROR_SERVER_STOP = 2001] = "DENIED_ERROR_SERVER_STOP", t3[t3.DENIED_ERROR_SESSION_ID = 2002] = "DENIED_ERROR_SESSION_ID", t3[t3.DENIED_ERROR_MANAGER_TIMEOUT = 2003] = "DENIED_ERROR_MANAGER_TIMEOUT", t3[t3.DENIED_ERROR_NEW_PUBLISH_SRC = 2004] = "DENIED_ERROR_NEW_PUBLISH_SRC", t3[t3.DENIED_ERROR_PLAY_SESSION_LIMIT = 2005] = "DENIED_ERROR_PLAY_SESSION_LIMIT", t3[t3.DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE = 2006] = "DENIED_ERROR_DISABLE_IP_PORT_FLEXIBLE", t3[t3.DENIED_ERROR_PACKET_ILLEGAL_TS = 2007] = "DENIED_ERROR_PACKET_ILLEGAL_TS", t3[t3.DENIED_ERROR_PACKET_ILLEGAL_ADDR = 2008] = "DENIED_ERROR_PACKET_ILLEGAL_ADDR", t3[t3.DENIED_ERROR_PACKET_ILLEGAL_FORMAT = 2009] = "DENIED_ERROR_PACKET_ILLEGAL_FORMAT", t3[t3.DENIED_ERROR_CHECK_ADDR_TIMEOUT = 2010] = "DENIED_ERROR_CHECK_ADDR_TIMEOUT", t3[t3.DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE = 2011] = "DENIED_ERROR_CHECK_ADDR_ILLEGAL_SIGNATURE", t3[t3.DENIED_ERROR_CHECK_ADDR_INCONSTANT = 2012] = "DENIED_ERROR_CHECK_ADDR_INCONSTANT", t3[t3.DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT = 3e3] = "DENIED_ERROR_WEBRTC_NEGOTIATE_TIMEOUT", t3[t3.DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT = 3001] = "DENIED_ERROR_WEBRTC_CANDIDATE_TIMEOUT", t3[t3.DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED = 3002] = "DENIED_ERROR_WEBRTC_CONNECTIVITY_CHECK_FAILED", t3[t3.DENIED_ERROR_WEBRTC_DTLS_HS_FAILED = 3003] = "DENIED_ERROR_WEBRTC_DTLS_HS_FAILED", t3[t3.DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT = 3004] = "DENIED_ERROR_WEBRTC_DTLS_HS_TIMEOUT", t3[t3.DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED = 3005] = "DENIED_ERROR_WEBRTC_SRTP_PROTECT_FAILED", t3[t3.DENIED_ERROR_WEBRTC_HB_TIMEOUT = 3006] = "DENIED_ERROR_WEBRTC_HB_TIMEOUT", t3[t3.DENIED_ERROR_WEBRTC_CONNECTION_LOST = 3007] = "DENIED_ERROR_WEBRTC_CONNECTION_LOST", t3[t3.DENIED_ERROR_WEBRTC_NEW_SRC = 3008] = "DENIED_ERROR_WEBRTC_NEW_SRC", t3[t3.DENIED_ERROR_WEBRTC_CODEC_NOT_MATCH = 3009] = "DENIED_ERROR_WEBRTC_CODEC_NOT_MATCH", t3[t3.DENIED_ERROR_WEBRTC_CODEC_SWITCH = 3010] = "DENIED_ERROR_WEBRTC_CODEC_SWITCH";
          }(Aa || (Aa = {}));
          var Ka, Za = { FPS: { code: v.captureFpsToLow, message: "The video capture frame rate is too low." }, VOLUME: { code: v.captureVolumeToLow, message: "The capture volume is too low." } }, Xa = { V_BITRATE: { code: v.sendVideoBitrateToLow, message: "The video bit rate sent is too low." }, FPS: { code: v.sendFpsToLow, message: "The video frame rate sent is too low." }, A_BITRATE: { code: v.sendAudioBitrateToLow, message: "The audio bit rate sent is too low." } }, Wa = { A_VOLUME: { code: v.receiveVolumeToLow, message: "The volume of audio received is too low." }, A_DECODE: { code: v.receiveAudioDecodedFail, message: "The received audio failed to be decoded." }, V_DECODE: { code: v.receiveVideoDecodedFail, message: "The received video failed to be decoded." }, V_DECODED_FPS: { code: v.receiveVideoFpsDecodedToLow, message: "Received video decode frame rate is too low." }, RENDER_VIDEO_FPS: { code: v.renderVideoFpsToLow, message: "The rendered video frame rate is too low." } }, $a = { FPS: { code: v.captureFpsNormal, message: "The video capture frame rate is normal." }, VOLUME: { code: v.captureVolumeNormal, message: "The capture volume is normal." } }, tc = { V_BITRATE: { code: v.sendVideoBitrateNormal, message: "The video bit rate sent is normal." }, FPS: { code: v.sendFpsNormal, message: "The video frame rate sent is normal." }, A_BITRATE: { code: v.sendAudioBitrateNormal, message: "The audio bit rate sent is normal." } }, ic = { A_VOLUME: { code: v.receiveVolumeNormal, message: "The volume of audio received is normal." }, A_DECODE: { code: v.receiveAudioDecodedNormal, message: "The received audio successed to be decoded." }, V_DECODE: { code: v.receiveVideoDecodedNormal, message: "The received video successed to be decoded." }, V_DECODED_FPS: { code: v.receiveVideoFpsDecodedNormal, message: "Received video decode frame rate is normal." }, RENDER_VIDEO_FPS: { code: v.renderVideoFpsNormal, message: "The rendered video frame rate is normal." } }, nc = function() {
            function t3(t4, i3, n3, e3) {
              this.pn = t4, this.parentEvent = e3, this.results = {}, this.preTime = Date.now(), this.preTotalFps = 0, this.preIsNormal = {}, this.an = i3, this.streamId = n3, this.initPreIsNormal(Za), this.initPreIsNormal(Xa), this.initPreIsNormal(Wa);
            }
            return t3.prototype.initPreIsNormal = function(t4) {
              for (var i3 in t4) {
                this.preIsNormal[t4[i3].code] = true;
              }
            }, t3.prototype.recordData = function(t4, i3, n3) {
              var e3 = t4.code, r3 = this.results[e3] || [];
              if (r3.push(n3), r3.length >= 5) {
                var s3 = r3.includes(false);
                this.preIsNormal[e3] && !s3 && (this.uploadEventData(t4), this.pn.actionListener("exceptionUpdate", this.streamId, t4)), !this.preIsNormal[e3] && s3 && (this.uploadEventData(i3), this.pn.actionListener("exceptionUpdate", this.streamId, i3)), this.preIsNormal[e3] = s3, r3 = [];
              }
              this.results[e3] = r3;
            }, t3.prototype.uploadEventData = function(t4) {
              var i3 = this.pn.reporter.createSpan(n2.t0.I, { key: this.parentEvent, par: this.streamId }, { key: "" }, L.bs.event);
              i3.setAttributes({ code: L.bs.code(t4.code), message: L.bs.message(t4.message) }), i3.end();
            }, t3.prototype.checkRemoteStats = function(t4, i3) {
              this.recordData(Wa.A_VOLUME, ic.A_VOLUME, this.recvAudioVolume(t4)), this.recordData(Wa.A_DECODE, ic.A_DECODE, this.recvAudioDecode(t4)), this.recordData(Wa.V_DECODE, ic.V_DECODE, this.recvVideoDecode(t4)), this.recordData(Wa.V_DECODED_FPS, ic.V_DECODED_FPS, this.recvVideoDecodedFrameRate(t4)), this.recordData(Wa.RENDER_VIDEO_FPS, ic.RENDER_VIDEO_FPS, this.renderVideoFrameRate(t4, i3));
            }, t3.prototype.checkLocalStats = function(t4) {
              this.recordData(Za.FPS, $a.FPS, this.captureVideoFrameRate(t4)), this.recordData(Xa.FPS, tc.FPS, this.sendVideoFrameRate(t4)), this.recordData(Za.VOLUME, $a.VOLUME, this.sendAudioVolume(t4)), this.recordData(Xa.V_BITRATE, tc.V_BITRATE, this.sendVideoBitrate(t4)), this.recordData(Xa.A_BITRATE, tc.A_BITRATE, this.sendAudioBitrate(t4));
            }, t3.prototype.sendVideoBitrate = function(t4) {
              return !("1" === t4.videoMuteState || t4.videoQuality > 2) && 0 === t4.videoBitrate;
            }, t3.prototype.sendVideoFrameRate = function(t4) {
              var i3 = t4.videoTransferFPS, n3 = t4.videoFPS;
              return "1" !== t4.videoMuteState && (n3 >= 10 && i3 < 5 || n3 < 10 && n3 >= 5 && i3 <= 1);
            }, t3.prototype.captureVideoFrameRate = function(t4) {
              var i3 = t4.videoTargetFPS, n3 = t4.videoFPS;
              return "1" !== t4.videoMuteState && (i3 >= 10 && n3 < 5 || i3 < 10 && i3 >= 5 && n3 <= 1);
            }, t3.prototype.sendAudioVolume = function(t4) {
              return "1" !== t4.audioMuteState && Math.floor(32767 * t4.audioLevel) < Math.floor(327.67);
            }, t3.prototype.sendAudioBitrate = function(t4) {
              var i3 = t4.audioBitrate;
              return !("1" === t4.audioMuteState || t4.audioQuality > 2) && (0 === i3 || t4.audioTargetBitrate >= 48 && i3 < 22);
            }, t3.prototype.recvAudioVolume = function(t4) {
              return !("1" === t4.audioMuteState || t4.audioQuality > 2) && (t4.audioBitrate > 0 && Math.floor(32767 * t4.audioLevel) < Math.floor(327.67));
            }, t3.prototype.recvAudioDecode = function(t4) {
              return !("1" === t4.audioMuteState || t4.audioQuality > 2) && (t4.audioBitrate > 0 && 0 === t4.audioFPS);
            }, t3.prototype.recvVideoDecode = function(t4) {
              return !("1" === t4.videoMuteState || t4.videoQuality > 2) && (t4.videoBitrate > 0 && 0 === t4.videoTransferFPS);
            }, t3.prototype.recvVideoDecodedFrameRate = function(t4) {
              var i3 = t4.videoFPS, n3 = t4.videoTransferFPS;
              return "1" !== t4.videoMuteState && (i3 >= 10 && n3 < 5 || i3 < 10 && i3 >= 5 && n3 <= 1);
            }, t3.prototype.renderVideoFrameRate = function(t4, i3) {
              var n3 = t4.videoTransferFPS, e3 = t4.videoRenderFPS;
              return "1" !== t4.videoMuteState && (-1 != e3 && (n3 > 10 && e3 < 5 || n3 <= 10 && n3 >= 5 && e3 <= 1));
            }, t3;
          }(), ec = function() {
            return ec = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, ec.apply(this, arguments);
          }, rc = function() {
            function t3(t4, i3, n3, e3, r3, o2, u2) {
              this.tf = t4, this.if = i3, this.nf = n3, this.Xu = r3, this.pn = o2, this.gn = u2, this.ef = null, this.rf = 1e3, this.sf = null, this.uf = null, this.af = 0, this.eo = 0, this.cf = {}, this.hf = 0, this.ff = 0, this.probeState = s2.probed, this.publishStat = {}, this.Wh = { video: { videoBitrate: 0, videoFPS: 0, videoTransferFPS: 0, frameHeight: 0, frameWidth: 0, muteState: "1", videoQuality: -1, videoPacketsLost: 0, videoPacketsLostRate: 0, googCodecName: "" }, audio: { audioBitrate: 0, audioCodec: "", muteState: "1", audioQuality: -1, audioFPS: 0, audioPacketsLost: 0, audioPacketsLostRate: 0, googCodecName: "" } }, this.lf = 0, this.df = "udp", this.vf = {}, this.mf = "", this.pf = "", this.bf = 0, this._f = 0, this.yf = void 0, this.connectIPStack = -1, this.wf = new nc(this.pn, e3, this.streamId, L.Og.event);
            }
            return Object.defineProperty(t3.prototype, "streamId", { get: function() {
              return this.nf.streamId;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sessionId", { get: function() {
              return this.nf.sessionId;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "peerID", { get: function() {
              return this.nf.peerID;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "xu", { get: function() {
              return this.nf.localStream;
            }, enumerable: false, configurable: true }), t3.prototype.setPublishQualityTimer = function() {
              var t4 = this;
              null == this.ef && (this.nf.info(Co.Ifp + " called ".concat(this.rf, " ").concat(this.tf, " ").concat(this.if)), (this.ef || this.sf || this.uf) && this.clearPublishQualityTimer(), this.ef = setInterval(function() {
                t4.Sf();
              }, this.rf), this.af = this.eo = Date.now(), 1e3 !== this.rf && (this.tf != this.rf && (this.sf = setInterval(function() {
                t4.notifyPublishQuality();
              }, this.tf)), this.if != this.rf && (this.uf = setInterval(function() {
                t4.reportPublishQuality();
              }, this.if))), this.cf = { audioPacketsLost: 0, videoPacketsLost: 0, videoPacketsSent: 0, audioPacketsSent: 0, audioRetransmittedPacketsSent: 0, audioRetransmittedBytesSent: 0, videoTime: Date.now(), audioTime: Date.now(), time: Date.now(), audioBytesSent: 0, videoBytesSent: 0, framesEncoded: 0, framesSent: 0, videoRetransmittedPacketsSent: 0, videoRetransmittedBytesSent: 0, videoActualBytesSent: 0, qpSum: 0 });
            }, t3.prototype.clearPublishQualityTimer = function() {
              this.nf.info("zc.p.0.spqt.1 called ".concat(!!this.ef, " ").concat(!!this.sf, " ").concat(!!this.uf)), null != this.ef && (clearInterval(this.ef), this.ef = null), null != this.sf && (clearInterval(this.sf), this.sf = null), null != this.uf && (clearInterval(this.uf), this.uf = null), this.cf = {}, this.ff = 0, this.lf = 0;
            }, t3.prototype.Ef = function() {
              var t4 = this, i3 = [], n3 = false;
              if (!this.nf.peerConnection)
                return { result: i3, hasVideo: n3 };
              var e3 = [], r3 = this.nf, s3 = r3.videoSender, o2 = r3.audioSender;
              return s3 && e3.push(s3), o2 && e3.push(o2), e3.forEach(function(e4) {
                e4.track && ("video" === e4.track.kind && (n3 = true), t4.nf.peerConnection && i3.push(t4.nf.peerConnection.getStats(e4.track)));
              }), { result: i3, hasVideo: n3 };
            }, t3.prototype.Sf = function() {
              var t4 = this;
              if (this.nf.peerConnection) {
                var i3 = this.Ef(), n3 = i3.hasVideo;
                Promise.all(i3.result).then(function(i4) {
                  0 !== i4.length && t4.ef && t4.If(i4.filter(function(t5) {
                    return t5 instanceof RTCStatsReport;
                  }), i4[i4.length - 1] instanceof RTCStatsReport ? null : i4[i4.length - 1], n3);
                }).catch(function(i4) {
                  t4.nf.info(Co.Ifp + " getStats error " + i4.toString());
                });
              }
            }, t3.prototype.If = function(t4, i3, n3) {
              var r3, s3, o2, u2 = this;
              if (t4) {
                var a2, c2, h2 = this.gn.checkPreview(this.xu), f2 = h2 && h2.rtcViewer;
                f2 && (a2 = f2.ma, c2 = f2.pa), a2 && a2.currentTime || (a2 = _o(this.xu, "video") || a2), c2 && c2.currentTime || (c2 = _o(this.xu, "audio") || c2 || a2);
                var l2 = [], d2 = "", v2 = { scenario: this.pn.scenario, sampleTimeWindow: this.if, audioCodec: "", audioTargetBitrate: this.nf.videoInfo.audioBitrate / 1e3 || 0, audioBitrate: 0, audioRtxBitrate: 0, videoTargetBitrate: this.nf.videoInfo.bitRate || 0, videoTargetFPS: this.nf.videoInfo.frameRate || 0, videoBitrate: 0, audioFPS: 0, audioLevel: 0, audioPacketsLost: 0, totalAudioEnergy: 0, totalSamplesDuration: 0, echoReturnLossEnhancement: void 0, audioPacketsLostRate: 0, videoFPS: 0, nackCount: 0, pliCount: 0, audioQuality: 0, videoQuality: 0, frameHeight: 0, frameWidth: 0, videoTransferFPS: 0, videoPacketsLost: 0, videoPacketsLostRate: 0, totalRoundTripTime: 0, currentRoundTripTime: 0, availableOutgoingBitrate: void 0, inputWidth: void 0, inputHeight: void 0, inputFPS: void 0, qualityLimitationReason: "", targetBitrate: void 0, retransmitBitrate: void 0, actualEncBitrate: void 0, frameQp: void 0, videoCodecName: void 0, videoMuteState: (null === (r3 = null == h2 ? void 0 : h2.videoTrack) || void 0 === r3 ? void 0 : r3.enabled) ? "0" : "1", audioMuteState: this.xu.getAudioTracks().length > 0 && this.xu.getAudioTracks()[0].enabled ? "0" : "1", soundLevel: null == h2 ? void 0 : h2.soundLevel, muted: c2 ? c2.muted : void 0, audioPaused: c2 ? c2.paused : void 0, videoPaused: a2 ? a2.paused : void 0, volume: c2 ? c2.volume : void 0, sinkId: c2 ? c2.sinkId : void 0 };
                this.nf.ip && (Fs(this.nf.ip) ? v2.ipv6 = this.nf.ip : v2.ipv4 = Js(this.nf.ip));
                var m2 = this.cf.time, p2 = 0, g2 = 0, b2 = 0, _2 = 0, y2 = 0, w2 = 0;
                if (t4.forEach(function(t5) {
                  var i4 = false;
                  t5.forEach(function(t6) {
                    "track" == t6.type && (i4 = true);
                  }), t5.forEach(function(n4) {
                    var e3 = n4.kind || n4.mediaType;
                    if (("outbound-rtp" == n4.type || "ssrc" == n4.type && null != n4.bytesSent) && "audio" == e3) {
                      var r4 = "";
                      if ((s4 = t5.get(n4.codecId)) && s4.mimeType && (r4 = s4.mimeType.split("/")[1]), u2.pf !== r4 && (u2.pf = r4), v2.audioCodec = u2.pf, 0 != m2 && (v2.audioBitrate = 8 * (n4.bytesSent - u2.cf.audioBytesSent) / (n4.timestamp - m2), n4.retransmittedPacketsSent = n4.retransmittedPacketsSent || 0, n4.packetsSent = n4.packetsSent || 0, v2.audioFPS = (n4.packetsSent - (n4.retransmittedPacketsSent - u2.cf.audioRetransmittedPacketsSent) - u2.cf.audioPacketsSent) / (n4.timestamp - m2) * 1e3 || 0, b2 = (n4.retransmittedPacketsSent - u2.cf.audioRetransmittedPacketsSent) / (n4.packetsSent - u2.cf.audioPacketsSent)), v2.audioBitrate < 0 && (v2.audioBitrate = 0), void 0 !== n4.retransmittedBytesSent) {
                        if (0 != m2)
                          v2.audioRtxBitrate = 8 * (n4.retransmittedBytesSent - u2.cf.audioRetransmittedBytesSent) / (a3 = n4.timestamp - m2);
                        u2.cf.audioRetransmittedBytesSent = n4.retransmittedBytesSent;
                      }
                      u2.cf.audioBytesSent = n4.bytesSent, u2.cf.time = n4.timestamp, u2.cf.audioPacketsSentTimeStamp = n4.packetsSent - u2.cf.audioPacketsSent, u2.cf.audioPacketsSent = n4.packetsSent, u2.cf.audioRetransmittedPacketsSent = n4.retransmittedPacketsSent;
                    } else if (("outbound-rtp" == n4.type || "ssrc" == n4.type && null != n4.bytesSent) && "video" == e3) {
                      var s4, o3 = "";
                      (s4 = t5.get(n4.codecId)) && s4.mimeType && (o3 = s4.mimeType.split("/")[1]), u2.mf !== o3 && (u2.mf = o3), v2.videoCodecName = u2.mf;
                      v2.isHardwareEncode = function(t6) {
                        if (t6) {
                          var i5 = null == t6 ? void 0 : t6.toLocaleLowerCase();
                          if ("unknown" !== i5)
                            return "openh264" !== i5 && "libvpx" !== i5;
                        }
                      }(n4.encoderImplementation), v2.codecImplementationName = n4.encoderImplementation;
                      var a3, c3 = 0;
                      if (void 0 !== n4.retransmittedBytesSent && (c3 = n4.bytesSent - n4.retransmittedBytesSent), 0 != m2)
                        v2.videoBitrate = 8 * (n4.bytesSent - u2.cf.videoBytesSent) / (a3 = n4.timestamp - m2), v2.videoFPS = 1e3 * (n4.framesEncoded - u2.cf.framesEncoded) / a3, _2 = (n4.retransmittedPacketsSent - u2.cf.videoRetransmittedPacketsSent) / (n4.packetsSent - u2.cf.videoPacketsSent), void 0 !== n4.retransmittedBytesSent && (v2.retransmitBitrate = 8 * (n4.retransmittedBytesSent - u2.cf.videoRetransmittedBytesSent) / a3, v2.actualEncBitrate = 8 * (c3 - u2.cf.videoActualBytesSent) / a3), void 0 !== n4.qpSum && (v2.frameQp = (n4.qpSum - u2.cf.qpSum) / (n4.framesEncoded - u2.cf.framesEncoded));
                      v2.videoBitrate < 0 && (v2.videoBitrate = 0), v2.videoFPS < 0 && (v2.videoFPS = 0), v2.nackCount = n4.nackCount, v2.pliCount = n4.pliCount, v2.qualityLimitationReason = n4.qualityLimitationReason, v2.targetBitrate = n4.targetBitrate, u2.cf.videoBytesSent = n4.bytesSent, u2.cf.framesEncoded = n4.framesEncoded, u2.cf.time = n4.timestamp, u2.cf.videoPacketsSentTimeStamp = n4.packetsSent - u2.cf.videoPacketsSent, u2.cf.videoPacketsSent = n4.packetsSent, u2.cf.videoRetransmittedPacketsSent = n4.retransmittedPacketsSent, u2.cf.videoRetransmittedBytesSent = n4.retransmittedBytesSent, u2.cf.videoActualBytesSent = c3, u2.cf.qpSum = n4.qpSum, i4 || u2.Rf(m2, v2, n4);
                    } else if ("remote-inbound-rtp" == n4.type && "video" == e3) {
                      n4.packetsLost > 0 && (v2.videoPacketsLost = n4.packetsLost);
                      var h3 = n4.packetsLost - u2.cf.videoPacketsLost;
                      v2.videoPacketsLostRate = h3 > 0 ? h3 / u2.cf.videoPacketsSentTimeStamp : 0, n4.packetsLost > 0 && (u2.cf.videoPacketsLost = n4.packetsLost), u2.cf.videoTime = n4.timestamp, g2 = 1e3 * n4.roundTripTime, w2 = n4.jitter;
                    } else if ("remote-inbound-rtp" == n4.type && "audio" == e3) {
                      n4.packetsLost > 0 && (v2.audioPacketsLost = n4.packetsLost);
                      var f3 = n4.packetsLost - u2.cf.audioPacketsLost;
                      v2.audioPacketsLostRate = f3 > 0 ? f3 / u2.cf.audioPacketsSentTimeStamp : 0, n4.packetsLost > 0 && (u2.cf.audioPacketsLost = n4.packetsLost), u2.cf.audioTime = n4.timestamp, p2 = 1e3 * n4.roundTripTime, y2 = n4.jitter;
                    } else if ("media-source" == n4.type && ("audio" == e3 || n4.id.toLowerCase().indexOf("audio") >= 0))
                      v2.audioLevel = n4.audioLevel || 0, v2.totalAudioEnergy = n4.totalAudioEnergy, v2.totalSamplesDuration = n4.totalSamplesDuration, v2.echoReturnLossEnhancement = n4.echoReturnLossEnhancement;
                    else if ("media-source" == n4.type && ("video" == e3 || n4.id.toLowerCase().indexOf("video") >= 0))
                      v2.inputWidth = n4.width, v2.inputHeight = n4.height, v2.inputFPS = n4.framesPerSecond;
                    else if ("track" == n4.type && ("video" == e3 || n4.id.indexOf("video") >= 0 || n4.frameWidth))
                      u2.Rf(m2, v2, n4);
                    else if ("candidate-pair" != n4.type || !n4.nominated || (0, Pe.gm)() && !n4.selected)
                      "local-candidate" === n4.type && l2.push(n4);
                    else {
                      null != n4.totalRoundTripTime && (v2.totalRoundTripTime = n4.totalRoundTripTime), null != n4.currentRoundTripTime && (v2.currentRoundTripTime = n4.currentRoundTripTime), void 0 !== n4.availableOutgoingBitrate && (v2.availableOutgoingBitrate = n4.availableOutgoingBitrate), "succeeded" === n4.state && (d2 = n4.localCandidateId);
                      var S3 = u2.gn.lastChangeIpTime;
                      if (S3 && u2._f < S3 && Date.now() - S3 <= 15e3) {
                        var E3 = n4.bytesReceived, k3 = u2.cf.condidateBytesReceived;
                        k3 && (E3 > k3 ? u2.bf = 0 : u2.bf++), u2.bf >= 5 && (u2.bf = 0, u2._f = S3, u2.onPublishingError(re.kOd)), u2.cf.condidateBytesReceived = E3;
                      } else
                        u2.bf > 0 && (u2.bf = 0);
                    }
                  });
                }), d2) {
                  var S2 = l2.find(function(t5) {
                    return t5.id == d2;
                  });
                  if (S2) {
                    var E2 = void 0;
                    if (void 0 !== S2.relayProtocol)
                      E2 = S2.relayProtocol;
                    else if (S2.protocol)
                      E2 = S2.protocol;
                    else if (S2.priority) {
                      var k2 = S2.priority >> 24;
                      void 0 !== k2 && (E2 = bo(k2, this.pn.browser));
                    }
                    void 0 !== E2 && this.df !== E2 && (this.nf.info(Co.Ifp + " protocol " + E2), this.df = E2);
                    var O2 = false, I2 = S2.candidateType, T2 = S2.networkType, C2 = S2.relayProtocol, A2 = S2.relatedAddress, z2 = S2.url, D2 = S2.ip;
                    if (D2) {
                      var N2 = Hs(D2);
                      N2 >= 0 && N2 !== this.connectIPStack && (this.nf.info(Co.Jli + " " + this.streamId + " ipStack " + R[N2]), this.connectIPStack = N2, this.onConnectIPUpdate(D2));
                    }
                    O2 = this.Tf([{ key: "candidateType", value: I2 }, { key: "networkType", value: T2 }]), "relay" === I2 && (O2 = this.Tf([{ key: "relayProtocol", value: C2 }, { key: "relatedAddress", value: A2 }, { key: "url", value: z2 }])), O2 && this.nf.info(Co.Jli + " upload candidate change " + JSON.stringify(this.vf));
                  }
                }
                if ("chrome" === this.pn.browser) {
                  var P2 = null === (s3 = (0, Pe.$t)()) || void 0 === s3 ? void 0 : s3.match(/Chrome\/(\d+)/);
                  parseInt(P2 && P2[1] || "100") <= 91 && v2.isHardwareEncode && this.nf.handleEncBitrate(Number.parseInt(v2.targetBitrate), Number.parseInt(v2.actualEncBitrate), Number.parseInt(v2.retransmitBitrate));
                }
                g2 = isNaN(g2) || g2 < 0 ? 0 : g2, _2 = isNaN(_2) || _2 < 0 ? 0 : _2, w2 = isNaN(w2) || w2 < 0 ? 0 : w2, p2 = isNaN(p2) || p2 < 0 ? 0 : p2, b2 = isNaN(b2) || b2 < 0 ? 0 : b2, y2 = isNaN(y2) || y2 < 0 ? 0 : y2;
                var M2 = ct(g2, _2, w2), x2 = ct(p2, b2, y2);
                if (v2.videoQuality = m2 > 0 ? ht(M2) : 0, v2.audioQuality = m2 > 0 ? ht(x2) : 0, this.pn.networkState !== e2.D2.offline && "disconnected" !== (null === (o2 = this.nf.peerConnection) || void 0 === o2 ? void 0 : o2.connectionState) || (v2.videoQuality = e2.b3.Die, v2.audioQuality = e2.b3.Die), n3 && (!v2.frameHeight || !v2.frameWidth)) {
                  var j2 = this.xu.getVideoTracks()[0];
                  j2 && (v2.frameHeight = j2.getSettings().height || 0, v2.frameWidth = j2.getSettings().width || 0);
                }
                var q2 = Math.min(M2, x2);
                this.hf = q2, this.Cf(v2), this.publishStat = v2, this.nf.onStatsUpdated(this.publishStat);
                var L2 = Date.now();
                this.rf === this.tf ? this.notifyPublishQuality() : this.sf || L2 - this.af + 50 >= this.tf && this.notifyPublishQuality(), this.if === this.rf ? this.reportPublishQuality() : this.uf || L2 - this.eo + 50 >= this.if && this.reportPublishQuality();
              }
            }, t3.prototype.onConnectIPUpdate = function(t4) {
            }, t3.prototype.notifyPublishQuality = function() {
              this.af = Date.now(), this.nf.onPublishQualityUpdate(this.streamId, this.Wh);
            }, t3.prototype.reportPublishQuality = function() {
              var t4 = Date.now();
              this.eo = t4, this.checkProbe(), this.Af(this.publishStat), this.wf.checkLocalStats(this.publishStat), this.gn.changeTxQuality(ht(this.hf)), this.nf.sendNetQualityGrade(this.gn.rxQuality, this.gn.txQuality);
            }, t3.prototype.checkProbe = function() {
              var t4 = this.hf, i3 = this.cf.time;
              this.nf.debug(Co.Ifp + " netQuality " + t4 + " " + i3), t4 <= this.gn.targetQuality ? this.ff++ : this.ff = 0, i3 > 0 && this.ff >= this.gn.probeStartedNum && Date.now() > this.nf.probeTime + this.gn.probeInterval && (this.nf.info(Co.Ifp + " netQuality " + t4 + " start net probe"), this.probeState = s2.tryProbe, this.nf.poorQualityRetryCnt++, this.gn.startNetProbe(true, this.nf));
            }, t3.prototype.Rf = function(t4, i3, n3) {
              var r3 = n3.frameHeight, s3 = n3.frameWidth, o2 = n3.framesSent, u2 = n3.timestamp;
              if (i3.frameHeight = r3, i3.frameWidth = s3, 0 === t4 || this.cf.frameHeight === r3 && this.cf.frameWidth === s3)
                0 === t4 && (this.cf.frameHeight = r3, this.cf.frameWidth = s3);
              else {
                var a2 = this.pn.reporter.createSpan(e2.t0.H, { key: L.Og.event, par: this.streamId }, { key: "" }, L.YO.event);
                a2.setAttributes({ webrtc_sid: L.YO.webrtc_sid(this.sessionId), w: L.YO.w(s3), h: L.YO.h(r3) }), a2.end(), this.cf.frameHeight = r3, this.cf.frameWidth = s3;
              }
              0 != t4 && (i3.videoTransferFPS = 1e3 * (o2 - this.cf.framesSent) / (u2 - t4)), i3.videoTransferFPS < 0 && (i3.videoTransferFPS = 0), this.cf.framesSent = o2;
            }, t3.prototype.Cf = function(t4) {
              var i3 = t4.videoBitrate, n3 = t4.videoFPS, e3 = t4.videoTransferFPS, r3 = t4.frameHeight, s3 = t4.frameWidth, o2 = t4.videoMuteState, u2 = t4.videoQuality, a2 = t4.isHardwareEncode, c2 = t4.audioBitrate, h2 = t4.audioCodec, f2 = t4.audioMuteState, l2 = t4.audioQuality, d2 = t4.audioFPS, v2 = { video: ec(ec({}, this.Wh.video), { videoBitrate: i3, videoFPS: n3, videoTransferFPS: e3, frameHeight: r3, frameWidth: s3, muteState: o2, videoQuality: u2, isHardwareEncode: a2 }), audio: ec(ec({}, this.Wh.audio), { audioBitrate: c2, audioCodec: h2, muteState: f2, audioQuality: l2, audioFPS: d2 }), nackCount: t4.nackCount, pliCount: t4.pliCount, totalRoundTripTime: t4.totalRoundTripTime, currentRoundTripTime: t4.currentRoundTripTime };
              if (void 0 !== t4.qualityLimitationReason && (v2.qualityLimitationReason = t4.qualityLimitationReason), void 0 !== t4.videoPacketsLost) {
                var m2 = t4.videoPacketsLostRate;
                v2.video.videoPacketsLost = t4.videoPacketsLost, v2.video.videoPacketsLostRate = m2;
              }
              if (void 0 !== t4.audioPacketsLost) {
                var p2 = t4.audioPacketsLostRate;
                v2.audio.audioPacketsLost = t4.audioPacketsLost, v2.audio.audioPacketsLostRate = p2;
              }
              void 0 !== t4.codecImplementationName && (v2.codecImplementationName = t4.codecImplementationName), void 0 !== t4.videoCodecName && (v2.video.googCodecName = t4.videoCodecName), "" !== t4.audioCodec && (v2.audio.googCodecName = t4.audioCodec), this.Wh = v2;
            }, t3.prototype.simplifyPublishDataKey = function(t4) {
              var i3 = {};
              return i3.scenario = t4.scenario, i3.aRtxRate = t4.audioRtxBitrate, i3.aTargetRate = t4.audioTargetBitrate, i3.aBitrate = Math.trunc(t4.audioBitrate), i3.vUsrTargetRate = t4.videoTargetBitrate, i3.vBitrate = Math.trunc(t4.videoBitrate), i3.aFps = Math.trunc(t4.audioFPS), i3.aLevel = Math.trunc(1e5 * t4.audioLevel) / 1e5, i3.aPktLost = t4.audioPacketsLost, i3.aTotalEnergy = Math.trunc(1e5 * t4.totalAudioEnergy) / 1e5, i3.echoRetLossEnh = Math.trunc(1e5 * t4.echoReturnLossEnhancement) / 1e5, i3.aPlr = t4.audioPacketsLostRate, i3.vFps = Math.trunc(t4.videoFPS), i3.nackCnt = t4.nackCount, i3.vPliCnt = t4.pliCount, i3.aQuality = t4.audioQuality, i3.vQuality = t4.videoQuality, i3.vHeight = t4.frameHeight, i3.vWidth = t4.frameWidth, i3.vTransFPS = Math.trunc(t4.videoTransferFPS), i3.vPktLost = t4.videoPacketsLost, i3.vPlr = t4.videoPacketsLostRate, i3.rtt = t4.currentRoundTripTime, i3.bw = t4.availableOutgoingBitrate, i3.vInputW = t4.inputWidth, i3.vInputH = t4.inputHeight, i3.inFps = t4.inputFPS, i3.qualityLimit = t4.qualityLimitationReason, i3.vTargetRate = t4.targetBitrate, i3.vRtxRate = t4.retransmitBitrate, i3.VEncBitrate = t4.actualEncBitrate, i3.sinkId = t4.sinkId, i3.vQP = t4.frameQp, i3.vCodec = t4.videoCodecName, i3.vMuteStat = t4.videoMuteState, i3.aMuteStat = t4.audioMuteState, i3.aPaused = t4.audioPaused, i3.vPaused = t4.videoPaused, i3.muted = t4.muted, i3.volume = t4.volume, i3.aSoundLv = t4.soundLevel, i3.vIsHW = t4.isHardwareEncode, i3.vCodecImpl = t4.codecImplementationName, i3;
            }, t3.prototype.Af = function(t4) {
              var i3 = Date.now();
              if (0 == this.lf || i3 - this.lf >= 2e3) {
                t4.stream_type = "publish", t4.stream_id = this.streamId, t4.timeStamp = i3;
                var n3 = this.simplifyPublishDataKey(t4);
                void 0 !== this.yf && (n3.gw_vRecvKbps = this.yf.videoRecvBitrate, n3.gw_TCStat = this.yf.trafficControlStat, n3.gw_vPlr = this.yf.videoLostRate, n3.gw_aRecvKbps = this.yf.audioRecvBitrate, n3.gw_aPlr = this.yf.audioLostRate), this.nf.info(Co.Jli + " upload" + JSON.stringify(n3)), this.xu && this.nf.info(Co.Jli + " " + vt(this.xu)), this.gn.updateQuality(f.publish_quality, t4), this.lf = i3;
              }
            }, t3.prototype.Tf = function(t4) {
              for (var i3 = false, n3 = 0; n3 < t4.length; n3++) {
                var e3 = t4[n3], r3 = e3.key, s3 = e3.value;
                this.vf[r3] !== s3 && (this.vf[r3] = s3, i3 = true);
              }
              return i3;
            }, t3.prototype.onPublishingError = function(t4) {
            }, t3.prototype.updateGwPublishNetState = function(t4) {
              this.yf = t4;
            }, t3;
          }(), sc = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, oc = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, uc = $e.webrtc_cmd, ac = 67109120, cc = function() {
            function t3(t4, i3, n3) {
              this.zf = 0, this.Df = 0, this.Nf = 0, this.Pf = null, this.Mf = false, this.xf = 0, this.jf = 0, this.qf = 0, this.Lf = 0, this.Bf = 0, this.Uf = 0, this.Gf = null, this.Jf = 0, this.Ff = 0, this.Hf = 0, this.Vf = {}, this.Qf = new e2.wl(), this.Yf = 3e3, this.To = 1e3, this.tu = null, this.Kf = {}, this.Zf = ["p2p_net_stats_get"], this.Xf = ["getP2PNetStats"], this.Wf = { first: true, seq: 0 }, this.$f = { first: true, seq: 0 }, this.tl = { first: true, seq: 0 }, this.useCmd = true, this.LOG_TAG = i3 ? "zc.p.prs.0" : "zc.p.prs", this.an = Uo(t4, n3), this.va = n3, this.an.info("".concat(this.LOG_TAG, ".c 1"));
            }
            return Object.defineProperty(t3.prototype, "dataChannel", { set: function(t4) {
              this.Pf = t4, t4 && this.Nf >= ac && (this.Mf = true, this.an.info("".concat(this.LOG_TAG, "  enable dc")));
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isCenterServerConnected", { get: function() {
              var t4;
              return (null === (t4 = this.Gf) || void 0 === t4 ? void 0 : t4.mediaState) === D.LOGIN;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "webrtcCenterServerSignal", { set: function(t4) {
              this.Gf = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "streamId", { get: function() {
              return this.va;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "peerId", { get: function() {
              return this.zf;
            }, set: function(t4) {
              this.zf !== t4 && this.an.info("".concat(this.LOG_TAG, "  setPeerId: ").concat(this.zf, " ").concat(t4, ", sid: ").concat(this.sessionId)), this.zf = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sessionId", { get: function() {
              return this.Df;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "gwVersion", { get: function() {
              return this.Nf;
            }, set: function(t4) {
              this.Nf = t4, t4 >= ac && this.Pf && (this.Mf = true, this.an.info("".concat(this.LOG_TAG, "  enable dc, sid: ").concat(this.sessionId)));
            }, enumerable: false, configurable: true }), t3.prototype.reset = function() {
              var t4, i3 = this, n3 = this.Pf ? 1 : 0;
              this.an.info("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, " reset, rtt:(").concat(this.Uf, ",").concat(this.Bf, ",").concat(this.Lf, "), dc: ").concat(n3, ", rtt(").concat(this.qf, ",").concat(this.jf, ",").concat(this.xf, "), (tx: ").concat(this.Jf, " ").concat(this.Ff, ", rx:").concat(this.Hf, "), sid: ").concat(this.sessionId)), this.tu && clearTimeout(this.tu), this.Qf.each(function(t5) {
                t5._data && delete i3.Vf[t5._data.seq];
              }), this.Qf.removeAll(), null === (t4 = this.Gf) || void 0 === t4 || t4.unregisterPeerCallback(this.Df), this.Nf = 0, this.Df = 0, this.zf = 0, this.Pf = null, this.Mf = false, this.qf = 0, this.jf = 0, this.xf = 0, this.Uf = 0, this.Bf = 0, this.Lf = 0, this.Jf = 0, this.Ff = 0, this.Hf = 0, this.Wf.first = true, this.$f.first = true, this.tl.first = true;
            }, t3.prototype.isDCReady = function() {
              return !(!this.Pf || "open" != this.Pf.readyState);
            }, Object.defineProperty(t3.prototype, "DCState", { get: function() {
              return this.Pf ? this.Pf.readyState : "invalid";
            }, enumerable: false, configurable: true }), t3.prototype.isUseDC = function() {
              return !!this.Mf && (!(this.Nf < ac) && "open" === this.DCState);
            }, t3.prototype.addReqTask = function(t4, i3, n3, e3, r3) {
              var s3 = { seq: t4, deleted: false, cmd: i3, sendTime: (/* @__PURE__ */ new Date()).getTime(), success: function() {
                for (var t5 = [], i4 = 0; i4 < arguments.length; i4++)
                  t5[i4] = arguments[i4];
                e3 && e3.apply(void 0, t5);
              }, error: r3, timeout: this.Yf, isOverDC: n3 }, o2 = this.Qf.push(s3);
              this.Vf[s3.seq] = o2, this.checkTimer();
            }, t3.prototype.removeReqTask = function(t4) {
              t4._data && delete this.Vf[t4._data.seq], this.Qf.remove(t4);
            }, t3.prototype.checkTimer = function() {
              var t4 = this;
              this.Qf.size() > 0 ? this.tu || (this.tu = setTimeout(function() {
                t4.tu = null, t4.onTimeout();
              }, this.To)) : this.tu && (clearTimeout(this.tu), this.tu = null);
            }, t3.prototype.onTimeout = function() {
              for (var t4, i3 = this.Qf.getFirst(), n3 = (/* @__PURE__ */ new Date()).getTime(); null != i3 && i3._data && !(i3._data.sendTime + this.Yf > n3); )
                i3._data.isOverDC && (this.Mf && (this.an.error("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", rollback DC, sid: ").concat(this.sessionId)), this.Mf = false), this.Ff++), this.removeReqTask(i3), this.Zf.includes(i3._data.cmd) || this.an.warn("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", timeout, cmd: ").concat(i3._data.cmd, ", seq: ").concat(null === (t4 = i3._data) || void 0 === t4 ? void 0 : t4.seq, ", dc: ").concat(i3._data.isOverDC)), i3._data.error && i3._data.error(e2.Xb, i3._data.seq), i3 = this.Qf.getFirst();
              this.checkTimer();
            }, t3.prototype.onDataChannelMessage = function(t4) {
              var i3 = new Uint8Array(t4), n3 = i3[0];
              if (11 != n3 || i3.length < 4)
                this.an.error("".concat(this.LOG_TAG, ".dc  pid: ").concat(this.peerId, ", header type(").concat(n3, " != 0xb)"));
              else {
                var e3 = 15 & i3[1], r3 = i3[2] << 8 | i3[3], s3 = i3.slice(4);
                r3 > i3.length - 4 ? this.an.error("".concat(this.LOG_TAG, ".dc  pid: ").concat(this.peerId, ", invalid data, len: ").concat(i3.length, " ").concat(r3)) : 2 == e3 ? this.handleCmdPush(s3, true) : 1 == e3 ? this.handleCmdRsp(s3, 0, true) : this.an.error("".concat(this.LOG_TAG, ".dc  pid: ").concat(this.peerId, ", unknown cmd type: ").concat(e3, ", sid: ").concat(this.sessionId));
              }
            }, t3.prototype.emitCallback = function(t4, i3) {
              var n3 = this.Kf[t4];
              n3 && n3.callback(i3.seq, this.Df, i3);
            }, t3.prototype.updateRtt = function(t4) {
              if (this.Uf = t4, 0 === this.Lf)
                return this.Lf = t4, void (this.Bf = t4);
              t4 > this.Lf && (this.Lf = t4), t4 < this.Bf && (this.Bf = t4);
            }, t3.prototype.updateDcRtt = function(t4) {
              if (this.qf = t4, 0 === this.xf)
                return this.xf = t4, void (this.jf = t4);
              t4 > this.xf && (this.xf = t4), t4 < this.jf && (this.jf = t4);
            }, t3.prototype.handleCmdHeartbeatMsg = function(t4, i3) {
              var n3 = this, e3 = [{ key: "p2p_net_stat_rsp", type: "rsp", field: "p2p_net_stat_rsp" }, { key: "play_net_stat", type: "req", field: "play_net_stat_notify" }, { key: "net_quality_push", type: "req", field: "net_quality_grade_push" }, { key: "pub_net_stat", type: "req", field: "PublishNetStatNotify" }, { key: "pub_quality_grade_rsp", type: "rsp", field: "pub_quality_grade_rsp" }, { key: "stream_status_push", type: "req", field: "StreamStatusNotifyPush" }, { key: "code_err_push", type: "req", field: "codec_error_notify" }, { key: "play_event_push", type: "req", field: "PlayEventPush" }, { key: "pub_event_push", type: "req", field: "PublishEventPush" }];
              t4.payloads.forEach(function(t5) {
                var r3, s3 = "cmd_hb_msg", o2 = e3.find(function(i4) {
                  return t5.hasOwnProperty(i4.key);
                });
                o2 && (s3 = o2.field, r3 = t5[o2.key], "rsp" === o2.type ? n3.internalCheckCmdRsp(r3, 0, i3, s3) : n3.emitCallback(s3, r3));
              });
            }, t3.prototype.handleCmdPush = function(t4, i3, n3) {
              i3 && this.Hf++;
              var e3 = uc.WebrtcCmdReqMsg.decode(t4);
              if (e3) {
                var r3, s3 = Object.keys(e3)[0];
                this.an.debug("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", handleCmdPush fromDC: ").concat(i3, ", cmd: ").concat(s3)), (0, G.M$)(e3[s3]);
                var o2, u2, a2 = 0;
                switch (s3) {
                  case "net_quality_grade_push":
                    o2 = e3.net_quality_grade_push, r3 = "net_quality_grade_ack", a2 = 7, (this.$f.first || o2.seq > this.$f.seq) && (this.$f.first = false, this.$f.seq = o2.seq, u2 = "net_quality_grade_push");
                    break;
                  case "codec_error_notify":
                    o2 = e3.codec_error_notify, r3 = "codec_error_notify_ack", a2 = 9, u2 = "codec_error_notify";
                    break;
                  case "candidate_push":
                    o2 = e3.candidate_push, r3 = "candidate_push_ack", a2 = 12, u2 = "CandidateInfoPush";
                    break;
                  case "close_peer_push":
                    o2 = e3.close_peer_push, r3 = "close_peer_ack", a2 = 13, u2 = "CloseSessionPush";
                    break;
                  case "stream_status":
                    o2 = e3.stream_status, r3 = "stream_status_ack", a2 = 14, (this.Wf.first || o2.seq > this.Wf.seq) && (this.Wf.first = false, this.Wf.seq = o2.seq, u2 = "StreamStatusNotifyPush");
                    break;
                  case "client_info":
                    o2 = e3.client_info, r3 = "client_info_ack", a2 = 18, u2 = "ClientInfoPush", e3.client_info.peer_id && (this.zf = e3.client_info.peer_id);
                    break;
                  case "net_quality_push":
                    r3 = "net_quality_ack", a2 = 20, void 0 === (o2 = e3.net_quality_push).peer_id && (o2.peer_id = this.peerId), (this.tl.first || o2.seq > this.tl.seq) && (this.tl.first = false, this.tl.seq = o2.seq, u2 = "NetQualityInfoPush");
                    break;
                  case "publish_event":
                    o2 = e3.publish_event, r3 = "publish_event_ack", a2 = 23, u2 = "PublishEventPush";
                    break;
                  case "play_event":
                    o2 = e3.play_event, r3 = "play_event_ack", a2 = 26, u2 = "PlayEventPush";
                    break;
                  case "heartbeat_msg_push":
                    r3 = "heartbeat_msg_ack", a2 = 27, this.handleCmdHeartbeatMsg(o2 = e3.heartbeat_msg_push, i3);
                    break;
                  default:
                    return void this.an.error("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", handleCmdPush fromDC:").concat(i3, ", unknown cmd: ").concat(s3, ", sid: ").concat(this.sessionId));
                }
                if (o2)
                  r3 && this.sendCmdAck(r3, a2, 0, (null == o2 ? void 0 : o2.seq) ? o2.seq : 0, i3, n3), u2 && this.emitCallback(u2, o2);
              } else
                this.an.error("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", handleCmdPush, decode failed"));
            }, t3.prototype.internalCheckCmdRsp = function(t4, i3, n3, e3) {
              t4.seq = (null == t4 ? void 0 : t4.seq) ? t4.seq : i3;
              var r3 = this.Vf[t4.seq];
              if (r3) {
                if (this.removeReqTask(r3), r3._data) {
                  var s3 = (/* @__PURE__ */ new Date()).getTime() - r3._data.sendTime;
                  n3 ? this.updateDcRtt(s3) : this.updateRtt(s3), r3._data.success && r3._data.success(t4.seq, t4);
                }
              } else
                this.an.warn("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, " handleCmdRsp, unknown seq: ").concat(t4.seq, ", cmd: ").concat(e3, ", sid: ").concat(this.sessionId));
            }, t3.prototype.handleCmdRsp = function(t4, i3, n3) {
              var e3 = uc.WebrtcCmdRspMsg.decode(t4);
              if (e3) {
                var r3, s3 = Object.keys(e3)[0];
                switch ((0, G.M$)(e3[s3]), s3) {
                  case "p2p_net_stats_get":
                    r3 = e3.p2p_net_stats_get;
                    break;
                  case "net_quality_grade":
                    r3 = e3.net_quality_grade;
                    break;
                  case "stream_status_ack":
                    r3 = e3.stream_status_ack;
                    break;
                  case "stream_property_update_ack":
                    r3 = e3.stream_property_update_ack;
                    break;
                  case "usr_sei_filter":
                    r3 = e3.usr_sei_filter;
                    break;
                  case "video_stream_sub":
                    r3 = e3.video_stream_sub;
                    break;
                  case "broadcaster_status_ack":
                    r3 = e3.broadcaster_status_ack;
                    break;
                  case "active_audio_play":
                    r3 = e3.active_audio_play;
                    break;
                  case "active_video_play":
                    r3 = e3.active_video_play;
                    break;
                  case "net_quality_probe":
                    r3 = e3.net_quality_probe;
                    break;
                  case "active_sei_insert":
                    r3 = e3.active_sei_insert;
                    break;
                  case "close_peer":
                    r3 = e3.close_peer;
                    break;
                  case "play_stats":
                    return;
                  case "restart_ice":
                    r3 = e3.restart_ice;
                    break;
                  default:
                    return void this.an.error("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", handleCmdRsp, unknown cmd: ").concat(s3, ", sid: ").concat(this.sessionId));
                }
                r3 && this.internalCheckCmdRsp(r3, i3, n3, s3), this.checkTimer();
              } else
                this.an.error("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", handleCmdRsp, decode failed"));
            }, t3.prototype.sendCmdAck = function(t4, i3, n3, e3, r3, s3) {
              var o2, u2 = uc.WebrtcCmdRspMsg.encode((o2 = {}, o2[t4] = { result: n3, seq: e3 }, o2)).finish();
              r3 && this.isDCReady() ? this.sendAckByDC(u2) : this.Gf && this.Gf.sendGWCmdAck(this.Df, { peer_id: this.zf, cmd_id: i3 }, u2, s3);
            }, t3.prototype.sendReqByDC = function(t4) {
              this.sendByDC(t4, 0), this.Jf++;
            }, t3.prototype.sendAckByDC = function(t4) {
              this.sendByDC(t4, 3);
            }, t3.prototype.sendByDC = function(t4, i3) {
              var n3, e3 = new Uint8Array(4 + t4.length), r3 = 0;
              e3[r3] = 11, e3[++r3] = i3, e3[++r3] = t4.length >> 8, e3[r3 + 1] = t4.length - (e3[r3] << 8), e3.set(t4, r3 += 2), r3 += t4.length, null === (n3 = this.Pf) || void 0 === n3 || n3.send(e3);
            }, t3.prototype.registerPeerCallback = function() {
              var t4 = this;
              this.Gf && this.Gf.registerPeerCallback(this.Df, function(i3, n3) {
                t4.handleMsgWithSession(i3, n3);
              });
            }, t3.prototype.handleMsgWithSession = function(t4, i3) {
              var n3, e3, r3;
              if (t4) {
                var s3 = t4.header, o2 = s3.seq, u2 = s3.cmd, a2 = s3.session_id;
                if (i3 === N.RSP) {
                  if ("CmdRsp" === u2)
                    return void this.handleCmdRsp(null === (n3 = t4.body) || void 0 === n3 ? void 0 : n3.body, o2, false);
                  var c2 = this.Vf[o2];
                  if (!c2)
                    return void this.an.warn("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, " handleMsgWithSession, unknown seq: ").concat(o2, ", cmd: ").concat(u2, ", sid: ").concat(a2));
                  if (this.removeReqTask(c2), c2._data) {
                    var h2 = (/* @__PURE__ */ new Date()).getTime();
                    this.updateRtt(h2 - c2._data.sendTime), c2._data.success && c2._data.success(o2, t4.body);
                  }
                  this.checkTimer();
                } else if ("CmdPush" === u2)
                  this.handleCmdPush(null === (e3 = t4.body) || void 0 === e3 ? void 0 : e3.body, false, { seq: o2, sessionId: a2 });
                else {
                  var f2 = this.Kf[u2];
                  f2 && f2.callback(null === (r3 = null == t4 ? void 0 : t4.header) || void 0 === r3 ? void 0 : r3.seq, this.Df, null == t4 ? void 0 : t4.body);
                }
              }
            }, t3.prototype.registerPushCallback = function(t4, i3) {
              this.Kf[t4] = { callback: i3 }, this.Gf && ["SessionResetPush"].includes(t4) && this.Gf.registerPushCallback(t4, this.Df, i3);
            }, t3.prototype.unregisterPushCallback = function(t4) {
              delete this.Kf[t4], this.Gf && this.Gf.unregisterPushCallback(t4, this.Df);
            }, t3.prototype.dispatchGwNodes = function(t4, i3, n3) {
              if (this.Gf) {
                var r3 = (0, e2.Mo)();
                this.Gf.dispatchGwNodes(r3, t4, i3, n3);
              }
            }, t3.prototype.getGwVersString = function(t4) {
              var i3 = t4 >> 8 & 65535, n3 = 255 & t4;
              return "".concat(t4 >> 24, ".").concat(i3, ".").concat(n3);
            }, t3.prototype.createSession = function(t4, i3, n3, e3) {
              var r3 = this;
              if (this.Gf) {
                var s3 = i3.serverHost, o2 = performance.now();
                this.Gf.createSession(t4, i3, function(t5, i4, e4) {
                  return sc(r3, void 0, void 0, function() {
                    var r4, u2;
                    return oc(this, function(a2) {
                      return o2 && (r4 = (performance.now() - o2).toFixed(0)), u2 = s3.length > 0 ? s3 : null == e4 ? void 0 : e4.gw_nodes[0], this.an.info("".concat(this.LOG_TAG, "  CreateSessionRsp, node: ").concat(u2, ", gw ver: ").concat(this.getGwVersString(e4.gw_version), ", rtt: ").concat(r4, ", sid: ").concat(i4)), this.Df = e4.session_id, this.gwVersion = e4.gw_version, this.registerPeerCallback(), n3 && n3(t5, e4.session_id, e4), [2];
                    });
                  });
                }, function(t5, i4) {
                  e3 && e3(t5, i4);
                });
              }
            }, t3.prototype.createSessionWithSdp = function(t4, i3, n3) {
              var e3 = this;
              if (this.Gf) {
                var r3 = performance.now();
                this.Gf.createSessionWithSdp(t4, function(n4, s3, o2) {
                  return sc(e3, void 0, void 0, function() {
                    var e4, u2;
                    return oc(this, function(a2) {
                      return r3 && (e4 = (performance.now() - r3).toFixed(0)), u2 = t4.serverHost.length > 0 ? t4.serverHost : null == o2 ? void 0 : o2.gw_nodes[0], this.an.info("".concat(this.LOG_TAG, "  CreateSessionWithSdpRsp, node: ").concat(u2, ", gw ver: ").concat(this.getGwVersString(o2.gw_version), ", rtt: ").concat(e4, ", sid: ").concat(s3)), this.Df = s3, this.gwVersion = o2.gw_version, o2.params_ext && o2.params_ext.peer_id && (this.peerId = o2.params_ext.peer_id), this.registerPeerCallback(), i3 && i3(n4, s3, o2), [2];
                    });
                  });
                }, function(t5, i4) {
                  n3 && n3(t5, i4);
                });
              }
            }, t3.prototype.sendMediaDesc = function(t4, i3, n3, e3, r3, s3) {
              var o2 = this;
              this.addReqTask(t4, "MediaDesc", false, function(t5, i4) {
                r3 && r3(t5, o2.Df, i4);
              }, function(t5) {
                s3 && s3(t5);
              }), this.Gf && this.Gf.sendMediaDesc(t4, i3, n3, e3);
            }, t3.prototype.sendMediaDescUpdateReq = function(t4, i3, n3, e3, r3) {
              var s3 = this;
              this.addReqTask(t4, "MediaDescUpdate", false, function(t5, i4) {
                e3 && e3(t5, s3.Df, i4);
              }, function(t5) {
                r3 && r3(t5);
              }), this.Gf && this.Gf.sendMediaDescUpdateReq(t4, i3, n3);
            }, t3.prototype.sendCandidateInfo = function(t4, i3, n3) {
              var r3 = this, s3 = (0, e2.Mo)();
              this.addReqTask(s3, "CandidateInfo", false, function(t5, n4) {
                i3 && i3(t5, r3.Df, n4);
              }, function(t5) {
                n3 && n3(t5);
              }), this.Gf && this.Gf.sendCandidateInfo(s3, this.Df, t4);
            }, t3.prototype.sendCloseSession = function(t4, i3, n3) {
              var r3 = this;
              if (this.Df > 0) {
                var s3 = (0, e2.Mo)();
                this.addReqTask(s3, "CloseSession", false, function(t5, n4) {
                  i3 && i3(t5, r3.Df, n4);
                }, function(t5) {
                  n3 && n3(t5);
                }), this.Gf && this.Gf.sendCloseSession(s3, this.Df, t4);
              }
            }, t3.prototype.sendStreamStatus = function(t4, i3, n3, r3) {
              var s3, o2 = (0, e2.Mo)(), u2 = this.isUseDC();
              if (this.addReqTask(o2, "StreamStatus", u2, function(t5, i4) {
                n3(t5, i4);
              }, function(t5) {
                r3 && r3();
              }), this.useCmd && this.Nf >= ac && this.peerId > 0) {
                this.an.info("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", seq: ").concat(o2, ", sendStreamStatus(").concat(t4, ", ").concat(i3, "), dc:").concat(u2));
                var a2 = uc.WebrtcCmdReqMsg.encode({ stream_status: { mic_status: i3, camera_status: t4, seq: o2 } }).finish();
                u2 && this.isDCReady() ? this.sendReqByDC(a2) : this.isCenterServerConnected && (null === (s3 = this.Gf) || void 0 === s3 || s3.sendGWCmdReq(this.Df, o2, { peer_id: this.peerId, cmd_id: 16, body: a2 }));
              } else
                this.Gf && this.isCenterServerConnected && this.Gf.sendStreamStatus(o2, this.Df, t4, i3, this.streamId);
              return o2;
            }, t3.prototype.sendStreamAlignmentProperty = function(t4) {
              var i3 = this;
              return new G.l3(function(n3) {
                var r3 = (0, e2.Mo)(), s3 = uc.WebrtcCmdReqMsg.encode({ stream_property_update: { enable_stream_alignment_when_mix: t4, seq: r3 } }).finish(), o2 = i3.isUseDC();
                i3.addReqTask(r3, "StreamPropertyUpdate", o2, function(t5) {
                  n3(true);
                }, function(t5) {
                  i3.an.error("".concat(i3.LOG_TAG, "  pid: ").concat(i3.peerId, ", seq: ").concat(r3, ", sendStreamPropertyUpdate error: ").concat(t5)), n3(false);
                }), i3.an.info("".concat(i3.LOG_TAG, "  pid: ").concat(i3.peerId, ", seq: ").concat(r3, ", sendStreamAlignmentProperty(").concat(t4, "), dc: ").concat(o2)), o2 ? i3.sendReqByDC(s3) : i3.Gf ? i3.Gf.sendGWCmdReq(i3.Df, r3, { peer_id: i3.peerId, cmd_id: 9, body: s3 }) : n3(false);
              });
            }, t3.prototype.sendSEIUUID = function(t4) {
              return sc(this, void 0, void 0, function() {
                var i3 = this;
                return oc(this, function(n3) {
                  return [2, new G.l3(function(n4, r3) {
                    var s3 = (0, e2.Mo)(), o2 = uc.WebrtcCmdReqMsg.encode({ usr_sei_filter: { sei_filter: t4, seq: s3 } }).finish(), u2 = i3.isUseDC();
                    i3.addReqTask(s3, "usr_sei_filter", u2, function(t5) {
                      n4(t5);
                    }, function(t5) {
                      r3(t5);
                    }), i3.an.info("".concat(i3.LOG_TAG, "  pid: ").concat(i3.peerId, ", seq: ").concat(s3, ", sendSEIUUID:").concat(t4, ", dc: ").concat(u2)), u2 ? i3.sendReqByDC(o2) : i3.Gf ? i3.Gf.sendGWCmdReq(i3.Df, s3, { peer_id: i3.zf, cmd_id: 5, body: o2 }) : r3(e2.Dg);
                  })];
                });
              });
            }, t3.prototype.subscribeVideoStream = function(t4) {
              return sc(this, void 0, void 0, function() {
                var i3 = this;
                return oc(this, function(n3) {
                  return [2, new G.l3(function(n4, r3) {
                    var s3 = (0, e2.Mo)(), o2 = uc.WebrtcCmdReqMsg.encode({ video_stream_sub: { type: t4, seq: s3 } }).finish(), u2 = i3.isUseDC();
                    i3.addReqTask(s3, "video_stream_sub", u2, function(t5) {
                      n4(t5);
                    }, function(t5) {
                      r3(t5);
                    }), i3.an.info("".concat(i3.LOG_TAG, ".dc  pid: ").concat(i3.peerId, ", seq: ").concat(s3, ", subscribeVideoStream:").concat(t4, ", dc: ").concat(u2)), u2 ? i3.sendReqByDC(o2) : i3.Gf ? i3.Gf.sendGWCmdReq(i3.Df, s3, { peer_id: i3.zf, cmd_id: 2, body: o2 }) : r3(e2.Dg);
                  })];
                });
              });
            }, t3.prototype.sendRestartIce = function(t4, i3) {
              return sc(this, void 0, void 0, function() {
                var n3 = this;
                return oc(this, function(r3) {
                  return [2, new G.l3(function(r4, s3) {
                    var o2 = (0, e2.Mo)(), u2 = uc.WebrtcCmdReqMsg.encode({ restart_ice: { ice_ufrag: t4, ice_pwd: i3, seq: o2 } }).finish(), a2 = n3.isUseDC();
                    n3.addReqTask(o2, "restart_ice", a2, function(t5) {
                      var i4 = Object.keys(t5)[0];
                      (0, G.M$)(t5[i4]), r4(t5);
                    }, function(t5) {
                      s3(t5);
                    }), n3.an.info("".concat(n3.LOG_TAG, ".dc  pid: ").concat(n3.peerId, ", seq: ").concat(o2, ", iceUfrag:").concat(t4, ", icePwd:").concat(i3, ", dc: ").concat(a2)), a2 ? n3.sendReqByDC(u2) : n3.Gf ? n3.Gf.sendGWCmdReq(n3.Df, o2, { peer_id: n3.zf, cmd_id: 28, body: u2 }) : s3(e2.Dg);
                  })];
                });
              });
            }, t3.prototype.sendNetQualityGrade = function(t4, i3) {
              var n3 = (0, e2.Mo)(), r3 = uc.WebrtcCmdReqMsg.encode({ net_quality_grade: { rx_quality: t4, tx_quality: i3, seq: n3 } }).finish(), s3 = this.isUseDC();
              this.addReqTask(n3, "net_quality_grade", s3, function(t5) {
              }, function(t5) {
              }), s3 ? this.sendReqByDC(r3) : this.Gf && this.Gf.sendGWCmdReq(this.Df, n3, { peer_id: this.peerId, cmd_id: 6, body: r3 });
            }, t3.prototype.sendBroadcasterStatus = function(t4) {
              var i3, n3 = this, r3 = (0, e2.Mo)(), s3 = this.isUseDC();
              if (this.addReqTask(r3, "broadcaster_status", s3, function(t5, i4) {
                n3.an.debug("".concat(n3.LOG_TAG, "  pid: ").concat(n3.peerId, ", seq: ").concat(t5, ", BroadcasterStatusRsp: ").concat(JSON.stringify(i4)));
              }, function(t5) {
                n3.an.error("".concat(n3.LOG_TAG, "  pid: ").concat(n3.peerId, ", seq: ").concat(r3, ", sendBroadcasterStatus error: ").concat(t5));
              }), this.useCmd && this.Nf >= ac && this.peerId > 0) {
                this.an.info("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", seq: ").concat(r3, ", sendBroadcasterStatus(").concat(t4, "), dc:").concat(s3));
                var o2 = uc.WebrtcCmdReqMsg.encode({ broadcaster_status: { status: t4, seq: r3 } }).finish();
                s3 ? this.sendReqByDC(o2) : null === (i3 = this.Gf) || void 0 === i3 || i3.sendGWCmdReq(this.Df, r3, { peer_id: this.peerId, cmd_id: 17, body: o2 });
              } else
                this.Gf && this.Gf.sendBroadcasterStatus(r3, this.Df, t4);
            }, t3.prototype.sendNetProbeReq = function(t4, i3) {
              var n3, r3 = this, s3 = (0, e2.Mo)(), o2 = this.isUseDC();
              if (this.addReqTask(s3, "net_quality_probe", o2, function(i4, n4) {
                r3.an.debug("".concat(r3.LOG_TAG, "  pid: ").concat(r3.peerId, ", seq: ").concat(i4, ", NetProbeRsp: ").concat(JSON.stringify(n4))), t4 && t4(i4, n4);
              }, function(t5) {
                r3.an.error("".concat(r3.LOG_TAG, "  pid: ").concat(r3.peerId, ", seq: ").concat(s3, ", sendNetProbeReq error: ").concat(t5)), i3 && i3(t5);
              }), this.useCmd && this.Nf >= ac && this.peerId > 0) {
                this.an.info("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", seq: ").concat(s3, ", sendNetProbeReq, dc: ").concat(o2));
                var u2 = uc.WebrtcCmdReqMsg.encode({ net_quality_probe: { seq: s3, action: 1 } }).finish();
                o2 ? this.sendReqByDC(u2) : null === (n3 = this.Gf) || void 0 === n3 || n3.sendGWCmdReq(this.Df, s3, { peer_id: this.peerId, cmd_id: 23, body: u2 });
              } else
                this.Gf && this.Gf.sendNetProbe(s3, this.Df, this.peerId);
            }, t3.prototype.getP2PNetStats = function(t4, i3) {
              var n3, r3 = this;
              if (this.peerId) {
                var s3 = (0, e2.Mo)(), o2 = this.isUseDC();
                if (this.addReqTask(s3, "p2p_net_stats_get", o2, function(i4, n4) {
                  r3.an.debug("".concat(r3.LOG_TAG, "  pid: ").concat(r3.peerId, ", seq: ").concat(i4, ", getP2PNetStatsRsp: ").concat(JSON.stringify(n4))), t4 && t4(i4, n4);
                }, function(t5) {
                  r3.an.error("".concat(r3.LOG_TAG, "  pid: ").concat(r3.peerId, ", seq: ").concat(s3, ", getP2PNetStats error: ").concat(t5)), i3 && i3(t5);
                }), this.useCmd && this.Nf >= ac && this.peerId > 0) {
                  var u2 = uc.WebrtcCmdReqMsg.encode({ p2p_net_stats_get: { seq: s3 } }).finish();
                  o2 ? this.sendReqByDC(u2) : null === (n3 = this.Gf) || void 0 === n3 || n3.sendGWCmdReq(this.Df, s3, { peer_id: this.peerId, cmd_id: 26, body: u2 });
                } else
                  this.Gf && this.Gf.getP2PNetStats(s3, this.Df, this.peerId);
              } else
                this.an.warn("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, " invalid, getP2PNetStats)"));
            }, t3.prototype.ActivatePlayAudioStream = function(t4, i3, n3) {
              var r3, s3 = this, o2 = (0, e2.Mo)(), u2 = this.isUseDC();
              if (this.addReqTask(o2, "active_audio_play", u2, function(t5, n4) {
                s3.an.info("".concat(s3.LOG_TAG, "  pid: ").concat(s3.peerId, ", seq: ").concat(t5, ", ActivatePlayAudioStreamRsp: ").concat(JSON.stringify(n4))), i3 && i3(t5, n4);
              }, function(t5) {
                s3.an.error("".concat(s3.LOG_TAG, ".dc  pid: ").concat(s3.peerId, ", seq: ").concat(o2, ", ActivatePlayAudioStream error: ").concat(t5)), n3 && n3(t5);
              }), this.useCmd && this.Nf >= ac && this.peerId > 0) {
                this.an.info("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", seq: ").concat(o2, ", ActivatePlayAudioStream(").concat(t4, "), dc: ").concat(u2));
                var a2 = uc.WebrtcCmdReqMsg.encode({ active_audio_play: { active: t4 ? 0 : 1, seq: o2 } }).finish();
                u2 ? this.sendReqByDC(a2) : null === (r3 = this.Gf) || void 0 === r3 || r3.sendGWCmdReq(this.Df, o2, { peer_id: this.peerId, cmd_id: 20, body: a2 });
              } else
                this.Gf && this.Gf.ActivatePlayAudioStream(o2, this.Df, t4);
            }, t3.prototype.ActivatePlayVideoStream = function(t4, i3, n3) {
              var r3, s3 = this, o2 = (0, e2.Mo)(), u2 = this.isUseDC();
              if (this.addReqTask(o2, "active_video_play", u2, function(t5, n4) {
                s3.an.debug("".concat(s3.LOG_TAG, "  pid: ").concat(s3.peerId, ", seq: ").concat(t5, ", ActivatePlayVideoStreamRsp: ").concat(JSON.stringify(n4))), i3 && i3(t5, n4);
              }, function(t5) {
                s3.an.error("".concat(s3.LOG_TAG, "  pid: ").concat(s3.peerId, ", seq: ").concat(o2, ", ActivatePlayVideoStream error: ").concat(t5)), n3 && n3(t5);
              }), this.useCmd && this.Nf >= ac && this.peerId > 0) {
                this.an.info("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", seq: ").concat(o2, ", ActivatePlayVideoStream(").concat(t4, "), dc: ").concat(u2));
                var a2 = uc.WebrtcCmdReqMsg.encode({ active_video_play: { active: t4 ? 0 : 1, layer: 0, seq: o2 } }).finish();
                u2 ? this.sendReqByDC(a2) : null === (r3 = this.Gf) || void 0 === r3 || r3.sendGWCmdReq(this.Df, o2, { peer_id: this.peerId, cmd_id: 21, body: a2 });
              } else
                this.Gf && this.Gf.ActivatePlayVideoStream(o2, this.Df, t4);
            }, t3.prototype.activateSEIInsert = function(t4, i3, n3, r3) {
              var s3, o2 = this, u2 = (0, e2.Mo)(), a2 = this.isUseDC();
              if (this.addReqTask(u2, "active_sei_insert", a2, function(t5, i4) {
                o2.an.debug("".concat(o2.LOG_TAG, "  pid: ").concat(o2.peerId, ", seq: ").concat(t5, ", activateSEIInsertRsp: ").concat(JSON.stringify(i4))), n3 && n3(t5, i4);
              }, function(t5) {
                o2.an.error("".concat(o2.LOG_TAG, "  pid: ").concat(o2.peerId, ", seq: ").concat(u2, ", activateSEIInsert error: ").concat(t5)), r3 && r3(t5);
              }), this.useCmd && this.Nf >= ac && this.peerId > 0) {
                this.an.info("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", seq: ").concat(u2, ", activateSEIInsert(").concat(t4, ", ").concat(i3, "), dc: ").concat(a2));
                var c2 = uc.WebrtcCmdReqMsg.encode({ active_sei_insert: { seq: u2, action: t4, info_type: i3 } }).finish();
                a2 ? this.sendReqByDC(c2) : null === (s3 = this.Gf) || void 0 === s3 || s3.sendGWCmdReq(this.Df, u2, { peer_id: this.peerId, cmd_id: 25, body: c2 });
              } else
                this.Gf && this.Gf.activateSEIInsert(u2, this.Df, this.peerId, t4, i3);
            }, t3.prototype.sendPlayStats = function(t4) {
              var i3, n3 = (0, e2.Mo)(), r3 = this.isUseDC();
              if (this.Nf >= 83886081 && this.peerId > 0) {
                this.an.debug("".concat(this.LOG_TAG, "  pid: ").concat(this.peerId, ", seq: ").concat(n3, ", sendPlayStats(").concat(t4, "}), dc: ").concat(r3));
                var s3 = uc.WebrtcCmdReqMsg.encode({ play_stats: { seq: n3, audio_jitter_ms: t4 } }).finish();
                return r3 ? this.sendReqByDC(s3) : null === (i3 = this.Gf) || void 0 === i3 || i3.sendGWCmdReq(this.Df, n3, { peer_id: this.peerId, cmd_id: 27, body: s3 }), true;
              }
              return false;
            }, t3;
          }();
          !function(t3) {
            t3[t3.UserData = 1] = "UserData", t3[t3.Cmd = 2] = "Cmd", t3[t3.Signal = 11] = "Signal", t3[t3.TcPadding = 12] = "TcPadding", t3[t3.TcFeedback = 13] = "TcFeedback";
          }(Ka || (Ka = {}));
          var hc, fc, lc, dc = function() {
            function t3() {
              this.il = 0, this.nl = 0, this.el = 0;
            }
            return t3.prototype.reset = function() {
              this.il = 0, this.nl = 0, this.el = 0;
            }, t3.prototype.setGenDataInKbps = function(t4) {
              t4 > 5e3 && (t4 = 5e3), this.il = Math.floor(t4 / 8);
            }, Object.defineProperty(t3.prototype, "sendBytesOnems", { get: function() {
              return this.il;
            }, enumerable: false, configurable: true }), t3.prototype.generatePadding = function() {
              if (this.il < 1)
                return 0;
              var t4 = Math.floor(performance.now());
              if (0 === this.el)
                return this.el = t4, this.nl = 0, 0;
              var i3 = t4 - this.el;
              if (i3 < 3)
                return 0;
              if (this.el = t4, i3 > 500)
                return this.nl = 0, 0;
              var n3 = i3 * this.il + this.nl;
              return n3 < 600 ? (this.nl = n3, 0) : (this.nl = 0, n3);
            }, t3;
          }();
          !function(t3) {
            t3[t3.Normal = 0] = "Normal", t3[t3.Control = 1] = "Control";
          }(hc || (hc = {})), function(t3) {
            t3[t3.UNDERUSE = -1] = "UNDERUSE", t3[t3.NORMAL = 0] = "NORMAL", t3[t3.OVERUSE = 1] = "OVERUSE", t3[t3.OVERUSE_DUE_PKT_LOST = 2] = "OVERUSE_DUE_PKT_LOST";
          }(fc || (fc = {})), function(t3) {
            t3[t3.Default = -1] = "Default", t3[t3.NoVideo = 0] = "NoVideo";
          }(lc || (lc = {}));
          var vc = function() {
            function t3(t4, i3) {
              this.an = t4, this.enable = true, this.isStart = false, this.maxAudioBitrate = 48, this.maxVideoBitrate = 0, this.startVideoBitrate = 0, this.minVideoBitrate = 0, this.targetVideoBitrate = 0, this.referenceVideoBitrate = -1, this.firstStatsUpdateTs = 0, this.lastStatsUpdateTs = 0, this.lastAvailableOutgoingBitrate = 0, this.lastVideoActualEncBitrate = 0, this.videoActualEncBitrateList = [], this.nackCountList = [], this.lastNackCount = 0, this.tcState = hc.Normal, this.continueUpCount = 0, this.lastUpdateTargetVideoBitrateTime = 0, this.updateTargetVideoBitrateCount = 0, this.enable_debug_log = false, this.rl = true, this.sl = lc.Default, this.ol = new dc(), this.Pf = null, this.ul = 0, this.al = 0, this.cl = { first: true, seq: 0, status: fc.UNDERUSE, bandwide: 0, targetBitrate: 0, rtt: 0 }, this.hl = 0, this.fl = 0, this.ll = 0, this.dl = 0, this.vl = 0, this.ml = false, this.bl = false, this._l = null, this.test_padding = 0, this.pn = i3;
            }
            return t3.prototype.updateVideoTargetBitrate = function(t4) {
            }, t3.prototype.pauseVideo = function() {
            }, t3.prototype.resumeVideo = function() {
            }, t3.prototype.reset = function() {
              this.test_padding = 0, this.enable = true, this.maxAudioBitrate = 48, this.maxVideoBitrate = 0, this.startVideoBitrate = 0, this.minVideoBitrate = 0, this.targetVideoBitrate = 0, this.referenceVideoBitrate = -1, this.firstStatsUpdateTs = 0, this.lastStatsUpdateTs = 0, this.lastAvailableOutgoingBitrate = 0, this.lastVideoActualEncBitrate = 0, this.videoActualEncBitrateList.length = 0, this.nackCountList.length = 0, this.lastNackCount = 0, this.tcState = hc.Normal, this.continueUpCount = 0, this.lastUpdateTargetVideoBitrateTime = 0, this.updateTargetVideoBitrateCount = 0, this.rl = true, this.sl = lc.Default, this.ol.reset(), this.Pf = null, this.ul = 0, this.al = 0, this.cl.first = true, this.cl.seq = 0, this.cl.status = fc.UNDERUSE, this.cl.bandwide = 0, this.cl.targetBitrate = 0, this.hl = 0, this.fl = 0, this.ll = 0, this.dl = 0, this.vl = 0, this.ml = false, this.bl = false, this.clearProeTimer();
            }, t3.prototype.enableVideo = function(t4) {
              this.rl = t4;
            }, t3.prototype.setDatachannel = function(t4) {
              this.Pf = t4;
            }, t3.prototype.setMinVideoBitrateMode = function(t4) {
              0 === t4 && (this.sl = t4);
            }, t3.prototype.getMinVideoBitrateMode = function() {
              return this.sl;
            }, t3.prototype.getBandwide = function() {
              return this.cl.bandwide;
            }, t3.prototype.getFeedback = function() {
              return this.cl;
            }, t3.prototype.start = function() {
              this.isStart || (this.targetVideoBitrate = this.maxVideoBitrate, this.enable && this.referenceVideoBitrate > 0 && (this.startVideoBitrate && this.startVideoBitrate < this.maxVideoBitrate ? this.targetVideoBitrate = this.startVideoBitrate : this.referenceVideoBitrate <= this.minVideoBitrate ? this.targetVideoBitrate = this.minVideoBitrate : this.referenceVideoBitrate < this.maxVideoBitrate && (this.targetVideoBitrate = Math.max(this.referenceVideoBitrate, 50))), this.an.info("".concat(Co.BsE, " start ").concat(this.enable, ", v[").concat(this.startVideoBitrate, "|").concat(this.maxVideoBitrate, "|").concat(this.minVideoBitrate, "], ref:").concat(this.referenceVideoBitrate, ", tg:").concat(this.targetVideoBitrate, ", vmode:").concat(this.sl, ", a[").concat(this.maxAudioBitrate, "]")), this.isStart = true);
            }, t3.prototype.stop = function() {
              this.isStart && this.an.info("".concat(Co.BsE, " stop")), this.isStart = false, this.reset();
            }, t3.prototype.setEnable = function(t4) {
              this.enable = t4;
            }, t3.prototype.isEnable = function() {
              return this.enable;
            }, t3.prototype.setMinVideoBitrate = function(t4) {
              t4 > 0 && (this.minVideoBitrate = t4);
            }, t3.prototype.getMinVideoBitrate = function() {
              return this.minVideoBitrate;
            }, t3.prototype.setStartVideoBitrate = function(t4) {
              t4 > 0 && (this.startVideoBitrate = t4);
            }, t3.prototype.getStartVideoBitrate = function() {
              return this.startVideoBitrate;
            }, t3.prototype.setVideoBitrate = function(t4) {
              t4 && (this.maxVideoBitrate > 0 && this.an.info("".concat(Co.BsE, " setVideoBitrate ").concat(this.maxVideoBitrate, " => ").concat(t4)), this.maxVideoBitrate = t4, this.targetVideoBitrate = t4);
            }, t3.prototype.setAudioBitrate = function(t4) {
              this.maxAudioBitrate = t4;
            }, t3.prototype.setReferenceVideoBitrate = function(t4) {
              this.referenceVideoBitrate = t4;
            }, t3.prototype.getTargetVideoBitrate = function() {
              return this.targetVideoBitrate;
            }, t3.prototype.onStatsUpdated = function(t4) {
              if (this.enable) {
                var i3 = 1e3 * t4.audioRtxBitrate;
                this.ul = Math.floor(1e3 * t4.audioBitrate), this.al = Math.floor(i3);
                var n3 = t4.availableOutgoingBitrate ? t4.availableOutgoingBitrate : 0, e3 = t4.actualEncBitrate ? t4.actualEncBitrate : 0;
                if (0 != this.firstStatsUpdateTs || 0 != t4.videoBitrate) {
                  var r3 = Date.now();
                  if (this.targetVideoBitrate < this.maxVideoBitrate) {
                    var s3 = 0;
                    n3 > this.lastAvailableOutgoingBitrate ? this.continueUpCount++ : n3 < this.lastAvailableOutgoingBitrate && (this.tcState = hc.Control, this.continueUpCount = 0);
                    var o2 = this.targetVideoBitrate;
                    if (this.tcState == hc.Normal)
                      0 == n3 || n3 <= 3e5 ? (s3 = 1, o2 *= this.updateTargetVideoBitrateCount < 3 ? 1.05 : this.updateTargetVideoBitrateCount < 6 ? 1.1 : 1.15) : (s3 = 2, o2 *= n3 && n3 >= this.lastAvailableOutgoingBitrate ? 1.3 : 1.15, (this.continueUpCount > 5 || this.lastUpdateTargetVideoBitrateTime > 0 && r3 - this.lastUpdateTargetVideoBitrateTime > 5e3) && (o2 = this.maxVideoBitrate));
                    else if (this.continueUpCount > 0)
                      (n3 && n3 > 1e3 * this.targetVideoBitrate * 0.8 || this.continueUpCount >= 2) && (s3 = 3, o2 *= this.continueUpCount < 3 ? 1.05 : this.continueUpCount < 6 ? 1.1 : 1.2);
                    else {
                      if (this.lastUpdateTargetVideoBitrateTime > 0)
                        r3 - this.lastUpdateTargetVideoBitrateTime + 50 >= 2e3 && (s3 = 4, o2 *= 1.1);
                      else
                        this.firstStatsUpdateTs && r3 - this.firstStatsUpdateTs + 50 >= 4e3 && (s3 = 5, o2 *= 1.1);
                    }
                    if (o2 = Math.min(o2, this.maxVideoBitrate), (o2 = Math.max(o2, 50)) != this.targetVideoBitrate) {
                      (!this.updateTargetVideoBitrateCount || o2 >= this.maxVideoBitrate) && this.an.info("".concat(Co.BsE, " update video maxbitrate: ").concat(this.targetVideoBitrate, " => ").concat(o2, ", ").concat(s3)), this.targetVideoBitrate = o2, this.updateTargetVideoBitrateCount++, this.lastUpdateTargetVideoBitrateTime = r3, this.updateVideoTargetBitrate(o2);
                    }
                  }
                  this.lastAvailableOutgoingBitrate = n3, this.lastVideoActualEncBitrate = e3, this.lastStatsUpdateTs = r3, this.firstStatsUpdateTs || (this.firstStatsUpdateTs = r3), this.videoActualEncBitrateList.push(e3), this.videoActualEncBitrateList.length > 5 && this.videoActualEncBitrateList.shift();
                  var u2 = t4.nackCount - this.lastNackCount;
                  this.lastNackCount = t4.nackCount, this.nackCountList.push(u2), this.nackCountList.length > 5 && this.nackCountList.shift();
                }
              }
            }, t3.prototype.getLastVideoBitrate = function() {
              if (!this.firstStatsUpdateTs || this.lastStatsUpdateTs - this.firstStatsUpdateTs < 1e4)
                return 0;
              if (Date.now() - this.lastStatsUpdateTs > 1e4)
                return 0;
              var t4 = Math.max.apply(null, this.nackCountList), i3 = 50;
              if (this.lastAvailableOutgoingBitrate > 0) {
                if (this.lastAvailableOutgoingBitrate >= 1.2 * this.maxVideoBitrate * 1e3)
                  return -1;
                if (0 == t4 && 3e5 == this.lastAvailableOutgoingBitrate)
                  return -1;
                i3 = Math.max(this.lastAvailableOutgoingBitrate / 1e3, this.lastVideoActualEncBitrate);
              } else {
                if (i3 = Math.max.apply(null, this.videoActualEncBitrateList), 0 == t4 && i3 > 0.8 * this.targetVideoBitrate)
                  return -1;
                if (i3 > 0.8 * this.maxVideoBitrate)
                  return -1;
              }
              return i3 = Math.max(i3, 50);
            }, t3.prototype.compare16BitsSeq = function(t4, i3) {
              var n3 = t4 - i3;
              return n3 < -32767 ? n3 = t4 + 65535 - i3 + 1 : n3 > 32767 && (n3 = t4 - (i3 + 65535) - 1), n3;
            }, t3.prototype.handleFeedback = function(t4) {
              var i3 = t4.byteLength - 1;
              if (!(i3 < 9)) {
                var n3 = new Uint8Array(t4, 1, i3), e3 = n3[0] << 8 | n3[1], r3 = new DataView(t4).getInt8(3), s3 = n3[3] << 8 | n3[4], o2 = n3[5] << 8 | n3[6], u2 = n3[7] << 8 | n3[8];
                this.cl.first || this.compare16BitsSeq(e3, this.cl.seq) > 0 ? (this.cl.first = false, this.cl.seq = e3, this.cl.status = r3, this.cl.bandwide = 1e3 * s3, this.cl.targetBitrate = 1e3 * o2, this.cl.rtt = u2, this.processBandwide()) : this.an.debug("".concat(Co.BsE, " handleFeedback, seq reorder: ").concat(this.cl.seq, ", ").concat(e3));
              }
            }, t3.prototype.getRandomInt = function(t4, i3) {
              return t4 = Math.ceil(t4), i3 = Math.floor(i3), Math.floor(Math.random() * (i3 - t4 + 1)) + t4;
            }, t3.prototype.sendPaddingData = function() {
              if (this.Pf && "open" == this.Pf.readyState) {
                var t4 = this.getRandomInt(500, 1e3);
                if (t4 > this.fl && (t4 = this.fl), this.Pf.bufferedAmount > 32e3)
                  return this.fl -= t4, void (this.fl < 0 && (this.fl = 0));
                var i3 = Math.floor(performance.now());
                if (t4 > 0 && t4 < 1144) {
                  var n3 = new Uint8Array(t4 + 7);
                  n3[0] = Ka.TcPadding, n3[1] = this.hl >> 8 & 255, n3[2] = 255 & this.hl, n3[3] = i3 >> 24 & 255, n3[4] = i3 >> 16 & 255, n3[5] = i3 >> 8 & 255, n3[6] = 255 & i3, this.hl++, this.hl >= 65536 && (this.hl = 0), this.Pf.send(n3), this.fl -= n3.byteLength, this.fl < 0 && (this.fl = 0);
                }
              }
            }, t3.prototype.processBandwide = function() {
              if (!(!this.enable || !this.rl || !this.Pf || this.cl.bandwide <= 0 || this.cl.targetBitrate <= 0 || this.ul <= 0 || this.sl != lc.NoVideo)) {
                var t4, i3 = this.ul, n3 = this.minVideoBitrate <= 0 ? 5e4 : this.minVideoBitrate, e3 = this.cl.status, r3 = this.cl.targetBitrate, s3 = this.cl.bandwide;
                t4 = this.cl.rtt >= 300 ? this.cl.bandwide : r3;
                var o2 = n3 + i3 + 4e4;
                if (e3 > 0 ? ((s3 <= n3 + 4e4 || s3 <= 1e5) && (this.dl++, false === this.ml && (this.pauseVideo(), this.ml = true)), this.vl = 0) : e3 <= 0 && (t4 > o2 || r3 > 1.5 * o2) && (this.dl = 0, this.vl++, (t4 > 1.2 * o2 && t4 > 15e4 || this.vl > 25 || r3 > 1.8 * o2 && r3 > 25e4) && this.ml && (this.bl = false, this.ml = false, this.stopBandWideProbe(), this.resumeVideo())), this.ml) {
                  var u2 = r3 - i3;
                  u2 > 0 && e3 <= 0 ? (this.ll = u2, this.ol.setGenDataInKbps(u2 / 1e3), this.bl || (this.bl = true), this._l || this.startBandWideProbe()) : this.stopBandWideProbe();
                }
              }
            }, t3.prototype.startBandWideProbe = function() {
              var t4 = this;
              this.clearProeTimer(), this.bl && (this._l = setTimeout(function() {
                var i3 = t4.ol.generatePadding();
                t4.fl += i3;
                if (t4.ll > 0)
                  for (var n3 = t4.ll / 16e4 + 1, e3 = 0; e3 < n3; e3++)
                    t4.fl > 0 && t4.sendPaddingData();
                t4.startBandWideProbe();
              }, 40));
            }, t3.prototype.stopBandWideProbe = function() {
              this.ll = 0, this.fl = 0, this.ol.reset(), this.clearProeTimer();
            }, t3.prototype.clearProeTimer = function() {
              this._l && (clearTimeout(this._l), this._l = null);
            }, t3;
          }(), mc = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, pc = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, gc = function() {
            function t3(t4, i3, n3) {
              this.gn = t4, this.yl = 100, this.an = Uo(i3, n3);
            }
            return t3.prototype.getMiniSdp = function(t4) {
              var i3 = this, n3 = "zc.s.gmsdp";
              return this.an.info("".concat(n3, " lSDP:").concat(t4.length, " isMini")), new G.l3(function(e3, r3) {
                return mc(i3, void 0, void 0, function() {
                  var i4, s3, o2, u2, a2 = this;
                  return pc(this, function(c2) {
                    return i4 = this.gn.miniSdpWorker, s3 = function(t5) {
                      a2.an.error("".concat(n3, " error:").concat(JSON.stringify(t5))), r3(t5);
                    }, u2 = function() {
                      o2 && (clearTimeout(o2), o2 = null);
                    }, t4 ? i4 ? (i4.parseToMiniSdp(t4).then(function(t5) {
                      if (a2.an.info("".concat(n3, " parse sdp success buffer:").concat(null == t5 ? void 0 : t5.byteLength)), u2(), !t5 || !t5.byteLength)
                        return s3(re.KbN);
                      e3(t5);
                    }).catch(function(t5) {
                      return u2(), s3(t5);
                    }), o2 = setTimeout(function() {
                      a2.an.info("".concat(n3, " get minisdp timeout")), s3(re.dNl);
                    }, this.yl), [2]) : [2, s3(re.BMv)] : [2, s3({ code: re.KbN.code, message: "sdp error" })];
                  });
                });
              });
            }, t3.prototype.parseMiniSdp = function(t4) {
              var i3 = this, n3 = "zc.s.prsdp";
              return this.an.info("".concat(n3, " rSDP:").concat(t4.length, " isMini")), new G.l3(function(e3, r3) {
                var s3, o2 = t4, u2 = i3.gn.miniSdpWorker, a2 = function(t5) {
                  i3.an.error("".concat(n3, " error:").concat(JSON.stringify(t5))), r3(t5);
                }, c2 = function() {
                  s3 && (clearTimeout(s3), s3 = null);
                };
                if (!o2 || !o2.byteLength)
                  return a2({ code: re.TgN.code, message: "buffer error" });
                u2 ? (u2.loadMiniSdpToOriginSdp(o2).then(function(t5) {
                  i3.an.info("".concat(n3, " parse minisdp success sdp:").concat(t5.length)), c2(), t5 ? e3(t5) : a2(re.TgN);
                }).catch(function(t5) {
                  c2(), a2(t5);
                }), s3 = setTimeout(function() {
                  i3.an.info("".concat(n3, " parse minisdp timeout")), a2(re.dNl);
                }, i3.yl)) : a2(re.BMv);
              });
            }, t3;
          }(), bc = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          };
          function _c(t3) {
            var i3, n3 = t3, e3 = function(t4) {
              var i4 = { m: [{ reg: /^(\w*) (\d*) ([\w/]*)(?: (.*))?/, names: ["type", "port", "protocol", "payloads"], format: "%s %d %s %s" }], a: [{ push: "fmtp", reg: /^fmtp:(\d*) ([\S| ]*)/, names: ["payload", "config"], format: "fmtp:%d %s" }] };
              function n4(t5, i5, n5) {
                var e5 = function(t6) {
                  return String(Number(t6)) === t6 ? Number(t6) : t6;
                }, r5 = t5.name && t5.names;
                t5.push && !i5[t5.push] ? i5[t5.push] = [] : r5 && !i5[t5.name] && (i5[t5.name] = {});
                var s4 = t5.push ? {} : r5 ? i5[t5.name] : i5;
                (function(t6, i6, n6, r6) {
                  if (r6 && !n6)
                    i6[r6] = e5(t6[1]);
                  else
                    for (var s5 = 0; s5 < n6.length; s5 += 1)
                      null != t6[s5 + 1] && (i6[n6[s5]] = e5(t6[s5 + 1]));
                })(n5.match(t5.reg), s4, t5.names, t5.name), t5.push && i5[t5.push].push(s4);
              }
              var e4 = RegExp.prototype.test.bind(/^([a-z])=(.*)/), r4 = [], s3 = {}, o2 = s3;
              return t4.split(/(\r\n|\r|\n)/).filter(e4).forEach(function(t5) {
                var e5 = t5[0], s4 = t5.slice(2);
                "m" === e5 && (r4.push({ rtp: [], fmtp: [] }), o2 = r4[r4.length - 1]);
                for (var u2 = 0; u2 < (i4[e5] || []).length; u2 += 1) {
                  var a2 = i4[e5][u2];
                  if (a2.reg && a2.reg.test(s4))
                    return n4(a2, o2, s4);
                }
              }), s3.media = r4, s3;
            }(t3), r3 = [];
            return e3.media.forEach(function(t4) {
              "video" === t4.type && t4.fmtp.forEach(function(t5) {
                i3 = "a=fmtp:" + t5.payload + " " + t5.config, -1 === t5.config.indexOf("sps-pps-idr-in-keyframe") && -1 === r3.indexOf(i3) && r3.push(i3);
              });
            }), r3.forEach(function(t4) {
              n3 = n3.replace(new RegExp(t4, "g"), t4 + ";sps-pps-idr-in-keyframe=1");
            }), n3;
          }
          function yc(t3) {
            for (var i3 = t3.split("\r\n").filter(function(t4) {
              return !t4.trim().startsWith("a=extmap-allow-mixed");
            }), n3 = [], e3 = 0, r3 = i3; e3 < r3.length; e3++) {
              var s3 = r3[e3];
              n3.push(s3), s3.trim().startsWith("a=group:BUNDLE") && n3.push("a=extmap-allow-mixed");
            }
            var o2 = n3.map(function(t4) {
              return t4.trim().startsWith("a=extmap") && t4.includes("/recvonly") ? t4.replace("/recvonly", "") : t4;
            });
            return o2.join("\r\n");
          }
          var wc = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), Sc = function() {
            return Sc = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Sc.apply(this, arguments);
          }, Ec = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, kc = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          };
          var Oc, Ic = new Uint8Array([0, 0, 0, 1, 101, 184, 0, 4, 0, 0, 9, 255, 254, 222, 35, 192, 166, 30, 73, 128]), Rc = new Uint8Array([0, 0, 0, 1, 103, 77, 64, 51, 140, 141, 78, 64, 60, 34, 17, 168, 0, 0, 0, 1, 104, 238, 60, 128]), Tc = new Uint8Array([0, 0, 0, 1, 64, 1, 12, 1, 255, 255, 1, 96, 0, 0, 3, 0, 144, 0, 0, 3, 0, 0, 3, 0, 30, 186, 2, 64, 0, 0, 0, 1, 66, 1, 1, 1, 96, 0, 0, 3, 0, 144, 0, 0, 3, 0, 0, 3, 0, 30, 160, 136, 69, 150, 233, 111, 11, 128, 64, 0, 0, 3, 0, 64, 0, 0, 3, 3, 194, 0, 0, 0, 1, 68, 1, 192, 115, 192, 137]), Cc = new Uint8Array([0, 0, 0, 1, 40, 1, 172, 26, 224, 244, 133, 49, 47, 246, 227, 105, 128]), Ac = L.Og, zc = L.v2, Dc = L.ch, Nc = Ac.error, Pc = L.Jv, Mc = function(t3) {
            function n3(n4, r3, s3, o2, u2, a2, c2, h2) {
              var f2, l2 = t3.call(this, r3, n4) || this;
              return l2.ipV6Prefer = 0, l2.ipStackNode = R.IPv4, l2.Sl = false, l2.El = [], l2.kl = [], l2.Ol = [], l2.Il = "", l2.Tl = "", l2.Cl = 500, l2.startTime = 0, l2.Al = true, l2.port = 0, l2.zl = null, l2.Dl = null, l2.Nl = 3e3, l2.Pl = 3e3, l2.Ml = 16, l2.xl = 16, l2.jl = { state: "NO_PUBLISH", code: 0 }, l2.ql = false, l2.supportTransceiver = true, l2.$u = false, l2.Ll = 0, l2.Ul = 0, l2.Gl = 0, l2.Jl = 0, l2.Fl = 0, l2.publishedTimeStamp = 0, l2.firstPublishedTimeStamp = 0, l2.validPublishedTime = 0, l2.errorTimes = 0, l2.hasSucceed = false, l2.lastFailTimeLen = 0, l2._state = 7, l2.lastState = 7, l2.Df = 0, l2.Hl = [], l2.Vl = null, l2.Ql = null, l2.Yl = null, l2.Kl = null, l2.parentSpanKey = "", l2.Zl = 0, l2.Xl = null, l2.Wl = false, l2.$l = [], l2.td = [], l2.nd = "H264", l2.ed = m.stop, l2.isExternal = false, l2.rd = 25e3, l2.sd = false, l2.od = "", l2.ud = [], l2.ipNode = null, l2.ipV4NodeList = [], l2.ipV6NodeList = [], l2.ad = 0, l2.retryFailGwNodes = [], l2.retryFailIpV4Nodes = [], l2.retryFailIpV6Nodes = [], l2.hd = false, l2.fd = 0, l2.ld = false, l2.vd = 0, l2.md = 0, l2.pd = [], l2.gd = [], l2.bd = [], l2._d = false, l2.yd = "", l2.Sd = false, l2.Ed = "", l2.kd = "", l2.Od = true, l2.Id = 0, l2.probeQuality = 0, l2.probeTime = 0, l2.probeNodeList = [], l2.probedList = [], l2.probeTimer = null, l2.Rd = 0, l2.Td = 0, l2.poorQualityRetryCnt = 0, l2.Cd = [], l2.continuousFailCnt = 0, l2.isUpdateSDP = false, l2.toBeReplacedTracks = {}, l2.send_seq = 0, l2.dataChannelState = 0, l2.Ad = 0, l2.zd = 0, l2.Dd = "", l2.Nd = [], l2.Pd = [], l2.Md = { forceSynchronousNetworkTime: 0, alignment: 0 }, l2.xd = { isSEIStart: false, SEIType: i2.ZegoDefined, unregisterSeiFilter: "", uuidSend: false, track: null }, l2.jd = 0, l2.reportPublishStateTime = 0, l2.isRePublish = false, l2.rtcPublishCount = 0, l2.stopReason = "", l2.signalTime = 0, l2.qd = ((f2 = {}).PublishEventPush = { seq: -1, time: 0 }, f2.ClientInfoPush = { seq: -1, time: 0 }, f2), l2.Ld = true, l2.Bd = false, l2.ip = "", l2.Ud = { lanIP: "", wanIP: "", intranet: false }, l2.encodeLowVideoFrame = function(t4, i3) {
                l2.encodeFrame(t4, i3, true);
              }, l2.encodeVideoFrame = function(t4, i3) {
                l2.xd.track ? l2.encodeFrameAudioOnly(t4, i3, false) : l2.encodeFrame(t4, i3, false);
              }, l2.recvLastKeyFrameTime = 0, l2.camera_status = 2, l2.mic_status = 2, l2.Gd = false, l2.Fd = 0, l2.Hd = void 0, l2.ou = { onUaSocketConnected: function() {
                var t4;
                l2.info("zc.p.0.eh.0 ".concat(null === (t4 = l2.Hd) || void 0 === t4 ? void 0 : t4.length, " gwNode: ").concat(l2.od)), l2.Hd && (l2.od = "", l2.getDispatchIPNodeMode(), l2.Vd.apply(l2, l2.Hd), l2.Hd = void 0);
              } }, l2.id = gt("".concat(a2.appid, "_").concat(c2.idName, "_").concat(n4, "_").concat(Date.now(), "_").concat((0, e2.Mo)())), l2.va = n4, l2.dataReport = s3, l2.qualityTimeInterval = o2, l2.gn = a2, l2.pn = c2, l2.nd = l2.au("publish_video_codec"), l2.mn = h2, l2.xu = h2.localStream, l2.Qd = h2.zegoCaptureStream, l2.$u = l2.pn.isMiniSdp, l2.$u && (l2.Yd = new gc(a2, r3, n4)), l2.Kd = new cc(r3, true, n4), l2.Zd = new vc(l2, c2), l2.Qd && l2.Qd.startPublish(), h2.onAudioTrackChange = function(t4) {
                var i3 = l2.audioSender;
                l2.previewer.isAudioEnabled && (i3 ? (i3.replaceTrack(t4), l2.info("zc.oatc remote audio track change success")) : l2.warn("zc.oatc stream has not sender"));
              }, l2.initStreamReport(), l2.qualityHandler = new rc(l2.qualityTimeInterval, u2, l2, r3, l2.dataReport, l2.pn, l2.gn), l2.qualityHandler.onPublishingError = function(t4) {
                l2.publishStateUpdateError(t4);
              }, l2;
            }
            return wc(n3, t3), Object.defineProperty(n3.prototype, "Xd", { get: function() {
              return this.gn.agentIpStackDetection.IPv4 === A.reachable;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "signal", { get: function() {
              return this.Wd;
            }, enumerable: false, configurable: true }), n3.prototype.updateCBState = function(t4) {
              var i3 = this, n4 = Object.keys(t4).some(function(n5) {
                return t4[n5] !== i3.jl[n5];
              });
              return n4 && (this.jl = t4), n4;
            }, Object.defineProperty(n3.prototype, "state", { get: function() {
              return this._state;
            }, set: function(t4) {
              this.lastState = this._state, this._state = t4;
            }, enumerable: false, configurable: true }), n3.prototype.createSEIWorker = function() {
              return this.gn.createSEIWorker();
            }, Object.defineProperty(n3.prototype, "seiWorker", { get: function() {
              return this.gn.seiWorker;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "sessionId", { get: function() {
              return this.Df;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "videoInfo", { get: function() {
              return this.Ka;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "Ka", { get: function() {
              return this.previewer.videoInfo;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "targetVBitrate", { get: function() {
              return 0 === this.camera_status ? this.Ka.bitRate : 0;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "lowStreamVBitrate", { get: function() {
              return this.mn.lowStreamConfig.bitRate;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "Sc", { get: function() {
              return this.previewer.mediaStreamConfig;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "streamId", { get: function() {
              return this.va;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "localStream", { get: function() {
              return this.xu;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "peerConnection", { get: function() {
              return this.Xl;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "stateNego", { get: function() {
              return this.ed;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "publishOption", { get: function() {
              return this.$d;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "gwNode", { get: function() {
              return this.od;
            }, set: function(t4) {
              this.od = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "gwNodeList", { get: function() {
              return this.ud;
            }, set: function(t4) {
              this.ud = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "gwNodesTTL", { get: function() {
              return this.ad;
            }, set: function(t4) {
              this.ad = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "isNodesEmpty", { get: function() {
              return this.ipNodeType === C.ZV4Only ? 0 === this.ud.length : this.ipNodeType === C.ZV4Priority ? 0 === this.ipV4NodeList.length : (this.ipNodeType === C.ZV6Priority || 0 === this.ipV4NodeList.length) && 0 === this.ipV6NodeList.length;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "isPeer", { get: function() {
              return this.Od;
            }, set: function(t4) {
              this.Od = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "peerID", { get: function() {
              return this.Id;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "dataChannel", { get: function() {
              return this.Pf;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "sideMediaConfig", { get: function() {
              return this.xd;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "publishStat", { get: function() {
              return this.qualityHandler.publishStat;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "previewer", { get: function() {
              return this.mn;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "probeState", { get: function() {
              return this.qualityHandler.probeState;
            }, set: function(t4) {
              this.qualityHandler.probeState = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "netQuality", { get: function() {
              return this.qualityHandler.hf;
            }, set: function(t4) {
              this.qualityHandler.hf = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "qualityGrade", { get: function() {
              var t4 = this.qualityHandler.Wh;
              return Math.max(t4.video.videoQuality, t4.audio.audioQuality);
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "isLowVideoQuality", { get: function() {
              var t4, i3, n4, e3, r3, s3;
              if (0 !== this.camera_status)
                return false;
              var o2 = this.videoInfo.width || (null === (i3 = null === (t4 = this.videoSender) || void 0 === t4 ? void 0 : t4.track) || void 0 === i3 ? void 0 : i3.getSettings().width), u2 = this.videoInfo.height || (null === (e3 = null === (n4 = this.videoSender) || void 0 === n4 ? void 0 : n4.track) || void 0 === e3 ? void 0 : e3.getSettings().height), a2 = this.qualityHandler.Wh.video;
              if (o2 && u2 && o2 > a2.frameWidth && o2 > a2.frameHeight)
                return true;
              var c2 = this.videoInfo.frameRate || (null === (s3 = null === (r3 = this.videoSender) || void 0 === r3 ? void 0 : r3.track) || void 0 === s3 ? void 0 : s3.getSettings().frameRate);
              return !!(c2 && c2 - a2.videoFPS > 5);
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "lastPublishStats", { get: function() {
              return this.qualityHandler.cf;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "webrtcProtocol", { get: function() {
              return this.qualityHandler.df;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "lowStream", { get: function() {
              var t4;
              return null === (t4 = this.mn) || void 0 === t4 ? void 0 : t4.lowStream;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "isStateRetry", { get: function() {
              return [m.stop, m.iceClosed, m.iceFailed].includes(this.ed);
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "iceStateDisConnect", { get: function() {
              return [m.iceClosed, m.iceDisconnected, m.iceFailed].includes(this.ed);
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "isLastConnected", { get: function() {
              return 6 === this.lastState;
            }, enumerable: false, configurable: true }), Object.defineProperty(n3.prototype, "netProtocol", { get: function() {
              return this.Bd ? "tcp" : this.Ld ? this.webrtcProtocol : "udp";
            }, enumerable: false, configurable: true }), n3.prototype.au = function(t4, i3) {
              return void 0 === i3 && (i3 = false), this.pn.settingConfig.getSetting(t4, i3);
            }, Object.defineProperty(n3.prototype, "Xh", { get: function() {
              return 6 === this.state;
            }, enumerable: false, configurable: true }), n3.prototype.isTcVideoPasued = function() {
              return this._d;
            }, n3.prototype.setSendMuteImage = function(t4) {
              this.Sd = t4;
            }, n3.prototype.setSignal = function(t4) {
              this.Wd !== t4 && (this.Wd = t4, this.Kd.webrtcCenterServerSignal = t4);
            }, n3.prototype.initStreamReport = function() {
              this.tv = this.cr.createSpan(e2.t0.I, { key: L.Og.event, par: this.va }, { key: zc.event, par: this.va }, zc.event, true), this.jd = (/* @__PURE__ */ new Date()).getTime();
            }, n3.prototype.checkAutoTcp = function() {
              var t4 = lt();
              this.info("zc.p.0.cat  ".concat(t4, " ").concat(this.Od)), this.Ld = !(!t4 || !this.Od);
            }, n3.prototype.publishStateUpdateError = function(t4, i3, n4, r3) {
              this.error(Co.CcO + "  call " + JSON.stringify(t4));
              var s3 = this.cr.createSpan(e2.t0.H, { key: L.Og.event, par: this.va }, { key: "" }, L._T.event);
              s3.setAttributes({ error: null == t4 ? void 0 : t4.code, message: null == t4 ? void 0 : t4.message }), s3.end(), this.va && this.onPublishStateUpdate(e2.eZ.error, this.va, t4, i3, n4, r3), this.info(Co.CcO + "  ended");
            }, n3.prototype.netProbeToReDispatch = function(t4, i3) {
              var n4;
              void 0 === t4 && (t4 = function() {
              }), void 0 === i3 && (i3 = function() {
              }), this.ql = true;
              var e3 = null === (n4 = this.gn.publisherList[this.va]) || void 0 === n4 ? void 0 : n4.retryStreamHandler;
              e3 && e3.dispatchGwNodesBypass(this, t4, i3);
            }, n3.prototype.resetPublish = function(t4) {
              this.info(Co.zC0 + " call");
              var i3 = this.Zd.getLastVideoBitrate();
              if (i3) {
                var n4 = this.Zd.getBandwide();
                this.info("".concat(Co.BsE, " update ref bitrate: ").concat(i3, ", bw: ").concat(n4)), this.gn.updateReferenceBitrate(i3);
              }
              this.closeSession(t4), this.state = 7, this.sd = false, null == this.Xl && null == this.Xl || (this.Xl.close(), this.Xl = null, this.videoSender = void 0, this.lowVideoSender = void 0, this.audioSender = void 0), this.nv && (this.nv = null), this.ev && (this.ev = null), this.resetIceInfos(), this.resetNat64Infos(), this.Dd = "", this.ip = "", this.Dl && (this.Dl = null), null !== this.rv && (clearTimeout(this.rv), this.rv = null), null !== this.sv && (clearTimeout(this.sv), this.sv = null), null != this.av && (clearTimeout(this.av), this.av = null), null != this.cv && (clearTimeout(this.cv), this.cv = null), this.hv && (clearTimeout(this.hv), this.hv = null), this.fv && (clearTimeout(this.fv), this.fv = null), this.qualityHandler.clearPublishQualityTimer(), this._clearCanvasTimer(), this.unregisterMsgCallback(), this.Kd.reset(), this.lv = 0, this.Zl = 0, this.Hl = [], this.Hd = void 0, this.resetEncBitrate(), this.isUpdateSDP = false, this._d = false, this.yd = "", this.Sd = false, this.Ed = "", this.kd = "", this.Ml = 16, this.xl = 16;
            }, n3.prototype._clearCanvasTimer = function() {
              var t4;
              null != this.Vl && (clearInterval(this.Vl), null === (t4 = this.xd.track) || void 0 === t4 || t4.stop(), this.xd.track = null, this.Vl = null, this.Ql = null, this.Yl = null, this.Kl = null);
            }, n3.prototype.resetPushCmdSeqMap = function() {
              var t4;
              this.qd = ((t4 = {}).PublishEventPush = { seq: -1, time: 0 }, t4.ClientInfoPush = { seq: -1, time: 0 }, t4);
            }, n3.prototype.dv = function() {
              var t4 = this;
              this.Kd.registerPushCallback("CloseSessionPush", function(i3, n4, e3) {
                32 === e3.reason && (t4.$u = false, t4.pn.$u = false, t4.Jl = performance.now() - t4.Fl), t4.vv(i3, n4, e3);
              }), this.Kd.registerPushCallback("SessionResetPush", function(i3, n4, e3) {
                t4.mv(i3, n4, e3);
              }), this.Kd.registerPushCallback("PublishEventPush", function(i3, n4, e3) {
                t4.pv(i3, n4, e3);
              }), this.Kd.registerPushCallback("ClientInfoPush", function(i3, n4, e3) {
                t4.gv(i3, e3.peer_id, e3.clientip || e3.client_ip);
              }), this.Kd.registerPushCallback("PublishNetStatNotify", function(i3, n4, e3) {
                t4.qualityHandler.updateGwPublishNetState({ videoRecvBitrate: e3.video_recv_bitrate, trafficControlStat: e3.traffic_control_stat, videoLostRate: e3.video_lost_rate, audioRecvBitrate: e3.audio_recv_bitrate, audioLostRate: e3.audio_lost_rate });
              });
            }, n3.prototype.unregisterMsgCallback = function() {
              this.Kd.unregisterPushCallback("CloseSessionPush"), this.Kd.unregisterPushCallback("SessionResetPush"), this.Kd.unregisterPushCallback("PublishEventPush"), this.Kd.unregisterPushCallback("ClientInfoPush");
            }, n3.prototype.startPublish = function(t4, i3, n4, e3) {
              var r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2 = this;
              if (this.info(Co.QRg + " called"), t4) {
                if (this.checkAutoTcp(), this.$u && !this.Fl && (this.Fl = performance.now()), this.state = 0, this.Wl = false, this.xu = i3, this.$d = n4 || {}, this.Zd.stop(), this._d = false, this.yd = "", (0, B.dd)(this.$d.enableDTX)) {
                  var O2 = this.au("dtx", true);
                  this.$d.enableDTX = void 0 !== O2 ? !!O2 : this.$d.enableDTX;
                } else
                  this.$d.enableDTX = !!this.au("dtx");
                var I2;
                (null === (r3 = this.$d) || void 0 === r3 ? void 0 : r3.SEIType) && (this.xd.SEIType = this.$d.SEIType), this.qualityHandler.Wh.video.muteState = (null === (o2 = null === (s3 = this.mn) || void 0 === s3 ? void 0 : s3.videoTrack) || void 0 === o2 ? void 0 : o2.enabled) ? "0" : "1", this.qualityHandler.Wh.audio.muteState = this.xu.getAudioTracks().length > 0 && this.xu.getAudioTracks()[0].enabled ? "0" : "1", (null === (u2 = this.$d) || void 0 === u2 ? void 0 : u2.videoCodec) && (this.nd = this.$d.videoCodec);
                var R2 = null === (a2 = this.mn) || void 0 === a2 ? void 0 : a2.videoPreviewType;
                switch (R2) {
                  case "camera":
                    I2 = this.au("camera_video_bitrate", true);
                    break;
                  case "screen":
                    I2 = this.au("screen_video_bitrate", true);
                    break;
                  case "custom":
                    I2 = this.au("custom_video_bitrate", true);
                }
                void 0 !== I2 && (this.info(Co.QRg + " setting " + R2 + " " + I2), this.Ka.bitRate = I2);
                var T2 = this.au("bitrate_mode", true);
                T2 && (this.info(Co.QRg + " setting bitrate_mode " + T2), this.Ka.startBitrate = T2);
                var C2 = this.au("publish_video_codec", true);
                if (C2 && (this.info(Co.QRg + " setting publish_video_codec " + C2), this.nd = C2), (0, B.dd)(null === (c2 = this.$d) || void 0 === c2 ? void 0 : c2.isSEIStart) && (this.xd.isSEIStart = this.$d.isSEIStart), this.xd.isSEIStart) {
                  var A2 = ft();
                  ("H264" !== this.nd && "H265" !== this.nd || !A2) && (this.warn(Co.QRg + " not use sei; support: ".concat(A2, ", codec: ").concat(this.nd, " ")), this.xd.isSEIStart = false);
                }
                (null === (h2 = this.pn.seiConfig) || void 0 === h2 ? void 0 : h2.unregisterSEIFilter) && (this.xd.unregisterSeiFilter = null === (f2 = this.pn.seiConfig) || void 0 === f2 ? void 0 : f2.unregisterSEIFilter), 9 === this.pn.scenario && (this.Md.forceSynchronousNetworkTime = 1), [0, 1].includes(null === (l2 = this.$d) || void 0 === l2 ? void 0 : l2.forceSynchronousNetworkTime) && (this.Md.forceSynchronousNetworkTime = null === (d2 = this.$d) || void 0 === d2 ? void 0 : d2.forceSynchronousNetworkTime);
                var z2 = 0, D2 = 0;
                (null === (v2 = this.$d) || void 0 === v2 ? void 0 : v2.trafficControlMinVideoBitrate) && (z2 = this.$d.trafficControlMinVideoBitrate), (0, B.TE)(this.$d.trafficControlFocusOnMode) || (D2 = this.$d.trafficControlFocusOnMode);
                (0, B.dd)(this.$d.enableTrafficControl) && this.Zd.setEnable(this.$d.enableTrafficControl);
                var N2 = 0, P2 = 0;
                if (this.Ka.bitRate && "target" === this.Ka.startBitrate && (N2 = this.Ka.bitRate), z2 > 0)
                  P2 = z2;
                else if (this.Ka.minBitrate)
                  P2 = this.Ka.minBitrate;
                else if ("screen" === this.mn.previewType) {
                  var M2 = function(t5) {
                    var i4 = 0, n5 = t5.frameRate, e4 = t5.width * t5.height * (n5 <= 30 ? n5 : 30);
                    return (0, B.Cs)(e4) ? (i4 = e4 <= 3888e3 ? 200 : e4 <= 6912e3 ? 400 : e4 <= 15552e3 ? 700 : e4 <= 27648e3 ? 1e3 : 2e3) > t5.bitRate && (i4 = t5.bitRate) : i4 = parseInt(0.6 * t5.bitRate + ""), { minBitrate: i4, resolution: e4 };
                  }(this.Ka);
                  P2 = M2.minBitrate, this.info(Co.QRg + " resolution: ".concat(M2.resolution, ", min bitrate: ").concat(P2));
                }
                if (this.Zd.setVideoBitrate(this.Ka.bitRate), this.Zd.setMinVideoBitrate(P2), this.Zd.setStartVideoBitrate(N2), isNaN(this.Ka.audioBitrate) || this.Zd.setAudioBitrate(this.Ka.audioBitrate), this.Zd.enableVideo(!!(null === (m2 = this.mn) || void 0 === m2 ? void 0 : m2.videoTrack)), (0, B.Cs)(this.$d.trafficControlMinVideoMode) && this.Zd.setMinVideoBitrateMode(this.$d.trafficControlMinVideoMode), this.canSetBandWidthBySender() && null != e3 && e3 > 0) {
                  var x2 = this.au("ref_bitrate_on");
                  (null != x2 ? x2 : this.pn.engineConfig.enableReferenceBitrate) && !this.mn.enableDualStream && this.Zd.setReferenceVideoBitrate(e3);
                }
                this.Zd.updateVideoTargetBitrate = function(t5) {
                  k2.applyVideoBitrate(t5);
                }, this.Zd.pauseVideo = function() {
                  k2.onTcPauseVideo();
                }, this.Zd.resumeVideo = function() {
                  k2.onTcResumeVideo();
                }, this.Zd.start(), this.cr.spanSetAttributes({ key: Ac.event, par: this.va }, { video_en_codec_id: Ac.video_en_codec_id(this.getCodecId(this.nd)), audio_c_channel_count: Ac.audio_c_channel_count(2 == this.Ka.channelCount ? 2 : 1), audio_en_bps: Ac.audio_en_bps(this.Ka.audioBitrate), aec_level: Ac.aec_level(1 == this.Sc.AEC ? 2 : 0 == this.Sc.AEC ? 0 : 2), ans_level: Ac.ans_level(1 == this.Sc.ANS ? 2 : 0 == this.Sc.ANS ? 0 : 2), agc: Ac.agc(1 == this.Sc.AGC || 0 != this.Sc.AGC), video_activate: Ac.video_activate(!!(null === (g2 = null === (p2 = this.mn) || void 0 === p2 ? void 0 : p2.videoTrack) || void 0 === g2 ? void 0 : g2.enabled)), audio_activate: Ac.audio_activate(!!(null === (_2 = null === (b2 = this.mn) || void 0 === b2 ? void 0 : b2.audioTrack) || void 0 === _2 ? void 0 : _2.enabled)), scenario: this.pn.scenario, traffic_control_min_video_bitrate: { bitrate: Ac.traffic_control_min_video_bitrate.bitrate(z2), mode: Ac.traffic_control_min_video_bitrate.mode(D2) }, cap_volume: this.previewer.volume, is_peer: Ac.is_peer(this.Od) }), this.tv.setAttributes({ room_id: zc.room_id(null === (w2 = null === (y2 = this.gn.publisherList[this.va]) || void 0 === y2 ? void 0 : y2.room) || void 0 === w2 ? void 0 : w2.roomID), room_sid_string: zc.room_sid_string(null === (E2 = null === (S2 = this.gn.publisherList[this.va]) || void 0 === S2 ? void 0 : S2.room) || void 0 === E2 ? void 0 : E2.roomSessionID), max_retry_interval: zc.max_retry_interval(this.pn.streamRetryTime), scenario: this.pn.scenario, use_resource_type: zc.use_resource_type(["rtc"]) }), this.Od ? this.bv({ encodedInsertableStreams: this.xd.isSEIStart }) : this.Vd(), null != this.av && (clearTimeout(this.av), this.av = null), this.av = setTimeout(function() {
                  k2.error(Co.QRg + " waiting timeout"), k2.publishStateUpdateError(Nc.Hn);
                }, this.rd);
              } else
                this.error(Co.QRg + " " + t4 + " streamId is null");
            }, n3.prototype.Vd = function(t4) {
              var i3, n4, r3, s3, o2, u2 = this;
              if (!(null === (i3 = this.Wd) || void 0 === i3 ? void 0 : i3.isUaConnected))
                return this.info(Co.QRg + " wait to create session"), this.Hd = [t4], void this.Wd.on("uaConnected", this.ou.onUaSocketConnected);
              this.lv = (0, e2.Mo)();
              var a2 = this.va;
              1 == this.gn.testEnvironment && (a2 = "zegotest-" + this.gn.appid + "-" + this.va), this.gn.gwNode && (this.od = this.gn.gwNode);
              var c2 = this.au("gw_nodes");
              c2 && (0, B.C9)(c2) && c2.length > 0 && (this.info(Co.QRg + " setting " + JSON.stringify(c2)), this.ud = c2, this.od = this.ud[0] || this.od), this.setTurnTcp();
              var h2 = this.au("udp_or_tcp", true);
              h2 && (this.info(Co.QRg + " setting udp_or_tcp " + h2), this.Bd = "tcp" === h2), this.Bd && (this.Od = false, this.Ld = false);
              var f2 = (null === (r3 = null === (n4 = this.gn.publisherList[this.va]) || void 0 === n4 ? void 0 : n4.room) || void 0 === r3 ? void 0 : r3.roomID) || (null === (s3 = this.pn.roomList[0]) || void 0 === s3 ? void 0 : s3.roomID);
              this.getIPStackNode(), this.info("".concat(Co.QRg, " session req, seq: ").concat(this.lv, " gwNode: ").concat(this.od, ", ipNodeType: ").concat(this.ipNodeType, ", ").concat(this.Od ? "peer" : "turn", ", ipv6_prefer: ").concat(this.ipV6Prefer));
              var l2 = this._v(f2), d2 = l2.params, v2 = l2.paramsExt;
              this.yv = v2;
              var p2 = L._g, g2 = function() {
                u2.state = 1, u2.info(Co.QRg + " called success"), u2.ed = m.start;
              };
              if (this.Od) {
                this.getLocalMiniSdp(t4.sdp, function(i4) {
                  var n5 = (/* @__PURE__ */ new Date()).getTime(), r4 = u2.getSpan(L._g.event, u2.parentSpanKey), s4 = {};
                  i4 ? (u2.info(Co.QRg + " isMini"), s4.miniSdp = i4) : s4.sdp = t4.sdp, r4.setAttributes({ server_host: u2.od, ip_mode: u2.ipV6Prefer, req_params_ext: v2 }), u2.Kd.createSessionWithSdp(Sc(Sc({ seq: u2.lv, type: 0, mode: 0, streamId: a2, videoInfo: u2.Ka, strAuthParam: u2.$d && u2.$d.streamParams || "" }, s4), { serverHost: u2.od, params: d2, paramsExt: v2, roomID: f2, geo: { type: u2.gn.geo.type, areaList: u2.gn.geo.areaList }, ipV6Prefer: u2.ipV6Prefer }), function(t5, i5, e3) {
                    return Ec(u2, void 0, void 0, function() {
                      var s5;
                      return kc(this, function(o3) {
                        return s5 = (/* @__PURE__ */ new Date()).getTime(), this.info(Co.QRg + " create session time " + (s5 - n5)), To(e3), this.pn.ia(r4, { sdp: e3.sdp }), r4.setAttributes({ webrtc_sid: i5, is_mini: p2.is_mini(this.$u), gw_nodes: p2.gw_nodes(e3.gw_nodes), ip_infos: e3.ips, ip_v6_infos: e3.ipv6s, gw_nodes_ttl: p2.gw_nodes(e3.gw_nodes_ttl), gw_version: p2.gw_version(e3.gw_version), rsp_params_ext: e3.params_ext }), r4.end(), this.cr.spanSetAttributes({ key: Ac.event, par: this.va }, { gw_version: Ac.gw_version(e3.gw_version) }), this.ed !== m.iceConnected && this.getSpan(L.Ov.event, this.parentSpanKey, "", true), this.wv(t5, i5, e3, this.ipV6Prefer), [2];
                      });
                    });
                  }, function(t5, i5) {
                    if (u2.lv == i5) {
                      var n6 = t5 == e2.Xb ? Nc.Yn : Nc.Kn;
                      u2.info(Co.QRg + " create session fail. signal: ".concat(u2.Wd.state, "; ws: ").concat(u2.Wd.mediaState)), u2.cr.setError(r4, n6), u2.publishStateUpdateError(n6);
                    } else
                      u2.warn(Co.QRg + " seq is not match.");
                  }), g2();
                });
              } else {
                var b2 = this.getSpan(L._g.event, this.parentSpanKey);
                b2.setAttributes({ server_host: this.od, ip_mode: this.ipV6Prefer });
                var _2 = { type: 0, mode: 0, streamID: a2, strAuthParam: (null === (o2 = this.$d) || void 0 === o2 ? void 0 : o2.streamParams) || "", serverHost: this.od, params: d2, roomID: f2, geo: { type: this.gn.geo.type, areaList: this.gn.geo.areaList }, ipV6Prefer: this.ipV6Prefer };
                this.Kd.createSession(this.lv, _2, function(t5, i4, n5) {
                  return Ec(u2, void 0, void 0, function() {
                    return kc(this, function(e3) {
                      return To(n5), b2.setAttributes({ webrtc_sid: p2.webrtc_sid(i4), gw_nodes: p2.gw_nodes(n5.gw_nodes), ip_infos: n5.ips, ip_v6_infos: n5.ipv6s, gw_nodes_ttl: p2.gw_nodes(n5.gw_nodes_ttl), gw_version: p2.gw_version(n5.gw_version) }), b2.end(), this.cr.spanSetAttributes({ key: Ac.event, par: this.va }, { gw_version: Ac.gw_version(n5.gw_version) }), this.Sv(t5, i4, n5, this.ipV6Prefer), [2];
                    });
                  });
                }, function(t5, i4) {
                  if (u2.lv == i4) {
                    var n5 = t5 == e2.Xb ? Nc.Yn : Nc.Kn;
                    u2.cr.setError(b2, n5), u2.publishStateUpdateError(n5);
                  } else
                    u2.warn(Co.QRg + " seq is not match.");
                }), g2();
              }
            }, n3.prototype.Sv = function(t4, i3, n4, e3) {
              var r3, s3, o2, u2 = n4.turn_server, a2 = u2.split("?")[0] && u2.split("?")[0].slice(5), c2 = this.signal.Ev, h2 = "webrtc://".concat(a2, "/").concat(c2, "/").concat(this.va);
              if (this.cr.spanSetAttributes({ key: this.parentSpanKey, par: this.va }, { webrtc_sid: n4.session_id, url: h2 }), this.info(Co.QRg + " sessionId:" + n4.session_id), this.lv == t4) {
                this.resetPushCmdSeqMap();
                var f2 = n4.client_ip || n4.clientip;
                f2 && (this.pn.clientIP = f2), this.Id = n4.peer_id;
                var l2 = 0, d2 = (/* @__PURE__ */ new Date()).getTime();
                if (this.jd && (this.info(Co.QRg + " create signal time " + (l2 = d2 - this.jd)), this.signalTime = l2), this.zd = d2, 0 !== n4.result) {
                  if (this.error(Co.QRg + " create session failed " + n4.result), 1021 === (null == n4 ? void 0 : n4.result))
                    return void this.publishStateUpdateError(re.mHY, true);
                  if (2012 === (null == n4 ? void 0 : n4.result))
                    return void this.publishStateUpdateError(Nc.fe, true);
                  2016 === (null == n4 ? void 0 : n4.result) && e3 === T.kV6AndV4 && (this.Al = false), this.publishStateUpdateError(Nc.Kn);
                } else
                  this.Df = n4.session_id, this.Wl = true, this.info(Co.QRg + " create session success " + this.Df), this.setGwNodes(n4, false, e3, t4), e3 === T.kV6AndV4 && (null === (r3 = null == n4 ? void 0 : n4.ipv6s) || void 0 === r3 ? void 0 : r3.length) > 0 && (this.Al = true), (null === (s3 = null == n4 ? void 0 : n4.ipv4s) || void 0 === s3 ? void 0 : s3.length) > 0 && (null === (o2 = null == n4 ? void 0 : n4.ipv6s) || void 0 === o2 ? void 0 : o2.length) > 0 && this.checkIfToRestart(e3), this.info(Co.QRg + " isRestartIce " + this.Sl), this.kv(n4);
              } else
                this.error(Co.QRg + " seq is not match.");
            }, n3.prototype.wv = function(t4, i3, n4, e3) {
              var r3, s3, o2, u2 = this;
              if (this.info(Co.QRg + " sessionId:" + i3), this.lv == t4) {
                this.resetPushCmdSeqMap();
                var a2 = n4.client_ip || n4.clientip;
                a2 && (this.pn.clientIP = a2), this.Id = n4.peer_id;
                var c2 = 0, h2 = (/* @__PURE__ */ new Date()).getTime();
                if (this.jd && (this.info(Co.QRg + " create signal time " + (c2 = h2 - this.jd)), this.signalTime = c2), this.zd = h2, 0 !== n4.result) {
                  if (108 === n4.result) {
                    if ("H265" === this.nd) {
                      if (!this.publishOption.enableAutoSwitchVideoCodec)
                        return void this.publishStateUpdateError(Nc.le, true, "not support H265 codec");
                      this.$d.videoCodec = "H264", this.info("".concat(Co.QRg, " switch video codec to ").concat(this.$d.videoCodec));
                    }
                  } else
                    110 === n4.result && (this.$u = false, this.pn.$u = false, this.Jl = performance.now() - this.Fl, this.Ll = 2);
                  if (this.error(Co.QRg + " create session failed " + n4.result), 1021 === (null == n4 ? void 0 : n4.result))
                    return void this.publishStateUpdateError(re.mHY, true);
                  if (2012 === (null == n4 ? void 0 : n4.result))
                    return void this.publishStateUpdateError(Nc.fe, true);
                  2016 === (null == n4 ? void 0 : n4.result) && e3 === T.kV6AndV4 && (this.Al = false), this.publishStateUpdateError({ code: Nc.Kn.code, message: Nc.Kn.message + " result:" + n4.result });
                } else
                  this.Df = i3, this.Wl = true, this.setGwNodes(n4, false, e3, t4), this.info(Co.QRg + " get remote session success "), e3 === T.kV6AndV4 && (null === (r3 = null == n4 ? void 0 : n4.ipv6s) || void 0 === r3 ? void 0 : r3.length) > 0 && (this.Al = true), (null === (s3 = null == n4 ? void 0 : n4.ipv4s) || void 0 === s3 ? void 0 : s3.length) > 0 && (null === (o2 = null == n4 ? void 0 : n4.ipv6s) || void 0 === o2 ? void 0 : o2.length) > 0 && this.checkIfToRestart(e3), this.info(Co.QRg + " isRestartIce " + this.Sl), this.dv(), this.parseRemoteSdp(n4, function(t5) {
                    if (u2.Ld) {
                      if (u2.info(Co.QRg + " fully auto tcp"), !u2.setConfiguration(t5, n4.params_ext))
                        return void u2.publishStateUpdateError(re.akb, false);
                      u2.setLocalSdp(u2.ev);
                    }
                    u2.Iv(t5, void 0, n4.params_ext, null == n4 ? void 0 : n4.mini_sdp);
                  }, function(t5) {
                    u2.publishStateUpdateError(t5);
                  });
              } else
                this.error(Co.QRg + " seq is not match.");
            }, n3.prototype.Rv = function(t4) {
              var i3, n4 = this;
              if (this.info(Co.qPT + " 1"), t4) {
                var e3 = t4.candidate, r3 = t4.sdpMid, s3 = t4.sdpMLineIndex;
                if (e3)
                  this.info(Co.qPT + " addIceCandidate"), null === (i3 = this.Xl) || void 0 === i3 || i3.addIceCandidate(new RTCIceCandidate({ sdpMid: r3, sdpMLineIndex: s3, candidate: e3 })).then(function() {
                    n4.info(Co.qPT + " add can suc");
                  }).catch(function(t5) {
                    n4.info(Co.qPT + " add can fail, ".concat(t5.message));
                  });
              }
            }, n3.prototype._v = function(t4) {
              var i3 = "", n4 = [], e3 = {}, r3 = this.pn.seiConfig.SEIPass;
              (0, B.dd)(r3) && (e3.sei_filter_pass = r3 ? 1 : 0), e3.auto_switch_turn_type = "firefox" === this.pn.browser ? 2 : 1, this.pn.idName && n4.push("zguid=" + this.pn.idName), t4 && n4.push("zgrid=" + t4), this.gn.isProxy && (e3.zg_proxy = 1), 1 === this.Md.forceSynchronousNetworkTime && (e3.sync_ntp = 1);
              var s3 = this.$d, o2 = s3.setDeviceDelayByUser, u2 = s3.trafficControlFocusOnMode, a2 = s3.enableTrafficControl;
              isNaN(o2) || (e3.ktv_device_delay = o2), (0, B.dd)(a2) && (e3.tc_type = a2 ? 0 : 2), isNaN(u2) || (e3.tc_focuson_mode = 0 == u2 ? 1 : 0);
              var c2 = (0, Pe.UN)(), h2 = this.au("vid_clock_rate_est");
              (c2 && (c2.includes("18_4") || c2.includes("18_5")) || h2) && (e3.enable_vid_clock_rate_est = 1);
              var f2 = this.Zd.getMinVideoBitrate();
              f2 > 0 && (e3.tc_min_video_kbps = f2 < 0.7 * this.Ka.bitRate ? f2 : 0.7 * this.Ka.bitRate);
              return e3.proto_flags = 2, this.au("peer_signal_over_dc") && (e3.proto_flags |= 256), n4.length > 0 && (i3 = n4.join("&")), { params: i3, paramsExt: e3 };
            }, n3.prototype.getDispatchIPNodeMode = function() {
              if (!this.od) {
                this.info("zc.p.0.gdinm call");
                var t4 = this.gn.getStreamIPNodesMode(), i3 = t4.ipNodeType;
                this.ipV6Prefer = t4.ipV6Prefer, this.ipNodeType = i3, this.ipV6Prefer === T.kV6AndV4 && !this.Al && this.Xd && (this.ipV6Prefer = T.kV4AndV6, this.ipNodeType = C.ZV4Priority), this.info("zc.p.0.gdinm ".concat(this.ipV6Prefer, " ").concat(this.ipNodeType));
              }
            }, n3.prototype.getRetryIPNodeMode = function() {
              if (this.info("zc.p.0.grinm call"), this.ipV6Prefer === T.kV4Only)
                this.ipNodeType = C.ZV4Only;
              else {
                var t4 = this.gn.getRetryIPPreferNodeType().ipNodeType;
                this.ipNodeType = t4;
              }
              this.info("zc.p.0.grinm ".concat(this.ipV6Prefer, " ").concat(this.ipNodeType));
            }, n3.prototype.getRetryIPv6Prefer = function() {
              this.ipV6Prefer = this.gn.getIPv6PreferByGwNode(this.gwNode);
            }, n3.prototype.checkIfToRestart = function(t4) {
              this.Sl = t4 !== T.kV4Only && (this.ipNodeType === C.ZV6AndV4Priority || this.pn.selectIPStackMode === y.IPv4Prefer && this.gn.agentIpStackDetection.IPv4 === A.reachable && this.ipNodeType === C.ZV6Priority);
            }, n3.prototype.getIPStackNode = function() {
              if (this.gwNode) {
                var t4 = ao(this.gwNode);
                this.ipStackNode = Hs(t4);
              } else
                this.ipStackNode = [C.ZV4Only, C.ZV4Priority].includes(this.ipNodeType) ? R.IPv4 : R.IPv6;
            }, n3.prototype.setGwNodes = function(t4, i3, n4, e3) {
              var r3, s3, o2;
              if (this.info("".concat(Co.JGn, " seq: ").concat(e3, ", gw_nodes: ").concat(JSON.stringify(null == t4 ? void 0 : t4.gw_nodes), ", ips: ").concat(JSON.stringify(t4.ips), ", ipv6s: ").concat(JSON.stringify(t4.ipv6s), ", ").concat(n4)), this.info("".concat(Co.JGn, " seq: ").concat(e3, ", retry: ").concat(JSON.stringify(this.retryFailGwNodes), ", ips: ").concat(JSON.stringify(this.retryFailIpV4Nodes), ", ipv6s: ").concat(JSON.stringify(this.retryFailIpV6Nodes))), 0 === n4) {
                if ((null === (r3 = t4.gw_nodes) || void 0 === r3 ? void 0 : r3.length) > 0) {
                  var u2 = vo(t4.gw_nodes, this.retryFailGwNodes, i3);
                  this.retryFailGwNodes = [], this.handleDispatchedGwNodes(u2, t4.gw_nodes_ttl, n4);
                }
              } else {
                var a2 = void 0, c2 = void 0;
                (null === (s3 = t4.ips) || void 0 === s3 ? void 0 : s3.length) > 0 && (a2 = mo(t4.ips, this.retryFailIpV4Nodes, i3), this.retryFailIpV4Nodes = []), (null === (o2 = null == t4 ? void 0 : t4.ipv6s) || void 0 === o2 ? void 0 : o2.length) > 0 && (c2 = mo(t4.ipv6s, this.retryFailIpV6Nodes, i3), this.retryFailIpV6Nodes = []), this.handleDispatchedGwNodes(t4.gw_nodes || [], t4.gw_nodes_ttl, n4, a2, c2);
              }
            }, n3.prototype.resetGwNodes = function() {
              this.info(Co.Ehk + " call"), this.od = "", this.ud = [], this.ipV4NodeList = [], this.ipV6NodeList = [], this.ad = 0;
            }, n3.prototype.handleDispatchedGwNodes = function(t4, i3, n4, e3, r3) {
              var s3 = this;
              if (void 0 === e3 && (e3 = []), void 0 === r3 && (r3 = []), this.info(Co.d0o + " " + JSON.stringify(t4) + " " + JSON.stringify(e3) + " " + JSON.stringify(r3) + " ipv6Prefer " + n4), Array.isArray(t4) && 0 !== t4.length || 0 !== e3.length || 0 !== r3.length) {
                var o2 = 0 === i3 ? 60 : i3, u2 = function() {
                  s3.ad = o2 ? (/* @__PURE__ */ new Date()).getTime() + 1e3 * o2 : s3.ad;
                };
                this.ud = t4.length > 0 ? t4 : this.ud, this.ipV4NodeList = e3.length > 0 ? e3 : this.ipV4NodeList, this.ipV6NodeList = r3.length > 0 ? r3 : this.ipV6NodeList, n4 === T.kV4Only ? (this.od = t4.length > 0 ? this.ud[0] : this.od, t4.length > 0 && u2()) : n4 == T.kV4AndV6 && e3.length > 0 ? (this.od = po(e3[0]), this.ipNode = e3[0], u2()) : n4 === T.kV6AndV4 && r3.length > 0 ? (this.od = po(r3[0]), this.ipNode = r3[0], u2()) : (this.ud.length > 0 && (this.od = this.ud[0]), this.info("".concat(Co.d0o, " no gwNode ").concat(n4, " ").concat(e3.length, " ").concat(r3.length)), this.ipNodeType = C.ZV4Only, this.ipStackNode = R.IPv4), this.gn.updateCachedGwNodesList(this.streamId, true, t4 || [], o2, e3, r3);
              }
            }, n3.prototype.dispatchGwNodes = function(t4, i3, n4) {
              var e3 = this, r3 = this.va;
              1 == this.gn.testEnvironment && (r3 = "zegotest-" + this.gn.appid + "-" + this.va);
              var s3 = t4;
              s3 === y.IPv6Prefer && !this.Al && this.Xd && (s3 = y.IPv4Prefer);
              var o2 = this.getSpan(L.Mu.event, this.parentSpanKey);
              o2.setAttributes({ ip_mode: t4 }), this.Kd.dispatchGwNodes({ type: 0, streamID: r3, geo: { type: this.gn.geo.type, areaList: this.gn.geo.areaList }, ipV6Prefer: s3 }, function(t5, n5, e4) {
                To(e4), (0, G.lA)(o2, { gw_nodes: e4.gw_nodes, ip_infos: e4.ips, ip_v6_infos: e4.ipv6s }), i3 && i3(e4);
              }, function(t5, i4) {
                e3.cr.setError(o2, t5), n4 && n4(t5);
              });
            }, n3.prototype.kv = function(t4) {
              var i3;
              return Ec(this, void 0, void 0, function() {
                var n4, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2, I2, T2, C2, A2, z2, D2 = this;
                return kc(this, function(N2) {
                  switch (N2.label) {
                    case 0:
                      return this.info((n4 = Co.XLj) + " called"), e3 = [], this.gn.autoSwitchProtocol = this.au("auto_to_tcp") || false, r3 = this.au("udp_max_fail_num"), !isNaN(r3) && (this.gn.maxUdpFailNum = r3), u2 = (s3 = this.gn).maxUdpFailNum, a2 = s3.udpFailNum, this.info(n4 + "  autoToTcp: ".concat(o2 = s3.autoSwitchProtocol, ", udpFailNum: ").concat(a2, ", maxUdpFailNum: ").concat(u2, ".")), o2 && !this.Bd && a2 >= u2 && (this.info(n4 + " switch to tcp. "), this.Bd = true, this.Ld = false), (c2 = this.au("udp_or_tcp", true)) && (this.info(n4 + " setting udp_or_tcp " + c2), this.Bd = "tcp" === c2), h2 = void 0, f2 = this.Ud.wanIP = (t4.gw_nodes[0] || this.od).split(":")[0], !this.gn.isProxy || this.gn.isLocalProxy ? [3, 2] : (l2 = null == gs ? void 0 : gs.proxyCtrl, [4, Promise.all([l2.getTurnInfo(), l2.intranetCheck(Gs(f2), void 0)])]);
                    case 1:
                      return d2 = N2.sent(), m2 = d2[1], (v2 = d2[0]).code ? this.warn(n4 + " use proxy failed." + JSON.stringify(v2)) : (g2 = (p2 = v2.data).password, b2 = p2.turn_ipv4, _2 = p2.turn_port, y2 = p2.username, (w2 = p2.turn_internal_ipv4) && (this.yv.coturn_internal = w2), S2 = Us(b2), E2 = "turn:".concat(S2, ":").concat(_2, "?transport=").concat(this.Bd ? "tcp" : "udp"), this.info(n4 + " turn server: ".concat(E2, " ; intranet: ").concat(JSON.stringify(null === (i3 = null == m2 ? void 0 : m2.data) || void 0 === i3 ? void 0 : i3.intranet), "; turn internal ip: ").concat(Us(w2))), h2 = [{ credential: g2, urls: [E2], username: y2 }]), m2.code ? this.warn(n4 + " use intranetCheck failed." + JSON.stringify(m2)) : this.Ud.intranet = m2.data.intranet || false, [3, 3];
                    case 2:
                      this.gn.isLocalProxy && this.gn.turnServers ? (h2 = (O2 = this.gn.turnServers).map(function(t5) {
                        return { credential: t5.credential, urls: [t5.url], username: t5.username };
                      }), this.info(n4 + " use local proxy: " + JSON.stringify(O2)), this.Ud.intranet = false) : t4.turn_server && (k2 = [], t4.turn_server.split(";").forEach(function(t5) {
                        var i4 = Vs(t5).replace("[", "").replace("]", ""), n5 = Hs(i4);
                        if (D2.ipStackNode === n5 ? k2.push(t5) : D2.El.push(t5), n5 == R.IPv4) {
                          var e4 = Ro(i4), r4 = t5.replace(i4, "[".concat(e4, "]"));
                          D2.gn.isCandidateHasIPv6 && k2.push(r4);
                        }
                      }), (z2 = this.El).push.apply(z2, k2), this.setTurnTcp(), O2 = void 0, I2 = k2.filter(function(t5) {
                        return t5.indexOf("udp") > -1;
                      }), T2 = k2.filter(function(t5) {
                        return t5.indexOf("tcp") > -1;
                      }), O2 = this.Bd ? T2.length > 0 ? T2 : I2.map(function(t5) {
                        return t5.replace("udp", "tcp");
                      }) : I2, this.info(n4 + " over tcp " + JSON.stringify(O2)), e3.push.apply(e3, O2)), N2.label = 3;
                    case 3:
                      return t4.stun_server && e3.push(t4.stun_server), C2 = { iceTransportPolicy: "all", iceServers: [{ urls: e3, username: t4.turn_username, credential: t4.turn_auth_key }], encodedInsertableStreams: this.xd.isSEIStart }, this.Il = t4.turn_username, this.Tl = t4.turn_auth_key, h2 && (C2.iceServers = h2, C2.iceTransportPolicy = "relay", C2.rtcpMuxPolicy = "require"), this.info(n4 + " turn username: " + (A2 = C2.iceServers[0]).username + ", credential: " + A2.credential + ", url: " + JSON.stringify(A2.urls)), this.bv(C2), this.dv(), this.info(n4 + " call success"), [2];
                  }
                });
              });
            }, n3.prototype.Tv = function(t4, i3) {
              var n4 = this.qd[t4], e3 = n4.seq, r3 = n4.time, s3 = performance.now();
              return -1 !== e3 && e3 >= i3 && s3 - r3 < 6e3 ? (this.warn(Co.z3d + " push ".concat(t4, ", seq ").concat(i3, " local ").concat(JSON.stringify(this.qd[t4]))), false) : (this.qd[t4] = { seq: i3, time: s3 }, true);
            }, n3.prototype.onReceivedDataChannel = function(t4) {
              var i3 = new Uint8Array(t4.data, 0, 1);
              i3[0] == Ka.Signal ? this.Kd.onDataChannelMessage(t4.data) : i3[0] == Ka.TcFeedback && this.Zd.handleFeedback(t4.data);
            }, n3.prototype.bv = function(t4) {
              var i3, n4, e3, r3, s3, o2, u2, a2 = this, c2 = Co.XLj;
              this.Xl = new RTCPeerConnection(t4), this.Xl.onicecandidate = function(t5) {
                a2.onIceCandidate(t5);
              }, this.Xl.onsignalingstatechange = function(t5) {
                a2.onSignalStateChange(t5);
              }, this.Xl.connectionState ? this.Xl.onconnectionstatechange = function(t5) {
                a2.Cv(t5);
              } : this.info("".concat(c2, " not support connectionState")), this.Xl.oniceconnectionstatechange = function(t5) {
                a2.onIceConnectionStateChange(t5);
              };
              var h2 = this.au("peer_signal_over_dc"), f2 = !(!this.Zd.isEnable() || 0 != this.Zd.getMinVideoBitrateMode());
              if (this.gn.isDataChannelEnabled || h2 || f2) {
                var l2 = { ordered: false };
                this.info("zc.p.dc.0.n  option:" + JSON.stringify(l2) + " enable:" + h2 + " " + f2), this.Ad = 0, this.Pf = this.Xl.createDataChannel(this.va, l2), this.Pf.binaryType = "arraybuffer", h2 && (this.Kd.dataChannel = this.Pf), f2 && this.Zd.setDatachannel(this.Pf), this.Pf.onopen = function(t5) {
                  a2.info("zc.p.dc.0.o data channel open"), a2.dataChannelState = 1;
                }, this.Pf.onclose = function(t5) {
                  a2.error("zc.p.dc.0.c onclose"), a2.dataChannelState = 0;
                }, this.Pf.onmessage = function(t5) {
                  if (a2.Ad++ < 3 && a2.info("zc.p.dc.0.m onmessage"), t5.data instanceof Blob) {
                    var i4 = new FileReader(), n5 = {};
                    i4.readAsArrayBuffer(t5.data), i4.onload = function() {
                      n5.data = i4.result, a2.onReceivedDataChannel(n5);
                    };
                  } else
                    a2.onReceivedDataChannel(t5);
                };
              }
              var d2 = [], v2 = [], m2 = ft(), p2 = this.isRePublish ? L.fo : L.ch, g2 = 0;
              if (this.lowStream && (g2 = 1, this.lowStream.getVideoTracks().forEach(function(t5) {
                var i4;
                if ("video" === t5.kind) {
                  a2.info(Co.QRg + " lt-id: " + t5.id);
                  var n5 = null === (i4 = a2.Xl) || void 0 === i4 ? void 0 : i4.addTrack(t5, a2.lowStream);
                  a2.lowVideoSender = n5, a2.xd.isSEIStart && n5 && m2 && a2.Av(n5, true);
                }
              }), this.cr.spanSetAttributes({ key: Ac.event, par: this.va }, { low_stream_params: null === (i3 = this.mn) || void 0 === i3 ? void 0 : i3.lowStreamConfig })), this.cr.spanSetAttributes({ key: p2.event, par: this.va }, { is_dual_stream: L.ch.is_dual_stream(g2), is_mini: L.ch.is_mini(this.$u) }), this.cr.spanSetAttributes({ key: Ac.event, par: this.va }, { is_dual_stream: Ac.is_dual_stream(g2) }), this.xu) {
                if (this.xu.getTracks().forEach(function(t5) {
                  var i4, n5, e4 = a2.xd.isSEIStart && m2;
                  a2.info("".concat(c2, " pc addTrack enable ").concat(t5.kind, " ").concat(t5.enabled, " ").concat(a2.mn.isVideoEnabled)), ("audio" === t5.kind && a2.previewer.isAudioEnabled || "video" === t5.kind && (t5.enabled || e4)) && (n5 = null === (i4 = a2.Xl) || void 0 === i4 ? void 0 : i4.addTrack(t5, a2.xu)) && "video" === t5.kind && a2.Zd.getStartVideoBitrate() > 0 && (a2.mn.videoInfo.contentHint && "detail" === a2.mn.videoInfo.contentHint || n5.track && "contentHint" in n5.track && (a2.info("".concat(Co.BsE, " setContentHint: ").concat(n5.track.contentHint, " => detail, tid :").concat(n5.track.id)), n5.track.contentHint = "detail", a2.yd = "motion")), e4 && n5 && (a2.info(Co.QRg + " sei transform: " + t5.kind), "video" === t5.kind ? a2.Av(n5) : "audio" === t5.kind && a2.zv(n5)), mt(t5, a2.an, c2, { streamID: a2.va });
                }), !(null === (n4 = this.mn) || void 0 === n4 ? void 0 : n4.videoTrack) && this.xd.isSEIStart) {
                  this.Ka.bitRate || (this.Ka.bitRate = 50);
                  var b2 = this.xd.track = this._addCanvasStreamVideoTrack(), _2 = this.Xl.addTrack(b2, this.xu);
                  _2 && "video" == b2.kind && m2 && this.Av(_2);
                }
                (null === (e3 = this.mn) || void 0 === e3 ? void 0 : e3.videoTrack) && !this.mn.hasStopCaptureVideo && this.mn.isVideoEnabled && (d2 = [null === (r3 = this.mn) || void 0 === r3 ? void 0 : r3.videoTrack]), this.mn.isAudioEnabled && (v2 = this.xu.getAudioTracks());
                var y2, w2 = false, S2 = false;
                if (d2.length > 0)
                  this.info(c2 + " video device: " + (y2 = d2[0]).label + " ; set: " + JSON.stringify(y2.getSettings())), w2 = true;
                if (v2.length > 0)
                  this.info(c2 + " audio device: " + (y2 = v2[0]).label + " ; set: " + JSON.stringify(y2.getSettings())), S2 = true;
                var E2 = null === (s3 = this.Xl) || void 0 === s3 ? void 0 : s3.getSenders().find(function(t5) {
                  var i4;
                  return "video" === (null === (i4 = t5.track) || void 0 === i4 ? void 0 : i4.kind) && t5 !== a2.lowVideoSender;
                }), k2 = null === (o2 = this.Xl) || void 0 === o2 ? void 0 : o2.getSenders().find(function(t5) {
                  var i4;
                  return "audio" === (null === (i4 = t5.track) || void 0 === i4 ? void 0 : i4.kind);
                });
                "function" == typeof RTCPeerConnection.prototype.addTransceiver ? (this.supportTransceiver = true, this.info(c2 + " ts sender ".concat(!!E2, " ").concat(!!k2)), !w2 && E2 && this.warn(c2 + " vt diff ".concat(!!this.previewer.videoTrack, " ").concat(this.localStream === (null === (u2 = this.previewer) || void 0 === u2 ? void 0 : u2.localStream))), w2 || this.xd.isSEIStart || E2 || (this.info(c2 + " add vt"), E2 = this.Xl.addTransceiver("video", { direction: "sendrecv" }).sender), S2 || k2 || (this.info(c2 + " add at"), k2 = this.Xl.addTransceiver("audio", { direction: "sendrecv" }).sender)) : this.supportTransceiver = false, this.videoSender = E2, this.audioSender = k2;
              }
              var O2 = { offerToReceiveAudio: v2.length > 0 ? 1 : 0, offerToReceiveVideo: d2.length > 0 ? 1 : 0 };
              true === this.$d.enableDTX && (O2.voiceActivityDetection = true), this.Dl = O2, this.info(c2 + " createOffer: " + JSON.stringify(O2));
              var I2 = this.getSpan(L._F.event, this.parentSpanKey);
              I2.setAttributes({ is_dual_stream: L._F.is_dual_stream(this.lowStream ? 1 : 0) }), this.Xl.createOffer(O2).then(function(t5) {
                a2.pn.ia(I2, { sdp: t5.sdp }), (0, G.lA)(I2, { is_mini: L._F.is_mini(a2.$u) }), a2.onCreateOfferSuccess(t5);
              }, function(t5) {
                a2.error(c2 + " create offer error " + t5.toString()), a2.cr.setError(I2, { code: Nc.Vn.code, message: t5.toString() }), a2.publishStateUpdateError(Nc.Vn, true);
              });
            }, n3.prototype.restartIce = function() {
              var t4, i3 = this, n4 = Co.Loj;
              this.info("".concat(n4, " call")), null === (t4 = this.Xl) || void 0 === t4 || t4.createOffer(Sc(Sc({}, this.Dl), { iceRestart: true })).then(function(t5) {
                var e3, r3, s3;
                if (i3.info("".concat(n4, " createOffer suc")), t5.sdp) {
                  i3.Dv(t5);
                  var o2 = oo(t5.sdp), u2 = uo(t5.sdp);
                  i3.info("".concat(n4, " ice ").concat(o2, " ").concat(u2));
                  var a2 = { iceTransportPolicy: "all", rtcpMuxPolicy: "require", iceServers: [{ urls: i3.El, username: i3.Il, credential: i3.Tl }], encodedInsertableStreams: i3.xd.isSEIStart };
                  i3.info("".concat(n4, " set config ").concat(JSON.stringify(a2))), null === (e3 = i3.Xl) || void 0 === e3 || e3.setConfiguration(a2), i3.sendRestartIce(o2, u2), i3.info("".concat(n4, " localSdp1 ").concat(t5.sdp.substr(0, t5.sdp.length / 2))), i3.info("".concat(n4, " localSdp2 ").concat(t5.sdp.substr(t5.sdp.length / 2))), null === (r3 = i3.Xl) || void 0 === r3 || r3.setLocalDescription(t5).then(function(t6) {
                    i3.info("".concat(n4, " set local sdp suc"));
                  }).catch(function(t6) {
                    i3.info("".concat(n4, " set local sdp fail ").concat(t6.message ? JSON.stringify(t6.message) : JSON.stringify(t6)));
                  }), null === (s3 = i3.Xl) || void 0 === s3 || s3.setRemoteDescription(new RTCSessionDescription({ type: "answer", sdp: i3.nv })).then(function(t6) {
                    i3.info("".concat(n4, " set remote sdp suc"));
                  }).catch(function(t6) {
                    i3.info("".concat(n4, " set remote sdp fail ").concat(t6.message ? JSON.stringify(t6.message) : JSON.stringify(t6)));
                  }), i3.kl.forEach(function(t6) {
                    var e4;
                    null === (e4 = i3.Xl) || void 0 === e4 || e4.addIceCandidate(new RTCIceCandidate(t6)).then(function() {
                      i3.info("".concat(n4, " add can suc"));
                    }).catch(function(t7) {
                      i3.info("".concat(n4, " add can fail, ").concat(t7.message));
                    });
                  });
                }
              }).catch(function(t5) {
                i3.warn("zc.p.0.rsi err ".concat(t5.message ? JSON.stringify(t5.message) : JSON.stringify(t5)));
              });
            }, n3.prototype.resetIceInfos = function() {
              this.info("zc.p.0.rii.0 call"), this.El = [], this.Il = "", this.Tl = "", this.kl = [];
            }, n3.prototype.resetNat64Infos = function() {
              this.info("zc.p.0.rni.0 call"), this.Ol = [];
            }, n3.prototype.switchVideoCodec = function(t4, i3) {
              var n4 = this, e3 = "zc.p.0.sc.0";
              return new Promise(function(r3, s3) {
                var o2;
                n4.Dl ? null === (o2 = n4.Xl) || void 0 === o2 || o2.createOffer(n4.Dl).then(function(o3) {
                  if (!o3.sdp)
                    return n4.warn("".concat(e3, " create offer sdp none")), void s3(false);
                  var u2 = ys.getSDPVideoCodec(o3.sdp);
                  if (u2 && 0 === u2[i3].length)
                    return n4.warn("".concat(e3, " code not support")), void s3(false);
                  n4.nd = i3, n4.onCreateOfferSuccess(o3, true, void 0, function(i4) {
                    return Ec(n4, void 0, void 0, function() {
                      return kc(this, function(n5) {
                        return 0 !== i4 ? (this.nd = t4, this.warn("".concat(e3, " result ").concat(i4)), s3(false)) : (this.info("".concat(e3, " suc")), r3(true)), [2];
                      });
                    });
                  });
                }).catch(function(t5) {
                  n4.warn("".concat(e3, " create offer fail ").concat(null == t5 ? void 0 : t5.toString())), s3(false);
                }) : s3(false);
              });
            }, n3.prototype.checkCodecSupport = function(t4) {
              var i3;
              void 0 === t4 && (t4 = false);
              var n4 = null === (i3 = this.previewer.videoTrack) || void 0 === i3 ? void 0 : i3.getSettings(), e3 = 0 === this.lastPublishStats.framesEncoded && 0 !== (this.publishStat.inputWidth || (null == n4 ? void 0 : n4.width)) && 0 !== (this.publishStat.inputHeight || (null == n4 ? void 0 : n4.height)) && 0 !== (this.publishStat.inputFPS || (null == n4 ? void 0 : n4.frameRate));
              return !(t4 && e3 || 0 === this.camera_status && "0" === this.publishStat.videoMuteState && 0 === this.lastPublishStats.videoBytesSent && e3);
            }, n3.prototype.getCodecId = function(t4) {
              switch (t4) {
                case "H264":
                default:
                  return 0;
                case "VP8":
                  return 2;
                case "H265":
                  return 4;
              }
            }, n3.prototype.sendSEI = function(t4) {
              var n4 = this;
              if ("H264" !== this.nd && "H265" !== this.nd)
                return this.error(Co.I2V + " code not support"), false;
              if (!this.xd.isSEIStart)
                return console.error("Send SEI Failed. The publishing stream has not enabled sei."), false;
              if (this.xd.SEIType == i2.UserUnregister && t4.byteLength <= 16)
                return this.error(Co.I2V + " inData size should greater than 16"), false;
              if (this.Nd.length >= 10)
                return this.error(Co.I2V + " side info count limit"), false;
              this.Nd.push(t4.buffer);
              var e3 = this.seiWorker;
              return e3 && (this.Nd.forEach(function(t5) {
                e3.postMessage({ cmd: "pushSideInfo", buffer: t5, hasLowStream: !!n4.lowStream, streamID: n4.va, maxLength: 10 }, [t5]);
              }), this.Nd = []), true;
            }, n3.prototype.zv = function(t4) {
              var i3 = { cmd: "encode", streamID: this.va, kind: "audio" }, n4 = this.createSEIWorker();
              if (window.RTCRtpScriptTransform)
                t4.transform = new RTCRtpScriptTransform(n4, i3);
              else {
                var e3 = t4.createEncodedStreams(), r3 = e3.readable, s3 = e3.writable, o2 = !n4;
                try {
                  n4 && n4.postMessage(Sc({ readable: r3, writable: s3 }, i3), [r3, s3]);
                } catch (t5) {
                  o2 = true;
                }
                if (o2) {
                  this.warn("zc.p.cart The current browser version is too low.");
                  var u2 = new TransformStream({ transform: this.Nv });
                  r3.pipeThrough(u2).pipeTo(s3), this.gn.handleSeiRollBack();
                }
              }
            }, n3.prototype.Av = function(t4, i3) {
              void 0 === i3 && (i3 = false);
              var n4 = this.createSEIWorker(), e3 = { cmd: "encode", streamID: this.va, type: this.xd.SEIType, isLowStream: i3, emulationPreventionByte: this.pn.seiConfig.emulationPreventionByte, onlyAudio: !!this.xd.track, vCodec: this.nd };
              if (window.RTCRtpScriptTransform)
                t4.transform = new RTCRtpScriptTransform(n4, e3);
              else {
                var r3 = t4.createEncodedStreams(), s3 = r3.readable, o2 = r3.writable, u2 = !n4;
                try {
                  n4 && n4.postMessage(Sc({ readable: s3, writable: o2 }, e3), [s3, o2]);
                } catch (t5) {
                  u2 = true;
                }
                if (u2) {
                  this.warn("zc.p.cvrt The current browser version is too low.");
                  var a2 = new TransformStream({ transform: this.encodeVideoFrame });
                  s3.pipeThrough(a2).pipeTo(o2), this.gn.handleSeiRollBack();
                }
              }
            }, n3.prototype.Nv = function(t4, i3) {
              i3.enqueue(t4);
            }, n3.prototype.encodeSEINalu = function(t4) {
              var n4 = t4.byteLength, e3 = parseInt(n4 / 255), r3 = n4 % 255, s3 = new ArrayBuffer(1 + (e3 + 1) + n4 + 1), o2 = new DataView(s3), u2 = 0;
              o2.setUint8(u2++, this.xd.SEIType === i2.UserUnregister ? 5 : 243);
              for (var a2 = 0; a2 < e3; a2++)
                o2.setUint8(u2++, 255);
              o2.setUint8(u2++, r3);
              var c2 = new DataView(t4);
              for (a2 = 0; a2 < (null == t4 ? void 0 : t4.byteLength); a2++)
                o2.setInt8(u2++, c2.getInt8(a2));
              o2.setInt8(u2++, 128);
              var h2 = new Uint8Array(s3), f2 = h2;
              if (this.pn.seiConfig.emulationPreventionByte) {
                var l2 = function(t5) {
                  for (var i3 = [], n5 = t5.length, e4 = 0, r4 = 0; r4 < n5; ++r4) {
                    var s4 = t5[r4];
                    s4 <= 3 && e4 >= 2 && (i3.push(3), e4 = 0), i3.push(t5[r4]), 0 == s4 ? ++e4 : e4 = 0;
                  }
                  var o3 = new Uint8Array(i3);
                  return { output: o3, outLength: o3.length };
                }(h2).output;
                f2 = l2;
              }
              return { rbspView: f2, ebspLength: f2.length };
            }, n3.prototype.encodeFrame = function(t4, i3, n4) {
              var e3, r3, s3, o2 = n4 ? this.Pd : this.Nd;
              if (o2.length > 0) {
                var u2 = false, a2 = null === (r3 = null === (e3 = t4.getMetadata) || void 0 === e3 ? void 0 : e3.call(t4)) || void 0 === r3 ? void 0 : r3.mimeType;
                u2 = a2 ? null !== (s3 = null == a2 ? void 0 : a2.includes("H265")) && void 0 !== s3 && s3 : "H265" === this.nd;
                for (var c2 = new DataView(t4.data), h2 = [], f2 = 0, l2 = 0; l2 < o2.length; l2++) {
                  var d2 = this.encodeSEINalu(o2[l2]);
                  f2 += 5 + (C2 = d2.ebspLength), h2.push(d2);
                }
                n4 ? this.Pd = [] : this.Nd = [];
                for (var v2 = new ArrayBuffer(f2 + t4.data.byteLength), m2 = new DataView(v2), p2 = 0, g2 = new Qa(c2, u2), b2 = 0, _2 = false, y2 = false, w2 = false, S2 = 0; g2.NextNalu(); )
                  if (S2++, u2) {
                    if (32 == (E2 = (126 & c2.getUint8(g2.nalu_start + g2.start_code_size)) >> 1))
                      _2 = true, b2 += g2.nalu_size;
                    else if (33 == E2)
                      y2 = true, b2 += g2.nalu_size;
                    else if (34 == E2)
                      w2 = true, b2 += g2.nalu_size;
                    else if (35 == E2)
                      continue;
                    if (_2 && y2 && w2)
                      break;
                  } else {
                    var E2;
                    if (7 == (E2 = 31 & c2.getUint8(g2.nalu_start + g2.start_code_size)))
                      y2 = true, b2 += g2.nalu_size;
                    else if (8 == E2)
                      w2 = true, b2 += g2.nalu_size;
                    else if (9 == E2)
                      continue;
                    if (y2 && w2)
                      break;
                  }
                for (var k2 = 0; k2 < b2; k2++)
                  m2.setInt8(p2++, c2.getInt8(k2));
                var O2 = 10 - S2, I2 = h2.length >= (O2 = O2 > 0 ? O2 : 0) ? O2 : h2.length;
                for (l2 = 0; l2 < I2; l2++) {
                  var R2 = h2[l2], T2 = R2.rbspView, C2 = R2.ebspLength;
                  m2.setUint8(p2++, 0), m2.setUint8(p2++, 0), m2.setUint8(p2++, 0), m2.setUint8(p2++, 1), u2 ? (m2.setUint8(p2++, 78), m2.setUint8(p2++, 1)) : m2.setUint8(p2++, 6);
                  for (var A2 = 0; A2 < C2; A2++)
                    m2.setInt8(p2++, T2[A2 - 0]);
                }
                for (k2 = b2; k2 < t4.data.byteLength; k2++)
                  m2.setInt8(p2++, c2.getInt8(k2));
                new Uint8Array(v2);
                t4.data = v2;
              }
              i3.enqueue(t4);
            }, n3.prototype.encodeFrameAudioOnly = function(t4, i3, n4) {
              var e3, r3, s3, o2 = n4 ? this.Pd : this.Nd, u2 = 0, a2 = "key" === t4.type, c2 = false, h2 = null === (r3 = null === (e3 = t4.getMetadata) || void 0 === e3 ? void 0 : e3.call(t4)) || void 0 === r3 ? void 0 : r3.mimeType;
              c2 = h2 ? null !== (s3 = null == h2 ? void 0 : h2.includes("H265")) && void 0 !== s3 && s3 : "H265" === this.nd;
              var f2 = performance.now(), l2 = 0, d2 = [];
              if (o2.length > 0) {
                for (var v2 = o2.length >= 9 ? 9 : o2.length, m2 = 0; m2 < v2; m2++) {
                  var p2 = this.encodeSEINalu(o2[m2]);
                  l2 += 4 + (c2 ? 2 : 1) + (O2 = p2.ebspLength), d2.push(p2);
                }
                n4 ? this.Pd = [] : this.Nd = [], f2 - this.recvLastKeyFrameTime > 2e3 && (a2 = true);
              }
              a2 && (u2 = c2 ? Tc.length + Cc.length : Rc.length + Ic.length);
              var g2 = new ArrayBuffer(l2 + u2), b2 = new DataView(g2), _2 = 0;
              if (a2)
                if (c2) {
                  var y2 = new DataView(Tc.buffer);
                  for (S2 = 0; S2 < Tc.length; S2++)
                    b2.setInt8(_2++, y2.getInt8(S2));
                } else
                  for (var w2 = new DataView(Rc.buffer), S2 = 0; S2 < Rc.length; S2++)
                    b2.setInt8(_2++, w2.getInt8(S2));
              for (m2 = 0; m2 < d2.length; m2++) {
                var E2 = d2[m2], k2 = E2.rbspView, O2 = E2.ebspLength;
                b2.setUint8(_2++, 0), b2.setUint8(_2++, 0), b2.setUint8(_2++, 0), b2.setUint8(_2++, 1), c2 ? (b2.setUint8(_2++, 78), b2.setUint8(_2++, 1)) : b2.setUint8(_2++, 6);
                for (var I2 = 0; I2 < O2; I2++)
                  b2.setInt8(_2++, k2[I2 - 0]);
              }
              if (a2)
                if (c2) {
                  var R2 = new DataView(Cc.buffer);
                  for (S2 = 0; S2 < Cc.length; S2++)
                    b2.setInt8(_2++, R2.getInt8(S2));
                } else
                  for (var T2 = new DataView(Ic.buffer), S2 = 0; S2 < Ic.length; S2++)
                    b2.setInt8(_2++, T2.getInt8(S2));
              t4.data = g2, a2 && (this.recvLastKeyFrameTime = f2), i3.enqueue(t4);
            }, n3.prototype.onCreateOfferSuccess = function(t4, i3, n4, e3) {
              var r3 = this;
              if (i3 && (this.isUpdateSDP = true, e3 && (this.Pv = e3)), this.xu && this.xu.getTracks().forEach(function(t5) {
                mt(t5, r3.an, Co.fgh);
              }), this.info(Co.fgh + " local sdp revert " + this.$l.join("")), this.Dv(t4), this.info(Co.fgh + " localSdp1 " + t4.sdp.substr(0, t4.sdp.length / 2)), this.info(Co.fgh + " localSdp2 " + t4.sdp.substr(t4.sdp.length / 2)), this.Ld && !i3)
                return this.ev = t4, void this.Vd(t4);
              this.setLocalSdp(t4, n4);
            }, n3.prototype.Dv = function(t4) {
              var i3;
              this.Ka.bitRate > 0 && (t4.sdp = this.Mv(t4.sdp, this.Ka.bitRate)), t4.sdp = t4.sdp.replace(/sendrecv/g, "sendonly");
              var n4 = t4.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/) ? null === (i3 = t4.sdp.match(/m=application[\s\S]+datachannel[\s\S]+/)) || void 0 === i3 ? void 0 : i3[0] : null;
              if (n4) {
                var e3 = n4.replace(/sendonly/, "sendrecv");
                t4.sdp = t4.sdp.replace(n4, e3);
              }
              var r3 = [];
              isNaN(this.Ka.audioBitrate) || r3.push("maxaveragebitrate=" + this.Ka.audioBitrate);
              var s3 = /stereo=\d+/, o2 = t4.sdp.match(s3), u2 = "stereo=" + (2 === this.Ka.channelCount ? 1 : 0);
              if (o2 && o2[0] ? t4.sdp = t4.sdp.replace(s3, u2) : r3.push(u2), true === this.$d.enableDTX) {
                var a2 = /usedtx=\d+/, c2 = t4.sdp.match(a2), h2 = "usedtx=" + (this.$d.enableDTX ? 1 : 0);
                c2 && c2[0] ? t4.sdp = t4.sdp.replace(a2, h2) : r3.push(h2);
              }
              var f2 = /useinbandfec=\d+/, l2 = t4.sdp.match(f2);
              l2 && l2[0] && r3.push(l2[0]), t4.sdp = t4.sdp.replace(f2, r3.join(";")), this.$l = t4.sdp.match(/m=(.\w*)\s/g) || [], this.info(Co.fgh + " local sdp revert " + this.$l.join(""));
              var d2 = ys.getSDPVideoCodec(t4.sdp);
              if ((null == t4 ? void 0 : t4.sdp.includes("m=video")) && 0 === d2[this.nd].length) {
                if (!this.publishOption.enableAutoSwitchVideoCodec)
                  return void this.publishStateUpdateError(Nc.le, true, "not support ".concat(this.nd, " codec"));
                var v2 = this.nd;
                if (this.nd = "H264" === this.nd ? "VP8" : "H264", 0 === d2[this.nd].length && "H265" === v2 && (this.nd = "VP8"), this.info("".concat(Co.fgh, " switch video codec to ").concat(this.nd)), this.pn.actionListener("publisherVideoEncoderChanged", this.getCodecId(v2), this.getCodecId(this.nd), this.streamId), 0 === d2[this.nd].length)
                  return void this.publishStateUpdateError(Nc.le, true, "not support H264 and VP8 codec");
              }
              t4.sdp = ys.getSDPByVideDecodeType(t4.sdp, this.nd), this.setSdpHardCode(t4), "firefox" === this.pn.browser && fo(this.pn.browserInfo, "firefox", 139, 2) && (t4.sdp = yc(t4.sdp));
            }, n3.prototype.setLocalSdp = function(t4, i3) {
              var n4, e3 = this;
              this.info(Co.fgh + " set local sdp");
              var r3 = this.getSpan(L.wH.event, this.parentSpanKey);
              this.pn.ia(r3, { sdp: t4.sdp }), r3.setAttributes({ is_mini: L.wH.is_mini(this.$u), is_dual_stream: L._F.is_dual_stream(this.lowStream ? 1 : 0) }), null === (n4 = this.Xl) || void 0 === n4 || n4.setLocalDescription(t4).then(function() {
                return Ec(e3, void 0, void 0, function() {
                  return kc(this, function(n5) {
                    switch (n5.label) {
                      case 0:
                        return r3.end(), [4, this.onSetLocalDescriptionSuccess(t4, i3)];
                      case 1:
                        return n5.sent(), [2];
                    }
                  });
                });
              }, function(t5) {
                e3.error(Co.fgh + " error " + t5.toString()), e3.cr.setError(r3, { code: Nc.Qn.code, message: t5.toString() }), e3.publishStateUpdateError(Nc.Qn, true);
              });
            }, n3.prototype.Mv = function(t4, i3) {
              var n4 = "AS";
              return "firefox" === this.pn.browser && (i3 = 1e3 * (i3 >>> 0), n4 = "TIAS"), t4 = -1 === t4.indexOf("b=" + n4 + ":") ? t4.replace(/(m=video.*\r\nc=IN.*\r\n)/g, "$1b=" + n4 + ":" + i3 + "\r\n") : (t4 = t4.replace(new RegExp("b=" + n4 + ":.*\r\n", "g"), "b=" + n4 + ":" + i3 + "\r\n")).replace("b=" + n4 + ":" + i3 + "\r\n", "");
            }, n3.prototype.setSdpHardCode = function(t4) {
              var i3, n4, e3 = false, r3 = null === (i3 = this.mn) || void 0 === i3 ? void 0 : i3.previewType, s3 = this.pn.settingConfig;
              "camera" === r3 ? e3 = s3.getSetting("camera_hard_encode") : "screen" === r3 ? e3 = s3.getSetting("hardware_encode") : "custom" === r3 && (e3 = s3.getSetting("custom_hard_encode"));
              var o2 = !e3;
              this.info(Co.rS5 + " ".concat(null === (n4 = this.mn) || void 0 === n4 ? void 0 : n4.previewType, " software encode: ").concat(o2, ", "));
              var u2 = ys.getSDPByVideDecodeType(t4.sdp, this.nd, o2, this.pn.engineConfig.encodecSelectionMode);
              t4.sdp = u2;
            }, n3.prototype.onSetLocalDescriptionSuccess = function(t4, i3) {
              return Ec(this, void 0, void 0, function() {
                var n4, r3 = this;
                return kc(this, function(s3) {
                  return this.info(Co.rS5 + " success"), this.xu && this.xu.getTracks().forEach(function(t5) {
                    mt(t5, r3.an, Co.rS5);
                  }), !this.isUpdateSDP && (this.state = 2), i3 && (this.previewer.videoInfo = Sc(Sc({}, this.Ka), i3)), this.setSdpHardCode(t4), this.Od && !this.isUpdateSDP ? this.Ld ? (this.info(Co.rS5 + " fully auto tcp"), [2]) : (this.Vd(t4), [2]) : (n4 = function(i4) {
                    var n5, s4 = {};
                    i4 ? s4.miniSdp = i4 : s4.sdp = t4.sdp;
                    var o2 = Sc(Sc({}, s4), { keyframe_intv: Math.floor((null === (n5 = r3.Ka) || void 0 === n5 ? void 0 : n5.keyFrameInterval) || 2), paramsExt: r3.yv });
                    if (r3.Zl = (0, e2.Mo)(), r3.isUpdateSDP) {
                      r3.info(Co.rS5 + " update sdp");
                      var u2 = Sc(Sc({}, o2), { type: 0 });
                      r3.Kd.sendMediaDescUpdateReq(r3.Zl, r3.Df, u2, function(t5, i5, n6) {
                        0 == (null == n6 ? void 0 : n6.result) && r3.parseRemoteSdp(n6, function(t6) {
                          r3.xv(t6) || r3.Iv(t6);
                        }, function(t6) {
                          r3.publishStateUpdateError(t6);
                        });
                      }, function(t5, i5) {
                        r3.error(Co.rS5 + " update sdp failed"), r3.Pv && r3.Pv(-1), r3.publishStateUpdateError(t5 == e2.Xb ? Nc.re : Nc.se);
                      });
                    } else {
                      var a2 = r3.getSpan(L.r2.event, r3.parentSpanKey);
                      a2.setAttributes({ req_params_ext: r3.yv }), r3.Kd.sendMediaDesc(r3.Zl, r3.Df, 0, o2, function(t5, i5, n6) {
                        r3.pn.ia(a2, { sdp: o2.sdp }), a2.setAttributes({ webrtc_sid: L.r2.webrtc_sid(i5), mediaDescription: { keyframe_intv: o2.keyframe_intv } }), r3.Zl == t5 && r3.Df == i5 ? (r3.info(Co.rS5 + " send success stateNego:waiterAnswer"), r3.ed = m.waiterAnswer, r3.state = 3, r3.parseRemoteSdp(n6, function(t6) {
                          r3.pn.ia(a2, { remote_sdp: t6 }), a2.end(), r3.xv(t6) || r3.Iv(t6, true, void 0, null == n6 ? void 0 : n6.mini_sdp);
                        }, function(t6) {
                          r3.publishStateUpdateError(t6);
                        })) : r3.error(Co.rS5 + " seq or sessionId is not equal");
                      }, function(t5, i5) {
                        r3.error(Co.rS5 + " mediaDesc error " + JSON.stringify(t5)), r3.cr.setError(a2, { code: Nc.$n.code, message: Nc.$n.message }), r3.publishStateUpdateError(Nc.$n);
                      }), r3.info(Co.rS5 + " call success");
                    }
                  }, this.getLocalMiniSdp(t4.sdp, n4), [2]);
                });
              });
            }, n3.prototype.getVideoSenders = function(t4) {
              if (void 0 === t4 && (t4 = false), t4 && !this.previewer.isVideoEnabled)
                return [];
              var i3 = [];
              return this.videoSender && (i3.push(this.videoSender), this.lowVideoSender && i3.unshift(this.lowVideoSender)), i3;
            }, n3.prototype.canSetBandWidthBySender = function() {
              var t4 = this.pn.browserInfo.name.toLowerCase(), i3 = ho(this.pn.browserInfo.version);
              return ("chrome" === t4 || "safari" === t4 || "firefox" === t4 && i3 >= 64) && "RTCRtpSender" in window && "setParameters" in window.RTCRtpSender.prototype;
            }, n3.prototype.applyVideoBitrate = function(t4) {
              return Ec(this, void 0, void 0, function() {
                var i3 = this;
                return kc(this, function(n4) {
                  return [2, new G.l3(function(n5) {
                    var e3 = i3.videoSender;
                    if (e3) {
                      var r3 = e3.getParameters();
                      r3.encodings || (r3.encodings = [{}]);
                      var s3 = 1e3 * t4, o2 = r3.encodings[0].maxBitrate, u2 = JSON.stringify(r3.encodings[0]);
                      r3.encodings[0].maxBitrate = s3, e3.setParameters(r3).then(function() {
                        i3.info("zc.p.sbw set maxBitrate success. ".concat(o2, "=>").concat(s3, ", ").concat(u2, ",").concat(e3.getParameters().encodings[0], " ")), n5(true);
                      }).catch(function(t5) {
                        i3.warn("zc.p.sbw set maxBitrate fail" + t5), n5(false);
                      });
                    } else
                      n5(true);
                  })];
                });
              });
            }, n3.prototype.xv = function(t4) {
              return 0 === so(t4).length && (this.publishStateUpdateError(re.akb, false), true);
            }, n3.prototype.setBandWidthBySdp = function(t4, i3) {
              this.info("zc.p.sbwbs bandwidth: ".concat(i3));
              var n4 = "AS";
              return "firefox" === this.pn.browser && (i3 = 1e3 * (i3 >>> 0), n4 = "TIAS"), t4 = /b=AS.*(\r\n|\n)/.test(t4) ? t4.replace(/AS:(\d+)/, n4 + ":" + i3) : t4.replace(/m=video.*(\r\n|\n)c=.*(\r\n|\n)/, "$&b=".concat(n4, ":").concat(i3, "\n"));
            }, n3.prototype.Iv = function(t4, i3, n4, e3) {
              var r3, s3;
              return void 0 === i3 && (i3 = false), Ec(this, void 0, void 0, function() {
                var o2, u2, a2, c2, h2, f2, l2, d2, v2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2, I2, R2, T2, C2, A2, z2, D2, N2, P2, M2, x2, j2, q2, U2, G2 = this;
                return kc(this, function(J2) {
                  switch (J2.label) {
                    case 0:
                      if (this.info(Co.O2K + " call"), this.Ka.audioBitrate && 48e3 !== this.Ka.audioBitrate && (t4 = t4.replace(/maxaveragebitrate=(\d+)/, "maxaveragebitrate=" + this.Ka.audioBitrate)), this.td = t4.match(/m=(.\w*)\s/g) || [], this.info(Co.O2K + " sdp revert " + this.td.join("")), this.setTurnTcp(), this.gn.autoSwitchProtocol = this.au("auto_to_tcp") || false, o2 = this.au("udp_max_fail_num"), !isNaN(o2) && (this.gn.maxUdpFailNum = o2), c2 = (u2 = this.gn).maxUdpFailNum, h2 = u2.udpFailNum, this.info("zp.oro.0  autoToTcp: ".concat(a2 = u2.autoSwitchProtocol, ", udpFailNum: ").concat(h2, ", maxUdpFailNum: ").concat(c2, ".")), a2 && !this.Bd && h2 >= c2 && (this.info("zp.oro.0 switch to tcp."), this.Bd = true, this.Ld = false), (f2 = this.au("udp_or_tcp", true)) && (this.info("zp.oro.0 setting udp_or_tcp " + f2), this.Bd = "tcp" === f2), this.Bd && !this.gn.isProxy && "firefox" !== this.pn.browser && (null === (r3 = t4.match(/candidate.*/g)) || void 0 === r3 || r3.forEach(function(i4) {
                        var n5 = i4.replace(/udp/, "tcp");
                        n5.includes(" tcptype ") || (n5 = n5.replace(" typ host ", " typ host tcptype passive ")), t4 = t4.replace(i4, n5);
                      })), this.gn.isProxy)
                        if (l2 = ro(t4), d2 = l2[0], v2 = l2[1], p2 = t4.match(/a=mid:[^(\n|\r)]+/g), v2 && p2)
                          if (this.Ud.intranet)
                            setTimeout(function() {
                              v2.forEach(function(t5, i4) {
                                var n5, e4 = { sdpMLineIndex: i4, candidate: t5.replace(d2[i4].ip, G2.Ud.wanIP).replace("a=", ""), sdpMid: p2[i4].replace("a=mid:", "") };
                                G2.info("zp.oro.0  add wan candidate:" + JSON.stringify(e4)), null === (n5 = G2.Xl) || void 0 === n5 || n5.addIceCandidate(new RTCIceCandidate(e4));
                              });
                            }, 1e3);
                          else
                            for (this.info("zp.oro.0  change candidate ip from lan to wan: " + (g2 = this.Ud.wanIP)), b2 = 0; b2 < v2.length; b2++)
                              y2 = (_2 = v2[b2]).replace(d2[b2].ip, g2), t4 = t4.replace(_2, y2);
                        else
                          this.warn("zp.oro.0  candidate not found");
                      else
                        t4 = this.extractCandidate(t4);
                      if (this.info("zp.oro.0 sdp revert " + this.$l.join("") + " " + this.td.join("")), this.$l.join() !== this.td.join() && this.$l.length == this.td.length && (w2 = new RegExp("[\\s\\S]*" + this.td[0]).exec(t4)[0].replace(this.td[0], ""), S2 = [], E2 = "", this.$l.forEach(function(i4) {
                        var n5 = G2.td.findIndex(function(t5) {
                          return t5 == i4;
                        }), e4 = new RegExp(i4 + "[\\s\\S]*" + (G2.td[n5 + 1] || "")).exec(t4)[0].replace(G2.td[n5 + 1], ""), r4 = /a=mid:(\w)/.exec(e4)[1];
                        S2.push(r4), E2 += e4 || "";
                      }), t4 = w2.replace(/a=group:BUNDLE.*/, "a=group:BUNDLE " + S2.join(" ")) + E2, this.$l = [], this.td = []), (k2 = eo(t4).filter(function(t5) {
                        return t5.startsWith("m=video");
                      })).length > 0 && (I2 = (O2 = this.lowStream ? k2[1] : k2[0]).match(/m=video(.|\r|\n)*a=rtpmap(.|\r|\n)*(a=fmtp:(\d+).*)/), (0, Pe.H8)() && (R2 = this.Zd.getStartVideoBitrate(), T2 = this.Zd.getMinVideoBitrate(), C2 = [], T2 && C2.push("x-google-min-bitrate=".concat(T2)), R2 && C2.push("x-google-start-bitrate=".concat(R2)), null !== I2 && C2.length && (A2 = I2[3], z2 = "".concat(A2, ";").concat(C2.join(";")), D2 = O2.replace(A2, z2), t4 = t4.replace(O2, D2)))), !(this.Ka.bitRate > 0))
                        return [3, 5];
                      if (N2 = this.Ka.bitRate, P2 = this.Ka.bitRate, M2 = false, !this.canSetBandWidthBySender())
                        return [3, 4];
                      J2.label = 1;
                    case 1:
                      return J2.trys.push([1, 3, , 4]), P2 = this.Zd.getTargetVideoBitrate(), [4, this.applyVideoBitrate(P2)];
                    case 2:
                      return M2 = J2.sent(), [3, 4];
                    case 3:
                      return x2 = J2.sent(), this.error(Co.O2K + JSON.stringify(x2)), [3, 4];
                    case 4:
                      M2 || (t4 = this.setBandWidthBySdp(t4, N2)), null == (j2 = this.getVideoSenders()) || j2.forEach(function(t5) {
                        if (t5 && t5.getParameters && t5.setParameters) {
                          var i4 = t5 === G2.lowVideoSender, n5 = t5.getParameters();
                          if (n5.encodings && 0 != n5.encodings.length || (n5.encodings = [{}]), i4) {
                            var e4 = G2.lowStreamVBitrate;
                            e4 && (n5.encodings[0].maxBitrate = 1e3 * e4);
                          } else {
                            var r4 = G2.getScaleResolutionDownBy();
                            1 != r4 && (n5.encodings[0].scaleResolutionDownBy = r4);
                          }
                          G2.videoInfo.frameRate > 0 && (n5.encodings[0].maxFramerate = G2.videoInfo.frameRate), t5.setParameters(n5);
                        }
                      }), J2.label = 5;
                    case 5:
                      return this.info(Co.O2K + " remoteSdp:" + t4), q2 = { type: "answer", sdp: t4 }, U2 = this.getSpan(L.Pe.event, this.parentSpanKey), this.pn.ia(U2, { sdp: q2.sdp }), U2.setAttributes({ is_mini: L.Pe.is_mini(this.$u), is_dual_stream: L._F.is_dual_stream(this.lowStream ? 1 : 0), webrtc_sid: L.Pe.webrtc_sid(this.Df) }), this.nv = q2.sdp, null === (s3 = this.Xl) || void 0 === s3 || s3.setRemoteDescription(new RTCSessionDescription(q2)).then(function() {
                        G2.info(Co.O2K + " set success"), G2.xu && G2.xu.getTracks().forEach(function(t5) {
                          mt(t5, G2.an, Co.O2K);
                        }), U2.end(), G2.ed == m.iceConnected && G2.Pv && (G2.info(Co.O2K + " update sdp success"), G2.Pv(0), G2.Pv = void 0, G2.isUpdateSDP = false);
                      }, function(t5) {
                        G2.error(Co.O2K + " failed: " + t5.toString()), G2.$u && (0, B.G0)(e3) && G2.warn(Co.O2K + " remote mini  " + e3.toString()), U2.setAttributes({ error: Nc.Zn.code, message: t5.toString() }), U2.end();
                        var i4 = true;
                        G2.$u && (i4 = false, G2.$u = false, G2.Jl = performance.now() - G2.Fl, G2.Ll = 4), G2.publishStateUpdateError(Nc.Zn, i4);
                      }), this.state = 4, i3 && (this.jv(this.Hl), this.Hl = [], this.state = 5), this.Ld && this.Rv(n4), this.startTime = Date.now(), this.checkRetryOtherIPCandidate(), this.info(Co.O2K + " call success"), [2];
                  }
                });
              });
            }, n3.prototype.checkRetryOtherIPCandidate = function() {
              var t4 = this;
              this.hv = setTimeout(function() {
                t4.info("".concat(Co.K15, " check ").concat(t4.state, " ").concat(t4.ipNodeType, " ").concat(t4.kl.length)), 6 !== t4.state && t4.Sl && t4.kl.length > 0 && (t4.ipStackNode = t4.ipStackNode === R.IPv4 ? R.IPv6 : R.IPv4, t4.restartIce());
              }, this.Cl);
            }, n3.prototype.extractCandidate = function(t4) {
              var i3 = this, n4 = ro(t4), e3 = n4[0];
              return n4[1].forEach(function(n5, r3) {
                var s3 = e3[r3].ip, o2 = Hs(s3);
                if (i3.ipStackNode !== o2) {
                  var u2 = { sdpMLineIndex: parseInt(e3[r3].mid), candidate: n5.replace("a=", ""), sdpMid: e3[r3].mid };
                  i3.kl.push(u2), t4 = t4.replace(n5 + "\n", "");
                }
                if (o2 === R.IPv4) {
                  var a2 = Ro(s3), c2 = n5.replace(new RegExp(s3, "g"), a2).replace("a=", ""), h2 = { sdpMLineIndex: parseInt(e3[r3].mid), candidate: c2, sdpMid: e3[r3].mid };
                  i3.Ol.find(function(t5) {
                    return t5.candidate === h2.candidate && t5.sdpMLineIndex === h2.sdpMLineIndex && t5.sdpMid === h2.sdpMid;
                  }) || i3.Ol.push(h2);
                }
              }), t4;
            }, n3.prototype.getScaleResolutionDownBy = function() {
              var t4, i3, n4, e3 = this.lastPublishStats.frameWidth, r3 = (null === (i3 = null === (t4 = this.mn) || void 0 === t4 ? void 0 : t4.cameraMaxResolution) || void 0 === i3 ? void 0 : i3.maxWidth) || 0, s3 = null === (n4 = this.mn.videoTrack) || void 0 === n4 ? void 0 : n4.getSettings().width, o2 = e3 ? Math.min(r3, e3) : r3;
              return r3 && s3 ? Math.max(o2 / s3, 1) : 1;
            }, n3.prototype.setBitrate = function(t4) {
              var i3;
              return Ec(this, void 0, void 0, function() {
                var n4, e3, r3 = this;
                return kc(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      return s3.trys.push([0, 6, , 7]), [4, this.applyVideoBitrate(t4)];
                    case 1:
                      if (s3.sent(), !(0, Pe.aR)() || !(0, Pe.hL)())
                        return [3, 5];
                      s3.label = 2;
                    case 2:
                      return s3.trys.push([2, 4, , 5]), [4, null === (i3 = this.peerConnection) || void 0 === i3 ? void 0 : i3.createOffer({})];
                    case 3:
                      return n4 = s3.sent(), this.onCreateOfferSuccess(n4, true, Sc(Sc({}, this.videoInfo), { bitRate: t4 }), function(t5) {
                        return Ec(r3, void 0, void 0, function() {
                          return kc(this, function(t6) {
                            return this.info("zc.p.sbw set bitrate by update sdp"), [2];
                          });
                        });
                      }), [3, 5];
                    case 4:
                      return s3.sent(), [3, 5];
                    case 5:
                      return this.Zd.setVideoBitrate(t4), this.Ka.bitRate = t4, [3, 7];
                    case 6:
                      return e3 = s3.sent(), this.error(Co.ny0 + JSON.stringify(e3)), [3, 7];
                    case 7:
                      return [2];
                  }
                });
              });
            }, n3.prototype.setVideoBitrateForTC = function(t4) {
              this.Zd.setVideoBitrate(t4);
            }, n3.prototype.setConfiguration = function(t4, i3) {
              var n4, e3, r3 = this;
              if (this.info(Co.XR3 + " 1"), i3) {
                var s3 = i3.turn_username, o2 = i3.turn_auth_key, u2 = i3.turn_urls;
                this.Il = s3, this.Tl = o2;
                var a2 = void 0;
                if (u2) {
                  var c2 = u2.split(";"), h2 = [];
                  c2.forEach(function(t5) {
                    var i4 = Vs(t5).replace("[", "").replace("]", ""), n5 = Hs(i4);
                    if (r3.ipStackNode === n5 ? h2.push(t5) : r3.El.push(t5), n5 == R.IPv4) {
                      var e4 = Ro(i4), s4 = t5.replace(i4, "[".concat(e4, "]"));
                      r3.gn.isCandidateHasIPv6 && h2.push(s4);
                    }
                  }), (n4 = this.El).push.apply(n4, h2), 0 === (a2 = h2).length && a2.push.apply(a2, this.El);
                } else {
                  var f2 = so(t4);
                  if (0 === f2.length)
                    return this.info(Co.XR3 + " no candidate"), false;
                  a2 = f2;
                }
                null === (e3 = this.Xl) || void 0 === e3 || e3.setConfiguration({ iceTransportPolicy: "all", rtcpMuxPolicy: "require", iceServers: [{ urls: a2, username: s3, credential: o2 }], encodedInsertableStreams: this.xd.isSEIStart });
              }
              return true;
            }, n3.prototype.onIceConnectionStateChange = function(t4) {
              var i3, n4 = this;
              if (7 != this.state && null != this.Xl) {
                this.info(Co.lWs + " ice state: " + this.Xl.iceConnectionState);
                var e3 = this.getSpan(L.CK.event, this.parentSpanKey, L.Jv.event);
                if (e3.setAttributes({ ice_state: L.CK.ice_state(this.Xl.iceConnectionState) }), "connected" === this.Xl.iceConnectionState) {
                  if (this.info(Co.lWs + " connected state " + this.state + " ?" + (null === (i3 = this.Xl) || void 0 === i3 ? void 0 : i3.connectionState)), this.jd) {
                    var r3 = (/* @__PURE__ */ new Date()).getTime() - this.jd;
                    this.tv.setAttributes({ publish_begin_time: zc.publish_begin_time(r3) }), this.jd = 0;
                  }
                  if (this.cr.spanEnd({ key: L.Ov.event, par: this.va }, { webrtc_sid: this.Df }), this.ed = m.iceConnected, this.zd) {
                    var s3 = (/* @__PURE__ */ new Date()).getTime() - this.zd;
                    this.info(Co.lWs + " ice time " + s3);
                  }
                  this.ql = false, this.info(Co.lWs + " stateNego:iceConnected"), this.av && (clearTimeout(this.av), this.av = null), null != this.cv && (clearTimeout(this.cv), this.cv = null), this.Xl.connectionState || (this.sd ? this.publishSuccess() : (this.qv && clearTimeout(this.qv), this.qv = null, this.qv = setTimeout(function() {
                    var t5;
                    n4.info(Co.lWs + " get first stats state " + n4.state), 6 !== n4.state && (null === (t5 = n4.Xl) || void 0 === t5 || t5.getStats().then(function(t6) {
                      n4.info(Co.lWs + " get first stats suc"), t6.size > 0 && n4.publishSuccess();
                    }));
                  }, 1e3)));
                } else if ("closed" === this.Xl.iceConnectionState)
                  e3.end(), this.ed = m.iceClosed, this.Lv(this.Xl.iceConnectionState);
                else if ("failed" === this.Xl.iceConnectionState)
                  e3.end(), this.ed = m.iceFailed, this.Lv(this.Xl.iceConnectionState);
                else if ("disconnected" === this.Xl.iceConnectionState) {
                  e3.end(), this.warn(Co.lWs + " ice disconnected "), this.ed = m.iceDisconnected;
                  var o2 = this.gn.lastChangeIpTime;
                  o2 && Date.now() - o2 < 15e3 ? this.publishStateUpdateError(Nc.Xn) : this.cv || (this.cv = setTimeout(function() {
                    n4.Lv("disconnected");
                  }, 15e3));
                }
              }
            }, n3.prototype.onIceCandidate = function(t4) {
              var i3, n4, e3 = this;
              if (this.info(Co.Bnp + " candidate " + JSON.stringify(t4.candidate)), t4.candidate) {
                if (t4.candidate.candidate)
                  Hs(null === (i3 = t4.candidate.candidate.split(" ")) || void 0 === i3 ? void 0 : i3[4]) === R.IPv6 && (this.Ld && (this.info("".concat(Co.Bnp, " can len ").concat(this.Ol.length)), this.Ol.forEach(function(t5) {
                    var i4;
                    null === (i4 = e3.Xl) || void 0 === i4 || i4.addIceCandidate(new RTCIceCandidate(t5)).then(function() {
                      e3.info("".concat(Co.Bnp, " add can suc"));
                    }).catch(function(t6) {
                      e3.info("".concat(Co.Bnp, " add can fail, ").concat(t6.message));
                    });
                  })), this.gn.isCandidateHasIPv6 = true);
                if (-1 != (null === (n4 = t4.candidate.candidate) || void 0 === n4 ? void 0 : n4.indexOf("relay"))) {
                  this.info(Co.Bnp + " candidate " + t4.candidate.candidate + " state " + this.state + " autotcp " + this.Ld);
                  var r3 = function(t5) {
                    e3.jv([{ candidate: t5.candidate.candidate, sdpMid: t5.candidate.sdpMid, sdpMLineIndex: t5.candidate.sdpMLineIndex }]);
                  };
                  this.Ld ? r3(t4) : this.state < 5 || 7 == this.state ? this.Hl.push({ candidate: t4.candidate.candidate, sdpMid: t4.candidate.sdpMid, sdpMLineIndex: t4.candidate.sdpMLineIndex }) : r3(t4);
                } else
                  this.info(Co.Bnp + " candidate not relay");
              }
            }, n3.prototype.jv = function(t4) {
              var i3 = this;
              if (this.info(Co.n9u + " called"), !(t4 = t4.filter(function(t5) {
                return t5.candidate.indexOf("relay") > 0;
              })) || t4.length < 1)
                this.info(Co.n9u + " cancelled");
              else {
                var n4 = this.getSpan(L.aH.event, this.parentSpanKey);
                n4.setAttributes({ candidate_info: L.aH.candidate_info(t4) }), this.ed !== m.iceConnected && (this.ed = m.sendCandidate), this.info(Co.n9u + " stateNego:sendCandidate"), this.Kd.sendCandidateInfo(t4, function(t5, e3, r3) {
                  i3.info(Co.n9u + " send success"), n4.end();
                }, function(t5, e3) {
                  i3.error(Co.n9u + " failed to send: " + t5.toString()), i3.cr.setError(n4, { code: Nc.te.code, message: t5.toString() }), i3.publishStateUpdateError(Nc.te);
                });
              }
            }, n3.prototype.Cv = function(t4) {
              var i3, n4, e3 = null === (i3 = this.Xl) || void 0 === i3 ? void 0 : i3.connectionState;
              this.info(Co.n9B + " conn state: " + e3);
              Date.now();
              if ("connected" === e3) {
                if ("motion" === this.yd) {
                  var r3 = this.videoSender;
                  r3 && "video" === (null === (n4 = r3.track) || void 0 === n4 ? void 0 : n4.kind) && "contentHint" in r3.track && (this.info("".concat(Co.BsE, " recover contentHint: ").concat(r3.track.contentHint, " => ").concat(this.yd, ", tid :").concat(r3.track.id)), r3.track.contentHint = this.yd), this.yd = "";
                }
                6 !== this.state && this.publishSuccess();
              }
            }, n3.prototype.onSignalStateChange = function(t4) {
              this.info(Co.n9B + " signal state: " + t4.target.signalingState), 7 != this.state && null != this.Xl && "closed" === t4.target.signalingState && (this.ed = m.iceClosed, this.Lv(this.Xl.iceConnectionState));
            }, n3.prototype.vv = function(t4, i3, n4) {
              this.info(Co.Q4K + " " + JSON.stringify(n4));
              var e3 = this.getSpan(L.Ux.event, L.Jv.event);
              e3.setAttributes({ err_info: L.Ux.err_info(n4.err_info || ""), reason_info: null == n4 ? void 0 : n4.reason }), e3.end(), this.cr.spanSetAttributes({ key: L.Jv.event, par: this.va }, { denied_info: L.Jv.denied_info(n4.err_info), stop_reason: L.Jv.stop_reason("DenyStop") });
              var r3 = n4.err_info ? JSON.parse(n4.err_info.toLowerCase()) : {}, s3 = r3.action ? r3.action : null, o2 = 1 * n4.reason, u2 = JSON.parse(JSON.stringify(Nc.Fn));
              u2.message += " reason:".concat(o2, " ").concat(s3 ? " action:" + s3 : "", " ").concat((null == r3 ? void 0 : r3.err) ? " err:" + (null == r3 ? void 0 : r3.err) : ""), u2.message += ";".concat(Ya(o2, s3, null == r3 ? void 0 : r3.err)), 1011 === r3.err && (u2 = Nc.Gn), 1014 === r3.err && (u2 = Nc.Jn), 1012 === r3.err && (u2 = re.pn5), this.av && clearTimeout(this.av);
              var a2 = !([4, 8, 10, 11, 12, 14, 18, 24, 26, 27, 28, 32].includes(o2) || [2, 3, 4, 5, 6].includes(s3)), c2 = false;
              if (!this.Bd) {
                if ([8, 10].includes(o2) || [18, 15].includes(o2) && 2 === s3 && [3001, 3002].includes(r3.err)) {
                  this.gn.udpFailNum++;
                  var h2 = this.gn;
                  h2.autoSwitchProtocol && h2.udpFailNum >= h2.maxUdpFailNum && (this.Od = false, this.gn.setIsPeer(false), c2 = true);
                } else
                  this.gn.udpFailNum = 0;
                var f2 = this.gn.isNodeLast(this).lastTryNext, l2 = [3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008].includes(r3.err);
                f2 && l2 && (this.info(Co.Q4K + " switch tcp by all fail"), this.pn.turnToTcp = true, this.Ld = false, this.Od = false, this.gn.setIsPeer(false));
              }
              this.publishStateUpdateError(u2, a2, r3, c2);
            }, n3.prototype.mv = function(t4, i3, n4) {
              if (this.info(Co.de8 + " received "), this.getSpan(L.$9.event, L.Jv.event).end(), i3 == this.Df) {
                var e3 = { code: Nc.Fn.code, message: "server session reset " + n4.reason };
                this.av && clearTimeout(this.av), this.publishStateUpdateError(e3);
              } else
                this.error(Co.de8 + " cannot find session");
            }, n3.prototype.pv = function(t4, i3, n4) {
              var e3;
              if (this.info("".concat(Co.vBC, " received, ").concat(t4)), this.Tv("PublishEventPush", t4)) {
                var r3 = this.getSpan(L.fj.event, this.parentSpanKey, L.Jv.event);
                r3.setAttributes({ event_state: L.fj.event_state(n4.event), webrtc_sid: i3 }), r3.end(), this.qv && (clearTimeout(this.qv), this.qv = null);
                var s3 = null === (e3 = this.Xl) || void 0 === e3 ? void 0 : e3.connectionState;
                this.sd = true, (s3 ? "connected" === s3 : this.ed === m.iceConnected) && 6 != this.state ? 0 == n4.event && this.publishSuccess() : this.resendStreamStatus(0);
              }
            }, n3.prototype.gv = function(t4, n4, e3) {
              if (this.Tv("ClientInfoPush", t4)) {
                this.pn.clientIP !== e3 && this.info(Co.VMq + " client ip changed " + this.pn.clientIP + " " + e3), this.pn.clientIP = e3, this.Id = n4, this.Kd.peerId = this.Id, this.Dd = e3, this.pn.isMultiOuter = this.isMultiOuter(), 6 === this.state && this.getConnectIP(), this.xd.isSEIStart && this.xd.SEIType == i2.UserUnregister && this.xd.unregisterSeiFilter && this.sendSEIUUID();
                var r3 = this.mn;
                if (r3 && null !== r3.activateSEIConfig) {
                  var s3 = null == r3 ? void 0 : r3.activateSEIConfig;
                  this.activateSEIInsert(s3.action, s3.infoType);
                }
              }
            }, n3.prototype.sendSEIUUID = function() {
              var t4 = this;
              this.info("zc.ssuid call: " + this.xd.unregisterSeiFilter), this.Kd.sendSEIUUID(this.xd.unregisterSeiFilter).then(function(i3) {
                t4.info("zc.ssuid success"), 0 == (null == i3 ? void 0 : i3.result) && (t4.xd.uuidSend = true);
              }).catch(function(i3) {
                t4.error("zc.ssuid failed");
              });
            }, n3.prototype.sendRestartIce = function(t4, i3) {
              var n4 = this;
              this.info("zc.p.0.srsi call: " + t4 + " " + i3), this.Kd.sendRestartIce(t4, i3).then(function(t5) {
                n4.info("zc.p.0.srsi result " + JSON.stringify(t5));
              }).catch(function(t5) {
                n4.warn("zc.p.0.srsi fail: " + JSON.stringify(t5));
              });
            }, n3.prototype.Lv = function(t4) {
              this.info(Co.lWs + " state " + this.state + " connectionState " + t4), this.publishStateUpdateError(Nc.Xn);
            }, n3.prototype.getStopReason = function(t4) {
              var i3 = "StopPublish";
              if (t4 && t4.code)
                switch (t4.code) {
                  case 1103051:
                    i3 = "ReachMaxAVRetryTime";
                    break;
                  case 1012:
                    i3 = "DuplicateStreamID";
                    break;
                  default:
                    i3 = "StopPublish";
                }
              return i3;
            }, n3.prototype.stopPublish = function(t4) {
              var i3, n4, r3;
              this.info(Co.aSL + " called " + this.state + " " + JSON.stringify(t4));
              var s3 = this.getStopReason(t4);
              if (1 == this.gn.publishersLength) {
                var o2 = this.gn.playerList;
                for (var u2 in o2) {
                  var a2 = o2[u2];
                  6 == a2.state && a2.broadcasterStatus == e2.ku.start && (a2.sendBroadcasterStatus(0), a2.broadcasterStatus = e2.ku.stop);
                }
              }
              this.closeSession(0), this.resetPushCmdSeqMap();
              var c2 = Date.now();
              this.tv.setAttributes({ publish_state_time: zc.publish_state_time(c2 - this.reportPublishStateTime) }), this.uploadRTCPublishStats();
              var h2 = this.Xh ? 0 : this.lastFailTimeLen;
              (this.cr.spanEnd({ key: L.Jv.event, par: this.va }, { tryidx: Pc.tryidx(this.rtcPublishCount), url: Pc.url(null === (i3 = this.Wd) || void 0 === i3 ? void 0 : i3.server), ip: Pc.ip(this.ip), dispatch_external_ip: Pc.dispatch_external_ip(this.pn.clientIP), resource_type: Pc.resource_type("rtc"), protocol: Pc.protocol("webrtc"), net_protocol: Dc.net_protocol(this.netProtocol), stop_reason: L.Jv.stop_reason(s3), try_time: Pc.try_time(h2), error: (null == t4 ? void 0 : t4.code) || 0, message: (null == t4 ? void 0 : t4.message) || "" }), this.Xh) || this.cr.spanEnd({ key: (this.isRePublish ? L.fo : L.ch).event, par: this.va }, { error: (null == t4 ? void 0 : t4.code) || 0, message: (null == t4 ? void 0 : t4.message) || "", url: Dc.url(null === (n4 = this.Wd) || void 0 === n4 ? void 0 : n4.server), ip: Dc.ip(this.ip), peer_id: Dc.peer_id(this.Id), source_type: Dc.source_type("rtc"), net_protocol: Dc.net_protocol(this.netProtocol) });
              var f2 = 0;
              t4 && 0 !== t4.code && (f2 = t4.code === re.xbZ.code ? this.latestPublishErrCode : t4.code);
              var l2 = this.publishedTimeStamp;
              this.tv.setAttributes({ stream_id: zc.stream_id(this.va), webrtc_sid: zc.webrtc_sid(this.Df), probe_ip_cnt: zc.probe_ip_cnt(this.Rd), valid_probe_ip_cnt: zc.valid_probe_ip_cnt(this.Td), poor_quality_retry_cnt: zc.poor_quality_retry_cnt(this.poorQualityRetryCnt), probe_not_trigger_retry_info: zc.probe_not_trigger_retry_info(this.Cd.length > 0 ? this.Cd : void 0), bitrate: zc.bitrate(1e3 * this.Ka.bitRate), h: zc.h(this.Ka.height), w: zc.w(this.Ka.width), cap_w: zc.w(this.Ka.width), cap_h: zc.h(this.Ka.height), fps: zc.h(this.Ka.frameRate), env: zc.env(this.pn.testEnvironment ? 3 : 1), fail_cnt: zc.fail_cnt(Math.max(this.rtcPublishCount - 1, 0)), continuous_fail_cnt: zc.continuous_fail_cnt(Math.max(this.continuousFailCnt - 1, 0)), stop_reason: zc.stop_reason(s3), error: (null == t4 ? void 0 : t4.code) || 0, message: (null == t4 ? void 0 : t4.message) || "", last_error: f2, try_time: Pc.try_time(h2), valid_d: this.validPublishedTime + (l2 ? c2 - l2 : 0), total_d: c2 - this.firstPublishedTimeStamp, tempbroken_cnt: this.errorTimes, is_mini: this.$u }), (null == t4 ? void 0 : t4.code) === Nc.ce.code && this.uploadPublishEvent(t4), this.tv.end(), this.gn.stopToReport(0), this.gn.stopNetProbe(this), this.retryFailGwNodes = [], this.resetPublish(0), this.hasSucceed = false, this.isRePublish = false, this.rtcPublishCount = 0, this.ql = false, this.Rd = 0, this.Td = 0, this.poorQualityRetryCnt = 0, this.Cd = [], this.continuousFailCnt = 0, null === (r3 = this.Qd) || void 0 === r3 || r3.resetPublish(), this.Zd.stop(), this._d = false, this.seiWorker && this.seiWorker.postMessage({ cmd: "clear", type: "push", streamID: this.va });
            }, n3.prototype.uploadRTCPublishStats = function() {
              var t4, i3, n4, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2;
              this.lastPublishStats.time && this.cr.spanSetAttributes({ key: L.Jv.event, par: this.va }, { lsttime: L.Jv.lsttime(parseInt(this.lastPublishStats.time)), total_stat: L.Jv.total_stat({ afc: null === (t4 = this.lastPublishStats) || void 0 === t4 ? void 0 : t4.audioPacketsSent, vfc: null === (i3 = this.lastPublishStats) || void 0 === i3 ? void 0 : i3.framesSent, tfc: (null === (n4 = this.lastPublishStats) || void 0 === n4 ? void 0 : n4.audioPacketsSent) + (null === (e3 = this.lastPublishStats) || void 0 === e3 ? void 0 : e3.framesSent), vb: null === (r3 = this.lastPublishStats) || void 0 === r3 ? void 0 : r3.videoBytesSent, ab: null === (s3 = this.lastPublishStats) || void 0 === s3 ? void 0 : s3.audioBytesSent, tb: (null === (o2 = this.lastPublishStats) || void 0 === o2 ? void 0 : o2.videoBytesSent) + (null === (u2 = this.lastPublishStats) || void 0 === u2 ? void 0 : u2.audioBytesSent), rtp_rtt: Math.round(1e3 * (null === (a2 = this.publishStat) || void 0 === a2 ? void 0 : a2.currentRoundTripTime)) || 0, w: null === (c2 = this.publishStat) || void 0 === c2 ? void 0 : c2.frameWidth, rtp_plr: null === (h2 = this.publishStat) || void 0 === h2 ? void 0 : h2.videoPacketsLostRate, h: null === (f2 = this.publishStat) || void 0 === f2 ? void 0 : f2.frameHeight, rtp_bw: (null === (l2 = this.publishStat) || void 0 === l2 ? void 0 : l2.availableOutgoingBitrate) ? null === (d2 = this.publishStat) || void 0 === d2 ? void 0 : d2.availableOutgoingBitrate : void 0 }) });
            }, n3.prototype.onPublishStateUpdate = function(t4, i3, n4, e3, r3, s3) {
            }, n3.prototype.onPublishQualityUpdate = function(t4, i3) {
            }, n3.prototype.onDisconnect = function(t4) {
              this.info(Co.Qld + " call"), this.info(Co.Qld + " websocket disconnect"), this.publishStateUpdateError(t4 || L.Nr.error.Wn, !!t4);
            }, n3.prototype.publishSuccess = function() {
              var t4, i3, n4, r3, s3, o2 = this;
              if (this.info(Co.La0 + " call"), this.Bd || (this.gn.udpFailNum = 0), this.isUpdateSDP && this.Pv)
                return this.info(Co.La0 + " update sdp success"), this.Pv(0), this.Pv = void 0, void (this.isUpdateSDP = false);
              var u2 = this.isRePublish ? L.fo : L.ch, a2 = null === (t4 = this.gn.publisherList[this.va]) || void 0 === t4 ? void 0 : t4.retryStreamHandler;
              for (var c2 in null == a2 || a2.getTryTime(this, true), this.reportMiniSdpInfos(), this.cr.spanEnd({ key: u2.event, par: this.va }, { url: Dc.url(null === (i3 = this.Wd) || void 0 === i3 ? void 0 : i3.server), source_type: Dc.source_type("rtc"), signal_consume: Dc.signal_consume(this.signalTime), is_peer: Dc.is_peer(this.Od) }, true, false), 6 != this.state && this.onPublishStateUpdate(e2.eZ.start, this.va, { code: 0, message: "" }, true), this.state = 6, this.hasSucceed = true, this.continuousFailCnt = 0, this.resetIceInfos(), this.resetNat64Infos(), this.getConnectIP(), this.fv = setTimeout(function() {
                o2.reportPublishStartEvent();
              }, 1e3), this.reportPublishStateTime = Date.now(), this.gn.playerList) {
                var h2 = this.gn.playerList[c2];
                6 == h2.state && h2.broadcasterStatus == e2.ku.stop && (h2.sendBroadcasterStatus(1), h2.broadcasterStatus = e2.ku.start);
              }
              var f2 = this.au("probe_started_num");
              !isNaN(f2) && (this.gn.probeStartedNum = f2), this.qualityHandler.setPublishQualityTimer();
              var l2 = this.au("auto_switch_publish_video_codec", true);
              this.publishOption.enableAutoSwitchVideoCodec && l2 && (null === (n4 = this.Dl) || void 0 === n4 ? void 0 : n4.offerToReceiveVideo) && !this.sideMediaConfig.isSEIStart && (this.rv = setTimeout(function() {
                return Ec(o2, void 0, void 0, function() {
                  var t5, i4;
                  return kc(this, function(n5) {
                    switch (n5.label) {
                      case 0:
                        if (this.checkCodecSupport(false))
                          return [3, 4];
                        t5 = this.nd, i4 = "H264" === this.nd ? "VP8" : "H264", this.info("".concat(Co.La0, " switch video codec to ").concat(i4)), n5.label = 1;
                      case 1:
                        return n5.trys.push([1, 3, , 4]), [4, this.switchVideoCodec(t5, i4)];
                      case 2:
                        return n5.sent() && this.pn.actionListener("publisherVideoEncoderChanged", this.getCodecId(t5), this.getCodecId(this.nd), this.streamId), [3, 4];
                      case 3:
                        return n5.sent(), this.warn("".concat(Co.La0, " switch video codec fail")), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              }, this.Nl)), this.xd.track && this.xd.isSEIStart && "H265" === this.nd && (this.sv = setTimeout(function() {
                return Ec(o2, void 0, void 0, function() {
                  var t5, i4 = this;
                  return kc(this, function(n5) {
                    switch (n5.label) {
                      case 0:
                        if (this.checkCodecSupport(true))
                          return [3, 4];
                        this._clearCanvasTimer(), this.Ml = 320, this.xl = 240, this.info("".concat(Co.La0, " fb sei trk res to ").concat(this.Ml, " * ").concat(this.xl)), n5.label = 1;
                      case 1:
                        return n5.trys.push([1, 3, , 4]), t5 = this.xd, [4, this._addCanvasStreamVideoTrack()];
                      case 2:
                        return t5.track = n5.sent(), this.getVideoSenders().forEach(function(t6) {
                          t6 && t6.replaceTrack(i4.xd.track);
                        }), [3, 4];
                      case 3:
                        return n5.sent(), this.warn("".concat(Co.La0, " fb sei trk fail")), [3, 4];
                      case 4:
                        return [2];
                    }
                  });
                });
              }, this.Pl));
              var d2 = 2, v2 = 2, m2 = null === (r3 = this.mn) || void 0 === r3 ? void 0 : r3.videoTrack, p2 = 0 !== this.xu.getAudioTracks().length && this.xu.getAudioTracks()[0];
              this.xu && this.xu.getTracks().forEach(function(t5) {
                mt(t5, o2.an, Co.La0);
              }), m2 && "live" === m2.readyState && m2.enabled || (null === (s3 = this.mn) || void 0 === s3 ? void 0 : s3.muteImage) ? d2 = 0 : m2 && !m2.enabled && (d2 = 3), p2 && "live" === p2.readyState && (v2 = p2.enabled ? 0 : 3), this.sendStreamStatus(d2, v2, true), this.gn.soundLevelDelegate && this.mn && this.mn.startSoundLevel(), 9 === this.pn.scenario && this.setStreamAlignmentProperty(1).then(function(t5) {
                o2.an.info("zc.ssap ktv. " + t5);
              }), this.info(Co.La0 + " call success");
            }, n3.prototype.startSoundLevel = function() {
              var t4;
              if (this.info(Co.b9b + " call"), this.xu && 0 != this.xu.getAudioTracks().length)
                try {
                  null === (t4 = this.mn) || void 0 === t4 || t4.startSoundLevel();
                } catch (t5) {
                  this.error(Co.b9b + " get sound level failed " + t5);
                }
              else
                this.info(Co.b9b + " local stream no found");
            }, n3.prototype.stopSoundLevel = function() {
              var t4;
              this.info(Co.d8C + " call"), null === (t4 = this.mn) || void 0 === t4 || t4.stopSoundLevel();
            }, n3.prototype.handleEncBitrate = function(t4, i3, n4) {
              var e3 = this, r3 = 1e3 * this.Ka.bitRate, s3 = 0;
              if (i3 > 0) {
                this.hd || this.ld || (this.fd++, i3 >= 0.75 * t4 ? (this.fd >= 10 && this.vd >= 0.6 * this.fd && (this.ld = true, this.md = r3), this.vd++) : this.fd >= 10 && this.vd / this.fd < 0.3 && (this.hd = true));
                var o2 = ot(this.pd, i3, 10);
                if (this.hd)
                  if (o2 >= 1.05 * r3) {
                    if (this.md > r3) {
                      this.md -= o2 > t4 ? o2 - t4 : o2 - r3, this.md = Math.max(this.md, r3), this.md = Math.min(this.md, 2 * r3), s3 = this.md;
                    }
                  } else
                    o2 < 0.8 * r3 && (0 === this.md && (this.md = t4), this.md = this.md >= r3 ? this.md + 0.08 * r3 : 1.05 * this.md, this.md = Math.min(this.md, 2 * r3), s3 = this.md);
              }
              if (n4 > 0 && n4 < r3) {
                var u2 = ot(this.bd, n4, 5);
                if (this.hd) {
                  if (u2 + i3 > 1.05 * r3)
                    this.md -= u2 + i3 - r3, this.md = Math.max(this.md, r3 - u2), s3 = this.md;
                } else
                  s3 = this.md - u2;
              } else
                this.md < r3 && (this.md = r3, s3 = this.md);
              if (s3 > 0) {
                s3 = ot(this.gd, s3, 5);
                var a2 = this.getVideoSenders();
                if (!a2)
                  return;
                var c2 = a2.length > 1 ? a2[1] : a2[0] ? a2[0] : null;
                if (!c2)
                  return;
                var h2 = c2.getParameters();
                h2.encodings || (h2.encodings = [{}]), h2.encodings[0].maxBitrate = s3, c2.setParameters(h2).then(function() {
                  e3.info(Co.Rfl + " success " + s3);
                }).catch(function(t5) {
                  e3.error(Co.Rfl + " " + t5);
                });
              }
            }, n3.prototype.resetEncBitrate = function() {
              this.hd = false, this.fd = 0, this.ld = false, this.vd = 0, this.md = 0, this.pd = [], this.gd = [], this.bd = [];
            }, n3.prototype.replacePublishedTrack = function(t4, i3, n4) {
              var e3, r3;
              return void 0 === i3 && (i3 = false), void 0 === n4 && (n4 = {}), Ec(this, void 0, void 0, function() {
                var s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2;
                return kc(this, function(b2) {
                  switch (b2.label) {
                    case 0:
                      return this.info("zc.rt.1 call ".concat(t4.kind, " ").concat(i3, " ").concat(JSON.stringify(n4))), s3 = this.previewer, (a2 = (u2 = "video" === (o2 = t4.kind)) ? s3.videoTrack : s3.audioTrack) || n4.handleTrack ? (c2 = 0, h2 = 0, u2 ? (c2 = Oo(i3 ? a2 : t4), h2 = this.mic_status) : "audio" === o2 && (h2 = Oo(t4), c2 = this.camera_status), [4, s3.replacePreviewTrack(t4, i3, n4)]) : [3, 13];
                    case 1:
                      return b2.sent(), f2 = t4, "audio" == t4.kind && s3.insertableaudio && (null === (e3 = s3.localStream) || void 0 === e3 ? void 0 : e3.getAudioTracks()[0]) && (f2 = null === (r3 = s3.localStream) || void 0 === r3 ? void 0 : r3.getAudioTracks()[0]), l2 = "audio" === o2 && s3.destNode, d2 = false, (!u2 || !i3 && s3.isVideoNodeQueueEnabled) && ("audio" !== o2 || l2) || (d2 = true), m2 = u2 ? this.lowVideoSender : void 0, (v2 = u2 ? this.videoSender : this.audioSender) ? d2 ? (p2 = !this.isTcVideoPasued() && s3.isVideoEnabled, u2 && p2 ? m2 && s3.lowStream ? [4, m2.replaceTrack(s3.lowStream.getVideoTracks()[0])] : [3, 3] : [3, 8]) : [3, 10] : [3, 11];
                    case 2:
                      b2.sent(), b2.label = 3;
                    case 3:
                      return s3.streamFromCanvas ? (s3.streamFromCanvasTrack && !s3.zegoCaptureStream || (g2 = s3.getStreamThroughCanvas(s3.localStream), s3.streamFromCanvasTrack = g2.getVideoTracks()[0]), [4, v2.replaceTrack(s3.streamFromCanvas ? s3.streamFromCanvasTrack : f2)]) : [3, 5];
                    case 4:
                      return b2.sent(), [3, 7];
                    case 5:
                      return [4, v2.replaceTrack(f2)];
                    case 6:
                      b2.sent(), b2.label = 7;
                    case 7:
                      return [3, 10];
                    case 8:
                      return u2 ? [3, 10] : s3.isAudioEnabled ? [4, v2.replaceTrack(f2)] : [3, 10];
                    case 9:
                      b2.sent(), b2.label = 10;
                    case 10:
                      return this.sendStreamStatus(c2, h2), [3, 12];
                    case 11:
                      this.info("zc.rt.1 replace remote track will work after stream published"), b2.label = 12;
                    case 12:
                      return this.info("zc.rt.1 replace remote track success"), [2, { errorCode: 0, extendedData: "" }];
                    case 13:
                      return this.error("zc.rt.1 publisher track no found"), [2, { errorCode: re.fFX.code, extendedData: re.fFX.message }];
                  }
                });
              });
            }, n3.prototype.sendStreamStatus = function(t4, i3, n4, e3) {
              var r3 = this;
              void 0 === n4 && (n4 = false), void 0 === e3 && (e3 = 0), (n4 || this.camera_status !== t4 || this.mic_status !== i3) && this.Wd && (this.camera_status = t4, this.mic_status = i3, this.Gd = false, this.sd || this.zl ? (this.zl && (clearTimeout(this.zl), this.zl = null), e3++, this.info(Co.msE + " start send ".concat(e3, " camera:").concat(t4, " mic:").concat(i3, ".")), this.Fd = this.Kd.sendStreamStatus(t4, i3, function(t5) {
                r3.Fd === t5 && (r3.Gd = true);
              }, function() {
                r3.camera_status === t4 && r3.mic_status === i3 && (r3.warn(Co.msE + " time out. ".concat(e3)), e3 <= 1 && r3.sendStreamStatus(t4, i3, true, e3));
              })) : this.zl = setTimeout(function() {
                r3.resendStreamStatus(1);
              }, 3e3));
            }, n3.prototype.resendStreamStatus = function(t4) {
              var i3, n4, e3;
              if (void 0 === t4 && (t4 = 0), !this.Gd)
                if (this.info(Co.msE + " resend ".concat(t4)), 0 == t4) {
                  var r3 = 2, s3 = 2, o2 = null === (i3 = this.mn) || void 0 === i3 ? void 0 : i3.videoTrack, u2 = 0 !== this.xu.getAudioTracks().length && this.xu.getAudioTracks()[0];
                  o2 && ("live" === o2.readyState || (null === (n4 = this.mn) || void 0 === n4 ? void 0 : n4.muteImage)) && (r3 = (null === (e3 = this.mn) || void 0 === e3 ? void 0 : e3.muteImage) || true === o2.enabled ? 0 : 3), u2 && "live" === u2.readyState && (s3 = true === u2.enabled ? 0 : 3), this.sendStreamStatus(r3, s3, true);
                } else
                  this.sendStreamStatus(this.camera_status, this.mic_status, true);
            }, n3.prototype.handleSEIVideoTrack = function(t4) {
              "add" == t4 && this.xd.track ? this._clearCanvasTimer() : "remove" != t4 || this.xd.track || (this.xd.track = this._addCanvasStreamVideoTrack()), this.seiWorker && this.seiWorker.postMessage({ cmd: "publishStreamType", streamID: this.va, onlyAudio: !!this.xd.track });
            }, n3.prototype._addCanvasStreamVideoTrack = function() {
              var t4 = this;
              16 === this.Ml && 16 === this.xl && "H265" === this.nd && (this.Ml = 160, this.xl = 160), this.Ql = (0, G.FP)(this.Ml, this.xl), this.Yl = this.Ql.getContext("2d"), this.Kl = new Image(), this.Kl.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAFFJREFUOE9jZGBgaGBgYLBnYGBwYCANHGBgYDjIyMDAcIWBgUGbNL1w1VdBBvwnUzNY26gBo2EwjNLBfjJyIiz7HADlBVB2DiEjR15lYGBYAwAypRSY53SYoAAAAABJRU5ErkJggg==";
              var i3 = this.pn.engineConfig.blankVideoTrackFrameInterval || 100;
              return this.info("zc.acsvt frame interval: " + i3), this.Vl = setInterval(function() {
                var i4;
                null === (i4 = t4.Yl) || void 0 === i4 || i4.drawImage(t4.Kl, 0, 0, t4.Ml, t4.xl);
              }, i3), this.Ql.captureStream().getVideoTracks()[0];
            }, n3.prototype.getSpan = function(t4, i3, n4, r3) {
              void 0 === r3 && (r3 = false);
              var s3 = (0, G.fU)(this.cr, e2.t0.H, this.va, t4, i3, n4, r3);
              return s3.setAttribute("is_mini", this.$u), s3;
            }, n3.prototype.isMultiOuter = function() {
              return !(!this.pn.accessClientIp || !this.Dd || this.pn.accessClientIp === this.Dd);
            }, n3.prototype.isCustomCdn = function() {
              var t4, i3;
              return void 0 !== (null === (t4 = this.$d) || void 0 === t4 ? void 0 : t4.cdnUrl) && "" !== (null === (i3 = this.$d) || void 0 === i3 ? void 0 : i3.cdnUrl);
            }, n3.prototype.setTurnTcp = function() {
              this.Bd = this.pn.turnToTcp, void 0 !== this.pn.turnOverTcpOnly && (this.Bd = this.pn.turnOverTcpOnly);
            }, n3.prototype.setStreamAlignmentProperty = function(t4) {
              return this.Md.alignment = t4, this.Kd.sendStreamAlignmentProperty(t4);
            }, n3.prototype.uploadPublishEvent = function(t4) {
              var i3 = this.va, n4 = t4.code, e3 = {};
              this.Jl && (e3.mini_retry_consume = +this.Jl.toFixed(0), this.Jl = 0, this.Fl = 0), this.cr.spanEnd({ key: L.Og.event, par: i3 }, Sc(Sc(Sc({}, e3), { error: n4 }), t4), true);
            }, n3.prototype.getConnectIP = function() {
              if (this.Dd && !this.ip) {
                var t4 = Hs(this.Dd), i3 = this.getIPByGwNode(t4), n4 = i3.ip, e3 = i3.port;
                this.ip = n4, this.port = e3, this.info("zc.p.0.gci.0 ip: ".concat(n4, " ").concat(e3)), this.reportPublishStartEvent();
              }
            }, n3.prototype.reportPublishStartEvent = function() {
              var t4 = this.isRePublish ? L.fo : L.ch;
              this.cr.spanSetAttributes({ key: t4.event, par: this.va }, { ip: Dc.ip(this.ip), port: Dc.port(this.port) }), this.cr.spanReport({ key: t4.event, par: this.va });
            }, n3.prototype.getIPByGwNode = function(t4) {
              var i3;
              if (this.ipNode) {
                var n4 = this.ipNode.vid.split("|"), e3 = "";
                return n4.forEach(function(i4) {
                  var n5 = Hs(i4);
                  t4 === n5 && (e3 = i4);
                }), { ip: e3, port: this.ipNode.port };
              }
              if (this.gwNode) {
                var r3 = null === (i3 = this.gwNode) || void 0 === i3 ? void 0 : i3.split(":"), s3 = r3[r3.length - 1];
                return { ip: this.gwNode.replace(":" + s3, ""), port: parseInt(s3) };
              }
              return { ip: "", port: 0 };
            }, n3.prototype.sendNetQualityGrade = function(t4, i3) {
              this.Kd.sendNetQualityGrade(t4, i3);
            }, n3.prototype.closeSession = function(t4) {
              var i3, n4;
              null === (i3 = this.Wd) || void 0 === i3 || i3.off("uaConnected", this.ou.onUaSocketConnected), this.Wl && (this.Kd.sendCloseSession(t4, function() {
              }), null === (n4 = this.Wd) || void 0 === n4 || n4.removeSession(this.Df), this.Wl = false);
            }, n3.prototype.activateSEIInsert = function(t4, i3) {
              var n4 = this;
              return new G.l3(function(r3, s3) {
                return n4.Kd ? (n4.Kd.activateSEIInsert(t4, i3, function(t5, i4) {
                  var e3 = false;
                  0 === i4.result ? (n4.info(Co.gPJ + " called success"), e3 = true) : 1 === i4.result ? (n4.error(Co.gPJ + " " + i4.peer_id + " invalid param."), e3 = false) : 2 === i4.result && (n4.error(Co.gPJ + " peer not exist"), e3 = false), r3(e3);
                }, function(t5) {
                  e2.Xb === t5 && n4.error(Co.gPJ + " request timeout");
                }), false) : r3(false);
              });
            }, n3.prototype.getStreamAddOptions = function() {
              return { stream_resource: 1, stream_codec: "VP8" === this.nd ? 2 : this.lowStream ? 4 : 0 };
            }, n3.prototype.onStatsUpdated = function(t4) {
              this.Zd.onStatsUpdated(t4);
            }, n3.prototype.getLocalMiniSdp = function(t4, i3) {
              var n4, e3 = this;
              if (this.$u) {
                var r3 = performance.now();
                null === (n4 = this.Yd) || void 0 === n4 || n4.getMiniSdp(t4).then(function(t5) {
                  e3.Ul = performance.now() - r3, i3(t5);
                }).catch(function(t5) {
                  e3.$u = false, e3.pn.$u = false, e3.Ul = performance.now() - r3, e3.Jl = performance.now() - e3.Fl, e3.Ll = 1, i3();
                });
              } else
                i3();
            }, n3.prototype.parseRemoteSdp = function(t4, i3, n4) {
              var e3, r3 = this;
              if (this.$u && (0, B.G0)(t4.mini_sdp) && t4.mini_sdp.byteLength > 0) {
                var s3 = performance.now();
                null === (e3 = this.Yd) || void 0 === e3 || e3.parseMiniSdp(t4.mini_sdp).then(function(t5) {
                  r3.Gl = performance.now() - s3, i3(t5);
                }).catch(function(t5) {
                  r3.$u = false, r3.pn.$u = false, r3.Gl = performance.now() - s3, r3.Jl = performance.now() - r3.Fl, r3.Ll = 3, n4(t5);
                });
              } else
                i3(t4.sdp);
            }, n3.prototype.reportMiniSdpInfos = function() {
              var t4 = this.isRePublish ? L.fo : L.ch, i3 = {};
              (this.$u || this.Ll) && (i3.mini_error = this.Ll, i3.code_sdp_consume = +this.Ul.toFixed(0), i3.decode_sdp_consume = +this.Gl.toFixed(0), this.Ll = 0, this.Ul = 0, this.Gl = 0), this.cr.spanSetAttributes({ key: t4.event, par: this.va }, Sc({}, i3));
            }, n3.prototype.onTcPauseVideo = function() {
              var t4 = this;
              if (this._d = true, this.peerConnection && 0 === this.camera_status) {
                var i3 = "", n4 = this.getVideoSenders();
                null == n4 || n4.forEach(function(n5) {
                  return Ec(t4, void 0, void 0, function() {
                    var t5, e4, r3;
                    return kc(this, function(s3) {
                      return t5 = n5 === this.lowVideoSender, n5.track && (t5 ? t5 && (i3 += " low:", i3 += n5.track.id, (e4 = null === (r3 = this.lowStream) || void 0 === r3 ? void 0 : r3.getVideoTracks()[0].clone()) && (e4.stop(), n5.replaceTrack(e4), this.kd = e4.id)) : (i3 += " big:", i3 += n5.track.id, (e4 = this.localStream.getVideoTracks()[0].clone()).stop(), n5.replaceTrack(e4), this.Ed = e4.id)), [2];
                    });
                  });
                });
                var e3 = this.Zd.getFeedback();
                this.info("".concat(Co.BsE, " pause video, tid: ").concat(i3, ", tc:{").concat(e3.status, "|").concat(e3.bandwide, "|").concat(e3.targetBitrate, "|").concat(e3.rtt, "}"));
              } else
                this.warn("".concat(Co.BsE, " pause video, camera: ").concat(this.camera_status, ", bw: ").concat(this.Zd.getBandwide()));
            }, n3.prototype.onTcResumeVideo = function() {
              var t4 = this;
              if (this._d = false, this.peerConnection && 0 === this.camera_status) {
                var i3 = "", n4 = this.getVideoSenders();
                null == n4 || n4.forEach(function(n5) {
                  return Ec(t4, void 0, void 0, function() {
                    var t5, e4, r3, s3;
                    return kc(this, function(o2) {
                      return t5 = n5 === this.lowVideoSender, e4 = this.mn.isVideoEnabled && !this.mn.hasStopCaptureVideo, n5.track && e4 && (t5 ? t5 && (r3 = void 0, (r3 = this.Sd ? this.xu.getVideoTracks()[0].clone() : this.mn.streamFromCanvasTrack ? this.mn.streamFromCanvasTrack : null === (s3 = this.lowStream) || void 0 === s3 ? void 0 : s3.getVideoTracks()[0]) && (n5.replaceTrack(r3), i3 += " low:", i3 += null == r3 ? void 0 : r3.id)) : (r3 = void 0, this.Sd ? r3 = this.xu.getVideoTracks()[0] : (r3 = this.mn.getDestinationTrack()) || (r3 = this.mn.streamFromCanvasTrack ? this.mn.streamFromCanvasTrack : this.xu.getVideoTracks()[0]), r3 && (n5.replaceTrack(r3), i3 += " big:", i3 += r3.id))), [2];
                    });
                  });
                }), this.kd = "", this.Ed = "";
                var e3 = this.Zd.getFeedback();
                this.info("".concat(Co.BsE, " resume video, tid: ").concat(i3, ", tc:{").concat(e3.status, "|").concat(e3.bandwide, "|").concat(e3.targetBitrate, "|").concat(e3.rtt, "}"));
              } else
                this.warn("".concat(Co.BsE, " resume video, bw: ").concat(this.Zd.getBandwide()));
            }, n3.prototype.isVideoTrackAlive = function() {
              var t4 = this.mn._videoTrack, i3 = !(!t4 || "live" !== t4.readyState || !t4.enabled);
              return this.info("zc.p.0.ivta ".concat(i3)), i3;
            }, n3.prototype.isAudioTrackAlive = function() {
              var t4 = 0 !== this.xu.getAudioTracks().length && this.xu.getAudioTracks()[0], i3 = !(!t4 || "live" !== t4.readyState || !t4.enabled);
              return this.info("zc.p.0.iata ".concat(i3)), i3;
            }, n3.prototype.getAvailableBitrate = function() {
              var t4, i3, n4;
              return (null === (t4 = this.publishStat) || void 0 === t4 ? void 0 : t4.availableOutgoingBitrate) && (n4 = (null === (i3 = this.publishStat) || void 0 === i3 ? void 0 : i3.availableOutgoingBitrate) / 1e3), n4;
            }, n3;
          }(Bo), xc = function() {
            this.publisherList = {}, this.playerList = {};
          }, jc = function(t3, i3, n3, e3, r3) {
            if (i3.breakStartTime) {
              var s3 = t3 - i3.breakStartTime;
              s3 >= e3 && (i3.cumulativeBreakDuration += s3, r3 ? i3.cumulativeBreakDurationL3 += s3 : i3.cumulativeBreakDurationRtc += s3, n3.breakDuration += s3), i3.breakStartTime = void 0;
            }
          }, qc = function(t3, i3, n3, e3, r3, s3, o2, u2, a2, c2) {
            void 0 === a2 && (a2 = u2);
            var h2 = 1e3;
            if (r3 > h2 && (r3 = h2), e3.breakStartTime)
              if (n3) {
                if (0 === i3)
                  t3 - e3.breakStartTime >= 22e3 && jc(t3, e3, o2, r3, c2), s3.breakDuration += h2;
                else if (u2 >= r3)
                  if (u2 < 500)
                    if (u2 + a2 < h2)
                      jc(t3 - (h2 - a2), e3, o2, r3, c2), e3.breakStartTime = t3 - u2, s3.breakDuration += a2 + u2, s3.decodeTime += h2 - (a2 + u2);
                    else
                      jc(t3 - h2 + a2, e3, o2, r3, c2), e3.breakStartTime = t3 - h2 + a2, s3.breakDuration += h2;
                  else
                    u2 >= 500 && (jc(t3 - u2, e3, o2, r3, c2), e3.breakStartTime = t3 - u2, s3.breakDuration += h2);
                else
                  a2 <= r3 ? (jc(t3 - h2 + a2, e3, o2, r3, c2), e3.breakStartTime = void 0, s3.breakDuration += a2, s3.decodeTime += h2 - a2, o2.decodeDuration += h2 - a2) : s3.breakDuration += h2;
              } else {
                e3.resumeRecv = false;
                var f2 = t3 - h2 - e3.breakStartTime;
                f2 <= 0 && (f2 = 0), e3.breakStartTime = void 0, e3.noBreakNoDecodeDuration += f2, c2 ? e3.noBreakNoDecodeDurationL3 += f2 : e3.noBreakNoDecodeDurationRtc += f2, s3.breakCancelDuration += f2, o2.blankDuration += f2;
              }
            else
              n3 ? 0 === i3 ? e3.resumeRecv ? (e3.breakStartTime = t3 - h2, s3.breakDuration += h2) : (e3.noBreakNoDecodeDuration += h2, c2 ? e3.noBreakNoDecodeDurationL3 += h2 : e3.noBreakNoDecodeDurationRtc += h2, o2.blankDuration += h2) : a2 > r3 ? e3.resumeRecv ? (e3.breakStartTime = t3 - a2, e3.cumulativeBreakDuration += a2, c2 ? e3.cumulativeBreakDurationL3 += a2 : e3.cumulativeBreakDurationRtc += a2, s3.breakDuration += a2, s3.decodeTime += h2 - a2, o2.breakDuration += a2, o2.decodeDuration += h2 - a2) : (e3.noBreakNoDecodeDuration += h2, c2 ? e3.noBreakNoDecodeDurationL3 += h2 : e3.noBreakNoDecodeDurationRtc += h2, o2.blankDuration += h2) : (s3.decodeTime += h2, o2.decodeDuration += h2) : e3.decodeStartTime && (0 === i3 ? (e3.resumeRecv = false, e3.noBreakNoDecodeDuration += h2, c2 ? e3.noBreakNoDecodeDurationL3 += h2 : e3.noBreakNoDecodeDurationRtc += h2, o2.blankDuration += h2) : (s3.decodeTime += h2, o2.decodeDuration += h2));
            n3 && i3 && (e3.resumeRecv = true);
          }, Lc = function(t3, i3, n3, e3, r3, s3, o2) {
            if (e3 = e3 > 1e3 ? 1e3 : e3, i3.breakDuration = 0, i3.breakCancelDuration = 0, i3.decodeTime = 0, n3.decodeDuration = 0, n3.breakDuration = 0, n3.blankDuration = 0, t3.decodeStartTime) {
              var u2 = s3, a2 = u2 - t3.decodeStartTime;
              if (t3.decodeStartTime = void 0, t3.totalDuration += a2, o2 ? t3.totalDurationL3 += a2 : t3.totalDurationRtc += a2, t3.breakStartTime) {
                var c2 = u2 - t3.breakStartTime;
                t3.breakStartTime = void 0, r3 ? c2 > e3 && (t3.cumulativeBreakDuration += c2, o2 ? t3.cumulativeBreakDurationL3 += c2 : t3.cumulativeBreakDurationRtc += c2) : (t3.noBreakNoDecodeDuration += c2, o2 ? t3.noBreakNoDecodeDurationL3 += c2 : t3.noBreakNoDecodeDurationRtc += c2);
              }
              var h2 = t3.cumulativeBreakDuration, f2 = t3.totalDurationL3, l2 = t3.cumulativeBreakDurationL3, d2 = t3.noBreakNoDecodeDurationL3, v2 = t3.totalDurationRtc, m2 = t3.cumulativeBreakDurationRtc, p2 = t3.noBreakNoDecodeDurationRtc, g2 = t3.totalDuration - t3.cumulativeBreakDuration - t3.noBreakNoDecodeDuration;
              return t3.cumulativeDecodeDuration = g2, t3.cumulativeDecodeDurationL3 = f2 - l2 - d2, t3.cumulativeDecodeDurationRtc = v2 - m2 - p2, { cumulativeBreakDuration: h2, cumulativeDecodeDuration: g2 };
            }
            return { cumulativeBreakDuration: 0, cumulativeDecodeDuration: 0 };
          }, Bc = function() {
            return Bc = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Bc.apply(this, arguments);
          }, Uc = function() {
            function t3(t4, i3, n3, e3, r3, o2) {
              this.tf = t4, this.if = i3, this.Bv = n3, this.an = e3, this.dataReport = r3, this.pn = o2, this.playQualityList = [], this.ef = null, this.sf = null, this.uf = null, this.Uv = { audioPacketsLost: 0, videoPacketsLost: 0, time: 0, audioTime: 0, videoTime: 0, audioBytesReceived: 0, videoBytesReceived: 0, audioPacketsReceived: 0, videoPacketsReceived: 0, framesDecoded: 0, framesReceived: 0, framesDropped: 0, audioBitrate: 0, totalRenderFrames: 0, renderTime: 0, paintedFrames: 0, lastTimestamp: 0, videoElem: null, audioJitterBufferDelay: 0, audioJitterBufferEmittedCount: 0, videoJitterBufferDelay: 0, videoJitterBufferEmittedCount: 0, jitterBufferDelayMs: 0 }, this.Wh = { video: { videoBitrate: 0, videoFPS: 0, videoRenderFPS: -1, videoTransferFPS: 0, frameHeight: 0, frameWidth: 0, muteState: "1", videoQuality: -1, googCodecName: "", videoPacketsLost: 0, videoPacketsLostRate: 0, videoFramesDecoded: 0, videoFramesDropped: 0, videoCumulativeDecodeTime: 0, videoCumulativeBreakTime: 0, videoCumulativeBreakRate: 0 }, audio: { audioBitrate: 0, audioCodec: "", muteState: "1", audioQuality: -1, audioFPS: 0, audioJitter: 0, audioLevel: 0, audioPacketsLost: 0, audioPacketsLostRate: 0, audioSamplingRate: 0, audioSendLevel: 0, googCodecName: "", audioCumulativeDecodeTime: 0, audioCumulativeBreakTime: 0, audioCumulativeBreakRate: 0 }, peerToPeerDelay: 0, peerToPeerPacketLostRate: 0 }, this.decodeStartTime = 0, this.hf = 0, this.probeState = s2.probed, this._l = null, this.Gv = 1e4, this.lf = 0, this.playStat = {}, this.Hv = 200, this.Vv = 500, this.Qv = { breakStartTime: void 0, cumulativeBreakDuration: 0, cumulativeDecodeDuration: 0, decodeStartTime: void 0, decodeEndTime: void 0, totalDuration: 0, noBreakNoDecodeDuration: 0, resumeRecv: true, cumulativeBreakDurationL3: 0, cumulativeDecodeDurationL3: 0, noBreakNoDecodeDurationL3: 0, totalDurationL3: 0, cumulativeBreakDurationRtc: 0, cumulativeDecodeDurationRtc: 0, noBreakNoDecodeDurationRtc: 0, totalDurationRtc: 0 }, this.Yv = { breakStartTime: void 0, cumulativeBreakDuration: 0, cumulativeDecodeDuration: 0, decodeStartTime: void 0, decodeEndTime: void 0, totalDuration: 0, noBreakNoDecodeDuration: 0, resumeRecv: true, cumulativeBreakDurationL3: 0, cumulativeDecodeDurationL3: 0, noBreakNoDecodeDurationL3: 0, totalDurationL3: 0, cumulativeBreakDurationRtc: 0, cumulativeDecodeDurationRtc: 0, noBreakNoDecodeDurationRtc: 0, totalDurationRtc: 0 }, this.Kv = 0, this.Zv = { breakDuration: 0, breakCancelDuration: 0, decodeTime: 0 }, this.Xv = { breakDuration: 0, breakCancelDuration: 0, decodeTime: 0 }, this.Wv = { decodeDuration: 0, breakDuration: 0, blankDuration: 0 }, this.$v = { decodeDuration: 0, breakDuration: 0, blankDuration: 0 }, this.tm = { totalSquaredInterFrameDelay: 0, totalInterFrameDelay: 0, framesDecode: 0, totalSamplesReceived: 0, concealedSamples: 0, audioBytesReceived: 0 }, this.im = void 0, this.nm = "", this.ff = 0, this.rm = 0, this.rf = 1e3, this.df = "udp", this.vf = {}, this.mf = "", this.pf = "", this.sm = false, this.om = false, this.um = false, this.bf = 0, this._f = 0, this.connectIPStack = -1, this.am = 0, this.af = 0, this.eo = 0, this.hm = true, this.onFindDecodeException = function(t5) {
              }, this.fm = void 0, this.lm = false, this.onRecvMediaData = function() {
              }, this.p2pNetStats = { p2pLostRate: 0, p2pRTT: 0 }, this.Wh.video.muteState = this.Bv.videoMuteState, this.Wh.audio.muteState = this.Bv.audioMuteState, this.wf = new nc(this.pn, this.an, this.va, L.Nr.event);
            }
            return Object.defineProperty(t3.prototype, "_playStream", { get: function() {
              return this.Bv.playStream;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "gn", { get: function() {
              return this.pn.streamCenter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "va", { get: function() {
              return this.Bv.streamId;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sessionId", { get: function() {
              return this.Bv.sessionId;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "peerID", { get: function() {
              return this.Bv.peerID;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "audioMuted", { get: function() {
              if (!this.Bv.remoteStream || this.Bv.remoteStream.getAudioTracks().length <= 0)
                return true;
              var t4 = this.Bv.remoteStream.getAudioTracks()[0];
              return !(!t4 || !t4.muted && "ended" !== t4.readyState && t4.enabled) || ("1" == this.Bv.audioMuteState || !this.Bv.playMediaStatus.audio);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "videoMuted", { get: function() {
              if (!this.Bv.remoteStream || this.Bv.remoteStream.getVideoTracks().length <= 0)
                return true;
              var t4 = this.Bv.remoteStream.getVideoTracks()[0];
              return !(!t4 || !t4.muted && "ended" !== t4.readyState && t4.enabled) || ("1" == this.Bv.videoMuteState || !this.Bv.playMediaStatus.video);
            }, enumerable: false, configurable: true }), t3.prototype.getPlayStats = function(t4, i3) {
              var n3, r3 = this;
              if (null != t4) {
                var s3, o2, u2 = (/* @__PURE__ */ new Date()).getTime();
                u2 - this.am + 50 >= 3e3 && this.getP2PNetStats();
                var a2 = this.Bv.rtcViewer;
                a2 && (s3 = a2.ma, o2 = a2.pa), s3 && s3.currentTime || (s3 = _o(this._playStream, "video") || s3), o2 && o2.currentTime || (o2 = _o(this._playStream, "audio") || o2 || s3);
                var c2 = { sampleTimeWindow: this.if, audioPacketsLost: 0, audioPacketsLostRate: 0, audioBitrate: 0, audioLevel: 0, audioSendLevel: 0, audioSamplingRate: 0, audioCodec: "", audioQuality: 0, audioFPS: 0, videoQuality: 0, videoPacketsLost: 0, videoPacketsLostRate: 0, videoBitrate: 0, videoFPS: 0, videoRenderFPS: -1, nackCount: 0, pliCount: 0, audioJitter: 0, videoJitter: 0, videoFramesDecoded: 0, keyFramesDecoded: 0, totalFreezesDuration: 0, frameHeight: 0, frameWidth: 0, videoTransferFPS: 0, videoFramesDropped: 0, totalRoundTripTime: 0, currentRoundTripTime: 0, availableOutgoingBitrate: void 0, videoCodecName: void 0, audioCodecName: void 0, audioJitterBufferDelayMs: 0, videoJitterBufferDelayMs: 0, jitterBufferDelayMs: 0, googBandwidthLimitedResolution: void 0, googCpuLimitedResolution: void 0, googAvailableSendBandwidth: void 0, codecImplementationName: void 0, qualityLimitationReason: void 0, audioMuteState: this.audioMuted ? "1" : "0", videoMuteState: this.videoMuted ? "1" : "0", soundLevel: this.Bv.soundLevel, muted: o2 ? o2.muted : void 0, videoPaused: s3 ? s3.paused : void 0, audioPaused: o2 ? o2.paused : void 0, videoReadyState: s3 ? s3.readyState : void 0, audioReadyState: o2 ? o2.readyState : void 0, videoEnded: s3 ? s3.ended : void 0, audioEnded: o2 ? o2.ended : void 0, volume: o2 ? o2.volume : void 0, sinkId: o2 ? o2.sinkId : void 0 };
                this.Bv.ip && (Fs(this.Bv.ip) ? c2.ipv6 = this.Bv.ip : c2.ipv4 = Js(this.Bv.ip));
                var h2 = this.Uv.time, f2 = 0, l2 = 0, d2 = 0, v2 = 0, m2 = 0, p2 = 0, g2 = 0, b2 = null, _2 = null;
                t4.forEach(function(t5) {
                  var i4 = t5.kind || t5.mediaType;
                  ["ssrc", "inbound-rtp"].includes(t5.type) && ("video" == i4 || t5.id.indexOf("VideoStream") >= 0) && (b2 = t5), ("inbound-rtp" == t5.type || "ssrc" == t5.type && null != t5.bytesReceived) && ("audio" == i4 || t5.id.indexOf("AudioStream") >= 0) && (_2 = t5);
                });
                var y2 = function(t5, i4) {
                  return t5 > i4 ? t5 - i4 : 0;
                };
                this.Kv || (this.Kv = u2 - 1e3);
                var w2 = this.Bv.playMode === e2.ey.L3;
                if (b2) {
                  var S2 = b2.totalInterFrameDelay, E2 = b2.framesDecoded, k2 = b2.totalSquaredInterFrameDelay, O2 = y2(E2, this.tm.framesDecode);
                  this.tm.framesDecode = E2;
                  var I2 = y2(S2, this.tm.totalInterFrameDelay);
                  this.tm.totalInterFrameDelay = S2;
                  var T2 = y2(k2, this.tm.totalSquaredInterFrameDelay);
                  this.tm.totalSquaredInterFrameDelay = k2;
                  var C2 = (T2 - Math.pow(I2, 2) / (O2 || 1)) / (O2 || 1);
                  C2 = C2 > 0 ? C2 : -C2;
                  var A2 = parseInt((1e3 / (O2 + 1)).toString()), z2 = 1e3 * Math.sqrt(C2), D2 = I2 / (O2 || 1) * 1e3 || A2, N2 = (D2 = parseInt((D2 > 1e3 ? 1e3 : D2).toString())) + z2;
                  if (N2 = parseInt((N2 > 1e3 ? 1e3 : N2).toString()), O2 > 0 && 0 === this.Bv.cameraStatus && !this.Qv.decodeStartTime && (this.Qv.decodeStartTime = u2 - 1e3), this.Qv.decodeStartTime && !this.om)
                    qc(u2, O2, 0 === this.Bv.cameraStatus && this.Bv.playMediaStatus.video && !this.sm && !this.um, this.Qv, this.Vv, this.Zv, this.Wv, D2, N2, w2);
                }
                if (_2) {
                  var P2 = _2.totalSamplesReceived, M2 = _2.concealedSamples, x2 = _2.bytesReceived, j2 = y2(P2, this.tm.totalSamplesReceived);
                  this.tm.totalSamplesReceived = P2;
                  var q2 = y2(M2, this.tm.concealedSamples);
                  this.tm.concealedSamples = M2;
                  var L2 = y2(x2, this.tm.audioBytesReceived);
                  this.tm.audioBytesReceived = x2;
                  var U2 = parseInt((1e3 * (q2 / (j2 || 1))).toString());
                  if (L2 > 0 && 0 === this.Bv.micStatus && !this.Yv.decodeStartTime && (this.Yv.decodeStartTime = u2 - 1e3), this.Yv.decodeStartTime)
                    qc(u2, L2, 0 === this.Bv.micStatus && this.Bv.playMediaStatus.audio && !this.sm && !this.um, this.Yv, this.Hv, this.Xv, this.$v, U2, U2, w2);
                }
                var G2 = [], J2 = "", F2 = false;
                if (t4.forEach(function(t5) {
                  "track" == t5.type && (F2 = true);
                }), t4.forEach(function(i4) {
                  var n4 = i4.kind || i4.mediaType;
                  if (("inbound-rtp" == i4.type || "ssrc" == i4.type && null != i4.bytesReceived) && ("audio" == n4 || i4.id.indexOf("AudioStream") >= 0)) {
                    var e3 = "";
                    if ((_3 = t4.get(i4.codecId)) && _3.mimeType && (e3 = _3.mimeType.split("/")[1]), r3.pf !== e3 && (r3.pf = e3), c2.audioCodec = r3.pf, 0 != h2)
                      c2.audioBitrate = 8 * (i4.bytesReceived - r3.Uv.audioBytesReceived) / (i4.timestamp - h2), (b3 = i4.packetsLost - r3.Uv.audioPacketsLost) > 0 && (l2 = b3 / (b3 + i4.packetsReceived - r3.Uv.audioPacketsReceived));
                    if (c2.audioBitrate < 0 && (c2.audioBitrate = 0), i4.jitterBufferDelay) {
                      var o3 = i4.jitterBufferDelay, u3 = i4.jitterBufferEmittedCount;
                      p2 = Math.floor((o3 - r3.Uv.audioJitterBufferDelay) / (u3 - r3.Uv.audioJitterBufferEmittedCount) * 1e3), (p2 = isNaN(p2) || p2 < 0 ? 0 : p2) > 1e4 && r3.Bv.info("".concat(Co.bzn, " audio jitterDelay ").concat(o3, " ").concat(r3.Uv.audioJitterBufferDelay, " ").concat(u3, " ").concat(r3.Uv.audioJitterBufferEmittedCount)), r3.Uv.audioJitterBufferDelay = o3, r3.Uv.audioJitterBufferEmittedCount = u3, c2.audioJitterBufferDelayMs = p2;
                    }
                    c2.audioJitter = i4.jitter, i4.packetsLost > 0 && (c2.audioPacketsLost = i4.packetsLost);
                    var a3 = i4.packetsLost - r3.Uv.audioPacketsLost;
                    c2.audioFPS = (i4.packetsReceived - r3.Uv.audioPacketsReceived) / (i4.timestamp - h2) * 1e3, c2.audioPacketsLostRate = a3 > 0 ? a3 / (i4.packetsReceived - r3.Uv.audioPacketsReceived + a3) : 0, r3.Uv.audioBytesReceived = i4.bytesReceived, i4.packetsLost > 0 && (r3.Uv.audioPacketsLost = i4.packetsLost), r3.Uv.audioPacketsReceived = i4.packetsReceived, r3.Uv.audioTime = i4.timestamp, r3.Uv.time = i4.timestamp, r3.Uv.audioBitrate = c2.audioBitrate, v2 = i4.jitter, F2 || r3.aTrackStats(c2, i4);
                  } else if (("inbound-rtp" == i4.type || "ssrc" == i4.type && null != i4.bytesReceived) && ("video" == n4 || i4.id.indexOf("VideoStream") >= 0)) {
                    var b3;
                    if (0 != h2)
                      c2.videoBitrate = 8 * (i4.bytesReceived - r3.Uv.videoBytesReceived) / (i4.timestamp - h2), c2.videoFPS = 1e3 * (i4.framesDecoded - r3.Uv.framesDecoded) / (i4.timestamp - h2), (b3 = i4.packetsLost - r3.Uv.videoPacketsLost) > 0 && (d2 = b3 / (b3 + i4.packetsReceived - r3.Uv.videoPacketsReceived));
                    else
                      (0, B.Cs)(i4.framesPerSecond) && (c2.videoFPS = i4.framesPerSecond);
                    c2.videoBitrate < 0 && (c2.videoBitrate = 0), c2.videoFPS < 0 && (c2.videoFPS = 0);
                    var _3, y3 = "";
                    if ((_3 = t4.get(i4.codecId)) && _3.mimeType && (y3 = _3.mimeType.split("/")[1]), r3.mf !== y3) {
                      var w3 = r3.gn.seiWorker;
                      w3 && w3.postMessage({ cmd: "updatePlayer", codec: y3, streamID: r3.va }), r3.mf = y3;
                    }
                    if (c2.videoCodecName = r3.mf, i4.jitterBufferDelay) {
                      o3 = i4.jitterBufferDelay, u3 = i4.jitterBufferEmittedCount;
                      g2 = Math.floor((o3 - r3.Uv.videoJitterBufferDelay) / (u3 - r3.Uv.videoJitterBufferEmittedCount) * 1e3), (g2 = isNaN(g2) || g2 < 0 ? 0 : g2) > 1e4 && r3.Bv.info("".concat(Co.bzn, " video jitterDelay ").concat(o3, " ").concat(r3.Uv.videoJitterBufferDelay, " ").concat(u3, " ").concat(r3.Uv.videoJitterBufferEmittedCount)), r3.Uv.videoJitterBufferDelay = o3, r3.Uv.videoJitterBufferEmittedCount = u3, c2.videoJitterBufferDelayMs = g2;
                    }
                    c2.videoRenderFPS = r3.getVideoRenderFps(s3), c2.codecImplementationName = i4.decoderImplementation, c2.videoJitter = i4.jitter, c2.nackCount = i4.nackCount, c2.pliCount = i4.pliCount, c2.videoFramesDecoded = i4.framesDecoded, c2.keyFramesDecoded = i4.keyFramesDecoded, c2.totalFreezesDuration = i4.totalFreezesDuration, i4.packetsLost > 0 && (c2.videoPacketsLost = i4.packetsLost), c2.videoPacketsLostRate = (a3 = i4.packetsLost - r3.Uv.videoPacketsLost) > 0 ? a3 / (i4.packetsReceived - r3.Uv.videoPacketsReceived + a3) : 0, r3.Uv.videoBytesReceived = i4.bytesReceived, r3.Uv.framesDecoded = i4.framesDecoded, i4.packetsLost > 0 && (r3.Uv.videoPacketsLost = i4.packetsLost), r3.Uv.videoPacketsReceived = i4.packetsReceived, r3.Uv.videoTime = i4.timestamp, r3.Uv.time = i4.timestamp, m2 = i4.jitter, F2 || r3.vTrackStats(c2, i4, h2);
                  } else if ("track" == i4.type && ("video" == n4 || i4.id.indexOf("video") >= 0) || i4.frameWidth)
                    r3.vTrackStats(c2, i4, h2);
                  else if ("track" == i4.type && ("audio" == n4 || i4.id.indexOf("audio") >= 0))
                    r3.aTrackStats(c2, i4);
                  else if ("candidate-pair" != i4.type || !i4.nominated || (0, Pe.gm)() && !i4.selected)
                    "local-candidate" === i4.type && G2.push(i4);
                  else {
                    null != i4.totalRoundTripTime && (c2.totalRoundTripTime = i4.totalRoundTripTime), null != i4.currentRoundTripTime && (c2.currentRoundTripTime = i4.currentRoundTripTime, f2 = 1e3 * c2.currentRoundTripTime), void 0 !== i4.availableOutgoingBitrate && (c2.availableOutgoingBitrate = i4.availableOutgoingBitrate), "succeeded" === i4.state && (J2 = i4.localCandidateId);
                    var S3 = r3.gn.lastChangeIpTime;
                    if (S3 && r3._f < S3 && Date.now() - S3 <= 15e3) {
                      var E3 = i4.bytesReceived, k3 = r3.Uv.condidateBytesReceived;
                      k3 && (E3 > k3 ? r3.bf = 0 : r3.bf++), r3.bf >= 5 && (r3.bf = 0, r3._f = S3, r3.onPlayingError(re.lgu)), r3.Uv.condidateBytesReceived = E3;
                    } else
                      r3.bf > 0 && (r3.bf = 0);
                  }
                }), J2) {
                  var H2 = G2.find(function(t5) {
                    return t5.id == J2;
                  });
                  if (H2) {
                    var V2 = void 0;
                    if (void 0 !== H2.relayProtocol)
                      V2 = H2.relayProtocol;
                    else if (H2.protocol)
                      V2 = H2.protocol;
                    else if (H2.priority) {
                      var Q2 = H2.priority >> 24;
                      void 0 !== Q2 && (V2 = bo(Q2, this.pn.browser));
                    }
                    void 0 !== V2 && this.df !== V2 && (this.Bv.info(Co.R46 + " protocol " + V2), this.df = V2);
                    var Y2 = false, K2 = H2.candidateType, Z2 = H2.networkType, X2 = H2.relayProtocol, W2 = H2.relatedAddress, $2 = H2.url, tt2 = H2.ip;
                    if (tt2) {
                      var it2 = Hs(tt2);
                      it2 >= 0 && it2 !== this.connectIPStack && (this.an.info(Co.kEs + " " + this.va + " ipStack " + R[it2]), this.connectIPStack = it2);
                    }
                    Y2 = this.Tf([{ key: "candidateType", value: K2 }, { key: "networkType", value: Z2 }]), "relay" === K2 && (Y2 = this.Tf([{ key: "relayProtocol", value: X2 }, { key: "relatedAddress", value: W2 }, { key: "url", value: $2 }])), Y2 && this.Bv.info(Co.kEs + " upload candidate change " + JSON.stringify(this.vf));
                  }
                }
                var nt2 = 0;
                nt2 = p2 > 0 && g2 > 0 ? Math.max(p2, g2) : p2 > 0 ? p2 : g2 > 0 ? g2 : 0, c2.jitterBufferDelayMs = this.Uv.jitterBufferDelayMs = nt2, d2 = isNaN(d2) || d2 < 0 ? 0 : d2, m2 = isNaN(m2) || m2 < 0 ? 0 : m2, l2 = isNaN(l2) || l2 < 0 ? 0 : l2, v2 = isNaN(v2) || v2 < 0 ? 0 : v2;
                var et2 = ct(f2, d2, m2), rt2 = ct(f2, l2, v2);
                c2.audioQuality = h2 > 0 ? ht(rt2) : 0, c2.videoQuality = h2 > 0 ? ht(et2) : 0, this.pn.networkState !== e2.D2.offline && "disconnected" !== (null === (n3 = this.Bv.peerConnection) || void 0 === n3 ? void 0 : n3.connectionState) || (c2.videoQuality = e2.b3.Die, c2.audioQuality = e2.b3.Die);
                var st2 = Math.min(et2, rt2);
                if (this.hf = st2, c2.peerToPeerDelay = isNaN(this.p2pNetStats.p2pRTT) ? 0 : parseInt((this.p2pNetStats.p2pRTT / 2 + this.Uv.jitterBufferDelayMs).toString()), c2.peerToPeerPacketLostRate = this.p2pNetStats.p2pLostRate, this.playStat = c2, this.updateCurrentQualityStats(c2), !this.lm && (c2.videoBitrate > 0 || c2.audioBitrate > 0) && (this.lm = true, this.onRecvMediaData && this.onRecvMediaData()), this.hm) {
                  var ot2 = c2.videoFramesDropped, ut2 = c2.videoTransferFPS;
                  c2.videoBitrate > 0 && 0 === c2.videoFPS && ot2 > 0 && ut2 > 0 && Math.abs(ot2 - ut2) <= 3 ? this.fm ? performance.now() - this.fm > 3e3 && (this.fm = void 0, this.hm = false, this.onFindDecodeException && this.onFindDecodeException(true)) : this.fm = performance.now() : c2.videoFPS > 0 && (this.fm = void 0, this.hm = false);
                }
                this.rf == this.tf ? this.notifyPlayQuality() : this.sf || u2 - this.af + 50 >= this.tf && this.notifyPlayQuality(), this.rf == this.if ? this.reportPlayQuality() : this.uf || u2 - this.eo + 50 >= this.if && this.reportPlayQuality(), this.Bv.onStatsUpdated(this.playStat);
              }
            }, t3.prototype.notifyPlayQuality = function() {
              this.af = Date.now(), this.Bv.onPlayQualityUpdate(this.va, this.Wh);
            }, t3.prototype.reportPlayQuality = function() {
              var t4 = Date.now();
              this.eo = t4, this.checkProbe(t4), this.uploadPlayQuality(this.playStat, t4), this.wf.checkRemoteStats(this.playStat, this._playStream), this.gn.changeRxQuality(ht(this.hf));
            }, t3.prototype.getVideoRenderFps = function(t4) {
              var i3 = -1;
              if (!t4 || !(t4 && (!!t4.getVideoPlaybackQuality || !!t4.requestVideoFrameCallback || void 0 !== t4.mozPaintedFrames)))
                return -1;
              var n3 = this.Uv.videoElem, e3 = t4.currentTime, r3 = t4.getVideoPlaybackQuality();
              t4.requestVideoFrameCallback && !r3.totalVideoFrames ? n3 && n3 == t4 || (this.Uv.videoElem = t4, this.Uv.lastTimestamp = e3, !n3 && t4.requestVideoFrameCallback(this.videoFramesRender.bind(this))) : this.Uv.videoElem = null, n3 = this.Uv.videoElem;
              var s3, o2 = Date.now(), u2 = this.Uv, a2 = u2.renderTime;
              return s3 = "firefox" != this.pn.browser || r3.totalVideoFrames || n3 || void 0 === t4.mozPaintedFrames ? n3 ? u2.paintedFrames : r3.totalVideoFrames - r3.droppedVideoFrames : t4.mozPaintedFrames, i3 = 0 != a2 ? 1e3 * (s3 - u2.totalRenderFrames) / (o2 - a2) : s3 / r3.creationTime, this.Uv.renderTime = o2, this.Uv.totalRenderFrames = s3, i3;
            }, t3.prototype.videoFramesRender = function(t4, i3) {
              var n3 = this.Uv, e3 = n3.videoElem;
              if (e3 && e3.requestVideoFrameCallback) {
                var r3 = e3.currentTime;
                n3.lastTimestamp != r3 && (this.Uv.paintedFrames++, this.Uv.lastTimestamp = r3), e3.requestVideoFrameCallback(this.videoFramesRender.bind(this));
              }
            }, t3.prototype.vTrackStats = function(t4, i3, n3) {
              var r3 = i3.frameWidth, s3 = i3.framesReceived, o2 = i3.framesDropped, u2 = i3.timestamp;
              if (t4.frameHeight = i3.frameHeight, t4.frameWidth = r3, !t4.frameHeight || !t4.frameWidth) {
                var a2 = this.Uv.videoElem || _o(this.Bv.playStream);
                a2 && (t4.frameHeight = a2.videoHeight || 0, t4.frameWidth = a2.videoWidth || 0);
              }
              0 !== this.Bv.cameraStatus && 0 === t4.videoBitrate && 0 === t4.videoFPS && (t4.frameHeight = 0, t4.frameWidth = 0);
              var c2 = t4.frameWidth, h2 = t4.frameHeight;
              if (0 === n3 || this.Uv.frameHeight === h2 && this.Uv.frameWidth === c2)
                0 === n3 && (this.Uv.frameHeight = h2, this.Uv.frameWidth = c2, this.Bv.isProbe || (this.cr.spanAppendAttribute({ key: this.Bv.playingEvent, par: this.va }, "vinfo", { h: h2, fft: Date.now(), w: c2 }), this.cr.spanAppendAttribute({ key: L.oW.event, par: this.va }, "vinfo", { h: h2, fft: Date.now(), w: c2 })));
              else {
                if (!this.Bv.isProbe) {
                  var f2 = this.cr.createSpan(e2.t0.H, { key: L.Nr.event, par: this.va }, { key: "" }, L.Wg.event);
                  f2.setAttributes({ webrtc_sid: L.Wg.webrtc_sid(this.sessionId), w: L.Wg.w(c2), h: L.Wg.h(h2) }), f2.end(), this.cr.spanAppendAttribute({ key: this.Bv.playingEvent, par: this.va }, "vinfo", { h: h2, fft: Date.now(), w: c2 }), this.cr.spanAppendAttribute({ key: L.oW.event, par: this.va }, "vinfo", { h: h2, fft: Date.now(), w: c2 });
                }
                this.Uv.frameHeight = h2, this.Uv.frameWidth = c2;
              }
              0 != n3 && (isNaN(s3) || isNaN(o2) || (t4.videoTransferFPS = 1e3 * (s3 - this.Uv.framesReceived) / (u2 - n3), t4.videoFramesDropped = o2 - this.Uv.framesDropped)), t4.videoTransferFPS < 0 && (t4.videoTransferFPS = 0), t4.videoFramesDropped < 0 && (t4.videoFramesDropped = 0), s3 && (this.Uv.framesReceived = s3), o2 && (this.Uv.framesDropped = o2);
            }, t3.prototype.aTrackStats = function(t4, i3) {
              t4.audioLevel = i3.audioLevel || 0, t4.audioSendLevel = i3.totalAudioEnergy, t4.audioSamplingRate = i3.totalSamplesDuration;
            }, t3.prototype.updateCurrentQualityStats = function(t4) {
              var i3 = t4.videoBitrate, n3 = t4.videoFPS, e3 = t4.videoTransferFPS, r3 = t4.frameHeight, s3 = t4.frameWidth, o2 = t4.videoMuteState, u2 = t4.videoQuality, a2 = t4.videoFramesDecoded, c2 = t4.videoFramesDropped, h2 = t4.videoPacketsLost, f2 = t4.videoPacketsLostRate, l2 = t4.audioBitrate, d2 = t4.audioCodec, v2 = t4.audioMuteState, m2 = t4.audioQuality, p2 = t4.audioFPS, g2 = t4.audioJitter, b2 = t4.audioLevel, _2 = t4.audioPacketsLost, y2 = t4.audioPacketsLostRate, w2 = t4.audioSamplingRate, S2 = t4.audioSendLevel, E2 = t4.nackCount, k2 = t4.pliCount, O2 = t4.totalRoundTripTime, I2 = t4.currentRoundTripTime, R2 = t4.peerToPeerDelay, T2 = t4.peerToPeerPacketLostRate, C2 = t4.sampleTimeWindow, A2 = t4.videoRenderFPS, z2 = { video: Bc(Bc({}, this.Wh.video), { videoBitrate: i3, videoFPS: n3, videoTransferFPS: e3, frameHeight: r3, frameWidth: s3, videoQuality: u2, videoFramesDecoded: a2, videoFramesDropped: c2, videoPacketsLost: h2, videoPacketsLostRate: f2, muteState: o2, videoCumulativeDecodeTime: this.Wv.decodeDuration, videoCumulativeBreakTime: this.Wv.breakDuration, videoCumulativeBreakRate: this.Wv.breakDuration / (this.Wv.decodeDuration + this.Wv.breakDuration || 1), videoRenderFPS: A2 }), audio: Bc(Bc({}, this.Wh.audio), { audioBitrate: l2, audioCodec: d2, audioQuality: m2, audioFPS: p2, audioJitter: g2, audioLevel: b2, audioPacketsLost: _2, audioPacketsLostRate: y2, audioSamplingRate: w2, audioSendLevel: S2, muteState: v2, audioCumulativeDecodeTime: this.$v.decodeDuration, audioCumulativeBreakTime: this.$v.breakDuration, audioCumulativeBreakRate: this.$v.breakDuration / (this.$v.decodeDuration + this.$v.breakDuration || 1) }), nackCount: E2, pliCount: k2, totalRoundTripTime: O2, currentRoundTripTime: I2, peerToPeerDelay: R2, peerToPeerPacketLostRate: (T2 || 0) / 255, sampleTimeWindow: C2 };
              void 0 !== t4.codecImplementationName && (z2.codecImplementationName = t4.codecImplementationName), void 0 !== t4.videoCodecName && (z2.video.googCodecName = t4.videoCodecName), "" !== t4.audioCodec && (z2.audio.googCodecName = t4.audioCodec), this.Wh = z2;
            }, t3.prototype.simplifyPlayDataKey = function(t4) {
              var i3 = {};
              i3.aPktLost = t4.audioPacketsLost, i3.aPlr = t4.audioPacketsLostRate, i3.aBitrate = Math.trunc(t4.audioBitrate), i3.aLevel = Math.trunc(1e5 * t4.audioLevel) / 1e5, i3.aTotalEnergy = Math.trunc(1e5 * t4.audioSendLevel) / 1e5, i3.aSampleRate = Math.trunc(t4.audioSamplingRate), i3.aQuality = t4.audioQuality, i3.aFPS = Math.trunc(t4.audioFPS), i3.vQuality = t4.videoQuality, i3.vPktLost = t4.videoPacketsLost, i3.vPlr = t4.videoPacketsLostRate, i3.vBitrate = Math.trunc(t4.videoBitrate), i3.vFPS = Math.trunc(t4.videoFPS), i3.nackCnt = t4.nackCount, i3.vPliCnt = t4.pliCount, i3.vFramesDec = t4.videoFramesDecoded, i3.vHeight = t4.frameHeight, i3.vWidth = t4.frameWidth, i3.vRcvFPS = Math.trunc(t4.videoTransferFPS), i3.vFrameDrop = t4.videoFramesDropped, i3.keyFrameDec = t4.keyFramesDecoded, i3.vTotalFreezeDur = t4.totalFreezesDuration, i3.rtt = t4.currentRoundTripTime, i3.vCodec = t4.videoCodecName, i3.aMuteStat = t4.audioMuteState, i3.vMuteStat = t4.videoMuteState, i3.soundLV = t4.soundLevel, i3.muted = t4.muted, i3.aPaused = t4.audioPaused, i3.vPaused = t4.videoPaused, i3.vRdyState = t4.videoReadyState, i3.aRdyState = t4.audioReadyState, i3.volume = t4.volume, i3.sinkId = t4.sinkId, i3.p2pDelay = t4.peerToPeerDelay, i3.p2pPlr = t4.peerToPeerPacketLostRate, i3.vBrkDur = t4.video_break_duration, i3.vBrkCancelDur = t4.video_break_cancel_duration, i3.vDecTime = t4.video_decode_time, i3.aBrkDur = t4.audio_break_duration, i3.aBrkCancelDur = t4.audio_break_cancel_duration, i3.aDecTime = t4.audio_decode_time, i3.aJtrBufDlyMs = t4.audioJitterBufferDelayMs, i3.vJtrBufDlyMs = t4.videoJitterBufferDelayMs, i3.aEnd = t4.audioEnded, i3.vEnd = t4.videoEnded, i3.vRenderFps = t4.videoRenderFPS;
              var n3 = this._playStream ? vt(this._playStream) : void 0;
              return void 0 !== n3 && this.nm !== n3 && (this.nm = n3, i3.stmTracks = n3), i3;
            }, t3.prototype.uploadPlayQuality = function(t4, i3) {
              var n3 = i3;
              if (0 == this.lf || n3 - this.lf >= 2e3) {
                t4.stream_type = "play", t4.stream_id = this.va, t4.timeStamp = n3, t4.video_break_duration = this.Zv.breakDuration, t4.video_break_cancel_duration = this.Zv.breakCancelDuration, t4.video_decode_time = this.Zv.decodeTime, this.Zv.breakCancelDuration = 0, this.Zv.breakDuration = 0, this.Zv.decodeTime = 0, t4.audio_break_duration = this.Xv.breakDuration, t4.audio_break_cancel_duration = this.Xv.breakCancelDuration, t4.audio_decode_time = this.Xv.decodeTime, this.Xv.breakCancelDuration = 0, this.Xv.breakDuration = 0, this.Xv.decodeTime = 0, t4.real_sampling_interval = n3 - this.Kv;
                var e3 = this.simplifyPlayDataKey(t4);
                void 0 !== this.im && (e3.gw_aTxKbps = this.im.audioTXBitrate, e3.gw_vTxkbps = this.im.videoTXBitrate, e3.gw_vRedRate = this.im.videoRedRate, e3.gw_TCStat = this.im.trafficControlStat, e3.gw_TCBW = this.im.trafficControlStat), this.Kv = n3, this.Bv.info(Co.kEs + " upload" + JSON.stringify(e3)), this.gn.updateQuality(f.play_quality, t4), this.lf = n3;
              }
            }, t3.prototype.getP2PNetStats = function() {
              var t4 = this;
              this.am = Date.now(), this.Bv.getP2PNetStats(function(i3, n3) {
                var e3 = n3.p2p_rtt;
                t4.p2pNetStats.p2pLostRate = n3.p2p_lost_rate || 0, t4.p2pNetStats.p2pRTT = e3 || 0;
              }, function(t5) {
              });
            }, t3.prototype.setPlayQualityTimer = function() {
              var t4 = this;
              null == this.ef && (this.Bv.info(Co.R46 + " called ".concat(this.rf, " ").concat(this.tf, " ").concat(this.if)), (this.ef || this.sf || this.uf) && this.clearPlayQualityTimer(), this.getP2PNetStats(), this.ef = setInterval(function() {
                t4.rm++;
                var i3 = t4.Bv.peerConnection;
                if (i3) {
                  var n3 = [i3.getStats(null)];
                  Promise.all(n3).then(function(i4) {
                    if (t4.ef)
                      t4.getPlayStats(i4[0], i4[1]);
                  }).catch(function(i4) {
                    t4.Bv.error(Co.R46 + " getStats error " + i4.toString());
                  });
                }
              }, this.rf), this.af = this.eo = Date.now(), 1e3 !== this.rf && (this.rf != this.tf && (this.sf = setInterval(function() {
                t4.notifyPlayQuality();
              }, this.tf)), this.rf != this.if && (this.uf = setInterval(function() {
                t4.reportPlayQuality();
              }, this.if))), this.Uv = { audioPacketsLost: 0, videoPacketsLost: 0, time: Date.now(), audioTime: 0, videoTime: 0, audioBytesReceived: 0, videoBytesReceived: 0, videoPacketsReceived: 0, audioPacketsReceived: 0, framesDecoded: 0, framesReceived: 0, framesDropped: 0, audioBitrate: 0, totalRenderFrames: 0, renderTime: 0, paintedFrames: this.Uv.paintedFrames, lastTimestamp: 0, videoElem: this.Uv.videoElem, audioJitterBufferDelay: 0, audioJitterBufferEmittedCount: 0, videoJitterBufferDelay: 0, videoJitterBufferEmittedCount: 0, jitterBufferDelayMs: 0 });
            }, t3.prototype.clearPlayQualityTimer = function() {
              if (this.Bv.info("zc.p.spqt.1.1 called ".concat(!!this.ef, " ").concat(!!this.sf, " ").concat(!!this.uf)), null != this.sf && (clearInterval(this.sf), this.sf = null), null != this.uf && (clearInterval(this.uf), this.uf = null), null != this.ef) {
                clearInterval(this.ef), this.ef = null;
                var t4 = (/* @__PURE__ */ new Date()).getTime();
                this.Kv = 0, this.rm = 0, this.tm = { totalSquaredInterFrameDelay: 0, totalInterFrameDelay: 0, framesDecode: 0, totalSamplesReceived: 0, concealedSamples: 0, audioBytesReceived: 0 };
                var i3 = this.Bv.playMode === e2.ey.L3;
                Lc(this.Qv, this.Zv, this.Wv, this.Vv, !this.um && 0 === this.Bv.cameraStatus && this.Bv.playMediaStatus.video, t4, i3), Lc(this.Yv, this.Xv, this.$v, this.Hv, !this.um && 0 === this.Bv.micStatus && this.Bv.playMediaStatus.audio, t4, i3);
              }
              this.ff = 0, this.Uv = { audioPacketsLost: 0, videoPacketsLost: 0, time: 0, audioTime: 0, videoTime: 0, audioBytesReceived: 0, videoBytesReceived: 0, videoPacketsReceived: 0, audioPacketsReceived: 0, framesDecoded: 0, framesDropped: 0, framesReceived: 0, audioBitrate: 0, totalRenderFrames: 0, renderTime: 0, paintedFrames: 0, lastTimestamp: 0, videoElem: null, audioJitterBufferDelay: 0, audioJitterBufferEmittedCount: 0, videoJitterBufferDelay: 0, videoJitterBufferEmittedCount: 0, jitterBufferDelayMs: 0 }, this.om = false, this.um = false;
            }, t3.prototype.checkProbe = function(t4) {
              var i3 = this.hf, n3 = this.Uv.time;
              this.Bv.debug(Co.R46 + " netQuality " + i3 + " " + n3), i3 <= this.gn.targetQuality ? this.ff++ : this.ff = 0, n3 > 0 && this.ff >= this.gn.probeStartedNum && t4 > this.Bv.probeTime + this.gn.probeInterval && (this.an.info(Co.R46 + " netQuality " + i3 + " start net probe"), this.probeState = s2.tryProbe, this.Bv.poorQualityRetryCnt++, this.gn.startNetProbe(false, this.Bv));
            }, t3.prototype.startProbeTimeout = function() {
              var t4 = this;
              this._l = setTimeout(function() {
                t4.Bv.error(Co.QU$ + " probe timeout"), t4.Bv.playStateUpdateError(L.Nr.error.Ae);
              }, this.Gv);
            }, t3.prototype.stopProbeTimeout = function() {
              this._l && (clearTimeout(this._l), this._l = null);
            }, t3.prototype.setStreamUpdate = function(t4) {
              0 === t4 ? this.sm = true : 1 === t4 && (this.sm = false);
            }, t3.prototype.setPlayStreamEnd = function(t4) {
              this.um = t4;
            }, t3.prototype.setHasBFrames = function(t4) {
              this.om = t4;
            }, t3.prototype.updateGwPlayNetState = function(t4) {
              this.im = t4;
            }, t3.prototype.resetCallbackState = function() {
              this.lm = false, this.hm = true, this.hf = 0;
            }, t3.prototype.Tf = function(t4) {
              for (var i3 = false, n3 = 0; n3 < t4.length; n3++) {
                var e3 = t4[n3], r3 = e3.key, s3 = e3.value;
                this.vf[r3] !== s3 && (this.vf[r3] = s3, i3 = true);
              }
              return i3;
            }, t3.prototype.onPlayingError = function(t4) {
            }, t3;
          }(), Gc = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), Jc = L.Nr.event, Fc = L.v2, Hc = L.oW, Vc = L.Nr.error, Qc = L.Og.error, Yc = L.Jv, Kc = L.er;
          !function(t3) {
            t3[t3.disconnected = 0] = "disconnected", t3[t3.connecting = 1] = "connecting", t3[t3.connected = 2] = "connected";
          }(Oc || (Oc = {}));
          var Zc = function(t3) {
            function i3(i4, n3, e3, r3, s3) {
              var o2 = t3.call(this) || this;
              return o2.streamID = i4, o2.an = n3, o2.pn = e3, o2.gn = r3, o2.isPublish = s3, o2.streamRetryStartTime = 0, o2.ya = Uo(o2.an, o2.streamID), o2;
            }
            return Gc(i3, t3), Object.defineProperty(i3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), i3.prototype.startMaxTime = function() {
              var t4 = this;
              this.ya.info("zc.tsh.smt call"), this.maxTimer ? this.ya.warn("zc.tsh.smt max timer") : (0 === this.streamRetryStartTime && (this.streamRetryStartTime = (/* @__PURE__ */ new Date()).getTime()), this.maxTimer = setTimeout(function() {
                if (t4.ya.warn("zc.tsh.smt over max time ".concat(t4.RETRY_MAX_TIME, "s, stop retry")), t4.isOverTime = true, t4.invalid(), t4.isPublish) {
                  if (!t4.gn.publisherList[t4.streamID])
                    return void t4.ya.info("zc.tsh.smt publish no found");
                  t4.publishStateHandle(e2.eZ.error, t4.streamID, Qc.Un, true);
                } else {
                  var i4 = t4.gn.playerList[t4.streamID];
                  if (!i4)
                    return void t4.ya.info("zc.tsh.smt play no found");
                  var n3 = Vc.Oe;
                  t4.pn.isFlutter && i4.isStreamNotFound && (n3 = i4.hasSucceed ? re.LBO : re.T_8), t4.playStateHandle(e2.h7.error, t4.streamID, n3, true);
                }
              }, 1e3 * this.RETRY_MAX_TIME), this.ya.info("zc.tsh.smt maxTimer=".concat(this.maxTimer)));
            }, i3.prototype.active = function() {
              for (var t4 = [], i4 = 0; i4 < arguments.length; i4++)
                t4[i4] = arguments[i4];
            }, i3.prototype.stopMaxTime = function() {
              this.ya.info("zc.tsh.stmt streamID maxTimer=" + this.maxTimer), this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null;
            }, i3.prototype.onactive = function() {
              for (var t4 = [], i4 = 0; i4 < arguments.length; i4++)
                t4[i4] = arguments[i4];
            }, i3.prototype.retryNextSignal = function() {
              return this.pn.networkState == e2.D2.offline ? (this.ya.info("zc.tsh.rns offline"), Oc.disconnected) : this.isPublish ? (this.ya.info("zc.tsh.rns  publish ws state " + (null == (t4 = this.gn.publisherList[this.streamID].publisher.signal) ? void 0 : t4.state) + " " + t4.mediaState), (null == t4 ? void 0 : t4.state) == e2.xb.connected && (null == t4 ? void 0 : t4.mediaState) === D.LOGIN ? Oc.connected : (null == t4 ? void 0 : t4.state) === e2.xb.disconnected && (null == t4 ? void 0 : t4.mediaState) === D.LOGOUT ? Oc.disconnected : Oc.connecting) : (this.ya.info("zc.tsh.rns  play ws state " + (null == (t4 = this.gn.playerList[this.streamID].signal) ? void 0 : t4.state) + " " + (null == t4 ? void 0 : t4.mediaState)), (null == t4 ? void 0 : t4.state) == e2.xb.connected && (null == t4 ? void 0 : t4.mediaState) === D.LOGIN ? Oc.connected : (null == t4 ? void 0 : t4.state) === e2.xb.disconnected && (null == t4 ? void 0 : t4.mediaState) === D.LOGOUT ? Oc.disconnected : Oc.connecting);
              var t4;
            }, i3.prototype.publishStateHandle = function(t4, i4, n3, r3, s3, o2) {
              var u2, a2, c2 = this, h2 = r3 || this.RETRY_MAX_TIME < 3;
              this.ya.info(Co.FSV + " call " + (n3 ? n3.code + "" : "") + " " + r3 + " " + JSON.stringify(s3) + " " + o2 + " " + h2);
              var f2 = this.gn.publisherList[i4], l2 = f2.publisher;
              if (h2)
                return this.stopMaxTime(), this.invalid(), 1 === t4 && l2.resetPublish(1), (null == n3 ? void 0 : n3.code) && this.cr.spanSetAttributes({ key: l2.parentSpanKey, par: i4 }, n3), void this.gn.onPublishStateUpdate(t4, i4, n3);
              if (n3 && 0 !== n3.code) {
                this.maxTimer || h2 || this.startMaxTime(), this.pn.publishStreamList[i4].state = e2.T_.retryPublish;
                var d2 = l2.localStream, v2 = l2.publishOption;
                l2.resetPublish(1);
                var m2 = this.retryNextSignal();
                if (this.ya.info(Co.FSV + " server connect state " + Oc[m2]), m2 === Oc.connected) {
                  this.ya.info(Co.FSV + " retry current signal "), this.rtcPublishSpan(i4, n3, l2), (null === (u2 = f2.publisher.signal) || void 0 === u2 ? void 0 : u2.state) === e2.xb.connected && (this.ya.info(Co.FSV + " current node " + l2.gwNode + " failed " + JSON.stringify(l2.retryFailGwNodes) + " " + JSON.stringify(l2.retryFailIpV4Nodes) + " " + JSON.stringify(l2.retryFailIpV4Nodes)), this.setRetryFailNodes(l2), l2.getRetryIPNodeMode(), this.retryNewGwNode(l2, n3, s3, o2), l2.gwNode ? l2.getRetryIPv6Prefer() : l2.getDispatchIPNodeMode()), this.startRetryTimer && clearTimeout(this.startRetryTimer), this.startRetryTimer = null;
                  var p2 = [Qc.xn.code, Qc.Xn.code, re.akb.code].includes(n3.code) ? 0 : 1e3;
                  return this.ya.info(Co.FSV + " delay " + p2), this.startRetryTimer = setTimeout(function() {
                    c2.ya.info(Co.FSV + " retry publish " + l2.state), 7 == l2.state && l2.startPublish(i4, d2, v2);
                  }, p2), n3 && 0 !== n3.code && this.gn.onPublishStateUpdate(2, i4, n3), void this.publishStartSpan(i4, n3, f2, s3);
                }
                if (m2 === Oc.disconnected) {
                  var g2 = null === (a2 = f2.room) || void 0 === a2 ? void 0 : a2.roomID;
                  this.retryServer(true, g2, null == f2 ? void 0 : f2.room.token), l2 && (l2.isExternal = false), this.rtcPublishSpan(i4, n3, l2), this.gn.onPublishStateUpdate(2, i4, n3), this.publishStartSpan(i4, n3, f2, s3);
                } else
                  this.ya.info(Co.FSV + " server connecting");
              }
              this.ya.info(Co.FSV + " end");
            }, i3.prototype.needReDispatchError = function(t4) {
              return [Qc.ue.code, Vc.ze.code].includes(t4.code);
            }, i3.prototype.isSwitchIPStackError = function(t4) {
              return [re.akb.code, re.drM].includes(t4.code);
            }, i3.prototype.playStateHandle = function(t4, i4, n3, r3, s3, o2) {
              var u2, a2, c2, h2, f2, l2, d2 = this, v2 = r3 || this.RETRY_MAX_TIME < 3;
              this.ya.info(Co.M9m + " call " + (n3 ? n3.code + "" : "") + " " + r3 + " " + JSON.stringify(s3) + " " + o2 + " " + v2);
              var m2 = this.gn.playerList[i4];
              if (v2)
                return this.stopMaxTime(), this.invalid(), (null == n3 ? void 0 : n3.code) && (null === (u2 = m2.$h) || void 0 === u2 || u2.setAttributes({ error: null == n3 ? void 0 : n3.code })), void this.gn.onPlayStateUpdate(t4, i4, n3);
              if (n3 && 0 !== n3.code) {
                !this.maxTimer && this.startMaxTime(), m2.resetPlay(true, 1);
                var p2 = this.endRtcPlaySpan(i4, n3, m2), g2 = this.retryNextSignal();
                if (this.ya.info(Co.M9m + " server connect state " + Oc[g2]), g2 === Oc.connected) {
                  this.ya.info(Co.M9m + " retry current signal "), m2.isCenterNode && (null === (a2 = m2.signal) || void 0 === a2 ? void 0 : a2.state) === e2.xb.connected && (this.ya.info(Co.M9m + " current node " + m2.gwNode + " " + JSON.stringify(m2.retryFailGwNodes) + " " + JSON.stringify(m2.retryFailIpV4Nodes) + " " + JSON.stringify(m2.retryFailIpV6Nodes)), this.setRetryFailNodes(m2.zegoPeer), null === (c2 = m2.zegoPeer) || void 0 === c2 || c2.getRetryIPNodeMode(), this.retryNewGwNode(m2, n3, s3, o2), m2.gwNode ? null === (h2 = m2.zegoPeer) || void 0 === h2 || h2.getRetryIPv6Prefer() : null === (f2 = m2.zegoPeer) || void 0 === f2 || f2.getDispatchIPNodeMode()), this.startRetryTimer && clearTimeout(this.startRetryTimer), this.startRetryTimer = null;
                  var b2 = L.Nr.error, _2 = [b2.Se.code, b2.Xn.code, re.drM.code].includes(n3.code) ? 0 : 1e3;
                  return this.ya.info(Co.M9m + " delay " + _2), this.startRetryTimer = setTimeout(function() {
                    d2.ya.info(Co.M9m + " retry state " + m2.state), 7 === m2.state && m2.startPlay(i4, m2.getRemoteStreamSuc);
                  }, _2), n3 && 0 !== n3.code && this.gn.onPlayStateUpdate(2, i4, n3), p2 || m2.dm || (m2.dm = (0, G.fU)(this.cr, e2.t0.I, i4, m2.playingEvent, L.Nr.event), this.endRtcPlaySpan(i4, n3, m2)), void this.playStartSpan(i4, m2, void 0, n3, s3);
                }
                if (g2 === Oc.disconnected) {
                  var y2 = null === (l2 = m2.room) || void 0 === l2 ? void 0 : l2.roomID;
                  this.retryServer(m2.playMode === e2.ey.RTC, y2, null == m2 ? void 0 : m2.room.token), m2 && (m2.isExternal = false), this.gn.onPlayStateUpdate(2, i4, n3), p2 || m2.dm || (m2.dm = (0, G.fU)(this.cr, e2.t0.I, i4, m2.playingEvent, L.Nr.event), this.endRtcPlaySpan(i4, n3, m2)), this.endRtcPlaySpan(i4, n3, m2), this.playStartSpan(i4, m2, void 0, n3, s3);
                } else
                  this.ya.info(Co.M9m + " server connecting");
              }
              this.ya.info(Co.M9m + " end");
            }, i3.prototype.retryServer = function(t4, i4, n3) {
              var e3 = t4 ? cf : hf;
              this.gn.signalList[e3] ? this.gn.openConnectServerTask(e3) : this.gn.connectWebRTCCenterServer(false, t4, i4, n3);
            }, i3.prototype.setRetryFailNodes = function(t4) {
              if (t4)
                if (t4.ipNodeType === C.ZV4Only) {
                  var i4 = t4.retryFailGwNodes.findIndex(function(i5) {
                    return i5 === t4.gwNode;
                  });
                  i4 >= 0 && t4.retryFailGwNodes.splice(i4, 1), t4.retryFailGwNodes.push(t4.gwNode);
                } else {
                  var n3 = t4.ipV4NodeList, e3 = t4.ipV6NodeList, r3 = t4.retryFailIpV4Nodes, s3 = t4.retryFailIpV6Nodes, o2 = t4.gwNode, u2 = go(n3, o2), a2 = go(e3, o2);
                  if (u2 > -1)
                    (c2 = go(r3, o2)) >= 0 && r3.splice(c2, 1), r3.push(n3[u2]);
                  else if (a2 > -1) {
                    var c2;
                    (c2 = go(s3, o2)) >= 0 && s3.splice(c2, 1), s3.push(e3[a2]);
                  }
                }
            }, i3.prototype.retryNewGwNode = function(t4, i4, n3, e3) {
              var r3, s3, o2, u2, a2, c2, h2 = Co.XO3;
              if (i4 && i4.code && this.needReDispatchError(i4))
                this.retryNextGwNode(t4, true, e3);
              else if (i4 && i4.code && this.isSwitchIPStackError(i4))
                this.retryNextGwNode(t4, false, e3);
              else if (i4 && i4.code && [re.H6b.code].includes(i4.code))
                h2 += " try curr node ; ";
              else if (null == n3 ? void 0 : n3.action)
                switch (null == n3 ? void 0 : n3.action) {
                  case 1:
                  case 5:
                    break;
                  case 2:
                  default:
                    this.retryNextGwNode(t4, false, e3);
                    break;
                  case 3:
                    this.ya.info(Co.XO3 + " redirect");
                    var f2 = null == n3 ? void 0 : n3.ins;
                    if (f2 && f2.length > 0) {
                      var l2 = ((null === (r3 = f2[0]) || void 0 === r3 ? void 0 : r3.IP) || (null === (s3 = f2[0]) || void 0 === s3 ? void 0 : s3.ip)) + ":" + ((null === (o2 = f2[0]) || void 0 === o2 ? void 0 : o2.Port) || (null === (u2 = f2[0]) || void 0 === u2 ? void 0 : u2.port)), d2 = (null === (a2 = f2[0]) || void 0 === a2 ? void 0 : a2.ipv6) + ":" + (null === (c2 = f2[0]) || void 0 === c2 ? void 0 : c2.port);
                      t4.gwNode = l2 && d2 ? [C.ZV4Only, C.ZV4Priority].includes(t4.ipNodeType) ? l2 : d2 : l2 || d2;
                    }
                    break;
                  case 4:
                    t4.resetGwNodes(), this.gn.clearCachedGwNodesList(t4, this.isPublish);
                }
              else
                this.retryNextGwNode(t4, false, e3);
              this.ya.info(h2 += " new node " + t4.gwNode);
            }, i3.prototype.retryNextGwNode = function(t4, i4, n3) {
              if (this.ya.info(Co.SPm + " call " + t4.gwNode), t4.gwNode || !t4.isNodesEmpty) {
                var e3 = (/* @__PURE__ */ new Date()).getTime(), r3 = t4.gwNodesTTL < e3, s3 = t4.iceStateDisConnect && this.pn.isMultiOuter, o2 = this.gn.isNodeLast(this.isPublish ? t4 : t4.zegoPeer), u2 = o2.lastTryNext, a2 = o2.currentIdx, c2 = t4.hasSucceed;
                this.ya.info(Co.SPm + " ttl: " + r3 + " ice: " + s3 + " last: " + u2 + " hasSucc: " + c2), i4 || c2 && r3 || t4.isLastConnected && s3 || u2 ? (t4.gwNode = this.gn.getGwNode(t4, t4.ipNodeType, a2), this.dispatchGwNodesBypass(t4)) : t4.gwNode = this.gn.getGwNode(t4, t4.ipNodeType, n3 ? -1 : a2);
              } else
                this.ya.info(Co.SPm + " call gwNodeList is empty");
            }, i3.prototype.dispatchGwNodesBypass = function(t4, i4, n3) {
              var e3 = this;
              void 0 === i4 && (i4 = function() {
              }), void 0 === n3 && (n3 = function() {
              });
              var r3 = this.gn.getStreamIPNodesMode().ipV6Prefer;
              t4.dispatchGwNodes(r3, function(n4) {
                e3.ya.info(Co.oLS + " suc " + JSON.stringify(n4)), t4.setGwNodes(n4, true, r3), i4();
              }, function(t5) {
                e3.ya.info(Co.oLS + " fail " + JSON.stringify(t5)), n3();
              });
            }, i3.prototype.rtcPublishSpan = function(t4, i4, n3) {
              var e3;
              null == n3 || n3.uploadRTCPublishStats();
              var r3 = (null == n3 ? void 0 : n3.isLastConnected) ? 0 : this.getTryTime(n3);
              this.cr.spanEnd({ key: L.Jv.event, par: t4 }, { tryidx: Yc.tryidx(null == n3 ? void 0 : n3.rtcPublishCount), url: Yc.url(null === (e3 = null == n3 ? void 0 : n3.signal) || void 0 === e3 ? void 0 : e3.server), ip: Yc.ip(null == n3 ? void 0 : n3.ip), dispatch_external_ip: Yc.dispatch_external_ip(this.pn.clientIP), resource_type: Yc.resource_type("rtc"), protocol: Yc.protocol("webrtc"), try_time: Yc.try_time(r3), error: null == i4 ? void 0 : i4.code, message: null == i4 ? void 0 : i4.message });
            }, i3.prototype.publishStartSpan = function(t4, i4, n3, r3) {
              var s3, o2, u2, a2 = null == n3 ? void 0 : n3.publisher, c2 = (null == a2 ? void 0 : a2.hasSucceed) ? L.fo : L.ch, h2 = this.cr.createSpan(e2.t0.H, { key: L.Og.event, par: t4 }, { key: c2.event, par: t4 }, c2.event, true);
              (null == i4 ? void 0 : i4.code) === re.jZ$.code ? u2 = { reason: "DenyInfoError", deny_code: r3.err, deny_action: null == r3 ? void 0 : r3.action } : (null == i4 ? void 0 : i4.code) === re.PA0.code && (u2 = { reason: "NetworkBroken" }), u2 && h2.setAttributes(u2), false === (null == a2 ? void 0 : a2.isRePublish) && this.cr.spanSetAttributes({ key: Fc.event, par: t4 }, { retry_btime: Fc.retry_btime((/* @__PURE__ */ new Date()).getTime()) }), (null == a2 ? void 0 : a2.hasSucceed) && (a2.isRePublish = true, a2.parentSpanKey = L.fo.event), this.cr.createSpan(e2.t0.I, { key: L.Og.event, par: t4 }, { key: L.Jv.event, par: t4 }, L.Jv.event, true).setAttributes({ room_id: Yc.room_id(null === (s3 = null == n3 ? void 0 : n3.room) || void 0 === s3 ? void 0 : s3.roomID), room_sid_string: Yc.room_sid_string(null === (o2 = null == n3 ? void 0 : n3.room) || void 0 === o2 ? void 0 : o2.roomSessionID) }), a2 && (a2.rtcPublishCount++, a2.continuousFailCnt++);
            }, i3.prototype.endRtcPlaySpan = function(t4, i4, n3) {
              var e3 = (null == n3 ? void 0 : n3.isLastConnected) ? 0 : this.getTryTime(n3);
              return !!(null == n3 ? void 0 : n3.endPlayingSpan({ stop_reason: JSON.stringify(i4), try_time: Kc.try_time(e3), error: null == i4 ? void 0 : i4.code, message: null == i4 ? void 0 : i4.message }));
            }, i3.prototype.playStartSpan = function(t4, i4, n3, r3, s3) {
              if (void 0 === n3 && (n3 = false), !i4.$h && !i4.isProbe) {
                i4.$h = (0, G.fU)(this.cr, e2.t0.H, t4, i4.playStartEvent, Jc, void 0, true);
                var o2 = void 0;
                n3 ? o2 = { reason: "StartPlay" } : (null == r3 ? void 0 : r3.code) === re.PA0.code ? o2 = { reason: "NetworkBroken" } : s3 && (o2 = { reason: "DenyInfoError", deny_code: null == s3 ? void 0 : s3.err, deny_action: null == s3 ? void 0 : s3.action }), o2 && i4.$h.setAttributes(o2);
              }
              true === i4.hasSucceed && this.cr.spanSetAttributes({ key: Hc.event, par: t4 }, { retry_btime: Hc.retry_btime(Date.now()) }), n3 || i4 && (i4.tryidx++, i4.continuousFailCnt++);
            }, i3.prototype.getTryTime = function(t4, i4) {
              var n3 = void 0;
              return t4 && this.streamRetryStartTime > 0 && (n3 = (/* @__PURE__ */ new Date()).getTime() - this.streamRetryStartTime, t4.lastFailTimeLen = n3 = n3 > 0 ? n3 : void 0, i4 && (this.streamRetryStartTime = 0)), n3;
            }, i3;
          }(ee), Xc = function() {
            return Xc = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Xc.apply(this, arguments);
          }, Wc = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, $c = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, th = L.Nr.event, ih = L.Nr.error, nh = L.oW;
          function eh(t3) {
            var i3 = 0, n3 = 0;
            return i3 = t3[n3++] << 24, i3 |= t3[n3++] << 16, i3 |= t3[n3++] << 8, i3 |= t3[n3++];
          }
          function rh(t3, i3) {
            void 0 === i3 && (i3 = 0);
            for (var n3 = t3.length, e3 = [], r3 = 0; r3 < n3; )
              r3 >= i3 && n3 - r3 >= 3 && !t3[r3] && !t3[r3 + 1] && 3 == t3[r3 + 2] ? (e3.push(t3[r3++]), e3.push(t3[r3++]), r3++) : e3.push(t3[r3++]);
            var s3 = new Uint8Array(e3);
            return { output: s3, outLength: s3.length };
          }
          var sh, oh = function() {
            function t3(t4, i3, n3, e3, r3, s3, o2, u2, a2, c2) {
              var h2, f2 = this;
              this.Bv = t4, this.vm = i3, this.tv = s3, this.gn = o2, this.pn = u2, this.room = a2, this.pm = c2, this.Ld = true, this._state = 7, this.lastState = 7, this.ed = 0, this.Hl = [], this.jd = 0, this.Df = 0, this.remoteStream = null, this.Xl = void 0, this.closeSessionSignal = false, this.bm = false, this._m = false, this.mic = null, this.firstFrameTime = 0, this.ipV6Prefer = 0, this.ipNodeType = C.ZV4Priority, this.ipStackNode = R.IPv4, this.Al = true, this.Sl = false, this.El = [], this.kl = [], this.Ol = [], this.Il = "", this.Tl = "", this.Cl = 500, this.startTime = 0, this.od = "", this.ud = [], this.ad = 0, this.ipNode = null, this.ipV4NodeList = [], this.ipV6NodeList = [], this.probeType = "audio", this.Id = 0, this.ym = 0, this.wm = false, this.Sm = "", this.Em = 0, this.zd = 0, this.Dd = "", this.retryFailGwNodes = [], this.retryFailIpV4Nodes = [], this.retryFailIpV6Nodes = [], this.signalTime = 0, this.stopReason = "", this.km = 0, this.Om = 0, this.qd = ((h2 = {}).StreamStatusNotifyPush = { seq: -1, time: 0 }, h2.PlayEventPush = { seq: -1, time: 0 }, h2.ClientInfoPush = { seq: -1, time: 0 }, h2.NetQualityInfoPush = { seq: -1, time: 0 }, h2), this.Ad = 0, this.Im = { Rm: true, Tm: [], Cm: [] }, this.onDataChannelList = [], this.xd = { isSEIStart: false, unregisterSeiFilter: "", filterSize: 0 }, this.$u = false, this.Ll = 0, this.Ul = 0, this.Gl = 0, this.Jl = 0, this.Fl = 0, this.Ud = { lanIP: "", wanIP: "", intranet: false }, this.Wl = false, this.zm = { first: true, seq: 0 }, this.Bd = false, this.decodeVideoFrame = function(t5, i4) {
                var n4, e4, r4 = "VP8" !== f2.Sm, s4 = "H265" === f2.Sm;
                if (r4) {
                  var o3 = f2.Dm;
                  if (o3) {
                    if (o3.buffer)
                      if (t5.timestamp - o3.time < 20) {
                        var u3 = function(t6, i5) {
                          if (t6.byteLength !== i5.byteLength)
                            return false;
                          for (var n5 = 0; n5 < t6.byteLength; n5++)
                            if (t6[n5] !== i5[n5])
                              return false;
                          return true;
                        }(new Uint8Array(t5.data), o3.buffer);
                        u3 && (r4 = false);
                      } else
                        o3.buffer = void 0;
                  } else
                    f2.Dm = { buffer: new Uint8Array(t5.data).slice(0), time: t5.timestamp };
                }
                if (r4) {
                  for (var a3 = new DataView(t5.data), c3 = 0, h3 = new Qa(a3, s4), l2 = 0, d2 = false; h3.NextNalu(d2); ) {
                    if (s4) {
                      if (32 == (l2 = (126 & a3.getUint8(h3.nalu_start + h3.start_code_size)) >> 1) || 33 == l2 || 34 == l2 || 35 == l2)
                        continue;
                      if (39 != l2)
                        break;
                    } else {
                      if (7 == (l2 = 31 & a3.getUint8(h3.nalu_start + h3.start_code_size)) || 8 == l2 || 9 == l2)
                        continue;
                      if (6 != l2)
                        break;
                    }
                    var v2 = new Uint8Array(t5.data).slice(h3.nalu_start + h3.start_code_size, h3.nalu_start + h3.start_code_size + h3.nalu_size);
                    if (f2.pn.seiConfig.emulationPreventionByte)
                      v2 = rh(v2).output;
                    c3 = s4 ? 2 : 1, d2 = true;
                    for (var m2 = 0; 255 === v2[c3]; )
                      m2 += 255, c3++;
                    if (243 === (m2 += v2[c3++]) || 5 === m2 || 100 === m2) {
                      for (var p2 = 0; 255 === v2[c3]; )
                        p2 += 255, c3++;
                      if (p2 += v2[c3++], t5.data.byteLength - c3 < p2)
                        break;
                      var g2 = new Uint8Array(4 + p2);
                      switch (g2[0] = 0, g2[1] = 0, m2) {
                        case 100:
                          g2[2] = 3, g2[3] = 235;
                          break;
                        case 5:
                          g2[2] = 3, g2[3] = 236;
                          break;
                        case 243:
                          g2[2] = 3, g2[3] = 237;
                      }
                      for (var b2 = 0; b2 < p2; b2++)
                        g2[4 + b2 - 0] = v2[c3++];
                      var _2 = false;
                      if (243 === m2)
                        _2 = true;
                      else if (5 === m2) {
                        var y2 = f2.xd.unregisterSeiFilter;
                        if (y2) {
                          var w2 = g2.slice(4, 4 + f2.xd.filterSize), S2 = void 0, E2 = true;
                          if (0 === (S2 = "string" == typeof y2 ? no(y2) : y2).length)
                            E2 = false;
                          else
                            for (var k2 = 0; k2 < S2.length; k2++)
                              if (S2[k2] !== w2[k2]) {
                                E2 = false;
                                break;
                              }
                          _2 = E2;
                        } else
                          _2 = true;
                      }
                      _2 && f2.pn.actionListener("playerRecvSEI", f2.va, g2);
                    } else if (244 === m2) {
                      for (p2 = 0; 255 === v2[c3]; )
                        p2 += 255, c3++;
                      if (p2 += v2[c3++], t5.data.byteLength - c3 < p2)
                        break;
                      var O2 = parseInt(p2 / 5 + ""), I2 = v2.slice(c3, c3 += p2), R2 = [], T2 = function(t6) {
                        var i5 = 5 * t6, r5 = I2.slice(i5, i5 + 4), s5 = I2.slice(i5 + 4, i5 + 5), o4 = eh(r5), u4 = s5[0], a4 = (null === (e4 = null === (n4 = f2.room.streamList) || void 0 === n4 ? void 0 : n4.find(function(t7) {
                          return t7.stream_nid === o4;
                        })) || void 0 === e4 ? void 0 : e4.stream_id) || "";
                        R2.push({ soundLevelID: o4, value: u4, streamID: a4 });
                      };
                      for (k2 = 0; k2 < O2; k2++)
                        T2(k2);
                      var C2 = new Map(R2.map(function(t6) {
                        return [t6.soundLevelID, t6.value];
                      })), A2 = R2.filter(function(t6) {
                        return t6.streamID;
                      }).map(function(t6) {
                        return [t6.streamID, t6.value];
                      }), z2 = new Map(A2);
                      f2.pn.actionListener("mixerSoundLevelUpdate", C2, f2.va), z2.size && f2.pn.actionListener("autoMixerSoundLevelUpdate", z2, f2.va);
                    }
                  }
                  i4.enqueue(t5);
                } else
                  i4.enqueue(t5);
              }, this.decodeAudioFrame = function(t5, i4) {
                i4.enqueue(t5);
              }, this.ou = { seiMessage: function(t5) {
                var i4 = t5.data, n4 = i4.streamID;
                if (n4 === f2.va)
                  switch (i4.cmd) {
                    case "recvSEI":
                      f2.pn.actionListener("playerRecvSEI", n4, new Uint8Array(i4.buffer));
                      break;
                    case "mixSoundLevel":
                      f2.onRecvMixSoundLevels && f2.onRecvMixSoundLevels(i4.soundLevelList);
                  }
              }, onUaSocketConnected: function() {
                var t5;
                f2.an.info("zc.ply.ousc call. " + (null === (t5 = f2.Hd) || void 0 === t5 ? void 0 : t5.length) + " gwNode: " + f2.od), f2.Hd && (f2.od = "", f2.getDispatchIPNodeMode(), f2.Vd.apply(f2, f2.Hd));
              } }, this.onCanStopNegaTimer = function() {
              }, this.onPlayStateUpdateError = function() {
              }, this.onPlayBFrameEvent = function(t5) {
              }, this.onPlayStreamEnd = function(t5) {
              }, this.onGwPlayNetState = function(t5) {
              }, this.Hd = void 0, this.an = Uo(e3, this.va), this.Kd = new cc(e3, false, t4.streamId), n3 && this.setSignal(n3), this.dataReport = r3, this.$u = this.pn.isMiniSdp, this.$u && (this.Yd = new gc(o2, e3, this.va)), this.checkAutoTcp(), this.Nm(), this.jd = t4.playStartTime;
            }
            return Object.defineProperty(t3.prototype, "signal", { get: function() {
              return this.Wd;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "autoTcp", { get: function() {
              return this.Ld;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "state", { get: function() {
              return this._state;
            }, set: function(t4) {
              this.lastState = this._state, this._state = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "stateNego", { get: function() {
              return this.ed;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "Pm", { get: function() {
              return this.Bv.playStartEvent;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isProbeByDG", { get: function() {
              return this.Bv.isProbeByDG;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "streamId", { get: function() {
              return this.va;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sessionId", { get: function() {
              return this.Df;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "playStream", { get: function() {
              return this.Bv.playStream;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "peerConnection", { get: function() {
              return this.Xl;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "resourceMode", { get: function() {
              return this.Mm;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "Xd", { get: function() {
              return this.gn.agentIpStackDetection.IPv4 === A.reachable;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "gwNode", { get: function() {
              return this.od;
            }, set: function(t4) {
              this.od = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "gwNodeList", { get: function() {
              return this.ud;
            }, set: function(t4) {
              this.ud = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "gwNodesTTL", { get: function() {
              return this.ad;
            }, set: function(t4) {
              this.ad = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isNodesEmpty", { get: function() {
              return this.ipNodeType === C.ZV4Only ? 0 === this.ud.length : this.ipNodeType === C.ZV4Priority ? 0 === this.ipV4NodeList.length : (this.ipNodeType === C.ZV6Priority || 0 === this.ipV4NodeList.length) && 0 === this.ipV6NodeList.length;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "Od", { get: function() {
              return this.Bv.isPeer;
            }, set: function(t4) {
              this.Bv.isPeer = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isProbe", { get: function() {
              return this.Bv.isProbe;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "peerID", { get: function() {
              return this.Id;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "needTranscode", { set: function(t4) {
              this.ym = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "streamConnectIP", { get: function() {
              return this.Dd;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "playingEvent", { get: function() {
              return this.Bv.playingEvent;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "streamNotFoundTime", { get: function() {
              return this.km;
            }, set: function(t4) {
              this.km = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "dataChannel", { get: function() {
              return this.Pf;
            }, enumerable: false, configurable: true }), t3.prototype.createSEIWorker = function() {
              return this.gn.createSEIWorker();
            }, Object.defineProperty(t3.prototype, "seiWorker", { get: function() {
              return this.gn.seiWorker;
            }, enumerable: false, configurable: true }), t3.prototype.au = function(t4, i3) {
              return void 0 === i3 && (i3 = false), this.pn.settingConfig.getSetting(t4, i3);
            }, Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "va", { get: function() {
              return this.Bv.streamId;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "xm", { get: function() {
              var t4;
              return null === (t4 = this.pm) || void 0 === t4 ? void 0 : t4.streamParams;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "playMode", { get: function() {
              return this.vm;
            }, enumerable: false, configurable: true }), t3.prototype.Nm = function() {
              var t4, i3, n3, e3, r3 = null === (t4 = this.pm) || void 0 === t4 ? void 0 : t4.isSEIStart;
              if ((0, B.dd)(r3) && (this.xd.isSEIStart = r3), r3) {
                var s3 = ft(), o2 = null === (i3 = this.pm) || void 0 === i3 ? void 0 : i3.videoCodec;
                (o2 && "H264" !== o2 && "H265" !== o2 || !s3) && (this.an.warn(Co.QU$ + " not use sei; support: ".concat(s3, ", codec: ").concat(o2, " ")), this.xd.isSEIStart = false);
              }
              if (null === (n3 = this.pn.seiConfig) || void 0 === n3 ? void 0 : n3.unregisterSEIFilter) {
                var u2 = this.xd.unregisterSeiFilter = null === (e3 = this.pn.seiConfig) || void 0 === e3 ? void 0 : e3.unregisterSEIFilter;
                this.xd.filterSize = no(u2).byteLength;
              }
            }, t3.prototype.setSignal = function(t4) {
              this.Wd !== t4 ? (this.Wd = t4, this.Kd.webrtcCenterServerSignal = t4, this.Hd && (this.an.info("zc.prc.ss signal register"), this.Wd.on("uaConnected", this.ou.onUaSocketConnected))) : this.an.info("zc.prc.ss signal no changed");
            }, t3.prototype.connectGW = function() {
              return Wc(this, void 0, void 0, function() {
                var t4, i3 = this;
                return $c(this, function(n3) {
                  return this.state = 0, this.bm = false, this.setTurnTcp(), this.$u && !this.Fl && (this.Fl = performance.now()), (t4 = this.au("udp_or_tcp", true)) && (this.an.info(Co.wQ8 + " setting udp_or_tcp " + t4), this.Bd = "tcp" === t4), this.Bd && (this.Od = false, this.Ld = false), [2, new G.l3(function(t5, n4) {
                    (i3.Od ? i3.jm() : i3.qm()).catch(function(t6) {
                      n4(t6);
                    }), i3.getRemoteStreamSuc = t5;
                  })];
                });
              });
            }, t3.prototype.jm = function() {
              return Wc(this, void 0, void 0, function() {
                var t4, i3, n3, e3, r3, s3;
                return $c(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      return o2.trys.push([0, 5, , 6]), [4, this.bv({ encodedInsertableStreams: this.xd.isSEIStart })];
                    case 1:
                      return (t4 = o2.sent()) ? (t4 = this.Dv(t4), [4, this.Lm(t4)]) : [2];
                    case 2:
                      return (i3 = o2.sent()) ? (this.wv(i3.seq, i3.sessionID, n3 = i3.msg, i3.ipv6Prefer), [4, this.parseRemoteMiniSdp(n3)]) : [2];
                    case 3:
                      if (e3 = o2.sent(), this.Ld && !this.Bm(e3, n3.params_ext))
                        throw this.Um(re.drM, false);
                      return [4, G.l3.all([this.Gm(t4), this.Jm(e3, void 0, null == n3 ? void 0 : n3.mini_sdp)])];
                    case 4:
                      return o2.sent(), this.Ld && this.Rv(n3.params_ext), [3, 6];
                    case 5:
                      if (!(r3 = o2.sent()).playError)
                        throw r3;
                      return this.onPlayStateUpdateError((s3 = r3).error, s3.stopRetry, s3.detail, s3.startFromFirst), [3, 6];
                    case 6:
                      return [2];
                  }
                });
              });
            }, t3.prototype.qm = function() {
              return Wc(this, void 0, void 0, function() {
                var t4, i3, n3, e3, r3, s3, o2, u2, a2;
                return $c(this, function(c2) {
                  switch (c2.label) {
                    case 0:
                      return c2.trys.push([0, 7, , 8]), [4, this.Lm(void 0)];
                    case 1:
                      return (t4 = c2.sent()) ? (this.Sv(t4.seq, t4.sessionID, i3 = t4.msg, t4.ipv6Prefer), [4, this.Fm(i3)]) : [2];
                    case 2:
                      return n3 = c2.sent(), [4, this.bv(n3)];
                    case 3:
                      return (e3 = c2.sent()) ? (e3 = this.Dv(e3), [4, this.Gm(e3)]) : [2];
                    case 4:
                      return c2.sent(), [4, this.Hm(e3)];
                    case 5:
                      return r3 = c2.sent(), o2 = r3.miniSdp, (s3 = r3.remoteSdp) ? [4, this.Jm(s3, true, o2)] : [2];
                    case 6:
                      return c2.sent(), [3, 8];
                    case 7:
                      if (!(u2 = c2.sent()).playError)
                        throw u2;
                      return this.onPlayStateUpdateError((a2 = u2).error, a2.stopRetry, a2.detail, a2.startFromFirst), [3, 8];
                    case 8:
                      return [2];
                  }
                });
              });
            }, t3.prototype.Fm = function(t4) {
              var i3;
              return Wc(this, void 0, void 0, function() {
                var n3, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2, I2, T2, C2, A2, z2, D2 = this;
                return $c(this, function(N2) {
                  switch (N2.label) {
                    case 0:
                      return this.an.info((n3 = Co.HGP) + " success"), this.setTurnTcp(), this.gn.autoSwitchProtocol = this.au("auto_to_tcp") || false, e3 = this.au("udp_max_fail_num"), !isNaN(e3) && (this.gn.maxUdpFailNum = e3), o2 = (r3 = this.gn).maxUdpFailNum, u2 = r3.udpFailNum, this.an.info(n3 + "  autoToTcp: ".concat(s3 = r3.autoSwitchProtocol, ", udpFailNum: ").concat(u2, ", maxUdpFailNum: ").concat(o2, ".")), s3 && !this.Bd && u2 >= o2 && (this.an.info(n3 + " switch to tcp."), this.Bd = true, this.Ld = false), (a2 = this.au("udp_or_tcp", true)) && (this.an.info(n3 + " setting udp_or_tcp " + a2), this.Bd = "tcp" === a2), c2 = [], h2 = void 0, f2 = this.Ud.wanIP = (t4.gw_nodes[0] || this.od).split(":")[0], !this.gn.isProxy || this.gn.isLocalProxy ? [3, 2] : (l2 = null == gs ? void 0 : gs.proxyCtrl, [4, Promise.all([l2.getTurnInfo(), l2.intranetCheck(Gs(f2), void 0)])]);
                    case 1:
                      return d2 = N2.sent(), m2 = d2[1], (v2 = d2[0]).code ? this.an.warn(n3 + " use proxy failed." + JSON.stringify(v2)) : (g2 = (p2 = v2.data).password, b2 = p2.turn_ipv4, _2 = p2.turn_port, y2 = p2.username, (w2 = p2.turn_internal_ipv4) && (this.yv.coturn_internal = w2), S2 = Us(b2), E2 = "turn:".concat(S2, ":").concat(_2, "?transport=").concat(this.Bd ? "tcp" : "udp"), this.an.info(n3 + " turn server: ".concat(E2, " ; intranet: ").concat(JSON.stringify(null === (i3 = null == m2 ? void 0 : m2.data) || void 0 === i3 ? void 0 : i3.intranet), "; turn internal ip: ").concat(Us(w2))), h2 = [{ credential: g2, urls: [E2], username: y2 }]), m2.code ? this.an.warn(n3 + " use intranetCheck failed." + JSON.stringify(m2)) : this.Ud.intranet = m2.data.intranet || false, [3, 3];
                    case 2:
                      this.gn.isLocalProxy && this.gn.turnServers ? (h2 = (O2 = this.gn.turnServers).map(function(t5) {
                        return { credential: t5.credential, urls: [t5.url], username: t5.username };
                      }), this.an.info(n3 + " use local proxy: " + JSON.stringify(O2)), this.Ud.intranet = false) : t4.turn_server && (k2 = [], t4.turn_server.split(";").forEach(function(t5) {
                        var i4 = Vs(t5).replace("[", "").replace("]", ""), n4 = Hs(i4);
                        if (D2.ipStackNode === n4 ? k2.push(t5) : D2.El.push(t5), n4 == R.IPv4) {
                          var e4 = Ro(i4), r4 = t5.replace(i4, "[".concat(e4, "]"));
                          D2.gn.isCandidateHasIPv6 && k2.push(r4);
                        }
                      }), (z2 = this.El).push.apply(z2, k2), O2 = void 0, I2 = k2.filter(function(t5) {
                        return t5.indexOf("udp") > -1;
                      }), T2 = k2.filter(function(t5) {
                        return t5.indexOf("tcp") > -1;
                      }), O2 = this.Bd ? T2.length > 0 ? T2 : I2.map(function(t5) {
                        return t5.replace("udp", "tcp");
                      }) : I2, this.an.info(n3 + " over tcp " + JSON.stringify(O2)), c2.push.apply(c2, O2)), N2.label = 3;
                    case 3:
                      return t4.stun_server && c2.push(t4.stun_server), C2 = { iceTransportPolicy: "all", iceServers: [{ urls: c2, username: t4.turn_username, credential: t4.turn_auth_key }], encodedInsertableStreams: this.xd.isSEIStart }, this.Il = t4.turn_username, this.Tl = t4.turn_auth_key, h2 && (C2.iceServers = h2, C2.iceTransportPolicy = "relay", C2.rtcpMuxPolicy = "require"), this.an.info(n3 + " username: " + (A2 = C2.iceServers[0]).username + ", credential: " + A2.credential), this.dv(), this.an.info(n3 + " call success"), [2, C2];
                  }
                });
              });
            }, t3.prototype.Tv = function(t4, i3) {
              var n3 = this.qd[t4], e3 = n3.seq, r3 = n3.time, s3 = performance.now();
              return -1 !== e3 && e3 >= i3 && s3 - r3 < 6e3 ? (this.an.warn(Co.CLV + " push ".concat(t4, ", seq ").concat(i3, " local ").concat(JSON.stringify(this.qd[t4]))), false) : (this.qd[t4] = { seq: i3, time: s3 }, true);
            }, t3.prototype.bv = function(t4) {
              return Wc(this, void 0, void 0, function() {
                var i3, n3, e3, r3, s3, o2, u2, a2, c2 = this;
                return $c(this, function(h2) {
                  switch (h2.label) {
                    case 0:
                      i3 = Co.HGP, this.Xl = new RTCPeerConnection(t4), this.Xl.onicecandidate = function(t5) {
                        c2.Vm(t5);
                      }, this.Xl.onsignalingstatechange = function(t5) {
                        c2.Qm(t5);
                      }, this.Xl.oniceconnectionstatechange = function(t5) {
                        c2.Ym(t5);
                      }, this.Xl.onconnectionstatechange = function(t5) {
                        c2.Km(t5);
                      }, this.Xl.ontrack = function(t5) {
                        c2.Zm(t5.streams[0], t5.receiver);
                      }, n3 = this.au("peer_signal_over_dc"), (this.gn.isDataChannelEnabled || n3) && (e3 = { ordered: false }, this.an.info("zc.p.dc.n  option:" + JSON.stringify(e3) + " enable: " + n3), this.Ad = 0, this.Pf = this.Xl.createDataChannel(this.va, e3), this.Pf.binaryType = "arraybuffer", n3 && (this.Kd.dataChannel = this.Pf), this.Pf.onopen = function(t5) {
                        c2.an.info("zc.p.dc.o onopen");
                      }, this.Pf.onclose = function(t5) {
                        c2.an.warn("zc.p.dc.c onclose");
                      }, this.Pf.onmessage = function(t5) {
                        if (c2.Ad++ < 3 && c2.an.info("zc.p.dc.m onmessage"), t5.data instanceof Blob) {
                          var i4 = new FileReader(), n4 = {};
                          i4.readAsArrayBuffer(t5.data), i4.onload = function() {
                            n4.data = i4.result, c2.onReceivedDataChannel(n4);
                          };
                        } else
                          c2.onReceivedDataChannel(t5);
                      }), this.pn.customUa && (r3 = (0, B.JO)(this.Xl.addTransceiver), this.an.info(i3 + " custom ua ios " + r3), r3 && (this.Xl.addTransceiver("video", { direction: "recvonly" }), this.Xl.addTransceiver("audio", { direction: "recvonly" }))), this.Dl = s3 = { offerToReceiveAudio: true, offerToReceiveVideo: true }, this.isProbe ? "audio" === this.probeType && (s3.offerToReceiveVideo = false) : (this.pm && false === this.pm.video && (s3.offerToReceiveVideo = false), this.pm && false === this.pm.audio && (s3.offerToReceiveAudio = false)), this.an.info(i3 + " createOffer: " + JSON.stringify(s3)), o2 = this.getSpan(L.Jd.event, this.Pm), h2.label = 1;
                    case 1:
                      return h2.trys.push([1, 3, , 4]), [4, this.Xl.createOffer(s3)];
                    case 2:
                      return u2 = h2.sent(), o2 && (this.pn.ia(o2, { sdp: u2.sdp }), o2.setAttributes({ is_mini: L.Jd.is_mini(this.$u) }), o2.end()), this.Xm(u2.sdp || "") ? [2, u2] : (this.onNeedReplay && this.onNeedReplay(), [2, void 0]);
                    case 3:
                      throw a2 = h2.sent(), this.an.error(i3 + " create offer error " + a2.toString()), o2 && this.cr.setError(o2, { code: ih.Vn.code, message: a2.toString() }), this.Um(ih.Vn, true);
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.xv = function(t4) {
              return 0 === so(t4).length;
            }, t3.prototype.restartIce = function() {
              var t4, i3 = this, n3 = Co.IRO;
              this.an.info("".concat(n3, " call")), null === (t4 = this.Xl) || void 0 === t4 || t4.createOffer(Xc(Xc({}, this.Dl), { iceRestart: true })).then(function(t5) {
                var e3, r3, s3;
                if (i3.an.info("".concat(n3, " createOffer suc")), t5.sdp) {
                  i3.Dv(t5);
                  var o2 = oo(t5.sdp), u2 = uo(t5.sdp);
                  i3.an.info("".concat(n3, " ice ").concat(o2, " ").concat(u2));
                  var a2 = { iceTransportPolicy: "all", rtcpMuxPolicy: "require", iceServers: [{ urls: i3.El, username: i3.Il, credential: i3.Tl }], encodedInsertableStreams: i3.xd.isSEIStart };
                  i3.an.info("".concat(n3, " set config ").concat(JSON.stringify(a2))), null === (e3 = i3.Xl) || void 0 === e3 || e3.setConfiguration(a2), i3.sendRestartIce(o2, u2), i3.an.info("".concat(n3, " localSdp1 ").concat(t5.sdp.substr(0, t5.sdp.length / 2))), i3.an.info("".concat(n3, " localSdp2 ").concat(t5.sdp.substr(t5.sdp.length / 2))), null === (r3 = i3.Xl) || void 0 === r3 || r3.setLocalDescription(t5).then(function(t6) {
                    i3.an.info("".concat(n3, " set local sdp suc"));
                  }).catch(function(t6) {
                    i3.an.info("".concat(n3, " set local sdp fail ").concat(t6.message ? JSON.stringify(t6.message) : JSON.stringify(t6)));
                  }), null === (s3 = i3.Xl) || void 0 === s3 || s3.setRemoteDescription(new RTCSessionDescription({ type: "answer", sdp: i3.nv })).then(function(t6) {
                    i3.an.info("".concat(n3, " set remote sdp suc"));
                  }).catch(function(t6) {
                    i3.an.info("".concat(n3, " set remote sdp fail ").concat(t6.message ? JSON.stringify(t6.message) : JSON.stringify(t6)));
                  }), i3.kl.forEach(function(t6) {
                    var e4;
                    null === (e4 = i3.Xl) || void 0 === e4 || e4.addIceCandidate(new RTCIceCandidate(t6)).then(function() {
                      i3.an.info("".concat(n3, " ").concat(i3.va, ", add can suc"));
                    }).catch(function(t7) {
                      i3.an.info("".concat(n3, " ").concat(i3.va, ", add can fail, ").concat(t7.message));
                    });
                  });
                }
              }).catch(function(t5) {
                i3.an.warn("zc.p.0.rsi err ".concat(t5.message ? JSON.stringify(t5.message) : JSON.stringify(t5)));
              });
            }, t3.prototype.resetIceInfos = function() {
              this.an.info("zc.p.1.rii.0 call"), this.El = [], this.Il = "", this.Tl = "", this.kl = [];
            }, t3.prototype.resetNat64Infos = function() {
              this.an.info("zc.p.0.rni.0 call"), this.Ol = [];
            }, t3.prototype.Xm = function(t4) {
              return this.an.info(Co.HGP + " is probe " + this.isProbe), !this.isProbe || (!("audio" === this.probeType && !t4.includes("m=audio")) || (this.an.warn(Co.HGP + " no audio"), this.probeType = "all", false));
            }, t3.prototype.Lm = function(t4) {
              var i3 = this;
              return new G.l3(function(n3, e3) {
                try {
                  i3.Vd(t4, n3, e3);
                } catch (t5) {
                  e3(t5);
                }
              });
            }, t3.prototype.Vd = function(t4, i3, n3) {
              var r3, s3, o2, u2, a2 = this, c2 = !!t4;
              if (!this.Wd.isUaConnected)
                return this.an.info(Co.QU$ + " wait to create session"), this.Hd = [t4, i3, n3], void this.Wd.on("uaConnected", this.ou.onUaSocketConnected);
              this.Hd && (this.Hd = void 0), this.lv = (0, e2.Mo)();
              var h2 = this.va;
              1 == this.gn.testEnvironment && (h2 = "zegotest-" + this.gn.appid + "-" + this.va);
              var f2 = "".concat(Co.QU$, " session req : "), l2 = this.getTransCodec(h2), d2 = l2.transCodecID, v2 = l2.transCodecSuffix, m2 = l2.transCodecStreamID;
              v2 && (f2 += " transcode: ".concat(d2, " , ").concat(h2, " , ").concat(v2, " ; "), this.pn.onExperimentalAPICallback({ method: "playerStartTranscoding", content: { streamID: this.va, codecTemplateID: d2, reason: this.ym } }));
              h2 = m2, this.gn.gwNode && (this.od = this.gn.gwNode);
              var p2 = this.au("gw_nodes");
              p2 && (0, B.C9)(p2) && p2.length > 0 && (this.an.info(Co.QU$ + " setting " + JSON.stringify(p2)), this.ud = p2, this.od = this.ud[0] || this.od);
              var g2 = (null === (s3 = null === (r3 = this.gn.publisherList[this.va]) || void 0 === r3 ? void 0 : r3.room) || void 0 === s3 ? void 0 : s3.roomID) || (null === (o2 = this.pn.roomList[0]) || void 0 === o2 ? void 0 : o2.roomID);
              this.getIPStackNode(), this.an.info(f2 + " gwNode: ".concat(this.od, ", ipNodeType: ").concat(this.ipNodeType, ", ").concat(this.Od ? "peer" : "turn", ", ipv6_prefer: ").concat(this.ipV6Prefer));
              var b2 = this._v(g2), _2 = b2.params, y2 = b2.paramsExt;
              this.yv = y2;
              var w2 = L.Bc;
              if (c2) {
                var S2 = function(r4) {
                  var s4 = a2.getSpan(L.Bc.event, a2.Pm);
                  null == s4 || s4.setAttributes({ server_host: a2.od, ip_mode: a2.ipV6Prefer, req_params_ext: y2 });
                  var o3 = a2.au("l3_play_buffer_ms"), u3 = (/* @__PURE__ */ new Date()).getTime();
                  a2.Wl = false;
                  var c3 = {};
                  r4 ? c3.miniSdp = r4 : c3.sdp = t4.sdp, a2.Kd.createSessionWithSdp(Xc(Xc({ seq: a2.lv, type: a2.isProbe ? 2 : 1, mode: 0, streamId: h2, strAuthParam: a2.xm || "" }, c3), { serverHost: a2.od, playBufLevel: a2.vm === e2.ey.L3 ? o3 : void 0, params: _2, paramsExt: y2, roomID: g2, geo: { type: a2.gn.geo.type, areaList: a2.gn.geo.areaList }, transCodecID: d2, transCodecSuffix: v2, ipV6Prefer: a2.ipV6Prefer }), function(t5, n4, e3) {
                    return Wc(a2, void 0, void 0, function() {
                      var r5;
                      return $c(this, function(o4) {
                        return r5 = (/* @__PURE__ */ new Date()).getTime(), this.an.info(Co.QU$ + " create session time " + (r5 - u3)), To(e3), s4 && (this.pn.ia(s4, { sdp: e3.sdp }), s4.setAttributes({ webrtc_sid: n4, gw_nodes: w2.gw_nodes(e3.gw_nodes), ip_infos: e3.ips, ip_v6_infos: e3.ipv6s, gw_nodes_ttl: w2.gw_nodes(e3.gw_nodes_ttl), gw_version: w2.gw_version(e3.gw_version), ip_mode: this.ipV6Prefer, rsp_params_ext: e3.params_ext }), s4.end()), 5 !== this.ed && this.getSpan(L.F.event, this.Pm, "", true), this.lv != t5 ? (this.an.error(Co.GV2 + " seq is not match."), i3(void 0)) : i3({ seq: t5, sessionID: n4, msg: e3, ipv6Prefer: this.ipV6Prefer }), [2];
                      });
                    });
                  }, function(t5, i4) {
                    if (a2.lv == i4) {
                      t5 === re.OdW && (a2.$u = false);
                      var r5 = t5 == e2.Xb ? ih.Yn : ih.Kn;
                      s4 && a2.cr.setError(s4, r5), a2.an.warn(Co.GV2 + " create session fail. ".concat(t5.code)), n3(a2.Um(r5));
                    } else
                      a2.an.warn(Co.GV2 + " seq is not match.");
                  });
                };
                if (this.$u) {
                  var E2 = performance.now();
                  null === (u2 = this.Yd) || void 0 === u2 || u2.getMiniSdp(t4.sdp).then(function(t5) {
                    a2.Ul = performance.now() - E2, S2(t5);
                  }).catch(function(t5) {
                    a2.$u = false, a2.pn.$u = false, a2.Ul = performance.now() - E2, a2.Jl = performance.now() - a2.Fl, a2.Ll = 1, S2();
                  });
                } else
                  S2();
              } else {
                var k2 = this.getSpan(L.Bc.event, this.Pm);
                null == k2 || k2.setAttributes({ server_host: this.od, ip_mode: this.ipV6Prefer }), this.Wl = false, this.Kd.createSession(this.lv, { type: 1, mode: 0, streamID: h2, strAuthParam: this.xm || "", serverHost: this.od, params: _2, roomID: g2, geo: { type: this.gn.geo.type, areaList: this.gn.geo.areaList }, transCodecID: d2, transCodecSuffix: v2, ipV6Prefer: this.ipV6Prefer }, function(t5, n4, e3) {
                  return Wc(a2, void 0, void 0, function() {
                    return $c(this, function(r4) {
                      return To(e3), k2 && (k2.setAttributes({ webrtc_sid: L.Bc.webrtc_sid(n4), is_mini: w2.is_mini(this.$u), gw_nodes: w2.gw_nodes(e3.gw_nodes), ip_infos: e3.ips, ip_v6_infos: e3.ipv6s, gw_nodes_ttl: w2.gw_nodes(e3.gw_nodes_ttl), gw_version: w2.gw_version(e3.gw_version), ip_mode: this.ipV6Prefer }), k2.end()), this.lv != t5 ? (this.an.error(Co.QU$ + " seq is not match."), i3(void 0)) : i3({ seq: t5, sessionID: n4, msg: e3, ipv6Prefer: this.ipV6Prefer }), [2];
                    });
                  });
                }, function(t5, i4) {
                  if (a2.lv == i4) {
                    var r4 = t5 == e2.Xb ? ih.Yn : ih.Kn;
                    k2 && a2.cr.setError(k2, r4), n3 && n3(a2.Um(r4));
                  } else
                    a2.an.warn(Co.QU$ + " seq is not match.");
                });
              }
              this.state = 1, this.an.info(Co.QU$ + " called success"), this.ed = 1;
            }, t3.prototype._v = function(t4) {
              var i3 = "", n3 = [], r3 = {}, s3 = this.pn.seiConfig.SEIPass;
              (0, B.dd)(s3) && (r3.sei_filter_pass = s3 ? 1 : 0), r3.auto_switch_turn_type = "firefox" === this.pn.browser ? 2 : 1, this.vm === e2.ey.L3 && (r3.client_class_type = 1, true === this.pm.adaptiveSwitch && this.pm.adaptiveTemplateIDList && (r3.adaptive_switch = 1, r3.adaptive_template_id_list = this.pm.adaptiveTemplateIDList.join(","))), (0, B.Cs)(this.pm.streamType) && (r3.video_stream_type = this.pm.streamType), (0, B.Cs)(this.pm.posterType) && (r3.req_poster_type = this.pm.posterType);
              var o2 = 0, u2 = this.pm.jitterBufferTarget, a2 = this.pm.playoutDelayHint;
              return (0, B.Cs)(u2) && u2 > 0 && u2 <= 4e3 ? o2 = u2 : (0, B.Cs)(a2) && a2 > 0 && a2 <= 4 && (o2 = 1e3 * a2), (0, B.dd)(this.pm.enableLowLatency) && this.pm.enableLowLatency && (o2 = 2147483647), o2 > 0 && (r3.play_jitter_level = o2), this.pn.idName && n3.push("zguid=" + this.pn.idName), t4 && n3.push("zgrid=" + t4), this.gn.isProxy && (r3.zg_proxy = 1), r3.proto_flags = 2, this.au("peer_signal_over_dc") && (r3.proto_flags |= 256), n3.length > 0 && (i3 = n3.join("&")), { params: i3, paramsExt: r3 };
            }, t3.prototype.getDispatchIPNodeMode = function() {
              if (!this.od) {
                this.an.info("zc.p.1.gdinm call");
                var t4 = this.gn.getStreamIPNodesMode(), i3 = t4.ipNodeType;
                this.ipV6Prefer = t4.ipV6Prefer, this.ipNodeType = i3, this.ipV6Prefer === T.kV6AndV4 && !this.Al && this.Xd && (this.ipV6Prefer = T.kV4AndV6, this.ipNodeType = C.ZV4Priority), this.an.info("zc.p.1.gdinm ".concat(this.ipV6Prefer, " ").concat(this.ipNodeType));
              }
            }, t3.prototype.getRetryIPNodeMode = function() {
              if (this.an.info("zc.p.1.grinm call"), this.ipV6Prefer === T.kV4Only)
                this.ipNodeType = C.ZV4Only;
              else {
                var t4 = this.gn.getRetryIPPreferNodeType(), i3 = t4.ipV6Prefer;
                this.ipNodeType = t4.ipNodeType, this.ipV6Prefer = i3;
              }
              this.an.info("zc.p.1.grinm ".concat(this.ipV6Prefer, " ").concat(this.ipNodeType));
            }, t3.prototype.getRetryIPv6Prefer = function() {
              this.ipV6Prefer = this.gn.getIPv6PreferByGwNode(this.gwNode);
            }, t3.prototype.checkIfToRestart = function(t4) {
              this.Sl = !this.isProbe && (t4 !== T.kV4Only && (this.ipNodeType === C.ZV6AndV4Priority || this.pn.selectIPStackMode === y.IPv4Prefer && this.gn.agentIpStackDetection.IPv4 === A.reachable && this.ipNodeType === C.ZV6Priority));
            }, t3.prototype.getIPStackNode = function() {
              if (this.gwNode) {
                var t4 = ao(this.gwNode);
                this.ipStackNode = Hs(t4);
              } else
                this.ipStackNode = [C.ZV4Only, C.ZV4Priority].includes(this.ipNodeType) ? R.IPv4 : R.IPv6;
            }, t3.prototype.setGwNodes = function(t4, i3, n3, e3) {
              var r3, s3, o2;
              if (this.an.info("".concat(Co.Eb9, " seq: ").concat(e3, ", gw_nodes: ").concat(JSON.stringify(null == t4 ? void 0 : t4.gw_nodes), ", ips: ").concat(JSON.stringify(t4.ips), ", ipv6s: ").concat(JSON.stringify(t4.ipv6s), ", ").concat(n3)), this.an.info("".concat(Co.Eb9, " seq: ").concat(e3, ", retry: ").concat(JSON.stringify(this.retryFailGwNodes), ", ips: ").concat(JSON.stringify(this.retryFailIpV4Nodes), ", ipv6s: ").concat(JSON.stringify(this.retryFailIpV6Nodes))), 0 === n3) {
                if ((null === (r3 = t4.gw_nodes) || void 0 === r3 ? void 0 : r3.length) > 0) {
                  var u2 = vo(t4.gw_nodes, this.retryFailGwNodes, i3);
                  this.retryFailGwNodes = [], this.handleDispatchedGwNodes(u2, t4.gw_nodes_ttl, n3);
                }
              } else {
                var a2 = void 0, c2 = void 0;
                (null === (s3 = t4.ips) || void 0 === s3 ? void 0 : s3.length) > 0 && (a2 = mo(t4.ips, this.retryFailIpV4Nodes, i3), this.retryFailIpV4Nodes = []), (null === (o2 = null == t4 ? void 0 : t4.ipv6s) || void 0 === o2 ? void 0 : o2.length) > 0 && (c2 = mo(t4.ipv6s, this.retryFailIpV6Nodes, i3), this.retryFailIpV6Nodes = []), this.handleDispatchedGwNodes(t4.gw_nodes || [], t4.gw_nodes_ttl, n3, a2, c2);
              }
            }, t3.prototype.resetGwNodes = function() {
              this.an.info(Co.Lji + " call"), this.od = "", this.ud = [], this.ipV4NodeList = [], this.ipV6NodeList = [], this.ad = 0;
            }, t3.prototype.handleDispatchedGwNodes = function(t4, i3, n3, e3, r3) {
              var s3 = this;
              if (void 0 === e3 && (e3 = []), void 0 === r3 && (r3 = []), this.an.info(Co._2$ + " " + JSON.stringify(t4) + " " + JSON.stringify(t4) + " " + JSON.stringify(e3) + " " + JSON.stringify(r3) + " ipv6Prefer " + n3), Array.isArray(t4) && 0 !== t4.length || 0 !== e3.length || 0 !== r3.length) {
                var o2 = 0 === i3 ? 60 : i3, u2 = function() {
                  s3.ad = o2 ? (/* @__PURE__ */ new Date()).getTime() + 1e3 * o2 : s3.ad;
                };
                this.ud = t4.length > 0 ? t4 : this.ud, this.ipV4NodeList = e3.length > 0 ? e3 : this.ipV4NodeList, this.ipV6NodeList = r3.length > 0 ? r3 : this.ipV6NodeList, n3 === T.kV4Only ? (this.od = t4.length > 0 ? this.ud[0] : this.od, t4.length > 0 && u2()) : n3 == T.kV4AndV6 && e3.length > 0 ? (this.od = po(e3[0]), this.ipNode = e3[0], u2()) : n3 === T.kV6AndV4 && r3.length > 0 ? (this.od = po(r3[0]), this.ipNode = r3[0], u2()) : (this.ud.length > 0 && (this.od = this.ud[0]), this.an.info("".concat(Co._2$, " ").concat(this.va, " no gwNode ").concat(n3, " ").concat(e3.length, " ").concat(r3.length)), this.ipNodeType = C.ZV4Only, this.ipStackNode = R.IPv4), this.gn.updateCachedGwNodesList(this.streamId, false, t4 || [], o2, e3, r3);
              }
            }, t3.prototype.Sv = function(t4, i3, n3, e3) {
              var r3, s3, o2, u2 = n3.turn_server, a2 = u2.split("?")[0] && u2.split("?")[0].slice(5), c2 = this.signal.Ev, h2 = "webrtc://".concat(a2, "/").concat(c2, "/").concat(this.va);
              this.cr.spanSetAttributes({ key: this.Pm, par: this.va }, { webrtc_sid: n3.session_id, url: h2 }), this.an.info(Co.QU$ + " sessionId:" + n3.session_id), this.resetPushCmdSeqMap();
              var f2 = n3.client_ip || n3.clientip;
              f2 && (this.pn.clientIP = f2), this.Id = n3.peer_id;
              var l2 = 0, d2 = (/* @__PURE__ */ new Date()).getTime();
              if (this.jd && (this.an.info(Co.GV2 + " create signal time " + (l2 = d2 - this.jd)), this.signalTime = l2), this.zd = d2, 0 !== n3.result) {
                this.an.error(Co.QU$ + " create error " + n3.result);
                var v2 = this.Um(ih.Kn);
                throw 1021 === (null == n3 ? void 0 : n3.result) && (v2 = this.Um(re.mHY, true)), 2013 === (null == n3 ? void 0 : n3.result) && (v2 = this.Um(ih.Me, true)), 2016 === (null == n3 ? void 0 : n3.result) && e3 === T.kV6AndV4 && (this.Al = false), 1006 === (null == n3 ? void 0 : n3.result) && (v2 = this.Um(ih.xe, true)), v2;
              }
              this.Df = n3.session_id, this.Wl = true, this.setGwNodes(n3, false, e3, t4), e3 === T.kV6AndV4 && (null === (r3 = null == n3 ? void 0 : n3.ipv6s) || void 0 === r3 ? void 0 : r3.length) > 0 && (this.Al = true), (null === (s3 = null == n3 ? void 0 : n3.ipv4s) || void 0 === s3 ? void 0 : s3.length) > 0 && (null === (o2 = null == n3 ? void 0 : n3.ipv6s) || void 0 === o2 ? void 0 : o2.length) > 0 && this.checkIfToRestart(e3), this.an.info(Co.QU$ + " " + this.va + " isRestartIce " + this.Sl);
            }, t3.prototype.wv = function(t4, i3, n3, e3) {
              var r3, s3, o2;
              this.an.info(Co.GV2 + " sessionId:" + i3), this.resetPushCmdSeqMap();
              var u2 = n3.client_ip || n3.clientip;
              u2 && (this.pn.clientIP = u2), this.Id = n3.peer_id;
              var a2 = 0, c2 = (/* @__PURE__ */ new Date()).getTime();
              if (this.jd && (this.an.info(Co.GV2 + " create signal time " + (a2 = c2 - this.jd)), this.signalTime = a2), this.zd = c2, 0 !== n3.result) {
                if (110 === n3.result && (this.$u = false, this.pn.$u = false, this.Jl = performance.now() - this.Fl, this.Ll = 2), this.an.error(Co.GV2 + " create session failed " + n3.result), 1021 === (null == n3 ? void 0 : n3.result))
                  throw this.Um(re.mHY, true);
                var h2 = ih.Kn;
                if (1004 === (null == n3 ? void 0 : n3.result)) {
                  if (h2 = Xc(Xc({}, this.pn.isFlutter ? re.T_8 : ih.ke), { message: "Stream not found." }), this.Wm())
                    throw this.Um(h2, true);
                }
                if (2013 === (null == n3 ? void 0 : n3.result))
                  throw this.Um(h2 = ih.Me, true);
                if (2016 === (null == n3 ? void 0 : n3.result) && e3 === T.kV6AndV4 && (this.Al = false), 1006 === (null == n3 ? void 0 : n3.result))
                  throw this.Um(ih.xe, true);
                throw this.Um(h2);
              }
              this.Df = i3, this.Wl = true, this.an.info(Co.GV2 + " create session success "), this.setGwNodes(n3, false, e3, t4), e3 === T.kV6AndV4 && (null === (r3 = null == n3 ? void 0 : n3.ipv6s) || void 0 === r3 ? void 0 : r3.length) > 0 && (this.Al = true), (null === (s3 = null == n3 ? void 0 : n3.ipv4s) || void 0 === s3 ? void 0 : s3.length) > 0 && (null === (o2 = null == n3 ? void 0 : n3.ipv6s) || void 0 === o2 ? void 0 : o2.length) > 0 && this.checkIfToRestart(e3), this.an.info(Co.GV2 + " " + this.va + " isRestartIce " + this.Sl), this.dv();
            }, t3.prototype.Rv = function(t4) {
              var i3, n3 = this;
              if (this.an.info(Co.rp8 + " set candidate ".concat(!!t4)), t4) {
                var e3 = t4.candidate, r3 = t4.sdpMid, s3 = t4.sdpMLineIndex;
                if (e3)
                  this.an.info(Co.rp8 + " addIceCandidate"), null === (i3 = this.Xl) || void 0 === i3 || i3.addIceCandidate(new RTCIceCandidate({ sdpMid: r3, sdpMLineIndex: s3, candidate: e3 })).then(function() {
                    n3.an.info(Co.rp8 + " add can suc");
                  }).catch(function(t5) {
                    n3.an.info(Co.rp8 + " add can fail, ".concat(t5.message));
                  });
              }
            }, t3.prototype.Dv = function(t4) {
              if (!(null == t4 ? void 0 : t4.sdp))
                throw this.an.warn(Co.amU + " no content"), this.Um(re.dqB, true);
              var i3 = t4.sdp;
              this.an.info(Co.amU + " localSdp1 " + i3.substr(0, i3.length / 2)), this.an.info(Co.amU + " localSdp2 " + i3.substr(i3.length / 2));
              var n3 = (i3 = (i3 = i3.replace(/sendrecv/g, "recvonly")).replace(/useinbandfec=/, "stereo=1;useinbandfec=")).match(/m=application[\s\S]+datachannel[\s\S]+/), e3 = n3 ? n3[0] : null;
              if (e3) {
                var r3 = e3.replace(/recvonly/, "sendrecv");
                i3 = i3.replace(e3, r3);
              }
              return i3 = function(t5) {
                var i4 = t5.split("\r\n"), n4 = /* @__PURE__ */ new Map();
                i4.forEach(function(t6, e5) {
                  if (/^a=rtcp-fb:/.test(t6) && i4[e5 + 1] && !/^a=rtcp-fb:/.test(i4[e5 + 1])) {
                    var r5 = t6.match(/^a=rtcp-fb:\d+/);
                    r5 && n4.set(e5 + 1, r5[0] + " rrtr");
                  }
                });
                for (var e4 = Array.from(n4), r4 = 0; r4 < e4.length; r4++) {
                  var s3 = bc([], e4[r4], true);
                  i4.splice(s3[0] + r4, 0, s3[1]);
                }
                return i4.join("\r\n");
              }(i3 = _c(i3)), this.pm.videoCodec && (i3 = ys.getSDPByVideDecodeType(i3, this.pm.videoCodec)), "firefox" === this.pn.browser && fo(this.pn.browserInfo, "firefox", 139, 2) && (i3 = yc(i3)), t4.sdp = i3, t4;
            }, t3.prototype.Gm = function(t4) {
              var i3;
              return Wc(this, void 0, void 0, function() {
                var n3, e3;
                return $c(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      this.an.info(Co.amU + " set local sdp"), (n3 = this.getSpan(L.FQ.event, this.Pm)) && (this.pn.ia(n3, { sdp: t4.sdp }), n3.setAttributes({ is_mini: L.FQ.is_mini(this.$u) })), r3.label = 1;
                    case 1:
                      return r3.trys.push([1, 3, , 4]), [4, null === (i3 = this.Xl) || void 0 === i3 ? void 0 : i3.setLocalDescription(t4)];
                    case 2:
                      return r3.sent(), n3 && n3.end(), [3, 4];
                    case 3:
                      throw e3 = r3.sent(), this.an.error(Co.amU + " set error " + e3.toString()), n3 && this.cr.setError(n3, { code: ih.Qn.code, message: e3.toString() }), this.Um(ih.Qn, true);
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.Hm = function(t4) {
              return Wc(this, void 0, void 0, function() {
                var i3, n3, r3, s3, o2, u2, a2, c2, h2, f2 = this;
                return $c(this, function(l2) {
                  switch (l2.label) {
                    case 0:
                      if (this.an.info(Co.c2i + " success"), i3 = { paramsExt: this.yv }, !this.$u)
                        return [3, 5];
                      n3 = performance.now(), l2.label = 1;
                    case 1:
                      return l2.trys.push([1, 3, , 4]), [4, this.Yd.getMiniSdp(t4.sdp)];
                    case 2:
                      return r3 = l2.sent(), this.Ul = performance.now() - n3, i3.miniSdp = r3, [3, 4];
                    case 3:
                      return l2.sent(), this.$u = false, this.pn.$u = false, this.Ul = performance.now() - n3, this.Jl = performance.now() - this.Fl, this.Ll = 1, i3.sdp = t4.sdp, [3, 4];
                    case 4:
                      return [3, 6];
                    case 5:
                      i3.sdp = t4.sdp, l2.label = 6;
                    case 6:
                      return this.vm === e2.ey.L3 && (i3.min_play_buf_level_ms = 500), this.np = (0, e2.Mo)(), null == (s3 = this.getSpan(L.GV.event, this.Pm)) || s3.setAttributes({ req_params_ext: this.yv }), this.state = 2, [4, new G.l3(function(t5, n4) {
                        f2.Kd.sendMediaDesc(f2.np, f2.Df, 0, i3, function(i4, n5, e3) {
                          t5({ seq: i4, sessionId: n5, data: e3 });
                        }, function(t6, i4) {
                          f2.an.error(Co.c2i + " failed to send " + t6), s3 && f2.cr.setError(s3, { code: ih.$n.code, message: t6.toString() }), f2.np == i4 && n4(f2.Um(ih.$n));
                        });
                      })];
                    case 7:
                      return o2 = l2.sent(), u2 = o2.seq, a2 = o2.sessionId, c2 = o2.data, this.an.info(Co.c2i + " sendMediaDesc resp"), s3 && (this.pn.ia(s3, { sdp: i3.sdp }), s3.setAttributes({ webrtc_sid: L.GV.webrtc_sid(a2) })), this.np != u2 ? (this.an.error(Co.c2i + " seq or sessionId is not equal " + this.np + " " + u2), [2, { remoteSdp: "" }]) : (this.an.info(Co.c2i + " send success stateNego:waiterAnswer"), this.ed = 2, this.state = 3, [4, this.parseRemoteMiniSdp(c2)]);
                    case 8:
                      if (h2 = l2.sent(), s3 && this.pn.ia(s3, { remote_sdp: h2 }), null == s3 || s3.end(), h2)
                        return [2, { remoteSdp: h2, miniSdp: null == c2 ? void 0 : c2.mini_sdp }];
                      throw this.Um(ih.$n);
                  }
                });
              });
            }, Object.defineProperty(t3.prototype, "turnToTcp", { get: function() {
              return this.Bd;
            }, enumerable: false, configurable: true }), t3.prototype.checkAutoTcp = function() {
              var t4 = lt();
              this.an.info("zc.p.1.cat ".concat(t4, " ").concat(this.Od)), this.Ld = !(!t4 || !this.Od);
            }, t3.prototype.Jm = function(t4, i3, n3) {
              var e3, r3;
              return void 0 === i3 && (i3 = false), Wc(this, void 0, void 0, function() {
                var s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2, p2, g2, b2, _2, y2, w2, S2, E2, k2, O2 = this;
                return $c(this, function(I2) {
                  switch (I2.label) {
                    case 0:
                      if (s3 = { type: "answer", sdp: t4, toJSON: function() {
                      } }, o2 = this.getSpan(L.EV.event, this.Pm), this.setTurnTcp(), this.gn.autoSwitchProtocol = this.au("auto_to_tcp") || false, u2 = this.au("udp_max_fail_num"), !isNaN(u2) && (this.gn.maxUdpFailNum = u2), h2 = (a2 = this.gn).maxUdpFailNum, f2 = a2.udpFailNum, this.an.info(Co.wQ8 + "  autoToTcp: ".concat(c2 = a2.autoSwitchProtocol, ", udpFailNum: ").concat(f2, ", maxUdpFailNum: ").concat(h2, ".")), c2 && !this.Bd && f2 >= h2 && (this.an.info(Co.wQ8 + " switch to tcp."), this.Bd = true, this.Ld = false), (l2 = this.au("udp_or_tcp", true)) && (this.an.info(Co.wQ8 + " setting udp_or_tcp " + l2), this.Bd = "tcp" === l2), this.Bd && !this.gn.isProxy && "firefox" !== this.pn.browser && (null === (e3 = s3.sdp.match(/candidate.*/g)) || void 0 === e3 || e3.forEach(function(t5) {
                        var i4 = t5.replace(/udp/, "tcp");
                        i4.includes(" tcptype ") || (i4 = i4.replace(" typ host ", " typ host tcptype passive ")), s3.sdp = s3.sdp.replace(t5, i4);
                      })), this.gn.isProxy)
                        if (d2 = Co.wQ8, m2 = ro(v2 = s3.sdp), p2 = m2[0], g2 = m2[1], b2 = v2.match(/a=mid:[^(\n|\r)]+/g), g2 && b2)
                          if (this.Ud.intranet)
                            setTimeout(function() {
                              g2.forEach(function(t5, i4) {
                                var n4, e4 = { sdpMLineIndex: i4, candidate: t5.replace(p2[i4].ip, O2.Ud.wanIP).replace("a=", ""), sdpMid: b2[i4].replace("a=mid:", "") };
                                O2.an.info(d2 + "  add wan candidate:" + JSON.stringify(e4)), null === (n4 = O2.Xl) || void 0 === n4 || n4.addIceCandidate(new RTCIceCandidate(e4));
                              });
                            }, 1e3);
                          else
                            for (this.an.info(d2 + "  change candidate ip from lan to wan: " + (_2 = this.Ud.wanIP)), y2 = 0; y2 < g2.length; y2++)
                              S2 = (w2 = g2[y2]).replace(p2[y2].ip, _2), s3.sdp = v2.replace(w2, S2);
                        else
                          this.an.warn(d2 + " candidate not found");
                      else
                        s3.sdp = this.extractCandidate(s3.sdp);
                      this.an.info(Co.wQ8 + " remoteSdp " + s3.sdp), o2 && (this.pn.ia(o2, { sdp: s3.sdp }), o2.setAttributes({ webrtc_sid: L.EV.webrtc_sid(this.Df), is_mini: L.EV.is_mini(this.$u) })), this.state = 4, i3 && (this.jv(this.Hl), this.Hl = [], this.state = 5), this.startTime = Date.now(), this.checkRetryOtherIPCandidate(), this.an.info(Co.wQ8 + " call success"), this.nv = s3.sdp, I2.label = 1;
                    case 1:
                      return I2.trys.push([1, 3, , 4]), [4, null === (r3 = this.Xl) || void 0 === r3 ? void 0 : r3.setRemoteDescription(new RTCSessionDescription(s3))];
                    case 2:
                      return I2.sent(), o2 && o2.end(), this.an.info(Co.wQ8 + " set success"), [3, 4];
                    case 3:
                      throw E2 = I2.sent(), this.an.error(Co.wQ8 + " set remote error " + E2.toString()), this.$u && (0, B.G0)(n3) && this.an.warn(Co.wQ8 + " mini " + n3.toString()), o2 && (o2.setAttributes({ error: ih.Zn.code, message: E2.toString() }), o2.end()), k2 = true, this.$u && (k2 = false, this.$u = false, this.Jl = performance.now() - this.Fl, this.Ll = 4), this.Um(ih.Zn, k2);
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.checkRetryOtherIPCandidate = function() {
              var t4 = this;
              this.hv = setTimeout(function() {
                t4.an.info("".concat(Co.p1K, " ").concat(t4.va, " check ").concat(t4.state, " ").concat(t4.ipNodeType, " ").concat(t4.kl.length)), 6 !== t4.state && t4.Sl && t4.kl.length > 0 && (t4.ipStackNode = t4.ipStackNode === R.IPv4 ? R.IPv6 : R.IPv4, t4.restartIce());
              }, this.Cl);
            }, t3.prototype.extractCandidate = function(t4) {
              var i3 = this, n3 = ro(t4), e3 = n3[0];
              return n3[1].forEach(function(n4, r3) {
                var s3 = e3[r3].ip, o2 = Hs(s3);
                if (i3.ipStackNode !== o2) {
                  var u2 = { sdpMLineIndex: parseInt(e3[r3].mid), candidate: n4.replace("a=", ""), sdpMid: e3[r3].mid };
                  i3.kl.push(u2), t4 = t4.replace(n4 + "\n", "");
                }
                if (o2 === R.IPv4) {
                  var a2 = Ro(s3), c2 = n4.replace(new RegExp(s3, "g"), a2).replace("a=", ""), h2 = { sdpMLineIndex: parseInt(e3[r3].mid), candidate: c2, sdpMid: e3[r3].mid };
                  i3.Ol.find(function(t5) {
                    return t5.candidate === h2.candidate && t5.sdpMLineIndex === h2.sdpMLineIndex && t5.sdpMid === h2.sdpMid;
                  }) || i3.Ol.push(h2);
                }
              }), t4;
            }, t3.prototype.Bm = function(t4, i3) {
              var n3, e3, r3 = this;
              if (this.an.info(Co.YOg + " preset turn " + "".concat(JSON.stringify(i3))), i3) {
                var s3 = i3.turn_username, o2 = i3.turn_auth_key, u2 = i3.turn_urls;
                this.Il = s3, this.Tl = o2;
                var a2 = void 0;
                if (u2) {
                  var c2 = u2.split(";"), h2 = [];
                  c2.forEach(function(t5) {
                    var i4 = Vs(t5).replace("[", "").replace("]", ""), n4 = Hs(i4);
                    if (r3.ipStackNode === n4 ? h2.push(t5) : r3.El.push(t5), n4 == R.IPv4) {
                      var e4 = Ro(i4), s4 = t5.replace(i4, "[".concat(e4, "]"));
                      r3.gn.isCandidateHasIPv6 && h2.push(s4);
                    }
                  }), (n3 = this.El).push.apply(n3, h2), 0 === (a2 = h2).length && a2.push.apply(a2, this.El);
                } else {
                  var f2 = so(t4);
                  if (0 === f2.length)
                    return this.an.info(Co.YOg + " " + this.va + " no candidate"), false;
                  a2 = f2;
                }
                var l2 = { iceTransportPolicy: "all", rtcpMuxPolicy: "require", iceServers: [{ urls: a2, username: s3, credential: o2 }], encodedInsertableStreams: this.xd.isSEIStart };
                try {
                  null === (e3 = this.Xl) || void 0 === e3 || e3.setConfiguration(l2);
                } catch (t5) {
                  this.an.info(Co.YOg + " preset turn " + t5);
                }
              }
              return true;
            }, t3.prototype.sendRestartIce = function(t4, i3) {
              var n3 = this;
              this.an.info("zc.p.1.srsi call: " + t4 + " " + i3), this.Kd.sendRestartIce(t4, i3).then(function(t5) {
                n3.an.info("zc.p.1.srsi result " + JSON.stringify(t5));
              }).catch(function(t5) {
                n3.an.warn("zc.p.1.srsi fail: " + JSON.stringify(t5));
              });
            }, t3.prototype.ep = function(t4, i3, n3) {
              if (this.an.info(Co.z_2 + " received " + n3.event), !this.isProbe) {
                var r3 = this.cr.createSpan(e2.t0.H, { key: th, par: this.va }, { key: "" }, L.Mw.event);
                r3.setAttributes({ event_state: L.Mw.event_state(n3.event), webrtc_sid: i3 }), r3.end();
              }
              (this.zm.first || t4 > this.zm.seq) && this.onPlayBFrameEvent(false), 0 === n3.event ? this.onPlayStreamEnd(false) : 1 === n3.event && this.onPlayStreamEnd(true);
            }, t3.prototype.gv = function(t4, i3, n3) {
              var e3 = n3.clientip || n3.client_ip;
              this.pn.clientIP !== e3 && this.an.info(Co.Q4y + " client ip changed " + this.pn.clientIP + " " + e3), this.pn.clientIP = e3, this.Id = n3.peer_id, this.Kd.peerId = n3.peer_id, this.Dd = e3, this.pn.isMultiOuter = this.isMultiOuter(), this.onGetIP(), this.isProbe && 5 == this.ed && this.Kd.sendNetProbeReq(function() {
              }, function() {
              }), this.wm = true;
            }, t3.prototype.onGetIP = function() {
            }, t3.prototype.rp = function(t4, i3, n3) {
              var e3 = 0, r3 = n3.lossrate, s3 = n3.rtt;
              (this.Id !== n3.peer_id && !this.isProbeByDG || (0, B.TE)(r3) || (0, B.TE)(s3)) && (this.an.info(Co.aww + " local peerID:" + this.Id + " remote peerID:" + n3.peer_id + " lossrate:" + r3 + " rtt:" + s3), e3 = 1), this.onRecvNetQuality && this.onRecvNetQuality(e3, r3, s3);
            }, t3.prototype.sp = function(t4, i3, n3) {
              this.an.info(Co.JFd + " call: " + i3), this.onRecvNetQualityGrade && this.onRecvNetQualityGrade(n3);
            }, t3.prototype.Vm = function(t4) {
              var i3, n3 = this;
              if (this.an.info(Co.u7D + " called"), null != t4.candidate) {
                if (this.an.info(Co.u7D + " candidate " + t4.candidate.candidate + " state " + this.state + " autotcp " + this.Ld), t4.candidate.candidate)
                  Hs(null === (i3 = t4.candidate.candidate.split(" ")) || void 0 === i3 ? void 0 : i3[4]) === R.IPv6 && (this.Ld && (this.an.info("".concat(Co.u7D, " can len ").concat(this.Ol.length)), this.Ol.forEach(function(t5) {
                    var i4;
                    null === (i4 = n3.Xl) || void 0 === i4 || i4.addIceCandidate(new RTCIceCandidate(t5)).then(function() {
                      n3.an.info("".concat(Co.u7D, " add can suc"));
                    }).catch(function(t6) {
                      n3.an.info("".concat(Co.u7D, " add can fail, ").concat(t6.message));
                    });
                  })), this.gn.isCandidateHasIPv6 = true);
                var e3 = function(t5) {
                  n3.jv([{ candidate: t5.candidate.candidate, sdpMid: t5.candidate.sdpMid, sdpMLineIndex: t5.candidate.sdpMLineIndex }]);
                };
                this.Ld ? e3(t4) : this.state < 5 || 7 == this.state ? (this.an.info(Co.u7D + " cached"), this.Hl.push({ candidate: t4.candidate.candidate, sdpMid: t4.candidate.sdpMid, sdpMLineIndex: t4.candidate.sdpMLineIndex })) : (this.an.info(Co.u7D + " send"), e3(t4));
              }
            }, t3.prototype.Qm = function(t4) {
              this.an.info(Co.cDv + " called " + t4.target.signalingState), 7 != this.state && null != this.Xl && "closed" === t4.target.signalingState && (this.ed = 7, this.op(this.Xl.iceConnectionState));
            }, t3.prototype.Ym = function(t4) {
              var i3 = this;
              if (7 != this.state && null != this.Xl) {
                this.an.info(Co.W0Q + " stateChanged " + this.Xl.iceConnectionState);
                var n3 = this.getSpan(L.CK.event, this.Pm, this.playingEvent);
                if (n3 && n3.setAttributes({ ice_state: L.CK.ice_state(this.Xl.iceConnectionState) }), "connected" === this.Xl.iceConnectionState) {
                  if (this.ed = 5, this.isProbe && this.Od && (this.wm || this.isProbeByDG))
                    return this.Kd.sendNetProbeReq(function() {
                    }, function() {
                    }), void this.onCanStopNegaTimer();
                  if (this.onCanStopNegaTimer(), null != this.cv && (clearTimeout(this.cv), this.cv = null), !this.isProbe && this.jd) {
                    var r3 = (/* @__PURE__ */ new Date()).getTime() - this.jd;
                    this.tv.setAttributes({ play_begin_time: nh.play_begin_time(r3) }), this.jd = 0;
                  }
                  if (this.cr.spanEnd({ key: L.F.event, par: this.va }, { webrtc_sid: this.Df }), this.zd) {
                    var s3 = (/* @__PURE__ */ new Date()).getTime() - this.zd;
                    this.an.info(Co.W0Q + " ice time " + s3);
                  }
                  this.isProbe || 6 == this.state || (this.onPlayStateUpdate && this.onPlayStateUpdate(e2.h7.start, this.va, { code: 0, message: "" }, true), this.getRemoteStreamSuc && (this.getRemoteStreamSuc(this.pm.resourceMode == e2.qP.DG ? null : this.playStream), this.getRemoteStreamSuc = null)), this.state = 6, this.resetIceInfos(), this.resetNat64Infos();
                  var o2 = (/* @__PURE__ */ new Date()).getTime() - this.zd;
                  this.onIceConnected && this.onIceConnected(this.sessionId, o2), this.an.info(Co.W0Q + " stateNego:iceConnected"), this.Bd || (this.gn.udpFailNum = 0);
                } else if ("closed" === this.Xl.iceConnectionState)
                  null == n3 || n3.end(), this.ed = 7, this.op(this.Xl.iceConnectionState);
                else if ("failed" === this.Xl.iceConnectionState)
                  null == n3 || n3.end(), this.ed = 8, this.op(this.Xl.iceConnectionState);
                else if ("disconnected" === this.Xl.iceConnectionState) {
                  null == n3 || n3.end(), this.ed = 6, this.an.warn(Co.W0Q + " ice disconnected");
                  var u2 = this.gn.lastChangeIpTime;
                  u2 && Date.now() - u2 < 15e3 ? this.onPlayStateUpdateError(ih.Xn) : this.cv || (this.cv = setTimeout(function() {
                    i3.op("disconnected");
                  }, 15e3));
                }
              }
            }, t3.prototype.Km = function(t4) {
              var i3, n3;
              this.an.info(Co.fjj + " connectionChanged " + (null === (i3 = this.Xl) || void 0 === i3 ? void 0 : i3.connectionState)), "connected" === (null === (n3 = this.Xl) || void 0 === n3 ? void 0 : n3.connectionState) && this.onPeerConnected && this.onPeerConnected(this.sessionId, (/* @__PURE__ */ new Date()).getTime() - this.zd);
            }, t3.prototype.op = function(t4) {
              this.an.info(Co.W0Q + "  state " + this.state + " connectionState " + t4), this.onPlayStateUpdateError(ih.Xn);
            }, t3.prototype.close = function(t4) {
              this.an.info(Co.ruA + " close peer, reason: " + t4), this.state = 7, this.bm = false, this.wm = false, this.closeSession(t4), null != this.Xl && (this.Xl.close(), this.Xl = null), this.nv && (this.nv = null), this.ev && (this.ev = null), this.resetIceInfos(), this.resetNat64Infos(), this.Dd = "", this.Hd = void 0;
              var i3 = this.seiWorker;
              i3 && i3.removeEventListener("message", this.ou.seiMessage), this.onCanStopNegaTimer(), null != this.cv && (clearTimeout(this.cv), this.cv = null), this.hv && (clearTimeout(this.hv), this.hv = null), this.stopVideocTimer(), this.up(), this.Kd.reset(), this.lv = 0, this.np = 0, this.zm.first = true;
            }, t3.prototype.stopPlay = function() {
              this.retryFailGwNodes = [], this.retryFailIpV4Nodes = [], this.retryFailIpV6Nodes = [];
            }, t3.prototype.mv = function(t4, i3, n3) {
              this.an.info(Co.E_I + " received ");
              var e3 = this.getSpan(L.$9.event, this.playingEvent);
              if (e3 && e3.end(), i3 == this.Df) {
                var r3 = { code: ih.Ie.code, message: "server session reset " + n3.reason };
                this.onCanStopNegaTimer(), this.onPlayStateUpdateError(r3);
              } else
                this.an.info(Co.E_I + " cannot find session");
            }, t3.prototype.vv = function(t4, i3, n3) {
              this.an.info(Co.hkn + " " + JSON.stringify(n3)), this.cr.spanSetAttributes({ key: this.playingEvent, par: this.va }, { denied_info: L.er.denied_info(n3.err_info), stop_reason: L.er.stop_reason("DenyStop") });
              var e3 = n3.err_info ? JSON.parse(n3.err_info.toLowerCase()) : {}, r3 = e3.action ? e3.action : null, s3 = 1 * n3.reason, o2 = !([4, 8, 10, 11, 12, 14, 24, 26, 27, 28, 32].includes(s3) || [2, 3, 4, 5, 6].includes(r3));
              1004 === (null == e3 ? void 0 : e3.err) && (this.Wm() && (o2 = true));
              var u2 = Xc({}, o2 && 1004 === (null == e3 ? void 0 : e3.err) ? this.pn.isFlutter ? re.LBO : ih.ke : o2 ? re.YDn : ih.Ie);
              1011 === (null == e3 ? void 0 : e3.err) && (u2 = Xc({}, re._5H)), u2.message += " reason:".concat(s3, " ").concat(r3 ? " action:" + r3 : "", " ").concat((null == e3 ? void 0 : e3.err) ? " err:" + (null == e3 ? void 0 : e3.err) : ""), u2.message += ";".concat(Ya(s3, r3, null == e3 ? void 0 : e3.err)), this.onCanStopNegaTimer();
              var a2 = false;
              if (!this.Bd) {
                if ([8, 10].includes(s3) || [18, 15].includes(s3) && 2 === r3 && [3001, 3002].includes(e3.err)) {
                  this.gn.udpFailNum++;
                  var c2 = this.gn;
                  c2.autoSwitchProtocol && c2.udpFailNum >= c2.maxUdpFailNum && (this.Od = false, this.gn.setIsPeer(false), a2 = true);
                } else
                  this.gn.udpFailNum = 0;
                var h2 = this.gn.isNodeLast(this).lastTryNext, f2 = [3001, 3002, 3003, 3004, 3005, 3006, 3007, 3008].includes(e3.err);
                h2 && f2 && (this.an.info(Co.hkn + " switch tcp by all fail"), this.pn.turnToTcp = true, this.Ld = false, this.Od = false, this.gn.setIsPeer(false));
              }
              this.onPlayStateUpdateError(u2, o2, e3, a2);
            }, t3.prototype.Wm = function() {
              var t4 = Date.now(), i3 = this.pn.streamRetryTime, n3 = this.km;
              if (n3) {
                if (t4 - n3 > 1e3 * i3)
                  return this.km = 0, this.an.info("zc.p.ctest.1 " + " stream not found. retry over time: ".concat(i3, "s")), true;
              } else
                this.km = t4;
              return false;
            }, t3.prototype.ap = function(t4, i3, n3) {
              void 0 === n3 && (n3 = false), this.onRecvStreamStatus && this.onRecvStreamStatus(i3.camera_status, i3.mic_status, n3), this.an.info(Co.dw7 + " call success");
            }, t3.prototype.Zm = function(t4, i3) {
              var n3, e3, r3 = this;
              if (this.an.info(Co.Nw2 + " called " + t4), t4) {
                this.cp(i3), this.xd.isSEIStart && ft() && ("video" === i3.track.kind ? this.hp(i3) : "audio" === i3.track.kind && this.fp(i3)), this.onRecvRemoteStream && this.onRecvRemoteStream(t4), this.remoteStream = t4;
                var s3 = null === (n3 = this.room.streamList) || void 0 === n3 ? void 0 : n3.find(function(t5) {
                  return t5.stream_id === r3.va;
                }), o2 = 3 === (null === (e3 = null == s3 ? void 0 : s3.stream_attr_opts) || void 0 === e3 ? void 0 : e3.stream_codec);
                this.getVideoCodec(o2), this._m && this.ap(this.lp, this.dp, true);
              } else
                this.an.warn(Co.Nw2 + " remote stream is empty");
            }, t3.prototype.cp = function(t4) {
              var i3, n3 = 0, e3 = 0, r3 = this.pm.jitterBufferTarget, s3 = this.pm.playoutDelayHint;
              if ((0, B.Cs)(r3) && r3 > 0 && r3 <= 4e3 ? (e3 = r3, n3 = r3 / 1e3) : (0, B.Cs)(s3) && s3 > 0 && s3 <= 4 && (e3 = 1e3 * n3, n3 = s3), (0, B.dd)(this.pm.enableLowLatency) && this.pm.enableLowLatency && (n3 = 0, e3 = 0), e3 > 0 && t4)
                try {
                  var o2 = null === (i3 = null == t4 ? void 0 : t4.track) || void 0 === i3 ? void 0 : i3.kind;
                  this.an.info(Co.Nw2 + " ".concat(o2, " playoutDelayHint: ").concat(e3, ", origin delay: ").concat(t4.playoutDelayHint, " | ").concat(t4.jitterBufferTarget)), t4.playoutDelayHint = n3, t4.jitterBufferTarget = e3, this.an.info(Co.Nw2 + " ".concat(o2, " playoutDelayHint result: ").concat(t4.playoutDelayHint, " | ").concat(t4.jitterBufferTarget));
                } catch (t5) {
                  this.an.warn(Co.Nw2 + " set playoutDelayHint failed. ".concat(t5));
                }
            }, t3.prototype.hp = function(t4) {
              var i3 = this.createSEIWorker();
              i3 && i3.addEventListener("message", this.ou.seiMessage);
              var n3 = this.xd, e3 = { cmd: "decode", streamID: this.va, emulationPreventionByte: this.pn.seiConfig.emulationPreventionByte, codec: this.Sm, unregisterSeiFilter: n3.unregisterSeiFilter, filterSize: n3.filterSize };
              if (window.RTCRtpScriptTransform)
                t4.transform = new RTCRtpScriptTransform(i3, e3);
              else {
                var r3 = t4.createEncodedStreams(), s3 = r3.readable, o2 = r3.writable, u2 = !i3;
                try {
                  i3 && i3.postMessage(Xc({ readable: s3, writable: o2 }, e3), [s3, o2]);
                } catch (t5) {
                  u2 = true;
                }
                if (u2) {
                  this.an.warn("zc.cvrt The current browser version is too low.");
                  var a2 = new TransformStream({ transform: this.decodeVideoFrame });
                  this.receiverStreams = r3, s3.pipeThrough(a2).pipeTo(o2), this.gn.handleSeiRollBack();
                }
              }
            }, t3.prototype.fp = function(t4) {
              var i3 = { cmd: "decode", streamID: this.va, kind: "audio" }, n3 = this.createSEIWorker();
              if (window.RTCRtpScriptTransform)
                t4.transform = new RTCRtpScriptTransform(n3, i3);
              else {
                var e3 = t4.createEncodedStreams(), r3 = e3.readable, s3 = e3.writable, o2 = !n3;
                try {
                  n3 && n3.postMessage(Xc({ readable: r3, writable: s3 }, i3), [r3, s3]);
                } catch (t5) {
                  o2 = true;
                }
                if (o2) {
                  this.an.warn("zc.cart The current browser version is too low.");
                  var u2 = new TransformStream({ transform: this.decodeAudioFrame });
                  r3.pipeThrough(u2).pipeTo(s3), this.gn.handleSeiRollBack();
                }
              }
            }, t3.prototype.jv = function(t4) {
              var i3 = this;
              if (this.an.info(Co.UY3 + " called"), !(t4 = t4.filter(function(t5) {
                return !!(t5 && t5.candidate.indexOf("relay") > 0);
              })) || t4.length < 1)
                this.an.info(Co.UY3 + " cancelled");
              else {
                var n3 = this.getSpan(L.vB.event, this.Pm);
                n3 && n3.setAttributes({ candidate_info: L.vB.candidate_info(t4) }), 5 !== this.ed && (this.ed = 4), this.an.info(Co.UY3 + " stateNego:sendCandidate"), this.Kd.sendCandidateInfo(t4, function(t5, e3, r3) {
                  i3.an.debug(Co.UY3 + " send success"), n3 && n3.end();
                }, function(t5, e3) {
                  i3.an.error(Co.UY3 + " failed to send: " + t5.toString()), n3 && i3.cr.setError(n3, { code: ih.te.code, message: t5.toString() }), i3.onPlayStateUpdateError(ih.te);
                });
              }
            }, t3.prototype.resetPushCmdSeqMap = function() {
              var t4;
              this.qd = ((t4 = {}).StreamStatusNotifyPush = { seq: -1, time: 0 }, t4.PlayEventPush = { seq: -1, time: 0 }, t4.ClientInfoPush = { seq: -1, time: 0 }, t4.NetQualityInfoPush = { seq: -1, time: 0 }, t4);
            }, t3.prototype.Um = function(t4, i3, n3, e3) {
              return { playError: 1, error: t4, stopRetry: i3, detail: n3, startFromFirst: e3 };
            }, t3.prototype.onPlayQualityUpdate = function(t4, i3) {
            }, t3.prototype.getCameraMicStatus = function(t4) {
              return 0 == t4 ? "OPEN" : "MUTE";
            }, t3.prototype.onReceivedDataChannel = function(t4) {
              switch (new Uint8Array(t4.data, 0, 1)[0]) {
                case Ka.Signal:
                  this.Kd.onDataChannelMessage(t4.data);
                  break;
                case Ka.UserData:
                  this.onUserData(t4.data);
              }
            }, t3.prototype.onUserData = function(t4) {
              var i3, n3, e3 = this, r3 = new Uint8Array(t4, 0, 10), s3 = t4.byteLength - 10, o2 = new Uint8Array(t4, 10, s3), u2 = r3[1], a2 = r3[2] << 8 | r3[3], c2 = r3[4] << 8 | r3[5], h2 = (/* @__PURE__ */ new Date()).getTime();
              if (this.Im.Rm && (this.Im.Tm[0] = a2 == c2 ? a2 : c2, this.Im.Rm = false), this.Im.Cm.push({ sn: a2, sn0: c2, recv_ts: h2, flags: u2, payload_len: s3, payloadArray: o2 }), this.Im.Cm.sort(this.compareShort), a2 == this.Im.Tm[0]) {
                var f2 = this.Im.Cm.filter(function(t5) {
                  return t5.sn0 == c2;
                });
                if (f2.sort(this.compareShort), null != f2.find(function(t5) {
                  return 1 & t5.flags;
                }) && f2.length == this.compareShort(a2, c2) + 1) {
                  for (var l2 = 0, d2 = new ArrayBuffer(65536), v2 = 0; v2 < f2.length; v2++) {
                    new Uint8Array(d2).set(f2[v2].payloadArray, l2), l2 += f2[v2].payload_len;
                  }
                  null === (i3 = this.onDataChannelList) || void 0 === i3 || i3.forEach(function(t5) {
                    t5(d2, l2, e3.va);
                  }), this.Im.Cm = [], this.Im.Rm = true;
                }
                this.Im.Tm[0]++;
              } else
                for (var m2 = function() {
                  var t5 = p2.Im.Cm.filter(function(t6) {
                    return t6.sn0 == e3.Im.Cm[0].sn0;
                  });
                  if (t5.sort(p2.compareShort), null != t5.find(function(t6) {
                    return 1 & t6.flags;
                  }) && t5.length == p2.compareShort(t5[t5.length - 1].sn, t5[0].sn0) + 1) {
                    for (var i4 = 0, r4 = new ArrayBuffer(65536), s4 = 0; s4 < t5.length; s4++) {
                      new Uint8Array(r4).set(t5[s4].payloadArray, i4), i4 += t5[s4].payload_len;
                    }
                    p2.Im.Tm[0] = t5[0].sn0 + t5.length, null === (n3 = p2.onDataChannelList) || void 0 === n3 || n3.forEach(function(t6) {
                      t6(r4, i4, e3.va);
                    }), p2.Im.Cm = [], p2.Im.Rm = true;
                  } else if (h2 - t5[0].ts < 4e3) {
                    var o3 = t5[0].sn0;
                    for (s4 = 0; s4 < t5.length && o3 == t5[s4].sn; s4++)
                      o3++;
                    return p2.Im.Tm[0] = o3, "break";
                  }
                  for (s4 = 0; s4 < t5.length; s4++)
                    p2.Im.Cm.shift();
                }, p2 = this; this.Im.Cm.length > 0; ) {
                  if ("break" === m2())
                    break;
                }
            }, t3.prototype.compareShort = function(t4, i3) {
              var n3 = new Uint16Array(1);
              n3[0] = t4 - i3;
              var e3 = new Int16Array(1);
              return e3[0] = n3[0], e3[0];
            }, t3.prototype.updVidCodec = function() {
              var t4 = this.seiWorker;
              t4 && t4.postMessage({ cmd: "updatePlayer", codec: this.Sm, streamID: this.va });
            }, t3.prototype.getVideoCodec = function(t4) {
              var i3 = this;
              if (void 0 === t4 && (t4 = false), this.Xl && (this.Xl.getStats().then(function(t5) {
                t5.forEach(function(n3) {
                  if ("inbound-rtp" === n3.type && "video" === n3.kind && n3.codecId) {
                    var e3 = t5.get(n3.codecId).mimeType.toLowerCase();
                    e3.indexOf("h264") > -1 ? i3.Sm = "H264" : e3.indexOf("vp8") > -1 ? (i3.Sm = "VP8", i3.xd.isSEIStart && i3.an.error(Co.MDS + " video code VP8 is not support SEI"), i3.updVidCodec()) : e3.indexOf("h265") > -1 && (i3.Sm = "H265", i3.updVidCodec());
                  }
                });
              }), this.Em++, this.Sm || this.Em >= 20))
                return t4 && "" === this.Sm && (this.Sm = "H265", this.updVidCodec()), void this.stopVideocTimer();
              this.stopVideocTimer(), this.vp = setTimeout(function() {
                i3.getVideoCodec(t4);
              }, 100);
            }, t3.prototype.stopVideocTimer = function() {
              this.vp && (clearTimeout(this.vp), this.vp = null);
            }, t3.prototype.isMultiOuter = function() {
              return !(!this.pn.accessClientIp || !this.Dd || this.pn.accessClientIp === this.Dd);
            }, t3.prototype.getSpan = function(t4, i3, n3, r3) {
              if (void 0 === r3 && (r3 = false), this.isProbe)
                return null;
              var s3 = (0, G.fU)(this.cr, e2.t0.H, this.va, t4, i3, n3, r3);
              return s3.setAttribute("is_mini", this.$u), s3;
            }, t3.prototype.setTurnTcp = function() {
              this.Bd = this.pn.turnToTcp, void 0 !== this.pn.turnOverTcpOnly && (this.Bd = this.pn.turnOverTcpOnly);
            }, t3.prototype.dv = function() {
              var t4 = this, i3 = performance.now();
              this.Kd.registerPushCallback("CloseSessionPush", function(n3, e3, r3) {
                if (i3) {
                  var s3 = (performance.now() - i3).toFixed(0);
                  i3 = void 0, t4.an.info(Co.hkn + " ".concat(t4.va, ", cmd: CloseSessionPush, cost_time: ").concat(s3));
                }
                32 === r3.reason && (t4.$u = false, t4.pn.$u = false, t4.Jl = performance.now() - t4.Fl), t4.vv(n3, e3, r3);
              }), this.Kd.registerPushCallback("SessionResetPush", function(i4, n3, e3) {
                t4.mv(i4, n3, e3);
              }), this.Kd.registerPushCallback("StreamStatusNotifyPush", function(i4, n3, e3) {
                t4.ap(i4, e3);
              }), this.Kd.registerPushCallback("PlayEventPush", function(i4, n3, e3) {
                t4.ep(i4, n3, e3);
              }), this.Kd.registerPushCallback("ClientInfoPush", function(i4, n3, e3) {
                t4.gv(i4, n3, e3);
              }), this.Kd.registerPushCallback("NetQualityInfoPush", function(i4, n3, e3) {
                t4.rp(i4, n3, e3);
              }), this.Kd.registerPushCallback("net_quality_grade_push", function(i4, n3, e3) {
                t4.sp(i4, n3, e3);
              }), this.Kd.registerPushCallback("codec_error_notify", function(i4, n3, e3) {
                t4.mp(i4, e3.media_type, e3.error_type);
              }), this.Kd.registerPushCallback("play_net_stat_notify", function(i4, n3, e3) {
                t4.onGwPlayNetState({ audioTXBitrate: e3.audio_tx_bitrate, videoTXBitrate: e3.video_tx_bitrate, videoRedRate: e3.video_red_rate, trafficControlStat: e3.traffic_control_stat, trafficControlBW: e3.traffic_control_bandwidth });
              });
            }, t3.prototype.up = function() {
              this.Kd.unregisterPushCallback("CloseSessionPush"), this.Kd.unregisterPushCallback("SessionResetPush"), this.Kd.unregisterPushCallback("PlayEventPush"), this.Kd.unregisterPushCallback("ClientInfoPush"), this.Kd.unregisterPushCallback("NetQualityInfoPush"), this.Kd.unregisterPushCallback("StreamStatusNotifyPush");
            }, t3.prototype.mp = function(t4, i3, n3) {
              if (0 !== n3) {
                var r3 = i3 ? "video" : "audio", s3 = Co.Kw2 + " ".concat(r3, " codec error: ").concat(n3, ",  codec: ").concat(this.Sm, " ; ");
                if (1 === n3) {
                  if (s3 += "remove ".concat(r3, " track."), !this.isProbe && 6 === this.state) {
                    var o2 = e2.h7.start;
                    this.pm.transcodeOnDecodeFail && 1 === i3 && !this.ym ? (o2 = e2.h7.error, this.ym = re.H6b.code, this.onPlayStateUpdateError(re.H6b, false, void 0, true)) : this.onPlayStateUpdate && this.onPlayStateUpdate(o2, this.va, { code: re.H6b.code, message: "browser dose not support current ".concat(r3, " codec") }, true);
                  }
                } else
                  3 === n3 && ((this.zm.first || t4 > this.zm.seq) && (this.zm.first = false, this.zm.seq = t4), this.onPlayBFrameEvent && this.onPlayBFrameEvent(true), this.onPlayStateUpdate && this.onPlayStateUpdate(e2.h7.start, this.va, { code: re.rV9.code, message: "B-frame is detected in the bitstream" }, true));
                this.an.warn(s3);
              }
            }, t3.prototype.sendBroadcasterStatus = function(t4) {
              this.Kd.sendBroadcasterStatus(t4);
            }, t3.prototype.ActivatePlayAudioStream = function(t4, i3, n3) {
              this.Kd.ActivatePlayAudioStream(t4, i3, n3);
            }, t3.prototype.ActivatePlayVideoStream = function(t4, i3, n3) {
              this.Kd.ActivatePlayVideoStream(t4, i3, n3);
            }, t3.prototype.sendPlayStats = function(t4) {
              return this.Kd.sendPlayStats(t4);
            }, Object.defineProperty(t3.prototype, "gwVersion", { get: function() {
              return this.Kd.gwVersion;
            }, enumerable: false, configurable: true }), t3.prototype.getP2PNetStats = function(t4, i3) {
              this.Kd.getP2PNetStats(t4, i3);
            }, t3.prototype.closeSession = function(t4) {
              var i3, n3;
              null === (i3 = this.Wd) || void 0 === i3 || i3.off("uaConnected", this.ou.onUaSocketConnected), this.resetPushCmdSeqMap(), this.Wl && (this.Kd.sendCloseSession(t4), null === (n3 = this.Wd) || void 0 === n3 || n3.removeSession(this.Df), this.Wl = false);
            }, t3.prototype.dispatchGwNodes = function(t4, i3, n3) {
              var r3 = this, s3 = this.va;
              1 == this.gn.testEnvironment && (s3 = "zegotest-" + this.gn.appid + "-" + this.va);
              var o2 = t4;
              o2 === y.IPv6Prefer && !this.Al && this.Xd && (o2 = y.IPv4Prefer);
              var u2 = this.getTransCodec(s3), a2 = u2.transCodecID, c2 = u2.transCodecSuffix;
              s3 = u2.transCodecStreamID;
              var h2 = this.vm === e2.ey.RTC ? L.KG.event : L.AJ.event, f2 = this.getSpan(h2, h2);
              null == f2 || f2.setAttributes({ ip_mode: t4 }), this.Kd.dispatchGwNodes({ type: 1, streamID: s3, transCodecID: a2, transCodecSuffix: c2, geo: { type: this.gn.geo.type, areaList: this.gn.geo.areaList }, ipV6Prefer: o2 }, function(t5, n4, e3) {
                To(e3), f2 && (0, G.lA)(f2, { gw_nodes: e3.gw_nodes, ip_infos: e3.ips, ip_v6_infos: e3.ipv6s }), i3 && i3(e3);
              }, function(t5, i4) {
                f2 && r3.cr.setError(f2, t5), n3 && n3(t5);
              });
            }, t3.prototype.getTransCodec = function(t4) {
              var i3, n3, e3, r3, s3, o2 = (this.pn.appConfig || {}).media_config, u2 = t4, a2 = false, c2 = void 0 !== (null === (i3 = this.pm) || void 0 === i3 ? void 0 : i3.codecTemplateID) && 1 === (null === (n3 = null == o2 ? void 0 : o2.play_config) || void 0 === n3 ? void 0 : n3.enable_codec_template);
              return this.pm.transcodeOnDecodeFail ? (a2 = !!this.ym) && (r3 = c2 ? this.pm.codecTemplateID : 0) : (a2 = c2) && (r3 = this.pm.codecTemplateID), a2 && (u2 = t4 + (s3 = (0, G.yo)(r3, null === (e3 = o2.play_config) || void 0 === e3 ? void 0 : e3.codec_template_postfix_pattern))), { transCodecStreamID: u2, enableTransCodec: a2, transCodecID: r3, transCodecSuffix: s3 };
            }, t3.prototype.parseRemoteMiniSdp = function(t4) {
              return Wc(this, void 0, void 0, function() {
                var i3, n3, e3;
                return $c(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      if (!(this.$u && (0, B.G0)(t4.mini_sdp) && t4.mini_sdp.byteLength > 0))
                        return [3, 5];
                      n3 = performance.now(), r3.label = 1;
                    case 1:
                      return r3.trys.push([1, 3, , 4]), [4, this.Yd.parseMiniSdp(t4.mini_sdp)];
                    case 2:
                      return i3 = r3.sent(), this.Gl = performance.now() - n3, [3, 4];
                    case 3:
                      throw e3 = r3.sent(), this.$u = false, this.pn.$u = false, this.Gl = performance.now() - n3, this.Jl = performance.now() - this.Fl, this.Ll = 3, this.Um(e3);
                    case 4:
                      return [3, 6];
                    case 5:
                      (0, B.QP)(null == t4 ? void 0 : t4.sdp) && (null == t4 ? void 0 : t4.sdp) && (i3 = t4.sdp), r3.label = 6;
                    case 6:
                      return [2, i3];
                  }
                });
              });
            }, t3.prototype.reportMiniSdpInfos = function(t4) {
              var i3 = {};
              (this.$u || this.Ll) && (i3.mini_error = this.Ll, i3.code_sdp_consume = +this.Ul.toFixed(0), i3.decode_sdp_consume = +this.Gl.toFixed(0), this.Ll = 0, this.Ul = 0, this.Gl = 0), this.cr.spanSetAttributes({ key: t4, par: this.va }, Xc({}, i3));
            }, t3.prototype.resetMiniReportInfos = function() {
              this.Jl = 0, this.Fl = 0;
            }, t3.prototype.setPlayStreamVideoType = function(t4) {
              return Wc(this, void 0, void 0, function() {
                return $c(this, function(i3) {
                  return [2, this.Kd.subscribeVideoStream(t4)];
                });
              });
            }, t3;
          }(), uh = L.zF, ah = L.Nr.event, ch = function() {
            function t3(t4, i3, n3, r3, s3) {
              var o2 = this;
              this.Bv = t4, this.cr = n3, this.gn = r3, this.pn = s3, this.pp = 0, this.cdnPlayTime = 0, this.state = 7, this.sendTransCodecCmd = function(t5, i4) {
                if (void 0 === t5 && (t5 = 0), i4 = i4 || o2.gp) {
                  var n4 = i4.streamID, r4 = i4.playAddr, s4 = i4.codecTemplateID, u2 = i4.codecSuffix;
                  o2.gp = i4;
                  var a2 = o2.Bv.room.streamHandler.notifySdkNeedStream(n4, { playAddr: r4, transCodecID: s4, transCodecSuffix: u2, retry: t5 }, function(t6, i5) {
                    o2.an.info("zsc.pc.1 notify trans codec success"), o2.bp = Date.now();
                  }, function(r5, s5) {
                    if (o2.an.error("zsc.pc.1 notify trans codec err:" + r5.code + " " + r5.message), 2 === (null == s5 ? void 0 : s5.action))
                      return o2._p || (o2._p = setTimeout(function() {
                        o2._p = void 0, o2.sendTransCodecCmd(t5 + 1, i4);
                      }, s5.action_delay)), void o2.gn.onPlayStateUpdate(e2.h7.retry, n4, { code: r5.code, message: r5.message }, { isCDN: true });
                    o2.gn.onPlayStateUpdate(e2.h7.error, n4, re.T_8, { isCDN: true });
                  });
                  o2.wp = a2;
                }
              }, this.an = Uo(i3, this.streamID);
            }
            return Object.defineProperty(t3.prototype, "zegoExpressPlayer", { get: function() {
              return this.Sp(this.cdnPlayer) ? this.cdnPlayer : void 0;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "zegoCdnPlayer", { get: function() {
              return this.Sp(this.cdnPlayer) ? void 0 : this.cdnPlayer;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "streamID", { get: function() {
              return this.Bv.streamId;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "Ep", { get: function() {
              return this.Bv.playMode == e2.ey.CDN;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "dm", { get: function() {
              return this.Bv.dm;
            }, enumerable: false, configurable: true }), t3.prototype.playCDN = function(t4, i3) {
              var r3, s3, o2, u2, a2, c2, h2 = this;
              this.setCdnState(0);
              var f2 = this.streamID, l2 = this.Bv, d2 = l2.playOption;
              l2.$h && (null === (r3 = l2.$h) || void 0 === r3 || r3.end()), l2.$h = (0, G.fU)(this.cr, n2.t0.H, f2, l2.playStartEvent, ah, void 0, true);
              var v2 = function(t5, n3) {
                var e3;
                l2.$h && ((0, G.lA)(l2.$h, { url: uh.url(h2.cdnUrl), ip: uh.ip(l2.ip), source_type: uh.source_type(l2.playMode), net_protocol: uh.net_protocol("tcp"), tryidx: uh.tryidx(l2.tryidx) }), l2.$h = void 0), null === (e3 = h2.dm) || void 0 === e3 || e3.setAttributes({ stop_reason: L.V0.stop_reason(t5) }), i3 && i3(n3);
              }, m2 = this.cdnPlayer, p2 = this.Sp(m2);
              if (!p2 && !d2.CDNVideo)
                return this.an.error("zsc.pc.1 cdn video no found"), v2("cdn video no found", re.ann), false;
              var g2 = null === (s3 = this.gn.getPlayRoom(f2)) || void 0 === s3 ? void 0 : s3.streamList.find(function(t5) {
                return t5.stream_id == f2;
              }), b2 = l2.playOption.resourceMode;
              l2.tryidx++, null === (o2 = this.dm) || void 0 === o2 || o2.setAttributes({ tryidx: L.TW.tryidx(l2.tryidx), biz_product: L.TW.biz_product(b2 == e2.qP.DG ? 1 : 0) });
              var _2 = (this.pn.appConfig || {}).media_config, y2 = 1 === (null === (u2 = null == _2 ? void 0 : _2.play_config) || void 0 === u2 ? void 0 : u2.enable_codec_template) && void 0 !== (null == d2 ? void 0 : d2.codecTemplateID) && !d2.transcodeOnDecodeFail, w2 = f2, S2 = "";
              y2 && (w2 += S2 = (0, G.yo)(d2.codecTemplateID, null === (a2 = _2.play_config) || void 0 === a2 ? void 0 : a2.codec_template_postfix_pattern));
              var E2 = g2 || {}, k2 = E2.urls_flv, O2 = E2.urls_m3u8;
              if (!g2 || !k2 || !O2) {
                if (!this.pn.appConfig)
                  return this.an.error("zsc.pss.1 stream info no found"), v2("stream info no found", re.cGQ), false;
                var I2 = this.kp(f2), R2 = I2.flv, T2 = I2.hls;
                k2 = R2 ? [R2] : [], O2 = T2 ? [T2] : [];
              }
              if (!l2 || !m2)
                return v2("no cdn player", re.ann), false;
              l2.useResourceTypes.push(e2.ey.CDN), l2.useResourceTypes = Array.from(new Set(l2.useResourceTypes));
              var C2 = k2, A2 = O2, z2 = this.selectCDNSource(m2, C2, A2);
              if (!z2 && !this.cdnUrl)
                return this.an.error("zsc.pc.1 can not find cdn urls"), v2("cdn protocol not support.", re.cGQ), false;
              this.cdnUrl = z2 || this.cdnUrl;
              var D2 = this.cdnUrl;
              if (y2) {
                D2 = null == D2 ? void 0 : D2.replace(f2, w2);
                var N2 = ((null === (c2 = this.cdnUrl) || void 0 === c2 ? void 0 : c2.endsWith(".m3u8")) ? A2 : C2)[0].split(f2)[0];
                this.sendTransCodecCmd(0, { streamID: f2, playAddr: N2, codecTemplateID: d2.codecTemplateID, codecSuffix: S2 });
              }
              return !!this.Ep && (l2.$h && ((0, G.lA)(l2.$h, { url: uh.url(this.cdnUrl), ip: uh.ip(l2.ip), source_type: uh.source_type(l2.playMode), net_protocol: uh.net_protocol("tcp"), tryidx: uh.tryidx(l2.tryidx) }), l2.$h = void 0), this.gn.onPlayStateUpdate(e2.h7.start, f2, { code: 0, message: "success" }, { isCDN: true }), !p2 && d2.CDNVideo ? (m2.play(D2, d2.CDNVideo), d2.CDNVideo.srcObject = null, this.bindZegoCDNPlayerEvents(m2, f2, d2)) : (m2.src = D2, m2.play(), this.bindZegoExpressPlayerEvents(m2, f2, d2)), t4 && t4(), true);
            }, t3.prototype.retrySendTransCodecCmd = function() {
              this.bp && Date.now() - this.bp > 9e4 && (this.bp = void 0, this.sendTransCodecCmd(0));
            }, t3.prototype._clearTransCodecRetry = function() {
              var t4, i3;
              null === (t4 = this.wp) || void 0 === t4 || t4.invalid(), null === (i3 = this.wp) || void 0 === i3 || i3.stopMaxTime();
            }, t3.prototype.stopCDNPlayer = function() {
              this._p && (clearTimeout(this._p), this._p = void 0), this._clearTransCodecRetry(), this.bp = void 0, this.cdnPlayer && (this.an.info("zc.cph.stcp stop"), this.cdnPlayer.stop(), this.updateCDNValidTime(), this.setCdnState(7));
            }, t3.prototype.Sp = function(t4) {
              return !(!t4 || !t4._extApi);
            }, t3.prototype.bindZegoExpressPlayerEvents = function(t4, i3, n3) {
              var e3 = this, r3 = this.Bv, s3 = false;
              t4._extApi.off("canplay"), t4._extApi.on("canplay", function() {
                s3 || (e3.an.info("zsc.pc.1 start playing cdn source"), s3 = true, e3.onCDNPlayerCanplay(i3, n3));
              });
              var o2 = null, u2 = 0;
              t4._extApi.off("error"), t4._extApi.on("error", function(i4) {
                var n4, s4, a2 = i4.code, c2 = i4.msg;
                e3.an.error("zsc.pc.1 error occur ".concat(a2, " ").concat(c2)), [100003, 100004, 100005].includes(a2) ? (o2 && (clearTimeout(o2), o2 = null), u2 > 3 ? (e3.an.error("zsc.pc.1 retryCount ".concat(u2, " greater than ").concat(3, ". end play cdn source")), e3.updateCDNValidTime(), null === (n4 = e3.dm) || void 0 === n4 || n4.setAttributes({ stop_reason: L.V0.stop_reason(c2) })) : o2 = setTimeout(function() {
                  u2++, t4.resume(), r3.CDNBrokenCnt++;
                }, 3e3)) : 100006 !== a2 && (null === (s4 = e3.dm) || void 0 === s4 || s4.setAttributes({ stop_reason: L.V0.stop_reason(c2) }), e3.an.error("zsc.pc.1 stop play cdn source."));
              }), t4._extApi.off("loaded"), t4._extApi.on("loaded", function() {
                e3.Ep && 6 == r3.state ? r3.CDNBrokenCnt++ : (e3.an.info("zsc.pc.1 ended play cdn"), e3.updateCDNValidTime());
              }), t4._extApi.off("netQualityScoreUpdate");
            }, t3.prototype.kp = function(t4) {
              var i3, n3, r3, s3 = ((i3 = {})[e2.qP.RTC] = 1, i3[e2.qP.CDN] = 0, i3[e2.qP.L3] = 2, i3), o2 = this.pn.appConfig.media_config.play_config.resource_info;
              if (o2.length) {
                var u2 = o2.find(function(t5) {
                  return t5.resource_type == s3[e2.qP.CDN];
                });
                if (u2)
                  for (var a2 = 0; a2 < u2.service_info.length; a2++) {
                    var c2 = u2.service_info[a2], h2 = c2.protocol, f2 = c2.url_template.replace("{STREAM_NAME}", t4);
                    switch (h2) {
                      case e2.Hb.FLV:
                        n3 = f2;
                        break;
                      case e2.Hb.HLS:
                        r3 = f2;
                    }
                  }
              }
              return { flv: n3, hls: r3 };
            }, t3.prototype.onCDNPlayerCanplay = function(t4, i3) {
              var r3 = this.Bv;
              if (6 != r3.state && (this.setCdnState(6), 0 == r3.firstFrameTime)) {
                r3.firstFrameTime = Date.now() - r3.beginTime;
                var s3 = this.cr.createSpan(n2.t0.H, { key: L.Nr.event, par: t4 }, { key: "" }, L.x6.event);
                s3.setAttributes({ fft_consumed: L.x6.fft_consumed(r3.firstFrameTime), biz_product: L.x6.biz_product(i3.resourceMode == e2.qP.DG ? 1 : 0) }), s3.end();
              }
              0 == this.cdnPlayTime && this.Ep && (this.cdnPlayTime = Date.now());
            }, t3.prototype.bindZegoCDNPlayerEvents = function(t4, i3, e3) {
              var r3 = this, s3 = this.Bv;
              t4.onComplete = function() {
                if (r3.Ep && 6 == s3.state)
                  t4.retry(), s3.CDNBrokenCnt++;
                else
                  var i4 = s3.initPoster, n3 = s3.initVideoStyle, e4 = s3.playOption.CDNVideo, o2 = setTimeout(function() {
                    clearTimeout(o2), e4 && e4.setAttribute("style", n3), e4 && e4.setAttribute("poster", i4);
                  }, 1e3);
                r3.updateCDNValidTime();
              }, t4.onError = function(i4) {
                var e4;
                r3.pn.networkState == n2.D2.offline && (t4.canRetry = false), null === (e4 = r3.dm) || void 0 === e4 || e4.setAttributes({ stop_reason: L.V0.stop_reason(i4) }), r3.updateCDNValidTime();
              }, t4.onCanplay = function() {
                r3.onCDNPlayerCanplay(i3, e3);
              };
            }, t3.prototype.selectCDNSource = function(t4, i3, n3) {
              var e3 = this.Sp(t4), r3 = "", s3 = this.dm;
              if (e3)
                r3 = i3[0], null == s3 || s3.setAttributes({ protocol: L.V0.protocol("flv") });
              else if (t4.isSupportFLV() && (null == i3 ? void 0 : i3.length) > 0)
                r3 = i3[0], null == s3 || s3.setAttributes({ protocol: L.V0.protocol("flv") });
              else if (t4.isSupportHLS() && (null == n3 ? void 0 : n3.length) > 0)
                r3 = n3[0], null == s3 || s3.setAttributes({ protocol: L.V0.protocol("hls") });
              else if (!this.cdnUrl)
                return null;
              return r3 ? r3 = r3.replace("http://", "https://") : null;
            }, t3.prototype.updateCDNValidTime = function() {
              this.cdnPlayTime && (this.pp += Date.now() - this.cdnPlayTime, this.cdnPlayTime = 0);
            }, t3.prototype.setCdnState = function(t4) {
              this.state = t4;
            }, t3.prototype.renderMediaStreamByCdnPlayer = function(t4) {
              var i3 = this, n3 = "zc.cph.rbcp", e3 = this.Bv;
              this.an.info(n3 + " switch media webrtc success");
              var r3 = e3.initPoster, s3 = e3.initVideoStyle, o2 = e3.playOption.CDNPlayer, u2 = e3.playOption.CDNVideo, a2 = !!e3.zegoExpressPlayer;
              if ("safari" === this.pn.browser && !a2 && u2 && e3._CDNPlayerClone) {
                var c2 = u2.parentElement;
                if (c2) {
                  var h2 = G.VJ.createElement("style"), f2 = u2.cloneNode(true), l2 = Date.now().toString(16);
                  h2.innerText = ".zego_cdn_video_".concat(l2, " .zego_clone_video_").concat(l2, "{width:").concat(u2.offsetWidth, "px;height:").concat(u2.offsetHeight, "px;}") + ".zego_cdn_video_".concat(l2, " .hide_").concat(l2, "{display:none!important;width:0;height:0}"), G.VJ.head.append(h2), f2.classList.add("zego_clone_video_".concat(l2)), f2.id = e3.streamId + "_clone", f2.src = "", f2.srcObject = t4, f2.classList.add("hide_".concat(l2)), u2.before(f2), c2.classList.add("zego_cdn_video_".concat(l2));
                  var d2 = setTimeout(function() {
                    clearTimeout(d2), u2.classList.add("hide_".concat(l2)), f2.classList.remove("hide_".concat(l2));
                  }, 2e3), v2 = setTimeout(function() {
                    clearTimeout(v2), e3.playOption.CDNVideo = f2, i3.stopCDNPlayer(), c2.classList.remove("zego_cdn_video_".concat(l2)), u2.classList.remove("zego_cdn_video_".concat(l2)), f2.classList.remove("zego_clone_video_".concat(l2)), f2.id = u2.id, h2.remove(), u2.remove();
                  }, 4e3);
                }
              } else if (this.stopCDNPlayer(), a2 && t4)
                this.an.info(n3 + " express player switch to play webrtc"), o2._extApi.srcObject = t4, o2.play();
              else {
                var m2 = setTimeout(function() {
                  clearTimeout(m2), u2 && u2.setAttribute("style", s3), u2 && u2.setAttribute("poster", r3);
                }, 1e3);
                t4 && u2 && (u2.srcObject = t4);
              }
            }, t3;
          }(), hh = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), fh = function() {
            return fh = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, fh.apply(this, arguments);
          }, lh = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, dh = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, vh = L.Nr, mh = L.Nr.event, ph = L.Nr.error, gh = L.oW, bh = L.zF, _h = L.er.event, yh = L.TW.event, wh = L.V0.event;
          !function(t3) {
            t3.beforePublish = "beforePublish", t3.publishing = "publishing", t3.afterPublish = "afterPublish";
          }(sh || (sh = {}));
          var Sh = function(t3) {
            function i3(i4, n3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2) {
              var m2, p2 = this;
              if ((p2 = t3.call(this, n3, i4) || this).an = n3, p2.gn = a2, p2.ac = c2, p2.pn = h2, p2.room = f2, p2.streamSid = d2, p2.isDataChannel = v2, p2.Op = void 0, p2.Ip = void 0, p2.Rp = void 0, p2.jl = { state: "NO_PLAY", code: 0 }, p2.probedList = [], p2.probeTime = 0, p2.probeTimer = null, p2.probeNodeList = [], p2.hasSucceed = false, p2.Tp = 0, p2.Ap = 0, p2.pulledTimeStamp = 0, p2.firstPulledTimeStamp = 0, p2.zp = 0, p2.Dp = 0, p2.CDNBrokenCnt = 0, p2.serverUrl = cf, p2.isCenterNode = true, p2._state = 7, p2.lastState = 7, p2.broadcasterStatus = e2.ku.stop, p2.isExternal = false, p2.reportPlayStateTime = 0, p2.streamInRoom = true, p2.playStartTime = 0, p2.Np = 0, p2.Rd = 0, p2.Td = 0, p2.poorQualityRetryCnt = 0, p2.Cd = [], p2.continuousFailCnt = 0, p2.Pp = 0, p2.remoteStream = null, p2.playStream = null, p2.rtcViewer = null, p2.pm = {}, p2.Mp = { video: true, audio: true, expireTime: 0 }, p2.isServerMuteVideo = false, p2.isServerMuteAudio = false, p2.jp = null, p2.av = null, p2.rd = 25e3, p2.cameraStatus = 0, p2.micStatus = 0, p2.soundLevel = 0, p2.mic = null, p2.beginTime = 0, p2.firstFrameTime = 0, p2.playMode = e2.ey.RTC, p2.Od = true, p2.isProbe = false, p2.Id = 0, p2.initPoster = "", p2.initVideoStyle = "", p2.firstPlay = true, p2.isProbeByDG = false, p2.useResourceTypes = [], p2.tryidx = 0, p2._CDNPlayerClone = null, p2.signalTime = 0, p2.stopReason = "", p2.ql = false, p2.probeQuality = 0, p2.ip = "", p2.port = 0, p2.audioMuteState = "0", p2.videoMuteState = "0", p2.qp = null, p2.Lp = 0, p2.Bp = "", p2.Up = 0, p2.Gp = 0, p2.Jp = sh.beforePublish, p2.soundMeterWorklet = null, p2.Fp = false, p2.Hp = {}, p2.isProbe || (p2.Vp = (0, G.fU)(p2.cr, e2.t0.I, i4, mh, Zi.event, void 0, true)), p2.id = gt("".concat(a2.appid, "_").concat(h2.idName, "_").concat(i4, "_").concat(Date.now(), "_").concat((0, e2.Mo)())), p2.beginTime = Date.now(), p2.va = i4, r3 && p2.setSignal(r3), p2.dataReport = s3, p2.qualityHandler = new Uc(o2, u2, p2, p2.an, p2.dataReport, p2.pn), p2.qualityHandler.onRecvMediaData = function() {
                var t4;
                p2.isProbe || (null === (t4 = p2.Qp) || void 0 === t4 ? void 0 : t4.streamNotFoundTime) && (p2.Qp.streamNotFoundTime = 0, p2.info("zc.p.ormd.1 reset streamNotFoundTime"));
              }, p2.qualityHandler.onFindDecodeException = function(t4) {
                var i5, n4;
                if (!p2.isProbe) {
                  var e3 = null === (i5 = p2.room.streamList) || void 0 === i5 ? void 0 : i5.find(function(t5) {
                    return t5.stream_id === p2.va;
                  }), r4 = "zc.p.ofde.1 may fail to decode. v: ".concat(t4, " , ").concat(null === (n4 = null == e3 ? void 0 : e3.stream_attr_opts) || void 0 === n4 ? void 0 : n4.stream_codec);
                  if (p2.playOption.transcodeOnDecodeFail && p2.Qp)
                    1 !== p2.au("transcode_on_zero_fps", true) || p2.Qp.needTranscode || (r4 += " ; need transcode", p2.Qp.needTranscode = re.SCx.code, p2.playStateUpdateError(re.SCx, false, void 0, true));
                  p2.warn(r4);
                }
              }, p2.qualityHandler.onPlayingError = function(t4) {
                p2.playStateUpdateError(t4);
              }, p2.playMediaStatus = { video: !p2.gn.defaultVideoMuted, audio: !p2.gn.defaultAudioMuted }, p2.info("zc.p.1 set playMediaStatus ".concat(JSON.stringify(p2.playMediaStatus))), p2.Mm = p2.au("resource_mode"), p2.retryStreamHandler = new Zc(p2.streamId, p2.an, p2.pn, p2.gn, false), l2) {
                if (p2.pm = l2, l2.CDNPlayer)
                  p2.getCDNHandler().cdnPlayer = l2.CDNPlayer;
                p2.initResourceMode(l2.resourceMode);
              }
              p2.initStreamReport();
              var g2 = fh(fh({}, l2), { CDNVideo: void 0, CDNPlayer: void 0 });
              return null === (m2 = p2.Vp) || void 0 === m2 || m2.setAttributes({ stream_id: vh.stream_id(i4), stream_sid: vh.stream_sid(d2), play_option: vh.play_option(g2), video_codec_id: vh.video_codec_id(null == l2 ? void 0 : l2.videoCodec), use_na: vh.use_na(1), biz_product: (null == l2 ? void 0 : l2.resourceMode) == e2.qP.DG ? 1 : 0, resource_mode: vh.resource_mode(p2.resourceMode), src: vh.src(p2.playMode), room_id: vh.room_id(null == f2 ? void 0 : f2.roomID), room_sid_string: vh.room_sid_string(null == f2 ? void 0 : f2.roomSessionID), is_multi: vh.is_multi(p2.pn.isMultiRoom) }), p2;
            }
            return hh(i3, t3), Object.defineProperty(i3.prototype, "zegoPeer", { get: function() {
              return this.Qp;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "Qp", { get: function() {
              var t4 = void 0;
              switch (this.playMode) {
                case e2.ey.RTC:
                  t4 = this.Op;
                  break;
                case e2.ey.L3:
                  t4 = this.Ip;
              }
              return t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "peerConnection", { get: function() {
              var t4;
              return null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.peerConnection;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "signal", { get: function() {
              var t4;
              return null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.signal;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "curCBState", { get: function() {
              return this.jl;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "pp", { get: function() {
              var t4;
              return (null === (t4 = this.Rp) || void 0 === t4 ? void 0 : t4.pp) || 0;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "streamConnectIP", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.streamConnectIP) || "";
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "zegoExpressPlayer", { get: function() {
              var t4;
              return null === (t4 = this.Rp) || void 0 === t4 ? void 0 : t4.zegoExpressPlayer;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "zegoCdnPlayer", { get: function() {
              var t4;
              return null === (t4 = this.Rp) || void 0 === t4 ? void 0 : t4.zegoCdnPlayer;
            }, enumerable: false, configurable: true }), i3.prototype.updateCBState = function(t4) {
              var i4 = this, n3 = Object.keys(t4).some(function(n4) {
                return t4[n4] !== i4.jl[n4];
              });
              return n3 && (this.jl = t4), n3;
            }, Object.defineProperty(i3.prototype, "state", { get: function() {
              var t4;
              return this.playMode == e2.ey.CDN ? this.Rp ? this.Rp.state : 7 : void 0 === (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4._state) ? 7 : this.Qp._state;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "streamId", { get: function() {
              return this.va;
            }, set: function(t4) {
              this.va = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "sessionId", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.sessionId) || 0;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "playOption", { get: function() {
              return this.pm;
            }, set: function(t4) {
              this.pm = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "stateNego", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.stateNego) || 0;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "resourceMode", { get: function() {
              return this.Mm;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "gwNode", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.gwNode) || "";
            }, set: function(t4) {
              this.Qp && (this.Qp.gwNode = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "gwNodeList", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.gwNodeList) || [];
            }, set: function(t4) {
              this.Qp && (this.Qp.gwNodeList = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "gwNodesTTL", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.gwNodesTTL) || 0;
            }, set: function(t4) {
              this.Qp && (this.Qp.gwNodesTTL = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isNodesEmpty", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.isNodesEmpty) || false;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "ipNodeType", { get: function() {
              var t4;
              return this.Qp ? null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.ipNodeType : C.ZV4Priority;
            }, set: function(t4) {
              this.Qp && (this.Qp.ipNodeType = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "ipV6Prefer", { get: function() {
              var t4;
              return this.Qp ? null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.ipV6Prefer : 1;
            }, set: function(t4) {
              this.Qp && (this.Qp.ipV6Prefer = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isPeer", { get: function() {
              return this.Od;
            }, set: function(t4) {
              this.Od = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "peerID", { get: function() {
              return this.Id;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "retryFailGwNodes", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.retryFailGwNodes) || [];
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "retryFailIpV4Nodes", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.retryFailIpV4Nodes) || [];
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "retryFailIpV6Nodes", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.retryFailIpV6Nodes) || [];
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "ipV4NodeList", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.ipV4NodeList) || [];
            }, set: function(t4) {
              this.Qp && (this.Qp.ipV4NodeList = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "ipV6NodeList", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.ipV6NodeList) || [];
            }, set: function(t4) {
              this.Qp && (this.Qp.ipV6NodeList = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "ipNode", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.ipNode) || null;
            }, set: function(t4) {
              this.Qp && t4 && (this.Qp.ipNode = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isStreaming", { get: function() {
              return 6 === this.state;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "probeState", { get: function() {
              return this.qualityHandler.probeState;
            }, set: function(t4) {
              this.qualityHandler.probeState = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "qualityGrade", { get: function() {
              var t4 = this.qualityHandler.Wh;
              return Math.max(t4.video.videoQuality, t4.audio.audioQuality);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "netQuality", { get: function() {
              return this.qualityHandler.hf;
            }, set: function(t4) {
              this.qualityHandler.hf = t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "lastPlayStats", { get: function() {
              return this.qualityHandler.Uv;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isStateRetry", { get: function() {
              return [0, 7, 8].includes(this.stateNego);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "iceStateDisConnect", { get: function() {
              return [7, 6, 8].includes(this.stateNego);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isLastConnected", { get: function() {
              var t4;
              return 6 === (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.lastState);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "playStat", { get: function() {
              return this.qualityHandler.playStat;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "webrtcProtocol", { get: function() {
              return this.qualityHandler.df;
            }, enumerable: false, configurable: true }), i3.prototype.changePlayMode = function(t4) {
              var i4, n3, r3 = this, s3 = "zc.ply.cpm", o2 = this.playMode;
              if (t4 !== o2) {
                this.info(s3 + " change mode " + t4);
                var u2 = (0, G.fU)(this.cr, e2.t0.H, this.streamId, L.AW.event, L.Nr.event);
                (0, G.lA)(u2, { src: L.AW.src(t4), last_src: L.AW.last_src(o2) });
                var a2 = false;
                t4 !== e2.ey.CDN && o2 !== e2.ey.CDN || (a2 = true), this.resetPlay(a2, 0), this.gn.removeStreamFromSignal(false, this.streamId, 15e3);
                var c2 = this.retryStreamHandler;
                c2.endRtcPlaySpan(this.streamId, void 0, this), this.playMode = t4;
                var h2 = true;
                this.playMode === e2.ey.L3 ? (this.serverUrl = hf, h2 = false) : (this.serverUrl = cf, h2 = true), this.useResourceTypes.push(this.playMode), this.useResourceTypes = Array.from(new Set(this.useResourceTypes)), this.playMode === e2.ey.CDN ? this.playCDN() : (c2.startMaxTime(), c2.playStartSpan(this.streamId, this, true), this.gn.connectWebRTCCenterServer(false, h2, null === (i4 = this.room) || void 0 === i4 ? void 0 : i4.roomID, null === (n3 = this.room) || void 0 === n3 ? void 0 : n3.token, function(t5) {
                  r3.gn.rePlayStream(r3.streamId, t5);
                }));
              } else
                this.info(s3 + " no change.");
            }, Object.defineProperty(i3.prototype, "ipStack", { get: function() {
              return Fs(this.ip) ? R.IPv6 : R.IPv4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "dataChannel", { get: function() {
              var t4;
              return null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.dataChannel;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "onDataChannelList", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.onDataChannelList) || [];
            }, set: function(t4) {
              this.Qp && (this.Qp.onDataChannelList = t4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "netProtocol", { get: function() {
              var t4, i4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.turnToTcp) ? "tcp" : (null === (i4 = this.Qp) || void 0 === i4 ? void 0 : i4.autoTcp) ? this.webrtcProtocol : "udp";
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isMiniSdp", { get: function() {
              var t4;
              return (null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.$u) || false;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "seiWorker", { get: function() {
              return this.gn.seiWorker;
            }, enumerable: false, configurable: true }), i3.prototype.au = function(t4, i4) {
              return void 0 === i4 && (i4 = false), this.pn.settingConfig.getSetting(t4, i4);
            }, Object.defineProperty(i3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "logger", { get: function() {
              return this.an;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "completePlaySpan", { get: function() {
              return this.Vp;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "playingEvent", { get: function() {
              var t4 = _h;
              switch (this.playMode) {
                case e2.ey.L3:
                  t4 = yh;
                  break;
                case e2.ey.RTC:
                  t4 = _h;
                  break;
                case e2.ey.CDN:
                  t4 = wh;
              }
              return t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "playStartEvent", { get: function() {
              return this.hasSucceed ? L.aT.event : bh.event;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isStreamNotFound", { get: function() {
              var t4;
              return !!(null === (t4 = this.Qp) || void 0 === t4 ? void 0 : t4.streamNotFoundTime);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "allowAutoSwitchResource", { get: function() {
              return [e2.qP.DG, e2.qP.CUSTOM].includes(this.Mm);
            }, enumerable: false, configurable: true }), i3.prototype.initResourceMode = function(t4) {
              if ((0, B.Cs)(t4) && [0, 1, 2, 3, 5].includes(t4)) {
                var i4 = co(t4);
                if (this.Mm = t4, t4 === e2.qP.DG)
                  i4 = e2.ey.L3;
                else if (t4 === e2.qP.CUSTOM) {
                  var n3 = this.playOption.customResourceConfig || {}, r3 = n3.beforePublish, s3 = void 0;
                  this.gn.publishersLength > 0 ? (s3 = n3.publishing, this.Jp = sh.publishing) : (s3 = r3, this.Jp = sh.beforePublish), i4 = s3 === e2.qP.L3 ? e2.ey.L3 : s3 === e2.qP.CDN ? e2.ey.CDN : e2.ey.RTC;
                }
                this.useResourceTypes.push(i4), this.playMode = i4, i4 === e2.ey.L3 && (this.serverUrl = hf), this.info("zc.ply.cpm init mode " + i4);
              }
              return this.playMode;
            }, i3.prototype.changePublishOccasion = function(t4) {
              var i4 = this.Jp, n3 = this.pm.resourceMode === e2.qP.CUSTOM, r3 = this.pm.customResourceConfig || {}, s3 = r3.afterPublish, o2 = r3.publishing;
              if (t4 && i4 !== sh.publishing) {
                if (this.Jp = sh.publishing, n3 && (0, B.Cs)(o2))
                  return this.changePlayMode(co(o2));
              } else if (!t4 && i4 !== sh.afterPublish && i4 === sh.publishing && (this.Jp = sh.afterPublish, n3 && (0, B.Cs)(s3)))
                return this.changePlayMode(co(s3));
            }, i3.prototype.setSignal = function(t4) {
              var i4 = this.Qp;
              i4 ? i4.setSignal(t4) : i4 = this.Yp(this.playMode, t4), this.info(Co.QU$ + " set signal " + t4.server + " peer:" + (null == i4 ? void 0 : i4.playMode));
            }, i3.prototype.netProbeToReDispatch = function(t4, i4) {
              void 0 === t4 && (t4 = function() {
              }), void 0 === i4 && (i4 = function() {
              }), this.ql = true;
              var n3 = null == this ? void 0 : this.retryStreamHandler;
              n3 && n3.dispatchGwNodesBypass(this, t4, i4);
            }, i3.prototype.initStreamReport = function() {
              this.tv = this.cr.createSpan(e2.t0.I, { key: mh, par: this.va }, { key: gh.event, par: this.va }, gh.event, true), this.playStartTime = (/* @__PURE__ */ new Date()).getTime();
            }, i3.prototype.startPlay = function(t4, i4) {
              var n3, r3, s3, o2, u2, a2, c2, h2 = this;
              this.info(Co.QU$ + " called ");
              var f2 = this.pm || {};
              if (t4) {
                var l2 = this.Qp;
                if (l2) {
                  this.getRemoteStreamSuc = i4, this.playMediaStatus = { video: this.playMediaStatus.video && (void 0 === this.pm.video || !!this.pm.video), audio: this.playMediaStatus.audio && (void 0 === this.pm.audio || !!this.pm.audio) }, f2 && f2.videoCodec && (this.pm.videoCodec = f2.videoCodec), null === (n3 = this.Vp) || void 0 === n3 || n3.setAttributes({ video_layer: vh.video_layer(2 === this.pm.streamType ? -1 : this.pm.streamType || 1) });
                  var d2 = this.au("play_video_codec", true);
                  d2 && (this.info(Co.QU$ + " setting play_video_codec " + d2), this.pm.videoCodec = d2);
                  var v2 = (null === (r3 = this.pm) || void 0 === r3 ? void 0 : r3.resourceMode) == e2.qP.DG ? 1 : 0;
                  null === (s3 = this.$h) || void 0 === s3 || s3.setAttributes({ is_peer: bh.is_peer(this.Od), is_mini: bh.is_mini(this.isMiniSdp) });
                  var m2 = {};
                  (null === (o2 = this.Qp) || void 0 === o2 ? void 0 : o2.Fl) || (m2.is_mini = this.isMiniSdp), null === (u2 = this.Vp) || void 0 === u2 || u2.setAttributes(fh({ audio_activate: vh.audio_activate(1 == this.pm.audio || 0 != this.pm.audio), video_activate: vh.video_activate(1 == this.pm.video || 0 != this.pm.video), biz_product: vh.biz_product(v2), is_peer: vh.is_peer(this.Od) }, m2)), this.tv.setAttributes({ room_id: gh.room_id(null === (a2 = null == this ? void 0 : this.room) || void 0 === a2 ? void 0 : a2.roomID), room_sid_string: gh.room_sid_string(null === (c2 = null == this ? void 0 : this.room) || void 0 === c2 ? void 0 : c2.roomSessionID) }), l2.connectGW().then(function(t5) {
                    i4 && i4(t5);
                  }), null != this.av && (clearTimeout(this.av), this.av = null), this.av = setTimeout(function() {
                    h2.error(Co.QU$ + " waiting timeout"), h2.playStateUpdateError(ph.Te);
                  }, this.rd), this.isProbe && this.qualityHandler.startProbeTimeout();
                } else
                  this.error(Co.QU$ + " no peer");
              } else
                this.warn(Co.QU$ + " streamId is null");
            }, i3.prototype.Yp = function(t4, i4) {
              var n3 = this;
              if ([e2.ey.L3, e2.ey.RTC].includes(t4)) {
                var r3 = t4 === e2.ey.L3, s3 = this.Qp;
                return s3 || (this.info(Co.QU$ + " create peer " + t4), s3 = new oh(this, t4, i4, this.an, this.dataReport, this.tv, this.gn, this.pn, this.room, this.pm)), s3.onCanStopNegaTimer = function() {
                  null != n3.av && (clearTimeout(n3.av), n3.av = null);
                }, s3.onNeedReplay = function() {
                  n3.resetPlay(true, 0), n3.startPlay(n3.va, n3.getRemoteStreamSuc);
                }, s3.onPlayStateUpdateError = function() {
                  for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                    t5[i5] = arguments[i5];
                  n3.playMode === (null == s3 ? void 0 : s3.playMode) && n3.playStateUpdateError.apply(n3, t5);
                }, s3.onPlayBFrameEvent = function(t5) {
                  n3.qualityHandler.setHasBFrames(t5);
                }, s3.onPlayStreamEnd = function(t5) {
                  n3.qualityHandler.setPlayStreamEnd(t5);
                }, s3.onGwPlayNetState = function(t5) {
                  n3.qualityHandler.updateGwPlayNetState(t5);
                }, s3.onPlayStateUpdate = function() {
                  for (var t5 = [], i5 = 0; i5 < arguments.length; i5++)
                    t5[i5] = arguments[i5];
                  n3.playMode === (null == s3 ? void 0 : s3.playMode) && n3.onPlayStateUpdate.apply(n3, t5);
                }, s3.onIceConnected = function(t5, i5) {
                  var r4, o2, u2 = null == n3 ? void 0 : n3.retryStreamHandler;
                  for (var a2 in null == u2 || u2.getTryTime(n3, true), n3.hasSucceed = true, n3.Pp++, n3.continuousFailCnt = 0, n3.reportPlayStateTime = Date.now(), n3.ql = false, n3.$h && (0, G.lA)(n3.$h, { signal_consume: bh.signal_consume(n3.signalTime), is_peer: bh.is_peer(n3.Od), peer_id: bh.peer_id(n3.peerID), source_type: bh.source_type(n3.playMode), net_protocol: bh.net_protocol(null == n3 ? void 0 : n3.netProtocol), tryidx: bh.tryidx(n3.tryidx) }, false), n3.isProbe || n3.dm || (n3.dm = (0, G.fU)(n3.cr, e2.t0.I, n3.streamId, n3.playingEvent, L.Nr.event, void 0, true)), n3.getConnectIP(), n3.gn.publisherList) {
                    if (6 == n3.gn.publisherList[a2].publisher.state && n3.broadcasterStatus == e2.ku.stop) {
                      null == s3 || s3.sendBroadcasterStatus(1), n3.broadcasterStatus = e2.ku.start;
                      break;
                    }
                  }
                  if (!n3.isProbe) {
                    n3.qualityHandler.setPlayQualityTimer();
                    var c2 = n3.au("probe_started_num");
                    !isNaN(c2) && (n3.gn.probeStartedNum = c2);
                  }
                  var h2, f2, l2;
                  ("firefox" === (l2 = n3.pn.browser) || "chrome" === l2 && (h2 = 0, (f2 = ((0, Pe.$t)().toLowerCase().match(/chrome\/([\d.]+)/) || [])[1]) && (h2 = parseInt(f2.split(",")[0])), h2 < 72)) && n3.Kp(t5, i5);
                  var d2 = n3.Hp, v2 = d2.v, m2 = d2.a;
                  (0, B.Cs)(v2) && n3.onRemoteCameraStatusUpdate(v2), (0, B.Cs)(m2) && n3.onRemoteMicStatusUpdate(m2), n3.allowAutoSwitchResource && (n3.playMode === e2.ey.RTC ? null === (r4 = n3.Ip) || void 0 === r4 || r4.close(0) : n3.playMode === e2.ey.L3 && (null === (o2 = n3.Op) || void 0 === o2 || o2.close(0)));
                }, s3.onGetIP = function() {
                  6 === n3.state && n3.getConnectIP();
                }, s3.onPeerConnected = this.Kp.bind(this), s3.onRecvRemoteStream = function(t5) {
                  if (n3.remoteStream = t5, n3.playStream) {
                    var i5 = n3.rtcViewer;
                    t5.clone().getTracks().forEach(function(t6) {
                      var e3 = "video" === t6.kind, r4 = [];
                      (r4 = e3 ? n3.playStream.getVideoTracks() : n3.playStream.getAudioTracks()).includes(t6) || (r4.forEach(function(t7) {
                        return n3.playStream.removeTrack(t7);
                      }), (!e3 || n3.playMediaStatus.video && [0, 20].includes(n3.cameraStatus)) && (n3.info(Co.Nw2 + " add track " + e3), n3.playStream.addTrack(t6), i5 && i5.setTrack(e3, t6, "safari" === n3.pn.browser), n3.pn.actionListener(e3 ? "playerVideoTrackUpdate" : "playerAudioTrackUpdate", n3.va, t6)));
                      e3 || n3.Zp();
                    });
                  } else
                    n3.playStream = t5.clone(), n3.info(Co.Nw2 + " clone");
                  n3.Rp && n3.Rp.renderMediaStreamByCdnPlayer(n3.playStream), n3.gn.soundLevelDelegate && !n3.isProbe && n3.startSoundLevel(), n3.audioMuteState = t5.getAudioTracks().length > 0 ? "0" : "1", n3.videoMuteState = t5.getVideoTracks().length > 0 ? "0" : "1";
                }, s3.onRecvStreamStatus = this.Xp.bind(this), s3.onRecvMixSoundLevels = function(t5) {
                  n3.Wp(t5);
                }, s3.onRecvNetQuality = function(t5, i5, e3) {
                  n3.playMode === (null == s3 ? void 0 : s3.playMode) && (n3.qualityHandler.stopProbeTimeout(), 0 == t5 && (0, B.Cs)(i5) && (0, B.Cs)(e3) ? (n3.isProbeByDG = false, n3.onCalNetQualityResult(0, ct(e3, i5))) : n3.onCalNetQualityResult(1));
                }, s3.onRecvNetQualityGrade = function(t5) {
                  var i5, e3;
                  if (n3.playMode === (null == s3 ? void 0 : s3.playMode)) {
                    var r4 = t5;
                    n3.Bp = n3.Bp || (null === (e3 = null === (i5 = n3.gn.playerList[n3.va]) || void 0 === i5 ? void 0 : i5.room.streamList.find(function(t6) {
                      return t6.stream_id == n3.va;
                    })) || void 0 === e3 ? void 0 : e3.id_name), n3.Bp && (n3.pn.actionListener("networkQuality", n3.Bp, null == r4 ? void 0 : r4.tx_quality, null == r4 ? void 0 : r4.rx_quality), !n3.qp && n3.startPollNetworkQuality(), n3.Lp = 0);
                  }
                }, r3 ? this.Ip = s3 : this.Op = s3, s3;
              }
            }, i3.prototype.resetGwNodes = function() {
              var t4;
              null === (t4 = this.Qp) || void 0 === t4 || t4.resetGwNodes();
            }, i3.prototype.setGwNodes = function(t4, i4, n3, e3) {
              var r3;
              null === (r3 = this.Qp) || void 0 === r3 || r3.setGwNodes(t4, i4, n3, e3);
            }, i3.prototype.dispatchGwNodes = function(t4, i4, n3) {
              var e3;
              null === (e3 = this.Qp) || void 0 === e3 || e3.dispatchGwNodes(t4, i4, n3);
            }, i3.prototype.resetPlay = function(t4, i4) {
              var n3, e3, r3;
              void 0 === t4 && (t4 = true), this.info(Co.ruA + " call"), t4 && (null === (n3 = this.Op) || void 0 === n3 || n3.close(i4), null === (e3 = this.Ip) || void 0 === e3 || e3.close(i4), null === (r3 = this.Rp) || void 0 === r3 || r3.stopCDNPlayer()), this.ip = "", null != this.av && (clearTimeout(this.av), this.av = null), this.qualityHandler.stopProbeTimeout(), this.qualityHandler.clearPlayQualityTimer(), this.stopSoundLevel(), this.Up = 0, this.Gp = 0;
            }, i3.prototype.playStateUpdateError = function(t4, i4, n3, r3) {
              if (this.error(Co.Rbr + " call " + JSON.stringify(t4)), !this.isProbe) {
                var s3 = this.cr.createSpan(e2.t0.H, { key: mh, par: this.va }, { key: "" }, L.$g.event);
                s3.setAttributes({ error: null == t4 ? void 0 : t4.code, message: null == t4 ? void 0 : t4.message }), s3.end();
              }
              this.isProbe ? this.onCalNetQualityResult(1) : this.va && this.onPlayStateUpdate(e2.h7.error, this.va, t4, i4, n3, r3), this.info(Co.Rbr + " ended");
            }, i3.prototype.getCameraMicStatus = function(t4) {
              return 0 == t4 ? "OPEN" : "MUTE";
            }, i3.prototype.onPlayStateUpdate = function(t4, i4, n3, r3, s3, o2) {
              ((i4 && this.gn.playerList[i4]) === this ? this.retryStreamHandler.playStateHandle(t4, this.streamId, n3, r3, s3, o2) : this.error("zsc.pss.1 cannot find play"), t4 === e2.h7.start && 0 === (null == n3 ? void 0 : n3.code)) && (this.gn.playModule && this.$p(), this.gn.supplementPlayingChargeTime(), this.qualityHandler.resetCallbackState());
            }, i3.prototype.onPlayQualityUpdate = function(t4, i4) {
            }, i3.prototype.getStopReason = function(t4) {
              var i4 = "StopPlay";
              if (t4 && t4.code)
                if (1104031 === t4.code)
                  i4 = "ReachMaxAVRetryTime";
                else
                  i4 = "StopPlay";
              return i4;
            }, i3.prototype.Wp = function(t4) {
              var i4 = this, n3 = t4.map(function(t5) {
                var n4, e4, r4 = (null === (e4 = null === (n4 = i4.room.streamList) || void 0 === n4 ? void 0 : n4.find(function(i5) {
                  return i5.stream_nid === t5.soundLevelID;
                })) || void 0 === e4 ? void 0 : e4.stream_id) || "";
                return fh(fh({}, t5), { streamID: r4 });
              }), e3 = new Map(n3.map(function(t5) {
                return [t5.soundLevelID, t5.value];
              })), r3 = n3.filter(function(t5) {
                return t5.streamID;
              }).map(function(t5) {
                return [t5.streamID, t5.value];
              }), s3 = new Map(r3);
              this.pn.actionListener("mixerSoundLevelUpdate", e3, this.va), s3.size && this.pn.actionListener("autoMixerSoundLevelUpdate", s3, this.va);
            }, i3.prototype.stopPlay = function(t4) {
              var i4, n3, r3, s3, o2, u2;
              this.info(Co.W8t + " called");
              var a2 = this.getStopReason(t4);
              for (var c2 in this.gn.publisherList) {
                if (6 == this.gn.publisherList[c2].publisher.state && this.broadcasterStatus == e2.ku.start) {
                  this.sendBroadcasterStatus(0), this.broadcasterStatus = e2.ku.stop;
                  break;
                }
              }
              var h2 = null === (n3 = this.Qp) || void 0 === n3 ? void 0 : n3.$u, f2 = this.isStreaming ? 0 : this.lastFailTimeLen;
              if (!this.isProbe) {
                var l2 = Date.now() - this.reportPlayStateTime;
                [0, 2].includes(this.Mm) && this.tv.setAttributes({ play_state_time: gh.play_state_time(l2 || 0) }), this.dm && this.endPlayingSpan({ stop_reason: L.er.stop_reason(a2), try_time: L.er.try_time(f2) }), (null == t4 ? void 0 : t4.code) == ph.De.code && this.uploadPlayEvent(t4), this.seiWorker && this.seiWorker.postMessage({ cmd: "clear", type: "pull", streamID: this.va });
              }
              if (this.stopPollNetworkQuality(), this.resetPlay(true, 0), this.Zc(), !this.isProbe) {
                var d2 = this.qualityHandler, v2 = d2.Qv, m2 = d2.Yv, p2 = ((i4 = {}).l3_a_break_time = m2.cumulativeBreakDurationL3, i4.l3_a_decode_time = m2.cumulativeDecodeDurationL3, i4.l3_v_break_time = v2.cumulativeBreakDurationL3, i4.l3_v_decode_time = v2.cumulativeDecodeDurationL3, i4.rtc_a_break_time = m2.cumulativeBreakDurationRtc, i4.rtc_a_decode_time = m2.cumulativeDecodeDurationRtc, i4.rtc_v_break_time = v2.cumulativeBreakDurationRtc, i4.rtc_v_decode_time = v2.cumulativeDecodeDurationRtc, i4.audio_cumulative_break_time = m2.cumulativeBreakDuration, i4.audio_cumulative_decode_time = m2.cumulativeDecodeDuration, i4.video_cumulative_break_time = v2.cumulativeBreakDuration, i4.video_cumulative_decode_time = v2.cumulativeDecodeDuration, i4), g2 = Date.now(), b2 = this.firstPulledTimeStamp;
                this.updateValidTime(t4);
                var _2 = 0;
                t4 && 0 !== t4.code && (_2 = t4.code === re.I4J.code ? this.latestPlayErrCode : t4.code), this.tv.setAttributes(fh(fh({ biz_product: (null === (r3 = this.pm) || void 0 === r3 ? void 0 : r3.resourceMode) == e2.qP.DG ? 1 : 0, webrtc_sid: gh.webrtc_sid(this.sessionId), max_retry_interval: gh.max_retry_interval(this.pn.streamRetryTime), probe_ip_cnt: gh.probe_ip_cnt(this.Rd), valid_probe_ip_cnt: gh.valid_probe_ip_cnt(this.Td), poor_quality_retry_cnt: gh.poor_quality_retry_cnt(this.poorQualityRetryCnt), probe_not_trigger_retry_info: gh.probe_not_trigger_retry_info(this.Cd.length > 0 ? this.Cd : void 0), fail_cnt: gh.fail_cnt(Math.max(this.tryidx - 1, 0)), continuous_fail_cnt: gh.continuous_fail_cnt(Math.max(this.continuousFailCnt - 1, 0)), try_time: gh.try_time(f2), use_resource_type: gh.use_resource_type(this.useResourceTypes), use_na: L.oW.use_na(1), play_state_cnt: gh.first_frame_time(this.Pp), protocol: gh.protocol("webrtc"), dispatch_external_ip: gh.dispatch_external_ip(this.pn.clientIP), w: gh.w(null === (s3 = this.playStat) || void 0 === s3 ? void 0 : s3.frameWidth), h: gh.h(null === (o2 = this.playStat) || void 0 === o2 ? void 0 : o2.frameHeight), stop_reason: gh.stop_reason(a2), error: (null == t4 ? void 0 : t4.code) || 0, last_error: _2, message: (null == t4 ? void 0 : t4.message) || "", cdn_a_break_time: 0, cdn_a_decode_time: 0, cdn_v_break_time: 0, cdn_v_decode_time: 0 }, p2), { total_d: b2 ? g2 - b2 : 0, valid_d: this.Tp + this.Ap + this.pp, tempbroken_cnt: this.zp + this.Dp + this.CDNBrokenCnt, is_mini: h2 })), this.tv.end();
              }
              this.gn.stopToReport(1), this.gn.stopNetProbe(this), null === (u2 = this.Qp) || void 0 === u2 || u2.stopPlay(), this.tg(), this.ig(), this.hasSucceed = false, this.tryidx = 0, this.ql = false, this.Rd = 0, this.Td = 0, this.poorQualityRetryCnt = 0, this.continuousFailCnt = 0;
              var y2 = this.rtcViewer;
              y2 && y2.destroy();
            }, i3.prototype.uploadPlayEvent = function(t4) {
              var i4, n3;
              if (this.Vp) {
                var e3 = {};
                this.Qp && (null === (i4 = this.Qp) || void 0 === i4 ? void 0 : i4.Jl) && (e3.mini_retry_consume = +(null === (n3 = this.Qp) || void 0 === n3 ? void 0 : n3.Jl.toFixed(0)), this.Qp.resetMiniReportInfos()), (0, G.lA)(this.Vp, fh(fh({}, e3), { error: t4.code, message: t4.message }));
              }
              this.Vp = void 0;
            }, i3.prototype.onDisconnect = function(t4) {
              this.info(Co.Toj + " call"), this.playStateUpdateError(t4 || ph.Wn, !!t4);
            }, i3.prototype.startSoundLevel = function() {
              var t4, i4 = this;
              if (this.info(Co.cuT + " call"), !this.isProbe)
                if (this.remoteStream && 0 != this.remoteStream.getAudioTracks().length) {
                  null === (t4 = this.soundMeterWorklet) || void 0 === t4 || t4.destroy(), this.mic = null;
                  var n3 = this.gn.getCloudSoundInterval();
                  try {
                    var e3 = this, r3 = this.gn.createSoundLevel(this.ac, this.remoteStream, this.gn.soundLevelInterval, n3, function(t5) {
                      e3.soundLevel = 0 === i4.micStatus ? 100 * t5 : 0;
                    }), s3 = r3.mic;
                    this.soundMeterWorklet = r3.soundMeter, this.mic = s3;
                  } catch (t5) {
                    this.error(Co.cuT + " get sound level failed " + t5);
                  }
                } else
                  this.info(Co.cuT + " remote stream no found");
            }, i3.prototype.stopSoundLevel = function() {
              var t4;
              this.info(Co.SKc + " call"), this.soundLevel = 0, null === (t4 = this.soundMeterWorklet) || void 0 === t4 || t4.destroy(), this.mic = null;
            }, i3.prototype.onCalNetQualityResult = function(t4, i4) {
            }, i3.prototype.uploadRTCPlayStats = function() {
              var t4, i4, n3, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2;
              this.lastPlayStats.time && (null === (t4 = this.dm) || void 0 === t4 || t4.setAttributes({ lsttime: L.er.lsttime(parseInt(this.lastPlayStats.time)), total_stat: L.Jv.total_stat({ afc: null === (i4 = this.lastPlayStats) || void 0 === i4 ? void 0 : i4.audioPacketsReceived, vfc: null === (n3 = this.lastPlayStats) || void 0 === n3 ? void 0 : n3.framesReceived, tfc: (null === (e3 = this.lastPlayStats) || void 0 === e3 ? void 0 : e3.audioPacketsReceived) + (null === (r3 = this.lastPlayStats) || void 0 === r3 ? void 0 : r3.framesReceived), vb: null === (s3 = this.lastPlayStats) || void 0 === s3 ? void 0 : s3.videoBytesReceived, ab: null === (o2 = this.lastPlayStats) || void 0 === o2 ? void 0 : o2.audioBytesReceived, tb: (null === (u2 = this.lastPlayStats) || void 0 === u2 ? void 0 : u2.videoBytesReceived) + (null === (a2 = this.lastPlayStats) || void 0 === a2 ? void 0 : a2.audioBytesReceived), rtp_rtt: Math.round(1e3 * (null === (c2 = this.playStat) || void 0 === c2 ? void 0 : c2.currentRoundTripTime)) || 0, w: null === (h2 = this.playStat) || void 0 === h2 ? void 0 : h2.frameWidth, rtp_plr: null === (f2 = this.playStat) || void 0 === f2 ? void 0 : f2.videoPacketsLostRate, h: null === (l2 = this.playStat) || void 0 === l2 ? void 0 : l2.frameHeight, rtp_bw: (null === (d2 = this.playStat) || void 0 === d2 ? void 0 : d2.googAvailableSendBandwidth) ? null === (v2 = this.playStat) || void 0 === v2 ? void 0 : v2.googAvailableSendBandwidth : void 0, p2p_delay: null === (m2 = this.playStat) || void 0 === m2 ? void 0 : m2.peerToPeerDelay }) }));
            }, i3.prototype.getViewer = function() {
              return this.playStream && !this.rtcViewer && (this.rtcViewer = new Zo(this.playStream, this, { clearLastFrame: this.pn.engineConfig.playClearLastFrame })), this.rtcViewer;
            }, i3.prototype.Kp = function(t4, i4) {
              var n3;
              this.isProbe || 0 != this.firstFrameTime || (this.firstFrameTime = (/* @__PURE__ */ new Date()).getTime() - this.beginTime, this.tv.setAttributes({ first_frame_time: gh.first_frame_time(this.firstFrameTime), fft_video: gh.fft_video(this.firstFrameTime), fft_audio: gh.fft_audio(this.firstFrameTime), biz_product: L.x6.biz_product((null === (n3 = this.pm) || void 0 === n3 ? void 0 : n3.resourceMode) == e2.qP.DG ? 1 : 0) }), this.ng = this.firstFrameSpan("video", t4, i4), this.eg = this.firstFrameSpan("audio", t4, i4)), this.Fp && this.rg(this.cameraStatus, this.micStatus);
            }, i3.prototype.rg = function(t4, i4) {
              0 === t4 && this.ng && (this.ng.setAttributes({ dev_changed: L.x6.dev_changed(0 !== this.cameraStatus) }), this.ng.spanReport(), this.ng = null), 0 === i4 && this.eg && (this.eg.setAttributes({ dev_changed: L.Cp.dev_changed(0 !== this.micStatus) }), this.eg.spanReport(), this.eg = null);
            }, i3.prototype.firstFrameSpan = function(t4, i4, n3) {
              var r3, s3 = "video" === t4 ? L.x6 : L.Cp, o2 = (0, G.fU)(this.cr, e2.t0.H, this.va, s3.event, mh), u2 = this.streamInRoom ? 2 : 0 === this.Np ? 0 : 1;
              return o2.setAttributes({ webrtc_sid: s3.webrtc_sid(i4), resource_type: s3.resource_type(this.playMode), fft_consumed: s3.fft_consumed(this.firstFrameTime), protocol: s3.protocol("webrtc"), push_consumed: s3.push_consumed(this.Np), prepare_recv_consumed: s3.prepare_recv_consumed(this.signalTime), connected_consumed: s3.connected_consumed(n3), reliability: s3.reliability(u2), biz_product: s3.biz_product((null === (r3 = this.pm) || void 0 === r3 ? void 0 : r3.resourceMode) == e2.qP.DG ? 1 : 0), ip_stack: this.ipStack }), null == o2 || o2.end(false), o2;
            }, i3.prototype.isCustomCdn = function() {
              return false;
            }, i3.prototype.setStreamAdd = function() {
              this.streamInRoom || 0 !== this.Np || 5 === this.state || (this.Np = (/* @__PURE__ */ new Date()).getTime() - this.playStartTime), 6 === this.state && this.Rp && this.Rp.retrySendTransCodecCmd();
            }, i3.prototype.setStreamUpdate = function(t4) {
              this.qualityHandler.setStreamUpdate(t4);
            }, i3.prototype.startPollNetworkQuality = function() {
              var t4 = this;
              clearTimeout(this.qp), this.qp = setTimeout(function() {
                t4.Lp++;
                var i4 = e2.b3.Unknown, n3 = e2.b3.Unknown;
                t4.Bp && t4.Lp > 1 && (t4.Lp > 3 && (i4 = e2.b3.Die, n3 = e2.b3.Die), t4.pn.actionListener("networkQuality", t4.Bp, i4, n3)), t4.startPollNetworkQuality();
              }, 3e3);
            }, i3.prototype.stopPollNetworkQuality = function() {
              clearTimeout(this.qp), this.Lp = 0;
            }, i3.prototype.setAudioFrameCallback = function(t4, i4) {
              (this.info("zc.p.safc.0 call"), this.playStream) ? (this.Yc || (this.Yc = new xu(this.ac, this.an)), this.Yc.setAudioFrameCallback(this.playStream, null !== t4, function(i5) {
                t4 && t4(i5);
              }, i4)) : this.warn("zc.p.safc.0 no play stream");
            }, i3.prototype.Zc = function() {
              this.Yc && (this.Yc.destroy(), this.Yc = null);
            }, i3.prototype.Zp = function() {
              var t4;
              null === (t4 = this.Yc) || void 0 === t4 || t4.replaceSource(this.playStream);
            }, i3.prototype.updateValidTime = function(t4) {
              if (this.pulledTimeStamp) {
                var i4 = 0;
                (null == t4 ? void 0 : t4.code) && t4.code !== re.I4J.code && (i4 = 1);
                var n3 = Date.now(), r3 = this.playMode, s3 = n3 - this.pulledTimeStamp;
                r3 == e2.ey.RTC ? (this.Tp = s3, this.zp += i4) : r3 === e2.ey.L3 && (this.Ap = s3, this.Dp += i4), this.pulledTimeStamp = 0;
              }
            }, i3.prototype.updateCDNValidTime = function() {
              var t4;
              null === (t4 = this.Rp) || void 0 === t4 || t4.updateCDNValidTime();
            }, i3.prototype.setMuteStreamByPlayMode = function(t4) {
              this.info(Co.Ze2 + " call: ".concat(JSON.stringify(t4)));
              var i4 = t4.play_mode, n3 = void 0 === i4 ? 0 : i4, e3 = t4.forbid_play_expire_time, r3 = 1e3 * (0, G.pl)(void 0 === e3 ? 0 : e3), s3 = !_t(n3, 0), o2 = !_t(n3, 1);
              (this.info(Co.Ze2 + " mode: ".concat(o2, ",\n        ").concat(s3, ",\n        ").concat(r3, ",\n        ").concat(JSON.stringify(this.Mp))), o2 !== this.Mp.video || s3 !== this.Mp.audio || r3 !== this.Mp.expireTime) ? ((0, B.dd)(o2) && (this.Mp.lastVideo = this.Mp.video, this.Mp.video = o2), (0, B.dd)(s3) && (this.Mp.lastAudio = this.Mp.audio, this.Mp.audio = s3), r3 && (this.Mp.expireTime = r3), this.gn.playModule && this.isStreaming && this.$p()) : this.info(Co.Ze2 + " mode not change");
            }, i3.prototype.$p = function() {
              var t4 = [void 0, true].includes(this.pm.video), i4 = [void 0, true].includes(this.pm.audio), n3 = this.Mp, e3 = n3.video, r3 = n3.audio, s3 = n3.lastVideo, o2 = n3.lastAudio, u2 = n3.expireTime;
              this.info("".concat(Co.ISq, " ").concat(JSON.stringify(this.Mp)));
              var a2 = this.playMediaStatus, c2 = a2.video, h2 = a2.audio, f2 = u2 - ((/* @__PURE__ */ new Date()).getTime() + this.pn.clientTimeOffset);
              this.info("".concat(Co.ISq, " remainTime ").concat(f2));
              var l2 = false, d2 = false, v2 = false, m2 = false;
              this.og();
              var p2 = false;
              this.isServerMuteVideo || false === s3 && true === e3 ? (l2 = true, d2 = !e3, p2 = true) : (l2 = !c2, d2 = !c2), this.isServerMuteAudio || false === o2 && true === r3 ? (v2 = true, m2 = !r3, p2 = true) : (v2 = !h2, m2 = !h2), t4 && l2 && this.ug("video", d2, p2), i4 && v2 && this.ug("audio", m2, p2), this.ig(), (false === e3 || false === r3) && f2 > 0 && this.ag(f2);
            }, i3.prototype.ug = function(t4, i4, n3, e3) {
              var r3 = this;
              this.info("".concat(Co.cIs, " ").concat(this.va, " ").concat(t4, " ").concat(i4));
              var s3 = this.gn.playModule;
              s3 && s3.mutePlayStream(this.va, t4, i4, false).then(function(i5) {
                r3.info("".concat(Co.cIs, " ").concat(r3.va, " mute ").concat(t4, ": ").concat(i5));
                var s4 = function(t5, i6) {
                  r3.pn.onExperimentalAPICallback({ method: t5, content: { roomID: r3.room.roomID, streamID: r3.va, mute: i6 } });
                }, o2 = !r3.playMediaStatus.video, u2 = !r3.playMediaStatus.audio;
                "video" === t4 && n3 && r3.cg !== o2 && (s4("onRecvRoomMuteVideoStream", o2), r3.cg = o2), "audio" === t4 && n3 && r3.hg !== u2 && (s4("onRecvRoomMuteAudioStream", u2), r3.hg = u2), e3 && e3();
              });
            }, i3.prototype.ag = function(t4) {
              var i4 = this;
              this.info("".concat(Co.Ox5, " ").concat(this.va, " ").concat(t4)), this.jp = setTimeout(function() {
                var t5 = i4.gn.playModule;
                if (i4.info("".concat(Co.Ox5, " ").concat(i4.va, " ").concat(!!t5)), t5) {
                  var n3 = i4.Mp, e3 = n3.audio;
                  false === n3.video && i4.ug("video", false, true, function() {
                    i4.og();
                  }), false === e3 && i4.ug("audio", false, true, function() {
                    i4.og();
                  }), i4.tg();
                }
              }, t4);
            }, i3.prototype.og = function() {
              var t4 = this.Mp, i4 = t4.video, n3 = t4.audio, e3 = t4.expireTime - ((/* @__PURE__ */ new Date()).getTime() + this.pn.clientTimeOffset);
              this.isServerMuteVideo = e3 > 0 && false === i4, this.isServerMuteAudio = e3 > 0 && false === n3;
            }, i3.prototype.ig = function() {
              this.jp && (clearTimeout(this.jp), this.jp = null);
            }, i3.prototype.tg = function() {
              this.Mp = { video: true, audio: true, expireTime: 0, lastVideo: true, lastAudio: true };
            }, i3.prototype.Xp = function(t4, i4, n3) {
              this.info("".concat(Co.dw7, " status camera_status: ").concat(t4, " mic_status: ").concat(i4));
              var e3 = this.cameraStatus !== t4;
              if ((!this.Fp || e3) && this.onRemoteCameraStatusUpdate(t4), (!this.Fp || this.micStatus !== i4) && this.onRemoteMicStatusUpdate(i4), this.Fp = true, this.cameraStatus = t4, this.micStatus = i4, this.videoMuteState = 0 === t4 ? "0" : "1", this.audioMuteState = 0 === i4 ? "0" : "1", (0, B.dd)(this.pm.video))
                this.info(Co.dw7 + " has set video option, ignore stream status");
              else if (this.handleVideoTrackForPlaying(e3), "safari" === this.pn.browser && n3)
                for (var r3 = G.VJ.querySelectorAll("video, audio"), s3 = 0; s3 < r3.length; s3++) {
                  var o2 = r3[s3];
                  o2.srcObject === this.playStream && (this.info(Co.dw7 + " track changed. rerender stream"), o2.srcObject = this.playStream);
                }
              this.rg(t4, i4);
            }, i3.prototype.handleVideoTrackForPlaying = function(t4) {
              var i4 = this;
              void 0 === t4 && (t4 = false);
              var n3 = this.playStream;
              if (n3) {
                var e3 = this.rtcViewer, r3 = this.cameraStatus;
                if (0 !== r3 && 20 !== r3 || !this.playMediaStatus.video)
                  e3 ? t4 && (this.info(Co.dw7 + " viewer clear last frame"), e3.checkIfClearLastFrame()) : n3.getVideoTracks().forEach(function(t5) {
                    t5.enabled = false, i4.gn.trackUtils.stopTrack(t5), n3.removeTrack(t5);
                  });
                else if (0 === n3.getVideoTracks().length) {
                  var s3 = this.remoteStream.clone().getVideoTracks()[0];
                  n3.addTrack(s3), e3 && e3.setVideo(s3, "safari" === this.pn.browser), this.pn.actionListener("playerVideoTrackUpdate", this.va, s3);
                }
              }
            }, i3.prototype.onRemoteCameraStatusUpdate = function(t4) {
              6 === this.state ? (this.Hp.v = void 0, this.gn.onRemoteCameraStatusUpdate(this.streamId, this.getCameraMicStatus(t4), t4)) : (this.Hp.v = t4, this.info(Co.dw7 + " v not playing. "));
            }, i3.prototype.onRemoteMicStatusUpdate = function(t4) {
              6 === this.state ? (this.Hp.a = void 0, this.gn.onRemoteMicStatusUpdate(this.streamId, this.getCameraMicStatus(t4), t4)) : (this.Hp.a = t4, this.info(Co.dw7 + " a not playing. "));
            }, i3.prototype.playCDN = function(t4, i4) {
              var n3 = this, r3 = "zc.ply.pcdn";
              this.info(r3 + " call"), this.getCDNHandler().playCDN(function() {
                for (var t5 = [], s3 = 0; s3 < arguments.length; s3++)
                  t5[s3] = arguments[s3];
                n3.info(r3 + " success"), n3.dm = (0, G.fU)(n3.cr, e2.t0.H, n3.streamId, n3.playingEvent, L.Nr.event, void 0, true), i4 && i4.apply(void 0, t5);
              }, function(i5) {
                n3.info(r3 + " fail. " + i5), n3.onPlayStateUpdate(e2.h7.error, n3.va, i5, true), t4 && t4(i5);
              });
            }, i3.prototype.getCDNHandler = function() {
              return this.Rp || (this.Rp = new ch(this, this.an, this.cr, this.gn, this.pn)), this.Rp;
            }, i3.prototype.endPlayingSpan = function(t4) {
              var i4, n3, r3;
              if (void 0 === t4 && (t4 = {}), this.dm) {
                var s3 = this.room, o2 = this.playMode === e2.ey.CDN, u2 = (null == this ? void 0 : this.isStreaming) ? 0 : null === (i4 = null == this ? void 0 : this.retryStreamHandler) || void 0 === i4 ? void 0 : i4.getTryTime(this);
                return o2 || null == this || this.uploadRTCPlayStats(), (0, G.lA)(this.dm, fh(fh({ stream_id: L.er.stream_id(this.streamId), room_id: L.er.room_id(null == s3 ? void 0 : s3.roomID), room_sid_string: L.er.room_sid_string(null == s3 ? void 0 : s3.roomSessionID), tryidx: L.er.tryidx(this.tryidx), ip: L.er.ip(null == this ? void 0 : this.ip), resource_type: L.er.resource_type(this.playMode), dispatch_external_ip: L.er.dispatch_external_ip(this.pn.clientIP) }, o2 ? { url: L.er.url(null === (n3 = this.Rp) || void 0 === n3 ? void 0 : n3.cdnUrl), net_protocol: L.er.net_protocol("tcp") } : { protocol: L.er.protocol("webrtc"), url: L.er.url(null === (r3 = this.signal) || void 0 === r3 ? void 0 : r3.server), try_time: L.er.try_time(u2), net_protocol: L.er.net_protocol(this.netProtocol) }), t4)), this.dm = void 0, true;
              }
              return false;
            }, i3.prototype.sendBroadcasterStatus = function(t4) {
              var i4 = this.Qp;
              i4 && i4.sendBroadcasterStatus(t4);
            }, i3.prototype.ActivatePlayAudioStream = function(t4, i4, n3) {
              var e3 = this.Qp;
              e3 && e3.ActivatePlayAudioStream(t4, i4, n3);
            }, i3.prototype.ActivatePlayVideoStream = function(t4, i4, n3) {
              var e3 = this.Qp;
              e3 && e3.ActivatePlayVideoStream(t4, i4, n3);
            }, i3.prototype.getP2PNetStats = function(t4, i4) {
              var n3 = this.Qp;
              n3 && n3.getP2PNetStats(t4, i4);
            }, i3.prototype.getConnectIP = function() {
              var t4, i4;
              if (this.streamConnectIP && !this.ip) {
                var n3 = Hs(this.streamConnectIP), e3 = this.getIPByGwNode(n3), r3 = e3.ip, s3 = e3.port;
                this.ip = r3, this.port = s3, this.info("zc.p.1.gci.0 ip: ".concat(r3, " ").concat(s3)), null === (t4 = this.$h) || void 0 === t4 || t4.setAttributes({ ip: bh.ip(this.ip), port: bh.port(this.port) }), null === (i4 = this.$h) || void 0 === i4 || i4.spanReport(), this.$h = void 0;
              }
            }, i3.prototype.getIPByGwNode = function(t4) {
              var i4;
              if (this.ipNode) {
                var n3 = this.ipNode.vid.split("|"), e3 = "";
                return n3.forEach(function(i5) {
                  var n4 = Hs(i5);
                  t4 === n4 && (e3 = i5);
                }), { ip: e3, port: this.ipNode.port };
              }
              if (this.gwNode) {
                var r3 = null === (i4 = this.gwNode) || void 0 === i4 ? void 0 : i4.split(":"), s3 = r3[r3.length - 1];
                return { ip: this.gwNode.replace(":" + s3, ""), port: parseInt(s3) };
              }
              return { ip: "", port: 0 };
            }, i3.prototype.reportMiniSdpInfos = function() {
              var t4;
              null === (t4 = this.Qp) || void 0 === t4 || t4.reportMiniSdpInfos(this.playStartEvent);
            }, i3.prototype.setPlayStreamVideoType = function(t4) {
              return lh(this, void 0, void 0, function() {
                var i4;
                return dh(this, function(n3) {
                  return (i4 = this.Qp) ? [2, i4.setPlayStreamVideoType(t4)] : [2, false];
                });
              });
            }, i3.prototype.onStatsUpdated = function(t4) {
              t4.audioJitterBufferDelayMs && this.sendStats(t4.audioJitterBufferDelayMs);
            }, i3.prototype.sendStats = function(t4) {
              var i4 = this.Qp;
              if (i4 && !(i4.gwVersion < 83886080)) {
                var n3 = Date.now();
                if (0 === this.Up || n3 - (this.Up + 50) >= 2e3) {
                  var e3 = this.dataChannel;
                  if (e3 && "open" === e3.readyState) {
                    var r3 = new Uint8Array(5);
                    r3[0] = 14, r3[1] = this.Gp >> 8 & 255, r3[2] = 255 & this.Gp, r3[3] = t4 >> 8 & 255, r3[4] = 255 & t4, this.Gp++, this.Gp >= 65536 && (this.Gp = 0), e3.send(r3);
                  } else
                    i4.sendPlayStats(t4);
                  this.Up = n3;
                }
              }
            }, i3;
          }(Bo), Eh = o(6361), kh = o.n(Eh), Oh = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Ih = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Rh = function() {
            function t3(t4, i3, n3) {
              this.name = t4, this.an = i3, this.fg = n3;
              var e3 = this.lg();
              this.dg = t4 + ":" + st(6), this.vg = kh().createInstance({ name: this.dg }), this.an.info(Co.EPo + " constructor ".concat(t4, " ").concat(this.dg, " ").concat(e3)), this.recordStoresInStorage(t4, this.dg, e3);
            }
            return Object.defineProperty(t3.prototype, "deletedKeys", { get: function() {
              return this.name + "_d";
            }, enumerable: false, configurable: true }), t3.prototype.lg = function() {
              return Math.ceil(this.fg._now() / 1e3);
            }, t3.prototype.recordStoresInStorage = function(t4, i3, n3) {
              try {
                var e3 = localStorage.getItem(t4);
                this.an.info(Co.EPo + " record storage storeNames ".concat(e3));
                var r3 = e3 ? e3.split(",") : [];
                r3.push(i3 + "/" + n3 + "-1"), localStorage.setItem(t4, null == r3 ? void 0 : r3.join(","));
              } catch (t5) {
              }
            }, t3.prototype.getStoresFromStorage = function() {
              return this.refreshStores("1");
            }, t3.prototype.resetStorageStores = function() {
              this.an.info(Co.EPo + " resetStorageStores"), this.refreshStores("0", this.dg);
            }, t3.prototype.removeStoreFromStorage = function(t4) {
              return Oh(this, void 0, void 0, function() {
                return Ih(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return t4 === this.dg ? [3, 2] : (this.an.info(Co.EPo + " removeStore ".concat(t4)), [4, this.dropInstance(t4)]);
                    case 1:
                      return i3.sent(), this.refreshStores("2", t4), [3, 3];
                    case 2:
                      this.an.info(Co.EPo + " not remove self"), i3.label = 3;
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.refreshStores = function(t4, i3) {
              var n3, e3;
              if (this.an.info(Co.EPo + " refreshStores ".concat(t4, " ").concat(i3)), !localStorage)
                return [];
              var r3 = localStorage.getItem(this.name), s3 = r3 ? r3.split(",") : [], o2 = [], u2 = [];
              if (s3.length > 0) {
                for (var a2 = [], c2 = 0; c2 < s3.length; c2++) {
                  var h2 = s3[c2].split("-"), f2 = h2[0], l2 = h2[1], d2 = null === (n3 = f2.split("/")) || void 0 === n3 ? void 0 : n3[0];
                  if (this.an.info(Co.EPo + " refreshStores stores: ".concat(f2, " ").concat(l2)), "2" == t4)
                    d2 !== i3 && a2.push(f2 + "-" + l2);
                  else if ("0" == t4)
                    d2 !== i3 && a2.push(f2 + "-" + l2), d2 === i3 && a2.push(f2 + "-" + t4);
                  else if ("2" !== l2) {
                    if (f2.indexOf("/") > -1)
                      this.lg() - parseInt((null === (e3 = f2.split("/")) || void 0 === e3 ? void 0 : e3[1]) || "0") > 86400 && u2.push(d2);
                    var v2 = d2 + "/" + this.lg();
                    a2.push(v2 + "-" + t4);
                  }
                  -1 === d2.indexOf(this.dg) && "0" == l2 && o2.push(d2);
                }
                localStorage.setItem(this.name, a2.join(","));
              }
              return [o2, u2];
            }, t3.prototype.dropInstance = function(t4) {
              return Oh(this, void 0, void 0, function() {
                var i3;
                return Ih(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      this.an.info(Co.EPo + " dropInstance ".concat(t4)), n3.label = 1;
                    case 1:
                      return n3.trys.push([1, 4, , 5]), [4, kh().dropInstance({ name: t4 })];
                    case 2:
                      return n3.sent(), [4, this.manualDeleteDB(t4)];
                    case 3:
                      return n3.sent(), [3, 5];
                    case 4:
                      return i3 = n3.sent(), this.an.info(Co.EPo + " dropInstance fail ".concat(null == i3 ? void 0 : i3.message)), [3, 5];
                    case 5:
                      return [2];
                  }
                });
              });
            }, t3.prototype.manualDeleteDB = function(t4) {
              return new Promise(function(i3, n3) {
                var e3 = window && (window.indexedDB || window.mozIndexedDB || window.webkitIndexedDB || window.msIndexedDB);
                if (e3) {
                  var r3 = e3.deleteDatabase(t4);
                  r3.onsuccess = function() {
                    return i3();
                  }, r3.onerror = function(t5) {
                    return n3(t5);
                  }, r3.onblocked = function() {
                    return n3(new Error("please close other connection"));
                  };
                } else
                  i3();
              });
            }, t3.prototype.getCacheStoreData = function(t4, i3) {
              return Oh(this, void 0, void 0, function() {
                var n3, e3, r3, s3, o2, u2, a2, c2 = this;
                return Ih(this, function(h2) {
                  switch (h2.label) {
                    case 0:
                      return h2.trys.push([0, 12, , 13]), n3 = this.getDeleteKey(), [4, (e3 = kh().createInstance({ name: t4 })).keys()];
                    case 1:
                      return r3 = h2.sent(), this.an.info(Co.EPo + " ".concat(i3, " ").concat(t4, " get cache keys ").concat(r3)), s3 = [], n3.forEach(function(t5) {
                        r3.filter(function(i4) {
                          return i4.includes(t5);
                        }).length > 0 && s3.push(t5), r3 = r3.filter(function(i4) {
                          return !i4.includes(t5);
                        });
                      }), s3.length > 0 && (this.an.info(Co.EPo + " ".concat(i3, " ").concat(t4, " get cache del keys ").concat(s3)), s3.forEach(function(t5) {
                        c2.setDeleteKey("remove", t5);
                      })), o2 = r3.filter(function(t5) {
                        return t5.indexOf("_head") > -1;
                      }), u2 = [], this.an.info(Co.EPo + " ".concat(i3, " ").concat(t4, " get cache head keys ").concat(JSON.stringify(o2))), o2.length > 0 ? [4, this.readStoreDatas(o2, r3, e3)] : [3, 7];
                    case 2:
                      return (null == (u2 = h2.sent()) ? void 0 : u2.length) ? [3, 6] : (this.an.info(Co.EPo + " ".concat(i3, " ").concat(t4, " get cache empty")), i3 ? [4, this.removeOldStoreFromStorage(i3, t4)] : [3, 4]);
                    case 3:
                      return h2.sent(), [3, 6];
                    case 4:
                      return [4, this.removeStoreFromStorage(t4)];
                    case 5:
                      h2.sent(), h2.label = 6;
                    case 6:
                      return [3, 11];
                    case 7:
                      return this.an.info(Co.EPo + " ".concat(i3, " ").concat(t4, " get cache head empty")), i3 ? [4, this.removeOldStoreFromStorage(i3, t4)] : [3, 9];
                    case 8:
                      return h2.sent(), [3, 11];
                    case 9:
                      return [4, this.removeStoreFromStorage(t4)];
                    case 10:
                      h2.sent(), h2.label = 11;
                    case 11:
                      return [2, u2];
                    case 12:
                      return a2 = h2.sent(), this.an.warn(Co.EPo + " get cache failed ".concat(t4, " ").concat(a2)), [3, 13];
                    case 13:
                      return [2];
                  }
                });
              });
            }, t3.prototype.readStoreDatas = function(t4, i3, n3) {
              return Oh(this, void 0, void 0, function() {
                var e3, r3, s3, o2;
                return Ih(this, function(u2) {
                  switch (u2.label) {
                    case 0:
                      e3 = [], r3 = function(r4) {
                        var o3, u3, a2, c2, h2, f2, l2, d2, v2, m2, p2;
                        return Ih(this, function(g2) {
                          switch (g2.label) {
                            case 0:
                              u3 = (o3 = t4[r4]).replace("_head", ""), a2 = i3.filter(function(t5) {
                                return t5.indexOf(u3) > -1;
                              }), c2 = null, h2 = [], f2 = [], l2 = void 0, d2 = 0, g2.label = 1;
                            case 1:
                              return d2 < a2.length ? [4, n3.getItem(v2 = a2[d2])] : [3, 4];
                            case 2:
                              m2 = g2.sent(), v2.startsWith(u3 + "_head") ? c2 = m2 : v2.startsWith(u3 + "_publish") ? h2.push(m2) : v2.startsWith(u3 + "_play") ? f2.push(m2) : v2.startsWith("qec_" + u3) && (l2 = m2), g2.label = 3;
                            case 3:
                              return d2++, [3, 1];
                            case 4:
                              return p2 = (/* @__PURE__ */ new Date()).getTime() - parseInt(u3), c2 ? h2.length > 0 || f2.length > 0 || l2 ? (e3.push({ timestamp: parseInt(u3), head: c2, publishInfos: h2, playInfos: f2, chargeInfos: l2 }), [3, 7]) : [3, 5] : [3, 7];
                            case 5:
                              return 0 === h2.length && 0 === f2.length && !l2 && p2 > 6e4 ? (s3.an.info(Co.EPo + " readStoreDatas remove ".concat(o3)), [4, n3.removeItem(o3)]) : [3, 7];
                            case 6:
                              g2.sent(), g2.label = 7;
                            case 7:
                              return [2];
                          }
                        });
                      }, s3 = this, o2 = 0, u2.label = 1;
                    case 1:
                      return o2 < t4.length ? [5, r3(o2)] : [3, 4];
                    case 2:
                      u2.sent(), u2.label = 3;
                    case 3:
                      return o2++, [3, 1];
                    case 4:
                      return [2, e3];
                  }
                });
              });
            }, t3.prototype.saveItem = function(t4, i3) {
              return Oh(this, void 0, void 0, function() {
                var n3;
                return Ih(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return e3.trys.push([0, 2, , 3]), [4, this.vg.setItem(t4, i3)];
                    case 1:
                      return e3.sent(), [3, 3];
                    case 2:
                      return n3 = e3.sent(), this.an.warn(Co.EPo + " save " + JSON.stringify(n3)), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.getItem = function(t4) {
              return Oh(this, void 0, void 0, function() {
                var i3;
                return Ih(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return n3.trys.push([0, 2, , 3]), [4, this.vg.getItem(t4)];
                    case 1:
                      return [2, n3.sent()];
                    case 2:
                      return i3 = n3.sent(), this.an.warn(Co.EPo + " get " + JSON.stringify(i3)), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.removeItem = function(t4) {
              return Oh(this, void 0, void 0, function() {
                var i3;
                return Ih(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return n3.trys.push([0, 2, , 3]), [4, this.vg.removeItem(t4)];
                    case 1:
                      return n3.sent(), this.an.info(Co.EPo + " removeItem ".concat(JSON.stringify(t4))), [3, 3];
                    case 2:
                      return i3 = n3.sent(), this.an.warn(Co.EPo + " remove " + JSON.stringify(i3)), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.clearItems = function(t4) {
              return Oh(this, void 0, void 0, function() {
                var i3, n3, e3, r3;
                return Ih(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      return s3.trys.push([0, 6, , 7]), this.an.info(Co.EPo + " call clearItems ".concat(t4)), [4, this.vg.keys()];
                    case 1:
                      i3 = s3.sent(), this.an.info(Co.EPo + " clearItems store ".concat(JSON.stringify(i3))), n3 = i3.filter(function(i4) {
                        return i4.indexOf(t4) > -1;
                      }), this.an.info(Co.EPo + " clearItems clear ".concat(JSON.stringify(n3))), e3 = 0, s3.label = 2;
                    case 2:
                      return e3 < n3.length ? [4, this.removeItem(n3[e3])] : [3, 5];
                    case 3:
                      s3.sent(), s3.label = 4;
                    case 4:
                      return e3++, [3, 2];
                    case 5:
                      return this.setDeleteKey("remove", t4), [3, 7];
                    case 6:
                      return r3 = s3.sent(), this.an.warn(Co.EPo + " clear " + r3.toString()), [3, 7];
                    case 7:
                      return [2];
                  }
                });
              });
            }, t3.prototype.checkItemsIsClear = function(t4) {
              return Oh(this, void 0, void 0, function() {
                var i3, n3, e3;
                return Ih(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return r3.trys.push([0, 2, , 3]), this.an.info(Co.EPo + " checkIsClear call ".concat(t4)), [4, this.vg.keys()];
                    case 1:
                      return i3 = r3.sent(), n3 = i3.filter(function(i4) {
                        return i4.indexOf(t4) > -1;
                      }), this.an.info(Co.EPo + " checkIsClear filters ".concat(JSON.stringify(n3))), [2, n3.length > 0];
                    case 2:
                      return e3 = r3.sent(), this.an.warn(Co.EPo + " checkIsClear err ".concat(JSON.stringify(e3))), [2, true];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.getUnReportCachedDatas = function(t4) {
              return Oh(this, void 0, void 0, function() {
                var i3, n3, e3;
                return Ih(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return [4, this.filterItems(t4)];
                    case 1:
                      return i3 = r3.sent(), n3 = [], i3 && i3.length > 0 ? (e3 = i3.filter(function(t5) {
                        return t5.indexOf("_head") > -1;
                      }), [4, this.readStoreDatas(e3, i3, this.vg)]) : [3, 3];
                    case 2:
                      n3 = r3.sent(), r3.label = 3;
                    case 3:
                      return [2, n3];
                  }
                });
              });
            }, t3.prototype.filterItems = function(t4) {
              return Oh(this, void 0, void 0, function() {
                var i3, n3;
                return Ih(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return e3.trys.push([0, 2, , 3]), [4, this.vg.keys()];
                    case 1:
                      return i3 = e3.sent(), [2, "" !== t4 ? i3.filter(function(i4) {
                        return -1 === i4.indexOf(t4);
                      }) : i3];
                    case 2:
                      return n3 = e3.sent(), this.an.warn(Co.EPo + " filter " + JSON.stringify(n3)), [3, 3];
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.getOldStores = function(t4) {
              return this.refreshOldStores(t4, "1");
            }, t3.prototype.refreshOldStores = function(t4, i3, n3) {
              if (this.an.info(Co.EPo + " refresh old ".concat(t4, " ").concat(i3, " ").concat(n3)), !localStorage)
                return [];
              var e3 = localStorage.getItem(t4);
              if (!(null == e3 ? void 0 : e3.length))
                return this.an.info(Co.EPo + " refresh old no storage ".concat(t4)), localStorage.removeItem(t4), [];
              var r3 = e3 ? e3.split(",") : [], s3 = [];
              if (r3.length > 0) {
                for (var o2 = [], u2 = 0; u2 < r3.length; u2++) {
                  var a2 = r3[u2].split("-"), c2 = a2[0], h2 = a2[1];
                  this.an.info(Co.EPo + " refresh old stores: ".concat(c2, " ").concat(h2)), "2" == i3 ? c2 !== n3 && o2.push(c2 + "-" + h2) : "1" === i3 && (s3.push(c2), o2.push(c2 + "-" + i3));
                }
                localStorage.setItem(t4, o2.join(","));
              }
              return s3;
            }, t3.prototype.removeOldStoreFromStorage = function(t4, i3) {
              return Oh(this, void 0, void 0, function() {
                return Ih(this, function(n3) {
                  switch (n3.label) {
                    case 0:
                      return i3 === this.dg ? [3, 2] : (this.an.info(Co.EPo + " remove old store ".concat(i3)), [4, this.dropInstance(i3)]);
                    case 1:
                      return n3.sent(), this.refreshOldStores(t4, "2", i3), [3, 3];
                    case 2:
                      this.an.info(Co.EPo + " not remove old self"), n3.label = 3;
                    case 3:
                      return [2];
                  }
                });
              });
            }, t3.prototype.setDeleteKey = function(t4, i3) {
              this.an.info(Co.EPo + " set del ".concat(t4, " ").concat(i3));
              var n3 = this.getDeleteKey(), e3 = n3.findIndex(function(t5) {
                return t5 === i3;
              });
              "add" === t4 ? -1 === e3 && n3.push(i3) : e3 >= 0 && n3.splice(e3, 1), this.an.info(Co.EPo + " set del keys ".concat(JSON.stringify(n3))), localStorage.setItem(this.deletedKeys, n3.join(","));
            }, t3.prototype.getDeleteKey = function() {
              var t4 = localStorage.getItem(this.deletedKeys), i3 = t4 ? t4.split(",") : [];
              return this.an.info(Co.EPo + " get del keys ".concat(JSON.stringify(i3))), i3;
            }, t3;
          }(), Th = function() {
            function t3(t4) {
              void 0 === t4 && (t4 = ""), this.mg = t4, this.count = 0, this.isStarting = false, this.timer = 0, this.lastLogTime = 0, this.speed = 0, this.lastTime = 0;
            }
            return t3.prototype.add = function(t4) {
              this.isStarting && (this.count += t4);
            }, t3.prototype.stop = function() {
              return this.isStarting = false, this.reset();
            }, t3.prototype.start = function(t4) {
              var i3 = this;
              void 0 === t4 && (t4 = 0), this.isStarting = true, this.count = 0, clearInterval(this.timer), t4 && (this.timer = window.setInterval(function() {
                i3.speed = i3.count / t4, i3.count = 0;
              }, t4));
            }, t3.prototype.reset = function() {
              this.count = 0, clearInterval(this.timer), this.timer = 0, this.speed = 0;
            }, t3;
          }(), Ch = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Ah = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          };
          var zh = $e.logreport, Dh = function() {
            function t3(t4, i3, n3) {
              var e3 = this;
              this.an = t4, this.pn = i3, this.gn = n3, this.pg = [], this.gg = [], this.bg = 0, this.yg = 0, this.wg = 0, this.Sg = [], this.Eg = 6e4, this.kg = false, this.Ig = {}, this.Rg = 6e4, this.Tg = 20, this.Cg = false, this.beforeunloadListener = function() {
                e3.an.info("".concat(Co.MSI, " beforeunload")), e3.Ag.resetStorageStores();
              }, this.Ag = new Rh(this.CacheKey, t4, this), this.bindListener(), this.bindDestroyListener(), this.zg = new Th("speed log");
            }
            return Object.defineProperty(t3.prototype, "uploadCreateTime", { get: function() {
              return Math.round(this.yg / 1e3);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "speed", { get: function() {
              return this.zg.speed;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "CacheKey", { get: function() {
              return "z_s_c2_" + this.pn.appid;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "oldCacheKey", { get: function() {
              return "z_s_c_" + this.pn.appid;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "billingTimer", { get: function() {
              return this.pn.streamCenter.billingTimer;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "hasPublishingStream", { get: function() {
              var t4, i3 = this.gn.publisherList, n3 = false;
              for (var e3 in i3)
                if (null === (t4 = i3[e3].publisher) || void 0 === t4 ? void 0 : t4.Xh) {
                  n3 = true;
                  break;
                }
              return n3;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "Ng", { get: function() {
              var t4 = this.gn.playerList, i3 = false;
              for (var n3 in t4) {
                var r3 = t4[n3];
                if (!(null == r3 ? void 0 : r3.isProbe) && (null == r3 ? void 0 : r3.isStreaming) && [e2.ey.L3, e2.ey.RTC].includes(r3.playMode)) {
                  i3 = true;
                  break;
                }
              }
              return i3;
            }, enumerable: false, configurable: true }), t3.prototype.checkIfSupportNTP = function() {
              var t4, i3 = null === (t4 = this.pn.rtm) || void 0 === t4 ? void 0 : t4.getNetworkInfo().timestamp;
              i3 && (this.an.info(Co.kEb + " use ntp. gap: " + (i3 - Date.now())), this.Cg = true);
            }, t3.prototype.Pg = function() {
              var t4 = navigator.userAgent.match(/iPad/i) || navigator.userAgent.match(/iPhone/i), i3 = navigator.userAgent, n3 = "micromessenger" == i3.toLowerCase().match(/MicroMessenger/i), e3 = i3.indexOf("Android") > -1 || i3.indexOf("Adr") > -1;
              return t4 || n3 && e3 ? "pagehide" : "beforeunload";
            }, t3.prototype.bindListener = function() {
              var t4 = this.Pg();
              window.addEventListener(t4, this.beforeunloadListener);
            }, t3.prototype.offListener = function() {
              var t4 = this.Pg();
              window.removeEventListener(t4, this.beforeunloadListener);
            }, t3.prototype.bindDestroyListener = function() {
              var t4 = this;
              this.pn.listenerList._engineDestroy.push(function() {
                t4.an.info("".concat(Co.MSI, " _engineDestroy")), t4.Ig = {}, t4.Ag.resetStorageStores(), t4.offListener();
              });
            }, t3.prototype.updateQualityOrChargeInfo = function(t4, i3, n3) {
              var e3;
              this.an.info(Co.Tk2 + " update info ".concat(t4, " ").concat(!!i3));
              var r3 = this._now();
              !i3 || 0 !== this.pg.length || 0 !== this.gg.length || this.Mg && 0 !== (null === (e3 = this.Mg) || void 0 === e3 ? void 0 : e3.infos.length) || (this.yg = r3, this._saveSpeedLogHead(), 0 === this.bg && (this.bg = r3)), i3 && (t4 == f.publish_quality ? this.handlePublishQualityData(i3) : t4 == f.play_quality ? this.handlePlayQualityData(i3) : t4 == f.charge && this.handleChargeInfoData(i3));
              var s3 = this.xg(), o2 = s3 > 0, u2 = n3 && o2, a2 = s3 > 8e3, c2 = 0 !== this.bg && r3 - this.bg > this.Rg;
              (o2 && c2 || a2 || u2) && (this.an.info(Co.Tk2 + " start upload fire ".concat(a2, ",").concat(c2, ",").concat(u2)), this.streamQualityUpload(this.yg, u2), this.pg = [], this.gg = [], this.resetCharges(), this.yg = 0, this.bg = r3, this.checkHasDataToReport());
            }, t3.prototype.xg = function() {
              var t4, i3, n3;
              if (this.pg.length > 0 || this.gg.length > 0 || (null === (i3 = null === (t4 = this.Mg) || void 0 === t4 ? void 0 : t4.infos) || void 0 === i3 ? void 0 : i3.length) > 0) {
                var e3 = this._getSpeedLogHead(), r3 = { publish_quality_infos: this.pg, play_quality_infos: this.gg, network_type: At(), client_type: 2 };
                return this.Mg && (null === (n3 = this.Mg) || void 0 === n3 ? void 0 : n3.infos.length) > 0 && (r3.charge_infos = JSON.parse(JSON.stringify(this.Mg))), this._createStreamQualityPacket(e3, r3).byteLength;
              }
              return 0;
            }, t3.prototype.checkHasDataToReport = function() {
              this.an.info(Co.K74 + " call"), this.gn.publishersLength || 0 !== Object.keys(this.gn.playerList).length || false !== this.billingTimer.isReporting || (this.an.info(Co.K74 + " no stream or charge to report"), this.bg = 0), this.hasPublishingStream || this.Ng || this.billingTimer.shouldSampleCharge() || (this.an.info(Co.K74 + " no data to report"), this.bg = 0);
            }, t3.prototype.streamQualityUpload = function(t4, i3) {
              var n3, e3, r3, s3 = (null === (e3 = null === (n3 = this.Mg) || void 0 === n3 ? void 0 : n3.infos) || void 0 === e3 ? void 0 : e3.length) > 0;
              if (this.gn.publishersLength > 0 || Object.keys(this.gn.playerList).length > 0 || s3 || i3) {
                var o2 = this._getSpeedLogHead(), u2 = { publish_quality_infos: this.pg, play_quality_infos: this.gg, network_type: At(), client_type: 2 };
                if (this.Mg && (null === (r3 = this.Mg) || void 0 === r3 ? void 0 : r3.infos.length) > 0)
                  this.Mg.timestamp_offset_begin === this.Mg.timestamp_offset_end && 0 === this.Mg.timestamp_diff ? this.an.info(Co.Tk2 + " no charge time") : (u2.charge_infos = JSON.parse(JSON.stringify(this.Mg)), this.an.info(Co.Tk2 + " upload charges ".concat(JSON.stringify({ timestamp: t4, chargeInfos: u2.charge_infos }))));
                this.uploadQuality(t4, o2, u2);
              }
            }, t3.prototype._getStreamReportSocket = function(t4) {
              var i3 = this;
              return new G.l3(function(n3, e3) {
                var r3, s3, o2, u2, a2 = false, c2 = function() {
                  var t5;
                  i3.an.info(Co.Tk2 + " speed log socket open"), a2 = true, i3.zg.start(3e3), i3.jg && n3(i3.jg), null === (t5 = i3.jg) || void 0 === t5 || t5.removeEventListener("open", c2);
                }, h2 = function() {
                  var t5;
                  i3.an.info(Co.Tk2 + " speed log socket close"), a2 || e3("not open, socket closed"), i3.zg.stop(), null === (t5 = i3.jg) || void 0 === t5 || t5.removeEventListener("close", h2);
                }, f2 = function() {
                  var t5;
                  i3.an.info(Co.Tk2 + " speed log socket error"), a2 || e3("not open, socket error"), null === (t5 = i3.jg) || void 0 === t5 || t5.removeEventListener("error", f2);
                }, l2 = function() {
                  !function() {
                    var t5;
                    null === (t5 = i3.jg) || void 0 === t5 || t5.addEventListener("open", c2);
                  }(), function() {
                    var t5, n4;
                    null === (t5 = i3.jg) || void 0 === t5 || t5.addEventListener("close", h2), null === (n4 = i3.jg) || void 0 === n4 || n4.addEventListener("error", f2);
                  }();
                };
                if (i3.jg && 2 != i3.jg.readyState && 3 != i3.jg.readyState)
                  1 == i3.jg.readyState ? (a2 = true, n3(i3.jg)) : l2();
                else {
                  var d2 = i3.pn.appid, v2 = i3.pn.idName, m2 = null === (r3 = i3.pn.roomList[0]) || void 0 === r3 ? void 0 : r3.token;
                  if (!d2 || !v2 || !m2)
                    return i3.an.error(Co.Tk2 + " appid userid token not exist"), void e3("appid userid token not exist");
                  var p2 = "wss://".concat(t4, "/ws/report/stream?appid=").concat(d2, "&product=rtc&token=").concat(encodeURIComponent(m2), "&id_name=").concat(v2);
                  i3.an.info(Co.Tk2 + " stream url " + p2.split("?")[0]), i3.jg = (s3 = p2, void 0 === (u2 = 1) && (u2 = 1), (o2 = gs.proxyCtrl) ? o2.createSocket(s3, u2) : new WebSocket(s3)), l2();
                }
                setTimeout(function() {
                  a2 || i3.pn.engineDestroy || e3("not open, timeout, socket closed");
                }, 1e4);
              });
            }, t3.prototype._createStreamQualityPacket = function(t4, i3) {
              var n3 = zh.SpeedLogHead.create(t4), e3 = zh.QualityEvent.create(i3), r3 = zh.SpeedLogHead.encode(n3).finish(), s3 = zh.QualityEvent.encode(e3).finish(), o2 = this.getQualityHead(r3, s3), u2 = new Uint8Array(12 + r3.length + s3.length);
              return u2.set(o2), u2.set(r3, 12), u2.set(s3, 12 + r3.length), u2;
            }, t3.prototype.qg = function(t4, i3, n3, e3, r3, s3) {
              var o2 = false, u2 = false;
              1 !== t4.readyState && !u2 && e3 && e3(), t4.onmessage = function(i4) {
                (i4.data + "").includes("success") ? (!u2 && n3 && n3(), o2 = true) : (!u2 && e3 && e3(), o2 = true), t4.onmessage = null;
              }, this.zg.add(8 * i3.length), t4.send(i3), setTimeout(function() {
                o2 || (r3 && r3(), u2 = true);
              }, 15e3);
            }, t3.prototype.uploadQuality = function(t4, i3, n3, e3) {
              this.sendPacketReportData(t4, i3, n3, e3);
            }, t3.prototype.sendPacketReportData = function(t4, i3, n3, e3) {
              var r3, s3 = this, o2 = null === (r3 = this.an.url) || void 0 === r3 ? void 0 : r3.split("/")[2];
              if (o2) {
                if (this.checkNetworkIsAbnormal())
                  return this.an.warn(Co.y4U + " ".concat(t4, " network is abnormal")), void this.saveReportPacketsToCache(t4, i3, n3, e3);
                s3._getStreamReportSocket(o2).then(function(r4) {
                  if (s3.kg)
                    return s3.an.warn(Co.y4U + " ".concat(t4, " is sending")), void s3.saveReportPacketsToCache(t4, i3, n3, e3);
                  var o3 = Date.now() % 1e4;
                  s3.kg = true;
                  var u2 = s3._createStreamQualityPacket(i3, n3);
                  s3.an.info(Co.y4U + " ".concat(t4, " send ").concat(o3, " ").concat(e3, " ").concat(null == u2 ? void 0 : u2.byteLength)), s3.qg(r4, u2, function() {
                    return Ch(s3, void 0, void 0, function() {
                      return Ah(this, function(i4) {
                        switch (i4.label) {
                          case 0:
                            return this.an.info(Co.y4U + " ".concat(t4, " send suc ").concat(o3)), this.kg = false, this.delStreamData(t4), e3 ? [4, this.Ag.removeStoreFromStorage(e3)] : [3, 2];
                          case 1:
                            i4.sent(), i4.label = 2;
                          case 2:
                            return this.checkCachePacketsToReport(true), [2];
                        }
                      });
                    });
                  }, function() {
                    s3.an.info(Co.y4U + " ".concat(t4, " send error ").concat(o3)), s3.kg = false, s3.retryReportPackets(t4, i3, n3, e3);
                  }, function() {
                    s3.an.info(Co.y4U + " ".concat(t4, " send timeout ").concat(o3)), s3.kg = false, s3.retryReportPackets(t4, i3, n3, e3);
                  }, o3);
                }).catch(function(r4) {
                  "appid userid token not exist" !== r4 ? (s3.an.info(Co.y4U + " open socket error, retry upload quality event"), s3.retryReportPackets(t4, i3, n3, e3)) : s3.an.info(Co.y4U + " stop retry upload quality event.");
                });
              }
            }, t3.prototype.retryReportPackets = function(t4, i3, n3, e3) {
              this.an.info(Co.ivM + " retry packets"), this.saveReportPacketsToCache(t4, i3, n3, e3), this.checkCachePacketsToReport(false);
            }, t3.prototype.checkCachePacketsToReport = function(t4) {
              var i3 = this;
              this.Lg && clearTimeout(this.Lg), this.Eg = t4 ? 5e3 : 6e4, this.Lg = setTimeout(function() {
                var t5 = i3.Sg.shift();
                if (t5) {
                  var n3 = t5.timeStampKey, e3 = t5._SpeedLogHead, r3 = t5._QualityEvent, s3 = t5.storeName;
                  i3.an.info(Co.VdQ + " ".concat(n3, " ").concat(s3)), i3.sendPacketReportData(n3, e3, r3, s3);
                } else
                  i3.checkStorageDataToReport();
              }, this.Eg);
            }, t3.prototype.saveReportPacketsToCache = function(t4, i3, n3, e3) {
              (this.an.info(Co.ifL + " call ".concat(t4)), this.Sg.length >= this.Tg) ? this.an.info(Co.ifL + " ".concat(this.Sg.length)) : this.Sg.find(function(i4) {
                return i4.timeStampKey === t4;
              }) || this.Sg.push({ timeStampKey: t4, _SpeedLogHead: i3, _QualityEvent: n3, storeName: e3 });
            }, t3.prototype.checkStorageDataToReport = function() {
              return Ch(this, void 0, void 0, function() {
                var t4;
                return Ah(this, function(i3) {
                  switch (i3.label) {
                    case 0:
                      return [4, this.Ag.getUnReportCachedDatas(0 === this.yg ? "" : this.yg + "")];
                    case 1:
                      return t4 = i3.sent(), this.uploadUnReportDatas(t4), [2];
                  }
                });
              });
            }, t3.prototype.getQualityHead = function(t4, i3) {
              var n3 = new Uint8Array(12);
              n3[0] = 0, n3[1] = 12, n3[2] = t4.length >> 8, n3[3] = t4.length - (n3[2] << 8), n3[4] = i3.length >> 24, n3[5] = i3.length - (n3[4] << 24) >> 16, n3[6] = i3.length - (n3[4] << 24) - (n3[5] << 16) >> 8, n3[7] = i3.length - (n3[4] << 24) - (n3[5] << 16) - (n3[6] << 8);
              var e3 = Math.ceil(this._now() / 1e3);
              return n3[8] = e3 >> 24, n3[9] = e3 - (n3[8] << 24) >> 16, n3[10] = e3 - (n3[8] << 24) - (n3[9] << 16) >> 8, n3[11] = e3 - (n3[8] << 24) - (n3[9] << 16) - (n3[10] << 8), n3;
            }, t3.prototype.handlePublishQualityData = function(t4) {
              var i3, n3 = this.gn.getRoomByStreamID(t4.stream_id), e3 = null === (i3 = this.gn.publisherList[t4.stream_id]) || void 0 === i3 ? void 0 : i3.publisher;
              if (n3 && e3) {
                var r3 = e3.id, s3 = this.pg.find(function(i4) {
                  return i4.stream_id == t4.stream_id && i4.video_width == t4.frameWidth && i4.video_height == t4.frameHeight && i4.session_id == r3;
                });
                s3 || (s3 = { stream_id: t4.stream_id, session_id: r3, video_width: t4.frameWidth, video_height: t4.frameHeight, infos: [], room_id: n3 ? n3.roomID : "", evnvironment: 1, room_session_id: n3 ? Number(n3.roomSessionID) : 0, resource_type: 2 }, t4.ipv4 && (s3.ipv4 = t4.ipv4, this.an.info("".concat(Co.KBL, " stream_id: ").concat(t4.stream_id, ", ip: ").concat(s3.ipv4, " "))), t4.ipv6 && (s3.ipv6 = t4.ipv6, this.an.info("".concat(Co.KBL, " stream_id: ").concat(t4.stream_id, " ip: ").concat(s3.ipv6, " "))), this.pg.push(s3)), s3.infos.push({ audio_bitrate: Math.round(t4.audioBitrate) || 0, video_bitrate: Math.round(t4.videoBitrate) || 0, video_capture_fps: Math.round(10 * t4.videoFPS) || 0, video_network_fps: Math.round(10 * t4.videoTransferFPS) || 0, uplink_plr: t4.audioPacketsLostRate, rtt: Math.round(1e3 * t4.currentRoundTripTime) || 0, audio_network_fps: Math.round(10 * t4.audioFPS), captured_sound_level: Math.round(100 * t4.audioLevel), sample_time_offset: Math.round((this._now() - this.yg) / 10) }), this.saveStreamInfo("publish", s3);
              } else
                this.an.info("".concat(Co.KBL, " room not exist. ").concat(!!n3, " "));
            }, t3.prototype.handlePlayQualityData = function(t4) {
              var i3 = this.gn.getRoomByStreamID(t4.stream_id), n3 = this.gn.playerList[t4.stream_id];
              if (n3 && i3) {
                var e3 = { l3: 3, rtc: 2, cdn: 2 }[n3.playMode], r3 = n3.id, s3 = this.gg.find(function(i4) {
                  return i4.stream_id == t4.stream_id && i4.video_width == t4.frameWidth && i4.video_height == t4.frameHeight && i4.resource_type == e3 && i4.session_id == r3;
                });
                s3 || (s3 = { stream_id: t4.stream_id, session_id: r3, video_width: t4.frameWidth, video_height: t4.frameHeight, infos: [], room_id: i3 ? i3.roomID : "", room_session_id: i3 ? Number(i3.roomSessionID) : 0, resource_type: e3 }, t4.ipv4 && (s3.ipv4 = t4.ipv4, this.an.info("".concat(Co.RM$, " ").concat(t4.stream_id, " ip ").concat(s3.ipv4, " "))), t4.ipv6 && (s3.ipv6 = t4.ipv6, this.an.info("".concat(Co.RM$, " ").concat(t4.stream_id, " ip ").concat(s3.ipv6, " "))), this.gg.push(s3)), s3.infos.push({ audio_bitrate: Math.round(t4.audioBitrate) || 0, video_bitrate: Math.round(t4.videoBitrate) || 0, video_network_fps: Math.round(10 * t4.videoFPS) || 0, downlink_plr: Math.round(t4.audioPacketsLostRate) || 0, audio_network_fps: Math.round(10 * t4.audioFPS) || 0, audio_break_duration: Math.round(t4.audio_break_duration / 10), video_break_duration: Math.round(t4.video_break_duration / 10), rtt: Math.round(1e3 * t4.currentRoundTripTime) || 0, rendered_sound_level: Math.round(100 * t4.audioLevel), audio_break_cancel_duration: Math.round(t4.audio_break_cancel_duration / 10), video_break_cancel_duration: Math.round(t4.video_break_cancel_duration / 10), audio_decode_time: Math.round(t4.audio_decode_time / 10), video_decode_time: Math.round(t4.video_decode_time / 10), real_sampling_interval: Math.round(t4.real_sampling_interval / 10), video_frames_decoded: Math.round(t4.videoFramesDecoded) || 0, video_frames_dropped: Math.round(t4.videoFramesDropped) || 0, sample_time_offset: Math.round((this._now() - this.yg) / 10), peer_to_peer_plr: t4.peerToPeerPacketLostRate, peer_to_peer_delay: t4.peerToPeerDelay }), this.saveStreamInfo("play", s3);
              } else
                this.an.info("".concat(Co.RM$, " player or room not exist. ").concat(!!n3, " ").concat(!!i3, " "));
            }, t3.prototype.handleChargeInfoData = function(t4) {
              var i3, n3;
              this.Mg || (this.Mg = { room_id: "", timestamp_offset_begin: 0, timestamp_offset_end: 0, timestamp_diff_flag: 0, timestamp_diff: 0, infos: [] }), (null === (i3 = this.pn.roomList[0]) || void 0 === i3 ? void 0 : i3.roomID) && (this.Mg.room_id = null === (n3 = this.pn.roomList[0]) || void 0 === n3 ? void 0 : n3.roomID);
              var e3 = this._now(), r3 = this.yg;
              this.an.info("".concat(Co._ny, " charge ").concat(e3, " ").concat(r3, " ").concat(JSON.stringify(t4))), 0 === this.Mg.infos.length && (this.Mg.timestamp_offset_begin = Math.round((e3 - r3) / 1e3), 0 !== this.wg && (this.Mg.timestamp_diff = Math.round((e3 - this.wg) / 1e3), this.Mg.timestamp_diff_flag = 1, this.an.info("".concat(Co._ny, " charge time diff ").concat(this.wg, " ").concat(this.Mg.timestamp_diff)))), this.wg = e3, this.Mg.timestamp_offset_end = Math.round((e3 - r3) / 1e3), this.Mg.infos.push(t4), this.saveChargeInfos(this.Mg);
            }, t3.prototype.supplementChargeTime = function() {
              0 === this.wg && (this.wg = this._now(), this.an.info("".concat(Co.SK, " charge time ").concat(this.wg, " ")));
            }, t3.prototype.resetCharges = function() {
              this.Mg && (this.Mg = { room_id: "", timestamp_offset_begin: 0, timestamp_offset_end: 0, timestamp_diff_flag: 0, timestamp_diff: 0, infos: [] });
            }, t3.prototype.resetChargeTime = function() {
              this.wg = 0;
            }, t3.prototype.stopSampleCharge = function() {
              this.resetChargeTime(), this.checkHasDataToReport();
            }, t3.prototype._saveSpeedLogHead = function() {
              if (0 !== this.yg) {
                var t4 = this._getSpeedLogHead();
                this.Ag.saveItem(this.yg + "_head", t4);
              }
            }, t3.prototype.saveStreamInfo = function(t4, i3) {
              0 !== this.yg && this.Ag.saveItem("".concat(this.yg, "_").concat(t4).concat(i3.stream_id), i3);
            }, t3.prototype.saveChargeInfos = function(t4) {
              0 !== this.yg && this.Ag.saveItem("qec_".concat(this.yg), t4);
            }, t3.prototype.delStreamData = function(t4) {
              var i3 = this.Sg.findIndex(function(i4) {
                return i4.timeStampKey === t4;
              });
              i3 > -1 && (this.an.info("".concat(Co.MSI, " del cache ").concat(i3, " ").concat(t4)), this.Sg.splice(i3, 1)), this.clearStoreItems(t4 + "");
            }, t3.prototype.clearStoreItems = function(t4) {
              var i3 = this;
              this.an.info("".concat(Co.JX$, " clearStoreItems ").concat(t4)), this.Ag.setDeleteKey("add", t4), this.Ag.clearItems(t4), setTimeout(function() {
                return Ch(i3, void 0, void 0, function() {
                  return Ah(this, function(i4) {
                    switch (i4.label) {
                      case 0:
                        return [4, this.checkClear(t4)];
                      case 1:
                        return i4.sent(), [2];
                    }
                  });
                });
              }, 1e3);
            }, t3.prototype.checkClear = function(t4) {
              return Ch(this, void 0, void 0, function() {
                var i3, n3 = this;
                return Ah(this, function(e3) {
                  switch (e3.label) {
                    case 0:
                      return this.an.info("".concat(Co.IGr, " call ").concat(t4)), [4, this.Ag.checkItemsIsClear(t4)];
                    case 1:
                      return i3 = e3.sent(), this.Ig[t4] ? this.Ig[t4]++ : this.Ig[t4] = 1, i3 ? (this.an.info("".concat(Co.IGr, " count ").concat(t4, " ").concat(this.Ig[t4])), this.Ig[t4] && this.Ig[t4] <= 5 && (this.Ag.clearItems(t4), setTimeout(function() {
                        return Ch(n3, void 0, void 0, function() {
                          return Ah(this, function(i4) {
                            switch (i4.label) {
                              case 0:
                                return [4, this.checkClear(t4)];
                              case 1:
                                return i4.sent(), [2];
                            }
                          });
                        });
                      }, 1e3))) : delete this.Ig[t4], [2];
                  }
                });
              });
            }, t3.prototype._getSpeedLogHead = function(i3) {
              return { version: 20, timestamp: i3 || Math.round(this.yg / 1e3), event: 0, app_id: this.pn.appid, user_id: this.pn.idName, biz_type: 1, time_offset: Oe.A.MAX_VALUE, os_type: (0, Pe.hU)(), scenario: 100 === this.pn.scenario ? void 0 : this.pn.scenario, sdk_version: e2.qt, report_version: this.pn.sdkVerNum, customer_context: t3.reportCustomerContext };
            }, t3.prototype.checkStreamReport = function() {
              var t4 = this;
              this.an.info("".concat(Co.MSI, " check un report call"));
              var i3 = this.Ag.getStoresFromStorage(), n3 = i3[0], e3 = i3[1];
              this.an.info("".concat(Co.MSI, " store: ").concat(null == n3 ? void 0 : n3.length, ", old: ").concat(null == e3 ? void 0 : e3.length));
              for (var r3 = function(i4) {
                var e4 = n3[i4];
                s3.Ag.getCacheStoreData(e4).then(function(i5) {
                  t4.an.info("".concat(Co.MSI, " check un report ").concat(e4, " ").concat(null == i5 ? void 0 : i5.length)), t4.uploadUnReportDatas(i5, e4);
                }).catch(function(i5) {
                  t4.an.info("".concat(Co.MSI, " check un report fail ").concat(e4, " ").concat(null == i5 ? void 0 : i5.message));
                });
              }, s3 = this, o2 = 0; o2 < n3.length; o2++)
                r3(o2);
              for (var u2 = function(i4) {
                var n4 = e3[i4];
                a2.an.info("".concat(Co.MSI, " old ").concat(n4, " check un report")), a2.Ag.getCacheStoreData(n4).then(function(i5) {
                  t4.an.info("".concat(Co.MSI, " old check un report ").concat(n4, " ").concat(null == i5 ? void 0 : i5.length)), t4.uploadUnReportDatas(i5, n4);
                }).catch(function(i5) {
                  t4.an.info("".concat(Co.MSI, " old check un report fail ").concat(n4, " ").concat(null == i5 ? void 0 : i5.message));
                });
              }, a2 = this, c2 = 0; c2 < e3.length; c2++)
                u2(c2);
            }, t3.prototype.uploadUnReportDatas = function(t4, i3, n3) {
              return Ch(this, void 0, void 0, function() {
                var e3 = this;
                return Ah(this, function(r3) {
                  switch (r3.label) {
                    case 0:
                      return this.pn.roomList.length <= 0 ? (this.an.warn(Co.kkS + " no room"), [2]) : (null == t4 ? void 0 : t4.length) > 0 ? (t4.forEach(function(t5) {
                        var n4, r4, s3 = t5.timestamp, o2 = t5.head, u2 = t5.publishInfos, a2 = t5.playInfos, c2 = t5.chargeInfos;
                        if (e3.an.info("".concat(Co.kkS, " cacheData publish ").concat(s3, " ").concat(JSON.stringify(u2))), e3.an.info("".concat(Co.kkS, " cacheData play ").concat(s3, " ").concat(JSON.stringify(a2))), e3.an.info("".concat(Co.kkS, " cacheData charge ").concat(s3, " ").concat(JSON.stringify(c2))), e3.an.info("".concat(Co.kkS, " cacheData ").concat(s3, " ").concat(e3.Ig[s3])), e3.Ig[s3])
                          e3.an.info("".concat(Co.kkS, " the data ").concat(s3, " report"));
                        else {
                          var h2 = { publish_quality_infos: u2, play_quality_infos: a2, network_type: At(), client_type: 2 };
                          (null === (n4 = null == c2 ? void 0 : c2.infos) || void 0 === n4 ? void 0 : n4.length) > 0 && (h2.charge_infos = JSON.parse(JSON.stringify(c2))), i3 && (e3.an.info("".concat(Co.kkS, " save ").concat(s3, " ").concat(i3)), e3.Ag.saveItem(s3 + "_head", o2), u2.forEach(function(t6) {
                            e3.Ag.saveItem("".concat(s3, "_publish").concat(t6.stream_id), t6);
                          }), a2.forEach(function(t6) {
                            e3.Ag.saveItem("".concat(s3, "_play").concat(t6.stream_id), t6);
                          }), (null === (r4 = null == c2 ? void 0 : c2.infos) || void 0 === r4 ? void 0 : r4.length) > 0 && e3.Ag.saveItem("qec_".concat(s3), c2)), e3.an.info(Co.Tk2 + " start upload cache quality. ".concat(s3)), e3.saveReportPacketsToCache(s3, o2, h2);
                        }
                      }), i3 ? (this.an.info(Co.Tk2 + " remove storage store ".concat(n3, " ").concat(i3)), n3 ? [4, this.Ag.removeOldStoreFromStorage(n3, i3)] : [3, 2]) : [3, 4]) : [3, 5];
                    case 1:
                      return r3.sent(), [3, 4];
                    case 2:
                      return [4, this.Ag.removeStoreFromStorage(i3)];
                    case 3:
                      r3.sent(), r3.label = 4;
                    case 4:
                      this.checkCachePacketsToReport(true), r3.label = 5;
                    case 5:
                      return [2];
                  }
                });
              });
            }, t3.prototype.reportOldCacheData = function() {
              var t4 = this, i3 = this.Ag.getOldStores(this.oldCacheKey), n3 = "zc.sqrw.rlcd.0";
              this.an.info("".concat(n3, " old: ").concat(null == i3 ? void 0 : i3.length));
              for (var e3 = function(e4) {
                var s4 = i3[e4];
                r3.an.info("".concat(n3, " old ").concat(s4, " check un report")), r3.Ag.getCacheStoreData(s4, r3.oldCacheKey).then(function(i4) {
                  t4.an.info("".concat(n3, " old check un report ").concat(s4, " ").concat(null == i4 ? void 0 : i4.length)), t4.uploadUnReportDatas(i4, s4, t4.oldCacheKey);
                }).catch(function(i4) {
                  t4.an.info("".concat(n3, " old check un report fail ").concat(s4, " ").concat(null == i4 ? void 0 : i4.message));
                });
              }, r3 = this, s3 = 0; s3 < i3.length; s3++)
                e3(s3);
            }, t3.prototype._now = function(t4) {
              var i3;
              return void 0 === t4 && (t4 = 0), i3 = this.Cg ? this.pn.rtm.getNetworkInfo().timestamp : Date.now(), 1 === t4 && (i3 = Math.round(i3 / 1e3)), i3;
            }, t3.prototype.checkNetworkIsAbnormal = function() {
              var t4;
              return (null === (t4 = this.pn.rtm) || void 0 === t4 ? void 0 : t4.isDisConnect()) && this.pn.networkState == e2.D2.offline ? (this.an.warn(Co.Q9_ + " offline. "), true) : !this.gn.isNetAgentConnect() && (this.an.warn(Co.Q9_ + " netAgent disconnect. "), true);
            }, t3.prototype.resetReport = function() {
              var t4 = this;
              this.pg = [], this.gg = [], this.yg = 0, this.bg = 0, this.Lg && (clearTimeout(this.Lg), this.Lg = null), setTimeout(function() {
                t4.jg && (t4.jg.close(), t4.jg = void 0, t4.kg = false, t4.zg.stop());
              }, 2e4);
            }, t3.reportCustomerContext = 0, t3;
          }();
          function Nh() {
            var t3 = {}, i3 = this, n3 = -10;
            function e3(t4) {
              return /[^\x20-\x7E]+/.test(t4);
            }
            var r3 = { init: function(e4, r4) {
              var s3 = "", o2 = 0;
              try {
                importScripts(e4), i3._ModuleFn(t3), s3 = "suc", o2 = 0;
              } catch (t4) {
                o2 = -1, s3 = "fail " + (null == t4 ? void 0 : t4.message);
              }
              i3.postMessage({ code: o2, errMsg: s3, eventId: r4 }), i3.postMessage({ code: n3, msg: "init webassembly " + s3 });
            }, parseToMiniSdp: function(e4, r4) {
              var s3 = t3._parseToMiniSdp, o2 = t3.allocateUTF8, u2 = t3._getBuffer, a2 = t3.HEAPU8, c2 = t3._free;
              i3.postMessage({ code: n3, msg: "ptm call" });
              var h2 = o2(e4);
              i3.postMessage({ code: n3, msg: "ptm allocate" });
              var f2 = s3(h2);
              if (i3.postMessage({ code: n3, msg: "ptm bufLen " + f2 }), f2 < 0)
                return i3.postMessage({ code: f2, eventId: r4 });
              var l2 = u2();
              i3.postMessage({ code: n3, msg: "ptm getBuf " + l2 });
              var d2 = new Uint8Array(a2.subarray(l2, l2 + f2 - 1)) || new Uint8Array();
              i3.postMessage({ code: 0, data: d2, eventId: r4 });
              try {
                c2(h2), c2(f2), c2(l2);
              } catch (t4) {
                i3.postMessage({ code: n3, msg: "ptm free e " + (null == t4 ? void 0 : t4.message) || 0 });
              }
            }, loadMiniSdpToOriginSdp: function(r4, s3) {
              var o2, u2, a2, c2, h2 = t3._loadMiniSdpToSdp, f2 = t3.UTF8ToString, l2 = t3._malloc, d2 = t3.HEAPU8, v2 = t3._free;
              i3.postMessage({ code: n3, msg: "lmto call" });
              var m2 = l2(r4.length);
              i3.postMessage({ code: n3, msg: "lmto malloc" }), d2.set(r4, m2);
              var p2 = h2(m2, r4.byteLength);
              i3.postMessage({ code: n3, msg: "lmto s" });
              var g2 = f2(p2) || "";
              i3.postMessage({ code: n3, msg: "lmto o " + g2.length });
              for (var b2 = g2.split("\r\n") || [], _2 = ["ice-ufrag", "ice-pwd", "ice-options", "fingerprint", "setup", "mid", "extmap", "sendrecv", "sendonly", "recvonly", "inactive", "rtpmap", "rtcp-fb", "fmtp", "ssrc", "candidate", "msid"]; b2.length; ) {
                var y2 = b2.length, w2 = null === (u2 = null === (o2 = b2[y2 - 1]) || void 0 === o2 ? void 0 : o2.split("=")[1]) || void 0 === u2 ? void 0 : u2.split(":")[0], S2 = b2[y2 - 1];
                if (-1 != (null === (a2 = b2[y2 - 1]) || void 0 === a2 ? void 0 : a2.indexOf("=")) && _2.includes(w2) && 0 != (null === (c2 = b2[y2 - 1]) || void 0 === c2 ? void 0 : c2.indexOf("=")) && !e3(S2))
                  break;
                b2.pop();
              }
              g2 = b2.join("\r\n"), i3.postMessage({ code: 0, data: g2 += "\r\n", eventId: s3 });
              try {
                v2(m2);
              } catch (t4) {
                i3.postMessage({ code: n3, msg: "lmto free " + (null == t4 ? void 0 : t4.message) });
              }
            } };
            onmessage = function(t4) {
              var e4;
              r3[t4.data.command] ? r3[t4.data.command](t4.data.val, t4.data.eventId) : i3.postMessage({ code: n3, msg: "om cmd invalid " + (null === (e4 = null == t4 ? void 0 : t4.data) || void 0 === e4 ? void 0 : e4.command) });
            };
          }
          var Ph, Mh = o(8754).G, xh = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, jh = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, qh = function() {
            function t3(t4) {
              var i3 = this;
              this.an = t4, this.initOK = false, this.Bg = {}, this.seq = 1;
              var n3 = Nh.toString().trim().match(/\{([\s\S]*)\}/)[1], e3 = URL.createObjectURL(new window.Blob([n3], { type: "text/javascript" }));
              this.Ug = new Worker(e3);
              var r3 = function(t5) {
                for (var i4 = (t5 + "=".repeat((4 - t5.length % 4) % 4)).replace(/\-/g, "+").replace(/_/g, "/"), n4 = window.atob(i4), e4 = new Uint8Array(n4.length), r4 = 0; r4 < n4.length; ++r4)
                  e4[r4] = n4.charCodeAt(r4);
                return e4;
              }("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"), s3 = Mh.decompress(Array.from(r3)), o2 = URL.createObjectURL(new window.Blob([s3], { type: "text/javascript" }));
              this.Ug.onmessage = function(t5) {
                var n4 = t5.data;
                n4.eventId && (0, B.JO)(i3.Bg[n4.eventId]) ? (i3.Bg[n4.eventId]({ code: n4.code, data: n4.data }), delete i3.Bg[n4.eventId]) : -10 === (null == n4 ? void 0 : n4.code) && i3.an.info("zc.ms.0.w " + n4.msg);
              }, this.Ug.onmessageerror = function(t5) {
                console.error("Error receiving message from worker: ".concat(t5));
              }, this.Ug.onerror = function(t5) {
                i3.initOK = false, i3.an.warn("zc.ms.0.c worker err " + (null == t5 ? void 0 : t5.message) || 0);
              }, this.initWasm(o2).then(function() {
                i3.initOK = true;
              }).catch(function(t5) {
                i3.initOK = false;
              });
            }
            return t3.prototype.messageHandler = function(t4) {
              var i3 = this;
              return new G.l3(function(n3) {
                t4.eventId = "".concat(t4.command, "_").concat(i3.seq++), i3.Ug.postMessage(t4), i3.Bg[t4.eventId] = function(t5) {
                  n3(t5);
                };
              });
            }, t3.prototype.initWasm = function(t4) {
              return xh(this, void 0, void 0, function() {
                var i3 = this;
                return jh(this, function(n3) {
                  return [2, new Promise(function(n4, e3) {
                    return xh(i3, void 0, void 0, function() {
                      var i4;
                      return jh(this, function(r3) {
                        switch (r3.label) {
                          case 0:
                            return this.an.info("zc.ms.0.c init"), [4, this.messageHandler({ command: "init", val: t4 })];
                          case 1:
                            return 0 === (i4 = r3.sent()).code ? n4(true) : (this.an.warn("zc.ms.0.c fail " + i4.errMsg), e3(false)), [2];
                        }
                      });
                    });
                  })];
                });
              });
            }, t3.prototype.parseToMiniSdp = function(t4) {
              return xh(this, void 0, void 0, function() {
                var i3 = this;
                return jh(this, function(n3) {
                  return [2, new G.l3(function(n4, e3) {
                    return xh(i3, void 0, void 0, function() {
                      var i4, r3;
                      return jh(this, function(s3) {
                        switch (s3.label) {
                          case 0:
                            return (0, B.QP)(t4) && t4 ? this.initOK ? [4, this.messageHandler({ command: "parseToMiniSdp", val: t4 })] : (e3(re.KbN), [2]) : (e3(re.ZEp), [2]);
                          case 1:
                            if (0 === (i4 = s3.sent()).code)
                              n4(i4.data);
                            else {
                              switch (r3 = void 0, i4.code) {
                                case -1:
                                  r3 = re.GY7;
                                  break;
                                case -2:
                                  r3 = re.sP3;
                                  break;
                                case -3:
                                  r3 = re._9F;
                              }
                              e3(r3);
                            }
                            return [2];
                        }
                      });
                    });
                  })];
                });
              });
            }, t3.prototype.loadMiniSdpToOriginSdp = function(t4) {
              return xh(this, void 0, void 0, function() {
                var i3 = this;
                return jh(this, function(n3) {
                  return [2, new G.l3(function(n4, e3) {
                    return xh(i3, void 0, void 0, function() {
                      var i4;
                      return jh(this, function(r3) {
                        switch (r3.label) {
                          case 0:
                            return (0, B.G0)(t4) ? this.initOK ? [4, this.messageHandler({ command: "loadMiniSdpToOriginSdp", val: t4 })] : (e3(re.KbN), [2]) : (e3(re.ZEp), [2]);
                          case 1:
                            return 0 == (i4 = r3.sent()).code && n4(i4.data), [2];
                        }
                      });
                    });
                  })];
                });
              });
            }, Object.defineProperty(t3, "isSupported", { get: function() {
              return !(!window.WebAssembly || !window.Worker);
            }, enumerable: false, configurable: true }), t3.prototype.destroy = function() {
              this.Ug.terminate();
            }, t3;
          }();
          !function(t3) {
            t3.SAVED_CHARGEINFO_REPORT = "zc.bill.scir", t3.CHARGEINFO_SAVING_LOCALSTORAGE = "zc.bill.cisl", t3.CHARGEINFO_GET_AND_REMOVE_LOCALSTORAGE = "zc.bill.cigrl", t3.START_CHARGE_INFO_TIMER = "zc.bill.tm.scit";
          }(Ph || (Ph = {}));
          var Lh, Bh = function() {
            function t3(t4, i3) {
              this.an = t4, this.pn = i3, this.Gg = 5e3, this.Jg = false;
            }
            return Object.defineProperty(t3.prototype, "gn", { get: function() {
              return this.pn.streamCenter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "Fg", { get: function() {
              var t4;
              return null === (t4 = this.gn) || void 0 === t4 ? void 0 : t4.Fg;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "Hg", { get: function() {
              return Object.values(this.gn.playerList).filter(function(t4) {
                return false === (null == t4 ? void 0 : t4.isProbe);
              }).length;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "hasPublishingStream", { get: function() {
              var t4, i3 = this.gn.publisherList, n3 = false;
              for (var e3 in i3)
                if (null === (t4 = i3[e3].publisher) || void 0 === t4 ? void 0 : t4.Xh) {
                  n3 = true;
                  break;
                }
              return n3;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "hasPlayingRTCAndL3Stream", { get: function() {
              var t4, i3, n3 = this.gn.playerList, r3 = false;
              for (var s3 in n3)
                if (!(null === (t4 = n3[s3]) || void 0 === t4 ? void 0 : t4.isProbe) && (null === (i3 = n3[s3]) || void 0 === i3 ? void 0 : i3.isStreaming) && [e2.ey.RTC, e2.ey.L3].includes(n3[s3].playMode)) {
                  r3 = true;
                  break;
                }
              return r3;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "shouldEndSampleCharge", { get: function() {
              var t4, i3;
              return !this.gn || !!this.Jg && (this.shouldReportRoomTime ? 0 === (null === (t4 = this.pn.rtm) || void 0 === t4 ? void 0 : t4.stateCenter.roomModulesList.filter(function(t5) {
                return !t5.isLogout() || !t5.isDisConnect();
              }).length) : 0 === (null === (i3 = this.pn.appConfig.speedlog_config) || void 0 === i3 ? void 0 : i3.charge_info_report_mode) ? 0 === this.gn.publishersLength : 0 === this.Hg);
            }, enumerable: false, configurable: true }), t3.prototype.report = function(t4) {
              var i3, n3, e3;
              if (void 0 === t4 && (t4 = false), this.an.info("zc.bill.tm.r.0 call"), this.gn) {
                if (t4)
                  return this.an.info("zc.bill.tm.r.0 stop"), void (null === (i3 = this.Fg) || void 0 === i3 || i3.updateQualityOrChargeInfo(f.charge, void 0, true));
                if (!this.shouldSampleCharge())
                  return this.an.info("zc.bill.tm.r.0 not sample charge"), null === (n3 = this.Fg) || void 0 === n3 || n3.updateQualityOrChargeInfo(f.charge, void 0), void this.Fg.resetChargeTime();
                var r3 = this.samplingChargeInfos();
                null === (e3 = this.Fg) || void 0 === e3 || e3.updateQualityOrChargeInfo(f.charge, r3);
              } else
                this.an.info("zc.bill.tm.r.0 no stream center");
            }, t3.prototype.shouldStartReportCharge = function() {
              if (!this.pn.appConfig)
                return this.an.info("zc.bill.ssrc.0 no app config"), false;
              var t4 = this.pn.appConfig.speedlog_config.charge_info_report_cycle;
              return this.an.info("zc.bill.ssrc.0 speedlog config ".concat(JSON.stringify(this.pn.appConfig.speedlog_config))), !(!(0, B.Cs)(t4) || 0 === t4) && (this.Gg = 1e3 * t4, true);
            }, t3.prototype.shouldSampleCharge = function() {
              var t4, i3 = this;
              if (!this.pn.appConfig)
                return this.an.info("zc.bill.ssc.0 no app config"), false;
              var n3 = this.pn.appConfig.speedlog_config, e3 = n3.charge_info_report_mode, r3 = n3.charge_info_report_no_playing, s3 = false, o2 = null === (t4 = this.pn.rtm) || void 0 === t4 ? void 0 : t4.stateCenter.roomModulesList.filter(function(t5) {
                return !t5.isLogout();
              }), u2 = function(t5) {
                return 1 === t5 || i3.hasPublishingStream;
              };
              return 1 === r3 ? 0 !== (null == o2 ? void 0 : o2.length) && (this.hasPlayingRTCAndL3Stream || 0 === this.Hg) && (s3 = u2(e3)) : 0 !== r3 && void 0 !== r3 || !this.hasPlayingRTCAndL3Stream || (s3 = u2(e3)), s3;
            }, Object.defineProperty(t3.prototype, "shouldReportRoomTime", { get: function() {
              var t4, i3, n3, e3;
              return !(!(null === (t4 = this.pn.rtm) || void 0 === t4 ? void 0 : t4.stateCenter.appConfig) || !(null === (i3 = this.pn.rtm) || void 0 === i3 ? void 0 : i3.stateCenter.appConfig.speedlog_config) || 0 === (null === (n3 = this.pn.rtm) || void 0 === n3 ? void 0 : n3.stateCenter.appConfig.speedlog_config.charge_info_report_cycle) || 1 !== (null === (e3 = this.pn.rtm) || void 0 === e3 ? void 0 : e3.stateCenter.appConfig.speedlog_config.charge_info_report_no_playing));
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "isReporting", { get: function() {
              return this.Jg;
            }, enumerable: false, configurable: true }), t3.prototype.startChargeInfoTimer = function() {
              var t4 = this;
              if (this.Vg && (clearTimeout(Number(this.Vg)), this.Vg = null, this.shouldEndSampleCharge))
                return this.an.info(Ph.START_CHARGE_INFO_TIMER + " chargeinfos timer report ended"), void (this.Jg = false);
              this.Vg = setTimeout(function() {
                t4.report(), t4.startChargeInfoTimer();
              }, this.Gg);
            }, t3.prototype.supplementPlayingChargeTime = function() {
              this.Jg && this.Fg.supplementChargeTime();
            }, t3.prototype.startChargeInfosUpload = function() {
              this.shouldStartReportCharge() && (this.Jg || (this.Jg = true, this.shouldReportRoomTime && this.report(), this.startChargeInfoTimer(), this.an.info("zsc.sciu.0 call")));
            }, t3.prototype.stopChargeInfosUpload = function() {
              this.an.info("zsc.sciu.1 call"), this.Vg && this.shouldEndSampleCharge && (this.an.info("zsc.sciu.1 stop"), clearTimeout(Number(this.Vg)), this.Vg = null, this.shouldReportRoomTime && this.report(true), this.Jg = false, this.Fg.stopSampleCharge(), this.an.info("zsc.sciu.1 chargeinfos timer report ended"));
            }, t3.prototype.destroy = function() {
              this.an.info("zsc.ds.0 call"), this.Vg && (clearTimeout(Number(this.Vg)), this.Vg = null), this.Jg = false;
            }, t3.prototype.samplingChargeInfos = function() {
              var t4, i3;
              this.an.info("zsc.cci.0 call");
              var n3 = { is_publishing: 0, no_playing: 0 }, r3 = this.gn, s3 = r3.publisherList, o2 = r3.playerList;
              for (var u2 in s3) {
                6 === s3[u2].publisher.state && (n3.is_publishing = 1);
                break;
              }
              var a2 = function(t5) {
                var i4 = o2[t5];
                if (i4.isProbe || !i4.isStreaming || ![e2.ey.RTC, e2.ey.L3].includes(i4.playMode))
                  return "continue";
                i4.playMode === e2.ey.RTC ? (void 0 === n3.play_max_audio_bitrate && (n3.play_max_audio_bitrate = 0), void 0 === n3.play_stream_resolution_infos && (n3.play_stream_resolution_infos = [])) : i4.playMode === e2.ey.L3 && (void 0 === n3.play_l3_max_audio_bitrate && (n3.play_l3_max_audio_bitrate = 0), void 0 === n3.play_l3_stream_resolution_infos && (n3.play_l3_stream_resolution_infos = []));
                var r4 = { width: i4.qualityHandler.Uv.frameWidth, height: i4.qualityHandler.Uv.frameHeight }, s4 = { video_width: r4 && r4.width ? r4.width : 0, video_height: r4 && r4.height ? r4.height : 0, count: 1 };
                !function(t6) {
                  var r5, o3 = t6 === e2.ey.L3, u3 = t6 === e2.ey.RTC;
                  if (u3 ? r5 = n3.play_stream_resolution_infos : o3 && (r5 = n3.play_l3_stream_resolution_infos), !(null == r5 ? void 0 : r5.find(function(t7) {
                    return t7.video_width == s4.video_width && t7.video_height == s4.video_height && (t7.count++, true);
                  })) && (null == r5 || r5.push(s4)), 0 == s4.video_width && 0 == s4.video_height) {
                    var a3 = i4.qualityHandler.Uv.audioBitrate;
                    u3 ? a3 > n3.play_max_audio_bitrate && (n3.play_max_audio_bitrate = Math.round(a3)) : o3 && a3 > n3.play_l3_max_audio_bitrate && (n3.play_l3_max_audio_bitrate = Math.round(a3));
                  }
                }(i4.playMode);
              };
              for (var c2 in o2)
                a2(c2);
              return !this.shouldReportRoomTime || n3.play_stream_resolution_infos && 0 !== (null === (t4 = n3.play_stream_resolution_infos) || void 0 === t4 ? void 0 : t4.length) || n3.play_l3_stream_resolution_infos && 0 !== (null === (i3 = n3.play_l3_stream_resolution_infos) || void 0 === i3 ? void 0 : i3.length) || (n3.no_playing = 1), n3;
            }, t3;
          }(), Uh = function() {
            function t3() {
              this.Qg = {}, this.Yg = 500;
            }
            return t3.prototype.isTrackStopBySDK = function(t4) {
              return void 0 !== this.Qg[t4.id] && performance.now() - this.Qg[t4.id] <= this.Yg;
            }, t3.prototype.recordStopTrack = function(t4) {
              t4 && (this.Qg[t4.id] = performance.now());
            }, t3;
          }(), Gh = function() {
            function t3(t4) {
              this.an = t4, this.Kg = new Uh();
            }
            return t3.prototype.isTrackStopBySDK = function(t4) {
              return this.Kg.isTrackStopBySDK(t4);
            }, t3.prototype.stopTrack = function(t4) {
              t4 && (this.an.info("zc.tk.ut track " + t4.id + " stop"), this.Kg.recordStopTrack(t4), t4.stop());
            }, t3;
          }();
          function Jh() {
            var t3 = this, i3 = 243, n3 = new Uint8Array([0, 0, 0, 1, 101, 184, 0, 4, 0, 0, 9, 255, 254, 222, 35, 192, 166, 30, 73, 128]), e3 = new Uint8Array([0, 0, 0, 1, 103, 77, 64, 51, 140, 141, 78, 64, 60, 34, 17, 168, 0, 0, 0, 1, 104, 238, 60, 128]), r3 = new Uint8Array([0, 0, 0, 1, 64, 1, 12, 1, 255, 255, 1, 96, 0, 0, 3, 0, 144, 0, 0, 3, 0, 0, 3, 0, 30, 186, 2, 64, 0, 0, 0, 1, 66, 1, 1, 1, 96, 0, 0, 3, 0, 144, 0, 0, 3, 0, 0, 3, 0, 30, 160, 136, 69, 150, 233, 111, 11, 128, 64, 0, 0, 3, 0, 64, 0, 0, 3, 3, 194, 0, 0, 0, 1, 68, 1, 192, 115, 192, 137]), s3 = new Uint8Array([0, 0, 0, 1, 40, 1, 172, 26, 224, 244, 133, 49, 47, 246, 227, 105, 128]), o2 = {}, u2 = {}, a2 = {}, c2 = {}, h2 = function() {
              function t4(t5, i4) {
                void 0 === i4 && (i4 = false), this.view = t5, this.isH265 = i4, this.offset = 0, this.current_start_code_size = 0, this.current_nalu_start = 0, this.current_nalu_size = 0, this.start_code_size = 0, this.nalu_start = 0, this.left_size = 0, this.nalu_size = 0, this.left_size = t5.byteLength;
              }
              return t4.prototype.FindStartCode = function() {
                var t5 = this.view.byteLength - this.offset;
                for (this.current_start_code_size = 0, this.current_nalu_start = -1; t5 >= 3; ) {
                  if (0 == this.view.getUint8(this.offset) && 0 == this.view.getUint8(this.offset + 1) && 1 == this.view.getUint8(this.offset + 2))
                    return this.current_start_code_size = 3, this.current_nalu_start = this.offset, this.offset - 1 >= 0 && 0 == this.view.getUint8(this.offset - 1) && (++this.current_start_code_size, --this.current_nalu_start), this.offset += 3, true;
                  --t5, ++this.offset;
                }
                return false;
              }, t4.prototype.FindNalu = function() {
                return this.start_code_size = 0, this.nalu_start = 0, this.nalu_size = 0, !(this.offset >= this.view.byteLength) && (!!this.FindStartCode() && (this.start_code_size = this.current_start_code_size, this.nalu_start = this.current_nalu_start, true));
              }, t4.prototype.NextNalu = function(t5) {
                if (this.start_code_size = 0, this.nalu_start = 0, this.nalu_size = 0, this.offset >= this.view.byteLength)
                  return false;
                if (!this.FindStartCode())
                  return false;
                if (this.start_code_size = this.current_start_code_size, this.nalu_start = this.current_nalu_start, t5) {
                  if (this.isH265) {
                    if (39 !== (126 & this.view.getUint8(this.nalu_start + this.start_code_size)) >> 1)
                      return true;
                  } else if (6 != (31 & this.view.getUint8(this.nalu_start + this.start_code_size)))
                    return true;
                }
                return this.FindStartCode() ? (this.offset = this.current_nalu_start, this.nalu_size = this.current_nalu_start - this.nalu_start, true) : (this.nalu_size = this.view.byteLength - this.nalu_start, true);
              }, t4;
            }();
            function f2(t4, i4) {
              void 0 === i4 && (i4 = 0);
              for (var n4 = t4.length, e4 = [], r4 = 0; r4 < n4; )
                r4 >= i4 && n4 - r4 >= 3 && !t4[r4] && !t4[r4 + 1] && 3 == t4[r4 + 2] ? (e4.push(t4[r4++]), e4.push(t4[r4++]), r4++) : e4.push(t4[r4++]);
              var s4 = new Uint8Array(e4);
              return { output: s4, outLength: s4.length };
            }
            function l2(t4) {
              return Uint8Array.from(Array.from(unescape(encodeURIComponent(t4))).map(function(t5) {
                return t5.charCodeAt(0);
              }));
            }
            function d2(t4) {
              var i4 = 0, n4 = 0;
              return i4 = t4[n4++] << 24, i4 |= t4[n4++] << 16, i4 |= t4[n4++] << 8, i4 |= t4[n4++];
            }
            function v2(t4, n4, e4) {
              var r4 = t4.byteLength, s4 = parseInt(r4 / 255), o3 = r4 % 255, u3 = new ArrayBuffer(1 + (s4 + 1) + r4 + 1), a3 = new DataView(u3), c3 = 0;
              a3.setUint8(c3++, 1 === n4 ? 5 : i3);
              for (var h3 = 0; h3 < s4; h3++)
                a3.setUint8(c3++, 255);
              a3.setUint8(c3++, o3);
              var f3 = new DataView(t4);
              for (h3 = 0; h3 < (null == t4 ? void 0 : t4.byteLength); h3++)
                a3.setInt8(c3++, f3.getInt8(h3));
              a3.setInt8(c3++, 128);
              var l3 = new Uint8Array(u3), d3 = l3;
              if (e4) {
                var v3 = function(t5) {
                  for (var i4 = [], n5 = t5.length, e5 = 0, r5 = 0; r5 < n5; ++r5) {
                    var s5 = t5[r5];
                    s5 <= 3 && e5 >= 2 && (i4.push(3), e5 = 0), i4.push(t5[r5]), 0 == s5 ? ++e5 : e5 = 0;
                  }
                  var o4 = new Uint8Array(i4);
                  return { output: o4, outLength: o4.length };
                }(l3).output;
                d3 = v3;
              }
              return { rbspView: d3, ebspLength: d3.length };
            }
            function m2(a3, c3, m3, p3, g3) {
              var b3 = void 0, _2 = g3[p3], y2 = _2.isLowStream, w2 = _2.kind, S2 = _2.vCodec;
              if (w2 = w2 || "video", y2 = y2 || false, "encode" === a3 ? b3 = function(t4, i4) {
                "audio" === w2 ? i4.enqueue(t4) : _2.onlyAudio ? function(t5, i5, u3, a4, c4) {
                  var h3, f3, l3, d3 = o2[u3];
                  if (d3) {
                    var m4 = a4 ? d3.lowStreamSideInfos : d3.sideInfos, p4 = 0, g4 = "key" === t5.type, b4 = performance.now(), _3 = false, y3 = null === (f3 = null === (h3 = t5.getMetadata) || void 0 === h3 ? void 0 : h3.call(t5)) || void 0 === f3 ? void 0 : f3.mimeType;
                    _3 = y3 ? null !== (l3 = null == y3 ? void 0 : y3.includes("H265")) && void 0 !== l3 && l3 : "H265" === c4;
                    var w3 = 0, S3 = [];
                    if (m4.length > 0) {
                      for (var E3 = m4.length >= 9 ? 9 : m4.length, k2 = 0; k2 < E3; k2++) {
                        var O2 = v2(m4[k2], d3.type, d3.emulationPreventionByte);
                        w3 += 4 + (_3 ? 2 : 1) + (P2 = O2.ebspLength), S3.push(O2);
                      }
                      a4 ? d3.lowStreamSideInfos = [] : d3.sideInfos = [], b4 - d3.recvLastKeyFrameTime > 2e3 && (g4 = true);
                    }
                    _3 && !g4 && b4 - d3.recvLastKeyFrameTime > 2e3 && (g4 = true), g4 && (p4 = _3 ? r3.length + s3.length : e3.length + n3.length);
                    var I2 = new ArrayBuffer(w3 + p4), R2 = new DataView(I2), T2 = 0;
                    if (g4)
                      if (_3) {
                        var C2 = new DataView(r3.buffer);
                        for (z2 = 0; z2 < r3.length; z2++)
                          R2.setInt8(T2++, C2.getInt8(z2));
                      } else
                        for (var A2 = new DataView(e3.buffer), z2 = 0; z2 < e3.length; z2++)
                          R2.setInt8(T2++, A2.getInt8(z2));
                    for (k2 = 0; k2 < S3.length; k2++) {
                      var D2 = S3[k2], N2 = D2.rbspView, P2 = D2.ebspLength;
                      R2.setUint8(T2++, 0), R2.setUint8(T2++, 0), R2.setUint8(T2++, 0), R2.setUint8(T2++, 1), _3 ? (R2.setUint8(T2++, 78), R2.setUint8(T2++, 1)) : R2.setUint8(T2++, 6);
                      for (var M2 = 0; M2 < P2; M2++)
                        R2.setInt8(T2++, N2[M2 - 0]);
                    }
                    if (g4)
                      if (_3) {
                        var x2 = new DataView(s3.buffer);
                        for (z2 = 0; z2 < s3.length; z2++)
                          R2.setInt8(T2++, x2.getInt8(z2));
                      } else {
                        var j2 = new DataView(n3.buffer);
                        for (z2 = 0; z2 < n3.length; z2++)
                          R2.setInt8(T2++, j2.getInt8(z2));
                      }
                    t5.data = I2, g4 && (d3.recvLastKeyFrameTime = b4), i5.enqueue(t5);
                  } else
                    i5.enqueue(t5);
                }(t4, i4, p3, y2, S2) : function(t5, i5, n4, e4, r4) {
                  var s4, u3, a4, c4 = o2[n4];
                  if (c4) {
                    var f3 = e4 ? c4.lowStreamSideInfos : c4.sideInfos;
                    if (f3.length > 0) {
                      var l3 = false, d3 = null === (u3 = null === (s4 = t5.getMetadata) || void 0 === s4 ? void 0 : s4.call(t5)) || void 0 === u3 ? void 0 : u3.mimeType;
                      l3 = d3 ? null !== (a4 = null == d3 ? void 0 : d3.includes("H265")) && void 0 !== a4 && a4 : "H265" === r4;
                      for (var m4 = new DataView(t5.data), p4 = [], g4 = 0, b4 = 0; b4 < f3.length; b4++) {
                        var _3 = v2(f3[b4], c4.type, c4.emulationPreventionByte);
                        g4 += 4 + (l3 ? 2 : 1) + (M2 = _3.ebspLength), p4.push(_3);
                      }
                      e4 ? c4.lowStreamSideInfos = [] : c4.sideInfos = [];
                      for (var y3 = new ArrayBuffer(g4 + t5.data.byteLength), w3 = new DataView(y3), S3 = 0, E3 = new h2(m4, l3), k2 = 0, O2 = false, I2 = false, R2 = false, T2 = 0; E3.NextNalu(); )
                        if (T2++, l3) {
                          if (32 == (C2 = (126 & m4.getUint8(E3.nalu_start + E3.start_code_size)) >> 1))
                            O2 = true, k2 += E3.nalu_size;
                          else if (33 == C2)
                            I2 = true, k2 += E3.nalu_size;
                          else if (34 == C2)
                            R2 = true, k2 += E3.nalu_size;
                          else if (35 == C2)
                            continue;
                          if (O2 && I2 && R2)
                            break;
                        } else {
                          var C2;
                          if (7 == (C2 = 31 & m4.getUint8(E3.nalu_start + E3.start_code_size)))
                            I2 = true, k2 += E3.nalu_size;
                          else if (8 == C2)
                            R2 = true, k2 += E3.nalu_size;
                          else if (9 == C2)
                            continue;
                          if (I2 && R2)
                            break;
                        }
                      for (var A2 = 0; A2 < k2; A2++)
                        w3.setInt8(S3++, m4.getInt8(A2));
                      var z2 = 10 - T2, D2 = p4.length >= (z2 = z2 > 0 ? z2 : 0) ? z2 : p4.length;
                      for (b4 = 0; b4 < D2; b4++) {
                        var N2 = p4[b4], P2 = N2.rbspView, M2 = N2.ebspLength;
                        w3.setUint8(S3++, 0), w3.setUint8(S3++, 0), w3.setUint8(S3++, 0), w3.setUint8(S3++, 1), l3 ? (w3.setUint8(S3++, 78), w3.setUint8(S3++, 1)) : w3.setUint8(S3++, 6);
                        for (var x2 = 0; x2 < M2; x2++)
                          w3.setInt8(S3++, P2[x2 - 0]);
                      }
                      for (A2 = k2; A2 < t5.data.byteLength; A2++)
                        w3.setInt8(S3++, m4.getInt8(A2));
                      new Uint8Array(y3), t5.data = y3;
                    }
                    i5.enqueue(t5);
                  } else
                    i5.enqueue(t5);
                }(t4, i4, p3, y2, S2);
              } : "decode" === a3 && (b3 = function(n4, e4) {
                "audio" === w2 ? e4.enqueue(n4) : function(n5, e5, r4) {
                  var s4, o3, a4, c4 = u2[r4], v3 = c4 && "VP8" !== c4.codec, m4 = false, p4 = null === (o3 = null === (s4 = n5.getMetadata) || void 0 === s4 ? void 0 : s4.call(n5)) || void 0 === o3 ? void 0 : o3.mimeType;
                  if (m4 = p4 ? null !== (a4 = null == p4 ? void 0 : p4.includes("H265")) && void 0 !== a4 && a4 : "H265" === c4.codec, v3) {
                    var g4 = c4.firstFrame;
                    if (g4) {
                      if (g4.buffer)
                        if (n5.timestamp - g4.time < 20) {
                          var b4 = function(t4, i4) {
                            if (t4.byteLength !== i4.byteLength)
                              return false;
                            for (var n6 = 0; n6 < t4.byteLength; n6++)
                              if (t4[n6] !== i4[n6])
                                return false;
                            return true;
                          }(new Uint8Array(n5.data), g4.buffer);
                          b4 && (v3 = false);
                        } else
                          g4.buffer = void 0;
                    } else
                      c4.firstFrame = { buffer: new Uint8Array(n5.data).slice(0), time: n5.timestamp };
                  }
                  if (v3) {
                    for (var _3 = new DataView(n5.data), y3 = 0, w3 = new h2(_3, m4), S3 = 0, E3 = false; w3.NextNalu(E3); ) {
                      if (m4) {
                        if (32 == (S3 = (126 & _3.getUint8(w3.nalu_start + w3.start_code_size)) >> 1) || 33 == S3 || 34 == S3 || 35 == S3)
                          continue;
                        if (39 != S3)
                          break;
                      } else {
                        if (7 == (S3 = 31 & _3.getUint8(w3.nalu_start + w3.start_code_size)) || 8 == S3 || 9 == S3)
                          continue;
                        if (6 != S3)
                          break;
                      }
                      var k2 = new Uint8Array(n5.data).slice(w3.nalu_start + w3.start_code_size, w3.nalu_start + w3.start_code_size + w3.nalu_size);
                      c4.emulationPreventionByte && (k2 = f2(k2).output), y3 = m4 ? 2 : 1, E3 = true;
                      for (var O2 = 0; 255 === k2[y3]; )
                        O2 += 255, y3++;
                      if ((O2 += k2[y3++]) === i3 || 5 === O2 || 100 === O2) {
                        for (var I2 = 0; 255 === k2[y3]; )
                          I2 += 255, y3++;
                        if (I2 += k2[y3++], n5.data.byteLength - y3 < I2)
                          break;
                        var R2 = new Uint8Array(4 + I2);
                        switch (R2[0] = 0, R2[1] = 0, O2) {
                          case 100:
                            R2[2] = 3, R2[3] = 235;
                            break;
                          case 5:
                            R2[2] = 3, R2[3] = 236;
                            break;
                          case i3:
                            R2[2] = 3, R2[3] = 237;
                        }
                        for (var T2 = 0; T2 < I2; T2++)
                          R2[4 + T2 - 0] = k2[y3++];
                        var C2 = false;
                        if (O2 === i3)
                          C2 = true;
                        else if (5 === O2) {
                          var A2 = c4.unregisterSeiFilter;
                          if (A2) {
                            var z2 = R2.slice(4, 4 + c4.filterSize), D2 = void 0, N2 = true;
                            if (0 === (D2 = "string" == typeof A2 ? l2(A2) : A2).length)
                              N2 = false;
                            else
                              for (var P2 = 0; P2 < D2.length; P2++)
                                if (D2[P2] !== z2[P2]) {
                                  N2 = false;
                                  break;
                                }
                            C2 = N2;
                          } else
                            C2 = true;
                        }
                        C2 && t3.postMessage({ cmd: "recvSEI", streamID: r4, buffer: Array.from(R2) });
                      } else if (244 === O2) {
                        for (I2 = 0; 255 === k2[y3]; )
                          I2 += 255, y3++;
                        if (I2 += k2[y3++], n5.data.byteLength - y3 < I2)
                          break;
                        var M2 = parseInt(I2 / 5 + ""), x2 = k2.slice(y3, y3 += I2), j2 = [];
                        for (P2 = 0; P2 < M2; P2++) {
                          var q2 = 5 * P2, L2 = x2.slice(q2, q2 + 4), B2 = x2.slice(q2 + 4, q2 + 5), U2 = d2(L2);
                          j2.push({ soundLevelID: U2, value: B2[0] });
                        }
                        t3.postMessage({ cmd: "mixSoundLevel", soundLevelList: j2, streamID: c4.streamID });
                      }
                    }
                    e5.enqueue(n5);
                  } else
                    e5.enqueue(n5);
                }(n4, e4, p3);
              }), b3) {
                var E2 = new TransformStream({ transform: b3 });
                c3.pipeThrough(E2).pipeTo(m3);
              }
            }
            function p2(t4) {
              var i4 = o2[t4];
              return i4 || (o2[t4] = { streamID: t4, sideInfos: [], lowStreamSideInfos: [], type: 243, emulationPreventionByte: false, recvLastKeyFrameTime: 0 }, o2[t4]);
            }
            function g2(t4) {
              var i4 = u2[t4];
              return i4 || (u2[t4] = { streamID: t4, emulationPreventionByte: false, codec: "", unregisterSeiFilter: "", filterSize: 0 }, u2[t4]);
            }
            function b2(t4) {
              var i4 = t4.cmd;
              if ("encode" === i4) {
                var n4 = t4.readable, e4 = t4.writable, r4 = t4.streamID, s4 = t4.type, o3 = t4.isLowStream, u3 = t4.emulationPreventionByte, h3 = t4.onlyAudio, f3 = t4.vCodec;
                if ("audio" !== (d3 = t4.kind)) {
                  var l3 = p2(r4);
                  l3.type = s4, l3.emulationPreventionByte = u3;
                }
                a2[r4] = { isLowStream: o3, kind: d3, onlyAudio: h3, vCodec: f3 }, m2(i4, n4, e4, r4, a2);
              } else if ("decode" === i4) {
                n4 = t4.readable, e4 = t4.writable, r4 = t4.streamID, u3 = t4.emulationPreventionByte;
                var d3, v3 = t4.codec, b3 = t4.unregisterSeiFilter, _2 = t4.filterSize;
                if ("audio" !== (d3 = t4.kind)) {
                  var y2 = g2(r4);
                  y2.emulationPreventionByte = u3, y2.codec = v3, y2.unregisterSeiFilter = b3, y2.filterSize = _2;
                }
                c2[r4] = { isLowStream: false, kind: d3 }, m2(i4, n4, e4, r4, c2);
              }
            }
            onmessage = function(i4) {
              var n4 = i4.data, e4 = n4.cmd;
              try {
                switch (e4) {
                  case "encode":
                  case "decode":
                    b2(n4);
                    break;
                  case "updatePlayer":
                    var r4 = n4.codec;
                    g2(v3 = n4.streamID).codec = r4;
                    break;
                  case "pushSideInfo":
                    var s4 = n4.buffer, h3 = n4.hasLowStream, f3 = n4.maxLength, l3 = p2(v3 = n4.streamID);
                    l3.sideInfos.length > f3 ? console.error("Send SEI Failed. The number of inserted sei exceeds the limit.") : (l3.sideInfos.push(s4), h3 && l3.lowStreamSideInfos.push(s4));
                    break;
                  case "publishStreamType":
                    var d3 = a2[v3 = n4.streamID];
                    d3 && (d3.onlyAudio = n4.onlyAudio);
                    break;
                  case "clear":
                    var v3 = n4.streamID;
                    "push" == n4.type ? (delete o2[v3], delete a2[v3]) : (delete c2[v3], delete u2[v3]);
                }
              } catch (i5) {
                t3.postMessage({ cmd: "error", error: i5 });
              }
            }, t3.RTCTransformEvent && (t3.onrtctransform = function(t4) {
              var i4 = t4.transformer;
              b2(Object.assign({ readable: i4.readable, writable: i4.writable }, i4.options));
            });
          }
          !function(t3) {
            t3[t3.LoginReq = 1] = "LoginReq", t3[t3.LoginRsp = 2] = "LoginRsp", t3[t3.CreateSessionReq = 3] = "CreateSessionReq", t3[t3.CreateSessionRsp = 4] = "CreateSessionRsp", t3[t3.CreateSessionWithSdpReq = 5] = "CreateSessionWithSdpReq", t3[t3.CreateSessionWithSdpRsp = 6] = "CreateSessionWithSdpRsp", t3[t3.SessionResetPush = 7] = "SessionResetPush", t3[t3.SessionResetAck = 8] = "SessionResetAck", t3[t3.PublishEventPush = 9] = "PublishEventPush", t3[t3.PlayEventPush = 10] = "PlayEventPush", t3[t3.MediaDescReq = 11] = "MediaDescReq", t3[t3.MediaDescRsp = 12] = "MediaDescRsp", t3[t3.CandidateInfoReq = 13] = "CandidateInfoReq", t3[t3.CandidateInfoRsp = 14] = "CandidateInfoRsp", t3[t3.CloseSessionReq = 15] = "CloseSessionReq", t3[t3.CloseSessionRsp = 16] = "CloseSessionRsp", t3[t3.MediaDescPush = 17] = "MediaDescPush", t3[t3.MediaDescAck = 18] = "MediaDescAck", t3[t3.CandidateInfoPush = 19] = "CandidateInfoPush", t3[t3.CandidateInfoAck = 20] = "CandidateInfoAck", t3[t3.CloseSessionPush = 21] = "CloseSessionPush", t3[t3.CloseSessionAck = 22] = "CloseSessionAck", t3[t3.StreamStatusNotify = 23] = "StreamStatusNotify", t3[t3.StreamStatusNotifyAck = 24] = "StreamStatusNotifyAck", t3[t3.StreamStatusNotifyPush = 25] = "StreamStatusNotifyPush", t3[t3.StreamStatusNotifyPushAck = 26] = "StreamStatusNotifyPushAck", t3[t3.BroadcasterStatusNotify = 27] = "BroadcasterStatusNotify", t3[t3.BroadcasterStatusAck = 28] = "BroadcasterStatusAck", t3[t3.ActivateAudioPlayStreamReq = 29] = "ActivateAudioPlayStreamReq", t3[t3.ActivateAudioPlayStreamRsp = 30] = "ActivateAudioPlayStreamRsp", t3[t3.ActivateVideoPlayStreamReq = 31] = "ActivateVideoPlayStreamReq", t3[t3.ActivateVideoPlayStreamRsp = 32] = "ActivateVideoPlayStreamRsp", t3[t3.ClientInfoPush = 33] = "ClientInfoPush", t3[t3.ClientInfoAck = 34] = "ClientInfoAck", t3[t3.NetQualityProbeReq = 35] = "NetQualityProbeReq", t3[t3.NetQualityProbeRsp = 36] = "NetQualityProbeRsp", t3[t3.NetQualityInfoPush = 37] = "NetQualityInfoPush", t3[t3.NetQualityInfoAck = 38] = "NetQualityInfoAck", t3[t3.ActivateSEIInsertReq = 39] = "ActivateSEIInsertReq", t3[t3.ActivateSEIInsertRsp = 40] = "ActivateSEIInsertRsp", t3[t3.Peer2PeerNetStatsGetReq = 41] = "Peer2PeerNetStatsGetReq", t3[t3.Peer2PeerNetStatsGetRsp = 42] = "Peer2PeerNetStatsGetRsp", t3[t3.CmdReq = 43] = "CmdReq", t3[t3.CmdRsp = 44] = "CmdRsp", t3[t3.CmdPush = 45] = "CmdPush", t3[t3.CmdAck = 46] = "CmdAck", t3[t3.WebRTCDispatchReq = 47] = "WebRTCDispatchReq", t3[t3.WebRTCDispatchRsp = 48] = "WebRTCDispatchRsp";
          }(Lh || (Lh = {}));
          var Fh = { 1: "LoginReq", 2: "LoginRsp", 3: "CreateSessionReq", 4: "CreateSessionRsp", 5: "CreateSessionWithSdpReq", 6: "CreateSessionWithSdpRsp", 7: "SessionResetPush", 8: "SessionResetAck", 9: "PublishEventPush", 10: "PlayEventPush", 11: "MediaDescReq", 12: "MediaDescRsp", 13: "CandidateInfoReq", 14: "CandidateInfoRsp", 15: "CloseSessionReq", 16: "CloseSessionRsp", 17: "MediaDescPush", 18: "MediaDescAck", 19: "CandidateInfoPush", 20: "CandidateInfoAck", 21: "CloseSessionPush", 22: "CloseSessionAck", 23: "StreamStatusNotify", 24: "StreamStatusNotifyAck", 25: "StreamStatusNotifyPush", 26: "StreamStatusNotifyPushAck", 27: "BroadcasterStatusNotify", 28: "BroadcasterStatusAck", 29: "ActivateAudioPlayStreamReq", 30: "ActivateAudioPlayStreamRsp", 31: "ActivateVideoPlayStreamReq", 32: "ActivateVideoPlayStreamRsp", 33: "ClientInfoPush", 34: "ClientInfoAck", 35: "NetQualityProbeReq", 36: "NetQualityProbeRsp", 37: "NetQualityInfoPush", 38: "NetQualityInfoAck", 39: "ActivateSEIInsertReq", 40: "ActivateSEIInsertRsp", 41: "Peer2PeerNetStatsGetReq", 42: "Peer2PeerNetStatsGetRsp", 43: "CmdReq", 44: "CmdRsp", 45: "CmdPush", 46: "CmdAck", 47: "WebRTCDispatchReq", 48: "WebRTCDispatchRsp" }, Hh = function() {
            return Hh = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Hh.apply(this, arguments);
          }, Vh = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Qh = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Yh = ["LoginReq", "CreateSessionWithSdpReq", "CreateSessionReq"], Kh = ["Peer2PeerNetStatsGetReq", "Peer2PeerNetStatsGetRsp", "CmdRsp"];
          var Zh, Xh = $e.webrtc_proto_v2, Wh = $e.webrtc_cmd, $h = $e.generalpclib, tf = function() {
            function t3(t4, i3, n3, r3) {
              this.Zg = t4, this.an = i3, this.pn = n3, this.Xg = r3, this.t_ = new xo(), this.Vf = {}, this.Qf = new e2.wl(), this.Oo = 100, this.Kf = {}, this.i_ = {}, this.Yf = 5e3, this.Ro = 1e4, this.tu = null, this.To = 2e3, this.n_ = null, this.e_ = 6e3, this.s_ = true, this.o_ = {}, this.u_ = ["ActivateVideoPlayStreamReq", "ActivateAudioPlayStreamReq", "CreateSessionReq", "CreateSessionWithSdpReq", "ActivateSEIInsertReq", "StreamStatusNotify"], this.jo = e2.xb.disconnected, this.a_ = D.LOGOUT, this.c_ = 0, this.h_ = void 0, this.unCheckCmds = ["LoginReq", "CreateSessionReq", "CreateSessionWithSdpReq"];
              var s3 = t4 === cf;
              this.f_ = s3 ? "zc.wcss.0" : "zc.wcss.1";
              this.l_ = r3.getPCRequest(s3 ? Nt.BusinessService.SERVICE_WEBRTC_SIGNAL : Nt.BusinessService.SERVICE_L3_WEBRTC_SIGNAL, { path: "wsv2", query: "", encode: false, messageType: 2, isMsgCache: false }), this.d_();
            }
            return Object.defineProperty(t3.prototype, "isUaConnected", { get: function() {
              return this.Xg.isConnect();
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "state", { get: function() {
              return this.jo;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "mediaState", { get: function() {
              return this.a_;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "token", { get: function() {
              return this.v_;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "tokenType", { get: function() {
              return this.c_;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "server", { get: function() {
              return this.Zg;
            }, enumerable: false, configurable: true }), t3.prototype.d_ = function() {
              var t4, i3 = this;
              this.Xg.on("connected", function() {
                i3.an.info("".concat(i3.f_, " netAgent connected ").concat(i3.jo)), i3.jo === e2.xb.connecting && i3.loginCenterSvr(), i3.t_.emit("uaConnected");
              }), this.Xg.on("disconnected", function() {
                i3.an.info("".concat(i3.f_, " netAgent disconnected"));
              }), this.Xg.on("broken", function(t5) {
                i3.an.info("".concat(i3.f_, " netAgent broken ").concat(t5));
              }), this.l_.on("connected", function(t5) {
                i3.an.info("".concat(i3.f_, " pc connected ").concat(Nt.ConnectedType[t5])), i3.jo = e2.xb.connected, t5 === Nt.ConnectedType.AUTO && i3.loginCenterSvr();
              }), this.l_.on("disconnected", function(t5, n3) {
                i3.an.info("".concat(i3.f_, " pc disconnected ").concat(Nt.DisconnectedType[t5], ", ua connect: ").concat(i3.isUaConnected, ", signal ").concat(i3.s_ ? "closed" : "connect")), i3.jo = e2.xb.disconnected, i3.a_ = D.LOGOUT, i3.s_ || (i3.isUaConnected ? i3.loginCenterSvr() : i3.jo = e2.xb.connecting);
              }), this.l_.on("broken", function() {
                i3.an.info("".concat(i3.f_, " pc broken")), i3.jo = e2.xb.connecting, i3.a_ = D.LOGOUT;
              }), this.l_.on("downLoadMessage", function(t5, n3) {
                i3.handleWsMessage({ data: t5, extras: n3 });
              }), null === (t4 = this.l_) || void 0 === t4 || t4.on("exception", function(t5, n3) {
                i3.an.info("".concat(i3.f_, " pc exception ").concat(JSON.stringify(t5)));
              }), this.l_.off("pcBrokenEvent"), this.l_.on("pcBrokenEvent", function(t5) {
                var n3 = L.S2, r3 = i3.cr.createSpan(e2.t0.H, { key: L.Hu.event }, { key: "" }, n3.event);
                r3.setAttributes({ service_no: n3.service_no(null == t5 ? void 0 : t5.service_no), error: (null == t5 ? void 0 : t5.code) || 0 }), r3.end();
              }), this.l_.off("pcDisconnectedEvent"), this.l_.on("pcDisconnectedEvent", function(t5) {
                var n3 = L.pR, r3 = i3.cr.createSpan(e2.t0.H, { key: L.Hu.event }, { key: "" }, n3.event);
                r3.setAttributes({ service_no: n3.service_no(null == t5 ? void 0 : t5.service_no), error: (null == t5 ? void 0 : t5.code) || 0 }), r3.end();
              }), this.l_.off("pcConnectedEvent"), this.l_.on("pcConnectedEvent", function(t5) {
                var n3 = L.D1, r3 = i3.cr.createSpan(e2.t0.H, { key: L.Hu.event }, { key: "" }, n3.event);
                r3.setAttributes({ service_no: n3.service_no(t5.service_no), recv_time: n3.recv_time((/* @__PURE__ */ new Date()).getTime()), proxy_link_sources: n3.proxy_link_sources(t5.proxy_link_sources), connect_stream: n3.connect_stream(t5.connect_stream) }), r3.end();
              });
            }, t3.prototype.setSessionInfo = function(t4, i3) {
              this.an.info("".concat(this.f_, " set session info")), this.m_ = t4 + "", this.p_ = i3;
            }, t3.prototype.onReconnected = function(t4) {
            }, t3.prototype.onNeedRetry = function(t4, i3) {
            }, Object.defineProperty(t3.prototype, "Ev", { get: function() {
              var t4, i3, n3;
              if (this.pn.appConfig) {
                var r3 = this.pn.appConfig.media_config.publish_config.resource_info.find(function(t5) {
                  return t5.resource_type === e2.NI.RTC;
                });
                if (r3) {
                  var s3 = null === (t4 = null == r3 ? void 0 : r3.service_info) || void 0 === t4 ? void 0 : t4.find(function(t5) {
                    return t5.protocol === e2.Hb.WEBRTC;
                  });
                  if (s3)
                    return null === (n3 = (null === (i3 = s3.url_template.split("{IP}")[1].split("?")) || void 0 === i3 ? void 0 : i3[1]).split("=")) || void 0 === n3 ? void 0 : n3[1];
                }
              }
            }, enumerable: false, configurable: true }), t3.prototype.connectServer = function(t4, i3, n3) {
              var r3, s3;
              if (this._s = t4 || (null === (r3 = this.pn.roomList[0]) || void 0 === r3 ? void 0 : r3.roomID), this.v_ = i3 || (null === (s3 = this.pn.roomList[0]) || void 0 === s3 ? void 0 : s3.token), this.an.info("".concat(this.f_, " start connect server, roomID: ").concat(this._s)), this.an.remoteReport("".concat(this.f_, " token: ").concat(this.v_)), this.c_ = 0, this.s_ = false, this.h_ = n3, this.a_ === D.LOGOUT) {
                if (!this.pn.appConfig)
                  return void this.an.info("".concat(this.f_, " no app config"));
                if (!this.Ev)
                  return void (n3 && n3(this.Zg, re.lph.code));
                this.app = this.Ev, this.isUaConnected ? this.loginCenterSvr() : (this.jo = e2.xb.connecting, this.an.info("".concat(this.f_, " ua is not connected")));
              } else
                this.an.info("".concat(this.f_, this.a_ === D.TRY_LOGIN ? " server is connecting" : " server is connected"));
            }, t3.prototype.disconnectServer = function() {
              this.an.info("".concat(this.f_, " disconnect server")), this.disconnectPcRequest(), this.resetCheckMessage(), this.resetLoginTimer(), this.jo = e2.xb.disconnected, this.a_ = D.LOGOUT, this.h_ = void 0, this.v_ = "", this.i_ = {}, this.c_ = 0;
            }, t3.prototype.disconnectPcRequest = function() {
              this.an.info("".concat(this.f_, " disconnect pc link ").concat(this.s_)), this.s_ || (this.s_ = true, this.l_.closeRequest());
            }, t3.prototype.resetLoginTimer = function() {
              this.an.info("".concat(this.f_, " reset login timer")), clearTimeout(this.n_), this.n_ = null;
            }, t3.prototype.handleWsPBMsg = function(t4, i3) {
              var n3 = this.handlePushMsg(t4, i3);
              if ((null == n3 ? void 0 : n3.header) && (null == n3 ? void 0 : n3.body)) {
                var e3;
                if (n3)
                  n3.header.cmd = Fh[n3.header.cmd], (0, G.M$)(n3.body), e3 = { header: Hh(Hh({}, n3.header), { appid: this.m_, user_id: this.p_ }), body: n3.body };
                return e3;
              }
              this.an.error("".concat(this.f_, " no header or body"));
            }, t3.prototype.handleWsMessage = function(t4) {
              var i3, n3 = this.handleWsPBMsg(t4.data, t4.extras);
              (null == n3 ? void 0 : n3.header) && n3.header.appid == this.m_ && n3.header.user_id === this.p_ ? (Kh.includes(n3.header.cmd) || this.an.info("".concat(this.f_, " signmsg=").concat(n3.header.cmd, " ").concat(null === (i3 = n3.header) || void 0 === i3 ? void 0 : i3.seq)), this.handleServerPush(n3)) : this.an.error("".concat(this.f_, " check header failed"));
            }, t3.prototype.resetCheckMessage = function() {
              var t4;
              this.an.info("".concat(this.f_, " reset check msg")), clearTimeout(this.tu), this.tu = null;
              for (var i3 = this.Qf.getFirst(); null != i3; )
                this.Qf.remove(i3), (null === (t4 = i3._data) || void 0 === t4 ? void 0 : t4.error) && i3._data.error(e2.X5, i3._data.seq), i3 = this.Qf.getFirst();
              this.Vf = {};
            }, t3.prototype.handleServerPush = function(t4) {
              switch (t4.header.cmd) {
                case "LoginRsp":
                  this.handleRespondData("LoginReq", t4);
                  break;
                case "CreateSessionRsp":
                  this.handleRespondData("CreateSessionReq", t4), 0 === t4.body.result && this.addSession(t4.header.session_id, t4.body.session_token);
                  break;
                case "CreateSessionWithSdpRsp":
                  this.handleRespondData("CreateSessionWithSdpReq", t4), 0 === t4.body.result && this.addSession(t4.header.session_id, t4.body.session_token);
                  break;
                case "WebRTCDispatchRsp":
                  this.handleRespondData("WebRTCDispatchReq", t4);
                  break;
                case "SessionResetPush":
                  this.sendResetSessionAck(t4.header.seq, 0, 0), this.handlePushResetSessionData(t4);
                  break;
                case "CloseSessionPush":
                  this.sendCloseSessionAck(t4.header.seq, t4.header.session_id, 0), this.handleMsgWithSession(t4, N.PUSH), this.removeSession(t4.header.session_id);
                  break;
                case "StreamStatusNotifyPush":
                  this.sendStreamStatusNotifyAck(t4.header.seq, t4.header.session_id, 0), this.handleMsgWithSession(t4, N.PUSH);
                  break;
                case "PublishEventPush":
                case "PlayEventPush":
                case "CmdPush":
                  this.handleMsgWithSession(t4, N.PUSH);
                  break;
                case "ClientInfoPush":
                  this.sendClientInfoAck(t4.header.seq, t4.header.session_id, 0), this.handleMsgWithSession(t4, N.PUSH);
                  break;
                case "NetQualityInfoPush":
                  this.sendNetQualityInfoPushAck(t4.header.seq, t4.header.session_id, t4.body.peer_id, 0), this.handleMsgWithSession(t4, N.PUSH);
                  break;
                case "MediaDescRsp":
                case "CandidateInfoRsp":
                case "NetQualityProbeRsp":
                case "ActivateSEIInsertRsp":
                case "ActivateVideoPlayStreamRsp":
                case "ActivateAudioPlayStreamRsp":
                case "StreamStatusNotifyAck":
                case "BroadcasterStatusAck":
                case "Peer2PeerNetStatsGetRsp":
                case "CmdRsp":
                case "CloseSessionRsp":
                  this.handleMsgWithSession(t4, N.RSP);
              }
            }, t3.prototype.registerPeerCallback = function(t4, i3) {
              this.o_[t4] = i3;
            }, t3.prototype.unregisterPeerCallback = function(t4) {
              delete this.o_[t4];
            }, t3.prototype.handleMsgWithSession = function(t4, i3) {
              var n3, e3;
              if (null === (n3 = null == t4 ? void 0 : t4.header) || void 0 === n3 ? void 0 : n3.session_id) {
                var r3 = this.o_[null === (e3 = null == t4 ? void 0 : t4.header) || void 0 === e3 ? void 0 : e3.session_id];
                r3 && r3(t4, i3);
              } else
                this.an.error("".concat(this.f_, " rsp no session ").concat(t4.header.cmd));
            }, t3.prototype.loginCenterSvr = function() {
              var t4 = this;
              if (this.app) {
                var i3 = [];
                if (0 != Object.keys(this.i_).length)
                  for (var n3 in this.i_) {
                    var r3 = parseInt(n3);
                    i3.push({ session_id: r3, session_token: this.i_[r3].token });
                  }
                var s3 = this.v_, o2 = (0, G.fU)(this.cr, e2.t0.H, this.p_, L.kn.event, L.Yu), u2 = { appid: this.pn.appid, user_id: this.pn.idName, token: s3, tokenType: this.c_, sessions: i3, roomid: this._s, sdk_version: this.pn.sdkVerNum, app: this.app, net_mode: this.pn.netMode };
                this.an.info("".concat(this.f_, " LoginReq ").concat(JSON.stringify(Hh(Hh({}, u2), { token: void 0 })))), this.an.remoteReport("".concat(this.f_, " LoginReq token ").concat(this.v_));
                var a2 = "LoginReq", c2 = this.encodePBBody(a2, u2);
                this.a_ = D.TRY_LOGIN, this.sendMessageWithCallback(a2, this.pn.getSeq(), 0, c2, function(i4, n4, e3) {
                  t4.resetLoginTimer(), (0, G.lA)(o2, { result: e3.result, seq: i4 }), 0 == e3.result ? (t4.a_ = D.LOGIN, t4.v_ = e3.token, t4.c_ = e3.tokenType, t4.an.info("".concat(t4.f_, " LoginReq suc, callback ").concat(!!t4.h_)), t4.an.remoteReport("".concat(t4.f_, " LoginRsp token ").concat(e3.token)), null != t4.h_ ? (t4.h_(t4.Zg, 0), t4.h_ = void 0) : t4.onReconnected(t4.Zg), t4.checkMessageTimeout()) : (t4.an.warn("".concat(t4.f_, " LoginReq fail, result: ").concat(e3.result, " callback ").concat(!!t4.h_)), t4.disconnectPcRequest(), t4.a_ = D.LOGOUT, null != t4.h_ ? (t4.h_(t4.Zg, e3.result), t4.resetCallback(e3.result)) : t4.onNeedRetry(t4.Zg, e3.result));
                }, function(i4, n4) {
                  t4.resetLoginTimer(), t4.a_ = D.LOGOUT;
                  var e3 = "LoginReq fail, callback ".concat(!!t4.h_, ", is signal closed ").concat(t4.s_, ". code: ").concat(i4);
                  t4.an.info("".concat(t4.f_, " ").concat(e3)), o2.setAttribute("seq", n4), t4.cr.setError(o2, { code: i4, msg: e3 }, e3), null == t4.h_ || t4.s_ || (t4.h_(t4.Zg, i4 = null != i4 ? i4 : -1), t4.resetCallback(i4));
                }), this.resetLoginTimer(), this.n_ = setTimeout(function() {
                  t4.an.info("".concat(t4.f_, " login timer triggered, callback ").concat(!!t4.h_)), t4.a_ = D.LOGOUT, null != t4.h_ ? (t4.h_(t4.Zg, -1), t4.resetCallback(-1)) : t4.onNeedRetry(t4.Zg, -1);
                }, this.e_);
              } else
                this.an.info("".concat(this.f_, " no config for login"));
            }, t3.prototype.resetCallback = function(t4) {
              this.g_(t4) && (this.h_ = void 0);
            }, t3.prototype.g_ = function(t4) {
              return !![re.lph.code, 20010, 1008].includes(t4);
            }, t3.prototype.sendMessageWithCallback = function(t4, i3, n3, r3, s3, o2) {
              var u2 = this;
              void 0 === s3 && (s3 = null), void 0 === o2 && (o2 = null), Kh.includes(t4) || this.an.info("".concat(this.f_, " send callback ").concat(t4, ", seq: ").concat(i3, " ").concat(this.jo));
              var a2 = performance.now();
              if (!this.unCheckCmds.includes(t4) && this.jo !== e2.xb.connected)
                return this.an.error("".concat(this.f_, " send callback ").concat(t4, " connect not establish")), void (o2 && o2(e2.Xb, i3));
              var c2 = { seq: i3, deleted: false, cmd: t4, sendTime: (/* @__PURE__ */ new Date()).getTime(), success: function() {
                for (var n4 = [], e3 = 0; e3 < arguments.length; e3++)
                  n4[e3] = arguments[e3];
                if (Yh.includes(t4)) {
                  var r4 = (performance.now() - a2).toFixed(0);
                  u2.an.info("".concat(u2.f_, " send callback suc seq: ").concat(i3, ", cmd: ").concat(t4, ", cost_time: ").concat(r4));
                }
                s3 && s3.apply(void 0, n4);
              }, error: o2, timeout: this.Yf }, h2 = this.Qf.push(c2);
              this.Vf[c2.seq] = h2;
              var f2 = this.getHeader(t4, i3, n3), l2 = this.encodePBMsg(f2, r3), d2 = false, v2 = false;
              "LoginReq" === t4 && (d2 = true, v2 = true), this.l_.sendRequest({ payload: l2, ack: d2, isInSendMap: v2 }, function(t5) {
                u2.an.info("".concat(u2.f_, " send callback fail ").concat(JSON.stringify(t5))), t5.code && o2 && o2(t5.code, i3);
              }, function(t5) {
                u2.an.info("".concat(u2.f_, " send callback ack"));
              });
            }, t3.prototype.sendMessage = function(t4, i3, n3, e3, r3) {
              if (void 0 === r3 && (r3 = true), this.a_ === D.LOGIN) {
                var s3 = this.getHeader(t4, i3, n3), o2 = this.encodePBMsg(s3, e3);
                this.l_.sendRequest({ payload: o2 });
              } else
                this.an.error("".concat(this.f_, " send ").concat(t4, " connect not establish ").concat(D[this.a_]));
            }, t3.prototype.getHeader = function(t4, i3, n3) {
              return this.headerData({ version: "1.0.1", cmd: t4, appid: this.m_ + "", seq: i3, user_id: this.p_, session_id: n3 });
            }, t3.prototype.getParamsExt = function(t4, i3, n3) {
              return i3 && (t4.min_play_buf_level_ms = i3), n3 && (t4.keyframe_intv = n3), this.an.info("".concat(this.f_, " params ").concat(JSON.stringify(t4))), Wh.WebrtcCmdReqMsg.encode({ peer_extend_param: t4 }).finish();
            }, t3.prototype.decodeParamsExt = function(t4) {
              return Wh.WebrtcCmdReqMsg.decode(t4).peer_ext_params_push;
            }, t3.prototype.createSession = function(t4, i3, n3, e3) {
              var r3 = "CreateSessionReq", s3 = i3.serverHost, o2 = i3.strAuthParam, u2 = i3.geo, a2 = i3.roomID, c2 = i3.transCodecID, h2 = i3.transCodecSuffix, f2 = i3.ipV6Prefer, l2 = { type: i3.type, stream_id: i3.streamID, turn_server_host: (0, B.QP)(s3) ? s3 : "", strAuthParam: o2, params: i3, area_type: u2.type, area_id_list: u2.areaList, ipv6_prefer: f2 };
              void 0 !== c2 && (l2.trans_codec_id = c2, l2.trans_codec_suffix = h2), this.pn.isMultiRoom && (l2.roomid = a2), this.an.info("".concat(this.f_, " create session ").concat(JSON.stringify(l2)), { streamid: i3.streamID });
              var d2 = this.encodePBBody(r3, l2);
              this.sendMessageWithCallback(r3, t4, 0, d2, n3, e3);
            }, t3.prototype.createSessionWithSdp = function(t4, i3, n3) {
              var e3, r3 = this, s3 = t4.seq, o2 = t4.type, u2 = t4.streamId, a2 = t4.strAuthParam, c2 = t4.sdp, h2 = t4.miniSdp, f2 = t4.serverHost, l2 = t4.playBufLevel, d2 = t4.params, v2 = t4.paramsExt, m2 = t4.roomID, p2 = t4.geo, g2 = t4.transCodecID, b2 = t4.transCodecSuffix, _2 = t4.ipV6Prefer, y2 = Uo(this.an, u2), w2 = "CreateSessionWithSdpReq", S2 = (null === (e3 = t4.videoInfo) || void 0 === e3 ? void 0 : e3.keyFrameInterval) || 2, E2 = this.getParamsExt(v2, l2, S2), k2 = { type: o2, stream_id: u2, media_server_host: (0, B.QP)(f2) ? f2 : "", strAuthParam: a2, params: d2, params_ext: E2, area_type: p2.type, area_id_list: p2.areaList, ipv6_prefer: _2 };
              void 0 !== g2 && (k2.trans_codec_id = g2, k2.trans_codec_suffix = b2), h2 ? k2.mini_sdp = h2 : k2.sdp = c2, this.pn.isMultiRoom && (k2.roomid = m2), y2.info("".concat(this.f_, " create session with sdp, params: ").concat(JSON.stringify(Hh(Hh({}, k2), { sdp: void 0, mini_sdp: void 0, params_ext: E2.toString() }))));
              var O2 = this.encodePBBody(w2, k2);
              this.sendMessageWithCallback(w2, s3, 0, O2, function(t5, n4, e4) {
                return Vh(r3, void 0, void 0, function() {
                  return Qh(this, function(r4) {
                    return e4.params_ext && (e4.params_ext = this.decodeParamsExt(e4.params_ext), (0, G.M$)(e4.params_ext)), y2.info("".concat(this.f_, " rsp ").concat(JSON.stringify(Hh(Hh({}, e4), { sdp: void 0, session_token: void 0 })))), i3 && i3(t5, n4, e4), [2];
                  });
                });
              }, n3);
            }, t3.prototype.dispatchGwNodes = function(t4, i3, n3, e3) {
              var r3 = "WebRTCDispatchReq", s3 = i3.streamID, o2 = i3.geo, u2 = i3.transCodecID, a2 = i3.transCodecSuffix, c2 = { type: i3.type, stream_id: s3, area_type: o2.type, area_id_list: o2.areaList, ipv6_prefer: i3.ipV6Prefer };
              void 0 !== u2 && (c2.trans_codec_id = u2, c2.trans_codec_suffix = a2), this.an.info("".concat(this.f_, " dispatch nodes ").concat(JSON.stringify(c2)), { streamid: s3 });
              var h2 = this.encodePBBody(r3, c2);
              this.sendMessageWithCallback(r3, t4, 0, h2, n3, e3);
            }, t3.prototype.sendMediaDescUpdateReq = function(t4, i3, n3) {
              var e3 = n3.sdp, r3 = n3.miniSdp, s3 = { type: n3.type, update: 1 };
              r3 ? s3.mini_sdp = r3 : s3.sdp = e3, this.an.info("".concat(this.f_, " media desc ").concat(JSON.stringify(s3)));
              var o2 = this.encodePBBody("MediaDescReq", s3);
              this.sendMessage("MediaDescReq", t4, i3, o2);
            }, t3.prototype.removeSession = function(t4) {
              this.an.info("".concat(this.f_, " remove session ").concat(t4)), this.i_[t4] && delete this.i_[t4];
            }, t3.prototype.sendCloseSession = function(t4, i3, n3) {
              var e3 = "CloseSessionReq", r3 = { reason: n3 }, s3 = this.encodePBBody(e3, r3);
              this.an.info("".concat(this.f_, " close session ").concat(i3, ", ").concat(JSON.stringify(r3))), this.removeSession(i3), this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.handleRespondData = function(t4, i3) {
              var n3 = i3.header.seq;
              this.an.debug("".concat(this.f_, " rsp data"));
              var e3 = this.Vf[n3];
              if (null != e3) {
                delete this.Vf[n3], this.Qf.remove(e3);
                var r3 = e3._data;
                (null == r3 ? void 0 : r3.cmd) !== t4 ? this.an.error("".concat(this.f_, " command is not match")) : r3.success && r3.success(n3, i3.header.session_id, i3.body);
              } else {
                if ("CloseSessionRsp" == i3.header.cmd || Kh.includes(t4))
                  return;
                this.an.error("".concat(this.f_, " cannot find data ").concat(t4, " ").concat(n3));
              }
            }, t3.prototype.addSession = function(t4, i3) {
              this.an.info("".concat(this.f_, " add session ").concat(t4)), this.i_[t4] = { token: i3 };
            }, t3.prototype.handlePushData = function(t4) {
              this.an.info("".concat(this.f_, " push data, cmd: ").concat(t4.header.cmd, ", session: ").concat(t4.header.session_id));
              var i3 = this.Kf[t4.header.cmd + t4.header.session_id];
              i3 ? i3.callback && i3.callback(t4.header.seq, t4.header.session_id, t4.body) : this.an.warn("".concat(this.f_, " no callbackData, cmd: ").concat(t4.header.cmd, ", session: ").concat(t4.header.session_id));
            }, t3.prototype.handlePushResetSessionData = function(t4) {
              this.an.info("".concat(this.f_, " push reset session"));
              var i3 = [];
              if (0 == t4.body.cResetType)
                i3 = Object.keys(this.i_);
              else if (1 == t4.body.cResetType)
                for (var n3 = 0; n3 < t4.body.session_ids.length; n3++)
                  i3.push(t4.body.session_ids[n3]);
              if (0 != i3.length)
                for (var e3 = 0; e3 < i3.length; e3++) {
                  var r3 = this.Kf[t4.header.cmd + i3[e3]];
                  null == r3 ? this.an.info("".concat(this.f_, " no callbackData ").concat(i3[e3])) : r3.callback && r3.callback(t4.header.seq, i3[e3], t4.body);
                }
              else
                this.an.info("".concat(this.f_, " no session to callback"));
            }, t3.prototype.sendMediaDesc = function(t4, i3, n3, e3) {
              var r3 = "MediaDescReq", s3 = e3.sdp, o2 = e3.miniSdp, u2 = { type: n3, update: 0, params_ext: this.getParamsExt(e3.paramsExt, e3.min_play_buf_level_ms, e3.keyframe_intv) };
              o2 ? u2.mini_sdp = o2 : u2.sdp = s3, this.an.info("".concat(this.f_, " media desc, session: ").concat(i3, ", ").concat(JSON.stringify(Hh(Hh({}, u2), { sdp: void 0, mini_sdp: void 0 }))));
              var a2 = this.encodePBBody(r3, u2);
              this.sendMessage(r3, t4, i3, a2);
            }, t3.prototype.sendCandidateInfo = function(t4, i3, n3) {
              for (var e3 = "CandidateInfoReq", r3 = [], s3 = 0; s3 < n3.length; s3++) {
                r3.push({ candidate: n3[s3].candidate, sdpMid: n3[s3].sdpMid, sdpMLineIndex: n3[s3].sdpMLineIndex });
              }
              var o2 = { infos: r3 };
              this.an.info("".concat(this.f_, " candidate info, session: ").concat(i3, ", ").concat(JSON.stringify(o2)));
              var u2 = this.encodePBBody(e3, o2);
              this.sendMessage(e3, t4, i3, u2);
            }, t3.prototype.sendCandidateInfoAck = function(t4, i3, n3) {
              var e3 = "CandidateInfoAck", r3 = { result: n3 };
              this.an.info("".concat(this.f_, " candidate info ack, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.sendCloseSessionAck = function(t4, i3, n3) {
              var e3 = "CloseSessionAck", r3 = { result: n3 };
              this.an.info("".concat(this.f_, " close session ack, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.sendResetSessionAck = function(t4, i3, n3) {
              var e3 = "SessionResetAck", r3 = { result: n3 };
              this.an.info("".concat(this.f_, " reset session ack, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.sendStreamStatusNotifyAck = function(t4, i3, n3) {
              var e3 = "StreamStatusNotifyPushAck", r3 = { result: n3 };
              this.an.info("".concat(this.f_, " stream status notify ack, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.sendClientInfoAck = function(t4, i3, n3) {
              var e3 = "ClientInfoAck", r3 = { result: n3 };
              this.an.info("".concat(this.f_, " client info ack, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.sendNetQualityInfoPushAck = function(t4, i3, n3, e3) {
              var r3 = "NetQualityInfoAck", s3 = { peer_id: n3, result: e3 };
              this.an.info("".concat(this.f_, " net quality info, session: ").concat(i3, ", ").concat(JSON.stringify(s3)));
              var o2 = this.encodePBBody(r3, s3);
              this.sendMessage(r3, t4, i3, o2);
            }, t3.prototype.registerPushCallback = function(t4, i3, n3) {
              n3 && (0, B.JO)(n3) && (this.an.info("".concat(this.f_, " set callback, session: ").concat(i3, ", ").concat(t4)), this.Kf[t4 + i3] = { callback: n3 });
            }, t3.prototype.unregisterPushCallback = function(t4, i3) {
              delete this.Kf[t4 + i3];
            }, t3.prototype.checkMessageTimeout = function() {
              for (var t4, i3, n3 = this, r3 = this.Qf.getFirst(), s3 = (/* @__PURE__ */ new Date()).getTime(), o2 = 0, u2 = 0, a2 = 0; null != r3 && r3._data && !(r3._data.sendTime + this.Yf > s3); )
                if (delete this.Vf[r3._data.seq], this.Qf.remove(r3), ++u2, r3._data.cmd && -1 == this.u_.indexOf(r3._data.cmd))
                  r3 = this.Qf.getFirst();
                else {
                  if (null == r3._data.error || this.Ro > 0 && r3._data.sendTime + this.Ro < s3 ? ++a2 : (this.an.warn(Co.Qu8 + " error cmd = " + r3._data.cmd + " seq =" + (null === (t4 = r3._data) || void 0 === t4 ? void 0 : t4.seq) + " start time =" + (null === (i3 = r3._data) || void 0 === i3 ? void 0 : i3.sendTime)), (0, B.JO)(r3._data.error) && r3._data.error(e2.Xb, r3._data.seq)), ++o2 >= this.Oo)
                    break;
                  r3 = this.Qf.getFirst();
                }
              this.tu = setTimeout(function() {
                n3.checkMessageTimeout();
              }, this.To), 0 == u2 && 0 == a2 || this.an.info(Co.Qu8 + " call success, state: timeout=" + u2 + " drop=" + a2);
            }, t3.prototype.sendStreamStatus = function(t4, i3, n3, e3, r3) {
              var s3 = "StreamStatusNotify", o2 = { mic_status: e3, camera_status: n3 };
              Uo(this.an, r3).info("".concat(this.f_, " stream status, session: ").concat(i3, ", ").concat(JSON.stringify(o2)));
              var u2 = this.encodePBBody(s3, o2);
              return this.sendMessage(s3, t4, i3, u2), t4;
            }, t3.prototype.ActivatePlayVideoStream = function(t4, i3, n3) {
              var e3 = "ActivateVideoPlayStreamReq", r3 = { active: n3 ? 0 : 1, layer: 0 };
              this.an.info("".concat(this.f_, " activate video, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.ActivatePlayAudioStream = function(t4, i3, n3) {
              var e3 = "ActivateAudioPlayStreamReq", r3 = { active: n3 ? 0 : 1, layer: 0 };
              this.an.info("".concat(this.f_, " activate audio, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.activateSEIInsert = function(t4, i3, n3, e3, r3) {
              var s3 = "ActivateSEIInsertReq", o2 = { peer_id: n3, action: e3, info_type: r3 };
              this.an.info("".concat(this.f_, " insert sei, session: ").concat(i3, ", ").concat(JSON.stringify(o2)));
              var u2 = this.encodePBBody(s3, o2);
              this.sendMessage(s3, t4, i3, u2);
            }, t3.prototype.sendBroadcasterStatus = function(t4, i3, n3) {
              this.an.info("".concat(this.f_, " broadcast status, session: ").concat(i3, ", status: ").concat(n3));
              var e3 = "BroadcasterStatusNotify", r3 = this.encodePBBody(e3, { status: n3 });
              this.sendMessage(e3, t4, i3, r3);
            }, t3.prototype.sendNetProbe = function(t4, i3, n3) {
              var e3 = "NetQualityProbeReq", r3 = { peer_id: n3, action: 1 };
              this.an.info("".concat(this.f_, " net probe req, session: ").concat(i3, ", ").concat(JSON.stringify(r3)));
              var s3 = this.encodePBBody(e3, r3);
              this.sendMessage(e3, t4, i3, s3);
            }, t3.prototype.getP2PNetStats = function(t4, i3, n3) {
              var e3 = "Peer2PeerNetStatsGetReq", r3 = this.encodePBBody(e3, { peer_id: n3 });
              this.sendMessage(e3, t4, i3, r3);
            }, t3.prototype.sendGWCmdReq = function(t4, i3, n3) {
              var e3 = "CmdReq", r3 = this.encodePBBody(e3, n3);
              this.sendMessage(e3, i3, t4, r3, false);
            }, t3.prototype.sendGWCmdAck = function(t4, i3, n3, e3) {
              var r3 = "CmdAck";
              i3.body = n3;
              var s3 = this.encodePBBody(r3, i3);
              this.sendMessage(r3, (null == e3 ? void 0 : e3.seq) || this.pn.getSeq(), t4, s3, false);
            }, t3.prototype.on = function(t4, i3) {
              this.t_.addEventHandler(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              this.t_.removeEventHandler(t4, i3);
            }, t3.prototype.headerData = function(t4) {
              var i3 = Lh[t4.cmd];
              if (void 0 !== i3) {
                var n3 = Xh.Head.create({ cmd: i3, seq: t4.seq, session_id: t4.session_id });
                return Xh.Head.encode(n3).finish();
              }
              this.an.error("".concat(this.f_, " cmd not exist"));
            }, t3.prototype.encodePBMsg = function(t4, i3, n3) {
              void 0 === n3 && (n3 = true);
              var e3 = new Uint8Array(Array.from(this.getWebRTCHead(t4.length, i3.length)).concat(Array.from(t4)).concat(Array.from(i3))), r3 = $h.Header.create({ cmd: n3 ? 100 : 101 }), s3 = $h.Header.encode(r3).finish(), o2 = new Uint8Array(8);
              o2[0] = 181, o2[1] = 0;
              var u2 = s3.length, a2 = e3.length;
              return o2[2] = u2 >> 8, o2[3] = u2 - (o2[2] << 8), o2.set(new Uint8Array(Int32Array.from([a2]).buffer).reverse(), 4), new Uint8Array(Array.from(o2).concat(Array.from(s3)).concat(Array.from(e3)));
            }, t3.prototype.getWebRTCHead = function(t4, i3) {
              var n3 = new Uint8Array(7);
              return n3[0] = 17, n3[1] = t4 >> 8, n3[2] = t4 - (n3[1] << 8), n3.set(new Uint8Array(Int32Array.from([i3]).buffer).reverse(), 3), n3;
            }, t3.prototype.encodePBBody = function(t4, i3) {
              var n3 = Xh[t4].create(i3);
              return Xh[t4].encode(n3).finish();
            }, t3.prototype.decodePBBody = function(t4, i3) {
              var n3 = Fh[t4.cmd];
              if (n3)
                return Xh[n3].decode(i3);
              this.an.error("".concat(this.f_, " cmd is not rtc"));
            }, t3.prototype.handlePushMsg = function(t4, i3) {
              var n3 = t4[0];
              if (181 === n3) {
                var e3 = (t4[2] << 8) + t4[3], r3 = $h.Header.decode(t4.slice(8, 8 + e3));
                if (101 === r3.cmd) {
                  var s3 = t4.slice(8 + e3), o2 = s3[0];
                  if (17 === o2) {
                    var u2 = (s3[1] << 8) + s3[2], a2 = Xh.Head.decode(s3.slice(7, 7 + u2)), c2 = s3.slice(7 + u2);
                    return { header: a2, body: this.decodePBBody(a2, c2) };
                  }
                  this.an.error("".concat(this.f_, " webrtc tag error ").concat(o2));
                } else
                  this.an.error("".concat(this.f_, " cmd error ").concat(r3.cmd));
              } else
                this.an.error("".concat(this.f_, " type error ").concat(n3));
            }, t3;
          }(), nf = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), ef = function(t3) {
            function i3(i4, n3) {
              var e3 = t3.call(this) || this;
              return e3.b_ = i4, e3.an = n3, e3.retryActiveCount = 1, e3.RETRY_MAX_TIME = 90, e3.rr = 0.3, e3.sr = 4.8, e3.aborted = false, e3.f_ = "zc.rssh " + i4.server, e3;
            }
            return nf(i3, t3), i3.prototype.startRetryTask = function(t4, i4, n3, e3, r3) {
              this.an.info("".concat(this.f_, " start retry task"));
              var s3 = i4.roomID, o2 = i4.token, u2 = i4.firstInterval;
              this.init(t4), this.startMaxTime(), this.onCompleteActive = n3, this.onSucActive = e3, this.onFailActive = r3, this.active(u2, { roomID: s3, token: o2 });
            }, i3.prototype.active = function(t4, i4) {
              var n3 = this;
              if (this.an.info("".concat(this.f_, " active ").concat(t4)), this.retryTimer)
                return this.an.info("".concat(this.f_, " has actived, ignore")), false;
              if (this.isOverTime)
                return this.an.info("".concat(this.f_, " retry over time, stop retry")), false;
              this.retryActiveInterval = this.getRetryDelayByCount(this.retryActiveCount);
              var e3 = (0, B.Cs)(t4) ? t4 : this.retryActiveInterval, r3 = function() {
                n3.an.info("".concat(n3.f_, " connect timer triggered ") + n3.b_.mediaState), n3.retryTimer && clearTimeout(n3.retryTimer), n3.retryTimer = null, n3.retryActiveCount++, n3.b_ && (n3.b_.mediaState === D.LOGOUT || 0 === t4 ? (n3.b_.connectServer(null == i4 ? void 0 : i4.roomID, null == i4 ? void 0 : i4.token, function(t5, i5) {
                  n3.handleConnectRsp(t5, i5);
                }), 0 === t4 && (n3.onCompleteActive && n3.onCompleteActive(n3.b_.server), n3.onCompleteActive = void 0)) : n3.b_.mediaState === D.LOGIN && n3.qr());
              }, s3 = "";
              return 0 === e3 ? (r3(), s3 += "connect immediately") : (this.retryTimer = setTimeout(r3, e3), s3 += "connect timer start, delay ".concat(e3)), this.an.info("".concat(this.f_, " ").concat(s3)), true;
            }, i3.prototype.handleConnectRsp = function(t4, i4) {
              this.an.info(this.f_ + " connect res " + i4 + " aborted " + this.aborted), this.aborted || (0 != i4 ? this.b_.g_(i4) ? (this.qr(), this.onFailActive && this.onFailActive(this.b_.server, i4), this.resetCallback()) : this.active() : (this.an.info("".concat(this.f_, " connect suc ")), this.qr(), this.onSucActive && this.onSucActive(t4), this.resetCallback()));
            }, i3.prototype.getRetryDelayByCount = function(t4) {
              var i4 = Math.min(this.sr, this.rr * Math.pow(2, t4 < 2 ? 0 : t4)), n3 = Math.random(), e3 = Math.floor(n3 * (1e3 * i4 + 1));
              return this.an.info("".concat(this.f_, " attempt ").concat(t4, " ").concat(i4, " ").concat(e3)), e3;
            }, i3.prototype.startMaxTime = function() {
              var t4 = this;
              this.maxTimer || (this.maxTimer = setTimeout(function() {
                t4.an.warn("".concat(t4.f_, " connect over max time ").concat(t4.RETRY_MAX_TIME, "s, stop retry, aborted ") + t4.aborted), t4.isOverTime = true, t4.aborted || (t4.invalid(), t4.aborted = true, t4.onFailActive && t4.onFailActive(t4.b_.server, e2.jZ), t4.resetCallback());
              }, 1e3 * this.RETRY_MAX_TIME));
            }, i3.prototype.stopMaxTime = function() {
              this.maxTimer && clearTimeout(this.maxTimer), this.maxTimer = null;
            }, i3.prototype.qr = function() {
              this.an.info("".concat(this.f_, " stop retry")), this.stopMaxTime(), this.invalid(), this.aborted = true;
            }, i3.prototype.onactive = function() {
              for (var t4 = [], i4 = 0; i4 < arguments.length; i4++)
                t4[i4] = arguments[i4];
            }, i3.prototype.invalid = function() {
              this.an.info("".concat(this.f_, " invalid")), this.retryTimer && clearTimeout(this.retryTimer), this.retryTimer = null, this.startRetryTimer && clearTimeout(this.startRetryTimer), this.startRetryTimer = null, this.retryStartTime = 0, this.retryActiveCount = 1;
            }, i3.prototype.resetCallback = function() {
              this.onCompleteActive = void 0, this.onSucActive = void 0, this.onFailActive = void 0;
            }, i3.prototype.reset = function() {
              this.an.info(this.f_ + " reset"), this.stopMaxTime(), this.invalid(), this.resetCallback();
            }, i3;
          }(ee), rf = "zc.bwa", sf = function() {
            function t3(t4, i3, n3) {
              this.an = t4, this.gn = i3, this.pn = n3, this.timer = 0, this.__ = e2.b3.Excellent, this.y_ = 5;
            }
            return Object.defineProperty(t3.prototype, "S_", { get: function() {
              return +this.gn.streamReportSpeed.toFixed(1);
            }, enumerable: false, configurable: true }), t3.prototype.E_ = function() {
              var t4, i3 = null !== (t4 = this.pn.reporter.tracerHandler.getUploadStatus()) && void 0 !== t4 ? t4 : { uploadSpeed: 0, increaseSpeed: 0 };
              return +Math.max(i3.uploadSpeed, i3.increaseSpeed).toFixed(1);
            }, t3.prototype.setUploadStrategy = function(t4, i3) {
              return this.an.setUploadStrategy(t4), t4 != this.y_ && (this.y_ = t4, i3 && this.an.info("".concat(rf, " ").concat(i3)), true);
            }, t3.prototype.start = function() {
              var t4, i3, n3 = this, e3 = null !== (i3 = null !== (t4 = this.gn.au("log_strategy", true)) && void 0 !== t4 ? t4 : this.gn.au("log_strategy")) && void 0 !== i3 ? i3 : -1;
              [0, 1, 2, 3, 4, 5].includes(e3) ? this.stop() : this.timer || (this.k_(), this.timer = setInterval(function() {
                n3.k_();
              }, 3e3));
            }, t3.prototype.k_ = function() {
              var t4, i3, n3 = Object.values(this.gn.publisherList), r3 = Object.values(this.gn.playerList);
              if (n3.length > 0) {
                this.endStreamTime = void 0;
                var s3 = n3.reduce(function(t5, i4, e3) {
                  var r4, s4 = i4.publisher, o3 = s4.targetVBitrate;
                  s4.lowStream && (o3 += null !== (r4 = s4.lowStreamVBitrate) && void 0 !== r4 ? r4 : 0), t5.needBitrate += o3, 0 === s4.mic_status && (t5.needBitrate += 100), t5.hasPublishing || 6 !== s4.state || (t5.hasPublishing = true);
                  var u3 = s4.getAvailableBitrate();
                  (0, B.TE)(u3) || t5.bitrateList.push(u3);
                  var a3 = s4.qualityGrade;
                  a3 > t5.netGrade && (t5.netGrade = a3), 0 === s4.camera_status && (t5.hasVideo = true, s4.isLowVideoQuality && (t5.isReduceVideoQuality = true));
                  var c3 = t5.bitrateList.length;
                  return e3 === n3.length - 1 && c3 > 0 && (t5.bitrate = t5.bitrateList.reduce(function(t6, i5) {
                    return t6 + i5;
                  }, 0) / c3), t5;
                }, { needBitrate: 0, bitrateList: [], bitrate: void 0, netGrade: e2.b3.Excellent, isReduceVideoQuality: false, hasVideo: false, hasPublishing: false }), o2 = s3.bitrate, u2 = s3.needBitrate, a2 = s3.netGrade, c2 = s3.isReduceVideoQuality, h2 = s3.hasVideo, f2 = s3.hasPublishing;
                if (window.noZegoLogStrategy)
                  this.an.setUploadStrategy(5), this.y_ = 5;
                else if (f2)
                  if (o2) {
                    var l2 = o2 - u2 - 8 * r3.length;
                    if (!window.noZegoLogStrategy) {
                      var d2 = void 0;
                      l2 <= 0 && h2 && !c2 ? this.an.setUploadStrategy(d2 = 1) : d2 = this.an.setUpBitrate(l2), (0, B.TE)(d2) || d2 == this.y_ || (this.an.info("".concat(rf, " publish strategy: ").concat(d2, " bitrate: ").concat(l2, " grade: ").concat(a2, " reduce: ").concat(!h2 || c2)), this.y_ = d2), (0, B.TE)(a2) || (this.__ = a2);
                    }
                  } else {
                    d2 = this.O_(a2);
                    this.setUploadStrategy(d2, "publish strategy: ".concat(d2, " grade: ").concat(a2, " reduce: ").concat(c2));
                  }
                else
                  this.an.setUploadStrategy(d2 = 1), this.setUploadStrategy(d2, "publish requesting strategy: ".concat(d2));
              } else if (r3.length > 0) {
                this.endStreamTime = void 0;
                var v2 = r3.reduce(function(t5, i4) {
                  return t5.hasPlaying || 6 !== i4.state || (t5.hasPlaying = true), i4.qualityGrade > t5.grade && (t5.grade = i4.qualityGrade), t5;
                }, { grade: e2.b3.Excellent, hasPlaying: false }), m2 = v2.hasPlaying;
                d2 = this.O_(a2 = v2.grade);
                m2 && 0 !== d2 || (d2 = 1), window.noZegoLogStrategy ? (this.an.setUploadStrategy(5), this.y_ = 5) : this.setUploadStrategy(d2, "play strategy: ".concat(d2, " grade: ").concat(a2, " playing: ").concat(m2));
              } else {
                var p2 = this.E_(), g2 = +(null !== (i3 = (null === (t4 = this.pn.rtm) || void 0 === t4 ? void 0 : t4.netAgent).speed) && void 0 !== i3 ? i3 : 0).toFixed(1), b2 = "".concat(rf, " will end. curr strategy: ").concat(this.y_, " grade: ").concat(this.__, " tracer: ").concat(p2, " speedLog: ").concat(this.S_, " netAgent: ").concat(g2);
                if (this.endStreamTime || (this.endStreamTime = Date.now()), Date.now() - this.endStreamTime > 3e4 || p2 + this.S_ + g2 < 10) {
                  d2 = this.O_(e2.b3.Excellent);
                  this.setUploadStrategy(d2) && (b2 += " target strategy ".concat(d2));
                }
                this.an.info(b2), 5 === this.y_ && this.stop();
              }
            }, t3.prototype.lazyStopCheck = function() {
              [e2.b3.Excellent, e2.b3.Good].includes(this.__);
            }, t3.prototype.stop = function() {
              var t4, i3, n3 = "".concat(rf, " end check net. ").concat(this.__);
              this.timer && (clearInterval(this.timer), this.timer = 0);
              var e3 = null !== (i3 = null !== (t4 = this.gn.au("log_strategy", true)) && void 0 !== t4 ? t4 : this.gn.au("log_strategy")) && void 0 !== i3 ? i3 : -1;
              (!e3 || e3 < 0) && (e3 = 5), this.an.setUploadStrategy(e3), (0, B.TE)(e3) || e3 == this.y_ || (n3 += " new strategy ".concat(e3), this.y_ = e3), this.an.info(n3);
            }, t3.prototype.O_ = function(t4) {
              var i3, n3 = this.__;
              switch (t4 < n3 && (t4 = n3 - 1), this.__ = t4, t4) {
                case e2.b3.Excellent:
                  i3 = 5;
                  break;
                case e2.b3.Good:
                  i3 = 3;
                  break;
                case e2.b3.Middle:
                  i3 = 2;
                  break;
                case e2.b3.Poor:
                  i3 = 1;
                  break;
                case e2.b3.Die:
                  i3 = 0;
                  break;
                default:
                  i3 = 4;
              }
              return i3;
            }, t3.defaultAvailableBitrate = 5e4, t3;
          }(), of = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), uf = function() {
            return uf = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, uf.apply(this, arguments);
          }, af = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          };
          !function(t3) {
            t3[t3.NotReUse = 0] = "NotReUse", t3[t3.TheSameReUse = 1] = "TheSameReUse", t3[t3.DiffReUse = 2] = "DiffReUse", t3[t3.AllReUse = 3] = "AllReUse";
          }(Zh || (Zh = {}));
          var cf = "rtc", hf = "l3", ff = L.Og, lf = ff.event, df = ff.error, vf = L.Nr, mf = vf.error, pf = e2.h7.error, gf = O.frameRate, bf = O.bitRate, _f = function() {
            function t3(t4) {
              this.an = t4, this.lazyTimeout = 9e4, this.taskMap = {};
            }
            return t3.prototype.startLazyEndTimer = function(t4, i3, n3) {
              var e3 = this;
              this.taskMap[t4] && clearTimeout(this.taskMap[t4].timer);
              var r3 = setTimeout(function() {
                i3(), delete e3.taskMap[t4];
              }, null != n3 ? n3 : this.lazyTimeout);
              this.taskMap[t4] = { callback: i3, timer: r3 };
            }, t3.prototype.clearLazyEndTimer = function(t4) {
              this.taskMap[t4] && (clearTimeout(this.taskMap[t4].timer), delete this.taskMap[t4], this.an.info("zsc.rsfs.0 clearLazyEndTimer: " + t4));
            }, t3.prototype.endAll = function() {
              for (var t4 in this.taskMap)
                clearTimeout(this.taskMap[t4].timer), this.taskMap[t4].callback(), delete this.taskMap[t4];
            }, t3.prototype.hasEndTask = function(t4) {
              return !!this.taskMap[t4];
            }, t3.prototype.end = function(t4) {
              this.taskMap[t4] && (clearTimeout(this.taskMap[t4].timer), this.taskMap[t4].callback(), delete this.taskMap[t4]);
            }, t3;
          }(), yf = function(t3) {
            function i3(i4, n3, r3, s3, o2, u2) {
              var a2, c2, h2, f2 = this;
              return (f2 = t3.call(this) || this).an = i4, f2.pn = n3, f2.dataReport = r3, f2.I_ = s3, f2.acMgr = o2, f2.geo = u2, f2.testEnvironment = false, f2.playModule = null, f2.trackUtils = new Gh(f2.an), f2.R_ = 3e3, f2.C_ = 3e3, f2.previewStreamList = [], f2.A_ = {}, f2.captureStreamElementMap = /* @__PURE__ */ new Map(), f2.soundLevelDelegate = false, f2.soundLevelInterval = 1e3, f2.enableInBackground = false, f2.Od = true, f2.z_ = {}, f2.D_ = {}, f2.streamIPStackMode = y.IPv4Prefer, f2.isMicEnabled = true, f2.isDataChannelEnabled = false, f2.targetQuality = e2.Bl.MiddleMinQuality, f2.probeInterval = 6e4, f2.N_ = 3e5, f2.gwNode = "", f2.playerList = {}, f2.publisherList = {}, f2.playSuccessCallBackList = {}, f2.playErrorCallBackList = {}, f2.waitPublishList = [], f2.waitPlayList = [], f2.autoSwitchProtocol = true, f2.udpFailNum = 0, f2.maxUdpFailNum = 2, f2.probeStartedNum = 3, f2.cachedGwNodesList = {}, f2.cachedGwNodesMode = Zh.TheSameReUse, f2.P_ = -1, f2.M_ = -1, f2.qp = null, f2.x_ = 3, f2.useCopyMusic = false, f2.playEventKeys = {}, f2.isCustomVC = false, f2.defaultVideoMuted = false, f2.defaultAudioMuted = false, f2.agentConnectIPStackType = -1, f2._agentIpStackDetection = { IPv4: A.unknown, IPv6: A.unknown }, f2.miniSdpWorker = null, f2.ipV6Prefer = 0, f2.ipNodeType = C.ZV4Priority, f2.isCandidateHasIPv6 = false, f2.referenceVideoBitrate = -1, f2.referenceBitrateUpdateTs = 0, f2.j_ = function(t4) {
                f2.an.info("zsc.orh.0 call ".concat(t4)), f2.retryStreamList(t4);
              }, f2.q_ = function(t4, i5) {
                f2.an.info("zsc.odh.0 call ".concat(t4, " connect fail ").concat(i5)), f2.openConnectServerTask(t4);
              }, f2.eventHandler = { visibilitychange: function() {
                !f2.enableInBackground && f2.soundLevelDelegate && (!G.VJ.hidden ? (f2.enableSoundLevelProcessor(true), f2.activeSoundLevel(), "suspended" === f2.ac.state && f2.ac.resume()) : (f2.soundLevelTimer && clearTimeout(f2.soundLevelTimer), f2.soundLevelTimer = null, f2.enableSoundLevelProcessor(false)));
              } }, f2.isNotSupportSeiWorker = false, f2.turnServers = void 0, f2.checkDeviceChange = void 0, f2.L_ = new _f(i4), f2.I_._on("_roomStateUpdate", function(t4, i5, n4, r4, s4, o3) {
                var u3;
                for (var a3 in "CONNECTING" == i5 ? u3 = 1 : "CONNECTED" === i5 && (u3 = 5), f2.B_.timer || (0, B.TE)(u3) || f2.B_.setUploadStrategy(u3, "login state ".concat(i5, " , strategy ").concat(u3)), f2.playerList) {
                  var c3 = f2.playerList[a3];
                  if (c3.room.roomID == t4 && 6 === c3.state && c3.playMode == e2.ey.CDN)
                    if ("CONNECTED" == i5) {
                      c3.CDNBrokenCnt++;
                      var h3 = c3.zegoCdnPlayer, l2 = c3.zegoExpressPlayer;
                      l2 ? l2.resume() : h3 && (h3.canRetry = true, h3.retry());
                    } else
                      "DISCONNECTED" === i5 && !o3 && f2.stopPlayingStream(a3);
                }
              }), G.VJ.addEventListener("visibilitychange", f2.eventHandler.visibilitychange), f2.Fg = new Dh(i4, n3, f2), null === (a2 = f2.I_.netAgent) || void 0 === a2 || a2.on("clientInfo", function(t4) {
                var i5;
                if (f2.pn.accessClientIp && (null == t4 ? void 0 : t4.clientIP) && f2.pn.accessClientIp !== t4.clientIP) {
                  f2.an.info("zsc.cs.0 client ip changed " + f2.pn.accessClientIp + " " + t4.clientIP);
                  var n4 = f2.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.rH.event);
                  n4.setAttributes({ last_client_ip: f2.pn.accessClientIp, current_client_ip: t4.clientIP }), n4.end(), f2.lastChangeIpTime = Date.now(), f2.U_(f2.publisherList, true), f2.U_(f2.playerList, false), f2.z_ = {};
                }
                if (f2.pn.accessClientIp = t4.clientIP, !f2.pn.clientTimeOffset && (null == t4 ? void 0 : t4.timeOffset)) {
                  var r4 = f2.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.co.event);
                  r4.setAttributes({ ntp_source: 2, ntp_offset: null == t4 ? void 0 : t4.timeOffset }), r4.end();
                }
                (0, B.Cs)(null == t4 ? void 0 : t4.timeOffset) && (f2.pn.clientTimeOffset = null == t4 ? void 0 : t4.timeOffset), f2.updateTimeOffsetInterval(), null === (i5 = f2.Fg) || void 0 === i5 || i5.checkIfSupportNTP();
              }), null === (c2 = f2.I_.netAgent) || void 0 === c2 || c2.on("connected", function() {
                var t4 = f2.I_.netAgent.connectIPStackType;
                f2.an.info("zsc.cs.0 netAgent connect stack ".concat(R[t4])), f2.agentConnectIPStackType = t4;
              }), null === (h2 = f2.I_.netAgent) || void 0 === h2 || h2.on("ipDetection", function(t4) {
                f2.an.info("zsc.cs.0 ip detection ".concat(JSON.stringify(t4)));
                var i5 = t4.linkConnectDetection;
                if (i5 && (f2._agentIpStackDetection.IPv4 !== i5.IPv4 || f2._agentIpStackDetection.IPv6 !== (null == i5 ? void 0 : i5.IPv6))) {
                  f2._agentIpStackDetection = i5;
                  var n4 = f2.getStreamIPNodesMode().ipNodeType;
                  f2.ipNodeType = n4;
                }
              }), f2.B_ = new sf(i4, f2, f2.pn), f2;
            }
            return of(i3, t3), Object.defineProperty(i3.prototype, "signalList", { get: function() {
              return this.A_;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "probeList", { get: function() {
              return this.z_;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "streamReportSpeed", { get: function() {
              return this.Fg.speed;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "agentIpStackDetection", { get: function() {
              return this._agentIpStackDetection;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "ac", { get: function() {
              return this.acMgr.ac;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isProxy", { get: function() {
              return !!(gs.proxyCtrl && true !== this.pn.engineConfig.notProxyRTC || this.isLocalProxy);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "isLocalProxy", { get: function() {
              var t4 = gs.proxyCtrl;
              return t4 && !(null == t4 ? void 0 : t4.getTurnInfo);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "useingUdp", { get: function() {
              var t4 = this.playerList, i4 = Object.values(this.publisherList), n3 = Object.values(t4);
              if (!i4.length && !n3.length)
                return false;
              var e3 = !!n3.find(function(t5) {
                return 5 === t5.stateNego;
              });
              return !!e3 || !!(e3 = !!i4.find(function(t5) {
                return 5 === t5.publisher.stateNego;
              }));
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "rxQuality", { get: function() {
              return this.M_;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "txQuality", { get: function() {
              return this.P_;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "maxChannels", { get: function() {
              var t4;
              return this.au("max_channels", true) ? t4 = this.au("max_channels", true) : (0, B.Cs)(this.pn.engineConfig.maxChannels) ? t4 = this.pn.engineConfig.maxChannels : this.au("max_channels") && (t4 = this.au("max_channels")), t4;
            }, enumerable: false, configurable: true }), i3.setCloseNetProbe = function(t4) {
              i3.closeNetProbe = t4;
            }, i3.setReportCustomerContext = function(t4) {
              Dh.reportCustomerContext = t4;
            }, i3.prototype.U_ = function(t4, i4) {
              var n3 = this, e3 = "zc.rgnds";
              (0, G.rA)(this.an, e3);
              var r3 = null;
              for (var s3 in t4)
                r3 = i4 ? t4[s3].publisher : t4[s3];
              r3 && (this.clearCachedGwNodesList(r3, i4), Object.keys(this.D_).forEach(function(t5) {
                return n3.D_[t5].ipChange = true;
              }), this.stopNetProbe(r3), (0, G.EK)(this.an, e3));
            }, Object.defineProperty(i3.prototype, "billingTimer", { get: function() {
              return this._billingTimer || (this._billingTimer = new Bh(this.an, this.pn)), this._billingTimer;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "cameraPreviewStream", { get: function() {
              return this.previewStreamList.find(function(t4) {
                return "camera" === t4.previewType;
              });
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "microphonePreviews", { get: function() {
              return this.previewStreamList.filter(function(t4) {
                return "camera" === t4.previewType && t4.micTrack;
              });
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "publishersLength", { get: function() {
              return Object.keys(this.publisherList).length;
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "hasRTCStream", { get: function() {
              var t4 = Object.keys(this.publisherList).length, i4 = Object.values(this.playerList).filter(function(t5) {
                return t5.playMode === e2.ey.RTC;
              }).length;
              return !(!t4 && !i4);
            }, enumerable: false, configurable: true }), Object.defineProperty(i3.prototype, "hasL3Stream", { get: function() {
              return 0 !== Object.values(this.playerList).filter(function(t4) {
                return t4.playMode === e2.ey.L3;
              }).length;
            }, enumerable: false, configurable: true }), i3.prototype.initMiniSdpWorker = function(t4) {
              var i4, n3 = fo(this.pn.browserInfo, "chrome", 78, 0);
              t4 && qh.isSupported && !n3 ? this.miniSdpWorker = this.miniSdpWorker || new qh(this.an) : (this.pn.$u = false, null === (i4 = this.miniSdpWorker) || void 0 === i4 || i4.destroy(), this.miniSdpWorker = null);
            }, i3.prototype.setSessionInfo = function(t4, i4, n3) {
              this.an.debug("zsc.ssi.0 called"), this.appid = t4, this.userid = i4, this.testEnvironment = n3;
            }, i3.prototype.onPlayStateUpdate = function(t4, i4, n3, e3) {
            }, i3.prototype.onPlayQualityUpdate = function(t4, i4) {
            }, i3.prototype.onPublishStateUpdate = function(t4, i4, n3) {
            }, i3.prototype.onPublishQualityUpdate = function(t4, i4) {
            }, i3.prototype.setPublishStateStart = function(t4, i4, n3, e3, r3, s3) {
              var o2, u2, a2 = this, c2 = "zsc.pss.0", h2 = Uo(this.an, i4);
              h2.info(c2 + " call");
              var f2 = this.checkPreview(n3);
              if (!f2)
                return h2.error(c2 + " stream not found"), false;
              if (this.publisherList[i4])
                return h2.error(c2 + "  publisher already exist"), this.cr.spanSetAttributes({ key: lf, par: i4 }, { error: df.ie.code, message: df.ie.message }), false;
              var l2 = new Mc(i4, this.an, this.dataReport, this.pn.engineConfig.publishQualityInterval || this.R_, this.C_, this, this.pn, f2);
              this.isProxy && this.Od && this.setIsPeer(false), l2.isPeer = this.Od, l2.isExternal = true, l2.parentSpanKey = L.ch.event;
              var d2 = null === (o2 = null == f2 ? void 0 : f2.videoTrack) || void 0 === o2 ? void 0 : o2.label, v2 = "", m2 = "", p2 = n3.getAudioTracks()[0] && n3.getAudioTracks()[0].label;
              try {
                v2 = null === (u2 = null == f2 ? void 0 : f2.videoTrack) || void 0 === u2 ? void 0 : u2.getSettings().deviceId, m2 = n3.getAudioTracks()[0] && n3.getAudioTracks()[0].getSettings().deviceId;
              } catch (t5) {
                h2.warn(c2 + " get device id failed. error: " + t5);
              }
              var g2 = new Zc(i4, this.an, this.pn, this, true);
              return this.publisherList[i4] = { seq: 0, room: t4, localStream: n3, publisher: l2, streamID: i4, publishOption: e3, cameraLabel: d2 || "", microLabel: p2 || "", cameraDeviceId: v2 || "", microDeviceId: m2 || "", deviceStateCount: 0, retryStreamHandler: g2, isDataChannel: s3, streamSid: r3, isRetweetCDN: false }, 1 === this.publishersLength && this.G_(true), l2.onPublishStateUpdate = function(t5, i5, n4, e4, r4, s4) {
                var o3 = a2.publisherList[i5];
                o3 ? o3.retryStreamHandler.publishStateHandle(t5, o3.streamID, n4, e4, r4, s4) : h2.error("zsc.psuh.0 cannot find publish");
              }, l2.onPublishQualityUpdate = function(t5, i5) {
                var n4 = a2.publisherList[t5];
                n4 ? (a2.pn.deviceStateOut && 0 === i5.audio.audioBitrate ? (n4.deviceStateCount++, n4.deviceStateCount >= 2 && (n4.deviceStateCount = 0, a2.pn.deviceStateOut = false, h2.warn(c2 + " publish audio error by device"))) : n4.deviceStateCount = 0, a2.onPublishQualityUpdate(n4.streamID, i5)) : h2.error("zsc.psuh.0 cannot find publish");
              }, true;
            }, i3.prototype.retweetCDN = function(t4, i4, n3) {
              var e3 = this, r3 = Uo(this.an, i4);
              return new Promise(function(s3, o2) {
                r3.info("zsc.rwc.0 call ".concat(t4, " ").concat(n3));
                var u2 = e3.getRoomByStreamID(i4);
                u2 ? u2.streamHandler._publishTarget({ type: "add" === t4 ? "addpush" : "delpush", streamID: i4, pushUrl: n3 }, function() {
                  r3.info("zsc.rwc.0 suc "), s3(void 0);
                }, function(t5) {
                  r3.warn("zsc.rwc.0 fail  " + JSON.stringify(t5)), o2(t5);
                }) : r3.info("zsc.rwc.0 no room");
              });
            }, i3.prototype.startPublishingStream = function(t4) {
              var i4, n3 = this, e3 = Uo(this.an, t4);
              e3.info("zsc.sps.0 call");
              var r3 = this.publisherList[t4];
              if (r3) {
                (null === (i4 = r3.publishOption) || void 0 === i4 ? void 0 : i4.cdnUrl) && !r3.isRetweetCDN && this.retweetCDN("add", t4, r3.publishOption.cdnUrl).then(function() {
                  e3.info("zsc.sps.0 add cdn suc"), r3.isRetweetCDN = true;
                }).catch(function(t5) {
                  e3.warn("zsc.sps.0 add cdn fail " + JSON.stringify(t5));
                });
                var s3 = r3.retryStreamHandler;
                s3.invalid(), s3.init(this.pn.streamRetryTime), s3.startMaxTime(), this.connectWebRTCCenterServer(false, true, null == r3 ? void 0 : r3.room.roomID, null == r3 ? void 0 : r3.room.token, function(i5) {
                  var e4, r4 = null === (e4 = n3.publisherList[t4]) || void 0 === e4 ? void 0 : e4.publisher;
                  r4 && (r4.setSignal(i5), n3.publishStream(t4)), n3.billingTimer.startChargeInfosUpload(), n3.activeSoundLevel();
                }), this.B_.start();
              } else
                e3.error("zsc.sps.0 publisher don't exist");
            }, i3.prototype.publishStream = function(t4) {
              var i4 = this, n3 = Uo(this.an, t4);
              n3.info("zsc.ps.0 call");
              var e3 = this.publisherList[t4].publisher;
              if (e3)
                if (n3.info("zsc.ps.0 state ".concat(e3.state)), 7 === e3.state) {
                  var r3 = null, s3 = this.publisherList[t4].publishOption, o2 = this.checkPreview(this.publisherList[t4].localStream);
                  o2 ? ((r3 = o2.localStream) && r3.getTracks().forEach(function(t5) {
                    mt(t5, i4.an, "zsc.ps.0");
                  }), this.cr.spanSetAttributes({ key: lf, par: t4 }, { cap_w: ff.cap_w(o2.videoInfo.width), cap_h: ff.cap_h(o2.videoInfo.height), w: ff.w(o2.videoInfo.width), h: ff.h(o2.videoInfo.height), video_en_fps: ff.video_en_fps(o2.videoInfo.frameRate), video_en_bps: ff.video_en_bps(1e3 * o2.videoInfo.bitRate), is_mini: ff.is_mini(e3.$u) }), r3 ? (n3.info("zsc.ps.0 call success"), this.setStreamGwNode(e3, true), e3.getDispatchIPNodeMode(), e3.startPublish(t4, r3, s3, this.getReferredVideoBitrate())) : n3.error("zsc.ps.0 no localStream found")) : n3.error("zsc.ps.0 no preview found");
                } else
                  n3.warn("zsc.ps.0 publisher is progress");
              else
                n3.info("zsc.ps.0 publisher don't exist");
            }, i3.prototype.stopPublishingStream = function(t4, i4) {
              var n3 = Uo(this.an, t4);
              n3.info("zsc.sps.0.1 call " + JSON.stringify(i4));
              var e3 = this.publisherList[t4];
              if (e3) {
                var r3 = e3.retryStreamHandler;
                r3 && (r3.stopMaxTime(), r3.invalid()), e3.isRetweetCDN && e3.publishOption.cdnUrl && this.retweetCDN("del", t4, e3.publishOption.cdnUrl).then(function() {
                  e3.isRetweetCDN = false, n3.info("zsc.sps.0.1 del cdn suc");
                }).catch(function(t5) {
                  n3.warn("zsc.sps.0.1 del cdn fail " + JSON.stringify(t5));
                }), delete this.publisherList[t4], this.resetNetworkData();
                var s3 = e3.publisher;
                s3 && (r3.getTryTime(s3), s3.stopPublish(i4), delete e3.publisher), this.removeStreamFromSignal(true, t4), this.billingTimer.stopChargeInfosUpload(), this.stopSoundLevel(), 0 === this.publishersLength && this.G_(false), n3.info("zsc.sps.0.1 call success");
              } else
                n3.warn("zsc.sps.0.1 publisher don't exist");
            }, i3.prototype.createStreamSignal = function(t4) {
              var i4 = new tf(t4, this.an, this.pn, this.I_.netAgent);
              return this.pn.clientIP = this.I_.netAgent.clientIP || "", i4.setSessionInfo(this.appid, this.userid), i4.onReconnected = this.j_, i4.onNeedRetry = this.q_, i4;
            }, i3.prototype.connectWebRTCCenterServer = function(t4, i4, n3, e3, r3) {
              var s3, o2 = this, u2 = this.an, a2 = "zsc.cwrcs.0";
              u2.info("".concat(a2, " call, isLogin: ").concat(t4, ", server: ").concat(i4 ? "rtc" : "l3"));
              var c2 = null, h2 = i4 ? cf : hf;
              this.L_.clearLazyEndTimer(h2), this.A_[h2] ? (s3 = this.A_[h2].signal, this.A_[h2].retryServerSignalHandler = null) : (s3 = this.createStreamSignal(h2), this.A_[h2] = { signal: s3 }), s3 && (s3.mediaState === D.LOGOUT ? (u2.info("".concat(a2, " has not connect")), c2 || (c2 = new ef(s3, this.an), this.A_[h2].retryServerSignalHandler = c2), c2.startRetryTask(this.pn.serverRetryTime, { roomID: n3, token: e3, firstInterval: 0 }, function(t5) {
                var i5 = o2.A_[t5].signal;
                i5 && r3 && r3(i5);
              }, function(i5) {
                o2.retryStreamList(i5);
                var n4 = o2.A_[i5].signal;
                t4 && n4 && (i5 === cf && o2.hasRTCStream || i5 === hf && o2.hasL3Stream || o2.disconnectSignalURL(n4, true, 15e3));
              }, function(t5, i5) {
                o2.handleServerConnectFail(t5, i5);
              })) : s3.mediaState === D.TRY_LOGIN ? (u2.info("".concat(a2, " connecting")), r3 && r3(s3)) : (u2.info("".concat(a2, "  already connected")), r3 && r3(s3)));
            }, i3.prototype.handleServerConnectFail = function(t4, i4) {
              i4 === e2.jZ ? (t4 === cf && this.hasRTCStream || t4 === hf && this.hasL3Stream) && this.openConnectServerTask(t4) : i4 && this.handleConnectFailStream(t4, i4);
            }, i3.prototype.handleConnectFailStream = function(t4, i4) {
              var n3 = "zsc.rcsr.0";
              if (this.an.info("".concat(n3, " reconnect ").concat(t4, " ").concat(i4)), this.pn.engineConfig.keepRtcWhenSignalDisconnected) {
                var r3 = function(t5, n4) {
                  var e3, r4 = false;
                  return i4 === re.lph.code ? (e3 = uf({}, re.lph), r4 = true) : ((e3 = uf({}, re.F$4)).message = e3.message + " " + i4, 1008 === i4 && (e3 = re.g9p, r4 = true), 20010 === i4 && (r4 = true, e3 = t5 ? JSON.parse(JSON.stringify(re.ZpF)) : n4 ? JSON.parse(JSON.stringify(re.MK1)) : JSON.parse(JSON.stringify(re.b1q)))), { error: e3, stopRetry: r4 };
                };
                Object.values(this.publisherList).forEach(function(t5) {
                  var i5, n4 = r3(true);
                  null === (i5 = t5.retryStreamHandler) || void 0 === i5 || i5.publishStateHandle(e2.eZ.error, t5.streamID, n4.error, n4.stopRetry);
                }), Object.values(this.playerList).forEach(function(t5) {
                  var i5, n4 = r3(false, t5.playMode === e2.ey.RTC);
                  null === (i5 = t5.retryStreamHandler) || void 0 === i5 || i5.playStateHandle(pf, t5.streamId, n4.error, n4.stopRetry);
                });
              } else
                this.an.info("".concat(n3, " keep rtc when signal disconnect"));
            }, i3.prototype.disconnectAllSignal = function() {
              var t4 = this;
              this.an.info("zsc.dcas.0 call"), Object.values(this.A_).forEach(function(i4) {
                var n3 = i4.signal;
                n3 && t4.disconnectStreamSignal(n3);
              });
            }, i3.prototype.disconnectStreamSignal = function(t4) {
              !this.I_.stateCenter.roomModulesList.some(function(t5) {
                return "DISCONNECTED" !== t5.roomState;
              }) && this.disconnectSignalURL(t4, false);
            }, i3.prototype.disconnectSignalURL = function(t4, i4, n3) {
              var e3 = this;
              this.an.info("zsc.dcsu.0 " + t4.server + " " + i4 + " call");
              var r3 = t4.server;
              i4 ? (this.an.info("zsc.dcsu.0 lazy end"), this.L_.startLazyEndTimer(r3, function() {
                var i5 = e3.J_(r3);
                e3.an.info("zsc.dcsu.0 lazy end start " + i5), i5 && t4.disconnectServer(), e3.an.info("zsc.dcsu.0 lazy end signal");
              }, n3)) : this.L_.hasEndTask(r3) ? (this.an.info("zsc.dcsu.0 has task to end"), this.L_.end(r3)) : (this.an.info("zsc.dcsu.0 direct disconnect"), t4.disconnectServer()), this.an.info("zsc.dcsu.0 call success");
            }, i3.prototype.reConnectSignals = function() {
              this.an.info("".concat("zsc.rcs.0", " call")), Object.values(this.A_).forEach(function(t4) {
                var i4 = t4.retryServerSignalHandler, n3 = t4.signal;
                i4 && (null == i4 || i4.active(0, { roomID: null == n3 ? void 0 : n3._s, token: null == n3 ? void 0 : n3.token }));
              });
            }, i3.prototype.isNetAgentConnect = function() {
              var t4, i4;
              return null === (i4 = null === (t4 = this.I_) || void 0 === t4 ? void 0 : t4.netAgent) || void 0 === i4 ? void 0 : i4.isConnect();
            }, i3.prototype.setPlayStateStart = function(t4, i4, n3, e3) {
              var r3 = this, s3 = Uo(this.an, t4);
              if (s3.info("zsc.pss.1 call"), this.playerList[t4])
                return s3.error("zsc.pss.1 player already exist"), mf.be;
              var o2 = this.getPlayRoom(t4) || this.pn.roomList[0];
              if (!o2)
                return s3.error("zsc.pss.1 not login room"), mf.ge;
              var u2 = new Sh(t4, this.an, null, this.dataReport, this.pn.engineConfig.playQualityInterval || this.R_, this.C_, this, this.ac, this.pn, o2, i4, n3, e3);
              !this.getStream(o2, t4) && (u2.streamInRoom = false), this.isProxy && this.Od && this.setIsPeer(false), u2.isExternal = true, u2.isPeer = this.Od, this.playerList[t4] = u2;
              var a2 = o2.streamList.find(function(i5) {
                return i5.stream_id == t4;
              });
              if (a2) {
                var c2 = a2.stream_attr_opts;
                c2 && u2.setMuteStreamByPlayMode(c2);
              }
              return u2.onPlayQualityUpdate = function(t5, i5) {
                var n4 = r3.playerList[t5];
                n4 ? r3.onPlayQualityUpdate(n4.streamId, i5) : s3.error("zsc.pss.1 cannot find play");
              }, true;
            }, i3.prototype.onRemoteMicStatusUpdate = function(t4, i4, n3) {
            }, i3.prototype.onRemoteCameraStatusUpdate = function(t4, i4, n3) {
            }, i3.prototype.startPlayingStream = function(t4, i4) {
              var n3, r3, s3 = this, o2 = Uo(this.an, t4), u2 = this.playerList[t4], a2 = u2.playMode === e2.ey.CDN;
              if (o2.info("zsc.sps.1 start play called " + u2.playMode), i4 = i4 || this.playSuccessCallBackList[t4], !u2)
                return o2.error("zsc.sps.1 player don't exist"), false;
              if ((null === (n3 = u2.playOption) || void 0 === n3 ? void 0 : n3.CDNVideo) && u2.firstPlay) {
                var c2 = u2.playOption.CDNVideo;
                u2._CDNPlayerClone = c2.cloneNode(), u2.initPoster = (null == c2 ? void 0 : c2.getAttribute("poster")) || "", u2.initVideoStyle = (null == c2 ? void 0 : c2.getAttribute("style")) || "", u2.firstPlay = false;
              } else
                u2.zegoExpressPlayer && u2.firstPlay && (u2.firstPlay = false);
              var h2 = u2.retryStreamHandler;
              return h2.invalid(), h2.init(this.pn.streamRetryTime), a2 ? (u2.playCDN(function(i5) {
                var n4 = s3.playErrorCallBackList[t4];
                n4 && n4({ errorCode: i5.code, extendedData: i5.message });
              }, i4), true) : (null === (r3 = u2.completePlaySpan) || void 0 === r3 || r3.setAttributes({ urls: vf.urls([u2.serverUrl]) }), h2.startMaxTime(), h2.playStartSpan(t4, u2, true), this.connectWebRTCCenterServer(false, (null == u2 ? void 0 : u2.playMode) === e2.ey.RTC, null == u2 ? void 0 : u2.room.roomID, null == u2 ? void 0 : u2.room.token, function(n4) {
                var e3 = s3.playerList[t4];
                e3 && (e3.setSignal(n4), s3.playStream(t4, i4)), s3.billingTimer.startChargeInfosUpload(), s3.activeSoundLevel();
              }), this.B_.start(), true);
            }, i3.prototype.playStream = function(t4, i4) {
              var n3, e3 = Uo(this.an, t4);
              e3.info("zsc.ps.1 call");
              var r3 = this.playerList[t4];
              r3 ? (e3.info("zsc.ps.1 state ".concat(r3.state)), 7 === r3.state ? (e3.info("zsc.ps.1 call success"), this.setStreamGwNode(r3, false), null === (n3 = r3.zegoPeer) || void 0 === n3 || n3.getDispatchIPNodeMode(), r3.startPlay(t4, i4)) : e3.warn("zsc.ps.1 player is progress")) : e3.warn("zsc.ps.1 player don't exist");
            }, i3.prototype.rePlayStream = function(t4, i4) {
              var n3 = this.playerList[t4], e3 = this.playSuccessCallBackList[t4];
              n3 && (n3.setSignal(i4), this.playStream(t4, e3));
            }, i3.prototype.removeStreamFromSignal = function(t4, i4, n3) {
              var e3, r3, s3 = this, o2 = Uo(this.an, i4);
              o2.info("zsc.rsfs.0 call " + t4 + " " + i4);
              var u2 = function(t5) {
                o2.info("zsc.rsfs.0 ".concat(t5.server, " lazy end by remove all stream")), s3.L_.startLazyEndTimer(t5.server, function() {
                  var i5 = s3.J_(t5.server);
                  o2.info("zsc.rsfs.0 " + t5.server + "lazy end start, empty " + i5), i5 && t5.disconnectServer();
                }, n3);
              }, a2 = null === (e3 = this.A_[cf]) || void 0 === e3 ? void 0 : e3.signal;
              a2 && !this.hasRTCStream && u2(a2);
              var c2 = null === (r3 = this.A_[hf]) || void 0 === r3 ? void 0 : r3.signal;
              c2 && !this.hasL3Stream && u2(c2);
            }, i3.prototype.J_ = function(t4) {
              var i4;
              if (null === (i4 = this.A_[t4]) || void 0 === i4 ? void 0 : i4.signal) {
                if (t4 === cf && !this.hasRTCStream)
                  return true;
                if (t4 === hf && !this.hasL3Stream)
                  return true;
              }
              return false;
            }, i3.prototype.stopPlayingStream = function(t4, i4) {
              var n3 = Uo(this.an, t4);
              n3.info("zsc.sps.1.1 call " + JSON.stringify(i4));
              var e3 = this.playerList[t4];
              if (e3) {
                var r3 = e3.retryStreamHandler;
                r3 && (r3.stopMaxTime(), r3.invalid()), e3.playStream && Eu.sourceDisConnect(e3.playStream), delete this.playerList[t4], this.resetNetworkData(), r3.getTryTime(e3), e3.stopPlay(i4);
                var s3 = e3.rtcViewer;
                s3 && s3.stop(), this.removeStreamFromSignal(false, t4), !e3.isProbe && this.billingTimer.stopChargeInfosUpload(), this.stopSoundLevel(), delete this.playSuccessCallBackList[t4], delete this.playErrorCallBackList[t4], n3.debug("zsc.sps.1.1 call success");
              } else
                n3.info("zsc.sps.1.1 player don't exist");
            }, i3.prototype.reset = function(t4, i4) {
              var n3, r3, s3;
              for (var o2 in this.an.info("zsc.rs call " + t4 + " " + i4), this.publisherList) {
                var u2 = this.publisherList[o2];
                if ((null === (n3 = u2.room) || void 0 === n3 ? void 0 : n3.roomID) == t4 || !t4) {
                  var a2 = u2.publisher, c2 = false;
                  0 === i4 ? (c2 = true, a2.stopReason = "Logout") : 1002031 == i4 && (a2.stopReason = "ReachMaxAVRetryTime");
                  var h2 = 1002031 == i4 ? df.Un : { code: i4 || 0, message: "" };
                  c2 && !a2.Xh && (h2 = df.ce), null === (s3 = null === (r3 = u2.room) || void 0 === r3 ? void 0 : r3.streamHandler) || void 0 === s3 || s3.onPublishStateUpdate(e2.eZ.error, o2, h2), this.stopPublishingStream(o2, h2), delete this.pn.publishStreamList[o2];
                }
              }
              for (var f2 in this.playerList) {
                c2 = false;
                var l2 = this.playerList[f2], d2 = l2, v2 = null == d2 ? void 0 : d2.state;
                0 === i4 ? (c2 = true, l2.stopReason = "Logout") : l2.stopReason = "ReachMaxAVRetryTime";
                var m2 = l2.room, p2 = m2 && m2.roomID == t4, g2 = this.pn.roomList.length;
                h2 = 1002031 == i4 ? mf.Oe : { code: i4 || 0, message: "" };
                if (c2 && void 0 !== v2 && 6 !== v2 && (h2 = mf.De), p2 && (this.getStream(m2, f2) || 1 == g2))
                  this.onPlayStateUpdate(pf, f2, h2), this.stopPlayingStream(f2, h2);
                else if (p2 && g2 > 1) {
                  var b2 = this.pn.roomList.find(function(i5) {
                    return i5.roomID !== t4;
                  });
                  b2 ? this.playerList[f2].room = b2 : (this.stopPlayingStream(f2, h2), this.onPlayStateUpdate(pf, f2, h2));
                }
              }
              0 == this.publishersLength && 0 == Object.keys(this.playerList).length && (this.z_ = {}), this.waitPublishList = [], this.waitPlayList = [], this.Fg.resetReport(), this.an.info("zsc.rs call success");
            }, i3.prototype.openConnectServerTask = function(t4) {
              var i4 = this, n3 = this.A_[t4], e3 = n3.signal, r3 = n3.retryServerSignalHandler;
              if (null == r3 || r3.reset(), e3) {
                var s3 = new ef(e3, this.an);
                s3.startRetryTask(this.pn.serverRetryTime, { firstInterval: 0 }, function(t5) {
                }, function(t5) {
                  i4.retryStreamList(t5);
                }, function(t5, n4) {
                  i4.handleServerConnectFail(t5, n4);
                }), this.A_[t4].retryServerSignalHandler = s3;
              }
            }, i3.prototype.retryStreamList = function(t4) {
              var i4;
              for (var n3 in this.publisherList) {
                var r3 = this.publisherList[n3].publisher, s3 = this.publisherList[n3].retryStreamHandler;
                this.an.info("zsc.orh.0 reconnect " + n3 + " " + r3.state + " " + r3.stateNego), 7 == r3.state || r3.isStateRetry ? !s3.isOverTime && s3.publishStateHandle(e2.eZ.error, n3, df.xn) : 6 == r3.state && (r3.resendStreamStatus(2), s3.stopMaxTime());
              }
              for (var n3 in this.playerList) {
                var o2 = this.playerList[n3], u2 = o2, a2 = o2.playMode;
                s3 = o2.retryStreamHandler;
                this.an.info("zsc.orh.0 reconnect " + n3 + " " + u2.state + " " + u2.stateNego), (null === (i4 = u2.signal) || void 0 === i4 ? void 0 : i4.server) === t4 && (7 == u2.state || a2 !== e2.ey.CDN && u2.isStateRetry ? !s3.isOverTime && s3.playStateHandle(pf, n3, mf.Se) : 6 == u2.state && s3.stopMaxTime());
              }
            }, i3.prototype.getPublisher = function(t4) {
              var i4 = null;
              if ((0, B.QP)(t4) && this.publisherList[t4] && this.publisherList[t4].publisher)
                i4 = this.publisherList[t4].publisher;
              else if ((0, B.dr)(t4)) {
                var n3 = this.checkPublish(t4);
                n3 && (i4 = null == n3 ? void 0 : n3.publisher);
              }
              return i4;
            }, i3.prototype.getPreviewer = function(t4) {
              var i4, n3 = null;
              return (0, B.QP)(t4) && this.publisherList[t4] && this.publisherList[t4].publisher ? n3 = null === (i4 = this.publisherList[t4].publisher) || void 0 === i4 ? void 0 : i4.previewer : (0, B.dr)(t4) && (n3 = this.checkPreview(t4)), n3;
            }, i3.prototype.checkPlayer = function(t4) {
              return Object.values(this.playerList).find(function(i4) {
                return i4.playStream === t4;
              }) || null;
            }, i3.prototype.checkPreview = function(t4) {
              for (var i4 = 0; i4 < this.previewStreamList.length; i4++)
                if (this.previewStreamList[i4].localStream === t4 || t4 && !(0, B.dr)(t4) && t4.zegoStream && this.previewStreamList[i4].zegoCaptureStream == t4.zegoStream)
                  return this.previewStreamList[i4];
              return null;
            }, i3.prototype.checkPublish = function(t4) {
              for (var i4 in this.publisherList)
                if (this.publisherList[i4].localStream == t4)
                  return this.publisherList[i4];
              return null;
            }, i3.prototype.getPublishList = function(t4, i4) {
              var n3;
              void 0 === i4 && (i4 = true);
              var e3 = [], r3 = this.checkPreview(t4);
              for (var s3 in i4 && (null == r3 ? void 0 : r3.zegoCaptureStream) && (null === (n3 = r3.zegoCaptureStream) || void 0 === n3 ? void 0 : n3.stream) && (t4 = r3.zegoCaptureStream.stream), this.publisherList)
                this.publisherList[s3].localStream == t4 && e3.push(this.publisherList[s3]);
              return e3;
            }, i3.prototype.removePreview = function(t4) {
              for (var i4 = 0; i4 < this.previewStreamList.length; i4++)
                if (this.previewStreamList[i4] === t4) {
                  this.previewStreamList.splice(i4, 1);
                  break;
                }
            }, i3.prototype.onPlayerStreamUrlUpdate = function(t4, i4, n3) {
            }, i3.prototype.getScreenConstrains = function(t4) {
              var i4 = {};
              if ((0, B.dd)(t4) && t4)
                i4 = { audio: false, video: { frameRate: gf }, bitRate: this.au("screen_video_bitrate") || bf };
              else if ((0, B.w)(t4)) {
                switch (t4.videoQuality) {
                  case 1:
                    i4 = { video: { frameRate: k.frameRate }, bitRate: k.bitRate };
                    break;
                  case 3:
                    i4 = { video: { frameRate: I.frameRate }, bitRate: I.bitRate };
                    break;
                  case 4:
                    i4 = { video: { frameRate: t4.frameRate, width: t4.width, height: t4.height }, bitRate: t4.bitRate };
                    break;
                  case 2:
                    i4 = { video: { frameRate: gf }, bitRate: bf };
                    break;
                  default:
                    i4 = { video: { frameRate: gf }, bitRate: this.au("screen_video_bitrate") || bf };
                }
                if (i4.audio = !!(0, B.dd)(t4.audio) && t4.audio, i4.audio) {
                  var n3 = { noiseSuppression: false, autoGainControl: false, echoCancellation: true }, e3 = t4.ANS, r3 = t4.AGC, s3 = t4.AEC;
                  void 0 !== e3 && (n3.noiseSuppression = e3), void 0 !== r3 && (n3.autoGainControl = r3), void 0 !== s3 && (n3.echoCancellation = s3), i4.audio = n3;
                }
                if (i4.video)
                  i4.captureElement = t4.captureElement;
                i4 = uf(uf({}, t4), i4);
              }
              return i4;
            }, i3.prototype.createScreenPreviewer = function(t4, i4, n3) {
              var e3 = new Ju(this.an, this.pn, this, "screen"), r3 = t4.getVideoTracks()[0].getSettings();
              return this.previewStreamList.push(e3), (0, B.w)(n3) && (e3.mediaStreamConfig = n3), e3.localStream = t4, e3.initMediaTrack(t4), e3.videoInfo = { width: r3.width || 0, height: r3.height || 0, frameRate: r3.frameRate || 15, bitRate: (null == i4 ? void 0 : i4.bitRate) || 1e3, startBitrate: (null == i4 ? void 0 : i4.startBitrate) || this.au("bitrate_mode"), minBitrate: (null == i4 ? void 0 : i4.minBitrate) || 0, keyFrameInterval: (null == i4 ? void 0 : i4.keyFrameInterval) || 2, channelCount: (null == i4 ? void 0 : i4.channelCount) || 1, audioBitrate: 1e3 * ((null == n3 ? void 0 : n3.audioBitrate) || 48), contentHint: "" }, i4 && (0, B.QP)(i4.videoOptimizationMode) && (e3.videoInfo.contentHint = i4.videoOptimizationMode), e3.previewSuc = true, e3.previewType = "screen", e3.videoPreviewType = "screen", e3.audioPreviewType = "screen", (null == i4 ? void 0 : i4.videoOptimizationMode) && this.setVideoTrackContentHint(t4, null == i4 ? void 0 : i4.videoOptimizationMode), e3;
            }, i3.prototype.createCompositingPreviewer = function(t4, i4, n3) {
              var e3 = new Ju(this.an, this.pn, this, "compositing"), r3 = t4.getVideoTracks()[0].getSettings();
              return this.previewStreamList.push(e3), e3.mediaStreamConfig = i4, t4.getAudioTracks().length > 0 && (e3.audioTrack = t4.getAudioTracks()[0]), e3.localStream = t4, e3.videoInfo = uf(uf({}, e3.videoInfo), { width: (null == i4 ? void 0 : i4.width) || r3.width || 0, height: (null == i4 ? void 0 : i4.height) || r3.height || 0, frameRate: (null == i4 ? void 0 : i4.frameRate) || r3.frameRate || 15, bitRate: (null == i4 ? void 0 : i4.bitrate) || 2500 }), e3.previewSuc = true, e3.inputStreamOptions = n3, e3;
            }, i3.prototype.setSoundLevelDelegate = function(t4, i4, n3) {
              void 0 === n3 && (n3 = false), this.an.info("zsc.ssd.0 call"), this.soundLevelDelegate = t4, this.enableInBackground = n3, i4 && this.setSoundLevelInterval(i4), this.enableSoundLevelProcessor(t4), t4 ? (this.an.info("zsc.ssd.0 start getting sound"), this.activeSoundLevel()) : (this.an.info("zsc.ssd.0 stop getting sound"), this.soundLevelTimer && clearTimeout(this.soundLevelTimer), this.soundLevelTimer = null, this.soundLevelInterval = 1e3);
            }, i3.prototype.setSoundLevelInterval = function(t4) {
              var i4, n3;
              if (t4 && this.soundLevelDelegate) {
                for (var e3 in this.soundLevelInterval = t4, this.previewStreamList) {
                  null === (i4 = this.previewStreamList[e3].soundMeterWorklet) || void 0 === i4 || i4.setInterval(t4);
                }
                for (var e3 in this.playerList) {
                  null === (n3 = this.playerList[e3].soundMeterWorklet) || void 0 === n3 || n3.setInterval(t4);
                }
              }
            }, i3.prototype.enableSoundLevelProcessor = function(t4) {
              for (var i4 in this.previewStreamList) {
                var n3 = this.previewStreamList[i4];
                t4 ? n3.startSoundLevel() : n3.stopSoundLevel();
              }
              for (var i4 in this.playerList) {
                var e3 = this.playerList[i4];
                t4 ? e3.startSoundLevel() : e3.stopSoundLevel();
              }
            }, Object.defineProperty(i3.prototype, "hasRemoteStream", { get: function() {
              return Object.keys(this.playerList).length > 0;
            }, enumerable: false, configurable: true }), i3.prototype.activeSoundLevel = function() {
              !this.soundLevelTimer && this.soundLevelDelegate && this.startSoundLevel();
            }, i3.prototype.startSoundLevel = function() {
              var t4 = this;
              this.soundLevelTimer && (clearTimeout(this.soundLevelTimer), this.soundLevelTimer = null), this.soundLevelDelegate && (this.checkSoundLevel(), this.checkMicSoundLevel(), this.soundLevelTimer = setTimeout(function() {
                t4.startSoundLevel();
              }, this.soundLevelInterval));
            }, i3.prototype.checkSoundLevel = function() {
              var t4 = [];
              for (var i4 in this.publisherList) {
                var n3 = 0, e3 = this.publisherList[i4].publisher, r3 = e3.previewer;
                r3 && (n3 = r3.soundLevel), t4.push({ streamID: this.getBackStreamId(e3.streamId), soundLevel: n3, type: "push" });
              }
              for (var i4 in this.playerList) {
                var s3 = this.playerList[i4];
                s3.streamId && !s3.isProbe && t4.push({ streamID: this.getBackStreamId(s3.streamId), soundLevel: s3.soundLevel, type: "pull" });
              }
              this.soundLevelDelegate && t4.length > 0 && this.onSoundLevelUpdate(t4);
            }, i3.prototype.checkMicSoundLevel = function() {
              if (this.microphonePreviews.length && this.soundLevelDelegate) {
                var t4 = this.microphonePreviews.reduce(function(t5, i4) {
                  return i4.soundLevel > t5 ? i4.soundLevel : t5;
                }, 0);
                this.onMicSoundLevelUpdate(t4);
              }
            }, i3.prototype.getBackStreamId = function(t4) {
              return this.testEnvironment && t4 ? t4.replace("zegotest-" + this.appid + "-", "") : t4;
            }, i3.prototype.onSoundLevelUpdate = function(t4) {
            }, i3.prototype.onMicSoundLevelUpdate = function(t4) {
            }, i3.prototype.stopSoundLevel = function() {
              this.soundLevelTimer && !this.hasRemoteStream && 0 === this.previewStreamList.length && (this.an.info("zsc.ssl.0 stop"), clearTimeout(this.soundLevelTimer), this.soundLevelTimer = null);
            }, i3.prototype.F_ = function() {
              return this.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.kA.event);
            }, i3.prototype.startNetProbe = function(t4, i4, n3) {
              var e3;
              (i4 && (i4.probeTime = Date.now()), i4 && !i4.isPeer || !this.Od) ? this.cr.setError(this.F_(), { code: -1, message: "not support peer" }) : (e3 = n3 || this.getProbeNodeList(i4), this.an.info("zc.stnp.1 nodes ".concat(JSON.stringify(e3))), e3.length > 0 && this.H_(t4, i4, e3));
            }, i3.prototype.stopNetProbe = function(t4) {
              var i4 = this;
              this.D_ && t4 && t4.probeState != s2.probed && (this.an.info("zc.stnp.0 call ".concat(t4.streamId)), Object.keys(this.D_).forEach(function(t5) {
                var n3;
                (null === (n3 = i4.D_[t5]) || void 0 === n3 ? void 0 : n3.isProbed) || (i4.stopPlayingStream(i4.D_[t5].streamID), delete i4.D_[t5]);
              }), t4.probeState = s2.probed, this.V_(t4));
            }, i3.prototype.getProbeNodeList = function(t4) {
              var i4;
              switch (null == t4 ? void 0 : t4.ipNodeType) {
                case C.ZV4Only:
                  i4 = t4.gwNodeList;
                  break;
                case C.ZV4Priority:
                  i4 = this.sortIPNodesByPriority(t4.ipV4NodeList).map(function(t5) {
                    return po(t5);
                  });
                  break;
                case C.ZV6Priority:
                  i4 = this.sortIPNodesByPriority(t4.ipV6NodeList).map(function(t5) {
                    return po(t5);
                  });
                  break;
                case C.ZV6AndV4Priority:
                  i4 = this.getSortedIPV6AndV4Nodes(t4, "v6").map(function(t5) {
                    return po(t5);
                  });
                  break;
                default:
                  i4 = [];
              }
              return i4;
            }, i3.prototype.V_ = function(t4) {
              t4.probeTimer && clearTimeout(t4.probeTimer), t4.probeTimer = null;
            }, i3.prototype.Q_ = function() {
              var t4 = "zegoprobe-" + (/* @__PURE__ */ new Date()).getTime();
              return this.setPlayStateStart(t4), { prober: this.playerList[t4] ? this.playerList[t4] : null, streamID: t4 };
            }, i3.prototype.Y_ = function() {
              var t4 = this, i4 = "zc.sp.cdn";
              (0, G.rA)(this.an, i4);
              var n3 = this.Q_(), e3 = n3.prober, r3 = n3.streamID;
              e3 && (e3.isProbe = true, this.playerList[r3].serverUrl = hf, this.startPlayingStream(r3, function() {
              }), this.playerList[r3].isProbeByDG = true, e3.onCalNetQualityResult = function(n4, e4) {
                t4.an.info("zc.ocnqr.0 l3 detect " + n4 + " " + e4), t4.stopPlayingStream(r3), (0, G.EK)(t4.an, i4);
              });
            }, i3.prototype.K_ = function(t4, i4, n3, e3) {
              void 0 === e3 && (e3 = -1);
              var r3 = { result: n3, probeQuality: e3, timeStamp: (/* @__PURE__ */ new Date()).getTime() };
              this.D_[i4] && (this.D_[i4].isProbed = true), this.z_[i4] = r3, t4.probedList.push(uf(uf({}, r3), { gwNode: i4 }));
            }, i3.prototype.H_ = function(t4, i4, n3) {
              var e3 = this, r3 = "zc.psp.0";
              if ((0, G.rA)(this.an, r3), i4 && n3) {
                var o2 = i4.streamId, u2 = this.F_();
                i4.probeNodeList = n3;
                var a2 = (/* @__PURE__ */ new Date()).getTime(), c2 = n3.filter(function(t5) {
                  return !(e3.z_[t5] && e3.z_[t5].timeStamp + e3.N_ > a2 || i4.probeState == s2.probed || e3.D_[t5] && !e3.D_[t5].isProbed) && (delete e3.z_[t5], true);
                }), h2 = {};
                this.an.info("".concat(r3, " ").concat(o2, " probe nodes:").concat(JSON.stringify(c2)));
                for (var f2 = c2.length > this.x_ ? this.x_ : c2.length, l2 = function(o3) {
                  var a3 = c2[o3];
                  if (0 == f2)
                    return "break";
                  f2--, d2.z_[a3] = {};
                  var l3 = d2.Q_(), v3 = l3.prober, m3 = l3.streamID;
                  if (d2.D_[a3] = { ipChange: false, isProbed: false, streamID: m3 }, h2[a3] = true, !v3)
                    return { value: void 0 };
                  v3.isProbe = true, v3.setSignal(i4.signal), v3.gwNode = a3, v3.ipV6Prefer = d2.getIPv6PreferByGwNode(a3), v3.startPlay(m3, function() {
                  }), v3.onCalNetQualityResult = function(t5, r4) {
                    var o4;
                    void 0 === r4 && (r4 = -1);
                    var c3 = "zc.ocnqr.0";
                    e3.an.info(c3 + " " + v3.gwNode + " " + t5 + " " + r4), delete h2[a3];
                    var f3 = 0 == Object.keys(h2).length;
                    if (null === (o4 = e3.D_[a3]) || void 0 === o4 ? void 0 : o4.ipChange)
                      return e3.an.info("".concat(c3, " ipChange:").concat(a3)), e3.stopPlayingStream(e3.D_[a3].streamID), void delete e3.D_[a3];
                    var l4 = s2.tryProbe;
                    for (var d3 in e3.publisherList) {
                      var m4 = e3.publisherList[d3].publisher;
                      m4.probeNodeList.includes(a3) && m4.probeState == l4 && e3.handleProbeQuality(true, m4, a3, t5, r4, f3);
                    }
                    for (var d3 in e3.playerList) {
                      var p2 = e3.playerList[d3];
                      -1 == d3.indexOf("zegoprobe-") && p2.probeNodeList.includes(a3) && p2.probeState == l4 && e3.handleProbeQuality(false, p2, a3, t5, r4, f3);
                    }
                    u2.setAttributes({ net_quality: L.kA.net_quality(parseInt(i4.netQuality + "")), node_list: L.kA.node_list(n3) }), u2.end();
                  }, i4.probeTimer || (i4.probeTimer = setTimeout(function() {
                    e3.an.info("zc.snp.0 call probeTimer"), e3.handleProbedList(t4, i4, false, n3);
                  }, 6e3)), (0, G.EK)(d2.an, r3);
                }, d2 = this, v2 = 0; v2 < (null == c2 ? void 0 : c2.length); v2++) {
                  var m2 = l2(v2);
                  if ("object" == typeof m2)
                    return m2.value;
                  if ("break" === m2)
                    break;
                }
              }
              (0, G.OY)(this.an, r3);
            }, i3.prototype.handleProbeQuality = function(t4, i4, n3, e3, r3, s3) {
              var o2;
              (0, G.rA)(this.an, "zc.hpq.0", "".concat(i4.streamId, " ").concat(r3, " ").concat(n3, " ").concat(s3, " ")), this.K_(i4, n3, e3, r3), i4.gwNode != n3 && (null === (o2 = i4.signal) || void 0 === o2 ? void 0 : o2.server) != n3 || (i4.probeQuality = r3), s3 && this.handleProbedList(t4, i4, s3, i4.probeNodeList);
            }, i3.prototype.handleProbedList = function(t4, i4, n3, e3) {
              var r3 = this;
              this.V_(i4);
              var o2, u2 = i4.probedList, a2 = i4.probeState == s2.probed, c2 = "zc.hpl.0";
              ((0, G.rA)(this.an, c2, "".concat(i4.streamId, " ").concat(JSON.stringify(u2), " ").concat(a2, " ").concat(i4.netQuality)), u2.length && !a2) ? (u2.length > 1 && u2.forEach(function(t5) {
                if (o2) {
                  if (o2.probeQuality <= t5.probeQuality - 20) {
                    var n4 = r3.gwNodeNetQuality(t5.gwNode);
                    if (r3.an.info("".concat(c2, " 1: {netQuality} ").concat(t5.gwNode, " current:").concat(JSON.stringify(o2))), -1 == n4 || n4 >= o2.probeQuality + 20)
                      o2 = t5;
                    else {
                      var e4 = r3.gwNodeNetQuality(o2.gwNode);
                      r3.an.info("".concat(c2, " 2: {_netQuality} ").concat(o2.gwNode)), -1 !== e4 && e4 <= Math.max(40, i4.netQuality + 20) && (o2 = t5);
                    }
                  }
                } else
                  t5.probeQuality > Math.max(40, i4.netQuality + 20) && (o2 = t5);
              }), o2 || (o2 = u2[0]), u2.forEach(function(t5) {
                var i5, n4 = null === (i5 = r3.D_[t5.gwNode]) || void 0 === i5 ? void 0 : i5.streamID;
                n4 && (r3.stopPlayingStream(n4), delete r3.D_[t5.gwNode]);
              }), this.handleCalNetQualityResult(t4, o2, i4, n3, e3), i4.probedList = []) : this.an.info("".concat(c2, " pbLength:").concat(u2.length, " probed:").concat(a2));
            }, i3.prototype.gwNodeNetQuality = function(t4) {
              var i4, n3 = -1;
              for (var e3 in this.publisherList) {
                var r3 = this.publisherList[e3].publisher;
                r3.gwNode != t4 && r3.signal.server != t4 || (n3 = r3.netQuality);
              }
              for (var e3 in this.playerList)
                if (!e3.includes("zegoprobe")) {
                  var s3 = this.playerList[e3];
                  s3.gwNode != t4 && (null === (i4 = s3.signal) || void 0 === i4 ? void 0 : i4.server) != t4 || (n3 = s3.netQuality);
                }
              return n3;
            }, i3.prototype.handleCalNetQualityResult = function(t4, i4, n3, r3, o2) {
              var u2 = this, a2 = i4.gwNode, c2 = i4.result, h2 = i4.probeQuality, f2 = "zc.hcqr.0 ", l2 = false, d2 = true, v2 = Uo(this.an, n3.streamId);
              null == o2 || o2.forEach(function(t5) {
                var i5;
                (null === (i5 = u2.z_[t5]) || void 0 === i5 ? void 0 : i5.probeQuality) || (d2 = false);
              }), v2.info("".concat(f2, " t:").concat(n3.netQuality, " probe:").concat(h2, ", gw:").concat(a2, ",r:").concat(c2, ", last:").concat(d2));
              var m2 = this.cr.createSpan(e2.t0.H, { key: L.vW.event }, { key: "" }, L.Lk.event);
              if (0 == c2 && (h2 > Math.max(40, n3.netQuality + 20) ? (v2.info(f2 + " switch " + a2), l2 = true, this.retryStream(n3, t4, a2), n3.probeState = s2.probed) : l2 = false), !l2)
                if (d2) {
                  if (v2.info(f2 + " last "), !n3.ql)
                    for (var p2 in n3.netProbeToReDispatch(function() {
                      n3.ql = false, v2.info("".concat(f2, " gw redispatch success")), u2.startNetProbe(t4, n3);
                    }, function() {
                      v2.info("".concat(f2, " gw redispatch fail")), n3.ql = false;
                    }), this.z_)
                      -1 === this.z_[p2].netQuality && (this.z_[p2] = {});
                } else
                  r3 && this.startNetProbe(t4, n3, o2);
              var g2 = L.Lk;
              m2.setAttributes({ is_switch: g2.is_switch(l2), is_publish: g2.is_publish(t4), stream_id: g2.stream_id(n3.streamId), result: g2.result(c2), node: g2.node(a2), net_quality: g2.net_quality(parseInt(n3.netQuality + "")), probe_net_quality: g2.probe_net_quality(parseInt(h2 + "")) }), m2.end();
            }, i3.prototype.retryStream = function(t4, i4, n3) {
              if (i4) {
                var r3 = t4, s3 = r3.streamId, o2 = r3.localStream, u2 = r3.publishOption;
                r3.resetPublish(1), r3.gwNode = n3, r3.startPublish(s3, o2, u2, this.getReferredVideoBitrate());
              } else {
                var a2 = t4, c2 = (s3 = a2.streamId, a2.getRemoteStreamSuc);
                a2.resetPlay(true, 1), this.onPlayStateUpdate(e2.h7.retry, s3, { code: re.cMG.code, message: re.cMG.message }), a2.gwNode = n3, a2.startPlay(s3, c2);
              }
            }, i3.prototype.getRoomByStreamID = function(t4) {
              return this.publisherList[t4] ? this.publisherList[t4].room : this.playerList[t4] ? this.playerList[t4].room : void 0;
            }, i3.prototype.setVideoTrackContentHint = function(t4, i4) {
              if ((0, B.QP)(i4)) {
                var n3 = i4.toLowerCase();
                if (["default", "motion", "detail", "text"].includes(n3)) {
                  var e3 = t4.getVideoTracks()[0];
                  e3 ? "contentHint" in e3 ? (this.an.info("zc.svtch " + n3), e3.contentHint = "default" == n3 ? "" : n3) : this.an.warn("zc.svtch mediaStreamTrack contentHint attribute not supported") : this.an.warn("zc.svtch video track no found");
                } else
                  this.an.warn("zc.svtch videoOptimizationMode wrong");
              } else
                this.an.warn("zc.svtch videoOptimizationMode type wrong");
            }, i3.prototype.getPlayRoom = function(t4) {
              var i4 = this;
              return this.pn.roomList.find(function(n3) {
                return !!i4.getStream(n3, t4);
              });
            }, i3.prototype.getStream = function(t4, i4) {
              return t4.streamList.find(function(t5) {
                return t5.stream_id == i4;
              });
            }, i3.prototype.updateQuality = function(t4, i4) {
              this.Fg.updateQualityOrChargeInfo(t4, i4);
            }, i3.prototype.checkStreamReport = function() {
              this.Fg.checkStreamReport(), this.Fg.reportOldCacheData();
            }, i3.prototype.stopToReport = function(t4) {
              this.Fg.updateQualityOrChargeInfo(t4, void 0, true);
            }, i3.prototype.setIsPeer = function(t4) {
              this.Od = t4, Object.values(this.publisherList).forEach(function(i4) {
                i4.publisher.isPeer = t4;
              }), Object.values(this.playerList).forEach(function(i4) {
                i4.isPeer = t4;
              });
            }, i3.prototype.setStreamGwNode = function(t4, i4) {
              var n3 = Uo(this.an, t4.streamId);
              n3.info(Co.OKY + " call"), this.checkCachedNodesUse(t4, i4), t4.gwNodesTTL && t4.gwNodesTTL < (/* @__PURE__ */ new Date()).getTime() && (n3.info(Co.OKY + " ttl timeout, reset gw"), t4.resetGwNodes()), this.gwNode && (t4.gwNode = this.gwNode), n3.info(Co.OKY + " end " + t4.gwNode);
            }, i3.prototype.getNodeIndex = function(t4, i4) {
              var n3 = "", r3 = i4 ? "publish" : "play", s3 = "";
              switch (i4 || (t4.playMode == e2.ey.RTC ? s3 = "_rtc" : t4.playMode === e2.ey.L3 && (s3 = "_l3")), this.cachedGwNodesMode) {
                case Zh.NotReUse:
                  break;
                case Zh.TheSameReUse:
                  n3 = r3 + "_" + t4.streamId + s3;
                  break;
                case Zh.DiffReUse:
                  n3 = r3;
                  break;
                case Zh.AllReUse:
                  n3 = "stream";
              }
              return n3;
            }, i3.prototype.checkCachedNodesUse = function(t4, i4) {
              var n3, e3, r3, s3 = Uo(this.an, t4.streamId);
              if (s3.info(Co.KWc + " call " + this.cachedGwNodesMode), t4.isExternal)
                if (i4 && t4.isCustomCdn())
                  s3.info(Co.KWc + " custom cdn");
                else if (t4.hasSucceed && this.pn.isMultiOuter)
                  s3.info(Co.KWc + " multi outer");
                else {
                  var o2 = this.getNodeIndex(t4, i4);
                  if (s3.info(Co.KWc + " " + o2), o2) {
                    var u2 = this.cachedGwNodesList[o2];
                    u2 && u2.gwNodesTTL && u2.gwNodesTTL > (/* @__PURE__ */ new Date()).getTime() && ((null == u2 ? void 0 : u2.gwNodes) && (null === (n3 = null == u2 ? void 0 : u2.gwNodes) || void 0 === n3 ? void 0 : n3.length) > 0 || (null == u2 ? void 0 : u2.ips) && (null === (e3 = null == u2 ? void 0 : u2.ips) || void 0 === e3 ? void 0 : e3.length) > 0 || (null == u2 ? void 0 : u2.ipv6s) && (null === (r3 = null == u2 ? void 0 : u2.ipv6s) || void 0 === r3 ? void 0 : r3.length) > 0) && (s3.info(Co.KWc + " use cache gwnodes"), u2.gwNodes && (t4.gwNodeList = u2.gwNodes), t4.gwNodesTTL = u2.gwNodesTTL, u2.ips && (t4.ipV4NodeList = u2.ips), u2.ipv6s && (t4.ipV6NodeList = u2.ipv6s), t4.ipNodeType === C.ZV4Only ? (t4.gwNode = t4.gwNodeList[0], t4.ipV6Prefer = T.kV4Only) : (t4.gwNode = this.getGwNode(t4, this.ipNodeType, -1), t4.ipV6Prefer = this.ipV6Prefer));
                  }
                  s3.info(Co.KWc + " end " + t4.gwNode);
                }
              else
                s3.info(Co.KWc + " retry internal");
            }, i3.prototype.updateCachedGwNodesList = function(t4, i4, n3, e3, r3, s3) {
              void 0 === r3 && (r3 = []), void 0 === s3 && (s3 = []);
              var o2 = Uo(this.an, t4);
              if (o2.info(Co.WaK + " call"), 0 === e3)
                this.setCachedGwNodesMode(Zh.NotReUse);
              else if (e3 > 0) {
                var u2 = i4 ? this.getPublisher(t4) : this.playerList[t4];
                if (u2) {
                  var a2 = this.getNodeIndex(u2, i4);
                  o2.info(Co.WaK + " nodeIndex " + a2), a2 && (this.cachedGwNodesList[a2] || (this.cachedGwNodesList[a2] = {}), this.cachedGwNodesList[a2].gwNodesTTL = (/* @__PURE__ */ new Date()).getTime() + 1e3 * e3, (null == n3 ? void 0 : n3.length) > 0 && (this.cachedGwNodesList[a2].gwNodes = n3), (null == r3 ? void 0 : r3.length) > 0 && (this.cachedGwNodesList[a2].ips = r3), (null == s3 ? void 0 : s3.length) > 0 && (this.cachedGwNodesList[a2].ipv6s = s3));
                } else
                  this.an.info(Co.WaK + " player no found" + t4);
              }
            }, i3.prototype.clearCachedGwNodesList = function(t4, i4) {
              var n3 = this.getNodeIndex(t4, i4);
              this.an.info(Co.E8q + " nodeIndex " + n3, { streamid: t4.streamId }), n3 && delete this.cachedGwNodesList[n3];
            }, i3.prototype.setCachedGwNodesMode = function(t4) {
              this.cachedGwNodesMode = t4;
            }, i3.prototype.updateTimeOffsetInterval = function() {
              var t4, i4, n3 = this;
              (0, B.Cs)(null === (t4 = this.I_) || void 0 === t4 ? void 0 : t4.netAgent.timeOffset) && (this.pn.clientTimeOffset = null === (i4 = this.I_) || void 0 === i4 ? void 0 : i4.netAgent.timeOffset), this.Pu = setTimeout(function() {
                n3.updateTimeOffsetInterval();
              }, 9e5);
            }, i3.prototype.changeRxQuality = function(t4) {
              this.M_ = t4, this.startPublishNetWorkQuality();
            }, i3.prototype.changeTxQuality = function(t4) {
              this.P_ = t4, this.startPublishNetWorkQuality();
            }, i3.prototype.startPublishNetWorkQuality = function() {
              var t4 = this;
              null === this.qp && (this.qp = setInterval(function() {
                t4.pn.actionListener("networkQuality", "", t4.P_, t4.M_);
              }, 3e3));
            }, i3.prototype.resetNetworkData = function() {
              Object.keys(this.playerList).length < 1 && (this.M_ = -1), this.publishersLength < 1 && (this.P_ = -1), Object.keys(this.playerList).length < 1 && this.publishersLength < 1 && (clearInterval(this.qp), this.qp = null);
            }, i3.prototype.getCloudSoundInterval = function() {
              var t4 = this.au("sound_sample_interval");
              return t4 && (t4 < 100 && (t4 = 100), t4 > 3e3 && (t4 = 3e3), this.an.info("zc.gsl setting sound_sample_interval " + t4)), t4;
            }, i3.prototype.createSoundLevel = function(t4, i4, n3, e3, r3) {
              void 0 === n3 && (n3 = this.soundLevelInterval), void 0 === r3 && (r3 = function(t5) {
              });
              var s3 = new Eu(this.an, this.pn, n3, e3), o2 = s3.getSrcSource(t4, i4);
              return s3.initAudioWorklet(t4, o2), s3.onSoundLevelUpdate = function(t5) {
                r3(t5);
              }, { mic: o2, soundMeter: s3 };
            }, i3.prototype.createSEIWorker = function() {
              if (this.isNotSupportSeiWorker)
                return null;
              var t4 = this.seiWorker;
              if (t4)
                return t4;
              var i4 = Jh.toString().trim().match(/\{([\s\S]*)\}/)[1], n3 = URL.createObjectURL(new window.Blob([i4], { type: "text/javascript" }));
              return t4 = this.seiWorker = new Worker(n3), this.an.info("zsc.gseiw init sei"), t4;
            }, i3.prototype.handleSeiRollBack = function() {
              this.isNotSupportSeiWorker = true, this.destroySEIWorker();
            }, i3.prototype.destroySEIWorker = function() {
              var t4;
              null === (t4 = this.seiWorker) || void 0 === t4 || t4.terminate(), this.seiWorker = void 0;
            }, i3.prototype.destroy = function() {
              var t4;
              this.soundLevelTimer && clearTimeout(this.soundLevelTimer), this.Pu && clearTimeout(this.Pu), this.qp && clearInterval(this.qp), null === (t4 = this._billingTimer) || void 0 === t4 || t4.destroy(), this.Z_(), this.checkDeviceChange = void 0, this.isCandidateHasIPv6 = false, this.captureStreamElementMap.clear(), this.B_.stop(), this.destroySEIWorker(), G.VJ.removeEventListener("visibilitychange", this.eventHandler.visibilitychange);
            }, i3.prototype.Z_ = function() {
              var t4 = this;
              Object.keys(this.A_).forEach(function(i4) {
                var n3, e3;
                t4.A_[i4].signal = null, null === (e3 = null === (n3 = t4.A_[i4]) || void 0 === n3 ? void 0 : n3.retryServerSignalHandler) || void 0 === e3 || e3.invalid(), t4.A_[i4].retryServerSignalHandler = null, delete t4.A_[i4];
              });
            }, i3.prototype.supplementPlayingChargeTime = function() {
              this.billingTimer.supplementPlayingChargeTime();
            }, i3.prototype.getDataChannelOption = function() {
              var t4 = { ordered: true }, i4 = this.pn.engineConfig.datachannelOption;
              return (0, B.dd)(i4.ordered) && !i4.ordered && (t4.ordered = false, (0, B.Cs)(i4.maxPacketLifeTime) && i4.maxPacketLifeTime > 0 && i4.maxPacketLifeTime < 5e3 ? t4.maxPacketLifeTime = i4.maxPacketLifeTime : (0, B.Cs)(i4.maxRetransmits) && i4.maxRetransmits > 0 && i4.maxRetransmits < 50 && (t4.maxRetransmits = i4.maxRetransmits)), t4;
            }, i3.prototype.getIPv6PreferByGwNode = function(t4) {
              return Hs(ao(t4)) === R.IPv4 ? T.kV4AndV6 : T.kV6AndV4;
            }, i3.prototype.getGwNode = function(t4, i4, n3) {
              var e3 = "", r3 = t4.gwNodeList, s3 = t4.ipV4NodeList, o2 = t4.ipV6NodeList;
              if (i4 === C.ZV4Only)
                (null == r3 ? void 0 : r3.length) > 0 && (e3 = r3[++n3 % r3.length]);
              else if (i4 === C.ZV4Priority)
                (null == s3 ? void 0 : s3.length) > 0 && (t4.ipNode = s3[++n3 % s3.length], e3 = po(t4.ipNode));
              else if (i4 === C.ZV6Priority)
                (null == o2 ? void 0 : o2.length) > 0 && (t4.ipNode = o2[++n3 % o2.length], e3 = po(t4.ipNode));
              else if (i4 === C.ZV6AndV4Priority) {
                var u2 = this.getSortedIPV6AndV4Nodes(t4, "v6");
                if (u2.length > 0)
                  if (-1 === n3)
                    e3 = po(u2[0]);
                  else {
                    var a2 = go(u2, t4.gwNode);
                    e3 = po(u2[++a2 % u2.length]);
                  }
              }
              return this.an.info("zsc.gw get node ".concat(C[i4], " ").concat(n3, " ").concat(e3)), e3;
            }, i3.prototype.sortIPNodesByPriority = function(t4) {
              return t4.sort(function(t5, i4) {
                return t5.priority > i4.priority ? -1 : t5.priority < i4.priority ? 1 : 0;
              });
            }, i3.prototype.getSortedIPV6AndV4Nodes = function(t4, i4) {
              var n3 = af([], t4.ipV6NodeList, true);
              return t4.ipV4NodeList.forEach(function(t5) {
                t5.vid.split("|").every(function(t6) {
                  return n3.every(function(i5) {
                    return i5.ip === t6;
                  });
                }) || n3.push(t5);
              }), n3.sort(function(t5, n4) {
                return t5.priority > n4.priority ? -1 : t5.priority < n4.priority ? 1 : Fs(t5.ip) ? "v6" === i4 ? -1 : 1 : "v6" === i4 ? 1 : -1;
              }), n3;
            }, i3.prototype.isNodeLast = function(t4) {
              var i4 = 0, n3 = false, e3 = t4.gwNodeList, r3 = t4.ipV4NodeList, s3 = t4.ipV6NodeList, o2 = t4.gwNode;
              if (t4.ipNodeType === C.ZV4Only)
                n3 = (i4 = e3.findIndex(function(t5) {
                  return t5 == o2;
                })) === e3.length - 1;
              else {
                var u2 = go(r3, o2), a2 = go(s3, o2);
                if (t4.ipNodeType === C.ZV4Priority)
                  n3 = (i4 = u2) === r3.length - 1;
                else if (t4.ipNodeType === C.ZV6Priority)
                  n3 = (i4 = a2) === s3.length - 1;
                else {
                  var c2 = this.getSortedIPV6AndV4Nodes(t4, "v6");
                  n3 = (i4 = go(c2, o2)) === c2.length - 1;
                }
              }
              return { lastTryNext: n3, currentIdx: i4 };
            }, i3.prototype.getStreamIPNodesMode = function() {
              var t4, i4;
              if (this.an.info("zsc.gsinm call, proxy: ".concat(this.isProxy, ", mode: ").concat(y[this.pn.selectIPStackMode], " ")), this.isProxy || this.pn.selectIPStackMode === y.IPv4Only)
                t4 = T.kV4Only, i4 = C.ZV4Only;
              else if (this.pn.selectIPStackMode === y.IPv4Prefer) {
                var n3 = this.getIPV4PreferNodeType();
                i4 = n3.ipNodeType, t4 = n3.ipV6Prefer;
              } else {
                var e3 = this.getIPV6PreferNodeType();
                i4 = e3.ipNodeType, t4 = e3.ipV6Prefer;
              }
              return this.an.info("zsc.gsinm prefer: ".concat(t4, ", nodeType: ").concat(i4)), this.ipV6Prefer = t4, this.ipNodeType = i4, { ipV6Prefer: t4, ipNodeType: i4 };
            }, i3.prototype.getIPV4PreferNodeType = function() {
              var t4 = this.agentConnectIPStackType;
              this.an.info("zsc.gi4nt connected: ".concat(R[t4], ", detection: ").concat(JSON.stringify(this.agentIpStackDetection)));
              var i4, n3, e3 = this.agentIpStackDetection, r3 = e3.IPv4, s3 = e3.IPv6;
              return t4 === R.IPv4 || r3 === A.reachable ? (i4 = C.ZV4Only, n3 = T.kV4Only) : [A.unknown, A.unreachable].includes(r3) && s3 === A.reachable ? (i4 = C.ZV6Priority, n3 = T.kV6AndV4) : (i4 = C.ZV4Priority, n3 = T.kV4AndV6), { ipNodeType: i4, ipV6Prefer: n3 };
            }, i3.prototype.getIPV6PreferNodeType = function() {
              this.an.info("zsc.gi6nt detection: ".concat(JSON.stringify(this.agentIpStackDetection)));
              var t4, i4, n3 = this.agentIpStackDetection, e3 = n3.IPv4 - n3.IPv6;
              return 0 === e3 ? (t4 = C.ZV6AndV4Priority, i4 = T.kV6AndV4) : e3 > 0 ? (t4 = C.ZV4Priority, i4 = T.kV4AndV6) : (t4 = C.ZV6Priority, i4 = T.kV6AndV4), { ipNodeType: t4, ipV6Prefer: i4 };
            }, i3.prototype.getRetryIPPreferNodeType = function() {
              var t4, i4;
              this.an.info("zsc.gripnt mode:".concat(y[this.pn.selectIPStackMode], " detection: ").concat(this.agentIpStackDetection));
              var n3 = this.agentIpStackDetection;
              if (this.pn.selectIPStackMode === y.IPv4Prefer)
                n3.IPv4 === A.reachable ? (t4 = C.ZV4Priority, i4 = T.kV4AndV6) : n3.IPv6 === A.reachable ? (t4 = C.ZV6Priority, i4 = T.kV6AndV4) : (t4 = C.ZV4Priority, i4 = T.kV4AndV6);
              else {
                var e3 = this.getIPV6PreferNodeType();
                t4 = e3.ipNodeType, i4 = e3.ipV6Prefer;
              }
              return { ipNodeType: t4, ipV6Prefer: i4 };
            }, i3.prototype.G_ = function(t4) {
              var i4 = this;
              setTimeout(function() {
                Object.values(i4.playerList).forEach(function(i5) {
                  i5.changePublishOccasion(t4);
                });
              }, 0);
            }, i3.prototype.getReferredVideoBitrate = function() {
              var t4 = Date.now();
              return this.referenceBitrateUpdateTs > 0 && t4 - this.referenceBitrateUpdateTs < 3e4 ? this.referenceVideoBitrate : 0;
            }, i3.prototype.updateReferenceBitrate = function(t4) {
              this.referenceVideoBitrate = t4, this.referenceBitrateUpdateTs = Date.now();
            }, i3.prototype.au = function(t4, i4) {
              return this.pn.settingConfig.getSetting(t4, i4);
            }, i3.closeNetProbe = false, i3;
          }(xc), wf = o(6794), Sf = function() {
            function t3(t4) {
              this.v = t4;
            }
            return t3.prototype.takeStreamSnapshot = function(t4) {
              return this.v.takeStreamSnapshot(t4);
            }, t3.prototype.play = function(t4, i3) {
              return this.v.play(t4, i3);
            }, t3.prototype.stop = function() {
              return this.v.stop();
            }, t3.prototype.playVideo = function(t4, i3) {
              this.v.playVideo(t4, i3);
            }, t3.prototype.stopVideo = function() {
              this.v.stopVideo();
            }, t3.prototype.playAudio = function(t4) {
              this.v.playAudio(t4, true);
            }, t3.prototype.stopAudio = function() {
              this.v.stopAudio();
            }, t3.prototype.resume = function() {
              this.v.resume();
            }, t3.prototype.setAudioMuted = function(t4) {
              return this.v.setAudioMuted(t4);
            }, t3.prototype.setVideoMuted = function(t4) {
              return this.v.setVideoMuted(t4);
            }, t3.prototype.useAudioOutputDevice = function(t4) {
              return this.v.useAudioOut(t4);
            }, t3.prototype.setVolume = function(t4) {
              return this.v.setVolume(t4);
            }, t3.prototype.getVideoHeight = function() {
              return this.v.getVideoHeight();
            }, t3.prototype.getVideoWidth = function() {
              return this.v.getVideoWidth();
            }, t3.prototype.on = function(t4, i3) {
              return this.v.on(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this.v.off(t4, i3);
            }, t3;
          }(), Ef = function() {
            return Ef = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Ef.apply(this, arguments);
          }, kf = function() {
            function t3(t4, i3, n3) {
              this.X_ = t4, this.W_ = i3, this.gn = n3, this._initTime = Date.now();
            }
            return Object.defineProperty(t3.prototype, "appid", { get: function() {
              return this.W_.appid;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "device_id", { get: function() {
              return this.X_.deviceID;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "product", { get: function() {
              return this.X_.roomServer;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sdk_version", { get: function() {
              return e2.qt;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "sys_info", { get: function() {
              return navigator.userAgent;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "report_version", { get: function() {
              return this.W_.sdkVerNum;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "browser", { get: function() {
              return this.W_.browser;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "id_name", { get: function() {
              return this.X_.idName;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "nick_name", { get: function() {
              return this.X_.nickName;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "use_na", { get: function() {
              return 1;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "userid", { get: function() {
              return this.X_.userid;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "network_state", { get: function() {
              return this.W_.networkState;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "init_time", { get: function() {
              return this._initTime;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "net_type", { get: function() {
              var t4;
              return (null === (t4 = navigator.connection) || void 0 === t4 ? void 0 : t4.effectiveType) || "unknown";
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "room_server", { get: function() {
              return this.X_.roomServer;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "device_infos", { get: function() {
              return this.W_.deviceInfos;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "room_list", { get: function() {
              var t4 = this, i3 = {};
              return this.W_.roomList.forEach(function(n3) {
                var e3, r3, s3, o2 = t4.X_.roomModulesList.find(function(t5) {
                  return t5.roomID === n3.roomID;
                }), u2 = { roomSessionID: n3.roomSessionID, sessionID: n3.sessionID, streamList: n3.streamList, token: n3.token, role: t4.X_.role, roomCreateFlag: t4.X_.roomCreateFlag, loginTime: null == o2 ? void 0 : o2.loginTime, heartbeatInterval: null === (e3 = null == o2 ? void 0 : o2.heartBeatHandler) || void 0 === e3 ? void 0 : e3.heartbeatInterval, roomExtraInfos: null === (r3 = null == o2 ? void 0 : o2.messageHandler) || void 0 === r3 ? void 0 : r3.transSeqMap, roomRetryTime: null === (s3 = null == o2 ? void 0 : o2.roomTryHandler) || void 0 === s3 ? void 0 : s3.RETRY_MAX_TIME };
                i3[n3.roomID] = u2;
              }), i3;
            }, enumerable: false, configurable: true }), t3.prototype.getRoomList = function(t4, i3) {
              var n3 = this;
              return this.room_id_list.slice(t4, i3).map(function(t5) {
                return Ef({ roomID: t5 }, n3.room_list[t5]);
              });
            }, Object.defineProperty(t3.prototype, "room_id_list", { get: function() {
              return this.W_.roomList.map(function(t4) {
                return t4.roomID;
              });
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "roomListSize", { get: function() {
              return this.room_id_list.length;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "userLoginState", { get: function() {
              var t4, i3 = this.X_.roomModulesList[0], n3 = i3.runState, r3 = i3.lastRunState;
              return n3 === e2.UV.logout ? t4 = e2.Es.logout : n3 === e2.UV.login ? t4 = e2.Es.login : r3 === e2.UV.logout ? t4 = e2.Es.trylogin : r3 === e2.UV.login && (t4 = e2.Es.reconnect), t4;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "publishStreamList", { get: function() {
              return Object.keys(this.gn.publisherList);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "publishList", { get: function() {
              var t4 = this, i3 = {};
              return this.publishStreamList.forEach(function(n3) {
                var e3, r3, s3, o2 = t4.gn.publisherList[n3], u2 = null == o2 ? void 0 : o2.publisher, a2 = null == u2 ? void 0 : u2.publishStat;
                i3[n3] = { streamSid: null == o2 ? void 0 : o2.streamSid, roomID: null === (e3 = null == o2 ? void 0 : o2.room) || void 0 === e3 ? void 0 : e3.roomID, roomSessionID: null === (r3 = null == o2 ? void 0 : o2.room) || void 0 === r3 ? void 0 : r3.roomSessionID, cameraLabel: null == o2 ? void 0 : o2.cameraLabel, microLabel: null == o2 ? void 0 : o2.microLabel, cameraStatus: null == u2 ? void 0 : u2.camera_status, micStatus: null == u2 ? void 0 : u2.mic_status, sessionId: null == u2 ? void 0 : u2.sessionId, publishBeginTime: null == u2 ? void 0 : u2.reportPublishStateTime, serverUrl: null === (s3 = null == u2 ? void 0 : u2.signal) || void 0 === s3 ? void 0 : s3.server, gwNode: null == u2 ? void 0 : u2.gwNode, proto: "webrtc", frameWidth: null == a2 ? void 0 : a2.frameWidth, frameHeight: null == a2 ? void 0 : a2.frameHeight, rtt: null == a2 ? void 0 : a2.currentRoundTripTime, videoPacketsLostRate: null == a2 ? void 0 : a2.videoPacketsLostRate, audioPacketsLostRate: null == a2 ? void 0 : a2.audioPacketsLostRate, videoTargetBitrate: null == a2 ? void 0 : a2.videoTargetBitrate, videoBitrate: null == a2 ? void 0 : a2.videoBitrate, audioTargetBitrate: null == a2 ? void 0 : a2.audioTargetBitrate, audioBitrate: null == a2 ? void 0 : a2.audioBitrate, videoTargetFPS: null == a2 ? void 0 : a2.videoTargetFPS, videoFPS: null == a2 ? void 0 : a2.videoFPS, audioFPS: null == a2 ? void 0 : a2.audioFPS, videoCodecName: null == a2 ? void 0 : a2.videoCodecName, audioCodecName: null == a2 ? void 0 : a2.audioCodecName };
              }), i3;
            }, enumerable: false, configurable: true }), t3.prototype.getPublishList = function(t4, i3) {
              var n3 = this;
              return this.publishStreamList.slice(t4, i3).map(function(t5) {
                return Ef({ streamID: t5 }, n3.publishList[t5]);
              });
            }, Object.defineProperty(t3.prototype, "publishListSize", { get: function() {
              return this.publishStreamList.length;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "playStreamList", { get: function() {
              return Object.keys(this.gn.playerList);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "playList", { get: function() {
              var t4 = this, i3 = {};
              return this.playStreamList.forEach(function(n3) {
                var e3, r3, s3, o2 = t4.gn.playerList[n3], u2 = o2, a2 = null == u2 ? void 0 : u2.playStat;
                i3[n3] = { streamSid: null == o2 ? void 0 : o2.streamSid, roomID: null === (e3 = null == o2 ? void 0 : o2.room) || void 0 === e3 ? void 0 : e3.roomID, roomSessionID: null === (r3 = null == o2 ? void 0 : o2.room) || void 0 === r3 ? void 0 : r3.roomSessionID, cameraStatus: null == u2 ? void 0 : u2.cameraStatus, micStatus: null == u2 ? void 0 : u2.micStatus, sessionId: null == u2 ? void 0 : u2.sessionId, playBeginTime: null == u2 ? void 0 : u2.reportPlayStateTime, serverUrl: null === (s3 = null == u2 ? void 0 : u2.signal) || void 0 === s3 ? void 0 : s3.server, gwNode: null == u2 ? void 0 : u2.gwNode, proto: "webrtc", frameWidth: null == a2 ? void 0 : a2.frameWidth, frameHeight: null == a2 ? void 0 : a2.frameHeight, rtt: null == a2 ? void 0 : a2.currentRoundTripTime, videoPacketsLostRate: null == a2 ? void 0 : a2.videoPacketsLostRate, audioPacketsLostRate: null == a2 ? void 0 : a2.audioPacketsLostRate, videoBitrate: null == a2 ? void 0 : a2.videoBitrate, audioBitrate: null == a2 ? void 0 : a2.audioBitrate, videoFPS: null == a2 ? void 0 : a2.videoFPS, audioFPS: null == a2 ? void 0 : a2.audioFPS, videoCodecName: null == a2 ? void 0 : a2.videoCodecName, audioCodecName: null == a2 ? void 0 : a2.audioCodecName, peerToPeerDelay: null == a2 ? void 0 : a2.peerToPeerDelay, firstFrameTime: null == a2 ? void 0 : a2.firstFrameTime, videoJitter: null == a2 ? void 0 : a2.videoJitter, audioJitter: null == a2 ? void 0 : a2.audioJitter };
              }), i3;
            }, enumerable: false, configurable: true }), t3.prototype.getPlayList = function(t4, i3) {
              var n3 = this;
              return this.playStreamList.slice(t4, i3).map(function(t5) {
                return Ef({ streamID: t5 }, n3.playList[t5]);
              });
            }, Object.defineProperty(t3.prototype, "playListSize", { get: function() {
              return this.playStreamList.length;
            }, enumerable: false, configurable: true }), t3;
          }(), Of = "zc.ac.mer", If = function() {
            function t3(t4, i3, n3) {
              var e3 = this;
              this.an = t4, this.ac = i3, this.pa = n3, this.error = false, this.effectMode = 1, this.eventHandler = { volumechange: function(t5) {
                var i4 = t5.target;
                i4 && e3.ty && (i4.muted || i4.paused ? (e3.an.info(Of + " local audio muted disconnect"), e3.ty.disconnect()) : (e3.an.info(Of + " local audio is connected"), e3.ty.connect(e3.ac.destination)));
              } }, this.an.info(Of + " create audio renderer"), this.error = !this.init(), this.error || (n3.addEventListener("volumechange", this.eventHandler.volumechange), n3.addEventListener("pause", this.eventHandler.volumechange), n3.addEventListener("play", this.eventHandler.volumechange));
            }
            return t3.prototype.setGain = function(t4) {
              this.ty && (this.ty.gain.value = t4);
            }, t3.prototype.init = function() {
              var t4 = this.ac;
              try {
                var i3 = (0, Pe.$t)().match(/iPhone\sOS\s(\d+)_(\d+)_?(\d+)?/);
                if (i3 && 17 === +i3[1] && 0 === +i3[2] && +i3[3] < 4)
                  throw " iOS 17 not suppot createMediaElementSource.";
                "anonymous" !== this.pa.crossOrigin && this.an.info(Of + " Media element does not support cross-origin. Maybe no sound can be played"), this.srcNode = t4.createMediaElementSource(this.pa);
                var n3 = this.ty = t4.createGain();
                n3.connect(t4.destination), this.srcNode.connect(n3), "suspended" === this.ac.state && this.ac.resume();
              } catch (t5) {
                return this.an.warn(Of + " create src failed." + t5), false;
              }
              return true;
            }, t3.prototype.getMixNode = function() {
              var t4 = this.mixOutputNode;
              return t4 || (t4 = this.mixOutputNode = this.ac.createGain()), this.setVoiceChangeNode(this.effectMode, this.voiceChangerNode, true), { mixOutputNode: t4 };
            }, Object.defineProperty(t3.prototype, "effectOnLocal", { get: function() {
              return [Wu.SC.Local, Wu.SC.All].includes(this.effectMode);
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "effectOnMix", { get: function() {
              return [Wu.SC.Publish, Wu.SC.All].includes(this.effectMode);
            }, enumerable: false, configurable: true }), t3.prototype.setVoiceChangeNode = function(t4, i3, n3) {
              if (void 0 === n3 && (n3 = false), this.ty && this.srcNode && (n3 || this.voiceChangerNode !== i3 || this.effectMode !== t4)) {
                this.effectMode = t4, this.srcNode.disconnect();
                var e3 = this, r3 = e3.mixOutputNode, s3 = e3.effectOnLocal, o2 = e3.effectOnMix;
                if (this.an.info(Of + " set voice changer render. ".concat(JSON.stringify({ mode: t4, node: !!i3, force: n3, effectOnLocal: s3, effectOnMix: o2 }))), i3)
                  i3.disconnect(), this.srcNode.connect(i3), s3 ? i3.connect(this.ty) : this.srcNode.connect(this.ty), r3 && (o2 ? i3.connect(r3) : this.srcNode.connect(r3)), this.voiceChangerNode = i3;
                else {
                  var u2 = this.srcNode;
                  u2.connect(this.ty), this.mixOutputNode && u2.connect(this.mixOutputNode), this.voiceChangerNode = void 0;
                }
              }
            }, t3.prototype.destroy = function() {
              var t4;
              null === (t4 = this.ty) || void 0 === t4 || t4.connect(this.ac.destination), this.pa.removeEventListener("volumechange", this.eventHandler.volumechange), this.pa.removeEventListener("pause", this.eventHandler.volumechange), this.pa.removeEventListener("play", this.eventHandler.volumechange);
            }, t3;
          }(), Rf = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Tf = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Cf = function() {
            function t3(t4) {
              var i3 = this;
              this.an = t4, this.isResuming = false, this.iy = /* @__PURE__ */ new Map(), this.sy = /* @__PURE__ */ new Map(), this.eventHandler = { resumeAudioContext: function(t5) {
                var n4 = i3.ac.state;
                if ("running" !== n4) {
                  var e3 = null == t5 ? void 0 : t5.type;
                  i3.an.info("zc.ac.rs call " + n4 + ", " + e3), i3.ac.resume().then(function() {
                    i3.an.info("zc.ac.rs end " + i3.ac.state + ", " + e3);
                  });
                } else
                  i3.offCheckAudioContextListener();
              } }, this.id = Date.now();
              var n3 = window.AudioContext || window.webkitAudioContext;
              this.ac = new n3(), this.an.info("zc.ac.0 ".concat(this.id, " ").concat(this.ac.state, ", ").concat(this.ac.sampleRate)), this.ac.addEventListener("statechange", function() {
                var t5, n4 = null === (t5 = i3.ac) || void 0 === t5 ? void 0 : t5.state;
                i3.an.info("zc.ac.sc ".concat(i3.id, " ").concat(n4)), "running" !== n4 && i3.checkAudioContext();
              }), this.checkAudioContext();
            }
            return t3.create = function(i3) {
              return t3.mgr ? t3.mgr.an = i3 : t3.mgr = new t3(i3), t3.mgr;
            }, t3.prototype.getMediaElementRenderer = function(t4) {
              var i3 = this.iy.get(t4);
              return i3 || ((i3 = new If(this.an, this.ac, t4)).error ? null : (this.iy.set(t4, i3), i3));
            }, t3.prototype.checkAudioContext = function() {
              if (this.an.info("zc.ac.cac call"), this.ac && "suspended" === this.ac.state) {
                var t4 = this.eventHandler.resumeAudioContext;
                (0, Pe.nr)() && t4(), window.addEventListener("mousedown", t4);
              }
            }, t3.prototype.offCheckAudioContextListener = function() {
              this.an.info("zc.ac.ocac call"), window.removeEventListener("mousedown", this.eventHandler.resumeAudioContext);
            }, t3.prototype.registerModule = function(t4, i3) {
              return Rf(this, void 0, void 0, function() {
                var n3, e3, r3;
                return Tf(this, function(s3) {
                  switch (s3.label) {
                    case 0:
                      if (this.sy.get(t4))
                        return [3, 4];
                      s3.label = 1;
                    case 1:
                      return s3.trys.push([1, 3, , 4]), n3 = new Blob([i3], { type: "text/javascript" }), e3 = URL.createObjectURL(n3), [4, this.ac.audioWorklet.addModule(e3)];
                    case 2:
                      return s3.sent(), this.sy.set(t4, true), [3, 4];
                    case 3:
                      return r3 = s3.sent(), this.sy.set(t4, false), this.an.error("zc.ac.rm.0 ".concat(t4, " fail ").concat(r3.toString())), [3, 4];
                    case 4:
                      return [2];
                  }
                });
              });
            }, t3.prototype.destroy = function() {
              this.offCheckAudioContextListener();
            }, t3;
          }(), Af = function() {
            function t3(t4, i3) {
              var n3 = i3.type, e3 = i3.channels, r3 = void 0 === e3 ? 1 : e3, s3 = i3.bufferSize, o2 = void 0 === s3 ? 0 : s3, u2 = i3.sampleBit, a2 = void 0 === u2 ? 16 : u2, c2 = i3.sampleRate, h2 = void 0 === c2 ? 44100 : c2, f2 = this;
              this.instant = 0, this.slow = 0, this.clip = 0, this.context = t4, this.type = n3, this.channels = r3, this.bufferSize = o2, this.sampleBit = a2, this.sampleRate = h2, this.script = t4.createScriptProcessor(o2, r3, r3);
              (/* @__PURE__ */ new Date()).getTime();
              this.script.addEventListener("audioprocess", function(t5) {
                var i4, e4 = t5.inputBuffer.getChannelData(0), r4 = 0, s4 = 0;
                for (i4 = 0; i4 < e4.length; ++i4)
                  r4 += e4[i4] * e4[i4], Math.abs(e4[i4]) > 0.99 && (s4 += 1);
                if (f2.instant = Math.sqrt(r4 / e4.length), f2.slow = 0.95 * f2.slow + 0.05 * f2.instant, f2.clip = s4 / e4.length, "pcm" === n3 || "wav" === n3) {
                  for (var o3 = [], u3 = 0; u3 < f2.channels; u3++)
                    o3.push(t5.inputBuffer.getChannelData(u3));
                  f2.recorderBuffer(o3);
                }
              }), "pcm" !== n3 && "wav" !== n3 || this.initRecorderBuffer(n3);
            }
            return t3.prototype.connectToSource = function(t4, i3) {
              try {
                this.mic = this.context.createMediaStreamSource(t4), this.mic.connect(this.script), this.script.connect(this.context.destination), (0, B.TE)(i3) || i3(null);
              } catch (t5) {
                console.error(t5), (0, B.TE)(i3) || i3(t5);
              }
              return this;
            }, t3.prototype.recorderBuffer = function(t4) {
              this.worker.postMessage({ command: "record", val: t4 });
            }, t3.prototype.initRecorderBuffer = function(t4) {
              var i3 = this;
              this.worker = this.inlineWorker(function() {
                var t5, i4, n3, e3, r3, s3, o2 = [];
                function u2(t6, i5, n4) {
                  for (var e4 = 0; e4 < n4.length; e4++, i5 += 2) {
                    var r4 = Math.max(-1, Math.min(1, n4[e4]));
                    t6.setInt16(i5, r4 < 0 ? 32768 * r4 : 32767 * r4, true);
                  }
                }
                function a2(t6, i5, n4) {
                  for (var e4 = 0; e4 < n4.length; e4++, i5++) {
                    var r4 = Math.max(-1, Math.min(1, n4[e4])), s4 = r4 < 0 ? 128 * r4 : 127 * r4;
                    t6.setInt8(i5, s4 += 128);
                  }
                }
                function c2(t6, i5, n4) {
                  for (var e4 = 0; e4 < n4.length; e4++)
                    t6.setUint8(i5 + e4, n4.charCodeAt(e4));
                }
                function h2(t6, i5) {
                  for (var n4 = new Float32Array(i5.length / t6), e4 = 0, r4 = 0; e4 < n4.length; )
                    n4[e4] = i5[r4], r4 += t6, e4++;
                  return n4;
                }
                function f2(t6, i5, n4) {
                  for (var e4 = new Float32Array(i5 * t6.length), r4 = 0, s4 = 0; s4 < n4[0].length; s4++)
                    e4.set(n4[0][s4], r4), r4 += n4[0][s4].length;
                  return e4;
                }
                function l2(t6, i5) {
                  for (var n4 = new Float32Array(t6.length + i5.length), e4 = 0; e4 < t6.length + i5.length; e4 += 2)
                    n4[e4] = t6[e4 / 2 | 0], n4[e4 + 1] = i5[e4 / 2 | 0];
                  return n4;
                }
                function d2(i5) {
                  var n4, e4;
                  if (1 == t5)
                    n4 = f2(o2[0], r3, o2), 1 != i5 && (e4 = h2(i5, n4));
                  else if (2 == t5) {
                    var s4 = f2(o2[0], r3, o2), u3 = f2(o2[1], r3, o2);
                    1 != i5 ? e4 = l2(h2(i5, s4), h2(i5, u3)) : n4 = l2(s4, u3);
                  }
                  return 1 != i5 ? e4 : n4;
                }
                function v2(t6) {
                  var n4 = function(t7, n5) {
                    var e4;
                    8 == n5 ? e4 = t7.length : 16 == n5 && (e4 = t7.length, e4 *= 2);
                    var r4 = new ArrayBuffer(e4), s4 = new DataView(r4);
                    return 8 == n5 ? a2(s4, 0, t7) : 16 == i4 && u2(s4, 0, t7), s4;
                  }(d2(t6), i4);
                  self.postMessage({ command: "exportPcmLive", val: n4 });
                }
                function m2(e4) {
                  var r4 = function(e5, r5) {
                    var s4;
                    8 == r5 ? s4 = e5.length : 16 == i4 && (s4 = e5.length, s4 *= 2);
                    var o3 = new ArrayBuffer(s4 + 44), h3 = new DataView(o3), f3 = n3, l3 = i4, d3 = t5;
                    return c2(h3, 0, "RIFF"), h3.setUint32(4, 36 + s4, true), c2(h3, 8, "WAVE"), c2(h3, 12, "fmt "), h3.setUint32(16, 16, true), h3.setUint16(20, 1, true), h3.setUint16(22, d3, true), h3.setUint32(24, f3, true), h3.setUint32(28, f3 * d3 * (l3 / 8), true), h3.setUint16(32, d3 * (l3 / 8), true), h3.setUint16(34, l3, true), c2(h3, 36, "data"), h3.setUint32(40, s4, true), 8 == i4 ? a2(h3, 44, e5) : 16 == i4 && u2(h3, 44, e5), h3;
                  }(d2(e4), i4);
                  self.postMessage({ command: "exportWav", val: r4 });
                }
                this.onmessage = function(u3) {
                  switch (u3.data.command) {
                    case "init":
                      t5 = (a3 = u3.data.val).sampleChannel, i4 = a3.sampleBit, n3 = a3.sampleRate, e3 = a3.oldSampleRate, r3 = a3.bufferSize, s3 = a3.type;
                      break;
                    case "record":
                      !function(i5) {
                        for (var r4 = 0; r4 < t5; r4++)
                          o2[r4] || (o2[r4] = []), o2[r4].push(i5[r4]);
                        var u4 = Math.round(e3 / n3);
                        "pcm" === s3 ? v2(u4) : "wav" === s3 && m2(u4), o2 = [];
                      }(u3.data.val);
                  }
                  var a3;
                };
              }), this.worker.postMessage({ command: "init", val: { sampleChannel: this.channels, sampleBit: this.sampleBit, sampleRate: this.sampleRate, oldSampleRate: this.context.sampleRate, bufferSize: this.bufferSize, type: t4 } }), this.worker.onmessage = function(t5) {
                switch (t5.data.command) {
                  case "exportPcmLive":
                    i3.onReceiveBuffer(t5.data.val);
                    break;
                  case "exportWav":
                    i3.onReceiveWav(t5.data.val);
                }
              };
            }, t3.prototype.onReceiveBuffer = function(t4) {
            }, t3.prototype.onReceiveWav = function(t4) {
            }, t3.prototype.writeString = function(t4, i3, n3) {
              for (var e3 = 0; e3 < n3.length; e3++)
                t4.setUint8(i3 + e3, n3.charCodeAt(e3));
            }, t3.prototype.writeBuffer = function(t4, i3, n3) {
              for (var e3 = 0; e3 < n3.byteLength; e3++)
                t4.setUint8(i3 + e3, n3[e3]);
            }, t3.prototype.concatenation = function(t4) {
              for (var i3 = 0, n3 = 0; n3 < t4.length; ++n3)
                i3 += t4[n3].buffer.byteLength;
              var e3 = new Uint8Array(i3), r3 = 0;
              for (n3 = 0; n3 < t4.length; ++n3)
                e3.set(new Uint8Array(t4[n3].buffer), r3), r3 += t4[n3].buffer.byteLength;
              return e3;
            }, t3.prototype.encodeWave = function(t4) {
              var i3 = this.concatenation(t4), n3 = i3.byteLength, e3 = new ArrayBuffer(n3 + 44), r3 = new DataView(e3), s3 = this.sampleRate, o2 = this.sampleBit, u2 = this.channels;
              return this.writeString(r3, 0, "RIFF"), r3.setUint32(4, 36 + n3, true), this.writeString(r3, 8, "WAVE"), this.writeString(r3, 12, "fmt "), r3.setUint32(16, 16, true), r3.setUint16(20, 1, true), r3.setUint16(22, u2, true), r3.setUint32(24, s3, true), r3.setUint32(28, s3 * u2 * (o2 / 8), true), r3.setUint16(32, u2 * (o2 / 8), true), r3.setUint16(34, o2, true), this.writeString(r3, 36, "data"), r3.setUint32(40, n3, true), this.writeBuffer(r3, 44, i3), r3;
            }, t3.prototype.stop = function() {
              this.mic.disconnect(), this.script.disconnect();
            }, t3.prototype.inlineWorker = function(t4) {
              if (Worker && t4) {
                var i3 = t4.toString().trim().match(/\{([\s\S]*)\}/)[1], n3 = URL.createObjectURL(new window.Blob([i3], { type: "text/javascript" }));
                return new Worker(n3);
              }
              return null;
            }, t3;
          }(), zf = function() {
            return zf = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, zf.apply(this, arguments);
          }, Df = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Nf = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Pf = function(t3, i3, n3) {
            if (n3 || 2 === arguments.length)
              for (var e3, r3 = 0, s3 = i3.length; r3 < s3; r3++)
                !e3 && r3 in i3 || (e3 || (e3 = Array.prototype.slice.call(i3, 0, r3)), e3[r3] = i3[r3]);
            return t3.concat(e3 || Array.prototype.slice.call(i3));
          };
          var Mf = function() {
            function t3(i3, n3, r3, s3, o2, u2) {
              void 0 === o2 && (o2 = 0), void 0 === u2 && (u2 = e2.UP.Default);
              var a2, c2, h2 = this;
              if (this.logger = i3, this.reporter = r3, this.recordedBlobs = [], this.mediaRecorder = null, t3.isInstantiated = true, this.an = i3, this.dataReport = n3, this.acMgr = Cf.create(this.an), this.stateCenter = new Ao(this.an, this.dataReport), this.pn = this.stateCenter, this.pn.clientType = "webrtc", this.pn.settingConfig = s3.stateCenter.settingConfig, s3._on("_experimentalAPICallback", function(t4) {
                h2.stateCenter.onExperimentalAPICallback(t4);
              }), true === (null === (a2 = t3.engineOptions) || void 0 === a2 ? void 0 : a2.pri)) {
                var f2 = t3.engineOptions.netMode;
                f2 !== e2.Am.Extranet && f2 !== e2.Am.Intranet || (this.pn.netMode = t3.engineOptions.netMode);
              }
              this.RTM = s3, this.pn.appid = s3.getAppID(), this.streamCenter = new yf(this.an, this.pn, this.dataReport, this.RTM, this.acMgr, { type: t3.geoFenceType, areaList: t3.geoFenceAreaList }), this.gn = this.streamCenter, this.pn.browser = wf.browserDetails.browser, this.pn.browserInfo = (0, Pe._Z)(), this.pn.sdkVerNum = this.RTM.stateCenter.sdkVerNum, this.RTM.cloudSetting.setEnvVariable("sdk_version", e2.qt), this.initTracer(r3), this.rtcModules = new Va(this.an, this.dataReport, this.pn, this.gn, this.RTM, this.ac, this), null === (c2 = this.RTM.cloudSetting) || void 0 === c2 || c2.getSettingCache(ls).then(function(t4) {
                var i4;
                h2.an.info(Co.BBG + " streamConfig " + JSON.stringify(t4));
                var n4 = h2.cr.createSpan(e2.t0.H, { key: L.oq.event }, { key: "" }, L.Xk.event);
                n4.setAttributes({ files: L.Xk.files([{ name: ls, content: JSON.stringify(null == t4 ? void 0 : t4.setting), versions: JSON.stringify(null == t4 ? void 0 : t4.versions), code: 0, message: "" }]) }), n4.end(), h2.pn.settingConfig.setSetting(null == t4 ? void 0 : t4.setting);
                var r4 = h2.pn.settingConfig.getSetting("open_mini_sdp");
                null === (i4 = h2.gn) || void 0 === i4 || i4.initMiniSdpWorker(r4);
              }).catch(function(t4) {
                h2.an.warn(Co.BBG + " streamConfig " + JSON.stringify(t4));
              }), this.pn.rtm = this.RTM, this.pn.streamCenter = this.gn, [3, 4, 5, 6, 7, 8, 9].includes(u2) ? (this.pn.scenario = u2, this.an.info(Co.sk8 + " " + u2 + " success")) : 100 === u2 ? (this.stateCenter.scenario = u2, this.an.info(Co.sk8 + " " + u2 + " liveroom set")) : (this.pn.scenario = e2.UP.Default, this.an.error(Co.sk8 + " " + u2 + "  please use valid scenario")), this.RTM.stateCenter.onListener("_beforeSwitchRoom", function(t4) {
                var i4;
                if (h2.rtcModules.publishModule.stopPublishingStreamInRoom(t4), h2.stateCenter.engineConfig.switchRoomNotStopPlay) {
                  var n4 = [];
                  for (var e3 in h2.streamCenter.playerList)
                    (null === (i4 = h2.streamCenter.playerList[e3].room) || void 0 === i4 ? void 0 : i4.roomID) === t4 && (n4.push(e3), h2.streamCenter.playerList[e3].room = {});
                  var r4 = function(t5, i5) {
                    h2.RTM.stateCenter.offListener("_afterSwitchRoom", r4);
                    for (var e4 = h2.stateCenter.getRoomByRoomID(t5), s4 = 0, o3 = n4; s4 < o3.length; s4++) {
                      var u3 = o3[s4];
                      i5 && e4 ? h2.streamCenter.playerList[u3].room = e4 : h2.rtcModules.playModule.stopPlayingStream(u3);
                    }
                  };
                  h2.RTM.stateCenter.onListener("_afterSwitchRoom", r4);
                } else
                  h2.rtcModules.playModule.stopPlayingStreamInRoom(t4);
              });
            }
            return Object.defineProperty(t3.prototype, "ac", { get: function() {
              return this.acMgr.ac;
            }, enumerable: false, configurable: true }), Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.setGeoFence = function(i3, n3) {
              if (t3.isInstantiated)
                throw re.mHY;
              t3.geoFenceType = i3, t3.geoFenceAreaList = n3;
            }, t3.setEngineOptions = function(i3) {
              t3.engineOptions = zf(zf({}, t3.engineOptions || {}), i3), i3.geoFenceType && (t3.geoFenceType = i3.geoFenceType), i3.geoFenceAreaList && (t3.geoFenceAreaList = i3.geoFenceAreaList), "boolean" == typeof i3.closeNetProbe && yf.setCloseNetProbe(i3.closeNetProbe), (0, G.zQ)(i3.dataReportCustomerContext, true) && yf.setReportCustomerContext(i3.dataReportCustomerContext), void 0 !== i3.ipStackMode && [0, 1, 2].includes(i3.ipStackMode) && (t3.ipStackMode = i3.ipStackMode);
            }, t3.prototype.destroyEngineHandler = function() {
              var t4 = this;
              this.an.info(Co.Wgj + " call");
              var i3 = function() {
                return !t4.RTM.stateCenter.roomModulesList.some(function(t5) {
                  return !(t5.isLogout() || "DISCONNECTED" === t5.roomState);
                });
              }, n3 = function() {
                t4.destroyCopyrightedMusic(), t4.RTM.destroyRTM();
                for (var i4 = 0, n4 = t4.gn.previewStreamList; i4 < n4.length; i4++) {
                  var e3 = n4[i4];
                  e3.localStream && t4.destroyStream(e3.localStream);
                }
                t4.pn.actionListener("_engineDestroy"), t4.acMgr.destroy(), t4.rtcModules.publishModule.destroy(), t4.gn.destroy(), t4.pn.destroy(), t4.RTM.netAgent.destroy(), t4.an.info(Co.Wgj + " call success"), t4.an.destroy();
              };
              i3() ? n3() : (this.RTM.off("roomStateUpdate"), this.off("playerStateUpdate"), this.off("publisherStateUpdate"), this.RTM.stateCenter.onListener("_roomStateUpdate", function(t5, e3) {
                "DISCONNECTED" === e3 && i3() && n3();
              }), this.RTM.logoutRoom());
            }, t3.prototype.mutePublishStreamVideo = function(t4, i3, n3) {
              return this.rtcModules.publishModule.mutePublishStreamVideo(t4, i3, n3);
            }, t3.prototype.mutePublishStreamAudio = function(t4, i3) {
              return this.rtcModules.publishModule.mutePublishStreamAudio(t4, i3);
            }, t3.prototype.mutePlayStreamVideo = function(t4, i3) {
              return this.rtcModules.playModule.mutePlayStreamVideo(t4, i3);
            }, t3.prototype.mutePlayStreamAudio = function(t4, i3) {
              return this.rtcModules.playModule.mutePlayStreamAudio(t4, i3);
            }, t3.prototype.muteMicrophone = function(t4) {
              return this.rtcModules.publishModule.muteMicrophone(t4);
            }, t3.prototype.isMicrophoneMuted = function() {
              return !this.gn.isMicEnabled;
            }, t3.prototype.setAudioOutput = function(t4, i3) {
              return this.an.info(Co.it$ + " call"), (0, B.QP)(i3) ? this.rtcModules.playModule.setStreamAudioOutput(t4, i3) : (this.an.error("audiooutput is not string"), false);
            }, t3.prototype.setGWNode = function(t4) {
              (0, B.QP)(t4) && t4.length > 0 && (this.gn.gwNode = t4);
            }, t3.prototype.setQualityMonitorCycle = function(t4) {
              return this.an.warn("setQualityMonitorCycle method deprecated!!!"), false;
            }, t3.prototype.startPlayingStream = function(t4, i3, n3) {
              return this.an.info(Co.rGc + " call by user", { streamid: t4 + "" }), this.rtcModules.playModule.startPlayingStream(t4, i3, n3);
            }, t3.prototype.setPlayStreamVideoType = function(t4, i3) {
              return this.rtcModules.playModule.setPlayStreamVideoType(t4, i3);
            }, t3.prototype.stopPlayingStream = function(t4) {
              this.an.info(Co.dk2 + " call by user", { streamid: t4 + "" }), this.rtcModules.playModule.stopPlayingStream(t4, void 0, true);
            }, t3.prototype.setPlayAccelerate = function(t4) {
              this.pn.playAccelerate = t4;
            }, t3.prototype.setTurnOverTcpOnly = function(t4) {
              this.an.info(Co.ZIe + " call " + t4), (0, B.dd)(t4) ? this.pn.turnOverTcpOnly = t4 : this.an.error("zc.p.stoto.0 param must be param");
            }, t3.prototype.createStream = function(t4) {
              return this.rtcModules.publishModule.createStream(t4, true);
            }, t3.prototype.createZegoStream = function(t4) {
              return this.rtcModules.publishModule.createZegoStream(t4);
            }, t3.prototype.setRoomScenario = function(t4) {
              return [3, 4, 5, 6, 7, 8, 9].includes(t4) ? (this.an.info(Co.ibZ + " " + t4 + " called"), this.pn.roomList.length ? (this.an.error(Co.ibZ + " " + JSON.stringify(re.p7L)), false) : (this.pn.scenario = t4, this.an.info(Co.ibZ + " " + t4 + " called success"), true)) : (this.an.error(Co.ibZ + " " + t4 + " please use valid scenario"), false);
            }, t3.prototype.destroyStream = function(t4) {
              this.an.info(Co.mLk + " call by user"), this.rtcModules.publishModule.destroyStream(t4);
            }, t3.prototype.startPublishingStream = function(t4, i3, n3, e3) {
              return this.an.info(Co.gkP + " call by user", { streamid: t4 + "" }), this.rtcModules.publishModule.startPublishingStream(t4, i3, n3 ? zf({}, n3) : n3, e3);
            }, t3.prototype.updatePublishingStream = function(t4, i3) {
              return this.an.info(Co.xcY + " call by user"), this.rtcModules.publishModule.updatePublishingStream(t4, i3);
            }, t3.prototype.activateSEIInsert = function(t4) {
              return this.rtcModules.publishModule.activateSEIInsert(t4);
            }, t3.prototype.setSEIConfig = function(t4) {
              this.an.info("zc.ssc " + JSON.stringify(t4)), this.pn.seiConfig = zf(zf({}, this.pn.seiConfig), t4), this.pn.player265ReceiverList.forEach(function(t5) {
                t5.sendMsg({ type: "SEIConfigUpdate" });
              });
            }, t3.prototype.sendSEI = function(t4, i3) {
              return this.rtcModules.publishModule.sendSEI(t4, i3);
            }, t3.prototype.stopPublishingStream = function(t4) {
              return this.an.info(Co.K4A + " call by user", { streamid: t4 + "" }), this.rtcModules.publishModule.stopPublishingStream(t4, void 0, true);
            }, t3.prototype.setVideoConfig = function(t4, i3) {
              return this.rtcModules.publishModule.setVideoConfig(t4, i3);
            }, t3.prototype.setAudioConfig = function(t4, i3) {
              return this.rtcModules.publishModule.setAudioConfig(t4, i3);
            }, t3.prototype.replaceTrack = function(t4, i3) {
              return this.rtcModules.publishModule.replaceTrack(t4, i3);
            }, t3.prototype.preloadEffect = function(t4, i3, n3) {
              if (void 0 === this.rtcModules.audioMixModule)
                throw (0, G.d1)(["audio mix"]);
              this.rtcModules.audioMixModule.preloadEffect(t4, i3, n3);
            }, t3.prototype.getEffectDuration = function(t4) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.getEffectDuration(t4);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.getEffectCurrentProgress = function(t4, i3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.getEffectProgress(t4, i3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.seekAudioEffect = function(t4, i3, n3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.seekAudioEffect(t4, i3, n3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.playEffect = function(t4, i3, n3) {
              if (void 0 === this.rtcModules.audioMixModule)
                throw (0, G.d1)(["audio mix"]);
              this.rtcModules.audioMixModule.playEffect(t4, i3, n3);
            }, t3.prototype.pauseEffect = function(t4, i3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.pauseEffect(t4, i3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.resumeEffect = function(t4, i3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.resumeEffect(t4, i3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.stopEffect = function(t4, i3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.stopEffect(t4, i3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.unloadEffect = function(t4) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.unloadEffect(t4);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.setEffectVolume = function(t4, i3, n3, e3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.setEffectVolume(t4, i3, n3, e3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.startMixingAudio = function(t4, i3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.startMixingAudio(t4, i3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.stopMixingAudio = function(t4, i3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.stopMixingAudio(t4, i3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.mixingBuffer = function(t4, i3, n3, e3) {
              if (void 0 === this.rtcModules.audioMixModule)
                throw (0, G.d1)(["audio mix"]);
              this.rtcModules.audioMixModule.mixingBuffer(t4, i3, n3, e3);
            }, t3.prototype.stopMixingBuffer = function(t4, i3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.stopMixingBuffer(t4, i3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.setMixingAudioVolume = function(t4, i3, n3) {
              if (void 0 !== this.rtcModules.audioMixModule)
                return this.rtcModules.audioMixModule.setMixingAudioVolume(t4, i3, n3);
              throw (0, G.d1)(["audio mix"]);
            }, t3.prototype.checkSystemRequirements = function(i3, n3) {
              var r3 = this, s3 = navigator && navigator.mediaDevices && (t3.screenShotReady || "getDisplayMedia" in navigator.mediaDevices);
              return this.an.info(Co.XQ0 + " call" + (0, Pe.$t)()), new G.l3(function(t4) {
                var o2 = (0, G.fU)(r3.cr, e2.t0.H, "", L.J8.event, L.oq.event), u2 = n3 || "all", a2 = function(i4) {
                  (0, G.lA)(o2, { capability: L.J8.capability(i4) });
                  var n4 = r3.pn.checkList.indexOf(u2);
                  r3.pn.checkList.splice(n4, 1), t4(i4);
                };
                return ["webRTC", "customCapture", "camera", "microphone", "screenSharing", "H264", "VP8", "H265", "all"].includes(u2) && [0, 1].includes(i3) ? r3.pn.checkList.includes(u2) || r3.pn.checkList.includes("all") ? a2({ result: false, errInfo: { extendedDate: "The last test of the same type has not returned a result " } }) : (r3.pn.checkList.push(u2), void Ws(s3, a2, i3, n3, r3.pn.customUa)) : a2({ result: false, errInfo: { extendedDate: "param error" } });
              });
            }, t3.prototype.enumDevices = function(t4, i3) {
              return Df(this, void 0, void 0, function() {
                var n3, e3, r3, s3, o2, u2, a2, c2, h2, f2, l2, d2, v2, m2 = this;
                return Nf(this, function(p2) {
                  switch (p2.label) {
                    case 0:
                      return this.an.info("zc.ed.0 call"), n3 = function() {
                        return new G.l3(function(t5, i4) {
                          m2.rtcModules.publishModule.recordDevices(function(i5) {
                            var n4 = true, e4 = true;
                            i5.cameras.find(function(t6) {
                              if ("" === t6.deviceID)
                                return n4 = false, true;
                            }), i5.microphones.find(function(t6) {
                              if ("" === t6.deviceID)
                                return e4 = false, true;
                            }), t5({ devices: i5, enableCamera: n4, enableMic: e4 });
                          }, function(t6) {
                            i4(t6);
                          });
                        });
                      }, [4, n3()];
                    case 1:
                      return e3 = p2.sent(), r3 = e3.enableCamera, s3 = e3.enableMic, o2 = e3.devices, t4 ? (this.an.info("zc.ed.0 check permission"), u2 = { video: true, audio: true }, "videoinput" === i3 ? u2.audio = false : "audioinput" !== i3 && "audiooutput" !== i3 || (u2.video = false), c2 = u2.audio && !s3, (a2 = u2.video && !r3) || c2 ? (this.an.info("zc.ed.0 need to get device permission. needCamera: ".concat(a2, ", needMic: ").concat(c2)), [4, lo(u2).catch(function() {
                      })]) : [3, 4]) : [3, 4];
                    case 2:
                      return (h2 = p2.sent()) && h2.getTracks().forEach(function(t5) {
                        t5.stop();
                      }), [4, n3()];
                    case 3:
                      f2 = p2.sent(), l2 = f2.devices, d2 = f2.enableCamera, v2 = f2.enableMic, u2.video && !d2 && this.an.warn("zc.ed.0 get video device permission failed."), u2.audio && !v2 && this.an.warn("zc.ed.0 get audio device permission failed."), o2 = l2, p2.label = 4;
                    case 4:
                      return [2, o2];
                  }
                });
              });
            }, t3.prototype.getCameras = function() {
              return Df(this, void 0, void 0, function() {
                return Nf(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return [4, this.enumDevices(true, "videoinput")];
                    case 1:
                      return [2, t4.sent().cameras];
                  }
                });
              });
            }, t3.prototype.getMicrophones = function() {
              return Df(this, void 0, void 0, function() {
                return Nf(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return [4, this.enumDevices(true, "audioinput")];
                    case 1:
                      return [2, t4.sent().microphones];
                  }
                });
              });
            }, t3.prototype.getSpeakers = function() {
              return Df(this, void 0, void 0, function() {
                return Nf(this, function(t4) {
                  switch (t4.label) {
                    case 0:
                      return [4, this.enumDevices(true, "audiooutput")];
                    case 1:
                      return [2, t4.sent().speakers];
                  }
                });
              });
            }, t3.prototype.getAudioInfo = function(t4, i3, n3) {
              if (!t4)
                return this.an.error("localStream is empty!"), false;
              var e3 = zf({}, n3);
              return new Af(this.ac, e3).connectToSource(t4, function(t5) {
                i3(t5);
              });
            }, t3.prototype.getSoundLevel = function(t4, i3, n3) {
              if (!this.rtcModules.audioMixModule)
                throw (0, G.d1)(["audio mix"]);
              this.rtcModules.audioMixModule.getSoundLevel(t4, i3, n3);
            }, t3.prototype.stopSoundLevel = function(t4) {
              if (!this.rtcModules.audioMixModule)
                throw (0, G.d1)(["audio mix"]);
              this.rtcModules.audioMixModule.stopSoundLevel(t4);
            }, t3.prototype.handleDataAvailable = function(i3) {
              i3.data && i3.data.size > 0 && t3.recordedBlobs.push(i3.data);
            }, t3.prototype.setAudioFrameCallback = function(t4, i3, n3) {
              var e3 = this;
              return new Promise(function(r3, s3) {
                return Df(e3, void 0, void 0, function() {
                  var e4, o2, u2, a2, c2;
                  return Nf(this, function(h2) {
                    switch (h2.label) {
                      case 0:
                        if (e4 = function(t5) {
                          s3({ errorCode: t5.errorCode || t5.code, extendedData: t5.extendedData || t5.message });
                        }, !((0, B.QP)(t4) || (0, B.dr)(t4) || (f2 = t4, f2 instanceof ia)))
                          return this.an.error("zc.safc.0 streamID must be string or ZegoLocalStream or MediaStream"), e4(re.ZEp), [2];
                        if ((null == n3 ? void 0 : n3.frameSize) && ![256, 512, 1024, 2048, 4096, 8192, 16384].includes(null == n3 ? void 0 : n3.frameSize))
                          return this.an.error("zc.safc.0 option frameSize invalid"), e4(re.ZEp), [2];
                        if ((0, B.QP)(t4)) {
                          if (!(u2 = this.gn.playerList[t4]))
                            return this.an.error("zc.safc.0 player not found"), e4(re.oCq), [2];
                          if (0 === (null === (c2 = u2.playStream) || void 0 === c2 ? void 0 : c2.getAudioTracks().length))
                            return this.an.error("zc.safc.0 no stream or no audio"), e4(re.oCq), [2];
                          o2 = u2;
                        } else {
                          if (!(a2 = this.gn.checkPreview(t4)))
                            return this.an.error("zsc.sd.0 preview no found"), e4(re.fzq), [2];
                          if (0 === t4.getAudioTracks().length || a2.isOriginEmptyTrack())
                            return this.an.error("zsc.sd.0 preview no audio track"), e4(re.akY), [2];
                          o2 = a2;
                        }
                        return [4, this.gn.acMgr.registerModule("audioPCMExporter", 'class AudioPcmDataProcessor extends AudioWorkletProcessor {\r\n  // 0. Determine the buffer size (this is the same as the 1st argument of ScriptProcessor)\r\n\r\n  constructor(options) {\r\n    super();\r\n    // console.error("AudioPcmDataProcessor");\r\n    this.bufferSize = 1024;\r\n    // 1. Track the current buffer fill level\r\n    this._bytesWritten = 0;\r\n\r\n    // 2. Create a buffer of fixed size\r\n    this.channelCount = 2;\r\n\r\n    this.inputChannels = [];\r\n    this.bufferSize = options.processorOptions.bufferSize || this.bufferSize;\r\n    this.initBuffer();\r\n    this.port.postMessage({\r\n      type: "msg",\r\n      msg: "init"\r\n    });\r\n  }\r\n\r\n  initBuffer() {\r\n    this._bytesWritten = 0;\r\n  }\r\n\r\n  process(inputList) {\r\n    // console.warn("process", inputList[0]);\r\n    this.port.postMessage({\r\n      type: "proces",\r\n      len: inputList[0].length\r\n    });\r\n    if (this.isBufferFull()) {\r\n      this.flush();\r\n    }\r\n\r\n    const _inputChannels = inputList[0];\r\n    this.channelCount = _inputChannels.length;\r\n    if (_inputChannels && _inputChannels.length) {\r\n      // \r\n      if (!this.inputChannels[0]) {\r\n        for (let i = 0; i < this.channelCount; i++) {\r\n          this.inputChannels[i] = new Float32Array(this.bufferSize);\r\n        }\r\n      }\r\n\r\n      const bufferLen = _inputChannels[0].length;\r\n      for (let j = 0; j < bufferLen; j++) {\r\n        for (let i = 0; i < _inputChannels.length; i++) {\r\n          this.inputChannels[i][this._bytesWritten] = _inputChannels[i][j];\r\n        }\r\n        this._bytesWritten++;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  isBufferEmpty() {\r\n    return this._bytesWritten === 0;\r\n  }\r\n\r\n  isBufferFull() {\r\n    // console.warn(this._bytesWritten, this.bufferSize, this.channelCount);\r\n    return this._bytesWritten === this.bufferSize;\r\n  }\r\n\r\n  flush() {\r\n    this.port.postMessage({\r\n      type: "process",\r\n      channels: this.inputChannels,\r\n      channelCount: this.inputChannels.length,\r\n      sampleRate: sampleRate\r\n    });\r\n    this.initBuffer();\r\n  }\r\n}\r\n\r\ntry {\r\n  registerProcessor("audio-pcm-data-processor", AudioPcmDataProcessor);\r\n} catch (error) {\r\n  // console.warn("registerProcessor", error);\r\n}\r\n')];
                      case 1:
                        return h2.sent(), o2.setAudioFrameCallback(i3, n3), r3({ errorCode: 0, extendedData: "" }), [2];
                    }
                    var f2;
                  });
                });
              });
            }, t3.prototype.startRecord = function(t4) {
              var i3 = this, n3 = this.gn.checkPreview(t4);
              if (!n3)
                throw "start record failed. streamNotFromZegoStr.";
              var e3 = t4.clone(), r3 = e3.getAudioTracks();
              r3.length > 0 && n3.hasEmptyAudioTrack && r3.forEach(function(t5) {
                e3.removeTrack(t5);
              }), this.recordedBlobs = [];
              var s3 = { mimeType: "video/webm;codecs=vp9" };
              console.log("MediaRecorder", MediaRecorder), MediaRecorder.isTypeSupported(s3.mimeType) || (s3 = { mimeType: "video/webm;codecs=vp8,opus" }, MediaRecorder.isTypeSupported(s3.mimeType) || (s3 = { mimeType: "video/webm;codecs=vp8" }, MediaRecorder.isTypeSupported(s3.mimeType) || (s3 = { mimeType: "video/webm" }, MediaRecorder.isTypeSupported(s3.mimeType) || (s3 = { mimeType: "" }))));
              try {
                this.mediaRecorder = new MediaRecorder(e3, s3);
              } catch (t5) {
                return void this.an.error("zc.mdrcd Exception while creating ZegoMediaRecorder:", t5);
              }
              this.mediaRecorder.onstop = function(t5) {
                i3.an.warn("zc.mdrcd Recorder stopped: " + t5);
              }, this.mediaRecorder.ondataavailable = this.handleDataAvailable.bind(this), this.mediaRecorder.start(10);
            }, t3.prototype.stopRecord = function() {
              this.mediaRecorder ? this.mediaRecorder.stop() : this.an.warn("zc.mdrcd please invoke startRecord first");
            }, t3.prototype.resumeRecord = function() {
              this.mediaRecorder ? this.mediaRecorder.resume() : this.an.warn("zc.mdrcd please invoke startRecord first");
            }, t3.prototype.pauseRecord = function() {
              this.mediaRecorder ? this.mediaRecorder.pause() : this.an.warn("zc.mdrcd please invoke startRecord first");
            }, t3.prototype.saveRecord = function(t4) {
              if (this.mediaRecorder && this.recordedBlobs) {
                var i3 = new Blob(this.recordedBlobs, { type: "video/webm" }), n3 = window.URL.createObjectURL(i3), e3 = G.VJ.createElement("a");
                e3.style.display = "none", e3.href = n3, e3.download = t4 + ".webm", G.VJ.body.appendChild(e3), e3.click(), setTimeout(function() {
                  G.VJ.body.removeChild(e3), window.URL.revokeObjectURL(n3);
                }, 100);
              } else
                this.an.warn("please invoke startRecord first");
            }, t3.prototype.useVideoDevice = function(t4, i3) {
              return this.rtcModules.publishModule.useVideoDevice(t4, i3);
            }, t3.prototype.useAudioDevice = function(t4, i3) {
              return this.rtcModules.publishModule.useAudioDevice(t4, i3);
            }, t3.prototype.useFrontCamera = function(t4, i3) {
              return this.rtcModules.publishModule.useFrontCamera(t4, i3);
            }, t3.prototype.getElectronScreenSources = function() {
              return this.rtcModules.publishModule.getElectronScreenSources();
            }, t3.prototype.setSoundLevelDelegate = function(t4, i3, n3) {
              this.an.info("zc.ssd.0 call"), (0, B.dd)(t4) ? i3 && (!(0, G.zQ)(i3) || i3 < 100 || i3 > 3e3) ? this.an.error("zc.ssd.0 soundLevel interval must be integer number which is between 100 and 3000") : this.gn.setSoundLevelDelegate(t4, i3, n3) : this.an.error("zc.ssd.0 param 1 must be boolean");
            }, t3.prototype.on = function(t4, i3) {
              return this.rtcModules.bindListener(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              return this.rtcModules.deleteListener(t4, i3);
            }, t3.prototype.getVersion = function() {
              return e2.qt;
            }, t3.prototype.setStreamExtraInfo = function(t4, i3) {
              return this.rtcModules.streamCommon.setStreamExtraInfo(t4, i3);
            }, t3.prototype.addPublishCdnUrl = function(t4, i3) {
              return this.an.info("zg.cm.apu call " + i3, { streamid: t4 }), this.rtcModules.streamCDNModule ? this.rtcModules.streamCDNModule.publishTarget({ type: "addpush", streamID: t4, pushUrl: i3 }) : (0, G.AA)(["stream CDN"]);
            }, t3.prototype.removePublishCdnUrl = function(t4, i3) {
              return this.an.info("zg.cm.rpu call " + i3, { streamid: t4 }), this.rtcModules.streamCDNModule ? this.rtcModules.streamCDNModule.publishTarget({ type: "delpush", streamID: t4, pushUrl: i3 }) : (0, G.AA)(["stream CDN"]);
            }, t3.prototype.startMixerTask = function(t4) {
              return (0, G.AA)(["mix stream"]);
            }, t3.prototype.startAutoMixerTask = function(t4) {
              return (0, G.AA)(["mix stream"]);
            }, t3.prototype.setMixerTaskConfig = function(t4) {
              return (0, G.AA)(["mix stream"]);
            }, t3.prototype.stopMixerTask = function(t4) {
              return (0, G.AA)(["mix stream"]);
            }, t3.prototype.stopAutoMixerTask = function(t4) {
              return (0, G.AA)(["mix stream"]);
            }, t3.prototype.setCaptureVolume = function(t4, i3) {
              return this.rtcModules.publishModule.setCaptureVolume(t4, i3);
            }, t3.use = function(i3) {
              switch (i3.type) {
                case "AudioMix":
                  i3.install(Va, Mc);
                  break;
                case "MixStream":
                  i3.install(t3, Po, Va);
                  break;
                case "StreamCDN":
                  i3.install(t3, Va, Po);
                  break;
                case "Advance":
                  i3.install(t3, Va, Po, Ju, ja, za, Mc, tf);
                  break;
                case "BeautyEffect":
                case "VoiceChanger":
                  i3.install(t3, Ju);
                  break;
                case "RangeAudio":
                case "DataChannel":
                case "AiDenoise":
                case "BackgroundProcess":
                case "CopyrightedMusic":
                case "StreamCompositor":
                  i3.install(t3);
              }
            }, t3.prototype.createRangeAudioInstance = function() {
              throw (0, G.d1)(["range audio"]);
            }, t3.prototype.createCopyrightedMusic = function() {
              throw (0, G.d1)(["copyrighted music"]);
            }, t3.prototype.destroyCopyrightedMusic = function() {
            }, t3.prototype.createRealTimeSequentialDataManager = function(t4) {
              throw (0, G.d1)(["data channel"]);
            }, t3.prototype.destroyRealTimeSequentialDataManager = function(t4) {
              throw (0, G.d1)(["data channel"]);
            }, t3.prototype.enableDataChannel = function(t4) {
              (0, B.dd)(t4) && (this.gn.isDataChannelEnabled = t4);
            }, t3.prototype.addTrack = function(t4, i3) {
              var n3 = this;
              return new G.l3(function(e3, r3) {
                var s3 = { id: i3.id, muted: i3.muted, enabled: i3.enabled, kind: i3.kind, readyState: i3.readyState, label: i3.label };
                n3.an.info(Co.WuQ + " call. ".concat(null == t4 ? void 0 : t4.id, " track: ") + JSON.stringify(s3)), n3.rtcModules.publishModule.handleTrack("ADD", t4, i3, e3, r3);
              });
            }, t3.prototype.removeTrack = function(t4, i3) {
              var n3 = this;
              return new G.l3(function(e3, r3) {
                n3.an.info(Co.FGD + " call"), n3.rtcModules.publishModule.handleTrack("REMOVE", t4, i3, e3, r3);
              });
            }, t3.prototype.setBeautyEffect = function(t4, i3, n3) {
              return (0, G.AA)(["beauty effect"]);
            }, t3.prototype.setLowlightEnhance = function(t4, i3) {
              return (0, G.AA)(["beauty effect"]);
            }, t3.prototype.getPublishingStreamQuality = function(t4) {
              return this.rtcModules.publishModule.getStreamStats(t4);
            }, t3.prototype.getPlayingStreamQuality = function(t4) {
              return this.rtcModules.playModule.getStreamStats(t4);
            }, t3.prototype.checkAudioTrackIsActive = function(t4) {
              var i3 = this;
              return this.an.info("zc.caia.0 call"), new G.l3(function(n3, e3) {
                if (t4 = (0, $u.L)(t4, i3.an), !i3.checkTrackParam(t4, 1))
                  return i3.an.info("zc.caia.0 param active: false"), n3(false);
                var r3 = 0;
                try {
                  var s3 = 0, o2 = i3.gn.createSoundLevel(i3.ac, t4, 50, 50, function(t5) {
                    t5 *= 100;
                    var e4 = false;
                    s3 >= 4 ? (u2.destroy(), (t5 > 0 || r3 > 0) && (e4 = true), i3.an.info("zc.caia.0 active: " + e4), n3(e4)) : r3 = Math.max(t5, r3), s3++;
                  }), u2 = o2.soundMeter;
                  u2 && o2.mic || (i3.an.error("zc.cvia.1 checkVideoTrackIsActive not supported"), n3(false));
                } catch (t5) {
                  i3.an.error("zc.cvia.1 " + t5), n3(false);
                }
              });
            }, t3.prototype.checkVideoTrackIsActive = function(t4) {
              var i3 = this;
              this.an.info("zc.cvia.0 call");
              var n3 = this;
              return new G.l3(function(e3, r3) {
                if (t4 = (0, $u.L)(t4, i3.an), !i3.checkTrackParam(t4, 0))
                  return i3.an.info("zc.cvia.1 param active: false"), e3(false);
                var s3 = (0, G.sb)(1, 1), o2 = (0, G.FP)(160, 120).getContext("2d");
                o2 && (null == o2 ? void 0 : o2.drawImage) && (null == o2 ? void 0 : o2.getImageData) || (n3.an.error("zc.cvia.1 checkVideoTrackIsActive not supported"), e3(false)), s3.style.position = "fixed", s3.style.left = "-1000px", s3.style.opacity = "0.01", G.VJ.body.appendChild(s3), s3.srcObject = t4;
                var u2 = null;
                function a2() {
                  o2 = null;
                  try {
                    s3.pause(), s3.remove(), s3.srcObject = null;
                  } catch (t5) {
                  }
                }
                function c2() {
                  s3.play();
                  var t5 = setTimeout(function() {
                    clearTimeout(t5), t5 = null, s3.removeEventListener("canplay", c2), null == o2 || o2.drawImage(s3, 0, 0, 160, 120);
                    var i4 = setTimeout(function() {
                      clearTimeout(i4), i4 = null;
                      var t6 = null == o2 ? void 0 : o2.getImageData(0, 0, 160, 120), r4 = (null == t6 ? void 0 : t6.data) && Math.floor(t6.data.length / 3);
                      if (r4) {
                        for (var s4 = 3; s4 < r4; s4 += 4)
                          if (0 !== t6.data[s4 - 1] || 0 !== t6.data[s4 - 2] || 0 !== t6.data[s4 - 3])
                            return n3.an.info("zc.cvia.0 active: true"), e3(true), void a2();
                        a2(), n3.an.info("zc.cvia.1 active: false"), e3(false);
                      }
                    }, 20);
                  }, 200);
                }
                s3.addEventListener("canplay", c2), u2 = setTimeout(function() {
                  clearTimeout(u2), s3.removeEventListener("canplay", c2), a2(), e3(false);
                }, 1e3);
              });
            }, t3.prototype.checkTrackParam = function(t4, i3) {
              var n3, e3 = this;
              if (this.an.info("zc.ctp.0 call type:" + i3), !(0, B.dr)(t4))
                return this.an.error("zc.ctp.1 param 1 must be MediaStream"), false;
              var r3 = this.gn.checkPreview(t4), s3 = Object.keys(this.gn.playerList).find(function(i4) {
                var n4;
                return (null === (n4 = e3.gn.playerList[i4]) || void 0 === n4 ? void 0 : n4.playStream) === t4;
              });
              if (!r3 && !s3)
                return this.an.error("zc.ctp.1 " + G.aw), false;
              var o2 = t4[0 == i3 ? "getVideoTracks" : "getAudioTracks"]()[0];
              return o2 ? "live" !== o2.readyState || !o2.enabled || o2.muted ? (this.an.info("zc.ctp.0 type:".concat(i3, " state:").concat(o2.readyState, " enabled:").concat(o2.enabled, " muted:").concat(o2.muted)), false) : !s3 || 0 === (null === (n3 = this.gn.playerList[s3]) || void 0 === n3 ? void 0 : n3.micStatus) : (this.an.error("zc.cvia.1 the stream has not track"), false);
            }, t3.prototype.setDummyCaptureImagePath = function(t4, i3) {
              return this.rtcModules.publishModule.setDummyCaptureImagePath(t4, i3);
            }, t3.prototype.setAccess = function(t4) {
            }, t3.prototype.setTestPackageSize = function(t4) {
              this.RTM.setTestPackageSize(true);
            }, t3.prototype.setAudioOutputDevice = function(t4, i3) {
              return Df(this, void 0, void 0, function() {
                var n3, e3 = this;
                return Nf(this, function(r3) {
                  return n3 = null == t4 ? void 0 : t4.setSinkId, this.an.info("zc.saopd call:" + i3), [2, new G.l3(function(r4, s3) {
                    return Df(e3, void 0, void 0, function() {
                      var e4, o2, u2, a2 = this;
                      return Nf(this, function(c2) {
                        switch (c2.label) {
                          case 0:
                            if (e4 = function(t5) {
                              a2.an.info("zc.saopd error" + JSON.stringify(t5)), s3({ errorCode: t5.code, extendedData: t5.message });
                            }, !n3)
                              return [3, 5];
                            if (t4.setsinkid && (t4.setsinkid.enabled = true), !i3 || !(0, B.QP)(i3))
                              return [2, e4({ code: re.ann.code, message: "the 'deviceID' is invalid" })];
                            c2.label = 1;
                          case 1:
                            return c2.trys.push([1, 3, , 4]), [4, n3.call(t4, i3)];
                          case 2:
                            return c2.sent(), [3, 4];
                          case 3:
                            return o2 = c2.sent(), (u2 = t4.srcObject) && !u2.getAudioTracks()[0] ? [2, e4(re.akY)] : [2, e4({ code: re.z0D.code, message: o2 })];
                          case 4:
                            return [2, r4(true)];
                          case 5:
                            throw Error("Browser not support set audio output.");
                        }
                      });
                    });
                  })];
                });
              });
            }, t3.prototype.enableCameraCapturing = function(t4, i3) {
              return void 0 === i3 && (i3 = true), Df(this, void 0, void 0, function() {
                return Nf(this, function(n3) {
                  return [2, this.rtcModules.publishModule.enableCameraCapturing(t4, i3)];
                });
              });
            }, t3.prototype.enableDualStream = function(t4) {
              this.rtcModules.publishModule.enableDualStream(t4);
            }, t3.prototype.setLowStreamParameter = function(t4, i3) {
              this.rtcModules.publishModule.setLowStreamParameter(t4, i3);
            }, t3.prototype.enableVideoHardwareEncoder = function(t4) {
              if ((0, B.dd)(t4)) {
                var i3 = this.pn.settingConfig;
                i3.setUserValue("hardware_encode", t4), i3.setUserValue("camera_hard_encode", t4), i3.setUserValue("custom_hard_encode", t4);
              }
            }, t3.prototype.createLocalViewer = function(t4) {
              var i3 = this.gn.checkPreview(t4), n3 = null == i3 ? void 0 : i3.getViewer();
              if (!n3)
                throw Error("create viewer failed.");
              return new Sf(n3);
            }, t3.prototype.createRemoteViewer = function(t4) {
              var i3 = this.gn.checkPlayer(t4), n3 = null == i3 ? void 0 : i3.getViewer();
              if (!n3)
                throw Error("create viewer failed.");
              return new Sf(n3);
            }, t3.prototype.createStreamCompositor = function() {
              throw (0, G.d1)(["stream compositor"]);
            }, t3.prototype._enableAiDenoise = function(t4, i3, n3) {
              return n3 == Wu.PP.AIBalanced || n3 == Wu.PP.AI || n3 == Wu.PP.AIAggressive ? this.setVoiceChangerPreset(t4, { ANS: { enable: i3, mode: n3 } }) : this.enableAiDenoise(t4, i3);
            }, t3.prototype.enableAiDenoise = function(t4, i3) {
              return (0, G.AA)(["ai denoise"]);
            }, t3.prototype.setAiDenoiseMode = function(t4, i3) {
              return (0, G.AA)(["voice changer with AIBalance"]);
            }, t3.prototype.muteAllPlayAudioStreams = function(t4) {
              return this.rtcModules.playModule.muteAllPlayAudioStreams(t4);
            }, t3.prototype.muteAllPlayVideoStreams = function(t4) {
              return this.rtcModules.playModule.muteAllPlayVideoStreams(t4);
            }, t3.prototype.setVoiceChangerPreset = function(t4, i3) {
              return (0, G.AA)(["voice changer", "advanced"]);
            }, t3.prototype.enableLiveAudioEffect = function(t4, i3, n3) {
              return (0, G.AA)(["voice changer", "advanced"]);
            }, t3.prototype.loadBackgroundBlurModule = function() {
              return (0, G.AA)(["blur background", "advanced"], -1);
            }, t3.prototype.initBackgroundModule = function(t4, i3) {
              return (0, G.AA)(["blur background", "advanced"], -1);
            }, t3.prototype.setBackgroundBlurOptions = function(t4, i3) {
              throw (0, G.d1)(["blur background", "advanced"]);
            }, t3.prototype.setVirtualBackgroundOptions = function(t4, i3) {
              throw (0, G.d1)(["blur background", "advanced"]);
            }, t3.prototype.setTransparentBackgroundOptions = function(t4) {
              throw (0, G.d1)(["blur background", "advanced"]);
            }, t3.prototype.enableBackgroundProcess = function(t4, i3, n3) {
              return (0, G.AA)(["advanced"]);
            }, t3.prototype.enableAutoSwitchDevice = function(t4) {
              this.rtcModules.publishModule.enableAutoSwitchDevice(t4);
            }, t3.prototype.initTracer = function(t4) {
              this.pn.reporter = t4;
              var i3 = new kf(this.RTM.stateCenter, this.pn, this.gn);
              this.cr.setCommonStates(i3), this.cr.setResource({ sdk_version: e2.qt, report_version: this.pn.sdkVerNum });
            }, t3.prototype.setEngineConfig = function(t4) {
              if (t4 && this.an.info("zc.sec.0 " + JSON.stringify(t4)), this.checkMaxChannels(t4), this.checkRetryTime(t4), this.pn.engineConfig = zf(zf({}, this.pn.engineConfig), t4), this.checkQualityInterval(), this.pn.actionListener("_engineConfigUpdate", this.pn.engineConfig), t4.adaptCustomUA) {
                var i3 = (0, Pe.$t)();
                this.pn.customUa = i3.includes("iOS"), this.an.info("zc.sec.0 custom ua ".concat(i3));
              }
              (0, B.w)(t4.setUserInfo) && this.oy(t4.setUserInfo), (0, B.dd)(t4.enableMiniSDP) && this.stateCenter.setIsMiniSdp(t4.enableMiniSDP), this.RTM.setEngineConfig(t4);
            }, t3.prototype.oy = function(t4) {
              this.logger.info("zc.sui " + JSON.stringify(t4));
              var i3 = t4.token, n3 = t4.userID;
              this.logger.setTokenInfo(i3 || "", n3), n3 && i3 && this.pn.reporter.setReporterInfo(n3, i3);
            }, t3.prototype.checkQualityInterval = function() {
              var t4 = this.pn.engineConfig, i3 = t4.publishQualityInterval, n3 = t4.playQualityInterval;
              (0, B.Cs)(i3) && 0 !== i3 && i3 < e2.d7 && (this.pn.engineConfig.publishQualityInterval = e2.d7), (0, B.Cs)(n3) && 0 !== n3 && n3 < e2.d7 && (this.pn.engineConfig.playQualityInterval = e2.d7);
            }, t3.prototype.checkMaxChannels = function(t4) {
              var i3 = t4.maxChannels;
              (0, B.Cs)(i3) && (i3 < e2.FV && (t4.maxChannels = e2.FV), i3 > e2.di && (t4.maxChannels = e2.di));
            }, t3.prototype.checkRetryTime = function(t4) {
              var i3 = t4.roomRetryTime, n3 = t4.streamRetryTime;
              (0, B.Cs)(i3) && (i3 < e2.Lx && (t4.roomRetryTime = e2.Lx), i3 > e2.ZV && (t4.roomRetryTime = e2.ZV)), (0, B.Cs)(n3) && (n3 < e2.Lx && (t4.streamRetryTime = e2.Lx), n3 > e2.ZV && (t4.streamRetryTime = e2.ZV), this.pn.streamRetryTime = t4.streamRetryTime);
            }, t3.prototype.inject = function(t4, i3) {
              var n3 = this;
              if ("ZegoExpressPlayer" !== t4)
                throw new Error("You are not authorized to use 'inject' method!");
              i3({ appid: this.pn.appid, logger: this.an, validateToken: function(t5, i4) {
                return Df(n3, void 0, void 0, function() {
                  return Nf(this, function(n4) {
                    switch (n4.label) {
                      case 0:
                        return this.pn.player265Validated ? [2, true] : [4, this.RTM.fetchAppConfigByTargetToken(t5, i4)];
                      case 1:
                        return n4.sent() && (this.pn.player265Validated = true), [2, !!this.pn.player265Validated];
                    }
                  });
                });
              }, isLogin: function() {
                return n3.pn.rtm && n3.pn.rtm.stateCenter.roomModulesList.some(function(t5) {
                  return t5.isLogin();
                });
              }, seiConfig: function() {
                return n3.pn.seiConfig;
              }, addReceiver: function(t5) {
                n3.pn.player265ReceiverList.push(t5);
              }, removeReceiver: function(t5) {
                n3.pn.player265ReceiverList = n3.pn.player265ReceiverList.filter(function(i4) {
                  return i4 != t5;
                });
              } });
            }, t3.prototype.setStreamAlignmentProperty = function(t4, i3) {
              return Df(this, void 0, void 0, function() {
                var n3, e3, r3, s3;
                return Nf(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      return n3 = "zc.ssap", e3 = (0, B.QP)(t4), this.an.info(n3 + " call. " + (e3 ? t4 : null == t4 ? void 0 : t4.id) + " alignment: ".concat(i3)), r3 = null, (r3 = e3 ? this.gn.publisherList[t4] : this.gn.checkPublish(t4)) && 6 === r3.publisher.state ? [4, r3.publisher.setStreamAlignmentProperty(i3)] : (this.an.error(n3 + " failed.  setStreamAlignmentProperty failed, stream not published."), [2, false]);
                    case 1:
                      return s3 = o2.sent(), this.an.info(n3 + " end. " + s3), [2, s3];
                  }
                });
              });
            }, t3.prototype.setTurnServer = function(t4) {
              if (!(0, B.C9)(t4))
                throw "'setTurnServer' failed. param error.";
              this.streamCenter.turnServers = Pf([], t4, true);
            }, t3.prototype.destroyEngine = function() {
              if (this.pn.engineDestroy)
                throw new Error("ZegoExpressEngine has been destroyed.");
              this.destroyEngineHandler(), this.pn.engineDestroy = true;
            }, t3.prototype.uploadLog = function(t4) {
              return void 0 === t4 && (t4 = false), this.RTM.uploadLog(t4);
            }, t3.prototype.callExperimentalAPI = function(t4) {
              var i3 = this;
              return new Promise(function(n3, e3) {
                var r3 = t4.method, s3 = t4.params;
                if (["onRecvRoomMuteVideoStream", "onRecvRoomMuteAudioStream", "onRecvRoomChannelMessage"].includes(r3))
                  n3({ errorCode: 0, extendedData: "" });
                else if ("sendRoomChannelMessage" === r3) {
                  i3.RTM.sendRoomChannelMessage(s3.roomID, 0, s3.msgType, s3.msgContent, s3.toUserIDList).then(function() {
                    n3({ errorCode: 0, extendedData: "" });
                  }).catch(function(t5) {
                    e3(t5);
                  });
                } else if ("enableVolumeDucking" === r3) {
                  i3.hy(s3.localStream, s3.enable).then(function() {
                    n3({ errorCode: 0, extendedData: "" });
                  }).catch(function(t5) {
                    e3(t5);
                  });
                } else
                  n3("getAudioContext" === r3 ? i3.ac : void 0);
              });
            }, t3.prototype.setTracerLevel = function(t4) {
              this.RTM.reporter.tracerHandler.tracer.setLogLevel(t4);
            }, t3.prototype.getReportSize = function() {
              var t4;
              return null === (t4 = this.RTM.reporter.tracerHandler) || void 0 === t4 ? void 0 : t4.tracer.reportSize();
            }, t3.prototype.getFlutterVideoConfig = function() {
              var t4 = Ra(this.pn, this.an, {});
              return { encodeWidth: t4.width, encodeHeight: t4.height, fps: t4.frameRate, bitrate: t4.bitRate, keyFrameInterval: t4.keyFrameInterval };
            }, t3.prototype.getFlutterAudioConfig = function() {
              var t4 = Ra(this.pn, this.an, {});
              return { bitrate: t4.audioBitrate, channel: t4.channelCount };
            }, t3.prototype.hy = function(t4, i3) {
              return this.setVoiceChangerPreset(t4, { volumeDucking: i3 });
            }, t3.screenShotReady = false, t3.isInstantiated = false, t3;
          }();
          window.addEventListener("message", function(t3) {
            "SS_PING" === t3.data.type && (Mf.screenShotReady = true);
          });
          var xf, jf = function() {
            return jf = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, jf.apply(this, arguments);
          }, qf = function() {
            function t3(t4, i3) {
              this.ly = t4, this.vy = i3;
            }
            return t3.prototype.start = function(t4, i3, n3, e3) {
              this.ly.playEffect(jf({ stream: this.vy, effectID: t4 }, i3 || {}), n3, e3);
            }, t3.prototype.stop = function(t4) {
              return this.ly.stopEffect(this.vy, t4);
            }, t3.prototype.pause = function(t4) {
              return this.ly.pauseEffect(this.vy, t4);
            }, t3.prototype.resume = function(t4) {
              return this.ly.resumeEffect(this.vy, t4);
            }, t3.prototype.setVolume = function(t4, i3, n3) {
              return this.ly.setEffectVolume(this.vy, i3, t4, n3);
            }, t3.prototype.getTotalDuration = function(t4) {
              return this.ly.getEffectDuration(t4);
            }, t3.prototype.getCurrentProgress = function(t4) {
              return this.ly.getEffectCurrentProgress(this.vy, t4);
            }, t3.prototype.seekTo = function(t4, i3) {
              return this.ly.seekAudioEffect(this.vy, t4, i3);
            }, t3;
          }(), Lf = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }(), Bf = function(t3) {
            function i3(i4, n3, e3) {
              var r3 = t3.call(this, i4, n3, 0, arguments[2]) || this;
              return r3.zegoWebRTC = new Mf(r3.logger, r3.dataReport, r3.reporter, r3.zegoWebRTM, 0, null == e3 ? void 0 : e3.scenario), r3;
            }
            return Lf(i3, t3), i3.prototype.setEngineConfig = function(t4) {
              this.zegoWebRTC.setEngineConfig(t4);
            }, i3.setEngineOptions = function(t4) {
              bs.setEngineOptions(t4), Mf.setEngineOptions(t4);
            }, i3.setGeoFence = function(t4, i4) {
              Mf.setGeoFence(t4, i4), bs.setGeoFence(t4, i4);
            }, i3.prototype.setRoomScenario = function(t4) {
              return this.zegoWebRTC.setRoomScenario(t4);
            }, i3.prototype.setSEIConfig = function(t4) {
              this.zegoWebRTC.setSEIConfig(t4);
            }, i3.use = function(t4) {
              bs.use(t4), Mf.use(t4);
            }, i3.prototype.checkSystemRequirements = function(t4, i4) {
              return void 0 === i4 && (i4 = 0), this.zegoWebRTC.checkSystemRequirements(i4, t4);
            }, i3.prototype.off = function(t4, i4) {
              return this.zegoWebRTM.stateCenter.listenerList[t4] ? this.zegoWebRTM.off(t4, i4) : !!this.zegoWebRTC.stateCenter.listenerList[t4] && this.zegoWebRTC.off(t4, i4);
            }, i3.prototype.on = function(t4, i4) {
              return this.zegoWebRTM.stateCenter.listenerList[t4] ? this.zegoWebRTM.on(t4, i4) : !!this.zegoWebRTC.stateCenter.listenerList[t4] && this.zegoWebRTC.on(t4, i4);
            }, i3.prototype.createStream = function(t4) {
              return this.zegoWebRTC.createStream(t4);
            }, i3.prototype.createZegoStream = function(t4) {
              return this.zegoWebRTC.createZegoStream(t4);
            }, i3.prototype.getPublishingStreamQuality = function(t4) {
              return this.zegoWebRTC.getPublishingStreamQuality(t4);
            }, i3.prototype.getElectronScreenSources = function() {
              return this.zegoWebRTC.getElectronScreenSources();
            }, i3.prototype.destroyStream = function(t4) {
              return this.zegoWebRTC.destroyStream(t4);
            }, i3.prototype.startPublishingStream = function(t4, i4, n3) {
              return this.zegoWebRTC.startPublishingStream(t4, i4, n3);
            }, i3.prototype.updatePublishingStream = function(t4, i4) {
              return this.zegoWebRTC.updatePublishingStream(t4, i4);
            }, i3.prototype.stopPublishingStream = function(t4) {
              return this.zegoWebRTC.stopPublishingStream(t4);
            }, i3.prototype.sendSEI = function(t4, i4) {
              return this.zegoWebRTC.sendSEI(t4, i4);
            }, i3.prototype.setVideoConfig = function(t4, i4) {
              return this.zegoWebRTC.setVideoConfig(t4, i4);
            }, i3.prototype.setAudioConfig = function(t4, i4) {
              return this.zegoWebRTC.setAudioConfig(t4, i4);
            }, i3.prototype.replaceTrack = function(t4, i4) {
              return this.zegoWebRTC.replaceTrack(t4, i4);
            }, i3.prototype.addTrack = function(t4, i4) {
              return this.zegoWebRTC.addTrack(t4, i4);
            }, i3.prototype.removeTrack = function(t4, i4) {
              return this.zegoWebRTC.removeTrack(t4, i4);
            }, i3.prototype.setCaptureVolume = function(t4, i4) {
              return this.zegoWebRTC.setCaptureVolume(t4, i4);
            }, i3.prototype.setDummyCaptureImagePath = function(t4, i4) {
              return this.zegoWebRTC.setDummyCaptureImagePath(t4, i4);
            }, i3.prototype.setStreamExtraInfo = function(t4, i4) {
              return this.zegoWebRTC.setStreamExtraInfo(t4, i4);
            }, i3.prototype.enableVideoCaptureDevice = function(t4, i4) {
              return this.zegoWebRTC.enableCameraCapturing(t4, i4);
            }, i3.prototype.addPublishCdnUrl = function(t4, i4) {
              return 3 === arguments.length ? this.zegoWebRTC.addPublishCdnUrl(arguments[0], arguments[2]) : this.zegoWebRTC.addPublishCdnUrl(t4, i4);
            }, i3.prototype.removePublishCdnUrl = function(t4, i4) {
              return 3 === arguments.length ? this.zegoWebRTC.removePublishCdnUrl(arguments[0], arguments[2]) : this.zegoWebRTC.removePublishCdnUrl(t4, i4);
            }, i3.prototype.mutePublishStreamVideo = function(t4, i4, n3) {
              return this.zegoWebRTC.mutePublishStreamVideo(t4, i4, n3);
            }, i3.prototype.mutePublishStreamAudio = function(t4, i4) {
              return this.zegoWebRTC.mutePublishStreamAudio(t4, i4);
            }, i3.prototype.setEffectsBeauty = function(t4, i4, n3) {
              return this.zegoWebRTC.setBeautyEffect(t4, i4, n3);
            }, i3.prototype.setLowlightEnhancement = function(t4, i4) {
              return this.zegoWebRTC.setLowlightEnhance(t4, i4);
            }, i3.prototype.enableDualStream = function(t4) {
              return this.zegoWebRTC.enableDualStream(t4);
            }, i3.prototype.setLowStreamParameter = function(t4, i4) {
              return this.zegoWebRTC.setLowStreamParameter(t4, i4);
            }, i3.prototype.enableHardwareEncoder = function(t4) {
              this.zegoWebRTC.enableVideoHardwareEncoder(t4);
            }, i3.prototype.enableAutoSwitchDevice = function(t4) {
              return this.zegoWebRTC.enableAutoSwitchDevice(t4);
            }, i3.prototype.initBackgroundModule = function(t4, i4) {
              return this.zegoWebRTC.initBackgroundModule(t4, i4);
            }, i3.prototype.setBackgroundBlurOptions = function(t4, i4) {
              return this.zegoWebRTC.setBackgroundBlurOptions(t4, i4);
            }, i3.prototype.setTransparentBackgroundOptions = function(t4) {
              return this.zegoWebRTC.setTransparentBackgroundOptions(t4);
            }, i3.prototype.setVirtualBackgroundOptions = function(t4, i4) {
              return this.zegoWebRTC.setVirtualBackgroundOptions(t4, i4);
            }, i3.prototype.enableBackgroundProcess = function(t4, i4, n3) {
              return this.zegoWebRTC.enableBackgroundProcess(t4, i4, n3);
            }, i3.prototype.setVoiceChangerPreset = function(t4, i4) {
              return this.zegoWebRTC.setVoiceChangerPreset(i4, { voiceChanger: t4 });
            }, i3.prototype.setVoiceChangerParam = function(t4, i4) {
              return this.zegoWebRTC.setVoiceChangerPreset(t4, { voiceParam: i4 });
            }, i3.prototype.setReverbPreset = function(t4, i4) {
              return this.zegoWebRTC.setVoiceChangerPreset(t4, { reverb: i4 });
            }, i3.prototype.enableVirtualStereo = function(t4, i4, n3) {
              return this.zegoWebRTC.setVoiceChangerPreset(t4, { stereo: { enable: i4, angle: n3 } });
            }, i3.prototype.enableLiveAudioEffect = function(t4, i4, n3) {
              return this.zegoWebRTC.enableLiveAudioEffect(t4, n3, { liveEffect: i4 });
            }, i3.prototype.setAudioChangerParam = function(t4, i4, n3) {
              return this.zegoWebRTC.enableLiveAudioEffect(t4, n3, { pitch: i4 });
            }, i3.prototype.enableAiDenoise = function(t4, i4) {
              return this.zegoWebRTC.enableAiDenoise(t4, i4);
            }, i3.prototype.setAiDenoiseMode = function(t4, i4) {
              return this.zegoWebRTC.setAiDenoiseMode(t4, i4);
            }, i3.prototype.startPlayingStream = function(t4, i4) {
              return this.zegoWebRTC.startPlayingStream(t4, i4);
            }, i3.prototype.setPlayStreamVideoType = function(t4, i4) {
              return this.zegoWebRTC.setPlayStreamVideoType(t4, i4);
            }, i3.prototype.stopPlayingStream = function(t4) {
              return this.zegoWebRTC.stopPlayingStream(t4);
            }, i3.prototype.mutePlayStreamVideo = function(t4, i4) {
              return this.zegoWebRTC.mutePlayStreamVideo(t4, i4);
            }, i3.prototype.mutePlayStreamAudio = function(t4, i4) {
              return this.zegoWebRTC.mutePlayStreamAudio(t4, i4);
            }, i3.prototype.setAudioFrameCallback = function(t4, i4, n3) {
              return this.zegoWebRTC.setAudioFrameCallback(t4, i4, n3);
            }, i3.prototype.setCaptureAudioFrameCallback = function(t4, i4, n3) {
              return this.zegoWebRTC.setAudioFrameCallback(t4, i4, n3);
            }, i3.prototype.getPlayingStreamQuality = function(t4) {
              return this.zegoWebRTC.getPlayingStreamQuality(t4);
            }, i3.prototype.createLocalStreamView = function(t4) {
              return this.zegoWebRTC.createLocalViewer(t4);
            }, i3.prototype.createRemoteStreamView = function(t4) {
              return this.zegoWebRTC.createRemoteViewer(t4);
            }, i3.prototype.startMixerTask = function(t4) {
              return this.zegoWebRTC.startMixerTask(t4);
            }, i3.prototype.stopMixerTask = function(t4) {
              return this.zegoWebRTC.stopMixerTask(t4);
            }, i3.prototype.setMixerTaskConfig = function(t4) {
              return this.zegoWebRTC.setMixerTaskConfig(t4);
            }, i3.prototype.startAutoMixerTask = function(t4) {
              return this.zegoWebRTC.startAutoMixerTask(t4);
            }, i3.prototype.stopAutoMixerTask = function(t4) {
              return this.zegoWebRTC.stopAutoMixerTask(t4);
            }, i3.prototype.startMixingAudio = function(t4, i4) {
              return this.zegoWebRTC.startMixingAudio(t4, i4);
            }, i3.prototype.stopMixingAudio = function(t4, i4) {
              return this.zegoWebRTC.stopMixingAudio(t4, i4);
            }, i3.prototype.setMixingAudioVolume = function(t4, i4, n3) {
              return this.zegoWebRTC.setMixingAudioVolume(t4, i4, n3);
            }, i3.prototype.createAudioEffectPlayer = function(t4) {
              if (t4 instanceof MediaStream || t4.getTracks)
                return new qf(this.zegoWebRTC, t4);
              throw Error("Param localStream is not instance of MediaStream or ZegoLocalStream.");
            }, i3.prototype.loadAudioEffect = function(t4, i4) {
              var n3 = this;
              return new Promise(function(e3, r3) {
                n3.zegoWebRTC.preloadEffect(t4, i4, function(i5) {
                  i5 && r3(i5), e3(t4);
                });
              });
            }, i3.prototype.unloadAudioEffect = function(t4) {
              return this.zegoWebRTC.unloadEffect(t4);
            }, i3.prototype.enumDevices = function() {
              return this.zegoWebRTC.enumDevices();
            }, i3.prototype.getCameras = function() {
              return this.zegoWebRTC.getCameras();
            }, i3.prototype.getMicrophones = function() {
              return this.zegoWebRTC.getMicrophones();
            }, i3.prototype.getSpeakers = function() {
              return this.zegoWebRTC.getSpeakers();
            }, i3.prototype.useVideoDevice = function(t4, i4) {
              return this.zegoWebRTC.useVideoDevice(t4, i4);
            }, i3.prototype.useAudioDevice = function(t4, i4) {
              return this.zegoWebRTC.useAudioDevice(t4, i4);
            }, i3.prototype.useAudioOutputDevice = function(t4, i4) {
              return this.zegoWebRTC.setAudioOutputDevice(t4, i4);
            }, i3.prototype.useFrontCamera = function(t4, i4) {
              return this.zegoWebRTC.useFrontCamera(t4, i4);
            }, i3.prototype.setSoundLevelDelegate = function(t4, i4, n3) {
              return this.zegoWebRTC.setSoundLevelDelegate(t4, i4, null == n3 ? void 0 : n3.enableInBackground);
            }, i3.prototype.isMicrophoneMuted = function() {
              return this.zegoWebRTC.isMicrophoneMuted();
            }, i3.prototype.muteMicrophone = function(t4) {
              return this.zegoWebRTC.muteMicrophone(t4);
            }, i3.prototype.createRangeAudioInstance = function() {
              return this.zegoWebRTC.createRangeAudioInstance();
            }, i3.prototype.createRealTimeSequentialDataManager = function(t4) {
              return this.zegoWebRTC.createRealTimeSequentialDataManager(t4);
            }, i3.prototype.destroyRealTimeSequentialDataManager = function(t4) {
              this.zegoWebRTC.destroyRealTimeSequentialDataManager(t4);
            }, i3.prototype.createCopyrightedMusic = function() {
              return this.zegoWebRTC.createCopyrightedMusic();
            }, i3.prototype.checkVideoTrackIsActive = function(t4) {
              return this.zegoWebRTC.checkVideoTrackIsActive(t4);
            }, i3.prototype.checkAudioTrackIsActive = function(t4) {
              return this.zegoWebRTC.checkAudioTrackIsActive(t4);
            }, i3.prototype.destroyCopyrightedMusic = function() {
              return this.zegoWebRTC.destroyCopyrightedMusic();
            }, i3.prototype.getNetworkTimeInfo = function() {
              var t4 = this.zegoWebRTC.RTM;
              return t4.setNetAgentHBMode("periodic"), t4.getNetworkInfo();
            }, i3.prototype.setStreamAlignmentProperty = function(t4, i4) {
              return this.zegoWebRTC.setStreamAlignmentProperty(t4, i4);
            }, i3.prototype.destroyEngine = function() {
              return this.zegoWebRTC.destroyEngine();
            }, i3.prototype.uploadLog = function() {
              return this.zegoWebRTC.uploadLog(true);
            }, i3.prototype.createStreamCompositor = function() {
              return this.zegoWebRTC.createStreamCompositor();
            }, i3.prototype.setTurnServer = function(t4) {
              this.zegoWebRTC.setTurnServer(t4);
            }, i3.prototype.muteAllPlayAudioStreams = function(t4) {
              return this.zegoWebRTC.muteAllPlayAudioStreams(t4);
            }, i3.prototype.muteAllPlayVideoStreams = function(t4) {
              return this.zegoWebRTC.muteAllPlayVideoStreams(t4);
            }, i3.prototype.callExperimentalAPI = function(t4) {
              return this.zegoWebRTC.callExperimentalAPI(t4);
            }, i3.version = "3.11.0", i3;
          }(bs), Uf = "zm.scc", Gf = "zm.sbcm", Jf = "zm.srlm", Ff = "zm.sbrm", Hf = "zm.schm", Vf = "zm.msg.sdr", Qf = "zm.msg.rlr", Yf = "zm.msg.rps", Kf = "zm.msg.srm", Zf = "zm.msg.scm", Xf = "zm.msg.schm", Wf = "zm.msg.sbm", $f = "zm.msg.bps", tl = "zm.sv.ps", il = { code: 1100001, msg: "input param error." }, nl = { code: 1100002, msg: "network timeout." }, el = { code: 1100003, msg: "socket close" }, rl = { code: 1000002, msg: "not login" }, sl = { code: 1009001, msg: "message content is empty" }, ol = { code: 1009002, msg: "content is too long" }, ul = { code: 1009005, msg: "inconsistent room id" }, al = { code: 1009010, msg: "failed to send message" }, cl = { code: 1009013, msg: "message is too long" }, hl = { code: 1002017, msg: "room extra info key exceed the limit" }, fl = { code: 1002098, msg: "room channel type error" }, ll = { code: 1002099, msg: "room inner error" }, dl = { code: 1102022, msg: "trans send frequently" }, vl = { code: 1009015, msg: "frequency limited." }, ml = function(t3) {
            return t3;
          }, pl = function(t3) {
            return t3;
          }, gl = function(t3) {
            return t3;
          }, bl = "/sdk/login", _l = { event: "/liveroom/send_big_room_message", room_sid_string: ml, error: { INPUT_PARAM: il, IM_MESSAGE_NULL: sl, IM_CONTENT_TOO_LONG: ol, IM_MESSAGE_TOO_LONG: cl, INCONSISTENT_ROOM_ID: ul, ROOM_NOT_EXIST: rl } }, yl = { event: "/liveroom/send_custom_command", room_sid_string: ml, request_id: pl, error: { INPUT_PARAM: il, IM_CONTENT_NULL: sl, IM_CONTENT_TOO_LONG: ol, INCONSISTENT_ROOM_ID: ul, ROOM_NOT_EXIST: rl } }, wl = { event: "/liveroom/send_room_message", room_id: pl, room_sid_string: pl, msg_content_size: gl, send_seq: gl, msg_id: gl, error: { INPUT_PARAM: il, IM_MESSAGE_NULL: sl, IM_MESSAGE_TOO_LONG: cl, ROOM_NOT_EXIST: rl, INCONSISTENT_ROOM_ID: ul } }, Sl = { event: "/liveroom/set_room_extrainfo", room_id: pl, room_sid_string: ml, key: pl, value: pl, error: { INPUT_PARAM: il, TRANS_FREQUENTLY: dl, ROOM_ROOMID_INCORRECT: q.ROOM_ROOMID_INCORRECT, KEY_EMPTY: { code: 1002014, msg: "room extra info key empty" }, KEY_TOO_LONG: { code: 1002015, msg: "room extra info key too long" }, VALUE_TOOL_LONG: { code: 1002016, msg: "room extra info value too long" } } }, El = "/liveroom/get_room_extrainfo", kl = ml, Ol = ml, Il = 1000001109, Rl = 1000001110, Tl = 10240;
          !function(t3) {
            t3[t3.I = 0] = "I", t3[t3.H = 10] = "H", t3[t3.M = 100] = "M", t3[t3.L = 1e3] = "L";
          }(xf || (xf = {}));
          var Cl = function() {
            return Cl = Object.assign || function(t3) {
              for (var i3, n3 = 1, e3 = arguments.length; n3 < e3; n3++)
                for (var r3 in i3 = arguments[n3])
                  Object.prototype.hasOwnProperty.call(i3, r3) && (t3[r3] = i3[r3]);
              return t3;
            }, Cl.apply(this, arguments);
          }, Al = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, zl = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          };
          var Dl = function() {
            function t3(t4, i3, n3, e3, r3, s3) {
              var o2 = this;
              this.an = t4, this.pn = i3, this._dataReport = n3, this.Jr = e3, this._rtm = r3, this.Ar = s3, this.my = 0, this.py = 500, this.gy = {}, this.by = 0, this._y = [], this.yy = null, this.wy = null, this.Gr = 0, this.Sy = 0, this.Ey = false, this.ky = {}, this.Oy = {}, this.Iy = {}, this.roomExtraInfo = {}, this.Ry = function(t5, i4) {
                void 0 === i4 && (i4 = false);
                var n4 = t5.map(function(t6) {
                  var i5 = { key: t6.trans_type, value: t6.trans_data ? t6.trans_data : "", updateUser: { userID: t6.id_name || t6.trans_idname, userName: t6.nick_name || t6.trans_nickname }, updateTime: Oe.A.isLong(t6.trans_send_time) ? t6.trans_send_time.toNumber() : t6.trans_send_time };
                  return o2.roomExtraInfo[t6.trans_type] = i5, i5;
                });
                i4 ? o2.an.warn(Yf + " id name same") : (n4.length > 0 && o2.pn.actionListener("roomExtraInfoUpdate", o2.Ar.roomID, Object.values(o2.roomExtraInfo)), t5.forEach(function(t6) {
                  o2.pn.actionListener("recvReliableMessage", t6.trans_type, t6.trans_seq, t6.trans_data);
                }));
              };
            }
            return Object.defineProperty(t3.prototype, "cr", { get: function() {
              return this.pn.reporter;
            }, enumerable: false, configurable: true }), t3.prototype.loginRsp = function(t4) {
              var i3, n3, e3 = this, r3 = t4.body, s3 = r3.ret_timestamp, o2 = r3.bigim_time_window, u2 = r3.trans_seqs;
              if (null != s3 && (0, B.QP)(s3)) {
                var a2 = parseFloat(s3);
                this.Gr = 0 == a2 ? 0 : +s3 - (/* @__PURE__ */ new Date()).getTime();
              }
              if (o2 && (0, B.kb)(o2) && (this.Sy = o2), u2)
                for (var c2 = 0; c2 < u2.length; c2++) {
                  var h2 = u2[c2].trans_channel, f2 = u2[c2].trans_seq_list || u2[c2].trans_seq_array;
                  (f2 = (f2 = f2.filter(function(t5) {
                    var i4 = t5.trans_type;
                    return !e3.Oy[i4] || e3.Oy[i4].seq < t5.trans_seq;
                  })).map(function(t5) {
                    return { trans_type: t5.trans_type, trans_local_seq: t5.trans_seq };
                  })).length > 0 && this.Ty(h2, f2);
                }
              (null === (i3 = t4.body) || void 0 === i3 ? void 0 : i3.user_trans_channel_list) && this.userTransMessageHandler(null === (n3 = t4.body) || void 0 === n3 ? void 0 : n3.user_trans_channel_list);
            }, t3.prototype.fetchUserTransMessage = function(t4, i3) {
              var n3 = this;
              this.an.info("zb.mh.futm.0 call");
              var e3 = function(t5) {
                n3.Cy(t5);
              };
              this.Jr.fetchUserTransInfo({ trans_channel: t4, fetch_array: i3 }, e3, e3, this.Ar), this.an.info("zb.mh.futm.0 call success");
            }, t3.prototype.userTransMessageHandler = function(t4) {
              var i3 = this;
              if (t4)
                for (var n3 = function(n4) {
                  var r4 = t4[n4].trans_channel, s3 = t4[n4].trans_seq_list;
                  s3 = s3.filter(function(t5) {
                    var n5 = t5.trans_type, e4 = t5.trans_seq;
                    return i3.Iy[r4] || (i3.Iy[r4] = {}), !i3.Iy[r4][n5] || i3.Iy[r4][n5].seq < e4;
                  }), s3.length > 0 && e3.fetchUserTransMessage(r4, s3);
                }, e3 = this, r3 = 0; r3 < t4.length; r3++)
                  n3(r3);
            }, t3.prototype.Cy = function(t4) {
              if (t4.body && 0 != t4.body.err_code)
                this.an.error("zb.mh.hfutr user trans send error " + t4.body.err_code);
              else if (t4.header && t4.body) {
                var i3 = t4.body.user_trans_list, n3 = t4.body.trans_channel, e3 = [];
                if (Array.isArray(i3) && i3.length > 0) {
                  for (var r3 = 0; r3 < i3.length; r3++) {
                    var s3 = i3[r3], o2 = s3.trans_type, u2 = s3.trans_seq;
                    this.Iy[n3] || (this.Iy[n3] = {}), !this.Iy[n3][o2] || this.Iy[n3][o2].seq < u2 ? (this.Iy[n3][o2] = { seq: u2 }, e3.push(s3)) : this.an.warn("zb.mh.hfutr fetch trans seq wrong"), this.an.info("zb.mh.hfutr trans " + o2 + " seq " + u2);
                  }
                  e3.length > 0 && this.pn.actionListener("_userTransUpdate", this.Ar.roomID, n3, e3), this.an.info("zb.mh.hfutr call success");
                }
              } else
                this.an.error("zb.mh.hfutr user trans send error " + JSON.stringify(t4));
            }, t3.prototype.sendReliableMessage = function(t4, i3, n3, e3) {
              var r3 = this;
              if (this.an.info(Vf + " call"), !this.Ar.isLogin())
                return this.an.error(Vf + " state error"), void (e3 && e3(rl));
              if (this.Ey)
                return this.an.error(Vf + " send too often"), void e3(Sl.error.TRANS_FREQUENTLY);
              this.Oy[t4] || (this.Oy[t4] = { seq: 0 });
              var s3 = { trans_type: t4, trans_data: i3, trans_local_seq: this.Oy[t4].seq, trans_channel: "clt" };
              this.Ey = true;
              this.Jr.sendReliableMessage(s3, function(e4) {
                r3.Oy[t4].seq = e4.body.trans_seq, r3.an.info(Vf + " trans " + t4 + " seq " + e4.body.trans_seq), r3.Ey = false, r3.roomExtraInfo[t4] = { key: t4, value: i3, updateUser: { userID: r3.Ar.userID, userName: r3.Ar.userName }, updateTime: Date.now() }, n3({ seq: e4.header.seq, errorCode: 0 });
              }, function(t5) {
                var i4 = ll;
                r3.an.error(Vf + " fail " + JSON.stringify(t5)), t5.body && t5.body.err_code ? (i4 = r3._rtm.getServerError(t5.body.err_code, t5.body.err_message), r3.an.error(Vf + "  " + i4.msg)) : i4 = t5, r3.Ey = false, e3(i4);
              }, this.Ar);
            }, t3.prototype.Ty = function(t4, i3) {
              var n3 = this, e3 = { trans_channel: t4, fetch_array: i3 }, r3 = this.cr.createSpan(xf.H, { key: bl, par: this.Ar.roomID }, { key: "" }, El);
              r3.setAttributes({ fetch_array: kl(i3) });
              var s3 = function(t5) {
                n3.Ay(t5, r3);
              };
              this.Jr.fetchReliableMessage(e3, s3, s3, this.Ar), this.an.info("zm.msg.frm call success");
            }, t3.prototype.Ay = function(t4, i3) {
              if (t4.body && 0 != t4.body.err_code)
                return this.an.error(Qf + " trans send error " + t4.body.err_code), void this.pn.reporter.setError(i3, { code: t4.body.err_code });
              if (!t4.header || !t4.body)
                return this.an.error(Qf + " trans send error " + t4), void this.pn.reporter.setError(i3, nl);
              var n3 = t4.body.trans_list || t4.body.trans_fetch_results, e3 = [], r3 = [];
              if (Array.isArray(n3) && n3.length > 0) {
                for (var s3 = 0; s3 < n3.length; s3++) {
                  var o2 = n3[s3];
                  if (o2.err_code !== Il) {
                    var u2 = o2.trans_type, a2 = o2.trans_seq;
                    r3.push({ trans_type: u2, trans_seq: a2 }), o2.err_code !== Rl ? !this.Oy[u2] || this.Oy[u2].seq < a2 ? (this.Oy[u2] = { seq: a2 }, e3.push(o2)) : this.an.warn(Qf + " fetch trans seq wrong") : (this.an.warn(Qf + " fetch trans seq is wrong " + o2.err_code), this.Oy[u2] = { seq: a2 });
                  } else
                    this.an.warn(Qf + " fetch trans unknown type " + o2.err_code);
                }
                this.roomExtraInfo = {}, e3.length > 0 && this.Ry(e3);
              }
              i3.setAttributes({ result_array: Ol(r3) }), i3.end();
            }, t3.prototype.handlePushTransMsg = function(t4) {
              var i3, n3, e3 = t4.body.trans_type, r3 = t4.body.trans_seq;
              !this.Oy[e3] || this.Oy[e3].seq < r3 ? (this.Oy[e3] = { seq: r3 }, this.Ry([t4.body], (null === (i3 = null == t4 ? void 0 : t4.body) || void 0 === i3 ? void 0 : i3.trans_idname) === this.pn.idName || (null === (n3 = null == t4 ? void 0 : t4.body) || void 0 === n3 ? void 0 : n3.id_name) === this.pn.idName)) : this.an.warn(Yf + " trans seq wrong"), this.an.info(Yf + " trans " + e3 + " seq " + r3);
            }, t3.prototype.handlePushUserTransMsg = function(t4) {
              this.an.info("zb.mh.hputr.0 call");
              var i3 = t4.body.trans_seq_list, n3 = t4.body.trans_channel, e3 = [];
              if (n3 && Array.isArray(i3) && i3.length > 0) {
                for (var r3 = 0; r3 < i3.length; r3++) {
                  var s3 = i3[r3].trans_type, o2 = i3[r3].trans_seq;
                  this.Iy[n3] || (this.Iy[n3] = {}), (!this.Iy[n3][s3] || this.Iy[n3][s3].seq < o2) && (this.Iy[n3][s3] = { seq: o2 }, e3.push(i3[r3]));
                }
                e3.length > 0 ? this.pn.actionListener("_userTransUpdate", this.Ar.roomID, n3, e3) : this.an.warn("zb.mh.hputr.0 no fetch user trans");
              } else
                this.an.warn("zb.mh.hputr.0 no push user trans");
            }, t3.prototype.sendRoomMsg = function(t4, i3, n3, e3, r3, s3) {
              var o2, u2 = this;
              if (!this.Ar.isLogin())
                return this.an.error(Kf + " state error"), s3(rl), false;
              var a2 = Date.parse(/* @__PURE__ */ new Date() + "");
              if (this.my > 0 && this.my + this.py > a2)
                return this.an.info(Kf + " freq error"), s3 && s3(vl, 0, t4, e3), false;
              this.my = a2;
              var c2 = this.Jr.sendRoomMsg({ msg_category: t4, msg_type: 1, msg_priority: 1, msg_content: e3 }, function(t5) {
                r3({ seq: t5.header.seq, errorCode: 0, messageID: t5.body.msg_id });
              }, function(t5) {
                var i4, n4, e4, r4 = ll;
                if (!t5.header || !t5.body)
                  return t5.code && t5.msg && (r4 = t5), void s3({ seq: 0, errorCode: r4.code, messageID: 0 });
                e4 = (i4 = [u2._rtm.getServerError(t5.body.err_code, null === (n4 = t5.body) || void 0 === n4 ? void 0 : n4.err_message), t5.body.msg_id])[1], u2.an.error(Kf + " " + (r4 = i4[0]).msg), r4 == nl && (r4 = al), s3({ seq: t5.header.seq, errorCode: r4.code, messageID: e4, message: r4.msg });
              }, this.Ar);
              return this.cr.spanSetAttributes({ key: wl.event, par: null === (o2 = this.Ar) || void 0 === o2 ? void 0 : o2.roomID }, { send_seq: wl.send_seq(c2) }), this.an.info(Kf + "  call success"), true;
            }, t3.prototype.handlePushRoomMsg = function(t4) {
              var i3 = [], n3 = t4.body.msg_list;
              t4.body.msg_list.forEach(function(t5) {
                var n4 = { fromUser: { userID: t5.id_name, userName: t5.nick_name }, message: t5.msg_content, sendTime: t5.send_time.toNumber(), messageID: t5.msg_id.toNumber() };
                i3.push(n4);
              }), t4.body.server_msg_id = t4.body.server_msg_id.toNumber(), t4.body.ret_msg_id = t4.body.ret_msg_id.toNumber(), this.pn.actionListener("IMRecvBroadcastMessage", this.Ar.roomID, i3), this.pn.actionListener("_recvRoomMsg", n3, t4.body.server_msg_id, t4.body.ret_msg_id);
            }, t3.prototype.sendCustomCommand = function(t4, i3, n3, e3) {
              var r3, s3 = this;
              if (!this.Ar.isLogin())
                return this.an.error(Zf + " state error"), e3(rl), false;
              var o2 = { from_userid: this.pn.idName, from_username: this.pn.nickName, request_id: this.pn.getRequestId(), custom_content: i3 || "", room_id: this.Ar.roomID };
              this.cr.spanSetAttributes({ key: yl.event, par: null === (r3 = this.Ar) || void 0 === r3 ? void 0 : r3.roomID }, { request_id: yl.request_id(o2.request_id) });
              var u2 = { dest_id_name: t4, custom_msg: JSON.stringify(o2) };
              return this.Jr.sendCustomCommand(u2, function(t5) {
                n3({ seq: t5.header.seq, errorCode: 0 });
              }, function(t5) {
                var i4, n4, r4, o3, u3, a2 = ll;
                a2 = t5.body && t5.body.err_code ? s3._rtm.getServerError(t5.body.err_code, null === (i4 = t5.body) || void 0 === i4 ? void 0 : i4.err_message) : t5, s3.an.error(Zf + " " + a2.msg), u3 = 2 === (null === (n4 = t5.body) || void 0 === n4 ? void 0 : n4.err_code) || 1000000002 === (null === (r4 = t5.body) || void 0 === r4 ? void 0 : r4.err_code) ? il : a2 == nl ? al : a2, e3({ seq: (null === (o3 = t5.header) || void 0 === o3 ? void 0 : o3.seq) || -1, errorCode: u3.code, code: u3.code, message: u3.msg });
              }, this.Ar), this.an.info(Zf + " call success"), true;
            }, t3.prototype.handlePushChannelMsg = function(t4) {
              var i3 = t4.body;
              if (0 === i3.channel_type) {
                this.pn.actionListener("_experimentalAPICallback", { method: "onRecvRoomChannelMessage", content: { roomID: this.Ar.roomID, sendIDName: i3.sender_idname, sendNickName: i3.sender_nickname, msgType: i3.msg_type, msgContent: i3.msg_content } });
              }
            }, t3.prototype.handlePushTransparentMsg = function(t4) {
              var i3 = t4.body, n3 = i3.sender_idname, e3 = i3.sender_nickname, r3 = i3.client_seq, s3 = i3.msg_data, o2 = this.ky[n3], u2 = false;
              o2 && r3 ? Oe.A.isLong(r3) && Oe.A.isLong(o2) && r3.gt(o2) && (u2 = true) : u2 = true, this.ky[n3] = r3, u2 && this.pn.actionListener("recvRoomTransparentMessage", this.Ar.roomID, { sendUser: { userID: n3, userName: e3 }, content: s3 });
            }, t3.prototype.handlePushCustomMsg = function(t4) {
              var i3 = JSON.parse(t4.body.custommsg), n3 = [i3.from_userid, i3.from_username, i3.room_id, i3.custom_content];
              this.pn.actionListener("IMRecvCustomCommand", n3[2], { userID: n3[0], userName: n3[1] }, n3[3]);
            }, t3.prototype.sendRoomChannelMessage = function(t4, i3, n3, e3, r3, s3) {
              var o2 = this;
              if (!this.Ar.isLogin())
                return this.an.error(Xf + " state error"), s3(rl), false;
              return this.Jr.sendRoomChannelMessage({ channelType: t4, msgType: i3, msgContent: n3, toUserIDList: e3 }, this.Ar.roomID, function(t5) {
                r3({ seq: t5.header.seq, errorCode: 0 });
              }, function(t5) {
                var i4 = { code: 0, msg: "" };
                t5.body ? (i4.code = t5.body.err_code || 0, i4.msg = t5.body.err_message || "") : i4 = t5, o2.an.error(Xf + " err:" + JSON.stringify(i4)), [2].includes(i4.code) ? i4.code = il.code : [3].includes(i4.code) ? i4.code = ol.code : i4 = i4.code == nl.code ? Cl({}, al) : i4.code == el.code ? Cl({}, el) : { code: ll.code, msg: "liveroom error ".concat(i4.code, " ").concat(i4.msg) }, s3(i4);
              }), this.an.info(Xf + " call success"), true;
            }, t3.prototype.sendTransparentMessage = function(t4, i3, n3, e3, r3, s3, o2) {
              var u2, a2, c2 = this, h2 = "zm.msg.stpm";
              if (!this.Ar.isLogin())
                return this.an.error(h2 + " state error"), void o2(rl);
              0 === i3 ? a2 = 0 : a2 = (null === (u2 = this.pn.rtm) || void 0 === u2 ? void 0 : u2.getNetworkInfo().timestamp) || Date.now();
              var f2 = { msg_type: t4, msg_data: n3, to_user_list: e3.map(function(t5) {
                return _e(t5.userID);
              }), client_seq: Oe.A.fromInt(a2) };
              this.Jr.sendTransparentMessage(f2, this.Ar.roomID, r3 || 10, function(t5) {
                s3({ seq: t5.header.seq, errorCode: 0 });
              }, function(t5) {
                var i4 = c2.zy(t5, h2);
                o2(i4);
              }), this.an.info(h2 + " call success");
            }, t3.prototype.sendBigRoomMessage = function(t4, i3, n3, e3, r3, s3) {
              var o2 = this;
              if (!this.Ar.isLogin())
                return this.an.error(Wf + " state error"), void (s3 && s3(rl));
              var u2 = this.Sy, a2 = this.Gr, c2 = (/* @__PURE__ */ new Date()).getTime() + a2, h2 = this._rtm.getSeq().toString();
              if (this.gy[h2] = { success: r3, error: s3 }, 0 == u2) {
                this.sendBigRoomMessageInternal([{ msg_category: t4, msg_type: 1, msg_content: e3, bigmsg_client_id: h2 }], function(t5) {
                  o2.handleBigImMsgRsp(t5);
                }, function(t5) {
                  s3 && s3(t5);
                });
              } else {
                var f2 = Math.floor(c2 / u2);
                if (this.by < f2 && 0 == this._y.length)
                  this.by = f2, this.sendBigRoomMessageInternal([{ msg_category: t4, msg_type: 1, msg_content: e3, bigmsg_client_id: h2 }], function(t5) {
                    o2.handleBigImMsgRsp(t5);
                  }, function(t5) {
                    s3 && s3(t5);
                  });
                else
                  this._y.push({ msg_category: t4, msg_type: 1, msg_content: e3, bigmsg_client_id: h2 }), 1 == this._y.length && this.setBigImTimer(a2, u2);
              }
            }, t3.prototype.sendBigRoomMessageInternal = function(t4, i3, n3) {
              this.Jr.sendBigRoomMessage({ msgs: t4 }, function(t5) {
                i3(t5);
              }, function(t5) {
                var i4, e3, r3;
                t5.header && t5.body ? r3 = t5.body ? { code: null === (i4 = t5.body) || void 0 === i4 ? void 0 : i4.err_code, msg: null === (e3 = t5.body) || void 0 === e3 ? void 0 : e3.err_message } : ll : (t5.code && t5.msg && (r3 = t5), n3(r3)), n3(r3);
              }, this.Ar), this.an.info(Wf + " sendBigRoomMessage called");
            }, t3.prototype.handleBigImMsgRsp = function(t4) {
              this.Sy = t4.body.bigim_time_window;
              for (var i3 = t4.body.msg_list || t4.body.msgs, n3 = 0; n3 < i3.length; n3++) {
                var e3 = i3[n3].msg_client_id || i3[n3].bigmsg_client_id;
                if (this.gy[e3]) {
                  var r3 = this.gy[e3].success;
                  null != r3 && r3({ seq: t4.header.seq, errorCode: 0, messageID: i3[n3].msg_id || i3[n3].bigmsg_id }), delete this.gy[e3];
                }
              }
            }, t3.prototype.setBigImTimer = function(t4, i3) {
              var n3 = this, e3 = (/* @__PURE__ */ new Date()).getTime() + t4, r3 = i3 - e3 % i3, s3 = function(t5) {
                n3.yy = setTimeout(function() {
                  n3.onBigImTimer();
                }, t5);
              };
              (function(t5) {
                return Al(this, void 0, void 0, function() {
                  var i4;
                  return zl(this, function(n4) {
                    switch (n4.label) {
                      case 0:
                        return [4, (0, G.UY)()];
                      case 1:
                        return i4 = n4.sent(), [2, parseInt(i4 * (t5 + 1) + "", 10)];
                    }
                  });
                });
              })(i3).then(function(t5) {
                s3(t5 + r3);
              }).catch(function(t5) {
                s3(0.5 * i3 + r3);
              });
            }, t3.prototype.onBigImTimer = function() {
              var t4 = this, i3 = (/* @__PURE__ */ new Date()).getTime() + this.Gr;
              this.by = Math.floor(i3 / this.Sy);
              for (var n3 = [], e3 = [], r3 = 0; r3 < this._y.length && !(r3 >= 20); r3++) {
                var s3 = this._y[r3];
                n3.push({ msg_category: s3.msg_category, msg_type: s3.msg_type, msg_content: s3.msg_content, bigmsg_client_id: s3.bigmsg_client_id }), e3.push(s3.bigmsg_client_id);
              }
              this._y.length > 20 ? this._y.splice(0, 20) : this._y = [], this.sendBigRoomMessageInternal(n3, function(i4) {
                t4.handleBigImMsgRsp(i4);
              }, function(i4, n4) {
                for (var r4 = 0; r4 < e3.length; r4++) {
                  var s4 = e3[r4], o2 = t4.gy[s4];
                  o2 && (null != o2.error && o2.error(i4, n4), delete t4.gy[s4]);
                }
              }), this.yy && clearTimeout(this.yy), this.yy = null, this._y.length > 0 && this.setBigImTimer(this.Gr, this.Sy);
            }, t3.prototype.handlePushMergeMsg = function(t4) {
              for (var i3 = t4.body.message_list || t4.body.messages, n3 = 0; n3 < i3.length; n3++)
                14001 === i3[n3].sub_cmd && this.handlePushBigRooMsg(i3[n3].msg_body);
            }, t3.prototype.handlePushBigRooMsg = function(t4) {
              var i3;
              if ((0, B.QP)(t4))
                try {
                  i3 = JSON.parse(t4);
                } catch (t5) {
                  return void this.an.warn($f + "parse json error");
                }
              else
                i3 = t4;
              if (i3) {
                for (var n3 = i3.room_id || this.Ar.roomID, e3 = [], r3 = i3.msg_list || i3.msg_data, s3 = 0; s3 < r3.length; s3++) {
                  var o2 = r3[s3];
                  o2.id_name != this.pn.idName ? e3.push({ idName: o2.id_name, nickName: o2.nick_name, messageId: o2.msg_id || o2.bigmsg_id, category: o2.msg_category, type: o2.msg_type, content: o2.msg_content, time: o2.send_time || Oe.A.isLong(o2.msg_timestamp) && o2.msg_timestamp.toNumber() }) : this.an.info($f + " self message");
                }
                0 == e3.length ? this.an.info($f + " no other pushData except self") : this.onRecvBigRoomMessage(e3, n3), this.an.info($f + "call success");
              } else
                this.an.warn($f + " cann't find message body");
            }, t3.prototype.onRecvBigRoomMessage = function(t4, i3) {
              var n3 = [];
              t4.forEach(function(t5) {
                n3.push({ fromUser: { userID: t5.idName, userName: t5.nickName }, message: t5.content, sendTime: t5.time, messageID: t5.messageId });
              }), this.pn.actionListener("IMRecvBarrageMessage", i3, n3), this.pn.actionListener("_recvBigRoomMessage", t4, i3);
            }, t3.prototype.resetMessageInfo = function() {
              this.Oy = {}, this.wy && (clearTimeout(this.wy), this.wy = null), this.by = 0, this._y = [], this.gy = {}, this.yy && (clearTimeout(this.yy), this.yy = null), this.Gr = 0, this.Sy = 0;
            }, t3.prototype.zy = function(t4, i3) {
              var n3 = ll;
              return n3 = t4.body && t4.body.err_code ? $(t4.body.err_code, t4.body.err_message) : t4, this.an.error(i3 + " err:" + (0, G.iq)(n3)), [2].includes(n3.code) ? n3.code = il.code : [3].includes(n3.code) ? n3.code = ol.code : n3 = n3.code == nl.code ? Cl({}, al) : n3.code == el.code ? Cl({}, el) : { code: ll.code, msg: "liveroom error ".concat(n3.code, " ").concat(n3.msg) }, n3;
            }, t3.prototype.deleteTransparentUser = function(t4) {
              delete this.ky[t4];
            }, t3;
          }();
          function Nl(t3, i3, n3, e3) {
            return { interResolve: function(n4) {
              i3(n4), t3.end();
            }, interReject: function(i4, r3) {
              void 0 === r3 && (r3 = "");
              var s3 = i4.errorCode || i4.code, o2 = i4.message || i4.msg || "" + r3, u2 = s3;
              if (s3 < 1e6) {
                t3.setAttributes({ server_code: s3 });
                var a2 = void 0;
                e3 && e3[s3] ? s3 = (a2 = e3[s3]).code : (a2 = it(s3, i4.msg || ""), s3 = ll.code), u2 = a2.code;
              }
              t3.setAttributes({ error: u2, message: o2 }), t3.end(), n3({ errorCode: s3 });
            } };
          }
          function Pl(t3, i3, n3, e3) {
            var r3 = this;
            return void 0 === n3 && (n3 = 1), void 0 === e3 && (e3 = 1), new Promise(function(s3, o2) {
              var u2 = r3.getMsgSpan(wl.event, t3, true), a2 = Nl(u2, function(t4) {
                u2.setAttributes({ msg_id: wl.msg_id(t4.messageID) }), s3(t4);
              }, o2, { 3: cl }), c2 = a2.interResolve, h2 = a2.interReject;
              if (!(0, B.QP)(t3))
                return r3.logger.error(Gf + " roomid must be string"), void h2(wl.error.INPUT_PARAM, " param roomID error");
              if (!(0, B.QP)(i3))
                return r3.logger.error(Gf + " message must be string"), void h2(wl.error.INPUT_PARAM, " param message error");
              if (0 === i3.length)
                return r3.logger.error(Gf + " message is empty"), void h2(wl.error.IM_MESSAGE_NULL);
              if (we(i3) > Tl)
                return r3.logger.error(Gf + " message is too long"), void h2(wl.error.IM_MESSAGE_TOO_LONG);
              var f2 = r3.getRoomModules(t3);
              if (u2.setAttributes({ msg_content: i3 }), !f2)
                return r3.logger.error(Gf + " room not exist, roomID: " + t3), void h2(r3.isDisConnect() ? wl.error.ROOM_NOT_EXIST : wl.error.INCONSISTENT_ROOM_ID);
              f2.messageHandler.sendRoomMsg(n3, e3, t3, i3, function(t4) {
                t4.messageID && u2.setAttributes({ msg_id: t4.messageID }), c2(t4);
              }, h2);
            });
          }
          function Ml(t3, i3, n3) {
            var e3 = this;
            return new Promise(function(r3, s3) {
              var o2 = e3.getMsgSpan(yl.event, t3, true), u2 = Nl(o2, r3, s3, { 3: ol }), a2 = u2.interResolve, c2 = u2.interReject;
              if (!(0, B.QP)(t3))
                return e3.logger.error(Uf + " roomID must be string"), void c2(yl.error.INCONSISTENT_ROOM_ID, " roomID must be string");
              if (!(0, B.C9)(n3) || n3.find(function(t4) {
                return !(0, B.QP)(t4);
              }))
                return e3.logger.error(Uf + " toUserIDList must be string array"), void c2(yl.error.INPUT_PARAM, " param toUserList error");
              if (!(0, B.QP)(i3) && !(0, B.w)(i3))
                return e3.logger.error(Uf + " command must be a string or object"), void c2(yl.error.IM_CONTENT_NULL, " command type error");
              var h2 = e3.getRoomModules(t3), f2 = (0, B.QP)(i3) ? i3 : JSON.stringify(i3);
              return we(f2) > Tl ? (e3.logger.error(Uf + " command too long"), void c2(yl.error.IM_CONTENT_TOO_LONG)) : 0 === f2.length ? (e3.logger.error(Uf + " command empty"), void c2(yl.error.IM_CONTENT_NULL)) : (o2.setAttributes({ msg_content: f2 }), h2 ? void h2.messageHandler.sendCustomCommand(n3, i3, a2, c2) : (e3.logger.error(Uf + " room not exist, roomID: " + t3), void c2(e3.isDisConnect() ? yl.error.ROOM_NOT_EXIST : yl.error.INCONSISTENT_ROOM_ID)));
            });
          }
          function xl(t3, i3, n3, e3) {
            var r3 = this;
            return void 0 === n3 && (n3 = 1), void 0 === e3 && (e3 = 1), new Promise(function(s3, o2) {
              var u2 = r3.getMsgSpan(_l.event, t3), a2 = Nl(u2, s3, o2, { 3: ol }), c2 = a2.interResolve, h2 = a2.interReject;
              if (!(0, B.QP)(t3))
                return r3.logger.error(Ff + " roomid must be string"), void h2(_l.error.ROOM_NOT_EXIST, " param roomID error");
              if (!(0, B.QP)(i3))
                return r3.logger.error(Ff + " message must be string"), void h2(_l.error.IM_MESSAGE_NULL);
              if (0 === i3.length)
                r3.logger.error(Ff + " message is empty"), h2(_l.error.IM_MESSAGE_NULL);
              else if (we(i3) > Tl)
                return r3.logger.error(Ff + " message is too long"), void h2(r3.stateCenter.isFlutter ? _l.error.IM_CONTENT_TOO_LONG : _l.error.IM_MESSAGE_TOO_LONG);
              u2.setAttributes({ msg_content: i3 });
              var f2 = r3.getRoomModules(t3);
              if (!f2)
                return r3.logger.error(Ff + " room not exist, roomID: " + t3), void h2(r3.isDisConnect() ? _l.error.ROOM_NOT_EXIST : _l.error.INCONSISTENT_ROOM_ID);
              f2.messageHandler.sendBigRoomMessage(n3, e3, t3, i3, c2, h2);
            });
          }
          function jl(t3, i3, n3) {
            var e3 = this;
            return new Promise(function(r3, s3) {
              var o2 = e3.getMsgSpan(Sl.event, t3), u2 = Nl(o2, r3, s3, { 1015: hl }), a2 = u2.interResolve, c2 = u2.interReject;
              if (!(0, B.QP)(t3))
                return e3.logger.error(Gf + " roomid must be string"), void c2(Sl.error.ROOM_ROOMID_INCORRECT, " roomID must be string");
              if (0 === t3.length)
                return e3.logger.error(Gf + " roomid is empty"), void c2(Sl.error.ROOM_ROOMID_INCORRECT, " roomid is empty");
              if (!(0, B.QP)(i3))
                return e3.logger.error(Jf + " key must be string"), void c2(Sl.error.KEY_EMPTY, " key must be string");
              if (0 === i3.length)
                return e3.logger.error(Jf + " key is empty"), void c2(Sl.error.KEY_EMPTY);
              if (i3.length > 128)
                return e3.logger.error(Jf + " key is too long"), void c2(Sl.error.KEY_TOO_LONG);
              if (!(0, B.QP)(n3))
                return e3.logger.error(Jf + " value must be string"), void c2(Sl.error.INPUT_PARAM, " value must be string");
              if (n3.length > 4096)
                return e3.logger.error(Jf + " value is too long"), void c2(Sl.error.VALUE_TOOL_LONG);
              o2.setAttributes({ key: Sl.key(i3), value: Sl.value(n3) });
              var h2 = e3.getRoomModules(t3);
              if (!h2)
                return e3.logger.error(Jf + " room not exist, roomID: " + t3), void c2(Sl.error.ROOM_ROOMID_INCORRECT);
              h2.messageHandler.sendReliableMessage(i3, n3, a2, c2);
            });
          }
          var ql = { _sendBroadcastMessage: Pl, sendBroadcastMessage: function(t3, i3) {
            var n3 = this;
            return new Promise(function(e3, r3) {
              Pl.call(n3, t3, i3).then(function(t4) {
                e3({ errorCode: t4.errorCode, messageID: t4.messageID, extendedData: t4.extendedData });
              }).catch(function(t4) {
                r3(t4);
              });
            });
          }, _sendCustomCommand: Ml, sendCustomCommand: function(t3, i3, n3) {
            var e3 = this;
            return new Promise(function(r3, s3) {
              Ml.call(e3, t3, i3, n3).then(function(t4) {
                r3({ errorCode: t4.errorCode, extendedData: t4.extendedData });
              }).catch(function(t4) {
                s3(t4);
              });
            });
          }, _sendBarrageMessage: xl, sendBarrageMessage: function(t3, i3) {
            var n3 = this;
            return new Promise(function(e3, r3) {
              xl.call(n3, t3, i3).then(function(t4) {
                e3({ errorCode: t4.errorCode, messageID: t4.messageID, extendedData: t4.extendedData });
              }).catch(function(t4) {
                r3(t4);
              });
            });
          }, _setRoomExtraInfo: jl, setRoomExtraInfo: function(t3, i3, n3) {
            return jl.call(this, t3, i3, n3);
          }, sendRoomChannelMessage: function(t3, i3, n3, e3, r3) {
            var s3 = this;
            return new Promise(function(o2, u2) {
              var a2 = function(t4, i4) {
                void 0 === i4 && (i4 = ""), i4 && s3.logger.error(Hf + i4), u2({ errorCode: t4.code, extendedData: t4.msg + i4 });
              };
              if (0 === i3)
                if ((0, B.QP)(t3))
                  if ((0, G.zQ)(n3))
                    if ((0, B.C9)(r3) && !r3.find(function(t4) {
                      return !(0, B.QP)(t4);
                    }))
                      if ((0, B.QP)(e3))
                        if (we(e3) > Tl)
                          a2(ol, " msgContent too long");
                        else if (0 !== e3.length) {
                          var c2 = s3.getRoomModules(t3);
                          if (!c2)
                            return s3.logger.error(Hf + " room not exist, roomID: " + t3), void a2(s3.isDisConnect() ? yl.error.ROOM_NOT_EXIST : yl.error.INCONSISTENT_ROOM_ID);
                          c2.messageHandler.sendRoomChannelMessage(i3, n3, e3, r3, function() {
                            o2({ errorCode: 0, extendedData: "" });
                          }, a2);
                        } else
                          a2(il, " msgContent empty");
                      else
                        a2(il, " msgContent must be a string");
                    else
                      a2(il, " toUserIDList must be string array");
                  else
                    a2(il, " msgType must be integer number");
                else
                  a2(il, " roomID must be string");
              else
                a2(fl);
            });
          }, sendTransparentMessage: function(t3, i3) {
            var n3 = this;
            return new Promise(function(e3, r3) {
              var s3 = "zm.stpm", o2 = function(t4, i4) {
                void 0 === i4 && (i4 = ""), i4 && n3.logger.error(s3 + " " + i4), r3({ errorCode: t4.code, extendedData: t4.msg + i4 });
              };
              if (!(0, B.QP)(t3) || t3.length > 127 || !(0, G.jy)(t3))
                o2(ul);
              else if ((0, B.w)(i3)) {
                var u2 = i3.sendMode, a2 = i3.sendType, c2 = i3.content, h2 = i3.recvUserList, f2 = i3.timeOut;
                if ([0, 1, 2].includes(u2))
                  if ([0, 1].includes(a2))
                    if (c2)
                      if ((0, B.G0)(c2))
                        if (c2.byteLength)
                          if (c2.byteLength > 4096)
                            o2(ol);
                          else if ((0, B.C9)(h2) && !h2.find(function(t4) {
                            return !(0, B.QP)(t4.userID);
                          }))
                            if ((0, B.TE)(f2) || (0, G.zQ)(f2)) {
                              var l2 = n3.getRoomModules(t3);
                              if (!l2)
                                return n3.logger.error(s3 + " room not exist, roomID: " + t3), void o2(n3.isDisConnect() ? rl : ul);
                              l2.messageHandler.sendTransparentMessage(u2, a2, c2, h2, f2, function() {
                                e3({ errorCode: 0, extendedData: "" });
                              }, o2);
                            } else
                              o2(il, "message content type error");
                          else
                            o2(il, "recvUserList must be ZegoUser Array");
                        else
                          o2(sl);
                      else
                        o2(il, "message content type error");
                    else
                      o2(sl);
                  else
                    o2(il, "message sendType error");
                else
                  o2(il, "message sendMode error");
              } else
                o2(il, "message must be object");
            });
          } };
          var Ll = { handlePushRoomMsg: function(t3) {
            var i3 = this.handlePushMsg(t3);
            i3[0].messageHandler.handlePushRoomMsg(i3[1]);
          }, handlePushCustomMsg: function(t3) {
            var i3 = this.handlePushMsg(t3);
            i3[0].messageHandler.handlePushCustomMsg(i3[1]);
          }, handlePushMergeMsg: function(t3) {
            var i3, n3 = null === (i3 = null == t3 ? void 0 : t3.header) || void 0 === i3 ? void 0 : i3.room_id, e3 = this.rtm.getRoomModules(n3);
            e3 ? e3.messageHandler.handlePushMergeMsg(t3) : this.logger.error(tl + " room no found ignore " + JSON.stringify(t3));
          }, handlePushTransMsg: function(t3) {
            var i3 = this.handlePushMsg(t3);
            i3[0].messageHandler.handlePushTransMsg(i3[1]);
          }, handlePushUserTransMsg: function(t3) {
            var i3 = this.handlePushMsg(t3);
            i3[0].messageHandler.handlePushUserTransMsg(i3[1]);
          }, handleBigImMsgRsp: function(t3) {
            var i3, n3 = null === (i3 = null == t3 ? void 0 : t3.header) || void 0 === i3 ? void 0 : i3.room_id, e3 = this.rtm.getRoomModules(n3);
            e3 ? e3.messageHandler.handleBigImMsgRsp(t3) : this.logger.error(tl + " room no found ignore " + JSON.stringify(t3));
          }, handlePushMsg: function(t3) {
            var i3, n3 = null === (i3 = null == t3 ? void 0 : t3.header) || void 0 === i3 ? void 0 : i3.room_id, e3 = this.rtm.getRoomModules(n3);
            if (e3)
              return [e3, t3];
            this.logger.error(tl + " room no found ignore " + JSON.stringify(t3));
          }, handlePushChannelMsg: function(t3) {
            var i3 = this.handlePushMsg(t3);
            i3[0].messageHandler.handlePushChannelMsg(i3[1]);
          }, handlePushTransparentMsg: function(t3) {
            var i3 = this.handlePushMsg(t3);
            i3[0].messageHandler.handlePushTransparentMsg(i3[1]);
          } };
          var Bl = { initMessageHandler: function() {
            this.messageHandler = new Dl(this.logger, this.stateCenter, this.dataReport, this.liveRoomHandler, this.rtm, this);
          } }, Ul = { type: "Message", install: function(t3, i3, n3) {
            for (var e3 in ql)
              Object.defineProperty(t3.prototype, e3, { value: ql[e3], writable: false });
            for (var e3 in Ll)
              Object.defineProperty(n3.prototype, e3, { value: Ll[e3], writable: false });
            for (var e3 in Bl)
              Object.defineProperty(i3.prototype, e3, { value: Bl[e3], writable: false });
          } }, Gl = o(5830), Jl = o(3509), Fl = o(9674), Hl = o(743), Vl = function(t3, i3, n3, e3) {
            return new (n3 || (n3 = Promise))(function(r3, s3) {
              function o2(t4) {
                try {
                  a2(e3.next(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function u2(t4) {
                try {
                  a2(e3.throw(t4));
                } catch (t5) {
                  s3(t5);
                }
              }
              function a2(t4) {
                var i4;
                t4.done ? r3(t4.value) : (i4 = t4.value, i4 instanceof n3 ? i4 : new n3(function(t5) {
                  t5(i4);
                })).then(o2, u2);
              }
              a2((e3 = e3.apply(t3, i3 || [])).next());
            });
          }, Ql = function(t3, i3) {
            var n3, e3, r3, s3, o2 = { label: 0, sent: function() {
              if (1 & r3[0])
                throw r3[1];
              return r3[1];
            }, trys: [], ops: [] };
            return s3 = { next: u2(0), throw: u2(1), return: u2(2) }, "function" == typeof Symbol && (s3[Symbol.iterator] = function() {
              return this;
            }), s3;
            function u2(u3) {
              return function(a2) {
                return function(u4) {
                  if (n3)
                    throw new TypeError("Generator is already executing.");
                  for (; s3 && (s3 = 0, u4[0] && (o2 = 0)), o2; )
                    try {
                      if (n3 = 1, e3 && (r3 = 2 & u4[0] ? e3.return : u4[0] ? e3.throw || ((r3 = e3.return) && r3.call(e3), 0) : e3.next) && !(r3 = r3.call(e3, u4[1])).done)
                        return r3;
                      switch (e3 = 0, r3 && (u4 = [2 & u4[0], r3.value]), u4[0]) {
                        case 0:
                        case 1:
                          r3 = u4;
                          break;
                        case 4:
                          return o2.label++, { value: u4[1], done: false };
                        case 5:
                          o2.label++, e3 = u4[1], u4 = [0];
                          continue;
                        case 7:
                          u4 = o2.ops.pop(), o2.trys.pop();
                          continue;
                        default:
                          if (!(r3 = o2.trys, (r3 = r3.length > 0 && r3[r3.length - 1]) || 6 !== u4[0] && 2 !== u4[0])) {
                            o2 = 0;
                            continue;
                          }
                          if (3 === u4[0] && (!r3 || u4[1] > r3[0] && u4[1] < r3[3])) {
                            o2.label = u4[1];
                            break;
                          }
                          if (6 === u4[0] && o2.label < r3[1]) {
                            o2.label = r3[1], r3 = u4;
                            break;
                          }
                          if (r3 && o2.label < r3[2]) {
                            o2.label = r3[2], o2.ops.push(u4);
                            break;
                          }
                          r3[2] && o2.ops.pop(), o2.trys.pop();
                          continue;
                      }
                      u4 = i3.call(t3, o2);
                    } catch (t4) {
                      u4 = [6, t4], e3 = 0;
                    } finally {
                      n3 = r3 = 0;
                    }
                  if (5 & u4[0])
                    throw u4[1];
                  return { value: u4[0] ? u4[1] : void 0, done: true };
                }([u3, a2]);
              };
            }
          }, Yl = function() {
            function t3(t4, i3) {
              this.zegoWebRTC = t4, this.roomID = i3, this.pubDataChannelList = [], this.subDataChannelList = [], this.listenerList = { receiveRealTimeSequentialData: [] }, this.an = t4.logger;
            }
            return t3.prototype.startBroadcasting = function(t4, i3) {
              return Vl(this, void 0, void 0, function() {
                var i4, n3, e3, r3, s3, o2;
                return Ql(this, function(u2) {
                  switch (u2.label) {
                    case 0:
                      if ((0, G.rA)(this.an, i4 = "dc.sb.0"), this.pubDataChannelList.includes(t4))
                        return this.an.error(i4 + " datachannel already exist"), [2, false];
                      if ((n3 = this.zegoWebRTC.streamCenter.publisherList[t4]) && n3.publisher.dataChannel)
                        return this.pubDataChannelList.push(t4), [2, true];
                      if (n3 && !n3.publisher.dataChannel)
                        return this.an.error(i4 + " publish datachannel no exist, try other stream ID"), [2, false];
                      if (this.broadcastStream)
                        return [3, 2];
                      e3 = G.VJ.createElement("canvas"), r3 = void 0;
                      try {
                        r3 = e3.captureStream();
                      } catch (t5) {
                        return this.an.error(i4 + " publish datachannel, canvas captureStream error"), [2, false];
                      }
                      return s3 = this, [4, this.zegoWebRTC.createStream({ custom: { source: r3 } })];
                    case 1:
                      s3.broadcastStream = u2.sent(), u2.label = 2;
                    case 2:
                      return (o2 = this.zegoWebRTC.startPublishingStream(t4, this.broadcastStream, { roomID: this.roomID }, true)) && this.pubDataChannelList.push(t4), (0, G.OY)(this.an, i4), [2, o2];
                  }
                });
              });
            }, t3.prototype.stopBroadcasting = function(t4) {
              var i3 = "dc.sb.1";
              (0, G.rA)(this.an, i3), this.pubDataChannelList = this.pubDataChannelList.filter(function(i4) {
                return i4 !== t4;
              });
              var n3 = this.zegoWebRTC.streamCenter.publisherList[t4];
              return n3 ? (n3.room.roomID == this.roomID && n3.isDataChannel && this.zegoWebRTC.stopPublishingStream(t4), (0, G.OY)(this.an, i3), true) : (this.an.error(i3 + " datachannel no found"), false);
            }, t3.prototype.sendRealTimeSequentialData = function(t4, i3) {
              if (!(0, B.SY)(i3))
                return this.an.error("dc.srsd data type wrong"), false;
              var n3 = this.zegoWebRTC.streamCenter.publisherList[t4];
              return n3 && this.pubDataChannelList.includes(t4) ? this.sendBCMessage(n3.publisher, i3) : (this.an.error("dc.srsd datachannel no found"), false);
            }, t3.prototype.sendBCMessage = function(t4, i3) {
              var n3;
              if (!t4.dataChannelState)
                return false;
              for (var e3 = new Uint8Array(i3), r3 = 0, s3 = i3.byteLength, o2 = t4.send_seq, u2 = 0, a2 = (/* @__PURE__ */ new Date()).getTime(), c2 = 0; s3 > 0; ) {
                s3 > 1151 ? c2 = 1141 : (c2 = s3, u2 = 1);
                var h2 = new Uint8Array(c2 + 10);
                h2[0] = 1, h2[1] = u2, h2[2] = t4.send_seq >> 8 & 255, h2[3] = 255 & t4.send_seq, h2[4] = o2 >> 8 & 255, h2[5] = 255 & o2, h2[6] = a2 >> 24 & 255, h2[7] = a2 >> 16 & 255, h2[8] = a2 >> 8 & 255, h2[9] = 255 & a2;
                for (var f2 = 0; f2 < c2; f2++)
                  h2[f2 + 10] = e3[f2 + r3];
                s3 -= c2, r3 += c2, t4.send_seq++, t4.send_seq >= 65536 && (t4.send_seq = 0), null === (n3 = t4.dataChannel) || void 0 === n3 || n3.send(h2);
              }
              return true;
            }, t3.prototype.startSubscribing = function(t4, i3) {
              var n3, e3;
              return Vl(this, void 0, void 0, function() {
                var i4, r3, s3;
                return Ql(this, function(o2) {
                  switch (o2.label) {
                    case 0:
                      return (0, G.rA)(this.an, i4 = "dc.ss.0"), this.subDataChannelList.includes(t4) ? (this.an.error(i4 + " datachannel already exist"), [2, false]) : (r3 = this.zegoWebRTC.streamCenter.playerList[t4]) ? [3, 2] : [4, this.zegoWebRTC.startPlayingStream(t4, void 0, true)];
                    case 1:
                      o2.sent(), r3 = this.zegoWebRTC.streamCenter.playerList[t4], o2.label = 2;
                    case 2:
                      return (s3 = r3).dataChannel ? (!(null === (n3 = s3.onDataChannelList) || void 0 === n3 ? void 0 : n3.includes(this.onReceivedDataChannel.bind(this))) && (null === (e3 = s3.onDataChannelList) || void 0 === e3 || e3.push(this.onReceivedDataChannel.bind(this))), this.subDataChannelList.push(t4), (0, G.OY)(this.an, i4), [2, true]) : (this.an.error(i4 + " datachannel no exist, try other stream ID"), [2, false]);
                  }
                });
              });
            }, t3.prototype.stopSubscribing = function(t4) {
              var i3 = "dc.ss.1";
              (0, G.rA)(this.an, i3), this.subDataChannelList = this.subDataChannelList.filter(function(i4) {
                return i4 !== t4;
              });
              var n3 = this.zegoWebRTC.streamCenter.playerList[t4];
              return n3 ? (n3.room.roomID == this.roomID && n3.isDataChannel && this.zegoWebRTC.stopPlayingStream(t4), (0, G.OY)(this.an, i3), true) : (this.an.error(i3 + " datachannel no subscribe"), false);
            }, t3.prototype.on = function(t4, i3) {
              this.bindListener(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              this.deleteListener(t4, i3);
            }, t3.prototype.bindListener = function(t4, i3) {
              return this.listenerList[t4] ? (0, B.JO)(i3) ? (-1 == this.listenerList[t4].indexOf(i3) && this.listenerList[t4].push(i3), true) : (this.an.error("zc.o.0 listener callBack must be funciton"), false) : (this.an.error("dc.o.0 event " + t4 + " no found"), false);
            }, t3.prototype.deleteListener = function(t4, i3) {
              if (!this.listenerList[t4])
                return this.an.error("dc.o.1 listener no found"), false;
              var n3 = this.listenerList[t4];
              return i3 ? n3.splice(n3.indexOf(i3), 1) : this.listenerList[t4] = [], true;
            }, t3.prototype.actionListener = function(t4) {
              for (var i3 = this, n3 = [], e3 = 1; e3 < arguments.length; e3++)
                n3[e3 - 1] = arguments[e3];
              this.listenerList[t4] && this.listenerList[t4].forEach(function(e4) {
                try {
                  setTimeout(function() {
                    e4.apply(void 0, n3);
                  }, 0);
                } catch (n4) {
                  i3.an.error("dc.al " + t4 + " " + n4);
                }
              });
            }, t3.prototype.onReceivedDataChannel = function(t4, i3, n3) {
              this.actionListener("receiveRealTimeSequentialData", t4, i3, n3);
            }, t3.prototype.reset = function() {
              var t4 = this, i3 = "dc.rs";
              for (var n3 in (0, G.rA)(this.an, i3), this.pubDataChannelList.forEach(function(i4) {
                var n4 = t4.zegoWebRTC.streamCenter.publisherList[i4];
                n4 && n4.room.roomID == t4.roomID && n4.isDataChannel && t4.zegoWebRTC.stopPublishingStream(i4);
              }), this.subDataChannelList.forEach(function(i4) {
                var n4 = t4.zegoWebRTC.streamCenter.playerList[i4];
                n4 && n4.room.roomID == t4.roomID && n4.isDataChannel && t4.zegoWebRTC.stopPlayingStream(i4);
              }), this.listenerList)
                this.listenerList[n3] = [];
              this.broadcastStream && this.zegoWebRTC.destroyStream(this.broadcastStream), this.broadcastStream = void 0, (0, G.OY)(this.an, i3);
            }, t3;
          }(), Kl = function() {
            function t3(t4, i3) {
              this._roomID = i3, this.Dy = new Yl(t4, i3);
            }
            return t3.prototype.reset = function() {
              this.Dy.reset();
            }, Object.defineProperty(t3.prototype, "roomID", { get: function() {
              return this._roomID;
            }, enumerable: false, configurable: true }), t3.prototype.startBroadcasting = function(t4) {
              return this.Dy.startBroadcasting(t4);
            }, t3.prototype.stopBroadcasting = function(t4) {
              return this.Dy.stopBroadcasting(t4);
            }, t3.prototype.sendRealTimeSequentialData = function(t4, i3) {
              return this.Dy.sendRealTimeSequentialData(t4, i3);
            }, t3.prototype.startSubscribing = function(t4) {
              return this.Dy.startSubscribing(t4);
            }, t3.prototype.stopSubscribing = function(t4) {
              return this.Dy.stopSubscribing(t4);
            }, t3.prototype.on = function(t4, i3) {
              this.Dy.on(t4, i3);
            }, t3.prototype.off = function(t4, i3) {
              this.Dy.off(t4, i3);
            }, t3;
          }(), Zl = { type: "DataChannel", install: function(t3) {
            Object.defineProperty(t3.prototype, "createRealTimeSequentialDataManager", { value: function(t4) {
              this.logger.info("dc.cr room call"), this.enableDataChannel(true);
              var i3 = this.stateCenter.getRoomByRoomID(t4);
              return i3 ? i3.dataChannelManager ? null : (i3.dataChannelManager = new Kl(this, t4), i3.dataChannelManager) : (this.logger.error("dc.cr room ".concat(t4, " no exist")), null);
            }, writable: false }), Object.defineProperty(t3.prototype, "destroyRealTimeSequentialDataManager", { value: function(t4) {
              this.logger.info("dc.ds call");
              var i3 = this.stateCenter.roomList.find(function(i4) {
                return i4.dataChannelManager == t4;
              });
              i3 ? (t4.reset(), i3.dataChannelManager = null) : this.logger.error("dc.ds not match, room: ".concat(t4.roomID));
            }, writable: false });
          } }, Xl = o(5772), Wl = function() {
            var t3 = function(i3, n3) {
              return t3 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t4, i4) {
                t4.__proto__ = i4;
              } || function(t4, i4) {
                for (var n4 in i4)
                  Object.prototype.hasOwnProperty.call(i4, n4) && (t4[n4] = i4[n4]);
              }, t3(i3, n3);
            };
            return function(i3, n3) {
              if ("function" != typeof n3 && null !== n3)
                throw new TypeError("Class extends value " + String(n3) + " is not a constructor or null");
              function e3() {
                this.constructor = i3;
              }
              t3(i3, n3), i3.prototype = null === n3 ? Object.create(n3) : (e3.prototype = n3.prototype, new e3());
            };
          }();
          Bf.use(Ul), Bf.use(Gl.StreamCDN), Bf.use(Jl.AudioMix), Bf.use(Fl.MixStream), Bf.use(Hl.RangeAudio), Bf.use(Zl), Bf.use(Xl.BeautyEffect);
          var $l = function(t3) {
            function i3() {
              return null !== t3 && t3.apply(this, arguments) || this;
            }
            return Wl(i3, t3), i3;
          }(Bf);
        }(), u;
      }();
    });
  }
});
export default require_ZegoExpressWebRTC();
/*! Bundled license information:

long/umd/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)

localforage/dist/localforage.js:
  (*!
      localForage -- Offline Storage, Improved
      Version 1.10.0
      https://localforage.github.io/localForage
      (c) 2013-2017 Mozilla, Apache License 2.0
  *)
*/
//# sourceMappingURL=zego-express-engine-webrtc.js.map
