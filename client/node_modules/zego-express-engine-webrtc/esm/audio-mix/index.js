!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("long"));else if("function"==typeof define&&define.amd)define(["long"],e);else{var i="object"==typeof exports?e(require("long")):e(t.long);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}("undefined"!=typeof self?self:this,function(t){return function(){"use strict";var e={327:function(t,e,i){i.d(e,{L:function(){return s}});var n=i(4872);function s(t,e){if(t&&!(0,n.dr)(t)&&t.zegoStream){if(e.info("cu.gs type:zego"),(0,n.dr)(t.stream))return t.stream;throw new Error("The ZegoLocalStream type requires first calling the capture api to capture the stream")}return t}},2638:function(t,e,i){var n;i(3052);!function(t){t[t.debug=0]="debug",t[t.info=1]="info",t[t.warn=2]="warn",t[t.error=3]="error",t[t.report=99]="report",t[t.disable=100]="disable"}(n||(n={}));var s,r,u;!function(t){t[t.disable=0]="disable",t[t.websocket=1]="websocket",t[t.https=2]="https"}(s||(s={})),function(t){t[t.SDKProject_ZegoWebRTC=6]="SDKProject_ZegoWebRTC",t[t.SDKProject_ZegoMiniProgram=7]="SDKProject_ZegoMiniProgram"}(r||(r={})),function(t){t[t.UDP=0]="UDP",t[t.RTMP=1]="RTMP",t[t.FLV=2]="FLV",t[t.HLS=3]="HLS",t[t.WEBRTC=4]="WEBRTC"}(u||(u={}));var o,c;o=1,function(){var t=1}();!function(t){t[t.ClientType_None=0]="ClientType_None",t[t.ClientType_H5=1]="ClientType_H5",t[t.ClientType_SmallPragram=2]="ClientType_SmallPragram",t[t.ClientType_Webrtc=3]="ClientType_Webrtc"}(c||(c={}));var a,h,f,d,l,m,g,v,p,b,y,D,I;!function(t){t[t.Default=0]="Default",t[t.Extranet=1]="Extranet",t[t.Intranet=2]="Intranet"}(a||(a={})),function(t){t[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login"}(h||(h={})),function(t){t[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login",t[t.reconnect=3]="reconnect"}(f||(f={})),function(t){t[t.stop=0]="stop",t[t.start=1]="start"}(d||(d={})),function(t){t[t.CDN=0]="CDN",t[t.RTC=1]="RTC",t[t.L3=2]="L3",t[t.DG=3]="DG"}(l||(l={})),function(t){t[t.useAnalyzer=0]="useAnalyzer",t[t.useWorklet=1]="useWorklet"}(m||(m={})),function(t){t[t.Default=3]="Default",t[t.StandardVideoCall=4]="StandardVideoCall",t[t.HighVideoCall=5]="HighVideoCall",t[t.StandardChatroom=6]="StandardChatroom",t[t.HighQualityChatroom=7]="HighQualityChatroom",t[t.Broadcast=8]="Broadcast",t[t.Karaoke=9]="Karaoke",t[t.UNKNOWN=100]="UNKNOWN"}(g||(g={})),function(t){t.WIN32="WIN32",t.MAC="Mac",t.ANDROID="Android",t.LINUX="Linux",t.IOS="iOS",t.Harmony="Harmony",t.UNKNOWN="WTF"}(v||(v={})),function(t){t.CDN="cdn",t.L3="l3",t.RTC="rtc"}(p||(p={})),function(t){t[t.RTC=0]="RTC",t[t.CDN=1]="CDN",t[t.L3=2]="L3",t[t.DG=3]="DG",t[t.CUSTOM=5]="CUSTOM"}(b||(b={})),function(t){t[t.offline=0]="offline",t[t.online=1]="online"}(y||(y={})),function(t){t[t.MinQuality=0]="MinQuality",t[t.DieQuality=0]="DieQuality",t[t.PoorMinQuality=1]="PoorMinQuality",t[t.MiddleMinQuality=30]="MiddleMinQuality",t[t.GoodMinQuality=60]="GoodMinQuality",t[t.ExcellentMinQuality=85]="ExcellentMinQuality",t[t.MaxQuality=100]="MaxQuality"}(D||(D={})),function(t){t[t.Unknown=-1]="Unknown",t[t.Excellent=0]="Excellent",t[t.Good=1]="Good",t[t.Middle=2]="Middle",t[t.Poor=3]="Poor",t[t.Die=4]="Die"}(I||(I={}));var x,T,w=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.next=null,this.prev=null,this._id=t,this._data=e}return Object.defineProperty(t.prototype,"id",{get:function(){return this._id?this._id:null},set:function(t){this._id=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t},enumerable:!1,configurable:!0}),t.prototype.hasNext=function(){return this.next&&this.next.id},t.prototype.hasPrev=function(){return this.prev&&this.prev.id},t}();!function(){function t(){this.start=new w,this.end=new w,this._idCounter=0,this._numNodes=0,this.start.next=this.end,this.start.prev=null,this.end.prev=this.start,this.end.next=null}t.prototype.insertBefore=function(t,e){var i=new w(this._idCounter,e);return i.next=t,i.prev=t.prev,t.prev&&(t.prev.next=i),t.prev=i,++this._idCounter,++this._numNodes,i},t.prototype.addLast=function(t){return this.insertBefore(this.end,t)},t.prototype.add=function(t){return this.addLast(t)},t.prototype.getFirst=function(){return 0===this._numNodes?null:this.start.next},t.prototype.getLast=function(){return 0===this._numNodes?null:this.end.prev},t.prototype.size=function(){return this._numNodes},t.prototype.getFromFirst=function(t){var e=0,i=this.start.next;if(t>=0)for(;e<t&&null!==i;)i=i.next,++e;else i=null;if(null===i)throw"Index out of bounds.";return i},t.prototype.get=function(t){return 0===t?this.getFirst():t===this._numNodes-1?this.getLast():this.getFromFirst(t)},t.prototype.remove=function(t){return t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),--this._numNodes,t},t.prototype.removeFirst=function(){var t=null;return this._numNodes>0&&this.start.next&&(t=this.remove(this.start.next)),t},t.prototype.removeLast=function(){var t=null;return this._numNodes>0&&this.end.prev&&(t=this.remove(this.end.prev)),t},t.prototype.removeAll=function(){this.start.next=this.end,this.end.prev=this.start,this._numNodes=0,this._idCounter=0},t.prototype.each=function(t){for(var e=this.start;e.hasNext();)t(e=e.next)},t.prototype.find=function(t){for(var e=this.start,i=!1,n=null;e.hasNext()&&!i;)t(e=e.next)&&(n=e,i=!0);return n},t.prototype.map=function(t){for(var e=this.start,i=[];e.hasNext();)t(e=e.next)&&i.push(e);return i},t.prototype.push=function(t){return this.addLast(t)},t.prototype.unshift=function(t){this.insertBefore(this._numNodes>0?this.start.next:this.end,t)},t.prototype.pop=function(){return this.removeLast()},t.prototype.shift=function(){return this.removeFirst()}}();!function(t){t.ONLY_BASELINE="only_baseline",t.HARD_SOFT_ENCODEC_FIRST="hard_or_soft_encodec_first",t.HIGH_PROFILE_FIRST="high_profile_first"}(x||(x={})),function(t){t[t.None=0]="None",t[t.Vocalist=1]="Vocalist",t[t.BackingSinging=2]="BackingSinging"}(T||(T={}))},3052:function(t,e,i){var n,s;!function(t){t[t.SWITCH_ONE=1]="SWITCH_ONE",t[t.SWITCH_TWO=2]="SWITCH_TWO"}(n||(n={})),function(t){t[t.ZegoGeoFenceTypeNone=0]="ZegoGeoFenceTypeNone",t[t.ZegoGeoFenceTypeInclude=1]="ZegoGeoFenceTypeInclude",t[t.ZegoGeoFenceTypeExclude=2]="ZegoGeoFenceTypeExclude"}(s||(s={}));var r,u;!function(t){t[t.TT_NONE=0]="TT_NONE",t[t.TT_PC=1]="TT_PC",t[t.TT_IOS=2]="TT_IOS",t[t.TT_ANDROID=3]="TT_ANDROID",t[t.TT_MAC=4]="TT_MAC",t[t.TT_LINUX=5]="TT_LINUX",t[t.TT_WEB=6]="TT_WEB",t[t.TT_MINIPROGRAM=7]="TT_MINIPROGRAM",t[t.TT_UNKNOWN=32]="TT_UNKNOWN"}(r||(r={})),function(t){t[t.disconnected=0]="disconnected",t[t.connecting=1]="connecting",t[t.connected=2]="connected"}(u||(u={}));var o,c,a,h;!function(t){t[t.logout=0]="logout",t[t.trylogin=1]="trylogin",t[t.login=2]="login"}(o||(o={})),function(t){t[t.I=0]="I",t[t.H=10]="H",t[t.M=100]="M",t[t.L=1e3]="L"}(c||(c={})),function(t){t[t.offline=0]="offline",t[t.online=1]="online"}(a||(a={})),function(t){t[t.NT_NONE=0]="NT_NONE",t[t.NT_LINE=1]="NT_LINE",t[t.NT_WIFI=2]="NT_WIFI",t[t.NT_2G=3]="NT_2G",t[t.NT_3G=4]="NT_3G",t[t.NT_4G=5]="NT_4G",t[t.NT_UNKNOWN=32]="NT_UNKNOWN"}(h||(h={}))},4872:function(t,e,i){function n(t){return"number"==typeof t}function s(t){return"string"==typeof t}function r(t){return"boolean"==typeof t}function u(t){return void 0===t}function o(t){return t instanceof MediaStream}function c(t){return t instanceof HTMLMediaElement}function a(t){return t instanceof ArrayBuffer}i.d(e,{Cs:function(){return n},QP:function(){return s},SY:function(){return a},Si:function(){return c},TE:function(){return u},dd:function(){return r},dr:function(){return o}})},4908:function(t,e,i){i(8627),i(5095)},5095:function(t,e,i){i.d(e,{Gq:function(){return n},Tr:function(){return u},tK:function(){return s},yS:function(){return o},yp:function(){return r}});var n=function(t){return t},s=function(t){return t},r=function(t){return t},u=function(t){return t},o=function(t){return t}},5794:function(t,e,i){function n(){var t=document.createElement("audio");t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA=",t.play(),setTimeout(function(){t.pause(),t.remove()},1e3)}i.d(e,{r:function(){return n}})},6493:function(t,e,i){i.d(e,{$t:function(){return n},HR:function(){return s},nr:function(){return u}});i(2638);function n(){return navigator.userAgent||""}function s(){return null!==n().match(/OpenHarmony|HarmonyOS/i)}function r(){var t,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*([\d\.]+)/i)||[];return/trident/i.test(i[1])?{name:"IE",version:(t=/\brv[ :]+([\d\.]+)/g.exec(e)||[])[1]||""}:"Chrome"===i[1]&&null!=(t=e.match(/\bOPR|Edge\/([\d\.]+)/))?{name:"Opera",version:t[1]}:(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/([\d+\.]+)/i))&&i.splice(1,1,t[1]),{name:i[0],version:i[1]})}function u(){return"safari"==r().name.toLowerCase()}},6994:function(e){e.exports=t},7202:function(t,e,i){i(6994)},8627:function(t,e,i){i.d(e,{$wo:function(){return B},Arx:function(){return xt},B3d:function(){return pt},Be2:function(){return nt},FB3:function(){return U},HCP:function(){return Q},HO9:function(){return p},I4J:function(){return kt},I7C:function(){return et},J79:function(){return c},JDv:function(){return rt},JSm:function(){return st},L8E:function(){return P},LLz:function(){return _},MK1:function(){return dt},MrD:function(){return Y},MrS:function(){return w},MuX:function(){return Mt},NCg:function(){return Rt},OdW:function(){return Ct},OrZ:function(){return z},Oy0:function(){return l},PA0:function(){return a},PTE:function(){return x},Q3v:function(){return ut},Q9p:function(){return d},RBR:function(){return ct},RZs:function(){return Nt},RfS:function(){return G},S4u:function(){return r},S5f:function(){return h},S6t:function(){return qt},SB8:function(){return yt},SRE:function(){return F},SmZ:function(){return k},T_8:function(){return ht},Tij:function(){return wt},V2t:function(){return T},VU9:function(){return C},WP4:function(){return X},XHx:function(){return It},Xxx:function(){return I},ZEp:function(){return f},ZpF:function(){return M},Zws:function(){return bt},_68:function(){return q},_HD:function(){return m},aUw:function(){return y},aa2:function(){return R},ann:function(){return ft},b1q:function(){return St},cMG:function(){return Ot},ckD:function(){return jt},ckg:function(){return Ht},clM:function(){return u},d49:function(){return o},dXc:function(){return zt},dg1:function(){return j},dqB:function(){return lt},ekj:function(){return Dt},f43:function(){return Z},fzq:function(){return W},g9p:function(){return v},gHA:function(){return mt},gSF:function(){return g},hYx:function(){return Et},hje:function(){return vt},iei:function(){return E},jZ$:function(){return H},jut:function(){return N},kOd:function(){return J},kbF:function(){return V},lgu:function(){return Tt},m6U:function(){return tt},mrK:function(){return $},pWJ:function(){return At},qvY:function(){return ot},sJH:function(){return O},sVF:function(){return D},s_m:function(){return S},t85:function(){return L},wxm:function(){return gt},xU2:function(){return K},xbZ:function(){return at},xfZ:function(){return b},yK:function(){return A},zML:function(){return _t},zs3:function(){return it}});var n=i(8866),s="the user cancels the stream request.",r={code:1000002,message:"not login room"},u={code:1000014,message:"stream ID is too long"},o={code:1000015,message:"streamID is empty"},c={code:1000016,message:"stream ID contains illegal characters"},a={code:1000017,message:n.Rl},h={code:1000018,message:n.qC},f={code:1100001,message:n.dO},d={code:1100002,message:"network timeout."},l={code:1100999,message:"unknown server error"},m={code:1101005,message:"signal hb fail"},g={code:1102017,message:"dispatch error"},v={code:1102018,message:"token expired"},p={code:1102021,message:"biz channel error."},b={code:1102022,message:"dispatch request timeout"},y={code:1102024,message:"invalid channel"},D={code:1102026,msg:n.fT},I={code:1003025,message:"stream is forbided by media server"},x={code:1003050,message:"the extra info of the stream is null"},T={code:1003051,message:"the extra info of the stream is too long"},w={code:1003080,message:"browser does not support the codec"},_={code:1103001,message:n.dO},z={code:1103002,message:"browser do not support"},A={code:1103010,message:"screen fail"},S={code:1103011,message:"enumerate devices fail"},N={code:1103012,message:"use camera device fail"},O={code:1103019,message:"publish streams auth fail"},M={code:1103021,message:"session request fail"},k={code:1103022,message:"create offer error"},C={code:1103023,message:"setLocalDescription error"},j={code:1103024,message:"mediaDesc error"},E={code:1103025,message:"other side offer error"},q={code:1103026,message:"candidate error"},H={code:1103027,message:"server session closed"},R={code:1103028,message:"ice connection error"},B={code:1103030,message:"negotiation timeout"},L={code:1103042,message:"screen canceled"},P={code:1103043,message:"screen not support"},W={code:1103044,message:n.aw},Z={code:1103099,message:"stream is not capturing"},G={code:1103049,message:"repeated pull same stream"},Q={code:1103050,message:"websocket disconnected"},F={code:1103051,message:"publisher retry timeout"},U={code:1103053,message:"https is required"},K={code:1103055,message:n.Wk},V={code:1103056,message:"publish is publishing"},J={code:1103058,message:"client ip changed"},X={code:1103059,message:"ttl over time"},Y={code:1103060,message:"session request timeout"},$={code:1103061,message:"get media fail"},tt={code:1103062,message:"update stream info fail"},et={code:1103063,message:"publish target no response"},it={code:1103064,message:"get device not allowed"},nt={code:1103065,message:"device is not readable"},st={code:1103066,message:"device does not meet constraints"},rt={code:1103067,message:"update sdp time out"},ut={code:1103068,message:"update sdp fail"},ot={code:1103073,message:"video effect is starting, please operate after video effect is started"},ct={code:1103078,message:"publish stream poor and net probe poor"},at={code:1103089,message:s},ht={code:1004099,message:"internal exeception"},ft={code:1104001,message:"input parm error"},dt={code:1104021,message:"session request fail"},lt={code:1104022,message:"create offer error"},mt={code:1104023,message:"setLocalDescription error"},gt={code:1104024,message:"mediaDesc error"},vt={code:1104025,message:"other side offer error"},pt={code:1104026,message:"candidate error"},bt={code:1104028,message:"ice connection error"},yt={code:1104029,message:"websocket disconnected"},Dt={code:1104030,message:"negotiation timeout"},It={code:1104031,message:"player retry timeout"},xt={code:1104032,message:"player is playing"},Tt={code:1104033,message:"client ip changed"},wt={code:1104034,message:"ttl is over time"},_t={code:1104035,message:"reset session push"},zt={code:1104036,message:"session request timeout"},At={code:1104037,message:"probe time out"},St={code:1104038,message:"resource mode is not supported"},Nt={code:1104039,message:"play stream not found"},Ot={code:1004020,message:"play stream interrupted"},Mt={code:1104041,message:"stream quality poor and net probe poor"},kt={code:1104042,message:s},Ct={code:1104043,message:"mini sdp error"},jt={code:1104045,message:"play streams is out limit"},Et={code:1104046,message:"play streams auth fail"},qt={code:1103057,message:"decode audio data fail"},Ht={code:1103048,message:n.pt},Rt={code:1103100,message:"background process is start, but not subscribe yet"}},8866:function(t,e,i){i.d(e,{EK:function(){return r},Rl:function(){return l},Wk:function(){return d},aw:function(){return c},dO:function(){return a},fT:function(){return u},h2:function(){return f},l3:function(){return n},pt:function(){return o},qC:function(){return h},rA:function(){return s}});i(7202),i(8627),i(4908);var n=Promise;function s(t,e,i){void 0===i&&(i=""),t.info("".concat(e," call ").concat(i))}function r(t,e,i){void 0===i&&(i=""),t.info("".concat(e," success ").concat(i))}var u="room not exist",o="device is not found",c="stream is not from zego",a="input param error",h="local stream wrong",f="no preview",d="publish stream no found",l="network is broken"}},i={};function n(t){var s=i[t];if(void 0!==s)return s.exports;var r=i[t]={exports:{}};return e[t](r,r.exports,n),r.exports}n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var s={};n.r(s),n.d(s,{AudioMix:function(){return C}});var r="zc.pe.0",u="zc.pe.1",o="zc.aep",c="zc.sev",a="zc.sma.0",h="zc.sma.1",f="zc.mb",d="zc.smb",l="zc.p.0.pe.0",m="zc.p.0.pe.1",g="zc.p.0.re",v="zc.p.0.se",p="zc.p.0.sma.0",b="zc.smav",y="zc.p.0.mb",D="zc.p.0.smav",I=n(8627),x=n(5794),T=n(6493),w=function(){function t(t,e,i,n,s){this.t=t,this.ac=e,this.localStream=i,this.destination=n,this.rtcViewer=s,this.audioBufferList=[],this.replace=!1,this.effectEndedCallBack=null,this.effectEndedListener=null,this.startTimes=0,this.startOffset=0,this.pauseTimes=0,this.resumeOffset=0,this.paused=!1,this.isMixAudio=!1,this.isMixingBuffer=!1,this.loop=!1}return t.prototype.playEffect=function(t,e,i,n,s){var r=this;!0!==this.isMixAudio?this.audioBuffer?(this.startOffset=t||0,this.loop=e||!1,this.replace=i||!1,this.effectEndedCallBack=s,this.mixEffect(this.audioBuffer,function(){r.buffSource.loop=!!e,t?r.buffSource.start(0,t/1e3):r.buffSource.start(0),(0,T.HR)()&&(0,x.r)(),r.startTimes=Date.now(),r.effectEndedListener=r.effectEndedHandler.bind(r),r.buffSource.addEventListener("ended",r.effectEndedListener),n&&n()})):this.t.error("amu.pe.1 no audio buffer found"):this.t.warn("amu.pe.1 audio is mixing")},t.prototype.stopMixingBuffer=function(){return this.isMixingBuffer=!1,this.stopMixingAudio()},t.prototype.playRealTimeEffect=function(t){var e=this;this.mixEffect(t,function(){e.buffSource&&e.buffSource.start(0),e.buffSource&&e.buffSource.addEventListener("ended",function(){e.audioBufferList.shift(),e.audioBufferList.length>0&&e.isMixAudio&&e.playRealTimeEffect(e.audioBufferList[0])})})},t.prototype.pauseEffect=function(){this.audioBufferList.length>0?this.t.error("amu.pe.0 real time buffer can not be paused"):(this.stopMixingAudio(!0),this.resumeOffset=(this.pauseTimes-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration),this.paused=!0)},t.prototype.resumeEffect=function(){return this.audioBufferList.length>0?(this.t.error("amu.pe.0 real time buffer can not be resume"),!1):(this.playEffect(this.resumeOffset,this.loop,this.replace,void 0,this.effectEndedCallBack),this.startOffset=this.resumeOffset,this.paused=!1,!0)},t.prototype.mixEffect=function(t,e){this.localStream?(this.gainNode=this.ac.createGain(),this.delayNode=this.ac.createDelay(1),this.delayNode.delayTime.value=0,this.buffSource=this.ac.createBufferSource(),this.buffSource.buffer=t,this.buffSource.connect(this.gainNode),this.gainNode.connect(this.ac.destination),this.replaceTrack()&&e()):this.t.error("amu.me.0 localStream can not be found")},t.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.delayNode),this.delayNode.connect(this.destination);var t=this.destination.stream.getAudioTracks()[0],e=this.localStream.getTracks();return this.micTrack=this.localStream.getAudioTracks()[0],this.micTrack!==t&&(this.micTrack?e.includes(this.micTrack)&&this.localStream.removeTrack(this.micTrack):this.t.warn("amu.rt.0 origin track not fonud"),e.includes(t)||(this.localStream.addTrack(t),this.rtcViewer&&this.rtcViewer.setAudio(t))),this.isMixAudio=!0,!0},t.prototype.effectEndedHandler=function(){this.stopMixingAudio(),this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null},t.prototype.stopMixingAudio=function(t){return void 0===t&&(t=!1),this.paused?(this.t.info("amu.sma.1 audioEffect is paused"),!t&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):this.isMixAudio?this.localStream?(this.buffSource&&(this.buffSource.removeEventListener("ended",this.effectEndedListener),this.buffSource.stop(),this.pauseTimes=Date.now(),this.buffSource.disconnect(this.gainNode),this.buffSource=null),this.gainNode.disconnect(),this.delayNode.disconnect(),this.isMixAudio=!1,this.audioBufferList=[],!t&&this.effectEndedListener&&(this.effectEndedCallBack&&this.effectEndedCallBack(),this.effectEndedCallBack=null),!0):(this.t.error("amu.sma.1 localStream can not be found"),!1):(this.t.warn("amu.sma.1 no mixing audio found"),!0)},t.prototype.getProcess=function(){var t=Date.now();return this.paused&&(t=this.pauseTimes),(t-this.startTimes+this.startOffset)%(1e3*this.audioBuffer.duration)},t.prototype.seekTo=function(t){void 0===t&&(t=0),this.startOffset=t,this.paused?this.resumeOffset=t:(this.stopMixingAudio(!0),this.playEffect(t,this.loop,this.replace,void 0,this.effectEndedCallBack))},t.prototype.mixingBuffer=function(t,e){var i=this;!0!==this.isMixAudio||0!=this.audioBufferList.length||0!=this.isMixingBuffer?(this.ac.resume(),this.ac.decodeAudioData(t,function(t){i.audioBufferList.push(t),1==i.audioBufferList.length&&i.playRealTimeEffect(i.audioBufferList[0]),i.isMixingBuffer=!0,e&&e()},function(t){i.t.error("amu.mb.0 "+t),e&&e({code:I.S6t.code,message:I.S6t.message+" "+t})})):this.t.error("amu.mb.0 audio is mixing")},t.prototype.setMixingAudioVolume=function(t){return this.gainNode?(console.error("ktv setVolume",t),this.gainNode.gain.value=t,!0):(this.t.error("amu.sma.2 no mixing audio found"),!1)},t.prototype.setDelay=function(t){return this.delayNode?(this.t.info("amu.sma.2 set delay: "+t),this.delayNode.delayTime.value=t,!0):(this.t.warn("amu.sma.2 no mixing audio found"),!1)},t}(),_=function(){function t(t,e,i,n,s,r,u){void 0===u&&(u=1);var o=this;this.t=t,this.acMgr=e,this.localStream=i,this.browser=n,this.destination=s,this.rtcViewer=r,this.volumeFactor=u,this.isMixAudio=!1,this.maxDelay=1,this.audioCurrentTimer=null,this.audioResumedTimer=null,this.audioEl=null,this.eventHandler={volumechange:function(t){var e=t.target;e&&o.audioNode&&o.isMediaElSrc&&(e.muted||e.paused?(o.t.info("amu.sma.0 ".concat(o.id," ").concat(null==t?void 0:t.type,": audio muted disconnect")),o.audioNode.disconnect()):(o.t.info("amu.sma.0 ".concat(o.id," ").concat(null==t?void 0:t.type,": audio is connected")),o.audioNode.connect(o.gainNode)))},canplay:function(t){var e=t.target;e&&!o.isMediaElSrc&&o.isMixAudio&&(o.t.info("amu.sma.1 ".concat(o.id," ").concat(e.id," canplay, remixing audio")),o.stopMixingAudio(),o.startMixingAudio(e))}},this.isMediaElSrc=!1,this.volume=1,this.delay=0,this.id=Date.now()%1e5+Math.floor(10*Math.random()),t.info("amu.sma.0 ".concat(this.id," init audio mix"))}return Object.defineProperty(t.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),t.prototype.startMixingAudio=function(t){if(this.isMixAudio)return this.t.error("amu.sma.0 audio is mixing"),!1;if(!this.localStream)return this.t.error("amu.sma.0 localStream can not be found"),!1;var e;t.captureStream=t.captureStream||t.mozCaptureStream||t.webkitCaptureStream,this.isMixAudio=!0,this.gainNode||(this.gainNode=this.ac.createGain(),this.setMixingAudioVolume()),this.delayNode||(this.delayNode=this.ac.createDelay(this.maxDelay),this.t.info("amu.sma.1 ".concat(this.id," init set delay: ")+this.delay),this.delayNode.delayTime.value=this.delay);var i="safari"===this.browser;this.isMediaElSrc=!0;try{var n=this.acMgr.getMediaElementRenderer(t);if(!n)return!1;this.audioNode=n.getMixNode().mixOutputNode,this.audioEl=t}catch(t){e=t}t.addEventListener("volumechange",this.eventHandler.volumechange),t.addEventListener("pause",this.eventHandler.volumechange),t.addEventListener("play",this.eventHandler.volumechange);var s=this.getBrowserInfo(),r=!1;return i&&"10.15.6"===(null==s?void 0:s.sysVer)&&"13.1.2"===(null==s?void 0:s.ver)&&(r=!0),r&&(this.audioResumedTimer=setInterval(function(){t.currentTime=t.currentTime+.45},6e3)),e?(this.t.info("amu.sma.1 ".concat(this.id," create source failed: ")+e),!0):(this.audioNode&&(this.audioNode.connect(this.gainNode),this.t.info("amu.sma.1 ".concat(this.id," mix audio success."))),this.replaceTrack())},t.prototype.getBrowserInfo=function(){var t,e={},i=(0,T.$t)().toLowerCase();t=(i.match(/x [\d._]+/gi)+"").replace(/[^0-9|_.]/gi,"").replace(/_/gi,"."),e.sysVer=t;var n=i.match(/(msie|firefox|chrome|opera|version).*?([\d.]+)/);return n&&(e.browser=n[1].replace(/version/,"'safari"),e.ver=n[2]),e},t.prototype.replaceTrack=function(){if(!this.destination)return!1;this.gainNode.connect(this.delayNode),this.delayNode.connect(this.destination);var t=this.destination.stream.getAudioTracks()[0],e=this.localStream.getTracks();return this.micTrack=this.localStream.getAudioTracks()[0],this.micTrack!==t&&(this.micTrack?e.includes(this.micTrack)&&this.localStream.removeTrack(this.micTrack):this.t.warn("amu.rt.1 origin track not fonud"),e.includes(t)||(this.localStream.addTrack(t),this.rtcViewer&&this.rtcViewer.setAudio(t))),!0},t.prototype.stopMixingAudio=function(){return this.isMixAudio?this.localStream?(this.audioEl&&(this.audioEl.removeEventListener("volumechange",this.eventHandler.volumechange),this.audioEl.removeEventListener("pause",this.eventHandler.volumechange),this.audioEl.removeEventListener("play",this.eventHandler.volumechange),this.audioEl.removeEventListener("canplay",this.eventHandler.canplay),this.audioEl=null),this.audioNode&&(this.audioNode.disconnect(),this.audioNode=null,this.audioCurrentTimer&&(clearInterval(this.audioCurrentTimer),this.audioCurrentTimer=null),this.audioResumedTimer&&(clearInterval(this.audioResumedTimer),this.audioResumedTimer=null)),this.gainNode.disconnect(),this.delayNode.disconnect(),this.isMixAudio=!1,this.t.info("amu.sma.1 ".concat(this.id," stop mix audio success.")),!0):(this.t.error("amu.sma.1 localStream can not be found"),!1):(this.t.warn("amu.sma.1 no mixing audio found"),!0)},t.prototype.setMixingAudioVolume=function(t,e){if(void 0===t?t=this.volume:this.volume=t,void 0===e?e=this.volumeFactor:this.volumeFactor=e,!this.gainNode)return this.t.error("amu.sma.2 no mixing audio found"),!1;var i=t*this.volumeFactor;return this.t.info("amu.sma.2 "+this.id+" set volume: "+i),this.gainNode.gain.value=i,!0},t.prototype.setDelay=function(t){return this.delayNode?(t/=1e3,!isNaN(t)&&(t>this.maxDelay&&(t=this.maxDelay),t<0&&(t=0),this.t.info("amu.sma.1 ".concat(this.id," set delay: ")+t),this.delayNode.delayTime.value=t,this.delay=t,!0)):(this.t.warn("amu.sma.1 no mixing audio found"),!1)},t}(),z=n(4872),A=function(){function t(t){this.i=t,this.audioDestNode=void 0,this._audioMixList=[],this._arrayBufferMap={},this._effectList=[],this.volumeFactor=1}return Object.defineProperty(t.prototype,"delay",{get:function(){return this.u.engineConfig.mixingAudioDelay+this.u.engineConfig.baseMixingAudioDelay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"t",{get:function(){return this.i.logger},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_localStream",{get:function(){return this.i.localStream},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"h",{get:function(){return this.i.streamCenter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.i.stateCenter},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ac",{get:function(){return this.acMgr.ac},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"acMgr",{get:function(){return this.i.acMgr},enumerable:!1,configurable:!0}),t.prototype.startMixingAudio=function(t){var e=this;if(this.t.info(p+" call"),!this._localStream)return this.t.error(p+" localStream not found"),!1;var i=!0;return t.forEach(function(t){if(e._audioMixList.find(function(e){return e.media==t}))e.t.warn(p+" mix audio already exist");else if(e._localStream){e.h.soundLevelDelegate&&e.i.stopSoundLevel();var n=e.createDestNode(),s=new _(e.t,e.acMgr,e._localStream,e.u.browser,n,e.i.rtcViewer,e.volumeFactor);e._audioMixList.push({audioMix:s,media:t}),s.startMixingAudio(t)||(i=!1),s.setDelay(e.delay),e.h.soundLevelDelegate&&e.i.startSoundLevel()}}),i},t.prototype.stopMixingAudio=function(t){var e=this;return this.t.info("zc.p.0.sma.1 call"),t?t.forEach(function(t){for(var i=0;i<e._audioMixList.length;i++)if(e._audioMixList[i].media==t){e._audioMixList[i].audioMix.stopMixingAudio()&&e._audioMixList.splice(i--,1);break}}):(this._audioMixList.forEach(function(t){return t.audioMix.stopMixingAudio()}),this._audioMixList=[]),!0},t.prototype.setVolumeFactor=function(t){this.t.info(D+" set factor: "+t),isNaN(t)&&this.t.error(D+" set factor failed"),this.volumeFactor=t,this._audioMixList.forEach(function(e){e.audioMix.setMixingAudioVolume(void 0,t)})},t.prototype.setMixingAudioVolume=function(t,e){this.t.info(D+" call");var i=this._audioMixList.find(function(t){return t.media===e});return i?(i.audioMix.setMixingAudioVolume(t),this.t.info(D+" call success"),!0):(this.t.error(D+" audio is not mixing"),!1)},t.prototype.playEffect=function(t,e,i,n){var s=this;if(this.t.info(l+" call"),this._localStream)if(this._effectList.find(function(i){return i.effectID==t.effectID&&i.audioBuffer==e}))this.t.warn(l+" effect already exist ");else{this.h.soundLevelDelegate&&this.i.stopSoundLevel();var r=this.createDestNode(),u=new w(this.t,this.ac,this._localStream,r,this.i.rtcViewer);u.audioBuffer=e;var o={processor:u,effectID:t.effectID,audioBuffer:e};this._effectList.push(o);u.playEffect(t.playTime,t.loop,!1,function(){i&&i()},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s._effectList=s._effectList.filter(function(t){return t!==o}),n&&n.apply(void 0,t)}),this.h.soundLevelDelegate&&this.i.startSoundLevel(),this.t.info(l+" play effect "+t.effectID+" success")}else this.t.warn(l+" stream not found")},t.prototype.pauseEffect=function(t){var e=this._effectList.find(function(e){return e.effectID==t});if(e)this.h.soundLevelDelegate&&this.i.stopSoundLevel(),e.processor.pauseEffect(),this.h.soundLevelDelegate&&this.i.startSoundLevel(),this.t.info(m+" pause "+t+" success");else{if(!(0,z.TE)(t))return this.t.error(m+" effect not found"),!1;this.h.soundLevelDelegate&&this.i.stopSoundLevel(),this._effectList.forEach(function(t){return t.processor.pauseEffect()}),this.h.soundLevelDelegate&&this.i.startSoundLevel()}return!0},t.prototype.resumeEffect=function(t){var e=this._effectList.find(function(e){return e.effectID==t});if(e){this.h.soundLevelDelegate&&this.i.stopSoundLevel();var i=e.processor.resumeEffect();return this.h.soundLevelDelegate&&this.i.startSoundLevel(),this.t.info(g+" resume "+t+" success"),i}return(0,z.TE)(t)?(this.h.soundLevelDelegate&&this.i.stopSoundLevel(),this._effectList.forEach(function(t){return t.processor.resumeEffect()}),this.h.soundLevelDelegate&&this.i.startSoundLevel(),!0):(this.t.error(g+" no effect found"),!1)},t.prototype.stopEffect=function(t){var e=this._effectList.find(function(e){return e.effectID==t});if(e)this.h.soundLevelDelegate&&this.i.stopSoundLevel(),e.processor.stopMixingAudio(),this._effectList=this._effectList.filter(function(t){return t!==e}),this.h.soundLevelDelegate&&this.i.startSoundLevel(),this.t.info(v+" pause "+t+" success");else{if(!(0,z.TE)(t))return this.t.error(v+" effect not found"),!1;this.h.soundLevelDelegate&&this.i.stopSoundLevel(),this._effectList.forEach(function(t){return t.processor.stopMixingAudio()}),this._effectList=[],this.h.soundLevelDelegate&&this.i.startSoundLevel()}return!0},t.prototype.setEffectVolume=function(t,e,i){var n=this._effectList.find(function(t){return t.effectID==e});if(n)n.processor.setMixingAudioVolume(t),n.processor.setDelay(i||1e-7),this.t.info("zp.sev.0 set volume "+e+" success");else{if(!(0,z.TE)(e))return this.t.error("zp.sev.0 effect not found"),!1;this._effectList.forEach(function(e){return e.processor.setMixingAudioVolume(t)})}return!0},t.prototype.mixingBuffer=function(t,e,i){var n=this;if(this.t.info(y+" call"),this._localStream)if(this._arrayBufferMap[t])this.h.soundLevelDelegate&&this.i.stopSoundLevel(),this._arrayBufferMap[t].mixingBuffer(e,function(){n.h.soundLevelDelegate&&n.i.startSoundLevel(),i&&i()});else{this.h.soundLevelDelegate&&this.i.stopSoundLevel();var s=this.createDestNode(),r=new w(this.t,this.ac,this._localStream,s,this.i.rtcViewer);this._arrayBufferMap[t]=r,r.mixingBuffer(e,function(){n.h.soundLevelDelegate&&n.i.startSoundLevel(),i&&i()})}},t.prototype.stopMixingBuffer=function(t){if(t&&this._arrayBufferMap[t])return this.h.soundLevelDelegate&&this.i.stopSoundLevel(),this._arrayBufferMap[t].stopMixingBuffer(),delete this._arrayBufferMap[t],this.h.soundLevelDelegate&&this.i.startSoundLevel(),!0;if((0,z.TE)(t)){for(var e in this.h.soundLevelDelegate&&this.i.stopSoundLevel(),this._arrayBufferMap)this._arrayBufferMap[e].stopMixingBuffer();return this.h.soundLevelDelegate&&this.i.startSoundLevel(),!0}return this.t.warn(y+" arrayBuffer no found"),!1},t.prototype.getEffectProgress=function(t){var e=this._effectList.find(function(e){return e.effectID==t});return e?e.processor.getProcess():(this.t.error(o+"  effect not found"),0)},t.prototype.seekAudioEffect=function(t,e){var i=this._effectList.find(function(e){return e.effectID==t});return i?(this.h.soundLevelDelegate&&this.i.stopSoundLevel(),i.processor.seekTo(e),this.h.soundLevelDelegate&&this.i.startSoundLevel(),!0):(this.t.error(o+" effect not found"),!1)},t.prototype.stopAudioManager=function(){this.stopMixingAudio(),this.stopMixingBuffer(),this.stopEffect()},t.prototype.createDestNode=function(){var t=null,e=this.i.createDestNode(this._localStream);return this.i.audioNodeQueue||((t=this.i.createSrcNode()).disconnect(),t.connect(e)),e},t.prototype.setMixingDelay=function(t){this._audioMixList.forEach(function(e){e.audioMix.setDelay(t)})},t}(),S=n(8866),N=n(327),O=function(t,e,i,n){return new(i||(i=Promise))(function(s,r){function u(t){try{c(n.next(t))}catch(t){r(t)}}function o(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(u,o)}c((n=n.apply(t,e||[])).next())})},M=function(t,e){var i,n,s,r,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function o(o){return function(c){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,o[0]&&(u=0)),u;)try{if(i=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,n=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(s=u.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){u.label=o[1];break}if(6===o[0]&&u.label<s[1]){u.label=s[1],s=o;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(o);break}s[2]&&u.ops.pop(),u.trys.pop();continue}o=e.call(t,u)}catch(t){o=[6,t],n=0}finally{i=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}},k=function(){function t(t,e,i,n,s,r){var u=this;this.t=t,this.dataReport=e,this.u=i,this.h=n,this.ac=s,this.rtcModules=r,this.buffer=null,this.blank=null,this.mixingDelay=0,(0,T.nr)()&&null==this.blank&&null==this.buffer&&(this.buffer=this.ac.createBuffer(1,1,this.ac.sampleRate),this.blank=this.ac.createBufferSource(),this.blank.buffer=this.buffer,this.blank.connect(this.ac.destination),this.blank.start()),this.rtcModules.bindListener("_engineConfigUpdate",function(t){var e=t.mixingAudioDelay+t.baseMixingAudioDelay;isNaN(e)||e===u.mixingDelay||(u.t.info("zc.am.mdu delay update:"+e+", origin:"+u.mixingDelay),u.mixingDelay=e,u.h.previewStreamList.forEach(function(t){t.audioMixManager&&t.audioMixManager.setMixingDelay(e)}))})}return t.prototype.preloadEffect=function(t,e,i){if(this.checkPreviewer(r,{effectID:t},{effectID:!0}))if(e&&(0,z.QP)(e)){if(this.u.audioEffectBuffer[t])return this.t.warn(r+" audio buffer already exists"),void(i&&i());this.t.info(r+" start preload effect"),this._preloadEffect(this.ac,t,e,i)}else this.t.error(r+" params error")},t.prototype.checkPreviewer=function(t,e,i){void 0===e&&(e={});var n=!!(null==i?void 0:i.effectID),s=!!(null==i?void 0:i.streamID),r=!!(null==i?void 0:i.previewer),u=e.effectID,o=e.streamID,c=o&&((0,z.QP)(o)?o:(0,N.L)(o,this.t));if((s||c)&&!(0,z.QP)(c)&&!(0,z.dr)(c))return this.t.error(t+" stream type error"),!1;if(n&&!u)return this.t.error(t+" effectID required"),!1;if(u&&!(0,z.QP)(u))return this.t.error(t+" effectID type error"),!1;if(r){var a=this.h.getPreviewer(c);return a||((0,z.QP)(c)?this.t.error(t+" stream is not publishing",{streamid:c}):this.t.error(t+" stream doesn't exist"),!1)}return!0},t.prototype.getEffectDuration=function(t){if(!this.checkPreviewer(o,{effectID:t},{effectID:!0}))return 0;var e=this.u.audioEffectBuffer[t];return e?e.duration?Math.floor(1e3*e.duration):0:(this.t.error(o+" effect not found"),0)},t.prototype.getEffectProgress=function(t,e){var i=this.checkPreviewer(o,{streamID:t,effectID:e},{effectID:!0,streamID:!0,previewer:!0});return(0,z.dd)(i)?0:this.getAudioManager(i).getEffectProgress(e)},t.prototype.seekAudioEffect=function(t,e,i){if(i<0)return this.t.error(o+" param time error "),!1;var n=this.checkPreviewer(o,{streamID:t,effectID:e},{effectID:!0,streamID:!0,previewer:!0});return!(0,z.dd)(n)&&this.getAudioManager(n).seekAudioEffect(e,i)},t.prototype.playEffect=function(t,e,i){return O(this,void 0,void 0,function(){var n,s,r,o,c=this;return M(this,function(a){switch(a.label){case 0:return n=(0,N.L)(t.stream,this.t)||t.streamID,s=t.path,this.checkPreviewer(u,{streamID:n,effectID:r=t.effectID},{streamID:!0,effectID:!0})?(o=this.u.audioEffectBuffer[r],s?o?(this.t.warn(u+" audio effect already exists"),[3,3]):[3,1]:[3,4]):[2];case 1:return[4,new S.l3(function(t,e){c.preloadEffect(r,s,function(i){i?(c.t.error(u+" preload audio effect failed"),e(i)):t(void 0)})})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!o)return this.t.error(u+" audio effect doesn't exists"),[2];a.label=5;case 5:return this._playEffect(t,e,i),[2]}})})},t.prototype.pauseEffect=function(t,e){var i=(0,z.QP)(t)?t:(0,N.L)(t,this.t);return this._pauseEffect(i,e)},t.prototype.resumeEffect=function(t,e){var i=(0,z.QP)(t)?t:(0,N.L)(t,this.t);return this._resumeEffect(i,e)},t.prototype.stopEffect=function(t,e){var i=(0,z.QP)(t)?t:(0,N.L)(t,this.t);return this._stopEffect(i,e)},t.prototype.unloadEffect=function(t){return!!this.checkPreviewer("zc.ue",{effectID:t},{effectID:!0})&&(delete this.u.audioEffectBuffer[t],!0)},t.prototype.setEffectVolume=function(t,e,i,n){if(!(0,z.Cs)(e)||e<0||e>200)return this.t.error(c+" volume must be a number between 0 and 200"),!1;var s=(0,z.QP)(t)?t:(0,N.L)(t,this.t),r=this.checkPreviewer(c,{streamID:s,effectID:i},{streamID:!0,previewer:!0});return!(0,z.dd)(r)&&this.getAudioManager(r).setEffectVolume(e/100,i,n)},t.prototype.startMixingAudio=function(t,e){var i=(0,z.QP)(t)?t:(0,N.L)(t,this.t);return this.t.info(a+" call "+i),i?e?(this.t.info(a+" end "+i),Array.isArray(e)&&0!==e.length&&e.every(function(t){return(0,z.Si)(t)})?this.l(i,e):(this.t.error(a+" audio list param type error"),!1)):(this.t.error(a+" no audio"),!1):(this.t.error(a+" stream not found"),!1)},t.prototype.stopMixingAudio=function(t,e){var i=(0,z.QP)(t)?t:(0,N.L)(t,this.t);return i?Array.isArray(e)&&0!==e.length||(0,z.TE)(e)?this._stopMixingAudio(i,e):(this.t.error(h+" audio param type error"),!1):(this.t.error(h+" stream not found"),!1)},t.prototype.mixingBuffer=function(t,e,i,n){var s=(0,z.QP)(t)?t:(0,N.L)(t,this.t);this.t.info(f+" call streamID: "+JSON.stringify(s)+" sourceID:"+e),s?e&&(0,z.QP)(e)?(this._mixingBuffer(s,e,i,n),this.t.info(f+" end")):this.t.error(f+" param source id format error"):this.t.error(f+" param streamid format error")},t.prototype.stopMixingBuffer=function(t,e){var i=(0,z.QP)(t)?t:(0,N.L)(t,this.t);return this._stopMixingBuffer(i,e)},t.prototype.setMixingAudioVolume=function(t,e,i){if(this.t.info(b+" call"),!t)return this.t.error(b+" stream not found"),!1;if(!(0,z.Cs)(e)||e<0||e>200)return this.t.error(b+" volume must be a number between 0 and 200"),!1;if(!i||!(0,z.Si)(i))return this.t.error(b+" no audio"),!1;var n=(0,z.QP)(t)?t:(0,N.L)(t,this.t);return this._setMixingAudioVolume(n,e,i)},t.prototype.getSoundLevel=function(t,e,i){var n="zc.gsl";(0,S.rA)(this.t,n);var s=this.h.getCloudSoundInterval();try{var r=this.h.createSoundLevel(this.ac,t,this.h.soundLevelInterval,s,function(t){e(t)});this.u.audioStreamList[t.id]={mic:r.mic,script:r.soundMeter}}catch(t){i(t)}(0,S.EK)(this.t,n)},t.prototype.stopSoundLevel=function(t){this.t.info("zc.ssl call");var e=this.u.audioStreamList[t.id];e.mic.disconnect(),e.script.destroy(),delete this.u.audioStreamList[t.id]},t.prototype._preloadEffect=function(t,e,i,n){var s=this,r=new XMLHttpRequest;r.open("GET",i,!0),r.setRequestHeader("Range","none"),r.responseType="arraybuffer",r.onload=function(){if(200==r.status||304==r.status){t.decodeAudioData(r.response,function(t){s.t.info("zc.pe.0 effect '".concat(e,"' preload success")),s.u.audioEffectBuffer[e]=t,n&&n()},function(t){s.t.error("zc.pe.0 effect '".concat(e,"' preload fail. ")+t),n&&n(t)})}else{var i=r.statusText;s.t.error("zc.pe.0 effect '".concat(e,"' preload fail.")+i),n&&n(i)}},r.send()},t.prototype._playEffect=function(t,e,i){var n=(0,N.L)(t.stream,this.t)||t.streamID,s=this.u.audioEffectBuffer[t.effectID];if(s){var r=this.checkPreviewer(u,{streamID:n,effectID:t.effectID},{streamID:!0,effectID:!0,previewer:!0});(0,z.dd)(r)||this.getAudioManager(r).playEffect(t,s,e,i)}else this.t.error(u+" no audio buffer found")},t.prototype._pauseEffect=function(t,e){var i=this.checkPreviewer("zc.pe.2",{streamID:t,effectID:e},{streamID:!0,previewer:!0});return!(0,z.dd)(i)&&this.getAudioManager(i).pauseEffect(e)},t.prototype._resumeEffect=function(t,e){var i=this.checkPreviewer("zc.re",{streamID:t,effectID:e},{streamID:!0,previewer:!0});return!(0,z.dd)(i)&&this.getAudioManager(i).resumeEffect(e)},t.prototype._stopEffect=function(t,e){var i=this.checkPreviewer("zc.se",{streamID:t,effectID:e},{streamID:!0,previewer:!0});return!(0,z.dd)(i)&&this.getAudioManager(i).stopEffect(e)},t.prototype._setMixingAudioVolume=function(t,e,i){var n=this.h.getPreviewer(t);return n?this.getAudioManager(n).setMixingAudioVolume(e/100,i):(this.t.error("zc.sma.2 publisher doesn't exist"),!1)},t.prototype.l=function(t,e){var i=this.h.getPreviewer(t);return i?this.getAudioManager(i).startMixingAudio(e):((0,z.QP)(t)?this.t.error("zc.sma.0 "+t+" stream is not publishing"):this.t.error("zc.sma.0 stream doesn't exist"),!1)},t.prototype._stopMixingAudio=function(t,e){var i=this.h.getPreviewer(t);return i?this.getAudioManager(i).stopMixingAudio(e):(this.t.error("zc.sma.0 stream doesn't exist"),!1)},t.prototype._mixingBuffer=function(t,e,i,n){var s=this.checkPreviewer(d,{streamID:t,effectID:e},{effectID:!0,streamID:!0,previewer:!0});(0,z.dd)(s)||((0,z.SY)(i)?this.getAudioManager(s).mixingBuffer(e,i,n):this.t.error("zc.mb.0 array buffer not found"))},t.prototype._stopMixingBuffer=function(t,e){var i=this.checkPreviewer(d,{streamID:t,effectID:e},{effectID:!0,streamID:!0,previewer:!0});return!(0,z.dd)(i)&&this.getAudioManager(i).stopMixingBuffer(e)},t.prototype.getAudioManager=function(t){var e=t.audioMixManager;return e||(e=new A(t),1===this.u.engineConfig.choirRole&&e.setVolumeFactor(.6),t.audioMixManager=e),e},t}(),C={type:"AudioMix",install:function(t){Object.defineProperty(t.prototype,"initAudioMix",{value:function(){this.audioMixModule=new k(this.logger,this.dataReport,this.stateCenter,this.streamCenter,this.ac,this)}})}};return s}()});